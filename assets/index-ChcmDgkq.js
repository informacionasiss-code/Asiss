var lW=Object.defineProperty;var IT=e=>{throw TypeError(e)};var cW=(e,t,r)=>t in e?lW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Rr=(e,t,r)=>cW(e,typeof t!="symbol"?t+"":t,r),L_=(e,t,r)=>t.has(e)||IT("Cannot "+r);var ye=(e,t,r)=>(L_(e,t,"read from private field"),r?r.call(e):t.get(e)),Et=(e,t,r)=>t.has(e)?IT("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ct=(e,t,r,n)=>(L_(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),ar=(e,t,r)=>(L_(e,t,"access private method"),r);var F1=(e,t,r,n)=>({set _(a){ct(e,t,a,r)},get _(){return ye(e,t,n)}});function dI(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var $1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function uW(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var fI={exports:{}},w2={},hI={exports:{}},cr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv=Symbol.for("react.element"),dW=Symbol.for("react.portal"),fW=Symbol.for("react.fragment"),hW=Symbol.for("react.strict_mode"),pW=Symbol.for("react.profiler"),mW=Symbol.for("react.provider"),gW=Symbol.for("react.context"),vW=Symbol.for("react.forward_ref"),xW=Symbol.for("react.suspense"),yW=Symbol.for("react.memo"),bW=Symbol.for("react.lazy"),DT=Symbol.iterator;function wW(e){return e===null||typeof e!="object"?null:(e=DT&&e[DT]||e["@@iterator"],typeof e=="function"?e:null)}var pI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mI=Object.assign,gI={};function cp(e,t,r){this.props=e,this.context=t,this.refs=gI,this.updater=r||pI}cp.prototype.isReactComponent={};cp.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};cp.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function vI(){}vI.prototype=cp.prototype;function Y4(e,t,r){this.props=e,this.context=t,this.refs=gI,this.updater=r||pI}var J4=Y4.prototype=new vI;J4.constructor=Y4;mI(J4,cp.prototype);J4.isPureReactComponent=!0;var MT=Array.isArray,xI=Object.prototype.hasOwnProperty,Q4={current:null},yI={key:!0,ref:!0,__self:!0,__source:!0};function bI(e,t,r){var n,a={},i=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)xI.call(t,n)&&!yI.hasOwnProperty(n)&&(a[n]=t[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:Cv,type:e,key:i,ref:s,props:a,_owner:Q4.current}}function _W(e,t){return{$$typeof:Cv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Z4(e){return typeof e=="object"&&e!==null&&e.$$typeof===Cv}function SW(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var FT=/\/+/g;function R_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?SW(""+e.key):t.toString(36)}function Gx(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Cv:case dW:s=!0}}if(s)return s=e,a=a(s),e=n===""?"."+R_(s,0):n,MT(a)?(r="",e!=null&&(r=e.replace(FT,"$&/")+"/"),Gx(a,t,r,"",function(u){return u})):a!=null&&(Z4(a)&&(a=_W(a,r+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(FT,"$&/")+"/")+e)),t.push(a)),1;if(s=0,n=n===""?".":n+":",MT(e))for(var o=0;o<e.length;o++){i=e[o];var c=n+R_(i,o);s+=Gx(i,t,r,c,a)}else if(c=wW(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=n+R_(i,o++),s+=Gx(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function B1(e,t,r){if(e==null)return e;var n=[],a=0;return Gx(e,n,"","",function(i){return t.call(r,i,a++)}),n}function NW(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Di={current:null},Kx={transition:null},jW={ReactCurrentDispatcher:Di,ReactCurrentBatchConfig:Kx,ReactCurrentOwner:Q4};function wI(){throw Error("act(...) is not supported in production builds of React.")}cr.Children={map:B1,forEach:function(e,t,r){B1(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return B1(e,function(){t++}),t},toArray:function(e){return B1(e,function(t){return t})||[]},only:function(e){if(!Z4(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};cr.Component=cp;cr.Fragment=fW;cr.Profiler=pW;cr.PureComponent=Y4;cr.StrictMode=hW;cr.Suspense=xW;cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jW;cr.act=wI;cr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=mI({},e.props),a=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=Q4.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)xI.call(t,c)&&!yI.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Cv,type:e.type,key:a,ref:i,props:n,_owner:s}};cr.createContext=function(e){return e={$$typeof:gW,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:mW,_context:e},e.Consumer=e};cr.createElement=bI;cr.createFactory=function(e){var t=bI.bind(null,e);return t.type=e,t};cr.createRef=function(){return{current:null}};cr.forwardRef=function(e){return{$$typeof:vW,render:e}};cr.isValidElement=Z4;cr.lazy=function(e){return{$$typeof:bW,_payload:{_status:-1,_result:e},_init:NW}};cr.memo=function(e,t){return{$$typeof:yW,type:e,compare:t===void 0?null:t}};cr.startTransition=function(e){var t=Kx.transition;Kx.transition={};try{e()}finally{Kx.transition=t}};cr.unstable_act=wI;cr.useCallback=function(e,t){return Di.current.useCallback(e,t)};cr.useContext=function(e){return Di.current.useContext(e)};cr.useDebugValue=function(){};cr.useDeferredValue=function(e){return Di.current.useDeferredValue(e)};cr.useEffect=function(e,t){return Di.current.useEffect(e,t)};cr.useId=function(){return Di.current.useId()};cr.useImperativeHandle=function(e,t,r){return Di.current.useImperativeHandle(e,t,r)};cr.useInsertionEffect=function(e,t){return Di.current.useInsertionEffect(e,t)};cr.useLayoutEffect=function(e,t){return Di.current.useLayoutEffect(e,t)};cr.useMemo=function(e,t){return Di.current.useMemo(e,t)};cr.useReducer=function(e,t,r){return Di.current.useReducer(e,t,r)};cr.useRef=function(e){return Di.current.useRef(e)};cr.useState=function(e){return Di.current.useState(e)};cr.useSyncExternalStore=function(e,t,r){return Di.current.useSyncExternalStore(e,t,r)};cr.useTransition=function(){return Di.current.useTransition()};cr.version="18.3.1";hI.exports=cr;var M=hI.exports;const we=kr(M),AW=dI({__proto__:null,default:we},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EW=M,TW=Symbol.for("react.element"),CW=Symbol.for("react.fragment"),kW=Object.prototype.hasOwnProperty,OW=EW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,PW={key:!0,ref:!0,__self:!0,__source:!0};function _I(e,t,r){var n,a={},i=null,s=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)kW.call(t,n)&&!PW.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:TW,type:e,key:i,ref:s,props:a,_owner:OW.current}}w2.Fragment=CW;w2.jsx=_I;w2.jsxs=_I;fI.exports=w2;var l=fI.exports,AS={},SI={exports:{}},Os={},NI={exports:{}},jI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,ie){var pe=K.length;K.push(ie);e:for(;0<pe;){var me=pe-1>>>1,O=K[me];if(0<a(O,ie))K[me]=ie,K[pe]=O,pe=me;else break e}}function r(K){return K.length===0?null:K[0]}function n(K){if(K.length===0)return null;var ie=K[0],pe=K.pop();if(pe!==ie){K[0]=pe;e:for(var me=0,O=K.length,F=O>>>1;me<F;){var B=2*(me+1)-1,U=K[B],Y=B+1,oe=K[Y];if(0>a(U,pe))Y<O&&0>a(oe,U)?(K[me]=oe,K[Y]=pe,me=Y):(K[me]=U,K[B]=pe,me=B);else if(Y<O&&0>a(oe,pe))K[me]=oe,K[Y]=pe,me=Y;else break e}}return ie}function a(K,ie){var pe=K.sortIndex-ie.sortIndex;return pe!==0?pe:K.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var c=[],u=[],d=1,f=null,p=3,h=!1,v=!1,m=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(K){for(var ie=r(u);ie!==null;){if(ie.callback===null)n(u);else if(ie.startTime<=K)n(u),ie.sortIndex=ie.expirationTime,t(c,ie);else break;ie=r(u)}}function S(K){if(m=!1,b(K),!v)if(r(c)!==null)v=!0,se(_);else{var ie=r(u);ie!==null&&Z(S,ie.startTime-K)}}function _(K,ie){v=!1,m&&(m=!1,y(E),E=-1),h=!0;var pe=p;try{for(b(ie),f=r(c);f!==null&&(!(f.expirationTime>ie)||K&&!k());){var me=f.callback;if(typeof me=="function"){f.callback=null,p=f.priorityLevel;var O=me(f.expirationTime<=ie);ie=e.unstable_now(),typeof O=="function"?f.callback=O:f===r(c)&&n(c),b(ie)}else n(c);f=r(c)}if(f!==null)var F=!0;else{var B=r(u);B!==null&&Z(S,B.startTime-ie),F=!1}return F}finally{f=null,p=pe,h=!1}}var j=!1,A=null,E=-1,T=5,L=-1;function k(){return!(e.unstable_now()-L<T)}function R(){if(A!==null){var K=e.unstable_now();L=K;var ie=!0;try{ie=A(!0,K)}finally{ie?D():(j=!1,A=null)}}else j=!1}var D;if(typeof g=="function")D=function(){g(R)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,X=q.port2;q.port1.onmessage=R,D=function(){X.postMessage(null)}}else D=function(){x(R,0)};function se(K){A=K,j||(j=!0,D())}function Z(K,ie){E=x(function(){K(e.unstable_now())},ie)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){v||h||(v=!0,se(_))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(K){switch(p){case 1:case 2:case 3:var ie=3;break;default:ie=p}var pe=p;p=ie;try{return K()}finally{p=pe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,ie){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var pe=p;p=K;try{return ie()}finally{p=pe}},e.unstable_scheduleCallback=function(K,ie,pe){var me=e.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?me+pe:me):pe=me,K){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=pe+O,K={id:d++,callback:ie,priorityLevel:K,startTime:pe,expirationTime:O,sortIndex:-1},pe>me?(K.sortIndex=pe,t(u,K),r(c)===null&&K===r(u)&&(m?(y(E),E=-1):m=!0,Z(S,pe-me))):(K.sortIndex=O,t(c,K),v||h||(v=!0,se(_))),K},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(K){var ie=p;return function(){var pe=p;p=ie;try{return K.apply(this,arguments)}finally{p=pe}}}})(jI);NI.exports=jI;var LW=NI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RW=M,Cs=LW;function Je(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var AI=new Set,ug={};function Of(e,t){S0(e,t),S0(e+"Capture",t)}function S0(e,t){for(ug[e]=t,e=0;e<t.length;e++)AI.add(t[e])}var fc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ES=Object.prototype.hasOwnProperty,IW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$T={},BT={};function DW(e){return ES.call(BT,e)?!0:ES.call($T,e)?!1:IW.test(e)?BT[e]=!0:($T[e]=!0,!1)}function MW(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function FW(e,t,r,n){if(t===null||typeof t>"u"||MW(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Mi(e,t,r,n,a,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var Za={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Za[e]=new Mi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Za[t]=new Mi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Za[e]=new Mi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Za[e]=new Mi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Za[e]=new Mi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Za[e]=new Mi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Za[e]=new Mi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Za[e]=new Mi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Za[e]=new Mi(e,5,!1,e.toLowerCase(),null,!1,!1)});var eA=/[\-:]([a-z])/g;function tA(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(eA,tA);Za[t]=new Mi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(eA,tA);Za[t]=new Mi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(eA,tA);Za[t]=new Mi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Za[e]=new Mi(e,1,!1,e.toLowerCase(),null,!1,!1)});Za.xlinkHref=new Mi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Za[e]=new Mi(e,1,!1,e.toLowerCase(),null,!0,!0)});function rA(e,t,r,n){var a=Za.hasOwnProperty(t)?Za[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(FW(t,r,a,n)&&(r=null),n||a===null?DW(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ac=RW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U1=Symbol.for("react.element"),wh=Symbol.for("react.portal"),_h=Symbol.for("react.fragment"),nA=Symbol.for("react.strict_mode"),TS=Symbol.for("react.profiler"),EI=Symbol.for("react.provider"),TI=Symbol.for("react.context"),aA=Symbol.for("react.forward_ref"),CS=Symbol.for("react.suspense"),kS=Symbol.for("react.suspense_list"),iA=Symbol.for("react.memo"),nu=Symbol.for("react.lazy"),CI=Symbol.for("react.offscreen"),UT=Symbol.iterator;function sm(e){return e===null||typeof e!="object"?null:(e=UT&&e[UT]||e["@@iterator"],typeof e=="function"?e:null)}var Cn=Object.assign,I_;function Cm(e){if(I_===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);I_=t&&t[1]||""}return`
`+I_+e}var D_=!1;function M_(e,t){if(!e||D_)return"";D_=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),s=a.length-1,o=i.length-1;1<=s&&0<=o&&a[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==i[o]){if(s!==1||o!==1)do if(s--,o--,0>o||a[s]!==i[o]){var c=`
`+a[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=o);break}}}finally{D_=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Cm(e):""}function $W(e){switch(e.tag){case 5:return Cm(e.type);case 16:return Cm("Lazy");case 13:return Cm("Suspense");case 19:return Cm("SuspenseList");case 0:case 2:case 15:return e=M_(e.type,!1),e;case 11:return e=M_(e.type.render,!1),e;case 1:return e=M_(e.type,!0),e;default:return""}}function OS(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _h:return"Fragment";case wh:return"Portal";case TS:return"Profiler";case nA:return"StrictMode";case CS:return"Suspense";case kS:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case TI:return(e.displayName||"Context")+".Consumer";case EI:return(e._context.displayName||"Context")+".Provider";case aA:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case iA:return t=e.displayName||null,t!==null?t:OS(e.type)||"Memo";case nu:t=e._payload,e=e._init;try{return OS(e(t))}catch{}}return null}function BW(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return OS(t);case 8:return t===nA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Bu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kI(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function UW(e){var t=kI(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(s){n=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function z1(e){e._valueTracker||(e._valueTracker=UW(e))}function OI(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=kI(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function gy(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function PS(e,t){var r=t.checked;return Cn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function zT(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Bu(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function PI(e,t){t=t.checked,t!=null&&rA(e,"checked",t,!1)}function LS(e,t){PI(e,t);var r=Bu(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?RS(e,t.type,r):t.hasOwnProperty("defaultValue")&&RS(e,t.type,Bu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qT(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function RS(e,t,r){(t!=="number"||gy(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var km=Array.isArray;function Uh(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Bu(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function IS(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Je(91));return Cn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function HT(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Je(92));if(km(r)){if(1<r.length)throw Error(Je(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Bu(r)}}function LI(e,t){var r=Bu(t.value),n=Bu(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function WT(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function RI(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function DS(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?RI(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var q1,II=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(q1=q1||document.createElement("div"),q1.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=q1.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function dg(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Bm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zW=["Webkit","ms","Moz","O"];Object.keys(Bm).forEach(function(e){zW.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Bm[t]=Bm[e]})});function DI(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Bm.hasOwnProperty(e)&&Bm[e]?(""+t).trim():t+"px"}function MI(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=DI(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var qW=Cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function MS(e,t){if(t){if(qW[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Je(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Je(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Je(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Je(62))}}function FS(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $S=null;function sA(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var BS=null,zh=null,qh=null;function VT(e){if(e=Pv(e)){if(typeof BS!="function")throw Error(Je(280));var t=e.stateNode;t&&(t=A2(t),BS(e.stateNode,e.type,t))}}function FI(e){zh?qh?qh.push(e):qh=[e]:zh=e}function $I(){if(zh){var e=zh,t=qh;if(qh=zh=null,VT(e),t)for(e=0;e<t.length;e++)VT(t[e])}}function BI(e,t){return e(t)}function UI(){}var F_=!1;function zI(e,t,r){if(F_)return e(t,r);F_=!0;try{return BI(e,t,r)}finally{F_=!1,(zh!==null||qh!==null)&&(UI(),$I())}}function fg(e,t){var r=e.stateNode;if(r===null)return null;var n=A2(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Je(231,t,typeof r));return r}var US=!1;if(fc)try{var om={};Object.defineProperty(om,"passive",{get:function(){US=!0}}),window.addEventListener("test",om,om),window.removeEventListener("test",om,om)}catch{US=!1}function HW(e,t,r,n,a,i,s,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Um=!1,vy=null,xy=!1,zS=null,WW={onError:function(e){Um=!0,vy=e}};function VW(e,t,r,n,a,i,s,o,c){Um=!1,vy=null,HW.apply(WW,arguments)}function GW(e,t,r,n,a,i,s,o,c){if(VW.apply(this,arguments),Um){if(Um){var u=vy;Um=!1,vy=null}else throw Error(Je(198));xy||(xy=!0,zS=u)}}function Pf(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function qI(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function GT(e){if(Pf(e)!==e)throw Error(Je(188))}function KW(e){var t=e.alternate;if(!t){if(t=Pf(e),t===null)throw Error(Je(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return GT(a),e;if(i===n)return GT(a),t;i=i.sibling}throw Error(Je(188))}if(r.return!==n.return)r=a,n=i;else{for(var s=!1,o=a.child;o;){if(o===r){s=!0,r=a,n=i;break}if(o===n){s=!0,n=a,r=i;break}o=o.sibling}if(!s){for(o=i.child;o;){if(o===r){s=!0,r=i,n=a;break}if(o===n){s=!0,n=i,r=a;break}o=o.sibling}if(!s)throw Error(Je(189))}}if(r.alternate!==n)throw Error(Je(190))}if(r.tag!==3)throw Error(Je(188));return r.stateNode.current===r?e:t}function HI(e){return e=KW(e),e!==null?WI(e):null}function WI(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=WI(e);if(t!==null)return t;e=e.sibling}return null}var VI=Cs.unstable_scheduleCallback,KT=Cs.unstable_cancelCallback,XW=Cs.unstable_shouldYield,YW=Cs.unstable_requestPaint,Wn=Cs.unstable_now,JW=Cs.unstable_getCurrentPriorityLevel,oA=Cs.unstable_ImmediatePriority,GI=Cs.unstable_UserBlockingPriority,yy=Cs.unstable_NormalPriority,QW=Cs.unstable_LowPriority,KI=Cs.unstable_IdlePriority,_2=null,dl=null;function ZW(e){if(dl&&typeof dl.onCommitFiberRoot=="function")try{dl.onCommitFiberRoot(_2,e,void 0,(e.current.flags&128)===128)}catch{}}var Io=Math.clz32?Math.clz32:rV,eV=Math.log,tV=Math.LN2;function rV(e){return e>>>=0,e===0?32:31-(eV(e)/tV|0)|0}var H1=64,W1=4194304;function Om(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function by(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,s=r&268435455;if(s!==0){var o=s&~a;o!==0?n=Om(o):(i&=s,i!==0&&(n=Om(i)))}else s=r&~a,s!==0?n=Om(s):i!==0&&(n=Om(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Io(t),a=1<<r,n|=e[r],t&=~a;return n}function nV(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aV(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-Io(i),o=1<<s,c=a[s];c===-1?(!(o&r)||o&n)&&(a[s]=nV(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function qS(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function XI(){var e=H1;return H1<<=1,!(H1&4194240)&&(H1=64),e}function $_(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function kv(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Io(t),e[t]=r}function iV(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Io(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function lA(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Io(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Ur=0;function YI(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var JI,cA,QI,ZI,eD,HS=!1,V1=[],Tu=null,Cu=null,ku=null,hg=new Map,pg=new Map,ou=[],sV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function XT(e,t){switch(e){case"focusin":case"focusout":Tu=null;break;case"dragenter":case"dragleave":Cu=null;break;case"mouseover":case"mouseout":ku=null;break;case"pointerover":case"pointerout":hg.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":pg.delete(t.pointerId)}}function lm(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Pv(t),t!==null&&cA(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function oV(e,t,r,n,a){switch(t){case"focusin":return Tu=lm(Tu,e,t,r,n,a),!0;case"dragenter":return Cu=lm(Cu,e,t,r,n,a),!0;case"mouseover":return ku=lm(ku,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return hg.set(i,lm(hg.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,pg.set(i,lm(pg.get(i)||null,e,t,r,n,a)),!0}return!1}function tD(e){var t=Fd(e.target);if(t!==null){var r=Pf(t);if(r!==null){if(t=r.tag,t===13){if(t=qI(r),t!==null){e.blockedOn=t,eD(e.priority,function(){QI(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xx(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=WS(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);$S=n,r.target.dispatchEvent(n),$S=null}else return t=Pv(r),t!==null&&cA(t),e.blockedOn=r,!1;t.shift()}return!0}function YT(e,t,r){Xx(e)&&r.delete(t)}function lV(){HS=!1,Tu!==null&&Xx(Tu)&&(Tu=null),Cu!==null&&Xx(Cu)&&(Cu=null),ku!==null&&Xx(ku)&&(ku=null),hg.forEach(YT),pg.forEach(YT)}function cm(e,t){e.blockedOn===t&&(e.blockedOn=null,HS||(HS=!0,Cs.unstable_scheduleCallback(Cs.unstable_NormalPriority,lV)))}function mg(e){function t(a){return cm(a,e)}if(0<V1.length){cm(V1[0],e);for(var r=1;r<V1.length;r++){var n=V1[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Tu!==null&&cm(Tu,e),Cu!==null&&cm(Cu,e),ku!==null&&cm(ku,e),hg.forEach(t),pg.forEach(t),r=0;r<ou.length;r++)n=ou[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ou.length&&(r=ou[0],r.blockedOn===null);)tD(r),r.blockedOn===null&&ou.shift()}var Hh=Ac.ReactCurrentBatchConfig,wy=!0;function cV(e,t,r,n){var a=Ur,i=Hh.transition;Hh.transition=null;try{Ur=1,uA(e,t,r,n)}finally{Ur=a,Hh.transition=i}}function uV(e,t,r,n){var a=Ur,i=Hh.transition;Hh.transition=null;try{Ur=4,uA(e,t,r,n)}finally{Ur=a,Hh.transition=i}}function uA(e,t,r,n){if(wy){var a=WS(e,t,r,n);if(a===null)X_(e,t,n,_y,r),XT(e,n);else if(oV(a,e,t,r,n))n.stopPropagation();else if(XT(e,n),t&4&&-1<sV.indexOf(e)){for(;a!==null;){var i=Pv(a);if(i!==null&&JI(i),i=WS(e,t,r,n),i===null&&X_(e,t,n,_y,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else X_(e,t,n,null,r)}}var _y=null;function WS(e,t,r,n){if(_y=null,e=sA(n),e=Fd(e),e!==null)if(t=Pf(e),t===null)e=null;else if(r=t.tag,r===13){if(e=qI(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _y=e,null}function rD(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(JW()){case oA:return 1;case GI:return 4;case yy:case QW:return 16;case KI:return 536870912;default:return 16}default:return 16}}var wu=null,dA=null,Yx=null;function nD(){if(Yx)return Yx;var e,t=dA,r=t.length,n,a="value"in wu?wu.value:wu.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===a[i-n];n++);return Yx=a.slice(e,1<n?1-n:void 0)}function Jx(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function G1(){return!0}function JT(){return!1}function Ps(e){function t(r,n,a,i,s){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?G1:JT,this.isPropagationStopped=JT,this}return Cn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=G1)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=G1)},persist:function(){},isPersistent:G1}),t}var up={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fA=Ps(up),Ov=Cn({},up,{view:0,detail:0}),dV=Ps(Ov),B_,U_,um,S2=Cn({},Ov,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hA,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==um&&(um&&e.type==="mousemove"?(B_=e.screenX-um.screenX,U_=e.screenY-um.screenY):U_=B_=0,um=e),B_)},movementY:function(e){return"movementY"in e?e.movementY:U_}}),QT=Ps(S2),fV=Cn({},S2,{dataTransfer:0}),hV=Ps(fV),pV=Cn({},Ov,{relatedTarget:0}),z_=Ps(pV),mV=Cn({},up,{animationName:0,elapsedTime:0,pseudoElement:0}),gV=Ps(mV),vV=Cn({},up,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xV=Ps(vV),yV=Cn({},up,{data:0}),ZT=Ps(yV),bV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_V={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SV(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_V[e])?!!t[e]:!1}function hA(){return SV}var NV=Cn({},Ov,{key:function(e){if(e.key){var t=bV[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jx(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wV[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hA,charCode:function(e){return e.type==="keypress"?Jx(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jx(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jV=Ps(NV),AV=Cn({},S2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eC=Ps(AV),EV=Cn({},Ov,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hA}),TV=Ps(EV),CV=Cn({},up,{propertyName:0,elapsedTime:0,pseudoElement:0}),kV=Ps(CV),OV=Cn({},S2,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),PV=Ps(OV),LV=[9,13,27,32],pA=fc&&"CompositionEvent"in window,zm=null;fc&&"documentMode"in document&&(zm=document.documentMode);var RV=fc&&"TextEvent"in window&&!zm,aD=fc&&(!pA||zm&&8<zm&&11>=zm),tC=" ",rC=!1;function iD(e,t){switch(e){case"keyup":return LV.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sD(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Sh=!1;function IV(e,t){switch(e){case"compositionend":return sD(t);case"keypress":return t.which!==32?null:(rC=!0,tC);case"textInput":return e=t.data,e===tC&&rC?null:e;default:return null}}function DV(e,t){if(Sh)return e==="compositionend"||!pA&&iD(e,t)?(e=nD(),Yx=dA=wu=null,Sh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return aD&&t.locale!=="ko"?null:t.data;default:return null}}var MV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!MV[e.type]:t==="textarea"}function oD(e,t,r,n){FI(n),t=Sy(t,"onChange"),0<t.length&&(r=new fA("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var qm=null,gg=null;function FV(e){xD(e,0)}function N2(e){var t=Ah(e);if(OI(t))return e}function $V(e,t){if(e==="change")return t}var lD=!1;if(fc){var q_;if(fc){var H_="oninput"in document;if(!H_){var aC=document.createElement("div");aC.setAttribute("oninput","return;"),H_=typeof aC.oninput=="function"}q_=H_}else q_=!1;lD=q_&&(!document.documentMode||9<document.documentMode)}function iC(){qm&&(qm.detachEvent("onpropertychange",cD),gg=qm=null)}function cD(e){if(e.propertyName==="value"&&N2(gg)){var t=[];oD(t,gg,e,sA(e)),zI(FV,t)}}function BV(e,t,r){e==="focusin"?(iC(),qm=t,gg=r,qm.attachEvent("onpropertychange",cD)):e==="focusout"&&iC()}function UV(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return N2(gg)}function zV(e,t){if(e==="click")return N2(t)}function qV(e,t){if(e==="input"||e==="change")return N2(t)}function HV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $o=typeof Object.is=="function"?Object.is:HV;function vg(e,t){if($o(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!ES.call(t,a)||!$o(e[a],t[a]))return!1}return!0}function sC(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function oC(e,t){var r=sC(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=sC(r)}}function uD(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?uD(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function dD(){for(var e=window,t=gy();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=gy(e.document)}return t}function mA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function WV(e){var t=dD(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&uD(r.ownerDocument.documentElement,r)){if(n!==null&&mA(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=oC(r,i);var s=oC(r,n);a&&s&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var VV=fc&&"documentMode"in document&&11>=document.documentMode,Nh=null,VS=null,Hm=null,GS=!1;function lC(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;GS||Nh==null||Nh!==gy(n)||(n=Nh,"selectionStart"in n&&mA(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Hm&&vg(Hm,n)||(Hm=n,n=Sy(VS,"onSelect"),0<n.length&&(t=new fA("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Nh)))}function K1(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var jh={animationend:K1("Animation","AnimationEnd"),animationiteration:K1("Animation","AnimationIteration"),animationstart:K1("Animation","AnimationStart"),transitionend:K1("Transition","TransitionEnd")},W_={},fD={};fc&&(fD=document.createElement("div").style,"AnimationEvent"in window||(delete jh.animationend.animation,delete jh.animationiteration.animation,delete jh.animationstart.animation),"TransitionEvent"in window||delete jh.transitionend.transition);function j2(e){if(W_[e])return W_[e];if(!jh[e])return e;var t=jh[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in fD)return W_[e]=t[r];return e}var hD=j2("animationend"),pD=j2("animationiteration"),mD=j2("animationstart"),gD=j2("transitionend"),vD=new Map,cC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ku(e,t){vD.set(e,t),Of(t,[e])}for(var V_=0;V_<cC.length;V_++){var G_=cC[V_],GV=G_.toLowerCase(),KV=G_[0].toUpperCase()+G_.slice(1);Ku(GV,"on"+KV)}Ku(hD,"onAnimationEnd");Ku(pD,"onAnimationIteration");Ku(mD,"onAnimationStart");Ku("dblclick","onDoubleClick");Ku("focusin","onFocus");Ku("focusout","onBlur");Ku(gD,"onTransitionEnd");S0("onMouseEnter",["mouseout","mouseover"]);S0("onMouseLeave",["mouseout","mouseover"]);S0("onPointerEnter",["pointerout","pointerover"]);S0("onPointerLeave",["pointerout","pointerover"]);Of("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Of("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Of("onBeforeInput",["compositionend","keypress","textInput","paste"]);Of("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Of("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Of("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pm));function uC(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,GW(n,t,void 0,e),e.currentTarget=null}function xD(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;uC(a,o,u),i=c}else for(s=0;s<n.length;s++){if(o=n[s],c=o.instance,u=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;uC(a,o,u),i=c}}}if(xy)throw e=zS,xy=!1,zS=null,e}function cn(e,t){var r=t[QS];r===void 0&&(r=t[QS]=new Set);var n=e+"__bubble";r.has(n)||(yD(t,e,2,!1),r.add(n))}function K_(e,t,r){var n=0;t&&(n|=4),yD(r,e,n,t)}var X1="_reactListening"+Math.random().toString(36).slice(2);function xg(e){if(!e[X1]){e[X1]=!0,AI.forEach(function(r){r!=="selectionchange"&&(XV.has(r)||K_(r,!1,e),K_(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[X1]||(t[X1]=!0,K_("selectionchange",!1,t))}}function yD(e,t,r,n){switch(rD(t)){case 1:var a=cV;break;case 4:a=uV;break;default:a=uA}r=a.bind(null,t,r,e),a=void 0,!US||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function X_(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(s===4)for(s=n.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;s=s.return}for(;o!==null;){if(s=Fd(o),s===null)return;if(c=s.tag,c===5||c===6){n=i=s;continue e}o=o.parentNode}}n=n.return}zI(function(){var u=i,d=sA(r),f=[];e:{var p=vD.get(e);if(p!==void 0){var h=fA,v=e;switch(e){case"keypress":if(Jx(r)===0)break e;case"keydown":case"keyup":h=jV;break;case"focusin":v="focus",h=z_;break;case"focusout":v="blur",h=z_;break;case"beforeblur":case"afterblur":h=z_;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=QT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=hV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=TV;break;case hD:case pD:case mD:h=gV;break;case gD:h=kV;break;case"scroll":h=dV;break;case"wheel":h=PV;break;case"copy":case"cut":case"paste":h=xV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=eC}var m=(t&4)!==0,x=!m&&e==="scroll",y=m?p!==null?p+"Capture":null:p;m=[];for(var g=u,b;g!==null;){b=g;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,y!==null&&(S=fg(g,y),S!=null&&m.push(yg(g,S,b)))),x)break;g=g.return}0<m.length&&(p=new h(p,v,null,r,d),f.push({event:p,listeners:m}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",p&&r!==$S&&(v=r.relatedTarget||r.fromElement)&&(Fd(v)||v[hc]))break e;if((h||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,h?(v=r.relatedTarget||r.toElement,h=u,v=v?Fd(v):null,v!==null&&(x=Pf(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(h=null,v=u),h!==v)){if(m=QT,S="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(m=eC,S="onPointerLeave",y="onPointerEnter",g="pointer"),x=h==null?p:Ah(h),b=v==null?p:Ah(v),p=new m(S,g+"leave",h,r,d),p.target=x,p.relatedTarget=b,S=null,Fd(d)===u&&(m=new m(y,g+"enter",v,r,d),m.target=b,m.relatedTarget=x,S=m),x=S,h&&v)t:{for(m=h,y=v,g=0,b=m;b;b=rh(b))g++;for(b=0,S=y;S;S=rh(S))b++;for(;0<g-b;)m=rh(m),g--;for(;0<b-g;)y=rh(y),b--;for(;g--;){if(m===y||y!==null&&m===y.alternate)break t;m=rh(m),y=rh(y)}m=null}else m=null;h!==null&&dC(f,p,h,m,!1),v!==null&&x!==null&&dC(f,x,v,m,!0)}}e:{if(p=u?Ah(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var _=$V;else if(nC(p))if(lD)_=qV;else{_=UV;var j=BV}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(_=zV);if(_&&(_=_(e,u))){oD(f,_,r,d);break e}j&&j(e,p,u),e==="focusout"&&(j=p._wrapperState)&&j.controlled&&p.type==="number"&&RS(p,"number",p.value)}switch(j=u?Ah(u):window,e){case"focusin":(nC(j)||j.contentEditable==="true")&&(Nh=j,VS=u,Hm=null);break;case"focusout":Hm=VS=Nh=null;break;case"mousedown":GS=!0;break;case"contextmenu":case"mouseup":case"dragend":GS=!1,lC(f,r,d);break;case"selectionchange":if(VV)break;case"keydown":case"keyup":lC(f,r,d)}var A;if(pA)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Sh?iD(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(aD&&r.locale!=="ko"&&(Sh||E!=="onCompositionStart"?E==="onCompositionEnd"&&Sh&&(A=nD()):(wu=d,dA="value"in wu?wu.value:wu.textContent,Sh=!0)),j=Sy(u,E),0<j.length&&(E=new ZT(E,e,null,r,d),f.push({event:E,listeners:j}),A?E.data=A:(A=sD(r),A!==null&&(E.data=A)))),(A=RV?IV(e,r):DV(e,r))&&(u=Sy(u,"onBeforeInput"),0<u.length&&(d=new ZT("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=A))}xD(f,t)})}function yg(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Sy(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=fg(e,r),i!=null&&n.unshift(yg(e,i,a)),i=fg(e,t),i!=null&&n.push(yg(e,i,a))),e=e.return}return n}function rh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function dC(e,t,r,n,a){for(var i=t._reactName,s=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,a?(c=fg(r,i),c!=null&&s.unshift(yg(r,c,o))):a||(c=fg(r,i),c!=null&&s.push(yg(r,c,o)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var YV=/\r\n?/g,JV=/\u0000|\uFFFD/g;function fC(e){return(typeof e=="string"?e:""+e).replace(YV,`
`).replace(JV,"")}function Y1(e,t,r){if(t=fC(t),fC(e)!==t&&r)throw Error(Je(425))}function Ny(){}var KS=null,XS=null;function YS(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var JS=typeof setTimeout=="function"?setTimeout:void 0,QV=typeof clearTimeout=="function"?clearTimeout:void 0,hC=typeof Promise=="function"?Promise:void 0,ZV=typeof queueMicrotask=="function"?queueMicrotask:typeof hC<"u"?function(e){return hC.resolve(null).then(e).catch(eG)}:JS;function eG(e){setTimeout(function(){throw e})}function Y_(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),mg(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);mg(t)}function Ou(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function pC(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var dp=Math.random().toString(36).slice(2),ll="__reactFiber$"+dp,bg="__reactProps$"+dp,hc="__reactContainer$"+dp,QS="__reactEvents$"+dp,tG="__reactListeners$"+dp,rG="__reactHandles$"+dp;function Fd(e){var t=e[ll];if(t)return t;for(var r=e.parentNode;r;){if(t=r[hc]||r[ll]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=pC(e);e!==null;){if(r=e[ll])return r;e=pC(e)}return t}e=r,r=e.parentNode}return null}function Pv(e){return e=e[ll]||e[hc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ah(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Je(33))}function A2(e){return e[bg]||null}var ZS=[],Eh=-1;function Xu(e){return{current:e}}function hn(e){0>Eh||(e.current=ZS[Eh],ZS[Eh]=null,Eh--)}function sn(e,t){Eh++,ZS[Eh]=e.current,e.current=t}var Uu={},mi=Xu(Uu),Yi=Xu(!1),df=Uu;function N0(e,t){var r=e.type.contextTypes;if(!r)return Uu;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ji(e){return e=e.childContextTypes,e!=null}function jy(){hn(Yi),hn(mi)}function mC(e,t,r){if(mi.current!==Uu)throw Error(Je(168));sn(mi,t),sn(Yi,r)}function bD(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(Je(108,BW(e)||"Unknown",a));return Cn({},r,n)}function Ay(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Uu,df=mi.current,sn(mi,e),sn(Yi,Yi.current),!0}function gC(e,t,r){var n=e.stateNode;if(!n)throw Error(Je(169));r?(e=bD(e,t,df),n.__reactInternalMemoizedMergedChildContext=e,hn(Yi),hn(mi),sn(mi,e)):hn(Yi),sn(Yi,r)}var Wl=null,E2=!1,J_=!1;function wD(e){Wl===null?Wl=[e]:Wl.push(e)}function nG(e){E2=!0,wD(e)}function Yu(){if(!J_&&Wl!==null){J_=!0;var e=0,t=Ur;try{var r=Wl;for(Ur=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Wl=null,E2=!1}catch(a){throw Wl!==null&&(Wl=Wl.slice(e+1)),VI(oA,Yu),a}finally{Ur=t,J_=!1}}return null}var Th=[],Ch=0,Ey=null,Ty=0,Gs=[],Ks=0,ff=null,Jl=1,Ql="";function Nd(e,t){Th[Ch++]=Ty,Th[Ch++]=Ey,Ey=e,Ty=t}function _D(e,t,r){Gs[Ks++]=Jl,Gs[Ks++]=Ql,Gs[Ks++]=ff,ff=e;var n=Jl;e=Ql;var a=32-Io(n)-1;n&=~(1<<a),r+=1;var i=32-Io(t)+a;if(30<i){var s=a-a%5;i=(n&(1<<s)-1).toString(32),n>>=s,a-=s,Jl=1<<32-Io(t)+a|r<<a|n,Ql=i+e}else Jl=1<<i|r<<a|n,Ql=e}function gA(e){e.return!==null&&(Nd(e,1),_D(e,1,0))}function vA(e){for(;e===Ey;)Ey=Th[--Ch],Th[Ch]=null,Ty=Th[--Ch],Th[Ch]=null;for(;e===ff;)ff=Gs[--Ks],Gs[Ks]=null,Ql=Gs[--Ks],Gs[Ks]=null,Jl=Gs[--Ks],Gs[Ks]=null}var Es=null,js=null,bn=!1,ko=null;function SD(e,t){var r=Ys(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function vC(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Es=e,js=Ou(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Es=e,js=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ff!==null?{id:Jl,overflow:Ql}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ys(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Es=e,js=null,!0):!1;default:return!1}}function eN(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tN(e){if(bn){var t=js;if(t){var r=t;if(!vC(e,t)){if(eN(e))throw Error(Je(418));t=Ou(r.nextSibling);var n=Es;t&&vC(e,t)?SD(n,r):(e.flags=e.flags&-4097|2,bn=!1,Es=e)}}else{if(eN(e))throw Error(Je(418));e.flags=e.flags&-4097|2,bn=!1,Es=e}}}function xC(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Es=e}function J1(e){if(e!==Es)return!1;if(!bn)return xC(e),bn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!YS(e.type,e.memoizedProps)),t&&(t=js)){if(eN(e))throw ND(),Error(Je(418));for(;t;)SD(e,t),t=Ou(t.nextSibling)}if(xC(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Je(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){js=Ou(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}js=null}}else js=Es?Ou(e.stateNode.nextSibling):null;return!0}function ND(){for(var e=js;e;)e=Ou(e.nextSibling)}function j0(){js=Es=null,bn=!1}function xA(e){ko===null?ko=[e]:ko.push(e)}var aG=Ac.ReactCurrentBatchConfig;function dm(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Je(309));var n=r.stateNode}if(!n)throw Error(Je(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var o=a.refs;s===null?delete o[i]:o[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(Je(284));if(!r._owner)throw Error(Je(290,e))}return e}function Q1(e,t){throw e=Object.prototype.toString.call(t),Error(Je(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yC(e){var t=e._init;return t(e._payload)}function jD(e){function t(y,g){if(e){var b=y.deletions;b===null?(y.deletions=[g],y.flags|=16):b.push(g)}}function r(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function n(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function a(y,g){return y=Iu(y,g),y.index=0,y.sibling=null,y}function i(y,g,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<g?(y.flags|=2,g):b):(y.flags|=2,g)):(y.flags|=1048576,g)}function s(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,g,b,S){return g===null||g.tag!==6?(g=a5(b,y.mode,S),g.return=y,g):(g=a(g,b),g.return=y,g)}function c(y,g,b,S){var _=b.type;return _===_h?d(y,g,b.props.children,S,b.key):g!==null&&(g.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===nu&&yC(_)===g.type)?(S=a(g,b.props),S.ref=dm(y,g,b),S.return=y,S):(S=ay(b.type,b.key,b.props,null,y.mode,S),S.ref=dm(y,g,b),S.return=y,S)}function u(y,g,b,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==b.containerInfo||g.stateNode.implementation!==b.implementation?(g=i5(b,y.mode,S),g.return=y,g):(g=a(g,b.children||[]),g.return=y,g)}function d(y,g,b,S,_){return g===null||g.tag!==7?(g=af(b,y.mode,S,_),g.return=y,g):(g=a(g,b),g.return=y,g)}function f(y,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return g=a5(""+g,y.mode,b),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case U1:return b=ay(g.type,g.key,g.props,null,y.mode,b),b.ref=dm(y,null,g),b.return=y,b;case wh:return g=i5(g,y.mode,b),g.return=y,g;case nu:var S=g._init;return f(y,S(g._payload),b)}if(km(g)||sm(g))return g=af(g,y.mode,b,null),g.return=y,g;Q1(y,g)}return null}function p(y,g,b,S){var _=g!==null?g.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:o(y,g,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case U1:return b.key===_?c(y,g,b,S):null;case wh:return b.key===_?u(y,g,b,S):null;case nu:return _=b._init,p(y,g,_(b._payload),S)}if(km(b)||sm(b))return _!==null?null:d(y,g,b,S,null);Q1(y,b)}return null}function h(y,g,b,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(b)||null,o(g,y,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case U1:return y=y.get(S.key===null?b:S.key)||null,c(g,y,S,_);case wh:return y=y.get(S.key===null?b:S.key)||null,u(g,y,S,_);case nu:var j=S._init;return h(y,g,b,j(S._payload),_)}if(km(S)||sm(S))return y=y.get(b)||null,d(g,y,S,_,null);Q1(g,S)}return null}function v(y,g,b,S){for(var _=null,j=null,A=g,E=g=0,T=null;A!==null&&E<b.length;E++){A.index>E?(T=A,A=null):T=A.sibling;var L=p(y,A,b[E],S);if(L===null){A===null&&(A=T);break}e&&A&&L.alternate===null&&t(y,A),g=i(L,g,E),j===null?_=L:j.sibling=L,j=L,A=T}if(E===b.length)return r(y,A),bn&&Nd(y,E),_;if(A===null){for(;E<b.length;E++)A=f(y,b[E],S),A!==null&&(g=i(A,g,E),j===null?_=A:j.sibling=A,j=A);return bn&&Nd(y,E),_}for(A=n(y,A);E<b.length;E++)T=h(A,y,E,b[E],S),T!==null&&(e&&T.alternate!==null&&A.delete(T.key===null?E:T.key),g=i(T,g,E),j===null?_=T:j.sibling=T,j=T);return e&&A.forEach(function(k){return t(y,k)}),bn&&Nd(y,E),_}function m(y,g,b,S){var _=sm(b);if(typeof _!="function")throw Error(Je(150));if(b=_.call(b),b==null)throw Error(Je(151));for(var j=_=null,A=g,E=g=0,T=null,L=b.next();A!==null&&!L.done;E++,L=b.next()){A.index>E?(T=A,A=null):T=A.sibling;var k=p(y,A,L.value,S);if(k===null){A===null&&(A=T);break}e&&A&&k.alternate===null&&t(y,A),g=i(k,g,E),j===null?_=k:j.sibling=k,j=k,A=T}if(L.done)return r(y,A),bn&&Nd(y,E),_;if(A===null){for(;!L.done;E++,L=b.next())L=f(y,L.value,S),L!==null&&(g=i(L,g,E),j===null?_=L:j.sibling=L,j=L);return bn&&Nd(y,E),_}for(A=n(y,A);!L.done;E++,L=b.next())L=h(A,y,E,L.value,S),L!==null&&(e&&L.alternate!==null&&A.delete(L.key===null?E:L.key),g=i(L,g,E),j===null?_=L:j.sibling=L,j=L);return e&&A.forEach(function(R){return t(y,R)}),bn&&Nd(y,E),_}function x(y,g,b,S){if(typeof b=="object"&&b!==null&&b.type===_h&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case U1:e:{for(var _=b.key,j=g;j!==null;){if(j.key===_){if(_=b.type,_===_h){if(j.tag===7){r(y,j.sibling),g=a(j,b.props.children),g.return=y,y=g;break e}}else if(j.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===nu&&yC(_)===j.type){r(y,j.sibling),g=a(j,b.props),g.ref=dm(y,j,b),g.return=y,y=g;break e}r(y,j);break}else t(y,j);j=j.sibling}b.type===_h?(g=af(b.props.children,y.mode,S,b.key),g.return=y,y=g):(S=ay(b.type,b.key,b.props,null,y.mode,S),S.ref=dm(y,g,b),S.return=y,y=S)}return s(y);case wh:e:{for(j=b.key;g!==null;){if(g.key===j)if(g.tag===4&&g.stateNode.containerInfo===b.containerInfo&&g.stateNode.implementation===b.implementation){r(y,g.sibling),g=a(g,b.children||[]),g.return=y,y=g;break e}else{r(y,g);break}else t(y,g);g=g.sibling}g=i5(b,y.mode,S),g.return=y,y=g}return s(y);case nu:return j=b._init,x(y,g,j(b._payload),S)}if(km(b))return v(y,g,b,S);if(sm(b))return m(y,g,b,S);Q1(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,g!==null&&g.tag===6?(r(y,g.sibling),g=a(g,b),g.return=y,y=g):(r(y,g),g=a5(b,y.mode,S),g.return=y,y=g),s(y)):r(y,g)}return x}var A0=jD(!0),AD=jD(!1),Cy=Xu(null),ky=null,kh=null,yA=null;function bA(){yA=kh=ky=null}function wA(e){var t=Cy.current;hn(Cy),e._currentValue=t}function rN(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Wh(e,t){ky=e,yA=kh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Gi=!0),e.firstContext=null)}function eo(e){var t=e._currentValue;if(yA!==e)if(e={context:e,memoizedValue:t,next:null},kh===null){if(ky===null)throw Error(Je(308));kh=e,ky.dependencies={lanes:0,firstContext:e}}else kh=kh.next=e;return t}var $d=null;function _A(e){$d===null?$d=[e]:$d.push(e)}function ED(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,_A(t)):(r.next=a.next,a.next=r),t.interleaved=r,pc(e,n)}function pc(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var au=!1;function SA(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TD(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function nc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pu(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,br&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,pc(e,r)}return a=n.interleaved,a===null?(t.next=t,_A(n)):(t.next=a.next,a.next=t),n.interleaved=t,pc(e,r)}function Qx(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,lA(e,r)}}function bC(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=s:i=i.next=s,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Oy(e,t,r,n){var a=e.updateQueue;au=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,u=c.next;c.next=null,s===null?i=u:s.next=u,s=c;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==s&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;s=0,d=u=c=null,o=i;do{var p=o.lane,h=o.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,m=o;switch(p=t,h=r,m.tag){case 1:if(v=m.payload,typeof v=="function"){f=v.call(h,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=m.payload,p=typeof v=="function"?v.call(h,f,p):v,p==null)break e;f=Cn({},f,p);break e;case 2:au=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[o]:p.push(o))}else h={eventTime:h,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,s|=p;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;p=o,o=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do s|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);pf|=s,e.lanes=s,e.memoizedState=f}}function wC(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Je(191,a));a.call(n)}}}var Lv={},fl=Xu(Lv),wg=Xu(Lv),_g=Xu(Lv);function Bd(e){if(e===Lv)throw Error(Je(174));return e}function NA(e,t){switch(sn(_g,t),sn(wg,e),sn(fl,Lv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:DS(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=DS(t,e)}hn(fl),sn(fl,t)}function E0(){hn(fl),hn(wg),hn(_g)}function CD(e){Bd(_g.current);var t=Bd(fl.current),r=DS(t,e.type);t!==r&&(sn(wg,e),sn(fl,r))}function jA(e){wg.current===e&&(hn(fl),hn(wg))}var jn=Xu(0);function Py(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Q_=[];function AA(){for(var e=0;e<Q_.length;e++)Q_[e]._workInProgressVersionPrimary=null;Q_.length=0}var Zx=Ac.ReactCurrentDispatcher,Z_=Ac.ReactCurrentBatchConfig,hf=0,En=null,xa=null,Ea=null,Ly=!1,Wm=!1,Sg=0,iG=0;function ni(){throw Error(Je(321))}function EA(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!$o(e[r],t[r]))return!1;return!0}function TA(e,t,r,n,a,i){if(hf=i,En=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zx.current=e===null||e.memoizedState===null?cG:uG,e=r(n,a),Wm){i=0;do{if(Wm=!1,Sg=0,25<=i)throw Error(Je(301));i+=1,Ea=xa=null,t.updateQueue=null,Zx.current=dG,e=r(n,a)}while(Wm)}if(Zx.current=Ry,t=xa!==null&&xa.next!==null,hf=0,Ea=xa=En=null,Ly=!1,t)throw Error(Je(300));return e}function CA(){var e=Sg!==0;return Sg=0,e}function nl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ea===null?En.memoizedState=Ea=e:Ea=Ea.next=e,Ea}function to(){if(xa===null){var e=En.alternate;e=e!==null?e.memoizedState:null}else e=xa.next;var t=Ea===null?En.memoizedState:Ea.next;if(t!==null)Ea=t,xa=e;else{if(e===null)throw Error(Je(310));xa=e,e={memoizedState:xa.memoizedState,baseState:xa.baseState,baseQueue:xa.baseQueue,queue:xa.queue,next:null},Ea===null?En.memoizedState=Ea=e:Ea=Ea.next=e}return Ea}function Ng(e,t){return typeof t=="function"?t(e):t}function e5(e){var t=to(),r=t.queue;if(r===null)throw Error(Je(311));r.lastRenderedReducer=e;var n=xa,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var s=a.next;a.next=i.next,i.next=s}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var o=s=null,c=null,u=i;do{var d=u.lane;if((hf&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=f,s=n):c=c.next=f,En.lanes|=d,pf|=d}u=u.next}while(u!==null&&u!==i);c===null?s=n:c.next=o,$o(n,t.memoizedState)||(Gi=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,En.lanes|=i,pf|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function t5(e){var t=to(),r=t.queue;if(r===null)throw Error(Je(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var s=a=a.next;do i=e(i,s.action),s=s.next;while(s!==a);$o(i,t.memoizedState)||(Gi=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function kD(){}function OD(e,t){var r=En,n=to(),a=t(),i=!$o(n.memoizedState,a);if(i&&(n.memoizedState=a,Gi=!0),n=n.queue,kA(RD.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Ea!==null&&Ea.memoizedState.tag&1){if(r.flags|=2048,jg(9,LD.bind(null,r,n,a,t),void 0,null),Ra===null)throw Error(Je(349));hf&30||PD(r,t,a)}return a}function PD(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=En.updateQueue,t===null?(t={lastEffect:null,stores:null},En.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function LD(e,t,r,n){t.value=r,t.getSnapshot=n,ID(t)&&DD(e)}function RD(e,t,r){return r(function(){ID(t)&&DD(e)})}function ID(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!$o(e,r)}catch{return!0}}function DD(e){var t=pc(e,1);t!==null&&Do(t,e,1,-1)}function _C(e){var t=nl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ng,lastRenderedState:e},t.queue=e,e=e.dispatch=lG.bind(null,En,e),[t.memoizedState,e]}function jg(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=En.updateQueue,t===null?(t={lastEffect:null,stores:null},En.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function MD(){return to().memoizedState}function ey(e,t,r,n){var a=nl();En.flags|=e,a.memoizedState=jg(1|t,r,void 0,n===void 0?null:n)}function T2(e,t,r,n){var a=to();n=n===void 0?null:n;var i=void 0;if(xa!==null){var s=xa.memoizedState;if(i=s.destroy,n!==null&&EA(n,s.deps)){a.memoizedState=jg(t,r,i,n);return}}En.flags|=e,a.memoizedState=jg(1|t,r,i,n)}function SC(e,t){return ey(8390656,8,e,t)}function kA(e,t){return T2(2048,8,e,t)}function FD(e,t){return T2(4,2,e,t)}function $D(e,t){return T2(4,4,e,t)}function BD(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function UD(e,t,r){return r=r!=null?r.concat([e]):null,T2(4,4,BD.bind(null,t,e),r)}function OA(){}function zD(e,t){var r=to();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&EA(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function qD(e,t){var r=to();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&EA(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function HD(e,t,r){return hf&21?($o(r,t)||(r=XI(),En.lanes|=r,pf|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Gi=!0),e.memoizedState=r)}function sG(e,t){var r=Ur;Ur=r!==0&&4>r?r:4,e(!0);var n=Z_.transition;Z_.transition={};try{e(!1),t()}finally{Ur=r,Z_.transition=n}}function WD(){return to().memoizedState}function oG(e,t,r){var n=Ru(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},VD(e))GD(t,r);else if(r=ED(e,t,r,n),r!==null){var a=Li();Do(r,e,n,a),KD(r,t,n)}}function lG(e,t,r){var n=Ru(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(VD(e))GD(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,o=i(s,r);if(a.hasEagerState=!0,a.eagerState=o,$o(o,s)){var c=t.interleaved;c===null?(a.next=a,_A(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=ED(e,t,a,n),r!==null&&(a=Li(),Do(r,e,n,a),KD(r,t,n))}}function VD(e){var t=e.alternate;return e===En||t!==null&&t===En}function GD(e,t){Wm=Ly=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function KD(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,lA(e,r)}}var Ry={readContext:eo,useCallback:ni,useContext:ni,useEffect:ni,useImperativeHandle:ni,useInsertionEffect:ni,useLayoutEffect:ni,useMemo:ni,useReducer:ni,useRef:ni,useState:ni,useDebugValue:ni,useDeferredValue:ni,useTransition:ni,useMutableSource:ni,useSyncExternalStore:ni,useId:ni,unstable_isNewReconciler:!1},cG={readContext:eo,useCallback:function(e,t){return nl().memoizedState=[e,t===void 0?null:t],e},useContext:eo,useEffect:SC,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ey(4194308,4,BD.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ey(4194308,4,e,t)},useInsertionEffect:function(e,t){return ey(4,2,e,t)},useMemo:function(e,t){var r=nl();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=nl();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=oG.bind(null,En,e),[n.memoizedState,e]},useRef:function(e){var t=nl();return e={current:e},t.memoizedState=e},useState:_C,useDebugValue:OA,useDeferredValue:function(e){return nl().memoizedState=e},useTransition:function(){var e=_C(!1),t=e[0];return e=sG.bind(null,e[1]),nl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=En,a=nl();if(bn){if(r===void 0)throw Error(Je(407));r=r()}else{if(r=t(),Ra===null)throw Error(Je(349));hf&30||PD(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,SC(RD.bind(null,n,i,e),[e]),n.flags|=2048,jg(9,LD.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=nl(),t=Ra.identifierPrefix;if(bn){var r=Ql,n=Jl;r=(n&~(1<<32-Io(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Sg++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=iG++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},uG={readContext:eo,useCallback:zD,useContext:eo,useEffect:kA,useImperativeHandle:UD,useInsertionEffect:FD,useLayoutEffect:$D,useMemo:qD,useReducer:e5,useRef:MD,useState:function(){return e5(Ng)},useDebugValue:OA,useDeferredValue:function(e){var t=to();return HD(t,xa.memoizedState,e)},useTransition:function(){var e=e5(Ng)[0],t=to().memoizedState;return[e,t]},useMutableSource:kD,useSyncExternalStore:OD,useId:WD,unstable_isNewReconciler:!1},dG={readContext:eo,useCallback:zD,useContext:eo,useEffect:kA,useImperativeHandle:UD,useInsertionEffect:FD,useLayoutEffect:$D,useMemo:qD,useReducer:t5,useRef:MD,useState:function(){return t5(Ng)},useDebugValue:OA,useDeferredValue:function(e){var t=to();return xa===null?t.memoizedState=e:HD(t,xa.memoizedState,e)},useTransition:function(){var e=t5(Ng)[0],t=to().memoizedState;return[e,t]},useMutableSource:kD,useSyncExternalStore:OD,useId:WD,unstable_isNewReconciler:!1};function So(e,t){if(e&&e.defaultProps){t=Cn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function nN(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Cn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var C2={isMounted:function(e){return(e=e._reactInternals)?Pf(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Li(),a=Ru(e),i=nc(n,a);i.payload=t,r!=null&&(i.callback=r),t=Pu(e,i,a),t!==null&&(Do(t,e,a,n),Qx(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Li(),a=Ru(e),i=nc(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Pu(e,i,a),t!==null&&(Do(t,e,a,n),Qx(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Li(),n=Ru(e),a=nc(r,n);a.tag=2,t!=null&&(a.callback=t),t=Pu(e,a,n),t!==null&&(Do(t,e,n,r),Qx(t,e,n))}};function NC(e,t,r,n,a,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,s):t.prototype&&t.prototype.isPureReactComponent?!vg(r,n)||!vg(a,i):!0}function XD(e,t,r){var n=!1,a=Uu,i=t.contextType;return typeof i=="object"&&i!==null?i=eo(i):(a=Ji(t)?df:mi.current,n=t.contextTypes,i=(n=n!=null)?N0(e,a):Uu),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=C2,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function jC(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&C2.enqueueReplaceState(t,t.state,null)}function aN(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},SA(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=eo(i):(i=Ji(t)?df:mi.current,a.context=N0(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(nN(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&C2.enqueueReplaceState(a,a.state,null),Oy(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function T0(e,t){try{var r="",n=t;do r+=$W(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function r5(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function iN(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var fG=typeof WeakMap=="function"?WeakMap:Map;function YD(e,t,r){r=nc(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Dy||(Dy=!0,mN=n),iN(e,t)},r}function JD(e,t,r){r=nc(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){iN(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){iN(e,t),typeof n!="function"&&(Lu===null?Lu=new Set([this]):Lu.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function AC(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new fG;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=AG.bind(null,e,t,r),t.then(e,e))}function EC(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function TC(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=nc(-1,1),t.tag=2,Pu(r,t,1))),r.lanes|=1),e)}var hG=Ac.ReactCurrentOwner,Gi=!1;function Ni(e,t,r,n){t.child=e===null?AD(t,null,r,n):A0(t,e.child,r,n)}function CC(e,t,r,n,a){r=r.render;var i=t.ref;return Wh(t,a),n=TA(e,t,r,n,i,a),r=CA(),e!==null&&!Gi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,mc(e,t,a)):(bn&&r&&gA(t),t.flags|=1,Ni(e,t,n,a),t.child)}function kC(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!$A(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,QD(e,t,i,n,a)):(e=ay(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var s=i.memoizedProps;if(r=r.compare,r=r!==null?r:vg,r(s,n)&&e.ref===t.ref)return mc(e,t,a)}return t.flags|=1,e=Iu(i,n),e.ref=t.ref,e.return=t,t.child=e}function QD(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(vg(i,n)&&e.ref===t.ref)if(Gi=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Gi=!0);else return t.lanes=e.lanes,mc(e,t,a)}return sN(e,t,r,n,a)}function ZD(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},sn(Ph,vs),vs|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,sn(Ph,vs),vs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,sn(Ph,vs),vs|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,sn(Ph,vs),vs|=n;return Ni(e,t,a,r),t.child}function e7(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function sN(e,t,r,n,a){var i=Ji(r)?df:mi.current;return i=N0(t,i),Wh(t,a),r=TA(e,t,r,n,i,a),n=CA(),e!==null&&!Gi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,mc(e,t,a)):(bn&&n&&gA(t),t.flags|=1,Ni(e,t,r,a),t.child)}function OC(e,t,r,n,a){if(Ji(r)){var i=!0;Ay(t)}else i=!1;if(Wh(t,a),t.stateNode===null)ty(e,t),XD(t,r,n),aN(t,r,n,a),n=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var c=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=eo(u):(u=Ji(r)?df:mi.current,u=N0(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==n||c!==u)&&jC(t,s,n,u),au=!1;var p=t.memoizedState;s.state=p,Oy(t,n,s,a),c=t.memoizedState,o!==n||p!==c||Yi.current||au?(typeof d=="function"&&(nN(t,r,d,n),c=t.memoizedState),(o=au||NC(t,r,o,n,p,c,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),s.props=n,s.state=c,s.context=u,n=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,TD(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:So(t.type,o),s.props=u,f=t.pendingProps,p=s.context,c=r.contextType,typeof c=="object"&&c!==null?c=eo(c):(c=Ji(r)?df:mi.current,c=N0(t,c));var h=r.getDerivedStateFromProps;(d=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||p!==c)&&jC(t,s,n,c),au=!1,p=t.memoizedState,s.state=p,Oy(t,n,s,a);var v=t.memoizedState;o!==f||p!==v||Yi.current||au?(typeof h=="function"&&(nN(t,r,h,n),v=t.memoizedState),(u=au||NC(t,r,u,n,p,v,c)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,v,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,v,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),s.props=n,s.state=v,s.context=c,n=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return oN(e,t,r,n,i,a)}function oN(e,t,r,n,a,i){e7(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return a&&gC(t,r,!1),mc(e,t,i);n=t.stateNode,hG.current=t;var o=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=A0(t,e.child,null,i),t.child=A0(t,null,o,i)):Ni(e,t,o,i),t.memoizedState=n.state,a&&gC(t,r,!0),t.child}function t7(e){var t=e.stateNode;t.pendingContext?mC(e,t.pendingContext,t.pendingContext!==t.context):t.context&&mC(e,t.context,!1),NA(e,t.containerInfo)}function PC(e,t,r,n,a){return j0(),xA(a),t.flags|=256,Ni(e,t,r,n),t.child}var lN={dehydrated:null,treeContext:null,retryLane:0};function cN(e){return{baseLanes:e,cachePool:null,transitions:null}}function r7(e,t,r){var n=t.pendingProps,a=jn.current,i=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),sn(jn,a&1),e===null)return tN(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,i?(n=t.mode,i=t.child,s={mode:"hidden",children:s},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=P2(s,n,0,null),e=af(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=cN(r),t.memoizedState=lN,e):PA(t,s));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return pG(e,t,s,n,o,a,r);if(i){i=n.fallback,s=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(s&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Iu(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=Iu(o,i):(i=af(i,s,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,s=e.child.memoizedState,s=s===null?cN(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~r,t.memoizedState=lN,n}return i=e.child,e=i.sibling,n=Iu(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function PA(e,t){return t=P2({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Z1(e,t,r,n){return n!==null&&xA(n),A0(t,e.child,null,r),e=PA(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pG(e,t,r,n,a,i,s){if(r)return t.flags&256?(t.flags&=-257,n=r5(Error(Je(422))),Z1(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=P2({mode:"visible",children:n.children},a,0,null),i=af(i,a,s,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&A0(t,e.child,null,s),t.child.memoizedState=cN(s),t.memoizedState=lN,i);if(!(t.mode&1))return Z1(e,t,s,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(Je(419)),n=r5(i,n,void 0),Z1(e,t,s,n)}if(o=(s&e.childLanes)!==0,Gi||o){if(n=Ra,n!==null){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|s)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,pc(e,a),Do(n,e,a,-1))}return FA(),n=r5(Error(Je(421))),Z1(e,t,s,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=EG.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,js=Ou(a.nextSibling),Es=t,bn=!0,ko=null,e!==null&&(Gs[Ks++]=Jl,Gs[Ks++]=Ql,Gs[Ks++]=ff,Jl=e.id,Ql=e.overflow,ff=t),t=PA(t,n.children),t.flags|=4096,t)}function LC(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),rN(e.return,t,r)}function n5(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function n7(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Ni(e,t,n.children,r),n=jn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&LC(e,r,t);else if(e.tag===19)LC(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(sn(jn,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Py(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),n5(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Py(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}n5(t,!0,r,null,i);break;case"together":n5(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ty(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function mc(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),pf|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Je(153));if(t.child!==null){for(e=t.child,r=Iu(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Iu(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function mG(e,t,r){switch(t.tag){case 3:t7(t),j0();break;case 5:CD(t);break;case 1:Ji(t.type)&&Ay(t);break;case 4:NA(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;sn(Cy,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(sn(jn,jn.current&1),t.flags|=128,null):r&t.child.childLanes?r7(e,t,r):(sn(jn,jn.current&1),e=mc(e,t,r),e!==null?e.sibling:null);sn(jn,jn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return n7(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),sn(jn,jn.current),n)break;return null;case 22:case 23:return t.lanes=0,ZD(e,t,r)}return mc(e,t,r)}var a7,uN,i7,s7;a7=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};uN=function(){};i7=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Bd(fl.current);var i=null;switch(r){case"input":a=PS(e,a),n=PS(e,n),i=[];break;case"select":a=Cn({},a,{value:void 0}),n=Cn({},n,{value:void 0}),i=[];break;case"textarea":a=IS(e,a),n=IS(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ny)}MS(r,n);var s;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var o=a[u];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ug.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(o=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&o[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ug.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&cn("scroll",e),i||o===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};s7=function(e,t,r,n){r!==n&&(t.flags|=4)};function fm(e,t){if(!bn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ai(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function gG(e,t,r){var n=t.pendingProps;switch(vA(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ai(t),null;case 1:return Ji(t.type)&&jy(),ai(t),null;case 3:return n=t.stateNode,E0(),hn(Yi),hn(mi),AA(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(J1(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ko!==null&&(xN(ko),ko=null))),uN(e,t),ai(t),null;case 5:jA(t);var a=Bd(_g.current);if(r=t.type,e!==null&&t.stateNode!=null)i7(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Je(166));return ai(t),null}if(e=Bd(fl.current),J1(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ll]=t,n[bg]=i,e=(t.mode&1)!==0,r){case"dialog":cn("cancel",n),cn("close",n);break;case"iframe":case"object":case"embed":cn("load",n);break;case"video":case"audio":for(a=0;a<Pm.length;a++)cn(Pm[a],n);break;case"source":cn("error",n);break;case"img":case"image":case"link":cn("error",n),cn("load",n);break;case"details":cn("toggle",n);break;case"input":zT(n,i),cn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},cn("invalid",n);break;case"textarea":HT(n,i),cn("invalid",n)}MS(r,i),a=null;for(var s in i)if(i.hasOwnProperty(s)){var o=i[s];s==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&Y1(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Y1(n.textContent,o,e),a=["children",""+o]):ug.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&cn("scroll",n)}switch(r){case"input":z1(n),qT(n,i,!0);break;case"textarea":z1(n),WT(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Ny)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=RI(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[ll]=t,e[bg]=n,a7(e,t,!1,!1),t.stateNode=e;e:{switch(s=FS(r,n),r){case"dialog":cn("cancel",e),cn("close",e),a=n;break;case"iframe":case"object":case"embed":cn("load",e),a=n;break;case"video":case"audio":for(a=0;a<Pm.length;a++)cn(Pm[a],e);a=n;break;case"source":cn("error",e),a=n;break;case"img":case"image":case"link":cn("error",e),cn("load",e),a=n;break;case"details":cn("toggle",e),a=n;break;case"input":zT(e,n),a=PS(e,n),cn("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Cn({},n,{value:void 0}),cn("invalid",e);break;case"textarea":HT(e,n),a=IS(e,n),cn("invalid",e);break;default:a=n}MS(r,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?MI(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&II(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&dg(e,c):typeof c=="number"&&dg(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ug.hasOwnProperty(i)?c!=null&&i==="onScroll"&&cn("scroll",e):c!=null&&rA(e,i,c,s))}switch(r){case"input":z1(e),qT(e,n,!1);break;case"textarea":z1(e),WT(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Bu(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Uh(e,!!n.multiple,i,!1):n.defaultValue!=null&&Uh(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ny)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ai(t),null;case 6:if(e&&t.stateNode!=null)s7(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Je(166));if(r=Bd(_g.current),Bd(fl.current),J1(t)){if(n=t.stateNode,r=t.memoizedProps,n[ll]=t,(i=n.nodeValue!==r)&&(e=Es,e!==null))switch(e.tag){case 3:Y1(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Y1(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ll]=t,t.stateNode=n}return ai(t),null;case 13:if(hn(jn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(bn&&js!==null&&t.mode&1&&!(t.flags&128))ND(),j0(),t.flags|=98560,i=!1;else if(i=J1(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(Je(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Je(317));i[ll]=t}else j0(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ai(t),i=!1}else ko!==null&&(xN(ko),ko=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||jn.current&1?ba===0&&(ba=3):FA())),t.updateQueue!==null&&(t.flags|=4),ai(t),null);case 4:return E0(),uN(e,t),e===null&&xg(t.stateNode.containerInfo),ai(t),null;case 10:return wA(t.type._context),ai(t),null;case 17:return Ji(t.type)&&jy(),ai(t),null;case 19:if(hn(jn),i=t.memoizedState,i===null)return ai(t),null;if(n=(t.flags&128)!==0,s=i.rendering,s===null)if(n)fm(i,!1);else{if(ba!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Py(e),s!==null){for(t.flags|=128,fm(i,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return sn(jn,jn.current&1|2),t.child}e=e.sibling}i.tail!==null&&Wn()>C0&&(t.flags|=128,n=!0,fm(i,!1),t.lanes=4194304)}else{if(!n)if(e=Py(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),fm(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!bn)return ai(t),null}else 2*Wn()-i.renderingStartTime>C0&&r!==1073741824&&(t.flags|=128,n=!0,fm(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(r=i.last,r!==null?r.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Wn(),t.sibling=null,r=jn.current,sn(jn,n?r&1|2:r&1),t):(ai(t),null);case 22:case 23:return MA(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?vs&1073741824&&(ai(t),t.subtreeFlags&6&&(t.flags|=8192)):ai(t),null;case 24:return null;case 25:return null}throw Error(Je(156,t.tag))}function vG(e,t){switch(vA(t),t.tag){case 1:return Ji(t.type)&&jy(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return E0(),hn(Yi),hn(mi),AA(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return jA(t),null;case 13:if(hn(jn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Je(340));j0()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return hn(jn),null;case 4:return E0(),null;case 10:return wA(t.type._context),null;case 22:case 23:return MA(),null;case 24:return null;default:return null}}var ex=!1,ui=!1,xG=typeof WeakSet=="function"?WeakSet:Set,ht=null;function Oh(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Mn(e,t,n)}else r.current=null}function dN(e,t,r){try{r()}catch(n){Mn(e,t,n)}}var RC=!1;function yG(e,t){if(KS=wy,e=dD(),mA(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var s=0,o=-1,c=-1,u=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==r||a!==0&&f.nodeType!==3||(o=s+a),f!==i||n!==0&&f.nodeType!==3||(c=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)p=f,f=h;for(;;){if(f===e)break t;if(p===r&&++u===a&&(o=s),p===i&&++d===n&&(c=s),(h=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=h}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(XS={focusedElem:e,selectionRange:r},wy=!1,ht=t;ht!==null;)if(t=ht,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ht=e;else for(;ht!==null;){t=ht;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var m=v.memoizedProps,x=v.memoizedState,y=t.stateNode,g=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:So(t.type,m),x);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Je(163))}}catch(S){Mn(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,ht=e;break}ht=t.return}return v=RC,RC=!1,v}function Vm(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&dN(t,r,i)}a=a.next}while(a!==n)}}function k2(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function fN(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function o7(e){var t=e.alternate;t!==null&&(e.alternate=null,o7(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ll],delete t[bg],delete t[QS],delete t[tG],delete t[rG])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function l7(e){return e.tag===5||e.tag===3||e.tag===4}function IC(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||l7(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hN(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ny));else if(n!==4&&(e=e.child,e!==null))for(hN(e,t,r),e=e.sibling;e!==null;)hN(e,t,r),e=e.sibling}function pN(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(pN(e,t,r),e=e.sibling;e!==null;)pN(e,t,r),e=e.sibling}var Ga=null,Eo=!1;function Qc(e,t,r){for(r=r.child;r!==null;)c7(e,t,r),r=r.sibling}function c7(e,t,r){if(dl&&typeof dl.onCommitFiberUnmount=="function")try{dl.onCommitFiberUnmount(_2,r)}catch{}switch(r.tag){case 5:ui||Oh(r,t);case 6:var n=Ga,a=Eo;Ga=null,Qc(e,t,r),Ga=n,Eo=a,Ga!==null&&(Eo?(e=Ga,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ga.removeChild(r.stateNode));break;case 18:Ga!==null&&(Eo?(e=Ga,r=r.stateNode,e.nodeType===8?Y_(e.parentNode,r):e.nodeType===1&&Y_(e,r),mg(e)):Y_(Ga,r.stateNode));break;case 4:n=Ga,a=Eo,Ga=r.stateNode.containerInfo,Eo=!0,Qc(e,t,r),Ga=n,Eo=a;break;case 0:case 11:case 14:case 15:if(!ui&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&dN(r,t,s),a=a.next}while(a!==n)}Qc(e,t,r);break;case 1:if(!ui&&(Oh(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Mn(r,t,o)}Qc(e,t,r);break;case 21:Qc(e,t,r);break;case 22:r.mode&1?(ui=(n=ui)||r.memoizedState!==null,Qc(e,t,r),ui=n):Qc(e,t,r);break;default:Qc(e,t,r)}}function DC(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new xG),t.forEach(function(n){var a=TG.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function vo(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:Ga=o.stateNode,Eo=!1;break e;case 3:Ga=o.stateNode.containerInfo,Eo=!0;break e;case 4:Ga=o.stateNode.containerInfo,Eo=!0;break e}o=o.return}if(Ga===null)throw Error(Je(160));c7(i,s,a),Ga=null,Eo=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Mn(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)u7(t,e),t=t.sibling}function u7(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vo(t,e),Qo(e),n&4){try{Vm(3,e,e.return),k2(3,e)}catch(m){Mn(e,e.return,m)}try{Vm(5,e,e.return)}catch(m){Mn(e,e.return,m)}}break;case 1:vo(t,e),Qo(e),n&512&&r!==null&&Oh(r,r.return);break;case 5:if(vo(t,e),Qo(e),n&512&&r!==null&&Oh(r,r.return),e.flags&32){var a=e.stateNode;try{dg(a,"")}catch(m){Mn(e,e.return,m)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,s=r!==null?r.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&PI(a,i),FS(o,s);var u=FS(o,i);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];d==="style"?MI(a,f):d==="dangerouslySetInnerHTML"?II(a,f):d==="children"?dg(a,f):rA(a,d,f,u)}switch(o){case"input":LS(a,i);break;case"textarea":LI(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?Uh(a,!!i.multiple,h,!1):p!==!!i.multiple&&(i.defaultValue!=null?Uh(a,!!i.multiple,i.defaultValue,!0):Uh(a,!!i.multiple,i.multiple?[]:"",!1))}a[bg]=i}catch(m){Mn(e,e.return,m)}}break;case 6:if(vo(t,e),Qo(e),n&4){if(e.stateNode===null)throw Error(Je(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(m){Mn(e,e.return,m)}}break;case 3:if(vo(t,e),Qo(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{mg(t.containerInfo)}catch(m){Mn(e,e.return,m)}break;case 4:vo(t,e),Qo(e);break;case 13:vo(t,e),Qo(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(IA=Wn())),n&4&&DC(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(ui=(u=ui)||d,vo(t,e),ui=u):vo(t,e),Qo(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(ht=e,d=e.child;d!==null;){for(f=ht=d;ht!==null;){switch(p=ht,h=p.child,p.tag){case 0:case 11:case 14:case 15:Vm(4,p,p.return);break;case 1:Oh(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Mn(n,r,m)}}break;case 5:Oh(p,p.return);break;case 22:if(p.memoizedState!==null){FC(f);continue}}h!==null?(h.return=p,ht=h):FC(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,c=f.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=DI("display",s))}catch(m){Mn(e,e.return,m)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){Mn(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vo(t,e),Qo(e),n&4&&DC(e);break;case 21:break;default:vo(t,e),Qo(e)}}function Qo(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(l7(r)){var n=r;break e}r=r.return}throw Error(Je(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(dg(a,""),n.flags&=-33);var i=IC(e);pN(e,i,a);break;case 3:case 4:var s=n.stateNode.containerInfo,o=IC(e);hN(e,o,s);break;default:throw Error(Je(161))}}catch(c){Mn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bG(e,t,r){ht=e,d7(e)}function d7(e,t,r){for(var n=(e.mode&1)!==0;ht!==null;){var a=ht,i=a.child;if(a.tag===22&&n){var s=a.memoizedState!==null||ex;if(!s){var o=a.alternate,c=o!==null&&o.memoizedState!==null||ui;o=ex;var u=ui;if(ex=s,(ui=c)&&!u)for(ht=a;ht!==null;)s=ht,c=s.child,s.tag===22&&s.memoizedState!==null?$C(a):c!==null?(c.return=s,ht=c):$C(a);for(;i!==null;)ht=i,d7(i),i=i.sibling;ht=a,ex=o,ui=u}MC(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,ht=i):MC(e)}}function MC(e){for(;ht!==null;){var t=ht;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ui||k2(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ui)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:So(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&wC(t,i,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}wC(t,s,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&mg(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Je(163))}ui||t.flags&512&&fN(t)}catch(p){Mn(t,t.return,p)}}if(t===e){ht=null;break}if(r=t.sibling,r!==null){r.return=t.return,ht=r;break}ht=t.return}}function FC(e){for(;ht!==null;){var t=ht;if(t===e){ht=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ht=r;break}ht=t.return}}function $C(e){for(;ht!==null;){var t=ht;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{k2(4,t)}catch(c){Mn(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Mn(t,a,c)}}var i=t.return;try{fN(t)}catch(c){Mn(t,i,c)}break;case 5:var s=t.return;try{fN(t)}catch(c){Mn(t,s,c)}}}catch(c){Mn(t,t.return,c)}if(t===e){ht=null;break}var o=t.sibling;if(o!==null){o.return=t.return,ht=o;break}ht=t.return}}var wG=Math.ceil,Iy=Ac.ReactCurrentDispatcher,LA=Ac.ReactCurrentOwner,Qs=Ac.ReactCurrentBatchConfig,br=0,Ra=null,ia=null,Ja=0,vs=0,Ph=Xu(0),ba=0,Ag=null,pf=0,O2=0,RA=0,Gm=null,Vi=null,IA=0,C0=1/0,ql=null,Dy=!1,mN=null,Lu=null,tx=!1,_u=null,My=0,Km=0,gN=null,ry=-1,ny=0;function Li(){return br&6?Wn():ry!==-1?ry:ry=Wn()}function Ru(e){return e.mode&1?br&2&&Ja!==0?Ja&-Ja:aG.transition!==null?(ny===0&&(ny=XI()),ny):(e=Ur,e!==0||(e=window.event,e=e===void 0?16:rD(e.type)),e):1}function Do(e,t,r,n){if(50<Km)throw Km=0,gN=null,Error(Je(185));kv(e,r,n),(!(br&2)||e!==Ra)&&(e===Ra&&(!(br&2)&&(O2|=r),ba===4&&lu(e,Ja)),Qi(e,n),r===1&&br===0&&!(t.mode&1)&&(C0=Wn()+500,E2&&Yu()))}function Qi(e,t){var r=e.callbackNode;aV(e,t);var n=by(e,e===Ra?Ja:0);if(n===0)r!==null&&KT(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&KT(r),t===1)e.tag===0?nG(BC.bind(null,e)):wD(BC.bind(null,e)),ZV(function(){!(br&6)&&Yu()}),r=null;else{switch(YI(n)){case 1:r=oA;break;case 4:r=GI;break;case 16:r=yy;break;case 536870912:r=KI;break;default:r=yy}r=y7(r,f7.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function f7(e,t){if(ry=-1,ny=0,br&6)throw Error(Je(327));var r=e.callbackNode;if(Vh()&&e.callbackNode!==r)return null;var n=by(e,e===Ra?Ja:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Fy(e,n);else{t=n;var a=br;br|=2;var i=p7();(Ra!==e||Ja!==t)&&(ql=null,C0=Wn()+500,nf(e,t));do try{NG();break}catch(o){h7(e,o)}while(!0);bA(),Iy.current=i,br=a,ia!==null?t=0:(Ra=null,Ja=0,t=ba)}if(t!==0){if(t===2&&(a=qS(e),a!==0&&(n=a,t=vN(e,a))),t===1)throw r=Ag,nf(e,0),lu(e,n),Qi(e,Wn()),r;if(t===6)lu(e,n);else{if(a=e.current.alternate,!(n&30)&&!_G(a)&&(t=Fy(e,n),t===2&&(i=qS(e),i!==0&&(n=i,t=vN(e,i))),t===1))throw r=Ag,nf(e,0),lu(e,n),Qi(e,Wn()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(Je(345));case 2:jd(e,Vi,ql);break;case 3:if(lu(e,n),(n&130023424)===n&&(t=IA+500-Wn(),10<t)){if(by(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Li(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=JS(jd.bind(null,e,Vi,ql),t);break}jd(e,Vi,ql);break;case 4:if(lu(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var s=31-Io(n);i=1<<s,s=t[s],s>a&&(a=s),n&=~i}if(n=a,n=Wn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*wG(n/1960))-n,10<n){e.timeoutHandle=JS(jd.bind(null,e,Vi,ql),n);break}jd(e,Vi,ql);break;case 5:jd(e,Vi,ql);break;default:throw Error(Je(329))}}}return Qi(e,Wn()),e.callbackNode===r?f7.bind(null,e):null}function vN(e,t){var r=Gm;return e.current.memoizedState.isDehydrated&&(nf(e,t).flags|=256),e=Fy(e,t),e!==2&&(t=Vi,Vi=r,t!==null&&xN(t)),e}function xN(e){Vi===null?Vi=e:Vi.push.apply(Vi,e)}function _G(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!$o(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function lu(e,t){for(t&=~RA,t&=~O2,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Io(t),n=1<<r;e[r]=-1,t&=~n}}function BC(e){if(br&6)throw Error(Je(327));Vh();var t=by(e,0);if(!(t&1))return Qi(e,Wn()),null;var r=Fy(e,t);if(e.tag!==0&&r===2){var n=qS(e);n!==0&&(t=n,r=vN(e,n))}if(r===1)throw r=Ag,nf(e,0),lu(e,t),Qi(e,Wn()),r;if(r===6)throw Error(Je(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jd(e,Vi,ql),Qi(e,Wn()),null}function DA(e,t){var r=br;br|=1;try{return e(t)}finally{br=r,br===0&&(C0=Wn()+500,E2&&Yu())}}function mf(e){_u!==null&&_u.tag===0&&!(br&6)&&Vh();var t=br;br|=1;var r=Qs.transition,n=Ur;try{if(Qs.transition=null,Ur=1,e)return e()}finally{Ur=n,Qs.transition=r,br=t,!(br&6)&&Yu()}}function MA(){vs=Ph.current,hn(Ph)}function nf(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,QV(r)),ia!==null)for(r=ia.return;r!==null;){var n=r;switch(vA(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&jy();break;case 3:E0(),hn(Yi),hn(mi),AA();break;case 5:jA(n);break;case 4:E0();break;case 13:hn(jn);break;case 19:hn(jn);break;case 10:wA(n.type._context);break;case 22:case 23:MA()}r=r.return}if(Ra=e,ia=e=Iu(e.current,null),Ja=vs=t,ba=0,Ag=null,RA=O2=pf=0,Vi=Gm=null,$d!==null){for(t=0;t<$d.length;t++)if(r=$d[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var s=i.next;i.next=a,n.next=s}r.pending=n}$d=null}return e}function h7(e,t){do{var r=ia;try{if(bA(),Zx.current=Ry,Ly){for(var n=En.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Ly=!1}if(hf=0,Ea=xa=En=null,Wm=!1,Sg=0,LA.current=null,r===null||r.return===null){ba=1,Ag=t,ia=null;break}e:{var i=e,s=r.return,o=r,c=t;if(t=Ja,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=EC(s);if(h!==null){h.flags&=-257,TC(h,s,o,i,t),h.mode&1&&AC(i,u,t),t=h,c=u;var v=t.updateQueue;if(v===null){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}else{if(!(t&1)){AC(i,u,t),FA();break e}c=Error(Je(426))}}else if(bn&&o.mode&1){var x=EC(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),TC(x,s,o,i,t),xA(T0(c,o));break e}}i=c=T0(c,o),ba!==4&&(ba=2),Gm===null?Gm=[i]:Gm.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=YD(i,c,t);bC(i,y);break e;case 1:o=c;var g=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Lu===null||!Lu.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=JD(i,o,t);bC(i,S);break e}}i=i.return}while(i!==null)}g7(r)}catch(_){t=_,ia===r&&r!==null&&(ia=r=r.return);continue}break}while(!0)}function p7(){var e=Iy.current;return Iy.current=Ry,e===null?Ry:e}function FA(){(ba===0||ba===3||ba===2)&&(ba=4),Ra===null||!(pf&268435455)&&!(O2&268435455)||lu(Ra,Ja)}function Fy(e,t){var r=br;br|=2;var n=p7();(Ra!==e||Ja!==t)&&(ql=null,nf(e,t));do try{SG();break}catch(a){h7(e,a)}while(!0);if(bA(),br=r,Iy.current=n,ia!==null)throw Error(Je(261));return Ra=null,Ja=0,ba}function SG(){for(;ia!==null;)m7(ia)}function NG(){for(;ia!==null&&!XW();)m7(ia)}function m7(e){var t=x7(e.alternate,e,vs);e.memoizedProps=e.pendingProps,t===null?g7(e):ia=t,LA.current=null}function g7(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=vG(r,t),r!==null){r.flags&=32767,ia=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ba=6,ia=null;return}}else if(r=gG(r,t,vs),r!==null){ia=r;return}if(t=t.sibling,t!==null){ia=t;return}ia=t=e}while(t!==null);ba===0&&(ba=5)}function jd(e,t,r){var n=Ur,a=Qs.transition;try{Qs.transition=null,Ur=1,jG(e,t,r,n)}finally{Qs.transition=a,Ur=n}return null}function jG(e,t,r,n){do Vh();while(_u!==null);if(br&6)throw Error(Je(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Je(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(iV(e,i),e===Ra&&(ia=Ra=null,Ja=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||tx||(tx=!0,y7(yy,function(){return Vh(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Qs.transition,Qs.transition=null;var s=Ur;Ur=1;var o=br;br|=4,LA.current=null,yG(e,r),u7(r,e),WV(XS),wy=!!KS,XS=KS=null,e.current=r,bG(r),YW(),br=o,Ur=s,Qs.transition=i}else e.current=r;if(tx&&(tx=!1,_u=e,My=a),i=e.pendingLanes,i===0&&(Lu=null),ZW(r.stateNode),Qi(e,Wn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Dy)throw Dy=!1,e=mN,mN=null,e;return My&1&&e.tag!==0&&Vh(),i=e.pendingLanes,i&1?e===gN?Km++:(Km=0,gN=e):Km=0,Yu(),null}function Vh(){if(_u!==null){var e=YI(My),t=Qs.transition,r=Ur;try{if(Qs.transition=null,Ur=16>e?16:e,_u===null)var n=!1;else{if(e=_u,_u=null,My=0,br&6)throw Error(Je(331));var a=br;for(br|=4,ht=e.current;ht!==null;){var i=ht,s=i.child;if(ht.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(ht=u;ht!==null;){var d=ht;switch(d.tag){case 0:case 11:case 15:Vm(8,d,i)}var f=d.child;if(f!==null)f.return=d,ht=f;else for(;ht!==null;){d=ht;var p=d.sibling,h=d.return;if(o7(d),d===u){ht=null;break}if(p!==null){p.return=h,ht=p;break}ht=h}}}var v=i.alternate;if(v!==null){var m=v.child;if(m!==null){v.child=null;do{var x=m.sibling;m.sibling=null,m=x}while(m!==null)}}ht=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,ht=s;else e:for(;ht!==null;){if(i=ht,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Vm(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,ht=y;break e}ht=i.return}}var g=e.current;for(ht=g;ht!==null;){s=ht;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,ht=b;else e:for(s=g;ht!==null;){if(o=ht,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:k2(9,o)}}catch(_){Mn(o,o.return,_)}if(o===s){ht=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,ht=S;break e}ht=o.return}}if(br=a,Yu(),dl&&typeof dl.onPostCommitFiberRoot=="function")try{dl.onPostCommitFiberRoot(_2,e)}catch{}n=!0}return n}finally{Ur=r,Qs.transition=t}}return!1}function UC(e,t,r){t=T0(r,t),t=YD(e,t,1),e=Pu(e,t,1),t=Li(),e!==null&&(kv(e,1,t),Qi(e,t))}function Mn(e,t,r){if(e.tag===3)UC(e,e,r);else for(;t!==null;){if(t.tag===3){UC(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Lu===null||!Lu.has(n))){e=T0(r,e),e=JD(t,e,1),t=Pu(t,e,1),e=Li(),t!==null&&(kv(t,1,e),Qi(t,e));break}}t=t.return}}function AG(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Li(),e.pingedLanes|=e.suspendedLanes&r,Ra===e&&(Ja&r)===r&&(ba===4||ba===3&&(Ja&130023424)===Ja&&500>Wn()-IA?nf(e,0):RA|=r),Qi(e,t)}function v7(e,t){t===0&&(e.mode&1?(t=W1,W1<<=1,!(W1&130023424)&&(W1=4194304)):t=1);var r=Li();e=pc(e,t),e!==null&&(kv(e,t,r),Qi(e,r))}function EG(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),v7(e,r)}function TG(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Je(314))}n!==null&&n.delete(t),v7(e,r)}var x7;x7=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Yi.current)Gi=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Gi=!1,mG(e,t,r);Gi=!!(e.flags&131072)}else Gi=!1,bn&&t.flags&1048576&&_D(t,Ty,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ty(e,t),e=t.pendingProps;var a=N0(t,mi.current);Wh(t,r),a=TA(null,t,n,e,a,r);var i=CA();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ji(n)?(i=!0,Ay(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,SA(t),a.updater=C2,t.stateNode=a,a._reactInternals=t,aN(t,n,e,r),t=oN(null,t,n,!0,i,r)):(t.tag=0,bn&&i&&gA(t),Ni(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ty(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=kG(n),e=So(n,e),a){case 0:t=sN(null,t,n,e,r);break e;case 1:t=OC(null,t,n,e,r);break e;case 11:t=CC(null,t,n,e,r);break e;case 14:t=kC(null,t,n,So(n.type,e),r);break e}throw Error(Je(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:So(n,a),sN(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:So(n,a),OC(e,t,n,a,r);case 3:e:{if(t7(t),e===null)throw Error(Je(387));n=t.pendingProps,i=t.memoizedState,a=i.element,TD(e,t),Oy(t,n,null,r);var s=t.memoizedState;if(n=s.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=T0(Error(Je(423)),t),t=PC(e,t,n,r,a);break e}else if(n!==a){a=T0(Error(Je(424)),t),t=PC(e,t,n,r,a);break e}else for(js=Ou(t.stateNode.containerInfo.firstChild),Es=t,bn=!0,ko=null,r=AD(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(j0(),n===a){t=mc(e,t,r);break e}Ni(e,t,n,r)}t=t.child}return t;case 5:return CD(t),e===null&&tN(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,s=a.children,YS(n,a)?s=null:i!==null&&YS(n,i)&&(t.flags|=32),e7(e,t),Ni(e,t,s,r),t.child;case 6:return e===null&&tN(t),null;case 13:return r7(e,t,r);case 4:return NA(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=A0(t,null,n,r):Ni(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:So(n,a),CC(e,t,n,a,r);case 7:return Ni(e,t,t.pendingProps,r),t.child;case 8:return Ni(e,t,t.pendingProps.children,r),t.child;case 12:return Ni(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,s=a.value,sn(Cy,n._currentValue),n._currentValue=s,i!==null)if($o(i.value,s)){if(i.children===a.children&&!Yi.current){t=mc(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){s=i.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=nc(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),rN(i.return,r,t),o.lanes|=r;break}c=c.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(Je(341));s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),rN(s,r,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}Ni(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Wh(t,r),a=eo(a),n=n(a),t.flags|=1,Ni(e,t,n,r),t.child;case 14:return n=t.type,a=So(n,t.pendingProps),a=So(n.type,a),kC(e,t,n,a,r);case 15:return QD(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:So(n,a),ty(e,t),t.tag=1,Ji(n)?(e=!0,Ay(t)):e=!1,Wh(t,r),XD(t,n,a),aN(t,n,a,r),oN(null,t,n,!0,e,r);case 19:return n7(e,t,r);case 22:return ZD(e,t,r)}throw Error(Je(156,t.tag))};function y7(e,t){return VI(e,t)}function CG(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ys(e,t,r,n){return new CG(e,t,r,n)}function $A(e){return e=e.prototype,!(!e||!e.isReactComponent)}function kG(e){if(typeof e=="function")return $A(e)?1:0;if(e!=null){if(e=e.$$typeof,e===aA)return 11;if(e===iA)return 14}return 2}function Iu(e,t){var r=e.alternate;return r===null?(r=Ys(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ay(e,t,r,n,a,i){var s=2;if(n=e,typeof e=="function")$A(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case _h:return af(r.children,a,i,t);case nA:s=8,a|=8;break;case TS:return e=Ys(12,r,t,a|2),e.elementType=TS,e.lanes=i,e;case CS:return e=Ys(13,r,t,a),e.elementType=CS,e.lanes=i,e;case kS:return e=Ys(19,r,t,a),e.elementType=kS,e.lanes=i,e;case CI:return P2(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case EI:s=10;break e;case TI:s=9;break e;case aA:s=11;break e;case iA:s=14;break e;case nu:s=16,n=null;break e}throw Error(Je(130,e==null?e:typeof e,""))}return t=Ys(s,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function af(e,t,r,n){return e=Ys(7,e,n,t),e.lanes=r,e}function P2(e,t,r,n){return e=Ys(22,e,n,t),e.elementType=CI,e.lanes=r,e.stateNode={isHidden:!1},e}function a5(e,t,r){return e=Ys(6,e,null,t),e.lanes=r,e}function i5(e,t,r){return t=Ys(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function OG(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$_(0),this.expirationTimes=$_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$_(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function BA(e,t,r,n,a,i,s,o,c){return e=new OG(e,t,r,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ys(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},SA(i),e}function PG(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wh,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function b7(e){if(!e)return Uu;e=e._reactInternals;e:{if(Pf(e)!==e||e.tag!==1)throw Error(Je(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ji(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Je(171))}if(e.tag===1){var r=e.type;if(Ji(r))return bD(e,r,t)}return t}function w7(e,t,r,n,a,i,s,o,c){return e=BA(r,n,!0,e,a,i,s,o,c),e.context=b7(null),r=e.current,n=Li(),a=Ru(r),i=nc(n,a),i.callback=t??null,Pu(r,i,a),e.current.lanes=a,kv(e,a,n),Qi(e,n),e}function L2(e,t,r,n){var a=t.current,i=Li(),s=Ru(a);return r=b7(r),t.context===null?t.context=r:t.pendingContext=r,t=nc(i,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Pu(a,t,s),e!==null&&(Do(e,a,s,i),Qx(e,a,s)),s}function $y(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zC(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function UA(e,t){zC(e,t),(e=e.alternate)&&zC(e,t)}function LG(){return null}var _7=typeof reportError=="function"?reportError:function(e){console.error(e)};function zA(e){this._internalRoot=e}R2.prototype.render=zA.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Je(409));L2(e,t,null,null)};R2.prototype.unmount=zA.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;mf(function(){L2(null,e,null,null)}),t[hc]=null}};function R2(e){this._internalRoot=e}R2.prototype.unstable_scheduleHydration=function(e){if(e){var t=ZI();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ou.length&&t!==0&&t<ou[r].priority;r++);ou.splice(r,0,e),r===0&&tD(e)}};function qA(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function I2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function qC(){}function RG(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=$y(s);i.call(u)}}var s=w7(t,n,e,0,null,!1,!1,"",qC);return e._reactRootContainer=s,e[hc]=s.current,xg(e.nodeType===8?e.parentNode:e),mf(),s}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var u=$y(c);o.call(u)}}var c=BA(e,0,!1,null,null,!1,!1,"",qC);return e._reactRootContainer=c,e[hc]=c.current,xg(e.nodeType===8?e.parentNode:e),mf(function(){L2(t,c,r,n)}),c}function D2(e,t,r,n,a){var i=r._reactRootContainer;if(i){var s=i;if(typeof a=="function"){var o=a;a=function(){var c=$y(s);o.call(c)}}L2(t,s,e,a)}else s=RG(r,t,e,a,n);return $y(s)}JI=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Om(t.pendingLanes);r!==0&&(lA(t,r|1),Qi(t,Wn()),!(br&6)&&(C0=Wn()+500,Yu()))}break;case 13:mf(function(){var n=pc(e,1);if(n!==null){var a=Li();Do(n,e,1,a)}}),UA(e,1)}};cA=function(e){if(e.tag===13){var t=pc(e,134217728);if(t!==null){var r=Li();Do(t,e,134217728,r)}UA(e,134217728)}};QI=function(e){if(e.tag===13){var t=Ru(e),r=pc(e,t);if(r!==null){var n=Li();Do(r,e,t,n)}UA(e,t)}};ZI=function(){return Ur};eD=function(e,t){var r=Ur;try{return Ur=e,t()}finally{Ur=r}};BS=function(e,t,r){switch(t){case"input":if(LS(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=A2(n);if(!a)throw Error(Je(90));OI(n),LS(n,a)}}}break;case"textarea":LI(e,r);break;case"select":t=r.value,t!=null&&Uh(e,!!r.multiple,t,!1)}};BI=DA;UI=mf;var IG={usingClientEntryPoint:!1,Events:[Pv,Ah,A2,FI,$I,DA]},hm={findFiberByHostInstance:Fd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DG={bundleType:hm.bundleType,version:hm.version,rendererPackageName:hm.rendererPackageName,rendererConfig:hm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ac.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=HI(e),e===null?null:e.stateNode},findFiberByHostInstance:hm.findFiberByHostInstance||LG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rx.isDisabled&&rx.supportsFiber)try{_2=rx.inject(DG),dl=rx}catch{}}Os.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IG;Os.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qA(t))throw Error(Je(200));return PG(e,t,null,r)};Os.createRoot=function(e,t){if(!qA(e))throw Error(Je(299));var r=!1,n="",a=_7;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=BA(e,1,!1,null,null,r,!1,n,a),e[hc]=t.current,xg(e.nodeType===8?e.parentNode:e),new zA(t)};Os.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Je(188)):(e=Object.keys(e).join(","),Error(Je(268,e)));return e=HI(t),e=e===null?null:e.stateNode,e};Os.flushSync=function(e){return mf(e)};Os.hydrate=function(e,t,r){if(!I2(t))throw Error(Je(200));return D2(null,e,t,!0,r)};Os.hydrateRoot=function(e,t,r){if(!qA(e))throw Error(Je(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",s=_7;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=w7(t,null,e,1,r??null,a,!1,i,s),e[hc]=t.current,xg(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new R2(t)};Os.render=function(e,t,r){if(!I2(t))throw Error(Je(200));return D2(null,e,t,!1,r)};Os.unmountComponentAtNode=function(e){if(!I2(e))throw Error(Je(40));return e._reactRootContainer?(mf(function(){D2(null,null,e,!1,function(){e._reactRootContainer=null,e[hc]=null})}),!0):!1};Os.unstable_batchedUpdates=DA;Os.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!I2(r))throw Error(Je(200));if(e==null||e._reactInternals===void 0)throw Error(Je(38));return D2(e,t,r,!1,n)};Os.version="18.3.1-next-f1338f8080-20240426";function S7(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(S7)}catch(e){console.error(e)}}S7(),SI.exports=Os;var MG=SI.exports,HC=MG;AS.createRoot=HC.createRoot,AS.hydrateRoot=HC.hydrateRoot;var fp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},FG={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},fu,X4,eI,$G=(eI=class{constructor(){Et(this,fu,FG);Et(this,X4,!1)}setTimeoutProvider(e){ct(this,fu,e)}setTimeout(e,t){return ye(this,fu).setTimeout(e,t)}clearTimeout(e){ye(this,fu).clearTimeout(e)}setInterval(e,t){return ye(this,fu).setInterval(e,t)}clearInterval(e){ye(this,fu).clearInterval(e)}},fu=new WeakMap,X4=new WeakMap,eI),Ud=new $G;function BG(e){setTimeout(e,0)}var gf=typeof window>"u"||"Deno"in globalThis;function ji(){}function UG(e,t){return typeof e=="function"?e(t):e}function yN(e){return typeof e=="number"&&e>=0&&e!==1/0}function N7(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Du(e,t){return typeof e=="function"?e(t):e}function Vs(e,t){return typeof e=="function"?e(t):e}function WC(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:s,stale:o}=e;if(s){if(n){if(t.queryHash!==HA(s,t.options))return!1}else if(!Eg(t.queryKey,s))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||a&&a!==t.state.fetchStatus||i&&!i(t))}function VC(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(vf(t.options.mutationKey)!==vf(i))return!1}else if(!Eg(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function HA(e,t){return((t==null?void 0:t.queryKeyHashFn)||vf)(e)}function vf(e){return JSON.stringify(e,(t,r)=>bN(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Eg(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Eg(e[r],t[r])):!1}var zG=Object.prototype.hasOwnProperty;function j7(e,t){if(e===t)return e;const r=GC(e)&&GC(t);if(!r&&!(bN(e)&&bN(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),s=i.length,o=r?new Array(s):{};let c=0;for(let u=0;u<s;u++){const d=r?u:i[u],f=e[d],p=t[d];if(f===p){o[d]=f,(r?u<a:zG.call(e,d))&&c++;continue}if(f===null||p===null||typeof f!="object"||typeof p!="object"){o[d]=p;continue}const h=j7(f,p);o[d]=h,h===f&&c++}return a===s&&c===a?e:o}function By(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function GC(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function bN(e){if(!KC(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!KC(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function KC(e){return Object.prototype.toString.call(e)==="[object Object]"}function qG(e){return new Promise(t=>{Ud.setTimeout(t,e)})}function wN(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?j7(e,t):t}function HG(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function WG(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var WA=Symbol();function A7(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===WA?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function E7(e,t){return typeof e=="function"?e(...t):!!e}var Kd,hu,d0,tI,VG=(tI=class extends fp{constructor(){super();Et(this,Kd);Et(this,hu);Et(this,d0);ct(this,d0,t=>{if(!gf&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){ye(this,hu)||this.setEventListener(ye(this,d0))}onUnsubscribe(){var t;this.hasListeners()||((t=ye(this,hu))==null||t.call(this),ct(this,hu,void 0))}setEventListener(t){var r;ct(this,d0,t),(r=ye(this,hu))==null||r.call(this),ct(this,hu,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){ye(this,Kd)!==t&&(ct(this,Kd,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof ye(this,Kd)=="boolean"?ye(this,Kd):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Kd=new WeakMap,hu=new WeakMap,d0=new WeakMap,tI),VA=new VG;function _N(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var GG=BG;function KG(){let e=[],t=0,r=o=>{o()},n=o=>{o()},a=GG;const i=o=>{t?e.push(o):a(()=>{r(o)})},s=()=>{const o=e;e=[],o.length&&a(()=>{n(()=>{o.forEach(c=>{r(c)})})})};return{batch:o=>{let c;t++;try{c=o()}finally{t--,t||s()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{a=o}}}var ya=KG(),f0,pu,h0,rI,XG=(rI=class extends fp{constructor(){super();Et(this,f0,!0);Et(this,pu);Et(this,h0);ct(this,h0,t=>{if(!gf&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){ye(this,pu)||this.setEventListener(ye(this,h0))}onUnsubscribe(){var t;this.hasListeners()||((t=ye(this,pu))==null||t.call(this),ct(this,pu,void 0))}setEventListener(t){var r;ct(this,h0,t),(r=ye(this,pu))==null||r.call(this),ct(this,pu,t(this.setOnline.bind(this)))}setOnline(t){ye(this,f0)!==t&&(ct(this,f0,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return ye(this,f0)}},f0=new WeakMap,pu=new WeakMap,h0=new WeakMap,rI),Uy=new XG;function YG(e){return Math.min(1e3*2**e,3e4)}function T7(e){return(e??"online")==="online"?Uy.isOnline():!0}var SN=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function C7(e){let t=!1,r=0,n;const a=_N(),i=()=>a.status!=="pending",s=m=>{var x;if(!i()){const y=new SN(m);p(y),(x=e.onCancel)==null||x.call(e,y)}},o=()=>{t=!0},c=()=>{t=!1},u=()=>VA.isFocused()&&(e.networkMode==="always"||Uy.isOnline())&&e.canRun(),d=()=>T7(e.networkMode)&&e.canRun(),f=m=>{i()||(n==null||n(),a.resolve(m))},p=m=>{i()||(n==null||n(),a.reject(m))},h=()=>new Promise(m=>{var x;n=y=>{(i()||u())&&m(y)},(x=e.onPause)==null||x.call(e)}).then(()=>{var m;n=void 0,i()||(m=e.onContinue)==null||m.call(e)}),v=()=>{if(i())return;let m;const x=r===0?e.initialPromise:void 0;try{m=x??e.fn()}catch(y){m=Promise.reject(y)}Promise.resolve(m).then(f).catch(y=>{var j;if(i())return;const g=e.retry??(gf?0:3),b=e.retryDelay??YG,S=typeof b=="function"?b(r,y):b,_=g===!0||typeof g=="number"&&r<g||typeof g=="function"&&g(r,y);if(t||!_){p(y);return}r++,(j=e.onFail)==null||j.call(e,r,y),qG(S).then(()=>u()?void 0:h()).then(()=>{t?p(y):v()})})};return{promise:a,status:()=>a.status,cancel:s,continue:()=>(n==null||n(),a),cancelRetry:o,continueRetry:c,canStart:d,start:()=>(d()?v():h().then(v),a)}}var Xd,nI,k7=(nI=class{constructor(){Et(this,Xd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),yN(this.gcTime)&&ct(this,Xd,Ud.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(gf?1/0:5*60*1e3))}clearGcTimeout(){ye(this,Xd)&&(Ud.clearTimeout(ye(this,Xd)),ct(this,Xd,void 0))}},Xd=new WeakMap,nI),Yd,p0,Hs,Jd,ja,Nv,Qd,jo,zl,aI,JG=(aI=class extends k7{constructor(t){super();Et(this,jo);Et(this,Yd);Et(this,p0);Et(this,Hs);Et(this,Jd);Et(this,ja);Et(this,Nv);Et(this,Qd);ct(this,Qd,!1),ct(this,Nv,t.defaultOptions),this.setOptions(t.options),this.observers=[],ct(this,Jd,t.client),ct(this,Hs,ye(this,Jd).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ct(this,Yd,YC(this.options)),this.state=t.state??ye(this,Yd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=ye(this,ja))==null?void 0:t.promise}setOptions(t){if(this.options={...ye(this,Nv),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=YC(this.options);r.data!==void 0&&(this.setState(XC(r.data,r.dataUpdatedAt)),ct(this,Yd,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ye(this,Hs).remove(this)}setData(t,r){const n=wN(this.state.data,t,this.options);return ar(this,jo,zl).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){ar(this,jo,zl).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=ye(this,ja))==null?void 0:n.promise;return(a=ye(this,ja))==null||a.cancel(t),r?r.then(ji).catch(ji):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ye(this,Yd))}isActive(){return this.observers.some(t=>Vs(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===WA||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Du(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!N7(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=ye(this,ja))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=ye(this,ja))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),ye(this,Hs).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(ye(this,ja)&&(ye(this,Qd)?ye(this,ja).cancel({revert:!0}):ye(this,ja).cancelRetry()),this.scheduleGc()),ye(this,Hs).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ar(this,jo,zl).call(this,{type:"invalidate"})}async fetch(t,r){var c,u,d,f,p,h,v,m,x,y,g,b;if(this.state.fetchStatus!=="idle"&&((c=ye(this,ja))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ye(this,ja))return ye(this,ja).continueRetry(),ye(this,ja).promise}if(t&&this.setOptions(t),!this.options.queryFn){const S=this.observers.find(_=>_.options.queryFn);S&&this.setOptions(S.options)}const n=new AbortController,a=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(ct(this,Qd,!0),n.signal)})},i=()=>{const S=A7(this.options,r),j=(()=>{const A={client:ye(this,Jd),queryKey:this.queryKey,meta:this.meta};return a(A),A})();return ct(this,Qd,!1),this.options.persister?this.options.persister(S,j,this):S(j)},o=(()=>{const S={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:ye(this,Jd),state:this.state,fetchFn:i};return a(S),S})();(u=this.options.behavior)==null||u.onFetch(o,this),ct(this,p0,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&ar(this,jo,zl).call(this,{type:"fetch",meta:(f=o.fetchOptions)==null?void 0:f.meta}),ct(this,ja,C7({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,onCancel:S=>{S instanceof SN&&S.revert&&this.setState({...ye(this,p0),fetchStatus:"idle"}),n.abort()},onFail:(S,_)=>{ar(this,jo,zl).call(this,{type:"failed",failureCount:S,error:_})},onPause:()=>{ar(this,jo,zl).call(this,{type:"pause"})},onContinue:()=>{ar(this,jo,zl).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const S=await ye(this,ja).start();if(S===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(S),(h=(p=ye(this,Hs).config).onSuccess)==null||h.call(p,S,this),(m=(v=ye(this,Hs).config).onSettled)==null||m.call(v,S,this.state.error,this),S}catch(S){if(S instanceof SN){if(S.silent)return ye(this,ja).promise;if(S.revert){if(this.state.data===void 0)throw S;return this.state.data}}throw ar(this,jo,zl).call(this,{type:"error",error:S}),(y=(x=ye(this,Hs).config).onError)==null||y.call(x,S,this),(b=(g=ye(this,Hs).config).onSettled)==null||b.call(g,this.state.data,S,this),S}finally{this.scheduleGc()}}},Yd=new WeakMap,p0=new WeakMap,Hs=new WeakMap,Jd=new WeakMap,ja=new WeakMap,Nv=new WeakMap,Qd=new WeakMap,jo=new WeakSet,zl=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...O7(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...XC(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ct(this,p0,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),ya.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),ye(this,Hs).notify({query:this,type:"updated",action:t})})},aI);function O7(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:T7(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function XC(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function YC(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var qi,hr,jv,_i,Zd,m0,Gl,mu,Av,g0,v0,ef,tf,gu,x0,Cr,Lm,NN,jN,AN,EN,TN,CN,kN,P7,iI,QG=(iI=class extends fp{constructor(t,r){super();Et(this,Cr);Et(this,qi);Et(this,hr);Et(this,jv);Et(this,_i);Et(this,Zd);Et(this,m0);Et(this,Gl);Et(this,mu);Et(this,Av);Et(this,g0);Et(this,v0);Et(this,ef);Et(this,tf);Et(this,gu);Et(this,x0,new Set);this.options=r,ct(this,qi,t),ct(this,mu,null),ct(this,Gl,_N()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ye(this,hr).addObserver(this),JC(ye(this,hr),this.options)?ar(this,Cr,Lm).call(this):this.updateResult(),ar(this,Cr,EN).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ON(ye(this,hr),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ON(ye(this,hr),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ar(this,Cr,TN).call(this),ar(this,Cr,CN).call(this),ye(this,hr).removeObserver(this)}setOptions(t){const r=this.options,n=ye(this,hr);if(this.options=ye(this,qi).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Vs(this.options.enabled,ye(this,hr))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ar(this,Cr,kN).call(this),ye(this,hr).setOptions(this.options),r._defaulted&&!By(this.options,r)&&ye(this,qi).getQueryCache().notify({type:"observerOptionsUpdated",query:ye(this,hr),observer:this});const a=this.hasListeners();a&&QC(ye(this,hr),n,this.options,r)&&ar(this,Cr,Lm).call(this),this.updateResult(),a&&(ye(this,hr)!==n||Vs(this.options.enabled,ye(this,hr))!==Vs(r.enabled,ye(this,hr))||Du(this.options.staleTime,ye(this,hr))!==Du(r.staleTime,ye(this,hr)))&&ar(this,Cr,NN).call(this);const i=ar(this,Cr,jN).call(this);a&&(ye(this,hr)!==n||Vs(this.options.enabled,ye(this,hr))!==Vs(r.enabled,ye(this,hr))||i!==ye(this,gu))&&ar(this,Cr,AN).call(this,i)}getOptimisticResult(t){const r=ye(this,qi).getQueryCache().build(ye(this,qi),t),n=this.createResult(r,t);return eK(this,n)&&(ct(this,_i,n),ct(this,m0,this.options),ct(this,Zd,ye(this,hr).state)),n}getCurrentResult(){return ye(this,_i)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&ye(this,Gl).status==="pending"&&ye(this,Gl).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){ye(this,x0).add(t)}getCurrentQuery(){return ye(this,hr)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=ye(this,qi).defaultQueryOptions(t),n=ye(this,qi).getQueryCache().build(ye(this,qi),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return ar(this,Cr,Lm).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),ye(this,_i)))}createResult(t,r){var T;const n=ye(this,hr),a=this.options,i=ye(this,_i),s=ye(this,Zd),o=ye(this,m0),u=t!==n?t.state:ye(this,jv),{state:d}=t;let f={...d},p=!1,h;if(r._optimisticResults){const L=this.hasListeners(),k=!L&&JC(t,r),R=L&&QC(t,n,r,a);(k||R)&&(f={...f,...O7(d.data,t.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:v,errorUpdatedAt:m,status:x}=f;h=f.data;let y=!1;if(r.placeholderData!==void 0&&h===void 0&&x==="pending"){let L;i!=null&&i.isPlaceholderData&&r.placeholderData===(o==null?void 0:o.placeholderData)?(L=i.data,y=!0):L=typeof r.placeholderData=="function"?r.placeholderData((T=ye(this,v0))==null?void 0:T.state.data,ye(this,v0)):r.placeholderData,L!==void 0&&(x="success",h=wN(i==null?void 0:i.data,L,r),p=!0)}if(r.select&&h!==void 0&&!y)if(i&&h===(s==null?void 0:s.data)&&r.select===ye(this,Av))h=ye(this,g0);else try{ct(this,Av,r.select),h=r.select(h),h=wN(i==null?void 0:i.data,h,r),ct(this,g0,h),ct(this,mu,null)}catch(L){ct(this,mu,L)}ye(this,mu)&&(v=ye(this,mu),h=ye(this,g0),m=Date.now(),x="error");const g=f.fetchStatus==="fetching",b=x==="pending",S=x==="error",_=b&&g,j=h!==void 0,E={status:x,fetchStatus:f.fetchStatus,isPending:b,isSuccess:x==="success",isError:S,isInitialLoading:_,isLoading:_,data:h,dataUpdatedAt:f.dataUpdatedAt,error:v,errorUpdatedAt:m,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:g,isRefetching:g&&!b,isLoadingError:S&&!j,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:S&&j,isStale:GA(t,r),refetch:this.refetch,promise:ye(this,Gl),isEnabled:Vs(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const L=D=>{E.status==="error"?D.reject(E.error):E.data!==void 0&&D.resolve(E.data)},k=()=>{const D=ct(this,Gl,E.promise=_N());L(D)},R=ye(this,Gl);switch(R.status){case"pending":t.queryHash===n.queryHash&&L(R);break;case"fulfilled":(E.status==="error"||E.data!==R.value)&&k();break;case"rejected":(E.status!=="error"||E.error!==R.reason)&&k();break}}return E}updateResult(){const t=ye(this,_i),r=this.createResult(ye(this,hr),this.options);if(ct(this,Zd,ye(this,hr).state),ct(this,m0,this.options),ye(this,Zd).data!==void 0&&ct(this,v0,ye(this,hr)),By(r,t))return;ct(this,_i,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!ye(this,x0).size)return!0;const s=new Set(i??ye(this,x0));return this.options.throwOnError&&s.add("error"),Object.keys(ye(this,_i)).some(o=>{const c=o;return ye(this,_i)[c]!==t[c]&&s.has(c)})};ar(this,Cr,P7).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ar(this,Cr,EN).call(this)}},qi=new WeakMap,hr=new WeakMap,jv=new WeakMap,_i=new WeakMap,Zd=new WeakMap,m0=new WeakMap,Gl=new WeakMap,mu=new WeakMap,Av=new WeakMap,g0=new WeakMap,v0=new WeakMap,ef=new WeakMap,tf=new WeakMap,gu=new WeakMap,x0=new WeakMap,Cr=new WeakSet,Lm=function(t){ar(this,Cr,kN).call(this);let r=ye(this,hr).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(ji)),r},NN=function(){ar(this,Cr,TN).call(this);const t=Du(this.options.staleTime,ye(this,hr));if(gf||ye(this,_i).isStale||!yN(t))return;const n=N7(ye(this,_i).dataUpdatedAt,t)+1;ct(this,ef,Ud.setTimeout(()=>{ye(this,_i).isStale||this.updateResult()},n))},jN=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ye(this,hr)):this.options.refetchInterval)??!1},AN=function(t){ar(this,Cr,CN).call(this),ct(this,gu,t),!(gf||Vs(this.options.enabled,ye(this,hr))===!1||!yN(ye(this,gu))||ye(this,gu)===0)&&ct(this,tf,Ud.setInterval(()=>{(this.options.refetchIntervalInBackground||VA.isFocused())&&ar(this,Cr,Lm).call(this)},ye(this,gu)))},EN=function(){ar(this,Cr,NN).call(this),ar(this,Cr,AN).call(this,ar(this,Cr,jN).call(this))},TN=function(){ye(this,ef)&&(Ud.clearTimeout(ye(this,ef)),ct(this,ef,void 0))},CN=function(){ye(this,tf)&&(Ud.clearInterval(ye(this,tf)),ct(this,tf,void 0))},kN=function(){const t=ye(this,qi).getQueryCache().build(ye(this,qi),this.options);if(t===ye(this,hr))return;const r=ye(this,hr);ct(this,hr,t),ct(this,jv,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},P7=function(t){ya.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(ye(this,_i))}),ye(this,qi).getQueryCache().notify({query:ye(this,hr),type:"observerResultsUpdated"})})},iI);function ZG(e,t){return Vs(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function JC(e,t){return ZG(e,t)||e.state.data!==void 0&&ON(e,t,t.refetchOnMount)}function ON(e,t,r){if(Vs(t.enabled,e)!==!1&&Du(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&GA(e,t)}return!1}function QC(e,t,r,n){return(e!==t||Vs(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&GA(e,r)}function GA(e,t){return Vs(t.enabled,e)!==!1&&e.isStaleByTime(Du(t.staleTime,e))}function eK(e,t){return!By(e.getCurrentResult(),t)}function ZC(e){return{onFetch:(t,r)=>{var d,f,p,h,v;const n=t.options,a=(p=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((h=t.state.data)==null?void 0:h.pages)||[],s=((v=t.state.data)==null?void 0:v.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const u=async()=>{let m=!1;const x=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},y=A7(t.options,t.fetchOptions),g=async(b,S,_)=>{if(m)return Promise.reject();if(S==null&&b.pages.length)return Promise.resolve(b);const A=(()=>{const k={client:t.client,queryKey:t.queryKey,pageParam:S,direction:_?"backward":"forward",meta:t.options.meta};return x(k),k})(),E=await y(A),{maxPages:T}=t.options,L=_?WG:HG;return{pages:L(b.pages,E,T),pageParams:L(b.pageParams,S,T)}};if(a&&i.length){const b=a==="backward",S=b?tK:ek,_={pages:i,pageParams:s},j=S(n,_);o=await g(_,j,b)}else{const b=e??i.length;do{const S=c===0?s[0]??n.initialPageParam:ek(n,o);if(c>0&&S==null)break;o=await g(o,S),c++}while(c<b)}return o};t.options.persister?t.fetchFn=()=>{var m,x;return(x=(m=t.options).persister)==null?void 0:x.call(m,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function ek(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function tK(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Ev,il,Si,rf,sl,ru,sI,rK=(sI=class extends k7{constructor(t){super();Et(this,sl);Et(this,Ev);Et(this,il);Et(this,Si);Et(this,rf);ct(this,Ev,t.client),this.mutationId=t.mutationId,ct(this,Si,t.mutationCache),ct(this,il,[]),this.state=t.state||L7(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){ye(this,il).includes(t)||(ye(this,il).push(t),this.clearGcTimeout(),ye(this,Si).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ct(this,il,ye(this,il).filter(r=>r!==t)),this.scheduleGc(),ye(this,Si).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){ye(this,il).length||(this.state.status==="pending"?this.scheduleGc():ye(this,Si).remove(this))}continue(){var t;return((t=ye(this,rf))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,o,c,u,d,f,p,h,v,m,x,y,g,b,S,_,j,A,E,T;const r=()=>{ar(this,sl,ru).call(this,{type:"continue"})},n={client:ye(this,Ev),meta:this.options.meta,mutationKey:this.options.mutationKey};ct(this,rf,C7({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(L,k)=>{ar(this,sl,ru).call(this,{type:"failed",failureCount:L,error:k})},onPause:()=>{ar(this,sl,ru).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ye(this,Si).canRun(this)}));const a=this.state.status==="pending",i=!ye(this,rf).canStart();try{if(a)r();else{ar(this,sl,ru).call(this,{type:"pending",variables:t,isPaused:i}),await((o=(s=ye(this,Si).config).onMutate)==null?void 0:o.call(s,t,this,n));const k=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,n));k!==this.state.context&&ar(this,sl,ru).call(this,{type:"pending",context:k,variables:t,isPaused:i})}const L=await ye(this,rf).start();return await((f=(d=ye(this,Si).config).onSuccess)==null?void 0:f.call(d,L,t,this.state.context,this,n)),await((h=(p=this.options).onSuccess)==null?void 0:h.call(p,L,t,this.state.context,n)),await((m=(v=ye(this,Si).config).onSettled)==null?void 0:m.call(v,L,null,this.state.variables,this.state.context,this,n)),await((y=(x=this.options).onSettled)==null?void 0:y.call(x,L,null,t,this.state.context,n)),ar(this,sl,ru).call(this,{type:"success",data:L}),L}catch(L){try{throw await((b=(g=ye(this,Si).config).onError)==null?void 0:b.call(g,L,t,this.state.context,this,n)),await((_=(S=this.options).onError)==null?void 0:_.call(S,L,t,this.state.context,n)),await((A=(j=ye(this,Si).config).onSettled)==null?void 0:A.call(j,void 0,L,this.state.variables,this.state.context,this,n)),await((T=(E=this.options).onSettled)==null?void 0:T.call(E,void 0,L,t,this.state.context,n)),L}finally{ar(this,sl,ru).call(this,{type:"error",error:L})}}finally{ye(this,Si).runNext(this)}}},Ev=new WeakMap,il=new WeakMap,Si=new WeakMap,rf=new WeakMap,sl=new WeakSet,ru=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ya.batch(()=>{ye(this,il).forEach(n=>{n.onMutationUpdate(t)}),ye(this,Si).notify({mutation:this,type:"updated",action:t})})},sI);function L7(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Kl,Ao,Tv,oI,nK=(oI=class extends fp{constructor(t={}){super();Et(this,Kl);Et(this,Ao);Et(this,Tv);this.config=t,ct(this,Kl,new Set),ct(this,Ao,new Map),ct(this,Tv,0)}build(t,r,n){const a=new rK({client:t,mutationCache:this,mutationId:++F1(this,Tv)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){ye(this,Kl).add(t);const r=nx(t);if(typeof r=="string"){const n=ye(this,Ao).get(r);n?n.push(t):ye(this,Ao).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(ye(this,Kl).delete(t)){const r=nx(t);if(typeof r=="string"){const n=ye(this,Ao).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&ye(this,Ao).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=nx(t);if(typeof r=="string"){const n=ye(this,Ao).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=nx(t);if(typeof r=="string"){const a=(n=ye(this,Ao).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ya.batch(()=>{ye(this,Kl).forEach(t=>{this.notify({type:"removed",mutation:t})}),ye(this,Kl).clear(),ye(this,Ao).clear()})}getAll(){return Array.from(ye(this,Kl))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>VC(r,n))}findAll(t={}){return this.getAll().filter(r=>VC(t,r))}notify(t){ya.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return ya.batch(()=>Promise.all(t.map(r=>r.continue().catch(ji))))}},Kl=new WeakMap,Ao=new WeakMap,Tv=new WeakMap,oI);function nx(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Xl,vu,Hi,Yl,dc,iy,PN,lI,aK=(lI=class extends fp{constructor(r,n){super();Et(this,dc);Et(this,Xl);Et(this,vu);Et(this,Hi);Et(this,Yl);ct(this,Xl,r),this.setOptions(n),this.bindMethods(),ar(this,dc,iy).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=ye(this,Xl).defaultMutationOptions(r),By(this.options,n)||ye(this,Xl).getMutationCache().notify({type:"observerOptionsUpdated",mutation:ye(this,Hi),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&vf(n.mutationKey)!==vf(this.options.mutationKey)?this.reset():((a=ye(this,Hi))==null?void 0:a.state.status)==="pending"&&ye(this,Hi).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=ye(this,Hi))==null||r.removeObserver(this)}onMutationUpdate(r){ar(this,dc,iy).call(this),ar(this,dc,PN).call(this,r)}getCurrentResult(){return ye(this,vu)}reset(){var r;(r=ye(this,Hi))==null||r.removeObserver(this),ct(this,Hi,void 0),ar(this,dc,iy).call(this),ar(this,dc,PN).call(this)}mutate(r,n){var a;return ct(this,Yl,n),(a=ye(this,Hi))==null||a.removeObserver(this),ct(this,Hi,ye(this,Xl).getMutationCache().build(ye(this,Xl),this.options)),ye(this,Hi).addObserver(this),ye(this,Hi).execute(r)}},Xl=new WeakMap,vu=new WeakMap,Hi=new WeakMap,Yl=new WeakMap,dc=new WeakSet,iy=function(){var n;const r=((n=ye(this,Hi))==null?void 0:n.state)??L7();ct(this,vu,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},PN=function(r){ya.batch(()=>{var n,a,i,s,o,c,u,d;if(ye(this,Yl)&&this.hasListeners()){const f=ye(this,vu).variables,p=ye(this,vu).context,h={client:ye(this,Xl),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(n=ye(this,Yl)).onSuccess)==null||a.call(n,r.data,f,p,h),(s=(i=ye(this,Yl)).onSettled)==null||s.call(i,r.data,null,f,p,h)):(r==null?void 0:r.type)==="error"&&((c=(o=ye(this,Yl)).onError)==null||c.call(o,r.error,f,p,h),(d=(u=ye(this,Yl)).onSettled)==null||d.call(u,void 0,r.error,f,p,h))}this.listeners.forEach(f=>{f(ye(this,vu))})})},lI),ol,cI,iK=(cI=class extends fp{constructor(t={}){super();Et(this,ol);this.config=t,ct(this,ol,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??HA(a,r);let s=this.get(i);return s||(s=new JG({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(s)),s}add(t){ye(this,ol).has(t.queryHash)||(ye(this,ol).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=ye(this,ol).get(t.queryHash);r&&(t.destroy(),r===t&&ye(this,ol).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ya.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return ye(this,ol).get(t)}getAll(){return[...ye(this,ol).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>WC(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>WC(t,n)):r}notify(t){ya.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){ya.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ya.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ol=new WeakMap,cI),In,xu,yu,y0,b0,bu,w0,_0,uI,sK=(uI=class{constructor(e={}){Et(this,In);Et(this,xu);Et(this,yu);Et(this,y0);Et(this,b0);Et(this,bu);Et(this,w0);Et(this,_0);ct(this,In,e.queryCache||new iK),ct(this,xu,e.mutationCache||new nK),ct(this,yu,e.defaultOptions||{}),ct(this,y0,new Map),ct(this,b0,new Map),ct(this,bu,0)}mount(){F1(this,bu)._++,ye(this,bu)===1&&(ct(this,w0,VA.subscribe(async e=>{e&&(await this.resumePausedMutations(),ye(this,In).onFocus())})),ct(this,_0,Uy.subscribe(async e=>{e&&(await this.resumePausedMutations(),ye(this,In).onOnline())})))}unmount(){var e,t;F1(this,bu)._--,ye(this,bu)===0&&((e=ye(this,w0))==null||e.call(this),ct(this,w0,void 0),(t=ye(this,_0))==null||t.call(this),ct(this,_0,void 0))}isFetching(e){return ye(this,In).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return ye(this,xu).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=ye(this,In).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=ye(this,In).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Du(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return ye(this,In).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=ye(this,In).get(n.queryHash),i=a==null?void 0:a.state.data,s=UG(t,i);if(s!==void 0)return ye(this,In).build(this,n).setData(s,{...r,manual:!0})}setQueriesData(e,t,r){return ya.batch(()=>ye(this,In).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=ye(this,In).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=ye(this,In);ya.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=ye(this,In);return ya.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=ya.batch(()=>ye(this,In).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(ji).catch(ji)}invalidateQueries(e,t={}){return ya.batch(()=>(ye(this,In).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=ya.batch(()=>ye(this,In).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(ji)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(ji)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=ye(this,In).build(this,t);return r.isStaleByTime(Du(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ji).catch(ji)}fetchInfiniteQuery(e){return e.behavior=ZC(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ji).catch(ji)}ensureInfiniteQueryData(e){return e.behavior=ZC(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Uy.isOnline()?ye(this,xu).resumePausedMutations():Promise.resolve()}getQueryCache(){return ye(this,In)}getMutationCache(){return ye(this,xu)}getDefaultOptions(){return ye(this,yu)}setDefaultOptions(e){ct(this,yu,e)}setQueryDefaults(e,t){ye(this,y0).set(vf(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...ye(this,y0).values()],r={};return t.forEach(n=>{Eg(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){ye(this,b0).set(vf(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...ye(this,b0).values()],r={};return t.forEach(n=>{Eg(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...ye(this,yu).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=HA(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===WA&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...ye(this,yu).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){ye(this,In).clear(),ye(this,xu).clear()}},In=new WeakMap,xu=new WeakMap,yu=new WeakMap,y0=new WeakMap,b0=new WeakMap,bu=new WeakMap,w0=new WeakMap,_0=new WeakMap,uI),R7=M.createContext(void 0),Lt=e=>{const t=M.useContext(R7);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},oK=({client:e,children:t})=>(M.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),l.jsx(R7.Provider,{value:e,children:t})),I7=M.createContext(!1),lK=()=>M.useContext(I7);I7.Provider;function cK(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var uK=M.createContext(cK()),dK=()=>M.useContext(uK),fK=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},hK=e=>{M.useEffect(()=>{e.clearReset()},[e])},pK=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||E7(r,[e.error,n])),mK=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},gK=(e,t)=>e.isLoading&&e.isFetching&&!t,vK=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,tk=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function xK(e,t,r){var f,p,h,v,m;const n=lK(),a=dK(),i=Lt(),s=i.defaultQueryOptions(e);(p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,s),s._optimisticResults=n?"isRestoring":"optimistic",mK(s),fK(s,a),hK(a);const o=!i.getQueryCache().get(s.queryHash),[c]=M.useState(()=>new t(i,s)),u=c.getOptimisticResult(s),d=!n&&e.subscribed!==!1;if(M.useSyncExternalStore(M.useCallback(x=>{const y=d?c.subscribe(ya.batchCalls(x)):ji;return c.updateResult(),y},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),M.useEffect(()=>{c.setOptions(s)},[s,c]),vK(s,u))throw tk(s,c,a);if(pK({result:u,errorResetBoundary:a,throwOnError:s.throwOnError,query:i.getQueryCache().get(s.queryHash),suspense:s.suspense}))throw u.error;if((v=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||v.call(h,s,u),s.experimental_prefetchInRender&&!gf&&gK(u,n)){const x=o?tk(s,c,a):(m=i.getQueryCache().get(s.queryHash))==null?void 0:m.promise;x==null||x.catch(ji).finally(()=>{c.updateResult()})}return s.notifyOnChangeProps?u:c.trackResult(u)}function Ut(e,t){return xK(e,QG)}function Dt(e,t){const r=Lt(),[n]=M.useState(()=>new aK(r,e));M.useEffect(()=>{n.setOptions(e)},[n,e]);const a=M.useSyncExternalStore(M.useCallback(s=>n.subscribe(ya.batchCalls(s)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=M.useCallback((s,o)=>{n.mutate(s,o).catch(ji)},[n]);if(a.error&&E7(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const yK={},rk=e=>{let t;const r=new Set,n=(d,f)=>{const p=typeof d=="function"?d(t):d;if(!Object.is(p,t)){const h=t;t=f??(typeof p!="object"||p===null)?p:Object.assign({},t,p),r.forEach(v=>v(t,h))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(yK?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,c);return c},bK=e=>e?rk(e):rk;var D7={exports:{}},M7={},F7={exports:{}},$7={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0=M;function wK(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _K=typeof Object.is=="function"?Object.is:wK,SK=k0.useState,NK=k0.useEffect,jK=k0.useLayoutEffect,AK=k0.useDebugValue;function EK(e,t){var r=t(),n=SK({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return jK(function(){a.value=r,a.getSnapshot=t,s5(a)&&i({inst:a})},[e,r,t]),NK(function(){return s5(a)&&i({inst:a}),e(function(){s5(a)&&i({inst:a})})},[e]),AK(r),r}function s5(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!_K(e,r)}catch{return!0}}function TK(e,t){return t()}var CK=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?TK:EK;$7.useSyncExternalStore=k0.useSyncExternalStore!==void 0?k0.useSyncExternalStore:CK;F7.exports=$7;var kK=F7.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M2=M,OK=kK;function PK(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var LK=typeof Object.is=="function"?Object.is:PK,RK=OK.useSyncExternalStore,IK=M2.useRef,DK=M2.useEffect,MK=M2.useMemo,FK=M2.useDebugValue;M7.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=IK(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=MK(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),a!==void 0&&s.hasValue){var v=s.value;if(a(v,h))return f=v}return f=h}if(v=f,LK(d,h))return v;var m=n(h);return a!==void 0&&a(v,m)?(d=h,v):(d=h,f=m)}var u=!1,d,f,p=r===void 0?null:r;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,r,n,a]);var o=RK(e,i[0],i[1]);return DK(function(){s.hasValue=!0,s.value=o},[o]),FK(o),o};D7.exports=M7;var $K=D7.exports;const BK=kr($K),B7={},{useDebugValue:UK}=we,{useSyncExternalStoreWithSelector:zK}=BK;let nk=!1;const qK=e=>e;function HK(e,t=qK,r){(B7?"production":void 0)!=="production"&&r&&!nk&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),nk=!0);const n=zK(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return UK(n),n}const ak=e=>{(B7?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?bK(e):e,r=(n,a)=>HK(t,n,a);return Object.assign(r,t),r},F2=e=>e?ak(e):ak,WK=e=>{try{const t=window.AudioContext||window.webkitAudioContext;if(!t)return;const r=new t,n=r.createOscillator(),a=r.createGain();switch(n.connect(a),a.connect(r.destination),e){case"success":n.frequency.setValueAtTime(880,r.currentTime),n.frequency.setValueAtTime(1108.73,r.currentTime+.1),a.gain.setValueAtTime(.3,r.currentTime),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.3),n.start(r.currentTime),n.stop(r.currentTime+.3);break;case"error":n.frequency.setValueAtTime(220,r.currentTime),n.frequency.setValueAtTime(196,r.currentTime+.15),a.gain.setValueAtTime(.3,r.currentTime),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.4),n.start(r.currentTime),n.stop(r.currentTime+.4);break;case"warning":n.frequency.setValueAtTime(440,r.currentTime),a.gain.setValueAtTime(.2,r.currentTime),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.2),n.start(r.currentTime),n.stop(r.currentTime+.2);break;case"info":n.frequency.setValueAtTime(523.25,r.currentTime),a.gain.setValueAtTime(.15,r.currentTime),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.15),n.start(r.currentTime),n.stop(r.currentTime+.15);break}}catch{}},Rv=F2(e=>({toasts:[],addToast:t=>{const r=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,n={...t,id:r,duration:t.duration??5e3};WK(t.type),e(a=>({toasts:[...a.toasts,n]})),setTimeout(()=>{e(a=>({toasts:a.toasts.filter(i=>i.id!==r)}))},n.duration)},removeToast:t=>e(r=>({toasts:r.toasts.filter(n=>n.id!==t)})),clearAll:()=>e({toasts:[]})})),Ii=(e,t,r)=>{Rv.getState().addToast({type:"success",title:e,message:t,createdBy:r})},Ci=(e,t)=>{Rv.getState().addToast({type:"error",title:e,message:t,duration:8e3})},VK=(e,t)=>{Rv.getState().addToast({type:"warning",title:e,message:t})},GK={users:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"}),calendar:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"}),clipboard:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25z"}),megaphone:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 110-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 01-1.44-4.282m3.102.069a18.03 18.03 0 01-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 018.835 2.535M10.34 6.66a23.847 23.847 0 008.835-2.535m0 0A23.74 23.74 0 0018.795 3m.38 1.125a23.91 23.91 0 011.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 001.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 010 3.46"}),clock:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}),key:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"}),inbox:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 13.5h3.86a2.25 2.25 0 012.012 1.244l.256.512a2.25 2.25 0 002.013 1.244h3.218a2.25 2.25 0 002.013-1.244l.256-.512a2.25 2.25 0 012.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 00-2.15-1.588H6.911a2.25 2.25 0 00-2.15 1.588L2.35 13.177a2.25 2.25 0 00-.1.661z"}),sparkles:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"}),truck:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}),"check-circle":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),tag:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),eye:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),gauge:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6l4 2m6-2a10 10 0 11-20 0 10 10 0 0120 0z"}),image:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"}),home:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}),"chevron-down":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}),"chevron-right":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}),menu:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}),x:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}),search:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"}),bell:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"}),logout:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}),settings:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),building:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}),layers:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.429 9.75L2.25 12l4.179 2.25m0-4.5l5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-4.179 2.25m0 0L21.75 12l-4.179 2.25m0 0l4.179 2.25L12 21.75 2.25 16.5l4.179-2.25m11.142 0l-5.571 3-5.571-3"}),droplet:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3.75c-3.314 0-6 4.03-6 9a6 6 0 1012 0c0-4.97-2.686-9-6-9z"}),spray:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23.693L5 15.5m14.8-.2a2.251 2.251 0 01.45 2.574l-.788 1.576a2.25 2.25 0 01-2.45 1.186l-6.09-1.218a5.227 5.227 0 01-2.842-1.61l-.91-1.014a2.25 2.25 0 01-.218-2.692l1.55-2.58"}),brush:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}),info:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}),"alert-circle":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}),"alert-triangle":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"}),check:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}),"x-circle":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),trash:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}),activity:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"}),user:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"}),plus:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}),package:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"}),"file-text":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}),"bar-chart":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"}),edit:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}),send:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}),upload:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}),file:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}),"calendar-range":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008zM12 15h.008v.008H12V15zm0 2.25h.008v.008H12v-.008zM9.75 15h.008v.008H9.75V15zm0 2.25h.008v.008H9.75v-.008zM7.5 15h.008v.008H7.5V15zm0 2.25h.008v.008H7.5v-.008zm6.75-4.5h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V15zm0 2.25h.008v.008h-.008v-.008zm2.25-4.5h.008v.008H16.5v-.008zm0 2.25h.008v.008H16.5V15z"}),"chevron-left":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}),"user-x":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M22 10.5h-6m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"}),download:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}),loader:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}),sun:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"}),moon:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"}),palmtree:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21v-8.25M15.75 21H8.25M12 12.75c0 0-4.5-3-4.5-6.375A4.5 4.5 0 0112 2.25a4.5 4.5 0 014.5 4.125c0 3.375-4.5 6.375-4.5 6.375z"})},xe=({name:e,className:t="",size:r=24})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:r,height:r,className:t,children:GK[e]}),KK=({toast:e})=>{const{removeToast:t}=Rv(),r={success:"bg-gradient-to-r from-success-500 to-success-600",error:"bg-gradient-to-r from-danger-500 to-danger-600",warning:"bg-gradient-to-r from-warning-500 to-warning-600",info:"bg-gradient-to-r from-brand-500 to-brand-600"},n={success:"check-circle",error:"alert-circle",warning:"alert-triangle",info:"info"};return l.jsxs("div",{className:`${r[e.type]} text-white rounded-xl shadow-2xl p-4 min-w-[320px] max-w-[420px] animate-slide-in-right flex items-start gap-3`,style:{animation:"slideInRight 0.3s ease-out"},children:[l.jsx("div",{className:"flex-shrink-0 mt-0.5",children:l.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:l.jsx(xe,{name:n[e.type],size:22,className:"text-white"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"flex items-center gap-2 mb-1",children:l.jsx("h4",{className:"font-bold text-base",children:e.title})}),l.jsx("p",{className:"text-sm text-white/90 leading-relaxed",children:e.message}),e.createdBy&&l.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-white/80",children:[l.jsx(xe,{name:"user",size:14}),l.jsxs("span",{children:["Registrado por: ",l.jsx("strong",{className:"text-white",children:e.createdBy})]})]})]}),l.jsx("button",{onClick:()=>t(e.id),className:"flex-shrink-0 p-1 hover:bg-white/20 rounded-lg transition-colors",children:l.jsx(xe,{name:"x",size:18,className:"text-white/80"})})]})},XK=()=>{const{toasts:e}=Rv();return e.length===0?null:l.jsxs(l.Fragment,{children:[l.jsx("style",{children:`
        @keyframes slideInRight {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
      `}),l.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3",children:e.map(t=>l.jsx(KK,{toast:t},t.id))})]})},YK=({children:e})=>{const[t]=M.useState(()=>new sK({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:6e4}}}));return l.jsxs(oK,{client:t,children:[e,l.jsx(XK,{})]})};/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tg(){return Tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tg.apply(this,arguments)}var Su;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Su||(Su={}));const ik="popstate";function JK(e){e===void 0&&(e={});function t(a,i){let{pathname:s="/",search:o="",hash:c=""}=Lf(a.location.hash.substr(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),LN("",{pathname:s,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){let s=a.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let c=a.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof i=="string"?i:zy(i))}function n(a,i){$2(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return ZK(t,r,n,e)}function Tn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function $2(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function QK(){return Math.random().toString(36).substr(2,8)}function sk(e,t){return{usr:e.state,key:e.key,idx:t}}function LN(e,t,r,n){return r===void 0&&(r=null),Tg({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Lf(t):t,{state:r,key:t&&t.key||n||QK()})}function zy(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Lf(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function ZK(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,s=a.history,o=Su.Pop,c=null,u=d();u==null&&(u=0,s.replaceState(Tg({},s.state,{idx:u}),""));function d(){return(s.state||{idx:null}).idx}function f(){o=Su.Pop;let x=d(),y=x==null?null:x-u;u=x,c&&c({action:o,location:m.location,delta:y})}function p(x,y){o=Su.Push;let g=LN(m.location,x,y);r&&r(g,x),u=d()+1;let b=sk(g,u),S=m.createHref(g);try{s.pushState(b,"",S)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;a.location.assign(S)}i&&c&&c({action:o,location:m.location,delta:1})}function h(x,y){o=Su.Replace;let g=LN(m.location,x,y);r&&r(g,x),u=d();let b=sk(g,u),S=m.createHref(g);s.replaceState(b,"",S),i&&c&&c({action:o,location:m.location,delta:0})}function v(x){let y=a.location.origin!=="null"?a.location.origin:a.location.href,g=typeof x=="string"?x:zy(x);return g=g.replace(/ $/,"%20"),Tn(y,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,y)}let m={get action(){return o},get location(){return e(a,s)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(ik,f),c=x,()=>{a.removeEventListener(ik,f),c=null}},createHref(x){return t(a,x)},createURL:v,encodeLocation(x){let y=v(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:h,go(x){return s.go(x)}};return m}var ok;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ok||(ok={}));function eX(e,t,r){return r===void 0&&(r="/"),tX(e,t,r)}function tX(e,t,r,n){let a=typeof t=="string"?Lf(t):t,i=O0(a.pathname||"/",r);if(i==null)return null;let s=U7(e);rX(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=hX(i);o=dX(s[c],u)}return o}function U7(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,s,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};c.relativePath.startsWith("/")&&(Tn(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Mu([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Tn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),U7(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:cX(u,i.index),routesMeta:d})};return e.forEach((i,s)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))a(i,s);else for(let c of z7(i.path))a(i,s,c)}),t}function z7(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let s=z7(n.join("/")),o=[];return o.push(...s.map(c=>c===""?i:[i,c].join("/"))),a&&o.push(...s),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function rX(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:uX(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const nX=/^:[\w-]+$/,aX=3,iX=2,sX=1,oX=10,lX=-2,lk=e=>e==="*";function cX(e,t){let r=e.split("/"),n=r.length;return r.some(lk)&&(n+=lX),t&&(n+=iX),r.filter(a=>!lk(a)).reduce((a,i)=>a+(nX.test(i)?aX:i===""?sX:oX),n)}function uX(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function dX(e,t,r){let{routesMeta:n}=e,a={},i="/",s=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=RN({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!f)return null;Object.assign(a,f.params),s.push({params:a,pathname:Mu([i,f.pathname]),pathnameBase:xX(Mu([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Mu([i,f.pathnameBase]))}return s}function RN(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=fX(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:p,isOptional:h}=d;if(p==="*"){let m=o[f]||"";s=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const v=o[f];return h&&!v?u[p]=void 0:u[p]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:s,pattern:e}}function fX(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),$2(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function hX(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return $2(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function O0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const pX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mX=e=>pX.test(e);function gX(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Lf(e):e,i;if(r)if(mX(r))i=r;else{if(r.includes("//")){let s=r;r=r.replace(/\/\/+/g,"/"),$2(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+r))}r.startsWith("/")?i=ck(r.substring(1),"/"):i=ck(r,t)}else i=t;return{pathname:i,search:yX(n),hash:bX(a)}}function ck(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function o5(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vX(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function KA(e,t){let r=vX(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function XA(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Lf(e):(a=Tg({},e),Tn(!a.pathname||!a.pathname.includes("?"),o5("?","pathname","search",a)),Tn(!a.pathname||!a.pathname.includes("#"),o5("#","pathname","hash",a)),Tn(!a.search||!a.search.includes("#"),o5("#","search","hash",a)));let i=e===""||a.pathname==="",s=i?"/":a.pathname,o;if(s==null)o=r;else{let f=t.length-1;if(!n&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),f-=1;a.pathname=p.join("/")}o=f>=0?t[f]:"/"}let c=gX(a,o),u=s&&s!=="/"&&s.endsWith("/"),d=(i||s===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Mu=e=>e.join("/").replace(/\/\/+/g,"/"),xX=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),yX=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,bX=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function wX(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const q7=["post","put","patch","delete"];new Set(q7);const _X=["get",...q7];new Set(_X);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cg(){return Cg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cg.apply(this,arguments)}const B2=M.createContext(null),H7=M.createContext(null),Ec=M.createContext(null),U2=M.createContext(null),Tc=M.createContext({outlet:null,matches:[],isDataRoute:!1}),W7=M.createContext(null);function SX(e,t){let{relative:r}=t===void 0?{}:t;hp()||Tn(!1);let{basename:n,navigator:a}=M.useContext(Ec),{hash:i,pathname:s,search:o}=z2(e,{relative:r}),c=s;return n!=="/"&&(c=s==="/"?n:Mu([n,s])),a.createHref({pathname:c,search:o,hash:i})}function hp(){return M.useContext(U2)!=null}function Rf(){return hp()||Tn(!1),M.useContext(U2).location}function V7(e){M.useContext(Ec).static||M.useLayoutEffect(e)}function YA(){let{isDataRoute:e}=M.useContext(Tc);return e?FX():NX()}function NX(){hp()||Tn(!1);let e=M.useContext(B2),{basename:t,future:r,navigator:n}=M.useContext(Ec),{matches:a}=M.useContext(Tc),{pathname:i}=Rf(),s=JSON.stringify(KA(a,r.v7_relativeSplatPath)),o=M.useRef(!1);return V7(()=>{o.current=!0}),M.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=XA(u,JSON.parse(s),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Mu([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,s,i,e])}const jX=M.createContext(null);function AX(e){let t=M.useContext(Tc).outlet;return t&&M.createElement(jX.Provider,{value:e},t)}function z2(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=M.useContext(Ec),{matches:a}=M.useContext(Tc),{pathname:i}=Rf(),s=JSON.stringify(KA(a,n.v7_relativeSplatPath));return M.useMemo(()=>XA(e,JSON.parse(s),i,r==="path"),[e,s,i,r])}function EX(e,t){return TX(e,t)}function TX(e,t,r,n){hp()||Tn(!1);let{navigator:a}=M.useContext(Ec),{matches:i}=M.useContext(Tc),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let u=Rf(),d;if(t){var f;let x=typeof t=="string"?Lf(t):t;c==="/"||(f=x.pathname)!=null&&f.startsWith(c)||Tn(!1),d=x}else d=u;let p=d.pathname||"/",h=p;if(c!=="/"){let x=c.replace(/^\//,"").split("/");h="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let v=eX(e,{pathname:h}),m=LX(v&&v.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:Mu([c,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:Mu([c,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,r,n);return t&&m?M.createElement(U2.Provider,{value:{location:Cg({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Su.Pop}},m):m}function CX(){let e=MX(),t=wX(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},t),r?M.createElement("pre",{style:a},r):null,null)}const kX=M.createElement(CX,null);class OX extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?M.createElement(Tc.Provider,{value:this.props.routeContext},M.createElement(W7.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function PX(e){let{routeContext:t,match:r,children:n}=e,a=M.useContext(B2);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),M.createElement(Tc.Provider,{value:t},n)}function LX(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,o=(a=r)==null?void 0:a.errors;if(o!=null){let d=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);d>=0||Tn(!1),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:p,errors:h}=r,v=f.route.loader&&p[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||v){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,p)=>{let h,v=!1,m=null,x=null;r&&(h=o&&f.route.id?o[f.route.id]:void 0,m=f.route.errorElement||kX,c&&(u<0&&p===0?($X("route-fallback"),v=!0,x=null):u===p&&(v=!0,x=f.route.hydrateFallbackElement||null)));let y=t.concat(s.slice(0,p+1)),g=()=>{let b;return h?b=m:v?b=x:f.route.Component?b=M.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,M.createElement(PX,{match:f,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?M.createElement(OX,{location:r.location,revalidation:r.revalidation,component:m,error:h,children:g(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):g()},null)}var G7=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(G7||{}),K7=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(K7||{});function RX(e){let t=M.useContext(B2);return t||Tn(!1),t}function IX(e){let t=M.useContext(H7);return t||Tn(!1),t}function DX(e){let t=M.useContext(Tc);return t||Tn(!1),t}function X7(e){let t=DX(),r=t.matches[t.matches.length-1];return r.route.id||Tn(!1),r.route.id}function MX(){var e;let t=M.useContext(W7),r=IX(),n=X7();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function FX(){let{router:e}=RX(G7.UseNavigateStable),t=X7(K7.UseNavigateStable),r=M.useRef(!1);return V7(()=>{r.current=!0}),M.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Cg({fromRouteId:t},i)))},[e,t])}const uk={};function $X(e,t,r){uk[e]||(uk[e]=!0)}function BX(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Y7(e){let{to:t,replace:r,state:n,relative:a}=e;hp()||Tn(!1);let{future:i,static:s}=M.useContext(Ec),{matches:o}=M.useContext(Tc),{pathname:c}=Rf(),u=YA(),d=XA(t,KA(o,i.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(d);return M.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:a}),[u,f,a,r,n]),null}function J7(e){return AX(e.context)}function Rn(e){Tn(!1)}function UX(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Su.Pop,navigator:i,static:s=!1,future:o}=e;hp()&&Tn(!1);let c=t.replace(/^\/*/,"/"),u=M.useMemo(()=>({basename:c,navigator:i,static:s,future:Cg({v7_relativeSplatPath:!1},o)}),[c,o,i,s]);typeof n=="string"&&(n=Lf(n));let{pathname:d="/",search:f="",hash:p="",state:h=null,key:v="default"}=n,m=M.useMemo(()=>{let x=O0(d,c);return x==null?null:{location:{pathname:x,search:f,hash:p,state:h,key:v},navigationType:a}},[c,d,f,p,h,v,a]);return m==null?null:M.createElement(Ec.Provider,{value:u},M.createElement(U2.Provider,{children:r,value:m}))}function zX(e){let{children:t,location:r}=e;return EX(IN(t),r)}new Promise(()=>{});function IN(e,t){t===void 0&&(t=[]);let r=[];return M.Children.forEach(e,(n,a)=>{if(!M.isValidElement(n))return;let i=[...t,a];if(n.type===M.Fragment){r.push.apply(r,IN(n.props.children,i));return}n.type!==Rn&&Tn(!1),!n.props.index||!n.props.children||Tn(!1);let s={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=IN(n.props.children,i)),r.push(s)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qy(){return qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qy.apply(this,arguments)}function Q7(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function qX(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function HX(e,t){return e.button===0&&(!t||t==="_self")&&!qX(e)}const WX=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],VX=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],GX="6";try{window.__reactRouterVersion=GX}catch{}const KX=M.createContext({isTransitioning:!1}),XX="startTransition",dk=AW[XX];function YX(e){let{basename:t,children:r,future:n,window:a}=e,i=M.useRef();i.current==null&&(i.current=JK({window:a,v5Compat:!0}));let s=i.current,[o,c]=M.useState({action:s.action,location:s.location}),{v7_startTransition:u}=n||{},d=M.useCallback(f=>{u&&dk?dk(()=>c(f)):c(f)},[c,u]);return M.useLayoutEffect(()=>s.listen(d),[s,d]),M.useEffect(()=>BX(n),[n]),M.createElement(UX,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:s,future:n})}const JX=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ZX=M.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:s,state:o,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,p=Q7(t,WX),{basename:h}=M.useContext(Ec),v,m=!1;if(typeof u=="string"&&QX.test(u)&&(v=u,JX))try{let b=new URL(window.location.href),S=u.startsWith("//")?new URL(b.protocol+u):new URL(u),_=O0(S.pathname,h);S.origin===b.origin&&_!=null?u=_+S.search+S.hash:m=!0}catch{}let x=SX(u,{relative:a}),y=rY(u,{replace:s,state:o,target:c,preventScrollReset:d,relative:a,viewTransition:f});function g(b){n&&n(b),b.defaultPrevented||y(b)}return M.createElement("a",qy({},p,{href:v||x,onClick:m||i?n:g,ref:r,target:c}))}),eY=M.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:a=!1,className:i="",end:s=!1,style:o,to:c,viewTransition:u,children:d}=t,f=Q7(t,VX),p=z2(c,{relative:f.relative}),h=Rf(),v=M.useContext(H7),{navigator:m,basename:x}=M.useContext(Ec),y=v!=null&&nY(p)&&u===!0,g=m.encodeLocation?m.encodeLocation(p).pathname:p.pathname,b=h.pathname,S=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;a||(b=b.toLowerCase(),S=S?S.toLowerCase():null,g=g.toLowerCase()),S&&x&&(S=O0(S,x)||S);const _=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let j=b===g||!s&&b.startsWith(g)&&b.charAt(_)==="/",A=S!=null&&(S===g||!s&&S.startsWith(g)&&S.charAt(g.length)==="/"),E={isActive:j,isPending:A,isTransitioning:y},T=j?n:void 0,L;typeof i=="function"?L=i(E):L=[i,j?"active":null,A?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let k=typeof o=="function"?o(E):o;return M.createElement(ZX,qy({},f,{"aria-current":T,className:L,ref:r,style:k,to:c,viewTransition:u}),typeof d=="function"?d(E):d)});var DN;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(DN||(DN={}));var fk;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(fk||(fk={}));function tY(e){let t=M.useContext(B2);return t||Tn(!1),t}function rY(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:s,viewTransition:o}=t===void 0?{}:t,c=YA(),u=Rf(),d=z2(e,{relative:s});return M.useCallback(f=>{if(HX(f,r)){f.preventDefault();let p=n!==void 0?n:zy(u)===zy(d);c(e,{replace:p,state:a,preventScrollReset:i,relative:s,viewTransition:o})}},[u,c,d,n,a,r,e,i,s,o])}function nY(e,t){t===void 0&&(t={});let r=M.useContext(KX);r==null&&Tn(!1);let{basename:n}=tY(DN.useViewTransitionState),a=z2(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=O0(r.currentLocation.pathname,n)||r.currentLocation.pathname,s=O0(r.nextLocation.pathname,n)||r.nextLocation.pathname;return RN(a.pathname,s)!=null||RN(a.pathname,i)!=null}let ax=null;const aY=(e,t)=>({supervisorName:e,terminalCode:t,startedAt:new Date().toISOString()}),Hy={startSession:async(e,t)=>(ax=aY(e,t),ax),getSession:async()=>ax,logout:async()=>{ax=null}},Ar=F2(e=>({session:null,setSession:t=>e({session:t}),clearSession:()=>e({session:null}),hydrateSession:async()=>{const t=await Hy.getSession();e({session:t})}})),zu={EL_ROBLE:"El Roble",LA_REINA:"La Reina",EL_SALTO:"El Salto",LO_ECHEVERS:"Lo Echevers",COLO_COLO:"Colo Colo"},JA=[{code:"ROBLE_Y_REINA",name:"El Roble + La Reina",members:["EL_ROBLE","LA_REINA"]}],es=Object.entries(zu).map(([e,t])=>({value:e,label:t})),iY=JA.map(e=>({value:e.code,label:e.name})),Z7={mode:"ALL"},Fi=e=>{if(e.mode==="ALL"||!e.value)return Object.keys(zu);if(e.mode==="TERMINAL")return[e.value];const t=JA.find(r=>r.code===e.value);return t?t.members:Object.keys(zu)},sY=(e,t)=>{const r=Fi(t);return e.filter(n=>r.includes(n.terminal))},or=e=>{if(zu[e])return zu[e];const t=JA.find(r=>r.code===e);return(t==null?void 0:t.name)??String(e)},zt=F2(e=>({context:Z7,setContext:t=>e({context:t})})),oY=()=>{const e=YA(),t=Ar(f=>f.setSession),r=Ar(f=>f.session),n=zt(f=>f.setContext),[a,i]=M.useState(""),[s,o]=M.useState("EL_ROBLE"),[c,u]=M.useState(!1);M.useEffect(()=>{r&&e("/personal")},[r,e]);const d=async f=>{f.preventDefault(),u(!0);const p=await Hy.startSession(a,s);t(p),n({mode:"TERMINAL",value:s}),e("/personal")};return l.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-dark-900 via-dark-800 to-brand-900",children:[l.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-brand-500/30 rounded-full blur-3xl animate-float"}),l.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent-500/20 rounded-full blur-3xl animate-float",style:{animationDelay:"1s"}}),l.jsx("div",{className:"absolute top-1/2 right-1/3 w-64 h-64 bg-brand-600/20 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),l.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})]}),l.jsxs("div",{className:"relative z-10 w-full max-w-lg px-4 animate-slide-up",children:[l.jsx("div",{className:"flex justify-center mb-8",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br from-brand-500 to-brand-700 shadow-brand-lg",children:l.jsx("span",{className:"text-3xl font-bold text-white",children:"A"})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-2xl font-bold text-white",children:"Asiss"}),l.jsx("span",{className:"text-sm text-slate-400",children:"Dashboard de Logstica"})]})]})}),l.jsxs("div",{className:"card-glass p-8 md:p-10",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Bienvenido"}),l.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Ingresa tus datos para acceder al panel de control"})]}),l.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Nombre del Supervisor"}),l.jsxs("div",{className:"relative",children:[l.jsx(xe,{name:"users",size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"}),l.jsx("input",{type:"text",className:"input pl-10",value:a,onChange:f=>i(f.target.value),placeholder:"Ej: Ana Prez",required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Terminal"}),l.jsxs("div",{className:"relative",children:[l.jsx(xe,{name:"building",size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none z-10"}),l.jsx("select",{className:"input pl-10 appearance-none cursor-pointer",value:s,onChange:f=>o(f.target.value),style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2394a3b8'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px",paddingRight:"40px"},children:es.map(f=>l.jsx("option",{value:f.value,children:f.label},f.value))})]})]}),l.jsx("button",{type:"submit",disabled:c||!a,className:"btn btn-primary w-full py-3.5 text-base",children:c?l.jsxs("span",{className:"flex items-center justify-center gap-2",children:[l.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Iniciando sesin..."]}):l.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Entrar al Dashboard",l.jsx(xe,{name:"chevron-right",size:18})]})})]}),l.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200",children:l.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-slate-500",children:[l.jsx(xe,{name:"check-circle",size:14,className:"text-success-500"}),l.jsx("span",{children:"Conexin segura  Datos protegidos"})]})})]}),l.jsx("p",{className:"mt-6 text-center text-xs text-slate-500",children:"Versin 2.0   2024 Asiss"})]})]})},hk=[{label:"Operacin",icon:"building",items:[{label:"Personal",to:"/personal",icon:"users"},{label:"Reuniones",to:"/reuniones",icon:"calendar"},{label:"Tareas",to:"/tareas",icon:"clipboard"},{label:"Informativos",to:"/informativos",icon:"megaphone"},{label:"Asistencia",to:"/asistencia",icon:"clock"},{label:"Credenciales",to:"/credenciales",icon:"key"},{label:"Solicitudes",to:"/solicitudes",icon:"inbox"}]},{label:"Aseo",icon:"sparkles",items:[{label:"Interior",to:"/aseo/interior",icon:"droplet"},{label:"Exterior",to:"/aseo/exterior",icon:"spray"},{label:"Rodillo",to:"/aseo/rodillo",icon:"brush"}]},{label:"Insumos",icon:"package",items:[{label:"Solicitudes",to:"/insumos",icon:"file-text"}]},{label:"MiniCheck",icon:"check-circle",items:[{label:"Extintor",to:"/minicheck/extintor",icon:"check-circle"},{label:"Tag",to:"/minicheck/tag",icon:"tag"},{label:"Mobileye",to:"/minicheck/mobileye",icon:"eye"},{label:"Odmetro",to:"/minicheck/odometro",icon:"gauge"},{label:"Publicidad",to:"/minicheck/publicidad",icon:"image"}]},{label:"Flota",icon:"truck",items:[{label:"Estado de Flota",to:"/estado-flota",icon:"truck"}]}],lY=({isOpen:e,onClose:t})=>{const r=Rf(),[n,a]=M.useState(()=>{const o=hk.find(c=>c.items.some(u=>r.pathname.startsWith(u.to)));return o?[o.label]:["Operacin"]}),i=o=>{a(c=>c.includes(o)?c.filter(u=>u!==o):[...c,o])},s=o=>o.items.some(c=>r.pathname.startsWith(c.to));return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`${e?"fixed":"hidden"} inset-0 z-40 bg-black/60 backdrop-blur-sm md:hidden`,onClick:t}),l.jsx("aside",{className:`${e?"translate-x-0":"-translate-x-full"} fixed inset-y-0 left-0 z-50 w-72 transform transition-transform duration-300 ease-out md:translate-x-0`,children:l.jsxs("div",{className:"flex h-full flex-col bg-gradient-to-b from-dark-800 to-dark-900",children:[l.jsxs("div",{className:"flex items-center gap-3 px-6 py-5 border-b border-white/10",children:[l.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-brand-500 to-brand-700 shadow-brand",children:l.jsx("span",{className:"text-lg font-bold text-white",children:"A"})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-sm font-bold text-white",children:"Asiss"}),l.jsx("span",{className:"text-xs text-slate-400",children:"Dashboard Logstica"})]}),l.jsx("button",{onClick:t,className:"ml-auto rounded-lg p-1.5 text-slate-400 hover:bg-white/10 hover:text-white md:hidden",children:l.jsx(xe,{name:"x",size:20})})]}),l.jsx("nav",{className:"flex-1 overflow-y-auto custom-scrollbar px-3 py-4 space-y-1",children:hk.map(o=>{const c=n.includes(o.label),u=s(o);return l.jsxs("div",{className:"mb-1",children:[l.jsxs("button",{onClick:()=>i(o.label),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 group ${u?"bg-white/10 text-white":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[l.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-lg transition-all duration-200 ${u?"bg-gradient-to-br from-brand-500 to-brand-600 text-white shadow-brand":"bg-white/5 text-slate-400 group-hover:bg-white/10 group-hover:text-slate-200"}`,children:l.jsx(xe,{name:o.icon,size:18})}),l.jsx("span",{className:"flex-1 text-left text-sm font-semibold",children:o.label}),l.jsx(xe,{name:"chevron-down",size:16,className:`transition-transform duration-200 ${c?"rotate-0":"-rotate-90"}`})]}),l.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-out ${c?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:l.jsx("div",{className:"mt-1 ml-4 pl-4 border-l border-white/10 space-y-0.5",children:o.items.map(d=>l.jsxs(eY,{to:d.to,onClick:t,className:({isActive:f})=>`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-all duration-200 ${f?"bg-brand-500/20 text-brand-300 font-medium":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[l.jsx(xe,{name:d.icon,size:16}),l.jsx("span",{children:d.label})]},d.to))})})]},o.label)})}),l.jsx("div",{className:"border-t border-white/10 px-4 py-4",children:l.jsxs("div",{className:"flex items-center gap-3 px-2",children:[l.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-gradient-to-br from-accent-400 to-accent-600 text-white text-sm font-bold",children:"S"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium text-white truncate",children:"Supervisor"}),l.jsx("p",{className:"text-xs text-slate-400",children:"Terminal Activo"})]})]})})]})})]})},l5=new Set;let ix=[];const cY=()=>crypto.randomUUID(),pk={subscribeNotifications:e=>(l5.add(e),()=>l5.delete(e)),publishNotification:e=>{const t={id:e.id??cY(),createdAt:e.createdAt??new Date().toISOString(),...e};return ix=[t,...ix].slice(0,50),l5.forEach(r=>r(t)),t},getNotifications:()=>ix,clear:()=>{ix=[]}},uY=F2(e=>({items:[],last:void 0,addNotification:t=>e(r=>({items:[t,...r.items],last:t})),setAll:t=>e({items:t}),clear:()=>e({items:[],last:void 0})})),Ia=e=>(typeof e=="string"?new Date(e):e).toLocaleDateString("es-CL",{year:"numeric",month:"short",day:"numeric"}),dY=()=>{const{items:e,addNotification:t,setAll:r,last:n}=uY(),[a,i]=M.useState(!1),[s,o]=M.useState(!1);return M.useEffect(()=>{r(pk.getNotifications());const c=pk.subscribeNotifications(u=>{t(u),o(!0),setTimeout(()=>o(!1),3500)});return()=>c()},[t,r]),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{type:"button",className:"btn btn-secondary h-10",onClick:()=>i(c=>!c),children:[l.jsxs("span",{className:"relative inline-flex items-center",children:[l.jsx("svg",{className:"h-5 w-5 text-slate-600",fill:"none",stroke:"currentColor",strokeWidth:"1.8",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14 17h5l-1.405-1.405A2.032 2.032 0 0117 14.158V11a5.002 5.002 0 00-3-4.584V6a2 2 0 10-4 0v.416A5.002 5.002 0 007 11v3.159c0 .538-.214 1.055-.595 1.436L5 17h5m4 0v1a3 3 0 11-6 0v-1m6 0H8"})}),e.length>0&&l.jsx("span",{className:"absolute -right-2 -top-2 flex h-5 min-w-[20px] items-center justify-center rounded-full bg-brand-500 px-1 text-xs font-bold text-white",children:e.length})]}),l.jsx("span",{className:"hidden text-sm font-semibold text-slate-700 sm:inline",children:"Alertas"})]}),a&&l.jsxs("div",{className:"absolute right-0 z-30 mt-2 w-80 rounded-lg border border-slate-200 bg-white shadow-lg",children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[l.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Notificaciones"}),l.jsx("button",{className:"text-xs text-brand-600 hover:underline",onClick:()=>i(!1),children:"Cerrar"})]}),l.jsxs("div",{className:"max-h-80 space-y-2 overflow-y-auto px-4 pb-4",children:[e.length===0&&l.jsx("p",{className:"text-sm text-slate-500",children:"Sin notificaciones por ahora."}),e.map(c=>l.jsxs("div",{className:"rounded-md border border-slate-100 bg-slate-50 p-3",children:[l.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[l.jsx("span",{className:"font-semibold capitalize",children:c.level}),l.jsx("span",{children:Ia(c.createdAt)})]}),l.jsx("p",{className:"text-sm font-semibold text-slate-800",children:c.title}),l.jsx("p",{className:"text-sm text-slate-600",children:c.message})]},c.id))]})]}),s&&n&&l.jsxs("div",{className:"fixed bottom-4 right-4 z-40 max-w-sm rounded-md border border-slate-200 bg-white px-4 py-3 shadow-lg",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-xs font-semibold uppercase text-brand-700",children:n.level}),l.jsx("button",{onClick:()=>o(!1),className:"text-xs text-slate-500 hover:text-slate-700",children:"Cerrar"})]}),l.jsx("p",{className:"text-sm font-semibold text-slate-900",children:n.title}),l.jsx("p",{className:"text-sm text-slate-700",children:n.message})]})]})},fY=({onMenuToggle:e})=>{var i;const t=zt(s=>s.context),r=Ar(s=>s.session),n=Ar(s=>s.clearSession),a=()=>t.mode==="ALL"?"Todos los terminales":t.mode==="TERMINAL"&&t.value?or(t.value):"Terminal";return l.jsx("header",{className:"header px-4 md:px-6",children:l.jsxs("div",{className:"flex w-full items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:e,className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-100 text-slate-600 transition-all hover:bg-slate-200 md:hidden","aria-label":"Abrir men",children:l.jsx(xe,{name:"menu",size:20})}),l.jsxs("div",{className:"hidden md:block",children:[l.jsx("h1",{className:"text-lg font-bold text-slate-900",children:"Dashboard"}),l.jsx("p",{className:"text-xs text-slate-500",children:a()})]})]}),l.jsx("div",{className:"hidden lg:flex flex-1 max-w-md mx-8",children:l.jsxs("div",{className:"relative w-full",children:[l.jsx(xe,{name:"search",size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),l.jsx("input",{type:"search",placeholder:"Buscar en el dashboard...",className:"w-full rounded-xl border border-slate-200 bg-slate-50 py-2.5 pl-10 pr-4 text-sm transition-all placeholder:text-slate-400 focus:border-brand-500 focus:bg-white focus:outline-none focus:ring-2 focus:ring-brand-500/20"})]})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"md:hidden",children:l.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-brand-50 px-3 py-1.5",children:[l.jsx(xe,{name:"building",size:14,className:"text-brand-600"}),l.jsx("span",{className:"text-xs font-semibold text-brand-700",children:t.mode==="ALL"?"Todos":(i=t.value)==null?void 0:i.split("_").pop()})]})}),l.jsx(dY,{}),r&&l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"hidden sm:flex items-center gap-3 rounded-xl border border-slate-200 bg-white px-3 py-2 shadow-sm",children:[l.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-brand-500 to-brand-600 text-white text-sm font-bold",children:r.supervisorName.charAt(0).toUpperCase()}),l.jsxs("div",{className:"hidden md:flex flex-col leading-tight",children:[l.jsx("span",{className:"text-sm font-semibold text-slate-900",children:r.supervisorName}),l.jsx("span",{className:"text-xs text-slate-500",children:or(r.terminalCode)})]}),l.jsx("button",{onClick:()=>{n(),Hy.logout()},className:"ml-1 rounded-lg p-1.5 text-slate-400 transition-colors hover:bg-slate-100 hover:text-danger-600",title:"Cerrar sesin",children:l.jsx(xe,{name:"logout",size:18})})]}),l.jsx("button",{onClick:()=>{n(),Hy.logout()},className:"sm:hidden flex h-10 w-10 items-center justify-center rounded-xl bg-slate-100 text-slate-600 transition-all hover:bg-danger-100 hover:text-danger-600",title:"Cerrar sesin",children:l.jsx(xe,{name:"logout",size:20})})]})]})]})})},hY=()=>{const[e,t]=M.useState(!1);return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-slate-100 to-slate-50",children:l.jsxs("div",{className:"flex",children:[l.jsx(lY,{isOpen:e,onClose:()=>t(!1)}),l.jsxs("div",{className:"flex min-h-screen flex-1 flex-col md:ml-72",children:[l.jsx(fY,{onMenuToggle:()=>t(r=>!r)}),l.jsx("main",{className:"flex-1 px-4 pb-8 pt-6 md:px-8",children:l.jsx("div",{className:"animate-fade-in",children:l.jsx(J7,{})})}),l.jsx("footer",{className:"border-t border-slate-200 bg-white/50 px-4 py-4 md:px-8",children:l.jsxs("div",{className:"flex flex-col items-center justify-between gap-2 text-xs text-slate-500 sm:flex-row",children:[l.jsx("p",{children:" 2024 Asiss  Dashboard de Operaciones y Logstica"}),l.jsxs("p",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-success-500 animate-pulse"}),"Sistema operativo"]})]})})]})]})})},kn=({label:e="Cargando..."})=>l.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"h-12 w-12 rounded-full border-[3px] border-slate-200"}),l.jsx("div",{className:"absolute inset-0 h-12 w-12 rounded-full border-[3px] border-transparent border-t-brand-500 animate-spin"})]}),l.jsx("p",{className:"mt-4 text-sm font-medium text-slate-600",children:e})]}),mn=({title:e,description:t,actions:r})=>l.jsxs("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900 md:text-3xl",children:e}),t&&l.jsx("p",{className:"mt-1 text-sm text-slate-500",children:t})]}),r&&l.jsx("div",{className:"flex flex-wrap items-center gap-3",children:r})]}),pY=({value:e,onChange:t,label:r="Terminal actual"})=>{const n=e.mode==="ALL"?"ALL":e.mode==="GROUP"?`GROUP:${e.value}`:`TERMINAL:${e.value}`,a=i=>{const s=i.target.value;if(s==="ALL"){t(Z7);return}if(s.startsWith("GROUP:")){const c=s.replace("GROUP:","");t({mode:"GROUP",value:c});return}const o=s.replace("TERMINAL:","");t({mode:"TERMINAL",value:o})};return l.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-600",children:[l.jsx("span",{className:"mb-1",children:r}),l.jsxs("select",{value:n,onChange:a,className:"input min-w-[200px]","aria-label":"Selector de terminal",children:[l.jsx("option",{value:"ALL",children:"Todos"}),l.jsx("optgroup",{label:"Terminales",children:es.map(i=>l.jsx("option",{value:`TERMINAL:${i.value}`,children:i.label},i.value))}),l.jsx("optgroup",{label:"Grupos",children:iY.map(i=>l.jsx("option",{value:`GROUP:${i.value}`,children:i.label},i.value))})]})]})},ns=({terminalContext:e,onTerminalChange:t,children:r})=>l.jsx("div",{className:"card p-4 mb-6",children:l.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx(pY,{value:e,onChange:t})}),r&&l.jsx("div",{className:"flex flex-wrap items-end gap-3 border-t border-slate-100 pt-4 lg:border-0 lg:pt-0",children:r})]})}),Da=({message:e="Ha ocurrido un error",onRetry:t})=>l.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border border-danger-200 bg-danger-50/50 px-6 py-12 text-center",children:[l.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-danger-100 mb-4",children:l.jsx("svg",{className:"h-7 w-7 text-danger-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})})}),l.jsx("p",{className:"text-sm font-semibold text-danger-700",children:e}),l.jsx("p",{className:"mt-1 text-xs text-danger-600 max-w-xs",children:"Por favor intenta de nuevo o contacta soporte si el problema persiste."}),t&&l.jsxs("button",{onClick:t,className:"mt-4 btn btn-secondary text-danger-700 border-danger-300 hover:bg-danger-100",children:[l.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reintentar"]})]}),_a=({onExportView:e,onExportAll:t})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:e,className:"btn btn-secondary text-sm",children:[l.jsx(xe,{name:"clipboard",size:16}),l.jsx("span",{className:"hidden sm:inline",children:"Exportar Vista"}),l.jsx("span",{className:"sm:hidden",children:"Vista"})]}),l.jsxs("button",{onClick:t,className:"btn btn-primary text-sm",children:[l.jsx(xe,{name:"layers",size:16}),l.jsx("span",{className:"hidden sm:inline",children:"Exportar Todo"}),l.jsx("span",{className:"sm:hidden",children:"Todo"})]})]});/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Wy={};Wy.version="0.18.5";var eM=1252,mY=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],tM=function(e){mY.indexOf(e)!=-1&&(eM=e)};function gY(){tM(1252)}var kg=function(e){tM(e)};function vY(){kg(1200),gY()}var sx=function(t){return String.fromCharCode(t)},mk=function(t){return String.fromCharCode(t)},Vy,Nu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Og(e){for(var t="",r=0,n=0,a=0,i=0,s=0,o=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),i=r>>2,n=e.charCodeAt(u++),s=(r&3)<<4|n>>4,a=e.charCodeAt(u++),o=(n&15)<<2|a>>6,c=a&63,isNaN(n)?o=c=64:isNaN(a)&&(c=64),t+=Nu.charAt(i)+Nu.charAt(s)+Nu.charAt(o)+Nu.charAt(c);return t}function gc(e){var t="",r=0,n=0,a=0,i=0,s=0,o=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)i=Nu.indexOf(e.charAt(u++)),s=Nu.indexOf(e.charAt(u++)),r=i<<2|s>>4,t+=String.fromCharCode(r),o=Nu.indexOf(e.charAt(u++)),n=(s&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),c=Nu.indexOf(e.charAt(u++)),a=(o&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var Nr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Cc=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function xf(e){return Nr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function gk(e){return Nr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Po=function(t){return Nr?Cc(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function q2(e){if(typeof ArrayBuffer>"u")return Po(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Iv(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function xY(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}var Xa=Nr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Cc(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function yY(e){for(var t=[],r=0,n=e.length+250,a=xf(e.length+255),i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s<128)a[r++]=s;else if(s<2048)a[r++]=192|s>>6&31,a[r++]=128|s&63;else if(s>=55296&&s<57344){s=(s&1023)+64;var o=e.charCodeAt(++i)&1023;a[r++]=240|s>>8&7,a[r++]=128|s>>2&63,a[r++]=128|o>>6&15|(s&3)<<4,a[r++]=128|o&63}else a[r++]=224|s>>12&15,a[r++]=128|s>>6&63,a[r++]=128|s&63;r>n&&(t.push(a.slice(0,r)),r=0,a=xf(65535),n=65530)}return t.push(a.slice(0,r)),Xa(t)}var Xm=/\u0000/g,ox=/[\u0001-\u0006]/g;function Gh(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Ro(e,t){var r=""+e;return r.length>=t?r:Fn("0",t-r.length)+r}function QA(e,t){var r=""+e;return r.length>=t?r:Fn(" ",t-r.length)+r}function Gy(e,t){var r=""+e;return r.length>=t?r:r+Fn(" ",t-r.length)}function bY(e,t){var r=""+Math.round(e);return r.length>=t?r:Fn("0",t-r.length)+r}function wY(e,t){var r=""+e;return r.length>=t?r:Fn("0",t-r.length)+r}var vk=Math.pow(2,32);function nh(e,t){if(e>vk||e<-vk)return bY(e,t);var r=Math.round(e);return wY(r,t)}function Ky(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var xk=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],c5=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function _Y(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Bn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},yk={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},SY={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Xy(e,t,r){for(var n=e<0?-1:1,a=e*n,i=0,s=1,o=0,c=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),o=f*s+i,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),i=s,s=o,c=u,u=d;if(d>t&&(u>t?(d=c,o=i):(d=u,o=s)),!r)return[0,n*o,d];var p=Math.floor(n*o/d);return[p,n*o-p*d,d]}function lx(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),i=0,s=[],o={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)s=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)s=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),s=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),n<60&&(i=(i+6)%7),r&&(i=kY(c,s))}return o.y=s[0],o.m=s[1],o.d=s[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=i,o}var rM=new Date(1899,11,31,0,0,0),NY=rM.getTime(),jY=new Date(1900,2,1,0,0,0);function nM(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=jY&&(r+=24*60*60*1e3),(r-(NY+(e.getTimezoneOffset()-rM.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function ZA(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function AY(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function EY(e){var t=e<0?12:11,r=ZA(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function TY(e){var t=ZA(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function CY(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=EY(e):t===10?r=e.toFixed(10).substr(0,12):r=TY(e),ZA(AY(r.toUpperCase()))}function MN(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):CY(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return qu(14,nM(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function kY(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function OY(e,t,r,n){var a="",i=0,s=0,o=r.y,c,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return c5[r.m-1][1];case 5:return c5[r.m-1][0];default:return c5[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return xk[r.q][0];default:return xk[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Ro(r.S,t.length):(n>=2?s=n===3?1e3:100:s=n===1?10:1,i=Math.round(s*(r.S+r.u)),i>=60*s&&(i=0),t==="s"?i===0?"0":""+i/s:(a=Ro(i,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=o,u=1;break}var d=u>0?Ro(c,u):"";return d}function ju(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var aM=/%/g;function PY(e,t,r){var n=t.replace(aM,""),a=t.length-n.length;return ac(e,n,r*Math.pow(10,2*a))+Fn("%",a)}function LY(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return ac(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function iM(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+iM(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),r.indexOf("e")===-1){var s=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+i):r+="E+"+(s-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(a+i)%a)+"."+d.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var sM=/# (\?+)( ?)\/( ?)(\d+)/;function RY(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),i=Math.floor(a/n),s=a-i*n,o=n;return r+(i===0?"":""+i)+" "+(s===0?Fn(" ",e[1].length+1+e[4].length):QA(s,e[1].length)+e[2]+"/"+e[3]+Ro(o,e[4].length))}function IY(e,t,r){return r+(t===0?"":""+t)+Fn(" ",e[1].length+2+e[4].length)}var oM=/^#*0*\.([0#]+)/,lM=/\).*[0#]/,cM=/\(###\) ###\\?-####/;function Ai(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function bk(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function wk(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function DY(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function MY(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function qs(e,t,r){if(e.charCodeAt(0)===40&&!t.match(lM)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?qs("n",n,r):"("+qs("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return LY(e,t,r);if(t.indexOf("%")!==-1)return PY(e,t,r);if(t.indexOf("E")!==-1)return iM(t,r);if(t.charCodeAt(0)===36)return"$"+qs(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,s,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+nh(c,t.length);if(t.match(/^[#?]+$/))return a=nh(r,0),a==="0"&&(a=""),a.length>t.length?a:Ai(t.substr(0,t.length-a.length))+a;if(i=t.match(sM))return RY(i,c,u);if(t.match(/^#+0+$/))return u+nh(c,t.length-t.indexOf("0"));if(i=t.match(oM))return a=bk(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Ai(i[1])).replace(/\.$/,"."+Ai(i[1])).replace(/\.(\d*)$/,function(v,m){return"."+m+Fn("0",Ai(i[1]).length-m.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+bk(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+ju(nh(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+qs(e,t,-r):ju(""+(Math.floor(r)+DY(r,i[1].length)))+"."+Ro(wk(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return qs(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Gh(qs(e,t.replace(/[\\-]/g,""),r)),s=0,Gh(Gh(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return s<a.length?a.charAt(s++):v==="0"?"0":""}));if(t.match(cM))return a=qs(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(i[4].length,7),o=Xy(c,Math.pow(10,s)-1,!1),a=""+u,d=ac("n",i[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+i[2]+"/"+i[3],d=Gy(o[2],s),d.length<i[4].length&&(d=Ai(i[4].substr(i[4].length-d.length))+d),a+=d,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(i[1].length,i[4].length),7),o=Xy(c,Math.pow(10,s)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?QA(o[1],s)+i[2]+"/"+i[3]+Gy(o[2],s):Fn(" ",2*s+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=nh(r,0),t.length<=a.length?a:Ai(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),s=a.indexOf(".");var f=t.indexOf(".")-s,p=t.length-a.length-f;return Ai(t.substr(0,f)+a+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return s=wk(r,i[1].length),r<0?"-"+qs(e,t,-r):ju(MY(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Ro(0,3-v.length):"")+v})+"."+Ro(s,i[1].length);switch(t){case"###,##0.00":return qs(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var h=ju(nh(c,0));return h!=="0"?u+h:"";case"###,###.00":return qs(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return qs(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function FY(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return ac(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function $Y(e,t,r){var n=t.replace(aM,""),a=t.length-n.length;return ac(e,n,r*Math.pow(10,2*a))+Fn("%",a)}function uM(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+uM(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),!r.match(/[Ee]/)){var s=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+i):r+="E+"+(s-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(a+i)%a)+"."+d.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function el(e,t,r){if(e.charCodeAt(0)===40&&!t.match(lM)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?el("n",n,r):"("+el("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return FY(e,t,r);if(t.indexOf("%")!==-1)return $Y(e,t,r);if(t.indexOf("E")!==-1)return uM(t,r);if(t.charCodeAt(0)===36)return"$"+el(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,s,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Ro(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:Ai(t.substr(0,t.length-a.length))+a;if(i=t.match(sM))return IY(i,c,u);if(t.match(/^#+0+$/))return u+Ro(c,t.length-t.indexOf("0"));if(i=t.match(oM))return a=(""+r).replace(/^([^\.]+)$/,"$1."+Ai(i[1])).replace(/\.$/,"."+Ai(i[1])),a=a.replace(/\.(\d*)$/,function(v,m){return"."+m+Fn("0",Ai(i[1]).length-m.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+ju(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+el(e,t,-r):ju(""+r)+"."+Fn("0",i[1].length);if(i=t.match(/^#,#*,#0/))return el(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Gh(el(e,t.replace(/[\\-]/g,""),r)),s=0,Gh(Gh(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return s<a.length?a.charAt(s++):v==="0"?"0":""}));if(t.match(cM))return a=el(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(i[4].length,7),o=Xy(c,Math.pow(10,s)-1,!1),a=""+u,d=ac("n",i[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+i[2]+"/"+i[3],d=Gy(o[2],s),d.length<i[4].length&&(d=Ai(i[4].substr(i[4].length-d.length))+d),a+=d,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(i[1].length,i[4].length),7),o=Xy(c,Math.pow(10,s)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?QA(o[1],s)+i[2]+"/"+i[3]+Gy(o[2],s):Fn(" ",2*s+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:Ai(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),s=a.indexOf(".");var f=t.indexOf(".")-s,p=t.length-a.length-f;return Ai(t.substr(0,f)+a+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+el(e,t,-r):ju(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Ro(0,3-v.length):"")+v})+"."+Ro(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var h=ju(""+c);return h!=="0"?u+h:"";default:if(t.match(/\.[0#?]*$/))return el(e,t.slice(0,t.lastIndexOf(".")),r)+Ai(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function ac(e,t,r){return(r|0)===r?el(e,t,r):qs(e,t,r)}function BY(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var dM=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function fM(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":Ky(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(dM))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function UY(e,t,r,n){for(var a=[],i="",s=0,o="",c="t",u,d,f,p="H";s<e.length;)switch(o=e.charAt(s)){case"G":if(!Ky(e,s))throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"G",v:"General"},s+=7;break;case'"':for(i="";(f=e.charCodeAt(++s))!==34&&s<e.length;)i+=String.fromCharCode(f);a[a.length]={t:"t",v:i},++s;break;case"\\":var h=e.charAt(++s),v=h==="("||h===")"?h:"t";a[a.length]={t:v,v:h},++s;break;case"_":a[a.length]={t:"t",v:" "},s+=2;break;case"@":a[a.length]={t:"T",v:t},++s;break;case"B":case"b":if(e.charAt(s+1)==="1"||e.charAt(s+1)==="2"){if(u==null&&(u=lx(t,r,e.charAt(s+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(s,2)},c=o,s+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=lx(t,r),u==null))return"";for(i=o;++s<e.length&&e.charAt(s).toLowerCase()===o;)i+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=p),a[a.length]={t:o,v:i},c=o;break;case"A":case"a":case"":var m={t:o,v:o};if(u==null&&(u=lx(t,r)),e.substr(s,3).toUpperCase()==="A/P"?(u!=null&&(m.v=u.H>=12?"P":"A"),m.t="T",p="h",s+=3):e.substr(s,5).toUpperCase()==="AM/PM"?(u!=null&&(m.v=u.H>=12?"PM":"AM"),m.t="T",s+=5,p="h"):e.substr(s,5).toUpperCase()==="/"?(u!=null&&(m.v=u.H>=12?"":""),m.t="T",s+=5,p="h"):(m.t="t",++s),u==null&&m.t==="T")return"";a[a.length]=m,c=o;break;case"[":for(i=o;e.charAt(s++)!=="]"&&s<e.length;)i+=e.charAt(s);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(dM)){if(u==null&&(u=lx(t,r),u==null))return"";a[a.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",fM(e)||(a[a.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=o;++s<e.length&&(o=e.charAt(s))==="0";)i+=o;a[a.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++s<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(s))>-1;)i+=o;a[a.length]={t:"n",v:i};break;case"?":for(i=o;e.charAt(++s)===o;)i+=o;a[a.length]={t:o,v:i},c=o;break;case"*":++s,(e.charAt(s)==" "||e.charAt(s)=="*")&&++s;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;s<e.length&&"0123456789".indexOf(e.charAt(++s))>-1;)i+=e.charAt(s);a[a.length]={t:"D",v:i};break;case" ":a[a.length]={t:o,v:o},++s;break;case"$":a[a.length]={t:"t",v:"$"},++s;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"t",v:o},++s;break}var x=0,y=0,g;for(s=a.length-1,c="t";s>=0;--s)switch(a[s].t){case"h":case"H":a[s].t=p,c="h",x<1&&(x=1);break;case"s":(g=a[s].v.match(/\.0+$/))&&(y=Math.max(y,g[0].length-1)),x<3&&(x=3);case"d":case"y":case"M":case"e":c=a[s].t;break;case"m":c==="s"&&(a[s].t="M",x<2&&(x=2));break;case"X":break;case"Z":x<1&&a[s].v.match(/[Hh]/)&&(x=1),x<2&&a[s].v.match(/[Mm]/)&&(x=2),x<3&&a[s].v.match(/[Ss]/)&&(x=3)}switch(x){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",S;for(s=0;s<a.length;++s)switch(a[s].t){case"t":case"T":case" ":case"D":break;case"X":a[s].v="",a[s].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[s].v=OY(a[s].t.charCodeAt(0),a[s].v,u,y),a[s].t="t";break;case"n":case"?":for(S=s+1;a[S]!=null&&((o=a[S].t)==="?"||o==="D"||(o===" "||o==="t")&&a[S+1]!=null&&(a[S+1].t==="?"||a[S+1].t==="t"&&a[S+1].v==="/")||a[s].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[S].v==="/"||a[S].v===" "&&a[S+1]!=null&&a[S+1].t=="?"));)a[s].v+=a[S].v,a[S]={v:"",t:";"},++S;b+=a[s].v,s=S-1;break;case"G":a[s].t="t",a[s].v=MN(t,r);break}var _="",j,A;if(b.length>0){b.charCodeAt(0)==40?(j=t<0&&b.charCodeAt(0)===45?-t:t,A=ac("n",b,j)):(j=t<0&&n>1?-t:t,A=ac("n",b,j),j<0&&a[0]&&a[0].t=="t"&&(A=A.substr(1),a[0].v="-"+a[0].v)),S=A.length-1;var E=a.length;for(s=0;s<a.length;++s)if(a[s]!=null&&a[s].t!="t"&&a[s].v.indexOf(".")>-1){E=s;break}var T=a.length;if(E===a.length&&A.indexOf("E")===-1){for(s=a.length-1;s>=0;--s)a[s]==null||"n?".indexOf(a[s].t)===-1||(S>=a[s].v.length-1?(S-=a[s].v.length,a[s].v=A.substr(S+1,a[s].v.length)):S<0?a[s].v="":(a[s].v=A.substr(0,S+1),S=-1),a[s].t="t",T=s);S>=0&&T<a.length&&(a[T].v=A.substr(0,S+1)+a[T].v)}else if(E!==a.length&&A.indexOf("E")===-1){for(S=A.indexOf(".")-1,s=E;s>=0;--s)if(!(a[s]==null||"n?".indexOf(a[s].t)===-1)){for(d=a[s].v.indexOf(".")>-1&&s===E?a[s].v.indexOf(".")-1:a[s].v.length-1,_=a[s].v.substr(d+1);d>=0;--d)S>=0&&(a[s].v.charAt(d)==="0"||a[s].v.charAt(d)==="#")&&(_=A.charAt(S--)+_);a[s].v=_,a[s].t="t",T=s}for(S>=0&&T<a.length&&(a[T].v=A.substr(0,S+1)+a[T].v),S=A.indexOf(".")+1,s=E;s<a.length;++s)if(!(a[s]==null||"n?(".indexOf(a[s].t)===-1&&s!==E)){for(d=a[s].v.indexOf(".")>-1&&s===E?a[s].v.indexOf(".")+1:0,_=a[s].v.substr(0,d);d<a[s].v.length;++d)S<A.length&&(_+=A.charAt(S++));a[s].v=_,a[s].t="t",T=s}}}for(s=0;s<a.length;++s)a[s]!=null&&"n?".indexOf(a[s].t)>-1&&(j=n>1&&t<0&&s>0&&a[s-1].v==="-"?-t:t,a[s].v=ac(a[s].t,a[s].v,j),a[s].t="t");var L="";for(s=0;s!==a.length;++s)a[s]!=null&&(L+=a[s].v);return L}var _k=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Sk(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function zY(e,t){var r=BY(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var s=r[0].match(_k),o=r[1].match(_k);return Sk(t,s)?[n,r[0]]:Sk(t,o)?[n,r[1]]:[n,r[s!=null&&o!=null?2:1]]}return[n,i]}function qu(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Bn)[e],n==null&&(n=r.table&&r.table[yk[e]]||Bn[yk[e]]),n==null&&(n=SY[e]||"General");break}if(Ky(n,0))return MN(t,r);t instanceof Date&&(t=nM(t,r.date1904));var a=zY(n,t);if(Ky(a[1]))return MN(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return UY(a[1],t,r,a[0])}function hM(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Bn[r]==null){t<0&&(t=r);continue}if(Bn[r]==e){t=r;break}}t<0&&(t=391)}return Bn[t]=e,t}function H2(e){for(var t=0;t!=392;++t)e[t]!==void 0&&hM(e[t],t)}function W2(){Bn=_Y()}var pM=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function qY(e){var t=typeof e=="number"?Bn[e]:e;return t=t.replace(pM,"(\\d+)"),new RegExp("^"+t+"$")}function HY(e,t,r){var n=-1,a=-1,i=-1,s=-1,o=-1,c=-1;(t.match(pM)||[]).forEach(function(f,p){var h=parseInt(r[p+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=h;break;case"d":i=h;break;case"h":s=h;break;case"s":c=h;break;case"m":s>=0?o=h:a=h;break}}),c>=0&&o==-1&&a>=0&&(o=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return s==-1&&o==-1&&c==-1?u:n==-1&&a==-1&&i==-1?d:u+"T"+d}var WY=function(){var e={};e.version="1.2.0";function t(){for(var A=0,E=new Array(256),T=0;T!=256;++T)A=T,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,E[T]=A;return typeof Int32Array<"u"?new Int32Array(E):E}var r=t();function n(A){var E=0,T=0,L=0,k=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(L=0;L!=256;++L)k[L]=A[L];for(L=0;L!=256;++L)for(T=A[L],E=256+L;E<4096;E+=256)T=k[E]=T>>>8^A[T&255];var R=[];for(L=1;L!=16;++L)R[L-1]=typeof Int32Array<"u"?k.subarray(L*256,L*256+256):k.slice(L*256,L*256+256);return R}var a=n(r),i=a[0],s=a[1],o=a[2],c=a[3],u=a[4],d=a[5],f=a[6],p=a[7],h=a[8],v=a[9],m=a[10],x=a[11],y=a[12],g=a[13],b=a[14];function S(A,E){for(var T=E^-1,L=0,k=A.length;L<k;)T=T>>>8^r[(T^A.charCodeAt(L++))&255];return~T}function _(A,E){for(var T=E^-1,L=A.length-15,k=0;k<L;)T=b[A[k++]^T&255]^g[A[k++]^T>>8&255]^y[A[k++]^T>>16&255]^x[A[k++]^T>>>24]^m[A[k++]]^v[A[k++]]^h[A[k++]]^p[A[k++]]^f[A[k++]]^d[A[k++]]^u[A[k++]]^c[A[k++]]^o[A[k++]]^s[A[k++]]^i[A[k++]]^r[A[k++]];for(L+=15;k<L;)T=T>>>8^r[(T^A[k++])&255];return~T}function j(A,E){for(var T=E^-1,L=0,k=A.length,R=0,D=0;L<k;)R=A.charCodeAt(L++),R<128?T=T>>>8^r[(T^R)&255]:R<2048?(T=T>>>8^r[(T^(192|R>>6&31))&255],T=T>>>8^r[(T^(128|R&63))&255]):R>=55296&&R<57344?(R=(R&1023)+64,D=A.charCodeAt(L++)&1023,T=T>>>8^r[(T^(240|R>>8&7))&255],T=T>>>8^r[(T^(128|R>>2&63))&255],T=T>>>8^r[(T^(128|D>>6&15|(R&3)<<4))&255],T=T>>>8^r[(T^(128|D&63))&255]):(T=T>>>8^r[(T^(224|R>>12&15))&255],T=T>>>8^r[(T^(128|R>>6&63))&255],T=T>>>8^r[(T^(128|R&63))&255]);return~T}return e.table=r,e.bstr=S,e.buf=_,e.str=j,e}(),Wr=function(){var t={};t.version="1.2.1";function r(W,de){for(var re=W.split("/"),ae=de.split("/"),fe=0,ge=0,Ee=Math.min(re.length,ae.length);fe<Ee;++fe){if(ge=re[fe].length-ae[fe].length)return ge;if(re[fe]!=ae[fe])return re[fe]<ae[fe]?-1:1}return re.length-ae.length}function n(W){if(W.charAt(W.length-1)=="/")return W.slice(0,-1).indexOf("/")===-1?W:n(W.slice(0,-1));var de=W.lastIndexOf("/");return de===-1?W:W.slice(0,de+1)}function a(W){if(W.charAt(W.length-1)=="/")return a(W.slice(0,-1));var de=W.lastIndexOf("/");return de===-1?W:W.slice(de+1)}function i(W,de){typeof de=="string"&&(de=new Date(de));var re=de.getHours();re=re<<6|de.getMinutes(),re=re<<5|de.getSeconds()>>>1,W.write_shift(2,re);var ae=de.getFullYear()-1980;ae=ae<<4|de.getMonth()+1,ae=ae<<5|de.getDate(),W.write_shift(2,ae)}function s(W){var de=W.read_shift(2)&65535,re=W.read_shift(2)&65535,ae=new Date,fe=re&31;re>>>=5;var ge=re&15;re>>>=4,ae.setMilliseconds(0),ae.setFullYear(re+1980),ae.setMonth(ge-1),ae.setDate(fe);var Ee=de&31;de>>>=5;var De=de&63;return de>>>=6,ae.setHours(de),ae.setMinutes(De),ae.setSeconds(Ee<<1),ae}function o(W){ys(W,0);for(var de={},re=0;W.l<=W.length-4;){var ae=W.read_shift(2),fe=W.read_shift(2),ge=W.l+fe,Ee={};switch(ae){case 21589:re=W.read_shift(1),re&1&&(Ee.mtime=W.read_shift(4)),fe>5&&(re&2&&(Ee.atime=W.read_shift(4)),re&4&&(Ee.ctime=W.read_shift(4))),Ee.mtime&&(Ee.mt=new Date(Ee.mtime*1e3));break}W.l=ge,de[ae]=Ee}return de}var c;function u(){return c||(c={})}function d(W,de){if(W[0]==80&&W[1]==75)return Ht(W,de);if((W[0]|32)==109&&(W[1]|32)==105)return Pt(W,de);if(W.length<512)throw new Error("CFB file size "+W.length+" < 512");var re=3,ae=512,fe=0,ge=0,Ee=0,De=0,Te=0,Ce=[],Pe=W.slice(0,512);ys(Pe,0);var Xe=f(Pe);switch(re=Xe[0],re){case 3:ae=512;break;case 4:ae=4096;break;case 0:if(Xe[1]==0)return Ht(W,de);default:throw new Error("Major Version: Expected 3 or 4 saw "+re)}ae!==512&&(Pe=W.slice(0,ae),ys(Pe,28));var tt=W.slice(0,ae);p(Pe,re);var lt=Pe.read_shift(4,"i");if(re===3&&lt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+lt);Pe.l+=4,Ee=Pe.read_shift(4,"i"),Pe.l+=4,Pe.chk("00100000","Mini Stream Cutoff Size: "),De=Pe.read_shift(4,"i"),fe=Pe.read_shift(4,"i"),Te=Pe.read_shift(4,"i"),ge=Pe.read_shift(4,"i");for(var Qe=-1,ot=0;ot<109&&(Qe=Pe.read_shift(4,"i"),!(Qe<0));++ot)Ce[ot]=Qe;var Ft=h(W,ae);x(Te,ge,Ft,ae,Ce);var Hr=g(Ft,Ee,Ce,ae);Hr[Ee].name="!Directory",fe>0&&De!==D&&(Hr[De].name="!MiniFAT"),Hr[Ce[0]].name="!FAT",Hr.fat_addrs=Ce,Hr.ssz=ae;var dr={},On=[],Wo=[],uo=[];b(Ee,Hr,Ft,On,fe,dr,Wo,De),v(Wo,uo,On),On.shift();var Vo={FileIndex:Wo,FullPaths:uo};return de&&de.raw&&(Vo.raw={header:tt,sectors:Ft}),Vo}function f(W){if(W[W.l]==80&&W[W.l+1]==75)return[0,0];W.chk(q,"Header Signature: "),W.l+=16;var de=W.read_shift(2,"u");return[W.read_shift(2,"u"),de]}function p(W,de){var re=9;switch(W.l+=2,re=W.read_shift(2)){case 9:if(de!=3)throw new Error("Sector Shift: Expected 9 saw "+re);break;case 12:if(de!=4)throw new Error("Sector Shift: Expected 12 saw "+re);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+re)}W.chk("0600","Mini Sector Shift: "),W.chk("000000000000","Reserved: ")}function h(W,de){for(var re=Math.ceil(W.length/de)-1,ae=[],fe=1;fe<re;++fe)ae[fe-1]=W.slice(fe*de,(fe+1)*de);return ae[re-1]=W.slice(re*de),ae}function v(W,de,re){for(var ae=0,fe=0,ge=0,Ee=0,De=0,Te=re.length,Ce=[],Pe=[];ae<Te;++ae)Ce[ae]=Pe[ae]=ae,de[ae]=re[ae];for(;De<Pe.length;++De)ae=Pe[De],fe=W[ae].L,ge=W[ae].R,Ee=W[ae].C,Ce[ae]===ae&&(fe!==-1&&Ce[fe]!==fe&&(Ce[ae]=Ce[fe]),ge!==-1&&Ce[ge]!==ge&&(Ce[ae]=Ce[ge])),Ee!==-1&&(Ce[Ee]=ae),fe!==-1&&ae!=Ce[ae]&&(Ce[fe]=Ce[ae],Pe.lastIndexOf(fe)<De&&Pe.push(fe)),ge!==-1&&ae!=Ce[ae]&&(Ce[ge]=Ce[ae],Pe.lastIndexOf(ge)<De&&Pe.push(ge));for(ae=1;ae<Te;++ae)Ce[ae]===ae&&(ge!==-1&&Ce[ge]!==ge?Ce[ae]=Ce[ge]:fe!==-1&&Ce[fe]!==fe&&(Ce[ae]=Ce[fe]));for(ae=1;ae<Te;++ae)if(W[ae].type!==0){if(De=ae,De!=Ce[De])do De=Ce[De],de[ae]=de[De]+"/"+de[ae];while(De!==0&&Ce[De]!==-1&&De!=Ce[De]);Ce[ae]=-1}for(de[0]+="/",ae=1;ae<Te;++ae)W[ae].type!==2&&(de[ae]+="/")}function m(W,de,re){for(var ae=W.start,fe=W.size,ge=[],Ee=ae;re&&fe>0&&Ee>=0;)ge.push(de.slice(Ee*R,Ee*R+R)),fe-=R,Ee=Ld(re,Ee*4);return ge.length===0?Fe(0):Xa(ge).slice(0,W.size)}function x(W,de,re,ae,fe){var ge=D;if(W===D){if(de!==0)throw new Error("DIFAT chain shorter than expected")}else if(W!==-1){var Ee=re[W],De=(ae>>>2)-1;if(!Ee)return;for(var Te=0;Te<De&&(ge=Ld(Ee,Te*4))!==D;++Te)fe.push(ge);x(Ld(Ee,ae-4),de-1,re,ae,fe)}}function y(W,de,re,ae,fe){var ge=[],Ee=[];fe||(fe=[]);var De=ae-1,Te=0,Ce=0;for(Te=de;Te>=0;){fe[Te]=!0,ge[ge.length]=Te,Ee.push(W[Te]);var Pe=re[Math.floor(Te*4/ae)];if(Ce=Te*4&De,ae<4+Ce)throw new Error("FAT boundary crossed: "+Te+" 4 "+ae);if(!W[Pe])break;Te=Ld(W[Pe],Ce)}return{nodes:ge,data:Ok([Ee])}}function g(W,de,re,ae){var fe=W.length,ge=[],Ee=[],De=[],Te=[],Ce=ae-1,Pe=0,Xe=0,tt=0,lt=0;for(Pe=0;Pe<fe;++Pe)if(De=[],tt=Pe+de,tt>=fe&&(tt-=fe),!Ee[tt]){Te=[];var Qe=[];for(Xe=tt;Xe>=0;){Qe[Xe]=!0,Ee[Xe]=!0,De[De.length]=Xe,Te.push(W[Xe]);var ot=re[Math.floor(Xe*4/ae)];if(lt=Xe*4&Ce,ae<4+lt)throw new Error("FAT boundary crossed: "+Xe+" 4 "+ae);if(!W[ot]||(Xe=Ld(W[ot],lt),Qe[Xe]))break}ge[tt]={nodes:De,data:Ok([Te])}}return ge}function b(W,de,re,ae,fe,ge,Ee,De){for(var Te=0,Ce=ae.length?2:0,Pe=de[W].data,Xe=0,tt=0,lt;Xe<Pe.length;Xe+=128){var Qe=Pe.slice(Xe,Xe+128);ys(Qe,64),tt=Qe.read_shift(2),lt=a3(Qe,0,tt-Ce),ae.push(lt);var ot={name:lt,type:Qe.read_shift(1),color:Qe.read_shift(1),L:Qe.read_shift(4,"i"),R:Qe.read_shift(4,"i"),C:Qe.read_shift(4,"i"),clsid:Qe.read_shift(16),state:Qe.read_shift(4,"i"),start:0,size:0},Ft=Qe.read_shift(2)+Qe.read_shift(2)+Qe.read_shift(2)+Qe.read_shift(2);Ft!==0&&(ot.ct=S(Qe,Qe.l-8));var Hr=Qe.read_shift(2)+Qe.read_shift(2)+Qe.read_shift(2)+Qe.read_shift(2);Hr!==0&&(ot.mt=S(Qe,Qe.l-8)),ot.start=Qe.read_shift(4,"i"),ot.size=Qe.read_shift(4,"i"),ot.size<0&&ot.start<0&&(ot.size=ot.type=0,ot.start=D,ot.name=""),ot.type===5?(Te=ot.start,fe>0&&Te!==D&&(de[Te].name="!StreamData")):ot.size>=4096?(ot.storage="fat",de[ot.start]===void 0&&(de[ot.start]=y(re,ot.start,de.fat_addrs,de.ssz)),de[ot.start].name=ot.name,ot.content=de[ot.start].data.slice(0,ot.size)):(ot.storage="minifat",ot.size<0?ot.size=0:Te!==D&&ot.start!==D&&de[Te]&&(ot.content=m(ot,de[Te].data,(de[De]||{}).data))),ot.content&&ys(ot.content,0),ge[lt]=ot,Ee.push(ot)}}function S(W,de){return new Date((ws(W,de+4)/1e7*Math.pow(2,32)+ws(W,de)/1e7-11644473600)*1e3)}function _(W,de){return u(),d(c.readFileSync(W),de)}function j(W,de){var re=de&&de.type;switch(re||Nr&&Buffer.isBuffer(W)&&(re="buffer"),re||"base64"){case"file":return _(W,de);case"base64":return d(Po(gc(W)),de);case"binary":return d(Po(W),de)}return d(W,de)}function A(W,de){var re=de||{},ae=re.root||"Root Entry";if(W.FullPaths||(W.FullPaths=[]),W.FileIndex||(W.FileIndex=[]),W.FullPaths.length!==W.FileIndex.length)throw new Error("inconsistent CFB structure");W.FullPaths.length===0&&(W.FullPaths[0]=ae+"/",W.FileIndex[0]={name:ae,type:5}),re.CLSID&&(W.FileIndex[0].clsid=re.CLSID),E(W)}function E(W){var de="Sh33tJ5";if(!Wr.find(W,"/"+de)){var re=Fe(4);re[0]=55,re[1]=re[3]=50,re[2]=54,W.FileIndex.push({name:de,type:2,content:re,size:4,L:69,R:69,C:69}),W.FullPaths.push(W.FullPaths[0]+de),T(W)}}function T(W,de){A(W);for(var re=!1,ae=!1,fe=W.FullPaths.length-1;fe>=0;--fe){var ge=W.FileIndex[fe];switch(ge.type){case 0:ae?re=!0:(W.FileIndex.pop(),W.FullPaths.pop());break;case 1:case 2:case 5:ae=!0,isNaN(ge.R*ge.L*ge.C)&&(re=!0),ge.R>-1&&ge.L>-1&&ge.R==ge.L&&(re=!0);break;default:re=!0;break}}if(!(!re&&!de)){var Ee=new Date(1987,1,19),De=0,Te=Object.create?Object.create(null):{},Ce=[];for(fe=0;fe<W.FullPaths.length;++fe)Te[W.FullPaths[fe]]=!0,W.FileIndex[fe].type!==0&&Ce.push([W.FullPaths[fe],W.FileIndex[fe]]);for(fe=0;fe<Ce.length;++fe){var Pe=n(Ce[fe][0]);ae=Te[Pe],ae||(Ce.push([Pe,{name:a(Pe).replace("/",""),type:1,clsid:se,ct:Ee,mt:Ee,content:null}]),Te[Pe]=!0)}for(Ce.sort(function(lt,Qe){return r(lt[0],Qe[0])}),W.FullPaths=[],W.FileIndex=[],fe=0;fe<Ce.length;++fe)W.FullPaths[fe]=Ce[fe][0],W.FileIndex[fe]=Ce[fe][1];for(fe=0;fe<Ce.length;++fe){var Xe=W.FileIndex[fe],tt=W.FullPaths[fe];if(Xe.name=a(tt).replace("/",""),Xe.L=Xe.R=Xe.C=-(Xe.color=1),Xe.size=Xe.content?Xe.content.length:0,Xe.start=0,Xe.clsid=Xe.clsid||se,fe===0)Xe.C=Ce.length>1?1:-1,Xe.size=0,Xe.type=5;else if(tt.slice(-1)=="/"){for(De=fe+1;De<Ce.length&&n(W.FullPaths[De])!=tt;++De);for(Xe.C=De>=Ce.length?-1:De,De=fe+1;De<Ce.length&&n(W.FullPaths[De])!=n(tt);++De);Xe.R=De>=Ce.length?-1:De,Xe.type=1}else n(W.FullPaths[fe+1]||"")==n(tt)&&(Xe.R=fe+1),Xe.type=2}}}function L(W,de){var re=de||{};if(re.fileType=="mad")return lo(W,re);switch(T(W),re.fileType){case"zip":return nr(W,re)}var ae=function(lt){for(var Qe=0,ot=0,Ft=0;Ft<lt.FileIndex.length;++Ft){var Hr=lt.FileIndex[Ft];if(Hr.content){var dr=Hr.content.length;dr>0&&(dr<4096?Qe+=dr+63>>6:ot+=dr+511>>9)}}for(var On=lt.FullPaths.length+3>>2,Wo=Qe+7>>3,uo=Qe+127>>7,Vo=Wo+ot+On+uo,Rs=Vo+127>>7,Dc=Rs<=109?0:Math.ceil((Rs-109)/127);Vo+Rs+Dc+127>>7>Rs;)Dc=++Rs<=109?0:Math.ceil((Rs-109)/127);var Jn=[1,Dc,Rs,uo,On,ot,Qe,0];return lt.FileIndex[0].size=Qe<<6,Jn[7]=(lt.FileIndex[0].start=Jn[0]+Jn[1]+Jn[2]+Jn[3]+Jn[4]+Jn[5])+(Jn[6]+7>>3),Jn}(W),fe=Fe(ae[7]<<9),ge=0,Ee=0;{for(ge=0;ge<8;++ge)fe.write_shift(1,X[ge]);for(ge=0;ge<8;++ge)fe.write_shift(2,0);for(fe.write_shift(2,62),fe.write_shift(2,3),fe.write_shift(2,65534),fe.write_shift(2,9),fe.write_shift(2,6),ge=0;ge<3;++ge)fe.write_shift(2,0);for(fe.write_shift(4,0),fe.write_shift(4,ae[2]),fe.write_shift(4,ae[0]+ae[1]+ae[2]+ae[3]-1),fe.write_shift(4,0),fe.write_shift(4,4096),fe.write_shift(4,ae[3]?ae[0]+ae[1]+ae[2]-1:D),fe.write_shift(4,ae[3]),fe.write_shift(-4,ae[1]?ae[0]-1:D),fe.write_shift(4,ae[1]),ge=0;ge<109;++ge)fe.write_shift(-4,ge<ae[2]?ae[1]+ge:-1)}if(ae[1])for(Ee=0;Ee<ae[1];++Ee){for(;ge<236+Ee*127;++ge)fe.write_shift(-4,ge<ae[2]?ae[1]+ge:-1);fe.write_shift(-4,Ee===ae[1]-1?D:Ee+1)}var De=function(lt){for(Ee+=lt;ge<Ee-1;++ge)fe.write_shift(-4,ge+1);lt&&(++ge,fe.write_shift(-4,D))};for(Ee=ge=0,Ee+=ae[1];ge<Ee;++ge)fe.write_shift(-4,Z.DIFSECT);for(Ee+=ae[2];ge<Ee;++ge)fe.write_shift(-4,Z.FATSECT);De(ae[3]),De(ae[4]);for(var Te=0,Ce=0,Pe=W.FileIndex[0];Te<W.FileIndex.length;++Te)Pe=W.FileIndex[Te],Pe.content&&(Ce=Pe.content.length,!(Ce<4096)&&(Pe.start=Ee,De(Ce+511>>9)));for(De(ae[6]+7>>3);fe.l&511;)fe.write_shift(-4,Z.ENDOFCHAIN);for(Ee=ge=0,Te=0;Te<W.FileIndex.length;++Te)Pe=W.FileIndex[Te],Pe.content&&(Ce=Pe.content.length,!(!Ce||Ce>=4096)&&(Pe.start=Ee,De(Ce+63>>6)));for(;fe.l&511;)fe.write_shift(-4,Z.ENDOFCHAIN);for(ge=0;ge<ae[4]<<2;++ge){var Xe=W.FullPaths[ge];if(!Xe||Xe.length===0){for(Te=0;Te<17;++Te)fe.write_shift(4,0);for(Te=0;Te<3;++Te)fe.write_shift(4,-1);for(Te=0;Te<12;++Te)fe.write_shift(4,0);continue}Pe=W.FileIndex[ge],ge===0&&(Pe.start=Pe.size?Pe.start-1:D);var tt=ge===0&&re.root||Pe.name;if(Ce=2*(tt.length+1),fe.write_shift(64,tt,"utf16le"),fe.write_shift(2,Ce),fe.write_shift(1,Pe.type),fe.write_shift(1,Pe.color),fe.write_shift(-4,Pe.L),fe.write_shift(-4,Pe.R),fe.write_shift(-4,Pe.C),Pe.clsid)fe.write_shift(16,Pe.clsid,"hex");else for(Te=0;Te<4;++Te)fe.write_shift(4,0);fe.write_shift(4,Pe.state||0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,Pe.start),fe.write_shift(4,Pe.size),fe.write_shift(4,0)}for(ge=1;ge<W.FileIndex.length;++ge)if(Pe=W.FileIndex[ge],Pe.size>=4096)if(fe.l=Pe.start+1<<9,Nr&&Buffer.isBuffer(Pe.content))Pe.content.copy(fe,fe.l,0,Pe.size),fe.l+=Pe.size+511&-512;else{for(Te=0;Te<Pe.size;++Te)fe.write_shift(1,Pe.content[Te]);for(;Te&511;++Te)fe.write_shift(1,0)}for(ge=1;ge<W.FileIndex.length;++ge)if(Pe=W.FileIndex[ge],Pe.size>0&&Pe.size<4096)if(Nr&&Buffer.isBuffer(Pe.content))Pe.content.copy(fe,fe.l,0,Pe.size),fe.l+=Pe.size+63&-64;else{for(Te=0;Te<Pe.size;++Te)fe.write_shift(1,Pe.content[Te]);for(;Te&63;++Te)fe.write_shift(1,0)}if(Nr)fe.l=fe.length;else for(;fe.l<fe.length;)fe.write_shift(1,0);return fe}function k(W,de){var re=W.FullPaths.map(function(Te){return Te.toUpperCase()}),ae=re.map(function(Te){var Ce=Te.split("/");return Ce[Ce.length-(Te.slice(-1)=="/"?2:1)]}),fe=!1;de.charCodeAt(0)===47?(fe=!0,de=re[0].slice(0,-1)+de):fe=de.indexOf("/")!==-1;var ge=de.toUpperCase(),Ee=fe===!0?re.indexOf(ge):ae.indexOf(ge);if(Ee!==-1)return W.FileIndex[Ee];var De=!ge.match(ox);for(ge=ge.replace(Xm,""),De&&(ge=ge.replace(ox,"!")),Ee=0;Ee<re.length;++Ee)if((De?re[Ee].replace(ox,"!"):re[Ee]).replace(Xm,"")==ge||(De?ae[Ee].replace(ox,"!"):ae[Ee]).replace(Xm,"")==ge)return W.FileIndex[Ee];return null}var R=64,D=-2,q="d0cf11e0a1b11ae1",X=[208,207,17,224,161,177,26,225],se="00000000000000000000000000000000",Z={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:q,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:se,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function K(W,de,re){u();var ae=L(W,re);c.writeFileSync(de,ae)}function ie(W){for(var de=new Array(W.length),re=0;re<W.length;++re)de[re]=String.fromCharCode(W[re]);return de.join("")}function pe(W,de){var re=L(W,de);switch(de&&de.type||"buffer"){case"file":return u(),c.writeFileSync(de.filename,re),re;case"binary":return typeof re=="string"?re:ie(re);case"base64":return Og(typeof re=="string"?re:ie(re));case"buffer":if(Nr)return Buffer.isBuffer(re)?re:Cc(re);case"array":return typeof re=="string"?Po(re):re}return re}var me;function O(W){try{var de=W.InflateRaw,re=new de;if(re._processChunk(new Uint8Array([3,0]),re._finishFlushFlag),re.bytesRead)me=W;else throw new Error("zlib does not expose bytesRead")}catch(ae){console.error("cannot use native zlib: "+(ae.message||ae))}}function F(W,de){if(!me)return Or(W,de);var re=me.InflateRaw,ae=new re,fe=ae._processChunk(W.slice(W.l),ae._finishFlushFlag);return W.l+=ae.bytesRead,fe}function B(W){return me?me.deflateRawSync(W):Gt(W)}var U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],oe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ee(W){var de=(W<<1|W<<11)&139536|(W<<5|W<<15)&558144;return(de>>16|de>>8|de)&255}for(var te=typeof Uint8Array<"u",le=te?new Uint8Array(256):[],Ne=0;Ne<256;++Ne)le[Ne]=ee(Ne);function ve(W,de){var re=le[W&255];return de<=8?re>>>8-de:(re=re<<8|le[W>>8&255],de<=16?re>>>16-de:(re=re<<8|le[W>>16&255],re>>>24-de))}function Me(W,de){var re=de&7,ae=de>>>3;return(W[ae]|(re<=6?0:W[ae+1]<<8))>>>re&3}function Ie(W,de){var re=de&7,ae=de>>>3;return(W[ae]|(re<=5?0:W[ae+1]<<8))>>>re&7}function Q(W,de){var re=de&7,ae=de>>>3;return(W[ae]|(re<=4?0:W[ae+1]<<8))>>>re&15}function $e(W,de){var re=de&7,ae=de>>>3;return(W[ae]|(re<=3?0:W[ae+1]<<8))>>>re&31}function Re(W,de){var re=de&7,ae=de>>>3;return(W[ae]|(re<=1?0:W[ae+1]<<8))>>>re&127}function it(W,de,re){var ae=de&7,fe=de>>>3,ge=(1<<re)-1,Ee=W[fe]>>>ae;return re<8-ae||(Ee|=W[fe+1]<<8-ae,re<16-ae)||(Ee|=W[fe+2]<<16-ae,re<24-ae)||(Ee|=W[fe+3]<<24-ae),Ee&ge}function He(W,de,re){var ae=de&7,fe=de>>>3;return ae<=5?W[fe]|=(re&7)<<ae:(W[fe]|=re<<ae&255,W[fe+1]=(re&7)>>8-ae),de+3}function Ze(W,de,re){var ae=de&7,fe=de>>>3;return re=(re&1)<<ae,W[fe]|=re,de+1}function nt(W,de,re){var ae=de&7,fe=de>>>3;return re<<=ae,W[fe]|=re&255,re>>>=8,W[fe+1]=re,de+8}function dt(W,de,re){var ae=de&7,fe=de>>>3;return re<<=ae,W[fe]|=re&255,re>>>=8,W[fe+1]=re&255,W[fe+2]=re>>>8,de+16}function ft(W,de){var re=W.length,ae=2*re>de?2*re:de+5,fe=0;if(re>=de)return W;if(Nr){var ge=gk(ae);if(W.copy)W.copy(ge);else for(;fe<W.length;++fe)ge[fe]=W[fe];return ge}else if(te){var Ee=new Uint8Array(ae);if(Ee.set)Ee.set(W);else for(;fe<re;++fe)Ee[fe]=W[fe];return Ee}return W.length=ae,W}function ut(W){for(var de=new Array(W),re=0;re<W;++re)de[re]=0;return de}function qt(W,de,re){var ae=1,fe=0,ge=0,Ee=0,De=0,Te=W.length,Ce=te?new Uint16Array(32):ut(32);for(ge=0;ge<32;++ge)Ce[ge]=0;for(ge=Te;ge<re;++ge)W[ge]=0;Te=W.length;var Pe=te?new Uint16Array(Te):ut(Te);for(ge=0;ge<Te;++ge)Ce[fe=W[ge]]++,ae<fe&&(ae=fe),Pe[ge]=0;for(Ce[0]=0,ge=1;ge<=ae;++ge)Ce[ge+16]=De=De+Ce[ge-1]<<1;for(ge=0;ge<Te;++ge)De=W[ge],De!=0&&(Pe[ge]=Ce[De+16]++);var Xe=0;for(ge=0;ge<Te;++ge)if(Xe=W[ge],Xe!=0)for(De=ve(Pe[ge],ae)>>ae-Xe,Ee=(1<<ae+4-Xe)-1;Ee>=0;--Ee)de[De|Ee<<Xe]=Xe&15|ge<<4;return ae}var Mt=te?new Uint16Array(512):ut(512),kt=te?new Uint16Array(32):ut(32);if(!te){for(var Xt=0;Xt<512;++Xt)Mt[Xt]=0;for(Xt=0;Xt<32;++Xt)kt[Xt]=0}(function(){for(var W=[],de=0;de<32;de++)W.push(5);qt(W,kt,32);var re=[];for(de=0;de<=143;de++)re.push(8);for(;de<=255;de++)re.push(9);for(;de<=279;de++)re.push(7);for(;de<=287;de++)re.push(8);qt(re,Mt,288)})();var yt=function(){for(var de=te?new Uint8Array(32768):[],re=0,ae=0;re<oe.length-1;++re)for(;ae<oe[re+1];++ae)de[ae]=re;for(;ae<32768;++ae)de[ae]=29;var fe=te?new Uint8Array(259):[];for(re=0,ae=0;re<Y.length-1;++re)for(;ae<Y[re+1];++ae)fe[ae]=re;function ge(De,Te){for(var Ce=0;Ce<De.length;){var Pe=Math.min(65535,De.length-Ce),Xe=Ce+Pe==De.length;for(Te.write_shift(1,+Xe),Te.write_shift(2,Pe),Te.write_shift(2,~Pe&65535);Pe-- >0;)Te[Te.l++]=De[Ce++]}return Te.l}function Ee(De,Te){for(var Ce=0,Pe=0,Xe=te?new Uint16Array(32768):[];Pe<De.length;){var tt=Math.min(65535,De.length-Pe);if(tt<10){for(Ce=He(Te,Ce,+(Pe+tt==De.length)),Ce&7&&(Ce+=8-(Ce&7)),Te.l=Ce/8|0,Te.write_shift(2,tt),Te.write_shift(2,~tt&65535);tt-- >0;)Te[Te.l++]=De[Pe++];Ce=Te.l*8;continue}Ce=He(Te,Ce,+(Pe+tt==De.length)+2);for(var lt=0;tt-- >0;){var Qe=De[Pe];lt=(lt<<5^Qe)&32767;var ot=-1,Ft=0;if((ot=Xe[lt])&&(ot|=Pe&-32768,ot>Pe&&(ot-=32768),ot<Pe))for(;De[ot+Ft]==De[Pe+Ft]&&Ft<250;)++Ft;if(Ft>2){Qe=fe[Ft],Qe<=22?Ce=nt(Te,Ce,le[Qe+1]>>1)-1:(nt(Te,Ce,3),Ce+=5,nt(Te,Ce,le[Qe-23]>>5),Ce+=3);var Hr=Qe<8?0:Qe-4>>2;Hr>0&&(dt(Te,Ce,Ft-Y[Qe]),Ce+=Hr),Qe=de[Pe-ot],Ce=nt(Te,Ce,le[Qe]>>3),Ce-=3;var dr=Qe<4?0:Qe-2>>1;dr>0&&(dt(Te,Ce,Pe-ot-oe[Qe]),Ce+=dr);for(var On=0;On<Ft;++On)Xe[lt]=Pe&32767,lt=(lt<<5^De[Pe])&32767,++Pe;tt-=Ft-1}else Qe<=143?Qe=Qe+48:Ce=Ze(Te,Ce,1),Ce=nt(Te,Ce,le[Qe]),Xe[lt]=Pe&32767,++Pe}Ce=nt(Te,Ce,0)-1}return Te.l=(Ce+7)/8|0,Te.l}return function(Te,Ce){return Te.length<8?ge(Te,Ce):Ee(Te,Ce)}}();function Gt(W){var de=Fe(50+Math.floor(W.length*1.1)),re=yt(W,de);return de.slice(0,re)}var St=te?new Uint16Array(32768):ut(32768),gn=te?new Uint16Array(32768):ut(32768),ur=te?new Uint16Array(128):ut(128),Qt=1,Zt=1;function Jr(W,de){var re=$e(W,de)+257;de+=5;var ae=$e(W,de)+1;de+=5;var fe=Q(W,de)+4;de+=4;for(var ge=0,Ee=te?new Uint8Array(19):ut(19),De=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Te=1,Ce=te?new Uint8Array(8):ut(8),Pe=te?new Uint8Array(8):ut(8),Xe=Ee.length,tt=0;tt<fe;++tt)Ee[U[tt]]=ge=Ie(W,de),Te<ge&&(Te=ge),Ce[ge]++,de+=3;var lt=0;for(Ce[0]=0,tt=1;tt<=Te;++tt)Pe[tt]=lt=lt+Ce[tt-1]<<1;for(tt=0;tt<Xe;++tt)(lt=Ee[tt])!=0&&(De[tt]=Pe[lt]++);var Qe=0;for(tt=0;tt<Xe;++tt)if(Qe=Ee[tt],Qe!=0){lt=le[De[tt]]>>8-Qe;for(var ot=(1<<7-Qe)-1;ot>=0;--ot)ur[lt|ot<<Qe]=Qe&7|tt<<3}var Ft=[];for(Te=1;Ft.length<re+ae;)switch(lt=ur[Re(W,de)],de+=lt&7,lt>>>=3){case 16:for(ge=3+Me(W,de),de+=2,lt=Ft[Ft.length-1];ge-- >0;)Ft.push(lt);break;case 17:for(ge=3+Ie(W,de),de+=3;ge-- >0;)Ft.push(0);break;case 18:for(ge=11+Re(W,de),de+=7;ge-- >0;)Ft.push(0);break;default:Ft.push(lt),Te<lt&&(Te=lt);break}var Hr=Ft.slice(0,re),dr=Ft.slice(re);for(tt=re;tt<286;++tt)Hr[tt]=0;for(tt=ae;tt<30;++tt)dr[tt]=0;return Qt=qt(Hr,St,286),Zt=qt(dr,gn,30),de}function Tt(W,de){if(W[0]==3&&!(W[1]&3))return[xf(de),2];for(var re=0,ae=0,fe=gk(de||1<<18),ge=0,Ee=fe.length>>>0,De=0,Te=0;!(ae&1);){if(ae=Ie(W,re),re+=3,ae>>>1)ae>>1==1?(De=9,Te=5):(re=Jr(W,re),De=Qt,Te=Zt);else{re&7&&(re+=8-(re&7));var Ce=W[re>>>3]|W[(re>>>3)+1]<<8;if(re+=32,Ce>0)for(!de&&Ee<ge+Ce&&(fe=ft(fe,ge+Ce),Ee=fe.length);Ce-- >0;)fe[ge++]=W[re>>>3],re+=8;continue}for(;;){!de&&Ee<ge+32767&&(fe=ft(fe,ge+32767),Ee=fe.length);var Pe=it(W,re,De),Xe=ae>>>1==1?Mt[Pe]:St[Pe];if(re+=Xe&15,Xe>>>=4,!(Xe>>>8&255))fe[ge++]=Xe;else{if(Xe==256)break;Xe-=257;var tt=Xe<8?0:Xe-4>>2;tt>5&&(tt=0);var lt=ge+Y[Xe];tt>0&&(lt+=it(W,re,tt),re+=tt),Pe=it(W,re,Te),Xe=ae>>>1==1?kt[Pe]:gn[Pe],re+=Xe&15,Xe>>>=4;var Qe=Xe<4?0:Xe-2>>1,ot=oe[Xe];for(Qe>0&&(ot+=it(W,re,Qe),re+=Qe),!de&&Ee<lt&&(fe=ft(fe,lt+100),Ee=fe.length);ge<lt;)fe[ge]=fe[ge-ot],++ge}}}return de?[fe,re+7>>>3]:[fe.slice(0,ge),re+7>>>3]}function Or(W,de){var re=W.slice(W.l||0),ae=Tt(re,de);return W.l+=ae[1],ae[0]}function Ot(W,de){if(W)typeof console<"u"&&console.error(de);else throw new Error(de)}function Ht(W,de){var re=W;ys(re,0);var ae=[],fe=[],ge={FileIndex:ae,FullPaths:fe};A(ge,{root:de.root});for(var Ee=re.length-4;(re[Ee]!=80||re[Ee+1]!=75||re[Ee+2]!=5||re[Ee+3]!=6)&&Ee>=0;)--Ee;re.l=Ee+4,re.l+=4;var De=re.read_shift(2);re.l+=6;var Te=re.read_shift(4);for(re.l=Te,Ee=0;Ee<De;++Ee){re.l+=20;var Ce=re.read_shift(4),Pe=re.read_shift(4),Xe=re.read_shift(2),tt=re.read_shift(2),lt=re.read_shift(2);re.l+=8;var Qe=re.read_shift(4),ot=o(re.slice(re.l+Xe,re.l+Xe+tt));re.l+=Xe+tt+lt;var Ft=re.l;re.l=Qe+4,Qr(re,Ce,Pe,ge,ot),re.l=Ft}return ge}function Qr(W,de,re,ae,fe){W.l+=2;var ge=W.read_shift(2),Ee=W.read_shift(2),De=s(W);if(ge&8257)throw new Error("Unsupported ZIP encryption");for(var Te=W.read_shift(4),Ce=W.read_shift(4),Pe=W.read_shift(4),Xe=W.read_shift(2),tt=W.read_shift(2),lt="",Qe=0;Qe<Xe;++Qe)lt+=String.fromCharCode(W[W.l++]);if(tt){var ot=o(W.slice(W.l,W.l+tt));(ot[21589]||{}).mt&&(De=ot[21589].mt),((fe||{})[21589]||{}).mt&&(De=fe[21589].mt)}W.l+=tt;var Ft=W.slice(W.l,W.l+Ce);switch(Ee){case 8:Ft=F(W,Pe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ee)}var Hr=!1;ge&8&&(Te=W.read_shift(4),Te==134695760&&(Te=W.read_shift(4),Hr=!0),Ce=W.read_shift(4),Pe=W.read_shift(4)),Ce!=de&&Ot(Hr,"Bad compressed size: "+de+" != "+Ce),Pe!=re&&Ot(Hr,"Bad uncompressed size: "+re+" != "+Pe),ti(ae,lt,Ft,{unsafe:!0,mt:De})}function nr(W,de){var re=de||{},ae=[],fe=[],ge=Fe(1),Ee=re.compression?8:0,De=0,Te=0,Ce=0,Pe=0,Xe=0,tt=W.FullPaths[0],lt=tt,Qe=W.FileIndex[0],ot=[],Ft=0;for(Te=1;Te<W.FullPaths.length;++Te)if(lt=W.FullPaths[Te].slice(tt.length),Qe=W.FileIndex[Te],!(!Qe.size||!Qe.content||lt=="Sh33tJ5")){var Hr=Pe,dr=Fe(lt.length);for(Ce=0;Ce<lt.length;++Ce)dr.write_shift(1,lt.charCodeAt(Ce)&127);dr=dr.slice(0,dr.l),ot[Xe]=WY.buf(Qe.content,0);var On=Qe.content;Ee==8&&(On=B(On)),ge=Fe(30),ge.write_shift(4,67324752),ge.write_shift(2,20),ge.write_shift(2,De),ge.write_shift(2,Ee),Qe.mt?i(ge,Qe.mt):ge.write_shift(4,0),ge.write_shift(-4,ot[Xe]),ge.write_shift(4,On.length),ge.write_shift(4,Qe.content.length),ge.write_shift(2,dr.length),ge.write_shift(2,0),Pe+=ge.length,ae.push(ge),Pe+=dr.length,ae.push(dr),Pe+=On.length,ae.push(On),ge=Fe(46),ge.write_shift(4,33639248),ge.write_shift(2,0),ge.write_shift(2,20),ge.write_shift(2,De),ge.write_shift(2,Ee),ge.write_shift(4,0),ge.write_shift(-4,ot[Xe]),ge.write_shift(4,On.length),ge.write_shift(4,Qe.content.length),ge.write_shift(2,dr.length),ge.write_shift(2,0),ge.write_shift(2,0),ge.write_shift(2,0),ge.write_shift(2,0),ge.write_shift(4,0),ge.write_shift(4,Hr),Ft+=ge.l,fe.push(ge),Ft+=dr.length,fe.push(dr),++Xe}return ge=Fe(22),ge.write_shift(4,101010256),ge.write_shift(2,0),ge.write_shift(2,0),ge.write_shift(2,Xe),ge.write_shift(2,Xe),ge.write_shift(4,Ft),ge.write_shift(4,Pe),ge.write_shift(2,0),Xa([Xa(ae),Xa(fe),ge])}var Ct={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function wr(W,de){if(W.ctype)return W.ctype;var re=W.name||"",ae=re.match(/\.([^\.]+)$/);return ae&&Ct[ae[1]]||de&&(ae=(re=de).match(/[\.\\]([^\.\\])+$/),ae&&Ct[ae[1]])?Ct[ae[1]]:"application/octet-stream"}function Sl(W){for(var de=Og(W),re=[],ae=0;ae<de.length;ae+=76)re.push(de.slice(ae,ae+76));return re.join(`\r
`)+`\r
`}function Na(W){var de=W.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ce){var Pe=Ce.charCodeAt(0).toString(16).toUpperCase();return"="+(Pe.length==1?"0"+Pe:Pe)});de=de.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),de.charAt(0)==`
`&&(de="=0D"+de.slice(1)),de=de.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var re=[],ae=de.split(`\r
`),fe=0;fe<ae.length;++fe){var ge=ae[fe];if(ge.length==0){re.push("");continue}for(var Ee=0;Ee<ge.length;){var De=76,Te=ge.slice(Ee,Ee+De);Te.charAt(De-1)=="="?De--:Te.charAt(De-2)=="="?De-=2:Te.charAt(De-3)=="="&&(De-=3),Te=ge.slice(Ee,Ee+De),Ee+=De,Ee<ge.length&&(Te+="="),re.push(Te)}}return re.join(`\r
`)}function oo(W){for(var de=[],re=0;re<W.length;++re){for(var ae=W[re];re<=W.length&&ae.charAt(ae.length-1)=="=";)ae=ae.slice(0,ae.length-1)+W[++re];de.push(ae)}for(var fe=0;fe<de.length;++fe)de[fe]=de[fe].replace(/[=][0-9A-Fa-f]{2}/g,function(ge){return String.fromCharCode(parseInt(ge.slice(1),16))});return Po(de.join(`\r
`))}function Ls(W,de,re){for(var ae="",fe="",ge="",Ee,De=0;De<10;++De){var Te=de[De];if(!Te||Te.match(/^\s*$/))break;var Ce=Te.match(/^(.*?):\s*([^\s].*)$/);if(Ce)switch(Ce[1].toLowerCase()){case"content-location":ae=Ce[2].trim();break;case"content-type":ge=Ce[2].trim();break;case"content-transfer-encoding":fe=Ce[2].trim();break}}switch(++De,fe.toLowerCase()){case"base64":Ee=Po(gc(de.slice(De).join("")));break;case"quoted-printable":Ee=oo(de.slice(De));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+fe)}var Pe=ti(W,ae.slice(re.length),Ee,{unsafe:!0});ge&&(Pe.ctype=ge)}function Pt(W,de){if(ie(W.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var re=de&&de.root||"",ae=(Nr&&Buffer.isBuffer(W)?W.toString("binary"):ie(W)).split(`\r
`),fe=0,ge="";for(fe=0;fe<ae.length;++fe)if(ge=ae[fe],!!/^Content-Location:/i.test(ge)&&(ge=ge.slice(ge.indexOf("file")),re||(re=ge.slice(0,ge.lastIndexOf("/")+1)),ge.slice(0,re.length)!=re))for(;re.length>0&&(re=re.slice(0,re.length-1),re=re.slice(0,re.lastIndexOf("/")+1),ge.slice(0,re.length)!=re););var Ee=(ae[1]||"").match(/boundary="(.*?)"/);if(!Ee)throw new Error("MAD cannot find boundary");var De="--"+(Ee[1]||""),Te=[],Ce=[],Pe={FileIndex:Te,FullPaths:Ce};A(Pe);var Xe,tt=0;for(fe=0;fe<ae.length;++fe){var lt=ae[fe];lt!==De&&lt!==De+"--"||(tt++&&Ls(Pe,ae.slice(Xe,fe),re),Xe=fe)}return Pe}function lo(W,de){var re=de||{},ae=re.boundary||"SheetJS";ae="------="+ae;for(var fe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ae.slice(2)+'"',"","",""],ge=W.FullPaths[0],Ee=ge,De=W.FileIndex[0],Te=1;Te<W.FullPaths.length;++Te)if(Ee=W.FullPaths[Te].slice(ge.length),De=W.FileIndex[Te],!(!De.size||!De.content||Ee=="Sh33tJ5")){Ee=Ee.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Ft){return"_x"+Ft.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Ft){return"_u"+Ft.charCodeAt(0).toString(16)+"_"});for(var Ce=De.content,Pe=Nr&&Buffer.isBuffer(Ce)?Ce.toString("binary"):ie(Ce),Xe=0,tt=Math.min(1024,Pe.length),lt=0,Qe=0;Qe<=tt;++Qe)(lt=Pe.charCodeAt(Qe))>=32&&lt<128&&++Xe;var ot=Xe>=tt*4/5;fe.push(ae),fe.push("Content-Location: "+(re.root||"file:///C:/SheetJS/")+Ee),fe.push("Content-Transfer-Encoding: "+(ot?"quoted-printable":"base64")),fe.push("Content-Type: "+wr(De,Ee)),fe.push(""),fe.push(ot?Na(Pe):Sl(Pe))}return fe.push(ae+`--\r
`),fe.join(`\r
`)}function co(W){var de={};return A(de,W),de}function ti(W,de,re,ae){var fe=ae&&ae.unsafe;fe||A(W);var ge=!fe&&Wr.find(W,de);if(!ge){var Ee=W.FullPaths[0];de.slice(0,Ee.length)==Ee?Ee=de:(Ee.slice(-1)!="/"&&(Ee+="/"),Ee=(Ee+de).replace("//","/")),ge={name:a(de),type:2},W.FileIndex.push(ge),W.FullPaths.push(Ee),fe||Wr.utils.cfb_gc(W)}return ge.content=re,ge.size=re?re.length:0,ae&&(ae.CLSID&&(ge.clsid=ae.CLSID),ae.mt&&(ge.mt=ae.mt),ae.ct&&(ge.ct=ae.ct)),ge}function $i(W,de){A(W);var re=Wr.find(W,de);if(re){for(var ae=0;ae<W.FileIndex.length;++ae)if(W.FileIndex[ae]==re)return W.FileIndex.splice(ae,1),W.FullPaths.splice(ae,1),!0}return!1}function vn(W,de,re){A(W);var ae=Wr.find(W,de);if(ae){for(var fe=0;fe<W.FileIndex.length;++fe)if(W.FileIndex[fe]==ae)return W.FileIndex[fe].name=a(re),W.FullPaths[fe]=re,!0}return!1}function Yn(W){T(W,!0)}return t.find=k,t.read=j,t.parse=d,t.write=pe,t.writeFile=K,t.utils={cfb_new:co,cfb_add:ti,cfb_del:$i,cfb_mov:vn,cfb_gc:Yn,ReadShift:Jm,CheckField:PM,prep_blob:ys,bconcat:Xa,use_zlib:O,_deflateRaw:Gt,_inflateRaw:Or,consts:Z},t}();function VY(e){return typeof e=="string"?q2(e):Array.isArray(e)?xY(e):e}function Dv(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=q2(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Lg(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([VY(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var s=document.createElement("a");if(s.download!=null)return s.download=e,s.href=i,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=Iv(t)),o.write(t),o.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function ei(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function Nk(e,t){for(var r=[],n=ei(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function e3(e){for(var t=[],r=ei(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function V2(e){for(var t=[],r=ei(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function GY(e){for(var t=[],r=ei(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var Yy=new Date(1899,11,30,0,0,0);function ts(e,t){var r=e.getTime(),n=Yy.getTime()+(e.getTimezoneOffset()-Yy.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var mM=new Date,KY=Yy.getTime()+(mM.getTimezoneOffset()-Yy.getTimezoneOffset())*6e4,jk=mM.getTimezoneOffset();function gM(e){var t=new Date;return t.setTime(e*24*60*60*1e3+KY),t.getTimezoneOffset()!==jk&&t.setTime(t.getTime()+(t.getTimezoneOffset()-jk)*6e4),t}var Ak=new Date("2017-02-19T19:06:09.000Z"),vM=isNaN(Ak.getFullYear())?new Date("2/19/17"):Ak,XY=vM.getFullYear()==2017;function Ri(e,t){var r=new Date(e);if(XY)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(vM.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function G2(e,t){if(Nr&&Buffer.isBuffer(e))return e.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function rs(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=rs(e[r]));return t}function Fn(e,t){for(var r="";r.length<t;)r+=e;return r}function ic(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var YY=["january","february","march","april","may","june","july","august","september","october","november","december"];function Pg(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var s=e.toLowerCase();if(s.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(s=s.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),s.length>3&&YY.indexOf(s)==-1)return r}else if(s.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}function ir(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return Nr?n=Cc(r):n=yY(r),Wr.utils.cfb_add(e,t,n)}Wr.utils.cfb_add(e,t,r)}else e.file(t,r)}function t3(){return Wr.utils.cfb_new()}var la=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,JY={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},r3=e3(JY),n3=/[&<>'"]/g,QY=/[\u0000-\u0008\u000b-\u001f]/g;function Br(e){var t=e+"";return t.replace(n3,function(r){return r3[r]}).replace(QY,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Ek(e){return Br(e).replace(/ /g,"_x0020_")}var xM=/[\u0000-\u001f]/g;function ZY(e){var t=e+"";return t.replace(n3,function(r){return r3[r]}).replace(/\n/g,"<br/>").replace(xM,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function eJ(e){var t=e+"";return t.replace(n3,function(r){return r3[r]}).replace(xM,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function tJ(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function rJ(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function u5(e){for(var t="",r=0,n=0,a=0,i=0,s=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){s=(n&31)<<6,s|=a&63,t+=String.fromCharCode(s);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|i&63);continue}s=e.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(i&63)<<6|s&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function Tk(e){var t=xf(2*e.length),r,n,a=1,i=0,s=0,o;for(n=0;n<e.length;n+=a)a=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,s=55296+(r>>>10&1023),r=56320+(r&1023)),s!==0&&(t[i++]=s&255,t[i++]=s>>>8,s=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function Ck(e){return Cc(e,"binary").toString("utf8")}var cx="foo bar baz",Ym=Nr&&(Ck(cx)==u5(cx)&&Ck||Tk(cx)==u5(cx)&&Tk)||u5,Lg=Nr?function(e){return Cc(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},nJ=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),yM=/(^\s|\s$|\n)/;function Ya(e,t){return"<"+e+(t.match(yM)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Rg(e){return ei(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function rt(e,t,r){return"<"+e+(r!=null?Rg(r):"")+(t!=null?(t.match(yM)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function FN(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function aJ(e,t){switch(typeof e){case"string":var r=rt("vt:lpwstr",Br(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return rt((e|0)==e?"vt:i4":"vt:r8",Br(String(e)));case"boolean":return rt("vt:bool",e?"true":"false")}if(e instanceof Date)return rt("vt:filetime",FN(e));throw new Error("Unable to serialize "+e)}var Oa={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},pp=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],bs={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function iJ(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,i=5;i>=0;--i)a=a*256+e[t+i];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function sJ(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,i=0,s=n?-t:t;isFinite(s)?s==0?a=i=0:(a=Math.floor(Math.log(s)/Math.LN2),i=s*Math.pow(2,52-a),a<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?a=-1022:(i-=Math.pow(2,52),a+=1023)):(a=2047,i=isNaN(t)?26985:0);for(var o=0;o<=5;++o,i/=256)e[r+o]=i&255;e[r+6]=(a&15)<<4|i&15,e[r+7]=a>>4|n}var kk=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,i=e[0][n].length;a<i;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},Ok=Nr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Cc(t)})):kk(e)}:kk,Pk=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(Rm(e,a)));return n.join("").replace(Xm,"")},a3=Nr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Xm,""):Pk(e,t,r)}:Pk,Lk=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},bM=Nr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):Lk(e,t,r)}:Lk,Rk=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(gh(e,a)));return n.join("")},Mv=Nr?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):Rk(t,r,n)}:Rk,wM=function(e,t){var r=ws(e,t);return r>0?Mv(e,t+4,t+4+r-1):""},_M=wM,SM=function(e,t){var r=ws(e,t);return r>0?Mv(e,t+4,t+4+r-1):""},NM=SM,jM=function(e,t){var r=2*ws(e,t);return r>0?Mv(e,t+4,t+4+r-1):""},AM=jM,EM=function(t,r){var n=ws(t,r);return n>0?a3(t,r+4,r+4+n):""},TM=EM,CM=function(e,t){var r=ws(e,t);return r>0?Mv(e,t+4,t+4+r):""},kM=CM,OM=function(e,t){return iJ(e,t)},Jy=OM,i3=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Nr&&(_M=function(t,r){if(!Buffer.isBuffer(t))return wM(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},NM=function(t,r){if(!Buffer.isBuffer(t))return SM(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},AM=function(t,r){if(!Buffer.isBuffer(t))return jM(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},TM=function(t,r){if(!Buffer.isBuffer(t))return EM(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},kM=function(t,r){if(!Buffer.isBuffer(t))return CM(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},Jy=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):OM(t,r)},i3=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var gh=function(e,t){return e[t]},Rm=function(e,t){return e[t+1]*256+e[t]},oJ=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},ws=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Ld=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},lJ=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Jm(e,t){var r="",n,a,i=[],s,o,c,u;switch(t){case"dbcs":if(u=this.l,Nr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(Rm(this,u)),u+=2;e*=2;break;case"utf8":r=Mv(this,this.l,this.l+e);break;case"utf16le":e*=2,r=a3(this,this.l,this.l+e);break;case"wstr":return Jm.call(this,e,"dbcs");case"lpstr-ansi":r=_M(this,this.l),e=4+ws(this,this.l);break;case"lpstr-cp":r=NM(this,this.l),e=4+ws(this,this.l);break;case"lpwstr":r=AM(this,this.l),e=4+2*ws(this,this.l);break;case"lpp4":e=4+ws(this,this.l),r=TM(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+ws(this,this.l),r=kM(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(s=gh(this,this.l+e++))!==0;)i.push(sx(s));r=i.join("");break;case"_wstr":for(e=0,r="";(s=Rm(this,this.l+e))!==0;)i.push(sx(s)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return s=gh(this,u),this.l=u+1,o=Jm.call(this,e-c,s?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(sx(Rm(this,u))),u+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return s=gh(this,u),this.l=u+1,o=Jm.call(this,e-c,s?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(sx(gh(this,u))),u+=1}r=i.join("");break;default:switch(e){case 1:return n=gh(this,this.l),this.l++,n;case 2:return n=(t==="i"?oJ:Rm)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(n=(e>0?Ld:lJ)(this,this.l),this.l+=4,n):(a=ws(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=Jy(this,this.l):a=Jy([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=bM(this,this.l,e);break}}return this.l+=e,r}var cJ=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},uJ=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},dJ=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function fJ(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)dJ(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var s=t.charCodeAt(a);this[this.l++]=s&255,this[this.l++]=s>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,cJ(this,t,this.l);break;case 8:if(n=8,r==="f"){sJ(this,t,this.l);break}case 16:break;case-4:n=4,uJ(this,t,this.l);break}return this.l+=n,this}function PM(e,t){var r=bM(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function ys(e,t){e.l=t,e.read_shift=Jm,e.chk=PM,e.write_shift=fJ}function ml(e,t){e.l+=t}function Fe(e){var t=xf(e);return ys(t,0),t}function Zi(){var e=[],t=Nr?256:2048,r=function(u){var d=Fe(u);return ys(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},s=function(){return a(),Xa(e)},o=function(u){a(),n=u,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:o,end:s,_bufs:e}}function Ve(e,t,r,n){var a=+t,i;if(!isNaN(a)){n||(n=ine[a].p||(r||[]).length||0),i=1+(a>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var s=e.next(i);a<=127?s.write_shift(1,a):(s.write_shift(1,(a&127)+128),s.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)s.write_shift(1,(n&127)+128),n>>=7;else{s.write_shift(1,n);break}n>0&&i3(r)&&e.push(r)}}function Qm(e,t,r){var n=rs(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function Ik(e,t,r){var n=rs(e);return n.s=Qm(n.s,t.s,r),n.e=Qm(n.e,t.s,r),n}function Zm(e,t){if(e.cRel&&e.c<0)for(e=rs(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=rs(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=zr(e);return!e.cRel&&e.cRel!=null&&(r=mJ(r)),!e.rRel&&e.rRel!=null&&(r=hJ(r)),r}function d5(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+hi(e.s.c)+":"+(e.e.cRel?"":"$")+hi(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Qa(e.s.r)+":"+(e.e.rRel?"":"$")+Qa(e.e.r):Zm(e.s,t.biff)+":"+Zm(e.e,t.biff)}function s3(e){return parseInt(pJ(e),10)-1}function Qa(e){return""+(e+1)}function hJ(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function pJ(e){return e.replace(/\$(\d+)$/,"$1")}function o3(e){for(var t=gJ(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function hi(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function mJ(e){return e.replace(/^([A-Z])/,"$$$1")}function gJ(e){return e.replace(/^\$([A-Z])/,"$1")}function vJ(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Pa(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function zr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function ks(e){var t=e.indexOf(":");return t==-1?{s:Pa(e),e:Pa(e)}:{s:Pa(e.slice(0,t)),e:Pa(e.slice(t+1))}}function sa(e,t){return typeof t>"u"||typeof t=="number"?sa(e.s,e.e):(typeof e!="string"&&(e=zr(e)),typeof t!="string"&&(t=zr(t)),e==t?e:e+":"+t)}function pn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,i=e.length;for(r=0;n<i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===i||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function Dk(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=qu(e.z,r?ts(t):t)}catch{}try{return e.w=qu((e.XF||{}).numFmtId||(r?14:0),r?ts(t):t)}catch{return""+t}}function vc(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Fv[e.v]||e.v:t==null?Dk(e,e.v):Dk(e,t))}function If(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function LM(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,i=e||(a?[]:{}),s=0,o=0;if(i&&n.origin!=null){if(typeof n.origin=="number")s=n.origin;else{var c=typeof n.origin=="string"?Pa(n.origin):n.origin;s=c.r,o=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var d=pn(i["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),s==-1&&(u.e.r=s=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=t[f].length;++p)if(!(typeof t[f][p]>"u")){var h={v:t[f][p]},v=s+f,m=o+p;if(u.s.r>v&&(u.s.r=v),u.s.c>m&&(u.s.c=m),u.e.r<v&&(u.e.r=v),u.e.c<m&&(u.e.c=m),t[f][p]&&typeof t[f][p]=="object"&&!Array.isArray(t[f][p])&&!(t[f][p]instanceof Date))h=t[f][p];else if(Array.isArray(h.v)&&(h.f=t[f][p][1],h.v=h.v[0]),h.v===null)if(h.f)h.t="n";else if(n.nullError)h.t="e",h.v=0;else if(n.sheetStubs)h.t="z";else continue;else typeof h.v=="number"?h.t="n":typeof h.v=="boolean"?h.t="b":h.v instanceof Date?(h.z=n.dateNF||Bn[14],n.cellDates?(h.t="d",h.w=qu(h.z,ts(h.v))):(h.t="n",h.v=ts(h.v),h.w=qu(h.z,h.v))):h.t="s";if(a)i[v]||(i[v]=[]),i[v][m]&&i[v][m].z&&(h.z=i[v][m].z),i[v][m]=h;else{var x=zr({c:m,r:v});i[x]&&i[x].z&&(h.z=i[x].z),i[x]=h}}}return u.s.c<1e7&&(i["!ref"]=sa(u)),i}function mp(e,t){return LM(null,e,t)}function xJ(e){return e.read_shift(4,"i")}function Mo(e,t){return t||(t=Fe(4)),t.write_shift(4,e),t}function pi(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function La(e,t){var r=!1;return t==null&&(r=!0,t=Fe(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function yJ(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function bJ(e,t){return t||(t=Fe(4)),t.write_shift(2,0),t.write_shift(2,0),t}function l3(e,t){var r=e.l,n=e.read_shift(1),a=pi(e),i=[],s={t:a,h:a};if(n&1){for(var o=e.read_shift(4),c=0;c!=o;++c)i.push(yJ(e));s.r=i}else s.r=[{ich:0,ifnt:0}];return e.l=r+t,s}function wJ(e,t){var r=!1;return t==null&&(r=!0,t=Fe(15+4*e.t.length)),t.write_shift(1,0),La(e.t,t),r?t.slice(0,t.l):t}var _J=l3;function SJ(e,t){var r=!1;return t==null&&(r=!0,t=Fe(23+4*e.t.length)),t.write_shift(1,1),La(e.t,t),t.write_shift(4,1),bJ({},t),r?t.slice(0,t.l):t}function ao(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Df(e,t){return t==null&&(t=Fe(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Mf(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Ff(e,t){return t==null&&(t=Fe(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var NJ=pi,RM=La;function c3(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function Qy(e,t){var r=!1;return t==null&&(r=!0,t=Fe(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var jJ=pi,$N=c3,u3=Qy;function IM(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?Jy([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Ld(t,0)>>2;return r?a/100:a}function DM(e,t){t==null&&(t=Fe(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function MM(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function AJ(e,t){return t||(t=Fe(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var $f=MM,gp=AJ;function vp(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function yf(e,t){return(t||Fe(8)).write_shift(8,e,"f")}function EJ(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),i=e.read_shift(2,"i"),s=e.read_shift(1),o=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=DJ[a];u&&(t.rgb=Gk(u));break;case 2:t.rgb=Gk([s,o,c]);break;case 3:t.theme=a;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function Zy(e,t){if(t||(t=Fe(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function TJ(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function CJ(e,t){t||(t=Fe(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}var FM=2,gs=3,ux=11,eb=19,dx=64,kJ=65,OJ=71,PJ=4108,LJ=4126,Ka=80,Mk={1:{n:"CodePage",t:FM},2:{n:"Category",t:Ka},3:{n:"PresentationFormat",t:Ka},4:{n:"ByteCount",t:gs},5:{n:"LineCount",t:gs},6:{n:"ParagraphCount",t:gs},7:{n:"SlideCount",t:gs},8:{n:"NoteCount",t:gs},9:{n:"HiddenCount",t:gs},10:{n:"MultimediaClipCount",t:gs},11:{n:"ScaleCrop",t:ux},12:{n:"HeadingPairs",t:PJ},13:{n:"TitlesOfParts",t:LJ},14:{n:"Manager",t:Ka},15:{n:"Company",t:Ka},16:{n:"LinksUpToDate",t:ux},17:{n:"CharacterCount",t:gs},19:{n:"SharedDoc",t:ux},22:{n:"HyperlinksChanged",t:ux},23:{n:"AppVersion",t:gs,p:"version"},24:{n:"DigSig",t:kJ},26:{n:"ContentType",t:Ka},27:{n:"ContentStatus",t:Ka},28:{n:"Language",t:Ka},29:{n:"Version",t:Ka},255:{},2147483648:{n:"Locale",t:eb},2147483651:{n:"Behavior",t:eb},1919054434:{}},Fk={1:{n:"CodePage",t:FM},2:{n:"Title",t:Ka},3:{n:"Subject",t:Ka},4:{n:"Author",t:Ka},5:{n:"Keywords",t:Ka},6:{n:"Comments",t:Ka},7:{n:"Template",t:Ka},8:{n:"LastAuthor",t:Ka},9:{n:"RevNumber",t:Ka},10:{n:"EditTime",t:dx},11:{n:"LastPrinted",t:dx},12:{n:"CreatedDate",t:dx},13:{n:"ModifiedDate",t:dx},14:{n:"PageCount",t:gs},15:{n:"WordCount",t:gs},16:{n:"CharCount",t:gs},17:{n:"Thumbnail",t:OJ},18:{n:"Application",t:Ka},19:{n:"DocSecurity",t:gs},255:{},2147483648:{n:"Locale",t:eb},2147483651:{n:"Behavior",t:eb},1919054434:{}};function RJ(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var IJ=RJ([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),DJ=rs(IJ),Fv={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},MJ={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},fx={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function $M(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function BM(e,t){var r=GY(MJ),n=[],a;n[n.length]=la,n[n.length]=rt("Types",null,{xmlns:Oa.CT,"xmlns:xsd":Oa.xsd,"xmlns:xsi":Oa.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return rt("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=rt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:fx[c][t.bookType]||fx[c].xlsx}))},s=function(c){(e[c]||[]).forEach(function(u){n[n.length]=rt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:fx[c][t.bookType]||fx[c].xlsx})})},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=rt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return i("workbooks"),s("sheets"),s("charts"),o("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),s("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var _r={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function UM(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Kh(e){var t=[la,rt("Relationships",null,{xmlns:Oa.RELS})];return ei(e["!id"]).forEach(function(r){t[t.length]=rt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Dr(e,t,r,n,a,i){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[_r.HLINK,_r.XPATH,_r.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}function FJ(e){var t=[la];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function $k(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function $J(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function BJ(e){var t=[la];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push($k(e[r][0],e[r][1])),t.push($J("",e[r][0]));return t.push($k("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function zM(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Wy.version+"</meta:generator></office:meta></office:document-meta>"}var sf=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function f5(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=Br(t),n[n.length]=r?rt(e,t,r):Ya(e,t))}function qM(e,t){var r=t||{},n=[la,rt("cp:coreProperties",null,{"xmlns:cp":Oa.CORE_PROPS,"xmlns:dc":Oa.dc,"xmlns:dcterms":Oa.dcterms,"xmlns:dcmitype":Oa.dcmitype,"xmlns:xsi":Oa.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&f5("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:FN(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&f5("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:FN(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var i=0;i!=sf.length;++i){var s=sf[i],o=r.Props&&r.Props[s[1]]!=null?r.Props[s[1]]:e?e[s[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&f5(s[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Xh=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],HM=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function WM(e){var t=[],r=rt;return e||(e={}),e.Application="SheetJS",t[t.length]=la,t[t.length]=rt("Properties",null,{xmlns:Oa.EXT_PROPS,"xmlns:vt":Oa.vt}),Xh.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=Br(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+Br(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function VM(e){var t=[la,rt("Properties",null,{xmlns:Oa.CUST_PROPS,"xmlns:vt":Oa.vt})];if(!e)return t.join("");var r=1;return ei(e).forEach(function(a){++r,t[t.length]=rt("property",aJ(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Br(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Bk={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function UJ(e,t){var r=[];return ei(Bk).map(function(n){for(var a=0;a<sf.length;++a)if(sf[a][1]==n)return sf[a];for(a=0;a<Xh.length;++a)if(Xh[a][1]==n)return Xh[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(Ya(Bk[n[1]]||n[1],a))}}),rt("DocumentProperties",r.join(""),{xmlns:bs.o})}function zJ(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&ei(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var s=0;s<sf.length;++s)if(i==sf[s][1])return;for(s=0;s<Xh.length;++s)if(i==Xh[s][1])return;for(s=0;s<r.length;++s)if(i==r[s])return;var o=e[i],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),a.push(rt(Ek(i),o,{"dt:dt":c}))}}),t&&ei(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var s=t[i],o="string";typeof s=="number"?(o="float",s=String(s)):s===!0||s===!1?(o="boolean",s=s?"1":"0"):s instanceof Date?(o="dateTime.tz",s=s.toISOString()):s=String(s),a.push(rt(Ek(i),s,{"dt:dt":o}))}}),"<"+n+' xmlns="'+bs.o+'">'+a.join("")+"</"+n+">"}function qJ(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),a+=i);var s=Fe(8);return s.write_shift(4,n),s.write_shift(4,a),s}function Uk(e,t){var r=Fe(4),n=Fe(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Fe(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=qJ(t);break;case 31:case 80:for(n=Fe(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Xa([r,n])}var GM=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function HJ(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function zk(e,t,r){var n=Fe(8),a=[],i=[],s=8,o=0,c=Fe(8),u=Fe(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),i.push(c),a.push(u),s+=8+c.length,!t){u=Fe(8),u.write_shift(4,0),a.unshift(u);var d=[Fe(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(c=Fe(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Xa(d),i.unshift(c),s+=8+c.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(GM.indexOf(e[o][0])>-1||HM.indexOf(e[o][0])>-1)&&e[o][1]!=null){var p=e[o][1],h=0;if(t){h=+t[e[o][0]];var v=r[h];if(v.p=="version"&&typeof p=="string"){var m=p.split(".");p=(+m[0]<<16)+(+m[1]||0)}c=Uk(v.t,p)}else{var x=HJ(p);x==-1&&(x=31,p=String(p)),c=Uk(x,p)}i.push(c),u=Fe(8),u.write_shift(4,t?h:2+o),a.push(u),s+=8+c.length}var y=8*(i.length+1);for(o=0;o<i.length;++o)a[o].write_shift(4,y),y+=i[o].length;return n.write_shift(4,s),n.write_shift(4,i.length),Xa([n].concat(a).concat(i))}function qk(e,t,r,n,a,i){var s=Fe(a?68:48),o=[s];s.write_shift(2,65534),s.write_shift(2,0),s.write_shift(4,842412599),s.write_shift(16,Wr.utils.consts.HEADER_CLSID,"hex"),s.write_shift(4,a?2:1),s.write_shift(16,t,"hex"),s.write_shift(4,a?68:48);var c=zk(e,r,n);if(o.push(c),a){var u=zk(a,null,null);s.write_shift(16,i,"hex"),s.write_shift(4,68+c.length),o.push(u)}return Xa(o)}function WJ(e,t){t||(t=Fe(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function VJ(e,t){return e.read_shift(t)===1}function Ei(e,t){return t||(t=Fe(2)),t.write_shift(2,+!!e),t}function KM(e){return e.read_shift(2,"u")}function Ws(e,t){return t||(t=Fe(2)),t.write_shift(2,e),t}function XM(e,t,r){return r||(r=Fe(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function YM(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var s=n?e.read_shift(n,a):"";return s}function GJ(e){var t=e.t||"",r=Fe(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Fe(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return Xa(a)}function KJ(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function XJ(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):KJ(e,n,r)}function YJ(e,t,r){if(r.biff>5)return XJ(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function JM(e,t,r){return r||(r=Fe(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function Hk(e,t){t||(t=Fe(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function JJ(e){var t=Fe(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),i=a>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var s=[8,6815827,6619237,4849780,83];for(r=0;r<s.length;++r)t.write_shift(4,s[r]);if(i==28)n=n.slice(1),Hk(n,t);else if(i&2){for(s="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));var o=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),i&8&&Hk(a>-1?n.slice(a+1):"",t)}else{for(s="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function bf(e,t,r,n){return n||(n=Fe(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function QJ(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),i=e.read_shift(n,"i"),s=e.read_shift(n,"i");return[a,i,s]}function ZJ(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function QM(e,t){return t||(t=Fe(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function d3(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Fe(a);return i.write_shift(2,n),i.write_shift(2,t),a>4&&i.write_shift(2,29282),a>6&&i.write_shift(2,1997),a>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function eQ(e,t){var r=!t||t.biff==8,n=Fe(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function tQ(e,t){var r=!t||t.biff>=8?2:1,n=Fe(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function rQ(e,t){var r=Fe(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=GJ(e[a]);var i=Xa([r].concat(n));return i.parts=[r.length].concat(n.map(function(s){return s.length})),i}function nQ(){var e=Fe(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function aQ(e){var t=Fe(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function iQ(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,i=Fe(a);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function sQ(e,t,r,n){var a=Fe(10);return bf(e,t,n,a),a.write_shift(4,r),a}function oQ(e,t,r,n,a){var i=!a||a.biff==8,s=Fe(8+ +i+(1+i)*r.length);return bf(e,t,n,s),s.write_shift(2,r.length),i&&s.write_shift(1,1),s.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),s}function lQ(e,t,r,n){var a=r&&r.biff==5;n||(n=Fe(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}function cQ(e,t){var r=t.biff==8||!t.biff?4:2,n=Fe(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function Wk(e,t,r,n){var a=r&&r.biff==5;n||(n=Fe(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&a&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function uQ(e){var t=Fe(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function dQ(e,t,r,n,a,i){var s=Fe(8);return bf(e,t,n,s),XM(r,i,s),s}function fQ(e,t,r,n){var a=Fe(14);return bf(e,t,n,a),yf(r,a),a}function hQ(e,t,r){if(r.biff<8)return pQ(e,t,r);for(var n=[],a=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(QJ(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function pQ(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=YM(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function mQ(e){var t=Fe(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)QM(e[r],t);return t}function gQ(e){var t=Fe(24),r=Pa(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Xa([t,JJ(e[1])])}function vQ(e){var t=e[1].Tooltip,r=Fe(10+2*(t.length+1));r.write_shift(2,2048);var n=Pa(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function xQ(e){return e||(e=Fe(4)),e.write_shift(2,1),e.write_shift(2,1),e}function yQ(e,t,r){if(!r.cellStyles)return ml(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),i=e.read_shift(n),s=e.read_shift(n),o=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:i,w:s,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function bQ(e,t){var r=Fe(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function wQ(e){for(var t=Fe(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}function _Q(e,t,r){var n=Fe(15);return Bv(n,e,t),n.write_shift(8,r,"f"),n}function SQ(e,t,r){var n=Fe(9);return Bv(n,e,t),n.write_shift(2,r),n}var NQ=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=e3({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var u=[],d=xf(1);switch(c.type){case"base64":d=Po(gc(o));break;case"binary":d=Po(o);break;case"buffer":case"array":d=o;break}ys(d,0);var f=d.read_shift(1),p=!!(f&136),h=!1,v=!1;switch(f){case 2:break;case 3:break;case 48:h=!0,p=!0;break;case 49:h=!0,p=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var m=0,x=521;f==2&&(m=d.read_shift(2)),d.l+=3,f!=2&&(m=d.read_shift(4)),m>1048576&&(m=1e6),f!=2&&(x=d.read_shift(2));var y=d.read_shift(2),g=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(g=e[d[d.l]]),d.l+=1,d.l+=2),v&&(d.l+=36);for(var b=[],S={},_=Math.min(d.length,f==2?521:x-10-(h?264:0)),j=v?32:11;d.l<_&&d[d.l]!=13;)switch(S={},S.name=Vy.utils.decode(g,d.slice(d.l,d.l+j)).replace(/[\u0000\r\n].*$/g,""),d.l+=j,S.type=String.fromCharCode(d.read_shift(1)),f!=2&&!v&&(S.offset=d.read_shift(4)),S.len=d.read_shift(1),f==2&&(S.offset=d.read_shift(2)),S.dec=d.read_shift(1),S.name.length&&b.push(S),f!=2&&(d.l+=v?13:14),S.type){case"B":(!h||S.len!=8)&&c.WTF&&console.log("Skipping "+S.name+":"+S.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+S.name+":"+S.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+S.type)}if(d[d.l]!==13&&(d.l=x-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=x;var A=0,E=0;for(u[0]=[],E=0;E!=b.length;++E)u[0][E]=b[E].name;for(;m-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++A]=[],E=0,E=0;E!=b.length;++E){var T=d.slice(d.l,d.l+b[E].len);d.l+=b[E].len,ys(T,0);var L=Vy.utils.decode(g,T);switch(b[E].type){case"C":L.trim().length&&(u[A][E]=L.replace(/\s+$/,""));break;case"D":L.length===8?u[A][E]=new Date(+L.slice(0,4),+L.slice(4,6)-1,+L.slice(6,8)):u[A][E]=L;break;case"F":u[A][E]=parseFloat(L.trim());break;case"+":case"I":u[A][E]=v?T.read_shift(-4,"i")^2147483648:T.read_shift(4,"i");break;case"L":switch(L.trim().toUpperCase()){case"Y":case"T":u[A][E]=!0;break;case"N":case"F":u[A][E]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+L+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[A][E]="##MEMO##"+(v?parseInt(L.trim(),10):T.read_shift(4));break;case"N":L=L.replace(/\u0000/g,"").trim(),L&&L!="."&&(u[A][E]=+L||0);break;case"@":u[A][E]=new Date(T.read_shift(-8,"f")-621356832e5);break;case"T":u[A][E]=new Date((T.read_shift(4)-2440588)*864e5+T.read_shift(4));break;case"Y":u[A][E]=T.read_shift(4,"i")/1e4+T.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[A][E]=-T.read_shift(-8,"f");break;case"B":if(h&&b[E].len==8){u[A][E]=T.read_shift(8,"f");break}case"G":case"P":T.l+=b[E].len;break;case"0":if(b[E].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[E].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=b,u}function n(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=mp(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(o,c){try{return If(n(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function s(o,c){var u=c||{};if(+u.codepage>=0&&kg(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Zi(),f=ib(o,{header:1,raw:!0,cellDates:!0}),p=f[0],h=f.slice(1),v=o["!cols"]||[],m=0,x=0,y=0,g=1;for(m=0;m<p.length;++m){if(((v[m]||{}).DBF||{}).name){p[m]=v[m].DBF.name,++y;continue}if(p[m]!=null){if(++y,typeof p[m]=="number"&&(p[m]=p[m].toString(10)),typeof p[m]!="string")throw new Error("DBF Invalid column name "+p[m]+" |"+typeof p[m]+"|");if(p.indexOf(p[m])!==m){for(x=0;x<1024;++x)if(p.indexOf(p[m]+"_"+x)==-1){p[m]+="_"+x;break}}}}var b=pn(o["!ref"]),S=[],_=[],j=[];for(m=0;m<=b.e.c-b.s.c;++m){var A="",E="",T=0,L=[];for(x=0;x<h.length;++x)h[x][m]!=null&&L.push(h[x][m]);if(L.length==0||p[m]==null){S[m]="?";continue}for(x=0;x<L.length;++x){switch(typeof L[x]){case"number":E="B";break;case"string":E="C";break;case"boolean":E="L";break;case"object":E=L[x]instanceof Date?"D":"C";break;default:E="C"}T=Math.max(T,String(L[x]).length),A=A&&A!=E?"C":E}T>250&&(T=250),E=((v[m]||{}).DBF||{}).type,E=="C"&&v[m].DBF.len>T&&(T=v[m].DBF.len),A=="B"&&E=="N"&&(A="N",j[m]=v[m].DBF.dec,T=v[m].DBF.len),_[m]=A=="C"||E=="N"?T:i[A]||0,g+=_[m],S[m]=A}var k=d.next(32);for(k.write_shift(4,318902576),k.write_shift(4,h.length),k.write_shift(2,296+32*y),k.write_shift(2,g),m=0;m<4;++m)k.write_shift(4,0);for(k.write_shift(4,0|(+t[eM]||3)<<8),m=0,x=0;m<p.length;++m)if(p[m]!=null){var R=d.next(32),D=(p[m].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);R.write_shift(1,D,"sbcs"),R.write_shift(1,S[m]=="?"?"C":S[m],"sbcs"),R.write_shift(4,x),R.write_shift(1,_[m]||i[S[m]]||0),R.write_shift(1,j[m]||0),R.write_shift(1,2),R.write_shift(4,0),R.write_shift(1,0),R.write_shift(4,0),R.write_shift(4,0),x+=_[m]||i[S[m]]||0}var q=d.next(264);for(q.write_shift(4,13),m=0;m<65;++m)q.write_shift(4,0);for(m=0;m<h.length;++m){var X=d.next(g);for(X.write_shift(1,0),x=0;x<p.length;++x)if(p[x]!=null)switch(S[x]){case"L":X.write_shift(1,h[m][x]==null?63:h[m][x]?84:70);break;case"B":X.write_shift(8,h[m][x]||0,"f");break;case"N":var se="0";for(typeof h[m][x]=="number"&&(se=h[m][x].toFixed(j[x]||0)),y=0;y<_[x]-se.length;++y)X.write_shift(1,32);X.write_shift(1,se,"sbcs");break;case"D":h[m][x]?(X.write_shift(4,("0000"+h[m][x].getFullYear()).slice(-4),"sbcs"),X.write_shift(2,("00"+(h[m][x].getMonth()+1)).slice(-2),"sbcs"),X.write_shift(2,("00"+h[m][x].getDate()).slice(-2),"sbcs")):X.write_shift(8,"00000000","sbcs");break;case"C":var Z=String(h[m][x]!=null?h[m][x]:"").slice(0,_[x]);for(X.write_shift(1,Z,"sbcs"),y=0;y<_[x]-Z.length;++y)X.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:s}}(),jQ=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+ei(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,h){var v=e[h];return typeof v=="number"?mk(v):v},n=function(p,h,v){var m=h.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return m==59?p:mk(m)};e["|"]=254;function a(p,h){switch(h.type){case"base64":return i(gc(p),h);case"binary":return i(p,h);case"buffer":return i(Nr&&Buffer.isBuffer(p)?p.toString("binary"):Iv(p),h);case"array":return i(G2(p),h)}throw new Error("Unrecognized type "+h.type)}function i(p,h){var v=p.split(/[\n\r]+/),m=-1,x=-1,y=0,g=0,b=[],S=[],_=null,j={},A=[],E=[],T=[],L=0,k;for(+h.codepage>=0&&kg(+h.codepage);y!==v.length;++y){L=0;var R=v[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),D=R.replace(/;;/g,"\0").split(";").map(function(U){return U.replace(/\u0000/g,";")}),q=D[0],X;if(R.length>0)switch(q){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&S.push(R.slice(3).replace(/;;/g,";"));break;case"C":var se=!1,Z=!1,K=!1,ie=!1,pe=-1,me=-1;for(g=1;g<D.length;++g)switch(D[g].charAt(0)){case"A":break;case"X":x=parseInt(D[g].slice(1))-1,Z=!0;break;case"Y":for(m=parseInt(D[g].slice(1))-1,Z||(x=0),k=b.length;k<=m;++k)b[k]=[];break;case"K":X=D[g].slice(1),X.charAt(0)==='"'?X=X.slice(1,X.length-1):X==="TRUE"?X=!0:X==="FALSE"?X=!1:isNaN(ic(X))?isNaN(Pg(X).getDate())||(X=Ri(X)):(X=ic(X),_!==null&&fM(_)&&(X=gM(X))),se=!0;break;case"E":ie=!0;var O=SZ(D[g].slice(1),{r:m,c:x});b[m][x]=[b[m][x],O];break;case"S":K=!0,b[m][x]=[b[m][x],"S5S"];break;case"G":break;case"R":pe=parseInt(D[g].slice(1))-1;break;case"C":me=parseInt(D[g].slice(1))-1;break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+R)}if(se&&(b[m][x]&&b[m][x].length==2?b[m][x][0]=X:b[m][x]=X,_=null),K){if(ie)throw new Error("SYLK shared formula cannot have own formula");var F=pe>-1&&b[pe][me];if(!F||!F[1])throw new Error("SYLK shared formula cannot find base");b[m][x][1]=NZ(F[1],{r:m-pe,c:x-me})}break;case"F":var B=0;for(g=1;g<D.length;++g)switch(D[g].charAt(0)){case"X":x=parseInt(D[g].slice(1))-1,++B;break;case"Y":for(m=parseInt(D[g].slice(1))-1,k=b.length;k<=m;++k)b[k]=[];break;case"M":L=parseInt(D[g].slice(1))/20;break;case"F":break;case"G":break;case"P":_=S[parseInt(D[g].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(T=D[g].slice(1).split(" "),k=parseInt(T[0],10);k<=parseInt(T[1],10);++k)L=parseInt(T[2],10),E[k-1]=L===0?{hidden:!0}:{wch:L},f3(E[k-1]);break;case"C":x=parseInt(D[g].slice(1))-1,E[x]||(E[x]={});break;case"R":m=parseInt(D[g].slice(1))-1,A[m]||(A[m]={}),L>0?(A[m].hpt=L,A[m].hpx=nF(L)):L===0&&(A[m].hidden=!0);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+R)}B<1&&(_=null);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+R)}}return A.length>0&&(j["!rows"]=A),E.length>0&&(j["!cols"]=E),h&&h.sheetRows&&(b=b.slice(0,h.sheetRows)),[b,j]}function s(p,h){var v=a(p,h),m=v[0],x=v[1],y=mp(m,h);return ei(x).forEach(function(g){y[g]=x[g]}),y}function o(p,h){return If(s(p,h),h)}function c(p,h,v,m){var x="C;Y"+(v+1)+";X"+(m+1)+";K";switch(p.t){case"n":x+=p.v||0,p.f&&!p.F&&(x+=";E"+p3(p.f,{r:v,c:m}));break;case"b":x+=p.v?"TRUE":"FALSE";break;case"e":x+=p.w||p.v;break;case"d":x+='"'+(p.w||p.v)+'"';break;case"s":x+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return x}function u(p,h){h.forEach(function(v,m){var x="F;W"+(m+1)+" "+(m+1)+" ";v.hidden?x+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=tb(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=rb(v.wpx)),typeof v.wch=="number"&&(x+=Math.round(v.wch))),x.charAt(x.length-1)!=" "&&p.push(x)})}function d(p,h){h.forEach(function(v,m){var x="F;";v.hidden?x+="M0;":v.hpt?x+="M"+20*v.hpt+";":v.hpx&&(x+="M"+20*nb(v.hpx)+";"),x.length>2&&p.push(x+"R"+(m+1))})}function f(p,h){var v=["ID;PWXL;N;E"],m=[],x=pn(p["!ref"]),y,g=Array.isArray(p),b=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),p["!cols"]&&u(v,p["!cols"]),p["!rows"]&&d(v,p["!rows"]),v.push("B;Y"+(x.e.r-x.s.r+1)+";X"+(x.e.c-x.s.c+1)+";D"+[x.s.c,x.s.r,x.e.c,x.e.r].join(" "));for(var S=x.s.r;S<=x.e.r;++S)for(var _=x.s.c;_<=x.e.c;++_){var j=zr({r:S,c:_});y=g?(p[S]||[])[_]:p[j],!(!y||y.v==null&&(!y.f||y.F))&&m.push(c(y,p,S,_))}return v.join(b)+b+m.join(b)+b+"E"+b}return{to_workbook:o,to_sheet:s,from_sheet:f}}(),AQ=function(){function e(i,s){switch(s.type){case"base64":return t(gc(i),s);case"binary":return t(i,s);case"buffer":return t(Nr&&Buffer.isBuffer(i)?i.toString("binary"):Iv(i),s);case"array":return t(G2(i),s)}throw new Error("Unrecognized type "+s.type)}function t(i,s){for(var o=i.split(`
`),c=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var p=o[d].trim().split(","),h=p[0],v=p[1];++d;for(var m=o[d]||"";(m.match(/["]/g)||[]).length&1&&d<o.length-1;)m+=`
`+o[++d];switch(m=m.trim(),+h){case-1:if(m==="BOT"){f[++c]=[],u=0;continue}else if(m!=="EOD")throw new Error("Unrecognized DIF special command "+m);break;case 0:m==="TRUE"?f[c][u]=!0:m==="FALSE"?f[c][u]=!1:isNaN(ic(v))?isNaN(Pg(v).getDate())?f[c][u]=v:f[c][u]=Ri(v):f[c][u]=ic(v),++u;break;case 1:m=m.slice(1,m.length-1),m=m.replace(/""/g,'"'),m&&m.match(/^=".*"$/)&&(m=m.slice(2,-1)),f[c][u++]=m!==""?m:null;break}if(m==="EOD")break}}return s&&s.sheetRows&&(f=f.slice(0,s.sheetRows)),f}function r(i,s){return mp(e(i,s),s)}function n(i,s){return If(r(i,s),s)}var a=function(){var i=function(c,u,d,f,p){c.push(u),c.push(d+","+f),c.push('"'+p.replace(/"/g,'""')+'"')},s=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=pn(c["!ref"]),f,p=Array.isArray(c);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,d.e.r-d.s.r+1,""),i(u,"TUPLES",0,d.e.c-d.s.c+1,""),i(u,"DATA",0,0,"");for(var h=d.s.r;h<=d.e.r;++h){s(u,-1,0,"BOT");for(var v=d.s.c;v<=d.e.c;++v){var m=zr({r:h,c:v});if(f=p?(c[h]||[])[v]:c[m],!f){s(u,1,0,"");continue}switch(f.t){case"n":var x=f.w;!x&&f.v!=null&&(x=f.v),x==null?f.f&&!f.F?s(u,1,0,"="+f.f):s(u,1,0,""):s(u,0,x,"V");break;case"b":s(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":s(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=qu(f.z||Bn[14],ts(Ri(f.v)))),s(u,0,f.w,"V");break;default:s(u,1,0,"")}}}s(u,-1,0,"EOD");var y=`\r
`,g=u.join(y);return g}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),ZM=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,p){for(var h=f.split(`
`),v=-1,m=-1,x=0,y=[];x!==h.length;++x){var g=h[x].trim().split(":");if(g[0]==="cell"){var b=Pa(g[1]);if(y.length<=b.r)for(v=y.length;v<=b.r;++v)y[v]||(y[v]=[]);switch(v=b.r,m=b.c,g[2]){case"t":y[v][m]=e(g[3]);break;case"v":y[v][m]=+g[3];break;case"vtf":var S=g[g.length-1];case"vtc":switch(g[3]){case"nl":y[v][m]=!!+g[4];break;default:y[v][m]=+g[4];break}g[2]=="vtf"&&(y[v][m]=[y[v][m],S])}}}return p&&p.sheetRows&&(y=y.slice(0,p.sheetRows)),y}function n(f,p){return mp(r(f,p),p)}function a(f,p){return If(n(f,p),p)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),s=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var p=[],h=[],v,m="",x=ks(f["!ref"]),y=Array.isArray(f),g=x.s.r;g<=x.e.r;++g)for(var b=x.s.c;b<=x.e.c;++b)if(m=zr({r:g,c:b}),v=y?(f[g]||[])[b]:f[m],!(!v||v.v==null||v.t==="z")){switch(h=["cell",m,"t"],v.t){case"s":case"str":h.push(t(v.v));break;case"n":v.f?(h[2]="vtf",h[3]="n",h[4]=v.v,h[5]=t(v.f)):(h[2]="v",h[3]=v.v);break;case"b":h[2]="vt"+(v.f?"f":"c"),h[3]="nl",h[4]=v.v?"1":"0",h[5]=t(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var S=ts(Ri(v.v));h[2]="vtc",h[3]="nd",h[4]=""+S,h[5]=v.w||qu(v.z||Bn[14],S);break;case"e":continue}p.push(h.join(":"))}return p.push("sheet:c:"+(x.e.c-x.s.c+1)+":r:"+(x.e.r-x.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function d(f){return[i,s,o,s,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),EQ=function(){function e(d,f,p,h,v){v.raw?f[p][h]=d:d===""||(d==="TRUE"?f[p][h]=!0:d==="FALSE"?f[p][h]=!1:isNaN(ic(d))?isNaN(Pg(d).getDate())?f[p][h]=d:f[p][h]=Ri(d):f[p][h]=ic(d))}function t(d,f){var p=f||{},h=[];if(!d||d.length===0)return h;for(var v=d.split(/[\r\n]/),m=v.length-1;m>=0&&v[m].length===0;)--m;for(var x=10,y=0,g=0;g<=m;++g)y=v[g].indexOf(" "),y==-1?y=v[g].length:y++,x=Math.max(x,y);for(g=0;g<=m;++g){h[g]=[];var b=0;for(e(v[g].slice(0,x).trim(),h,g,b,p),b=1;b<=(v[g].length-x)/10+1;++b)e(v[g].slice(x+(b-1)*10,x+b*10).trim(),h,g,b,p)}return p.sheetRows&&(h=h.slice(0,p.sheetRows)),h}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},p=!1,h=0,v=0;h<d.length;++h)(v=d.charCodeAt(h))==34?p=!p:!p&&v in r&&(f[v]=(f[v]||0)+1);v=[];for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&v.push([f[h],h]);if(!v.length){f=n;for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&v.push([f[h],h])}return v.sort(function(m,x){return m[0]-x[0]||n[m[1]]-n[x[1]]}),r[v.pop()[1]]||44}function i(d,f){var p=f||{},h="",v=p.dense?[]:{},m={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(h=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(h=d.charAt(4),d=d.slice(6)):h=a(d.slice(0,1024)):p&&p.FS?h=p.FS:h=a(d.slice(0,1024));var x=0,y=0,g=0,b=0,S=0,_=h.charCodeAt(0),j=!1,A=0,E=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var T=p.dateNF!=null?qY(p.dateNF):null;function L(){var k=d.slice(b,S),R={};if(k.charAt(0)=='"'&&k.charAt(k.length-1)=='"'&&(k=k.slice(1,-1).replace(/""/g,'"')),k.length===0)R.t="z";else if(p.raw)R.t="s",R.v=k;else if(k.trim().length===0)R.t="s",R.v=k;else if(k.charCodeAt(0)==61)k.charCodeAt(1)==34&&k.charCodeAt(k.length-1)==34?(R.t="s",R.v=k.slice(2,-1).replace(/""/g,'"')):jZ(k)?(R.t="n",R.f=k.slice(1)):(R.t="s",R.v=k);else if(k=="TRUE")R.t="b",R.v=!0;else if(k=="FALSE")R.t="b",R.v=!1;else if(!isNaN(g=ic(k)))R.t="n",p.cellText!==!1&&(R.w=k),R.v=g;else if(!isNaN(Pg(k).getDate())||T&&k.match(T)){R.z=p.dateNF||Bn[14];var D=0;T&&k.match(T)&&(k=HY(k,p.dateNF,k.match(T)||[]),D=1),p.cellDates?(R.t="d",R.v=Ri(k,D)):(R.t="n",R.v=ts(Ri(k,D))),p.cellText!==!1&&(R.w=qu(R.z,R.v instanceof Date?ts(R.v):R.v)),p.cellNF||delete R.z}else R.t="s",R.v=k;if(R.t=="z"||(p.dense?(v[x]||(v[x]=[]),v[x][y]=R):v[zr({c:y,r:x})]=R),b=S+1,E=d.charCodeAt(b),m.e.c<y&&(m.e.c=y),m.e.r<x&&(m.e.r=x),A==_)++y;else if(y=0,++x,p.sheetRows&&p.sheetRows<=x)return!0}e:for(;S<d.length;++S)switch(A=d.charCodeAt(S)){case 34:E===34&&(j=!j);break;case _:case 10:case 13:if(!j&&L())break e;break}return S-b>0&&L(),v["!ref"]=sa(m),v}function s(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?i(d,f):mp(t(d,f),f)}function o(d,f){var p="",h=f.type=="string"?[0,0,0,0]:$ne(d,f);switch(f.type){case"base64":p=gc(d);break;case"binary":p=d;break;case"buffer":f.codepage==65001?p=d.toString("utf8"):f.codepage&&typeof Vy<"u"||(p=Nr&&Buffer.isBuffer(d)?d.toString("binary"):Iv(d));break;case"array":p=G2(d);break;case"string":p=d;break;default:throw new Error("Unrecognized type "+f.type)}return h[0]==239&&h[1]==187&&h[2]==191?p=Ym(p.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?p=Ym(p):f.type=="binary"&&typeof Vy<"u",p.slice(0,19)=="socialcalc:version:"?ZM.to_sheet(f.type=="string"?p:Ym(p),f):s(p,f)}function c(d,f){return If(o(d,f),f)}function u(d){for(var f=[],p=pn(d["!ref"]),h,v=Array.isArray(d),m=p.s.r;m<=p.e.r;++m){for(var x=[],y=p.s.c;y<=p.e.c;++y){var g=zr({r:m,c:y});if(h=v?(d[m]||[])[y]:d[g],!h||h.v==null){x.push("          ");continue}for(var b=(h.w||(vc(h),h.w)||"").slice(0,10);b.length<10;)b+=" ";x.push(b+(y===0?" ":""))}f.push(x.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}}(),Vk=function(){function e(O,F,B){if(O){ys(O,O.l||0);for(var U=B.Enum||pe;O.l<O.length;){var Y=O.read_shift(2),oe=U[Y]||U[65535],ee=O.read_shift(2),te=O.l+ee,le=oe.f&&oe.f(O,ee,B);if(O.l=te,F(le,oe,Y))return}}}function t(O,F){switch(F.type){case"base64":return r(Po(gc(O)),F);case"binary":return r(Po(O),F);case"buffer":case"array":return r(O,F)}throw"Unsupported type "+F.type}function r(O,F){if(!O)return O;var B=F||{},U=B.dense?[]:{},Y="Sheet1",oe="",ee=0,te={},le=[],Ne=[],ve={s:{r:0,c:0},e:{r:0,c:0}},Me=B.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)B.Enum=pe,e(O,function(Re,it,He){switch(He){case 0:B.vers=Re,Re>=4096&&(B.qpro=!0);break;case 6:ve=Re;break;case 204:Re&&(oe=Re);break;case 222:oe=Re;break;case 15:case 51:B.qpro||(Re[1].v=Re[1].v.slice(1));case 13:case 14:case 16:He==14&&(Re[2]&112)==112&&(Re[2]&15)>1&&(Re[2]&15)<15&&(Re[1].z=B.dateNF||Bn[14],B.cellDates&&(Re[1].t="d",Re[1].v=gM(Re[1].v))),B.qpro&&Re[3]>ee&&(U["!ref"]=sa(ve),te[Y]=U,le.push(Y),U=B.dense?[]:{},ve={s:{r:0,c:0},e:{r:0,c:0}},ee=Re[3],Y=oe||"Sheet"+(ee+1),oe="");var Ze=B.dense?(U[Re[0].r]||[])[Re[0].c]:U[zr(Re[0])];if(Ze){Ze.t=Re[1].t,Ze.v=Re[1].v,Re[1].z!=null&&(Ze.z=Re[1].z),Re[1].f!=null&&(Ze.f=Re[1].f);break}B.dense?(U[Re[0].r]||(U[Re[0].r]=[]),U[Re[0].r][Re[0].c]=Re[1]):U[zr(Re[0])]=Re[1];break}},B);else if(O[2]==26||O[2]==14)B.Enum=me,O[2]==14&&(B.qpro=!0,O.l=0),e(O,function(Re,it,He){switch(He){case 204:Y=Re;break;case 22:Re[1].v=Re[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Re[3]>ee&&(U["!ref"]=sa(ve),te[Y]=U,le.push(Y),U=B.dense?[]:{},ve={s:{r:0,c:0},e:{r:0,c:0}},ee=Re[3],Y="Sheet"+(ee+1)),Me>0&&Re[0].r>=Me)break;B.dense?(U[Re[0].r]||(U[Re[0].r]=[]),U[Re[0].r][Re[0].c]=Re[1]):U[zr(Re[0])]=Re[1],ve.e.c<Re[0].c&&(ve.e.c=Re[0].c),ve.e.r<Re[0].r&&(ve.e.r=Re[0].r);break;case 27:Re[14e3]&&(Ne[Re[14e3][0]]=Re[14e3][1]);break;case 1537:Ne[Re[0]]=Re[1],Re[0]==ee&&(Y=Re[1]);break}},B);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(U["!ref"]=sa(ve),te[oe||Y]=U,le.push(oe||Y),!Ne.length)return{SheetNames:le,Sheets:te};for(var Ie={},Q=[],$e=0;$e<Ne.length;++$e)te[le[$e]]?(Q.push(Ne[$e]||le[$e]),Ie[Ne[$e]]=te[Ne[$e]]||te[le[$e]]):(Q.push(Ne[$e]),Ie[Ne[$e]]={"!ref":"A1"});return{SheetNames:Q,Sheets:Ie}}function n(O,F){var B=F||{};if(+B.codepage>=0&&kg(+B.codepage),B.type=="string")throw new Error("Cannot write WK1 to JS string");var U=Zi(),Y=pn(O["!ref"]),oe=Array.isArray(O),ee=[];at(U,0,i(1030)),at(U,6,c(Y));for(var te=Math.min(Y.e.r,8191),le=Y.s.r;le<=te;++le)for(var Ne=Qa(le),ve=Y.s.c;ve<=Y.e.c;++ve){le===Y.s.r&&(ee[ve]=hi(ve));var Me=ee[ve]+Ne,Ie=oe?(O[le]||[])[ve]:O[Me];if(!(!Ie||Ie.t=="z"))if(Ie.t=="n")(Ie.v|0)==Ie.v&&Ie.v>=-32768&&Ie.v<=32767?at(U,13,h(le,ve,Ie.v)):at(U,14,m(le,ve,Ie.v));else{var Q=vc(Ie);at(U,15,f(le,ve,Q.slice(0,239)))}}return at(U,1),U.end()}function a(O,F){var B=F||{};if(+B.codepage>=0&&kg(+B.codepage),B.type=="string")throw new Error("Cannot write WK3 to JS string");var U=Zi();at(U,0,s(O));for(var Y=0,oe=0;Y<O.SheetNames.length;++Y)(O.Sheets[O.SheetNames[Y]]||{})["!ref"]&&at(U,27,ie(O.SheetNames[Y],oe++));var ee=0;for(Y=0;Y<O.SheetNames.length;++Y){var te=O.Sheets[O.SheetNames[Y]];if(!(!te||!te["!ref"])){for(var le=pn(te["!ref"]),Ne=Array.isArray(te),ve=[],Me=Math.min(le.e.r,8191),Ie=le.s.r;Ie<=Me;++Ie)for(var Q=Qa(Ie),$e=le.s.c;$e<=le.e.c;++$e){Ie===le.s.r&&(ve[$e]=hi($e));var Re=ve[$e]+Q,it=Ne?(te[Ie]||[])[$e]:te[Re];if(!(!it||it.t=="z"))if(it.t=="n")at(U,23,L(Ie,$e,ee,it.v));else{var He=vc(it);at(U,22,A(Ie,$e,ee,He.slice(0,239)))}}++ee}}return at(U,1),U.end()}function i(O){var F=Fe(2);return F.write_shift(2,O),F}function s(O){var F=Fe(26);F.write_shift(2,4096),F.write_shift(2,4),F.write_shift(4,0);for(var B=0,U=0,Y=0,oe=0;oe<O.SheetNames.length;++oe){var ee=O.SheetNames[oe],te=O.Sheets[ee];if(!(!te||!te["!ref"])){++Y;var le=ks(te["!ref"]);B<le.e.r&&(B=le.e.r),U<le.e.c&&(U=le.e.c)}}return B>8191&&(B=8191),F.write_shift(2,B),F.write_shift(1,Y),F.write_shift(1,U),F.write_shift(2,0),F.write_shift(2,0),F.write_shift(1,1),F.write_shift(1,2),F.write_shift(4,0),F.write_shift(4,0),F}function o(O,F,B){var U={s:{c:0,r:0},e:{c:0,r:0}};return F==8&&B.qpro?(U.s.c=O.read_shift(1),O.l++,U.s.r=O.read_shift(2),U.e.c=O.read_shift(1),O.l++,U.e.r=O.read_shift(2),U):(U.s.c=O.read_shift(2),U.s.r=O.read_shift(2),F==12&&B.qpro&&(O.l+=2),U.e.c=O.read_shift(2),U.e.r=O.read_shift(2),F==12&&B.qpro&&(O.l+=2),U.s.c==65535&&(U.s.c=U.e.c=U.s.r=U.e.r=0),U)}function c(O){var F=Fe(8);return F.write_shift(2,O.s.c),F.write_shift(2,O.s.r),F.write_shift(2,O.e.c),F.write_shift(2,O.e.r),F}function u(O,F,B){var U=[{c:0,r:0},{t:"n",v:0},0,0];return B.qpro&&B.vers!=20768?(U[0].c=O.read_shift(1),U[3]=O.read_shift(1),U[0].r=O.read_shift(2),O.l+=2):(U[2]=O.read_shift(1),U[0].c=O.read_shift(2),U[0].r=O.read_shift(2)),U}function d(O,F,B){var U=O.l+F,Y=u(O,F,B);if(Y[1].t="s",B.vers==20768){O.l++;var oe=O.read_shift(1);return Y[1].v=O.read_shift(oe,"utf8"),Y}return B.qpro&&O.l++,Y[1].v=O.read_shift(U-O.l,"cstr"),Y}function f(O,F,B){var U=Fe(7+B.length);U.write_shift(1,255),U.write_shift(2,F),U.write_shift(2,O),U.write_shift(1,39);for(var Y=0;Y<U.length;++Y){var oe=B.charCodeAt(Y);U.write_shift(1,oe>=128?95:oe)}return U.write_shift(1,0),U}function p(O,F,B){var U=u(O,F,B);return U[1].v=O.read_shift(2,"i"),U}function h(O,F,B){var U=Fe(7);return U.write_shift(1,255),U.write_shift(2,F),U.write_shift(2,O),U.write_shift(2,B,"i"),U}function v(O,F,B){var U=u(O,F,B);return U[1].v=O.read_shift(8,"f"),U}function m(O,F,B){var U=Fe(13);return U.write_shift(1,255),U.write_shift(2,F),U.write_shift(2,O),U.write_shift(8,B,"f"),U}function x(O,F,B){var U=O.l+F,Y=u(O,F,B);if(Y[1].v=O.read_shift(8,"f"),B.qpro)O.l=U;else{var oe=O.read_shift(2);S(O.slice(O.l,O.l+oe),Y),O.l+=oe}return Y}function y(O,F,B){var U=F&32768;return F&=-32769,F=(U?O:0)+(F>=8192?F-16384:F),(U?"":"$")+(B?hi(F):Qa(F))}var g={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function S(O,F){ys(O,0);for(var B=[],U=0,Y="",oe="",ee="",te="";O.l<O.length;){var le=O[O.l++];switch(le){case 0:B.push(O.read_shift(8,"f"));break;case 1:oe=y(F[0].c,O.read_shift(2),!0),Y=y(F[0].r,O.read_shift(2),!1),B.push(oe+Y);break;case 2:{var Ne=y(F[0].c,O.read_shift(2),!0),ve=y(F[0].r,O.read_shift(2),!1);oe=y(F[0].c,O.read_shift(2),!0),Y=y(F[0].r,O.read_shift(2),!1),B.push(Ne+ve+":"+oe+Y)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:B.push("("+B.pop()+")");break;case 5:B.push(O.read_shift(2));break;case 6:{for(var Me="";le=O[O.l++];)Me+=String.fromCharCode(le);B.push('"'+Me.replace(/"/g,'""')+'"')}break;case 8:B.push("-"+B.pop());break;case 23:B.push("+"+B.pop());break;case 22:B.push("NOT("+B.pop()+")");break;case 20:case 21:te=B.pop(),ee=B.pop(),B.push(["AND","OR"][le-20]+"("+ee+","+te+")");break;default:if(le<32&&b[le])te=B.pop(),ee=B.pop(),B.push(ee+b[le]+te);else if(g[le]){if(U=g[le][1],U==69&&(U=O[O.l++]),U>B.length){console.error("WK1 bad formula parse 0x"+le.toString(16)+":|"+B.join("|")+"|");return}var Ie=B.slice(-U);B.length-=U,B.push(g[le][0]+"("+Ie.join(",")+")")}else return le<=7?console.error("WK1 invalid opcode "+le.toString(16)):le<=24?console.error("WK1 unsupported op "+le.toString(16)):le<=30?console.error("WK1 invalid opcode "+le.toString(16)):le<=115?console.error("WK1 unsupported function opcode "+le.toString(16)):console.error("WK1 unrecognized opcode "+le.toString(16))}}B.length==1?F[1].f=""+B[0]:console.error("WK1 bad formula parse |"+B.join("|")+"|")}function _(O){var F=[{c:0,r:0},{t:"n",v:0},0];return F[0].r=O.read_shift(2),F[3]=O[O.l++],F[0].c=O[O.l++],F}function j(O,F){var B=_(O);return B[1].t="s",B[1].v=O.read_shift(F-4,"cstr"),B}function A(O,F,B,U){var Y=Fe(6+U.length);Y.write_shift(2,O),Y.write_shift(1,B),Y.write_shift(1,F),Y.write_shift(1,39);for(var oe=0;oe<U.length;++oe){var ee=U.charCodeAt(oe);Y.write_shift(1,ee>=128?95:ee)}return Y.write_shift(1,0),Y}function E(O,F){var B=_(O);B[1].v=O.read_shift(2);var U=B[1].v>>1;if(B[1].v&1)switch(U&7){case 0:U=(U>>3)*5e3;break;case 1:U=(U>>3)*500;break;case 2:U=(U>>3)/20;break;case 3:U=(U>>3)/200;break;case 4:U=(U>>3)/2e3;break;case 5:U=(U>>3)/2e4;break;case 6:U=(U>>3)/16;break;case 7:U=(U>>3)/64;break}return B[1].v=U,B}function T(O,F){var B=_(O),U=O.read_shift(4),Y=O.read_shift(4),oe=O.read_shift(2);if(oe==65535)return U===0&&Y===3221225472?(B[1].t="e",B[1].v=15):U===0&&Y===3489660928?(B[1].t="e",B[1].v=42):B[1].v=0,B;var ee=oe&32768;return oe=(oe&32767)-16446,B[1].v=(1-ee*2)*(Y*Math.pow(2,oe+32)+U*Math.pow(2,oe)),B}function L(O,F,B,U){var Y=Fe(14);if(Y.write_shift(2,O),Y.write_shift(1,B),Y.write_shift(1,F),U==0)return Y.write_shift(4,0),Y.write_shift(4,0),Y.write_shift(2,65535),Y;var oe=0,ee=0,te=0,le=0;return U<0&&(oe=1,U=-U),ee=Math.log2(U)|0,U/=Math.pow(2,ee-31),le=U>>>0,le&2147483648||(U/=2,++ee,le=U>>>0),U-=le,le|=2147483648,le>>>=0,U*=Math.pow(2,32),te=U>>>0,Y.write_shift(4,te),Y.write_shift(4,le),ee+=16383+(oe?32768:0),Y.write_shift(2,ee),Y}function k(O,F){var B=T(O);return O.l+=F-14,B}function R(O,F){var B=_(O),U=O.read_shift(4);return B[1].v=U>>6,B}function D(O,F){var B=_(O),U=O.read_shift(8,"f");return B[1].v=U,B}function q(O,F){var B=D(O);return O.l+=F-10,B}function X(O,F){return O[O.l+F-1]==0?O.read_shift(F,"cstr"):""}function se(O,F){var B=O[O.l++];B>F-1&&(B=F-1);for(var U="";U.length<B;)U+=String.fromCharCode(O[O.l++]);return U}function Z(O,F,B){if(!(!B.qpro||F<21)){var U=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var Y=O.read_shift(F-21,"cstr");return[U,Y]}}function K(O,F){for(var B={},U=O.l+F;O.l<U;){var Y=O.read_shift(2);if(Y==14e3){for(B[Y]=[0,""],B[Y][0]=O.read_shift(2);O[O.l];)B[Y][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return B}function ie(O,F){var B=Fe(5+O.length);B.write_shift(2,14e3),B.write_shift(2,F);for(var U=0;U<O.length;++U){var Y=O.charCodeAt(U);B[B.l++]=Y>127?95:Y}return B[B.l++]=0,B}var pe={0:{n:"BOF",f:KM},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:x},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:X},222:{n:"SHEETNAMELP",f:se},65535:{n:""}},me={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:j},23:{n:"NUMBER17",f:T},24:{n:"NUMBER18",f:E},25:{n:"FORMULA19",f:k},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:K},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:R},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:q},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:X},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Z},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}(),TQ=/^\s|\s$|[\t\n\r]/;function eF(e,t){if(!t.bookSST)return"";var r=[la];r[r.length]=rt("sst",null,{xmlns:pp[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],i="<si>";a.r?i+=a.r:(i+="<t",a.t||(a.t=""),a.t.match(TQ)&&(i+=' xml:space="preserve"'),i+=">"+Br(a.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function CQ(e){return[e.read_shift(4),e.read_shift(4)]}function kQ(e,t){return t||(t=Fe(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var OQ=wJ;function PQ(e){var t=Zi();Ve(t,159,kQ(e));for(var r=0;r<e.length;++r)Ve(t,19,OQ(e[r]));return Ve(t,160),t.end()}function LQ(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function tF(e){var t=0,r,n=LQ(e),a=n.length+1,i,s,o,c,u;for(r=xf(a),r[0]=n.length,i=1;i!=a;++i)r[i]=n[i-1];for(i=a-1;i>=0;--i)s=r[i],o=t&16384?1:0,c=t<<1&32767,u=o|c,t=u^s;return t^52811}var RQ=function(){function e(a,i){switch(i.type){case"base64":return t(gc(a),i);case"binary":return t(a,i);case"buffer":return t(Nr&&Buffer.isBuffer(a)?a.toString("binary"):Iv(a),i);case"array":return t(G2(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){var s=i||{},o=s.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var p=/\\\w+\b/g,h=0,v,m=-1;v=p.exec(d);){switch(v[0]){case"\\cell":var x=d.slice(h,p.lastIndex-v[0].length);if(x[0]==" "&&(x=x.slice(1)),++m,x.length){var y={v:x,t:"s"};Array.isArray(o)?o[f][m]=y:o[zr({r:f,c:m})]=y}break}h=p.lastIndex}m>u.e.c&&(u.e.c=m)}),o["!ref"]=sa(u),o}function r(a,i){return If(e(a,i),i)}function n(a){for(var i=["{\\rtf1\\ansi"],s=pn(a["!ref"]),o,c=Array.isArray(a),u=s.s.r;u<=s.e.r;++u){i.push("\\trowd\\trautofit1");for(var d=s.s.c;d<=s.e.c;++d)i.push("\\cellx"+(d+1));for(i.push("\\pard\\intbl"),d=s.s.c;d<=s.e.c;++d){var f=zr({r:u,c:d});o=c?(a[u]||[])[d]:a[f],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(vc(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function Gk(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}var IQ=6,sc=IQ;function tb(e){return Math.floor((e+Math.round(128/sc)/256)*sc)}function rb(e){return Math.floor((e-5)/sc*100+.5)/100}function BN(e){return Math.round((e*sc+5)/sc*256)/256}function f3(e){e.width?(e.wpx=tb(e.width),e.wch=rb(e.wpx),e.MDW=sc):e.wpx?(e.wch=rb(e.wpx),e.width=BN(e.wch),e.MDW=sc):typeof e.wch=="number"&&(e.width=BN(e.wch),e.wpx=tb(e.width),e.MDW=sc),e.customWidth&&delete e.customWidth}var DQ=96,rF=DQ;function nb(e){return e*96/rF}function nF(e){return e*rF/96}function MQ(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=rt("numFmt",null,{numFmtId:n,formatCode:Br(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=rt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function FQ(e){var t=[];return t[t.length]=rt("cellXfs",null),e.forEach(function(r){t[t.length]=rt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=rt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function aF(e,t){var r=[la,rt("styleSheet",null,{xmlns:pp[0],"xmlns:vt":Oa.vt})],n;return e.SSF&&(n=MQ(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=FQ(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function $Q(e,t){var r=e.read_shift(2),n=pi(e);return[r,n]}function BQ(e,t,r){r||(r=Fe(6+4*t.length)),r.write_shift(2,e),La(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function UQ(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=TJ(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var s=e.read_shift(1);s!=0&&(n.underline=s);var o=e.read_shift(1);o>0&&(n.family=o);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=EJ(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=pi(e),n}function zQ(e,t){t||(t=Fe(25+4*32)),t.write_shift(2,e.sz*20),CJ(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Zy(e.color,t);var n=0;return n=2,t.write_shift(1,n),La(e.name,t),t.length>t.l?t.slice(0,t.l):t}var qQ=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],h5,HQ=ml;function Kk(e,t){t||(t=Fe(4*3+8*7+16*1)),h5||(h5=e3(qQ));var r=h5[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(Zy({auto:1},t),Zy({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function WQ(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function iF(e,t,r){r||(r=Fe(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function pm(e,t){return t||(t=Fe(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var VQ=ml;function GQ(e,t){return t||(t=Fe(51)),t.write_shift(1,0),pm(null,t),pm(null,t),pm(null,t),pm(null,t),pm(null,t),t.length>t.l?t.slice(0,t.l):t}function KQ(e,t){return t||(t=Fe(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),Qy(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function XQ(e,t,r){var n=Fe(2052);return n.write_shift(4,e),Qy(t,n),Qy(r,n),n.length>n.l?n.slice(0,n.l):n}function YQ(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(Ve(e,615,Mo(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Ve(e,44,BQ(a,t[a]))}),Ve(e,616))}}function JQ(e){var t=1;Ve(e,611,Mo(t)),Ve(e,43,zQ({sz:12,color:{theme:1},name:"Calibri",family:2})),Ve(e,612)}function QQ(e){var t=2;Ve(e,603,Mo(t)),Ve(e,45,Kk({patternType:"none"})),Ve(e,45,Kk({patternType:"gray125"})),Ve(e,604)}function ZQ(e){var t=1;Ve(e,613,Mo(t)),Ve(e,46,GQ()),Ve(e,614)}function eZ(e){var t=1;Ve(e,626,Mo(t)),Ve(e,47,iF({numFmtId:0},65535)),Ve(e,627)}function tZ(e,t){Ve(e,617,Mo(t.length)),t.forEach(function(r){Ve(e,47,iF(r,0))}),Ve(e,618)}function rZ(e){var t=1;Ve(e,619,Mo(t)),Ve(e,48,KQ({xfId:0,name:"Normal"})),Ve(e,620)}function nZ(e){var t=0;Ve(e,505,Mo(t)),Ve(e,506)}function aZ(e){var t=0;Ve(e,508,XQ(t,"TableStyleMedium9","PivotStyleMedium4")),Ve(e,509)}function iZ(e,t){var r=Zi();return Ve(r,278),YQ(r,e.SSF),JQ(r),QQ(r),ZQ(r),eZ(r),tZ(r,t.cellXfs),rZ(r),nZ(r),aZ(r),Ve(r,279),r.end()}function sF(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[la];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function sZ(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:pi(e)}}function oZ(e){var t=Fe(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),La(e.name,t),t.slice(0,t.l)}function lZ(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function cZ(e){var t=Fe(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function uZ(e,t){var r=Fe(8+2*t.length);return r.write_shift(4,e),La(t,r),r.slice(0,r.l)}function dZ(e){return e.l+=4,e.read_shift(4)!=0}function fZ(e,t){var r=Fe(8);return r.write_shift(4,e),r.write_shift(4,1),r}function hZ(){var e=Zi();return Ve(e,332),Ve(e,334,Mo(1)),Ve(e,335,oZ({name:"XLDAPR",version:12e4,flags:3496657072})),Ve(e,336),Ve(e,339,uZ(1,"XLDAPR")),Ve(e,52),Ve(e,35,Mo(514)),Ve(e,4096,Mo(0)),Ve(e,4097,Ws(1)),Ve(e,36),Ve(e,53),Ve(e,340),Ve(e,337,fZ(1)),Ve(e,51,cZ([[1,0]])),Ve(e,338),Ve(e,333),e.end()}function oF(){var e=[la];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function pZ(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=zr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}var Lh=1024;function lF(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[rt("xml",null,{"xmlns:v":bs.v,"xmlns:o":bs.o,"xmlns:x":bs.x,"xmlns:mv":bs.mv}).replace(/\/>/,">"),rt("o:shapelayout",rt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),rt("v:shapetype",[rt("v:stroke",null,{joinstyle:"miter"}),rt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Lh<e*1e3;)Lh+=1e3;return t.forEach(function(i){var s=Pa(i[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?rt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=rt("v:fill",c,o),d={on:"t",obscured:"t"};++Lh,a=a.concat(["<v:shape"+Rg({id:"_x0000_s"+Lh,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,rt("v:shadow",null,d),rt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ya("x:Anchor",[s.c+1,0,s.r+1,0,s.c+3,20,s.r+5,20].join(",")),Ya("x:AutoFill","False"),Ya("x:Row",String(s.r)),Ya("x:Column",String(s.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function cF(e){var t=[la,rt("comments",null,{xmlns:pp[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var i=Br(a.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(Br(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),i.length<=1)t.push(Ya("t",Br(i[0]||"")));else{for(var s=`Comment:
    `+i[0]+`
`,o=1;o<i.length;++o)s+=`Reply:
    `+i[o]+`
`;t.push(Ya("t",Br(s)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function mZ(e,t,r){var n=[la,rt("ThreadedComments",null,{xmlns:Oa.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var i="";(a[1]||[]).forEach(function(s,o){if(!s.T){delete s.ID;return}s.a&&t.indexOf(s.a)==-1&&t.push(s.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?i=c.id:c.parentId=i,s.ID=c.id,s.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),n.push(rt("threadedComment",Ya("text",s.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function gZ(e){var t=[la,rt("personList",null,{xmlns:Oa.TCMNT,"xmlns:x":pp[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(rt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function vZ(e){var t={};t.iauthor=e.read_shift(4);var r=$f(e);return t.rfx=r.s,t.ref=zr(r.s),e.l+=16,t}function xZ(e,t){return t==null&&(t=Fe(36)),t.write_shift(4,e[1].iauthor),gp(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var yZ=pi;function bZ(e){return La(e.slice(0,54))}function wZ(e){var t=Zi(),r=[];return Ve(t,628),Ve(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Ve(t,632,bZ(a.a)))})}),Ve(t,631),Ve(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var i={s:Pa(n[0]),e:Pa(n[0])};Ve(t,635,xZ([i,a])),a.t&&a.t.length>0&&Ve(t,637,SJ(a)),Ve(t,636),delete a.iauthor})}),Ve(t,634),Ve(t,629),t.end()}function _Z(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Wr.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var uF=["xlsb","xlsm","xlam","biff8","xla"],SZ=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,i,s){var o=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),s.length==0?o=!0:s.charAt(0)=="["&&(o=!0,s=s.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,d=s.length>0?parseInt(s,10)|0:0;return o?d+=t.c:--d,c?u+=t.r:--u,a+(o?"":"$")+hi(d)+(c?"":"$")+Qa(u)}return function(a,i){return t=i,a.replace(e,r)}}(),h3=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,p3=function(){return function(t,r){return t.replace(h3,function(n,a,i,s,o,c){var u=o3(s)-(i?0:r.c),d=s3(c)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",p=u==0?"":i?u+1:"["+u+"]";return a+"R"+f+"C"+p})}}();function NZ(e,t){return e.replace(h3,function(r,n,a,i,s,o){return n+(a=="$"?a+i:hi(o3(i)+t.c))+(s=="$"?s+o:Qa(s3(o)+t.r))})}function jZ(e){return e.length!=1}function ta(e){e.l+=1}function Hu(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function dF(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return fF(e);r.biff==12&&(n=4)}var a=e.read_shift(n),i=e.read_shift(n),s=Hu(e),o=Hu(e);return{s:{r:a,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function fF(e){var t=Hu(e),r=Hu(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function AZ(e,t,r){if(r.biff<8)return fF(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),i=Hu(e),s=Hu(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:s[0],cRel:s[1],rRel:s[2]}}}function hF(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return EZ(e);var n=e.read_shift(r&&r.biff==12?4:2),a=Hu(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function EZ(e){var t=Hu(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function TZ(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function CZ(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return kZ(e);var a=e.read_shift(n>=12?4:2),i=e.read_shift(2),s=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;a>524287;)a-=1048576;if(s==1)for(;i>8191;)i=i-16384;return{r:a,c:i,cRel:s,rRel:o}}function kZ(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function OZ(e,t,r){var n=(e[e.l++]&96)>>5,a=dF(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function PZ(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var s=dF(e,i,r);return[n,a,s]}function LZ(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function RZ(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,a]}function IZ(e,t,r){var n=(e[e.l++]&96)>>5,a=AZ(e,t-1,r);return[n,a]}function DZ(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function Xk(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function MZ(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],i=0;i<=n;++i)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function FZ(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function $Z(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function BZ(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function UZ(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function pF(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function zZ(e){return e.read_shift(2),pF(e)}function qZ(e){return e.read_shift(2),pF(e)}function HZ(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=hF(e,0,r);return[n,a]}function WZ(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=CZ(e,0,r);return[n,a]}function VZ(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=hF(e,0,r);return[n,a,i]}function GZ(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[Gee[a],vF[a],n]}function KZ(e,t,r){var n=e[e.l++],a=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:XZ(e);return[a,(i[0]===0?vF:Vee)[i[1]]]}function XZ(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function YZ(e,t,r){e.l+=r&&r.biff==2?3:4}function JZ(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function QZ(e){return e.l++,Fv[e.read_shift(1)]}function ZZ(e){return e.l++,e.read_shift(2)}function eee(e){return e.l++,e.read_shift(1)!==0}function tee(e){return e.l++,vp(e)}function ree(e,t,r){return e.l++,YM(e,t-1,r)}function nee(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=VJ(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Fv[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=vp(e);break;case 2:r[1]=YJ(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function aee(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],i=0;i!=n;++i)a.push((r.biff==12?$f:ZJ)(e));return a}function iee(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var i=0,s=[];i!=n&&(s[i]=[]);++i)for(var o=0;o!=a;++o)s[i][o]=nee(e,r.biff);return s}function see(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,i=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function oee(e,t,r){if(r.biff==5)return lee(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),i=e.read_shift(4);return[n,a,i]}function lee(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function cee(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function uee(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function dee(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function fee(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,a]}var hee=ml,pee=ml,mee=ml;function $v(e,t,r){return e.l+=2,[TZ(e)]}function m3(e){return e.l+=6,[]}var gee=$v,vee=m3,xee=m3,yee=$v;function mF(e){return e.l+=2,[KM(e),e.read_shift(2)&1]}var bee=$v,wee=mF,_ee=m3,See=$v,Nee=$v,jee=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Aee(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),i=e.read_shift(2),s=jee[r>>2&31];return{ixti:t,coltype:r&3,rt:s,idx:n,c:a,C:i}}function Eee(e){return e.l+=2,[e.read_shift(4)]}function Tee(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Cee(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function kee(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Oee(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Pee(e){return e.l+=4,[0,0]}var Yk={1:{n:"PtgExp",f:JZ},2:{n:"PtgTbl",f:mee},3:{n:"PtgAdd",f:ta},4:{n:"PtgSub",f:ta},5:{n:"PtgMul",f:ta},6:{n:"PtgDiv",f:ta},7:{n:"PtgPower",f:ta},8:{n:"PtgConcat",f:ta},9:{n:"PtgLt",f:ta},10:{n:"PtgLe",f:ta},11:{n:"PtgEq",f:ta},12:{n:"PtgGe",f:ta},13:{n:"PtgGt",f:ta},14:{n:"PtgNe",f:ta},15:{n:"PtgIsect",f:ta},16:{n:"PtgUnion",f:ta},17:{n:"PtgRange",f:ta},18:{n:"PtgUplus",f:ta},19:{n:"PtgUminus",f:ta},20:{n:"PtgPercent",f:ta},21:{n:"PtgParen",f:ta},22:{n:"PtgMissArg",f:ta},23:{n:"PtgStr",f:ree},26:{n:"PtgSheet",f:Tee},27:{n:"PtgEndSheet",f:Cee},28:{n:"PtgErr",f:QZ},29:{n:"PtgBool",f:eee},30:{n:"PtgInt",f:ZZ},31:{n:"PtgNum",f:tee},32:{n:"PtgArray",f:DZ},33:{n:"PtgFunc",f:GZ},34:{n:"PtgFuncVar",f:KZ},35:{n:"PtgName",f:see},36:{n:"PtgRef",f:HZ},37:{n:"PtgArea",f:OZ},38:{n:"PtgMemArea",f:cee},39:{n:"PtgMemErr",f:hee},40:{n:"PtgMemNoMem",f:pee},41:{n:"PtgMemFunc",f:uee},42:{n:"PtgRefErr",f:dee},43:{n:"PtgAreaErr",f:LZ},44:{n:"PtgRefN",f:WZ},45:{n:"PtgAreaN",f:IZ},46:{n:"PtgMemAreaN",f:kee},47:{n:"PtgMemNoMemN",f:Oee},57:{n:"PtgNameX",f:oee},58:{n:"PtgRef3d",f:VZ},59:{n:"PtgArea3d",f:PZ},60:{n:"PtgRefErr3d",f:fee},61:{n:"PtgAreaErr3d",f:RZ},255:{}},Lee={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Ree={1:{n:"PtgElfLel",f:mF},2:{n:"PtgElfRw",f:See},3:{n:"PtgElfCol",f:gee},6:{n:"PtgElfRwV",f:Nee},7:{n:"PtgElfColV",f:yee},10:{n:"PtgElfRadical",f:bee},11:{n:"PtgElfRadicalS",f:_ee},13:{n:"PtgElfColS",f:vee},15:{n:"PtgElfColSV",f:xee},16:{n:"PtgElfRadicalLel",f:wee},25:{n:"PtgList",f:Aee},29:{n:"PtgSxName",f:Eee},255:{}},Iee={0:{n:"PtgAttrNoop",f:Pee},1:{n:"PtgAttrSemi",f:UZ},2:{n:"PtgAttrIf",f:$Z},4:{n:"PtgAttrChoose",f:MZ},8:{n:"PtgAttrGoto",f:FZ},16:{n:"PtgAttrSum",f:YZ},32:{n:"PtgAttrBaxcel",f:Xk},33:{n:"PtgAttrBaxcel",f:Xk},64:{n:"PtgAttrSpace",f:zZ},65:{n:"PtgAttrSpaceSemi",f:qZ},128:{n:"PtgAttrIfError",f:BZ},255:{}};function Dee(e,t,r,n){if(n.biff<8)return ml(e,t);for(var a=e.l+t,i=[],s=0;s!==r.length;++s)switch(r[s][0]){case"PtgArray":r[s][1]=iee(e,0,n),i.push(r[s][1]);break;case"PtgMemArea":r[s][2]=aee(e,r[s][1],n),i.push(r[s][2]);break;case"PtgExp":n&&n.biff==12&&(r[s][1][1]=e.read_shift(4),i.push(r[s][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[s][0]}return t=a-e.l,t!==0&&i.push(ml(e,t)),i}function Mee(e,t,r){for(var n=e.l+t,a,i,s=[];n!=e.l;)t=n-e.l,i=e[e.l],a=Yk[i]||Yk[Lee[i]],(i===24||i===25)&&(a=(i===24?Ree:Iee)[e[e.l+1]]),!a||!a.f?ml(e,t):s.push([a.n,a.f(e,t,r)]);return s}function Fee(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],i=0;i<n.length;++i){var s=n[i];if(s)switch(s[0]){case 2:a.push('"'+s[1].replace(/"/g,'""')+'"');break;default:a.push(s[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var $ee={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Bee(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function gF(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function Jk(e,t,r){var n=gF(e,t,r);return n=="#REF"?n:Bee(n,r)}function P0(e,t,r,n,a){var i=a&&a.biff||8,s={s:{c:0,r:0}},o=[],c,u,d,f=0,p=0,h,v="";if(!e[0]||!e[0][0])return"";for(var m=-1,x="",y=0,g=e[0].length;y<g;++y){var b=e[0][y];switch(b[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),m>=0){switch(e[0][m][1][0]){case 0:x=Fn(" ",e[0][m][1][1]);break;case 1:x=Fn("\r",e[0][m][1][1]);break;default:if(x="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}u=u+x,m=-1}o.push(u+$ee[b[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Qm(b[1][1],s,a),o.push(Zm(d,i));break;case"PtgRefN":d=r?Qm(b[1][1],r,a):b[1][1],o.push(Zm(d,i));break;case"PtgRef3d":f=b[1][1],d=Qm(b[1][2],s,a),v=Jk(n,f,a),o.push(v+"!"+Zm(d,i));break;case"PtgFunc":case"PtgFuncVar":var S=b[1][0],_=b[1][1];S||(S=0),S&=127;var j=S==0?[]:o.slice(-S);o.length-=S,_==="User"&&(_=j.shift()),o.push(_+"("+j.join(",")+")");break;case"PtgBool":o.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(b[1]);break;case"PtgNum":o.push(String(b[1]));break;case"PtgStr":o.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(b[1]);break;case"PtgAreaN":h=Ik(b[1][1],r?{s:r}:s,a),o.push(d5(h,a));break;case"PtgArea":h=Ik(b[1][1],s,a),o.push(d5(h,a));break;case"PtgArea3d":f=b[1][1],h=b[1][2],v=Jk(n,f,a),o.push(v+"!"+d5(h,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=b[1][2];var A=(n.names||[])[p-1]||(n[0]||[])[p],E=A?A.Name:"SH33TJSNAME"+String(p);E&&E.slice(0,6)=="_xlfn."&&!a.xlfn&&(E=E.slice(6)),o.push(E);break;case"PtgNameX":var T=b[1][1];p=b[1][2];var L;if(a.biff<=5)T<0&&(T=-T),n[T]&&(L=n[T][p]);else{var k="";if(((n[T]||[])[0]||[])[0]==14849||(((n[T]||[])[0]||[])[0]==1025?n[T][p]&&n[T][p].itab>0&&(k=n.SheetNames[n[T][p].itab-1]+"!"):k=n.SheetNames[p-1]+"!"),n[T]&&n[T][p])k+=n[T][p].Name;else if(n[0]&&n[0][p])k+=n[0][p].Name;else{var R=(gF(n,T,a)||"").split(";;");R[p-1]?k=R[p-1]:k+="SH33TJSERRX"}o.push(k);break}L||(L={Name:"SH33TJSERRY"}),o.push(L.Name);break;case"PtgParen":var D="(",q=")";if(m>=0){switch(x="",e[0][m][1][0]){case 2:D=Fn(" ",e[0][m][1][1])+D;break;case 3:D=Fn("\r",e[0][m][1][1])+D;break;case 4:q=Fn(" ",e[0][m][1][1])+q;break;case 5:q=Fn("\r",e[0][m][1][1])+q;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}m=-1}o.push(D+o.pop()+q);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var X={c:r.c,r:r.r};if(n.sharedf[zr(d)]){var se=n.sharedf[zr(d)];o.push(P0(se,s,X,n,a))}else{var Z=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(P0(u[1],s,X,n,a)),Z=!0;break}Z||o.push(b[1])}break;case"PtgArray":o.push("{"+Fee(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":m=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var K=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&m>=0&&K.indexOf(e[0][y][0])==-1){b=e[0][m];var ie=!0;switch(b[1][0]){case 4:ie=!1;case 0:x=Fn(" ",b[1][1]);break;case 5:ie=!1;case 1:x=Fn("\r",b[1][1]);break;default:if(x="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}o.push((ie?x:"")+o.pop()+(ie?"":x)),m=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function Uee(e){if(e==null){var t=Fe(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return yf(e);return yf(0)}function zee(e,t,r,n,a){var i=bf(t,r,a),s=Uee(e.v),o=Fe(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=Fe(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Xa([i,s,o,u]);return f}function K2(e,t,r){var n=e.read_shift(4),a=Mee(e,n,r),i=e.read_shift(4),s=i>0?Dee(e,i,a,r):null;return[a,s]}var qee=K2,X2=K2,Hee=K2,Wee=K2,Vee={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},vF={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Gee={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Kee(e){var t="of:="+e.replace(h3,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function Xee(e){return e.replace(/\./,"!")}var eg=typeof Map<"u";function g3(e,t,r){var n=0,a=e.length;if(r){if(eg?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=eg?r.get(t):r[t];n<i.length;++n)if(e[i[n]].t===t)return e.Count++,i[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(eg?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function Y2(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(sc=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=rb(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=BN(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function xF(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Ju(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,i=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){hM(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=i;++a)if(e[a].numFmtId===n)return a;return e[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function Yee(e,t,r){if(e&&e["!ref"]){var n=pn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function Jee(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+sa(e[r])+'"/>';return t+"</mergeCells>"}function Qee(e,t,r,n,a){var i=!1,s={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,s.codeName=Lg(Br(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+rt("outlinePr",null,u)}!i&&!o||(a[a.length]=rt("sheetPr",o,s))}var Zee=["objects","scenarios","selectLockedCells","selectUnlockedCells"],ete=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function tte(e){var t={sheet:1};return Zee.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),ete.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=tF(e.password).toString(16).toUpperCase()),rt("sheetProtection",null,t)}function rte(e){return xF(e),rt("pageMargins",null,e)}function nte(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=rt("col",null,Y2(a,n)));return r[r.length]="</cols>",r.join("")}function ate(e,t,r,n){var a=typeof e.ref=="string"?e.ref:sa(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,s=ks(a);s.s.r==s.e.r&&(s.e.r=ks(t["!ref"]).e.r,a=sa(s));for(var o=0;o<i.length;++o){var c=i[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),rt("autoFilter",null,{ref:a})}function ite(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),rt("sheetViews",rt("sheetView",null,a),{})}function ste(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",i=e.t,s=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=Fv[e.v];break;case"d":n&&n.cellDates?a=Ri(e.v,-1).toISOString():(e=rs(e),e.t="n",a=""+(e.v=ts(Ri(e.v)))),typeof e.z>"u"&&(e.z=Bn[14]);break;default:a=e.v;break}var o=Ya("v",Br(a)),c={r:t},u=Ju(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=Ya("v",""+g3(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=s),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=rt("f",Br(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),rt("c",o,c)}function ote(e,t,r,n){var a=[],i=[],s=pn(e["!ref"]),o="",c,u="",d=[],f=0,p=0,h=e["!rows"],v=Array.isArray(e),m={r:u},x,y=-1;for(p=s.s.c;p<=s.e.c;++p)d[p]=hi(p);for(f=s.s.r;f<=s.e.r;++f){for(i=[],u=Qa(f),p=s.s.c;p<=s.e.c;++p){c=d[p]+u;var g=v?(e[f]||[])[p]:e[c];g!==void 0&&(o=ste(g,c,e,t))!=null&&i.push(o)}(i.length>0||h&&h[f])&&(m={r:u},h&&h[f]&&(x=h[f],x.hidden&&(m.hidden=1),y=-1,x.hpx?y=nb(x.hpx):x.hpt&&(y=x.hpt),y>-1&&(m.ht=y,m.customHeight=1),x.level&&(m.outlineLevel=x.level)),a[a.length]=rt("row",i.join(""),m))}if(h)for(;f<h.length;++f)h&&h[f]&&(m={r:f+1},x=h[f],x.hidden&&(m.hidden=1),y=-1,x.hpx?y=nb(x.hpx):x.hpt&&(y=x.hpt),y>-1&&(m.ht=y,m.customHeight=1),x.level&&(m.outlineLevel=x.level),a[a.length]=rt("row","",m));return a.join("")}function yF(e,t,r,n){var a=[la,rt("worksheet",null,{xmlns:pp[0],"xmlns:r":Oa.r})],i=r.SheetNames[e],s=0,o="",c=r.Sheets[i];c==null&&(c={});var u=c["!ref"]||"A1",d=pn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=sa(d)}n||(n={}),c["!comments"]=[];var f=[];Qee(c,r,e,t,a),a[a.length]=rt("dimension",null,{ref:u}),a[a.length]=ite(c,t,e,r),t.sheetFormat&&(a[a.length]=rt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=nte(c,c["!cols"])),a[s=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=ote(c,t),o.length>0&&(a[a.length]=o)),a.length>s+1&&(a[a.length]="</sheetData>",a[s]=a[s].replace("/>",">")),c["!protect"]&&(a[a.length]=tte(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=ate(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=Jee(c["!merges"]));var p=-1,h,v=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(m){m[1].Target&&(h={ref:m[0]},m[1].Target.charAt(0)!="#"&&(v=Dr(n,-1,Br(m[1].Target).replace(/#.*$/,""),_r.HLINK),h["r:id"]="rId"+v),(p=m[1].Target.indexOf("#"))>-1&&(h.location=Br(m[1].Target.slice(p+1))),m[1].Tooltip&&(h.tooltip=Br(m[1].Tooltip)),a[a.length]=rt("hyperlink",null,h))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=rte(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=Ya("ignoredErrors",rt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(v=Dr(n,-1,"../drawings/drawing"+(e+1)+".xml",_r.DRAW),a[a.length]=rt("drawing",null,{"r:id":"rId"+v}),c["!drawing"]=f),c["!comments"].length>0&&(v=Dr(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",_r.VML),a[a.length]=rt("legacyDrawing",null,{"r:id":"rId"+v}),c["!legacy"]=v),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function lte(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=a/20),r}function cte(e,t,r){var n=Fe(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var i=320;a.hpx?i=nb(a.hpx)*20:a.hpt&&(i=a.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var s=0;a.level&&(s|=a.level),a.hidden&&(s|=16),(a.hpx||a.hpt)&&(s|=32),n.write_shift(1,s),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,p=-1,h=d<<10;h<d+1<<10;++h){u.c=h;var v=Array.isArray(r)?(r[u.r]||[])[u.c]:r[zr(u)];v&&(f<0&&(f=h),p=h)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,p))}var m=n.l;return n.l=c,n.write_shift(4,o),n.l=m,n.length>n.l?n.slice(0,n.l):n}function ute(e,t,r,n){var a=cte(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&Ve(e,0,a)}var dte=$f,fte=gp;function hte(){}function pte(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=NJ(e),r}function mte(e,t,r){r==null&&(r=Fe(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return Zy({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),RM(e,r),r.slice(0,r.l)}function gte(e){var t=ao(e);return[t]}function vte(e,t,r){return r==null&&(r=Fe(8)),Df(t,r)}function xte(e){var t=Mf(e);return[t]}function yte(e,t,r){return r==null&&(r=Fe(4)),Ff(t,r)}function bte(e){var t=ao(e),r=e.read_shift(1);return[t,r,"b"]}function wte(e,t,r){return r==null&&(r=Fe(9)),Df(t,r),r.write_shift(1,e.v?1:0),r}function _te(e){var t=Mf(e),r=e.read_shift(1);return[t,r,"b"]}function Ste(e,t,r){return r==null&&(r=Fe(5)),Ff(t,r),r.write_shift(1,e.v?1:0),r}function Nte(e){var t=ao(e),r=e.read_shift(1);return[t,r,"e"]}function jte(e,t,r){return r==null&&(r=Fe(9)),Df(t,r),r.write_shift(1,e.v),r}function Ate(e){var t=Mf(e),r=e.read_shift(1);return[t,r,"e"]}function Ete(e,t,r){return r==null&&(r=Fe(8)),Ff(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function Tte(e){var t=ao(e),r=e.read_shift(4);return[t,r,"s"]}function Cte(e,t,r){return r==null&&(r=Fe(12)),Df(t,r),r.write_shift(4,t.v),r}function kte(e){var t=Mf(e),r=e.read_shift(4);return[t,r,"s"]}function Ote(e,t,r){return r==null&&(r=Fe(8)),Ff(t,r),r.write_shift(4,t.v),r}function Pte(e){var t=ao(e),r=vp(e);return[t,r,"n"]}function Lte(e,t,r){return r==null&&(r=Fe(16)),Df(t,r),yf(e.v,r),r}function Rte(e){var t=Mf(e),r=vp(e);return[t,r,"n"]}function Ite(e,t,r){return r==null&&(r=Fe(12)),Ff(t,r),yf(e.v,r),r}function Dte(e){var t=ao(e),r=IM(e);return[t,r,"n"]}function Mte(e,t,r){return r==null&&(r=Fe(12)),Df(t,r),DM(e.v,r),r}function Fte(e){var t=Mf(e),r=IM(e);return[t,r,"n"]}function $te(e,t,r){return r==null&&(r=Fe(8)),Ff(t,r),DM(e.v,r),r}function Bte(e){var t=ao(e),r=l3(e);return[t,r,"is"]}function Ute(e){var t=ao(e),r=pi(e);return[t,r,"str"]}function zte(e,t,r){return r==null&&(r=Fe(12+4*e.v.length)),Df(t,r),La(e.v,r),r.length>r.l?r.slice(0,r.l):r}function qte(e){var t=Mf(e),r=pi(e);return[t,r,"str"]}function Hte(e,t,r){return r==null&&(r=Fe(8+4*e.v.length)),Ff(t,r),La(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Wte(e,t,r){var n=e.l+t,a=ao(e);a.r=r["!row"];var i=e.read_shift(1),s=[a,i,"b"];if(r.cellFormula){e.l+=2;var o=X2(e,n-e.l,r);s[3]=P0(o,null,a,r.supbooks,r)}else e.l=n;return s}function Vte(e,t,r){var n=e.l+t,a=ao(e);a.r=r["!row"];var i=e.read_shift(1),s=[a,i,"e"];if(r.cellFormula){e.l+=2;var o=X2(e,n-e.l,r);s[3]=P0(o,null,a,r.supbooks,r)}else e.l=n;return s}function Gte(e,t,r){var n=e.l+t,a=ao(e);a.r=r["!row"];var i=vp(e),s=[a,i,"n"];if(r.cellFormula){e.l+=2;var o=X2(e,n-e.l,r);s[3]=P0(o,null,a,r.supbooks,r)}else e.l=n;return s}function Kte(e,t,r){var n=e.l+t,a=ao(e);a.r=r["!row"];var i=pi(e),s=[a,i,"str"];if(r.cellFormula){e.l+=2;var o=X2(e,n-e.l,r);s[3]=P0(o,null,a,r.supbooks,r)}else e.l=n;return s}var Xte=$f,Yte=gp;function Jte(e,t){return t==null&&(t=Fe(4)),t.write_shift(4,e),t}function Qte(e,t){var r=e.l+t,n=$f(e),a=c3(e),i=pi(e),s=pi(e),o=pi(e);e.l=r;var c={rfx:n,relId:a,loc:i,display:o};return s&&(c.Tooltip=s),c}function Zte(e,t){var r=Fe(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));gp({s:Pa(e[0]),e:Pa(e[0])},r),u3("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return La(a||"",r),La(e[1].Tooltip||"",r),La("",r),r.slice(0,r.l)}function ere(){}function tre(e,t,r){var n=e.l+t,a=MM(e),i=e.read_shift(1),s=[a];if(s[2]=i,r.cellFormula){var o=qee(e,n-e.l,r);s[1]=o}else e.l=n;return s}function rre(e,t,r){var n=e.l+t,a=$f(e),i=[a];if(r.cellFormula){var s=Wee(e,n-e.l,r);i[1]=s,e.l=n}else e.l=n;return i}function nre(e,t,r){r==null&&(r=Fe(18));var n=Y2(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var bF=["left","right","top","bottom","header","footer"];function are(e){var t={};return bF.forEach(function(r){t[r]=vp(e)}),t}function ire(e,t){return t==null&&(t=Fe(6*8)),xF(e),bF.forEach(function(r){yf(e[r],t)}),t}function sre(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function ore(e,t,r){r==null&&(r=Fe(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function lre(e){var t=Fe(24);return t.write_shift(4,4),t.write_shift(4,1),gp(e,t),t}function cre(e,t){return t==null&&(t=Fe(16*4+2)),t.write_shift(2,e.password?tF(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function ure(){}function dre(){}function fre(e,t,r,n,a,i,s){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=rs(t),t.z=t.z||Bn[14],t.v=ts(Ri(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var c={r,c:n};switch(c.s=Ju(a.cellXfs,t,a),t.l&&i["!links"].push([zr(c),t.l]),t.c&&i["!comments"].push([zr(c),t.c]),t.t){case"s":case"str":return a.bookSST?(o=g3(a.Strings,t.v,a.revStrings),c.t="s",c.v=o,s?Ve(e,18,Ote(t,c)):Ve(e,7,Cte(t,c))):(c.t="str",s?Ve(e,17,Hte(t,c)):Ve(e,6,zte(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?s?Ve(e,13,$te(t,c)):Ve(e,2,Mte(t,c)):s?Ve(e,16,Ite(t,c)):Ve(e,5,Lte(t,c)),!0;case"b":return c.t="b",s?Ve(e,15,Ste(t,c)):Ve(e,4,wte(t,c)),!0;case"e":return c.t="e",s?Ve(e,14,Ete(t,c)):Ve(e,3,jte(t,c)),!0}return s?Ve(e,12,yte(t,c)):Ve(e,1,vte(t,c)),!0}function hre(e,t,r,n){var a=pn(t["!ref"]||"A1"),i,s="",o=[];Ve(e,145);var c=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){s=Qa(d),ute(e,t,a,d);var f=!1;if(d<=a.e.r)for(var p=a.s.c;p<=a.e.c;++p){d===a.s.r&&(o[p]=hi(p)),i=o[p]+s;var h=c?(t[d]||[])[p]:t[i];if(!h){f=!1;continue}f=fre(e,h,d,p,n,t,f)}}Ve(e,146)}function pre(e,t){!t||!t["!merges"]||(Ve(e,177,Jte(t["!merges"].length)),t["!merges"].forEach(function(r){Ve(e,176,Yte(r))}),Ve(e,178))}function mre(e,t){!t||!t["!cols"]||(Ve(e,390),t["!cols"].forEach(function(r,n){r&&Ve(e,60,nre(n,r))}),Ve(e,391))}function gre(e,t){!t||!t["!ref"]||(Ve(e,648),Ve(e,649,lre(pn(t["!ref"]))),Ve(e,650))}function vre(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=Dr(r,-1,n[1].Target.replace(/#.*$/,""),_r.HLINK);Ve(e,494,Zte(n,a))}}),delete t["!links"]}function xre(e,t,r,n){if(t["!comments"].length>0){var a=Dr(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",_r.VML);Ve(e,551,u3("rId"+a)),t["!legacy"]=a}}function yre(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],i=typeof a.ref=="string"?a.ref:sa(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=ks(i);o.s.r==o.e.r&&(o.e.r=ks(t["!ref"]).e.r,i=sa(o));for(var c=0;c<s.length;++c){var u=s[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+i;break}}c==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),Ve(e,161,gp(pn(i))),Ve(e,162)}}function bre(e,t,r){Ve(e,133),Ve(e,137,ore(t,r)),Ve(e,138),Ve(e,134)}function wre(e,t){t["!protect"]&&Ve(e,535,cre(t["!protect"]))}function _re(e,t,r,n){var a=Zi(),i=r.SheetNames[e],s=r.Sheets[i]||{},o=i;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var c=pn(s["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return s["!links"]=[],s["!comments"]=[],Ve(a,129),(r.vbaraw||s["!outline"])&&Ve(a,147,mte(o,s["!outline"])),Ve(a,148,fte(c)),bre(a,s,r.Workbook),mre(a,s),hre(a,s,e,t),wre(a,s),yre(a,s,r,e),pre(a,s),vre(a,s,n),s["!margins"]&&Ve(a,476,ire(s["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&gre(a,s),xre(a,s,e,n),Ve(a,130),a.end()}function Sre(e,t){e.l+=10;var r=pi(e);return{name:r}}var Nre=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function jre(e){return!e.Workbook||!e.Workbook.WBProps?"false":rJ(e.Workbook.WBProps.date1904)?"true":"false"}var Are="][*?/\\".split("");function wF(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Are.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Ere(e,t,r){e.forEach(function(n,a){wF(n);for(var i=0;i<a;++i)if(n==e[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var s=t&&t[a]&&t[a].CodeName||n;if(s.charCodeAt(0)==95&&s.length>22)throw new Error("Bad Code Name: Worksheet"+s)}})}function Tre(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];Ere(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)Yee(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}function _F(e){var t=[la];t[t.length]=rt("workbook",null,{xmlns:pp[0],"xmlns:r":Oa.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(Nre.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=rt("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],i=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!a[i]||!a[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var s={name:Br(e.SheetNames[i].slice(0,31))};if(s.sheetId=""+(i+1),s["r:id"]="rId"+(i+1),a[i])switch(a[i].Hidden){case 1:s.state="hidden";break;case 2:s.state="veryHidden";break}t[t.length]=rt("sheet",null,s)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(t[t.length]=rt("definedName",Br(o.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function Cre(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=$N(e),r.name=pi(e),r}function kre(e,t){return t||(t=Fe(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),u3(e.strRelID,t),La(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function Ore(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?pi(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Pre(e,t){t||(t=Fe(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),RM(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function Lre(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),i=jJ(e),s=Hee(e,0,r),o=c3(e);e.l=n;var c={Name:i,Ptg:s};return a<268435455&&(c.Sheet=a),o&&(c.Comment=o),c}function Rre(e,t){Ve(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Ve(e,156,kre(a))}Ve(e,144)}function Ire(e,t){t||(t=Fe(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return La("SheetJS",t),La(Wy.version,t),La(Wy.version,t),La("7262",t),t.length>t.l?t.slice(0,t.l):t}function Dre(e,t){t||(t=Fe(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function Mre(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&i==-1&&(i=n);i>a||(Ve(e,135),Ve(e,158,Dre(a)),Ve(e,136))}}function Fre(e,t){var r=Zi();return Ve(r,131),Ve(r,128,Ire()),Ve(r,153,Pre(e.Workbook&&e.Workbook.WBProps||null)),Mre(r,e),Rre(r,e),Ve(r,132),r.end()}function $re(e,t,r){return(t.slice(-4)===".bin"?Fre:_F)(e)}function Bre(e,t,r,n,a){return(t.slice(-4)===".bin"?_re:yF)(e,r,n,a)}function Ure(e,t,r){return(t.slice(-4)===".bin"?iZ:aF)(e,r)}function zre(e,t,r){return(t.slice(-4)===".bin"?PQ:eF)(e,r)}function qre(e,t,r){return(t.slice(-4)===".bin"?wZ:cF)(e)}function Hre(e){return(e.slice(-4)===".bin"?hZ:oF)()}function Wre(e,t){var r=[];return e.Props&&r.push(UJ(e.Props,t)),e.Custprops&&r.push(zJ(e.Props,e.Custprops)),r.join("")}function Vre(){return""}function Gre(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var i=[];i.push(rt("NumberFormat",null,{"ss:Format":Br(Bn[n.numFmtId])}));var s={"ss:ID":"s"+(21+a)};r.push(rt("Style",i.join(""),s))}),rt("Styles",r.join(""))}function SF(e){return rt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+p3(e.Ref,{r:0,c:0})})}function Kre(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(SF(a)))}return rt("Names",r.join(""))}function Xre(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,i=[],s=0;s<a.length;++s){var o=a[s];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||i.push(SF(o)))}return i.join("")}function Yre(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(rt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(rt("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(rt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(rt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(Ya("ProtectContents","True")),e["!protect"].objects&&a.push(Ya("ProtectObjects","True")),e["!protect"].scenarios&&a.push(Ya("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(Ya("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(Ya("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(s){e["!protect"][s[0]]&&a.push("<"+s[1]+"/>")})),a.length==0?"":rt("WorksheetOptions",a.join(""),{xmlns:bs.x})}function Jre(e){return e.map(function(t){var r=tJ(t.t||""),n=rt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return rt("Comment",n,{"ss:Author":t.a})}).join("")}function Qre(e,t,r,n,a,i,s){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+Br(p3(e.f,s))),e.F&&e.F.slice(0,t.length)==t){var c=Pa(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==s.r?"":"["+(c.r-s.r)+"]")+"C"+(c.c==s.c?"":"["+(c.c-s.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=Br(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=Br(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=s.c||u[d].s.r!=s.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",p="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",p=String(e.v);break;case"b":f="Boolean",p=e.v?"1":"0";break;case"e":f="Error",p=Fv[e.v];break;case"d":f="DateTime",p=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Bn[14]);break;case"s":f="String",p=eJ(e.v||"");break}var h=Ju(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+h),o["ss:Index"]=s.c+1;var v=e.v!=null?p:"",m=e.t=="z"?"":'<Data ss:Type="'+f+'">'+v+"</Data>";return(e.c||[]).length>0&&(m+=Jre(e.c)),rt("Cell",m,o)}function Zre(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=nF(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function ene(e,t,r,n){if(!e["!ref"])return"";var a=pn(e["!ref"]),i=e["!merges"]||[],s=0,o=[];e["!cols"]&&e["!cols"].forEach(function(x,y){f3(x);var g=!!x.width,b=Y2(y,x),S={"ss:Index":y+1};g&&(S["ss:Width"]=tb(b.width)),x.hidden&&(S["ss:Hidden"]="1"),o.push(rt("Column",null,S))});for(var c=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[Zre(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var p=!1;for(s=0;s!=i.length;++s)if(!(i[s].s.c>f)&&!(i[s].s.r>u)&&!(i[s].e.c<f)&&!(i[s].e.r<u)){(i[s].s.c!=f||i[s].s.r!=u)&&(p=!0);break}if(!p){var h={r:u,c:f},v=zr(h),m=c?(e[u]||[])[f]:e[v];d.push(Qre(m,v,e,t,r,n,h))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function tne(e,t,r){var n=[],a=r.SheetNames[e],i=r.Sheets[a],s=i?Xre(i,t,e,r):"";return s.length>0&&n.push("<Names>"+s+"</Names>"),s=i?ene(i,t,e,r):"",s.length>0&&n.push("<Table>"+s+"</Table>"),n.push(Yre(i,t,e,r)),n.join("")}function rne(e,t){t||(t={}),e.SSF||(e.SSF=rs(Bn)),e.SSF&&(W2(),H2(e.SSF),t.revssf=V2(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Ju(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Wre(e,t)),r.push(Vre()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(rt("Worksheet",tne(n,t,e),{"ss:Name":Br(e.SheetNames[n])}));return r[2]=Gre(e,t),r[3]=Kre(e),la+rt("Workbook",r.join(""),{xmlns:bs.ss,"xmlns:o":bs.o,"xmlns:x":bs.x,"xmlns:ss":bs.ss,"xmlns:dt":bs.dt,"xmlns:html":bs.html})}var p5={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function nne(e,t){var r=[],n=[],a=[],i=0,s,o=Nk(Mk,"n"),c=Nk(Fk,"n");if(e.Props)for(s=ei(e.Props),i=0;i<s.length;++i)(Object.prototype.hasOwnProperty.call(o,s[i])?r:Object.prototype.hasOwnProperty.call(c,s[i])?n:a).push([s[i],e.Props[s[i]]]);if(e.Custprops)for(s=ei(e.Custprops),i=0;i<s.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},s[i])||(Object.prototype.hasOwnProperty.call(o,s[i])?r:Object.prototype.hasOwnProperty.call(c,s[i])?n:a).push([s[i],e.Custprops[s[i]]]);var u=[];for(i=0;i<a.length;++i)GM.indexOf(a[i][0])>-1||HM.indexOf(a[i][0])>-1||a[i][1]!=null&&u.push(a[i]);n.length&&Wr.utils.cfb_add(t,"/SummaryInformation",qk(n,p5.SI,c,Fk)),(r.length||u.length)&&Wr.utils.cfb_add(t,"/DocumentSummaryInformation",qk(r,p5.DSI,o,Mk,u.length?u:null,p5.UDI))}function ane(e,t){var r=t||{},n=Wr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Wr.utils.cfb_add(n,a,NF(e,r)),r.biff==8&&(e.Props||e.Custprops)&&nne(e,n),r.biff==8&&e.vbaraw&&_Z(n,Wr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var ine={0:{f:lte},1:{f:gte},2:{f:Dte},3:{f:Nte},4:{f:bte},5:{f:Pte},6:{f:Ute},7:{f:Tte},8:{f:Kte},9:{f:Gte},10:{f:Wte},11:{f:Vte},12:{f:xte},13:{f:Fte},14:{f:Ate},15:{f:_te},16:{f:Rte},17:{f:qte},18:{f:kte},19:{f:l3},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Lre},40:{},42:{},43:{f:UQ},44:{f:$Q},45:{f:HQ},46:{f:VQ},47:{f:WQ},48:{},49:{f:xJ},50:{},51:{f:lZ},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:yQ},62:{f:Bte},63:{f:pZ},64:{f:ure},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ml,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:sre},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:pte},148:{f:dte,p:16},151:{f:ere},152:{},153:{f:Ore},154:{},155:{},156:{f:Cre},157:{},158:{},159:{T:1,f:CQ},160:{T:-1},161:{T:1,f:$f},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Xte},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:sZ},336:{T:-1},337:{f:dZ,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:$N},357:{},358:{},359:{},360:{T:1},361:{},362:{f:hQ},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:tre},427:{f:rre},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:are},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:hte},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Qte},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:$N},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:yZ},633:{T:1},634:{T:-1},635:{T:1,f:vZ},636:{T:-1},637:{f:_J},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Sre},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:dre},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function at(e,t,r,n){var a=t;if(!isNaN(a)){var i=n||(r||[]).length||0,s=e.next(4);s.write_shift(2,a),s.write_shift(2,i),i>0&&i3(r)&&e.push(r)}}function sne(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return at(e,t,r,a);var i=t;if(!isNaN(i)){for(var s=r.parts||[],o=0,c=0,u=0;u+(s[o]||8224)<=8224;)u+=s[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,i),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(s[o]||8224)<=8224;)u+=s[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function Bv(e,t,r){return e||(e=Fe(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function one(e,t,r,n){var a=Fe(9);return Bv(a,e,t),XM(r,n||"b",a),a}function lne(e,t,r){var n=Fe(8+2*r.length);return Bv(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function cne(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?ts(Ri(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?at(e,2,SQ(r,n,a)):at(e,3,_Q(r,n,a));return;case"b":case"e":at(e,5,one(r,n,t.v,t.t));return;case"s":case"str":at(e,4,lne(r,n,(t.v||"").slice(0,255)));return}at(e,1,Bv(null,r,n))}function une(e,t,r,n){var a=Array.isArray(t),i=pn(t["!ref"]||"A1"),s,o="",c=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),s=sa(i)}for(var u=i.s.r;u<=i.e.r;++u){o=Qa(u);for(var d=i.s.c;d<=i.e.c;++d){u===i.s.r&&(c[d]=hi(d)),s=c[d]+o;var f=a?(t[u]||[])[d]:t[s];f&&cne(e,f,u,d)}}}function dne(e,t){for(var r=t||{},n=Zi(),a=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(a=i);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return at(n,r.biff==4?1033:r.biff==3?521:9,d3(e,16,r)),une(n,e.Sheets[e.SheetNames[a]],a,r),at(n,10),n.end()}function fne(e,t,r){at(e,49,iQ({sz:12,name:"Arial"},r))}function hne(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&at(e,1054,lQ(a,t[a],r))})}function pne(e,t){var r=Fe(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),at(e,2151,r),r=Fe(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),QM(pn(t["!ref"]||"A1"),r),r.write_shift(4,4),at(e,2152,r)}function mne(e,t){for(var r=0;r<16;++r)at(e,224,Wk({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){at(e,224,Wk(n,0,t))})}function gne(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];at(e,440,gQ(n)),n[1].Tooltip&&at(e,2048,vQ(n))}delete t["!links"]}function vne(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&at(e,125,bQ(Y2(a,n),a))})}}function xne(e,t,r,n,a){var i=16+Ju(a.cellXfs,t,a);if(t.v==null&&!t.bf){at(e,513,bf(r,n,i));return}if(t.bf)at(e,6,zee(t,r,n,a,i));else switch(t.t){case"d":case"n":var s=t.t=="d"?ts(Ri(t.v)):t.v;at(e,515,fQ(r,n,s,i));break;case"b":case"e":at(e,517,dQ(r,n,t.v,i,a,t.t));break;case"s":case"str":if(a.bookSST){var o=g3(a.Strings,t.v,a.revStrings);at(e,253,sQ(r,n,o,i))}else at(e,516,oQ(r,n,(t.v||"").slice(0,255),i,a));break;default:at(e,513,bf(r,n,i))}}function yne(e,t,r){var n=Zi(),a=r.SheetNames[e],i=r.Sheets[a]||{},s=(r||{}).Workbook||{},o=(s.Sheets||[])[e]||{},c=Array.isArray(i),u=t.biff==8,d,f="",p=[],h=pn(i["!ref"]||"A1"),v=u?65536:16384;if(h.e.c>255||h.e.r>=v){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");h.e.c=Math.min(h.e.c,255),h.e.r=Math.min(h.e.c,v-1)}at(n,2057,d3(r,16,t)),at(n,13,Ws(1)),at(n,12,Ws(100)),at(n,15,Ei(!0)),at(n,17,Ei(!1)),at(n,16,yf(.001)),at(n,95,Ei(!0)),at(n,42,Ei(!1)),at(n,43,Ei(!1)),at(n,130,Ws(1)),at(n,128,uQ()),at(n,131,Ei(!1)),at(n,132,Ei(!1)),u&&vne(n,i["!cols"]),at(n,512,cQ(h,t)),u&&(i["!links"]=[]);for(var m=h.s.r;m<=h.e.r;++m){f=Qa(m);for(var x=h.s.c;x<=h.e.c;++x){m===h.s.r&&(p[x]=hi(x)),d=p[x]+f;var y=c?(i[m]||[])[x]:i[d];y&&(xne(n,y,m,x,t),u&&y.l&&i["!links"].push([d,y.l]))}}var g=o.CodeName||o.name||a;return u&&at(n,574,aQ((s.Views||[])[0])),u&&(i["!merges"]||[]).length&&at(n,229,mQ(i["!merges"])),u&&gne(n,i),at(n,442,JM(g)),u&&pne(n,i),at(n,10),n.end()}function bne(e,t,r){var n=Zi(),a=(e||{}).Workbook||{},i=a.Sheets||[],s=a.WBProps||{},o=r.biff==8,c=r.biff==5;if(at(n,2057,d3(e,5,r)),r.bookType=="xla"&&at(n,135),at(n,225,o?Ws(1200):null),at(n,193,WJ(2)),c&&at(n,191),c&&at(n,192),at(n,226),at(n,92,eQ("SheetJS",r)),at(n,66,Ws(o?1200:1252)),o&&at(n,353,Ws(0)),o&&at(n,448),at(n,317,wQ(e.SheetNames.length)),o&&e.vbaraw&&at(n,211),o&&e.vbaraw){var u=s.CodeName||"ThisWorkbook";at(n,442,JM(u))}at(n,156,Ws(17)),at(n,25,Ei(!1)),at(n,18,Ei(!1)),at(n,19,Ws(0)),o&&at(n,431,Ei(!1)),o&&at(n,444,Ws(0)),at(n,61,nQ()),at(n,64,Ei(!1)),at(n,141,Ws(0)),at(n,34,Ei(jre(e)=="true")),at(n,14,Ei(!0)),o&&at(n,439,Ei(!1)),at(n,218,Ws(0)),fne(n,e,r),hne(n,e.SSF,r),mne(n,r),o&&at(n,352,Ei(!1));var d=n.end(),f=Zi();o&&at(f,140,xQ()),o&&r.Strings&&sne(f,252,rQ(r.Strings)),at(f,10);var p=f.end(),h=Zi(),v=0,m=0;for(m=0;m<e.SheetNames.length;++m)v+=(o?12:11)+(o?2:1)*e.SheetNames[m].length;var x=d.length+v+p.length;for(m=0;m<e.SheetNames.length;++m){var y=i[m]||{};at(h,133,tQ({pos:x,hs:y.Hidden||0,dt:0,name:e.SheetNames[m]},r)),x+=t[m].length}var g=h.end();if(v!=g.length)throw new Error("BS8 "+v+" != "+g.length);var b=[];return d.length&&b.push(d),g.length&&b.push(g),p.length&&b.push(p),Xa(b)}function wne(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=rs(Bn)),e&&e.SSF&&(W2(),H2(e.SSF),r.revssf=V2(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,v3(r),r.cellXfs=[],Ju(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=yne(a,r,e);return n.unshift(bne(e,n,r)),Xa(n)}function NF(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=ks(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return wne(e,t);case 4:case 3:case 2:return dne(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function _ne(e,t,r,n){for(var a=e["!merges"]||[],i=[],s=t.s.c;s<=t.e.c;++s){for(var o=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>s)&&!(a[u].e.r<r||a[u].e.c<s)){if(a[u].s.r<r||a[u].s.c<s){o=-1;break}o=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(o<0)){var d=zr({r,c:s}),f=n.dense?(e[r]||[])[s]:e[d],p=f&&f.v!=null&&(f.h||ZY(f.w||(vc(f),f.w)||""))||"",h={};o>1&&(h.rowspan=o),c>1&&(h.colspan=c),n.editable?p='<span contenteditable="true">'+p+"</span>":f&&(h["data-t"]=f&&f.t||"z",f.v!=null&&(h["data-v"]=f.v),f.z!=null&&(h["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+f.l.Target+'">'+p+"</a>")),h.id=(n.id||"sjs")+"-"+d,i.push(rt("td",p,h))}}var v="<tr>";return v+i.join("")+"</tr>"}var Sne='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Nne="</body></html>";function jne(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function jF(e,t){var r=t||{},n=r.header!=null?r.header:Sne,a=r.footer!=null?r.footer:Nne,i=[n],s=ks(e["!ref"]);r.dense=Array.isArray(e),i.push(jne(e,s,r));for(var o=s.s.r;o<=s.e.r;++o)i.push(_ne(e,s,o,r));return i.push("</table>"+a),i.join("")}function AF(e,t,r){var n=r||{},a=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var s=typeof n.origin=="string"?Pa(n.origin):n.origin;a=s.r,i=s.c}var o=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:a,c:i}};if(e["!ref"]){var d=ks(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],p=0,h=e["!rows"]||(e["!rows"]=[]),v=0,m=0,x=0,y=0,g=0,b=0;for(e["!cols"]||(e["!cols"]=[]);v<o.length&&m<c;++v){var S=o[v];if(Qk(S)){if(n.display)continue;h[m]={hidden:!0}}var _=S.children;for(x=y=0;x<_.length;++x){var j=_[x];if(!(n.display&&Qk(j))){var A=j.hasAttribute("data-v")?j.getAttribute("data-v"):j.hasAttribute("v")?j.getAttribute("v"):nJ(j.innerHTML),E=j.getAttribute("data-z")||j.getAttribute("z");for(p=0;p<f.length;++p){var T=f[p];T.s.c==y+i&&T.s.r<m+a&&m+a<=T.e.r&&(y=T.e.c+1-i,p=-1)}b=+j.getAttribute("colspan")||1,((g=+j.getAttribute("rowspan")||1)>1||b>1)&&f.push({s:{r:m+a,c:y+i},e:{r:m+a+(g||1)-1,c:y+i+(b||1)-1}});var L={t:"s",v:A},k=j.getAttribute("data-t")||j.getAttribute("t")||"";A!=null&&(A.length==0?L.t=k||"z":n.raw||A.trim().length==0||k=="s"||(A==="TRUE"?L={t:"b",v:!0}:A==="FALSE"?L={t:"b",v:!1}:isNaN(ic(A))?isNaN(Pg(A).getDate())||(L={t:"d",v:Ri(A)},n.cellDates||(L={t:"n",v:ts(L.v)}),L.z=n.dateNF||Bn[14]):L={t:"n",v:ic(A)})),L.z===void 0&&E!=null&&(L.z=E);var R="",D=j.getElementsByTagName("A");if(D&&D.length)for(var q=0;q<D.length&&!(D[q].hasAttribute("href")&&(R=D[q].getAttribute("href"),R.charAt(0)!="#"));++q);R&&R.charAt(0)!="#"&&(L.l={Target:R}),n.dense?(e[m+a]||(e[m+a]=[]),e[m+a][y+i]=L):e[zr({c:y+i,r:m+a})]=L,u.e.c<y+i&&(u.e.c=y+i),y+=b}}++m}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,m-1+a),e["!ref"]=sa(u),m>=c&&(e["!fullref"]=sa((u.e.r=o.length-v+m-1+a,u))),e}function EF(e,t){var r=t||{},n=r.dense?[]:{};return AF(n,e,t)}function Ane(e,t){return If(EF(e,t),t)}function Qk(e){var t="",r=Ene(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Ene(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var Tne=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Rg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return la+t}}(),Zk=function(){var e=function(i){return Br(i).replace(/  +/g,function(s){return'<text:s text:c="'+s.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,s,o){var c=[];c.push('      <table:table table:name="'+Br(s.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=ks(i["!ref"]||"A1"),p=i["!merges"]||[],h=0,v=Array.isArray(i);if(i["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(i["!cols"][d]?' table:style-name="co'+i["!cols"][d].ods+'"':"")+`></table:table-column>
`);var m="",x=i["!rows"]||[];for(u=0;u<f.s.r;++u)m=x[u]?' table:style-name="ro'+x[u].ods+'"':"",c.push("        <table:table-row"+m+`></table:table-row>
`);for(;u<=f.e.r;++u){for(m=x[u]?' table:style-name="ro'+x[u].ods+'"':"",c.push("        <table:table-row"+m+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var y=!1,g={},b="";for(h=0;h!=p.length;++h)if(!(p[h].s.c>d)&&!(p[h].s.r>u)&&!(p[h].e.c<d)&&!(p[h].e.r<u)){(p[h].s.c!=d||p[h].s.r!=u)&&(y=!0),g["table:number-columns-spanned"]=p[h].e.c-p[h].s.c+1,g["table:number-rows-spanned"]=p[h].e.r-p[h].s.r+1;break}if(y){c.push(r);continue}var S=zr({r:u,c:d}),_=v?(i[u]||[])[d]:i[S];if(_&&_.f&&(g["table:formula"]=Br(Kee(_.f)),_.F&&_.F.slice(0,S.length)==S)){var j=ks(_.F);g["table:number-matrix-columns-spanned"]=j.e.c-j.s.c+1,g["table:number-matrix-rows-spanned"]=j.e.r-j.s.r+1}if(!_){c.push(t);continue}switch(_.t){case"b":b=_.v?"TRUE":"FALSE",g["office:value-type"]="boolean",g["office:boolean-value"]=_.v?"true":"false";break;case"n":b=_.w||String(_.v||0),g["office:value-type"]="float",g["office:value"]=_.v||0;break;case"s":case"str":b=_.v==null?"":_.v,g["office:value-type"]="string";break;case"d":b=_.w||Ri(_.v).toISOString(),g["office:value-type"]="date",g["office:date-value"]=Ri(_.v).toISOString(),g["table:style-name"]="ce1";break;default:c.push(t);continue}var A=e(b);if(_.l&&_.l.Target){var E=_.l.Target;E=E.charAt(0)=="#"?"#"+Xee(E.slice(1)):E,E.charAt(0)!="#"&&!E.match(/^\w+:/)&&(E="../"+E),A=rt("text:a",A,{"xlink:href":E.replace(/&/g,"&amp;")})}c.push("          "+rt("table:table-cell",rt("text:p",A,{}),g)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(i,s){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var o=0;s.SheetNames.map(function(u){return s.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;f3(f),f.ods=o;var p=u["!cols"][d].wpx+"px";i.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),i.push(`  </style:style>
`),++o}}});var c=0;s.SheetNames.map(function(u){return s.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(s,o){var c=[la],u=Rg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Rg({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(zM().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,s),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=s.SheetNames.length;++f)c.push(n(s.Sheets[s.SheetNames[f]],s,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function TF(e,t){if(t.bookType=="fods")return Zk(e,t);var r=t3(),n="",a=[],i=[];return n="mimetype",ir(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",ir(r,n,Zk(e,t)),a.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",ir(r,n,Tne(e,t)),a.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",ir(r,n,la+zM()),a.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",ir(r,n,BJ(i)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",ir(r,n,FJ(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function ab(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Cne(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Po(Lg(e))}function kne(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Wu(e){var t=e.reduce(function(a,i){return a+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function One(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var i=0;a>=1;++i,a/=256)e[t+i]=a&255;e[t+15]|=r>=0?0:128}function Ig(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function Ir(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Yh(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function va(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=Ig(e,r),i=a&7;a=Math.floor(a/8);var s=0,o;if(a==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);o=e.slice(c,r[0])}break;case 5:s=4,o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 1:s=8,o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 2:s=Ig(e,r),o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(a," at offset ").concat(n))}var u={data:o,type:i};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function Ha(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(Ir(n*8+a.type)),a.type==2&&t.push(Ir(a.data.length)),t.push(a.data))})}),Wu(t)}function xo(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=Ig(e,n),i=va(e.slice(n[0],n[0]+a));n[0]+=a;var s={id:Yh(i[1][0].data),messages:[]};i[2].forEach(function(o){var c=va(o.data),u=Yh(c[3][0].data);s.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=i[3])!=null&&t[0]&&(s.merge=Yh(i[3][0].data)>>>0>0),r.push(s)}return r}function ah(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:Ir(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Ir(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(s){a.push(s.data),s.meta[3]=[{type:0,data:Ir(s.data.length)}],n[2].push({data:Ha(s.meta),type:2})});var i=Ha(n);t.push(Ir(i.length)),t.push(i),a.forEach(function(s){return t.push(s)})}),Wu(t)}function Pne(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=Ig(t,r),a=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var s=t[r[0]++]>>2;if(s<60)++s;else{var o=s-59;s=t[r[0]],o>1&&(s|=t[r[0]+1]<<8),o>2&&(s|=t[r[0]+2]<<16),o>3&&(s|=t[r[0]+3]<<24),s>>>=0,s++,r[0]+=o}a.push(t.slice(r[0],r[0]+s)),r[0]+=s;continue}else{var c=0,u=0;if(i==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Wu(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=Wu(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function yo(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Pne(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Wu(t)}function ih(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var i=Ir(n),s=i.length;t.push(i),n<=60?(s++,t.push(new Uint8Array([n-1<<2]))):n<=256?(s+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(s+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(s+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(s+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),s+=n,a[0]=0,a[1]=s&255,a[2]=s>>8&255,a[3]=s>>16&255,r+=n}return Wu(t)}function m5(e,t){var r=new Uint8Array(32),n=ab(r),a=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,One(r,a,e.v),i|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),i|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,i,!0),r.slice(0,a)}function g5(e,t){var r=new Uint8Array(32),n=ab(r),a=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),i|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),i|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,i,!0),r.slice(0,a)}function Zc(e){var t=va(e);return Ig(t[1][0].data)}function Lne(e,t,r){var n,a,i,s;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((s=(i=e[8])==null?void 0:i[0])==null?void 0:s.data)&&Yh(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=ab(e[7][0].data),d=0,f=[],p=ab(e[4][0].data),h=0,v=[],m=0;m<t.length;++m){if(t[m]==null){u.setUint16(m*2,65535,!0),p.setUint16(m*2,65535);continue}u.setUint16(m*2,d,!0),p.setUint16(m*2,h,!0);var x,y;switch(typeof t[m]){case"string":x=m5({t:"s",v:t[m]},r),y=g5({t:"s",v:t[m]},r);break;case"number":x=m5({t:"n",v:t[m]},r),y=g5({t:"n",v:t[m]},r);break;case"boolean":x=m5({t:"b",v:t[m]},r),y=g5({t:"b",v:t[m]},r);break;default:throw new Error("Unsupported value "+t[m])}f.push(x),d+=x.length,v.push(y),h+=y.length,++c}for(e[2][0].data=Ir(c);m<e[7][0].data.length/2;++m)u.setUint16(m*2,65535,!0),p.setUint16(m*2,65535,!0);return e[6][0].data=Wu(f),e[3][0].data=Wu(v),c}function Rne(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=ks(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(sa(n)));var i=ib(r,{range:n,header:1}),s=["~Sh33tJ5~"];i.forEach(function(F){return F.forEach(function(B){typeof B=="string"&&s.push(B)})});var o={},c=[],u=Wr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(F,B){return[F,u.FullPaths[B]]}).forEach(function(F){var B=F[0],U=F[1];if(B.type==2&&B.name.match(/\.iwa/)){var Y=B.content,oe=yo(Y),ee=xo(oe);ee.forEach(function(te){c.push(te.id),o[te.id]={deps:[],location:U,type:Yh(te.messages[0].meta[1][0].data)}})}}),c.sort(function(F,B){return F-B});var d=c.filter(function(F){return F>1}).map(function(F){return[F,Ir(F)]});u.FileIndex.map(function(F,B){return[F,u.FullPaths[B]]}).forEach(function(F){var B=F[0];if(F[1],!!B.name.match(/\.iwa/)){var U=xo(yo(B.content));U.forEach(function(Y){Y.messages.forEach(function(oe){d.forEach(function(ee){Y.messages.some(function(te){return Yh(te.meta[1][0].data)!=11006&&kne(te.data,ee[1])})&&o[ee[0]].deps.push(Y.id)})})})}});for(var f=Wr.find(u,o[1].location),p=xo(yo(f.content)),h,v=0;v<p.length;++v){var m=p[v];m.id==1&&(h=m)}var x=Zc(va(h.messages[0].data)[1][0].data);for(f=Wr.find(u,o[x].location),p=xo(yo(f.content)),v=0;v<p.length;++v)m=p[v],m.id==x&&(h=m);for(x=Zc(va(h.messages[0].data)[2][0].data),f=Wr.find(u,o[x].location),p=xo(yo(f.content)),v=0;v<p.length;++v)m=p[v],m.id==x&&(h=m);for(x=Zc(va(h.messages[0].data)[2][0].data),f=Wr.find(u,o[x].location),p=xo(yo(f.content)),v=0;v<p.length;++v)m=p[v],m.id==x&&(h=m);var y=va(h.messages[0].data);{y[6][0].data=Ir(n.e.r+1),y[7][0].data=Ir(n.e.c+1);var g=Zc(y[46][0].data),b=Wr.find(u,o[g].location),S=xo(yo(b.content));{for(var _=0;_<S.length&&S[_].id!=g;++_);if(S[_].id!=g)throw"Bad ColumnRowUIDMapArchive";var j=va(S[_].messages[0].data);j[1]=[],j[2]=[],j[3]=[];for(var A=0;A<=n.e.c;++A){var E=[];E[1]=E[2]=[{type:0,data:Ir(A+420690)}],j[1].push({type:2,data:Ha(E)}),j[2].push({type:0,data:Ir(A)}),j[3].push({type:0,data:Ir(A)})}j[4]=[],j[5]=[],j[6]=[];for(var T=0;T<=n.e.r;++T)E=[],E[1]=E[2]=[{type:0,data:Ir(T+726270)}],j[4].push({type:2,data:Ha(E)}),j[5].push({type:0,data:Ir(T)}),j[6].push({type:0,data:Ir(T)});S[_].messages[0].data=Ha(j)}b.content=ih(ah(S)),b.size=b.content.length,delete y[46];var L=va(y[4][0].data);{L[7][0].data=Ir(n.e.r+1);var k=va(L[1][0].data),R=Zc(k[2][0].data);b=Wr.find(u,o[R].location),S=xo(yo(b.content));{if(S[0].id!=R)throw"Bad HeaderStorageBucket";var D=va(S[0].messages[0].data);for(T=0;T<i.length;++T){var q=va(D[2][0].data);q[1][0].data=Ir(T),q[4][0].data=Ir(i[T].length),D[2][T]={type:D[2][0].type,data:Ha(q)}}S[0].messages[0].data=Ha(D)}b.content=ih(ah(S)),b.size=b.content.length;var X=Zc(L[2][0].data);b=Wr.find(u,o[X].location),S=xo(yo(b.content));{if(S[0].id!=X)throw"Bad HeaderStorageBucket";for(D=va(S[0].messages[0].data),A=0;A<=n.e.c;++A)q=va(D[2][0].data),q[1][0].data=Ir(A),q[4][0].data=Ir(n.e.r+1),D[2][A]={type:D[2][0].type,data:Ha(q)};S[0].messages[0].data=Ha(D)}b.content=ih(ah(S)),b.size=b.content.length;var se=Zc(L[4][0].data);(function(){for(var F=Wr.find(u,o[se].location),B=xo(yo(F.content)),U,Y=0;Y<B.length;++Y){var oe=B[Y];oe.id==se&&(U=oe)}var ee=va(U.messages[0].data);{ee[3]=[];var te=[];s.forEach(function(ve,Me){te[1]=[{type:0,data:Ir(Me)}],te[2]=[{type:0,data:Ir(1)}],te[3]=[{type:2,data:Cne(ve)}],ee[3].push({type:2,data:Ha(te)})})}U.messages[0].data=Ha(ee);var le=ah(B),Ne=ih(le);F.content=Ne,F.size=F.content.length})();var Z=va(L[3][0].data);{var K=Z[1][0];delete Z[2];var ie=va(K.data);{var pe=Zc(ie[2][0].data);(function(){for(var F=Wr.find(u,o[pe].location),B=xo(yo(F.content)),U,Y=0;Y<B.length;++Y){var oe=B[Y];oe.id==pe&&(U=oe)}var ee=va(U.messages[0].data);{delete ee[6],delete Z[7];var te=new Uint8Array(ee[5][0].data);ee[5]=[];for(var le=0,Ne=0;Ne<=n.e.r;++Ne){var ve=va(te);le+=Lne(ve,i[Ne],s),ve[1][0].data=Ir(Ne),ee[5].push({data:Ha(ve),type:2})}ee[1]=[{type:0,data:Ir(n.e.c+1)}],ee[2]=[{type:0,data:Ir(n.e.r+1)}],ee[3]=[{type:0,data:Ir(le)}],ee[4]=[{type:0,data:Ir(n.e.r+1)}]}U.messages[0].data=Ha(ee);var Me=ah(B),Ie=ih(Me);F.content=Ie,F.size=F.content.length})()}K.data=Ha(ie)}L[3][0].data=Ha(Z)}y[4][0].data=Ha(L)}h.messages[0].data=Ha(y);var me=ah(p),O=ih(me);return f.content=O,f.size=f.content.length,u}function Ine(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function v3(e){Ine([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function Dne(e,t){return t.bookType=="ods"?TF(e,t):t.bookType=="numbers"?Rne(e,t):t.bookType=="xlsb"?Mne(e,t):Fne(e,t)}function Mne(e,t){Lh=1024,e&&!e.SSF&&(e.SSF=rs(Bn)),e&&e.SSF&&(W2(),H2(e.SSF),t.revssf=V2(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,eg?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=uF.indexOf(t.bookType)>-1,a=$M();v3(t=t||{});var i=t3(),s="",o=0;if(t.cellXfs=[],Ju(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),s="docProps/core.xml",ir(i,s,qM(e.Props,t)),a.coreprops.push(s),Dr(t.rels,2,s,_r.CORE_PROPS),s="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,ir(i,s,WM(e.Props)),a.extprops.push(s),Dr(t.rels,3,s,_r.EXT_PROPS),e.Custprops!==e.Props&&ei(e.Custprops||{}).length>0&&(s="docProps/custom.xml",ir(i,s,VM(e.Custprops)),a.custprops.push(s),Dr(t.rels,4,s,_r.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],p=(f||{})["!type"]||"sheet";switch(p){case"chart":default:s="xl/worksheets/sheet"+o+"."+r,ir(i,s,Bre(o-1,s,t,e,d)),a.sheets.push(s),Dr(t.wbrels,-1,"worksheets/sheet"+o+"."+r,_r.WS[0])}if(f){var h=f["!comments"],v=!1,m="";h&&h.length>0&&(m="xl/comments"+o+"."+r,ir(i,m,qre(h,m)),a.comments.push(m),Dr(d,-1,"../comments"+o+"."+r,_r.CMNT),v=!0),f["!legacy"]&&v&&ir(i,"xl/drawings/vmlDrawing"+o+".vml",lF(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&ir(i,UM(s),Kh(d))}return t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+r,ir(i,s,zre(t.Strings,s,t)),a.strs.push(s),Dr(t.wbrels,-1,"sharedStrings."+r,_r.SST)),s="xl/workbook."+r,ir(i,s,$re(e,s)),a.workbooks.push(s),Dr(t.rels,1,s,_r.WB),s="xl/theme/theme1.xml",ir(i,s,sF(e.Themes,t)),a.themes.push(s),Dr(t.wbrels,-1,"theme/theme1.xml",_r.THEME),s="xl/styles."+r,ir(i,s,Ure(e,s,t)),a.styles.push(s),Dr(t.wbrels,-1,"styles."+r,_r.STY),e.vbaraw&&n&&(s="xl/vbaProject.bin",ir(i,s,e.vbaraw),a.vba.push(s),Dr(t.wbrels,-1,"vbaProject.bin",_r.VBA)),s="xl/metadata."+r,ir(i,s,Hre(s)),a.metadata.push(s),Dr(t.wbrels,-1,"metadata."+r,_r.XLMETA),ir(i,"[Content_Types].xml",BM(a,t)),ir(i,"_rels/.rels",Kh(t.rels)),ir(i,"xl/_rels/workbook."+r+".rels",Kh(t.wbrels)),delete t.revssf,delete t.ssf,i}function Fne(e,t){Lh=1024,e&&!e.SSF&&(e.SSF=rs(Bn)),e&&e.SSF&&(W2(),H2(e.SSF),t.revssf=V2(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,eg?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=uF.indexOf(t.bookType)>-1,a=$M();v3(t=t||{});var i=t3(),s="",o=0;if(t.cellXfs=[],Ju(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),s="docProps/core.xml",ir(i,s,qM(e.Props,t)),a.coreprops.push(s),Dr(t.rels,2,s,_r.CORE_PROPS),s="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,ir(i,s,WM(e.Props)),a.extprops.push(s),Dr(t.rels,3,s,_r.EXT_PROPS),e.Custprops!==e.Props&&ei(e.Custprops||{}).length>0&&(s="docProps/custom.xml",ir(i,s,VM(e.Custprops)),a.custprops.push(s),Dr(t.rels,4,s,_r.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},p=e.Sheets[e.SheetNames[o-1]],h=(p||{})["!type"]||"sheet";switch(h){case"chart":default:s="xl/worksheets/sheet"+o+"."+r,ir(i,s,yF(o-1,t,e,f)),a.sheets.push(s),Dr(t.wbrels,-1,"worksheets/sheet"+o+"."+r,_r.WS[0])}if(p){var v=p["!comments"],m=!1,x="";if(v&&v.length>0){var y=!1;v.forEach(function(g){g[1].forEach(function(b){b.T==!0&&(y=!0)})}),y&&(x="xl/threadedComments/threadedComment"+o+"."+r,ir(i,x,mZ(v,d,t)),a.threadedcomments.push(x),Dr(f,-1,"../threadedComments/threadedComment"+o+"."+r,_r.TCMNT)),x="xl/comments"+o+"."+r,ir(i,x,cF(v)),a.comments.push(x),Dr(f,-1,"../comments"+o+"."+r,_r.CMNT),m=!0}p["!legacy"]&&m&&ir(i,"xl/drawings/vmlDrawing"+o+".vml",lF(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}f["!id"].rId1&&ir(i,UM(s),Kh(f))}return t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+r,ir(i,s,eF(t.Strings,t)),a.strs.push(s),Dr(t.wbrels,-1,"sharedStrings."+r,_r.SST)),s="xl/workbook."+r,ir(i,s,_F(e)),a.workbooks.push(s),Dr(t.rels,1,s,_r.WB),s="xl/theme/theme1.xml",ir(i,s,sF(e.Themes,t)),a.themes.push(s),Dr(t.wbrels,-1,"theme/theme1.xml",_r.THEME),s="xl/styles."+r,ir(i,s,aF(e,t)),a.styles.push(s),Dr(t.wbrels,-1,"styles."+r,_r.STY),e.vbaraw&&n&&(s="xl/vbaProject.bin",ir(i,s,e.vbaraw),a.vba.push(s),Dr(t.wbrels,-1,"vbaProject.bin",_r.VBA)),s="xl/metadata."+r,ir(i,s,oF()),a.metadata.push(s),Dr(t.wbrels,-1,"metadata."+r,_r.XLMETA),d.length>1&&(s="xl/persons/person.xml",ir(i,s,gZ(d)),a.people.push(s),Dr(t.wbrels,-1,"persons/person.xml",_r.PEOPLE)),ir(i,"[Content_Types].xml",BM(a,t)),ir(i,"_rels/.rels",Kh(t.rels)),ir(i,"xl/_rels/workbook."+r+".rels",Kh(t.wbrels)),delete t.revssf,delete t.ssf,i}function $ne(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=gc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function CF(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Dv(t.file,Wr.write(e,{type:Nr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Wr.write(e,t)}function Bne(e,t){var r=rs(t||{}),n=Dne(e,r);return Une(n,r)}function Une(e,t){var r={},n=Nr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?Wr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(q2(a))}return t.password&&typeof encrypt_agile<"u"?CF(encrypt_agile(a,t.password),t):t.type==="file"?Dv(t.file,a):t.type=="string"?Ym(a):a}function zne(e,t){var r=t||{},n=ane(e,r);return CF(n,r)}function tl(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Og(Lg(n));case"binary":return Lg(n);case"string":return e;case"file":return Dv(t.file,n,"utf8");case"buffer":return Nr?Cc(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):tl(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function qne(e,t){switch(t.type){case"base64":return Og(e);case"binary":return e;case"string":return e;case"file":return Dv(t.file,e,"binary");case"buffer":return Nr?Cc(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function hx(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?Og(r):t.type=="string"?Ym(r):r;case"file":return Dv(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function kF(e,t){vY(),Tre(e);var r=rs(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=kF(e,r);return r.type="array",q2(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return tl(rne(e,r),r);case"slk":case"sylk":return tl(jQ.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return tl(jF(e.Sheets[e.SheetNames[a]],r),r);case"txt":return qne(PF(e.Sheets[e.SheetNames[a]],r),r);case"csv":return tl(x3(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return tl(AQ.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return hx(NQ.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return tl(EQ.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return tl(RQ.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return tl(ZM.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return tl(TF(e,r),r);case"wk1":return hx(Vk.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return hx(Vk.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),hx(NF(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),zne(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Bne(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function Hne(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function OF(e,t,r){var n={};return n.type="file",n.file=t,Hne(n),kF(e,n)}function Wne(e,t,r,n,a,i,s,o){var c=Qa(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,p=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!s||e[r])for(var h=t.s.c;h<=t.e.c;++h){var v=s?e[r][h]:e[n[h]+c];if(v===void 0||v.t===void 0){if(u===void 0)continue;i[h]!=null&&(p[i[h]]=u);continue}var m=v.v;switch(v.t){case"z":if(m==null)break;continue;case"e":m=m==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(i[h]!=null){if(m==null)if(v.t=="e"&&m===null)p[i[h]]=null;else if(u!==void 0)p[i[h]]=u;else if(d&&m===null)p[i[h]]=null;else continue;else p[i[h]]=d&&(v.t!=="n"||v.t==="n"&&o.rawNumbers!==!1)?m:vc(v,m,o);m!=null&&(f=!1)}}return{row:p,isempty:f}}function ib(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,i=[],s=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=pn(d);break;case"number":c=pn(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=Qa(c.s.r),p=[],h=[],v=0,m=0,x=Array.isArray(e),y=c.s.r,g=0,b={};x&&!e[y]&&(e[y]=[]);var S=u.skipHidden&&e["!cols"]||[],_=u.skipHidden&&e["!rows"]||[];for(g=c.s.c;g<=c.e.c;++g)if(!(S[g]||{}).hidden)switch(p[g]=hi(g),r=x?e[y][g]:e[p[g]+f],n){case 1:i[g]=g-c.s.c;break;case 2:i[g]=p[g];break;case 3:i[g]=u.header[g-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=s=vc(r,null,u),m=b[s]||0,!m)b[s]=1;else{do o=s+"_"+m++;while(b[o]);b[s]=m,b[o]=1}i[g]=o}for(y=c.s.r+a;y<=c.e.r;++y)if(!(_[y]||{}).hidden){var j=Wne(e,c,y,p,n,i,x,u);(j.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(h[v++]=j.row)}return h.length=v,h}var eO=/"/g;function Vne(e,t,r,n,a,i,s,o){for(var c=!0,u=[],d="",f=Qa(r),p=t.s.c;p<=t.e.c;++p)if(n[p]){var h=o.dense?(e[r]||[])[p]:e[n[p]+f];if(h==null)d="";else if(h.v!=null){c=!1,d=""+(o.rawNumbers&&h.t=="n"?h.v:vc(h,null,o));for(var v=0,m=0;v!==d.length;++v)if((m=d.charCodeAt(v))===a||m===i||m===34||o.forceQuotes){d='"'+d.replace(eO,'""')+'"';break}d=="ID"&&(d='"ID"')}else h.f!=null&&!h.F?(c=!1,d="="+h.f,d.indexOf(",")>=0&&(d='"'+d.replace(eO,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&c?null:u.join(s)}function x3(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=pn(e["!ref"]),i=n.FS!==void 0?n.FS:",",s=i.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var p=n.skipHidden&&e["!cols"]||[],h=n.skipHidden&&e["!rows"]||[],v=a.s.c;v<=a.e.c;++v)(p[v]||{}).hidden||(f[v]=hi(v));for(var m=0,x=a.s.r;x<=a.e.r;++x)(h[x]||{}).hidden||(d=Vne(e,a,x,f,s,c,i,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((m++?o:"")+d)));return delete n.dense,r.join("")}function PF(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=x3(e,t);return r}function Gne(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=pn(e["!ref"]),i="",s=[],o,c=[],u=Array.isArray(e);for(o=a.s.c;o<=a.e.c;++o)s[o]=hi(o);for(var d=a.s.r;d<=a.e.r;++d)for(i=Qa(d),o=a.s.c;o<=a.e.c;++o)if(t=s[o]+i,r=u?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function LF(e,t,r){var n=r||{},a=+!n.skipHeader,i=e||{},s=0,o=0;if(i&&n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var c=typeof n.origin=="string"?Pa(n.origin):n.origin;s=c.r,o=c.c}var u,d={s:{c:0,r:0},e:{c:o,r:s+t.length-1+a}};if(i["!ref"]){var f=pn(i["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),s==-1&&(s=f.e.r+1,d.e.r=s+t.length-1+a)}else s==-1&&(s=0,d.e.r=t.length-1+a);var p=n.header||[],h=0;t.forEach(function(m,x){ei(m).forEach(function(y){(h=p.indexOf(y))==-1&&(p[h=p.length]=y);var g=m[y],b="z",S="",_=zr({c:o+h,r:s+x+a});u=Dg(i,_),g&&typeof g=="object"&&!(g instanceof Date)?i[_]=g:(typeof g=="number"?b="n":typeof g=="boolean"?b="b":typeof g=="string"?b="s":g instanceof Date?(b="d",n.cellDates||(b="n",g=ts(g)),S=n.dateNF||Bn[14]):g===null&&n.nullError&&(b="e",g=0),u?(u.t=b,u.v=g,delete u.w,delete u.R,S&&(u.z=S)):i[_]=u={t:b,v:g},S&&(u.z=S))})}),d.e.c=Math.max(d.e.c,o+p.length-1);var v=Qa(s);if(a)for(h=0;h<p.length;++h)i[hi(h+o)+v]={t:"s",v:p[h]};return i["!ref"]=sa(d),i}function Kne(e,t){return LF(null,e,t)}function Dg(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Pa(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Dg(e,zr(t)):Dg(e,zr({r:t,c:r||0}))}function Xne(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function Yne(){return{SheetNames:[],Sheets:{}}}function Jne(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);a=i&&+i[2]||0;var s=i&&i[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=s+a)!=-1;++a);}if(wF(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function Qne(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=Xne(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function Zne(e,t){return e.z=t,e}function RF(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function eae(e,t,r){return RF(e,"#"+t,r)}function tae(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function rae(e,t,r,n){for(var a=typeof t!="string"?t:pn(t),i=typeof t=="string"?t:sa(t),s=a.s.r;s<=a.e.r;++s)for(var o=a.s.c;o<=a.e.c;++o){var c=Dg(e,s,o);c.t="n",c.F=i,delete c.v,s==a.s.r&&o==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var Jh={encode_col:hi,encode_row:Qa,encode_cell:zr,encode_range:sa,decode_col:o3,decode_row:s3,split_cell:vJ,decode_cell:Pa,decode_range:ks,format_cell:vc,sheet_add_aoa:LM,sheet_add_json:LF,sheet_add_dom:AF,aoa_to_sheet:mp,json_to_sheet:Kne,table_to_sheet:EF,table_to_book:Ane,sheet_to_csv:x3,sheet_to_txt:PF,sheet_to_json:ib,sheet_to_html:jF,sheet_to_formulae:Gne,sheet_to_row_object_array:ib,sheet_get_cell:Dg,book_new:Yne,book_append_sheet:Jne,book_set_sheet_visibility:Qne,cell_set_number_format:Zne,cell_set_hyperlink:RF,cell_set_internal_link:eae,cell_add_comment:tae,sheet_set_array_formula:rae,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const mr=({filename:e,sheetName:t,rows:r,columns:n})=>{const a=e.endsWith(".xlsx")?e:`${e}.xlsx`,i=n.map(u=>u.header),s=r.map(u=>n.map(d=>(d.value?d.value(u):u[d.key])??"")),o=Jh.aoa_to_sheet([i,...s]),c=Jh.book_new();Jh.book_append_sheet(c,o,t),OF(c,a)},Qu=e=>e.replace(/[.\-\s]/g,"").toUpperCase(),Xn=e=>{const t=Qu(e);if(t.length<2)return t;const r=t.slice(0,-1),n=t.slice(-1);return`${r.replace(/\B(?=(\d{3})+(?!\d))/g,".")}-${n}`},nae=e=>{const t=e.replace(/\D/g,"");let r=0,n=2;for(let i=t.length-1;i>=0;i--)r+=parseInt(t[i],10)*n,n=n===7?2:n+1;const a=11-r%11;return a===11?"0":a===10?"K":String(a)},UN=e=>{if(!e||e.trim()==="")return{valid:!1,error:"RUT es requerido"};const t=Qu(e);if(!/^\d{7,9}[0-9K]$/i.test(t))return{valid:!1,error:"Formato de RUT invlido"};const r=t.slice(0,-1),n=t.slice(-1).toUpperCase(),a=nae(r);return n!==a?{valid:!1,error:"Dgito verificador invlido"}:{valid:!0}};var zN=function(e,t){return zN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},zN(e,t)};function IF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");zN(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var sb=function(){return sb=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},sb.apply(this,arguments)};function xp(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function DF(e,t,r,n){var a=arguments.length,i=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(a<3?s(i):a>3?s(t,r,i):s(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function MF(e,t){return function(r,n){t(r,n,e)}}function FF(e,t,r,n,a,i){function s(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var o=n.kind,c=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f,p=!1,h=r.length-1;h>=0;h--){var v={};for(var m in n)v[m]=m==="access"?{}:n[m];for(var m in n.access)v.access[m]=n.access[m];v.addInitializer=function(y){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(y||null))};var x=(0,r[h])(o==="accessor"?{get:d.get,set:d.set}:d[c],v);if(o==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(f=s(x.get))&&(d.get=f),(f=s(x.set))&&(d.set=f),(f=s(x.init))&&a.unshift(f)}else(f=s(x))&&(o==="field"?a.unshift(f):d[c]=f)}u&&Object.defineProperty(u,n.name,d),p=!0}function $F(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function BF(e){return typeof e=="symbol"?e:"".concat(e)}function UF(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function zF(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function pt(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})}function qF(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var J2=Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function HF(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&J2(t,e,r)}function ob(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y3(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function WF(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y3(arguments[t]));return e}function VF(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var i=arguments[t],s=0,o=i.length;s<o;s++,a++)n[a]=i[s];return n}function GF(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function L0(e){return this instanceof L0?(this.v=e,this):new L0(e)}function KF(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",s),a[Symbol.asyncIterator]=function(){return this},a;function s(h){return function(v){return Promise.resolve(v).then(h,f)}}function o(h,v){n[h]&&(a[h]=function(m){return new Promise(function(x,y){i.push([h,m,x,y])>1||c(h,m)})},v&&(a[h]=v(a[h])))}function c(h,v){try{u(n[h](v))}catch(m){p(i[0][3],m)}}function u(h){h.value instanceof L0?Promise.resolve(h.value.v).then(d,f):p(i[0][2],h)}function d(h){c("next",h)}function f(h){c("throw",h)}function p(h,v){h(v),i.shift(),i.length&&c(i[0][0],i[0][1])}}function XF(e){var t,r;return t={},n("next"),n("throw",function(a){throw a}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(a,i){t[a]=e[a]?function(s){return(r=!r)?{value:L0(e[a](s)),done:!1}:i?i(s):s}:i}}function YF(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof ob=="function"?ob(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(s){return new Promise(function(o,c){s=e[i](s),a(o,c,s.done,s.value)})}}function a(i,s,o,c){Promise.resolve(c).then(function(u){i({value:u,done:o})},s)}}function JF(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var aae=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},qN=function(e){return qN=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},qN(e)};function QF(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=qN(e),n=0;n<r.length;n++)r[n]!=="default"&&J2(t,e,r[n]);return aae(t,e),t}function ZF(e){return e&&e.__esModule?e:{default:e}}function e$(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function t$(e,t,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}function r$(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function n$(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var iae=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function a$(e){function t(i){e.error=e.hasError?new iae(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;function a(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(a,function(s){return t(s),a()})}else n|=1}catch(s){t(s)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function i$(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,a,i,s){return n?t?".jsx":".js":a&&(!i||!s)?r:a+i+"."+s.toLowerCase()+"js"}):e}const sae={__extends:IF,__assign:sb,__rest:xp,__decorate:DF,__param:MF,__esDecorate:FF,__runInitializers:$F,__propKey:BF,__setFunctionName:UF,__metadata:zF,__awaiter:pt,__generator:qF,__createBinding:J2,__exportStar:HF,__values:ob,__read:y3,__spread:WF,__spreadArrays:VF,__spreadArray:GF,__await:L0,__asyncGenerator:KF,__asyncDelegator:XF,__asyncValues:YF,__makeTemplateObject:JF,__importStar:QF,__importDefault:ZF,__classPrivateFieldGet:e$,__classPrivateFieldSet:t$,__classPrivateFieldIn:r$,__addDisposableResource:n$,__disposeResources:a$,__rewriteRelativeImportExtension:i$},oae=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:n$,get __assign(){return sb},__asyncDelegator:XF,__asyncGenerator:KF,__asyncValues:YF,__await:L0,__awaiter:pt,__classPrivateFieldGet:e$,__classPrivateFieldIn:r$,__classPrivateFieldSet:t$,__createBinding:J2,__decorate:DF,__disposeResources:a$,__esDecorate:FF,__exportStar:HF,__extends:IF,__generator:qF,__importDefault:ZF,__importStar:QF,__makeTemplateObject:JF,__metadata:zF,__param:MF,__propKey:BF,__read:y3,__rest:xp,__rewriteRelativeImportExtension:i$,__runInitializers:$F,__setFunctionName:UF,__spread:WF,__spreadArray:GF,__spreadArrays:VF,__values:ob,default:sae},Symbol.toStringTag,{value:"Module"})),lae=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Q2 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class s$ extends Q2{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class HN extends Q2{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class WN extends Q2{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var lb;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(lb||(lb={}));class cae{constructor(t,{headers:r={},customFetch:n,region:a=lb.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=lae(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return pt(this,arguments,void 0,function*(r,n={}){var a;let i,s;try{const{headers:o,method:c,body:u,signal:d,timeout:f}=n;let p={},{region:h}=n;h||(h=this.region);const v=new URL(`${this.url}/${r}`);h&&h!=="any"&&(p["x-region"]=h,v.searchParams.set("forceFunctionRegion",h));let m;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",m=u):typeof u=="string"?(p["Content-Type"]="text/plain",m=u):typeof FormData<"u"&&u instanceof FormData?m=u:(p["Content-Type"]="application/json",m=JSON.stringify(u)):m=u;let x=d;f&&(s=new AbortController,i=setTimeout(()=>s.abort(),f),d?(x=s.signal,d.addEventListener("abort",()=>s.abort())):x=s.signal);const y=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),o),body:m,signal:x}).catch(_=>{throw new s$(_)}),g=y.headers.get("x-relay-error");if(g&&g==="true")throw new HN(y);if(!y.ok)throw new WN(y);let b=((a=y.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),S;return b==="application/json"?S=yield y.json():b==="application/octet-stream"||b==="application/pdf"?S=yield y.blob():b==="text/event-stream"?S=y:b==="multipart/form-data"?S=yield y.formData():S=yield y.text(),{data:S,error:null,response:y}}catch(o){return{data:null,error:o,response:o instanceof WN||o instanceof HN?o.context:void 0}}finally{i&&clearTimeout(i)}})}}var Ti={};const yp=uW(oae);var px={},mx={},gx={},vx={},xx={},yx={},tO;function o$(){if(tO)return yx;tO=1,Object.defineProperty(yx,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return yx.default=e,yx}var rO;function l$(){if(rO)return xx;rO=1,Object.defineProperty(xx,"__esModule",{value:!0});const t=yp.__importDefault(o$());class r{constructor(a){var i,s;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(i=a.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=a.signal,this.isMaybeSingle=(s=a.isMaybeSingle)!==null&&s!==void 0?s:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=new Headers(this.headers),this.headers.set(a,i),this}then(a,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let o=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,f,p;let h=null,v=null,m=null,x=c.status,y=c.statusText;if(c.ok){if(this.method!=="HEAD"){const _=await c.text();_===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?v=_:v=JSON.parse(_))}const b=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),S=(f=c.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");b&&S&&S.length>1&&(m=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(h={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,m=null,x=406,y="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const b=await c.text();try{h=JSON.parse(b),Array.isArray(h)&&c.status===404&&(v=[],h=null,x=200,y="OK")}catch{c.status===404&&b===""?(x=204,y="No Content"):h={message:b}}if(h&&this.isMaybeSingle&&(!((p=h==null?void 0:h.details)===null||p===void 0)&&p.includes("0 rows"))&&(h=null,x=200,y="OK"),h&&this.shouldThrowOnError)throw new t.default(h)}return{error:h,data:v,count:m,status:x,statusText:y}});return this.shouldThrowOnError||(o=o.catch(c=>{var u,d,f,p,h,v;let m="";const x=c==null?void 0:c.cause;if(x){const y=(u=x==null?void 0:x.message)!==null&&u!==void 0?u:"",g=(d=x==null?void 0:x.code)!==null&&d!==void 0?d:"";m=`${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"FetchError"}: ${c==null?void 0:c.message}`,m+=`

Caused by: ${(p=x==null?void 0:x.name)!==null&&p!==void 0?p:"Error"}: ${y}`,g&&(m+=` (${g})`),x!=null&&x.stack&&(m+=`
${x.stack}`)}else m=(h=c==null?void 0:c.stack)!==null&&h!==void 0?h:"";return{error:{message:`${(v=c==null?void 0:c.name)!==null&&v!==void 0?v:"FetchError"}: ${c==null?void 0:c.message}`,details:m,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(a,i)}returns(){return this}overrideTypes(){return this}}return xx.default=r,xx}var nO;function c$(){if(nO)return vx;nO=1,Object.defineProperty(vx,"__esModule",{value:!0});const t=yp.__importDefault(l$());class r extends t.default{select(a){let i=!1;const s=(a??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:i=!0,nullsFirst:s,foreignTable:o,referencedTable:c=o}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${a}.${i?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:s=i}={}){const o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${a}`),this}range(a,i,{foreignTable:s,referencedTable:o=s}={}){const c=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(u,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:i=!1,settings:s=!1,buffers:o=!1,wal:c=!1,format:u="text"}={}){var d;const f=[a?"analyze":null,i?"verbose":null,s?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),p=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${p}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return vx.default=r,vx}var aO;function b3(){if(aO)return gx;aO=1,Object.defineProperty(gx,"__esModule",{value:!0});const t=yp.__importDefault(c$()),r=new RegExp("[,()]");class n extends t.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}regexMatch(i,s){return this.url.searchParams.append(i,`match.${s}`),this}regexIMatch(i,s){return this.url.searchParams.append(i,`imatch.${s}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}isDistinct(i,s){return this.url.searchParams.append(i,`isdistinct.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${u}fts${d}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return gx.default=n,gx}var iO;function u$(){if(iO)return mx;iO=1,Object.defineProperty(mx,"__esModule",{value:!0});const t=yp.__importDefault(b3());class r{constructor(a,{headers:i={},schema:s,fetch:o}){this.url=a,this.headers=new Headers(i),this.schema=s,this.fetch=o}select(a,i){const{head:s=!1,count:o}=i??{},c=s?"HEAD":"GET";let u=!1;const d=(a??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",d),o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:s=!0}={}){var o;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const u=a.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:s=!1,count:o,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const f=a.reduce((p,h)=>p.concat(Object.keys(h)),[]);if(f.length>0){const p=[...new Set(f)].map(h=>`"${h}"`);this.url.searchParams.set("columns",p.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(a,{count:i}={}){var s;const o="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:a}={}){var i;const s="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return mx.default=r,mx}var sO;function uae(){if(sO)return px;sO=1,Object.defineProperty(px,"__esModule",{value:!0});const e=yp,t=e.__importDefault(u$()),r=e.__importDefault(b3());class n{constructor(i,{headers:s={},schema:o,fetch:c}={}){this.url=i,this.headers=new Headers(s),this.schemaName=o,this.fetch=c}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const s=new URL(`${this.url}/${i}`);return new t.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,s={},{head:o=!1,get:c=!1,count:u}={}){var d;let f;const p=new URL(`${this.url}/rpc/${i}`);let h;o||c?(f=o?"HEAD":"GET",Object.entries(s).filter(([m,x])=>x!==void 0).map(([m,x])=>[m,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([m,x])=>{p.searchParams.append(m,x)})):(f="POST",h=s);const v=new Headers(this.headers);return u&&v.set("Prefer",`count=${u}`),new r.default({method:f,url:p,headers:v,schema:this.schemaName,body:h,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return px.default=n,px}Object.defineProperty(Ti,"__esModule",{value:!0});var d$=Ti.PostgrestError=w$=Ti.PostgrestBuilder=y$=Ti.PostgrestTransformBuilder=v$=Ti.PostgrestFilterBuilder=m$=Ti.PostgrestQueryBuilder=h$=Ti.PostgrestClient=void 0;const bp=yp,f$=bp.__importDefault(uae());var h$=Ti.PostgrestClient=f$.default;const p$=bp.__importDefault(u$());var m$=Ti.PostgrestQueryBuilder=p$.default;const g$=bp.__importDefault(b3());var v$=Ti.PostgrestFilterBuilder=g$.default;const x$=bp.__importDefault(c$());var y$=Ti.PostgrestTransformBuilder=x$.default;const b$=bp.__importDefault(l$());var w$=Ti.PostgrestBuilder=b$.default;const _$=bp.__importDefault(o$());d$=Ti.PostgrestError=_$.default;var S$=Ti.default={PostgrestClient:f$.default,PostgrestQueryBuilder:p$.default,PostgrestFilterBuilder:g$.default,PostgrestTransformBuilder:x$.default,PostgrestBuilder:b$.default,PostgrestError:_$.default};const dae=dI({__proto__:null,get PostgrestBuilder(){return w$},get PostgrestClient(){return h$},get PostgrestError(){return d$},get PostgrestFilterBuilder(){return v$},get PostgrestQueryBuilder(){return m$},get PostgrestTransformBuilder(){return y$},default:S$},[Ti]),{PostgrestClient:fae,PostgrestQueryBuilder:y7e,PostgrestFilterBuilder:b7e,PostgrestTransformBuilder:w7e,PostgrestBuilder:_7e,PostgrestError:hae}=S$||dae;class N${constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const pae="2.87.3",mae=`realtime-js/${pae}`,j$="1.0.0",gae="2.0.0",oO=j$,VN=1e4,vae=1e3,xae=100;var Rd;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Rd||(Rd={}));var ra;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ra||(ra={}));var To;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(To||(To={}));var GN;(function(e){e.websocket="websocket"})(GN||(GN={}));var Id;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Id||(Id={}));class yae{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},s=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(t,r,n){var a,i;const s=t.topic,o=(a=t.ref)!==null&&a!==void 0?a:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const p=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+s.length+u.length+f.length,h=new ArrayBuffer(this.HEADER_LENGTH+p);let v=new DataView(h),m=0;v.setUint8(m++,this.KINDS.userBroadcastPush),v.setUint8(m++,c.length),v.setUint8(m++,o.length),v.setUint8(m++,s.length),v.setUint8(m++,u.length),v.setUint8(m++,f.length),v.setUint8(m++,r),Array.from(c,y=>v.setUint8(m++,y.charCodeAt(0))),Array.from(o,y=>v.setUint8(m++,y.charCodeAt(0))),Array.from(s,y=>v.setUint8(m++,y.charCodeAt(0))),Array.from(u,y=>v.setUint8(m++,y.charCodeAt(0))),Array.from(f,y=>v.setUint8(m++,y.charCodeAt(0)));var x=new Uint8Array(h.byteLength+n.byteLength);return x.set(new Uint8Array(h),0),x.set(new Uint8Array(n),h.byteLength),x.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,i,s,o,c]=n;return r({join_ref:a,ref:i,topic:s,event:o,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),s=r.getUint8(3),o=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+a));c=c+a;const d=n.decode(t.slice(c,c+i));c=c+i;const f=n.decode(t.slice(c,c+s));c=c+s;const p=t.slice(c,t.byteLength),h=o===this.JSON_ENCODING?JSON.parse(n.decode(p)):p,v={type:this.BROADCAST_EVENT,event:d,payload:h};return s>0&&(v.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class A${constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var tn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(tn||(tn={}));const lO=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,s)=>(i[s]=bae(s,e,t,a),i),{}):{}},bae=(e,t,r,n)=>{const a=t.find(o=>o.name===e),i=a==null?void 0:a.type,s=r[e];return i&&!n.includes(i)?E$(i,s):KN(s)},E$=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Nae(t,r)}switch(e){case tn.bool:return wae(t);case tn.float4:case tn.float8:case tn.int2:case tn.int4:case tn.int8:case tn.numeric:case tn.oid:return _ae(t);case tn.json:case tn.jsonb:return Sae(t);case tn.timestamp:return jae(t);case tn.abstime:case tn.date:case tn.daterange:case tn.int4range:case tn.int8range:case tn.money:case tn.reltime:case tn.text:case tn.time:case tn.timestamptz:case tn.timetz:case tn.tsrange:case tn.tstzrange:return KN(t);default:return KN(t)}},KN=e=>e,wae=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},_ae=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Sae=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Nae=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const s=e.slice(1,r);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(o=>E$(t,o))}return e},jae=e=>typeof e=="string"?e.replace(" ","T"):e,T$=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class v5{constructor(t,r,n={},a=VN){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var XN;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(XN||(XN={}));class Qh{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:s,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Qh.syncState(this.state,a,i,s),this.pendingDiffs.forEach(c=>{this.state=Qh.syncDiff(this.state,c,i,s)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:s,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Qh.syncDiff(this.state,a,i,s),o())}),this.onJoin((a,i,s)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:s})}),this.onLeave((a,i,s)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),s=this.transformState(r),o={},c={};return this.map(i,(u,d)=>{s[u]||(c[u]=d)}),this.map(s,(u,d)=>{const f=i[u];if(f){const p=d.map(x=>x.presence_ref),h=f.map(x=>x.presence_ref),v=d.filter(x=>h.indexOf(x.presence_ref)<0),m=f.filter(x=>p.indexOf(x.presence_ref)<0);v.length>0&&(o[u]=v),m.length>0&&(c[u]=m)}else o[u]=d}),this.syncDiff(i,{joins:o,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:s}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(o,c)=>{var u;const d=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(c),d.length>0){const f=t[o].map(h=>h.presence_ref),p=d.filter(h=>f.indexOf(h.presence_ref)<0);t[o].unshift(...p)}n(o,d,c)}),this.map(s,(o,c)=>{let u=t[o];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[o]=u,a(o,u,c),u.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var YN;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(YN||(YN={}));var Zh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Zh||(Zh={}));var al;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(al||(al={}));const Aae=ra;class zd{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=ra.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new v5(this,To.join,this.params,this.timeout),this.rejoinTimer=new A$(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ra.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ra.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ra.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ra.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ra.errored,this.rejoinTimer.scheduleTimeout())}),this._on(To.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Qh(this),this.broadcastEndpointURL=T$(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ra.closed){const{config:{broadcast:s,presence:o,private:c}}=this.params,u=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[Zh.PRESENCE]&&this.bindings[Zh.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},p={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(al.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(al.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:h})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),h===void 0){t==null||t(al.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,x=(v=m==null?void 0:m.length)!==null&&v!==void 0?v:0,y=[];for(let g=0;g<x;g++){const b=m[g],{filter:{event:S,schema:_,table:j,filter:A}}=b,E=h&&h[g];if(E&&E.event===S&&zd.isFilterValueEqual(E.schema,_)&&zd.isFilterValueEqual(E.table,j)&&zd.isFilterValueEqual(E.filter,A))y.push(Object.assign(Object.assign({},b),{id:E.id}));else{this.unsubscribe(),this.state=ra.errored,t==null||t(al.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(al.SUBSCRIBED);return}}).receive("error",h=>{this.state=ra.errored,t==null||t(al.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(al.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===ra.joined&&t===Zh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const u=await o.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:s}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var s,o,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(s=this.params)===null||s===void 0?void 0:s.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ra.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(To.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new v5(this,To.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ra.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),s=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),s}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new v5(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>xae){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const s=t.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=To;if(n&&[o,c,u,d].indexOf(s)>=0&&n!==this._joinRef())return;let p=this._onMessage(s,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(h=>{var v,m,x;return((v=h.filter)===null||v===void 0?void 0:v.event)==="*"||((x=(m=h.filter)===null||m===void 0?void 0:m.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===s}).map(h=>h.callback(p,n)):(i=this.bindings[s])===null||i===void 0||i.filter(h=>{var v,m,x,y,g,b;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in h){const S=h.id,_=(v=h.filter)===null||v===void 0?void 0:v.event;return S&&((m=r.ids)===null||m===void 0?void 0:m.includes(S))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const S=(g=(y=h==null?void 0:h.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return S==="*"||S===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===s}).map(h=>{if(typeof p=="object"&&"ids"in p){const v=p.data,{schema:m,table:x,commit_timestamp:y,type:g,errors:b}=v;p=Object.assign(Object.assign({},{schema:m,table:x,commit_timestamp:y,eventType:g,new:{},old:{},errors:b}),this._getPayloadRecords(v))}h.callback(p,n)})}_isClosed(){return this.state===ra.closed}_isJoined(){return this.state===ra.joined}_isJoining(){return this.state===ra.joining}_isLeaving(){return this.state===ra.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&zd.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(To.close,{},t)}_onError(t){this._on(To.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ra.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=lO(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=lO(t.columns,t.old_record)),r}}const x5=()=>{},bx={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Eae=[1e3,2e3,5e3,1e4],Tae=1e4,Cae=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class C${constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=VN,this.transport=null,this.heartbeatIntervalMs=bx.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=x5,this.ref=0,this.reconnectTimer=null,this.vsn=oO,this.logger=x5,this.conn=null,this.sendBuffer=[],this.serializer=new yae,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${GN.websocket}`,this.httpEndpoint=T$(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=N$.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Rd.connecting:return Id.Connecting;case Rd.open:return Id.Open;case Rd.closing:return Id.Closing;default:return Id.Closed}}isConnected(){return this.connectionState()===Id.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new zd(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,s=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(vae,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},bx.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:s}=r,o=s?`(${s})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${o}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,s)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Rd.open||this.conn.readyState===Rd.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(To.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Cae],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:mae};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(To.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new A$(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},bx.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,s,o,c,u,d,f,p,h;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:VN,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:bx.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:x5,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:oO,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:v=>Eae[v-1]||Tae,this.vsn){case j$:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(v,m)=>m(JSON.stringify(v)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(v,m)=>m(JSON.parse(v));break;case gae:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Z2 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Nn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class kae extends Z2{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class JN extends Z2{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const w3=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Oae=()=>Response,QN=e=>{if(Array.isArray(e))return e.map(r=>QN(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=QN(n)}),t},Pae=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Lae=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),y5=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Rae=(e,t,r)=>pt(void 0,void 0,void 0,function*(){const n=yield Oae();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const i=e.status||500,s=(a==null?void 0:a.statusCode)||i+"";t(new kae(y5(a),i,s))}).catch(a=>{t(new JN(y5(a),a))}):t(new JN(y5(e),e))}),Iae=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(Pae(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Uv(e,t,r,n,a,i){return pt(this,void 0,void 0,function*(){return new Promise((s,o)=>{e(r,Iae(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>Rae(c,o,n))})})}function Mg(e,t,r,n){return pt(this,void 0,void 0,function*(){return Uv(e,"GET",t,r,n)})}function No(e,t,r,n,a){return pt(this,void 0,void 0,function*(){return Uv(e,"POST",t,n,a,r)})}function ZN(e,t,r,n,a){return pt(this,void 0,void 0,function*(){return Uv(e,"PUT",t,n,a,r)})}function Dae(e,t,r,n){return pt(this,void 0,void 0,function*(){return Uv(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function _3(e,t,r,n,a){return pt(this,void 0,void 0,function*(){return Uv(e,"DELETE",t,n,a,r)})}class Mae{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return pt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nn(t))return{data:null,error:t};throw t}})}}var k$;class Fae{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[k$]="BlobDownloadBuilder",this.promise=null}asStream(){return new Mae(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return pt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nn(t))return{data:null,error:t};throw t}})}}k$=Symbol.toStringTag;const $ae={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},cO={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Bae{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=w3(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return pt(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},cO),a);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",s.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=n,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!s.duplex&&(s.duplex="half")),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(t=="PUT"?ZN:No)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:o},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Nn(i))return{data:null,error:i};throw i}})}upload(t,r,n){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return pt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),s=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${s}`);o.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:cO.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield ZN(this.fetch,o.toString(),c,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Nn(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return pt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield No(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),s=new URL(this.url+i.url),o=s.searchParams.get("token");if(!o)throw new Z2("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}update(t,r,n){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return pt(this,void 0,void 0,function*(){try{return{data:yield No(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nn(a))return{data:null,error:a};throw a}})}copy(t,r,n){return pt(this,void 0,void 0,function*(){try{return{data:{path:(yield No(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nn(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return pt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield No(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nn(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return pt(this,void 0,void 0,function*(){try{const a=yield No(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nn(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),s=i?`?${i}`:"",o=this._getFinalPath(t),c=()=>Mg(this.fetch,`${this.url}/${a}/${o}${s}`,{headers:this.headers,noResolveJson:!0});return new Fae(c,this.shouldThrowOnError)}info(t){return pt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Mg(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:QN(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}exists(t){return pt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Dae(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n)&&n instanceof JN){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(t){return pt(this,void 0,void 0,function*(){try{return{data:yield _3(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}list(t,r,n){return pt(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},$ae),r),{prefix:t||""});return{data:yield No(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nn(a))return{data:null,error:a};throw a}})}listV2(t,r){return pt(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield No(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const O$="2.87.3",P$={"X-Client-Info":`storage-js/${O$}`};class Uae{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},P$),r),this.fetch=w3(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return pt(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield Mg(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}getBucket(t){return pt(this,void 0,void 0,function*(){try{return{data:yield Mg(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}createBucket(t){return pt(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield No(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nn(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return pt(this,void 0,void 0,function*(){try{return{data:yield ZN(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}emptyBucket(t){return pt(this,void 0,void 0,function*(){try{return{data:yield No(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return pt(this,void 0,void 0,function*(){try{return{data:yield _3(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var Fg=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function zae(e,t,r){const n=new URL(t,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&n.searchParams.set(a,i);return n.toString()}async function qae(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function Hae(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:a,body:i,headers:s}){const o=zae(e.baseUrl,n,a),c=await qae(e.auth),u=await t(o,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...s},body:i?JSON.stringify(i):void 0}),d=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),p=f&&d?JSON.parse(d):d;if(!u.ok){const h=f?p:void 0,v=h==null?void 0:h.error;throw new Fg((v==null?void 0:v.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:h})}return{status:u.status,headers:u.headers,data:p}}}}function wx(e){return e.join("")}var Wae=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:wx(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${wx(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${wx(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${wx(e.namespace)}`}),!0}catch(t){if(t instanceof Fg&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Fg&&r.status===409)return;throw r}}};function sh(e){return e.join("")}var Vae=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${sh(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${sh(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${sh(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${sh(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${sh(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${sh(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Fg&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Fg&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},Gae=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=Hae({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new Wae(this.client,t),this.tableOps=new Vae(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class Kae{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},P$),r),this.fetch=w3(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return pt(this,void 0,void 0,function*(){try{return{data:yield No(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}listBuckets(t){return pt(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Mg(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return pt(this,void 0,void 0,function*(){try{return{data:yield _3(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}from(t){if(!Lae(t))throw new Z2("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Gae({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>pt(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(i,s){const o=i[s];return typeof o!="function"?o:(...c)=>pt(this,void 0,void 0,function*(){try{return{data:yield o.apply(i,c),error:null}}catch(u){if(n)throw u;return{data:null,error:u}}})}})}}const S3={"X-Client-Info":`storage-js/${O$}`,"Content-Type":"application/json"};class L$ extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function _s(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class b5 extends L${constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Xae extends L${constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var uO;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(uO||(uO={}));const N3=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Yae=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},dO=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Jae=(e,t,r)=>pt(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e.status||500,i=e;if(typeof i.json=="function")i.json().then(s=>{const o=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||a+"";t(new b5(dO(s),a,o))}).catch(()=>{const s=a+"",o=i.statusText||`HTTP ${a} error`;t(new b5(o,a,s))});else{const s=a+"",o=i.statusText||`HTTP ${a} error`;t(new b5(o,a,s))}}else t(new Xae(dO(e),e))}),Qae=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(Yae(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function Zae(e,t,r,n,a,i){return pt(this,void 0,void 0,function*(){return new Promise((s,o)=>{e(r,Qae(t,n,a,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>s(c)).catch(c=>Jae(c,o,n))})})}function Ss(e,t,r,n,a){return pt(this,void 0,void 0,function*(){return Zae(e,"POST",t,n,a,r)})}class eie{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},S3),r),this.fetch=N3(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return pt(this,void 0,void 0,function*(){try{return{data:(yield Ss(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_s(r))return{data:null,error:r};throw r}})}getIndex(t,r){return pt(this,void 0,void 0,function*(){try{return{data:yield Ss(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_s(n))return{data:null,error:n};throw n}})}listIndexes(t){return pt(this,void 0,void 0,function*(){try{return{data:yield Ss(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_s(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return pt(this,void 0,void 0,function*(){try{return{data:(yield Ss(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_s(n))return{data:null,error:n};throw n}})}}class tie{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},S3),r),this.fetch=N3(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return pt(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ss(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_s(r))return{data:null,error:r};throw r}})}getVectors(t){return pt(this,void 0,void 0,function*(){try{return{data:yield Ss(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_s(r))return{data:null,error:r};throw r}})}listVectors(t){return pt(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Ss(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_s(r))return{data:null,error:r};throw r}})}queryVectors(t){return pt(this,void 0,void 0,function*(){try{return{data:yield Ss(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_s(r))return{data:null,error:r};throw r}})}deleteVectors(t){return pt(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ss(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_s(r))return{data:null,error:r};throw r}})}}class rie{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},S3),r),this.fetch=N3(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return pt(this,void 0,void 0,function*(){try{return{data:(yield Ss(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_s(r))return{data:null,error:r};throw r}})}getBucket(t){return pt(this,void 0,void 0,function*(){try{return{data:yield Ss(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_s(r))return{data:null,error:r};throw r}})}listBuckets(){return pt(this,arguments,void 0,function*(t={}){try{return{data:yield Ss(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_s(r))return{data:null,error:r};throw r}})}deleteBucket(t){return pt(this,void 0,void 0,function*(){try{return{data:(yield Ss(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_s(r))return{data:null,error:r};throw r}})}}class nie extends rie{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new aie(this.url,this.headers,t,this.fetch)}createBucket(t){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return pt(this,void 0,void 0,function*(){return r.createBucket.call(this,t)})}getBucket(t){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return pt(this,void 0,void 0,function*(){return r.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return pt(this,arguments,void 0,function*(r={}){return t.listBuckets.call(this,r)})}deleteBucket(t){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return pt(this,void 0,void 0,function*(){return r.deleteBucket.call(this,t)})}}class aie extends eie{constructor(t,r,n,a){super(t,r,a),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return pt(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return pt(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return pt(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return pt(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new iie(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class iie extends tie{constructor(t,r,n,a,i){super(t,r,i),this.vectorBucketName=n,this.indexName=a}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return pt(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return pt(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return pt(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return pt(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return pt(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class sie extends Uae{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new Bae(this.url,this.headers,t,this.fetch)}get vectors(){return new nie(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Kae(this.url+"/iceberg",this.headers,this.fetch)}}const oie="2.87.3";let Im="";typeof Deno<"u"?Im="deno":typeof document<"u"?Im="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Im="react-native":Im="node";const lie={"X-Client-Info":`supabase-js-${Im}/${oie}`},cie={headers:lie},uie={schema:"public"},die={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},fie={},hie=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),pie=()=>Headers,mie=(e,t,r)=>{const n=hie(r),a=pie();return async(i,s)=>{var o;const c=(o=await t())!==null&&o!==void 0?o:e;let u=new a(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},s),{headers:u}))}};function gie(e){return e.endsWith("/")?e:e+"/"}function vie(e,t){var r,n;const{db:a,auth:i,realtime:s,global:o}=e,{db:c,auth:u,realtime:d,global:f}=t,p={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),s),storage:{},global:Object.assign(Object.assign(Object.assign({},f),o),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function xie(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(gie(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const R$="2.87.3",vh=30*1e3,ej=3,w5=ej*vh,yie="http://localhost:9999",bie="supabase.auth.token",wie={"X-Client-Info":`gotrue-js/${R$}`},tj="X-Supabase-Api-Version",I$={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},_ie=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Sie=10*60*1e3;class R0 extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function _t(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class D$ extends R0{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function M$(e){return _t(e)&&e.name==="AuthApiError"}class cu extends R0{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class yl extends R0{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class zi extends yl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function F$(e){return _t(e)&&e.name==="AuthSessionMissingError"}class Ad extends yl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Dm extends yl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Mm extends yl{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $$(e){return _t(e)&&e.name==="AuthImplicitGrantRedirectError"}class rj extends yl{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class B$ extends yl{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}function Nie(e){return _t(e)&&e.name==="AuthPKCECodeVerifierMissingError"}class cb extends yl{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function sy(e){return _t(e)&&e.name==="AuthRetryableFetchError"}class nj extends yl{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}function jie(e){return _t(e)&&e.name==="AuthWeakPasswordError"}class ub extends yl{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const db="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),fO=` 	
\r=`.split(""),Aie=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<fO.length;t+=1)e[fO[t].charCodeAt(0)]=-2;for(let t=0;t<db.length;t+=1)e[db[t].charCodeAt(0)]=t;return e})();function hO(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(db[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(db[n]),t.queuedBits-=6}}function U$(e,t,r){const n=Aie[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function pO(e){const t=[],r=s=>{t.push(String.fromCodePoint(s))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=s=>{Cie(s,n,r)};for(let s=0;s<e.length;s+=1)U$(e.charCodeAt(s),a,i);return t.join("")}function Eie(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Tie(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Eie(n,t)}}function Cie(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function e0(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)U$(e.charCodeAt(a),r,n);return new Uint8Array(t)}function kie(e){const t=[];return Tie(e,r=>t.push(r)),new Uint8Array(t)}function qd(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>hO(a,r,n)),hO(null,r,n),t.join("")}function Oie(e){return Math.round(Date.now()/1e3)+e}function Pie(){return Symbol("auth-callback")}const Wa=()=>typeof window<"u"&&typeof document<"u",xd={tested:!1,writable:!1},z$=()=>{if(!Wa())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xd.tested)return xd.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),xd.tested=!0,xd.writable=!0}catch{xd.tested=!0,xd.writable=!1}return xd.writable};function Lie(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const q$=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Rie=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",xh=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},yd=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},qa=async(e,t)=>{await e.removeItem(t)};class ew{constructor(){this.promise=new ew.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}ew.promiseConstructor=Promise;function _5(e){const t=e.split(".");if(t.length!==3)throw new ub("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!_ie.test(t[n]))throw new ub("JWT not in base64url format");return{header:JSON.parse(pO(t[0])),payload:JSON.parse(pO(t[1])),signature:e0(t[2]),raw:{header:t[0],payload:t[1]}}}async function Iie(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Die(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const s=await e(i);if(!t(i,null,s)){n(s);return}}catch(s){if(!t(i,s)){a(s);return}}})()})}function Mie(e){return("0"+e.toString(16)).substr(-2)}function Fie(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,Mie).join("")}async function $ie(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Bie(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await $ie(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function oh(e,t,r=!1){const n=Fie();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await xh(e,`${t}-code-verifier`,a);const i=await Bie(n);return[i,n===i?"plain":"s256"]}const Uie=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function zie(e){const t=e.headers.get(tj);if(!t||!t.match(Uie))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function qie(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Hie(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Wie=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function lh(e){if(!Wie.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function S5(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Vie(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function mO(e){return JSON.parse(JSON.stringify(e))}const Ed=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Gie=[502,503,504];async function gO(e){var t;if(!Rie(e))throw new cb(Ed(e),0);if(Gie.includes(e.status))throw new cb(Ed(e),e.status);let r;try{r=await e.json()}catch(i){throw new cu(Ed(i),i)}let n;const a=zie(e);if(a&&a.getTime()>=I$["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new nj(Ed(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new zi}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0))throw new nj(Ed(r),e.status,r.weak_password.reasons);throw new D$(Ed(r),e.status||500,n)}const Kie=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function It(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[tj]||(i[tj]=I$["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const s=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(s.redirect_to=n.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await Xie(e,t,r+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Xie(e,t,r,n,a,i){const s=Kie(t,n,a,i);let o;try{o=await e(r,Object.assign({},s))}catch(c){throw console.error(c),new cb(Ed(c),0)}if(o.ok||await gO(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await gO(c)}}function _o(e){var t;let r=null;Qie(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Oie(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function vO(e){const t=_o(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function uu(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Yie(e){return{data:e,error:null}}function Jie(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,s=xp(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},s);return{data:{properties:o,user:c},error:null}}function xO(e){return e}function Qie(e){return e.access_token&&e.refresh_token&&e.expires_in}const oy=["global","local","others"];class j3{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=q$(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=oy[0]){if(oy.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${oy.join(", ")}`);try{return await It(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(_t(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await It(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:uu})}catch(n){if(_t(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=xp(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await It(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Jie,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(_t(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await It(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:uu})}catch(r){if(_t(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,s,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await It(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:xO});if(d.error)throw d.error;const f=await d.json(),p=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(v=>{const m=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);u[`${x}Page`]=m}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(_t(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){lh(t);try{return await It(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:uu})}catch(r){if(_t(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){lh(t);try{return await It(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:uu})}catch(n){if(_t(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){lh(t);try{return await It(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:uu})}catch(n){if(_t(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){lh(t.userId);try{const{data:r,error:n}=await It(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(_t(r))return{data:null,error:r};throw r}}async _deleteFactor(t){lh(t.userId),lh(t.id);try{return{data:await It(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(_t(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,s,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await It(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:xO});if(d.error)throw d.error;const f=await d.json(),p=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(v=>{const m=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);u[`${x}Page`]=m}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(_t(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await It(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(_t(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await It(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(_t(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await It(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(_t(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await It(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(_t(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await It(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(_t(r))return{data:null,error:r};throw r}}}function yO(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Td={debug:!!(globalThis&&z$()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class A3 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class H$ extends A3{}class Zie extends A3{}async function W$(e,t,r){Td.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Td.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Td.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Td.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Td.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new H$(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Td.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const bO={};async function ese(e,t,r){var n;const a=(n=bO[e])!==null&&n!==void 0?n:Promise.resolve(),i=Promise.race([a.catch(()=>null),t>=0?new Promise((s,o)=>{setTimeout(()=>{o(new Zie(`Acquiring process lock with name "${e}" timed out`))},t)}):null].filter(s=>s)).catch(s=>{if(s&&s.isAcquireTimeout)throw s;return null}).then(async()=>await r());return bO[e]=i.catch(async s=>{if(s&&s.isAcquireTimeout)return await a,null;throw s}),await i}function tse(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function V$(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function rse(e){return parseInt(e,16)}function nse(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function ase(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:s,notBefore:o,requestId:c,resources:u,scheme:d,uri:f,version:p}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const h=V$(e.address),v=d?`${d}://${n}`:n,m=e.statement?`${e.statement}
`:"",x=`${v} wants you to sign in with your Ethereum account:
${h}

${m}`;let y=`URI: ${f}
Version: ${p}
Chain ID: ${r}${s?`
Nonce: ${s}`:""}
Issued At: ${i.toISOString()}`;if(a&&(y+=`
Expiration Time: ${a.toISOString()}`),o&&(y+=`
Not Before: ${o.toISOString()}`),c&&(y+=`
Request ID: ${c}`),u){let g=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);g+=`
- ${b}`}y+=g}return`${x}
${y}`}class aa extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class fb extends aa{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function ise({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new aa({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new aa({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new aa({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new aa({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new aa({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new aa({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new aa({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new aa({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(G$(s)){if(i.rp.id!==s)return new aa({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new aa({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new aa({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new aa({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new aa({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function sse({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new aa({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new aa({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(G$(n)){if(r.rpId!==n)return new aa({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new aa({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new aa({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new aa({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class ose{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const lse=new ose;function cse(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=xp(e,["challenge","user","excludeCredentials"]),i=e0(t).buffer,s=Object.assign(Object.assign({},r),{id:e0(r.id).buffer}),o=Object.assign(Object.assign({},a),{challenge:i,user:s});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];o.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:e0(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function use(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=xp(e,["challenge","allowCredentials"]),a=e0(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let s=0;s<r.length;s++){const o=r[s];i.allowCredentials[s]=Object.assign(Object.assign({},o),{id:e0(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return i}function dse(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:qd(new Uint8Array(e.response.attestationObject)),clientDataJSON:qd(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function fse(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:qd(new Uint8Array(a.authenticatorData)),clientDataJSON:qd(new Uint8Array(a.clientDataJSON)),signature:qd(new Uint8Array(a.signature)),userHandle:a.userHandle?qd(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function G$(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function wO(){var e,t;return!!(Wa()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function hse(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new fb("Browser returned unexpected credential type",t)}:{data:null,error:new fb("Empty credential response",t)}}catch(t){return{data:null,error:ise({error:t,options:e})}}}async function pse(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new fb("Browser returned unexpected credential type",t)}:{data:null,error:new fb("Empty credential response",t)}}catch(t){return{data:null,error:sse({error:t,options:e})}}}const mse={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},gse={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function hb(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const s=a[i];if(s!==void 0)if(Array.isArray(s))n[i]=s;else if(r(s))n[i]=s;else if(t(s)){const o=n[i];t(o)?n[i]=hb(o,s):n[i]=hb(s)}else n[i]=s}return n}function vse(e,t){return hb(mse,e,t||{})}function xse(e,t){return hb(gse,e,t||{})}class yse{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){try{const{data:s,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!s)return{data:null,error:o};const c=a??lse.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=vse(s.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:f}=await hse({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=xse(s.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:f}=await pse(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(s){return _t(s)?{data:null,error:s}:{data:null,error:new cu("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new R0("rpId is required for WebAuthn authentication")};try{if(!wO())return{data:null,error:new cu("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!s)return{data:null,error:o};const{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(s){return _t(s)?{data:null,error:s}:{data:null,error:new cu("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new R0("rpId is required for WebAuthn registration")};try{if(!wO())return{data:null,error:new cu("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:o};const{data:c,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(s){return _t(s)?{data:null,error:s}:{data:null,error:new cu("Unexpected error in register",s)}}}}tse();const bse={url:yie,storageKey:bie,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:wie,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function _O(e,t,r){return await r()}const ch={};class I0{get jwks(){var t,r;return(r=(t=ch[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ch[this.storageKey]=Object.assign(Object.assign({},ch[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ch[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ch[this.storageKey]=Object.assign(Object.assign({},ch[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},bse),t);if(this.storageKey=i.storageKey,this.instanceID=(r=I0.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,I0.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Wa()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new j3({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=q$(i.fetch),this.lock=i.lock||_O,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Wa()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=W$:this.lock=_O,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new yse(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:z$()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=yO(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=yO(this.memoryStorage)),Wa()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${R$}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Wa()&&(r=Lie(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Wa()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),$$(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:s,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),await this._saveSession(s),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return _t(r)?this._returnResult({error:r}):this._returnResult({error:new cu("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await It(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:_o}),{data:s,error:o}=i;if(o||!s)return this._returnResult({data:{user:null,session:null},error:o});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(_t(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:d,password:f,options:p}=t;let h=null,v=null;this.flowType==="pkce"&&([h,v]=await oh(this.storage,this.storageKey)),i=await It(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:h,code_challenge_method:v},xform:_o})}else if("phone"in t){const{phone:d,password:f,options:p}=t;i=await It(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(a=p==null?void 0:p.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:_o})}else throw new Dm("You must provide either an email or phone number and a password");const{data:s,error:o}=i;if(o||!s)return await qa(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await qa(this.storage,`${this.storageKey}-code-verifier`),_t(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:s,options:o}=t;r=await It(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:vO})}else if("phone"in t){const{phone:i,password:s,options:o}=t;r=await It(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:vO})}else throw new Dm("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new Ad;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(_t(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,s,o,c,u,d,f,p;let h,v;if("message"in t)h=t.message,v=t.signature;else{const{chain:m,wallet:x,statement:y,options:g}=t;let b;if(Wa())if(typeof x=="object")b=x;else{const T=window;if("ethereum"in T&&typeof T.ethereum=="object"&&"request"in T.ethereum&&typeof T.ethereum.request=="function")b=T.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=x}const S=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href),_=await b.request({method:"eth_requestAccounts"}).then(T=>T).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=V$(_[0]);let A=(n=g==null?void 0:g.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!A){const T=await b.request({method:"eth_chainId"});A=rse(T)}const E={domain:S.host,address:j,statement:y,uri:S.href,version:"1",chainId:A,nonce:(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(s=(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(o=g==null?void 0:g.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=g==null?void 0:g.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=g==null?void 0:g.signInWithEthereum)===null||d===void 0?void 0:d.resources};h=ase(E),v=await b.request({method:"personal_sign",params:[nse(h),j]})}try{const{data:m,error:x}=await It(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:v},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:_o});if(x)throw x;if(!m||!m.session||!m.user){const y=new Ad;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:x})}catch(m){if(_t(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithSolana(t){var r,n,a,i,s,o,c,u,d,f,p,h;let v,m;if("message"in t)v=t.message,m=t.signature;else{const{chain:x,wallet:y,statement:g,options:b}=t;let S;if(Wa())if(typeof y=="object")S=y;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))S=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=y}const _=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in S&&S.signIn){const j=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),g?{statement:g}:null));let A;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")A=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)A=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)v=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),m=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${_.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(a=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const j=await S.signMessage(new TextEncoder().encode(v),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=j}}try{const{data:x,error:y}=await It(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:qd(m)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:_o});if(y)throw y;if(!x||!x.session||!x.user){const g=new Ad;return this._returnResult({data:{user:null,session:null},error:g})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:y})}catch(x){if(_t(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(t){const r=await yd(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new B$;const{data:i,error:s}=await It(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:_o});if(await qa(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!i||!i.session||!i.user){const o=new Ad;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:s})}catch(i){if(await qa(this.storage,`${this.storageKey}-code-verifier`),_t(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:s}=t,o=await It(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:_o}),{data:c,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Ad;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(_t(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,i,s;try{if("email"in t){const{email:o,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await oh(this.storage,this.storageKey));const{error:f}=await It(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:o,options:c}=t,{data:u,error:d}=await It(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(s=c==null?void 0:c.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Dm("You must provide either an email or phone number.")}catch(o){if(await qa(this.storage,`${this.storageKey}-code-verifier`),_t(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:s,error:o}=await It(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:_o});if(o)throw o;if(!s)throw new Error("An error occurred on token verification.");const c=s.session,u=s.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(_t(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,i,s;try{let o=null,c=null;this.flowType==="pkce"&&([o,c]=await oh(this.storage,this.storageKey));const u=await It(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:Yie});return!((i=u.data)===null||i===void 0)&&i.url&&Wa()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(o){if(await qa(this.storage,`${this.storageKey}-code-verifier`),_t(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new zi;const{error:a}=await It(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(_t(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:s}=await It(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:s,error:o}=await It(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:o})}throw new Dm("You must provide either an email or phone number and a type")}catch(r){if(_t(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await yd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<w5:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const s=await yd(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=S5()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};t.user=Vie(t.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await It(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:uu}):await this._useSession(async r=>{var n,a,i;const{data:s,error:o}=r;if(o)throw o;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new zi}:await It(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:uu})})}catch(r){if(_t(r))return F$(r)&&(await this._removeSession(),await qa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new zi;const s=a.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await oh(this.storage,this.storageKey));const{data:u,error:d}=await It(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:s.access_token,xform:uu});if(d)throw d;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(n){if(await qa(this.storage,`${this.storageKey}-code-verifier`),_t(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new zi;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:s}=_5(t.access_token);if(s.exp&&(n=s.exp,a=n<=r),a){const{data:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(_t(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:s,error:o}=r;if(o)throw o;t=(n=s.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new zi;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(_t(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Wa())throw new Mm("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Mm(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new rj("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Mm("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new rj("No code detected.");const{data:g,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:s,expires_in:o,expires_at:c,token_type:u}=t;if(!i||!o||!s||!u)throw new Mm("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let p=d+f;c&&(p=parseInt(c));const h=p-d;h*1e3<=vh&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${f}s`);const v=p-f;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,p,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,p,d);const{data:m,error:x}=await this._getUser(i);if(x)throw x;const y={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:p,refresh_token:s,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(n){if(_t(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await yd(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const s=(n=a.session)===null||n===void 0?void 0:n.access_token;if(s){const{error:o}=await this.admin.signOut(s,t);if(o&&!(M$(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await qa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=Pie(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:s}=r;if(s)throw s;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await oh(this.storage,this.storageKey,!0));try{return await It(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await qa(this.storage,`${this.storageKey}-code-verifier`),_t(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(_t(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var s,o,c,u,d;const{data:f,error:p}=i;if(p)throw p;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await It(this.fetch,"GET",h,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return Wa()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(_t(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:s,provider:o,token:c,access_token:u,nonce:d}=t,f=await It(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:_o}),{data:p,error:h}=f;return h?this._returnResult({data:{user:null,session:null},error:h}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new Ad}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:h}))}catch(a){if(await qa(this.storage,`${this.storageKey}-code-verifier`),_t(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)throw s;return await It(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(_t(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Die(async a=>(a>0&&await Iie(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await It(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:_o})),(a,i)=>{const s=200*Math.pow(2,a);return i&&sy(i)&&Date.now()+s-n<vh})}catch(n){if(this._debug(r,"error",n),_t(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Wa()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await yd(this.storage,this.storageKey);if(a&&this.userStorage){let s=await yd(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:a.user},await xh(this.userStorage,this.storageKey+"-user",s)),a.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:S5()}else if(a&&!a.user&&!a.user){const s=await yd(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(a.user=s.user,await qa(this.storage,this.storageKey+"-user"),await xh(this.storage,this.storageKey,a)):a.user=S5()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<w5;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${w5}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:s}=await this._callRefreshToken(a.refresh_token);s&&(console.error(s),sy(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:o}=await this._getUser(a.access_token);!o&&(s!=null&&s.user)?(a.user=s.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new zi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new ew;const{data:i,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!i.session)throw new zi;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={data:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(a,"error",i),_t(i)){const s={data:null,error:i};return sy(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],s=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(s),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await qa(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await xh(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=mO(a);await xh(this.storage,this.storageKey,i)}else{const a=mO(r);await xh(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await qa(this.storage,this.storageKey),await qa(this.storage,this.storageKey+"-code-verifier"),await qa(this.storage,this.storageKey+"-user"),this.userStorage&&await qa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Wa()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),vh);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/vh);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${vh}ms, refresh threshold is ${ej} ticks`),a<=ej&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof A3)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Wa()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,s]=await oh(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(s)}`});a.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await It(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(_t(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await It(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(_t(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?dse(t.webauthn.credential_response):fse(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:c}=await It(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(r){if(_t(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const s=await It(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(s.error)return s;const{data:o}=s;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:cse(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:use(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(_t(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=_5(n.access_token);let s=null;i.aal&&(s=i.aal);let o=s;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const u=i.amr||[];return{data:{currentLevel:s,nextLevel:o,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await It(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new zi})})}catch(r){if(_t(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new zi});const s=await It(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&Wa()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(_t(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new zi});const s=await It(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&Wa()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(_t(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await It(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new zi})})}catch(t){if(_t(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(await It(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new zi})})}catch(r){if(_t(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+Sie>a)return n;const{data:i,error:s}=await It(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:h,error:v}=await this.getSession();if(v||!h.session)return this._returnResult({data:null,error:v});n=h.session.access_token}const{header:a,payload:i,signature:s,raw:{header:o,payload:c}}=_5(n);r!=null&&r.allowExpired||qie(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:h}=await this.getUser(n);if(h)throw h;return{data:{claims:i,header:a,signature:s},error:null}}const d=Hie(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,s,kie(`${o}.${c}`)))throw new ub("Invalid JWT signature");return{data:{claims:i,header:a,signature:s},error:null}}catch(n){if(_t(n))return this._returnResult({data:null,error:n});throw n}}}I0.nextInstanceID={};const wse=j3,K$=I0;class _se extends K${constructor(t){super(t)}}class X${constructor(t,r,n){var a,i,s;this.supabaseUrl=t,this.supabaseKey=r;const o=xie(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:uie,realtime:fie,auth:Object.assign(Object.assign({},die),{storageKey:c}),global:cie},d=vie(n??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=d.auth)!==null&&s!==void 0?s:{},this.headers,d.global.fetch),this.fetch=mie(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new fae(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new sie(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new cae(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:s,flowType:o,lock:c,debug:u,throwOnError:d},f,p){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _se({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),f),storageKey:s,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:o,lock:c,debug:u,throwOnError:d,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new C$(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Sse=(e,t,r)=>new X$(e,t,r);function Nse(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Nse()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const jse=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:wse,AuthApiError:D$,AuthClient:K$,AuthError:R0,AuthImplicitGrantRedirectError:Mm,AuthInvalidCredentialsError:Dm,AuthInvalidJwtError:ub,AuthInvalidTokenResponseError:Ad,AuthPKCECodeVerifierMissingError:B$,AuthPKCEGrantCodeExchangeError:rj,AuthRetryableFetchError:cb,AuthSessionMissingError:zi,AuthUnknownError:cu,AuthWeakPasswordError:nj,CustomAuthError:yl,get FunctionRegion(){return lb},FunctionsError:Q2,FunctionsFetchError:s$,FunctionsHttpError:WN,FunctionsRelayError:HN,GoTrueAdminApi:j3,GoTrueClient:I0,NavigatorLockAcquireTimeoutError:H$,PostgrestError:hae,REALTIME_CHANNEL_STATES:Aae,get REALTIME_LISTEN_TYPES(){return Zh},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return YN},get REALTIME_PRESENCE_LISTEN_EVENTS(){return XN},get REALTIME_SUBSCRIBE_STATES(){return al},RealtimeChannel:zd,RealtimeClient:C$,RealtimePresence:Qh,SIGN_OUT_SCOPES:oy,SupabaseClient:X$,WebSocketFactory:N$,createClient:Sse,isAuthApiError:M$,isAuthError:_t,isAuthImplicitGrantRedirectError:$$,isAuthPKCECodeVerifierMissingError:Nie,isAuthRetryableFetchError:sy,isAuthSessionMissingError:F$,isAuthWeakPasswordError:jie,lockInternals:Td,navigatorLock:W$,processLock:ese},Symbol.toStringTag,{value:"Module"})),{createClient:Y$}=jse,Ase="https://kzslhhctjfxsdvcrqvvs.supabase.co",J$="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt6c2xoaGN0amZ4c2R2Y3JxdnZzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4NDAzODQsImV4cCI6MjA4MTQxNjM4NH0.NQ1maFD5Nl8y-5TxJFjeSdhOSzOi-6Hd8o4VcrmLUKo",Le=Y$(Ase,J$,{auth:{persistSession:!1,autoRefreshToken:!1},realtime:{params:{eventsPerSecond:10}}}),gr=()=>!!J$,D0=[{value:"conductor",label:"Conductor"},{value:"inspector_patio",label:"Inspector Patio"},{value:"cleaner",label:"Cleaner"},{value:"planillero",label:"Planillero"},{value:"supervisor",label:"Supervisor"}],Ese=[{value:"todos",label:"Todos"},{value:"ACTIVO",label:"Activo"},{value:"DESVINCULADO",label:"Desvinculado"}],Q$=async(e,t)=>{if(!gr())return console.warn("Supabase not configured, returning empty array"),[];const r=Fi(e);let n=Le.from("staff").select(`
      *,
      staff_admonitions(count)
    `).in("terminal_code",r).order("nombre",{ascending:!0});if(t!=null&&t.status&&t.status!=="todos"&&(n=n.eq("status",t.status)),t!=null&&t.cargo&&t.cargo!=="todos"&&(n=n.eq("cargo",t.cargo)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}const{data:a,error:i}=await n;if(i)throw console.error("Error fetching staff:",i),i;return(a||[]).map(s=>{var o,c;return{...s,admonition_count:((c=(o=s.staff_admonitions)==null?void 0:o[0])==null?void 0:c.count)??0}})},Tse=async e=>{const t=Qu(e),{data:r,error:n}=await Le.from("staff").select("*").eq("rut",t).single();if(n){if(n.code==="PGRST116")return null;throw n}return r},Cse=async e=>{var n,a,i,s,o,c;const{data:t,error:r}=await Le.from("staff").insert({rut:Qu(e.rut),nombre:e.nombre.trim(),cargo:e.cargo,terminal_code:e.terminal_code,turno:e.turno.trim(),horario:e.horario.trim(),contacto:e.contacto.trim(),email:((n=e.email)==null?void 0:n.trim())||null,talla_polera:((a=e.talla_polera)==null?void 0:a.trim())||null,talla_chaqueta:((i=e.talla_chaqueta)==null?void 0:i.trim())||null,talla_pantalon:((s=e.talla_pantalon)==null?void 0:s.trim())||null,talla_zapato_seguridad:((o=e.talla_zapato_seguridad)==null?void 0:o.trim())||null,talla_chaleco_reflectante:((c=e.talla_chaleco_reflectante)==null?void 0:c.trim())||null}).select().single();if(r)throw r.code==="23505"?new Error("Ya existe un trabajador con ese RUT"):r;return t},kse=async(e,t)=>{var i,s,o,c,u,d;const r={};t.rut!==void 0&&(r.rut=Qu(t.rut)),t.nombre!==void 0&&(r.nombre=t.nombre.trim()),t.cargo!==void 0&&(r.cargo=t.cargo),t.terminal_code!==void 0&&(r.terminal_code=t.terminal_code),t.turno!==void 0&&(r.turno=t.turno.trim()),t.horario!==void 0&&(r.horario=t.horario.trim()),t.contacto!==void 0&&(r.contacto=t.contacto.trim()),t.email!==void 0&&(r.email=((i=t.email)==null?void 0:i.trim())||null),t.talla_polera!==void 0&&(r.talla_polera=((s=t.talla_polera)==null?void 0:s.trim())||null),t.talla_chaqueta!==void 0&&(r.talla_chaqueta=((o=t.talla_chaqueta)==null?void 0:o.trim())||null),t.talla_pantalon!==void 0&&(r.talla_pantalon=((c=t.talla_pantalon)==null?void 0:c.trim())||null),t.talla_zapato_seguridad!==void 0&&(r.talla_zapato_seguridad=((u=t.talla_zapato_seguridad)==null?void 0:u.trim())||null),t.talla_chaleco_reflectante!==void 0&&(r.talla_chaleco_reflectante=((d=t.talla_chaleco_reflectante)==null?void 0:d.trim())||null);const{data:n,error:a}=await Le.from("staff").update(r).eq("id",e).select().single();if(a)throw a;return n},Ose=async(e,t)=>{const{data:r,error:n}=await Le.from("staff").update({status:"DESVINCULADO",terminated_at:new Date().toISOString(),termination_comment:t.trim()}).eq("id",e).select().single();if(n)throw n;return r},Pse=async e=>{const t=Fi(e),{data:r,error:n}=await Le.from("staff").select("cargo, terminal_code").eq("status","ACTIVO").in("terminal_code",t);if(n)throw n;const{data:a}=await Le.from("staff_caps").select("*").eq("scope_code","ER_LR"),i=new Map;(a||[]).forEach(d=>{i.set(d.cargo,d.max_q)});const s=new Map;D0.forEach(d=>s.set(d.value,0)),(r||[]).forEach(d=>{const f=s.get(d.cargo)||0;s.set(d.cargo,f+1)});const o=D0.map(d=>({cargo:d.value,count:s.get(d.value)||0,max_q:i.get(d.value)??null})),c=new Map;t.forEach(d=>c.set(d,0)),(r||[]).forEach(d=>{const f=c.get(d.terminal_code)||0;c.set(d.terminal_code,f+1)});const u=t.map(d=>({terminal_code:d,count:c.get(d)||0}));return{byCargo:o,byTerminal:u,total:(r==null?void 0:r.length)||0}},Lse=async(e,t,r,n)=>{const a=n.name.split(".").pop(),i=`staff/${e}/admonitions/${Date.now()}.${a}`,{error:s}=await Le.storage.from("staff-docs").upload(i,n);if(s)throw console.error("Upload error:",s),new Error("Error al subir el documento");const{data:o,error:c}=await Le.from("staff_admonitions").insert({staff_id:e,reason:t.trim(),admonition_date:r,document_path:i}).select().single();if(c)throw c;return o},Rse=(e,t)=>{const r=Le.channel("staff-changes").on("postgres_changes",{event:"*",schema:"public",table:"staff"},n=>{e({eventType:n.eventType,new:n.new,old:n.old})}).on("postgres_changes",{event:"INSERT",schema:"public",table:"staff_admonitions"},n=>{t({eventType:n.eventType,new:n.new})}).subscribe();return()=>{Le.removeChannel(r)}},yn={all:["staff"],lists:()=>[...yn.all,"list"],list:(e,t)=>[...yn.lists(),e,t],details:()=>[...yn.all,"detail"],detail:e=>[...yn.details(),e],counts:e=>[...yn.all,"counts",e],caps:()=>[...yn.all,"caps"],admonitions:e=>[...yn.all,"admonitions",e]},Z$=(e,t)=>Ut({queryKey:yn.list(e,t),queryFn:()=>Q$(e,t)}),Ise=e=>Ut({queryKey:yn.counts(e),queryFn:()=>Pse(e)}),Dse=()=>{const e=Lt();return Dt({mutationFn:t=>Cse(t),onSuccess:()=>{e.invalidateQueries({queryKey:yn.lists()}),e.invalidateQueries({queryKey:yn.counts({})})}})},Mse=()=>{const e=Lt();return Dt({mutationFn:({id:t,values:r})=>kse(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:yn.lists()}),e.invalidateQueries({queryKey:yn.detail(t.id)}),e.invalidateQueries({queryKey:yn.counts({})})}})},Fse=()=>{const e=Lt();return Dt({mutationFn:({id:t,comment:r})=>Ose(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:yn.lists()}),e.invalidateQueries({queryKey:yn.detail(t.id)}),e.invalidateQueries({queryKey:yn.counts({})})}})},$se=()=>{const e=Lt();return Dt({mutationFn:({staffId:t,reason:r,admonitionDate:n,file:a})=>Lse(t,r,n,a),onSuccess:t=>{e.invalidateQueries({queryKey:yn.admonitions(t.staff_id)}),e.invalidateQueries({queryKey:yn.lists()})}})},Bse=e=>{const t=Lt();M.useEffect(()=>Rse(n=>{console.log("Staff change:",n.eventType),t.invalidateQueries({queryKey:yn.lists()}),t.invalidateQueries({queryKey:yn.counts(e)}),n.new&&t.invalidateQueries({queryKey:yn.detail(n.new.id)})},n=>{console.log("Admonition change:",n.eventType),n.new&&(t.invalidateQueries({queryKey:yn.admonitions(n.new.staff_id)}),t.invalidateQueries({queryKey:yn.lists()}))}),[t,e])},Use=e=>({conductor:"calendar",inspector_patio:"clipboard",cleaner:"check-circle",planillero:"layers",supervisor:"users"})[e]||"users",zse=e=>{var t;return((t=D0.find(r=>r.value===e))==null?void 0:t.label)||e},qse=({terminalContext:e})=>{const{data:t,isLoading:r}=Ise(e);if(r)return l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6",children:[...Array(5)].map((a,i)=>l.jsxs("div",{className:"card p-4 animate-pulse",children:[l.jsx("div",{className:"h-4 bg-slate-200 rounded w-20 mb-2"}),l.jsx("div",{className:"h-8 bg-slate-200 rounded w-16"})]},i))});if(!t)return null;const n=e.mode==="ALL"||e.mode==="TERMINAL"&&(e.value==="EL_ROBLE"||e.value==="LA_REINA");return l.jsxs("div",{className:"space-y-4 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide mb-3",children:["Personal por Cargo ",n&&"(ER-LR)"]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:t.byCargo.map(a=>{const i=a.max_q?a.count/a.max_q*100:0,s=a.max_q&&a.count>a.max_q,o=a.max_q&&i>=80&&!s;return l.jsxs("div",{className:`card p-4 transition-all ${s?"border-danger-300 bg-danger-50":o?"border-warning-300 bg-warning-50":""}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-slate-100",children:l.jsx(xe,{name:Use(a.cargo),size:18,className:"text-slate-600"})}),l.jsx("span",{className:"text-xs font-semibold text-slate-600 uppercase",children:zse(a.cargo)})]}),l.jsxs("div",{className:"flex items-baseline gap-1",children:[l.jsx("span",{className:`text-2xl font-bold ${s?"text-danger-600":o?"text-warning-600":"text-slate-900"}`,children:a.count}),a.max_q&&l.jsxs("span",{className:"text-sm text-slate-500",children:["/ ",a.max_q]})]}),a.max_q&&l.jsx("div",{className:"mt-2 h-1.5 bg-slate-200 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full transition-all ${s?"bg-danger-500":o?"bg-warning-500":"bg-brand-500"}`,style:{width:`${Math.min(i,100)}%`}})})]},a.cargo)})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide mb-3",children:"Personal por Terminal"}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.byTerminal.map(a=>l.jsxs("div",{className:"card px-4 py-3 flex items-center gap-3",children:[l.jsx(xe,{name:"building",size:18,className:"text-slate-400"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-slate-500",children:or(a.terminal_code)}),l.jsx("p",{className:"text-lg font-bold text-slate-900",children:a.count})]})]},a.terminal_code)),l.jsxs("div",{className:"card px-4 py-3 flex items-center gap-3 bg-brand-50 border-brand-200",children:[l.jsx(xe,{name:"users",size:18,className:"text-brand-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-brand-600 font-semibold",children:"Total"}),l.jsx("p",{className:"text-lg font-bold text-brand-700",children:t.total})]})]})]})]})]})},Hse=e=>{var t;return((t=D0.find(r=>r.value===e))==null?void 0:t.label)||e},Wse=({staff:e,onEdit:t,onOffboard:r,onAdmonish:n})=>e.length?l.jsx("div",{className:"table-container overflow-x-auto",children:l.jsxs("table",{className:"table",children:[l.jsx("thead",{className:"table-header",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"table-header-cell",children:"RUT"}),l.jsx("th",{scope:"col",className:"table-header-cell",children:"Nombre"}),l.jsx("th",{scope:"col",className:"table-header-cell",children:"Cargo"}),l.jsx("th",{scope:"col",className:"table-header-cell",children:"Terminal"}),l.jsx("th",{scope:"col",className:"table-header-cell",children:"Turno"}),l.jsx("th",{scope:"col",className:"table-header-cell",children:"Horario"}),l.jsx("th",{scope:"col",className:"table-header-cell",children:"Contacto"}),l.jsx("th",{scope:"col",className:"table-header-cell",children:"Estado"}),l.jsx("th",{scope:"col",className:"table-header-cell text-right",children:"Acciones"})]})}),l.jsx("tbody",{className:"table-body",children:e.map(a=>{const i=a.status==="DESVINCULADO";return l.jsxs("tr",{className:`table-row ${i?"bg-danger-50 hover:bg-danger-100":""}`,children:[l.jsx("td",{className:"table-cell font-mono text-sm",children:Xn(a.rut)}),l.jsx("td",{className:"table-cell",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium text-slate-900",children:a.nombre}),a.admonition_count>0&&l.jsxs("span",{className:"badge badge-warning text-xs",title:`${a.admonition_count} amonestacin(es)`,children:[" ",a.admonition_count]})]})}),l.jsx("td",{className:"table-cell",children:Hse(a.cargo)}),l.jsx("td",{className:"table-cell",children:or(a.terminal_code)}),l.jsx("td",{className:"table-cell",children:a.turno}),l.jsx("td",{className:"table-cell font-mono text-xs",children:a.horario}),l.jsx("td",{className:"table-cell text-sm",children:a.contacto}),l.jsx("td",{className:"table-cell",children:l.jsx("span",{className:`badge ${i?"badge-danger":"badge-success"}`,children:a.status})}),l.jsx("td",{className:"table-cell",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[!i&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>t(a),className:"btn btn-ghost btn-icon text-slate-600 hover:text-brand-600",title:"Modificar",children:l.jsx(xe,{name:"clipboard",size:16})}),l.jsx("button",{onClick:()=>n(a),className:"btn btn-ghost btn-icon text-slate-600 hover:text-warning-600",title:"Amonestar",children:l.jsx(xe,{name:"megaphone",size:16})}),l.jsx("button",{onClick:()=>r(a),className:"btn btn-ghost btn-icon text-slate-600 hover:text-danger-600",title:"Desvincular",children:l.jsx(xe,{name:"logout",size:16})})]}),i&&l.jsx("span",{className:"text-xs text-danger-600",children:a.terminated_at?new Date(a.terminated_at).toLocaleDateString("es-CL"):"Desvinculado"})]})})]},a.id)})})]})}):l.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50/50 px-6 py-12 text-center",children:[l.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-slate-100 mb-4",children:l.jsx(xe,{name:"users",size:28,className:"text-slate-400"})}),l.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"No hay personal registrado"}),l.jsx("p",{className:"mt-1 text-xs text-slate-500 max-w-xs",children:'Comienza agregando trabajadores con el botn "Nuevo Trabajador"'})]}),Vse=["Maana","Tarde","Noche","Rotativo"],_x=["XS","S","M","L","XL","XXL","XXXL"],Gse=["35","36","37","38","39","40","41","42","43","44","45","46"],SO=e=>e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e):!0,Kse=({initialData:e,onSubmit:t,onCancel:r,isLoading:n})=>{const[a,i]=M.useState({rut:"",nombre:"",cargo:"conductor",terminal_code:"EL_ROBLE",turno:"Maana",horario:"08:00-18:00",contacto:"",email:"",talla_polera:"",talla_chaqueta:"",talla_pantalon:"",talla_zapato_seguridad:"",talla_chaleco_reflectante:""}),[s,o]=M.useState(null),[c,u]=M.useState(null),[d,f]=M.useState(""),[p,h]=M.useState(!1);M.useEffect(()=>{if(e){i({rut:e.rut,nombre:e.nombre,cargo:e.cargo,terminal_code:e.terminal_code,turno:e.turno,horario:e.horario,contacto:e.contacto,email:e.email||"",talla_polera:e.talla_polera||"",talla_chaqueta:e.talla_chaqueta||"",talla_pantalon:e.talla_pantalon||"",talla_zapato_seguridad:e.talla_zapato_seguridad||"",talla_chaleco_reflectante:e.talla_chaleco_reflectante||""}),f(Xn(e.rut));const S=e.email||e.talla_polera||e.talla_chaqueta||e.talla_pantalon||e.talla_zapato_seguridad||e.talla_chaleco_reflectante;h(!!S)}},[e]);const v=S=>{f(S);const _=UN(S);_.valid?(o(null),i(j=>({...j,rut:Qu(S)}))):o(_.error||null)},m=()=>{a.rut&&f(Xn(a.rut))},x=S=>{i(_=>({..._,email:S})),S&&!SO(S)?u("Formato de correo invlido"):u(null)},y=S=>{S.preventDefault();const _=UN(a.rut);if(!_.valid){o(_.error||"RUT invlido");return}if(a.email&&!SO(a.email)){u("Formato de correo invlido");return}t(a)},g=!!e,b=(S,_,j)=>l.jsxs("div",{children:[l.jsx("label",{className:"label",children:S}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",className:"input",list:`${_}-options`,value:a[_]||"",onChange:A=>i(E=>({...E,[_]:A.target.value})),placeholder:"Seleccionar o escribir..."}),l.jsx("datalist",{id:`${_}-options`,children:j.map(A=>l.jsx("option",{value:A},A))})]})]});return l.jsxs("form",{onSubmit:y,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"RUT"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",className:`input ${s?"border-danger-500 focus:ring-danger-500":""}`,value:d,onChange:S=>v(S.target.value),onBlur:m,placeholder:"12.345.678-9",disabled:g,required:!0}),g&&l.jsx(xe,{name:"key",size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"})]}),s&&l.jsx("p",{className:"mt-1 text-xs text-danger-600",children:s}),g&&l.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"El RUT no puede modificarse"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Nombre Completo"}),l.jsx("input",{type:"text",className:"input",value:a.nombre,onChange:S=>i(_=>({..._,nombre:S.target.value})),placeholder:"Juan Prez Gonzlez",required:!0})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Cargo"}),l.jsx("select",{className:"input",value:a.cargo,onChange:S=>i(_=>({..._,cargo:S.target.value})),required:!0,children:D0.map(S=>l.jsx("option",{value:S.value,children:S.label},S.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Terminal"}),l.jsx("select",{className:"input",value:a.terminal_code,onChange:S=>i(_=>({..._,terminal_code:S.target.value})),required:!0,children:es.map(S=>l.jsx("option",{value:S.value,children:S.label},S.value))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Turno"}),l.jsx("select",{className:"input",value:a.turno,onChange:S=>i(_=>({..._,turno:S.target.value})),required:!0,children:Vse.map(S=>l.jsx("option",{value:S,children:S},S))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Horario"}),l.jsx("input",{type:"text",className:"input",value:a.horario,onChange:S=>i(_=>({..._,horario:S.target.value})),placeholder:"08:00-18:00",required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Contacto"}),l.jsx("input",{type:"text",className:"input",value:a.contacto,onChange:S=>i(_=>({..._,contacto:S.target.value})),placeholder:"Telfono o email",required:!0})]}),l.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[l.jsxs("button",{type:"button",onClick:()=>h(!p),className:"w-full flex items-center justify-between px-4 py-3 bg-slate-50 hover:bg-slate-100 transition-colors",children:[l.jsxs("span",{className:"font-medium text-slate-700 flex items-center gap-2",children:[l.jsx(xe,{name:"tag",size:18}),"Tallas y Correo"]}),l.jsx(xe,{name:"chevron-down",size:18,className:`text-slate-500 transition-transform ${p?"rotate-180":""}`})]}),p&&l.jsxs("div",{className:"p-4 space-y-4 bg-white",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Correo Electrnico"}),l.jsx("input",{type:"email",className:`input ${c?"border-danger-500 focus:ring-danger-500":""}`,value:a.email||"",onChange:S=>x(S.target.value),placeholder:"trabajador@ejemplo.com"}),c&&l.jsx("p",{className:"mt-1 text-xs text-danger-600",children:c})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[b("Talla Polera","talla_polera",_x),b("Talla Chaqueta","talla_chaqueta",_x),b("Talla Pantaln","talla_pantalon",_x),b("Talla Zapato de Seguridad","talla_zapato_seguridad",Gse),b("Talla Chaleco Reflectante","talla_chaleco_reflectante",_x)]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[l.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n||!!s||!!c,children:n?l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Guardando..."]}):g?"Guardar Cambios":"Crear Trabajador"})]})]})},Xse=({staffName:e,onConfirm:t,onCancel:r,isLoading:n})=>{const[a,i]=M.useState(""),s=o=>{o.preventDefault(),a.trim()&&t(a.trim())};return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),l.jsxs("div",{className:"relative w-full max-w-md card p-6 animate-scale-in",children:[l.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[l.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-danger-100",children:l.jsx(xe,{name:"logout",size:24,className:"text-danger-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Desvincular Trabajador"}),l.jsxs("p",{className:"text-sm text-slate-600",children:["Ests seguro que deseas desvincular a ",l.jsx("strong",{children:e}),"?"]})]})]}),l.jsx("div",{className:"mb-4 p-3 rounded-lg bg-warning-50 border border-warning-200",children:l.jsxs("p",{className:"text-sm text-warning-800",children:[l.jsx("strong",{children:" Esta accin es irreversible."})," El trabajador quedar marcado como desvinculado y no podr ser eliminado del sistema."]})}),l.jsxs("form",{onSubmit:s,children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"label",children:"Motivo de Desvinculacin *"}),l.jsx("textarea",{className:"input min-h-[100px]",value:a,onChange:o=>i(o.target.value),placeholder:"Describe el motivo de la desvinculacin...",required:!0})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-danger",disabled:n||!a.trim(),children:n?l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Procesando..."]}):"Confirmar Desvinculacin"})]})]})]})]})},Yse=({staffName:e,onConfirm:t,onCancel:r,isLoading:n})=>{const[a,i]=M.useState(""),[s,o]=M.useState(new Date().toISOString().split("T")[0]),[c,u]=M.useState(null),[d,f]=M.useState(!1),p=M.useRef(null),h=g=>{g.preventDefault(),a.trim()&&s&&c&&t(a.trim(),s,c)},v=g=>{g.preventDefault(),g.stopPropagation(),g.type==="dragenter"||g.type==="dragover"?f(!0):g.type==="dragleave"&&f(!1)},m=g=>{g.preventDefault(),g.stopPropagation(),f(!1),g.dataTransfer.files&&g.dataTransfer.files[0]&&u(g.dataTransfer.files[0])},x=g=>{g.target.files&&g.target.files[0]&&u(g.target.files[0])},y=()=>{u(null),p.current&&(p.current.value="")};return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),l.jsxs("div",{className:"relative w-full max-w-lg card p-6 animate-scale-in",children:[l.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[l.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-warning-100",children:l.jsx(xe,{name:"megaphone",size:24,className:"text-warning-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Registrar Amonestacin"}),l.jsxs("p",{className:"text-sm text-slate-600",children:["Amonestacin para ",l.jsx("strong",{children:e})]})]})]}),l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Motivo de la Amonestacin *"}),l.jsx("textarea",{className:"input min-h-[80px]",value:a,onChange:g=>i(g.target.value),placeholder:"Describe el motivo de la amonestacin...",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha de Amonestacin *"}),l.jsx("input",{type:"date",className:"input",value:s,onChange:g=>o(g.target.value),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Documento Adjunto *"}),l.jsxs("div",{className:`border-2 border-dashed rounded-xl p-6 text-center transition-all ${d?"border-brand-500 bg-brand-50":c?"border-success-300 bg-success-50":"border-slate-300 hover:border-slate-400"}`,onDragEnter:v,onDragLeave:v,onDragOver:v,onDrop:m,children:[l.jsx("input",{ref:p,type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:x,className:"hidden",id:"admonition-file"}),c?l.jsxs("div",{className:"flex items-center justify-center gap-3",children:[l.jsx(xe,{name:"check-circle",size:24,className:"text-success-600"}),l.jsxs("div",{className:"text-left",children:[l.jsx("p",{className:"text-sm font-medium text-slate-900",children:c.name}),l.jsxs("p",{className:"text-xs text-slate-500",children:[(c.size/1024).toFixed(1)," KB"]})]}),l.jsx("button",{type:"button",onClick:y,className:"ml-4 text-danger-600 hover:text-danger-700",children:l.jsx(xe,{name:"x",size:20})})]}):l.jsxs("label",{htmlFor:"admonition-file",className:"cursor-pointer flex flex-col items-center gap-2",children:[l.jsx(xe,{name:"image",size:32,className:"text-slate-400"}),l.jsxs("p",{className:"text-sm text-slate-600",children:[l.jsx("span",{className:"font-semibold text-brand-600",children:"Haz clic para subir"})," ","o arrastra el archivo aqu"]}),l.jsx("p",{className:"text-xs text-slate-400",children:"PDF, JPG, PNG (mx. 10MB)"})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n||!a.trim()||!s||!c,children:n?l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Guardando..."]}):"Registrar Amonestacin"})]})]})]})]})},Jse=()=>{const e=zt(b=>b.context),t=zt(b=>b.setContext),[r,n]=M.useState({status:"todos",cargo:"todos"}),[a,i]=M.useState({type:"none"}),s=Z$(e,r),o=Dse(),c=Mse(),u=Fse(),d=$se();Bse(e);const f=[{key:"rut",header:"RUT",value:b=>Xn(b.rut)},{key:"nombre",header:"NOMBRE",value:b=>b.nombre},{key:"cargo",header:"CARGO",value:b=>b.cargo},{key:"terminal_code",header:"TERMINAL",value:b=>or(b.terminal_code)},{key:"turno",header:"TURNO",value:b=>b.turno},{key:"horario",header:"HORARIO",value:b=>b.horario},{key:"contacto",header:"CONTACTO",value:b=>b.contacto},{key:"email",header:"CORREO",value:b=>b.email||""},{key:"talla_polera",header:"TALLA_POLERA",value:b=>b.talla_polera||""},{key:"talla_chaqueta",header:"TALLA_CHAQUETA",value:b=>b.talla_chaqueta||""},{key:"talla_pantalon",header:"TALLA_PANTALON",value:b=>b.talla_pantalon||""},{key:"talla_zapato_seguridad",header:"TALLA_ZAPATO_SEGURIDAD",value:b=>b.talla_zapato_seguridad||""},{key:"talla_chaleco_reflectante",header:"TALLA_CHALECO_REFLECTANTE",value:b=>b.talla_chaleco_reflectante||""},{key:"status",header:"ESTADO",value:b=>b.status},{key:"terminated_at",header:"FECHA_DESVINCULACION",value:b=>b.terminated_at?new Date(b.terminated_at).toLocaleDateString("es-CL"):""},{key:"termination_comment",header:"COMENTARIO_DESVINCULACION",value:b=>b.termination_comment||""}],p=()=>{s.data&&mr({filename:"personal_vista",sheetName:"Personal",rows:s.data,columns:f})},h=()=>{s.data&&mr({filename:"personal_completo",sheetName:"Personal",rows:s.data,columns:f})},v=async b=>{try{await o.mutateAsync(b),i({type:"none"})}catch(S){console.error("Error creating staff:",S),alert(S instanceof Error?S.message:"Error al crear trabajador")}},m=async b=>{if(a.type==="edit")try{await c.mutateAsync({id:a.staff.id,values:b}),i({type:"none"})}catch(S){console.error("Error updating staff:",S),alert(S instanceof Error?S.message:"Error al actualizar trabajador")}},x=async b=>{if(a.type==="offboard")try{await u.mutateAsync({id:a.staff.id,comment:b}),i({type:"none"})}catch(S){console.error("Error offboarding staff:",S),alert(S instanceof Error?S.message:"Error al desvincular trabajador")}},y=async(b,S,_)=>{if(a.type==="admonish")try{await d.mutateAsync({staffId:a.staff.id,reason:b,admonitionDate:S,file:_}),i({type:"none"})}catch(j){console.error("Error creating admonition:",j),alert(j instanceof Error?j.message:"Error al registrar amonestacin")}},g=()=>i({type:"none"});return l.jsxs("div",{className:"space-y-4",children:[l.jsx(mn,{title:"Personal",description:"Gestin del equipo operativo por terminal.",actions:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{className:"btn btn-primary",onClick:()=>i({type:"create"}),children:[l.jsx(xe,{name:"users",size:18}),"Nuevo Trabajador"]}),l.jsx(_a,{onExportView:p,onExportAll:h})]})}),l.jsx(qse,{terminalContext:e}),l.jsxs(ns,{terminalContext:e,onTerminalChange:t,children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsx("select",{className:"input",value:r.status,onChange:b=>n(S=>({...S,status:b.target.value})),children:Ese.map(b=>l.jsx("option",{value:b.value,children:b.label},b.value))})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Cargo"}),l.jsxs("select",{className:"input",value:r.cargo||"todos",onChange:b=>n(S=>({...S,cargo:b.target.value})),children:[l.jsx("option",{value:"todos",children:"Todos"}),D0.map(b=>l.jsx("option",{value:b.value,children:b.label},b.value))]})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Buscar"}),l.jsx("input",{className:"input",placeholder:"RUT o nombre",value:r.search??"",onChange:b=>n(S=>({...S,search:b.target.value}))})]})]}),s.isLoading&&l.jsx(kn,{label:"Cargando personal..."}),s.isError&&l.jsx(Da,{onRetry:()=>s.refetch()}),!s.isLoading&&!s.isError&&l.jsx(Wse,{staff:s.data||[],onEdit:b=>i({type:"edit",staff:b}),onOffboard:b=>i({type:"offboard",staff:b}),onAdmonish:b=>i({type:"admonish",staff:b})}),(a.type==="create"||a.type==="edit")&&l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:g}),l.jsxs("div",{className:"relative w-full max-w-2xl card p-6 animate-scale-in max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-900",children:a.type==="create"?"Nuevo Trabajador":"Editar Trabajador"}),l.jsx("button",{onClick:g,className:"text-slate-400 hover:text-slate-600",children:l.jsx(xe,{name:"x",size:24})})]}),l.jsx(Kse,{initialData:a.type==="edit"?a.staff:null,onSubmit:a.type==="create"?v:m,onCancel:g,isLoading:o.isPending||c.isPending})]})]}),a.type==="offboard"&&l.jsx(Xse,{staffName:a.staff.nombre,onConfirm:x,onCancel:g,isLoading:u.isPending}),a.type==="admonish"&&l.jsx(Yse,{staffName:a.staff.nombre,onConfirm:y,onCancel:g,isLoading:d.isPending})]})},Qse="https://kzslhhctjfxsdvcrqvvs.supabase.co/functions/v1/send-email",NO="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt6c2xoaGN0amZ4c2R2Y3JxdnZzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4NDAzODQsImV4cCI6MjA4MTQxNjM4NH0.NQ1maFD5Nl8y-5TxJFjeSdhOSzOi-6Hd8o4VcrmLUKo",gl={sendEmail:async e=>{const t=await fetch(Qse,{method:"POST",headers:{"Content-Type":"application/json",apikey:NO,Authorization:`Bearer ${NO}`},body:JSON.stringify(e)});if(!t.ok){const n=await t.text();throw new Error(`Email send failed: ${t.status} ${n}`)}const r=await t.json();return{accepted:r.accepted??!0,messageId:r.messageId??"pending"}}},Zse=Object.freeze(Object.defineProperty({__proto__:null,emailService:gl},Symbol.toStringTag,{value:"Module"})),eoe=async(e,t)=>{if(!gr())return[];const r=Fi(e);let n=Le.from("meetings").select(`
            *,
            meeting_invitees(count),
            meeting_files(count),
            meeting_actions(count)
        `).in("terminal_code",r).order("starts_at",{ascending:!1});if(t!=null&&t.status&&t.status!=="todos"&&(n=n.eq("status",t.status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.ilike("title",s)}t!=null&&t.date_from&&(n=n.gte("starts_at",t.date_from)),t!=null&&t.date_to&&(n=n.lte("starts_at",t.date_to+"T23:59:59"));const{data:a,error:i}=await n;if(i)throw i;return(a||[]).map(s=>{var o,c,u,d,f,p;return{...s,invitees_count:((c=(o=s.meeting_invitees)==null?void 0:o[0])==null?void 0:c.count)||0,files_count:((d=(u=s.meeting_files)==null?void 0:u[0])==null?void 0:d.count)||0,actions_count:((p=(f=s.meeting_actions)==null?void 0:f[0])==null?void 0:p.count)||0}})},e9=async e=>{const{data:t,error:r}=await Le.from("meetings").select("*").eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t},toe=async(e,t)=>{const{data:r,error:n}=await Le.from("meetings").insert({title:e.title,terminal_code:e.terminal_code,starts_at:e.starts_at,duration_minutes:e.duration_minutes,location:e.location||null,meeting_link:e.meeting_link||null,agenda_json:e.agenda_json||[],created_by_supervisor:t}).select().single();if(n)throw Ci("Error al crear reunin","No se pudo guardar la reunin"),n;return e.invitees.length>0&&await r9(r.id,e.invitees),Ii("Reunin creada",`"${e.title}" programada correctamente`,t),r},roe=async(e,t)=>{const r={};t.title!==void 0&&(r.title=t.title),t.terminal_code!==void 0&&(r.terminal_code=t.terminal_code),t.starts_at!==void 0&&(r.starts_at=t.starts_at),t.duration_minutes!==void 0&&(r.duration_minutes=t.duration_minutes),t.location!==void 0&&(r.location=t.location||null),t.meeting_link!==void 0&&(r.meeting_link=t.meeting_link||null),t.agenda_json!==void 0&&(r.agenda_json=t.agenda_json);const{data:n,error:a}=await Le.from("meetings").update(r).eq("id",e).select().single();if(a)throw a;return n},noe=async(e,t,r)=>{const n={status:t};r&&(n.cancel_reason=r);const{error:a}=await Le.from("meetings").update(n).eq("id",e);if(a)throw a},aoe=async(e,t)=>{const{error:r}=await Le.from("meetings").update({minutes_text:t}).eq("id",e);if(r)throw r},t9=async e=>{const{data:t,error:r}=await Le.from("meeting_invitees").select("*").eq("meeting_id",e).order("invitee_name");if(r)throw r;return t||[]},r9=async(e,t)=>{const r=t.map(a=>({meeting_id:e,staff_id:a.staff_id||null,invitee_name:a.invitee_name,invitee_email:a.invitee_email||null})),{error:n}=await Le.from("meeting_invitees").insert(r);if(n)throw n},jO=async(e,t)=>{const{error:r}=await Le.from("meeting_invitees").update({notification_status:t,notified_at:t==="ENVIADO"?new Date().toISOString():null}).eq("id",e);if(r)throw r},ioe=async e=>{const{data:t,error:r}=await Le.from("meeting_files").select("*").eq("meeting_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},soe=async(e,t,r)=>{const n=t.name.split(".").pop(),a=`meetings/${e}/${Date.now()}.${n}`,{error:i}=await Le.storage.from("meeting-files").upload(a,t);if(i)throw Ci("Error al subir archivo",i.message),i;const{data:s,error:o}=await Le.from("meeting_files").insert({meeting_id:e,storage_path:a,file_name:t.name,mime_type:t.type,size_bytes:t.size,uploaded_by:r}).select().single();if(o)throw o;return s},ooe=async(e,t)=>{await Le.storage.from("meeting-files").remove([t]);const{error:r}=await Le.from("meeting_files").delete().eq("id",e);if(r)throw r},loe=async e=>{const{data:t,error:r}=await Le.storage.from("meeting-files").createSignedUrl(e,3600);if(r)throw r;return t.signedUrl},coe=async e=>{const{data:t,error:r}=await Le.from("meeting_actions").select("*").eq("meeting_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},uoe=async(e,t)=>{const{data:r,error:n}=await Le.from("meeting_actions").insert({meeting_id:e,description:t.description,responsible_staff_id:t.responsible_staff_id||null,responsible_name:t.responsible_name||null,due_date:t.due_date||null}).select().single();if(n)throw n;return r},doe=async(e,t)=>{const{data:r,error:n}=await Le.from("meeting_actions").update(t).eq("id",e).select().single();if(n)throw n;return r},foe=async e=>{const{error:t}=await Le.from("meeting_actions").delete().eq("id",e);if(t)throw t},n9=async(e,t)=>{const{data:r,error:n}=await Le.from("meeting_email_settings").select("*").eq("scope_type",e).eq("scope_code",t).single();if(n){if(n.code==="PGRST116")return null;throw n}return r},hoe=async e=>{const{error:t}=await Le.from("meeting_email_settings").upsert(e,{onConflict:"scope_type,scope_code"});if(t)throw t},poe=async(e,t,r)=>{var c;const n=await n9("GLOBAL","ALL");if(!(n!=null&&n.enabled))return;const a=new Date(e.starts_at),i=a.toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),s=a.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"}),o=e.agenda_json.map((u,d)=>`${d+1}. ${u.text}`).join(`
`)||"Sin agenda definida";for(const u of t)if(u.invitee_email)try{const d=n.subject_template.replace("{{title}}",e.title),f=n.body_template.replace("{{invitee_name}}",u.invitee_name).replace("{{title}}",e.title).replace("{{date}}",i).replace("{{time}}",s).replace("{{duration}}",e.duration_minutes.toString()).replace("{{location}}",e.location||e.meeting_link||"Por confirmar").replace("{{agenda}}",o).replace("{{organizer}}",r);await gl.sendEmail({audience:"manual",manualRecipients:[u.invitee_email],cc:((c=n.cc_emails)==null?void 0:c.split(",").map(p=>p.trim()).filter(Boolean))||[],subject:d,body:f.replace(/\n/g,"<br>")}),await jO(u.id,"ENVIADO")}catch(d){console.error("Error sending invitation:",d),await jO(u.id,"ERROR")}},moe=async()=>{const{data:e,error:t}=await Le.from("staff").select("id, nombre, email, terminal_code").eq("cargo","Supervisor").eq("status","ACTIVO").order("nombre");if(t)throw t;return e||[]},jr={all:["meetings"],list:(e,t)=>[...jr.all,"list",e,t],detail:e=>[...jr.all,"detail",e],invitees:e=>[...jr.all,"invitees",e],files:e=>[...jr.all,"files",e],actions:e=>[...jr.all,"actions",e],supervisors:["supervisors"],emailSettings:e=>[...jr.all,"emailSettings",e]},E3=e=>{const t=zt(n=>n.context),r=t.mode==="ALL"?"ALL":t.value||"ALL";return Ut({queryKey:jr.list(r,e),queryFn:()=>eoe(t,e)})},goe=e=>Ut({queryKey:jr.detail(e||""),queryFn:()=>e9(e),enabled:!!e}),a9=()=>{const e=Lt(),t=Ar(r=>r.session);return Dt({mutationFn:r=>toe(r,(t==null?void 0:t.supervisorName)||""),onSuccess:()=>{e.invalidateQueries({queryKey:jr.all})}})},voe=()=>{const e=Lt();return Dt({mutationFn:({id:t,values:r})=>roe(t,r),onSuccess:(t,{id:r})=>{e.invalidateQueries({queryKey:jr.all}),e.invalidateQueries({queryKey:jr.detail(r)})}})},xoe=()=>{const e=Lt();return Dt({mutationFn:({id:t,status:r,reason:n})=>noe(t,r,n),onSuccess:()=>{e.invalidateQueries({queryKey:jr.all})}})},yoe=()=>{const e=Lt();return Dt({mutationFn:({id:t,minutes:r})=>aoe(t,r),onSuccess:(t,{id:r})=>{e.invalidateQueries({queryKey:jr.detail(r)})}})},i9=e=>Ut({queryKey:jr.invitees(e||""),queryFn:()=>t9(e),enabled:!!e}),boe=()=>{const e=Lt();return Dt({mutationFn:({meetingId:t,invitees:r})=>r9(t,r),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:jr.invitees(r)}),e.invalidateQueries({queryKey:jr.all})}})},woe=e=>Ut({queryKey:jr.files(e||""),queryFn:()=>ioe(e),enabled:!!e}),_oe=()=>{const e=Lt(),t=Ar(r=>r.session);return Dt({mutationFn:({meetingId:r,file:n})=>soe(r,n,(t==null?void 0:t.supervisorName)||""),onSuccess:(r,{meetingId:n})=>{e.invalidateQueries({queryKey:jr.files(n)}),e.invalidateQueries({queryKey:jr.all})}})},Soe=()=>{const e=Lt();return Dt({mutationFn:({id:t,storagePath:r,meetingId:n})=>ooe(t,r),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:jr.files(r)}),e.invalidateQueries({queryKey:jr.all})}})},Noe=e=>Ut({queryKey:jr.actions(e||""),queryFn:()=>coe(e),enabled:!!e}),joe=()=>{const e=Lt();return Dt({mutationFn:({meetingId:t,values:r})=>uoe(t,r),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:jr.actions(r)}),e.invalidateQueries({queryKey:jr.all})}})},Aoe=()=>{const e=Lt();return Dt({mutationFn:({id:t,meetingId:r,values:n})=>doe(t,n),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:jr.actions(r)})}})},Eoe=()=>{const e=Lt();return Dt({mutationFn:({id:t,meetingId:r})=>foe(t),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:jr.actions(r)}),e.invalidateQueries({queryKey:jr.all})}})},Toe=()=>Ut({queryKey:jr.supervisors,queryFn:moe,staleTime:5*60*1e3}),Coe=(e,t)=>Ut({queryKey:jr.emailSettings(`${e}-${t}`),queryFn:()=>n9(e,t)}),koe=()=>{const e=Lt();return Dt({mutationFn:t=>hoe(t),onSuccess:()=>{e.invalidateQueries({queryKey:jr.all})}})},Ooe=()=>{const e=Lt(),t=Ar(r=>r.session);return Dt({mutationFn:async({meetingId:r})=>{const n=await e9(r),a=await t9(r);n&&a.length>0&&await poe(n,a,(t==null?void 0:t.supervisorName)||"")},onSuccess:(r,{meetingId:n})=>{e.invalidateQueries({queryKey:jr.invitees(n)})}})},Poe=["ISAAC AVILA","CLAUDIO ARRIAGADA","CRISTIAN LURASCHI"],Sx=e=>e.toUpperCase().trim().replace(/\s+/g," "),s9=e=>{const t=Sx(e);return Poe.some(r=>Sx(r)===t||t.includes(Sx(r))||Sx(r).includes(t))},Loe=[{value:"todos",label:"Todos"},{value:"PROGRAMADA",label:"Programada"},{value:"REALIZADA",label:"Realizada"},{value:"CANCELADA",label:"Cancelada"}],Roe=({value:e,onChange:t,existingInvitees:r=[]})=>{const n=Toe(),[a,i]=M.useState(""),[s,o]=M.useState(!1),[c,u]=M.useState(""),[d,f]=M.useState(""),p=new Set([...r.map(y=>y.staff_id).filter(Boolean),...e.map(y=>y.staff_id).filter(Boolean)]),h=M.useMemo(()=>{if(!n.data)return[];const y=a.toLowerCase();return n.data.filter(g=>!p.has(g.id)).filter(g=>g.nombre.toLowerCase().includes(y)||(g.email||"").toLowerCase().includes(y)).slice(0,8)},[n.data,a,p]),v=y=>{t([...e,{staff_id:y.id,invitee_name:y.nombre,invitee_email:y.email||void 0}]),i(""),o(!1)},m=()=>{d.trim()&&(t([...e,{invitee_name:d.trim(),invitee_email:c.trim()||void 0}]),f(""),u(""))},x=y=>{t(e.filter((g,b)=>b!==y))};return l.jsxs("div",{className:"space-y-3",children:[r.length>0&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Ya invitados:"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(y=>l.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1 bg-slate-100 rounded-full text-sm",children:[l.jsx(xe,{name:"user",size:14,className:"text-slate-400"}),l.jsx("span",{children:y.invitee_name})]},y.id))})]}),e.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2",children:e.map((y,g)=>l.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1 bg-brand-100 text-brand-800 rounded-full text-sm",children:[l.jsx(xe,{name:"user",size:14}),l.jsx("span",{children:y.invitee_name}),l.jsx("button",{type:"button",onClick:()=>x(g),className:"ml-1 hover:text-brand-600",children:l.jsx(xe,{name:"x",size:14})})]},g))}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",className:"input",value:a,onChange:y=>{i(y.target.value),o(!0)},onFocus:()=>o(!0),placeholder:"Buscar supervisor por nombre o correo..."}),s&&h.length>0&&l.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.map(y=>l.jsxs("button",{type:"button",onClick:()=>v(y),className:"w-full px-4 py-2 text-left hover:bg-slate-50 border-b last:border-b-0 border-slate-100",children:[l.jsx("div",{className:"font-medium text-slate-800",children:y.nombre}),y.email&&l.jsx("div",{className:"text-sm text-slate-500",children:y.email})]},y.id))})]}),l.jsxs("div",{className:"border-t pt-3",children:[l.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Agregar invitado externo:"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-2",children:[l.jsx("input",{type:"text",className:"input flex-1",value:d,onChange:y=>f(y.target.value),placeholder:"Nombre"}),l.jsx("input",{type:"email",className:"input flex-1",value:c,onChange:y=>u(y.target.value),placeholder:"Correo (opcional)"}),l.jsx("button",{type:"button",onClick:m,className:"btn btn-secondary shrink-0",disabled:!d.trim(),children:l.jsx(xe,{name:"plus",size:18})})]})]})]})},AO=({meeting:e,onClose:t,onSuccess:r})=>{const n=zt(g=>g.context),a=a9(),i=voe(),s=i9((e==null?void 0:e.id)||null),o=boe(),[c,u]=M.useState({title:"",terminal_code:n.mode==="TERMINAL"?n.value:"EL_ROBLE",starts_at:"",duration_minutes:60,location:"",meeting_link:"",agenda_json:[],invitees:[]}),[d,f]=M.useState("");M.useEffect(()=>{e&&u({title:e.title,terminal_code:e.terminal_code,starts_at:e.starts_at.slice(0,16),duration_minutes:e.duration_minutes,location:e.location||"",meeting_link:e.meeting_link||"",agenda_json:e.agenda_json||[],invitees:[]})},[e]);const p=()=>{if(!d.trim())return;const g={id:crypto.randomUUID(),text:d.trim()};u(b=>({...b,agenda_json:[...b.agenda_json,g]})),f("")},h=g=>{u(b=>({...b,agenda_json:b.agenda_json.filter(S=>S.id!==g)}))},v=g=>{u(b=>({...b,invitees:g}))},m=async g=>{g.preventDefault();try{e?(await i.mutateAsync({id:e.id,values:c}),c.invitees.length>0&&await o.mutateAsync({meetingId:e.id,invitees:c.invitees})):await a.mutateAsync(c),r()}catch(b){console.error("Error saving meeting:",b)}},x=c.title&&c.starts_at&&c.terminal_code,y=a.isPending||i.isPending;return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),l.jsxs("div",{className:"relative w-full max-w-2xl bg-white rounded-2xl shadow-2xl max-h-[90vh] overflow-hidden",children:[l.jsx("div",{className:"bg-brand-600 text-white p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-xl font-bold",children:e?"Editar Reunin":"Nueva Reunin"}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg",children:l.jsx(xe,{name:"x",size:24})})]})}),l.jsxs("form",{onSubmit:m,className:"p-6 overflow-y-auto max-h-[calc(90vh-180px)]",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Ttulo de la reunin"}),l.jsx("input",{type:"text",className:"input",value:c.title,onChange:g=>u(b=>({...b,title:g.target.value})),placeholder:"Ej: Reunin de coordinacin semanal",required:!0})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Terminal"}),l.jsx("select",{className:"input",value:c.terminal_code,onChange:g=>u(b=>({...b,terminal_code:g.target.value})),required:!0,children:es.map(g=>l.jsx("option",{value:g.value,children:g.label},g.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha y hora"}),l.jsx("input",{type:"datetime-local",className:"input",value:c.starts_at,onChange:g=>u(b=>({...b,starts_at:g.target.value})),required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Duracin (minutos)"}),l.jsxs("select",{className:"input",value:c.duration_minutes,onChange:g=>u(b=>({...b,duration_minutes:Number(g.target.value)})),children:[l.jsx("option",{value:30,children:"30 minutos"}),l.jsx("option",{value:60,children:"1 hora"}),l.jsx("option",{value:90,children:"1.5 horas"}),l.jsx("option",{value:120,children:"2 horas"}),l.jsx("option",{value:180,children:"3 horas"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Lugar / Sala"}),l.jsx("input",{type:"text",className:"input",value:c.location,onChange:g=>u(b=>({...b,location:g.target.value})),placeholder:"Ej: Sala de reuniones"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Link de videollamada (opcional)"}),l.jsx("input",{type:"url",className:"input",value:c.meeting_link,onChange:g=>u(b=>({...b,meeting_link:g.target.value})),placeholder:"https://meet.google.com/..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Agenda"}),l.jsxs("div",{className:"space-y-2",children:[c.agenda_json.map((g,b)=>l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-2 rounded-lg",children:[l.jsxs("span",{className:"font-medium text-slate-500",children:[b+1,"."]}),l.jsx("span",{className:"flex-1",children:g.text}),l.jsx("button",{type:"button",onClick:()=>h(g.id),className:"text-red-500 hover:text-red-700",children:l.jsx(xe,{name:"x",size:16})})]},g.id)),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",className:"input flex-1",value:d,onChange:g=>f(g.target.value),placeholder:"Agregar punto a la agenda",onKeyDown:g=>g.key==="Enter"&&(g.preventDefault(),p())}),l.jsx("button",{type:"button",onClick:p,className:"btn btn-secondary",children:l.jsx(xe,{name:"plus",size:18})})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Invitados (supervisores)"}),l.jsx(Roe,{value:c.invitees,onChange:v,existingInvitees:s.data||[]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-6 mt-6 border-t",children:[l.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:!x||y,className:"btn btn-primary",children:y?"Guardando...":e?"Actualizar":"Crear Reunin"})]})]})]})]})},Ioe=({meetingTitle:e,onConfirm:t,onCancel:r,isLoading:n})=>{const[a,i]=M.useState("");return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),l.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 animate-scale-in",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:l.jsx(xe,{name:"alert-triangle",size:24,className:"text-red-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Cancelar Reunin"}),l.jsx("p",{className:"text-sm text-slate-500",children:e})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"label",children:"Motivo de cancelacin"}),l.jsx("textarea",{className:"input min-h-[100px] resize-none",value:a,onChange:s=>i(s.target.value),placeholder:"Indique el motivo por el cual se cancela esta reunin...",required:!0})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Volver"}),l.jsx("button",{onClick:()=>t(a),disabled:!a.trim()||n,className:"btn bg-red-600 hover:bg-red-700 text-white",children:n?"Cancelando...":"Confirmar Cancelacin"})]})]})]})},Doe=({onOpenMeeting:e})=>{const t=zt(_=>_.context),r=zt(_=>_.setContext),n=Ar(_=>_.session),a=(n==null?void 0:n.supervisorName)??"",i=s9(a),[s,o]=M.useState({status:"todos"}),[c,u]=M.useState(!1),[d,f]=M.useState(null),[p,h]=M.useState(null),v=E3(s);a9();const m=xoe(),x=[{key:"starts_at",header:"Fecha/Hora",value:_=>y(_.starts_at)},{key:"title",header:"Ttulo",value:_=>_.title},{key:"terminal",header:"Terminal",value:_=>or(_.terminal_code)},{key:"status",header:"Estado",value:_=>_.status},{key:"duration",header:"Duracin (min)",value:_=>_.duration_minutes.toString()},{key:"invitees",header:"Invitados",value:_=>_.invitees_count.toString()},{key:"location",header:"Lugar",value:_=>_.location||_.meeting_link||""}],y=_=>{const j=new Date(_);return j.toLocaleDateString("es-CL",{day:"2-digit",month:"short",year:"numeric"})+" "+j.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})},g=_=>{switch(_){case"REALIZADA":return l.jsx("span",{className:"badge badge-success",children:_});case"CANCELADA":return l.jsx("span",{className:"badge badge-danger",children:_});default:return l.jsx("span",{className:"badge badge-warning",children:_})}},b=async _=>{p&&(await m.mutateAsync({id:p.id,status:"CANCELADA",reason:_}),h(null))},S=async _=>{await m.mutateAsync({id:_.id,status:"REALIZADA"})};return l.jsxs("div",{className:"space-y-4",children:[l.jsx(mn,{title:"Reuniones",description:"Gestin de reuniones y seguimiento de acuerdos",actions:l.jsxs("div",{className:"flex gap-2",children:[i&&l.jsxs("button",{className:"btn btn-primary",onClick:()=>u(!0),children:[l.jsx(xe,{name:"plus",size:18})," Nueva Reunin"]}),l.jsx(_a,{onExportView:()=>mr({filename:"reuniones",sheetName:"Reuniones",rows:v.data||[],columns:x}),onExportAll:()=>mr({filename:"reuniones_all",sheetName:"Reuniones",rows:v.data||[],columns:x})})]})}),l.jsxs(ns,{terminalContext:t,onTerminalChange:r,children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsx("select",{className:"input",value:s.status,onChange:_=>o(j=>({...j,status:_.target.value})),children:Loe.map(_=>l.jsx("option",{value:_.value,children:_.label},_.value))})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Buscar"}),l.jsx("input",{className:"input",placeholder:"Ttulo de reunin",value:s.search??"",onChange:_=>o(j=>({...j,search:_.target.value}))})]})]}),v.isLoading&&l.jsx(kn,{label:"Cargando reuniones..."}),v.isError&&l.jsx(Da,{onRetry:()=>v.refetch()}),!v.isLoading&&!v.isError&&l.jsx("div",{className:"table-container overflow-x-auto",children:l.jsxs("table",{className:"table",children:[l.jsx("thead",{className:"table-header",children:l.jsxs("tr",{children:[l.jsx("th",{className:"table-header-cell",children:"Fecha/Hora"}),l.jsx("th",{className:"table-header-cell",children:"Ttulo"}),l.jsx("th",{className:"table-header-cell",children:"Terminal"}),l.jsx("th",{className:"table-header-cell",children:"Estado"}),l.jsx("th",{className:"table-header-cell text-center",children:"Inv."}),l.jsx("th",{className:"table-header-cell text-center",children:"Tareas"}),l.jsx("th",{className:"table-header-cell text-center",children:"Adj."}),l.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),l.jsx("tbody",{className:"table-body",children:(v.data||[]).length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"table-cell text-center text-slate-500 py-8",children:"No hay reuniones registradas"})}):(v.data||[]).map(_=>l.jsxs("tr",{className:"table-row cursor-pointer hover:bg-slate-50",onClick:()=>e(_.id),children:[l.jsx("td",{className:"table-cell text-sm",children:y(_.starts_at)}),l.jsx("td",{className:"table-cell font-medium",children:_.title}),l.jsx("td",{className:"table-cell text-sm",children:or(_.terminal_code)}),l.jsx("td",{className:"table-cell",children:g(_.status)}),l.jsx("td",{className:"table-cell text-center",children:l.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-sm font-medium",children:_.invitees_count})}),l.jsx("td",{className:"table-cell text-center",children:l.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-sm font-medium",children:_.actions_count})}),l.jsx("td",{className:"table-cell text-center",children:l.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-sm font-medium",children:_.files_count})}),l.jsx("td",{className:"table-cell",onClick:j=>j.stopPropagation(),children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[l.jsx("button",{onClick:()=>e(_.id),className:"btn btn-ghost btn-icon",title:"Ver detalle",children:l.jsx(xe,{name:"eye",size:16})}),i&&_.status==="PROGRAMADA"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>f(_),className:"btn btn-ghost btn-icon",title:"Editar",children:l.jsx(xe,{name:"edit",size:16})}),l.jsx("button",{onClick:()=>S(_),className:"btn btn-ghost btn-icon text-success-600",title:"Marcar realizada",children:l.jsx(xe,{name:"check-circle",size:16})}),l.jsx("button",{onClick:()=>h(_),className:"btn btn-ghost btn-icon text-danger-600",title:"Cancelar",children:l.jsx(xe,{name:"x-circle",size:16})})]})]})})]},_.id))})]})}),c&&l.jsx(AO,{onClose:()=>u(!1),onSuccess:()=>u(!1)}),d&&l.jsx(AO,{meeting:d,onClose:()=>f(null),onSuccess:()=>f(null)}),p&&l.jsx(Ioe,{meetingTitle:p.title,onConfirm:b,onCancel:()=>h(null),isLoading:m.isPending})]})},Moe=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],Foe=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],$oe=({onOpenMeeting:e})=>{const t=new Date,[r,n]=M.useState(t.getFullYear()),[a,i]=M.useState(t.getMonth()),[s,o]=M.useState(null),c=E3({status:"todos"}),u=M.useMemo(()=>{const y=new Date(r,a,1),b=new Date(r,a+1,0).getDate();let S=y.getDay();const _=[];for(let j=0;j<S;j++)_.push(null);for(let j=1;j<=b;j++)_.push(j);return _},[r,a]),d=y=>{if(!c.data)return[];const g=`${r}-${String(a+1).padStart(2,"0")}-${String(y).padStart(2,"0")}`;return c.data.filter(b=>b.starts_at.startsWith(g))},f=M.useMemo(()=>{if(!c.data)return[];const y=new Date().toISOString();return c.data.filter(g=>g.status==="PROGRAMADA"&&g.starts_at>=y).sort((g,b)=>g.starts_at.localeCompare(b.starts_at)).slice(0,5)},[c.data]),p=s?d(parseInt(s.split("-")[2])):[],h=()=>{a===0?(i(11),n(r-1)):i(a-1)},v=()=>{a===11?(i(0),n(r+1)):i(a+1)},m=y=>new Date(y).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"}),x=y=>{switch(y){case"REALIZADA":return"bg-green-500";case"CANCELADA":return"bg-red-500";default:return"bg-brand-500"}};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(mn,{title:"Agenda",description:"Vista de calendario de reuniones"}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("button",{onClick:h,className:"btn btn-ghost btn-icon",children:l.jsx(xe,{name:"chevron-right",size:20,className:"rotate-180"})}),l.jsxs("h3",{className:"text-lg font-bold text-slate-800",children:[Moe[a]," ",r]}),l.jsx("button",{onClick:v,className:"btn btn-ghost btn-icon",children:l.jsx(xe,{name:"chevron-right",size:20})})]}),l.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:Foe.map(y=>l.jsx("div",{className:"text-center text-xs font-semibold text-slate-500 py-2",children:y},y))}),l.jsx("div",{className:"grid grid-cols-7 gap-1",children:u.map((y,g)=>{if(y===null)return l.jsx("div",{className:"h-16"},`e-${g}`);const b=d(y),S=`${r}-${String(a+1).padStart(2,"0")}-${String(y).padStart(2,"0")}`,_=y===t.getDate()&&a===t.getMonth()&&r===t.getFullYear(),j=s===S;return l.jsxs("button",{onClick:()=>o(S),className:`h-16 rounded-lg border text-left p-1 transition-all ${j?"border-brand-500 bg-brand-50":"border-transparent hover:bg-slate-50"} ${_?"ring-2 ring-brand-400":""}`,children:[l.jsx("span",{className:`text-sm font-medium ${_?"text-brand-600":"text-slate-700"}`,children:y}),l.jsxs("div",{className:"mt-1 space-y-0.5",children:[b.slice(0,2).map(A=>l.jsx("div",{className:`h-1 rounded ${x(A.status)}`},A.id)),b.length>2&&l.jsxs("span",{className:"text-[10px] text-slate-500",children:["+",b.length-2]})]})]},y)})}),s&&l.jsxs("div",{className:"mt-4 pt-4 border-t",children:[l.jsxs("h4",{className:"font-semibold text-slate-700 mb-2",children:["Reuniones del ",new Date(s+"T12:00:00").toLocaleDateString("es-CL",{day:"numeric",month:"long"})]}),p.length===0?l.jsx("p",{className:"text-sm text-slate-500",children:"Sin reuniones programadas"}):l.jsx("div",{className:"space-y-2",children:p.map(y=>l.jsx("button",{onClick:()=>e(y.id),className:"w-full text-left p-3 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`w-2 h-2 rounded-full ${x(y.status)}`}),l.jsx("span",{className:"font-medium",children:y.title}),l.jsx("span",{className:"text-sm text-slate-500 ml-auto",children:m(y.starts_at)})]})},y.id))})]})]}),l.jsxs("div",{className:"card p-6",children:[l.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[l.jsx(xe,{name:"clock",size:18})," Prximas reuniones"]}),f.length===0?l.jsx("p",{className:"text-sm text-slate-500",children:"Sin reuniones prximas"}):l.jsx("div",{className:"space-y-3",children:f.map(y=>l.jsxs("button",{onClick:()=>e(y.id),className:"w-full text-left p-3 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors",children:[l.jsx("div",{className:"font-medium text-slate-800",children:y.title}),l.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:[new Date(y.starts_at).toLocaleDateString("es-CL",{day:"numeric",month:"short"})," - ",m(y.starts_at)]}),l.jsx("div",{className:"text-xs text-slate-400 mt-1",children:or(y.terminal_code)})]},y.id))})]})]})]})},Boe=({onOpenMeeting:e})=>{const t=zt(c=>c.context),r=zt(c=>c.setContext),[n,a]=M.useState({status:"REALIZADA"}),i=E3(n),s=(i.data||[]).filter(c=>c.minutes_text),o=[{key:"date",header:"Fecha",value:c=>new Date(c.starts_at).toLocaleDateString("es-CL")},{key:"title",header:"Ttulo",value:c=>c.title},{key:"terminal",header:"Terminal",value:c=>or(c.terminal_code)},{key:"minutes",header:"Minuta",value:c=>c.minutes_text||""}];return l.jsxs("div",{className:"space-y-4",children:[l.jsx(mn,{title:"Minutas y Reportes",description:"Registro de minutas de reuniones realizadas",actions:l.jsx(_a,{onExportView:()=>mr({filename:"minutas",sheetName:"Minutas",rows:s,columns:o}),onExportAll:()=>mr({filename:"minutas_all",sheetName:"Minutas",rows:s,columns:o})})}),l.jsx(ns,{terminalContext:t,onTerminalChange:r,children:l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Buscar"}),l.jsx("input",{className:"input",placeholder:"Ttulo de reunin",value:n.search??"",onChange:c=>a(u=>({...u,search:c.target.value}))})]})}),i.isLoading&&l.jsx(kn,{label:"Cargando minutas..."}),!i.isLoading&&s.length===0&&l.jsxs("div",{className:"card p-8 text-center text-slate-500",children:[l.jsx(xe,{name:"file-text",size:48,className:"mx-auto mb-3 opacity-50"}),l.jsx("p",{children:"No hay minutas registradas"})]}),l.jsx("div",{className:"grid gap-4",children:s.map(c=>l.jsxs("div",{className:"card p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>e(c.id),children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-800",children:c.title}),l.jsxs("div",{className:"text-sm text-slate-500",children:[new Date(c.starts_at).toLocaleDateString("es-CL",{day:"numeric",month:"long",year:"numeric"})," - ",or(c.terminal_code)]})]}),l.jsx("span",{className:"badge badge-success",children:c.status})]}),l.jsx("div",{className:"text-sm text-slate-600 line-clamp-3 bg-slate-50 p-3 rounded-lg",children:c.minutes_text})]},c.id))})]})},Uoe=()=>{const e=Coe("GLOBAL","ALL"),t=koe(),[r,n]=M.useState(!0),[a,i]=M.useState(""),[s,o]=M.useState(""),[c,u]=M.useState("");M.useEffect(()=>{e.data&&(n(e.data.enabled),i(e.data.cc_emails||""),o(e.data.subject_template),u(e.data.body_template))},[e.data]);const d=async()=>{await t.mutateAsync({scope_type:"GLOBAL",scope_code:"ALL",enabled:r,cc_emails:a||null,subject_template:s,body_template:c})};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(mn,{title:"Configuracin",description:"Ajustes de correo y notificaciones para reuniones"}),l.jsxs("div",{className:"card p-6 max-w-2xl",children:[l.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[l.jsx(xe,{name:"send",size:18})," Configuracin de Correos"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-slate-800",children:"Notificaciones por correo"}),l.jsx("div",{className:"text-sm text-slate-500",children:"Enviar invitaciones automticas al crear reuniones"})]}),l.jsx("button",{onClick:()=>n(!r),className:`relative w-12 h-6 rounded-full transition-colors ${r?"bg-brand-600":"bg-slate-300"}`,children:l.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${r?"left-7":"left-1"}`})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Correos en copia (CC)"}),l.jsx("input",{type:"text",className:"input",value:a,onChange:f=>i(f.target.value),placeholder:"correo1@ejemplo.cl, correo2@ejemplo.cl"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Separar mltiples correos con coma"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Plantilla de asunto"}),l.jsx("input",{type:"text",className:"input",value:s,onChange:f=>o(f.target.value)}),l.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Variables: ","{{title}}"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Plantilla de cuerpo"}),l.jsx("textarea",{className:"input min-h-[200px] font-mono text-sm",value:c,onChange:f=>u(f.target.value)}),l.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Variables: ","{{invitee_name}}, {{title}}, {{date}}, {{time}}, {{duration}}, {{location}}, {{agenda}}, {{organizer}}"]})]}),l.jsx("div",{className:"flex justify-end pt-4 border-t",children:l.jsx("button",{onClick:d,disabled:t.isPending,className:"btn btn-primary",children:t.isPending?"Guardando...":"Guardar Configuracin"})})]})]})]})},zoe=({meetingId:e,onClose:t})=>{const r=Ar(D=>D.session),n=(r==null?void 0:r.supervisorName)??"",a=s9(n),[i,s]=M.useState("info"),[o,c]=M.useState(""),[u,d]=M.useState(!0),f=goe(e),p=i9(e),h=woe(e),v=Noe(e),m=yoe(),x=Ooe(),y=_oe(),g=Soe(),b=joe(),S=Aoe(),_=Eoe(),j=f.data;M.useState(()=>{j!=null&&j.minutes_text&&c(j.minutes_text)});const A=async()=>{await m.mutateAsync({id:e,minutes:o}),d(!0)},E=async D=>{var X;const q=(X=D.target.files)==null?void 0:X[0];q&&(await y.mutateAsync({meetingId:e,file:q}),D.target.value="")},T=async(D,q)=>{const X=await loe(D);window.open(X,"_blank")},L=D=>{const q=new Date(D);return q.toLocaleDateString("es-CL",{weekday:"long",day:"numeric",month:"long",year:"numeric"})+" a las "+q.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})},k=D=>{switch(D){case"REALIZADA":return l.jsx("span",{className:"badge badge-success",children:D});case"CANCELADA":return l.jsx("span",{className:"badge badge-danger",children:D});default:return l.jsx("span",{className:"badge badge-warning",children:D})}};if(f.isLoading)return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:l.jsx(kn,{label:"Cargando reunin..."})});if(!j)return null;const R=[{id:"info",label:"Info",icon:"info"},{id:"agenda",label:"Agenda",icon:"clipboard"},{id:"invitees",label:"Invitados",icon:"users"},{id:"minutes",label:"Minuta",icon:"file-text"},{id:"actions",label:"Acuerdos",icon:"check-circle"},{id:"files",label:"Archivos",icon:"file"}];return l.jsx("div",{className:"fixed inset-0 z-50 flex bg-black/50 backdrop-blur-sm",children:l.jsxs("div",{className:"w-full h-full bg-white flex flex-col lg:flex-row animate-scale-in",children:[l.jsxs("div",{className:"lg:w-64 bg-slate-50 border-b lg:border-b-0 lg:border-r border-slate-200 p-4 flex lg:flex-col gap-2 overflow-x-auto lg:overflow-visible shrink-0",children:[R.map(D=>l.jsxs("button",{onClick:()=>s(D.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all whitespace-nowrap ${i===D.id?"bg-brand-600 text-white":"text-slate-600 hover:bg-slate-200"}`,children:[l.jsx(xe,{name:D.icon,size:18}),l.jsx("span",{className:"hidden lg:inline",children:D.label})]},D.id)),l.jsxs("button",{onClick:t,className:"mt-auto flex items-center gap-2 px-4 py-2 rounded-lg text-slate-600 hover:bg-slate-200",children:[l.jsx(xe,{name:"x",size:18})," ",l.jsx("span",{className:"hidden lg:inline",children:"Cerrar"})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[l.jsx("div",{className:"mb-6 pb-4 border-b",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:j.title}),l.jsx("p",{className:"text-slate-500 mt-1",children:L(j.starts_at)})]}),k(j.status)]})}),i==="info"&&l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm text-slate-500",children:"Terminal"}),l.jsx("div",{className:"font-medium",children:or(j.terminal_code)})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm text-slate-500",children:"Duracin"}),l.jsxs("div",{className:"font-medium",children:[j.duration_minutes," minutos"]})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm text-slate-500",children:"Lugar"}),l.jsx("div",{className:"font-medium",children:j.location||"No especificado"})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm text-slate-500",children:"Link"}),j.meeting_link?l.jsx("a",{href:j.meeting_link,target:"_blank",rel:"noopener noreferrer",className:"text-brand-600 hover:underline",children:"Unirse a la reunin"}):l.jsx("div",{className:"font-medium",children:"No disponible"})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg md:col-span-2",children:[l.jsx("div",{className:"text-sm text-slate-500",children:"Organizado por"}),l.jsx("div",{className:"font-medium",children:j.created_by_supervisor})]})]}),i==="agenda"&&l.jsx("div",{className:"space-y-2",children:j.agenda_json.length===0?l.jsx("p",{className:"text-slate-500",children:"Sin agenda definida"}):j.agenda_json.map((D,q)=>l.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 p-3 rounded-lg",children:[l.jsx("span",{className:"w-6 h-6 rounded-full bg-brand-100 text-brand-600 flex items-center justify-center text-sm font-bold",children:q+1}),l.jsx("span",{className:"flex-1",children:D.text})]},D.id))}),i==="invitees"&&l.jsxs("div",{className:"space-y-4",children:[a&&l.jsxs("button",{onClick:()=>x.mutate({meetingId:e}),disabled:x.isPending,className:"btn btn-secondary",children:[l.jsx(xe,{name:"send",size:16})," ",x.isPending?"Enviando...":"Reenviar invitaciones"]}),l.jsx("div",{className:"space-y-2",children:(p.data||[]).map(D=>l.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:D.invitee_name}),D.invitee_email&&l.jsx("div",{className:"text-sm text-slate-500",children:D.invitee_email})]}),l.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${D.notification_status==="ENVIADO"?"bg-green-100 text-green-700":D.notification_status==="ERROR"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:D.notification_status})]},D.id))})]}),i==="minutes"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("textarea",{className:"input min-h-[300px] font-mono",value:o,onChange:D=>{c(D.target.value),d(!1)},placeholder:"Escriba la minuta de la reunin aqu...",disabled:!a}),a&&l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:A,disabled:u||m.isPending,className:"btn btn-primary",children:m.isPending?"Guardando...":"Guardar Minuta"}),u&&l.jsx("span",{className:"text-sm text-green-600",children:"Guardado"})]})]}),i==="actions"&&l.jsx(qoe,{actions:v.data||[],meetingId:e,canManage:a,onCreate:D=>b.mutate({meetingId:e,values:D}),onUpdate:(D,q)=>S.mutate({id:D,meetingId:e,values:q}),onDelete:D=>_.mutate({id:D,meetingId:e})}),i==="files"&&l.jsxs("div",{className:"space-y-4",children:[a&&l.jsxs("label",{className:"btn btn-secondary cursor-pointer inline-flex items-center gap-2",children:[l.jsx(xe,{name:"upload",size:16})," Subir archivo",l.jsx("input",{type:"file",className:"hidden",accept:".pdf,.png,.jpg,.jpeg,.doc,.docx",onChange:E})]}),l.jsx("div",{className:"space-y-2",children:(h.data||[]).map(D=>l.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(xe,{name:"file",size:20,className:"text-slate-400"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:D.file_name}),l.jsxs("div",{className:"text-xs text-slate-500",children:[(D.size_bytes/1024).toFixed(1)," KB"]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>T(D.storage_path,D.file_name),className:"btn btn-ghost btn-icon",children:l.jsx(xe,{name:"eye",size:16})}),a&&l.jsx("button",{onClick:()=>g.mutate({id:D.id,storagePath:D.storage_path,meetingId:e}),className:"btn btn-ghost btn-icon text-red-500",children:l.jsx(xe,{name:"trash",size:16})})]})]},D.id))})]})]})]})})},qoe=({actions:e,canManage:t,onCreate:r,onUpdate:n,onDelete:a})=>{const[i,s]=M.useState(""),[o,c]=M.useState(""),[u,d]=M.useState(""),f=()=>{i.trim()&&(r({description:i,responsible_name:o||void 0,due_date:u||void 0}),s(""),c(""),d(""))};return l.jsxs("div",{className:"space-y-4",children:[t&&l.jsxs("div",{className:"space-y-2 bg-slate-50 p-4 rounded-lg",children:[l.jsx("input",{className:"input",value:i,onChange:p=>s(p.target.value),placeholder:"Descripcin del acuerdo"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx("input",{className:"input",value:o,onChange:p=>c(p.target.value),placeholder:"Responsable"}),l.jsx("input",{type:"date",className:"input",value:u,onChange:p=>d(p.target.value)})]}),l.jsxs("button",{onClick:f,className:"btn btn-primary",disabled:!i.trim(),children:[l.jsx(xe,{name:"plus",size:16})," Agregar Acuerdo"]})]}),l.jsx("div",{className:"space-y-2",children:e.map(p=>l.jsxs("div",{className:"flex items-start gap-3 bg-slate-50 p-3 rounded-lg",children:[l.jsx("button",{onClick:()=>n(p.id,{status:p.status==="CUMPLIDO"?"PENDIENTE":"CUMPLIDO"}),className:`mt-0.5 w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 ${p.status==="CUMPLIDO"?"bg-green-500 border-green-500 text-white":"border-slate-300"}`,disabled:!t,children:p.status==="CUMPLIDO"&&l.jsx(xe,{name:"check",size:12})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:p.status==="CUMPLIDO"?"line-through text-slate-400":"",children:p.description}),l.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:[p.responsible_name&&l.jsx("span",{children:p.responsible_name}),p.due_date&&l.jsx("span",{className:"ml-2",children:new Date(p.due_date).toLocaleDateString("es-CL")})]})]}),t&&l.jsx("button",{onClick:()=>a(p.id),className:"text-red-500 hover:text-red-700",children:l.jsx(xe,{name:"trash",size:16})})]},p.id))})]})},Hoe=[{id:"agenda",label:"Agenda",icon:"calendar"},{id:"reuniones",label:"Reuniones",icon:"users"},{id:"minutas",label:"Minutas",icon:"file-text"},{id:"config",label:"Configuracin",icon:"settings"}],Woe=()=>{const[e,t]=M.useState("reuniones"),[r,n]=M.useState(null),a=o=>{n(o)},i=()=>{n(null)},s=()=>{switch(e){case"agenda":return l.jsx($oe,{onOpenMeeting:a});case"reuniones":return l.jsx(Doe,{onOpenMeeting:a});case"minutas":return l.jsx(Boe,{onOpenMeeting:a});case"config":return l.jsx(Uoe,{});default:return null}};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 border-b border-slate-200 pb-4",children:l.jsx("div",{className:"flex flex-wrap gap-2",children:Hoe.map(o=>l.jsxs("button",{onClick:()=>t(o.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${e===o.id?"bg-brand-600 text-white shadow-md":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[l.jsx(xe,{name:o.icon,size:18}),l.jsx("span",{className:"hidden sm:inline",children:o.label})]},o.id))})}),s(),r&&l.jsx(zoe,{meetingId:r,onClose:i})]})},Voe=async(e,t,r)=>{if(!gr())return[];const n=Fi(e);let a=Le.from("tasks").select("*").in("terminal_code",n).order("updated_at",{ascending:!1});if(t!=null&&t.status&&t.status!=="todos"&&(a=a.eq("status",t.status)),t!=null&&t.priority&&t.priority!=="todos"&&(a=a.eq("priority",t.priority)),t!=null&&t.search){const o=`%${t.search}%`;a=a.or(`title.ilike.${o},description.ilike.${o}`)}t!=null&&t.assigned_to_name&&(a=a.ilike("assigned_to_name",`%${t.assigned_to_name}%`)),t!=null&&t.date_from&&(a=a.gte("created_at",t.date_from)),t!=null&&t.date_to&&(a=a.lte("created_at",t.date_to+"T23:59:59")),t!=null&&t.due_from&&(a=a.gte("due_at",t.due_from)),t!=null&&t.due_to&&(a=a.lte("due_at",t.due_to+"T23:59:59")),t!=null&&t.only_mine&&r&&(a=a.ilike("assigned_to_name",`%${r}%`));const{data:i,error:s}=await a;if(s)throw s;return i||[]},T3=async e=>{const{data:t,error:r}=await Le.from("tasks").select("*").eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t},Goe=async e=>{const t=Fi(e),r=new Date().toISOString(),{data:n,error:a}=await Le.from("tasks").select("status, due_at").in("terminal_code",t);if(a)throw a;const i=n||[];return{pending:i.filter(s=>s.status==="PENDIENTE").length,inProgress:i.filter(s=>s.status==="EN_CURSO").length,completed:i.filter(s=>s.status==="TERMINADO").length,evaluated:i.filter(s=>s.status==="EVALUADO").length,rejected:i.filter(s=>s.status==="RECHAZADO").length,overdue:i.filter(s=>s.due_at&&s.due_at<r&&!["EVALUADO","RECHAZADO"].includes(s.status)).length}},Koe=async(e,t)=>{const{data:r,error:n}=await Le.from("tasks").insert({title:e.title,description:e.description||null,terminal_code:e.terminal_code,priority:e.priority,assigned_to_staff_id:e.assigned_to_staff_id||null,assigned_to_name:e.assigned_to_name,assigned_to_email:e.assigned_to_email||null,created_by_supervisor:t,due_at:e.due_at||null,period_start:e.period_start||null,period_end:e.period_end||null}).select().single();if(n)throw Ci("Error al crear tarea","No se pudo guardar la tarea"),n;return Ii("Tarea creada",`"${e.title}" asignada a ${e.assigned_to_name}`,t),e.assigned_to_email&&await C3("assigned",r),r},Xoe=async(e,t)=>{const r={};t.title!==void 0&&(r.title=t.title),t.description!==void 0&&(r.description=t.description||null),t.terminal_code!==void 0&&(r.terminal_code=t.terminal_code),t.priority!==void 0&&(r.priority=t.priority),t.assigned_to_staff_id!==void 0&&(r.assigned_to_staff_id=t.assigned_to_staff_id||null),t.assigned_to_name!==void 0&&(r.assigned_to_name=t.assigned_to_name),t.assigned_to_email!==void 0&&(r.assigned_to_email=t.assigned_to_email||null),t.due_at!==void 0&&(r.due_at=t.due_at||null),t.period_start!==void 0&&(r.period_start=t.period_start||null),t.period_end!==void 0&&(r.period_end=t.period_end||null);const{data:n,error:a}=await Le.from("tasks").update(r).eq("id",e).select().single();if(a)throw a;return n},Yoe=async(e,t,r)=>{const{error:n}=await Le.from("tasks").update({status:t}).eq("id",e);if(n)throw n;const a=await T3(e);a!=null&&a.assigned_to_email&&await C3("status_change",a)},Joe=async(e,t,r,n,a)=>{const i={status:t?"EVALUADO":"RECHAZADO",evaluated_by:r,evaluated_at:new Date().toISOString()};t&&n&&(i.evaluation_note=n),!t&&a&&(i.rejected_reason=a);const{error:s}=await Le.from("tasks").update(i).eq("id",e);if(s)throw s;const o=await T3(e);o!=null&&o.assigned_to_email&&await C3(t?"evaluated_ok":"evaluated_reject",o),Ii(t?"Tarea evaluada":"Tarea rechazada",t?"La tarea ha sido aceptada":"La tarea ha sido devuelta",r)},Qoe=async e=>{const{data:t,error:r}=await Le.from("task_comments").select("*").eq("task_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},Zoe=async(e,t,r)=>{const{data:n,error:a}=await Le.from("task_comments").insert({task_id:e,author_name:r,body:t}).select().single();if(a)throw a;return n},ele=async e=>{const{data:t,error:r}=await Le.from("task_attachments").select("*").eq("task_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},tle=async(e,t,r)=>{const n=t.name.split(".").pop(),a=`tasks/${e}/${Date.now()}.${n}`,{error:i}=await Le.storage.from("task-files").upload(a,t);if(i)throw Ci("Error al subir archivo",i.message),i;const{data:s,error:o}=await Le.from("task_attachments").insert({task_id:e,type:"FILE",storage_path:a,file_name:t.name,mime_type:t.type,size_bytes:t.size,created_by:r}).select().single();if(o)throw o;return s},rle=async(e,t,r,n)=>{const{data:a,error:i}=await Le.from("task_attachments").insert({task_id:e,type:"URL",url:t,file_name:r,created_by:n}).select().single();if(i)throw i;return a},nle=async(e,t)=>{t&&await Le.storage.from("task-files").remove([t]);const{error:r}=await Le.from("task_attachments").delete().eq("id",e);if(r)throw r},ale=async e=>{const{data:t,error:r}=await Le.storage.from("task-files").createSignedUrl(e,3600);if(r)throw r;return t.signedUrl},o9=async(e,t)=>{const{data:r,error:n}=await Le.from("task_email_settings").select("*").eq("scope_type",e).eq("scope_code",t).single();if(n){if(n.code==="PGRST116")return null;throw n}return r},ile=async e=>{const{error:t}=await Le.from("task_email_settings").upsert(e,{onConflict:"scope_type,scope_code"});if(t)throw t},C3=async(e,t,r)=>{var a;const n=await o9("GLOBAL","ALL");if(!(!(n!=null&&n.enabled)||!t.assigned_to_email))try{const i=n.subject_templates[e]||"",s=n.body_templates[e]||"",o=c=>c.replace(/\{\{title\}\}/g,t.title).replace(/\{\{description\}\}/g,t.description||"").replace(/\{\{assigned_name\}\}/g,t.assigned_to_name).replace(/\{\{status\}\}/g,t.status).replace(/\{\{priority\}\}/g,t.priority).replace(/\{\{due_date\}\}/g,t.due_at?new Date(t.due_at).toLocaleDateString("es-CL"):"Sin fecha").replace(/\{\{creator\}\}/g,t.created_by_supervisor).replace(/\{\{reason\}\}/g,t.rejected_reason||"");await gl.sendEmail({audience:"manual",manualRecipients:[t.assigned_to_email],cc:((a=n.cc_emails)==null?void 0:a.split(",").map(c=>c.trim()).filter(Boolean))||[],subject:o(i),body:o(s).replace(/\n/g,"<br>")})}catch(i){console.error("Error sending task email:",i)}},sle=async()=>{const{data:e,error:t}=await Le.from("staff").select("id, nombre, email, cargo, terminal_code").eq("status","ACTIVO").order("nombre");if(t)throw t;return e||[]},An={all:["tasks"],list:(e,t)=>[...An.all,"list",e,t],detail:e=>[...An.all,"detail",e],kpis:e=>[...An.all,"kpis",e],comments:e=>[...An.all,"comments",e],attachments:e=>[...An.all,"attachments",e],staff:["staff-for-assignment"],emailSettings:e=>[...An.all,"emailSettings",e]},tw=e=>{const t=zt(a=>a.context),r=Ar(a=>a.session),n=t.mode==="ALL"?"ALL":t.value||"ALL";return Ut({queryKey:An.list(n,e),queryFn:()=>Voe(t,e,r==null?void 0:r.supervisorName)})},ole=e=>Ut({queryKey:An.detail(e||""),queryFn:()=>T3(e),enabled:!!e}),lle=()=>{const e=zt(r=>r.context),t=e.mode==="ALL"?"ALL":e.value||"ALL";return Ut({queryKey:An.kpis(t),queryFn:()=>Goe(e)})},cle=()=>{const e=Lt(),t=Ar(r=>r.session);return Dt({mutationFn:r=>Koe(r,(t==null?void 0:t.supervisorName)||""),onSuccess:()=>{e.invalidateQueries({queryKey:An.all})}})},ule=()=>{const e=Lt();return Dt({mutationFn:({id:t,values:r})=>Xoe(t,r),onSuccess:(t,{id:r})=>{e.invalidateQueries({queryKey:An.all}),e.invalidateQueries({queryKey:An.detail(r)})}})},l9=()=>{const e=Lt(),t=Ar(r=>r.session);return Dt({mutationFn:({id:r,status:n})=>Yoe(r,n,(t==null?void 0:t.supervisorName)||""),onSuccess:()=>{e.invalidateQueries({queryKey:An.all})}})},dle=()=>{const e=Lt(),t=Ar(r=>r.session);return Dt({mutationFn:({id:r,accepted:n,note:a,reason:i})=>Joe(r,n,(t==null?void 0:t.supervisorName)||"",a,i),onSuccess:()=>{e.invalidateQueries({queryKey:An.all})}})},fle=e=>Ut({queryKey:An.comments(e||""),queryFn:()=>Qoe(e),enabled:!!e}),hle=()=>{const e=Lt(),t=Ar(r=>r.session);return Dt({mutationFn:({taskId:r,body:n})=>Zoe(r,n,(t==null?void 0:t.supervisorName)||""),onSuccess:(r,{taskId:n})=>{e.invalidateQueries({queryKey:An.comments(n)})}})},ple=e=>Ut({queryKey:An.attachments(e||""),queryFn:()=>ele(e),enabled:!!e}),mle=()=>{const e=Lt(),t=Ar(r=>r.session);return Dt({mutationFn:({taskId:r,file:n})=>tle(r,n,(t==null?void 0:t.supervisorName)||""),onSuccess:(r,{taskId:n})=>{e.invalidateQueries({queryKey:An.attachments(n)})}})},gle=()=>{const e=Lt(),t=Ar(r=>r.session);return Dt({mutationFn:({taskId:r,url:n,label:a})=>rle(r,n,a,(t==null?void 0:t.supervisorName)||""),onSuccess:(r,{taskId:n})=>{e.invalidateQueries({queryKey:An.attachments(n)})}})},vle=()=>{const e=Lt();return Dt({mutationFn:({id:t,storagePath:r,taskId:n})=>nle(t,r),onSuccess:(t,{taskId:r})=>{e.invalidateQueries({queryKey:An.attachments(r)})}})},xle=()=>Ut({queryKey:An.staff,queryFn:sle,staleTime:5*60*1e3}),yle=(e,t)=>Ut({queryKey:An.emailSettings(`${e}-${t}`),queryFn:()=>o9(e,t)}),ble=()=>{const e=Lt();return Dt({mutationFn:t=>ile(t),onSuccess:()=>{e.invalidateQueries({queryKey:An.all})}})},wle=["ISAAC AVILA","CLAUDIO ARRIAGADA","CRISTIAN LURASCHI"],Rh=e=>e.toUpperCase().trim().replace(/\s+/g," "),pb=e=>{const t=Rh(e);return wle.some(r=>Rh(r)===t||t.includes(Rh(r))||Rh(r).includes(t))},c9=(e,t)=>Rh(e)===Rh(t),u9=(e,t,r)=>{if(t)return["PENDIENTE","EN_CURSO","TERMINADO","EVALUADO","RECHAZADO"];if(r)switch(e){case"PENDIENTE":return["EN_CURSO"];case"EN_CURSO":return["TERMINADO"];case"RECHAZADO":return["EN_CURSO"];default:return[]}return[]},_le=[{value:"todos",label:"Todos"},{value:"PENDIENTE",label:"Pendiente"},{value:"EN_CURSO",label:"En Curso"},{value:"TERMINADO",label:"Terminado"},{value:"EVALUADO",label:"Evaluado"},{value:"RECHAZADO",label:"Rechazado"}],k3=[{value:"BAJA",label:"Baja",color:"bg-slate-100 text-slate-700"},{value:"MEDIA",label:"Media",color:"bg-blue-100 text-blue-700"},{value:"ALTA",label:"Alta",color:"bg-amber-100 text-amber-700"},{value:"CRITICA",label:"Critica",color:"bg-red-100 text-red-700"}],Sle=["PENDIENTE","EN_CURSO","TERMINADO","EVALUADO","RECHAZADO"],O3=e=>{switch(e){case"PENDIENTE":return"bg-slate-100 text-slate-700 border-slate-300";case"EN_CURSO":return"bg-blue-100 text-blue-700 border-blue-300";case"TERMINADO":return"bg-amber-100 text-amber-700 border-amber-300";case"EVALUADO":return"bg-green-100 text-green-700 border-green-300";case"RECHAZADO":return"bg-red-100 text-red-700 border-red-300"}},$g=e=>{var t;return((t=k3.find(r=>r.value===e))==null?void 0:t.color)||""},aj=({task:e,onClose:t,onSuccess:r})=>{const n=zt(g=>g.context),a=cle(),i=ule(),s=xle(),[o,c]=M.useState({title:"",description:"",terminal_code:n.mode==="TERMINAL"?n.value:"EL_ROBLE",priority:"MEDIA",assigned_to_name:"",assigned_to_email:"",due_at:"",period_start:"",period_end:""}),[u,d]=M.useState(""),[f,p]=M.useState(!1);M.useEffect(()=>{var g;e&&c({title:e.title,description:e.description||"",terminal_code:e.terminal_code,priority:e.priority,assigned_to_staff_id:e.assigned_to_staff_id||void 0,assigned_to_name:e.assigned_to_name,assigned_to_email:e.assigned_to_email||"",due_at:((g=e.due_at)==null?void 0:g.slice(0,16))||"",period_start:e.period_start||"",period_end:e.period_end||""})},[e]);const h=(s.data||[]).filter(g=>g.nombre.toLowerCase().includes(u.toLowerCase())).slice(0,8),v=g=>{c(b=>({...b,assigned_to_staff_id:g.id,assigned_to_name:g.nombre,assigned_to_email:g.email||""})),d(""),p(!1)},m=async g=>{g.preventDefault();try{e?await i.mutateAsync({id:e.id,values:o}):await a.mutateAsync(o),r()}catch(b){console.error("Error saving task:",b)}},x=o.title&&o.assigned_to_name&&o.terminal_code,y=a.isPending||i.isPending;return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),l.jsxs("div",{className:"relative w-full max-w-2xl bg-white rounded-2xl shadow-2xl max-h-[90vh] overflow-hidden",children:[l.jsx("div",{className:"bg-brand-600 text-white p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-xl font-bold",children:e?"Editar Tarea":"Nueva Tarea"}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg",children:l.jsx(xe,{name:"x",size:24})})]})}),l.jsxs("form",{onSubmit:m,className:"p-6 overflow-y-auto max-h-[calc(90vh-180px)]",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Ttulo"}),l.jsx("input",{type:"text",className:"input",value:o.title,onChange:g=>c(b=>({...b,title:g.target.value})),placeholder:"Descripcin breve de la tarea",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Descripcin"}),l.jsx("textarea",{className:"input min-h-[80px]",value:o.description,onChange:g=>c(b=>({...b,description:g.target.value})),placeholder:"Detalles adicionales..."})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Terminal"}),l.jsx("select",{className:"input",value:o.terminal_code,onChange:g=>c(b=>({...b,terminal_code:g.target.value})),required:!0,children:es.map(g=>l.jsx("option",{value:g.value,children:g.label},g.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Prioridad"}),l.jsx("select",{className:"input",value:o.priority,onChange:g=>c(b=>({...b,priority:g.target.value})),children:k3.map(g=>l.jsx("option",{value:g.value,children:g.label},g.value))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Asignar a"}),l.jsxs("div",{className:"relative",children:[o.assigned_to_name&&l.jsxs("div",{className:"mb-2 inline-flex items-center gap-2 px-3 py-1 bg-brand-100 text-brand-800 rounded-full text-sm",children:[l.jsx(xe,{name:"user",size:14}),l.jsx("span",{children:o.assigned_to_name}),l.jsx("button",{type:"button",onClick:()=>c(g=>({...g,assigned_to_staff_id:void 0,assigned_to_name:"",assigned_to_email:""})),className:"hover:text-brand-600",children:l.jsx(xe,{name:"x",size:14})})]}),l.jsx("input",{type:"text",className:"input",value:u,onChange:g=>{d(g.target.value),p(!0)},onFocus:()=>p(!0),placeholder:"Buscar personal..."}),f&&h.length>0&&l.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.map(g=>l.jsxs("button",{type:"button",onClick:()=>v(g),className:"w-full px-4 py-2 text-left hover:bg-slate-50 border-b last:border-b-0",children:[l.jsx("div",{className:"font-medium text-sm",children:g.nombre}),l.jsxs("div",{className:"text-xs text-slate-500",children:[g.cargo," - ",g.terminal_code]})]},g.id))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Correo del asignado (opcional)"}),l.jsx("input",{type:"email",className:"input",value:o.assigned_to_email,onChange:g=>c(b=>({...b,assigned_to_email:g.target.value})),placeholder:"correo@ejemplo.cl"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Vencimiento"}),l.jsx("input",{type:"datetime-local",className:"input",value:o.due_at,onChange:g=>c(b=>({...b,due_at:g.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Periodo desde"}),l.jsx("input",{type:"date",className:"input",value:o.period_start,onChange:g=>c(b=>({...b,period_start:g.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Periodo hasta"}),l.jsx("input",{type:"date",className:"input",value:o.period_end,onChange:g=>c(b=>({...b,period_end:g.target.value}))})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-6 mt-6 border-t",children:[l.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:!x||y,className:"btn btn-primary",children:y?"Guardando...":e?"Actualizar":"Crear Tarea"})]})]})]})]})},Nle={PENDIENTE:"Pendiente",EN_CURSO:"En Curso",TERMINADO:"Terminado",EVALUADO:"Evaluado",RECHAZADO:"Rechazado"},jle=({onOpenTask:e})=>{const t=Ar(m=>m.session),r=(t==null?void 0:t.supervisorName)??"",n=pb(r),[a,i]=M.useState(!1),[s,o]=M.useState(null),c=tw(),u=l9(),d=m=>(c.data||[]).filter(x=>x.status===m),f=m=>{o(m)},p=m=>{m.preventDefault()},h=async m=>{if(!s||s.status===m){o(null);return}const x=pb(r),y=c9(r,s.assigned_to_name);if(!u9(s.status,x,y).includes(m)){o(null);return}await u.mutateAsync({id:s.id,status:m}),o(null)},v=m=>{if(!m)return null;const x=new Date(m),g=x<new Date;return l.jsx("span",{className:`text-xs ${g?"text-red-600 font-medium":"text-slate-500"}`,children:x.toLocaleDateString("es-CL",{day:"2-digit",month:"short"})})};return l.jsxs("div",{className:"space-y-4",children:[l.jsx(mn,{title:"Tablero de Tareas",description:"Vista Kanban con arrastrar y soltar",actions:n&&l.jsxs("button",{className:"btn btn-primary",onClick:()=>i(!0),children:[l.jsx(xe,{name:"plus",size:18})," Nueva Tarea"]})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 overflow-x-auto pb-4",children:Sle.map(m=>l.jsxs("div",{className:"bg-slate-100 rounded-xl p-3 min-h-[400px]",onDragOver:p,onDrop:()=>h(m),children:[l.jsxs("div",{className:`flex items-center justify-between mb-3 px-2 py-1 rounded-lg ${O3(m)}`,children:[l.jsx("span",{className:"font-semibold text-sm",children:Nle[m]}),l.jsx("span",{className:"text-xs font-medium px-2 py-0.5 bg-white/50 rounded-full",children:d(m).length})]}),l.jsx("div",{className:"space-y-2",children:d(m).map(x=>l.jsxs("div",{draggable:!0,onDragStart:()=>f(x),onClick:()=>e(x.id),className:`bg-white rounded-lg p-3 shadow-sm cursor-pointer hover:shadow-md transition-shadow border-l-4 ${(s==null?void 0:s.id)===x.id?"opacity-50":""}`,style:{borderLeftColor:x.priority==="CRITICA"?"#ef4444":x.priority==="ALTA"?"#f59e0b":x.priority==="MEDIA"?"#3b82f6":"#94a3b8"},children:[l.jsx("div",{className:"font-medium text-sm text-slate-800 line-clamp-2",children:x.title}),l.jsxs("div",{className:"flex items-center justify-between mt-2",children:[l.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${$g(x.priority)}`,children:x.priority}),v(x.due_at)]}),l.jsx("div",{className:"text-xs text-slate-500 mt-2 truncate",children:x.assigned_to_name})]},x.id))})]},m))}),a&&l.jsx(aj,{onClose:()=>i(!1),onSuccess:()=>i(!1)})]})},Ale=({onOpenTask:e})=>{const t=zt(m=>m.context),r=zt(m=>m.setContext),n=Ar(m=>m.session),a=(n==null?void 0:n.supervisorName)??"",i=pb(a),[s,o]=M.useState({status:"todos",priority:"todos"}),[c,u]=M.useState(!1),[d,f]=M.useState(null),p=tw(s),h=[{key:"due_at",header:"Vencimiento",value:m=>m.due_at?new Date(m.due_at).toLocaleDateString("es-CL"):""},{key:"title",header:"Ttulo",value:m=>m.title},{key:"terminal",header:"Terminal",value:m=>or(m.terminal_code)},{key:"priority",header:"Prioridad",value:m=>m.priority},{key:"assigned",header:"Asignado",value:m=>m.assigned_to_name},{key:"status",header:"Estado",value:m=>m.status},{key:"created",header:"Creado",value:m=>new Date(m.created_at).toLocaleDateString("es-CL")}],v=m=>{if(!m)return"-";const x=new Date(m),g=x<new Date;return l.jsx("span",{className:g?"text-red-600 font-medium":"",children:x.toLocaleDateString("es-CL",{day:"2-digit",month:"short"})})};return l.jsxs("div",{className:"space-y-4",children:[l.jsx(mn,{title:"Lista de Tareas",description:"Vista de tabla con filtros avanzados",actions:l.jsxs("div",{className:"flex gap-2",children:[i&&l.jsxs("button",{className:"btn btn-primary",onClick:()=>u(!0),children:[l.jsx(xe,{name:"plus",size:18})," Nueva Tarea"]}),l.jsx(_a,{onExportView:()=>mr({filename:"tareas",sheetName:"Tareas",rows:p.data||[],columns:h}),onExportAll:()=>mr({filename:"tareas_all",sheetName:"Tareas",rows:p.data||[],columns:h})})]})}),l.jsxs(ns,{terminalContext:t,onTerminalChange:r,children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsx("select",{className:"input",value:s.status,onChange:m=>o(x=>({...x,status:m.target.value})),children:_le.map(m=>l.jsx("option",{value:m.value,children:m.label},m.value))})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Prioridad"}),l.jsxs("select",{className:"input",value:s.priority,onChange:m=>o(x=>({...x,priority:m.target.value})),children:[l.jsx("option",{value:"todos",children:"Todas"}),k3.map(m=>l.jsx("option",{value:m.value,children:m.label},m.value))]})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Buscar"}),l.jsx("input",{className:"input",placeholder:"Ttulo o descripcin",value:s.search??"",onChange:m=>o(x=>({...x,search:m.target.value}))})]}),l.jsx("div",{className:"flex items-end",children:l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:s.only_mine||!1,onChange:m=>o(x=>({...x,only_mine:m.target.checked})),className:"w-4 h-4 rounded"}),l.jsx("span",{className:"text-sm",children:"Solo mis tareas"})]})})]}),p.isLoading&&l.jsx(kn,{label:"Cargando tareas..."}),p.isError&&l.jsx(Da,{onRetry:()=>p.refetch()}),!p.isLoading&&!p.isError&&l.jsx("div",{className:"table-container overflow-x-auto",children:l.jsxs("table",{className:"table",children:[l.jsx("thead",{className:"table-header",children:l.jsxs("tr",{children:[l.jsx("th",{className:"table-header-cell",children:"Vence"}),l.jsx("th",{className:"table-header-cell",children:"Ttulo"}),l.jsx("th",{className:"table-header-cell",children:"Terminal"}),l.jsx("th",{className:"table-header-cell",children:"Prioridad"}),l.jsx("th",{className:"table-header-cell",children:"Asignado"}),l.jsx("th",{className:"table-header-cell",children:"Estado"}),l.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),l.jsx("tbody",{className:"table-body",children:(p.data||[]).length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"table-cell text-center text-slate-500 py-8",children:"No hay tareas"})}):(p.data||[]).map(m=>l.jsxs("tr",{className:"table-row cursor-pointer hover:bg-slate-50",onClick:()=>e(m.id),children:[l.jsx("td",{className:"table-cell text-sm",children:v(m.due_at)}),l.jsx("td",{className:"table-cell font-medium",children:m.title}),l.jsx("td",{className:"table-cell text-sm",children:or(m.terminal_code)}),l.jsx("td",{className:"table-cell",children:l.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${$g(m.priority)}`,children:m.priority})}),l.jsx("td",{className:"table-cell text-sm",children:m.assigned_to_name}),l.jsx("td",{className:"table-cell",children:l.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${O3(m.status)}`,children:m.status})}),l.jsx("td",{className:"table-cell",onClick:x=>x.stopPropagation(),children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[l.jsx("button",{onClick:()=>e(m.id),className:"btn btn-ghost btn-icon",title:"Ver",children:l.jsx(xe,{name:"eye",size:16})}),i&&l.jsx("button",{onClick:()=>f(m),className:"btn btn-ghost btn-icon",title:"Editar",children:l.jsx(xe,{name:"edit",size:16})})]})})]},m.id))})]})}),c&&l.jsx(aj,{onClose:()=>u(!1),onSuccess:()=>u(!1)}),d&&l.jsx(aj,{task:d,onClose:()=>f(null),onSuccess:()=>f(null)})]})},Ele=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],Tle=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],Cle=({onOpenTask:e})=>{const t=new Date,[r,n]=M.useState(t.getFullYear()),[a,i]=M.useState(t.getMonth()),[s,o]=M.useState(null),c=tw(),u=M.useMemo(()=>{const v=new Date(r,a,1),x=new Date(r,a+1,0).getDate(),y=v.getDay(),g=[];for(let b=0;b<y;b++)g.push(null);for(let b=1;b<=x;b++)g.push(b);return g},[r,a]),d=v=>{if(!c.data)return[];const m=`${r}-${String(a+1).padStart(2,"0")}-${String(v).padStart(2,"0")}`;return c.data.filter(x=>x.due_at&&x.due_at.startsWith(m)?!0:x.period_start&&x.period_end?m>=x.period_start&&m<=x.period_end:!1)},f=s?d(parseInt(s.split("-")[2])):[],p=()=>{a===0?(i(11),n(r-1)):i(a-1)},h=()=>{a===11?(i(0),n(r+1)):i(a+1)};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(mn,{title:"Calendario de Tareas",description:"Vista mensual con vencimientos y periodos"}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("button",{onClick:p,className:"btn btn-ghost btn-icon",children:l.jsx(xe,{name:"chevron-right",size:20,className:"rotate-180"})}),l.jsxs("h3",{className:"text-lg font-bold text-slate-800",children:[Ele[a]," ",r]}),l.jsx("button",{onClick:h,className:"btn btn-ghost btn-icon",children:l.jsx(xe,{name:"chevron-right",size:20})})]}),l.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:Tle.map(v=>l.jsx("div",{className:"text-center text-xs font-semibold text-slate-500 py-2",children:v},v))}),l.jsx("div",{className:"grid grid-cols-7 gap-1",children:u.map((v,m)=>{if(v===null)return l.jsx("div",{className:"h-20"},`e-${m}`);const x=d(v),y=`${r}-${String(a+1).padStart(2,"0")}-${String(v).padStart(2,"0")}`,g=v===t.getDate()&&a===t.getMonth()&&r===t.getFullYear(),b=s===y;return l.jsxs("button",{onClick:()=>o(y),className:`h-20 rounded-lg border text-left p-1 transition-all ${b?"border-brand-500 bg-brand-50":"border-transparent hover:bg-slate-50"} ${g?"ring-2 ring-brand-400":""}`,children:[l.jsx("span",{className:`text-sm font-medium ${g?"text-brand-600":"text-slate-700"}`,children:v}),l.jsxs("div",{className:"mt-1 space-y-0.5 overflow-hidden",children:[x.slice(0,2).map(S=>l.jsx("div",{className:`text-[10px] px-1 rounded truncate ${$g(S.priority)}`,children:S.title},S.id)),x.length>2&&l.jsxs("span",{className:"text-[10px] text-slate-500",children:["+",x.length-2]})]})]},v)})})]}),l.jsxs("div",{className:"card p-6",children:[l.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[l.jsx(xe,{name:"clipboard",size:18}),s?`Tareas: ${new Date(s+"T12:00:00").toLocaleDateString("es-CL",{day:"numeric",month:"long"})}`:"Selecciona un da"]}),s===null?l.jsx("p",{className:"text-sm text-slate-500",children:"Haz clic en un da para ver las tareas"}):f.length===0?l.jsx("p",{className:"text-sm text-slate-500",children:"Sin tareas para este da"}):l.jsx("div",{className:"space-y-2",children:f.map(v=>l.jsxs("button",{onClick:()=>e(v.id),className:"w-full text-left p-3 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors",children:[l.jsx("div",{className:"font-medium text-sm",children:v.title}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${$g(v.priority)}`,children:v.priority}),l.jsx("span",{className:"text-xs text-slate-500",children:v.assigned_to_name})]})]},v.id))})]})]})]})},kle=()=>{const e=lle();tw();const t=e.data,r=[{key:"metric",header:"Mtrica",value:i=>i.metric},{key:"value",header:"Valor",value:i=>i.value.toString()}],n=t?[{metric:"Pendientes",value:t.pending},{metric:"En Curso",value:t.inProgress},{metric:"Terminadas",value:t.completed},{metric:"Evaluadas",value:t.evaluated},{metric:"Rechazadas",value:t.rejected},{metric:"Vencidas",value:t.overdue}]:[],a=({label:i,value:s,icon:o,color:c})=>l.jsx("div",{className:`card p-4 border-l-4 ${c}`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-slate-800",children:s}),l.jsx("div",{className:"text-sm text-slate-500",children:i})]}),l.jsx("div",{className:"p-3 bg-slate-100 rounded-full",children:l.jsx(xe,{name:o,size:24,className:"text-slate-600"})})]})});return e.isLoading?l.jsx(kn,{label:"Cargando reportes..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsx(mn,{title:"Reportes de Tareas",description:"KPIs y mtricas de rendimiento",actions:l.jsx(_a,{onExportView:()=>mr({filename:"reporte_tareas",sheetName:"KPIs",rows:n,columns:r}),onExportAll:()=>mr({filename:"reporte_tareas",sheetName:"KPIs",rows:n,columns:r})})}),t&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[l.jsx(a,{label:"Pendientes",value:t.pending,icon:"clock",color:"border-slate-400"}),l.jsx(a,{label:"En Curso",value:t.inProgress,icon:"activity",color:"border-blue-500"}),l.jsx(a,{label:"Terminadas",value:t.completed,icon:"check",color:"border-amber-500"}),l.jsx(a,{label:"Evaluadas",value:t.evaluated,icon:"check-circle",color:"border-green-500"}),l.jsx(a,{label:"Rechazadas",value:t.rejected,icon:"x-circle",color:"border-red-500"}),l.jsx(a,{label:"Vencidas",value:t.overdue,icon:"alert-triangle",color:"border-orange-500"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"card p-6",children:[l.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Distribucin por Estado"}),l.jsx("div",{className:"space-y-3",children:[{label:"Pendientes",value:t.pending,color:"bg-slate-400"},{label:"En Curso",value:t.inProgress,color:"bg-blue-500"},{label:"Terminadas",value:t.completed,color:"bg-amber-500"},{label:"Evaluadas",value:t.evaluated,color:"bg-green-500"},{label:"Rechazadas",value:t.rejected,color:"bg-red-500"}].map(i=>{const s=t.pending+t.inProgress+t.completed+t.evaluated+t.rejected,o=s>0?i.value/s*100:0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[l.jsx("span",{children:i.label}),l.jsx("span",{className:"font-medium",children:i.value})]}),l.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full ${i.color} rounded-full`,style:{width:`${o}%`}})})]},i.label)})})]}),l.jsxs("div",{className:"card p-6",children:[l.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Resumen General"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded-lg",children:[l.jsx("span",{className:"text-slate-600",children:"Total de tareas"}),l.jsx("span",{className:"text-xl font-bold text-brand-600",children:t.pending+t.inProgress+t.completed+t.evaluated+t.rejected})]}),l.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded-lg",children:[l.jsx("span",{className:"text-slate-600",children:"Tasa de cumplimiento"}),l.jsx("span",{className:"text-xl font-bold text-green-600",children:(()=>{const i=t.evaluated,s=t.pending+t.inProgress+t.completed+t.evaluated;return s>0?`${Math.round(i/s*100)}%`:"0%"})()})]}),l.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50 rounded-lg",children:[l.jsx("span",{className:"text-slate-600",children:"Requieren atencin"}),l.jsx("span",{className:"text-xl font-bold text-red-600",children:t.overdue+t.rejected})]})]})]})]})]})]})},Ole=()=>{const e=yle("GLOBAL","ALL"),t=ble(),[r,n]=M.useState(!0),[a,i]=M.useState(""),[s,o]=M.useState({assigned:"Nueva tarea asignada: {{title}}",status_change:"Tarea actualizada: {{title}}",overdue:"Tarea vencida: {{title}}",evaluated_ok:"Tarea evaluada: {{title}}",evaluated_reject:"Tarea rechazada: {{title}}"}),[c,u]=M.useState({assigned:"",status_change:"",overdue:"",evaluated_ok:"",evaluated_reject:""});M.useEffect(()=>{e.data&&(n(e.data.enabled),i(e.data.cc_emails||""),o(e.data.subject_templates),u(e.data.body_templates))},[e.data]);const d=async()=>{await t.mutateAsync({scope_type:"GLOBAL",scope_code:"ALL",enabled:r,cc_emails:a||null,subject_templates:s,body_templates:c})},f=[{key:"assigned",label:"Al asignar tarea"},{key:"status_change",label:"Cambio de estado"},{key:"overdue",label:"Tarea vencida"},{key:"evaluated_ok",label:"Tarea aceptada"},{key:"evaluated_reject",label:"Tarea rechazada"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsx(mn,{title:"Configuracin",description:"Ajustes de correo y notificaciones para tareas"}),l.jsxs("div",{className:"card p-6 max-w-3xl",children:[l.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[l.jsx(xe,{name:"send",size:18})," Configuracin de Correos"]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-slate-800",children:"Notificaciones por correo"}),l.jsx("div",{className:"text-sm text-slate-500",children:"Enviar correos al asignar, cambiar estado o evaluar tareas"})]}),l.jsx("button",{onClick:()=>n(!r),className:`relative w-12 h-6 rounded-full transition-colors ${r?"bg-brand-600":"bg-slate-300"}`,children:l.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${r?"left-7":"left-1"}`})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Correos en copia (CC)"}),l.jsx("input",{type:"text",className:"input",value:a,onChange:p=>i(p.target.value),placeholder:"correo1@ejemplo.cl, correo2@ejemplo.cl"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Separar mltiples correos con coma"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-medium text-slate-700",children:"Plantillas de correo"}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Variables: ","{{title}}, {{description}}, {{assigned_name}}, {{status}}, {{priority}}, {{due_date}}, {{creator}}, {{reason}}"]}),f.map(({key:p,label:h})=>l.jsxs("div",{className:"border rounded-lg p-4",children:[l.jsx("div",{className:"font-medium text-sm text-slate-700 mb-2",children:h}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("input",{type:"text",className:"input text-sm",placeholder:"Asunto",value:s[p],onChange:v=>o(m=>({...m,[p]:v.target.value}))}),l.jsx("textarea",{className:"input min-h-[80px] text-sm font-mono",placeholder:"Cuerpo del correo",value:c[p],onChange:v=>u(m=>({...m,[p]:v.target.value}))})]})]},p))]}),l.jsx("div",{className:"flex justify-end pt-4 border-t",children:l.jsx("button",{onClick:d,disabled:t.isPending,className:"btn btn-primary",children:t.isPending?"Guardando...":"Guardar Configuracin"})})]})]})]})},Ple=({mode:e,taskTitle:t,onConfirm:r,onCancel:n,isLoading:a})=>{const[i,s]=M.useState(""),o=e==="accept";return l.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:n}),l.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 animate-scale-in",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:`p-3 rounded-full ${o?"bg-green-100":"bg-red-100"}`,children:l.jsx(xe,{name:o?"check-circle":"x-circle",size:24,className:o?"text-green-600":"text-red-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800",children:o?"Aceptar Tarea":"Rechazar Tarea"}),l.jsx("p",{className:"text-sm text-slate-500",children:t})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"label",children:o?"Nota de evaluacin (opcional)":"Motivo de rechazo"}),l.jsx("textarea",{className:"input min-h-[100px] resize-none",value:i,onChange:c=>s(c.target.value),placeholder:o?"Comentario sobre la tarea completada...":"Indique por qu se rechaza la tarea...",required:!o})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",children:"Cancelar"}),l.jsx("button",{onClick:()=>r(o?i:void 0,o?void 0:i),disabled:!o&&!i.trim()||a,className:`btn ${o?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"} text-white`,children:a?"Procesando...":o?"Aceptar":"Rechazar"})]})]})]})},Lle=({taskId:e,onClose:t})=>{const r=Ar(Z=>Z.session),n=(r==null?void 0:r.supervisorName)??"",a=pb(n),[i,s]=M.useState("info"),[o,c]=M.useState(""),[u,d]=M.useState(null),[f,p]=M.useState({url:"",label:""}),h=ole(e),v=fle(e),m=ple(e),x=hle(),y=mle(),g=gle(),b=vle(),S=l9(),_=dle(),j=h.data,A=j?c9(n,j.assigned_to_name):!1,E=j?u9(j.status,a,A):[],T=async Z=>{await S.mutateAsync({id:e,status:Z})},L=async()=>{o.trim()&&(await x.mutateAsync({taskId:e,body:o}),c(""))},k=async Z=>{var ie;const K=(ie=Z.target.files)==null?void 0:ie[0];K&&(await y.mutateAsync({taskId:e,file:K}),Z.target.value="")},R=async()=>{f.url.trim()&&(await g.mutateAsync({taskId:e,url:f.url,label:f.label||f.url}),p({url:"",label:""}))},D=async Z=>{const K=await ale(Z);window.open(K,"_blank")},q=async(Z,K,ie)=>{await _.mutateAsync({id:e,accepted:Z,note:K,reason:ie}),d(null)};if(h.isLoading)return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:l.jsx(kn,{label:"Cargando tarea..."})});if(!j)return null;const X=Z=>new Date(Z).toLocaleString("es-CL"),se=[{id:"info",label:"Info",icon:"info"},{id:"comments",label:"Comentarios",icon:"clipboard"},{id:"attachments",label:"Adjuntos",icon:"file"}];return l.jsxs("div",{className:"fixed inset-0 z-50 flex bg-black/50 backdrop-blur-sm",children:[l.jsxs("div",{className:"w-full h-full bg-white flex flex-col lg:flex-row animate-scale-in",children:[l.jsxs("div",{className:"lg:w-64 bg-slate-50 border-b lg:border-b-0 lg:border-r border-slate-200 p-4 flex lg:flex-col gap-2 overflow-x-auto lg:overflow-visible shrink-0",children:[se.map(Z=>l.jsxs("button",{onClick:()=>s(Z.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all whitespace-nowrap ${i===Z.id?"bg-brand-600 text-white":"text-slate-600 hover:bg-slate-200"}`,children:[l.jsx(xe,{name:Z.icon,size:18}),l.jsx("span",{className:"hidden lg:inline",children:Z.label})]},Z.id)),l.jsxs("button",{onClick:t,className:"mt-auto flex items-center gap-2 px-4 py-2 rounded-lg text-slate-600 hover:bg-slate-200",children:[l.jsx(xe,{name:"x",size:18})," ",l.jsx("span",{className:"hidden lg:inline",children:"Cerrar"})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[l.jsxs("div",{className:"mb-6 pb-4 border-b",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:j.title}),l.jsx("p",{className:"text-slate-500 mt-1",children:j.description||"Sin descripcin"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${$g(j.priority)}`,children:j.priority}),l.jsx("span",{className:`px-3 py-1 rounded-full text-sm border ${O3(j.status)}`,children:j.status})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[E.filter(Z=>Z!==j.status&&!["EVALUADO","RECHAZADO"].includes(Z)).map(Z=>l.jsxs("button",{onClick:()=>T(Z),className:"btn btn-secondary text-sm",disabled:S.isPending,children:["Cambiar a ",Z]},Z)),a&&j.status==="TERMINADO"&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>d("accept"),className:"btn bg-green-600 hover:bg-green-700 text-white text-sm",children:[l.jsx(xe,{name:"check-circle",size:16})," Aceptar"]}),l.jsxs("button",{onClick:()=>d("reject"),className:"btn bg-red-600 hover:bg-red-700 text-white text-sm",children:[l.jsx(xe,{name:"x-circle",size:16})," Rechazar"]})]})]})]}),i==="info"&&l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm text-slate-500",children:"Terminal"}),l.jsx("div",{className:"font-medium",children:or(j.terminal_code)})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm text-slate-500",children:"Asignado a"}),l.jsx("div",{className:"font-medium",children:j.assigned_to_name})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm text-slate-500",children:"Vencimiento"}),l.jsx("div",{className:"font-medium",children:j.due_at?X(j.due_at):"Sin fecha"})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm text-slate-500",children:"Creado por"}),l.jsx("div",{className:"font-medium",children:j.created_by_supervisor})]}),j.evaluated_by&&l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg md:col-span-2",children:[l.jsx("div",{className:"text-sm text-slate-500",children:"Evaluado por"}),l.jsxs("div",{className:"font-medium",children:[j.evaluated_by," - ",j.evaluated_at?X(j.evaluated_at):""]}),j.evaluation_note&&l.jsx("div",{className:"text-sm text-slate-600 mt-1",children:j.evaluation_note})]}),j.rejected_reason&&l.jsxs("div",{className:"bg-red-50 p-4 rounded-lg md:col-span-2 border border-red-200",children:[l.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Motivo de rechazo"}),l.jsx("div",{className:"text-red-700 mt-1",children:j.rejected_reason})]})]}),i==="comments"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("textarea",{className:"input flex-1 min-h-[80px]",value:o,onChange:Z=>c(Z.target.value),placeholder:"Agregar comentario o actualizacin..."}),l.jsx("button",{onClick:L,disabled:!o.trim()||x.isPending,className:"btn btn-primary self-end",children:l.jsx(xe,{name:"send",size:16})})]}),l.jsx("div",{className:"space-y-3",children:(v.data||[]).map(Z=>l.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"font-medium text-slate-700",children:Z.author_name}),l.jsx("span",{className:"text-slate-400",children:new Date(Z.created_at).toLocaleString("es-CL")})]}),l.jsx("div",{className:"mt-2 text-slate-600",children:Z.body})]},Z.id))})]}),i==="attachments"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:l.jsxs("label",{className:"btn btn-secondary cursor-pointer inline-flex items-center gap-2",children:[l.jsx(xe,{name:"upload",size:16})," Subir archivo",l.jsx("input",{type:"file",className:"hidden",accept:".pdf,.png,.jpg,.jpeg,.xlsx",onChange:k})]})}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 p-3 bg-slate-50 rounded-lg",children:[l.jsx("input",{type:"url",className:"input flex-1",placeholder:"URL",value:f.url,onChange:Z=>p(K=>({...K,url:Z.target.value}))}),l.jsx("input",{type:"text",className:"input flex-1",placeholder:"Etiqueta (opcional)",value:f.label,onChange:Z=>p(K=>({...K,label:Z.target.value}))}),l.jsx("button",{onClick:R,disabled:!f.url,className:"btn btn-secondary shrink-0",children:l.jsx(xe,{name:"plus",size:16})})]}),l.jsx("div",{className:"space-y-2",children:(m.data||[]).map(Z=>l.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(xe,{name:Z.type==="URL"?"activity":"file",size:20,className:"text-slate-400"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-sm",children:Z.file_name}),Z.size_bytes&&l.jsxs("div",{className:"text-xs text-slate-500",children:[(Z.size_bytes/1024).toFixed(1)," KB"]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[Z.type==="FILE"&&Z.storage_path&&l.jsx("button",{onClick:()=>D(Z.storage_path),className:"btn btn-ghost btn-icon",children:l.jsx(xe,{name:"eye",size:16})}),Z.type==="URL"&&Z.url&&l.jsx("a",{href:Z.url,target:"_blank",rel:"noopener noreferrer",className:"btn btn-ghost btn-icon",children:l.jsx(xe,{name:"eye",size:16})}),l.jsx("button",{onClick:()=>b.mutate({id:Z.id,storagePath:Z.storage_path,taskId:e}),className:"btn btn-ghost btn-icon text-red-500",children:l.jsx(xe,{name:"trash",size:16})})]})]},Z.id))})]})]})]}),u&&l.jsx(Ple,{mode:u,taskTitle:j.title,onConfirm:(Z,K)=>q(u==="accept",Z,K),onCancel:()=>d(null),isLoading:_.isPending})]})},Rle=[{id:"kanban",label:"Tablero",icon:"layers"},{id:"lista",label:"Lista",icon:"clipboard"},{id:"calendario",label:"Calendario",icon:"calendar"},{id:"reportes",label:"Reportes",icon:"bar-chart"},{id:"config",label:"Configuracin",icon:"settings"}],Ile=()=>{const[e,t]=M.useState("kanban"),[r,n]=M.useState(null),a=o=>{n(o)},i=()=>{n(null)},s=()=>{switch(e){case"kanban":return l.jsx(jle,{onOpenTask:a});case"lista":return l.jsx(Ale,{onOpenTask:a});case"calendario":return l.jsx(Cle,{onOpenTask:a});case"reportes":return l.jsx(kle,{});case"config":return l.jsx(Ole,{});default:return null}};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 border-b border-slate-200 pb-4",children:l.jsx("div",{className:"flex flex-wrap gap-2",children:Rle.map(o=>l.jsxs("button",{onClick:()=>t(o.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${e===o.id?"bg-brand-600 text-white shadow-md":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[l.jsx(xe,{name:o.icon,size:18}),l.jsx("span",{className:"hidden sm:inline",children:o.label})]},o.id))})}),s(),r&&l.jsx(Lle,{taskId:r,onClose:i})]})},kc=({columns:e,rows:t,emptyMessage:r="Sin resultados"})=>t.length?l.jsx("div",{className:"table-container overflow-x-auto",children:l.jsxs("table",{className:"table",children:[l.jsx("thead",{className:"table-header",children:l.jsx("tr",{children:e.map(n=>l.jsx("th",{scope:"col",className:"table-header-cell",children:n.header},n.key))})}),l.jsx("tbody",{className:"table-body",children:t.map((n,a)=>l.jsx("tr",{className:"table-row",children:e.map(i=>l.jsx("td",{className:"table-cell",children:i.render?i.render(n):n[i.key]},i.key))},a))})]})}):l.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50/50 px-6 py-12 text-center",children:[l.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-slate-100 mb-3",children:l.jsx("svg",{className:"h-6 w-6 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),l.jsx("p",{className:"text-sm font-medium text-slate-600",children:r}),l.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"No hay datos para mostrar en este momento"})]}),Oc=({label:e="Sin datos",description:t})=>l.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50/50 px-6 py-12 text-center",children:[l.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-slate-100 mb-4",children:l.jsx("svg",{className:"h-7 w-7 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),l.jsx("p",{className:"text-sm font-semibold text-slate-700",children:e}),t&&l.jsx("p",{className:"mt-1 text-xs text-slate-500 max-w-xs",children:t})]}),rw=(e,t)=>({list:async({terminalContext:r,filters:n,scope:a})=>{const i=sY(e,r);return a==="all"?i:t?i.filter(s=>t(s,n)):i}}),Dle=[{id:"i-1",titulo:"Actualizacin de protocolos",fecha:"2023-12-02",enviadoPor:"Equipo Seguridad",alcance:"todos",terminal:"EL_ROBLE"},{id:"i-2",titulo:"Corte programado",fecha:"2023-12-03",enviadoPor:"Operaciones",alcance:"terminal",terminal:"LA_REINA"},{id:"i-3",titulo:"Campaa de seguridad",fecha:"2023-12-01",enviadoPor:"Prevencin",alcance:"segmentado",terminal:"EL_SALTO"}],EO=rw(Dle,(e,t)=>t!=null&&t.alcance&&t.alcance!=="todos"?e.alcance===t.alcance:!0),Mle=()=>{var L;const e=zt(k=>k.context),t=zt(k=>k.setContext),[r,n]=M.useState({alcance:"todos"}),[a,i]=M.useState("todos"),[s,o]=M.useState("EL_ROBLE"),[c,u]=M.useState(""),[d,f]=M.useState(""),[p,h]=M.useState(""),[v,m]=M.useState(!1),[x,y]=M.useState(""),[g,b]=M.useState(""),S=Ut({queryKey:["informativos",e,r],queryFn:()=>EO.list({terminalContext:e,filters:r,scope:"view"})}),_=M.useMemo(()=>[{key:"titulo",header:"Ttulo"},{key:"enviadoPor",header:"Enviado por"},{key:"alcance",header:"Alcance",render:k=>l.jsx("span",{className:"badge",children:k.alcance}),value:k=>k.alcance},{key:"fecha",header:"Fecha",render:k=>Ia(k.fecha),value:k=>Ia(k.fecha)},{key:"terminal",header:"Terminal",render:k=>or(k.terminal),value:k=>or(k.terminal)}],[]),j=_.map(k=>({key:k.key,header:k.header,value:R=>k.value?k.value(R):R[k.key]})),A=()=>{S.data&&mr({filename:"informativos_vista",sheetName:"Informativos",rows:S.data,columns:j})},E=async()=>{const k=await EO.list({terminalContext:e,scope:"all"});mr({filename:"informativos_completo",sheetName:"Informativos",rows:k,columns:j})},T=async()=>{b(""),m(!0);try{const k=await gl.sendEmail({audience:a,terminalCodes:a==="por_terminal"?[s]:void 0,manualRecipients:a==="manual"?c.split(",").map(R=>R.trim()).filter(Boolean):void 0,subject:d,body:p});y(`Correo enviado (${k.messageId})`),f(""),h(""),u("")}catch(k){b(k.message)}finally{m(!1)}};return l.jsxs("div",{className:"space-y-4",children:[l.jsx(mn,{title:"Informativos",description:"Comunicaciones internas con opciones de envo por terminal.",actions:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"btn btn-primary",children:"Nuevo informativo"}),l.jsx(_a,{onExportView:A,onExportAll:E})]})}),l.jsx(ns,{terminalContext:e,onTerminalChange:t,children:l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Alcance"}),l.jsxs("select",{className:"input",value:r.alcance,onChange:k=>n({alcance:k.target.value}),children:[l.jsx("option",{value:"todos",children:"Todos"}),l.jsx("option",{value:"terminal",children:"Por terminal"}),l.jsx("option",{value:"segmentado",children:"Segmentado"})]})]})}),S.isLoading&&l.jsx(kn,{}),S.isError&&l.jsx(Da,{onRetry:S.refetch}),!S.isLoading&&!S.isError&&l.jsxs(l.Fragment,{children:[!((L=S.data)!=null&&L.length)&&l.jsx(Oc,{description:"No hay informativos con los filtros actuales."}),S.data&&S.data.length>0&&l.jsx(kc,{columns:_,rows:S.data})]}),l.jsxs("div",{className:"card p-4",children:[l.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-base font-semibold text-slate-900",children:"Enviar correo interno"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Mdulo preparado para conectar a Edge Function."})]}),l.jsxs("div",{className:"flex flex-col items-end gap-1 text-right",children:[x&&l.jsx("span",{className:"badge",children:x}),g&&l.jsx("span",{className:"text-xs font-semibold text-red-600",children:g})]})]}),l.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"label",children:"Destinatarios"}),l.jsxs("select",{className:"input",value:a,onChange:k=>i(k.target.value),children:[l.jsx("option",{value:"todos",children:"Todos"}),l.jsx("option",{value:"por_terminal",children:"Por terminal"}),l.jsx("option",{value:"manual",children:"Lista manual"})]})]}),a==="por_terminal"&&l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"label",children:"Terminal objetivo"}),l.jsx("select",{className:"input",value:s,onChange:k=>o(k.target.value),children:es.map(k=>l.jsx("option",{value:k.value,children:k.label},k.value))})]}),a==="manual"&&l.jsxs("div",{className:"space-y-1 md:col-span-2",children:[l.jsx("label",{className:"label",children:"Correos (separados por coma)"}),l.jsx("input",{className:"input",value:c,onChange:k=>u(k.target.value),placeholder:"correo1@dominio.com, correo2@dominio.com"})]}),l.jsxs("div",{className:"md:col-span-3 grid gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"label",children:"Asunto"}),l.jsx("input",{className:"input",value:d,onChange:k=>f(k.target.value)})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"label",children:"Mensaje"}),l.jsx("textarea",{className:"input min-h-[120px]",value:p,onChange:k=>h(k.target.value),placeholder:"Contenido del correo"})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{className:"btn btn-primary",onClick:T,disabled:v||!d||!p,children:v?"Enviando...":"Enviar (mock)"})})]})]})]})]})},Fle=["ISAAC AVILA","CLAUDIO ARRIAGADA","CRISTIAN LURASCHI"],$le={EL_ROBLE:"CRISTIAN LURASCHI",LA_REINA:"CRISTIAN LURASCHI"},Zu=e=>e.trim().replace(/\s+/g," ").toUpperCase(),zv=e=>{const t=Zu(e);return Fle.includes(t)},Ble=e=>$le[e]??"",qv=({data:e,isLoading:t})=>{if(t)return l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[...Array(4)].map((n,a)=>l.jsxs("div",{className:"card p-4 animate-pulse",children:[l.jsx("div",{className:"h-4 bg-slate-200 rounded w-24 mb-2"}),l.jsx("div",{className:"h-8 bg-slate-200 rounded w-12"})]},a))});if(!e)return null;const r=[{label:"Pendientes Hoy",value:e.pendingToday,icon:"clock",bgClass:"bg-warning-50 border-warning-200",textClass:"text-warning-700",iconClass:"text-warning-500"},{label:"Pendientes Total",value:e.pendingTotal,icon:"inbox",bgClass:"bg-orange-50 border-orange-200",textClass:"text-orange-700",iconClass:"text-orange-500"},{label:"Autorizados (30d)",value:e.authorizedRange,icon:"check-circle",bgClass:"bg-success-50 border-success-200",textClass:"text-success-700",iconClass:"text-success-500"},{label:"Rechazados (30d)",value:e.rejectedRange,icon:"x",bgClass:"bg-danger-50 border-danger-200",textClass:"text-danger-700",iconClass:"text-danger-500"}];return l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:r.map(n=>l.jsxs("div",{className:`card p-4 ${n.bgClass}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(xe,{name:n.icon,size:18,className:n.iconClass}),l.jsx("span",{className:"text-xs font-semibold text-slate-600 uppercase",children:n.label})]}),l.jsx("p",{className:`text-2xl font-bold ${n.textClass}`,children:n.value})]},n.label))})},vl=({mode:e,itemName:t,onConfirm:r,onCancel:n,isLoading:a})=>{const[i,s]=M.useState(""),o=u=>{u.preventDefault(),!(e==="reject"&&!i.trim())&&r(i.trim()||void 0)},c=e==="authorize";return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:n}),l.jsxs("div",{className:"relative w-full max-w-md card p-6 animate-scale-in",children:[l.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[l.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-full ${c?"bg-success-100":"bg-danger-100"}`,children:l.jsx(xe,{name:c?"check-circle":"x",size:24,className:c?"text-success-600":"text-danger-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900",children:c?"Autorizar Registro":"Rechazar Registro"}),l.jsx("p",{className:"text-sm text-slate-600",children:c?`Confirmas la autorizacin de "${t}"?`:`Confirmas el rechazo de "${t}"?`})]})]}),l.jsxs("form",{onSubmit:o,children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"label",children:c?"Comentario (opcional)":"Motivo del rechazo *"}),l.jsx("textarea",{className:"input min-h-[80px]",value:i,onChange:u=>s(u.target.value),placeholder:c?"Agregar comentario...":"Describe el motivo del rechazo...",required:!c})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",disabled:a,children:"Cancelar"}),l.jsx("button",{type:"submit",className:`btn ${c?"btn-success":"btn-danger"}`,disabled:a||!c&&!i.trim(),children:a?l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Procesando..."]}):c?"Autorizar":"Rechazar"})]})]})]})]})},nw=({value:e,onChange:t,onStaffFound:r,disabled:n})=>{const[a,i]=M.useState(""),[s,o]=M.useState(!1),[c,u]=M.useState(null),[d,f]=M.useState(!1);M.useEffect(()=>{e&&i(Xn(e))},[e]);const p=m=>{if(i(m),u(null),f(!1),UN(m).valid){const y=Qu(m);t(y),h(y)}else t(""),r(null)},h=async m=>{o(!0);try{const x=await Tse(m);x?(f(!0),r(x)):(u("RUT no encontrado en Personal"),r(null))}catch{u("Error al buscar RUT"),r(null)}finally{o(!1)}},v=()=>{e&&i(Xn(e))};return l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"RUT"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",className:`input pr-10 ${c?"border-danger-500":d?"border-success-500":""}`,value:a,onChange:m=>p(m.target.value),onBlur:v,placeholder:"12.345.678-9",disabled:n}),l.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:s?l.jsxs("svg",{className:"animate-spin h-4 w-4 text-slate-400",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):d?l.jsx(xe,{name:"check-circle",size:18,className:"text-success-500"}):c?l.jsx(xe,{name:"x",size:18,className:"text-danger-500"}):l.jsx(xe,{name:"search",size:18,className:"text-slate-400"})})]}),c&&l.jsx("p",{className:"mt-1 text-xs text-danger-600",children:c}),d&&l.jsx("p",{className:"mt-1 text-xs text-success-600",children:"Datos cargados desde Personal"})]})},Ule=({initialData:e,supervisorName:t,onSubmit:r,onCancel:n,isLoading:a})=>{const[i,s]=M.useState({rut:"",nombre:"",area:"Logstica",cargo:"",jefe_terminal:"",terminal_code:"EL_ROBLE",cabezal:"",incident_state:"",schedule_in_out:"",date:new Date().toISOString().split("T")[0],time_range:"",observations:"",informed_by:t,...e});M.useEffect(()=>{const u=Ble(i.terminal_code);u&&s(d=>({...d,jefe_terminal:u}))},[i.terminal_code]);const o=u=>{u&&s(d=>({...d,nombre:u.nombre,cargo:u.cargo,terminal_code:u.terminal_code}))},c=u=>{u.preventDefault(),r(i)};return l.jsxs("form",{onSubmit:c,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(nw,{value:i.rut,onChange:u=>s(d=>({...d,rut:u})),onStaffFound:o,disabled:!!(e!=null&&e.rut)}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Nombre"}),l.jsx("input",{type:"text",className:"input",value:i.nombre,onChange:u=>s(d=>({...d,nombre:u.target.value})),required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"rea"}),l.jsx("input",{type:"text",className:"input",value:i.area,onChange:u=>s(d=>({...d,area:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Cargo"}),l.jsx("input",{type:"text",className:"input",value:i.cargo,onChange:u=>s(d=>({...d,cargo:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Terminal"}),l.jsx("select",{className:"input",value:i.terminal_code,onChange:u=>s(d=>({...d,terminal_code:u.target.value})),required:!0,children:es.map(u=>l.jsx("option",{value:u.value,children:u.label},u.value))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Jefe de Terminal"}),l.jsx("input",{type:"text",className:"input",value:i.jefe_terminal,onChange:u=>s(d=>({...d,jefe_terminal:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Cabezal"}),l.jsx("input",{type:"text",className:"input",value:i.cabezal,onChange:u=>s(d=>({...d,cabezal:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Estado (Incidente)"}),l.jsx("input",{type:"text",className:"input",value:i.incident_state,onChange:u=>s(d=>({...d,incident_state:u.target.value}))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Horario Entrada/Salida"}),l.jsx("input",{type:"text",className:"input",value:i.schedule_in_out,onChange:u=>s(d=>({...d,schedule_in_out:u.target.value})),placeholder:"08:00-18:00"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha"}),l.jsx("input",{type:"date",className:"input",value:i.date,onChange:u=>s(d=>({...d,date:u.target.value})),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Horario (Rango)"}),l.jsx("input",{type:"text",className:"input",value:i.time_range,onChange:u=>s(d=>({...d,time_range:u.target.value})),placeholder:"10:00-14:00"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Observaciones"}),l.jsx("textarea",{className:"input min-h-[80px]",value:i.observations,onChange:u=>s(d=>({...d,observations:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Informado Por"}),l.jsx("input",{type:"text",className:"input",value:i.informed_by,onChange:u=>s(d=>({...d,informed_by:u.target.value}))})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[l.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",disabled:a,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?"Guardando...":e?"Guardar Cambios":"Crear Registro"})]})]})},P3=async e=>{const{data:t,error:r}=await Le.from("app_configuration").select("value").eq("key",e).single();return r?(r.code==="PGRST116"||console.error(`Error fetching config ${e}:`,r),null):t.value},zle=async(e,t,r)=>{const{error:n}=await Le.from("app_configuration").upsert({key:e,value:t,description:r},{onConflict:"key"});if(n)throw console.error(`Error updating config ${e}:`,n),n},qle=async(e,t)=>{if(!gr())return[];const r=Fi(e);let n=Le.from("attendance_no_marcaciones").select("*").in("terminal_code",r).order("date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}t!=null&&t.date_from&&(n=n.gte("date",t.date_from)),t!=null&&t.date_to&&(n=n.lte("date",t.date_to));const{data:a,error:i}=await n;if(i)throw i;return a||[]},Hle=async(e,t)=>{const{data:r,error:n}=await Le.from("attendance_no_marcaciones").insert({...e,created_by_supervisor:Zu(t)}).select().single();if(n)throw Ci("Error al crear registro","No se pudo guardar el registro de No Marcacin"),n;try{await Hv("No Marcaciones",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.date,createdBy:t,details:{rea:e.area||"",Cargo:e.cargo||"","Jefe Terminal":e.jefe_terminal||"",Observaciones:e.observations||""}}),Ii("Registro creado exitosamente",`No Marcacin para ${e.nombre} guardado y correo enviado`,t)}catch{Ii("Registro creado",`No Marcacin para ${e.nombre} guardado (correo no enviado)`,t)}return r},Wle=async(e,t)=>{const{data:r,error:n}=await Le.from("attendance_no_marcaciones").update(t).eq("id",e).select().single();if(n)throw n;return r},Vle=async(e,t)=>{if(!gr())return[];const r=Fi(e);let n=Le.from("attendance_sin_credenciales").select("*").in("terminal_code",r).order("date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}const{data:a,error:i}=await n;if(i)throw i;return a||[]},Gle=async(e,t)=>{const{data:r,error:n}=await Le.from("attendance_sin_credenciales").insert({...e,created_by_supervisor:Zu(t)}).select().single();if(n)throw Ci("Error al crear registro","No se pudo guardar el registro de Sin Credenciales"),n;try{await Hv("Sin Credenciales",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.date,createdBy:t,details:{Cabezal:e.cabezal||"",Horario:`${e.start_time||""} - ${e.end_time||""}`,Cargo:e.cargo||"","Supervisor Autoriza":e.supervisor_autoriza||""}}),Ii("Registro creado exitosamente",`Sin Credenciales para ${e.nombre} guardado y correo enviado`,t)}catch{Ii("Registro creado",`Sin Credenciales para ${e.nombre} guardado (correo no enviado)`,t)}return r},Kle=async(e,t)=>{const{data:r,error:n}=await Le.from("attendance_sin_credenciales").update(t).eq("id",e).select().single();if(n)throw n;return r},Xle=async(e,t)=>{if(!gr())return[];const r=Fi(e);let n=Le.from("attendance_cambios_dia").select("*").in("terminal_code",r).order("date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}const{data:a,error:i}=await n;if(i)throw i;return a||[]},Yle=async(e,t)=>{let r=null;if(e.document){const u=e.document.name.split(".").pop(),d=`cambios-dia/${Date.now()}.${u}`,{error:f}=await Le.storage.from("attendance-docs").upload(d,e.document);if(f)throw console.error("Storage Upload Error Detail:",f),Ci("Error al subir documento","Verifica que el archivo sea imagen o PDF y menor a 5MB"),new Error(`Error al subir documento: ${f.message}`);r=d}const{document:n,...a}=e,i={...a,document_path:r,created_by_supervisor:Zu(t)};["day_off_date","day_on_date","prog_start","prog_end","reprogram_start","reprogram_end","day_off_start","day_off_end","day_on_start","day_on_end"].forEach(u=>{i[u]===""&&(i[u]=null)});const{data:o,error:c}=await Le.from("attendance_cambios_dia").insert(i).select().single();if(c)throw Ci("Error al crear registro","No se pudo guardar el registro de Cambio de Da"),c;try{let u="No adjunto";if(r){const{data:d}=Le.storage.from("attendance-docs").getPublicUrl(r);u=`<a href="${d.publicUrl}" target="_blank" style="color: #2563eb; text-decoration: underline; font-weight: 700;">Ver Documento Adjunto</a>`}await Hv("Cambios de Da",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.date,createdBy:t,details:{"Jornada Programada":`${e.prog_start||""} - ${e.prog_end||""}`,"Da No Trabaja":e.day_off_date||"","Da Trabaja":e.day_on_date||"",Documento:u}}),Ii("Registro creado exitosamente",`Cambio de Da para ${e.nombre} guardado y correo enviado`,t)}catch{Ii("Registro creado",`Cambio de Da para ${e.nombre} guardado (correo no enviado)`,t)}return o},Jle=async(e,t)=>{const{document:r,...n}=t,a={...n};["day_off_date","day_on_date","prog_start","prog_end","reprogram_start","reprogram_end","day_off_start","day_off_end","day_on_start","day_on_end"].forEach(c=>{a[c]===""&&(a[c]=null)});const{data:s,error:o}=await Le.from("attendance_cambios_dia").update(a).eq("id",e).select().single();if(o)throw o;return s},Qle=async e=>{const{data:t,error:r}=await Le.storage.from("attendance-docs").createSignedUrl(e,3600);if(r)throw r;return t.signedUrl},Zle=async(e,t)=>{if(!gr())return[];const r=Fi(e);let n=Le.from("attendance_autorizaciones").select("*").in("terminal_code",r).order("authorization_date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}const{data:a,error:i}=await n;if(i)throw i;return a||[]},ece=async(e,t)=>{const{data:r,error:n}=await Le.from("attendance_autorizaciones").insert({...e,created_by_supervisor:Zu(t)}).select().single();if(n)throw Ci("Error al crear registro","No se pudo guardar la autorizacin"),n;try{await Hv("Autorizaciones",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.authorization_date,createdBy:t,details:{Tipo:e.entry_or_exit==="ENTRADA"?"Llegada Tarda":"Retiro Anticipado",Horario:e.horario||"",Turno:e.turno||"",Motivo:e.motivo||""}}),Ii("Registro creado exitosamente",`Autorizacin para ${e.nombre} guardada y correo enviado`,t)}catch{Ii("Registro creado",`Autorizacin para ${e.nombre} guardada (correo no enviado)`,t)}return r},tce=async(e,t)=>{const{data:r,error:n}=await Le.from("attendance_autorizaciones").update(t).eq("id",e).select().single();if(n)throw n;return r},rce=async(e,t,r)=>{const{error:n}=await Le.from(e).update({auth_status:"AUTORIZADO",authorized_by:Zu(r),authorized_at:new Date().toISOString()}).eq("id",t);if(n)throw n},nce=async(e,t,r,n)=>{const{error:a}=await Le.from(e).update({auth_status:"RECHAZADO",authorized_by:Zu(r),authorized_at:new Date().toISOString(),rejection_reason:n}).eq("id",t);if(a)throw a},ace=async(e,t,r="date")=>{if(!gr())return{pendingToday:0,pendingTotal:0,authorizedRange:0,rejectedRange:0};const n=Fi(t),a=new Date().toISOString().split("T")[0],{count:i}=await Le.from(e).select("*",{count:"exact",head:!0}).in("terminal_code",n).eq("auth_status","PENDIENTE").eq(r,a),{count:s}=await Le.from(e).select("*",{count:"exact",head:!0}).in("terminal_code",n).eq("auth_status","PENDIENTE"),o=new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],{count:c}=await Le.from(e).select("*",{count:"exact",head:!0}).in("terminal_code",n).eq("auth_status","AUTORIZADO").gte(r,o),{count:u}=await Le.from(e).select("*",{count:"exact",head:!0}).in("terminal_code",n).eq("auth_status","RECHAZADO").gte(r,o);return{pendingToday:i??0,pendingTotal:s??0,authorizedRange:c??0,rejectedRange:u??0}},ice=(e,t)=>{const r=Le.channel("attendance-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_no_marcaciones"},()=>e("attendance_no_marcaciones")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_no_marcaciones"},()=>t("attendance_no_marcaciones")).on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_sin_credenciales"},()=>e("attendance_sin_credenciales")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_sin_credenciales"},()=>t("attendance_sin_credenciales")).on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_cambios_dia"},()=>e("attendance_cambios_dia")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_cambios_dia"},()=>t("attendance_cambios_dia")).on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_autorizaciones"},()=>e("attendance_autorizaciones")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_autorizaciones"},()=>t("attendance_autorizaciones")).on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_vacaciones"},()=>e("attendance_vacaciones")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_vacaciones"},()=>t("attendance_vacaciones")).subscribe();return()=>{Le.removeChannel(r)}},L3=(e,t)=>{const r=new Date(e+"T12:00:00"),n=new Date(t+"T12:00:00");let a=0;const i=new Date(r);for(;i<=n;){const s=i.getDay();s!==0&&s!==6&&a++,i.setDate(i.getDate()+1)}return a},R3=(e,t)=>{const r=new Date(e+"T12:00:00"),n=new Date(t+"T12:00:00"),a=Math.abs(n.getTime()-r.getTime());return Math.ceil(a/(1e3*60*60*24))+1},sce=async(e,t,r)=>{const{count:n,error:a}=await Le.from("staff").select("*",{count:"exact",head:!0}).eq("cargo",e).eq("terminal_code",t).eq("turno",r).eq("status","ACTIVO");if(a)throw a;return n??0},d9=async(e,t,r,n,a,i)=>{let s=Le.from("attendance_vacaciones").select("*").eq("cargo",e).eq("terminal_code",t).eq("turno",r).in("auth_status",["PENDIENTE","AUTORIZADO"]).lte("start_date",a).gte("end_date",n);i&&(s=s.neq("rut",i));const{data:o,error:c}=await s;if(c)throw c;const u=await sce(e,t,r),d=new Set((o==null?void 0:o.map(h=>h.rut))||[]).size,f=u-d-1;let p=0;if(o&&o.length>0){const h=new Date(n),v=new Date(a);for(const m of o){const x=new Date(m.start_date),y=new Date(m.end_date),g=new Date(Math.max(h.getTime(),x.getTime())),b=new Date(Math.min(v.getTime(),y.getTime())),S=Math.ceil((b.getTime()-g.getTime())/(1e3*60*60*24))+1;S>p&&(p=S)}}return{hasConflict:((o==null?void 0:o.length)??0)>0,conflictingVacations:(o||[]).map(h=>({nombre:h.nombre,cargo:h.cargo,turno:h.turno,start_date:h.start_date,end_date:h.end_date})),totalStaffCount:u,availableStaffCount:Math.max(0,f),overlappingDays:p}},oce=async(e,t)=>{if(!gr())return[];const r=Fi(e);let n=Le.from("attendance_vacaciones").select("*").in("terminal_code",r).order("start_date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}t!=null&&t.date_from&&(n=n.gte("start_date",t.date_from)),t!=null&&t.date_to&&(n=n.lte("end_date",t.date_to));const{data:a,error:i}=await n;if(i)throw i;return a||[]},lce=async(e,t)=>{const r=R3(e.start_date,e.end_date),n=L3(e.start_date,e.end_date),a=await d9(e.cargo,e.terminal_code,e.turno,e.start_date,e.end_date),i=a.hasConflict?`${a.conflictingVacations.length} persona(s) en misma posicin en vacaciones. Disponibles: ${a.availableStaffCount}/${a.totalStaffCount}`:null,{data:s,error:o}=await Le.from("attendance_vacaciones").insert({rut:e.rut,nombre:e.nombre,cargo:e.cargo,terminal_code:e.terminal_code,turno:e.turno,start_date:e.start_date,end_date:e.end_date,return_date:e.return_date,calendar_days:r,business_days:n,has_conflict:a.hasConflict,conflict_authorized:e.conflict_authorized,conflict_details:i,created_by_supervisor:Zu(t)}).select().single();if(o)throw Ci("Error al crear registro","No se pudo guardar la solicitud de vacaciones"),o;try{const c=a.hasConflict?`<strong style="color: #dc2626;">ADVERTENCIA:</strong> ${i}`:"Sin conflictos detectados";await Hv("Vacaciones",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.start_date,createdBy:t,details:{"Fecha Inicio":e.start_date,"Fecha Trmino":e.end_date,"Fecha Vuelta":e.return_date,"Das Calendario":r.toString(),"Das a Descontar":n.toString(),Conflictos:c}}),Ii("Solicitud de vacaciones creada",`Vacaciones para ${e.nombre} (${n} das hbiles) registradas`,t)}catch{Ii("Solicitud creada",`Vacaciones para ${e.nombre} registradas (correo no enviado)`,t)}return s},cce=async(e,t)=>{const r={...t};t.start_date&&t.end_date&&(r.calendar_days=R3(t.start_date,t.end_date),r.business_days=L3(t.start_date,t.end_date));const{data:n,error:a}=await Le.from("attendance_vacaciones").update(r).eq("id",e).select().single();if(a)throw a;return n},f9="isaac.avila@transdev.cl",Wi={check:`<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="28" cy="28" r="26" fill="#dcfce7" stroke="#22c55e" stroke-width="3"/>
        <path d="M18 28L24 34L38 20" stroke="#16a34a" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,x:`<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="28" cy="28" r="26" fill="#fee2e2" stroke="#ef4444" stroke-width="3"/>
        <path d="M20 20L36 36M36 20L20 36" stroke="#dc2626" stroke-width="4" stroke-linecap="round"/>
    </svg>`,clock:`<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="28" cy="28" r="26" fill="#fef3c7" stroke="#f59e0b" stroke-width="3"/>
        <circle cx="28" cy="28" r="3" fill="#d97706"/>
        <path d="M28 16V28L36 33" stroke="#d97706" stroke-width="3" stroke-linecap="round"/>
    </svg>`,user:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="9" cy="5" r="3.5" stroke="#64748b" stroke-width="1.5"/>
        <path d="M2 16C2 12.686 5.13401 10 9 10C12.866 10 16 12.686 16 16" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,id:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="1.5" y="3.5" width="15" height="11" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <circle cx="6" cy="8" r="1.5" stroke="#64748b" stroke-width="1"/>
        <path d="M4 12C4 10.8954 4.89543 10 6 10C7.10457 10 8 10.8954 8 12" stroke="#64748b" stroke-width="1"/>
        <path d="M10.5 7.5H14.5M10.5 10H13" stroke="#64748b" stroke-width="1.2" stroke-linecap="round"/>
    </svg>`,building:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M2 16V3.5C2 3.22386 2.22386 3 2.5 3H9.5C9.77614 3 10 3.22386 10 3.5V16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M10 7H14.5C14.7761 7 15 7.22386 15 7.5V16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M5 6H7M5 9H7M5 12H7M12 10H13M12 13H13" stroke="#64748b" stroke-width="1.2" stroke-linecap="round"/>
        <path d="M1 16H17" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,calendar:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="2" y="3.5" width="14" height="12" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <path d="M2 7H16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M5.5 1.5V4.5M12.5 1.5V4.5" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`},h9=e=>new Date(e+"T12:00:00").toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Oo=(e,t,r,n=!1)=>`
    <tr>
        <td style="padding: 12px 16px; border-bottom: 1px solid #e2e8f0; width: 40%; vertical-align: middle;">
            <table role="presentation" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="padding-right: 12px; vertical-align: middle;">${e}</td>
                    <td style="font-size: 11px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">${t}</td>
                </tr>
            </table>
        </td>
        <td style="padding: 12px 16px; border-bottom: 1px solid #e2e8f0; font-size: 14px; font-weight: ${n?"700":"500"}; color: ${n?"#0f172a":"#334155"}; text-align: right;">${r}</td>
    </tr>
`,p9=async(e,t,r,n,a,i,s)=>{const o=e==="AUTORIZADO",c=o?"#16a34a":"#dc2626",u=o?"#f0fdf4":"#fef2f2",d=o?"#bbf7d0":"#fecaca",f=o?Wi.check:Wi.x,p=`${t} ${e} - ${n}`,h=`
        <!-- Status Banner -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
            <tr>
                <td style="background: ${u}; border: 1px solid ${d}; border-radius: 12px; padding: 24px; text-align: center;">
                    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                        <tr>
                            <td align="center" style="padding-bottom: 8px;">
                                ${f}
                            </td>
                        </tr>
                        <tr>
                            <td align="center">
                                <span style="font-size: 11px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 4px;">Estado del Registro</span>
                                <span style="font-size: 20px; font-weight: 800; color: ${c}; letter-spacing: -0.5px;">${e}</span>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
        
        <!-- Data Table -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate;">
            ${Oo(Wi.id,"Subseccin",t,!0)}
            ${Oo(Wi.id,"RUT",Xn(r))}
            ${Oo(Wi.user,"Trabajador",n)}
            ${Oo(Wi.building,"Terminal",or(a))}
            ${Oo(Wi.calendar,"Fecha",h9(i))}
            ${s?Oo(Wi.id,"Motivo",s,!0):""}
        </table>
    `.trim(),v=await P3("email_notifications"),m=v!=null&&v.to&&v.to.length>0?v.to:[f9],x=(v==null?void 0:v.cc)||[];try{await gl.sendEmail({audience:"manual",manualRecipients:m,cc:x,subject:p,body:h})}catch(y){console.error("Error sending authorization email:",y)}},Hv=async(e,t)=>{const r=t.details?Object.entries(t.details).filter(([c,u])=>u&&u.trim()).map(([c,u])=>Oo(Wi.id,c,u)).join(""):"",n=`Nuevo Registro: ${e}`,a=`
        <!-- Worker Name Header -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
            <tr>
                <td align="center">
                    <h2 style="margin: 0; font-size: 24px; font-weight: 800; color: #0f172a;">${t.nombre}</h2>
                </td>
            </tr>
        </table>
        
        <!-- Status Banner -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
            <tr>
                <td style="background: #fffbeb; border: 1px solid #fde68a; border-radius: 12px; padding: 24px; text-align: center;">
                    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                        <tr>
                            <td align="center" style="padding-bottom: 8px;">
                                ${Wi.clock}
                            </td>
                        </tr>
                        <tr>
                            <td align="center">
                                <span style="font-size: 11px; font-weight: 700; color: #92400e; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 4px;">Estado del Registro</span>
                                <span style="font-size: 18px; font-weight: 800; color: #b45309; letter-spacing: -0.5px;">PENDIENTE DE AUTORIZACIN</span>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
        
        <!-- Subsection Badge -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
            <tr>
                <td align="center">
                    <span style="display: inline-block; padding: 8px 20px; background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 100px; color: #2563eb; font-size: 12px; font-weight: 700; letter-spacing: 0.5px; text-transform: uppercase;">${e}</span>
                </td>
            </tr>
        </table>
        
        <!-- Data Table -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate;">
            ${Oo(Wi.id,"RUT",Xn(t.rut))}
            ${Oo(Wi.user,"Trabajador",t.nombre,!0)}
            ${Oo(Wi.building,"Terminal",or(t.terminal))}
            ${Oo(Wi.calendar,"Fecha",h9(t.date))}
            ${r}
        </table>
        
        <!-- Registered By -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-top: 24px;">
            <tr>
                <td style="padding: 16px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px;">
                    <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
                        <tr>
                            <td width="40" style="padding-right: 12px; vertical-align: middle;">
                                <div style="width: 40px; height: 40px; background: #2563eb; border-radius: 50%; text-align: center; line-height: 40px; color: white; font-weight: 700; font-size: 16px;">${t.createdBy.charAt(0)}</div>
                            </td>
                            <td style="vertical-align: middle;">
                                <span style="display: block; font-size: 10px; color: #64748b; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 2px;">Registrado por</span>
                                <span style="display: block; font-size: 14px; font-weight: 700; color: #0f172a;">${t.createdBy}</span>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    `.trim(),i=await P3("email_notifications"),s=i!=null&&i.to&&i.to.length>0?i.to:[f9],o=(i==null?void 0:i.cc)||[];try{await gl.sendEmail({audience:"manual",manualRecipients:s,cc:o,subject:n,body:a})}catch(c){console.error("Error sending record created email:",c)}},Wv=[{value:"todos",label:"Todos"},{value:"PENDIENTE",label:"Pendiente"},{value:"AUTORIZADO",label:"Autorizado"},{value:"RECHAZADO",label:"Rechazado"}],m9=[{value:"ENTRADA",label:"Llegada Tarda"},{value:"SALIDA",label:"Retiro Anticipado"}],g9={"asistencia-2026":"Asistencia 2026","no-marcaciones":"No Marcaciones","sin-credenciales":"Sin Credenciales","cambios-dia":"Cambios de Da",autorizaciones:"Autorizaciones",vacaciones:"Vacaciones"},an={all:["attendance"],noMarcaciones:(e,t)=>[...an.all,"no-marcaciones",e,t],sinCredenciales:(e,t)=>[...an.all,"sin-credenciales",e,t],cambiosDia:(e,t)=>[...an.all,"cambios-dia",e,t],autorizaciones:(e,t)=>[...an.all,"autorizaciones",e,t],vacaciones:(e,t)=>[...an.all,"vacaciones",e,t],kpis:(e,t)=>[...an.all,"kpis",e,t]},uce=(e,t)=>Ut({queryKey:an.noMarcaciones(e,t),queryFn:()=>qle(e,t)}),dce=(e,t)=>Ut({queryKey:an.sinCredenciales(e,t),queryFn:()=>Vle(e,t)}),fce=(e,t)=>Ut({queryKey:an.cambiosDia(e,t),queryFn:()=>Xle(e,t)}),hce=(e,t)=>Ut({queryKey:an.autorizaciones(e,t),queryFn:()=>Zle(e,t)}),pce=(e,t)=>Ut({queryKey:an.vacaciones(e,t),queryFn:()=>oce(e,t)}),I3={"asistencia-2026":"attendance_marks","no-marcaciones":"attendance_no_marcaciones","sin-credenciales":"attendance_sin_credenciales","cambios-dia":"attendance_cambios_dia",autorizaciones:"attendance_autorizaciones",vacaciones:"attendance_vacaciones"},mce={"asistencia-2026":"mark_date","no-marcaciones":"date","sin-credenciales":"date","cambios-dia":"date",autorizaciones:"authorization_date",vacaciones:"start_date"},Vv=(e,t)=>Ut({queryKey:an.kpis(e,t),queryFn:()=>ace(I3[e],t,mce[e])}),gce=()=>{const e=Lt();return Dt({mutationFn:({values:t,createdBy:r})=>Hle(t,r),onSuccess:()=>e.invalidateQueries({queryKey:an.all})})},vce=()=>{const e=Lt();return Dt({mutationFn:({values:t,createdBy:r})=>Gle(t,r),onSuccess:()=>e.invalidateQueries({queryKey:an.all})})},xce=()=>{const e=Lt();return Dt({mutationFn:({values:t,createdBy:r})=>Yle(t,r),onSuccess:()=>e.invalidateQueries({queryKey:an.all})})},yce=()=>{const e=Lt();return Dt({mutationFn:({values:t,createdBy:r})=>ece(t,r),onSuccess:()=>e.invalidateQueries({queryKey:an.all})})},bce=()=>{const e=Lt();return Dt({mutationFn:({values:t,createdBy:r})=>lce(t,r),onSuccess:()=>e.invalidateQueries({queryKey:an.all})})},wce=()=>{const e=Lt();return Dt({mutationFn:({id:t,values:r})=>Wle(t,r),onSuccess:()=>e.invalidateQueries({queryKey:an.all})})},_ce=()=>{const e=Lt();return Dt({mutationFn:({id:t,values:r})=>Kle(t,r),onSuccess:()=>e.invalidateQueries({queryKey:an.all})})},Sce=()=>{const e=Lt();return Dt({mutationFn:({id:t,values:r})=>Jle(t,r),onSuccess:()=>e.invalidateQueries({queryKey:an.all})})},Nce=()=>{const e=Lt();return Dt({mutationFn:({id:t,values:r})=>tce(t,r),onSuccess:()=>e.invalidateQueries({queryKey:an.all})})},jce=()=>{const e=Lt();return Dt({mutationFn:({id:t,values:r})=>cce(t,r),onSuccess:()=>e.invalidateQueries({queryKey:an.all})})},Gv=()=>{const e=Lt();return Dt({mutationFn:async({subsection:t,id:r,authorizedBy:n,rut:a,nombre:i,terminal:s,date:o})=>{await rce(I3[t],r,n),await p9("AUTORIZADO",g9[t],a,i,s,o)},onSuccess:()=>e.invalidateQueries({queryKey:an.all})})},Kv=()=>{const e=Lt();return Dt({mutationFn:async({subsection:t,id:r,authorizedBy:n,reason:a,rut:i,nombre:s,terminal:o,date:c})=>{await nce(I3[t],r,n,a),await p9("RECHAZADO",g9[t],i,s,o,c,a)},onSuccess:()=>e.invalidateQueries({queryKey:an.all})})},Xv=()=>{const e=Lt();M.useEffect(()=>{const t=ice(()=>e.invalidateQueries({queryKey:an.all}),()=>e.invalidateQueries({queryKey:an.all}));return()=>{t()}},[e])},Ace=()=>{const e=zt(_=>_.context),t=zt(_=>_.setContext),r=Ar(_=>_.session),n=(r==null?void 0:r.supervisorName)??"",a=zv(n),[i,s]=M.useState({auth_status:"todos"}),[o,c]=M.useState({type:"none"}),u=uce(e,i),d=Vv("no-marcaciones",e),f=gce(),p=wce(),h=Gv(),v=Kv();Xv();const m=[{key:"rut",header:"RUT",value:_=>Xn(_.rut)},{key:"nombre",header:"Nombre",value:_=>_.nombre},{key:"area",header:"rea",value:_=>_.area},{key:"cargo",header:"Cargo",value:_=>_.cargo},{key:"jefe_terminal",header:"Jefe Terminal",value:_=>_.jefe_terminal},{key:"terminal",header:"Terminal",value:_=>or(_.terminal_code)},{key:"cabezal",header:"Cabezal",value:_=>_.cabezal},{key:"incident_state",header:"Estado",value:_=>_.incident_state},{key:"date",header:"Fecha",value:_=>_.date},{key:"auth_status",header:"Autorizacin",value:_=>_.auth_status}],x=async _=>{await f.mutateAsync({values:_,createdBy:n}),c({type:"none"})},y=async _=>{o.type==="edit"&&(await p.mutateAsync({id:o.record.id,values:_}),c({type:"none"}))},g=async()=>{if(o.type!=="authorize")return;const _=o.record;await h.mutateAsync({subsection:"no-marcaciones",id:_.id,authorizedBy:n,rut:_.rut,nombre:_.nombre,terminal:_.terminal_code,date:_.date}),c({type:"none"})},b=async _=>{if(o.type!=="reject"||!_)return;const j=o.record;await v.mutateAsync({subsection:"no-marcaciones",id:j.id,authorizedBy:n,reason:_,rut:j.rut,nombre:j.nombre,terminal:j.terminal_code,date:j.date}),c({type:"none"})},S=_=>{switch(_){case"AUTORIZADO":return l.jsx("span",{className:"badge badge-success",children:_});case"RECHAZADO":return l.jsx("span",{className:"badge badge-danger",children:_});default:return l.jsx("span",{className:"badge badge-warning",children:_})}};return l.jsxs("div",{className:"space-y-4",children:[l.jsx(mn,{title:"No Marcaciones",description:"Registros de no marcacin de personal",actions:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[l.jsx(xe,{name:"clipboard",size:18})," Nuevo Registro"]}),l.jsx(_a,{onExportView:()=>mr({filename:"no_marcaciones",sheetName:"Datos",rows:u.data||[],columns:m}),onExportAll:()=>mr({filename:"no_marcaciones_all",sheetName:"Datos",rows:u.data||[],columns:m})})]})}),l.jsx(qv,{data:d.data,isLoading:d.isLoading}),l.jsxs(ns,{terminalContext:e,onTerminalChange:t,children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsx("select",{className:"input",value:i.auth_status,onChange:_=>s(j=>({...j,auth_status:_.target.value})),children:Wv.map(_=>l.jsx("option",{value:_.value,children:_.label},_.value))})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Buscar"}),l.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:_=>s(j=>({...j,search:_.target.value}))})]})]}),u.isLoading&&l.jsx(kn,{label:"Cargando registros..."}),u.isError&&l.jsx(Da,{onRetry:()=>u.refetch()}),!u.isLoading&&!u.isError&&l.jsx("div",{className:"table-container overflow-x-auto",children:l.jsxs("table",{className:"table",children:[l.jsx("thead",{className:"table-header",children:l.jsxs("tr",{children:[l.jsx("th",{className:"table-header-cell",children:"RUT"}),l.jsx("th",{className:"table-header-cell",children:"Nombre"}),l.jsx("th",{className:"table-header-cell",children:"Terminal"}),l.jsx("th",{className:"table-header-cell",children:"Fecha"}),l.jsx("th",{className:"table-header-cell",children:"Estado"}),l.jsx("th",{className:"table-header-cell",children:"Autorizacin"}),l.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),l.jsx("tbody",{className:"table-body",children:(u.data||[]).map(_=>l.jsxs("tr",{className:"table-row",children:[l.jsx("td",{className:"table-cell font-mono text-sm",children:Xn(_.rut)}),l.jsx("td",{className:"table-cell font-medium",children:_.nombre}),l.jsx("td",{className:"table-cell",children:or(_.terminal_code)}),l.jsx("td",{className:"table-cell",children:_.date}),l.jsx("td",{className:"table-cell",children:_.incident_state||"-"}),l.jsx("td",{className:"table-cell",children:S(_.auth_status)}),l.jsx("td",{className:"table-cell",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[_.auth_status==="PENDIENTE"&&l.jsx("button",{onClick:()=>c({type:"edit",record:_}),className:"btn btn-ghost btn-icon",title:"Editar",children:l.jsx(xe,{name:"clipboard",size:16})}),a&&_.auth_status==="PENDIENTE"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>c({type:"authorize",record:_}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:l.jsx(xe,{name:"check-circle",size:16})}),l.jsx("button",{onClick:()=>c({type:"reject",record:_}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:l.jsx(xe,{name:"x",size:16})})]})]})})]},_.id))})]})}),(o.type==="create"||o.type==="edit")&&l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),l.jsxs("div",{className:"relative w-full max-w-3xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-xl font-bold",children:o.type==="create"?"Nuevo Registro":"Editar Registro"}),l.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:l.jsx(xe,{name:"x",size:24})})]}),l.jsx(Ule,{initialData:o.type==="edit"?{...o.record,area:o.record.area??"Logstica",cargo:o.record.cargo??"",jefe_terminal:o.record.jefe_terminal??"",cabezal:o.record.cabezal??"",incident_state:o.record.incident_state??"",schedule_in_out:o.record.schedule_in_out??"",time_range:o.record.time_range??"",observations:o.record.observations??"",informed_by:o.record.informed_by??n}:void 0,supervisorName:n,onSubmit:o.type==="create"?x:y,onCancel:()=>c({type:"none"}),isLoading:f.isPending||p.isPending})]})]}),o.type==="authorize"&&l.jsx(vl,{mode:"authorize",itemName:o.record.nombre,onConfirm:g,onCancel:()=>c({type:"none"}),isLoading:h.isPending}),o.type==="reject"&&l.jsx(vl,{mode:"reject",itemName:o.record.nombre,onConfirm:b,onCancel:()=>c({type:"none"}),isLoading:v.isPending})]})},Ece=({initialData:e,supervisorName:t,onSubmit:r,onCancel:n,isLoading:a})=>{const[i,s]=M.useState({rut:"",nombre:"",terminal_code:"EL_ROBLE",cabezal:"",date:new Date().toISOString().split("T")[0],start_time:"",end_time:"",cargo:"",supervisor_autoriza:t,area:"Logstica",responsable:"",observacion:"",...e}),o=u=>{if(u){const[d,f]=(u.horario||"").split("-"),p=(d==null?void 0:d.trim())||"",h=(f==null?void 0:f.trim())||"";s(v=>({...v,nombre:u.nombre,cargo:u.cargo,terminal_code:u.terminal_code,start_time:p,end_time:h}))}},c=u=>{u.preventDefault(),r(i)};return l.jsxs("form",{onSubmit:c,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(nw,{value:i.rut,onChange:u=>s(d=>({...d,rut:u})),onStaffFound:o,disabled:!!(e!=null&&e.rut)}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Nombre"}),l.jsx("input",{type:"text",className:"input",value:i.nombre,onChange:u=>s(d=>({...d,nombre:u.target.value})),required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Terminal"}),l.jsx("select",{className:"input",value:i.terminal_code,onChange:u=>s(d=>({...d,terminal_code:u.target.value})),required:!0,children:es.map(u=>l.jsx("option",{value:u.value,children:u.label},u.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Cabezal"}),l.jsx("input",{type:"text",className:"input",value:i.cabezal,onChange:u=>s(d=>({...d,cabezal:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha"}),l.jsx("input",{type:"date",className:"input",value:i.date,onChange:u=>s(d=>({...d,date:u.target.value})),required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Hora Inicio"}),l.jsx("input",{type:"time",className:"input",value:i.start_time,onChange:u=>s(d=>({...d,start_time:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Hora Fin"}),l.jsx("input",{type:"time",className:"input",value:i.end_time,onChange:u=>s(d=>({...d,end_time:u.target.value}))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Cargo"}),l.jsx("input",{type:"text",className:"input",value:i.cargo,onChange:u=>s(d=>({...d,cargo:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Supervisor Autoriza"}),l.jsx("input",{type:"text",className:"input",value:i.supervisor_autoriza,onChange:u=>s(d=>({...d,supervisor_autoriza:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"rea"}),l.jsx("input",{type:"text",className:"input",value:i.area,onChange:u=>s(d=>({...d,area:u.target.value}))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Responsable"}),l.jsx("input",{type:"text",className:"input",value:i.responsable,onChange:u=>s(d=>({...d,responsable:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Observacin"}),l.jsx("textarea",{className:"input min-h-[80px]",value:i.observacion,onChange:u=>s(d=>({...d,observacion:u.target.value}))})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[l.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",disabled:a,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?"Guardando...":e?"Guardar Cambios":"Crear Registro"})]})]})},Tce=()=>{const e=zt(_=>_.context),t=zt(_=>_.setContext),r=Ar(_=>_.session),n=(r==null?void 0:r.supervisorName)??"",a=zv(n),[i,s]=M.useState({auth_status:"todos"}),[o,c]=M.useState({type:"none"}),u=dce(e,i),d=Vv("sin-credenciales",e),f=vce(),p=_ce(),h=Gv(),v=Kv();Xv();const m=[{key:"rut",header:"RUT",value:_=>Xn(_.rut)},{key:"nombre",header:"Nombre",value:_=>_.nombre},{key:"terminal",header:"Terminal",value:_=>or(_.terminal_code)},{key:"cabezal",header:"Cabezal",value:_=>_.cabezal},{key:"date",header:"Fecha",value:_=>_.date},{key:"start_time",header:"Hora Inicio",value:_=>_.start_time},{key:"end_time",header:"Hora Fin",value:_=>_.end_time},{key:"cargo",header:"Cargo",value:_=>_.cargo},{key:"supervisor_autoriza",header:"Supervisor Autoriza",value:_=>_.supervisor_autoriza},{key:"auth_status",header:"Autorizacin",value:_=>_.auth_status}],x=async _=>{await f.mutateAsync({values:_,createdBy:n}),c({type:"none"})},y=async _=>{o.type==="edit"&&(await p.mutateAsync({id:o.record.id,values:_}),c({type:"none"}))},g=async()=>{if(o.type!=="authorize")return;const _=o.record;await h.mutateAsync({subsection:"sin-credenciales",id:_.id,authorizedBy:n,rut:_.rut,nombre:_.nombre,terminal:_.terminal_code,date:_.date}),c({type:"none"})},b=async _=>{if(o.type!=="reject"||!_)return;const j=o.record;await v.mutateAsync({subsection:"sin-credenciales",id:j.id,authorizedBy:n,reason:_,rut:j.rut,nombre:j.nombre,terminal:j.terminal_code,date:j.date}),c({type:"none"})},S=_=>{switch(_){case"AUTORIZADO":return l.jsx("span",{className:"badge badge-success",children:_});case"RECHAZADO":return l.jsx("span",{className:"badge badge-danger",children:_});default:return l.jsx("span",{className:"badge badge-warning",children:_})}};return l.jsxs("div",{className:"space-y-4",children:[l.jsx(mn,{title:"Sin Credenciales",description:"Registros de personal sin credencial",actions:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[l.jsx(xe,{name:"key",size:18})," Nuevo Registro"]}),l.jsx(_a,{onExportView:()=>mr({filename:"sin_credenciales",sheetName:"Datos",rows:u.data||[],columns:m}),onExportAll:()=>mr({filename:"sin_credenciales_all",sheetName:"Datos",rows:u.data||[],columns:m})})]})}),l.jsx(qv,{data:d.data,isLoading:d.isLoading}),l.jsxs(ns,{terminalContext:e,onTerminalChange:t,children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsx("select",{className:"input",value:i.auth_status,onChange:_=>s(j=>({...j,auth_status:_.target.value})),children:Wv.map(_=>l.jsx("option",{value:_.value,children:_.label},_.value))})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Buscar"}),l.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:_=>s(j=>({...j,search:_.target.value}))})]})]}),u.isLoading&&l.jsx(kn,{label:"Cargando registros..."}),u.isError&&l.jsx(Da,{onRetry:()=>u.refetch()}),!u.isLoading&&!u.isError&&l.jsx("div",{className:"table-container overflow-x-auto",children:l.jsxs("table",{className:"table",children:[l.jsx("thead",{className:"table-header",children:l.jsxs("tr",{children:[l.jsx("th",{className:"table-header-cell",children:"RUT"}),l.jsx("th",{className:"table-header-cell",children:"Nombre"}),l.jsx("th",{className:"table-header-cell",children:"Terminal"}),l.jsx("th",{className:"table-header-cell",children:"Cabezal"}),l.jsx("th",{className:"table-header-cell",children:"Fecha"}),l.jsx("th",{className:"table-header-cell",children:"Hora"}),l.jsx("th",{className:"table-header-cell",children:"Autorizacin"}),l.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),l.jsx("tbody",{className:"table-body",children:(u.data||[]).map(_=>l.jsxs("tr",{className:"table-row",children:[l.jsx("td",{className:"table-cell font-mono text-sm",children:Xn(_.rut)}),l.jsx("td",{className:"table-cell font-medium",children:_.nombre}),l.jsx("td",{className:"table-cell",children:or(_.terminal_code)}),l.jsx("td",{className:"table-cell",children:_.cabezal||"-"}),l.jsx("td",{className:"table-cell",children:_.date}),l.jsxs("td",{className:"table-cell",children:[_.start_time," - ",_.end_time]}),l.jsx("td",{className:"table-cell",children:S(_.auth_status)}),l.jsx("td",{className:"table-cell",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[_.auth_status==="PENDIENTE"&&l.jsx("button",{onClick:()=>c({type:"edit",record:_}),className:"btn btn-ghost btn-icon",title:"Editar",children:l.jsx(xe,{name:"clipboard",size:16})}),a&&_.auth_status==="PENDIENTE"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>c({type:"authorize",record:_}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:l.jsx(xe,{name:"check-circle",size:16})}),l.jsx("button",{onClick:()=>c({type:"reject",record:_}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:l.jsx(xe,{name:"x",size:16})})]})]})})]},_.id))})]})}),(o.type==="create"||o.type==="edit")&&l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),l.jsxs("div",{className:"relative w-full max-w-3xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-xl font-bold",children:o.type==="create"?"Nuevo Registro":"Editar Registro"}),l.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:l.jsx(xe,{name:"x",size:24})})]}),l.jsx(Ece,{initialData:o.type==="edit"?{...o.record,cabezal:o.record.cabezal??"",start_time:o.record.start_time??"",end_time:o.record.end_time??"",cargo:o.record.cargo??"",supervisor_autoriza:o.record.supervisor_autoriza??"",area:o.record.area??"",responsable:o.record.responsable??"",observacion:o.record.observacion??""}:void 0,supervisorName:n,onSubmit:o.type==="create"?x:y,onCancel:()=>c({type:"none"}),isLoading:f.isPending||p.isPending})]})]}),o.type==="authorize"&&l.jsx(vl,{mode:"authorize",itemName:o.record.nombre,onConfirm:g,onCancel:()=>c({type:"none"}),isLoading:h.isPending}),o.type==="reject"&&l.jsx(vl,{mode:"reject",itemName:o.record.nombre,onConfirm:b,onCancel:()=>c({type:"none"}),isLoading:v.isPending})]})},Cce=({initialData:e,onSubmit:t,onCancel:r,isLoading:n})=>{const a=M.useRef(null),[i,s]=M.useState({rut:"",nombre:"",terminal_code:"EL_ROBLE",cabezal:"",date:new Date().toISOString().split("T")[0],prog_start:"",prog_end:"",reprogram_start:"",reprogram_end:"",day_off_date:"",day_off_start:"",day_off_end:"",day_on_date:"",day_on_start:"",day_on_end:"",document:null,...e}),o=u=>{if(u){const[d,f]=(u.horario||"").split("-"),p=(d==null?void 0:d.trim())||"",h=(f==null?void 0:f.trim())||"";s(v=>({...v,nombre:u.nombre,terminal_code:u.terminal_code,prog_start:p,prog_end:h,day_off_start:p,day_off_end:h,day_on_start:p,day_on_end:h}))}},c=u=>{u.preventDefault(),t(i)};return l.jsxs("form",{onSubmit:c,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(nw,{value:i.rut,onChange:u=>s(d=>({...d,rut:u})),onStaffFound:o,disabled:!!(e!=null&&e.rut)}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Nombre"}),l.jsx("input",{type:"text",className:"input",value:i.nombre,onChange:u=>s(d=>({...d,nombre:u.target.value})),required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Terminal"}),l.jsx("select",{className:"input",value:i.terminal_code,onChange:u=>s(d=>({...d,terminal_code:u.target.value})),required:!0,children:es.map(u=>l.jsx("option",{value:u.value,children:u.label},u.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Cabezal"}),l.jsx("input",{type:"text",className:"input",value:i.cabezal,onChange:u=>s(d=>({...d,cabezal:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha Registro"}),l.jsx("input",{type:"date",className:"input",value:i.date,onChange:u=>s(d=>({...d,date:u.target.value})),required:!0})]})]}),l.jsxs("div",{className:"card p-4 bg-brand-50 border-brand-200",children:[l.jsx("h4",{className:"font-semibold text-brand-800 mb-3",children:"Jornada Programada (desde Personal)"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Entrada"}),l.jsx("input",{type:"text",className:"input bg-brand-100 font-medium",value:i.prog_start,onChange:u=>s(d=>({...d,prog_start:u.target.value})),placeholder:"--:--",readOnly:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Salida"}),l.jsx("input",{type:"text",className:"input bg-brand-100 font-medium",value:i.prog_end,onChange:u=>s(d=>({...d,prog_end:u.target.value})),placeholder:"--:--",readOnly:!0})]})]})]}),l.jsxs("div",{className:"card p-4 bg-slate-50",children:[l.jsx("h4",{className:"font-semibold text-slate-700 mb-3",children:"Da Programado (No Trabaja)"}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha"}),l.jsx("input",{type:"date",className:"input",value:i.day_off_date,onChange:u=>s(d=>({...d,day_off_date:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Inicio"}),l.jsx("input",{type:"text",className:"input font-medium",value:i.day_off_start,onChange:u=>s(d=>({...d,day_off_start:u.target.value})),placeholder:"--:--"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Trmino"}),l.jsx("input",{type:"text",className:"input font-medium",value:i.day_off_end,onChange:u=>s(d=>({...d,day_off_end:u.target.value})),placeholder:"--:--"})]})]})]}),l.jsxs("div",{className:"card p-4 bg-success-50 border-success-200",children:[l.jsx("h4",{className:"font-semibold text-success-800 mb-3",children:"Da ReProgramado (Trabaja)"}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha"}),l.jsx("input",{type:"date",className:"input",value:i.day_on_date,onChange:u=>s(d=>({...d,day_on_date:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Inicio"}),l.jsx("input",{type:"text",className:"input font-medium",value:i.day_on_start,onChange:u=>s(d=>({...d,day_on_start:u.target.value})),placeholder:"--:--"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Trmino"}),l.jsx("input",{type:"text",className:"input font-medium",value:i.day_on_end,onChange:u=>s(d=>({...d,day_on_end:u.target.value})),placeholder:"--:--"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Documento Adjunto (opcional)"}),l.jsxs("div",{className:"border-2 border-dashed rounded-xl p-4 text-center",children:[l.jsx("input",{ref:a,type:"file",accept:".pdf,.jpg,.jpeg,.png",className:"hidden",onChange:u=>s(d=>{var f;return{...d,document:((f=u.target.files)==null?void 0:f[0])||null}})}),i.document?l.jsxs("div",{className:"flex items-center justify-center gap-3",children:[l.jsx(xe,{name:"check-circle",size:20,className:"text-success-600"}),l.jsx("span",{className:"text-sm",children:i.document.name}),l.jsx("button",{type:"button",onClick:()=>{s(u=>({...u,document:null})),a.current&&(a.current.value="")},className:"text-danger-600",children:l.jsx(xe,{name:"x",size:18})})]}):l.jsxs("button",{type:"button",onClick:()=>{var u;return(u=a.current)==null?void 0:u.click()},className:"btn btn-secondary",children:[l.jsx(xe,{name:"image",size:18})," Seleccionar Archivo"]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[l.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Guardando...":e?"Guardar Cambios":"Crear Registro"})]})]})},kce=()=>{const e=zt(j=>j.context),t=zt(j=>j.setContext),r=Ar(j=>j.session),n=(r==null?void 0:r.supervisorName)??"",a=zv(n),[i,s]=M.useState({auth_status:"todos"}),[o,c]=M.useState({type:"none"}),u=fce(e,i),d=Vv("cambios-dia",e),f=xce(),p=Sce(),h=Gv(),v=Kv();Xv();const m=[{key:"rut",header:"RUT",value:j=>Xn(j.rut)},{key:"nombre",header:"Nombre",value:j=>j.nombre},{key:"terminal",header:"Terminal",value:j=>or(j.terminal_code)},{key:"cabezal",header:"Cabezal",value:j=>j.cabezal},{key:"date",header:"Fecha",value:j=>j.date},{key:"prog_start",header:"Prog. Inicio",value:j=>j.prog_start},{key:"prog_end",header:"Prog. Fin",value:j=>j.prog_end},{key:"reprogram_start",header:"Reprog. Inicio",value:j=>j.reprogram_start},{key:"reprogram_end",header:"Reprog. Fin",value:j=>j.reprogram_end},{key:"auth_status",header:"Autorizacin",value:j=>j.auth_status}],x=async j=>{await f.mutateAsync({values:j,createdBy:n}),c({type:"none"})},y=async j=>{o.type==="edit"&&(await p.mutateAsync({id:o.record.id,values:j}),c({type:"none"}))},g=async()=>{if(o.type!=="authorize")return;const j=o.record;await h.mutateAsync({subsection:"cambios-dia",id:j.id,authorizedBy:n,rut:j.rut,nombre:j.nombre,terminal:j.terminal_code,date:j.date}),c({type:"none"})},b=async j=>{if(o.type!=="reject"||!j)return;const A=o.record;await v.mutateAsync({subsection:"cambios-dia",id:A.id,authorizedBy:n,reason:j,rut:A.rut,nombre:A.nombre,terminal:A.terminal_code,date:A.date}),c({type:"none"})},S=async j=>{try{const A=await Qle(j);window.open(A,"_blank")}catch(A){console.error("Error getting document URL:",A)}},_=j=>{switch(j){case"AUTORIZADO":return l.jsx("span",{className:"badge badge-success",children:j});case"RECHAZADO":return l.jsx("span",{className:"badge badge-danger",children:j});default:return l.jsx("span",{className:"badge badge-warning",children:j})}};return l.jsxs("div",{className:"space-y-4",children:[l.jsx(mn,{title:"Cambios de Da",description:"Reprogramaciones de jornada laboral",actions:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[l.jsx(xe,{name:"calendar",size:18})," Nuevo Registro"]}),l.jsx(_a,{onExportView:()=>mr({filename:"cambios_dia",sheetName:"Datos",rows:u.data||[],columns:m}),onExportAll:()=>mr({filename:"cambios_dia_all",sheetName:"Datos",rows:u.data||[],columns:m})})]})}),l.jsx(qv,{data:d.data,isLoading:d.isLoading}),l.jsxs(ns,{terminalContext:e,onTerminalChange:t,children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsx("select",{className:"input",value:i.auth_status,onChange:j=>s(A=>({...A,auth_status:j.target.value})),children:Wv.map(j=>l.jsx("option",{value:j.value,children:j.label},j.value))})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Buscar"}),l.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:j=>s(A=>({...A,search:j.target.value}))})]})]}),u.isLoading&&l.jsx(kn,{label:"Cargando registros..."}),u.isError&&l.jsx(Da,{onRetry:()=>u.refetch()}),!u.isLoading&&!u.isError&&l.jsx("div",{className:"table-container overflow-x-auto",children:l.jsxs("table",{className:"table",children:[l.jsx("thead",{className:"table-header",children:l.jsxs("tr",{children:[l.jsx("th",{className:"table-header-cell",children:"RUT"}),l.jsx("th",{className:"table-header-cell",children:"Nombre"}),l.jsx("th",{className:"table-header-cell",children:"Terminal"}),l.jsx("th",{className:"table-header-cell",children:"Fecha"}),l.jsx("th",{className:"table-header-cell",children:"Jornada Prog."}),l.jsx("th",{className:"table-header-cell",children:"Jornada Reprog."}),l.jsx("th",{className:"table-header-cell",children:"Doc"}),l.jsx("th",{className:"table-header-cell",children:"Autorizacin"}),l.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),l.jsx("tbody",{className:"table-body",children:(u.data||[]).map(j=>l.jsxs("tr",{className:"table-row",children:[l.jsx("td",{className:"table-cell font-mono text-sm",children:Xn(j.rut)}),l.jsx("td",{className:"table-cell font-medium",children:j.nombre}),l.jsx("td",{className:"table-cell",children:or(j.terminal_code)}),l.jsx("td",{className:"table-cell",children:j.date}),l.jsxs("td",{className:"table-cell text-xs",children:[j.prog_start," - ",j.prog_end]}),l.jsxs("td",{className:"table-cell text-xs",children:[j.reprogram_start," - ",j.reprogram_end]}),l.jsx("td",{className:"table-cell",children:j.document_path?l.jsx("button",{onClick:()=>S(j.document_path),className:"text-brand-600 hover:underline",children:l.jsx(xe,{name:"image",size:16})}):"-"}),l.jsx("td",{className:"table-cell",children:_(j.auth_status)}),l.jsx("td",{className:"table-cell",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[j.auth_status==="PENDIENTE"&&l.jsx("button",{onClick:()=>c({type:"edit",record:j}),className:"btn btn-ghost btn-icon",title:"Editar",children:l.jsx(xe,{name:"clipboard",size:16})}),a&&j.auth_status==="PENDIENTE"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>c({type:"authorize",record:j}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:l.jsx(xe,{name:"check-circle",size:16})}),l.jsx("button",{onClick:()=>c({type:"reject",record:j}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:l.jsx(xe,{name:"x",size:16})})]})]})})]},j.id))})]})}),(o.type==="create"||o.type==="edit")&&l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),l.jsxs("div",{className:"relative w-full max-w-4xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-xl font-bold",children:o.type==="create"?"Nuevo Registro":"Editar Registro"}),l.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:l.jsx(xe,{name:"x",size:24})})]}),l.jsx(Cce,{initialData:o.type==="edit"?{...o.record,cabezal:o.record.cabezal??"",prog_start:o.record.prog_start??"",prog_end:o.record.prog_end??"",reprogram_start:o.record.reprogram_start??"",reprogram_end:o.record.reprogram_end??"",day_off_date:o.record.day_off_date??"",day_off_start:o.record.day_off_start??"",day_off_end:o.record.day_off_end??"",day_on_date:o.record.day_on_date??"",day_on_start:o.record.day_on_start??"",day_on_end:o.record.day_on_end??"",document:null}:void 0,onSubmit:o.type==="create"?x:y,onCancel:()=>c({type:"none"}),isLoading:f.isPending||p.isPending})]})]}),o.type==="authorize"&&l.jsx(vl,{mode:"authorize",itemName:o.record.nombre,onConfirm:g,onCancel:()=>c({type:"none"}),isLoading:h.isPending}),o.type==="reject"&&l.jsx(vl,{mode:"reject",itemName:o.record.nombre,onConfirm:b,onCancel:()=>c({type:"none"}),isLoading:v.isPending})]})},Oce=({initialData:e,onSubmit:t,onCancel:r,isLoading:n})=>{const[a,i]=M.useState({rut:"",nombre:"",cargo:"",terminal_code:"EL_ROBLE",turno:"",horario:"",authorization_date:new Date().toISOString().split("T")[0],entry_or_exit:"ENTRADA",motivo:"",...e}),s=c=>{c&&i(u=>({...u,nombre:c.nombre,cargo:c.cargo,terminal_code:c.terminal_code,turno:c.turno,horario:c.horario}))},o=c=>{c.preventDefault(),t(a)};return l.jsxs("form",{onSubmit:o,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(nw,{value:a.rut,onChange:c=>i(u=>({...u,rut:c})),onStaffFound:s,disabled:!!(e!=null&&e.rut)}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Nombre"}),l.jsx("input",{type:"text",className:"input",value:a.nombre,onChange:c=>i(u=>({...u,nombre:c.target.value})),required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Cargo"}),l.jsx("input",{type:"text",className:"input",value:a.cargo,onChange:c=>i(u=>({...u,cargo:c.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Terminal"}),l.jsx("select",{className:"input",value:a.terminal_code,onChange:c=>i(u=>({...u,terminal_code:c.target.value})),required:!0,children:es.map(c=>l.jsx("option",{value:c.value,children:c.label},c.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Turno"}),l.jsx("input",{type:"text",className:"input",value:a.turno,onChange:c=>i(u=>({...u,turno:c.target.value}))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Horario"}),l.jsx("input",{type:"text",className:"input",value:a.horario,onChange:c=>i(u=>({...u,horario:c.target.value})),placeholder:"08:00-18:00"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha de Autorizacin"}),l.jsx("input",{type:"date",className:"input",value:a.authorization_date,onChange:c=>i(u=>({...u,authorization_date:c.target.value})),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Tipo"}),l.jsx("select",{className:"input",value:a.entry_or_exit,onChange:c=>i(u=>({...u,entry_or_exit:c.target.value})),required:!0,children:m9.map(c=>l.jsx("option",{value:c.value,children:c.label},c.value))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Motivo"}),l.jsx("textarea",{className:"input min-h-[80px]",value:a.motivo,onChange:c=>i(u=>({...u,motivo:c.target.value})),placeholder:"Describe el motivo de la autorizacin...",required:!0})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[l.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Guardando...":e?"Guardar Cambios":"Crear Registro"})]})]})},Pce=()=>{const e=zt(A=>A.context),t=zt(A=>A.setContext),r=Ar(A=>A.session),n=(r==null?void 0:r.supervisorName)??"",a=zv(n),[i,s]=M.useState({auth_status:"todos"}),[o,c]=M.useState({type:"none"}),u=hce(e,i),d=Vv("autorizaciones",e),f=yce(),p=Nce(),h=Gv(),v=Kv();Xv();const m=A=>{var E;return((E=m9.find(T=>T.value===A))==null?void 0:E.label)||A},x=[{key:"rut",header:"RUT",value:A=>Xn(A.rut)},{key:"nombre",header:"Nombre",value:A=>A.nombre},{key:"cargo",header:"Cargo",value:A=>A.cargo},{key:"terminal",header:"Terminal",value:A=>or(A.terminal_code)},{key:"turno",header:"Turno",value:A=>A.turno},{key:"horario",header:"Horario",value:A=>A.horario},{key:"authorization_date",header:"Fecha",value:A=>A.authorization_date},{key:"entry_or_exit",header:"Tipo",value:A=>m(A.entry_or_exit)},{key:"motivo",header:"Motivo",value:A=>A.motivo},{key:"auth_status",header:"Autorizacin",value:A=>A.auth_status}],y=async A=>{await f.mutateAsync({values:A,createdBy:n}),c({type:"none"})},g=async A=>{o.type==="edit"&&(await p.mutateAsync({id:o.record.id,values:A}),c({type:"none"}))},b=async()=>{if(o.type!=="authorize")return;const A=o.record;await h.mutateAsync({subsection:"autorizaciones",id:A.id,authorizedBy:n,rut:A.rut,nombre:A.nombre,terminal:A.terminal_code,date:A.authorization_date}),c({type:"none"})},S=async A=>{if(o.type!=="reject"||!A)return;const E=o.record;await v.mutateAsync({subsection:"autorizaciones",id:E.id,authorizedBy:n,reason:A,rut:E.rut,nombre:E.nombre,terminal:E.terminal_code,date:E.authorization_date}),c({type:"none"})},_=A=>{switch(A){case"AUTORIZADO":return l.jsx("span",{className:"badge badge-success",children:A});case"RECHAZADO":return l.jsx("span",{className:"badge badge-danger",children:A});default:return l.jsx("span",{className:"badge badge-warning",children:A})}},j=A=>A==="ENTRADA"?l.jsx("span",{className:"badge bg-blue-100 text-blue-700",children:"Llegada Tarda"}):l.jsx("span",{className:"badge bg-purple-100 text-purple-700",children:"Retiro Anticipado"});return l.jsxs("div",{className:"space-y-4",children:[l.jsx(mn,{title:"Autorizaciones",description:"Retiros anticipados y llegadas tardas",actions:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[l.jsx(xe,{name:"check-circle",size:18})," Nueva Solicitud"]}),l.jsx(_a,{onExportView:()=>mr({filename:"autorizaciones",sheetName:"Datos",rows:u.data||[],columns:x}),onExportAll:()=>mr({filename:"autorizaciones_all",sheetName:"Datos",rows:u.data||[],columns:x})})]})}),l.jsx(qv,{data:d.data,isLoading:d.isLoading}),l.jsxs(ns,{terminalContext:e,onTerminalChange:t,children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsx("select",{className:"input",value:i.auth_status,onChange:A=>s(E=>({...E,auth_status:A.target.value})),children:Wv.map(A=>l.jsx("option",{value:A.value,children:A.label},A.value))})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Buscar"}),l.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:A=>s(E=>({...E,search:A.target.value}))})]})]}),u.isLoading&&l.jsx(kn,{label:"Cargando registros..."}),u.isError&&l.jsx(Da,{onRetry:()=>u.refetch()}),!u.isLoading&&!u.isError&&l.jsx("div",{className:"table-container overflow-x-auto",children:l.jsxs("table",{className:"table",children:[l.jsx("thead",{className:"table-header",children:l.jsxs("tr",{children:[l.jsx("th",{className:"table-header-cell",children:"RUT"}),l.jsx("th",{className:"table-header-cell",children:"Nombre"}),l.jsx("th",{className:"table-header-cell",children:"Terminal"}),l.jsx("th",{className:"table-header-cell",children:"Fecha"}),l.jsx("th",{className:"table-header-cell",children:"Tipo"}),l.jsx("th",{className:"table-header-cell",children:"Motivo"}),l.jsx("th",{className:"table-header-cell",children:"Autorizacin"}),l.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),l.jsx("tbody",{className:"table-body",children:(u.data||[]).map(A=>l.jsxs("tr",{className:"table-row",children:[l.jsx("td",{className:"table-cell font-mono text-sm",children:Xn(A.rut)}),l.jsx("td",{className:"table-cell font-medium",children:A.nombre}),l.jsx("td",{className:"table-cell",children:or(A.terminal_code)}),l.jsx("td",{className:"table-cell",children:A.authorization_date}),l.jsx("td",{className:"table-cell",children:j(A.entry_or_exit)}),l.jsx("td",{className:"table-cell max-w-[200px] truncate",title:A.motivo,children:A.motivo}),l.jsx("td",{className:"table-cell",children:_(A.auth_status)}),l.jsx("td",{className:"table-cell",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[A.auth_status==="PENDIENTE"&&l.jsx("button",{onClick:()=>c({type:"edit",record:A}),className:"btn btn-ghost btn-icon",title:"Editar",children:l.jsx(xe,{name:"clipboard",size:16})}),a&&A.auth_status==="PENDIENTE"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>c({type:"authorize",record:A}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:l.jsx(xe,{name:"check-circle",size:16})}),l.jsx("button",{onClick:()=>c({type:"reject",record:A}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:l.jsx(xe,{name:"x",size:16})})]})]})})]},A.id))})]})}),(o.type==="create"||o.type==="edit")&&l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),l.jsxs("div",{className:"relative w-full max-w-3xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-xl font-bold",children:o.type==="create"?"Nueva Solicitud":"Editar Solicitud"}),l.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:l.jsx(xe,{name:"x",size:24})})]}),l.jsx(Oce,{initialData:o.type==="edit"?{...o.record,cargo:o.record.cargo??"",turno:o.record.turno??"",horario:o.record.horario??""}:void 0,onSubmit:o.type==="create"?y:g,onCancel:()=>c({type:"none"}),isLoading:f.isPending||p.isPending})]})]}),o.type==="authorize"&&l.jsx(vl,{mode:"authorize",itemName:o.record.nombre,onConfirm:b,onCancel:()=>c({type:"none"}),isLoading:h.isPending}),o.type==="reject"&&l.jsx(vl,{mode:"reject",itemName:o.record.nombre,onConfirm:S,onCancel:()=>c({type:"none"}),isLoading:v.isPending})]})},N5=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],Lce=["Lun","Mar","Mi","Jue","Vie","Sb","Dom"],Rce=({isOpen:e,onClose:t,vacaciones:r})=>{const n=new Date,[a,i]=M.useState(n.getFullYear()),[s,o]=M.useState(n.getMonth()),[c,u]=M.useState(null),[d,f]=M.useState("todos"),[p,h]=M.useState("todos"),v=M.useMemo(()=>{const E=new Set;return r.forEach(T=>E.add(T.cargo)),Array.from(E).sort()},[r]),m=M.useMemo(()=>r.filter(E=>!(d!=="todos"&&E.terminal_code!==d||p!=="todos"&&E.cargo!==p)),[r,d,p]),x=M.useMemo(()=>{const E=new Date(a,s,1),L=new Date(a,s+1,0).getDate();let k=E.getDay()-1;k<0&&(k=6);const R=[];for(let D=0;D<k;D++)R.push(null);for(let D=1;D<=L;D++)R.push(D);return R},[a,s]),y=E=>{const T=`${a}-${String(s+1).padStart(2,"0")}-${String(E).padStart(2,"0")}`;return m.filter(L=>T>=L.start_date&&T<=L.end_date)},g=c?y(c):[],b=()=>{s===0?(o(11),i(a-1)):o(s-1),u(null)},S=()=>{s===11?(o(0),i(a+1)):o(s+1),u(null)},_=()=>{i(n.getFullYear()),o(n.getMonth()),u(n.getDate())};if(!e)return null;const j=E=>E===n.getDate()&&s===n.getMonth()&&a===n.getFullYear(),A=E=>E%7===5||E%7===6;return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),l.jsxs("div",{className:"relative w-full max-w-5xl bg-white rounded-2xl shadow-2xl max-h-[90vh] overflow-hidden animate-scale-in",children:[l.jsxs("div",{className:"bg-gradient-to-r from-brand-600 to-brand-700 text-white p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-3",children:[l.jsx(xe,{name:"calendar",size:28}),"Calendario de Vacaciones"]}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:l.jsx(xe,{name:"x",size:24})})]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("div",{className:"flex-1 min-w-[180px]",children:[l.jsx("label",{className:"text-white/70 text-xs font-medium block mb-1",children:"Terminal"}),l.jsxs("select",{className:"w-full px-3 py-2 rounded-lg bg-white/20 text-white border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50",value:d,onChange:E=>f(E.target.value),children:[l.jsx("option",{value:"todos",className:"text-slate-800",children:"Todos los terminales"}),es.map(E=>l.jsx("option",{value:E.value,className:"text-slate-800",children:E.label},E.value))]})]}),l.jsxs("div",{className:"flex-1 min-w-[180px]",children:[l.jsx("label",{className:"text-white/70 text-xs font-medium block mb-1",children:"Cargo"}),l.jsxs("select",{className:"w-full px-3 py-2 rounded-lg bg-white/20 text-white border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50",value:p,onChange:E=>h(E.target.value),children:[l.jsx("option",{value:"todos",className:"text-slate-800",children:"Todos los cargos"}),v.map(E=>l.jsx("option",{value:E,className:"text-slate-800",children:E},E))]})]})]})]}),l.jsxs("div",{className:"flex flex-col lg:flex-row",children:[l.jsxs("div",{className:"flex-1 p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("button",{onClick:b,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:l.jsx(xe,{name:"chevron-right",size:24,className:"rotate-180"})}),l.jsxs("div",{className:"text-center",children:[l.jsxs("h3",{className:"text-xl font-bold text-slate-800",children:[N5[s]," ",a]}),l.jsx("button",{onClick:_,className:"text-sm text-brand-600 hover:text-brand-700 font-medium mt-1",children:"Ir a hoy"})]}),l.jsx("button",{onClick:S,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:l.jsx(xe,{name:"chevron-right",size:24})})]}),l.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:Lce.map((E,T)=>l.jsx("div",{className:`text-center text-sm font-semibold py-2 ${T>=5?"text-slate-400":"text-slate-600"}`,children:E},E))}),l.jsx("div",{className:"grid grid-cols-7 gap-1",children:x.map((E,T)=>{if(E===null)return l.jsx("div",{className:"h-16"},`empty-${T}`);const L=y(E),k=L.length>0,R=c===E,D=j(E),q=A(T);return l.jsxs("button",{onClick:()=>u(E),className:`
                                            h-16 rounded-lg border-2 transition-all text-left p-1 relative
                                            ${R?"border-brand-500 bg-brand-50 shadow-md":"border-transparent"}
                                            ${D?"ring-2 ring-brand-400 ring-offset-1":""}
                                            ${q?"bg-slate-50":"bg-white"}
                                            ${k?"hover:border-brand-300":"hover:bg-slate-50"}
                                        `,children:[l.jsx("span",{className:`
                                            text-sm font-semibold
                                            ${D?"text-brand-600":q?"text-slate-400":"text-slate-700"}
                                        `,children:E}),k&&l.jsxs("div",{className:"mt-1 space-y-0.5",children:[L.slice(0,2).map((X,se)=>l.jsx("div",{className:"text-[10px] bg-amber-100 text-amber-800 rounded px-1 truncate font-medium",title:`${X.nombre} - ${X.cargo}`,children:X.nombre.split(" ")[0]},se)),L.length>2&&l.jsxs("div",{className:"text-[10px] text-amber-600 font-medium px-1",children:["+",L.length-2," ms"]})]})]},E)})}),l.jsxs("div",{className:"flex items-center gap-6 mt-6 text-sm text-slate-600",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 bg-amber-100 rounded border border-amber-200"}),l.jsx("span",{children:"Con vacaciones"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 bg-slate-50 rounded border border-slate-200"}),l.jsx("span",{children:"Fin de semana"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 rounded ring-2 ring-brand-400 ring-offset-1"}),l.jsx("span",{children:"Hoy"})]})]})]}),l.jsxs("div",{className:"lg:w-80 border-t lg:border-t-0 lg:border-l border-slate-200 bg-slate-50 p-6",children:[l.jsxs("h4",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[l.jsx(xe,{name:"users",size:18}),c?l.jsxs(l.Fragment,{children:["Vacaciones: ",c," ",N5[s]]}):l.jsx(l.Fragment,{children:"Selecciona un da"})]}),c===null?l.jsxs("div",{className:"text-center py-8 text-slate-400",children:[l.jsx(xe,{name:"calendar",size:48,className:"mx-auto mb-3 opacity-50"}),l.jsx("p",{children:"Haz clic en un da para ver quin est de vacaciones"})]}):g.length===0?l.jsxs("div",{className:"text-center py-8 text-slate-400",children:[l.jsx(xe,{name:"check-circle",size:48,className:"mx-auto mb-3 opacity-50"}),l.jsx("p",{children:"Sin vacaciones registradas para este da"})]}):l.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:g.map((E,T)=>l.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200 shadow-sm",children:[l.jsx("div",{className:"font-semibold text-slate-800",children:E.nombre}),l.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(xe,{name:"tag",size:14,className:"text-slate-400"}),E.cargo]}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx(xe,{name:"building",size:14,className:"text-slate-400"}),zu[E.terminal_code]||E.terminal_code]}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx(xe,{name:"clock",size:14,className:"text-slate-400"}),E.turno]})]}),l.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-100 text-xs text-slate-500",children:[E.start_date,"  ",E.end_date,l.jsxs("span",{className:"ml-2 font-medium text-brand-600",children:["(",E.business_days," das hbiles)"]})]})]},T))}),m.length>0&&l.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-200",children:[l.jsxs("div",{className:"text-xs text-slate-500 uppercase font-semibold mb-2",children:["Resumen ",N5[s]]}),l.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[l.jsx("div",{className:"text-2xl font-bold text-brand-600",children:m.filter(E=>{const T=`${a}-${String(s+1).padStart(2,"0")}-01`,L=`${a}-${String(s+1).padStart(2,"0")}-31`;return E.end_date>=T&&E.start_date<=L}).length}),l.jsx("div",{className:"text-sm text-slate-600",children:"personas con vacaciones"})]})]})]})]})]})]})},Ice=({initialData:e,onSubmit:t,onCancel:r,isLoading:n})=>{const a=zt(E=>E.context),i=Z$(a),[s,o]=M.useState(""),[c,u]=M.useState(null),[d,f]=M.useState(!1),[p,h]=M.useState({rut:"",nombre:"",cargo:"",terminal_code:"",turno:"",start_date:"",end_date:"",return_date:"",conflict_authorized:!1}),[v,m]=M.useState(null),[x,y]=M.useState(!1),g=M.useMemo(()=>!p.start_date||!p.end_date?0:R3(p.start_date,p.end_date),[p.start_date,p.end_date]),b=M.useMemo(()=>!p.start_date||!p.end_date?0:L3(p.start_date,p.end_date),[p.start_date,p.end_date]);M.useEffect(()=>{e&&(h({rut:e.rut,nombre:e.nombre,cargo:e.cargo,terminal_code:e.terminal_code,turno:e.turno,start_date:e.start_date,end_date:e.end_date,return_date:e.return_date,conflict_authorized:e.conflict_authorized}),o(Xn(e.rut)))},[e]);const S=M.useMemo(()=>{if(!s||!i.data)return[];const E=Qu(s).toLowerCase();return i.data.filter(T=>T.status==="ACTIVO").filter(T=>T.rut.toLowerCase().includes(E)||T.nombre.toLowerCase().includes(E)).slice(0,8)},[s,i.data]);M.useEffect(()=>{(async()=>{if(!p.cargo||!p.terminal_code||!p.turno||!p.start_date||!p.end_date){m(null);return}y(!0);try{const T=await d9(p.cargo,p.terminal_code,p.turno,p.start_date,p.end_date,e==null?void 0:e.rut);m(T)}catch(T){console.error("Error checking conflicts:",T)}finally{y(!1)}})()},[p.cargo,p.terminal_code,p.turno,p.start_date,p.end_date,e==null?void 0:e.rut]),M.useEffect(()=>{if(p.end_date){const E=new Date(p.end_date+"T12:00:00");for(E.setDate(E.getDate()+1);E.getDay()===0||E.getDay()===6;)E.setDate(E.getDate()+1);h(T=>({...T,return_date:E.toISOString().split("T")[0]}))}},[p.end_date]);const _=E=>{u(E),o(Xn(E.rut)),h(T=>({...T,rut:E.rut,nombre:E.nombre,cargo:E.cargo,terminal_code:E.terminal_code,turno:E.turno})),f(!1)},j=async E=>{E.preventDefault(),await t(p)},A=p.rut&&p.start_date&&p.end_date&&p.return_date&&(!(v!=null&&v.hasConflict)||p.conflict_authorized);return l.jsxs("form",{onSubmit:j,className:"space-y-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("label",{className:"label",children:"Buscar Trabajador por RUT"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",className:"input pr-10",placeholder:"Ingrese RUT o nombre...",value:s,onChange:E=>{o(E.target.value),f(!0)},onFocus:()=>f(!0)}),l.jsx(xe,{name:"search",size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"})]}),d&&S.length>0&&l.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:S.map(E=>l.jsx("button",{type:"button",onClick:()=>_(E),className:"w-full px-4 py-3 text-left hover:bg-slate-50 border-b last:border-b-0 border-slate-100",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-slate-800",children:E.nombre}),l.jsx("div",{className:"text-sm text-slate-500 font-mono",children:Xn(E.rut)})]}),l.jsxs("div",{className:"text-right text-sm text-slate-500",children:[l.jsx("div",{children:E.cargo}),l.jsx("div",{children:E.turno})]})]})},E.id))}),d&&s&&S.length===0&&i.data&&l.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg p-4 text-slate-500 text-sm",children:"No se encontraron trabajadores activos"})]}),c&&l.jsx("div",{className:"bg-brand-50 border border-brand-200 rounded-lg p-4",children:l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 block",children:"Nombre"}),l.jsx("span",{className:"font-semibold text-slate-800",children:c.nombre})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 block",children:"Cargo"}),l.jsx("span",{className:"font-semibold text-slate-800",children:c.cargo})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 block",children:"Terminal"}),l.jsx("span",{className:"font-semibold text-slate-800",children:zu[c.terminal_code]||c.terminal_code})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 block",children:"Turno"}),l.jsx("span",{className:"font-semibold text-slate-800",children:c.turno})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha Inicio"}),l.jsx("input",{type:"date",className:"input",value:p.start_date,onChange:E=>h(T=>({...T,start_date:E.target.value})),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha Trmino"}),l.jsx("input",{type:"date",className:"input",value:p.end_date,min:p.start_date,onChange:E=>h(T=>({...T,end_date:E.target.value})),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha Vuelta"}),l.jsx("input",{type:"date",className:"input",value:p.return_date,min:p.end_date,onChange:E=>h(T=>({...T,return_date:E.target.value})),required:!0})]})]}),p.start_date&&p.end_date&&l.jsx("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-slate-700",children:g}),l.jsx("div",{className:"text-sm text-slate-500",children:"Das calendario"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-brand-600",children:b}),l.jsx("div",{className:"text-sm text-slate-500",children:"Das a descontar"}),l.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"(sin sbados ni domingos)"})]})]})}),x&&l.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4 text-center text-slate-500",children:[l.jsx(xe,{name:"clock",size:20,className:"inline-block mr-2 animate-spin"}),"Verificando disponibilidad..."]}),(v==null?void 0:v.hasConflict)&&!x&&l.jsx("div",{className:"bg-amber-50 border border-amber-300 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(xe,{name:"alert-triangle",size:24,className:"text-amber-600 shrink-0 mt-0.5"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-semibold text-amber-800 mb-2",children:"Conflicto de Personal Detectado"}),l.jsxs("p",{className:"text-sm text-amber-700 mb-3",children:["Hay ",v.conflictingVacations.length," persona(s) del mismo cargo, terminal y turno con vacaciones en fechas solapadas."]}),l.jsx("div",{className:"bg-white/50 rounded p-3 mb-3",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-amber-700",children:"Personal total:"}),l.jsx("span",{className:"font-bold ml-2",children:v.totalStaffCount})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-amber-700",children:"Disponibles:"}),l.jsx("span",{className:"font-bold ml-2 text-amber-800",children:v.availableStaffCount})]})]})}),l.jsxs("div",{className:"text-sm text-amber-700 mb-3",children:[l.jsx("strong",{children:"En vacaciones:"}),l.jsx("ul",{className:"mt-1 space-y-1",children:v.conflictingVacations.map((E,T)=>l.jsxs("li",{children:[" ",E.nombre," (",E.start_date," al ",E.end_date,")"]},T))})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:p.conflict_authorized,onChange:E=>h(T=>({...T,conflict_authorized:E.target.checked})),className:"w-4 h-4 text-amber-600 border-amber-300 rounded focus:ring-amber-500"}),l.jsx("span",{className:"text-sm font-medium text-amber-800",children:"Autorizo esta solicitud a pesar del conflicto"})]})]})]})}),v&&!v.hasConflict&&!x&&p.start_date&&p.end_date&&l.jsxs("div",{className:"bg-green-50 border border-green-300 rounded-lg p-4 flex items-center gap-3",children:[l.jsx(xe,{name:"check-circle",size:24,className:"text-green-600"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-green-800",children:"Sin conflictos"}),l.jsxs("span",{className:"text-green-700 text-sm ml-2",children:["(",v.availableStaffCount+1," de ",v.totalStaffCount," disponibles despus de esta solicitud)"]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[l.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:!A||n,className:"btn btn-primary",children:n?"Guardando...":e?"Actualizar":"Solicitar Vacaciones"})]})]})},Dce=()=>{const e=zt(E=>E.context),t=zt(E=>E.setContext),r=Ar(E=>E.session),n=(r==null?void 0:r.supervisorName)??"",a=zv(n),[i,s]=M.useState({auth_status:"todos"}),[o,c]=M.useState({type:"none"}),[u,d]=M.useState(!1),f=pce(e,i),p=Vv("vacaciones",e),h=bce(),v=jce(),m=Gv(),x=Kv();Xv();const y=[{key:"rut",header:"RUT",value:E=>Xn(E.rut)},{key:"nombre",header:"Nombre",value:E=>E.nombre},{key:"cargo",header:"Cargo",value:E=>E.cargo},{key:"terminal",header:"Terminal",value:E=>or(E.terminal_code)},{key:"turno",header:"Turno",value:E=>E.turno},{key:"start_date",header:"Fecha Inicio",value:E=>E.start_date},{key:"end_date",header:"Fecha Trmino",value:E=>E.end_date},{key:"return_date",header:"Fecha Vuelta",value:E=>E.return_date},{key:"calendar_days",header:"Das Calendario",value:E=>E.calendar_days.toString()},{key:"business_days",header:"Das Hbiles",value:E=>E.business_days.toString()},{key:"has_conflict",header:"Conflicto",value:E=>E.has_conflict?"S":"No"},{key:"auth_status",header:"Estado",value:E=>E.auth_status}],g=async E=>{await h.mutateAsync({values:E,createdBy:n}),c({type:"none"})},b=async E=>{o.type==="edit"&&(await v.mutateAsync({id:o.record.id,values:E}),c({type:"none"}))},S=async()=>{if(o.type!=="authorize")return;const E=o.record;await m.mutateAsync({subsection:"vacaciones",id:E.id,authorizedBy:n,rut:E.rut,nombre:E.nombre,terminal:E.terminal_code,date:E.start_date}),c({type:"none"})},_=async E=>{if(o.type!=="reject"||!E)return;const T=o.record;await x.mutateAsync({subsection:"vacaciones",id:T.id,authorizedBy:n,reason:E,rut:T.rut,nombre:T.nombre,terminal:T.terminal_code,date:T.start_date}),c({type:"none"})},j=E=>{switch(E){case"AUTORIZADO":return l.jsx("span",{className:"badge badge-success",children:E});case"RECHAZADO":return l.jsx("span",{className:"badge badge-danger",children:E});default:return l.jsx("span",{className:"badge badge-warning",children:E})}},A=E=>new Date(E+"T12:00:00").toLocaleDateString("es-CL",{day:"2-digit",month:"short"});return l.jsxs("div",{className:"space-y-4",children:[l.jsx(mn,{title:"Vacaciones",description:"Gestin inteligente de vacaciones con deteccin de conflictos",actions:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{className:"btn btn-secondary",onClick:()=>d(!0),children:[l.jsx(xe,{name:"calendar",size:18})," Calendario"]}),l.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[l.jsx(xe,{name:"plus",size:18})," Nueva Solicitud"]}),l.jsx(_a,{onExportView:()=>mr({filename:"vacaciones",sheetName:"Datos",rows:f.data||[],columns:y}),onExportAll:()=>mr({filename:"vacaciones_all",sheetName:"Datos",rows:f.data||[],columns:y})})]})}),l.jsx(qv,{data:p.data,isLoading:p.isLoading}),l.jsxs(ns,{terminalContext:e,onTerminalChange:t,children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsx("select",{className:"input",value:i.auth_status,onChange:E=>s(T=>({...T,auth_status:E.target.value})),children:Wv.map(E=>l.jsx("option",{value:E.value,children:E.label},E.value))})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Buscar"}),l.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:E=>s(T=>({...T,search:E.target.value}))})]})]}),f.isLoading&&l.jsx(kn,{label:"Cargando vacaciones..."}),f.isError&&l.jsx(Da,{onRetry:()=>f.refetch()}),!f.isLoading&&!f.isError&&l.jsx("div",{className:"table-container overflow-x-auto",children:l.jsxs("table",{className:"table",children:[l.jsx("thead",{className:"table-header",children:l.jsxs("tr",{children:[l.jsx("th",{className:"table-header-cell",children:"RUT"}),l.jsx("th",{className:"table-header-cell",children:"Nombre"}),l.jsx("th",{className:"table-header-cell",children:"Cargo/Turno"}),l.jsx("th",{className:"table-header-cell",children:"Perodo"}),l.jsx("th",{className:"table-header-cell text-center",children:"Das"}),l.jsx("th",{className:"table-header-cell",children:"Conflicto"}),l.jsx("th",{className:"table-header-cell",children:"Estado"}),l.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),l.jsx("tbody",{className:"table-body",children:(f.data||[]).length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"table-cell text-center text-slate-500 py-8",children:"No hay solicitudes de vacaciones registradas"})}):(f.data||[]).map(E=>l.jsxs("tr",{className:"table-row",children:[l.jsx("td",{className:"table-cell font-mono text-sm",children:Xn(E.rut)}),l.jsx("td",{className:"table-cell font-medium",children:E.nombre}),l.jsxs("td",{className:"table-cell",children:[l.jsx("div",{className:"text-sm",children:E.cargo}),l.jsx("div",{className:"text-xs text-slate-500",children:E.turno})]}),l.jsxs("td",{className:"table-cell",children:[l.jsxs("div",{className:"text-sm",children:[A(E.start_date)," - ",A(E.end_date)]}),l.jsxs("div",{className:"text-xs text-slate-500",children:["Vuelta: ",A(E.return_date)]})]}),l.jsxs("td",{className:"table-cell text-center",children:[l.jsx("div",{className:"text-lg font-bold text-brand-600",children:E.business_days}),l.jsxs("div",{className:"text-xs text-slate-500",children:[E.calendar_days," cal"]})]}),l.jsx("td",{className:"table-cell",children:E.has_conflict?l.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium ${E.conflict_authorized?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:[l.jsx(xe,{name:"alert-triangle",size:12}),E.conflict_authorized?"Autorizado":"Sin autorizar"]}):l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-700",children:[l.jsx(xe,{name:"check-circle",size:12}),"Sin conflicto"]})}),l.jsx("td",{className:"table-cell",children:j(E.auth_status)}),l.jsx("td",{className:"table-cell",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[E.auth_status==="PENDIENTE"&&l.jsx("button",{onClick:()=>c({type:"edit",record:E}),className:"btn btn-ghost btn-icon",title:"Editar",children:l.jsx(xe,{name:"clipboard",size:16})}),a&&E.auth_status==="PENDIENTE"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>c({type:"authorize",record:E}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:l.jsx(xe,{name:"check-circle",size:16})}),l.jsx("button",{onClick:()=>c({type:"reject",record:E}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:l.jsx(xe,{name:"x",size:16})})]})]})})]},E.id))})]})}),(o.type==="create"||o.type==="edit")&&l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),l.jsxs("div",{className:"relative w-full max-w-3xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-xl font-bold",children:o.type==="create"?"Nueva Solicitud de Vacaciones":"Editar Solicitud"}),l.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:l.jsx(xe,{name:"x",size:24})})]}),l.jsx(Ice,{initialData:o.type==="edit"?o.record:void 0,onSubmit:o.type==="create"?g:b,onCancel:()=>c({type:"none"}),isLoading:h.isPending||v.isPending})]})]}),o.type==="authorize"&&l.jsx(vl,{mode:"authorize",itemName:o.record.nombre,onConfirm:S,onCancel:()=>c({type:"none"}),isLoading:m.isPending}),o.type==="reject"&&l.jsx(vl,{mode:"reject",itemName:o.record.nombre,onConfirm:_,onCancel:()=>c({type:"none"}),isLoading:x.isPending}),l.jsx(Rce,{isOpen:u,onClose:()=>d(!1),vacaciones:f.data||[]})]})};async function Mce(){if(!gr())return[];const{data:e,error:t}=await Le.from("shift_types").select("*").order("code");if(t)throw t;return e||[]}async function Fce(e,t){if(!gr())return[];let r=Le.from("staff").select(`
      id, rut, nombre, cargo, terminal_code, turno, horario, contacto, status,
      staff_shifts (id, staff_id, shift_type_code, variant_code, start_date),
      staff_admonitions (id)
    `).order("cargo").order("nombre");const n=Fi(e);if(n.length>0&&(r=r.in("terminal_code",n)),t!=null&&t.turno&&t.turno!=="TODOS"&&(t.turno==="DIA"?r=r.or("turno.ilike.%dia%,turno.ilike.%day%"):r=r.or("turno.ilike.%noche%,turno.ilike.%night%")),t!=null&&t.search){const s=`%${t.search}%`;r=r.or(`rut.ilike.${s},nombre.ilike.${s}`)}const{data:a,error:i}=await r;if(i)throw i;return(a||[]).map(s=>({id:s.id,rut:s.rut,nombre:s.nombre,cargo:s.cargo,terminal_code:s.terminal_code,turno:s.turno,horario:s.horario,contacto:s.contacto,status:s.status,shift:Array.isArray(s.staff_shifts)&&s.staff_shifts.length>0?s.staff_shifts[0]:void 0,admonitionCount:Array.isArray(s.staff_admonitions)?s.staff_admonitions.length:0}))}async function $ce(e){if(!gr())return null;const{data:t,error:r}=await Le.from("staff_shifts").select("*").eq("staff_id",e).single();if(r&&r.code!=="PGRST116")throw r;return t||null}async function Bce(e){if(!gr())throw new Error("Supabase not configured");console.log("upsertStaffShift - Attempting insert:",e);const{data:t,error:r}=await Le.from("staff_shifts").upsert({staff_id:e.staff_id,shift_type_code:e.shift_type_code,variant_code:e.variant_code,start_date:e.start_date||"2026-01-01"},{onConflict:"staff_id"}).select().single();if(r)throw console.error("upsertStaffShift - ERROR:",r),r;return console.log("upsertStaffShift - SUCCESS:",t),t}async function Uce(e){if(!gr())return null;const{data:t,error:r}=await Le.from("staff_shift_special_templates").select("*").eq("staff_id",e).single();if(r&&r.code!=="PGRST116")throw r;return t||null}async function zce(e,t){if(!gr())throw new Error("Supabase not configured");const{data:r,error:n}=await Le.from("staff_shift_special_templates").upsert({staff_id:e,off_days_json:t},{onConflict:"staff_id"}).select().single();if(n)throw n;return r}async function qce(e,t,r){if(!gr()||e.length===0)return[];const n=`${t}-${String(r+1).padStart(2,"0")}-01`,a=new Date(t,r+1,0).toISOString().split("T")[0],{data:i,error:s}=await Le.from("staff_shift_overrides").select("*").in("staff_id",e).gte("override_date",n).lte("override_date",a);if(s)throw s;return i||[]}async function Hce(e,t,r){if(!gr()||e.length===0)return[];const n=`${t}-${String(r+1).padStart(2,"0")}-01`,a=new Date(t,r+1,0).toISOString().split("T")[0],{data:i,error:s}=await Le.from("attendance_marks").select("*").in("staff_id",e).gte("mark_date",n).lte("mark_date",a);if(s)throw s;return i||[]}async function Wce(e,t){if(!gr())throw new Error("Supabase not configured");const{data:r,error:n}=await Le.from("attendance_marks").upsert({staff_id:e.staff_id,mark_date:e.mark_date,mark:e.mark,note:e.note||null,created_by:t},{onConflict:"staff_id,mark_date"}).select().single();if(n)throw n;return r}async function Vce(e,t,r){if(!gr())throw new Error("Supabase not configured");if(e.length===0)return[];const n=e.map(s=>({staff_id:s,mark_date:t,mark:"P",created_by:r})),{data:a,error:i}=await Le.from("attendance_marks").upsert(n,{onConflict:"staff_id,mark_date"}).select();if(i)throw i;return a||[]}async function Gce(e,t,r){if(!gr()||e.length===0)return[];const n=`${t}-${String(r+1).padStart(2,"0")}-01`,a=new Date(t,r+1,0).toISOString().split("T")[0],{data:i,error:s}=await Le.from("attendance_licenses").select("*").in("staff_id",e).or(`start_date.lte.${a},end_date.gte.${n}`);if(s)throw s;return i||[]}async function Kce(e,t){if(!gr())throw new Error("Supabase not configured");let r=null;if(e.document){const i=`${e.staff_id}/${Date.now()}_${e.document.name}`,{error:s}=await Le.storage.from("attendance-docs").upload(i,e.document);if(s)throw s;r=i}const{data:n,error:a}=await Le.from("attendance_licenses").insert({staff_id:e.staff_id,start_date:e.start_date,end_date:e.end_date,note:e.note||null,document_path:r,created_by:t}).select().single();if(a)throw a;return n}async function Xce(e,t,r){if(!gr()||e.length===0)return[];const n=`${t}-${String(r+1).padStart(2,"0")}-01`,a=new Date(t,r+1,0).toISOString().split("T")[0],{data:i,error:s}=await Le.from("attendance_permissions").select("*").in("staff_id",e).or(`start_date.lte.${a},end_date.gte.${n}`);if(s)throw s;return i||[]}async function Yce(e,t){if(!gr())throw new Error("Supabase not configured");const{data:r,error:n}=await Le.from("attendance_permissions").insert({staff_id:e.staff_id,start_date:e.start_date,end_date:e.end_date,permission_type:e.permission_type,note:e.note||null,created_by:t}).select().single();if(n)throw n;return r}async function Jce(e,t,r){if(!gr()||e.length===0)return[];const n=`${t}-${String(r+1).padStart(2,"0")}-01`,a=new Date(t,r+1,0).toISOString().split("T")[0],{data:i,error:s}=await Le.from("staff").select("id, rut").in("id",e);if(s)throw s;const o=(i||[]).map(f=>f.rut),c=Object.fromEntries((i||[]).map(f=>[f.rut,f.id])),{data:u,error:d}=await Le.from("attendance_vacaciones").select("rut, start_date, end_date").in("rut",o).eq("auth_status","AUTORIZADO").or(`start_date.lte.${a},end_date.gte.${n}`);if(d)throw d;return(u||[]).map(f=>({staff_id:c[f.rut],start_date:f.start_date,end_date:f.end_date}))}async function Qce(e,t,r){if(!gr())return{noMarcaciones:[],sinCredenciales:[],cambiosDia:[],autorizaciones:[]};const n=`${t}-${String(r+1).padStart(2,"0")}-01`,a=new Date(t,r+1,0).toISOString().split("T")[0],[i,s,o,c]=await Promise.all([Le.from("attendance_no_marcaciones").select("rut, date").in("terminal_code",e).gte("date",n).lte("date",a),Le.from("attendance_sin_credenciales").select("rut, date").in("terminal_code",e).gte("date",n).lte("date",a),Le.from("attendance_cambios_dia").select("rut, date").in("terminal_code",e).gte("date",n).lte("date",a),Le.from("attendance_autorizaciones").select("rut, authorization_date").in("terminal_code",e).gte("authorization_date",n).lte("authorization_date",a)]);return{noMarcaciones:(i.data||[]).map(u=>({rut:u.rut,date:u.date})),sinCredenciales:(s.data||[]).map(u=>({rut:u.rut,date:u.date})),cambiosDia:(o.data||[]).map(u=>({rut:u.rut,date:u.date})),autorizaciones:(c.data||[]).map(u=>({rut:u.rut,date:u.authorization_date}))}}async function Zce(e,t){if(!gr())throw new Error("Supabase not configured");const{data:r,error:n}=await Le.from("offboarding_requests").insert({staff_id:e.staff_id,staff_rut:e.staff_rut,staff_name:e.staff_name,terminal_code:e.terminal_code,reason:e.reason,requested_by:t,status:"ENVIADA"}).select().single();if(n)throw n;return r}function eue(e,t,r){const n=[],a=Le.channel("attendance_marks_changes").on("postgres_changes",{event:"*",schema:"public",table:"attendance_marks"},()=>e()).subscribe();n.push(a);const i=Le.channel("attendance_licenses_changes").on("postgres_changes",{event:"*",schema:"public",table:"attendance_licenses"},()=>t()).subscribe();n.push(i);const s=Le.channel("attendance_permissions_changes").on("postgres_changes",{event:"*",schema:"public",table:"attendance_permissions"},()=>r()).subscribe();return n.push(s),()=>{n.forEach(o=>{Le.removeChannel(o)})}}const yr={all:["asistencia2026"],shiftTypes:()=>[...yr.all,"shiftTypes"],staff:()=>[...yr.all,"staff"],staffList:(e,t)=>[...yr.staff(),e,t],staffShift:e=>[...yr.all,"staffShift",e],specialTemplate:e=>[...yr.all,"specialTemplate",e],monthData:()=>[...yr.all,"monthData"],overrides:(e,t,r)=>[...yr.monthData(),"overrides",e.join(","),t,r],marks:(e,t,r)=>[...yr.monthData(),"marks",e.join(","),t,r],licenses:(e,t,r)=>[...yr.monthData(),"licenses",e.join(","),t,r],permissions:(e,t,r)=>[...yr.monthData(),"permissions",e.join(","),t,r],vacations:(e,t,r)=>[...yr.monthData(),"vacations",e.join(","),t,r],incidences:(e,t,r)=>[...yr.monthData(),"incidences",e.join(","),t,r]},D3=()=>Ut({queryKey:yr.shiftTypes(),queryFn:Mce}),tue=(e,t)=>Ut({queryKey:yr.staffList(e,t),queryFn:()=>Fce(e,t)}),rue=e=>Ut({queryKey:yr.staffShift(e||""),queryFn:()=>e?$ce(e):null,enabled:!!e}),nue=e=>Ut({queryKey:yr.specialTemplate(e||""),queryFn:()=>e?Uce(e):null,enabled:!!e}),aue=(e,t,r)=>Ut({queryKey:yr.overrides(e,t,r),queryFn:()=>qce(e,t,r),enabled:e.length>0}),iue=(e,t,r)=>Ut({queryKey:yr.marks(e,t,r),queryFn:()=>Hce(e,t,r),enabled:e.length>0}),sue=(e,t,r)=>Ut({queryKey:yr.licenses(e,t,r),queryFn:()=>Gce(e,t,r),enabled:e.length>0}),oue=(e,t,r)=>Ut({queryKey:yr.permissions(e,t,r),queryFn:()=>Xce(e,t,r),enabled:e.length>0}),lue=(e,t,r)=>Ut({queryKey:yr.vacations(e,t,r),queryFn:()=>Jce(e,t,r),enabled:e.length>0}),cue=(e,t,r)=>{const n=Fi(e);return Ut({queryKey:yr.incidences(n,t,r),queryFn:()=>Qce(n,t,r)})},uue=()=>{const e=Lt();return Dt({mutationFn:t=>Bce(t),onSuccess:t=>{e.invalidateQueries({queryKey:yr.staffShift(t.staff_id)}),e.invalidateQueries({queryKey:yr.staff()})}})},due=()=>{const e=Lt();return Dt({mutationFn:({staffId:t,offDays:r})=>zce(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:yr.specialTemplate(t.staff_id)})}})},fue=()=>{const e=Lt();return Dt({mutationFn:({values:t,createdBy:r})=>Wce(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:yr.monthData()})}})},hue=()=>{const e=Lt();return Dt({mutationFn:({values:t,createdBy:r})=>Kce(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:yr.monthData()})}})},pue=()=>{const e=Lt();return Dt({mutationFn:({values:t,createdBy:r})=>Yce(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:yr.monthData()})}})},mue=()=>{const e=Lt();return Dt({mutationFn:({values:t,requestedBy:r})=>Zce(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:yr.staff()})}})},gue=()=>{const e=Lt();return Dt({mutationFn:({staffIds:t,date:r,createdBy:n})=>Vce(t,r,n),onSuccess:()=>{e.invalidateQueries({queryKey:yr.monthData()})}})},vue=()=>{const e=Lt();M.useEffect(()=>eue(()=>{console.log("Attendance marks changed"),e.invalidateQueries({queryKey:yr.monthData()})},()=>{console.log("Licenses changed"),e.invalidateQueries({queryKey:yr.monthData()})},()=>{console.log("Permissions changed"),e.invalidateQueries({queryKey:yr.monthData()})}),[e])},Mr={OFF:{bg:"bg-slate-100",text:"text-slate-500",border:"border-slate-200"},WORK_DIA:{bg:"bg-sky-50",text:"text-sky-700",border:"border-sky-200"},WORK_NOCHE:{bg:"bg-indigo-50",text:"text-indigo-700",border:"border-indigo-200"},LIC:{bg:"bg-purple-50",text:"text-purple-700",border:"border-purple-200"},VAC:{bg:"bg-teal-50",text:"text-teal-700",border:"border-teal-200"},PER:{bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-200"},PRESENTE:{bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-200"},AUSENTE:{bg:"bg-red-50",text:"text-red-700",border:"border-red-200"},PENDING:{bg:"bg-yellow-50",text:"text-yellow-700",border:"border-yellow-300"},DESVINCULADO:{bg:"bg-slate-50",text:"text-slate-400 line-through",border:"border-slate-200"}},Fm={NM:"bg-yellow-100 text-yellow-800 border-yellow-300",NC:"bg-orange-100 text-orange-800 border-orange-300",CD:"bg-blue-100 text-blue-800 border-blue-300",AUT:"bg-green-100 text-green-800 border-green-300"},xue={EL_ROBLE:"bg-emerald-600 hover:bg-emerald-700 text-white",LA_REINA:"bg-blue-600 hover:bg-blue-700 text-white",EL_SALTO:"bg-amber-600 hover:bg-amber-700 text-white",LO_ECHEVERS:"bg-purple-600 hover:bg-purple-700 text-white",COLO_COLO:"bg-red-600 hover:bg-red-700 text-white",ALL:"bg-slate-600 hover:bg-slate-700 text-white"},bd={count:"bg-slate-100 text-slate-700",programmed:"bg-sky-100 text-sky-700",license:"bg-purple-100 text-purple-700",vacation:"bg-teal-100 text-teal-700",permission:"bg-amber-100 text-amber-700",incident:"bg-orange-100 text-orange-700",pending:"bg-red-100 text-red-700"},yue={SUPERVISOR:"bg-indigo-50/50",INSPECTOR:"bg-sky-50/50",CONDUCTOR:"bg-emerald-50/50",PLANILLERO:"bg-amber-50/50",CLEANER:"bg-slate-50/50"},of={secondary:"bg-slate-100 hover:bg-slate-200 text-slate-700",success:"bg-emerald-600 hover:bg-emerald-700 text-white",danger:"bg-red-600 hover:bg-red-700 text-white"},bue=({isOff:e,horario:t,reducido:r=!1,turno:n,mark:a,incidencies:i=[],isToday:s=!1,isDisabled:o=!1,licenseCode:c,vacationCode:u,permissionCode:d,onClick:f})=>{const p=()=>{if(o){const x=Mr.DESVINCULADO;return`${x.bg} ${x.text} border ${x.border}`}if(c){const x=Mr.LIC;return`${x.bg} ${x.text} border ${x.border}`}if(u){const x=Mr.VAC;return`${x.bg} ${x.text} border ${x.border}`}if(d){const x=Mr.PER;return`${x.bg} ${x.text} border ${x.border}`}if(a){const x=a.mark==="P"?Mr.PRESENTE:Mr.AUSENTE;return`${x.bg} ${x.text} border ${x.border}`}if(e){const x=Mr.OFF;return`${x.bg} ${x.text} border ${x.border}`}const m=n==="NOCHE"?Mr.WORK_NOCHE:Mr.WORK_DIA;return`${m.bg} ${m.text} border ${m.border}`},h=()=>{if(c)return l.jsx("span",{className:"text-xs font-bold",children:"LIC"});if(u)return l.jsx("span",{className:"text-xs font-bold",children:"VAC"});if(d)return l.jsx("span",{className:"text-xs font-bold",children:"PER"});if(a)return l.jsx("span",{className:"text-lg font-bold",children:a.mark});if(e)return l.jsx("span",{className:"text-lg font-bold text-slate-500",children:"L"});if(t){const m=wue(t,r);return l.jsxs("div",{className:"text-center leading-tight",children:[l.jsx("div",{className:"text-[10px] font-semibold",children:m}),r&&l.jsx("div",{className:"text-[8px] text-amber-600",children:"-1h"})]})}return l.jsx("span",{className:"text-xs font-medium",children:n==="NOCHE"?"N":"D"})},v=i.slice(0,2);return l.jsxs("button",{onClick:f,disabled:o,className:`
                relative w-full h-14 rounded-md transition-all
                flex flex-col items-center justify-center
                ${p()}
                ${s?"ring-2 ring-brand-500 ring-offset-1":""}
                ${o?"cursor-not-allowed opacity-50":"hover:scale-105 cursor-pointer hover:shadow-md"}
            `,children:[h(),v.length>0&&l.jsx("div",{className:"absolute bottom-0.5 left-0.5 right-0.5 flex gap-0.5 justify-center",children:v.map(m=>l.jsx("span",{className:`text-[7px] font-bold px-0.5 rounded ${Fm[m]}`,title:_ue(m),children:m},m))})]})};function wue(e,t){if(!e)return"";const r=e.match(/(\d{1,2}):(\d{2})-(\d{1,2}):(\d{2})/);if(!r)return e;let n=parseInt(r[1],10);const a=parseInt(r[3],10);return t?`${((n+1)%24).toString().padStart(2,"0")}-${a.toString().padStart(2,"0")}`:`${n.toString().padStart(2,"0")}-${a.toString().padStart(2,"0")}`}function _ue(e){return{NM:"No Marcacin",NC:"Sin Credencial",CD:"Cambio de Da",AUT:"Autorizacin"}[e]||e}const Sue=new Date("2025-12-29");function Nue(e,t){const r=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((n-r)/(1e3*60*60*24))}function jue(e,t){const r=Nue(Sue,e);return Math.floor(r/7)%t}function Aue(e){return e.getDay()}function j5(e,t,r){return e>=t&&e<=r}function v9(e,t,r,n,a,i){var c,u;if(i)return i.override_type==="OFF";const s=new Date(e+"T12:00:00"),o=Aue(s);switch(n.type){case"fixed":return((c=n.offDays)==null?void 0:c.includes(o))??!1;case"rotating":{if(!n.weeks||!n.cycle)return!1;let d=jue(s,n.cycle);r==="CONTRATURNO"&&(d=(d+1)%n.cycle);const f=n.weeks[d];return((u=f==null?void 0:f.offDays)==null?void 0:u.includes(o))??!1}case"manual":return!1;default:return!1}}function x9(e){if(!e)return"DIA";const t=e.match(/^(\d{1,2}):(\d{2})/);if(!t)return"DIA";const r=parseInt(t[1],10);return r>=20||r<6?"NOCHE":"DIA"}function Eue(e,t){return new Date(e,t+1,0).getDate()}function Tue(e,t){const r=Eue(e,t),n=[];for(let a=1;a<=r;a++){const i=new Date(e,t,a);n.push(i.toISOString().split("T")[0])}return n}function Cue(e){return new Date(e+"T12:00:00").getDate()}function y9(e){const t=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],r=new Date(e+"T12:00:00");return t[r.getDay()]}function TO(e){const t=new Date().toISOString().split("T")[0];return e===t}function kue(e){const t=new Date().toISOString().split("T")[0];return e<t}function Oue(e){return["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][e]}function ij(e){const t=new Date(e+"T12:00:00"),r=t.getDay(),n=t.getDate()-r+(r===0?-6:1);return new Date(t.setDate(n)).toISOString().split("T")[0]}function M3(e){const t=[],r=new Date(e+"T12:00:00");for(let n=0;n<7;n++){const a=new Date(r);a.setDate(r.getDate()+n),t.push(a.toISOString().split("T")[0])}return t}function Pue(e){const t=new Date(e+"T12:00:00");return t.setDate(t.getDate()-7),t.toISOString().split("T")[0]}function Lue(e){const t=new Date(e+"T12:00:00");return t.setDate(t.getDate()+7),t.toISOString().split("T")[0]}function CO(e){const t=M3(e),r=new Date(t[0]+"T12:00:00"),n=new Date(t[6]+"T12:00:00"),a=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],i=r.getDate(),s=a[r.getMonth()],o=n.getDate(),c=a[n.getMonth()],u=n.getFullYear();return r.getMonth()===n.getMonth()?`${i} - ${o} ${s} ${u}`:`${i} ${s} - ${o} ${c} ${u}`}function b9(e){const t=M3(e);return[t[1],t[3]]}function Rue(e,t){const r=e.match(/(\d{1,2}):(\d{2})-(\d{1,2}):(\d{2})/);if(!r)return e;const n=parseInt(r[1],10),a=r[2],i=r[3],s=r[4];return`${((n+1)%24).toString().padStart(2,"0")}:${a}-${i}:${s}`}const Iue=({isOpen:e,onClose:t,staff:r,date:n,currentMark:a,currentNote:i,incidencies:s=[],onMarkPresent:o,onMarkAbsent:c,onRegisterLicense:u,onRegisterPermission:d,onRequestOffboarding:f,isManager:p=!1})=>{const[h,v]=M.useState("none"),[m,x]=M.useState(""),[y,g]=M.useState(n),[b,S]=M.useState(n),[_,j]=M.useState(""),[A,E]=M.useState(n),[T,L]=M.useState(n),[k,R]=M.useState("PERSONAL"),[D,q]=M.useState("");if(!e||!r)return null;const X=y9(n),se=new Date(n+"T12:00:00").getDate(),Z=r.status==="DESVINCULADO",K=()=>{m.trim()&&(c(m.trim()),x(""),v("none"))},ie=()=>{u(y,b,_||void 0),j(""),v("none")},pe=()=>{d(A,T,k,D||void 0),q(""),v("none")};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 transition-opacity",onClick:t}),l.jsxs("div",{className:"fixed right-0 top-0 h-full w-full max-w-md bg-white shadow-xl z-50 flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-slate-50",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-900",children:r.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:[r.rut," | ",r.cargo," | ",X," ",se]})]}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-200 rounded-lg transition-colors",children:l.jsx(xe,{name:"x",size:20})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[Z&&l.jsxs("div",{className:"p-3 bg-slate-100 rounded-lg text-slate-600 text-sm",children:[l.jsx(xe,{name:"alert-triangle",size:16,className:"inline mr-2"}),"Este trabajador est desvinculado. No se permiten nuevas marcaciones."]}),a&&l.jsxs("div",{className:`p-3 rounded-lg flex items-center gap-2 ${a==="P"?Mr.PRESENTE.bg:Mr.AUSENTE.bg}`,children:[l.jsx(xe,{name:a==="P"?"check-circle":"x-circle",size:20}),l.jsx("span",{className:"font-medium",children:a==="P"?"Presente":"Ausente"}),i&&l.jsxs("span",{className:"text-sm opacity-75",children:["- ",i]})]}),!Z&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Marcar asistencia"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:o,className:`flex-1 py-2 rounded-lg font-medium transition-colors ${of.success}`,children:[l.jsx(xe,{name:"check",size:16,className:"inline mr-1"}),"Presente (P)"]}),l.jsxs("button",{onClick:()=>v("absent"),className:`flex-1 py-2 rounded-lg font-medium transition-colors ${of.danger}`,children:[l.jsx(xe,{name:"x",size:16,className:"inline mr-1"}),"Ausente (A)"]})]})]}),h==="absent"&&l.jsxs("div",{className:"space-y-3 p-3 bg-red-50 rounded-lg border border-red-100",children:[l.jsx("h4",{className:"text-sm font-medium text-red-800",children:"Registrar Ausencia"}),l.jsx("textarea",{value:m,onChange:me=>x(me.target.value),placeholder:"Motivo de la ausencia (requerido)",className:"w-full p-2 border rounded-lg text-sm resize-none",rows:2}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:K,disabled:!m.trim(),className:"flex-1 py-2 rounded-lg font-medium bg-red-600 text-white disabled:opacity-50",children:"Confirmar"}),l.jsx("button",{onClick:()=>v("none"),className:"px-4 py-2 rounded-lg font-medium bg-slate-100 text-slate-600",children:"Cancelar"})]})]}),!Z&&h==="none"&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Registrar"}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsx("button",{onClick:()=>v("license"),className:`py-2 px-3 rounded-lg text-sm font-medium ${Mr.LIC.bg} ${Mr.LIC.text} border ${Mr.LIC.border}`,children:"Licencia"}),l.jsx("button",{onClick:()=>v("permission"),className:`py-2 px-3 rounded-lg text-sm font-medium ${Mr.PER.bg} ${Mr.PER.text} border ${Mr.PER.border}`,children:"Permiso"}),l.jsx("button",{disabled:!0,className:`py-2 px-3 rounded-lg text-sm font-medium ${Mr.VAC.bg} ${Mr.VAC.text} border ${Mr.VAC.border} opacity-50 cursor-not-allowed`,title:"Gestionar en seccin Vacaciones",children:"Vacacin"})]})]}),h==="license"&&l.jsxs("div",{className:"space-y-3 p-3 bg-purple-50 rounded-lg border border-purple-100",children:[l.jsx("h4",{className:"text-sm font-medium text-purple-800",children:"Registrar Licencia"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-slate-600",children:"Desde"}),l.jsx("input",{type:"date",value:y,onChange:me=>g(me.target.value),className:"w-full p-2 border rounded-lg text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-slate-600",children:"Hasta"}),l.jsx("input",{type:"date",value:b,onChange:me=>S(me.target.value),className:"w-full p-2 border rounded-lg text-sm"})]})]}),l.jsx("textarea",{value:_,onChange:me=>j(me.target.value),placeholder:"Notas (opcional)",className:"w-full p-2 border rounded-lg text-sm resize-none",rows:2}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:ie,className:"flex-1 py-2 rounded-lg font-medium bg-purple-600 text-white",children:"Guardar"}),l.jsx("button",{onClick:()=>v("none"),className:"px-4 py-2 rounded-lg font-medium bg-slate-100 text-slate-600",children:"Cancelar"})]})]}),h==="permission"&&l.jsxs("div",{className:"space-y-3 p-3 bg-amber-50 rounded-lg border border-amber-100",children:[l.jsx("h4",{className:"text-sm font-medium text-amber-800",children:"Registrar Permiso"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-slate-600",children:"Desde"}),l.jsx("input",{type:"date",value:A,onChange:me=>E(me.target.value),className:"w-full p-2 border rounded-lg text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-slate-600",children:"Hasta"}),l.jsx("input",{type:"date",value:T,onChange:me=>L(me.target.value),className:"w-full p-2 border rounded-lg text-sm"})]})]}),l.jsxs("select",{value:k,onChange:me=>R(me.target.value),className:"w-full p-2 border rounded-lg text-sm",children:[l.jsx("option",{value:"PERSONAL",children:"Personal"}),l.jsx("option",{value:"MEDICO",children:"Mdico"}),l.jsx("option",{value:"FAMILIAR",children:"Familiar"}),l.jsx("option",{value:"OTRO",children:"Otro"})]}),l.jsx("textarea",{value:D,onChange:me=>q(me.target.value),placeholder:"Notas (opcional)",className:"w-full p-2 border rounded-lg text-sm resize-none",rows:2}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:pe,className:"flex-1 py-2 rounded-lg font-medium bg-amber-600 text-white",children:"Guardar"}),l.jsx("button",{onClick:()=>v("none"),className:"px-4 py-2 rounded-lg font-medium bg-slate-100 text-slate-600",children:"Cancelar"})]})]}),s.length>0&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Incidencias relacionadas"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.includes("NM")&&l.jsx("span",{className:"px-2 py-1 text-sm bg-yellow-100 text-yellow-800 rounded",children:"No Marcacin"}),s.includes("NC")&&l.jsx("span",{className:"px-2 py-1 text-sm bg-orange-100 text-orange-800 rounded",children:"Sin Credencial"}),s.includes("CD")&&l.jsx("span",{className:"px-2 py-1 text-sm bg-blue-100 text-blue-800 rounded",children:"Cambio de Da"}),s.includes("AUT")&&l.jsx("span",{className:"px-2 py-1 text-sm bg-green-100 text-green-800 rounded",children:"Autorizacin"})]})]}),p&&!Z&&f&&l.jsx("div",{className:"pt-4 border-t",children:l.jsxs("button",{onClick:f,className:"w-full py-2 rounded-lg text-sm font-medium text-red-600 border border-red-200 hover:bg-red-50 transition-colors",children:[l.jsx(xe,{name:"user-x",size:16,className:"inline mr-1"}),"Solicitar Desvinculacin"]})})]}),l.jsx("div",{className:"p-4 border-t bg-slate-50",children:l.jsx("button",{onClick:t,className:`w-full py-2 rounded-lg font-medium ${of.secondary}`,children:"Cerrar"})})]})]})},kO=["SUPERVISOR","INSPECTOR","CONDUCTOR","PLANILLERO","CLEANER"];function Due(e){return{"5X2_FIJO":{id:"1",code:"5X2_FIJO",name:"5x2 Fijo",pattern_json:{type:"fixed",description:"Lun-Vie trabaja",offDays:[6,0]},created_at:""},"5X2_ROTATIVO":{id:"2",code:"5X2_ROTATIVO",name:"5x2 Rotativo",pattern_json:{type:"rotating",description:"Rotativo 2 semanas",cycle:2,weeks:[{offDays:[3,0]},{offDays:[5,6]}]},created_at:""},"5X2_SUPER":{id:"3",code:"5X2_SUPER",name:"5x2 Super",pattern_json:{type:"rotating",description:"Super 2 semanas",cycle:2,weeks:[{offDays:[3,0]},{offDays:[4,5]}]},created_at:""},ESPECIAL:{id:"4",code:"ESPECIAL",name:"Especial",pattern_json:{type:"manual",description:"Manual 28 dias",cycleDays:28},created_at:""}}[e]}const Mue=({staff:e,shiftTypes:t,marks:r,licenses:n,permissions:a,vacations:i,overrides:s,incidences:o,weekDates:c,isLoading:u=!1,onRequestOffboarding:d,onOpenShiftConfig:f})=>{var K,ie;const p=Ar(pe=>pe.session),[h,v]=M.useState(null),m=fue(),x=hue(),y=pue(),g=gue(),b=M.useMemo(()=>{const pe={};for(const me of kO)pe[me]=[];for(const me of e){const O=me.cargo.toUpperCase();let F="CLEANER";O.includes("SUPERVISOR")?F="SUPERVISOR":O.includes("INSPECTOR")?F="INSPECTOR":O.includes("CONDUCTOR")?F="CONDUCTOR":O.includes("PLANILLERO")&&(F="PLANILLERO"),pe[F]&&pe[F].push(me)}return pe},[e]),S=M.useMemo(()=>{const pe=new Map;for(const me of r)pe.set(`${me.staff_id}-${me.mark_date}`,me);return pe},[r]),_=M.useMemo(()=>{const pe=new Map;for(const me of t)pe.set(me.code,me);return pe},[t]),j=M.useMemo(()=>{const pe=new Map;for(const me of s)pe.set(`${me.staff_id}-${me.override_date}`,me);return pe},[s]),A=(pe,me)=>n.find(O=>O.staff_id===pe&&j5(me,O.start_date,O.end_date)),E=(pe,me)=>i.find(O=>O.staff_id===pe&&j5(me,O.start_date,O.end_date)),T=(pe,me)=>a.find(O=>O.staff_id===pe&&j5(me,O.start_date,O.end_date)),L=(pe,me)=>{const O=[];return o.noMarcaciones.some(F=>F.rut===pe&&F.date===me)&&O.push("NM"),o.sinCredenciales.some(F=>F.rut===pe&&F.date===me)&&O.push("NC"),o.cambiosDia.some(F=>F.rut===pe&&F.date===me)&&O.push("CD"),o.autorizaciones.some(F=>F.rut===pe&&F.date===me)&&O.push("AUT"),O},k=(pe,me)=>{const O=S.get(`${pe.id}-${me}`),F=A(pe.id,me),B=E(pe.id,me),U=T(pe.id,me),Y=j.get(`${pe.id}-${me}`),oe=L(pe.rut,me);let ee=!1;const te=pe.horario,le=x9(pe.horario),Ne=new Date(me+"T12:00:00").getDay();if(pe.shift){let Ie=_.get(pe.shift.shift_type_code);Ie!=null&&Ie.pattern_json||(Ie=Due(pe.shift.shift_type_code)),Ie!=null&&Ie.pattern_json?ee=v9(me,pe.shift.shift_type_code,pe.shift.variant_code,Ie.pattern_json,void 0,Y):ee=Ne===0||Ne===6}else ee=Ne===0||Ne===6;const Me=b9(c[0]).includes(me)&&!ee;return{mark:O,license:F,vacation:B,permission:U,isOff:ee,horario:te,turno:le,reducido:Me,incidencies:oe}},R=()=>{if(!p)return;const pe=new Date().toISOString().split("T")[0],me=e.filter(O=>{if(O.status==="DESVINCULADO")return!1;const F=k(O,pe);return!(F.isOff||F.license||F.vacation||F.permission||F.mark)});if(me.length===0){alert("No hay personal pendiente de marcar para hoy");return}confirm(`Marcar ${me.length} personas como PRESENTE hoy?`)&&g.mutate({staffIds:me.map(O=>O.id),date:pe,createdBy:p.supervisorName})},D=()=>{!h||!p||(m.mutate({values:{staff_id:h.staff.id,mark_date:h.date,mark:"P"},createdBy:p.supervisorName}),v(null))},q=pe=>{!h||!p||(m.mutate({values:{staff_id:h.staff.id,mark_date:h.date,mark:"A",note:pe},createdBy:p.supervisorName}),v(null))},X=(pe,me,O)=>{!h||!p||(x.mutate({values:{staff_id:h.staff.id,start_date:pe,end_date:me,note:O},createdBy:p.supervisorName}),v(null))},se=(pe,me,O,F)=>{!h||!p||(y.mutate({values:{staff_id:h.staff.id,start_date:pe,end_date:me,permission_type:O,note:F},createdBy:p.supervisorName}),v(null))},Z=p&&["Isaac","Claudio","Cristian"].some(pe=>{var me;return(me=p.supervisorName)==null?void 0:me.includes(pe)});return u?l.jsxs("div",{className:"flex items-center justify-center h-64",children:[l.jsx(xe,{name:"loader",size:24,className:"animate-spin text-brand-600"}),l.jsx("span",{className:"ml-2 text-slate-600",children:"Cargando..."})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white rounded-lg border shadow-sm overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 border-b",children:[l.jsxs("span",{className:"text-sm text-slate-600",children:[e.length," trabajadores"]}),l.jsxs("button",{onClick:R,disabled:g.isPending,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg font-medium text-sm hover:bg-emerald-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[l.jsx(xe,{name:"check",size:16}),g.isPending?"Marcando...":"Marcar Todos Presente Hoy"]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full border-collapse",children:[l.jsx("thead",{className:"bg-slate-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"sticky left-0 z-10 bg-slate-100 border-b border-r px-3 py-2 text-left min-w-[220px]",children:l.jsx("span",{className:"text-slate-700 font-semibold text-sm",children:"Personal"})}),c.map(pe=>{const me=y9(pe),O=Cue(pe),F=TO(pe);return l.jsxs("th",{className:`border-b px-1 py-2 text-center min-w-[70px] ${F?"bg-brand-50":"bg-slate-50"}`,children:[l.jsx("div",{className:"text-xs font-medium text-slate-500",children:me}),l.jsx("div",{className:`text-lg font-bold ${F?"text-brand-600":"text-slate-700"}`,children:O})]},pe)})]})}),l.jsx("tbody",{children:kO.map(pe=>{const me=b[pe]||[];return me.length===0?null:l.jsxs(we.Fragment,{children:[l.jsx("tr",{className:yue[pe],children:l.jsxs("td",{colSpan:c.length+1,className:"sticky left-0 px-3 py-2 font-semibold text-sm text-slate-700 border-b",children:[pe," (",me.length,")"]})}),me.map(O=>{const F=O.status==="DESVINCULADO",B=O.shift?_.get(O.shift.shift_type_code):null;return l.jsxs("tr",{className:`hover:bg-slate-50/50 transition-colors ${F?"bg-slate-50 opacity-60":""}`,children:[l.jsx("td",{className:"sticky left-0 z-10 bg-white border-b border-r px-3 py-2",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:`font-medium text-sm text-slate-800 truncate ${F?"line-through":""}`,children:O.nombre}),l.jsxs("div",{className:"text-xs text-slate-500 truncate",children:[O.rut," | ",O.horario||"Sin horario",B&&l.jsxs("span",{className:"ml-1 text-brand-600",children:["(",B.name,")"]})]})]}),f&&l.jsx("button",{onClick:()=>f(O),className:"p-1.5 hover:bg-slate-100 rounded text-slate-400 hover:text-brand-600 transition-colors",title:"Configurar turno y das libres",children:l.jsx(xe,{name:"settings",size:16})}),O.admonitionCount&&O.admonitionCount>0&&l.jsx("span",{className:"px-1.5 py-0.5 text-xs font-medium bg-red-100 text-red-700 rounded",children:O.admonitionCount})]})}),c.map(U=>{const Y=k(O,U);return l.jsx("td",{className:"border-b p-0.5",children:l.jsx(bue,{date:U,isOff:Y.isOff,horario:Y.isOff?void 0:Y.horario,reducido:Y.reducido,turno:Y.turno,mark:Y.mark,incidencies:Y.incidencies,isToday:TO(U),isDisabled:F,licenseCode:Y.license?"LIC":void 0,vacationCode:Y.vacation?"VAC":void 0,permissionCode:Y.permission?"PER":void 0,onClick:()=>v({staff:O,date:U})})},U)})]},O.id)})]},pe)})})]})})]}),l.jsx(Iue,{isOpen:h!==null,onClose:()=>v(null),staff:(h==null?void 0:h.staff)??null,date:(h==null?void 0:h.date)??"",currentMark:h?(K=S.get(`${h.staff.id}-${h.date}`))==null?void 0:K.mark:void 0,currentNote:h?((ie=S.get(`${h.staff.id}-${h.date}`))==null?void 0:ie.note)??void 0:void 0,incidencies:h?L(h.staff.rut,h.date):[],onMarkPresent:D,onMarkAbsent:q,onRegisterLicense:X,onRegisterPermission:se,onRegisterVacation:()=>{},onRequestOffboarding:Z&&d&&h?()=>d(h.staff):void 0,isManager:Z??!1})]})},Fue=({kpis:e,isLoading:t})=>{if(t)return l.jsx("div",{className:"flex flex-wrap gap-2",children:[...Array(6)].map((a,i)=>l.jsx("div",{className:"h-8 w-24 bg-slate-100 rounded-lg animate-pulse"},i))});const r=[{label:"Sup",value:e.byPosition.SUPERVISOR},{label:"Insp",value:e.byPosition.INSPECTOR},{label:"Cond",value:e.byPosition.CONDUCTOR},{label:"Plan",value:e.byPosition.PLANILLERO},{label:"Clean",value:e.byPosition.CLEANER}],n=Object.values(e.byPosition).reduce((a,i)=>a+i,0);return l.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[l.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-lg ${bd.count}`,children:[l.jsx(xe,{name:"users",size:14}),l.jsx("span",{className:"font-medium",children:n}),l.jsx("span",{className:"text-slate-500 hidden sm:inline",children:"Total"})]}),l.jsx("div",{className:"hidden md:flex items-center gap-1",children:r.map(a=>l.jsx("div",{className:"px-2 py-1 rounded bg-slate-50 text-slate-600 font-medium",title:a.label,children:a.value},a.label))}),l.jsx("div",{className:"w-px h-5 bg-slate-200 hidden sm:block"}),l.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-lg ${bd.programmed}`,children:[l.jsx(xe,{name:"sun",size:14}),l.jsx("span",{className:"font-medium",children:e.programmmedDay}),l.jsx("span",{className:"hidden sm:inline",children:"Da"})]}),l.jsxs("div",{className:"flex items-center gap-1 px-2 py-1.5 rounded-lg bg-indigo-100 text-indigo-700",children:[l.jsx(xe,{name:"moon",size:14}),l.jsx("span",{className:"font-medium",children:e.programmedNight}),l.jsx("span",{className:"hidden sm:inline",children:"Noche"})]}),l.jsx("div",{className:"w-px h-5 bg-slate-200 hidden sm:block"}),e.onLicense>0&&l.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-lg ${bd.license}`,children:[l.jsx(xe,{name:"file-text",size:14}),l.jsx("span",{className:"font-medium",children:e.onLicense}),l.jsx("span",{className:"hidden sm:inline",children:"Lic"})]}),e.onVacation>0&&l.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-lg ${bd.vacation}`,children:[l.jsx(xe,{name:"palmtree",size:14}),l.jsx("span",{className:"font-medium",children:e.onVacation}),l.jsx("span",{className:"hidden sm:inline",children:"Vac"})]}),e.onPermission>0&&l.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-lg ${bd.permission}`,children:[l.jsx(xe,{name:"clock",size:14}),l.jsx("span",{className:"font-medium",children:e.onPermission}),l.jsx("span",{className:"hidden sm:inline",children:"Per"})]}),e.withIncidencies>0&&l.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-lg ${bd.incident}`,children:[l.jsx(xe,{name:"alert-triangle",size:14}),l.jsx("span",{className:"font-medium",children:e.withIncidencies}),l.jsx("span",{className:"hidden sm:inline",children:"Inc"})]}),e.pendingMarks>0&&l.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-lg ${bd.pending}`,children:[l.jsx(xe,{name:"alert-circle",size:14}),l.jsx("span",{className:"font-medium",children:e.pendingMarks}),l.jsx("span",{className:"hidden sm:inline",children:"Pend"})]})]})},$ue=()=>{const e=[{label:"Libre (OFF)",colors:Mr.OFF},{label:"Turno Da",colors:Mr.WORK_DIA},{label:"Turno Noche",colors:Mr.WORK_NOCHE},{label:"Presente (P)",colors:Mr.PRESENTE},{label:"Ausente (A)",colors:Mr.AUSENTE},{label:"Licencia (LIC)",colors:Mr.LIC},{label:"Vacaciones (VAC)",colors:Mr.VAC},{label:"Permiso (PER)",colors:Mr.PER},{label:"Pendiente",colors:Mr.PENDING}],t=[{label:"No Marcacin (NM)",className:Fm.NM},{label:"Sin Credencial (NC)",className:Fm.NC},{label:"Cambio Da (CD)",className:Fm.CD},{label:"Autorizacin (AUT)",className:Fm.AUT}];return l.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:[e.map(r=>l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:`w-4 h-4 rounded ${r.colors.bg} ${r.colors.border} border`}),l.jsx("span",{className:"text-slate-600",children:r.label})]},r.label)),l.jsx("div",{className:"w-px h-4 bg-slate-300"}),t.map(r=>{var n;return l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium border ${r.className}`,children:(n=r.label.match(/\((\w+)\)/))==null?void 0:n[1]}),l.jsx("span",{className:"text-slate-600 hidden xl:inline",children:r.label.split(" (")[0]})]},r.label)})]})},Bue="modulepreload",Uue=function(e,t){return new URL(e,t).href},OO={},ly=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){const s=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(u=>{if(u=Uue(u,n),u in OO)return;OO[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!n)for(let v=s.length-1;v>=0;v--){const m=s[v];if(m.href===u&&(!d||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Bue,d||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((v,m)=>{h.addEventListener("load",v),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return a.then(s=>{for(const o of s||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})};function Fr(e){"@babel/helpers - typeof";return Fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fr(e)}var Bo=Uint8Array,As=Uint16Array,F3=Int32Array,$3=new Bo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),B3=new Bo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),PO=new Bo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),w9=function(e,t){for(var r=new As(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new F3(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},_9=w9($3,2),zue=_9.b,sj=_9.r;zue[28]=258,sj[258]=28;var que=w9(B3,0),LO=que.r,oj=new As(32768);for(var fn=0;fn<32768;++fn){var eu=(fn&43690)>>1|(fn&21845)<<1;eu=(eu&52428)>>2|(eu&13107)<<2,eu=(eu&61680)>>4|(eu&3855)<<4,oj[fn]=((eu&65280)>>8|(eu&255)<<8)>>1}var tg=function(e,t,r){for(var n=e.length,a=0,i=new As(t);a<n;++a)e[a]&&++i[e[a]-1];var s=new As(t);for(a=1;a<t;++a)s[a]=s[a-1]+i[a-1]<<1;var o;if(r){o=new As(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=s[e[a]-1]++<<d,p=f|(1<<d)-1;f<=p;++f)o[oj[f]>>c]=u}else for(o=new As(n),a=0;a<n;++a)e[a]&&(o[a]=oj[s[e[a]-1]++]>>15-e[a]);return o},wf=new Bo(288);for(var fn=0;fn<144;++fn)wf[fn]=8;for(var fn=144;fn<256;++fn)wf[fn]=9;for(var fn=256;fn<280;++fn)wf[fn]=7;for(var fn=280;fn<288;++fn)wf[fn]=8;var mb=new Bo(32);for(var fn=0;fn<32;++fn)mb[fn]=5;var Hue=tg(wf,9,0),Wue=tg(mb,5,0),S9=function(e){return(e+7)/8|0},Vue=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Bo(e.subarray(t,r))},$l=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},mm=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},A5=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,i=r.slice();if(!a)return{t:j9,l:0};if(a==1){var s=new Bo(r[0].s+1);return s[r[0].s]=1,{t:s,l:1}}r.sort(function(_,j){return _.f-j.f}),r.push({s:-1,f:25001});var o=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:o.f+c.f,l:o,r:c};d!=a-1;)o=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:o.f+c.f,l:o,r:c};for(var p=i[0].s,n=1;n<a;++n)i[n].s>p&&(p=i[n].s);var h=new As(p+1),v=lj(r[d-1],h,0);if(v>t){var n=0,m=0,x=v-t,y=1<<x;for(i.sort(function(j,A){return h[A.s]-h[j.s]||j.f-A.f});n<a;++n){var g=i[n].s;if(h[g]>t)m+=y-(1<<v-h[g]),h[g]=t;else break}for(m>>=x;m>0;){var b=i[n].s;h[b]<t?m-=1<<t-h[b]++-1:++n}for(;n>=0&&m;--n){var S=i[n].s;h[S]==t&&(--h[S],++m)}v=t}return{t:new Bo(h),l:v}},lj=function(e,t,r){return e.s==-1?Math.max(lj(e.l,t,r+1),lj(e.r,t,r+1)):t[e.s]=r},RO=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new As(++t),n=0,a=e[0],i=1,s=function(c){r[n++]=c},o=1;o<=t;++o)if(e[o]==a&&o!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)s(32754);i>2&&(s(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(s(a),--i;i>6;i-=6)s(8304);i>2&&(s(i-3<<5|8208),i=0)}for(;i--;)s(a);i=1,a=e[o]}return{c:r.subarray(0,n),n:t}},gm=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},N9=function(e,t,r){var n=r.length,a=S9(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<n;++i)e[a+i+4]=r[i];return(a+4+n)*8},IO=function(e,t,r,n,a,i,s,o,c,u,d){$l(t,d++,r),++a[256];for(var f=A5(a,15),p=f.t,h=f.l,v=A5(i,15),m=v.t,x=v.l,y=RO(p),g=y.c,b=y.n,S=RO(m),_=S.c,j=S.n,A=new As(19),E=0;E<g.length;++E)++A[g[E]&31];for(var E=0;E<_.length;++E)++A[_[E]&31];for(var T=A5(A,7),L=T.t,k=T.l,R=19;R>4&&!L[PO[R-1]];--R);var D=u+5<<3,q=gm(a,wf)+gm(i,mb)+s,X=gm(a,p)+gm(i,m)+s+14+3*R+gm(A,L)+2*A[16]+3*A[17]+7*A[18];if(c>=0&&D<=q&&D<=X)return N9(t,d,e.subarray(c,c+u));var se,Z,K,ie;if($l(t,d,1+(X<q)),d+=2,X<q){se=tg(p,h,0),Z=p,K=tg(m,x,0),ie=m;var pe=tg(L,k,0);$l(t,d,b-257),$l(t,d+5,j-1),$l(t,d+10,R-4),d+=14;for(var E=0;E<R;++E)$l(t,d+3*E,L[PO[E]]);d+=3*R;for(var me=[g,_],O=0;O<2;++O)for(var F=me[O],E=0;E<F.length;++E){var B=F[E]&31;$l(t,d,pe[B]),d+=L[B],B>15&&($l(t,d,F[E]>>5&127),d+=F[E]>>12)}}else se=Hue,Z=wf,K=Wue,ie=mb;for(var E=0;E<o;++E){var U=n[E];if(U>255){var B=U>>18&31;mm(t,d,se[B+257]),d+=Z[B+257],B>7&&($l(t,d,U>>23&31),d+=$3[B]);var Y=U&31;mm(t,d,K[Y]),d+=ie[Y],Y>3&&(mm(t,d,U>>5&8191),d+=B3[Y])}else mm(t,d,se[U]),d+=Z[U]}return mm(t,d,se[256]),d+Z[256]},Gue=new F3([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),j9=new Bo(0),Kue=function(e,t,r,n,a,i){var s=i.z||e.length,o=new Bo(n+s+5*(1+Math.ceil(s/7e3))+a),c=o.subarray(n,o.length-a),u=i.l,d=(i.r||0)&7;if(t){d&&(c[0]=i.r>>3);for(var f=Gue[t-1],p=f>>13,h=f&8191,v=(1<<r)-1,m=i.p||new As(32768),x=i.h||new As(v+1),y=Math.ceil(r/3),g=2*y,b=function(Ie){return(e[Ie]^e[Ie+1]<<y^e[Ie+2]<<g)&v},S=new F3(25e3),_=new As(288),j=new As(32),A=0,E=0,T=i.i||0,L=0,k=i.w||0,R=0;T+2<s;++T){var D=b(T),q=T&32767,X=x[D];if(m[q]=X,x[D]=q,k<=T){var se=s-T;if((A>7e3||L>24576)&&(se>423||!u)){d=IO(e,c,0,S,_,j,E,L,R,T-R,d),L=A=E=0,R=T;for(var Z=0;Z<286;++Z)_[Z]=0;for(var Z=0;Z<30;++Z)j[Z]=0}var K=2,ie=0,pe=h,me=q-X&32767;if(se>2&&D==b(T-me))for(var O=Math.min(p,se)-1,F=Math.min(32767,T),B=Math.min(258,se);me<=F&&--pe&&q!=X;){if(e[T+K]==e[T+K-me]){for(var U=0;U<B&&e[T+U]==e[T+U-me];++U);if(U>K){if(K=U,ie=me,U>O)break;for(var Y=Math.min(me,U-2),oe=0,Z=0;Z<Y;++Z){var ee=T-me+Z&32767,te=m[ee],le=ee-te&32767;le>oe&&(oe=le,X=ee)}}}q=X,X=m[q],me+=q-X&32767}if(ie){S[L++]=268435456|sj[K]<<18|LO[ie];var Ne=sj[K]&31,ve=LO[ie]&31;E+=$3[Ne]+B3[ve],++_[257+Ne],++j[ve],k=T+K,++A}else S[L++]=e[T],++_[e[T]]}}for(T=Math.max(T,k);T<s;++T)S[L++]=e[T],++_[e[T]];d=IO(e,c,u,S,_,j,E,L,R,T-R,d),u||(i.r=d&7|c[d/8|0]<<3,d-=7,i.h=x,i.p=m,i.i=T,i.w=k)}else{for(var T=i.w||0;T<s+u;T+=65535){var Me=T+65535;Me>=s&&(c[d/8|0]=u,Me=s),d=N9(c,d+1,e.subarray(T,Me))}i.i=s}return Vue(o,0,n+S9(d)+a)},A9=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,i=r.length|0,s=0;s!=i;){for(var o=Math.min(s+2655,i);s<o;++s)a+=n+=r[s];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Xue=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),s=new Bo(i.length+e.length);s.set(i),s.set(e,i.length),e=s,a.w=i.length}return Kue(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},E9=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Yue=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=A9();a.p(t.dictionary),E9(e,2,a.d())}};function cj(e,t){t||(t={});var r=A9();r.p(e);var n=Xue(e,t,t.dictionary?6:2,4);return Yue(n,t),E9(n,n.length-4,r.d()),n}var Jue=typeof TextDecoder<"u"&&new TextDecoder,Que=0;try{Jue.decode(j9,{stream:!0}),Que=1}catch{}function Zue(e){if(Array.isArray(e))return e}function ede(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function DO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tde(e,t){if(e){if(typeof e=="string")return DO(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?DO(e,t):void 0}}function rde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MO(e,t){return Zue(e)||ede(e,t)||tde(e,t)||rde()}function FO(e,t="utf8"){return new TextDecoder(t).decode(e)}const nde=new TextEncoder;function ade(e){return nde.encode(e)}const ide=1024*8,sde=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),E5={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class U3{constructor(t=ide,r={}){Rr(this,"buffer");Rr(this,"byteLength");Rr(this,"byteOffset");Rr(this,"length");Rr(this,"offset");Rr(this,"lastWrittenByte");Rr(this,"littleEndian");Rr(this,"_data");Rr(this,"_mark");Rr(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const a=r.offset?r.offset>>>0:0,i=t.byteLength-a;let s=a;(ArrayBuffer.isView(t)||t instanceof U3)&&(t.byteLength!==t.buffer.byteLength&&(s=t.byteOffset+a),t=t.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=E5[r].BYTES_PER_ELEMENT*t,a=this.byteOffset+this.offset,i=this.buffer.slice(a,a+n);if(this.littleEndian===sde&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(a,a+n));o.reverse();const c=new E5[r](o.buffer);return this.offset+=n,c.reverse(),c}const s=new E5[r](i);return this.offset+=n,s}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return FO(this.readBytes(t))}decodeText(t=1,r="utf8"){return FO(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(ade(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function wp(e){let t=e.length;for(;--t>=0;)e[t]=0}const ode=3,lde=258,T9=29,cde=256,ude=cde+1+T9,C9=30,dde=512,fde=new Array((ude+2)*2);wp(fde);const hde=new Array(C9*2);wp(hde);const pde=new Array(dde);wp(pde);const mde=new Array(lde-ode+1);wp(mde);const gde=new Array(T9);wp(gde);const vde=new Array(C9);wp(vde);const xde=(e,t,r,n)=>{let a=e&65535|0,i=e>>>16&65535|0,s=0;for(;r!==0;){s=r>2e3?2e3:r,r-=s;do a=a+t[n++]|0,i=i+a|0;while(--s);a%=65521,i%=65521}return a|i<<16|0};var uj=xde;const yde=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},bde=new Uint32Array(yde()),wde=(e,t,r,n)=>{const a=bde,i=n+r;e^=-1;for(let s=n;s<i;s++)e=e>>>8^a[(e^t[s])&255];return e^-1};var Zo=wde,dj={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},k9={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const _de=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Sde=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)_de(r,n)&&(e[n]=r[n])}}return e},Nde=e=>{let t=0;for(let n=0,a=e.length;n<a;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,a=0,i=e.length;n<i;n++){let s=e[n];r.set(s,a),a+=s.length}return r},O9={assign:Sde,flattenChunks:Nde};let P9=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{P9=!1}const Bg=new Uint8Array(256);for(let e=0;e<256;e++)Bg[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Bg[254]=Bg[254]=1;var jde=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,a,i,s=e.length,o=0;for(a=0;a<s;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<s&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(o),i=0,a=0;i<o;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<s&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|r&63):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|r&63):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|r&63);return t};const Ade=(e,t)=>{if(t<65534&&e.subarray&&P9)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var Ede=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,a;const i=new Array(r*2);for(a=0,n=0;n<r;){let s=e[n++];if(s<128){i[a++]=s;continue}let o=Bg[s];if(o>4){i[a++]=65533,n+=o-1;continue}for(s&=o===2?31:o===3?15:7;o>1&&n<r;)s=s<<6|e[n++]&63,o--;if(o>1){i[a++]=65533;continue}s<65536?i[a++]=s:(s-=65536,i[a++]=55296|s>>10&1023,i[a++]=56320|s&1023)}return Ade(i,a)},Tde=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+Bg[e[r]]>t?r:t},fj={string2buf:jde,buf2string:Ede,utf8border:Tde};function Cde(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var kde=Cde;const Nx=16209,Ode=16191;var Pde=function(t,r){let n,a,i,s,o,c,u,d,f,p,h,v,m,x,y,g,b,S,_,j,A,E,T,L;const k=t.state;n=t.next_in,T=t.input,a=n+(t.avail_in-5),i=t.next_out,L=t.output,s=i-(r-t.avail_out),o=i+(t.avail_out-257),c=k.dmax,u=k.wsize,d=k.whave,f=k.wnext,p=k.window,h=k.hold,v=k.bits,m=k.lencode,x=k.distcode,y=(1<<k.lenbits)-1,g=(1<<k.distbits)-1;e:do{v<15&&(h+=T[n++]<<v,v+=8,h+=T[n++]<<v,v+=8),b=m[h&y];t:for(;;){if(S=b>>>24,h>>>=S,v-=S,S=b>>>16&255,S===0)L[i++]=b&65535;else if(S&16){_=b&65535,S&=15,S&&(v<S&&(h+=T[n++]<<v,v+=8),_+=h&(1<<S)-1,h>>>=S,v-=S),v<15&&(h+=T[n++]<<v,v+=8,h+=T[n++]<<v,v+=8),b=x[h&g];r:for(;;){if(S=b>>>24,h>>>=S,v-=S,S=b>>>16&255,S&16){if(j=b&65535,S&=15,v<S&&(h+=T[n++]<<v,v+=8,v<S&&(h+=T[n++]<<v,v+=8)),j+=h&(1<<S)-1,j>c){t.msg="invalid distance too far back",k.mode=Nx;break e}if(h>>>=S,v-=S,S=i-s,j>S){if(S=j-S,S>d&&k.sane){t.msg="invalid distance too far back",k.mode=Nx;break e}if(A=0,E=p,f===0){if(A+=u-S,S<_){_-=S;do L[i++]=p[A++];while(--S);A=i-j,E=L}}else if(f<S){if(A+=u+f-S,S-=f,S<_){_-=S;do L[i++]=p[A++];while(--S);if(A=0,f<_){S=f,_-=S;do L[i++]=p[A++];while(--S);A=i-j,E=L}}}else if(A+=f-S,S<_){_-=S;do L[i++]=p[A++];while(--S);A=i-j,E=L}for(;_>2;)L[i++]=E[A++],L[i++]=E[A++],L[i++]=E[A++],_-=3;_&&(L[i++]=E[A++],_>1&&(L[i++]=E[A++]))}else{A=i-j;do L[i++]=L[A++],L[i++]=L[A++],L[i++]=L[A++],_-=3;while(_>2);_&&(L[i++]=L[A++],_>1&&(L[i++]=L[A++]))}}else if(S&64){t.msg="invalid distance code",k.mode=Nx;break e}else{b=x[(b&65535)+(h&(1<<S)-1)];continue r}break}}else if(S&64)if(S&32){k.mode=Ode;break e}else{t.msg="invalid literal/length code",k.mode=Nx;break e}else{b=m[(b&65535)+(h&(1<<S)-1)];continue t}break}}while(n<a&&i<o);_=v>>3,n-=_,v-=_<<3,h&=(1<<v)-1,t.next_in=n,t.next_out=i,t.avail_in=n<a?5+(a-n):5-(n-a),t.avail_out=i<o?257+(o-i):257-(i-o),k.hold=h,k.bits=v};const uh=15,$O=852,BO=592,UO=0,T5=1,zO=2,Lde=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Rde=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ide=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Dde=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Mde=(e,t,r,n,a,i,s,o)=>{const c=o.bits;let u=0,d=0,f=0,p=0,h=0,v=0,m=0,x=0,y=0,g=0,b,S,_,j,A,E=null,T;const L=new Uint16Array(uh+1),k=new Uint16Array(uh+1);let R=null,D,q,X;for(u=0;u<=uh;u++)L[u]=0;for(d=0;d<n;d++)L[t[r+d]]++;for(h=c,p=uh;p>=1&&L[p]===0;p--);if(h>p&&(h=p),p===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,o.bits=1,0;for(f=1;f<p&&L[f]===0;f++);for(h<f&&(h=f),x=1,u=1;u<=uh;u++)if(x<<=1,x-=L[u],x<0)return-1;if(x>0&&(e===UO||p!==1))return-1;for(k[1]=0,u=1;u<uh;u++)k[u+1]=k[u]+L[u];for(d=0;d<n;d++)t[r+d]!==0&&(s[k[t[r+d]]++]=d);if(e===UO?(E=R=s,T=20):e===T5?(E=Lde,R=Rde,T=257):(E=Ide,R=Dde,T=0),g=0,d=0,u=f,A=i,v=h,m=0,_=-1,y=1<<h,j=y-1,e===T5&&y>$O||e===zO&&y>BO)return 1;for(;;){D=u-m,s[d]+1<T?(q=0,X=s[d]):s[d]>=T?(q=R[s[d]-T],X=E[s[d]-T]):(q=96,X=0),b=1<<u-m,S=1<<v,f=S;do S-=b,a[A+(g>>m)+S]=D<<24|q<<16|X|0;while(S!==0);for(b=1<<u-1;g&b;)b>>=1;if(b!==0?(g&=b-1,g+=b):g=0,d++,--L[u]===0){if(u===p)break;u=t[r+s[d]]}if(u>h&&(g&j)!==_){for(m===0&&(m=h),A+=f,v=u-m,x=1<<v;v+m<p&&(x-=L[v+m],!(x<=0));)v++,x<<=1;if(y+=1<<v,e===T5&&y>$O||e===zO&&y>BO)return 1;_=g&j,a[_]=h<<24|v<<16|A-i|0}}return g!==0&&(a[A+g]=u-m<<24|64<<16|0),o.bits=h,0};var rg=Mde;const Fde=0,L9=1,R9=2,{Z_FINISH:qO,Z_BLOCK:$de,Z_TREES:jx,Z_OK:_f,Z_STREAM_END:Bde,Z_NEED_DICT:Ude,Z_STREAM_ERROR:ro,Z_DATA_ERROR:I9,Z_MEM_ERROR:D9,Z_BUF_ERROR:zde,Z_DEFLATED:HO}=k9,aw=16180,WO=16181,VO=16182,GO=16183,KO=16184,XO=16185,YO=16186,JO=16187,QO=16188,ZO=16189,gb=16190,Bl=16191,C5=16192,e6=16193,k5=16194,t6=16195,r6=16196,n6=16197,a6=16198,Ax=16199,Ex=16200,i6=16201,s6=16202,o6=16203,l6=16204,c6=16205,O5=16206,u6=16207,d6=16208,xn=16209,M9=16210,F9=16211,qde=852,Hde=592,Wde=15,Vde=Wde,f6=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Gde(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Bf=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<aw||t.mode>F9?1:0},$9=e=>{if(Bf(e))return ro;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=aw,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(qde),t.distcode=t.distdyn=new Int32Array(Hde),t.sane=1,t.back=-1,_f},B9=e=>{if(Bf(e))return ro;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,$9(e)},U9=(e,t)=>{let r;if(Bf(e))return ro;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?ro:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,B9(e))},z9=(e,t)=>{if(!e)return ro;const r=new Gde;e.state=r,r.strm=e,r.window=null,r.mode=aw;const n=U9(e,t);return n!==_f&&(e.state=null),n},Kde=e=>z9(e,Vde);let h6=!0,P5,L5;const Xde=e=>{if(h6){P5=new Int32Array(512),L5=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(rg(L9,e.lens,0,288,P5,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;rg(R9,e.lens,0,32,L5,0,e.work,{bits:5}),h6=!1}e.lencode=P5,e.lenbits=9,e.distcode=L5,e.distbits=5},q9=(e,t,r,n)=>{let a;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>n&&(a=n),i.window.set(t.subarray(r-n,r-n+a),i.wnext),n-=a,n?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},Yde=(e,t)=>{let r,n,a,i,s,o,c,u,d,f,p,h,v,m,x=0,y,g,b,S,_,j,A,E;const T=new Uint8Array(4);let L,k;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Bf(e)||!e.output||!e.input&&e.avail_in!==0)return ro;r=e.state,r.mode===Bl&&(r.mode=C5),s=e.next_out,a=e.output,c=e.avail_out,i=e.next_in,n=e.input,o=e.avail_in,u=r.hold,d=r.bits,f=o,p=c,E=_f;e:for(;;)switch(r.mode){case aw:if(r.wrap===0){r.mode=C5;break}for(;d<16;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,T[0]=u&255,T[1]=u>>>8&255,r.check=Zo(r.check,T,2,0),u=0,d=0,r.mode=WO;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=xn;break}if((u&15)!==HO){e.msg="unknown compression method",r.mode=xn;break}if(u>>>=4,d-=4,A=(u&15)+8,r.wbits===0&&(r.wbits=A),A>15||A>r.wbits){e.msg="invalid window size",r.mode=xn;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=u&512?ZO:Bl,u=0,d=0;break;case WO:for(;d<16;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==HO){e.msg="unknown compression method",r.mode=xn;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=xn;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,r.check=Zo(r.check,T,2,0)),u=0,d=0,r.mode=VO;case VO:for(;d<32;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,T[2]=u>>>16&255,T[3]=u>>>24&255,r.check=Zo(r.check,T,4,0)),u=0,d=0,r.mode=GO;case GO:for(;d<16;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,r.check=Zo(r.check,T,2,0)),u=0,d=0,r.mode=KO;case KO:if(r.flags&1024){for(;d<16;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,r.check=Zo(r.check,T,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=XO;case XO:if(r.flags&1024&&(h=r.length,h>o&&(h=o),h&&(r.head&&(A=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+h),A)),r.flags&512&&r.wrap&4&&(r.check=Zo(r.check,n,h,i)),o-=h,i+=h,r.length-=h),r.length))break e;r.length=0,r.mode=YO;case YO:if(r.flags&2048){if(o===0)break e;h=0;do A=n[i+h++],r.head&&A&&r.length<65536&&(r.head.name+=String.fromCharCode(A));while(A&&h<o);if(r.flags&512&&r.wrap&4&&(r.check=Zo(r.check,n,h,i)),o-=h,i+=h,A)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=JO;case JO:if(r.flags&4096){if(o===0)break e;h=0;do A=n[i+h++],r.head&&A&&r.length<65536&&(r.head.comment+=String.fromCharCode(A));while(A&&h<o);if(r.flags&512&&r.wrap&4&&(r.check=Zo(r.check,n,h,i)),o-=h,i+=h,A)break e}else r.head&&(r.head.comment=null);r.mode=QO;case QO:if(r.flags&512){for(;d<16;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){e.msg="header crc mismatch",r.mode=xn;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Bl;break;case ZO:for(;d<32;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}e.adler=r.check=f6(u),u=0,d=0,r.mode=gb;case gb:if(r.havedict===0)return e.next_out=s,e.avail_out=c,e.next_in=i,e.avail_in=o,r.hold=u,r.bits=d,Ude;e.adler=r.check=1,r.mode=Bl;case Bl:if(t===$de||t===jx)break e;case C5:if(r.last){u>>>=d&7,d-=d&7,r.mode=O5;break}for(;d<3;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=e6;break;case 1:if(Xde(r),r.mode=Ax,t===jx){u>>>=2,d-=2;break e}break;case 2:r.mode=r6;break;case 3:e.msg="invalid block type",r.mode=xn}u>>>=2,d-=2;break;case e6:for(u>>>=d&7,d-=d&7;d<32;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=xn;break}if(r.length=u&65535,u=0,d=0,r.mode=k5,t===jx)break e;case k5:r.mode=t6;case t6:if(h=r.length,h){if(h>o&&(h=o),h>c&&(h=c),h===0)break e;a.set(n.subarray(i,i+h),s),o-=h,i+=h,c-=h,s+=h,r.length-=h;break}r.mode=Bl;break;case r6:for(;d<14;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=xn;break}r.have=0,r.mode=n6;case n6:for(;r.have<r.ncode;){for(;d<3;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}r.lens[R[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[R[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,L={bits:r.lenbits},E=rg(Fde,r.lens,0,19,r.lencode,0,r.work,L),r.lenbits=L.bits,E){e.msg="invalid code lengths set",r.mode=xn;break}r.have=0,r.mode=a6;case a6:for(;r.have<r.nlen+r.ndist;){for(;x=r.lencode[u&(1<<r.lenbits)-1],y=x>>>24,g=x>>>16&255,b=x&65535,!(y<=d);){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}if(b<16)u>>>=y,d-=y,r.lens[r.have++]=b;else{if(b===16){for(k=y+2;d<k;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}if(u>>>=y,d-=y,r.have===0){e.msg="invalid bit length repeat",r.mode=xn;break}A=r.lens[r.have-1],h=3+(u&3),u>>>=2,d-=2}else if(b===17){for(k=y+3;d<k;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}u>>>=y,d-=y,A=0,h=3+(u&7),u>>>=3,d-=3}else{for(k=y+7;d<k;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}u>>>=y,d-=y,A=0,h=11+(u&127),u>>>=7,d-=7}if(r.have+h>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=xn;break}for(;h--;)r.lens[r.have++]=A}}if(r.mode===xn)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=xn;break}if(r.lenbits=9,L={bits:r.lenbits},E=rg(L9,r.lens,0,r.nlen,r.lencode,0,r.work,L),r.lenbits=L.bits,E){e.msg="invalid literal/lengths set",r.mode=xn;break}if(r.distbits=6,r.distcode=r.distdyn,L={bits:r.distbits},E=rg(R9,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,L),r.distbits=L.bits,E){e.msg="invalid distances set",r.mode=xn;break}if(r.mode=Ax,t===jx)break e;case Ax:r.mode=Ex;case Ex:if(o>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=i,e.avail_in=o,r.hold=u,r.bits=d,Pde(e,p),s=e.next_out,a=e.output,c=e.avail_out,i=e.next_in,n=e.input,o=e.avail_in,u=r.hold,d=r.bits,r.mode===Bl&&(r.back=-1);break}for(r.back=0;x=r.lencode[u&(1<<r.lenbits)-1],y=x>>>24,g=x>>>16&255,b=x&65535,!(y<=d);){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}if(g&&!(g&240)){for(S=y,_=g,j=b;x=r.lencode[j+((u&(1<<S+_)-1)>>S)],y=x>>>24,g=x>>>16&255,b=x&65535,!(S+y<=d);){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}u>>>=S,d-=S,r.back+=S}if(u>>>=y,d-=y,r.back+=y,r.length=b,g===0){r.mode=c6;break}if(g&32){r.back=-1,r.mode=Bl;break}if(g&64){e.msg="invalid literal/length code",r.mode=xn;break}r.extra=g&15,r.mode=i6;case i6:if(r.extra){for(k=r.extra;d<k;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=s6;case s6:for(;x=r.distcode[u&(1<<r.distbits)-1],y=x>>>24,g=x>>>16&255,b=x&65535,!(y<=d);){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}if(!(g&240)){for(S=y,_=g,j=b;x=r.distcode[j+((u&(1<<S+_)-1)>>S)],y=x>>>24,g=x>>>16&255,b=x&65535,!(S+y<=d);){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}u>>>=S,d-=S,r.back+=S}if(u>>>=y,d-=y,r.back+=y,g&64){e.msg="invalid distance code",r.mode=xn;break}r.offset=b,r.extra=g&15,r.mode=o6;case o6:if(r.extra){for(k=r.extra;d<k;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=xn;break}r.mode=l6;case l6:if(c===0)break e;if(h=p-c,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=xn;break}h>r.wnext?(h-=r.wnext,v=r.wsize-h):v=r.wnext-h,h>r.length&&(h=r.length),m=r.window}else m=a,v=s-r.offset,h=r.length;h>c&&(h=c),c-=h,r.length-=h;do a[s++]=m[v++];while(--h);r.length===0&&(r.mode=Ex);break;case c6:if(c===0)break e;a[s++]=r.length,c--,r.mode=Ex;break;case O5:if(r.wrap){for(;d<32;){if(o===0)break e;o--,u|=n[i++]<<d,d+=8}if(p-=c,e.total_out+=p,r.total+=p,r.wrap&4&&p&&(e.adler=r.check=r.flags?Zo(r.check,a,p,s-p):uj(r.check,a,p,s-p)),p=c,r.wrap&4&&(r.flags?u:f6(u))!==r.check){e.msg="incorrect data check",r.mode=xn;break}u=0,d=0}r.mode=u6;case u6:if(r.wrap&&r.flags){for(;d<32;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=xn;break}u=0,d=0}r.mode=d6;case d6:E=Bde;break e;case xn:E=I9;break e;case M9:return D9;case F9:default:return ro}return e.next_out=s,e.avail_out=c,e.next_in=i,e.avail_in=o,r.hold=u,r.bits=d,(r.wsize||p!==e.avail_out&&r.mode<xn&&(r.mode<O5||t!==qO))&&q9(e,e.output,e.next_out,p-e.avail_out),f-=e.avail_in,p-=e.avail_out,e.total_in+=f,e.total_out+=p,r.total+=p,r.wrap&4&&p&&(e.adler=r.check=r.flags?Zo(r.check,a,p,e.next_out-p):uj(r.check,a,p,e.next_out-p)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Bl?128:0)+(r.mode===Ax||r.mode===k5?256:0),(f===0&&p===0||t===qO)&&E===_f&&(E=zde),E},Jde=e=>{if(Bf(e))return ro;let t=e.state;return t.window&&(t.window=null),e.state=null,_f},Qde=(e,t)=>{if(Bf(e))return ro;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,_f):ro},Zde=(e,t)=>{const r=t.length;let n,a,i;return Bf(e)||(n=e.state,n.wrap!==0&&n.mode!==gb)?ro:n.mode===gb&&(a=1,a=uj(a,t,r,0),a!==n.check)?I9:(i=q9(e,t,r,r),i?(n.mode=M9,D9):(n.havedict=1,_f))};var efe=B9,tfe=U9,rfe=$9,nfe=Kde,afe=z9,ife=Yde,sfe=Jde,ofe=Qde,lfe=Zde,cfe="pako inflate (from Nodeca project)",Vl={inflateReset:efe,inflateReset2:tfe,inflateResetKeep:rfe,inflateInit:nfe,inflateInit2:afe,inflate:ife,inflateEnd:sfe,inflateGetHeader:ofe,inflateSetDictionary:lfe,inflateInfo:cfe};function ufe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var dfe=ufe;const H9=Object.prototype.toString,{Z_NO_FLUSH:ffe,Z_FINISH:hfe,Z_OK:Ug,Z_STREAM_END:R5,Z_NEED_DICT:I5,Z_STREAM_ERROR:pfe,Z_DATA_ERROR:p6,Z_MEM_ERROR:mfe}=k9;function Yv(e){this.options=O9.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new kde,this.strm.avail_out=0;let r=Vl.inflateInit2(this.strm,t.windowBits);if(r!==Ug)throw new Error(dj[r]);if(this.header=new dfe,Vl.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=fj.string2buf(t.dictionary):H9.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Vl.inflateSetDictionary(this.strm,t.dictionary),r!==Ug)))throw new Error(dj[r])}Yv.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let i,s,o;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?hfe:ffe,H9.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=Vl.inflate(r,s),i===I5&&a&&(i=Vl.inflateSetDictionary(r,a),i===Ug?i=Vl.inflate(r,s):i===p6&&(i=I5));r.avail_in>0&&i===R5&&r.state.wrap>0&&e[r.next_in]!==0;)Vl.inflateReset(r),i=Vl.inflate(r,s);switch(i){case pfe:case p6:case I5:case mfe:return this.onEnd(i),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||i===R5))if(this.options.to==="string"){let c=fj.utf8border(r.output,r.next_out),u=r.next_out-c,d=fj.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===Ug&&o===0)){if(i===R5)return i=Vl.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Yv.prototype.onData=function(e){this.chunks.push(e)};Yv.prototype.onEnd=function(e){e===Ug&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=O9.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function gfe(e,t){const r=new Yv(t);if(r.push(e),r.err)throw r.msg||dj[r.err];return r.result}var vfe=Yv,xfe=gfe,yfe={Inflate:vfe,inflate:xfe};const{Inflate:bfe,inflate:wfe}=yfe;var m6=bfe,_fe=wfe;const W9=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;W9[e]=t}const g6=4294967295;function Sfe(e,t,r){let n=e;for(let a=0;a<r;a++)n=W9[(n^t[a])&255]^n>>>8;return n}function Nfe(e,t){return(Sfe(g6,e,t)^g6)>>>0}function v6(e,t,r){const n=e.readUint32(),a=Nfe(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function V9(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function G9(e,t,r,n){let a=0;for(;a<n;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+t[a-n]&255}function K9(e,t,r,n){let a=0;if(r.length===0)for(;a<n;a++)t[a]=e[a];else for(;a<n;a++)t[a]=e[a]+r[a]&255}function X9(e,t,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+(t[i-a]>>1)&255}else{for(;i<a;i++)t[i]=e[i]+(r[i]>>1)&255;for(;i<n;i++)t[i]=e[i]+(t[i-a]+r[i]>>1)&255}}function Y9(e,t,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+t[i-a]&255}else{for(;i<a;i++)t[i]=e[i]+r[i]&255;for(;i<n;i++)t[i]=e[i]+jfe(t[i-a],r[i],r[i-a])&255}}function jfe(e,t,r){const n=e+t-r,a=Math.abs(n-e),i=Math.abs(n-t),s=Math.abs(n-r);return a<=i&&a<=s?e:i<=s?t:r}function Afe(e,t,r,n,a,i){switch(e){case 0:V9(t,r,a);break;case 1:G9(t,r,a,i);break;case 2:K9(t,r,n,a);break;case 3:X9(t,r,n,a,i);break;case 4:Y9(t,r,n,a,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const Efe=new Uint16Array([255]),Tfe=new Uint8Array(Efe.buffer),Cfe=Tfe[0]===255;function kfe(e){const{data:t,width:r,height:n,channels:a,depth:i}=e,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(i/8)*a,c=new Uint8Array(n*r*o);let u=0;for(let d=0;d<7;d++){const f=s[d],p=Math.ceil((r-f.x)/f.xStep),h=Math.ceil((n-f.y)/f.yStep);if(p<=0||h<=0)continue;const v=p*o,m=new Uint8Array(v);for(let x=0;x<h;x++){const y=t[u++],g=t.subarray(u,u+v);u+=v;const b=new Uint8Array(v);Afe(y,g,b,m,v,o),m.set(b);for(let S=0;S<p;S++){const _=f.x+S*f.xStep,j=f.y+x*f.yStep;if(!(_>=r||j>=n))for(let A=0;A<o;A++)c[(j*r+_)*o+A]=b[S*o+A]}}}if(i===16){const d=new Uint16Array(c.buffer);if(Cfe)for(let f=0;f<d.length;f++)d[f]=Ofe(d[f]);return d}else return c}function Ofe(e){return(e&255)<<8|e>>8&255}const Pfe=new Uint16Array([255]),Lfe=new Uint8Array(Pfe.buffer),Rfe=Lfe[0]===255,Ife=new Uint8Array(0);function x6(e){const{data:t,width:r,height:n,channels:a,depth:i}=e,s=Math.ceil(i/8)*a,o=Math.ceil(i/8*a*r),c=new Uint8Array(n*o);let u=Ife,d=0,f,p;for(let h=0;h<n;h++){switch(f=t.subarray(d+1,d+1+o),p=c.subarray(h*o,(h+1)*o),t[d]){case 0:V9(f,p,o);break;case 1:G9(f,p,o,s);break;case 2:K9(f,p,u,o);break;case 3:X9(f,p,u,o,s);break;case 4:Y9(f,p,u,o,s);break;default:throw new Error(`Unsupported filter: ${t[d]}`)}u=p,d+=o+1}if(i===16){const h=new Uint16Array(c.buffer);if(Rfe)for(let v=0;v<h.length;v++)h[v]=Dfe(h[v]);return h}else return c}function Dfe(e){return(e&255)<<8|e>>8&255}const cy=Uint8Array.of(137,80,78,71,13,10,26,10);function y6(e){if(!Mfe(e.readBytes(cy.length)))throw new Error("wrong PNG signature")}function Mfe(e){if(e.length<cy.length)return!1;for(let t=0;t<cy.length;t++)if(e[t]!==cy[t])return!1;return!0}const Ffe="tEXt",$fe=0,J9=new TextDecoder("latin1");function Bfe(e){if(zfe(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const Ufe=/^[\u0000-\u00FF]*$/;function zfe(e){if(!Ufe.test(e))throw new Error("invalid latin1 text")}function qfe(e,t,r){const n=Q9(t);e[n]=Hfe(t,r-n.length-1)}function Q9(e){for(e.mark();e.readByte()!==$fe;);const t=e.offset;e.reset();const r=J9.decode(e.readBytes(t-e.offset-1));return e.skip(1),Bfe(r),r}function Hfe(e,t){return J9.decode(e.readBytes(t))}const ps={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},D5={UNKNOWN:-1,DEFLATE:0},b6={UNKNOWN:-1,ADAPTIVE:0},M5={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Tx={NONE:0,BACKGROUND:1,PREVIOUS:2},F5={SOURCE:0,OVER:1};class Wfe extends U3{constructor(r,n={}){super(r);Rr(this,"_checkCrc");Rr(this,"_inflator");Rr(this,"_png");Rr(this,"_apng");Rr(this,"_end");Rr(this,"_hasPalette");Rr(this,"_palette");Rr(this,"_hasTransparency");Rr(this,"_transparency");Rr(this,"_compressionMethod");Rr(this,"_filterMethod");Rr(this,"_interlaceMethod");Rr(this,"_colorType");Rr(this,"_isAnimated");Rr(this,"_numberOfFrames");Rr(this,"_numberOfPlays");Rr(this,"_frames");Rr(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new m6,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=D5.UNKNOWN,this._filterMethod=b6.UNKNOWN,this._interlaceMethod=M5.UNKNOWN,this._colorType=ps.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(y6(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(y6(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case Ffe:qfe(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?v6(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?v6(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=Vfe(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case ps.GREYSCALE:a=1;break;case ps.TRUECOLOUR:a=3;break;case ps.INDEXED_COLOUR:a=1;break;case ps.GREYSCALE_ALPHA:a=2;break;case ps.TRUECOLOUR_ALPHA:a=4;break;case ps.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==D5.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let i=0;i<n;i++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case ps.GREYSCALE:case ps.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case ps.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case ps.UNKNOWN:case ps.GREYSCALE_ALPHA:case ps.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=Q9(this),a=this.readUint8();if(a!==D5.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const i=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:_fe(i)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=x6({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const i=this._apng.frames.at(r-1);this.disposeFrame(a,i,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case Tx.NONE:break;case Tx.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let s=0;s<this._png.width;s++){const o=(i*r.width+s)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[o+c]=0}break;case Tx.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,i=(s,o)=>{const c=((s+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,u=(s*n.width+o)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case F5.SOURCE:for(let s=0;s<n.height;s++)for(let o=0;o<n.width;o++){const{index:c,frameIndex:u}=i(s,o);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case F5.OVER:for(let s=0;s<n.height;s++)for(let o=0;o<n.width;o++){const{index:c,frameIndex:u}=i(s,o);for(let d=0;d<this._png.channels;d++){const f=n.data[u+this._png.channels-1]/a,p=d%(this._png.channels-1)===0?1:n.data[u+d],h=Math.floor(f*p+(1-f)*r.data[c+d]);r.data[c+d]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==b6.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===M5.NO_INTERLACE)this._png.data=x6({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===M5.ADAM7)this._png.data=kfe({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Tx.NONE,blendOp:F5.SOURCE,data:r}),this._inflator=new m6,this._writingDataChunks=!1}}function Vfe(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var w6;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(w6||(w6={}));function Gfe(e,t){return new Wfe(e,t).decode()}var Bt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function $5(){Bt.console&&typeof Bt.console.log=="function"&&Bt.console.log.apply(Bt.console,arguments)}var Xr={log:$5,warn:function(e){Bt.console&&(typeof Bt.console.warn=="function"?Bt.console.warn.apply(Bt.console,arguments):$5.call(null,arguments))},error:function(e){Bt.console&&(typeof Bt.console.error=="function"?Bt.console.error.apply(Bt.console,arguments):$5(e))}};function B5(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Cd(n.response,t,r)},n.onerror=function(){Xr.error("could not download file")},n.send()}function _6(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Cx(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Cd=Bt.saveAs||((typeof window>"u"?"undefined":Fr(window))!=="object"||window!==Bt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Bt.URL||Bt.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?_6(a.href)?B5(e,t,r):Cx(a,a.target="_blank"):Cx(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){Cx(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(_6(e))B5(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Cx(n)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:Fr(i)!=="object"&&(Xr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return B5(e,t,r);var a=e.type==="application/octet-stream",i=/constructor/i.test(Bt.HTMLElement)||Bt.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||a&&i)&&(typeof FileReader>"u"?"undefined":Fr(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=s?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(e)}else{var c=Bt.URL||Bt.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Z9(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,s=a.exec(e);s&&(t=i(s),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+o+c+u}}var uy=Bt.atob.bind(Bt),S6=Bt.btoa.bind(Bt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function U5(e,t){var r=e[0],n=e[1],a=e[2],i=e[3];r=ii(r,n,a,i,t[0],7,-680876936),i=ii(i,r,n,a,t[1],12,-389564586),a=ii(a,i,r,n,t[2],17,606105819),n=ii(n,a,i,r,t[3],22,-1044525330),r=ii(r,n,a,i,t[4],7,-176418897),i=ii(i,r,n,a,t[5],12,1200080426),a=ii(a,i,r,n,t[6],17,-1473231341),n=ii(n,a,i,r,t[7],22,-45705983),r=ii(r,n,a,i,t[8],7,1770035416),i=ii(i,r,n,a,t[9],12,-1958414417),a=ii(a,i,r,n,t[10],17,-42063),n=ii(n,a,i,r,t[11],22,-1990404162),r=ii(r,n,a,i,t[12],7,1804603682),i=ii(i,r,n,a,t[13],12,-40341101),a=ii(a,i,r,n,t[14],17,-1502002290),r=si(r,n=ii(n,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=si(i,r,n,a,t[6],9,-1069501632),a=si(a,i,r,n,t[11],14,643717713),n=si(n,a,i,r,t[0],20,-373897302),r=si(r,n,a,i,t[5],5,-701558691),i=si(i,r,n,a,t[10],9,38016083),a=si(a,i,r,n,t[15],14,-660478335),n=si(n,a,i,r,t[4],20,-405537848),r=si(r,n,a,i,t[9],5,568446438),i=si(i,r,n,a,t[14],9,-1019803690),a=si(a,i,r,n,t[3],14,-187363961),n=si(n,a,i,r,t[8],20,1163531501),r=si(r,n,a,i,t[13],5,-1444681467),i=si(i,r,n,a,t[2],9,-51403784),a=si(a,i,r,n,t[7],14,1735328473),r=oi(r,n=si(n,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=oi(i,r,n,a,t[8],11,-2022574463),a=oi(a,i,r,n,t[11],16,1839030562),n=oi(n,a,i,r,t[14],23,-35309556),r=oi(r,n,a,i,t[1],4,-1530992060),i=oi(i,r,n,a,t[4],11,1272893353),a=oi(a,i,r,n,t[7],16,-155497632),n=oi(n,a,i,r,t[10],23,-1094730640),r=oi(r,n,a,i,t[13],4,681279174),i=oi(i,r,n,a,t[0],11,-358537222),a=oi(a,i,r,n,t[3],16,-722521979),n=oi(n,a,i,r,t[6],23,76029189),r=oi(r,n,a,i,t[9],4,-640364487),i=oi(i,r,n,a,t[12],11,-421815835),a=oi(a,i,r,n,t[15],16,530742520),r=li(r,n=oi(n,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=li(i,r,n,a,t[7],10,1126891415),a=li(a,i,r,n,t[14],15,-1416354905),n=li(n,a,i,r,t[5],21,-57434055),r=li(r,n,a,i,t[12],6,1700485571),i=li(i,r,n,a,t[3],10,-1894986606),a=li(a,i,r,n,t[10],15,-1051523),n=li(n,a,i,r,t[1],21,-2054922799),r=li(r,n,a,i,t[8],6,1873313359),i=li(i,r,n,a,t[15],10,-30611744),a=li(a,i,r,n,t[6],15,-1560198380),n=li(n,a,i,r,t[13],21,1309151649),r=li(r,n,a,i,t[4],6,-145523070),i=li(i,r,n,a,t[11],10,-1120210379),a=li(a,i,r,n,t[2],15,718787259),n=li(n,a,i,r,t[9],21,-343485551),e[0]=Au(r,e[0]),e[1]=Au(n,e[1]),e[2]=Au(a,e[2]),e[3]=Au(i,e[3])}function iw(e,t,r,n,a,i){return t=Au(Au(t,e),Au(n,i)),Au(t<<a|t>>>32-a,r)}function ii(e,t,r,n,a,i,s){return iw(t&r|~t&n,e,t,a,i,s)}function si(e,t,r,n,a,i,s){return iw(t&n|r&~n,e,t,a,i,s)}function oi(e,t,r,n,a,i,s){return iw(t^r^n,e,t,a,i,s)}function li(e,t,r,n,a,i,s){return iw(r^(t|~n),e,t,a,i,s)}function eB(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)U5(n,Kfe(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(U5(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,U5(n,a),n}function Kfe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var N6="0123456789abcdef".split("");function Xfe(e){for(var t="",r=0;r<4;r++)t+=N6[e>>8*r+4&15]+N6[e>>8*r&15];return t}function Yfe(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function hj(e){return eB(e).map(Yfe).join("")}var Jfe=function(e){for(var t=0;t<e.length;t++)e[t]=Xfe(e[t]);return e.join("")}(eB("hello"))!="5d41402abc4b2a76b9719d911017c592";function Au(e,t){if(Jfe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function pj(e,t){var r,n,a,i;if(e!==r){for(var s=(a=e,i=1+(256/e.length|0),new Array(i+1).join(a)),o=[],c=0;c<256;c++)o[c]=c;var u=0;for(c=0;c<256;c++){var d=o[c];u=(u+d+s.charCodeAt(c))%256,o[c]=o[u],o[u]=d}r=e,n=o}else o=n;var f=t.length,p=0,h=0,v="";for(c=0;c<f;c++)h=(h+(d=o[p=(p+1)%256]))%256,o[p]=o[h],o[h]=d,s=o[(o[p]+o[h])%256],v+=String.fromCharCode(t.charCodeAt(c)^s);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var j6={print:4,modify:8,copy:16,"annot-forms":32};function yh(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(o){if(j6.perm!==void 0)throw new Error("Invalid permission: "+o);a+=j6[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),s=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,s),this.P=-(1+(255^a)),this.encryptionKey=hj(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=pj(this.encryptionKey,this.padding)}function bh(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);t+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):e[n]}return t}function A6(e){if(Fr(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!a],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var s=t[r][i];try{s[0].apply(e,n)}catch(o){Bt.console&&Xr.error("jsPDF PubSub Error",o.message,o)}s[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function vb(e){if(!(this instanceof vb))return new vb(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function tB(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Dd(e,t,r,n,a){if(!(this instanceof Dd))return new Dd(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,tB.call(this,n,a)}function Ih(e,t,r,n,a){if(!(this instanceof Ih))return new Ih(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,tB.call(this,n,a)}function At(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],s=[],o=1,c=16,u="S",d=null;Fr(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,i=e.compress||e.compressPdf||i,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),s=e.filters||(i===!0?["FlateEncode"]:s),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,p={},h={internal:{},__private__:{}};h.__private__.PubSub=A6;var v="1.3",m=h.__private__.getPdfVersion=function(){return v};h.__private__.setPdfVersion=function(C){v=C};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return x};var y=h.__private__.getPageFormat=function(C){return x[C]};a=a||"a4";var g="compat",b="advanced",S=g;function _(){this.saveGraphicsState(),Q(new Pt(Gt,0,0,-Gt,0,ld()*Gt).toString()+" cm"),this.setFontSize(this.getFontSize()/Gt),u="n",S=b}function j(){this.restoreGraphicsState(),u="S",S=g}var A=h.__private__.combineFontStyleAndFontWeight=function(C,z){if(C=="bold"&&z=="normal"||C=="bold"&&z==400||C=="normal"&&z=="italic"||C=="bold"&&z=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return z&&(C=z==400||z==="normal"?C==="italic"?"italic":"normal":z!=700&&z!=="bold"||C!=="normal"?(z==700?"bold":z)+""+C:"bold"),C};h.advancedAPI=function(C){var z=S===g;return z&&_.call(this),typeof C!="function"||(C(this),z&&j.call(this)),this},h.compatAPI=function(C){var z=S===b;return z&&j.call(this),typeof C!="function"||(C(this),z&&_.call(this)),this},h.isAdvancedAPI=function(){return S===b};var E,T=function(C){if(S!==b)throw new Error(C+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},L=h.roundToPrecision=h.__private__.roundToPrecision=function(C,z){var he=t||z;if(isNaN(C)||isNaN(he))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return C.toFixed(he).replace(/0+$/,"")};E=h.hpf=h.__private__.hpf=typeof c=="number"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return L(C,c)}:c==="smart"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return L(C,C>-1&&C<1?16:5)}:function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return L(C,16)};var k=h.f2=h.__private__.f2=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f2");return L(C,2)},R=h.__private__.f3=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f3");return L(C,3)},D=h.scale=h.__private__.scale=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.scale");return S===g?C*Gt:S===b?C:void 0},q=function(C){return D(function(z){return S===g?ld()-z:S===b?z:void 0}(C))};h.__private__.setPrecision=h.setPrecision=function(C){typeof parseInt(C,10)=="number"&&(t=parseInt(C,10))};var X,se="00000000000000000000000000000000",Z=h.__private__.getFileId=function(){return se},K=h.__private__.setFileId=function(C){return se=C!==void 0&&/^[a-fA-F0-9]{32}$/.test(C)?C.toUpperCase():se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ca=new yh(d.userPermissions,d.userPassword,d.ownerPassword,se)),se};h.setFileId=function(C){return K(C),this},h.getFileId=function(){return Z()};var ie=h.__private__.convertDateToPDFDate=function(C){var z=C.getTimezoneOffset(),he=z<0?"+":"-",be=Math.floor(Math.abs(z/60)),je=Math.abs(z%60),qe=[he,B(be),"'",B(je),"'"].join("");return["D:",C.getFullYear(),B(C.getMonth()+1),B(C.getDate()),B(C.getHours()),B(C.getMinutes()),B(C.getSeconds()),qe].join("")},pe=h.__private__.convertPDFDateToDate=function(C){var z=parseInt(C.substr(2,4),10),he=parseInt(C.substr(6,2),10)-1,be=parseInt(C.substr(8,2),10),je=parseInt(C.substr(10,2),10),qe=parseInt(C.substr(12,2),10),Ge=parseInt(C.substr(14,2),10);return new Date(z,he,be,je,qe,Ge,0)},me=h.__private__.setCreationDate=function(C){var z;if(C===void 0&&(C=new Date),C instanceof Date)z=ie(C);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(C))throw new Error("Invalid argument passed to jsPDF.setCreationDate");z=C}return X=z},O=h.__private__.getCreationDate=function(C){var z=X;return C==="jsDate"&&(z=pe(X)),z};h.setCreationDate=function(C){return me(C),this},h.getCreationDate=function(C){return O(C)};var F,B=h.__private__.padd2=function(C){return("0"+parseInt(C)).slice(-2)},U=h.__private__.padd2Hex=function(C){return("00"+(C=C.toString())).substr(C.length)},Y=0,oe=[],ee=[],te=0,le=[],Ne=[],ve=!1,Me=ee;h.__private__.setCustomOutputDestination=function(C){ve=!0,Me=C};var Ie=function(C){ve||(Me=C)};h.__private__.resetCustomOutputDestination=function(){ve=!1,Me=ee};var Q=h.__private__.out=function(C){return C=C.toString(),te+=C.length+1,Me.push(C),Me},$e=h.__private__.write=function(C){return Q(arguments.length===1?C.toString():Array.prototype.join.call(arguments," "))},Re=h.__private__.getArrayBuffer=function(C){for(var z=C.length,he=new ArrayBuffer(z),be=new Uint8Array(he);z--;)be[z]=C.charCodeAt(z);return he},it=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return it};var He=e.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(C){return He=S===b?C/Gt:C,this};var Ze,nt=h.__private__.getFontSize=h.getFontSize=function(){return S===g?He:He*Gt},dt=e.R2L||!1;h.__private__.setR2L=h.setR2L=function(C){return dt=C,this},h.__private__.getR2L=h.getR2L=function(){return dt};var ft,ut=h.__private__.setZoomMode=function(C){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(C))Ze=C;else if(isNaN(C)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(C)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+C+'" is not recognized.');Ze=C}else Ze=parseInt(C,10)};h.__private__.getZoomMode=function(){return Ze};var qt,Mt=h.__private__.setPageMode=function(C){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(C)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+C+'" is not recognized.');ft=C};h.__private__.getPageMode=function(){return ft};var kt=h.__private__.setLayoutMode=function(C){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(C)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+C+'" is not recognized.');qt=C};h.__private__.getLayoutMode=function(){return qt},h.__private__.setDisplayMode=h.setDisplayMode=function(C,z,he){return ut(C),kt(z),Mt(he),this};var Xt={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(C){if(Object.keys(Xt).indexOf(C)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Xt[C]},h.__private__.getDocumentProperties=function(){return Xt},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(C){for(var z in Xt)Xt.hasOwnProperty(z)&&C[z]&&(Xt[z]=C[z]);return this},h.__private__.setDocumentProperty=function(C,z){if(Object.keys(Xt).indexOf(C)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Xt[C]=z};var yt,Gt,St,gn,ur,Qt={},Zt={},Jr=[],Tt={},Or={},Ot={},Ht={},Qr=null,nr=0,Ct=[],wr=new A6(h),Sl=e.hotfixes||[],Na={},oo={},Ls=[],Pt=function C(z,he,be,je,qe,Ge){if(!(this instanceof C))return new C(z,he,be,je,qe,Ge);isNaN(z)&&(z=1),isNaN(he)&&(he=0),isNaN(be)&&(be=0),isNaN(je)&&(je=1),isNaN(qe)&&(qe=0),isNaN(Ge)&&(Ge=0),this._matrix=[z,he,be,je,qe,Ge]};Object.defineProperty(Pt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(Pt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(Pt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(Pt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(Pt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(Pt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(Pt.prototype,"a",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(Pt.prototype,"b",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(Pt.prototype,"c",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(Pt.prototype,"d",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(Pt.prototype,"e",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(Pt.prototype,"f",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(Pt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Pt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Pt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Pt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Pt.prototype.join=function(C){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(C)},Pt.prototype.multiply=function(C){var z=C.sx*this.sx+C.shy*this.shx,he=C.sx*this.shy+C.shy*this.sy,be=C.shx*this.sx+C.sy*this.shx,je=C.shx*this.shy+C.sy*this.sy,qe=C.tx*this.sx+C.ty*this.shx+this.tx,Ge=C.tx*this.shy+C.ty*this.sy+this.ty;return new Pt(z,he,be,je,qe,Ge)},Pt.prototype.decompose=function(){var C=this.sx,z=this.shy,he=this.shx,be=this.sy,je=this.tx,qe=this.ty,Ge=Math.sqrt(C*C+z*z),xt=(C/=Ge)*he+(z/=Ge)*be;he-=C*xt,be-=z*xt;var Nt=Math.sqrt(he*he+be*be);return xt/=Nt,C*(be/=Nt)<z*(he/=Nt)&&(C=-C,z=-z,xt=-xt,Ge=-Ge),{scale:new Pt(Ge,0,0,Nt,0,0),translate:new Pt(1,0,0,1,je,qe),rotate:new Pt(C,z,-z,C,0,0),skew:new Pt(1,0,xt,1,0,0)}},Pt.prototype.toString=function(C){return this.join(" ")},Pt.prototype.inversed=function(){var C=this.sx,z=this.shy,he=this.shx,be=this.sy,je=this.tx,qe=this.ty,Ge=1/(C*be-z*he),xt=be*Ge,Nt=-z*Ge,Wt=-he*Ge,er=C*Ge;return new Pt(xt,Nt,Wt,er,-xt*je-Wt*qe,-Nt*je-er*qe)},Pt.prototype.applyToPoint=function(C){var z=C.x*this.sx+C.y*this.shx+this.tx,he=C.x*this.shy+C.y*this.sy+this.ty;return new Tl(z,he)},Pt.prototype.applyToRectangle=function(C){var z=this.applyToPoint(C),he=this.applyToPoint(new Tl(C.x+C.w,C.y+C.h));return new Bp(z.x,z.y,he.x-z.x,he.y-z.y)},Pt.prototype.clone=function(){var C=this.sx,z=this.shy,he=this.shx,be=this.sy,je=this.tx,qe=this.ty;return new Pt(C,z,he,be,je,qe)},h.Matrix=Pt;var lo=h.matrixMult=function(C,z){return z.multiply(C)},co=new Pt(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=co;var ti=function(C,z){if(!Or[C]){var he=(z instanceof Dd?"Sh":"P")+(Object.keys(Tt).length+1).toString(10);z.id=he,Or[C]=he,Tt[he]=z,wr.publish("addPattern",z)}};h.ShadingPattern=Dd,h.TilingPattern=Ih,h.addShadingPattern=function(C,z){return T("addShadingPattern()"),ti(C,z),this},h.beginTilingPattern=function(C){T("beginTilingPattern()"),Up(C.boundingBox[0],C.boundingBox[1],C.boundingBox[2]-C.boundingBox[0],C.boundingBox[3]-C.boundingBox[1],C.matrix)},h.endTilingPattern=function(C,z){T("endTilingPattern()"),z.stream=Ne[F].join(`
`),ti(C,z),wr.publish("endTilingPattern",z),Ls.pop().restore()};var $i,vn=h.__private__.newObject=function(){var C=Yn();return W(C,!0),C},Yn=h.__private__.newObjectDeferred=function(){return Y++,oe[Y]=function(){return te},Y},W=function(C,z){return z=typeof z=="boolean"&&z,oe[C]=te,z&&Q(C+" 0 obj"),C},de=h.__private__.newAdditionalObject=function(){var C={objId:Yn(),content:""};return le.push(C),C},re=Yn(),ae=Yn(),fe=h.__private__.decodeColorString=function(C){var z=C.split(" ");if(z.length!==2||z[1]!=="g"&&z[1]!=="G")z.length!==5||z[4]!=="k"&&z[4]!=="K"||(z=[(1-z[0])*(1-z[3]),(1-z[1])*(1-z[3]),(1-z[2])*(1-z[3]),"r"]);else{var he=parseFloat(z[0]);z=[he,he,he,"r"]}for(var be="#",je=0;je<3;je++)be+=("0"+Math.floor(255*parseFloat(z[je])).toString(16)).slice(-2);return be},ge=h.__private__.encodeColorString=function(C){var z;typeof C=="string"&&(C={ch1:C});var he=C.ch1,be=C.ch2,je=C.ch3,qe=C.ch4,Ge=C.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof he=="string"&&he.charAt(0)!=="#"){var xt=new Z9(he);if(xt.ok)he=xt.toHex();else if(!/^\d*\.?\d*$/.test(he))throw new Error('Invalid color "'+he+'" passed to jsPDF.encodeColorString.')}if(typeof he=="string"&&/^#[0-9A-Fa-f]{3}$/.test(he)&&(he="#"+he[1]+he[1]+he[2]+he[2]+he[3]+he[3]),typeof he=="string"&&/^#[0-9A-Fa-f]{6}$/.test(he)){var Nt=parseInt(he.substr(1),16);he=Nt>>16&255,be=Nt>>8&255,je=255&Nt}if(be===void 0||qe===void 0&&he===be&&be===je)z=typeof he=="string"?he+" "+Ge[0]:C.precision===2?k(he/255)+" "+Ge[0]:R(he/255)+" "+Ge[0];else if(qe===void 0||Fr(qe)==="object"){if(qe&&!isNaN(qe.a)&&qe.a===0)return["1.","1.","1.",Ge[1]].join(" ");z=typeof he=="string"?[he,be,je,Ge[1]].join(" "):C.precision===2?[k(he/255),k(be/255),k(je/255),Ge[1]].join(" "):[R(he/255),R(be/255),R(je/255),Ge[1]].join(" ")}else z=typeof he=="string"?[he,be,je,qe,Ge[2]].join(" "):C.precision===2?[k(he),k(be),k(je),k(qe),Ge[2]].join(" "):[R(he),R(be),R(je),R(qe),Ge[2]].join(" ");return z},Ee=h.__private__.getFilters=function(){return s},De=h.__private__.putStream=function(C){var z=(C=C||{}).data||"",he=C.filters||Ee(),be=C.alreadyAppliedFilters||[],je=C.addLength1||!1,qe=z.length,Ge=C.objectId,xt=function(ua){return ua};if(d!==null&&Ge===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(xt=ca.encryptor(Ge,0));var Nt={};he===!0&&(he=["FlateEncode"]);var Wt=C.additionalKeyValues||[],er=(Nt=At.API.processDataByFilters!==void 0?At.API.processDataByFilters(z,he):{data:z,reverseChain:[]}).reverseChain+(Array.isArray(be)?be.join(" "):be.toString());if(Nt.data.length!==0&&(Wt.push({key:"Length",value:Nt.data.length}),je===!0&&Wt.push({key:"Length1",value:qe})),er.length!=0)if(er.split("/").length-1==1)Wt.push({key:"Filter",value:er});else{Wt.push({key:"Filter",value:"["+er+"]"});for(var vr=0;vr<Wt.length;vr+=1)if(Wt[vr].key==="DecodeParms"){for(var Sn=[],Zn=0;Zn<Nt.reverseChain.split("/").length-1;Zn+=1)Sn.push("null");Sn.push(Wt[vr].value),Wt[vr].value="["+Sn.join(" ")+"]"}}Q("<<");for(var Zr=0;Zr<Wt.length;Zr++)Q("/"+Wt[Zr].key+" "+Wt[Zr].value);Q(">>"),Nt.data.length!==0&&(Q("stream"),Q(xt(Nt.data)),Q("endstream"))},Te=h.__private__.putPage=function(C){var z=C.number,he=C.data,be=C.objId,je=C.contentsObjId;W(be,!0),Q("<</Type /Page"),Q("/Parent "+C.rootDictionaryObjId+" 0 R"),Q("/Resources "+C.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(E(C.mediaBox.bottomLeftX))+" "+parseFloat(E(C.mediaBox.bottomLeftY))+" "+E(C.mediaBox.topRightX)+" "+E(C.mediaBox.topRightY)+"]"),C.cropBox!==null&&Q("/CropBox ["+E(C.cropBox.bottomLeftX)+" "+E(C.cropBox.bottomLeftY)+" "+E(C.cropBox.topRightX)+" "+E(C.cropBox.topRightY)+"]"),C.bleedBox!==null&&Q("/BleedBox ["+E(C.bleedBox.bottomLeftX)+" "+E(C.bleedBox.bottomLeftY)+" "+E(C.bleedBox.topRightX)+" "+E(C.bleedBox.topRightY)+"]"),C.trimBox!==null&&Q("/TrimBox ["+E(C.trimBox.bottomLeftX)+" "+E(C.trimBox.bottomLeftY)+" "+E(C.trimBox.topRightX)+" "+E(C.trimBox.topRightY)+"]"),C.artBox!==null&&Q("/ArtBox ["+E(C.artBox.bottomLeftX)+" "+E(C.artBox.bottomLeftY)+" "+E(C.artBox.topRightX)+" "+E(C.artBox.topRightY)+"]"),typeof C.userUnit=="number"&&C.userUnit!==1&&Q("/UserUnit "+C.userUnit),wr.publish("putPage",{objId:be,pageContext:Ct[z],pageNumber:z,page:he}),Q("/Contents "+je+" 0 R"),Q(">>"),Q("endobj");var qe=he.join(`
`);return S===b&&(qe+=`
Q`),W(je,!0),De({data:qe,filters:Ee(),objectId:je}),Q("endobj"),be},Ce=h.__private__.putPages=function(){var C,z,he=[];for(C=1;C<=nr;C++)Ct[C].objId=Yn(),Ct[C].contentsObjId=Yn();for(C=1;C<=nr;C++)he.push(Te({number:C,data:Ne[C],objId:Ct[C].objId,contentsObjId:Ct[C].contentsObjId,mediaBox:Ct[C].mediaBox,cropBox:Ct[C].cropBox,bleedBox:Ct[C].bleedBox,trimBox:Ct[C].trimBox,artBox:Ct[C].artBox,userUnit:Ct[C].userUnit,rootDictionaryObjId:re,resourceDictionaryObjId:ae}));W(re,!0),Q("<</Type /Pages");var be="/Kids [";for(z=0;z<nr;z++)be+=he[z]+" 0 R ";Q(be+"]"),Q("/Count "+nr),Q(">>"),Q("endobj"),wr.publish("postPutPages")},Pe=function(C){wr.publish("putFont",{font:C,out:Q,newObject:vn,putStream:De}),C.isAlreadyPutted!==!0&&(C.objectNumber=vn(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+bh(C.postScriptName)),Q("/Subtype /Type1"),typeof C.encoding=="string"&&Q("/Encoding /"+C.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},Xe=function(C){C.objectNumber=vn();var z=[];z.push({key:"Type",value:"/XObject"}),z.push({key:"Subtype",value:"/Form"}),z.push({key:"BBox",value:"["+[E(C.x),E(C.y),E(C.x+C.width),E(C.y+C.height)].join(" ")+"]"}),z.push({key:"Matrix",value:"["+C.matrix.toString()+"]"});var he=C.pages[1].join(`
`);De({data:he,additionalKeyValues:z,objectId:C.objectNumber}),Q("endobj")},tt=function(C,z){z||(z=21);var he=vn(),be=function(Ge,xt){var Nt,Wt=[],er=1/(xt-1);for(Nt=0;Nt<1;Nt+=er)Wt.push(Nt);if(Wt.push(1),Ge[0].offset!=0){var vr={offset:0,color:Ge[0].color};Ge.unshift(vr)}if(Ge[Ge.length-1].offset!=1){var Sn={offset:1,color:Ge[Ge.length-1].color};Ge.push(Sn)}for(var Zn="",Zr=0,ua=0;ua<Wt.length;ua++){for(Nt=Wt[ua];Nt>Ge[Zr+1].offset;)Zr++;var ea=Ge[Zr].offset,Fa=(Nt-ea)/(Ge[Zr+1].offset-ea),Ol=Ge[Zr].color,ho=Ge[Zr+1].color;Zn+=U(Math.round((1-Fa)*Ol[0]+Fa*ho[0]).toString(16))+U(Math.round((1-Fa)*Ol[1]+Fa*ho[1]).toString(16))+U(Math.round((1-Fa)*Ol[2]+Fa*ho[2]).toString(16))}return Zn.trim()}(C.colors,z),je=[];je.push({key:"FunctionType",value:"0"}),je.push({key:"Domain",value:"[0.0 1.0]"}),je.push({key:"Size",value:"["+z+"]"}),je.push({key:"BitsPerSample",value:"8"}),je.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),je.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),De({data:be,additionalKeyValues:je,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:he}),Q("endobj"),C.objectNumber=vn(),Q("<< /ShadingType "+C.type),Q("/ColorSpace /DeviceRGB");var qe="/Coords ["+E(parseFloat(C.coords[0]))+" "+E(parseFloat(C.coords[1]))+" ";C.type===2?qe+=E(parseFloat(C.coords[2]))+" "+E(parseFloat(C.coords[3])):qe+=E(parseFloat(C.coords[2]))+" "+E(parseFloat(C.coords[3]))+" "+E(parseFloat(C.coords[4]))+" "+E(parseFloat(C.coords[5])),Q(qe+="]"),C.matrix&&Q("/Matrix ["+C.matrix.toString()+"]"),Q("/Function "+he+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},lt=function(C,z){var he=Yn(),be=vn();z.push({resourcesOid:he,objectOid:be}),C.objectNumber=be;var je=[];je.push({key:"Type",value:"/Pattern"}),je.push({key:"PatternType",value:"1"}),je.push({key:"PaintType",value:"1"}),je.push({key:"TilingType",value:"1"}),je.push({key:"BBox",value:"["+C.boundingBox.map(E).join(" ")+"]"}),je.push({key:"XStep",value:E(C.xStep)}),je.push({key:"YStep",value:E(C.yStep)}),je.push({key:"Resources",value:he+" 0 R"}),C.matrix&&je.push({key:"Matrix",value:"["+C.matrix.toString()+"]"}),De({data:C.stream,additionalKeyValues:je,objectId:C.objectNumber}),Q("endobj")},Qe=function(C){for(var z in C.objectNumber=vn(),Q("<<"),C)switch(z){case"opacity":Q("/ca "+k(C[z]));break;case"stroke-opacity":Q("/CA "+k(C[z]))}Q(">>"),Q("endobj")},ot=function(C){W(C.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var z in Q("/Font <<"),Qt)Qt.hasOwnProperty(z)&&(f===!1||f===!0&&p.hasOwnProperty(z))&&Q("/"+z+" "+Qt[z].objectNumber+" 0 R");Q(">>")}(),function(){if(Object.keys(Tt).length>0){for(var z in Q("/Shading <<"),Tt)Tt.hasOwnProperty(z)&&Tt[z]instanceof Dd&&Tt[z].objectNumber>=0&&Q("/"+z+" "+Tt[z].objectNumber+" 0 R");wr.publish("putShadingPatternDict"),Q(">>")}}(),function(z){if(Object.keys(Tt).length>0){for(var he in Q("/Pattern <<"),Tt)Tt.hasOwnProperty(he)&&Tt[he]instanceof h.TilingPattern&&Tt[he].objectNumber>=0&&Tt[he].objectNumber<z&&Q("/"+he+" "+Tt[he].objectNumber+" 0 R");wr.publish("putTilingPatternDict"),Q(">>")}}(C.objectOid),function(){if(Object.keys(Ot).length>0){var z;for(z in Q("/ExtGState <<"),Ot)Ot.hasOwnProperty(z)&&Ot[z].objectNumber>=0&&Q("/"+z+" "+Ot[z].objectNumber+" 0 R");wr.publish("putGStateDict"),Q(">>")}}(),function(){for(var z in Q("/XObject <<"),Na)Na.hasOwnProperty(z)&&Na[z].objectNumber>=0&&Q("/"+z+" "+Na[z].objectNumber+" 0 R");wr.publish("putXobjectDict"),Q(">>")}(),Q(">>"),Q("endobj")},Ft=function(C){Zt[C.fontName]=Zt[C.fontName]||{},Zt[C.fontName][C.fontStyle]=C.id},Hr=function(C,z,he,be,je){var qe={id:"F"+(Object.keys(Qt).length+1).toString(10),postScriptName:C,fontName:z,fontStyle:he,encoding:be,isStandardFont:je||!1,metadata:{}};return wr.publish("addFont",{font:qe,instance:this}),Qt[qe.id]=qe,Ft(qe),qe.id},dr=h.__private__.pdfEscape=h.pdfEscape=function(C,z){return function(he,be){var je,qe,Ge,xt,Nt,Wt,er,vr,Sn;if(Ge=(be=be||{}).sourceEncoding||"Unicode",Nt=be.outputEncoding,(be.autoencode||Nt)&&Qt[yt].metadata&&Qt[yt].metadata[Ge]&&Qt[yt].metadata[Ge].encoding&&(xt=Qt[yt].metadata[Ge].encoding,!Nt&&Qt[yt].encoding&&(Nt=Qt[yt].encoding),!Nt&&xt.codePages&&(Nt=xt.codePages[0]),typeof Nt=="string"&&(Nt=xt[Nt]),Nt)){for(er=!1,Wt=[],je=0,qe=he.length;je<qe;je++)(vr=Nt[he.charCodeAt(je)])?Wt.push(String.fromCharCode(vr)):Wt.push(he[je]),Wt[je].charCodeAt(0)>>8&&(er=!0);he=Wt.join("")}for(je=he.length;er===void 0&&je!==0;)he.charCodeAt(je-1)>>8&&(er=!0),je--;if(!er)return he;for(Wt=be.noBOM?[]:[254,255],je=0,qe=he.length;je<qe;je++){if((Sn=(vr=he.charCodeAt(je))>>8)>>8)throw new Error("Character at position "+je+" of string '"+he+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Wt.push(Sn),Wt.push(vr-(Sn<<8))}return String.fromCharCode.apply(void 0,Wt)}(C,z).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},On=h.__private__.beginPage=function(C){Ne[++nr]=[],Ct[nr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(C[0]),topRightY:Number(C[1])}},Vo(nr),Ie(Ne[F])},Wo=function(C,z){var he,be,je;switch(r=z||r,typeof C=="string"&&(he=y(C.toLowerCase()),Array.isArray(he)&&(be=he[0],je=he[1])),Array.isArray(C)&&(be=C[0]*Gt,je=C[1]*Gt),isNaN(be)&&(be=a[0],je=a[1]),(be>14400||je>14400)&&(Xr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),be=Math.min(14400,be),je=Math.min(14400,je)),a=[be,je],r.substr(0,1)){case"l":je>be&&(a=[je,be]);break;case"p":be>je&&(a=[je,be])}On(a),Kt(Dp),Q(Xf),Fp!==0&&Q(Fp+" J"),$p!==0&&Q($p+" j"),wr.publish("addPage",{pageNumber:nr})},uo=function(C){C>0&&C<=nr&&(Ne.splice(C,1),Ct.splice(C,1),nr--,F>nr&&(F=nr),this.setPage(F))},Vo=function(C){C>0&&C<=nr&&(F=C)},Rs=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return Ne.length-1},Dc=function(C,z,he){var be,je=void 0;return he=he||{},C=C!==void 0?C:Qt[yt].fontName,z=z!==void 0?z:Qt[yt].fontStyle,be=C.toLowerCase(),Zt[be]!==void 0&&Zt[be][z]!==void 0?je=Zt[be][z]:Zt[C]!==void 0&&Zt[C][z]!==void 0?je=Zt[C][z]:he.disableWarning===!1&&Xr.warn("Unable to look up font label for font '"+C+"', '"+z+"'. Refer to getFontList() for available fonts."),je||he.noFallback||(je=Zt.times[z])==null&&(je=Zt.times.normal),je},Jn=h.__private__.putInfo=function(){var C=vn(),z=function(be){return be};for(var he in d!==null&&(z=ca.encryptor(C,0)),Q("<<"),Q("/Producer ("+dr(z("jsPDF "+At.version))+")"),Xt)Xt.hasOwnProperty(he)&&Xt[he]&&Q("/"+he.substr(0,1).toUpperCase()+he.substr(1)+" ("+dr(z(Xt[he]))+")");Q("/CreationDate ("+dr(z(X))+")"),Q(">>"),Q("endobj")},Vf=h.__private__.putCatalog=function(C){var z=(C=C||{}).rootDictionaryObjId||re;switch(vn(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+z+" 0 R"),Ze||(Ze="fullwidth"),Ze){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var he=""+Ze;he.substr(he.length-1)==="%"&&(Ze=parseInt(Ze)/100),typeof Ze=="number"&&Q("/OpenAction [3 0 R /XYZ null null "+k(Ze)+"]")}switch(qt||(qt="continuous"),qt){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}ft&&Q("/PageMode /"+ft),wr.publish("putCatalog"),Q(">>"),Q("endobj")},r_=h.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(Y+1)),Q("/Root "+Y+" 0 R"),Q("/Info "+(Y-1)+" 0 R"),d!==null&&Q("/Encrypt "+ca.oid+" 0 R"),Q("/ID [ <"+se+"> <"+se+"> ]"),Q(">>")},Qn=h.__private__.putHeader=function(){Q("%PDF-"+v),Q("%")},l1=h.__private__.putXRef=function(){var C="0000000000";Q("xref"),Q("0 "+(Y+1)),Q("0000000000 65535 f ");for(var z=1;z<=Y;z++)typeof oe[z]=="function"?Q((C+oe[z]()).slice(-10)+" 00000 n "):oe[z]!==void 0?Q((C+oe[z]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},Go=h.__private__.buildDocument=function(){var C;Y=0,te=0,ee=[],oe=[],le=[],re=Yn(),ae=Yn(),Ie(ee),wr.publish("buildDocument"),Qn(),Ce(),function(){wr.publish("putAdditionalObjects");for(var he=0;he<le.length;he++){var be=le[he];W(be.objId,!0),Q(be.content),Q("endobj")}wr.publish("postPutAdditionalObjects")}(),C=[],function(){for(var he in Qt)Qt.hasOwnProperty(he)&&(f===!1||f===!0&&p.hasOwnProperty(he))&&Pe(Qt[he])}(),function(){var he;for(he in Ot)Ot.hasOwnProperty(he)&&Qe(Ot[he])}(),function(){for(var he in Na)Na.hasOwnProperty(he)&&Xe(Na[he])}(),function(he){var be;for(be in Tt)Tt.hasOwnProperty(be)&&(Tt[be]instanceof Dd?tt(Tt[be]):Tt[be]instanceof Ih&&lt(Tt[be],he))}(C),wr.publish("putResources"),C.forEach(ot),ot({resourcesOid:ae,objectOid:Number.MAX_SAFE_INTEGER}),wr.publish("postPutResources"),d!==null&&(ca.oid=vn(),Q("<<"),Q("/Filter /Standard"),Q("/V "+ca.v),Q("/R "+ca.r),Q("/U <"+ca.toHexString(ca.U)+">"),Q("/O <"+ca.toHexString(ca.O)+">"),Q("/P "+ca.P),Q(">>"),Q("endobj")),Jn(),Vf();var z=te;return l1(),r_(),Q("startxref"),Q(""+z),Q("%%EOF"),Ie(Ne[F]),ee.join(`
`)},Gf=h.__private__.getBlob=function(C){return new Blob([Re(C)],{type:"application/pdf"})},c1=h.output=h.__private__.output=($i=function(C,z){switch(typeof(z=z||{})=="string"?z={filename:z}:z.filename=z.filename||"generated.pdf",C){case void 0:return Go();case"save":h.save(z.filename);break;case"arraybuffer":return Re(Go());case"blob":return Gf(Go());case"bloburi":case"bloburl":if(Bt.URL!==void 0&&typeof Bt.URL.createObjectURL=="function")return Bt.URL&&Bt.URL.createObjectURL(Gf(Go()))||void 0;Xr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var he="",be=Go();try{he=S6(be)}catch{he=S6(unescape(encodeURIComponent(be)))}return"data:application/pdf;filename="+z.filename+";base64,"+he;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Bt)==="[object Window]"){var je="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",qe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';z.pdfObjectUrl&&(je=z.pdfObjectUrl,qe="");var Ge='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+je+'"'+qe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(z)+");<\/script></body></html>",xt=Bt.open();return xt!==null&&xt.document.write(Ge),xt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Bt)==="[object Window]"){var Nt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(z.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+z.filename+'" width="500px" height="400px" /></body></html>',Wt=Bt.open();if(Wt!==null){Wt.document.write(Nt);var er=this;Wt.document.documentElement.querySelector("#pdfViewer").onload=function(){Wt.document.title=z.filename,Wt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(er.output("bloburl"))}}return Wt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Bt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var vr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",z)+'"></iframe></body></html>',Sn=Bt.open();if(Sn!==null&&(Sn.document.write(vr),Sn.document.title=z.filename),Sn||typeof safari>"u")return Sn;break;case"datauri":case"dataurl":return Bt.document.location.href=this.output("datauristring",z);default:return null}},$i.foo=function(){try{return $i.apply(this,arguments)}catch(he){var C=he.stack||"";~C.indexOf(" at ")&&(C=C.split(" at ")[1]);var z="Error in function "+C.split(`
`)[0].split("<")[0]+": "+he.message;if(!Bt.console)throw new Error(z);Bt.console.error(z,he),Bt.alert&&alert(z)}},$i.foo.bar=$i,$i.foo),Is=function(C){return Array.isArray(Sl)===!0&&Sl.indexOf(C)>-1};switch(n){case"pt":Gt=1;break;case"mm":Gt=72/25.4;break;case"cm":Gt=72/2.54;break;case"in":Gt=72;break;case"px":Gt=Is("px_scaling")==1?.75:96/72;break;case"pc":case"em":Gt=12;break;case"ex":Gt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Gt=n}var ca=null;me(),K();var Nl=h.__private__.getPageInfo=h.getPageInfo=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ct[C].objId,pageNumber:C,pageContext:Ct[C]}},u1=h.__private__.getPageInfoByObjId=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var z in Ct)if(Ct[z].objId===C)break;return Nl(z)},n_=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:Ct[F].objId,pageNumber:F,pageContext:Ct[F]}};h.addPage=function(){return Wo.apply(this,arguments),this},h.setPage=function(){return Vo.apply(this,arguments),Ie.call(this,Ne[F]),this},h.insertPage=function(C){return this.addPage(),this.movePage(F,C),this},h.movePage=function(C,z){var he,be;if(C>z){he=Ne[C],be=Ct[C];for(var je=C;je>z;je--)Ne[je]=Ne[je-1],Ct[je]=Ct[je-1];Ne[z]=he,Ct[z]=be,this.setPage(z)}else if(C<z){he=Ne[C],be=Ct[C];for(var qe=C;qe<z;qe++)Ne[qe]=Ne[qe+1],Ct[qe]=Ct[qe+1];Ne[z]=he,Ct[z]=be,this.setPage(z)}return this},h.deletePage=function(){return uo.apply(this,arguments),this},h.__private__.text=h.text=function(C,z,he,be,je){var qe,Ge,xt,Nt,Wt,er,vr,Sn,Zn,Zr=(be=be||{}).scope||this;if(typeof C=="number"&&typeof z=="number"&&(typeof he=="string"||Array.isArray(he))){var ua=he;he=z,z=C,C=ua}if(arguments[3]instanceof Pt==0?(xt=arguments[4],Nt=arguments[5],Fr(vr=arguments[3])==="object"&&vr!==null||(typeof xt=="string"&&(Nt=xt,xt=null),typeof vr=="string"&&(Nt=vr,vr=null),typeof vr=="number"&&(xt=vr,vr=null),be={flags:vr,angle:xt,align:Nt})):(T("The transform parameter of text() with a Matrix value"),Zn=je),isNaN(z)||isNaN(he)||C==null)throw new Error("Invalid arguments passed to jsPDF.text");if(C.length===0)return Zr;var ea,Fa="",Ol=typeof be.lineHeightFactor=="number"?be.lineHeightFactor:id,ho=Zr.internal.scaleFactor;function Pl(Er){return Er=Er.split("	").join(Array(be.TabLen||9).join(" ")),dr(Er,vr)}function qp(Er){for(var Gr,zn=Er.concat(),da=[],Il=zn.length;Il--;)typeof(Gr=zn.shift())=="string"?da.push(Gr):Array.isArray(Er)&&(Gr.length===1||Gr[1]===void 0&&Gr[2]===void 0)?da.push(Gr[0]):da.push([Gr[0],Gr[1],Gr[2]]);return da}function Jf(Er,Gr){var zn;if(typeof Er=="string")zn=Gr(Er)[0];else if(Array.isArray(Er)){for(var da,Il,Zp=Er.concat(),eh=[],w1=Zp.length;w1--;)typeof(da=Zp.shift())=="string"?eh.push(Gr(da)[0]):Array.isArray(da)&&typeof da[0]=="string"&&(Il=Gr(da[0],da[1],da[2]),eh.push([Il[0],Il[1],Il[2]]));zn=eh}return zn}var Mc=!1,cd=!0;if(typeof C=="string")Mc=!0;else if(Array.isArray(C)){var ud=C.concat();Ge=[];for(var Fc,$a=ud.length;$a--;)(typeof(Fc=ud.shift())!="string"||Array.isArray(Fc)&&typeof Fc[0]!="string")&&(cd=!1);Mc=cd}if(Mc===!1)throw new Error('Type of text must be string or Array. "'+C+'" is not recognized.');typeof C=="string"&&(C=C.match(/[\r?\n]/)?C.split(/\r\n|\r|\n/g):[C]);var dd=He/Zr.internal.scaleFactor,fd=dd*(Ol-1);switch(be.baseline){case"bottom":he-=fd;break;case"top":he+=dd-fd;break;case"hanging":he+=dd-2*fd;break;case"middle":he+=dd/2-fd}if((er=be.maxWidth||0)>0&&(typeof C=="string"?C=Zr.splitTextToSize(C,er):Object.prototype.toString.call(C)==="[object Array]"&&(C=C.reduce(function(Er,Gr){return Er.concat(Zr.splitTextToSize(Gr,er))},[]))),qe={text:C,x:z,y:he,options:be,mutex:{pdfEscape:dr,activeFontKey:yt,fonts:Qt,activeFontSize:He}},wr.publish("preProcessText",qe),C=qe.text,xt=(be=qe.options).angle,Zn instanceof Pt==0&&xt&&typeof xt=="number"){xt*=Math.PI/180,be.rotationDirection===0&&(xt=-xt),S===b&&(xt=-xt);var Hp=Math.cos(xt),Wp=Math.sin(xt);Zn=new Pt(Hp,Wp,-Wp,Hp,0,0)}else xt&&xt instanceof Pt&&(Zn=xt);S!==b||Zn||(Zn=co),(Wt=be.charSpace||El)!==void 0&&(Fa+=E(D(Wt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Sn=be.horizontalScale)!==void 0&&(Fa+=E(100*Sn)+` Tz
`),be.lang;var gi=-1,Ll=be.renderingMode!==void 0?be.renderingMode:be.stroke,Qf=Zr.internal.getCurrentPageInfo().pageContext;switch(Ll){case 0:case!1:case"fill":gi=0;break;case 1:case!0:case"stroke":gi=1;break;case 2:case"fillThenStroke":gi=2;break;case 3:case"invisible":gi=3;break;case 4:case"fillAndAddForClipping":gi=4;break;case 5:case"strokeAndAddPathForClipping":gi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":gi=6;break;case 7:case"addToPathForClipping":gi=7}var y1=Qf.usedRenderingMode!==void 0?Qf.usedRenderingMode:-1;gi!==-1?Fa+=gi+` Tr
`:y1!==-1&&(Fa+=`0 Tr
`),gi!==-1&&(Qf.usedRenderingMode=gi),Nt=be.align||"left";var Ds,hd=He*Ol,Vp=Zr.internal.pageSize.getWidth(),Gp=Qt[yt];Wt=be.charSpace||El,er=be.maxWidth||0,vr=Object.assign({autoencode:!0,noBOM:!0},be.flags);var $c=[],pd=function(Er){return Zr.getStringUnitWidth(Er,{font:Gp,charSpace:Wt,fontSize:He,doKerning:!1})*He/ho};if(Object.prototype.toString.call(C)==="[object Array]"){var ss;Ge=qp(C),Nt!=="left"&&(Ds=Ge.map(pd));var os,Bc=0;if(Nt==="right"){z-=Ds[0],C=[],$a=Ge.length;for(var Rl=0;Rl<$a;Rl++)Rl===0?(os=jl(z),ss=Al(he)):(os=D(Bc-Ds[Rl]),ss=-hd),C.push([Ge[Rl],os,ss]),Bc=Ds[Rl]}else if(Nt==="center"){z-=Ds[0]/2,C=[],$a=Ge.length;for(var Uc=0;Uc<$a;Uc++)Uc===0?(os=jl(z),ss=Al(he)):(os=D((Bc-Ds[Uc])/2),ss=-hd),C.push([Ge[Uc],os,ss]),Bc=Ds[Uc]}else if(Nt==="left"){C=[],$a=Ge.length;for(var Kp=0;Kp<$a;Kp++)C.push(Ge[Kp])}else if(Nt==="justify"&&Gp.encoding==="Identity-H"){C=[],$a=Ge.length,er=er!==0?er:Vp;for(var Zf=0,Un=0;Un<$a;Un++)if(ss=Un===0?Al(he):-hd,os=Un===0?jl(z):Zf,Un<$a-1){var b1=D((er-Ds[Un])/(Ge[Un].split(" ").length-1)),Xo=Ge[Un].split(" ");C.push([Xo[0]+" ",os,ss]),Zf=0;for(var Yo=1;Yo<Xo.length;Yo++){var Xp=(pd(Xo[Yo-1]+" "+Xo[Yo])-pd(Xo[Yo]))*ho+b1;Yo==Xo.length-1?C.push([Xo[Yo],Xp,0]):C.push([Xo[Yo]+" ",Xp,0]),Zf-=Xp}}else C.push([Ge[Un],os,ss]);C.push(["",Zf,0])}else{if(Nt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(C=[],$a=Ge.length,er=er!==0?er:Vp,Un=0;Un<$a;Un++){ss=Un===0?Al(he):-hd,os=Un===0?jl(z):0;var Yp=Ge[Un].split(" ").length-1,Jp=Yp>0?(er-Ds[Un])/Yp:0;Un<$a-1?$c.push(E(D(Jp))):$c.push(0),C.push([Ge[Un],os,ss])}}}(typeof be.R2L=="boolean"?be.R2L:dt)===!0&&(C=Jf(C,function(Er,Gr,zn){return[Er.split("").reverse().join(""),Gr,zn]})),qe={text:C,x:z,y:he,options:be,mutex:{pdfEscape:dr,activeFontKey:yt,fonts:Qt,activeFontSize:He}},wr.publish("postProcessText",qe),C=qe.text,ea=qe.mutex.isHex||!1;var Qp=Qt[yt].encoding;Qp!=="WinAnsiEncoding"&&Qp!=="StandardEncoding"||(C=Jf(C,function(Er,Gr,zn){return[Pl(Er),Gr,zn]})),Ge=qp(C),C=[];for(var zc,qc,Hc,md=Array.isArray(Ge[0])?1:0,Wc="",gd=function(Er,Gr,zn){var da="";return zn instanceof Pt?(zn=typeof be.angle=="number"?lo(zn,new Pt(1,0,0,1,Er,Gr)):lo(new Pt(1,0,0,1,Er,Gr),zn),S===b&&(zn=lo(new Pt(1,0,0,-1,0,0),zn)),da=zn.join(" ")+` Tm
`):da=E(Er)+" "+E(Gr)+` Td
`,da},Ms=0;Ms<Ge.length;Ms++){switch(Wc="",md){case 1:Hc=(ea?"<":"(")+Ge[Ms][0]+(ea?">":")"),zc=parseFloat(Ge[Ms][1]),qc=parseFloat(Ge[Ms][2]);break;case 0:Hc=(ea?"<":"(")+Ge[Ms]+(ea?">":")"),zc=jl(z),qc=Al(he)}$c!==void 0&&$c[Ms]!==void 0&&(Wc=$c[Ms]+` Tw
`),Ms===0?C.push(Wc+gd(zc,qc,Zn)+Hc):md===0?C.push(Wc+Hc):md===1&&C.push(Wc+gd(zc,qc,Zn)+Hc)}C=md===0?C.join(` Tj
T* `):C.join(` Tj
`),C+=` Tj
`;var Jo=`BT
/`;return Jo+=yt+" "+He+` Tf
`,Jo+=E(He*Ol)+` TL
`,Jo+=sd+`
`,Jo+=Fa,Jo+=C,Q(Jo+="ET"),p[yt]=!0,Zr};var a_=h.__private__.clip=h.clip=function(C){return Q(C==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return a_("evenodd")},h.__private__.discardPath=h.discardPath=function(){return Q("n"),this};var Ko=h.__private__.isValidStyle=function(C){var z=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(C)!==-1&&(z=!0),z};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(C){return Ko(C)&&(u=C),this};var d1=h.__private__.getStyle=h.getStyle=function(C){var z=u;switch(C){case"D":case"S":z="S";break;case"F":z="f";break;case"FD":case"DF":z="B";break;case"f":case"f*":case"B":case"B*":z=C}return z},f1=h.close=function(){return Q("h"),this};h.stroke=function(){return Q("S"),this},h.fill=function(C){return Kf("f",C),this},h.fillEvenOdd=function(C){return Kf("f*",C),this},h.fillStroke=function(C){return Kf("B",C),this},h.fillStrokeEvenOdd=function(C){return Kf("B*",C),this};var Kf=function(C,z){Fr(z)==="object"?s_(z,C):Q(C)},ad=function(C){C===null||S===b&&C===void 0||(C=d1(C),Q(C))};function i_(C,z,he,be,je){var qe=new Ih(z||this.boundingBox,he||this.xStep,be||this.yStep,this.gState,je||this.matrix);qe.stream=this.stream;var Ge=C+"$$"+this.cloneIndex+++"$$";return ti(Ge,qe),qe}var s_=function(C,z){var he=Or[C.key],be=Tt[he];if(be instanceof Dd)Q("q"),Q(o_(z)),be.gState&&h.setGState(be.gState),Q(C.matrix.toString()+" cm"),Q("/"+he+" sh"),Q("Q");else if(be instanceof Ih){var je=new Pt(1,0,0,-1,0,ld());C.matrix&&(je=je.multiply(C.matrix||co),he=i_.call(be,C.key,C.boundingBox,C.xStep,C.yStep,je).id),Q("q"),Q("/Pattern cs"),Q("/"+he+" scn"),be.gState&&h.setGState(be.gState),Q(z),Q("Q")}},o_=function(C){switch(C){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ip=h.moveTo=function(C,z){return Q(E(D(C))+" "+E(q(z))+" m"),this},h1=h.lineTo=function(C,z){return Q(E(D(C))+" "+E(q(z))+" l"),this},fo=h.curveTo=function(C,z,he,be,je,qe){return Q([E(D(C)),E(q(z)),E(D(he)),E(q(be)),E(D(je)),E(q(qe)),"c"].join(" ")),this};h.__private__.line=h.line=function(C,z,he,be,je){if(isNaN(C)||isNaN(z)||isNaN(he)||isNaN(be)||!Ko(je))throw new Error("Invalid arguments passed to jsPDF.line");return S===g?this.lines([[he-C,be-z]],C,z,[1,1],je||"S"):this.lines([[he-C,be-z]],C,z,[1,1]).stroke()},h.__private__.lines=h.lines=function(C,z,he,be,je,qe){var Ge,xt,Nt,Wt,er,vr,Sn,Zn,Zr,ua,ea,Fa;if(typeof C=="number"&&(Fa=he,he=z,z=C,C=Fa),be=be||[1,1],qe=qe||!1,isNaN(z)||isNaN(he)||!Array.isArray(C)||!Array.isArray(be)||!Ko(je)||typeof qe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ip(z,he),Ge=be[0],xt=be[1],Wt=C.length,ua=z,ea=he,Nt=0;Nt<Wt;Nt++)(er=C[Nt]).length===2?(ua=er[0]*Ge+ua,ea=er[1]*xt+ea,h1(ua,ea)):(vr=er[0]*Ge+ua,Sn=er[1]*xt+ea,Zn=er[2]*Ge+ua,Zr=er[3]*xt+ea,ua=er[4]*Ge+ua,ea=er[5]*xt+ea,fo(vr,Sn,Zn,Zr,ua,ea));return qe&&f1(),ad(je),this},h.path=function(C){for(var z=0;z<C.length;z++){var he=C[z],be=he.c;switch(he.op){case"m":Ip(be[0],be[1]);break;case"l":h1(be[0],be[1]);break;case"c":fo.apply(this,be);break;case"h":f1()}}return this},h.__private__.rect=h.rect=function(C,z,he,be,je){if(isNaN(C)||isNaN(z)||isNaN(he)||isNaN(be)||!Ko(je))throw new Error("Invalid arguments passed to jsPDF.rect");return S===g&&(be=-be),Q([E(D(C)),E(q(z)),E(D(he)),E(D(be)),"re"].join(" ")),ad(je),this},h.__private__.triangle=h.triangle=function(C,z,he,be,je,qe,Ge){if(isNaN(C)||isNaN(z)||isNaN(he)||isNaN(be)||isNaN(je)||isNaN(qe)||!Ko(Ge))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[he-C,be-z],[je-he,qe-be],[C-je,z-qe]],C,z,[1,1],Ge,!0),this},h.__private__.roundedRect=h.roundedRect=function(C,z,he,be,je,qe,Ge){if(isNaN(C)||isNaN(z)||isNaN(he)||isNaN(be)||isNaN(je)||isNaN(qe)||!Ko(Ge))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var xt=4/3*(Math.SQRT2-1);return je=Math.min(je,.5*he),qe=Math.min(qe,.5*be),this.lines([[he-2*je,0],[je*xt,0,je,qe-qe*xt,je,qe],[0,be-2*qe],[0,qe*xt,-je*xt,qe,-je,qe],[2*je-he,0],[-je*xt,0,-je,-qe*xt,-je,-qe],[0,2*qe-be],[0,-qe*xt,je*xt,-qe,je,-qe]],C+je,z,[1,1],Ge,!0),this},h.__private__.ellipse=h.ellipse=function(C,z,he,be,je){if(isNaN(C)||isNaN(z)||isNaN(he)||isNaN(be)||!Ko(je))throw new Error("Invalid arguments passed to jsPDF.ellipse");var qe=4/3*(Math.SQRT2-1)*he,Ge=4/3*(Math.SQRT2-1)*be;return Ip(C+he,z),fo(C+he,z-Ge,C+qe,z-be,C,z-be),fo(C-qe,z-be,C-he,z-Ge,C-he,z),fo(C-he,z+Ge,C-qe,z+be,C,z+be),fo(C+qe,z+be,C+he,z+Ge,C+he,z),ad(je),this},h.__private__.circle=h.circle=function(C,z,he,be){if(isNaN(C)||isNaN(z)||isNaN(he)||!Ko(be))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(C,z,he,he,be)},h.setFont=function(C,z,he){return he&&(z=A(z,he)),yt=Dc(C,z,{disableWarning:!1}),this};var l_=h.__private__.getFont=h.getFont=function(){return Qt[Dc.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var C,z,he={};for(C in Zt)if(Zt.hasOwnProperty(C))for(z in he[C]=[],Zt[C])Zt[C].hasOwnProperty(z)&&he[C].push(z);return he},h.addFont=function(C,z,he,be,je){var qe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&qe.indexOf(arguments[3])!==-1?je=arguments[3]:arguments[3]&&qe.indexOf(arguments[3])==-1&&(he=A(he,be)),Hr.call(this,C,z,he,je=je||"Identity-H")};var id,Dp=e.lineWidth||.200025,c_=h.__private__.getLineWidth=h.getLineWidth=function(){return Dp},Kt=h.__private__.setLineWidth=h.setLineWidth=function(C){return Dp=C,Q(E(D(C))+" w"),this};h.__private__.setLineDash=At.API.setLineDash=At.API.setLineDashPattern=function(C,z){if(C=C||[],z=z||0,isNaN(z)||!Array.isArray(C))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return C=C.map(function(he){return E(D(he))}).join(" "),z=E(D(z)),Q("["+C+"] "+z+" d"),this};var u_=h.__private__.getLineHeight=h.getLineHeight=function(){return He*id};h.__private__.getLineHeight=h.getLineHeight=function(){return He*id};var d_=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(C){return typeof(C=C||1.15)=="number"&&(id=C),this},f_=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return id};d_(e.lineHeight);var jl=h.__private__.getHorizontalCoordinate=function(C){return D(C)},Al=h.__private__.getVerticalCoordinate=function(C){return S===b?C:Ct[F].mediaBox.topRightY-Ct[F].mediaBox.bottomLeftY-D(C)},h_=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(C){return E(jl(C))},p_=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(C){return E(Al(C))},Xf=e.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return fe(Xf)},h.__private__.setStrokeColor=h.setDrawColor=function(C,z,he,be){return Xf=ge({ch1:C,ch2:z,ch3:he,ch4:be,pdfColorType:"draw",precision:2}),Q(Xf),this};var Mp=e.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return fe(Mp)},h.__private__.setFillColor=h.setFillColor=function(C,z,he,be){return Mp=ge({ch1:C,ch2:z,ch3:he,ch4:be,pdfColorType:"fill",precision:2}),Q(Mp),this};var sd=e.textColor||"0 g",m_=h.__private__.getTextColor=h.getTextColor=function(){return fe(sd)};h.__private__.setTextColor=h.setTextColor=function(C,z,he,be){return sd=ge({ch1:C,ch2:z,ch3:he,ch4:be,pdfColorType:"text",precision:3}),this};var El=e.charSpace,g_=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(El||0)};h.__private__.setCharSpace=h.setCharSpace=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return El=C,this};var Fp=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(C){var z=h.CapJoinStyles[C];if(z===void 0)throw new Error("Line cap style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fp=z,Q(z+" J"),this};var $p=0;h.__private__.setLineJoin=h.setLineJoin=function(C){var z=h.CapJoinStyles[C];if(z===void 0)throw new Error("Line join style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $p=z,Q(z+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(C){if(C=C||0,isNaN(C))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(E(D(C))+" M"),this},h.GState=vb,h.setGState=function(C){(C=typeof C=="string"?Ot[Ht[C]]:p1(null,C)).equals(Qr)||(Q("/"+C.id+" gs"),Qr=C)};var p1=function(C,z){if(!C||!Ht[C]){var he=!1;for(var be in Ot)if(Ot.hasOwnProperty(be)&&Ot[be].equals(z)){he=!0;break}if(he)z=Ot[be];else{var je="GS"+(Object.keys(Ot).length+1).toString(10);Ot[je]=z,z.id=je}return C&&(Ht[C]=z.id),wr.publish("addGState",z),z}};h.addGState=function(C,z){return p1(C,z),this},h.saveGraphicsState=function(){return Q("q"),Jr.push({key:yt,size:He,color:sd}),this},h.restoreGraphicsState=function(){Q("Q");var C=Jr.pop();return yt=C.key,He=C.size,sd=C.color,Qr=null,this},h.setCurrentTransformationMatrix=function(C){return Q(C.toString()+" cm"),this},h.comment=function(C){return Q("#"+C),this};var Tl=function(C,z){var he=C||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return he},set:function(qe){isNaN(qe)||(he=parseFloat(qe))}});var be=z||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return be},set:function(qe){isNaN(qe)||(be=parseFloat(qe))}});var je="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return je},set:function(qe){je=qe.toString()}}),this},Bp=function(C,z,he,be){Tl.call(this,C,z),this.type="rect";var je=he||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return je},set:function(Ge){isNaN(Ge)||(je=parseFloat(Ge))}});var qe=be||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return qe},set:function(Ge){isNaN(Ge)||(qe=parseFloat(Ge))}}),this},Yf=function(){this.page=nr,this.currentPage=F,this.pages=Ne.slice(0),this.pagesContext=Ct.slice(0),this.x=St,this.y=gn,this.matrix=ur,this.width=zp(F),this.height=g1(F),this.outputDestination=Me,this.id="",this.objectNumber=-1};Yf.prototype.restore=function(){nr=this.page,F=this.currentPage,Ct=this.pagesContext,Ne=this.pages,St=this.x,gn=this.y,ur=this.matrix,m1(F,this.width),Cl(F,this.height),Me=this.outputDestination};var Up=function(C,z,he,be,je){Ls.push(new Yf),nr=F=0,Ne=[],St=C,gn=z,ur=je,On([he,be])};for(var od in h.beginFormObject=function(C,z,he,be,je){return Up(C,z,he,be,je),this},h.endFormObject=function(C){return function(z){if(oo[z])Ls.pop().restore();else{var he=new Yf,be="Xo"+(Object.keys(Na).length+1).toString(10);he.id=be,oo[z]=be,Na[be]=he,wr.publish("addFormObject",he),Ls.pop().restore()}}(C),this},h.doFormObject=function(C,z){var he=Na[oo[C]];return Q("q"),Q(z.toString()+" cm"),Q("/"+he.id+" Do"),Q("Q"),this},h.getFormObject=function(C){var z=Na[oo[C]];return{x:z.x,y:z.y,width:z.width,height:z.height,matrix:z.matrix}},h.save=function(C,z){return C=C||"generated.pdf",(z=z||{}).returnPromise=z.returnPromise||!1,z.returnPromise===!1?(Cd(Gf(Go()),C),typeof Cd.unload=="function"&&Bt.setTimeout&&setTimeout(Cd.unload,911),this):new Promise(function(he,be){try{var je=Cd(Gf(Go()),C);typeof Cd.unload=="function"&&Bt.setTimeout&&setTimeout(Cd.unload,911),he(je)}catch(qe){be(qe.message)}})},At.API)At.API.hasOwnProperty(od)&&(od==="events"&&At.API.events.length?function(C,z){var he,be,je;for(je=z.length-1;je!==-1;je--)he=z[je][0],be=z[je][1],C.subscribe.apply(C,[he].concat(typeof be=="function"?[be]:be))}(wr,At.API.events):h[od]=At.API[od]);function zp(C){return Ct[C].mediaBox.topRightX-Ct[C].mediaBox.bottomLeftX}function m1(C,z){Ct[C].mediaBox.topRightX=z+Ct[C].mediaBox.bottomLeftX}function g1(C){return Ct[C].mediaBox.topRightY-Ct[C].mediaBox.bottomLeftY}function Cl(C,z){Ct[C].mediaBox.topRightY=z+Ct[C].mediaBox.bottomLeftY}var kl=h.getPageWidth=function(C){return zp(C=C||F)/Gt},v1=h.setPageWidth=function(C,z){m1(C,z*Gt)},ld=h.getPageHeight=function(C){return g1(C=C||F)/Gt},x1=h.setPageHeight=function(C,z){Cl(C,z*Gt)};return h.internal={pdfEscape:dr,getStyle:d1,getFont:l_,getFontSize:nt,getCharSpace:g_,getTextColor:m_,getLineHeight:u_,getLineHeightFactor:f_,getLineWidth:c_,write:$e,getHorizontalCoordinate:jl,getVerticalCoordinate:Al,getCoordinateString:h_,getVerticalCoordinateString:p_,collections:{},newObject:vn,newAdditionalObject:de,newObjectDeferred:Yn,newObjectDeferredBegin:W,getFilters:Ee,putStream:De,events:wr,scaleFactor:Gt,pageSize:{getWidth:function(){return kl(F)},setWidth:function(C){v1(F,C)},getHeight:function(){return ld(F)},setHeight:function(C){x1(F,C)}},encryptionOptions:d,encryption:ca,getEncryptor:function(C){return d!==null?ca.encryptor(C,0):function(z){return z}},output:c1,getNumberOfPages:Rs,get pages(){return Ne},out:Q,f2:k,f3:R,getPageInfo:Nl,getPageInfoByObjId:u1,getCurrentPageInfo:n_,getPDFVersion:m,Point:Tl,Rectangle:Bp,Matrix:Pt,hasHotfix:Is},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return kl(F)},set:function(C){v1(F,C)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return ld(F)},set:function(C){x1(F,C)},enumerable:!0,configurable:!0}),(function(C){for(var z=0,he=it.length;z<he;z++){var be=Hr.call(this,C[z][0],C[z][1],C[z][2],it[z][3],!0);f===!1&&(p[be]=!0);var je=C[z][0].split("-");Ft({id:be,fontName:je[0],fontStyle:je[1]||""})}wr.publish("addFonts",{fonts:Qt,dictionary:Zt})}).call(h,it),yt="F1",Wo(a,r),wr.publish("initialized"),h}yh.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},yh.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},yh.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},yh.prototype.processOwnerPassword=function(e,t){return pj(hj(t).substr(0,5),e)},yh.prototype.encryptor=function(e,t){var r=hj(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return pj(r,n)}},vb.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Fr(e)!==Fr(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},At.API={events:[]},At.version="3.0.4";var Dn=At.API,z3=1,Uf=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},dh=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Yt=function(e){return e.toFixed(2)},tu=function(e){return e.toFixed(5)};Dn.__acroform__={};var as=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},E6=function(e){return e*z3},rl=function(e){var t=new nB,r=vt.internal.getHeight(e)||0,n=vt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Yt(n)),Number(Yt(r))],t},Qfe=Dn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},Zfe=Dn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},ehe=Dn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Vn=Dn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ehe(e,t-1)},Gn=Dn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Qfe(e,t-1)},Kn=Dn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Zfe(e,t-1)},the=Dn.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],i=e[1],s=e[2],o=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(i+o)||0,c.upperRight_X=r(a+s)||0,c.upperRight_Y=n(i)||0,[Number(Yt(c.lowerLeft_X)),Number(Yt(c.lowerLeft_Y)),Number(Yt(c.upperRight_X)),Number(Yt(c.upperRight_Y))]},rhe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=mj(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+Yt(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=rl(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},mj=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(k){return k.split(`
`)}):a.map(function(k){return[k]});var i=r,s=vt.internal.getHeight(e)||0;s=s<0?-s:s;var o=vt.internal.getWidth(e)||0;o=o<0?-o:o;var c=function(k,R,D){if(k+1<a.length){var q=R+" "+a[k+1][0];return kx(q,e,D).width<=o-4}return!1};i++;e:for(;i>0;){t="",i--;var u,d,f=kx("3",e,i).height,p=e.multiline?s-i:(s-f)/2,h=p+=2,v=0,m=0,x=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+kx(t,e,i=12).width+", FieldWidth:"+o+`
`;break}for(var y="",g=0,b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var S=!1;if(a[b].length!==1&&x!==a[b].length-1){if((f+2)*(g+2)+2>s)continue e;y+=a[b][x],S=!0,m=b,b--}else{y=(y+=a[b][x]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var _=parseInt(b),j=c(_,y,i),A=b>=a.length-1;if(j&&!A){y+=" ",x=0;continue}if(j||A){if(A)m=_;else if(e.multiline&&(f+2)*(g+2)+2>s)continue e}else{if(!e.multiline||(f+2)*(g+2)+2>s)continue e;m=_}}for(var E="",T=v;T<=m;T++){var L=a[T];if(e.multiline){if(T===m){E+=L[x]+" ",x=(x+1)%L.length;continue}if(T===v){E+=L[L.length-1]+" ";continue}}E+=L[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,d=kx(E,e,i).width,e.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;default:u=2}t+=Yt(u)+" "+Yt(h)+` Td
`,t+="("+Uf(E)+`) Tj
`,t+=-Yt(u)+` 0 Td
`,h=-(i+2),d=0,v=S?m:m+1,g++,y=""}break}return n.text=t,n.fontSize=i,n},kx=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},nhe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},ahe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},ihe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Uo.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(nhe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");z3=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new aB,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&ahe(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var i=!n;for(var s in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(s)){var o=n[s],c=[],u=o.Rect;if(o.Rect&&(o.Rect=the(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=vt.createDefaultAppearanceStream(o),Fr(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=rhe(o);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var h=o.appearanceStreamContent[p];if(f+="/"+p+" ",f+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var s in h)if(h.hasOwnProperty(s)){var v=h[s];typeof v=="function"&&(v=v.call(a,o)),f+="/"+s+" "+v+" ",a.internal.acroformPlugin.xForms.indexOf(v)>=0||a.internal.acroformPlugin.xForms.push(v)}}else typeof(v=h)=="function"&&(v=v.call(a,o)),f+="/"+s+" "+v,a.internal.acroformPlugin.xForms.indexOf(v)>=0||a.internal.acroformPlugin.xForms.push(v);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:o.objId}),a.internal.out("endobj")}i&&function(m,x){for(var y in m)if(m.hasOwnProperty(y)){var g=y,b=m[y];x.internal.newObjectDeferredBegin(b.objId,!0),Fr(b)==="object"&&typeof b.putStream=="function"&&b.putStream(),delete m[g]}}(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},rB=Dn.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(s){return s};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),Fr(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+Uf(n(e[i].toString()))+")"):a+=e[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},z5=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+Uf(n(e))+")"},cl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};cl.prototype.toString=function(){return this.objId+" 0 R"},cl.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},cl.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:rB(a,this.objId,this.scope)}):a instanceof cl?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var nB=function(){cl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};as(nB,cl);var aB=function(){cl.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Uf(r(e))+")"}},set:function(r){e=r}})};as(aB,cl);var Uo=function e(){cl.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Vn(t,3)},set:function(y){y?this.F=Gn(t,3):this.F=Kn(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof xb)return;i="FieldObject"+e.FieldNum++}var y=function(g){return g};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Uf(y(i))+")"},set:function(y){i=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(y){i=y}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(y){s=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/z3:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof xb||this instanceof lf))return z5(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Ta==0?z5(p,this.objId,this.scope):p},set:function(y){y=y.toString(),p=this instanceof Ta==0?y.substr(0,1)==="("?dh(y.substr(1,y.length-2)):dh(y):y}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ta==1?dh(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof Ta==1?"/"+y:y}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Ta==0?z5(h,this.objId,this.scope):h},set:function(y){y=y.toString(),h=this instanceof Ta==0?y.substr(0,1)==="("?dh(y.substr(1,y.length-2)):dh(y):y}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ta==1?dh(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof Ta==1?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(y){y=!!y,m=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(y){v=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Vn(this.Ff,1)},set:function(y){y?this.Ff=Gn(this.Ff,1):this.Ff=Kn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Vn(this.Ff,2)},set:function(y){y?this.Ff=Gn(this.Ff,2):this.Ff=Kn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Vn(this.Ff,3)},set:function(y){y?this.Ff=Gn(this.Ff,3):this.Ff=Kn(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');x=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(x){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:x=2;break;case"center":case 1:x=1;break;default:x=0}}})};as(Uo,cl);var t0=function(){Uo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return rB(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(i,s,o){o||(o=1);for(var c,u=[];c=s.exec(i);)u.push(c[o]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Vn(this.Ff,18)},set:function(r){r?this.Ff=Gn(this.Ff,18):this.Ff=Kn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Vn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Gn(this.Ff,19):this.Ff=Kn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Vn(this.Ff,20)},set:function(r){r?(this.Ff=Gn(this.Ff,20),t.sort()):this.Ff=Kn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Vn(this.Ff,22)},set:function(r){r?this.Ff=Gn(this.Ff,22):this.Ff=Kn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Vn(this.Ff,23)},set:function(r){r?this.Ff=Gn(this.Ff,23):this.Ff=Kn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Vn(this.Ff,27)},set:function(r){r?this.Ff=Gn(this.Ff,27):this.Ff=Kn(this.Ff,27)}}),this.hasAppearanceStream=!1};as(t0,Uo);var r0=function(){t0.call(this),this.fontName="helvetica",this.combo=!1};as(r0,t0);var n0=function(){r0.call(this),this.combo=!0};as(n0,r0);var dy=function(){n0.call(this),this.edit=!0};as(dy,n0);var Ta=function(){Uo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Vn(this.Ff,15)},set:function(r){r?this.Ff=Gn(this.Ff,15):this.Ff=Kn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Vn(this.Ff,16)},set:function(r){r?this.Ff=Gn(this.Ff,16):this.Ff=Kn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Vn(this.Ff,17)},set:function(r){r?this.Ff=Gn(this.Ff,17):this.Ff=Kn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Vn(this.Ff,26)},set:function(r){r?this.Ff=Gn(this.Ff,26):this.Ff=Kn(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+Uf(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Fr(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};as(Ta,Uo);var fy=function(){Ta.call(this),this.pushButton=!0};as(fy,Ta);var a0=function(){Ta.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};as(a0,Ta);var xb=function(){var e,t;Uo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,s=[];for(i in s.push("<<"),n)s.push("/"+i+" ("+Uf(a(n[i]))+")");return s.push(">>"),s.join(`
`)},set:function(a){Fr(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=vt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};as(xb,Uo),a0.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},a0.prototype.createOption=function(e){var t=new xb;return t.Parent=this,t.optionName=e,this.Kids.push(t),she.call(this.scope,t),t};var hy=function(){Ta.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=vt.CheckBox.createAppearanceStream()};as(hy,Ta);var lf=function(){Uo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Vn(this.Ff,13)},set:function(t){t?this.Ff=Gn(this.Ff,13):this.Ff=Kn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Vn(this.Ff,21)},set:function(t){t?this.Ff=Gn(this.Ff,21):this.Ff=Kn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Vn(this.Ff,23)},set:function(t){t?this.Ff=Gn(this.Ff,23):this.Ff=Kn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Vn(this.Ff,24)},set:function(t){t?this.Ff=Gn(this.Ff,24):this.Ff=Kn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Vn(this.Ff,25)},set:function(t){t?this.Ff=Gn(this.Ff,25):this.Ff=Kn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Vn(this.Ff,26)},set:function(t){t?this.Ff=Gn(this.Ff,26):this.Ff=Kn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};as(lf,Uo);var py=function(){lf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Vn(this.Ff,14)},set:function(e){e?this.Ff=Gn(this.Ff,14):this.Ff=Kn(this.Ff,14)}}),this.password=!0};as(py,lf);var vt={CheckBox:{createAppearanceStream:function(){return{N:{On:vt.CheckBox.YesNormal},D:{On:vt.CheckBox.YesPushDown,Off:vt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=rl(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=mj(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Yt(vt.internal.getWidth(e))+" "+Yt(vt.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Yt(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=rl(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],i=vt.internal.getHeight(e),s=vt.internal.getWidth(e),o=mj(e,e.caption);return a.push("1 g"),a.push("0 0 "+Yt(s)+" "+Yt(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Yt(s-1)+" "+Yt(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Yt(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=rl(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Yt(vt.internal.getWidth(e))+" "+Yt(vt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:vt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=vt.RadioButton.Circle.YesNormal,t.D[e]=vt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=rl(e);t.scope=e.scope;var r=[],n=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=vt.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+tu(vt.internal.getWidth(e)/2)+" "+tu(vt.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=rl(e);t.scope=e.scope;var r=[],n=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*vt.internal.Bezier_C).toFixed(5)),s=Number((n*vt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+tu(vt.internal.getWidth(e)/2)+" "+tu(vt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+tu(vt.internal.getWidth(e)/2)+" "+tu(vt.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=rl(e);t.scope=e.scope;var r=[],n=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*vt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+tu(vt.internal.getWidth(e)/2)+" "+tu(vt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:vt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=vt.RadioButton.Cross.YesNormal,t.D[e]=vt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=rl(e);t.scope=e.scope;var r=[],n=vt.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Yt(vt.internal.getWidth(e)-2)+" "+Yt(vt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Yt(n.x1.x)+" "+Yt(n.x1.y)+" m"),r.push(Yt(n.x2.x)+" "+Yt(n.x2.y)+" l"),r.push(Yt(n.x4.x)+" "+Yt(n.x4.y)+" m"),r.push(Yt(n.x3.x)+" "+Yt(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=rl(e);t.scope=e.scope;var r=vt.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+Yt(vt.internal.getWidth(e))+" "+Yt(vt.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Yt(vt.internal.getWidth(e)-2)+" "+Yt(vt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Yt(r.x1.x)+" "+Yt(r.x1.y)+" m"),n.push(Yt(r.x2.x)+" "+Yt(r.x2.y)+" l"),n.push(Yt(r.x4.x)+" "+Yt(r.x4.y)+" m"),n.push(Yt(r.x3.x)+" "+Yt(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=rl(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Yt(vt.internal.getWidth(e))+" "+Yt(vt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};vt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=vt.internal.getWidth(e),r=vt.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},vt.internal.getWidth=function(e){var t=0;return Fr(e)==="object"&&(t=E6(e.Rect[2])),t},vt.internal.getHeight=function(e){var t=0;return Fr(e)==="object"&&(t=E6(e.Rect[3])),t};var she=Dn.addField=function(e){if(ihe(this,e),!(e instanceof Uo))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Dn.AcroFormChoiceField=t0,Dn.AcroFormListBox=r0,Dn.AcroFormComboBox=n0,Dn.AcroFormEditBox=dy,Dn.AcroFormButton=Ta,Dn.AcroFormPushButton=fy,Dn.AcroFormRadioButton=a0,Dn.AcroFormCheckBox=hy,Dn.AcroFormTextField=lf,Dn.AcroFormPasswordField=py,Dn.AcroFormAppearance=vt,Dn.AcroForm={ChoiceField:t0,ListBox:r0,ComboBox:n0,EditBox:dy,Button:Ta,PushButton:fy,RadioButton:a0,CheckBox:hy,TextField:lf,PasswordField:py,Appearance:vt},At.AcroForm={ChoiceField:t0,ListBox:r0,ComboBox:n0,EditBox:dy,Button:Ta,PushButton:fy,RadioButton:a0,CheckBox:hy,TextField:lf,PasswordField:py,Appearance:vt};At.AcroForm;function iB(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(k,R){var D,q,X,se,Z,K=r;if((R=R||r)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(j(k))for(Z in n)for(X=n[Z],D=0;D<X.length;D+=1){for(se=!0,q=0;q<X[D].length;q+=1)if(X[D][q]!==void 0&&X[D][q]!==k[q]){se=!1;break}if(se===!0){K=Z;break}}else for(Z in n)for(X=n[Z],D=0;D<X.length;D+=1){for(se=!0,q=0;q<X[D].length;q+=1)if(X[D][q]!==void 0&&X[D][q]!==k.charCodeAt(q)){se=!1;break}if(se===!0){K=Z;break}}return K===r&&R!==r&&(K=R),K},i=function k(R){for(var D=this.internal.write,q=this.internal.putStream,X=(0,this.internal.getFilters)();X.indexOf("FlateEncode")!==-1;)X.splice(X.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var se=[];if(se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Image"}),se.push({key:"Width",value:R.width}),se.push({key:"Height",value:R.height}),R.colorSpace===y.INDEXED?se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(se.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===y.DEVICE_CMYK&&se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),se.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&se.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)&&R.transparency.length>0){for(var Z="",K=0,ie=R.transparency.length;K<ie;K++)Z+=R.transparency[K]+" "+R.transparency[K]+" ";se.push({key:"Mask",value:"["+Z+"]"})}R.sMask!==void 0&&se.push({key:"SMask",value:R.objectId+1+" 0 R"});var pe=R.filter!==void 0?["/"+R.filter]:void 0;if(q({data:R.data,additionalKeyValues:se,alreadyAppliedFilters:pe,objectId:R.objectId}),D("endobj"),"sMask"in R&&R.sMask!==void 0){var me,O=(me=R.sMaskBitsPerComponent)!==null&&me!==void 0?me:R.bitsPerComponent,F={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:O,data:R.sMask};"filter"in R&&(F.decodeParameters="/Predictor ".concat(R.predictor," /Colors 1 /BitsPerComponent ").concat(O," /Columns ").concat(R.width),F.filter=R.filter),k.call(this,F)}if(R.colorSpace===y.INDEXED){var B=this.internal.newObject();q({data:E(new Uint8Array(R.palette)),objectId:B}),D("endobj")}},s=function(){var k=this.internal.collections[t+"images"];for(var R in k)i.call(this,k[R])},o=function(){var k,R=this.internal.collections[t+"images"],D=this.internal.write;for(var q in R)D("/I"+(k=R[q]).index,k.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},u=function(){var k=this.internal.collections[t+"images"];return c.call(this),k},d=function(){return Object.keys(this.internal.collections[t+"images"]).length},f=function(k){return typeof e["process"+k.toUpperCase()]=="function"},p=function(k){return Fr(k)==="object"&&k.nodeType===1},h=function(k,R){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var D=""+k.getAttribute("src");if(D.indexOf("data:image/")===0)return uy(unescape(D).split("base64,").pop());var q=e.loadFile(D,!0);if(q!==void 0)return q}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var X;switch(R){case"PNG":X="image/png";break;case"WEBP":X="image/webp";break;default:X="image/jpeg"}return uy(k.toDataURL(X,1).split("base64,").pop())}},v=function(k){var R=this.internal.collections[t+"images"];if(R){for(var D in R)if(k===R[D].alias)return R[D]}},m=function(k,R,D){return k||R||(k=-96,R=-96),k<0&&(k=-1*D.width*72/k/this.internal.scaleFactor),R<0&&(R=-1*D.height*72/R/this.internal.scaleFactor),k===0&&(k=R*D.width/D.height),R===0&&(R=k*D.height/D.width),[k,R]},x=function(k,R,D,q,X,se){var Z=m.call(this,D,q,X),K=this.internal.getCoordinateString,ie=this.internal.getVerticalCoordinateString,pe=u.call(this);if(D=Z[0],q=Z[1],pe[X.index]=X,se){se*=Math.PI/180;var me=Math.cos(se),O=Math.sin(se),F=function(U){return U.toFixed(4)},B=[F(me),F(O),F(-1*O),F(me),0,0,"cm"]}this.internal.write("q"),se?(this.internal.write([1,"0","0",1,K(k),ie(R+q),"cm"].join(" ")),this.internal.write(B.join(" ")),this.internal.write([K(D),"0","0",K(q),"0","0","cm"].join(" "))):this.internal.write([K(D),"0","0",K(q),K(k),ie(R+q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+X.index+" Do"),this.internal.write("Q")},y=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var g=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=e.__addimage__.sHashCode=function(k){var R,D,q=0;if(typeof k=="string")for(D=k.length,R=0;R<D;R++)q=(q<<5)-q+k.charCodeAt(R),q|=0;else if(j(k))for(D=k.byteLength/2,R=0;R<D;R++)q=(q<<5)-q+k[R],q|=0;return q},S=e.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var R=!0;return k.length===0&&(R=!1),k.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(R=!1),R},_=e.__addimage__.extractImageFromDataUrl=function(k){if(k==null||!(k=k.trim()).startsWith("data:"))return null;var R=k.indexOf(",");return R<0?null:k.substring(0,R).trim().endsWith("base64")?k.substring(R+1):null};e.__addimage__.isArrayBuffer=function(k){return k instanceof ArrayBuffer};var j=e.__addimage__.isArrayBufferView=function(k){return k instanceof Int8Array||k instanceof Uint8Array||k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array},A=e.__addimage__.binaryStringToUint8Array=function(k){for(var R=k.length,D=new Uint8Array(R),q=0;q<R;q++)D[q]=k.charCodeAt(q);return D},E=e.__addimage__.arrayBufferToBinaryString=function(k){for(var R="",D=j(k)?k:new Uint8Array(k),q=0;q<D.length;q+=8192)R+=String.fromCharCode.apply(null,D.subarray(q,q+8192));return R};e.addImage=function(){var k,R,D,q,X,se,Z,K,ie;if(typeof arguments[1]=="number"?(R=r,D=arguments[1],q=arguments[2],X=arguments[3],se=arguments[4],Z=arguments[5],K=arguments[6],ie=arguments[7]):(R=arguments[1],D=arguments[2],q=arguments[3],X=arguments[4],se=arguments[5],Z=arguments[6],K=arguments[7],ie=arguments[8]),Fr(k=arguments[0])==="object"&&!p(k)&&"imageData"in k){var pe=k;k=pe.imageData,R=pe.format||R||r,D=pe.x||D||0,q=pe.y||q||0,X=pe.w||pe.width||X,se=pe.h||pe.height||se,Z=pe.alias||Z,K=pe.compression||K,ie=pe.rotation||pe.angle||ie}var me=this.internal.getFilters();if(K===void 0&&me.indexOf("FlateEncode")!==-1&&(K="SLOW"),isNaN(D)||isNaN(q))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var O=T.call(this,k,R,Z,K);return x.call(this,D,q,X,se,O,ie),this};var T=function(k,R,D,q){var X,se,Z;if(typeof k=="string"&&a(k)===r){k=unescape(k);var K=L(k,!1);(K!==""||(K=e.loadFile(k,!0))!==void 0)&&(k=K)}if(p(k)&&(k=h(k,R)),R=a(k,R),!f(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((Z=D)==null||Z.length===0)&&(D=function(ie){return typeof ie=="string"||j(ie)?b(ie):j(ie.data)?b(ie.data):null}(k)),(X=v.call(this,D))||(k instanceof Uint8Array||R==="RGBA"||(se=k,k=A(k)),X=this["process"+R.toUpperCase()](k,d.call(this),D,function(ie){return ie&&typeof ie=="string"&&(ie=ie.toUpperCase()),ie in e.image_compression?ie:g.NONE}(q),se)),!X)throw new Error("An unknown error occurred whilst processing the image.");return X},L=e.__addimage__.convertBase64ToBinaryString=function(k,R){R=typeof R!="boolean"||R;var D,q="";if(typeof k=="string"){var X;D=(X=_(k))!==null&&X!==void 0?X:k;try{q=uy(D)}catch(se){if(R)throw S(D)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return q};e.getImageProperties=function(k){var R,D,q="";if(p(k)&&(k=h(k)),typeof k=="string"&&a(k)===r&&((q=L(k,!1))===""&&(q=e.loadFile(k)||""),k=q),D=a(k),!f(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(k instanceof Uint8Array||(k=A(k)),!(R=this["process"+D.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=D,R}})(At.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};At.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,i,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){n=u[p];var h=this.internal.pdfEscape,v=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var m=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(m.objId),g=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+h(y(n.contents))+")",i+=" /Popup "+x.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+h(y(g))+") >>",m.content=i;var b=m.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+s(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(i+=" /Open true"),i+=" >>",x.content=i,this.internal.write(m.objId,"0 R",x.objId,"0 R");break;case"freetext":a="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var S=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+h(v(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+S+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var _=this.annotations._nameMap[n.options.name];n.options.pageNumber=_.page,n.options.top=_.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+h(v(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var j=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+j+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,i,s){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+i)},options:s,type:"link"})},e.textWithLink=function(r,n,a,i){var s,o,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var d=this.splitTextToSize(r,o).length;s=Math.ceil(u*d)}else o=c,s=u;return this.text(r,n,a,i),a+=.2*u,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,a-u,o,s,i),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(At.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(m){return t[m.charCodeAt(0)]!==void 0},s=e.__arabicParser__.isArabicLetter=function(m){return typeof m=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(m)},o=e.__arabicParser__.isArabicEndLetter=function(m){return s(m)&&i(m)&&t[m.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(m){return s(m)&&a.indexOf(m.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(m){return s(m)&&i(m)&&t[m.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(m){return s(m)&&i(m)&&t[m.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(m){return s(m)&&i(m)&&t[m.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(m){return s(m)&&i(m)&&t[m.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(m){var x=0,y=r,g="",b=0;for(x=0;x<m.length;x+=1)y[m.charCodeAt(x)]!==void 0?(b++,typeof(y=y[m.charCodeAt(x)])=="number"&&(g+=String.fromCharCode(y),y=r,b=0),x===m.length-1&&(y=r,g+=m.charAt(x-(b-1)),x-=b-1,b=0)):(y=r,g+=m.charAt(x-b),x-=b,b=0);return g};e.__arabicParser__.isArabicDiacritic=function(m){return m!==void 0&&n[m.charCodeAt(0)]!==void 0};var p=e.__arabicParser__.getCorrectForm=function(m,x,y){return s(m)?i(m)===!1?-1:!u(m)||!s(x)&&!s(y)||!s(y)&&o(x)||o(m)&&!s(x)||o(m)&&c(x)||o(m)&&o(x)?0:d(m)&&s(x)&&!o(x)&&s(y)&&u(y)?3:o(m)||!s(y)?1:2:-1},h=function(m){var x=0,y=0,g=0,b="",S="",_="",j=(m=m||"").split("\\s+"),A=[];for(x=0;x<j.length;x+=1){for(A.push(""),y=0;y<j[x].length;y+=1)b=j[x][y],S=j[x][y-1],_=j[x][y+1],s(b)?(g=p(b,S,_),A[x]+=g!==-1?String.fromCharCode(t[b.charCodeAt(0)][g]):b):A[x]+=b;A[x]=f(A[x])}return A.join(" ")},v=e.__arabicParser__.processArabic=e.processArabic=function(){var m,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(x)){var g=0;for(y=[],g=0;g<x.length;g+=1)Array.isArray(x[g])?y.push([h(x[g][0]),x[g][1],x[g][2]]):y.push([h(x[g])]);m=y}else m=h(x);return typeof arguments[0]=="string"?m:(arguments[0].text=m,arguments[0])};e.events.push(["preProcessText",v])}(At.API),At.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(At.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(m){c=m}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(m){u=m}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(m){d=m}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(m){f=m}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(m){p=m}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(m){h=m}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(m){v=m}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,h=0,v=0,m=0,x=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(b,S){return b.concat(x.splitTextToSize(S,y))},[])):c=Array.isArray(c)?c:[c];for(var g=0;g<c.length;g++)h<(m=this.getStringUnitWidth(c[g],{font:f})*d)&&(h=m);return h!==0&&(v=c.length),{w:h/=p,h:Math.max((v*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/p,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,p=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,h&&p&&(this.printHeaderRow(c.lineNumber,!0),c.y+=p[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,p){if(n.call(this),!d)throw new Error("No data for PDF table.");var h,v,m,x,y=[],g=[],b=[],S={},_={},j=[],A=[],E=(p=p||{}).autoSize||!1,T=p.printHeaders!==!1,L=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,k=p.margins||Object.assign({width:this.getPageWidth()},t),R=typeof p.padding=="number"?p.padding:3,D=p.headerBackgroundColor||"#c8c8c8",q=p.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=q,this.setFontSize(L),f==null)g=y=Object.keys(d[0]),b=y.map(function(){return"left"});else if(Array.isArray(f)&&Fr(f[0])==="object")for(y=f.map(function(pe){return pe.name}),g=f.map(function(pe){return pe.prompt||pe.name||""}),b=f.map(function(pe){return pe.align||"left"}),h=0;h<f.length;h+=1)_[f[h].name]=.7499990551181103*f[h].width;else Array.isArray(f)&&typeof f[0]=="string"&&(g=y=f,b=y.map(function(){return"left"}));if(E||Array.isArray(f)&&typeof f[0]=="string")for(h=0;h<y.length;h+=1){for(S[x=y[h]]=d.map(function(pe){return pe[x]}),this.setFont(void 0,"bold"),j.push(this.getTextDimensions(g[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=S[x],this.setFont(void 0,"normal"),m=0;m<v.length;m+=1)j.push(this.getTextDimensions(v[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);_[x]=Math.max.apply(null,j)+R+R,j=[]}if(T){var X={};for(h=0;h<y.length;h+=1)X[y[h]]={},X[y[h]].text=g[h],X[y[h]].align=b[h];var se=o.call(this,X,_);A=y.map(function(pe){return new i(c,u,_[pe],se,X[pe].text,void 0,X[pe].align)}),this.setTableHeaderRow(A),this.printHeaderRow(1,!1)}var Z=f.reduce(function(pe,me){return pe[me.name]=me.align,pe},{});for(h=0;h<d.length;h+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:h,data:d[h]},this);var K=o.call(this,d[h],_);for(m=0;m<y.length;m+=1){var ie=d[h][y[m]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:h,col:m,data:ie},this),s.call(this,new i(c,u,_[y[m]],K,ie,h+2,Z[y[m]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var o=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(c).map(function(h){var v=c[h];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,u[h]-d-d)},this).map(function(h){return this.getLineHeightFactor()*h.length*f/p+d+d},this).reduce(function(h,v){return Math.max(h,v)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){d=this.internal.__cell__.tableHeaderRow[h].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,p.push(d)),d.lineNumber=c;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,d),this.setTextColor(v)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}}(At.API);var sB={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},oB=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],gj=iB(oB),lB=[100,200,300,400,500,600,700,800,900],ohe=iB(lB);function q5(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return sB[i=i||"normal"]?i:"normal"}(e.style),n=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(e.weight),a=function(i){return typeof gj[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function T6(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var lhe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},C6={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function k6(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function O6(e){return e.trimLeft()}function che(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function uhe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Ox,P6,L6,fh,Px,R6,I6,D6,H5=["times"];function M6(e,t,r,n,a){var i=4,s=$6;switch(a){case At.API.image_compression.FAST:i=1,s=F6;break;case At.API.image_compression.MEDIUM:i=6,s=B6;break;case At.API.image_compression.SLOW:i=9,s=U6}e=function(c,u,d,f){for(var p,h=c.length/u,v=new Uint8Array(c.length+h),m=[dhe,F6,$6,B6,U6],x=0;x<h;x+=1){var y=x*u,g=c.subarray(y,y+u);if(f)v.set(f(g,d,p),y+x);else{for(var b=m.length,S=[],_=0;_<b;_+=1)S[_]=m[_](g,d,p);var j=hhe(S.concat());v.set(S[j],y+x)}p=g}return v}(e,t,Math.ceil(r*n/8),s);var o=cj(e,{level:i});return At.API.__addimage__.arrayBufferToBinaryString(o)}function dhe(e){var t=Array.apply([],e);return t.unshift(0),t}function F6(e,t){var r=e.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var i=e[a-t]||0;n[a+1]=e[a]-i+256&255}return n}function $6(e,t,r){var n=e.length,a=[];a[0]=2;for(var i=0;i<n;i+=1){var s=r&&r[i]||0;a[i+1]=e[i]-s+256&255}return a}function B6(e,t,r){var n=e.length,a=[];a[0]=3;for(var i=0;i<n;i+=1){var s=e[i-t]||0,o=r&&r[i]||0;a[i+1]=e[i]+256-(s+o>>>1)&255}return a}function U6(e,t,r){var n=e.length,a=[];a[0]=4;for(var i=0;i<n;i+=1){var s=fhe(e[i-t]||0,r&&r[i]||0,r&&r[i-t]||0);a[i+1]=e[i]-s+256&255}return a}function fhe(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),a=Math.abs(e-r),i=Math.abs(e+t-r-r);return n<=a&&n<=i?e:a<=i?t:r}function hhe(e){var t=e.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return t.indexOf(Math.min.apply(null,t))}function W5(e,t,r){var n=t*r,a=Math.floor(n/8),i=16-(n-8*a+r),s=(1<<r)-1;return cB(e,a)>>i&s}function z6(e,t,r,n){var a=r*n,i=Math.floor(a/8),s=16-(a-8*i+n),o=(1<<n)-1,c=(t&o)<<s;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var p=f>>8&255;u.setUint8(d,p)}})(e,i,cB(e,i)&~(o<<s)&65535|c)}function cB(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function phe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,s=1<<1+(7&a);e[t++],e[t++];var o=null,c=null;i&&(o=t,c=s,t+=3*s);var u=!0,d=[],f=0,p=null,h=0,v=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,v=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var m=e[t++];f=e[t++]|e[t++]<<8,p=e[t++],1&m||(p=null),h=m>>2&7,t++;break;case 254:for(;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var x=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,g=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,S=e[t++],_=S>>6&1,j=1<<1+(7&S),A=o,E=c,T=!1;S>>7&&(T=!0,A=t,E=j,t+=3*j);var L=t;for(t++;;){var k;if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}d.push({x,y,width:g,height:b,has_local_palette:T,palette_offset:A,palette_size:E,data_offset:L,data_length:t-L,transparent_index:p,interlaced:!!_,delay:f,disposal:h});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return v},this.frameInfo=function(R){if(R<0||R>=d.length)throw new Error("Frame index out of range.");return d[R]},this.decodeAndBlitFrameBGRA=function(R,D){var q=this.frameInfo(R),X=q.width*q.height,se=new Uint8Array(X);q6(e,q.data_offset,se,X);var Z=q.palette_offset,K=q.transparent_index;K===null&&(K=256);var ie=q.width,pe=r-ie,me=ie,O=4*(q.y*r+q.x),F=4*((q.y+q.height)*r+q.x),B=O,U=4*pe;q.interlaced===!0&&(U+=4*r*7);for(var Y=8,oe=0,ee=se.length;oe<ee;++oe){var te=se[oe];if(me===0&&(me=ie,(B+=U)>=F&&(U=4*pe+4*r*(Y-1),B=O+(ie+pe)*(Y<<1),Y>>=1)),te===K)B+=4;else{var le=e[Z+3*te],Ne=e[Z+3*te+1],ve=e[Z+3*te+2];D[B++]=ve,D[B++]=Ne,D[B++]=le,D[B++]=255}--me}},this.decodeAndBlitFrameRGBA=function(R,D){var q=this.frameInfo(R),X=q.width*q.height,se=new Uint8Array(X);q6(e,q.data_offset,se,X);var Z=q.palette_offset,K=q.transparent_index;K===null&&(K=256);var ie=q.width,pe=r-ie,me=ie,O=4*(q.y*r+q.x),F=4*((q.y+q.height)*r+q.x),B=O,U=4*pe;q.interlaced===!0&&(U+=4*r*7);for(var Y=8,oe=0,ee=se.length;oe<ee;++oe){var te=se[oe];if(me===0&&(me=ie,(B+=U)>=F&&(U=4*pe+4*r*(Y-1),B=O+(ie+pe)*(Y<<1),Y>>=1)),te===K)B+=4;else{var le=e[Z+3*te],Ne=e[Z+3*te+1],ve=e[Z+3*te+2];D[B++]=le,D[B++]=Ne,D[B++]=ve,D[B++]=255}--me}}}function q6(e,t,r,n){for(var a=e[t++],i=1<<a,s=i+1,o=s+1,c=a+1,u=(1<<c)-1,d=0,f=0,p=0,h=e[t++],v=new Int32Array(4096),m=null;;){for(;d<16&&h!==0;)f|=e[t++]<<d,d+=8,h===1?h=e[t++]:--h;if(d<c)break;var x=f&u;if(f>>=c,d-=c,x!==i){if(x===s)break;for(var y=x<o?x:m,g=0,b=y;b>i;)b=v[b]>>8,++g;var S=b;if(p+g+(y!==x?1:0)>n)return void Xr.log("Warning, gif stream longer than expected.");r[p++]=S;var _=p+=g;for(y!==x&&(r[p++]=S),b=y;g--;)b=v[b],r[--_]=255&b,b>>=8;m!==null&&o<4096&&(v[o++]=m<<8|S,o>=u+1&&c<12&&(++c,u=u<<1|1)),m=x}else o=s+1,u=(1<<(c=a+1))-1,m=null}return p!==n&&Xr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function V5(e){var t,r,n,a,i,s=Math.floor,o=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),p=new Array(65535),h=new Array(64),v=new Array(64),m=[],x=0,y=7,g=new Array(64),b=new Array(64),S=new Array(64),_=new Array(256),j=new Array(2048),A=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],X=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function se(O,F){for(var B=0,U=0,Y=new Array,oe=1;oe<=16;oe++){for(var ee=1;ee<=O[oe];ee++)Y[F[U]]=[],Y[F[U]][0]=B,Y[F[U]][1]=oe,U++,B++;B*=2}return Y}function Z(O){for(var F=O[0],B=O[1]-1;B>=0;)F&1<<B&&(x|=1<<y),B--,--y<0&&(x==255?(K(255),K(0)):K(x),y=7,x=0)}function K(O){m.push(O)}function ie(O){K(O>>8&255),K(255&O)}function pe(O,F,B,U,Y){for(var oe,ee=Y[0],te=Y[240],le=function(He,Ze){var nt,dt,ft,ut,qt,Mt,kt,Xt,yt,Gt,St=0;for(yt=0;yt<8;++yt){nt=He[St],dt=He[St+1],ft=He[St+2],ut=He[St+3],qt=He[St+4],Mt=He[St+5],kt=He[St+6];var gn=nt+(Xt=He[St+7]),ur=nt-Xt,Qt=dt+kt,Zt=dt-kt,Jr=ft+Mt,Tt=ft-Mt,Or=ut+qt,Ot=ut-qt,Ht=gn+Or,Qr=gn-Or,nr=Qt+Jr,Ct=Qt-Jr;He[St]=Ht+nr,He[St+4]=Ht-nr;var wr=.707106781*(Ct+Qr);He[St+2]=Qr+wr,He[St+6]=Qr-wr;var Sl=.382683433*((Ht=Ot+Tt)-(Ct=Zt+ur)),Na=.5411961*Ht+Sl,oo=1.306562965*Ct+Sl,Ls=.707106781*(nr=Tt+Zt),Pt=ur+Ls,lo=ur-Ls;He[St+5]=lo+Na,He[St+3]=lo-Na,He[St+1]=Pt+oo,He[St+7]=Pt-oo,St+=8}for(St=0,yt=0;yt<8;++yt){nt=He[St],dt=He[St+8],ft=He[St+16],ut=He[St+24],qt=He[St+32],Mt=He[St+40],kt=He[St+48];var co=nt+(Xt=He[St+56]),ti=nt-Xt,$i=dt+kt,vn=dt-kt,Yn=ft+Mt,W=ft-Mt,de=ut+qt,re=ut-qt,ae=co+de,fe=co-de,ge=$i+Yn,Ee=$i-Yn;He[St]=ae+ge,He[St+32]=ae-ge;var De=.707106781*(Ee+fe);He[St+16]=fe+De,He[St+48]=fe-De;var Te=.382683433*((ae=re+W)-(Ee=vn+ti)),Ce=.5411961*ae+Te,Pe=1.306562965*Ee+Te,Xe=.707106781*(ge=W+vn),tt=ti+Xe,lt=ti-Xe;He[St+40]=lt+Ce,He[St+24]=lt-Ce,He[St+8]=tt+Pe,He[St+56]=tt-Pe,St++}for(yt=0;yt<64;++yt)Gt=He[yt]*Ze[yt],h[yt]=Gt>0?Gt+.5|0:Gt-.5|0;return h}(O,F),Ne=0;Ne<64;++Ne)v[A[Ne]]=le[Ne];var ve=v[0]-B;B=v[0],ve==0?Z(U[0]):(Z(U[p[oe=32767+ve]]),Z(f[oe]));for(var Me=63;Me>0&&v[Me]==0;)Me--;if(Me==0)return Z(ee),B;for(var Ie,Q=1;Q<=Me;){for(var $e=Q;v[Q]==0&&Q<=Me;)++Q;var Re=Q-$e;if(Re>=16){Ie=Re>>4;for(var it=1;it<=Ie;++it)Z(te);Re&=15}oe=32767+v[Q],Z(Y[(Re<<4)+p[oe]]),Z(f[oe]),Q++}return Me!=63&&Z(ee),B}function me(O){O=Math.min(Math.max(O,1),100),i!=O&&(function(F){for(var B=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],U=0;U<64;U++){var Y=s((B[U]*F+50)/100);Y=Math.min(Math.max(Y,1),255),o[A[U]]=Y}for(var oe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ee=0;ee<64;ee++){var te=s((oe[ee]*F+50)/100);te=Math.min(Math.max(te,1),255),c[A[ee]]=te}for(var le=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ne=0,ve=0;ve<8;ve++)for(var Me=0;Me<8;Me++)u[Ne]=1/(o[A[Ne]]*le[ve]*le[Me]*8),d[Ne]=1/(c[A[Ne]]*le[ve]*le[Me]*8),Ne++}(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),i=O)}this.encode=function(O,F){F&&me(F),m=new Array,x=0,y=7,ie(65496),ie(65504),ie(16),K(74),K(70),K(73),K(70),K(0),K(1),K(1),K(0),ie(1),ie(1),K(0),K(0),function(){ie(65499),ie(132),K(0);for(var dt=0;dt<64;dt++)K(o[dt]);K(1);for(var ft=0;ft<64;ft++)K(c[ft])}(),function(dt,ft){ie(65472),ie(17),K(8),ie(ft),ie(dt),K(3),K(1),K(17),K(0),K(2),K(17),K(1),K(3),K(17),K(1)}(O.width,O.height),function(){ie(65476),ie(418),K(0);for(var dt=0;dt<16;dt++)K(E[dt+1]);for(var ft=0;ft<=11;ft++)K(T[ft]);K(16);for(var ut=0;ut<16;ut++)K(L[ut+1]);for(var qt=0;qt<=161;qt++)K(k[qt]);K(1);for(var Mt=0;Mt<16;Mt++)K(R[Mt+1]);for(var kt=0;kt<=11;kt++)K(D[kt]);K(17);for(var Xt=0;Xt<16;Xt++)K(q[Xt+1]);for(var yt=0;yt<=161;yt++)K(X[yt])}(),ie(65498),ie(12),K(3),K(1),K(0),K(2),K(17),K(3),K(17),K(0),K(63),K(0);var B=0,U=0,Y=0;x=0,y=7,this.encode.displayName="_encode_";for(var oe,ee,te,le,Ne,ve,Me,Ie,Q,$e=O.data,Re=O.width,it=O.height,He=4*Re,Ze=0;Ze<it;){for(oe=0;oe<He;){for(Ne=He*Ze+oe,Me=-1,Ie=0,Q=0;Q<64;Q++)ve=Ne+(Ie=Q>>3)*He+(Me=4*(7&Q)),Ze+Ie>=it&&(ve-=He*(Ze+1+Ie-it)),oe+Me>=He&&(ve-=oe+Me-He+4),ee=$e[ve++],te=$e[ve++],le=$e[ve++],g[Q]=(j[ee]+j[te+256|0]+j[le+512|0]>>16)-128,b[Q]=(j[ee+768|0]+j[te+1024|0]+j[le+1280|0]>>16)-128,S[Q]=(j[ee+1280|0]+j[te+1536|0]+j[le+1792|0]>>16)-128;B=pe(g,u,B,t,n),U=pe(b,d,U,r,a),Y=pe(S,d,Y,r,a),oe+=32}Ze+=8}if(y>=0){var nt=[];nt[1]=y+1,nt[0]=(1<<y+1)-1,Z(nt)}return ie(65497),new Uint8Array(m)},e=e||50,function(){for(var O=String.fromCharCode,F=0;F<256;F++)_[F]=O(F)}(),t=se(E,T),r=se(R,D),n=se(L,k),a=se(q,X),function(){for(var O=1,F=2,B=1;B<=15;B++){for(var U=O;U<F;U++)p[32767+U]=B,f[32767+U]=[],f[32767+U][1]=B,f[32767+U][0]=U;for(var Y=-(F-1);Y<=-O;Y++)p[32767+Y]=B,f[32767+Y]=[],f[32767+Y][1]=B,f[32767+Y][0]=F-1+Y;O<<=1,F<<=1}}(),function(){for(var O=0;O<256;O++)j[O]=19595*O,j[O+256|0]=38470*O,j[O+512|0]=7471*O+32768,j[O+768|0]=-11059*O,j[O+1024|0]=-21709*O,j[O+1280|0]=32768*O+8421375,j[O+1536|0]=-27439*O,j[O+1792|0]=-5329*O}(),me(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function bo(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function H6(e){function t(T){if(!T)throw Error("assert :P")}function r(T,L,k){for(var R=0;4>R;R++)if(T[L+R]!=k.charCodeAt(R))return!0;return!1}function n(T,L,k,R,D){for(var q=0;q<D;q++)T[L+q]=k[R+q]}function a(T,L,k,R){for(var D=0;D<R;D++)T[L+D]=k}function i(T){return new Int32Array(T)}function s(T,L){for(var k=[],R=0;R<T;R++)k.push(new L);return k}function o(T,L){var k=[];return function R(D,q,X){for(var se=X[q],Z=0;Z<se&&(D.push(X.length>q+1?[]:new L),!(X.length<q+1));Z++)R(D[Z],q+1,X)}(k,0,T),k}var c=function(){var T=this;function L(w,N){for(var P=1<<N-1>>>0;w&P;)P>>>=1;return P?(w&P-1)+P:w}function k(w,N,P,I,H){t(!(I%P));do w[N+(I-=P)]=H;while(0<I)}function R(w,N,P,I,H){if(t(2328>=H),512>=H)var V=i(512);else if((V=i(H))==null)return 0;return function(G,J,ne,ce,_e,Oe){var ue,Se,Ae=J,Be=1<<ne,ke=i(16),ze=i(16);for(t(_e!=0),t(ce!=null),t(G!=null),t(0<ne),Se=0;Se<_e;++Se){if(15<ce[Se])return 0;++ke[ce[Se]]}if(ke[0]==_e)return 0;for(ze[1]=0,ue=1;15>ue;++ue){if(ke[ue]>1<<ue)return 0;ze[ue+1]=ze[ue]+ke[ue]}for(Se=0;Se<_e;++Se)ue=ce[Se],0<ce[Se]&&(Oe[ze[ue]++]=Se);if(ze[15]==1)return(ce=new D).g=0,ce.value=Oe[0],k(G,Ae,1,Be,ce),Be;var We,Ye=-1,Ke=Be-1,jt=0,gt=1,tr=1,bt=1<<ne;for(Se=0,ue=1,_e=2;ue<=ne;++ue,_e<<=1){if(gt+=tr<<=1,0>(tr-=ke[ue]))return 0;for(;0<ke[ue];--ke[ue])(ce=new D).g=ue,ce.value=Oe[Se++],k(G,Ae+jt,_e,bt,ce),jt=L(jt,ue)}for(ue=ne+1,_e=2;15>=ue;++ue,_e<<=1){if(gt+=tr<<=1,0>(tr-=ke[ue]))return 0;for(;0<ke[ue];--ke[ue]){if(ce=new D,(jt&Ke)!=Ye){for(Ae+=bt,We=1<<(Ye=ue)-ne;15>Ye&&!(0>=(We-=ke[Ye]));)++Ye,We<<=1;Be+=bt=1<<(We=Ye-ne),G[J+(Ye=jt&Ke)].g=We+ne,G[J+Ye].value=Ae-J-Ye}ce.g=ue-ne,ce.value=Oe[Se++],k(G,Ae+(jt>>ne),_e,bt,ce),jt=L(jt,ue)}}return gt!=2*ze[15]-1?0:Be}(w,N,P,I,H,V)}function D(){this.value=this.g=0}function q(){this.value=this.g=0}function X(){this.G=s(5,D),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(pd,q)}function se(w,N,P,I){t(w!=null),t(N!=null),t(2147483648>I),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=N,w.pa=P,w.Jd=N,w.Yc=P+I,w.Zc=4<=I?P+I-4+1:P,ee(w)}function Z(w,N){for(var P=0;0<N--;)P|=le(w,128)<<N;return P}function K(w,N){var P=Z(w,N);return te(w)?-P:P}function ie(w,N,P,I){var H,V=0;for(t(w!=null),t(N!=null),t(4294967288>I),w.Sb=I,w.Ra=0,w.u=0,w.h=0,4<I&&(I=4),H=0;H<I;++H)V+=N[P+H]<<8*H;w.Ra=V,w.bb=I,w.oa=N,w.pa=P}function pe(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Bc-8>>>0,++w.bb,w.u-=8;U(w)&&(w.h=1,w.u=0)}function me(w,N){if(t(0<=N),!w.h&&N<=os){var P=B(w)&ss[N];return w.u+=N,pe(w),P}return w.h=1,w.u=0}function O(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function B(w){return w.Ra>>>(w.u&Bc-1)>>>0}function U(w){return t(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Bc}function Y(w,N){w.u=N,w.h=U(w)}function oe(w){w.u>=Rl&&(t(w.u>=Rl),pe(w))}function ee(w){t(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(t(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function te(w){return Z(w,1)}function le(w,N){var P=w.Ca;0>w.b&&ee(w);var I=w.b,H=P*N>>>8,V=(w.I>>>I>H)+0;for(V?(P-=H,w.I-=H+1<<I>>>0):P=H+1,I=P,H=0;256<=I;)H+=8,I>>=8;return I=7^H+Uc[I],w.b-=I,w.Ca=(P<<I)-1,V}function Ne(w,N,P){w[N+0]=P>>24&255,w[N+1]=P>>16&255,w[N+2]=P>>8&255,w[N+3]=255&P}function ve(w,N){return w[N+0]|w[N+1]<<8}function Me(w,N){return ve(w,N)|w[N+2]<<16}function Ie(w,N){return ve(w,N)|ve(w,N+2)<<16}function Q(w,N){var P=1<<N;return t(w!=null),t(0<N),w.X=i(P),w.X==null?0:(w.Mb=32-N,w.Xa=N,1)}function $e(w,N){t(w!=null),t(N!=null),t(w.Xa==N.Xa),n(N.X,0,w.X,0,1<<N.Xa)}function Re(){this.X=[],this.Xa=this.Mb=0}function it(w,N,P,I){t(P!=null),t(I!=null);var H=P[0],V=I[0];return H==0&&(H=(w*V+N/2)/N),V==0&&(V=(N*H+w/2)/w),0>=H||0>=V?0:(P[0]=H,I[0]=V,1)}function He(w,N){return w+(1<<N)-1>>>N}function Ze(w,N){return((4278255360&w)+(4278255360&N)>>>0&4278255360)+((16711935&w)+(16711935&N)>>>0&16711935)>>>0}function nt(w,N){T[N]=function(P,I,H,V,G,J,ne){var ce;for(ce=0;ce<G;++ce){var _e=T[w](J[ne+ce-1],H,V+ce);J[ne+ce]=Ze(P[I+ce],_e)}}}function dt(){this.ud=this.hd=this.jd=0}function ft(w,N){return((4278124286&(w^N))>>>1)+(w&N)>>>0}function ut(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function qt(w,N){return ut(w+(w-N+.5>>1))}function Mt(w,N,P){return Math.abs(N-P)-Math.abs(w-P)}function kt(w,N,P,I,H,V,G){for(I=V[G-1],P=0;P<H;++P)V[G+P]=I=Ze(w[N+P],I)}function Xt(w,N,P,I,H){var V;for(V=0;V<P;++V){var G=w[N+V],J=G>>8&255,ne=16711935&(ne=(ne=16711935&G)+((J<<16)+J));I[H+V]=(4278255360&G)+ne>>>0}}function yt(w,N){N.jd=255&w,N.hd=w>>8&255,N.ud=w>>16&255}function Gt(w,N,P,I,H,V){var G;for(G=0;G<I;++G){var J=N[P+G],ne=J>>>8,ce=J,_e=255&(_e=(_e=J>>>16)+((w.jd<<24>>24)*(ne<<24>>24)>>>5));ce=255&(ce=(ce+=(w.hd<<24>>24)*(ne<<24>>24)>>>5)+((w.ud<<24>>24)*(_e<<24>>24)>>>5)),H[V+G]=(4278255360&J)+(_e<<16)+ce}}function St(w,N,P,I,H){T[N]=function(V,G,J,ne,ce,_e,Oe,ue,Se){for(ne=Oe;ne<ue;++ne)for(Oe=0;Oe<Se;++Oe)ce[_e++]=H(J[I(V[G++])])},T[w]=function(V,G,J,ne,ce,_e,Oe){var ue=8>>V.b,Se=V.Ea,Ae=V.K[0],Be=V.w;if(8>ue)for(V=(1<<V.b)-1,Be=(1<<ue)-1;G<J;++G){var ke,ze=0;for(ke=0;ke<Se;++ke)ke&V||(ze=I(ne[ce++])),_e[Oe++]=H(Ae[ze&Be]),ze>>=ue}else T["VP8LMapColor"+P](ne,ce,Ae,Be,_e,Oe,G,J,Se)}}function gn(w,N,P,I,H){for(P=N+P;N<P;){var V=w[N++];I[H++]=V>>16&255,I[H++]=V>>8&255,I[H++]=255&V}}function ur(w,N,P,I,H){for(P=N+P;N<P;){var V=w[N++];I[H++]=V>>16&255,I[H++]=V>>8&255,I[H++]=255&V,I[H++]=V>>24&255}}function Qt(w,N,P,I,H){for(P=N+P;N<P;){var V=(G=w[N++])>>16&240|G>>12&15,G=240&G|G>>28&15;I[H++]=V,I[H++]=G}}function Zt(w,N,P,I,H){for(P=N+P;N<P;){var V=(G=w[N++])>>16&248|G>>13&7,G=G>>5&224|G>>3&31;I[H++]=V,I[H++]=G}}function Jr(w,N,P,I,H){for(P=N+P;N<P;){var V=w[N++];I[H++]=255&V,I[H++]=V>>8&255,I[H++]=V>>16&255}}function Tt(w,N,P,I,H,V){if(V==0)for(P=N+P;N<P;)Ne(I,((V=w[N++])[0]>>24|V[1]>>8&65280|V[2]<<8&16711680|V[3]<<24)>>>0),H+=32;else n(I,H,w,N,P)}function Or(w,N){T[N][0]=T[w+"0"],T[N][1]=T[w+"1"],T[N][2]=T[w+"2"],T[N][3]=T[w+"3"],T[N][4]=T[w+"4"],T[N][5]=T[w+"5"],T[N][6]=T[w+"6"],T[N][7]=T[w+"7"],T[N][8]=T[w+"8"],T[N][9]=T[w+"9"],T[N][10]=T[w+"10"],T[N][11]=T[w+"11"],T[N][12]=T[w+"12"],T[N][13]=T[w+"13"],T[N][14]=T[w+"0"],T[N][15]=T[w+"0"]}function Ot(w){return w==y_||w==b_||w==E1||w==w_}function Ht(){this.eb=[],this.size=this.A=this.fb=0}function Qr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function nr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ht,this.f.kb=new Qr,this.sd=null}function Ct(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function wr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Sl(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function Na(w,N){var P=w.T,I=N.ba.f.RGBA,H=I.eb,V=I.fb+w.ka*I.A,G=$s[N.ba.S],J=w.y,ne=w.O,ce=w.f,_e=w.N,Oe=w.ea,ue=w.W,Se=N.cc,Ae=N.dc,Be=N.Mc,ke=N.Nc,ze=w.ka,We=w.ka+w.T,Ye=w.U,Ke=Ye+1>>1;for(ze==0?G(J,ne,null,null,ce,_e,Oe,ue,ce,_e,Oe,ue,H,V,null,null,Ye):(G(N.ec,N.fc,J,ne,Se,Ae,Be,ke,ce,_e,Oe,ue,H,V-I.A,H,V,Ye),++P);ze+2<We;ze+=2)Se=ce,Ae=_e,Be=Oe,ke=ue,_e+=w.Rc,ue+=w.Rc,V+=2*I.A,G(J,(ne+=2*w.fa)-w.fa,J,ne,Se,Ae,Be,ke,ce,_e,Oe,ue,H,V-I.A,H,V,Ye);return ne+=w.fa,w.j+We<w.o?(n(N.ec,N.fc,J,ne,Ye),n(N.cc,N.dc,ce,_e,Ke),n(N.Mc,N.Nc,Oe,ue,Ke),P--):1&We||G(J,ne,null,null,ce,_e,Oe,ue,ce,_e,Oe,ue,H,V+I.A,null,null,Ye),P}function oo(w,N,P){var I=w.F,H=[w.J];if(I!=null){var V=w.U,G=N.ba.S,J=G==A1||G==E1;N=N.ba.f.RGBA;var ne=[0],ce=w.ka;ne[0]=w.T,w.Kb&&(ce==0?--ne[0]:(--ce,H[0]-=w.width),w.j+w.ka+w.T==w.o&&(ne[0]=w.o-w.j-ce));var _e=N.eb;ce=N.fb+ce*N.A,w=iT(I,H[0],w.width,V,ne,_e,ce+(J?0:3),N.A),t(P==ne),w&&Ot(G)&&em(_e,ce,J,V,ne,N.A)}return 0}function Ls(w){var N=w.ma,P=N.ba.S,I=11>P,H=P==N1||P==j1||P==A1||P==x_||P==12||Ot(P);if(N.memory=null,N.Ib=null,N.Jb=null,N.Nd=null,!Vp(N.Oa,w,H?11:12))return 0;if(H&&Ot(P)&&qp(),w.da)alert("todo:use_scaling");else{if(I){if(N.Ib=Sl,w.Kb){if(P=w.U+1>>1,N.memory=i(w.U+2*P),N.memory==null)return 0;N.ec=N.memory,N.fc=0,N.cc=N.ec,N.dc=N.fc+w.U,N.Mc=N.cc,N.Nc=N.dc+P,N.Ib=Na,qp()}}else alert("todo:EmitYUV");H&&(N.Jb=oo,I&&ho())}if(I&&!wT){for(w=0;256>w;++w)qH[w]=89858*(w-128)+C1>>T1,VH[w]=-22014*(w-128)+C1,WH[w]=-45773*(w-128),HH[w]=113618*(w-128)+C1>>T1;for(w=rm;w<N_;++w)N=76283*(w-16)+C1>>T1,GH[w-rm]=Jn(N,255),KH[w-rm]=Jn(N+8>>4,15);wT=1}return 1}function Pt(w){var N=w.ma,P=w.U,I=w.T;return t(!(1&w.ka)),0>=P||0>=I?0:(P=N.Ib(w,N),N.Jb!=null&&N.Jb(w,N,P),N.Dc+=P,1)}function lo(w){w.ma.memory=null}function co(w,N,P,I){return me(w,8)!=47?0:(N[0]=me(w,14)+1,P[0]=me(w,14)+1,I[0]=me(w,1),me(w,3)!=0?0:!w.h)}function ti(w,N){if(4>w)return w+1;var P=w-2>>1;return(2+(1&w)<<P)+me(N,P)+1}function $i(w,N){return 120<N?N-120:1<=(P=((P=CH[N-1])>>4)*w+(8-(15&P)))?P:1;var P}function vn(w,N,P){var I=B(P),H=w[N+=255&I].g-8;return 0<H&&(Y(P,P.u+8),I=B(P),N+=w[N].value,N+=I&(1<<H)-1),Y(P,P.u+w[N].g),w[N].value}function Yn(w,N,P){return P.g+=w.g,P.value+=w.value<<N>>>0,t(8>=P.g),w.g}function W(w,N,P){var I=w.xc;return t((N=I==0?0:w.vc[w.md*(P>>I)+(N>>I)])<w.Wb),w.Ya[N]}function de(w,N,P,I){var H=w.ab,V=w.c*N,G=w.C;N=G+N;var J=P,ne=I;for(I=w.Ta,P=w.Ua;0<H--;){var ce=w.gc[H],_e=G,Oe=N,ue=J,Se=ne,Ae=(ne=I,J=P,ce.Ea);switch(t(_e<Oe),t(Oe<=ce.nc),ce.hc){case 2:Un(ue,Se,(Oe-_e)*Ae,ne,J);break;case 0:var Be=_e,ke=Oe,ze=ne,We=J,Ye=(bt=ce).Ea;Be==0&&(Kp(ue,Se,null,null,1,ze,We),kt(ue,Se+1,0,0,Ye-1,ze,We+1),Se+=Ye,We+=Ye,++Be);for(var Ke=1<<bt.b,jt=Ke-1,gt=He(Ye,bt.b),tr=bt.K,bt=bt.w+(Be>>bt.b)*gt;Be<ke;){var fr=tr,fa=bt,rr=1;for(Zf(ue,Se,ze,We-Ye,1,ze,We);rr<Ye;){var wt=(rr&~jt)+Ke;wt>Ye&&(wt=Ye),(0,Yp[fr[fa++]>>8&15])(ue,Se+ +rr,ze,We+rr-Ye,wt-rr,ze,We+rr),rr=wt}Se+=Ye,We+=Ye,++Be&jt||(bt+=gt)}Oe!=ce.nc&&n(ne,J-Ae,ne,J+(Oe-_e-1)*Ae,Ae);break;case 1:for(Ae=ue,ke=Se,Ye=(ue=ce.Ea)-(We=ue&~(ze=(Se=1<<ce.b)-1)),Be=He(ue,ce.b),Ke=ce.K,ce=ce.w+(_e>>ce.b)*Be;_e<Oe;){for(jt=Ke,gt=ce,tr=new dt,bt=ke+We,fr=ke+ue;ke<bt;)yt(jt[gt++],tr),Jp(tr,Ae,ke,Se,ne,J),ke+=Se,J+=Se;ke<fr&&(yt(jt[gt++],tr),Jp(tr,Ae,ke,Ye,ne,J),ke+=Ye,J+=Ye),++_e&ze||(ce+=Be)}break;case 3:if(ue==ne&&Se==J&&0<ce.b){for(ke=ne,ue=Ae=J+(Oe-_e)*Ae-(We=(Oe-_e)*He(ce.Ea,ce.b)),Se=ne,ze=J,Be=[],We=(Ye=We)-1;0<=We;--We)Be[We]=Se[ze+We];for(We=Ye-1;0<=We;--We)ke[ue+We]=Be[We];b1(ce,_e,Oe,ne,Ae,ne,J)}else b1(ce,_e,Oe,ue,Se,ne,J)}J=I,ne=P}ne!=P&&n(I,P,J,ne,V)}function re(w,N){var P=w.V,I=w.Ba+w.c*w.C,H=N-w.C;if(t(N<=w.l.o),t(16>=H),0<H){var V=w.l,G=w.Ta,J=w.Ua,ne=V.width;if(de(w,H,P,I),H=J=[J],t((P=w.C)<(I=N)),t(V.v<V.va),I>V.o&&(I=V.o),P<V.j){var ce=V.j-P;P=V.j,H[0]+=ce*ne}if(P>=I?P=0:(H[0]+=4*V.v,V.ka=P-V.j,V.U=V.va-V.v,V.T=I-P,P=1),P){if(J=J[0],11>(P=w.ca).S){var _e=P.f.RGBA,Oe=(I=P.S,H=V.U,V=V.T,ce=_e.eb,_e.A),ue=V;for(_e=_e.fb+w.Ma*_e.A;0<ue--;){var Se=G,Ae=J,Be=H,ke=ce,ze=_e;switch(I){case S1:Qp(Se,Ae,Be,ke,ze);break;case N1:zc(Se,Ae,Be,ke,ze);break;case y_:zc(Se,Ae,Be,ke,ze),em(ke,ze,0,Be,1,0);break;case fT:md(Se,Ae,Be,ke,ze);break;case j1:Tt(Se,Ae,Be,ke,ze,1);break;case b_:Tt(Se,Ae,Be,ke,ze,1),em(ke,ze,0,Be,1,0);break;case A1:Tt(Se,Ae,Be,ke,ze,0);break;case E1:Tt(Se,Ae,Be,ke,ze,0),em(ke,ze,1,Be,1,0);break;case x_:qc(Se,Ae,Be,ke,ze);break;case w_:qc(Se,Ae,Be,ke,ze),aT(ke,ze,Be,1,0);break;case hT:Hc(Se,Ae,Be,ke,ze);break;default:t(0)}J+=ne,_e+=Oe}w.Ma+=V}else alert("todo:EmitRescaledRowsYUVA");t(w.Ma<=P.height)}}w.C=N,t(w.C<=w.i)}function ae(w){var N;if(0<w.ua)return 0;for(N=0;N<w.Wb;++N){var P=w.Ya[N].G,I=w.Ya[N].H;if(0<P[1][I[1]+0].g||0<P[2][I[2]+0].g||0<P[3][I[3]+0].g)return 0}return 1}function fe(w,N,P,I,H,V){if(w.Z!=0){var G=w.qd,J=w.rd;for(t(Gc[w.Z]!=null);N<P;++N)Gc[w.Z](G,J,I,H,I,H,V),G=I,J=H,H+=V;w.qd=G,w.rd=J}}function ge(w,N){var P=w.l.ma,I=P.Z==0||P.Z==1?w.l.j:w.C;if(I=w.C<I?I:w.C,t(N<=w.l.o),N>I){var H=w.l.width,V=P.ca,G=P.tb+H*I,J=w.V,ne=w.Ba+w.c*I,ce=w.gc;t(w.ab==1),t(ce[0].hc==3),Yo(ce[0],I,N,J,ne,V,G),fe(P,I,N,V,G,H)}w.C=w.Ma=N}function Ee(w,N,P,I,H,V,G){var J=w.$/I,ne=w.$%I,ce=w.m,_e=w.s,Oe=P+w.$,ue=Oe;H=P+I*H;var Se=P+I*V,Ae=280+_e.ua,Be=w.Pb?J:16777216,ke=0<_e.ua?_e.Wa:null,ze=_e.wc,We=Oe<Se?W(_e,ne,J):null;t(w.C<V),t(Se<=H);var Ye=!1;e:for(;;){for(;Ye||Oe<Se;){var Ke=0;if(J>=Be){var jt=Oe-P;t((Be=w).Pb),Be.wd=Be.m,Be.xd=jt,0<Be.s.ua&&$e(Be.s.Wa,Be.s.vb),Be=J+OH}if(ne&ze||(We=W(_e,ne,J)),t(We!=null),We.Qb&&(N[Oe]=We.qb,Ye=!0),!Ye)if(oe(ce),We.jc){Ke=ce,jt=N;var gt=Oe,tr=We.pd[B(Ke)&pd-1];t(We.jc),256>tr.g?(Y(Ke,Ke.u+tr.g),jt[gt]=tr.value,Ke=0):(Y(Ke,Ke.u+tr.g-256),t(256<=tr.value),Ke=tr.value),Ke==0&&(Ye=!0)}else Ke=vn(We.G[0],We.H[0],ce);if(ce.h)break;if(Ye||256>Ke){if(!Ye)if(We.nd)N[Oe]=(We.qb|Ke<<8)>>>0;else{if(oe(ce),Ye=vn(We.G[1],We.H[1],ce),oe(ce),jt=vn(We.G[2],We.H[2],ce),gt=vn(We.G[3],We.H[3],ce),ce.h)break;N[Oe]=(gt<<24|Ye<<16|Ke<<8|jt)>>>0}if(Ye=!1,++Oe,++ne>=I&&(ne=0,++J,G!=null&&J<=V&&!(J%16)&&G(w,J),ke!=null))for(;ue<Oe;)Ke=N[ue++],ke.X[(506832829*Ke&4294967295)>>>ke.Mb]=Ke}else if(280>Ke){if(Ke=ti(Ke-256,ce),jt=vn(We.G[4],We.H[4],ce),oe(ce),jt=$i(I,jt=ti(jt,ce)),ce.h)break;if(Oe-P<jt||H-Oe<Ke)break e;for(gt=0;gt<Ke;++gt)N[Oe+gt]=N[Oe+gt-jt];for(Oe+=Ke,ne+=Ke;ne>=I;)ne-=I,++J,G!=null&&J<=V&&!(J%16)&&G(w,J);if(t(Oe<=H),ne&ze&&(We=W(_e,ne,J)),ke!=null)for(;ue<Oe;)Ke=N[ue++],ke.X[(506832829*Ke&4294967295)>>>ke.Mb]=Ke}else{if(!(Ke<Ae))break e;for(Ye=Ke-280,t(ke!=null);ue<Oe;)Ke=N[ue++],ke.X[(506832829*Ke&4294967295)>>>ke.Mb]=Ke;Ke=Oe,t(!(Ye>>>(jt=ke).Xa)),N[Ke]=jt.X[Ye],Ye=!0}Ye||t(ce.h==U(ce))}if(w.Pb&&ce.h&&Oe<H)t(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&$e(w.s.vb,w.s.Wa);else{if(ce.h)break e;G!=null&&G(w,J>V?V:J),w.a=0,w.$=Oe-P}return 1}return w.a=3,0}function De(w){t(w!=null),w.vc=null,w.yc=null,w.Ya=null;var N=w.Wa;N!=null&&(N.X=null),w.vb=null,t(w!=null)}function Te(){var w=new Wt;return w==null?null:(w.a=0,w.xb=gT,Or("Predictor","VP8LPredictors"),Or("Predictor","VP8LPredictors_C"),Or("PredictorAdd","VP8LPredictorsAdd"),Or("PredictorAdd","VP8LPredictorsAdd_C"),Un=Xt,Jp=Gt,Qp=gn,zc=ur,qc=Qt,Hc=Zt,md=Jr,T.VP8LMapColor32b=Xo,T.VP8LMapColor8b=Xp,w)}function Ce(w,N,P,I,H){var V=1,G=[w],J=[N],ne=I.m,ce=I.s,_e=null,Oe=0;e:for(;;){if(P)for(;V&&me(ne,1);){var ue=G,Se=J,Ae=I,Be=1,ke=Ae.m,ze=Ae.gc[Ae.ab],We=me(ke,2);if(Ae.Oc&1<<We)V=0;else{switch(Ae.Oc|=1<<We,ze.hc=We,ze.Ea=ue[0],ze.nc=Se[0],ze.K=[null],++Ae.ab,t(4>=Ae.ab),We){case 0:case 1:ze.b=me(ke,3)+2,Be=Ce(He(ze.Ea,ze.b),He(ze.nc,ze.b),0,Ae,ze.K),ze.K=ze.K[0];break;case 3:var Ye,Ke=me(ke,8)+1,jt=16<Ke?0:4<Ke?1:2<Ke?2:3;if(ue[0]=He(ze.Ea,jt),ze.b=jt,Ye=Be=Ce(Ke,1,0,Ae,ze.K)){var gt,tr=Ke,bt=ze,fr=1<<(8>>bt.b),fa=i(fr);if(fa==null)Ye=0;else{var rr=bt.K[0],wt=bt.w;for(fa[0]=bt.K[0][0],gt=1;gt<1*tr;++gt)fa[gt]=Ze(rr[wt+gt],fa[gt-1]);for(;gt<4*fr;++gt)fa[gt]=0;bt.K[0]=null,bt.K[0]=fa,Ye=1}}Be=Ye;break;case 2:break;default:t(0)}V=Be}}if(G=G[0],J=J[0],V&&me(ne,1)&&!(V=1<=(Oe=me(ne,4))&&11>=Oe)){I.a=3;break e}var st;if(st=V)t:{var qn,Jt,pr,ln=I,Ba=G,vi=J,Pn=Oe,ri=P,xi=ln.m,ha=ln.s,xr=[null],Pr=1,Ln=0,Lr=kH[Pn];r:for(;;){if(ri&&me(xi,1)){var Ua=me(xi,3)+2,mo=He(Ba,Ua),Hn=He(vi,Ua),Bi=mo*Hn;if(!Ce(mo,Hn,0,ln,xr))break r;for(xr=xr[0],ha.xc=Ua,qn=0;qn<Bi;++qn){var Kr=xr[qn]>>8&65535;xr[qn]=Kr,Kr>=Pr&&(Pr=Kr+1)}}if(xi.h)break r;for(Jt=0;5>Jt;++Jt){var pa=pT[Jt];!Jt&&0<Pn&&(pa+=1<<Pn),Ln<pa&&(Ln=pa)}var cs=s(Pr*Lr,D),yi=Pr,us=s(yi,X);if(us==null)var ds=null;else t(65536>=yi),ds=us;var Ui=i(Ln);if(ds==null||Ui==null||cs==null){ln.a=1;break r}var fs=cs;for(qn=pr=0;qn<Pr;++qn){var en=ds[qn],hs=en.G,go=en.H,vd=0,Ml=1,za=0;for(Jt=0;5>Jt;++Jt){pa=pT[Jt],hs[Jt]=fs,go[Jt]=pr,!Jt&&0<Pn&&(pa+=1<<Pn);a:{var O1,j_=pa,P1=ln,nm=Ui,JH=fs,QH=pr,A_=0,Kc=P1.m,ZH=me(Kc,1);if(a(nm,0,0,j_),ZH){var eW=me(Kc,1)+1,tW=me(Kc,1),NT=me(Kc,tW==0?1:8);nm[NT]=1,eW==2&&(nm[NT=me(Kc,8)]=1);var L1=1}else{var jT=i(19),AT=me(Kc,4)+4;if(19<AT){P1.a=3;var R1=0;break a}for(O1=0;O1<AT;++O1)jT[TH[O1]]=me(Kc,3);var E_=void 0,am=void 0,ET=P1,rW=jT,I1=j_,TT=nm,T_=0,Xc=ET.m,CT=8,kT=s(128,D);n:for(;R(kT,0,7,rW,19);){if(me(Xc,1)){var nW=2+2*me(Xc,3);if((E_=2+me(Xc,nW))>I1)break n}else E_=I1;for(am=0;am<I1&&E_--;){oe(Xc);var OT=kT[0+(127&B(Xc))];Y(Xc,Xc.u+OT.g);var th=OT.value;if(16>th)TT[am++]=th,th!=0&&(CT=th);else{var aW=th==16,PT=th-16,iW=AH[PT],LT=me(Xc,jH[PT])+iW;if(am+LT>I1)break n;for(var sW=aW?CT:0;0<LT--;)TT[am++]=sW}}T_=1;break n}T_||(ET.a=3),L1=T_}(L1=L1&&!Kc.h)&&(A_=R(JH,QH,8,nm,j_)),L1&&A_!=0?R1=A_:(P1.a=3,R1=0)}if(R1==0)break r;if(Ml&&EH[Jt]==1&&(Ml=fs[pr].g==0),vd+=fs[pr].g,pr+=R1,3>=Jt){var im,C_=Ui[0];for(im=1;im<pa;++im)Ui[im]>C_&&(C_=Ui[im]);za+=C_}}if(en.nd=Ml,en.Qb=0,Ml&&(en.qb=(hs[3][go[3]+0].value<<24|hs[1][go[1]+0].value<<16|hs[2][go[2]+0].value)>>>0,vd==0&&256>hs[0][go[0]+0].value&&(en.Qb=1,en.qb+=hs[0][go[0]+0].value<<8)),en.jc=!en.Qb&&6>za,en.jc){var D1,Fl=en;for(D1=0;D1<pd;++D1){var Yc=D1,Jc=Fl.pd[Yc],M1=Fl.G[0][Fl.H[0]+Yc];256<=M1.value?(Jc.g=M1.g+256,Jc.value=M1.value):(Jc.g=0,Jc.value=0,Yc>>=Yn(M1,8,Jc),Yc>>=Yn(Fl.G[1][Fl.H[1]+Yc],16,Jc),Yc>>=Yn(Fl.G[2][Fl.H[2]+Yc],0,Jc),Yn(Fl.G[3][Fl.H[3]+Yc],24,Jc))}}}ha.vc=xr,ha.Wb=Pr,ha.Ya=ds,ha.yc=cs,st=1;break t}st=0}if(!(V=st)){I.a=3;break e}if(0<Oe){if(ce.ua=1<<Oe,!Q(ce.Wa,Oe)){I.a=1,V=0;break e}}else ce.ua=0;var k_=I,RT=G,oW=J,O_=k_.s,P_=O_.xc;if(k_.c=RT,k_.i=oW,O_.md=He(RT,P_),O_.wc=P_==0?-1:(1<<P_)-1,P){I.xb=FH;break e}if((_e=i(G*J))==null){I.a=1,V=0;break e}V=(V=Ee(I,_e,0,G,J,J,null))&&!ne.h;break e}return V?(H!=null?H[0]=_e:(t(_e==null),t(P)),I.$=0,P||De(ce)):De(ce),V}function Pe(w,N){var P=w.c*w.i,I=P+N+16*N;return t(w.c<=N),w.V=i(I),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+P+N,1)}function Xe(w,N){var P=w.C,I=N-P,H=w.V,V=w.Ba+w.c*P;for(t(N<=w.l.o);0<I;){var G=16<I?16:I,J=w.l.ma,ne=w.l.width,ce=ne*G,_e=J.ca,Oe=J.tb+ne*P,ue=w.Ta,Se=w.Ua;de(w,G,H,V),sT(ue,Se,_e,Oe,ce),fe(J,P,P+G,_e,Oe,ne),I-=G,H+=G*w.c,P+=G}t(P==N),w.C=w.Ma=N}function tt(){this.ub=this.yd=this.td=this.Rb=0}function lt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Qe(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function ot(){this.Yb=function(){var w=[];return function N(P,I,H){for(var V=H[I],G=0;G<V&&(P.push(H.length>I+1?[]:0),!(H.length<I+1));G++)N(P[G],I+1,H)}(w,0,[3,11]),w}()}function Ft(){this.jb=i(3),this.Wc=o([4,8],ot),this.Xc=o([4,17],ot)}function Hr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function dr(){this.ld=this.La=this.dd=this.tc=0}function On(){this.Na=this.la=0}function Wo(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function uo(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Vo(){this.uc=this.M=this.Nb=0,this.wa=Array(new dr),this.Y=0,this.ya=Array(new uo),this.aa=0,this.l=new Vf}function Rs(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Dc(){this.cb=this.a=0,this.sc="",this.m=new O,this.Od=new tt,this.Kc=new lt,this.ed=new Hr,this.Qa=new Qe,this.Ic=this.$c=this.Aa=0,this.D=new Vo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,O),this.ia=0,this.pb=s(4,Wo),this.Pa=new Ft,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Rs),this.Hd=0,this.rb=Array(new On),this.sb=0,this.wa=Array(new dr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new uo),this.L=this.aa=0,this.gd=o([4,2],dr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Jn(w,N){return 0>w?0:w>N?N:w}function Vf(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function r_(){var w=new Dc;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,tm||(tm=Gf)),w}function Qn(w,N,P){return w.a==0&&(w.a=N,w.sc=P,w.cb=0),0}function l1(w,N,P){return 3<=P&&w[N+0]==157&&w[N+1]==1&&w[N+2]==42}function Go(w,N){if(w==null)return 0;if(w.a=0,w.sc="OK",N==null)return Qn(w,2,"null VP8Io passed to VP8GetHeaders()");var P=N.data,I=N.w,H=N.ha;if(4>H)return Qn(w,7,"Truncated header.");var V=P[I+0]|P[I+1]<<8|P[I+2]<<16,G=w.Od;if(G.Rb=!(1&V),G.td=V>>1&7,G.yd=V>>4&1,G.ub=V>>5,3<G.td)return Qn(w,3,"Incorrect keyframe parameters.");if(!G.yd)return Qn(w,4,"Frame not displayable.");I+=3,H-=3;var J=w.Kc;if(G.Rb){if(7>H)return Qn(w,7,"cannot parse picture header");if(!l1(P,I,H))return Qn(w,3,"Bad code word");J.c=16383&(P[I+4]<<8|P[I+3]),J.Td=P[I+4]>>6,J.i=16383&(P[I+6]<<8|P[I+5]),J.Ud=P[I+6]>>6,I+=7,H-=7,w.za=J.c+15>>4,w.Ub=J.i+15>>4,N.width=J.c,N.height=J.i,N.Da=0,N.j=0,N.v=0,N.va=N.width,N.o=N.height,N.da=0,N.ib=N.width,N.hb=N.height,N.U=N.width,N.T=N.height,a((V=w.Pa).jb,0,255,V.jb.length),t((V=w.Qa)!=null),V.Cb=0,V.Bb=0,V.Fb=1,a(V.Zb,0,0,V.Zb.length),a(V.Lb,0,0,V.Lb)}if(G.ub>H)return Qn(w,7,"bad partition length");se(V=w.m,P,I,G.ub),I+=G.ub,H-=G.ub,G.Rb&&(J.Ld=te(V),J.Kd=te(V)),J=w.Qa;var ne,ce=w.Pa;if(t(V!=null),t(J!=null),J.Cb=te(V),J.Cb){if(J.Bb=te(V),te(V)){for(J.Fb=te(V),ne=0;4>ne;++ne)J.Zb[ne]=te(V)?K(V,7):0;for(ne=0;4>ne;++ne)J.Lb[ne]=te(V)?K(V,6):0}if(J.Bb)for(ne=0;3>ne;++ne)ce.jb[ne]=te(V)?Z(V,8):255}else J.Bb=0;if(V.Ka)return Qn(w,3,"cannot parse segment header");if((J=w.ed).zd=te(V),J.Tb=Z(V,6),J.wb=Z(V,3),J.Pc=te(V),J.Pc&&te(V)){for(ce=0;4>ce;++ce)te(V)&&(J.vd[ce]=K(V,6));for(ce=0;4>ce;++ce)te(V)&&(J.od[ce]=K(V,6))}if(w.L=J.Tb==0?0:J.zd?1:2,V.Ka)return Qn(w,3,"cannot parse filter header");var _e=H;if(H=ne=I,I=ne+_e,J=_e,w.Xb=(1<<Z(w.m,2))-1,_e<3*(ce=w.Xb))P=7;else{for(ne+=3*ce,J-=3*ce,_e=0;_e<ce;++_e){var Oe=P[H+0]|P[H+1]<<8|P[H+2]<<16;Oe>J&&(Oe=J),se(w.Jc[+_e],P,ne,Oe),ne+=Oe,J-=Oe,H+=3}se(w.Jc[+ce],P,ne,J),P=ne<I?0:5}if(P!=0)return Qn(w,P,"cannot parse partitions");for(P=Z(ne=w.m,7),H=te(ne)?K(ne,4):0,I=te(ne)?K(ne,4):0,J=te(ne)?K(ne,4):0,ce=te(ne)?K(ne,4):0,ne=te(ne)?K(ne,4):0,_e=w.Qa,Oe=0;4>Oe;++Oe){if(_e.Cb){var ue=_e.Zb[Oe];_e.Fb||(ue+=P)}else{if(0<Oe){w.pb[Oe]=w.pb[0];continue}ue=P}var Se=w.pb[Oe];Se.Sc[0]=__[Jn(ue+H,127)],Se.Sc[1]=S_[Jn(ue+0,127)],Se.Eb[0]=2*__[Jn(ue+I,127)],Se.Eb[1]=101581*S_[Jn(ue+J,127)]>>16,8>Se.Eb[1]&&(Se.Eb[1]=8),Se.Qc[0]=__[Jn(ue+ce,117)],Se.Qc[1]=S_[Jn(ue+ne,127)],Se.lc=ue+ne}if(!G.Rb)return Qn(w,4,"Not a key frame.");for(te(V),G=w.Pa,P=0;4>P;++P){for(H=0;8>H;++H)for(I=0;3>I;++I)for(J=0;11>J;++J)ce=le(V,DH[P][H][I][J])?Z(V,8):RH[P][H][I][J],G.Wc[P][H].Yb[I][J]=ce;for(H=0;17>H;++H)G.Xc[P][H]=G.Wc[P][MH[H]]}return w.kc=te(V),w.kc&&(w.Bd=Z(V,8)),w.cb=1}function Gf(w,N,P,I,H,V,G){var J=N[H].Yb[P];for(P=0;16>H;++H){if(!le(w,J[P+0]))return H;for(;!le(w,J[P+1]);)if(J=N[++H].Yb[0],P=0,H==16)return 16;var ne=N[H+1].Yb;if(le(w,J[P+2])){var ce=w,_e=0;if(le(ce,(ue=J)[(Oe=P)+3]))if(le(ce,ue[Oe+6])){for(J=0,Oe=2*(_e=le(ce,ue[Oe+8]))+(ue=le(ce,ue[Oe+9+_e])),_e=0,ue=PH[Oe];ue[J];++J)_e+=_e+le(ce,ue[J]);_e+=3+(8<<Oe)}else le(ce,ue[Oe+7])?(_e=7+2*le(ce,165),_e+=le(ce,145)):_e=5+le(ce,159);else _e=le(ce,ue[Oe+4])?3+le(ce,ue[Oe+5]):2;J=ne[2]}else _e=1,J=ne[1];ne=G+LH[H],0>(ce=w).b&&ee(ce);var Oe,ue=ce.b,Se=(Oe=ce.Ca>>1)-(ce.I>>ue)>>31;--ce.b,ce.Ca+=Se,ce.Ca|=1,ce.I-=(Oe+1&Se)<<ue,V[ne]=((_e^Se)-Se)*I[(0<H)+0]}return 16}function c1(w){var N=w.rb[w.sb-1];N.la=0,N.Na=0,a(w.zc,0,0,w.zc.length),w.ja=0}function Is(w,N,P,I,H){H=w[N+P+32*I]+(H>>3),w[N+P+32*I]=-256&H?0>H?0:255:H}function ca(w,N,P,I,H,V){Is(w,N,0,P,I+H),Is(w,N,1,P,I+V),Is(w,N,2,P,I-V),Is(w,N,3,P,I-H)}function Nl(w){return(20091*w>>16)+w}function u1(w,N,P,I){var H,V=0,G=i(16);for(H=0;4>H;++H){var J=w[N+0]+w[N+8],ne=w[N+0]-w[N+8],ce=(35468*w[N+4]>>16)-Nl(w[N+12]),_e=Nl(w[N+4])+(35468*w[N+12]>>16);G[V+0]=J+_e,G[V+1]=ne+ce,G[V+2]=ne-ce,G[V+3]=J-_e,V+=4,N++}for(H=V=0;4>H;++H)J=(w=G[V+0]+4)+G[V+8],ne=w-G[V+8],ce=(35468*G[V+4]>>16)-Nl(G[V+12]),Is(P,I,0,0,J+(_e=Nl(G[V+4])+(35468*G[V+12]>>16))),Is(P,I,1,0,ne+ce),Is(P,I,2,0,ne-ce),Is(P,I,3,0,J-_e),V++,I+=32}function n_(w,N,P,I){var H=w[N+0]+4,V=35468*w[N+4]>>16,G=Nl(w[N+4]),J=35468*w[N+1]>>16;ca(P,I,0,H+G,w=Nl(w[N+1]),J),ca(P,I,1,H+V,w,J),ca(P,I,2,H-V,w,J),ca(P,I,3,H-G,w,J)}function a_(w,N,P,I,H){u1(w,N,P,I),H&&u1(w,N+16,P,I+4)}function Ko(w,N,P,I){gd(w,N+0,P,I,1),gd(w,N+32,P,I+128,1)}function d1(w,N,P,I){var H;for(w=w[N+0]+4,H=0;4>H;++H)for(N=0;4>N;++N)Is(P,I,N,H,w)}function f1(w,N,P,I){w[N+0]&&Er(w,N+0,P,I),w[N+16]&&Er(w,N+16,P,I+4),w[N+32]&&Er(w,N+32,P,I+128),w[N+48]&&Er(w,N+48,P,I+128+4)}function Kf(w,N,P,I){var H,V=i(16);for(H=0;4>H;++H){var G=w[N+0+H]+w[N+12+H],J=w[N+4+H]+w[N+8+H],ne=w[N+4+H]-w[N+8+H],ce=w[N+0+H]-w[N+12+H];V[0+H]=G+J,V[8+H]=G-J,V[4+H]=ce+ne,V[12+H]=ce-ne}for(H=0;4>H;++H)G=(w=V[0+4*H]+3)+V[3+4*H],J=V[1+4*H]+V[2+4*H],ne=V[1+4*H]-V[2+4*H],ce=w-V[3+4*H],P[I+0]=G+J>>3,P[I+16]=ce+ne>>3,P[I+32]=G-J>>3,P[I+48]=ce-ne>>3,I+=64}function ad(w,N,P){var I,H=N-32,V=ls,G=255-w[H-1];for(I=0;I<P;++I){var J,ne=V,ce=G+w[N-1];for(J=0;J<P;++J)w[N+J]=ne[ce+w[H+J]];N+=32}}function i_(w,N){ad(w,N,4)}function s_(w,N){ad(w,N,8)}function o_(w,N){ad(w,N,16)}function Ip(w,N){var P;for(P=0;16>P;++P)n(w,N+32*P,w,N-32,16)}function h1(w,N){var P;for(P=16;0<P;--P)a(w,N,w[N-1],16),N+=32}function fo(w,N,P){var I;for(I=0;16>I;++I)a(N,P+32*I,w,16)}function l_(w,N){var P,I=16;for(P=0;16>P;++P)I+=w[N-1+32*P]+w[N+P-32];fo(I>>5,w,N)}function id(w,N){var P,I=8;for(P=0;16>P;++P)I+=w[N-1+32*P];fo(I>>4,w,N)}function Dp(w,N){var P,I=8;for(P=0;16>P;++P)I+=w[N+P-32];fo(I>>4,w,N)}function c_(w,N){fo(128,w,N)}function Kt(w,N,P){return w+2*N+P+2>>2}function u_(w,N){var P,I=N-32;for(I=new Uint8Array([Kt(w[I-1],w[I+0],w[I+1]),Kt(w[I+0],w[I+1],w[I+2]),Kt(w[I+1],w[I+2],w[I+3]),Kt(w[I+2],w[I+3],w[I+4])]),P=0;4>P;++P)n(w,N+32*P,I,0,I.length)}function d_(w,N){var P=w[N-1],I=w[N-1+32],H=w[N-1+64],V=w[N-1+96];Ne(w,N+0,16843009*Kt(w[N-1-32],P,I)),Ne(w,N+32,16843009*Kt(P,I,H)),Ne(w,N+64,16843009*Kt(I,H,V)),Ne(w,N+96,16843009*Kt(H,V,V))}function f_(w,N){var P,I=4;for(P=0;4>P;++P)I+=w[N+P-32]+w[N-1+32*P];for(I>>=3,P=0;4>P;++P)a(w,N+32*P,I,4)}function jl(w,N){var P=w[N-1+0],I=w[N-1+32],H=w[N-1+64],V=w[N-1-32],G=w[N+0-32],J=w[N+1-32],ne=w[N+2-32],ce=w[N+3-32];w[N+0+96]=Kt(I,H,w[N-1+96]),w[N+1+96]=w[N+0+64]=Kt(P,I,H),w[N+2+96]=w[N+1+64]=w[N+0+32]=Kt(V,P,I),w[N+3+96]=w[N+2+64]=w[N+1+32]=w[N+0+0]=Kt(G,V,P),w[N+3+64]=w[N+2+32]=w[N+1+0]=Kt(J,G,V),w[N+3+32]=w[N+2+0]=Kt(ne,J,G),w[N+3+0]=Kt(ce,ne,J)}function Al(w,N){var P=w[N+1-32],I=w[N+2-32],H=w[N+3-32],V=w[N+4-32],G=w[N+5-32],J=w[N+6-32],ne=w[N+7-32];w[N+0+0]=Kt(w[N+0-32],P,I),w[N+1+0]=w[N+0+32]=Kt(P,I,H),w[N+2+0]=w[N+1+32]=w[N+0+64]=Kt(I,H,V),w[N+3+0]=w[N+2+32]=w[N+1+64]=w[N+0+96]=Kt(H,V,G),w[N+3+32]=w[N+2+64]=w[N+1+96]=Kt(V,G,J),w[N+3+64]=w[N+2+96]=Kt(G,J,ne),w[N+3+96]=Kt(J,ne,ne)}function h_(w,N){var P=w[N-1+0],I=w[N-1+32],H=w[N-1+64],V=w[N-1-32],G=w[N+0-32],J=w[N+1-32],ne=w[N+2-32],ce=w[N+3-32];w[N+0+0]=w[N+1+64]=V+G+1>>1,w[N+1+0]=w[N+2+64]=G+J+1>>1,w[N+2+0]=w[N+3+64]=J+ne+1>>1,w[N+3+0]=ne+ce+1>>1,w[N+0+96]=Kt(H,I,P),w[N+0+64]=Kt(I,P,V),w[N+0+32]=w[N+1+96]=Kt(P,V,G),w[N+1+32]=w[N+2+96]=Kt(V,G,J),w[N+2+32]=w[N+3+96]=Kt(G,J,ne),w[N+3+32]=Kt(J,ne,ce)}function p_(w,N){var P=w[N+0-32],I=w[N+1-32],H=w[N+2-32],V=w[N+3-32],G=w[N+4-32],J=w[N+5-32],ne=w[N+6-32],ce=w[N+7-32];w[N+0+0]=P+I+1>>1,w[N+1+0]=w[N+0+64]=I+H+1>>1,w[N+2+0]=w[N+1+64]=H+V+1>>1,w[N+3+0]=w[N+2+64]=V+G+1>>1,w[N+0+32]=Kt(P,I,H),w[N+1+32]=w[N+0+96]=Kt(I,H,V),w[N+2+32]=w[N+1+96]=Kt(H,V,G),w[N+3+32]=w[N+2+96]=Kt(V,G,J),w[N+3+64]=Kt(G,J,ne),w[N+3+96]=Kt(J,ne,ce)}function Xf(w,N){var P=w[N-1+0],I=w[N-1+32],H=w[N-1+64],V=w[N-1+96];w[N+0+0]=P+I+1>>1,w[N+2+0]=w[N+0+32]=I+H+1>>1,w[N+2+32]=w[N+0+64]=H+V+1>>1,w[N+1+0]=Kt(P,I,H),w[N+3+0]=w[N+1+32]=Kt(I,H,V),w[N+3+32]=w[N+1+64]=Kt(H,V,V),w[N+3+64]=w[N+2+64]=w[N+0+96]=w[N+1+96]=w[N+2+96]=w[N+3+96]=V}function Mp(w,N){var P=w[N-1+0],I=w[N-1+32],H=w[N-1+64],V=w[N-1+96],G=w[N-1-32],J=w[N+0-32],ne=w[N+1-32],ce=w[N+2-32];w[N+0+0]=w[N+2+32]=P+G+1>>1,w[N+0+32]=w[N+2+64]=I+P+1>>1,w[N+0+64]=w[N+2+96]=H+I+1>>1,w[N+0+96]=V+H+1>>1,w[N+3+0]=Kt(J,ne,ce),w[N+2+0]=Kt(G,J,ne),w[N+1+0]=w[N+3+32]=Kt(P,G,J),w[N+1+32]=w[N+3+64]=Kt(I,P,G),w[N+1+64]=w[N+3+96]=Kt(H,I,P),w[N+1+96]=Kt(V,H,I)}function sd(w,N){var P;for(P=0;8>P;++P)n(w,N+32*P,w,N-32,8)}function m_(w,N){var P;for(P=0;8>P;++P)a(w,N,w[N-1],8),N+=32}function El(w,N,P){var I;for(I=0;8>I;++I)a(N,P+32*I,w,8)}function g_(w,N){var P,I=8;for(P=0;8>P;++P)I+=w[N+P-32]+w[N-1+32*P];El(I>>4,w,N)}function Fp(w,N){var P,I=4;for(P=0;8>P;++P)I+=w[N+P-32];El(I>>3,w,N)}function $p(w,N){var P,I=4;for(P=0;8>P;++P)I+=w[N-1+32*P];El(I>>3,w,N)}function p1(w,N){El(128,w,N)}function Tl(w,N,P){var I=w[N-P],H=w[N+0],V=3*(H-I)+v_[1020+w[N-2*P]-w[N+P]],G=_1[112+(V+4>>3)];w[N-P]=ls[255+I+_1[112+(V+3>>3)]],w[N+0]=ls[255+H-G]}function Bp(w,N,P,I){var H=w[N+0],V=w[N+P];return Fs[255+w[N-2*P]-w[N-P]]>I||Fs[255+V-H]>I}function Yf(w,N,P,I){return 4*Fs[255+w[N-P]-w[N+0]]+Fs[255+w[N-2*P]-w[N+P]]<=I}function Up(w,N,P,I,H){var V=w[N-3*P],G=w[N-2*P],J=w[N-P],ne=w[N+0],ce=w[N+P],_e=w[N+2*P],Oe=w[N+3*P];return 4*Fs[255+J-ne]+Fs[255+G-ce]>I?0:Fs[255+w[N-4*P]-V]<=H&&Fs[255+V-G]<=H&&Fs[255+G-J]<=H&&Fs[255+Oe-_e]<=H&&Fs[255+_e-ce]<=H&&Fs[255+ce-ne]<=H}function od(w,N,P,I){var H=2*I+1;for(I=0;16>I;++I)Yf(w,N+I,P,H)&&Tl(w,N+I,P)}function zp(w,N,P,I){var H=2*I+1;for(I=0;16>I;++I)Yf(w,N+I*P,1,H)&&Tl(w,N+I*P,1)}function m1(w,N,P,I){var H;for(H=3;0<H;--H)od(w,N+=4*P,P,I)}function g1(w,N,P,I){var H;for(H=3;0<H;--H)zp(w,N+=4,P,I)}function Cl(w,N,P,I,H,V,G,J){for(V=2*V+1;0<H--;){if(Up(w,N,P,V,G))if(Bp(w,N,P,J))Tl(w,N,P);else{var ne=w,ce=N,_e=P,Oe=ne[ce-2*_e],ue=ne[ce-_e],Se=ne[ce+0],Ae=ne[ce+_e],Be=ne[ce+2*_e],ke=27*(We=v_[1020+3*(Se-ue)+v_[1020+Oe-Ae]])+63>>7,ze=18*We+63>>7,We=9*We+63>>7;ne[ce-3*_e]=ls[255+ne[ce-3*_e]+We],ne[ce-2*_e]=ls[255+Oe+ze],ne[ce-_e]=ls[255+ue+ke],ne[ce+0]=ls[255+Se-ke],ne[ce+_e]=ls[255+Ae-ze],ne[ce+2*_e]=ls[255+Be-We]}N+=I}}function kl(w,N,P,I,H,V,G,J){for(V=2*V+1;0<H--;){if(Up(w,N,P,V,G))if(Bp(w,N,P,J))Tl(w,N,P);else{var ne=w,ce=N,_e=P,Oe=ne[ce-_e],ue=ne[ce+0],Se=ne[ce+_e],Ae=_1[112+(4+(Be=3*(ue-Oe))>>3)],Be=_1[112+(Be+3>>3)],ke=Ae+1>>1;ne[ce-2*_e]=ls[255+ne[ce-2*_e]+ke],ne[ce-_e]=ls[255+Oe+Be],ne[ce+0]=ls[255+ue-Ae],ne[ce+_e]=ls[255+Se-ke]}N+=I}}function v1(w,N,P,I,H,V){Cl(w,N,P,1,16,I,H,V)}function ld(w,N,P,I,H,V){Cl(w,N,1,P,16,I,H,V)}function x1(w,N,P,I,H,V){var G;for(G=3;0<G;--G)kl(w,N+=4*P,P,1,16,I,H,V)}function C(w,N,P,I,H,V){var G;for(G=3;0<G;--G)kl(w,N+=4,1,P,16,I,H,V)}function z(w,N,P,I,H,V,G,J){Cl(w,N,H,1,8,V,G,J),Cl(P,I,H,1,8,V,G,J)}function he(w,N,P,I,H,V,G,J){Cl(w,N,1,H,8,V,G,J),Cl(P,I,1,H,8,V,G,J)}function be(w,N,P,I,H,V,G,J){kl(w,N+4*H,H,1,8,V,G,J),kl(P,I+4*H,H,1,8,V,G,J)}function je(w,N,P,I,H,V,G,J){kl(w,N+4,1,H,8,V,G,J),kl(P,I+4,1,H,8,V,G,J)}function qe(){this.ba=new nr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new wr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ge(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function xt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Nt(){this.ua=0,this.Wa=new Re,this.vb=new Re,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new X,this.yc=new D}function Wt(){this.xb=this.a=0,this.l=new Vf,this.ca=new nr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Nt,this.ab=0,this.gc=s(4,xt),this.Oc=0}function er(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Vf,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function vr(w,N,P,I,H,V,G){for(w=w==null?0:w[N+0],N=0;N<G;++N)H[V+N]=w+P[I+N]&255,w=H[V+N]}function Sn(w,N,P,I,H,V,G){var J;if(w==null)vr(null,null,P,I,H,V,G);else for(J=0;J<G;++J)H[V+J]=w[N+J]+P[I+J]&255}function Zn(w,N,P,I,H,V,G){if(w==null)vr(null,null,P,I,H,V,G);else{var J,ne=w[N+0],ce=ne,_e=ne;for(J=0;J<G;++J)ce=_e+(ne=w[N+J])-ce,_e=P[I+J]+(-256&ce?0>ce?0:255:ce)&255,ce=ne,H[V+J]=_e}}function Zr(w,N,P,I){var H=N.width,V=N.o;if(t(w!=null&&N!=null),0>P||0>=I||P+I>V)return null;if(!w.Cc){if(w.ga==null){var G;if(w.ga=new er,(G=w.ga==null)||(G=N.width*N.o,t(w.Gb.length==0),w.Gb=i(G),w.Uc=0,w.Gb==null?G=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,G=1),G=!G),!G){G=w.ga;var J=w.Fa,ne=w.P,ce=w.qc,_e=w.mb,Oe=w.nb,ue=ne+1,Se=ce-1,Ae=G.l;if(t(J!=null&&_e!=null&&N!=null),Gc[0]=null,Gc[1]=vr,Gc[2]=Sn,Gc[3]=Zn,G.ca=_e,G.tb=Oe,G.c=N.width,G.i=N.height,t(0<G.c&&0<G.i),1>=ce)N=0;else if(G.$a=3&J[ne+0],G.Z=J[ne+0]>>2&3,G.Lc=J[ne+0]>>4&3,ne=J[ne+0]>>6&3,0>G.$a||1<G.$a||4<=G.Z||1<G.Lc||ne)N=0;else if(Ae.put=Pt,Ae.ac=Ls,Ae.bc=lo,Ae.ma=G,Ae.width=N.width,Ae.height=N.height,Ae.Da=N.Da,Ae.v=N.v,Ae.va=N.va,Ae.j=N.j,Ae.o=N.o,G.$a)e:{t(G.$a==1),N=Te();t:for(;;){if(N==null){N=0;break e}if(t(G!=null),G.mc=N,N.c=G.c,N.i=G.i,N.l=G.l,N.l.ma=G,N.l.width=G.c,N.l.height=G.i,N.a=0,ie(N.m,J,ue,Se),!Ce(G.c,G.i,1,N,null)||(N.ab==1&&N.gc[0].hc==3&&ae(N.s)?(G.ic=1,J=N.c*N.i,N.Ta=null,N.Ua=0,N.V=i(J),N.Ba=0,N.V==null?(N.a=1,N=0):N=1):(G.ic=0,N=Pe(N,G.c)),!N))break t;N=1;break e}G.mc=null,N=0}else N=Se>=G.c*G.i;G=!N}if(G)return null;w.ga.Lc!=1?w.Ga=0:I=V-P}t(w.ga!=null),t(P+I<=V);e:{if(N=(J=w.ga).c,V=J.l.o,J.$a==0){if(ue=w.rc,Se=w.Vc,Ae=w.Fa,ne=w.P+1+P*N,ce=w.mb,_e=w.nb+P*N,t(ne<=w.P+w.qc),J.Z!=0)for(t(Gc[J.Z]!=null),G=0;G<I;++G)Gc[J.Z](ue,Se,Ae,ne,ce,_e,N),ue=ce,Se=_e,_e+=N,ne+=N;else for(G=0;G<I;++G)n(ce,_e,Ae,ne,N),ue=ce,Se=_e,_e+=N,ne+=N;w.rc=ue,w.Vc=Se}else{if(t(J.mc!=null),N=P+I,t((G=J.mc)!=null),t(N<=G.i),G.C>=N)N=1;else if(J.ic||ho(),J.ic){J=G.V,ue=G.Ba,Se=G.c;var Be=G.i,ke=(Ae=1,ne=G.$/Se,ce=G.$%Se,_e=G.m,Oe=G.s,G.$),ze=Se*Be,We=Se*N,Ye=Oe.wc,Ke=ke<We?W(Oe,ce,ne):null;t(ke<=ze),t(N<=Be),t(ae(Oe));t:for(;;){for(;!_e.h&&ke<We;){if(ce&Ye||(Ke=W(Oe,ce,ne)),t(Ke!=null),oe(_e),256>(Be=vn(Ke.G[0],Ke.H[0],_e)))J[ue+ke]=Be,++ke,++ce>=Se&&(ce=0,++ne<=N&&!(ne%16)&&ge(G,ne));else{if(!(280>Be)){Ae=0;break t}Be=ti(Be-256,_e);var jt,gt=vn(Ke.G[4],Ke.H[4],_e);if(oe(_e),!(ke>=(gt=$i(Se,gt=ti(gt,_e)))&&ze-ke>=Be)){Ae=0;break t}for(jt=0;jt<Be;++jt)J[ue+ke+jt]=J[ue+ke+jt-gt];for(ke+=Be,ce+=Be;ce>=Se;)ce-=Se,++ne<=N&&!(ne%16)&&ge(G,ne);ke<We&&ce&Ye&&(Ke=W(Oe,ce,ne))}t(_e.h==U(_e))}ge(G,ne>N?N:ne);break t}!Ae||_e.h&&ke<ze?(Ae=0,G.a=_e.h?5:3):G.$=ke,N=Ae}else N=Ee(G,G.V,G.Ba,G.c,G.i,N,Xe);if(!N){I=0;break e}}P+I>=V&&(w.Cc=1),I=1}if(!I)return null;if(w.Cc&&((I=w.ga)!=null&&(I.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+P*H}function ua(w,N,P,I,H,V){for(;0<H--;){var G,J=w,ne=N+(P?1:0),ce=w,_e=N+(P?0:3);for(G=0;G<I;++G){var Oe=ce[_e+4*G];Oe!=255&&(Oe*=32897,J[ne+4*G+0]=J[ne+4*G+0]*Oe>>23,J[ne+4*G+1]=J[ne+4*G+1]*Oe>>23,J[ne+4*G+2]=J[ne+4*G+2]*Oe>>23)}N+=V}}function ea(w,N,P,I,H){for(;0<I--;){var V;for(V=0;V<P;++V){var G=w[N+2*V+0],J=15&(ce=w[N+2*V+1]),ne=4369*J,ce=(240&ce|ce>>4)*ne>>16;w[N+2*V+0]=(240&G|G>>4)*ne>>16&240|(15&G|G<<4)*ne>>16>>4&15,w[N+2*V+1]=240&ce|J}N+=H}}function Fa(w,N,P,I,H,V,G,J){var ne,ce,_e=255;for(ce=0;ce<H;++ce){for(ne=0;ne<I;++ne){var Oe=w[N+ne];V[G+4*ne]=Oe,_e&=Oe}N+=P,G+=J}return _e!=255}function Ol(w,N,P,I,H){var V;for(V=0;V<H;++V)P[I+V]=w[N+V]>>8}function ho(){em=ua,aT=ea,iT=Fa,sT=Ol}function Pl(w,N,P){T[w]=function(I,H,V,G,J,ne,ce,_e,Oe,ue,Se,Ae,Be,ke,ze,We,Ye){var Ke,jt=Ye-1>>1,gt=J[ne+0]|ce[_e+0]<<16,tr=Oe[ue+0]|Se[Ae+0]<<16;t(I!=null);var bt=3*gt+tr+131074>>2;for(N(I[H+0],255&bt,bt>>16,Be,ke),V!=null&&(bt=3*tr+gt+131074>>2,N(V[G+0],255&bt,bt>>16,ze,We)),Ke=1;Ke<=jt;++Ke){var fr=J[ne+Ke]|ce[_e+Ke]<<16,fa=Oe[ue+Ke]|Se[Ae+Ke]<<16,rr=gt+fr+tr+fa+524296,wt=rr+2*(fr+tr)>>3;bt=wt+gt>>1,gt=(rr=rr+2*(gt+fa)>>3)+fr>>1,N(I[H+2*Ke-1],255&bt,bt>>16,Be,ke+(2*Ke-1)*P),N(I[H+2*Ke-0],255&gt,gt>>16,Be,ke+(2*Ke-0)*P),V!=null&&(bt=rr+tr>>1,gt=wt+fa>>1,N(V[G+2*Ke-1],255&bt,bt>>16,ze,We+(2*Ke-1)*P),N(V[G+2*Ke+0],255&gt,gt>>16,ze,We+(2*Ke+0)*P)),gt=fr,tr=fa}1&Ye||(bt=3*gt+tr+131074>>2,N(I[H+Ye-1],255&bt,bt>>16,Be,ke+(Ye-1)*P),V!=null&&(bt=3*tr+gt+131074>>2,N(V[G+Ye-1],255&bt,bt>>16,ze,We+(Ye-1)*P)))}}function qp(){$s[S1]=$H,$s[N1]=vT,$s[fT]=BH,$s[j1]=xT,$s[A1]=yT,$s[x_]=bT,$s[hT]=UH,$s[y_]=vT,$s[b_]=xT,$s[E1]=yT,$s[w_]=bT}function Jf(w){return w&-16384?0>w?0:255:w>>zH}function Mc(w,N){return Jf((19077*w>>8)+(26149*N>>8)-14234)}function cd(w,N,P){return Jf((19077*w>>8)-(6419*N>>8)-(13320*P>>8)+8708)}function ud(w,N){return Jf((19077*w>>8)+(33050*N>>8)-17685)}function Fc(w,N,P,I,H){I[H+0]=Mc(w,P),I[H+1]=cd(w,N,P),I[H+2]=ud(w,N)}function $a(w,N,P,I,H){I[H+0]=ud(w,N),I[H+1]=cd(w,N,P),I[H+2]=Mc(w,P)}function dd(w,N,P,I,H){var V=cd(w,N,P);N=V<<3&224|ud(w,N)>>3,I[H+0]=248&Mc(w,P)|V>>5,I[H+1]=N}function fd(w,N,P,I,H){var V=240&ud(w,N)|15;I[H+0]=240&Mc(w,P)|cd(w,N,P)>>4,I[H+1]=V}function Hp(w,N,P,I,H){I[H+0]=255,Fc(w,N,P,I,H+1)}function Wp(w,N,P,I,H){$a(w,N,P,I,H),I[H+3]=255}function gi(w,N,P,I,H){Fc(w,N,P,I,H),I[H+3]=255}function Ll(w,N,P){T[w]=function(I,H,V,G,J,ne,ce,_e,Oe){for(var ue=_e+(-2&Oe)*P;_e!=ue;)N(I[H+0],V[G+0],J[ne+0],ce,_e),N(I[H+1],V[G+0],J[ne+0],ce,_e+P),H+=2,++G,++ne,_e+=2*P;1&Oe&&N(I[H+0],V[G+0],J[ne+0],ce,_e)}}function Qf(w,N,P){return P==0?w==0?N==0?6:5:N==0?4:0:P}function y1(w,N,P,I,H){switch(w>>>30){case 3:gd(N,P,I,H,0);break;case 2:Ms(N,P,I,H);break;case 1:Er(N,P,I,H)}}function Ds(w,N){var P,I,H=N.M,V=N.Nb,G=w.oc,J=w.pc+40,ne=w.oc,ce=w.pc+584,_e=w.oc,Oe=w.pc+600;for(P=0;16>P;++P)G[J+32*P-1]=129;for(P=0;8>P;++P)ne[ce+32*P-1]=129,_e[Oe+32*P-1]=129;for(0<H?G[J-1-32]=ne[ce-1-32]=_e[Oe-1-32]=129:(a(G,J-32-1,127,21),a(ne,ce-32-1,127,9),a(_e,Oe-32-1,127,9)),I=0;I<w.za;++I){var ue=N.ya[N.aa+I];if(0<I){for(P=-1;16>P;++P)n(G,J+32*P-4,G,J+32*P+12,4);for(P=-1;8>P;++P)n(ne,ce+32*P-4,ne,ce+32*P+4,4),n(_e,Oe+32*P-4,_e,Oe+32*P+4,4)}var Se=w.Gd,Ae=w.Hd+I,Be=ue.ad,ke=ue.Hc;if(0<H&&(n(G,J-32,Se[Ae].y,0,16),n(ne,ce-32,Se[Ae].f,0,8),n(_e,Oe-32,Se[Ae].ea,0,8)),ue.Za){var ze=G,We=J-32+16;for(0<H&&(I>=w.za-1?a(ze,We,Se[Ae].y[15],4):n(ze,We,Se[Ae+1].y,0,4)),P=0;4>P;P++)ze[We+128+P]=ze[We+256+P]=ze[We+384+P]=ze[We+0+P];for(P=0;16>P;++P,ke<<=2)ze=G,We=J+_T[P],po[ue.Ob[P]](ze,We),y1(ke,Be,16*+P,ze,We)}else if(ze=Qf(I,H,ue.Ob[0]),Vc[ze](G,J),ke!=0)for(P=0;16>P;++P,ke<<=2)y1(ke,Be,16*+P,G,J+_T[P]);for(P=ue.Gc,ze=Qf(I,H,ue.Dd),Dl[ze](ne,ce),Dl[ze](_e,Oe),ke=Be,ze=ne,We=ce,255&(ue=0|P)&&(170&ue?Jo(ke,256,ze,We):Gr(ke,256,ze,We)),ue=_e,ke=Oe,255&(P>>=8)&&(170&P?Jo(Be,320,ue,ke):Gr(Be,320,ue,ke)),H<w.Ub-1&&(n(Se[Ae].y,0,G,J+480,16),n(Se[Ae].f,0,ne,ce+224,8),n(Se[Ae].ea,0,_e,Oe+224,8)),P=8*V*w.B,Se=w.sa,Ae=w.ta+16*I+16*V*w.R,Be=w.qa,ue=w.ra+8*I+P,ke=w.Ha,ze=w.Ia+8*I+P,P=0;16>P;++P)n(Se,Ae+P*w.R,G,J+32*P,16);for(P=0;8>P;++P)n(Be,ue+P*w.B,ne,ce+32*P,8),n(ke,ze+P*w.B,_e,Oe+32*P,8)}}function hd(w,N,P,I,H,V,G,J,ne){var ce=[0],_e=[0],Oe=0,ue=ne!=null?ne.kd:0,Se=ne??new Ge;if(w==null||12>P)return 7;Se.data=w,Se.w=N,Se.ha=P,N=[N],P=[P],Se.gb=[Se.gb];e:{var Ae=N,Be=P,ke=Se.gb;if(t(w!=null),t(Be!=null),t(ke!=null),ke[0]=0,12<=Be[0]&&!r(w,Ae[0],"RIFF")){if(r(w,Ae[0]+8,"WEBP")){ke=3;break e}var ze=Ie(w,Ae[0]+4);if(12>ze||4294967286<ze){ke=3;break e}if(ue&&ze>Be[0]-8){ke=7;break e}ke[0]=ze,Ae[0]+=12,Be[0]-=12}ke=0}if(ke!=0)return ke;for(ze=0<Se.gb[0],P=P[0];;){e:{var We=w;Be=N,ke=P;var Ye=ce,Ke=_e,jt=Ae=[0];if((bt=Oe=[Oe])[0]=0,8>ke[0])ke=7;else{if(!r(We,Be[0],"VP8X")){if(Ie(We,Be[0]+4)!=10){ke=3;break e}if(18>ke[0]){ke=7;break e}var gt=Ie(We,Be[0]+8),tr=1+Me(We,Be[0]+12);if(2147483648<=tr*(We=1+Me(We,Be[0]+15))){ke=3;break e}jt!=null&&(jt[0]=gt),Ye!=null&&(Ye[0]=tr),Ke!=null&&(Ke[0]=We),Be[0]+=18,ke[0]-=18,bt[0]=1}ke=0}}if(Oe=Oe[0],Ae=Ae[0],ke!=0)return ke;if(Be=!!(2&Ae),!ze&&Oe)return 3;if(V!=null&&(V[0]=!!(16&Ae)),G!=null&&(G[0]=Be),J!=null&&(J[0]=0),G=ce[0],Ae=_e[0],Oe&&Be&&ne==null){ke=0;break}if(4>P){ke=7;break}if(ze&&Oe||!ze&&!Oe&&!r(w,N[0],"ALPH")){P=[P],Se.na=[Se.na],Se.P=[Se.P],Se.Sa=[Se.Sa];e:{gt=w,ke=N,ze=P;var bt=Se.gb;Ye=Se.na,Ke=Se.P,jt=Se.Sa,tr=22,t(gt!=null),t(ze!=null),We=ke[0];var fr=ze[0];for(t(Ye!=null),t(jt!=null),Ye[0]=null,Ke[0]=null,jt[0]=0;;){if(ke[0]=We,ze[0]=fr,8>fr){ke=7;break e}var fa=Ie(gt,We+4);if(4294967286<fa){ke=3;break e}var rr=8+fa+1&-2;if(tr+=rr,0<bt&&tr>bt){ke=3;break e}if(!r(gt,We,"VP8 ")||!r(gt,We,"VP8L")){ke=0;break e}if(fr[0]<rr){ke=7;break e}r(gt,We,"ALPH")||(Ye[0]=gt,Ke[0]=We+8,jt[0]=fa),We+=rr,fr-=rr}}if(P=P[0],Se.na=Se.na[0],Se.P=Se.P[0],Se.Sa=Se.Sa[0],ke!=0)break}P=[P],Se.Ja=[Se.Ja],Se.xa=[Se.xa];e:if(bt=w,ke=N,ze=P,Ye=Se.gb[0],Ke=Se.Ja,jt=Se.xa,gt=ke[0],We=!r(bt,gt,"VP8 "),tr=!r(bt,gt,"VP8L"),t(bt!=null),t(ze!=null),t(Ke!=null),t(jt!=null),8>ze[0])ke=7;else{if(We||tr){if(bt=Ie(bt,gt+4),12<=Ye&&bt>Ye-12){ke=3;break e}if(ue&&bt>ze[0]-8){ke=7;break e}Ke[0]=bt,ke[0]+=8,ze[0]-=8,jt[0]=tr}else jt[0]=5<=ze[0]&&bt[gt+0]==47&&!(bt[gt+4]>>5),Ke[0]=ze[0];ke=0}if(P=P[0],Se.Ja=Se.Ja[0],Se.xa=Se.xa[0],N=N[0],ke!=0)break;if(4294967286<Se.Ja)return 3;if(J==null||Be||(J[0]=Se.xa?2:1),G=[G],Ae=[Ae],Se.xa){if(5>P){ke=7;break}J=G,ue=Ae,Be=V,w==null||5>P?w=0:5<=P&&w[N+0]==47&&!(w[N+4]>>5)?(ze=[0],bt=[0],Ye=[0],ie(Ke=new F,w,N,P),co(Ke,ze,bt,Ye)?(J!=null&&(J[0]=ze[0]),ue!=null&&(ue[0]=bt[0]),Be!=null&&(Be[0]=Ye[0]),w=1):w=0):w=0}else{if(10>P){ke=7;break}J=Ae,w==null||10>P||!l1(w,N+3,P-3)?w=0:(ue=w[N+0]|w[N+1]<<8|w[N+2]<<16,Be=16383&(w[N+7]<<8|w[N+6]),w=16383&(w[N+9]<<8|w[N+8]),1&ue||3<(ue>>1&7)||!(ue>>4&1)||ue>>5>=Se.Ja||!Be||!w?w=0:(G&&(G[0]=Be),J&&(J[0]=w),w=1))}if(!w||(G=G[0],Ae=Ae[0],Oe&&(ce[0]!=G||_e[0]!=Ae)))return 3;ne!=null&&(ne[0]=Se,ne.offset=N-ne.w,t(4294967286>N-ne.w),t(ne.offset==ne.ha-P));break}return ke==0||ke==7&&Oe&&ne==null?(V!=null&&(V[0]|=Se.na!=null&&0<Se.na.length),I!=null&&(I[0]=G),H!=null&&(H[0]=Ae),0):ke}function Vp(w,N,P){var I=N.width,H=N.height,V=0,G=0,J=I,ne=H;if(N.Da=w!=null&&0<w.Da,N.Da&&(J=w.cd,ne=w.bd,V=w.v,G=w.j,11>P||(V&=-2,G&=-2),0>V||0>G||0>=J||0>=ne||V+J>I||G+ne>H))return 0;if(N.v=V,N.j=G,N.va=V+J,N.o=G+ne,N.U=J,N.T=ne,N.da=w!=null&&0<w.da,N.da){if(!it(J,ne,P=[w.ib],V=[w.hb]))return 0;N.ib=P[0],N.hb=V[0]}return N.ob=w!=null&&w.ob,N.Kb=w==null||!w.Sd,N.da&&(N.ob=N.ib<3*I/4&&N.hb<3*H/4,N.Kb=0),1}function Gp(w){if(w==null)return 2;if(11>w.S){var N=w.f.RGBA;N.fb+=(w.height-1)*N.A,N.A=-N.A}else N=w.f.kb,w=w.height,N.O+=(w-1)*N.fa,N.fa=-N.fa,N.N+=(w-1>>1)*N.Ab,N.Ab=-N.Ab,N.W+=(w-1>>1)*N.Db,N.Db=-N.Db,N.F!=null&&(N.J+=(w-1)*N.lb,N.lb=-N.lb);return 0}function $c(w,N,P,I){if(I==null||0>=w||0>=N)return 2;if(P!=null){if(P.Da){var H=P.cd,V=P.bd,G=-2&P.v,J=-2&P.j;if(0>G||0>J||0>=H||0>=V||G+H>w||J+V>N)return 2;w=H,N=V}if(P.da){if(!it(w,N,H=[P.ib],V=[P.hb]))return 2;w=H[0],N=V[0]}}I.width=w,I.height=N;e:{var ne=I.width,ce=I.height;if(w=I.S,0>=ne||0>=ce||!(w>=S1&&13>w))w=2;else{if(0>=I.Rd&&I.sd==null){G=V=H=N=0;var _e=(J=ne*ST[w])*ce;if(11>w||(V=(ce+1)/2*(N=(ne+1)/2),w==12&&(G=(H=ne)*ce)),(ce=i(_e+2*V+G))==null){w=1;break e}I.sd=ce,11>w?((ne=I.f.RGBA).eb=ce,ne.fb=0,ne.A=J,ne.size=_e):((ne=I.f.kb).y=ce,ne.O=0,ne.fa=J,ne.Fd=_e,ne.f=ce,ne.N=0+_e,ne.Ab=N,ne.Cd=V,ne.ea=ce,ne.W=0+_e+V,ne.Db=N,ne.Ed=V,w==12&&(ne.F=ce,ne.J=0+_e+2*V),ne.Tc=G,ne.lb=H)}if(N=1,H=I.S,V=I.width,G=I.height,H>=S1&&13>H)if(11>H)w=I.f.RGBA,N&=(J=Math.abs(w.A))*(G-1)+V<=w.size,N&=J>=V*ST[H],N&=w.eb!=null;else{w=I.f.kb,J=(V+1)/2,_e=(G+1)/2,ne=Math.abs(w.fa),ce=Math.abs(w.Ab);var Oe=Math.abs(w.Db),ue=Math.abs(w.lb),Se=ue*(G-1)+V;N&=ne*(G-1)+V<=w.Fd,N&=ce*(_e-1)+J<=w.Cd,N=(N&=Oe*(_e-1)+J<=w.Ed)&ne>=V&ce>=J&Oe>=J,N&=w.y!=null,N&=w.f!=null,N&=w.ea!=null,H==12&&(N&=ue>=V,N&=Se<=w.Tc,N&=w.F!=null)}else N=0;w=N?0:2}}return w!=0||P!=null&&P.fd&&(w=Gp(I)),w}var pd=64,ss=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],os=24,Bc=32,Rl=8,Uc=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];nt("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(w){return w},T.Predictor2=function(w,N,P){return N[P+0]},T.Predictor3=function(w,N,P){return N[P+1]},T.Predictor4=function(w,N,P){return N[P-1]},T.Predictor5=function(w,N,P){return ft(ft(w,N[P+1]),N[P+0])},T.Predictor6=function(w,N,P){return ft(w,N[P-1])},T.Predictor7=function(w,N,P){return ft(w,N[P+0])},T.Predictor8=function(w,N,P){return ft(N[P-1],N[P+0])},T.Predictor9=function(w,N,P){return ft(N[P+0],N[P+1])},T.Predictor10=function(w,N,P){return ft(ft(w,N[P-1]),ft(N[P+0],N[P+1]))},T.Predictor11=function(w,N,P){var I=N[P+0];return 0>=Mt(I>>24&255,w>>24&255,(N=N[P-1])>>24&255)+Mt(I>>16&255,w>>16&255,N>>16&255)+Mt(I>>8&255,w>>8&255,N>>8&255)+Mt(255&I,255&w,255&N)?I:w},T.Predictor12=function(w,N,P){var I=N[P+0];return(ut((w>>24&255)+(I>>24&255)-((N=N[P-1])>>24&255))<<24|ut((w>>16&255)+(I>>16&255)-(N>>16&255))<<16|ut((w>>8&255)+(I>>8&255)-(N>>8&255))<<8|ut((255&w)+(255&I)-(255&N)))>>>0},T.Predictor13=function(w,N,P){var I=N[P-1];return(qt((w=ft(w,N[P+0]))>>24&255,I>>24&255)<<24|qt(w>>16&255,I>>16&255)<<16|qt(w>>8&255,I>>8&255)<<8|qt(255&w,255&I))>>>0};var Kp=T.PredictorAdd0;T.PredictorAdd1=kt,nt("Predictor2","PredictorAdd2"),nt("Predictor3","PredictorAdd3"),nt("Predictor4","PredictorAdd4"),nt("Predictor5","PredictorAdd5"),nt("Predictor6","PredictorAdd6"),nt("Predictor7","PredictorAdd7"),nt("Predictor8","PredictorAdd8"),nt("Predictor9","PredictorAdd9"),nt("Predictor10","PredictorAdd10"),nt("Predictor11","PredictorAdd11"),nt("Predictor12","PredictorAdd12"),nt("Predictor13","PredictorAdd13");var Zf=T.PredictorAdd2;St("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),St("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var Un,b1=T.ColorIndexInverseTransform,Xo=T.MapARGB,Yo=T.VP8LColorIndexInverseTransformAlpha,Xp=T.MapAlpha,Yp=T.VP8LPredictorsAdd=[];Yp.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var Jp,Qp,zc,qc,Hc,md,Wc,gd,Ms,Jo,Er,Gr,zn,da,Il,Zp,eh,w1,QE,ZE,eT,tT,rT,nT,em,aT,iT,sT,oT=i(511),lT=i(2041),cT=i(225),uT=i(767),dT=0,v_=lT,_1=cT,ls=uT,Fs=oT,S1=0,N1=1,fT=2,j1=3,A1=4,x_=5,hT=6,y_=7,b_=8,E1=9,w_=10,jH=[2,3,7],AH=[3,3,11],pT=[280,256,256,256,40],EH=[0,1,1,1,0],TH=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],CH=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],kH=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],OH=8,__=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],S_=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],tm=null,PH=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],LH=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],mT=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],RH=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],IH=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],DH=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],MH=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Vc=[],po=[],Dl=[],FH=1,gT=2,Gc=[],$s=[];Pl("UpsampleRgbLinePair",Fc,3),Pl("UpsampleBgrLinePair",$a,3),Pl("UpsampleRgbaLinePair",gi,4),Pl("UpsampleBgraLinePair",Wp,4),Pl("UpsampleArgbLinePair",Hp,4),Pl("UpsampleRgba4444LinePair",fd,2),Pl("UpsampleRgb565LinePair",dd,2);var $H=T.UpsampleRgbLinePair,BH=T.UpsampleBgrLinePair,vT=T.UpsampleRgbaLinePair,xT=T.UpsampleBgraLinePair,yT=T.UpsampleArgbLinePair,bT=T.UpsampleRgba4444LinePair,UH=T.UpsampleRgb565LinePair,T1=16,C1=1<<T1-1,rm=-227,N_=482,zH=6,wT=0,qH=i(256),HH=i(256),WH=i(256),VH=i(256),GH=i(N_-rm),KH=i(N_-rm);Ll("YuvToRgbRow",Fc,3),Ll("YuvToBgrRow",$a,3),Ll("YuvToRgbaRow",gi,4),Ll("YuvToBgraRow",Wp,4),Ll("YuvToArgbRow",Hp,4),Ll("YuvToRgba4444Row",fd,2),Ll("YuvToRgb565Row",dd,2);var _T=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],k1=[0,2,8],XH=[8,7,6,4,4,2,2,2,1,1,1,1],YH=1;this.WebPDecodeRGBA=function(w,N,P,I,H){var V=N1,G=new qe,J=new nr;G.ba=J,J.S=V,J.width=[J.width],J.height=[J.height];var ne=J.width,ce=J.height,_e=new Ct;if(_e==null||w==null)var Oe=2;else t(_e!=null),Oe=hd(w,N,P,_e.width,_e.height,_e.Pd,_e.Qd,_e.format,null);if(Oe!=0?ne=0:(ne!=null&&(ne[0]=_e.width[0]),ce!=null&&(ce[0]=_e.height[0]),ne=1),ne){J.width=J.width[0],J.height=J.height[0],I!=null&&(I[0]=J.width),H!=null&&(H[0]=J.height);e:{if(I=new Vf,(H=new Ge).data=w,H.w=N,H.ha=P,H.kd=1,N=[0],t(H!=null),((w=hd(H.data,H.w,H.ha,null,null,null,N,null,H))==0||w==7)&&N[0]&&(w=4),(N=w)==0){if(t(G!=null),I.data=H.data,I.w=H.w+H.offset,I.ha=H.ha-H.offset,I.put=Pt,I.ac=Ls,I.bc=lo,I.ma=G,H.xa){if((w=Te())==null){G=1;break e}if(function(ue,Se){var Ae=[0],Be=[0],ke=[0];t:for(;;){if(ue==null)return 0;if(Se==null)return ue.a=2,0;if(ue.l=Se,ue.a=0,ie(ue.m,Se.data,Se.w,Se.ha),!co(ue.m,Ae,Be,ke)){ue.a=3;break t}if(ue.xb=gT,Se.width=Ae[0],Se.height=Be[0],!Ce(Ae[0],Be[0],1,ue,null))break t;return 1}return t(ue.a!=0),0}(w,I)){if(I=(N=$c(I.width,I.height,G.Oa,G.ba))==0){t:{I=w;r:for(;;){if(I==null){I=0;break t}if(t(I.s.yc!=null),t(I.s.Ya!=null),t(0<I.s.Wb),t((P=I.l)!=null),t((H=P.ma)!=null),I.xb!=0){if(I.ca=H.ba,I.tb=H.tb,t(I.ca!=null),!Vp(H.Oa,P,j1)){I.a=2;break r}if(!Pe(I,P.width)||P.da)break r;if((P.da||Ot(I.ca.S))&&ho(),11>I.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),I.ca.f.kb.F!=null&&ho()),I.Pb&&0<I.s.ua&&I.s.vb.X==null&&!Q(I.s.vb,I.s.Wa.Xa)){I.a=1;break r}I.xb=0}if(!Ee(I,I.V,I.Ba,I.c,I.i,P.o,re))break r;H.Dc=I.Ma,I=1;break t}t(I.a!=0),I=0}I=!I}I&&(N=w.a)}else N=w.a}else{if((w=new r_)==null){G=1;break e}if(w.Fa=H.na,w.P=H.P,w.qc=H.Sa,Go(w,I)){if((N=$c(I.width,I.height,G.Oa,G.ba))==0){if(w.Aa=0,P=G.Oa,t((H=w)!=null),P!=null){if(0<(ne=0>(ne=P.Md)?0:100<ne?255:255*ne/100)){for(ce=_e=0;4>ce;++ce)12>(Oe=H.pb[ce]).lc&&(Oe.ia=ne*XH[0>Oe.lc?0:Oe.lc]>>3),_e|=Oe.ia;_e&&(alert("todo:VP8InitRandom"),H.ia=1)}H.Ga=P.Id,100<H.Ga?H.Ga=100:0>H.Ga&&(H.Ga=0)}(function(ue,Se){if(ue==null)return 0;if(Se==null)return Qn(ue,2,"NULL VP8Io parameter in VP8Decode().");if(!ue.cb&&!Go(ue,Se))return 0;if(t(ue.cb),Se.ac==null||Se.ac(Se)){Se.ob&&(ue.L=0);var Ae=k1[ue.L];if(ue.L==2?(ue.yb=0,ue.zb=0):(ue.yb=Se.v-Ae>>4,ue.zb=Se.j-Ae>>4,0>ue.yb&&(ue.yb=0),0>ue.zb&&(ue.zb=0)),ue.Va=Se.o+15+Ae>>4,ue.Hb=Se.va+15+Ae>>4,ue.Hb>ue.za&&(ue.Hb=ue.za),ue.Va>ue.Ub&&(ue.Va=ue.Ub),0<ue.L){var Be=ue.ed;for(Ae=0;4>Ae;++Ae){var ke;if(ue.Qa.Cb){var ze=ue.Qa.Lb[Ae];ue.Qa.Fb||(ze+=Be.Tb)}else ze=Be.Tb;for(ke=0;1>=ke;++ke){var We=ue.gd[Ae][ke],Ye=ze;if(Be.Pc&&(Ye+=Be.vd[0],ke&&(Ye+=Be.od[0])),0<(Ye=0>Ye?0:63<Ye?63:Ye)){var Ke=Ye;0<Be.wb&&(Ke=4<Be.wb?Ke>>2:Ke>>1)>9-Be.wb&&(Ke=9-Be.wb),1>Ke&&(Ke=1),We.dd=Ke,We.tc=2*Ye+Ke,We.ld=40<=Ye?2:15<=Ye?1:0}else We.tc=0;We.La=ke}}}Ae=0}else Qn(ue,6,"Frame setup failed"),Ae=ue.a;if(Ae=Ae==0){if(Ae){ue.$c=0,0<ue.Aa||(ue.Ic=YH);t:{Ae=ue.Ic,Be=4*(Ke=ue.za);var jt=32*Ke,gt=Ke+1,tr=0<ue.L?Ke*(0<ue.Aa?2:1):0,bt=(ue.Aa==2?2:1)*Ke;if((We=Be+832+(ke=3*(16*Ae+k1[ue.L])/2*jt)+(ze=ue.Fa!=null&&0<ue.Fa.length?ue.Kc.c*ue.Kc.i:0))!=We)Ae=0;else{if(We>ue.Vb){if(ue.Vb=0,ue.Ec=i(We),ue.Fc=0,ue.Ec==null){Ae=Qn(ue,1,"no memory during frame initialization.");break t}ue.Vb=We}We=ue.Ec,Ye=ue.Fc,ue.Ac=We,ue.Bc=Ye,Ye+=Be,ue.Gd=s(jt,Rs),ue.Hd=0,ue.rb=s(gt+1,On),ue.sb=1,ue.wa=tr?s(tr,dr):null,ue.Y=0,ue.D.Nb=0,ue.D.wa=ue.wa,ue.D.Y=ue.Y,0<ue.Aa&&(ue.D.Y+=Ke),t(!0),ue.oc=We,ue.pc=Ye,Ye+=832,ue.ya=s(bt,uo),ue.aa=0,ue.D.ya=ue.ya,ue.D.aa=ue.aa,ue.Aa==2&&(ue.D.aa+=Ke),ue.R=16*Ke,ue.B=8*Ke,Ke=(jt=k1[ue.L])*ue.R,jt=jt/2*ue.B,ue.sa=We,ue.ta=Ye+Ke,ue.qa=ue.sa,ue.ra=ue.ta+16*Ae*ue.R+jt,ue.Ha=ue.qa,ue.Ia=ue.ra+8*Ae*ue.B+jt,ue.$c=0,Ye+=ke,ue.mb=ze?We:null,ue.nb=ze?Ye:null,t(Ye+ze<=ue.Fc+ue.Vb),c1(ue),a(ue.Ac,ue.Bc,0,Be),Ae=1}}if(Ae){if(Se.ka=0,Se.y=ue.sa,Se.O=ue.ta,Se.f=ue.qa,Se.N=ue.ra,Se.ea=ue.Ha,Se.Vd=ue.Ia,Se.fa=ue.R,Se.Rc=ue.B,Se.F=null,Se.J=0,!dT){for(Ae=-255;255>=Ae;++Ae)oT[255+Ae]=0>Ae?-Ae:Ae;for(Ae=-1020;1020>=Ae;++Ae)lT[1020+Ae]=-128>Ae?-128:127<Ae?127:Ae;for(Ae=-112;112>=Ae;++Ae)cT[112+Ae]=-16>Ae?-16:15<Ae?15:Ae;for(Ae=-255;510>=Ae;++Ae)uT[255+Ae]=0>Ae?0:255<Ae?255:Ae;dT=1}Wc=Kf,gd=a_,Jo=Ko,Er=d1,Gr=f1,Ms=n_,zn=v1,da=ld,Il=z,Zp=he,eh=x1,w1=C,QE=be,ZE=je,eT=od,tT=zp,rT=m1,nT=g1,po[0]=f_,po[1]=i_,po[2]=u_,po[3]=d_,po[4]=jl,po[5]=h_,po[6]=Al,po[7]=p_,po[8]=Mp,po[9]=Xf,Vc[0]=l_,Vc[1]=o_,Vc[2]=Ip,Vc[3]=h1,Vc[4]=id,Vc[5]=Dp,Vc[6]=c_,Dl[0]=g_,Dl[1]=s_,Dl[2]=sd,Dl[3]=m_,Dl[4]=$p,Dl[5]=Fp,Dl[6]=p1,Ae=1}else Ae=0}Ae&&(Ae=function(fr,fa){for(fr.M=0;fr.M<fr.Va;++fr.M){var rr,wt=fr.Jc[fr.M&fr.Xb],st=fr.m,qn=fr;for(rr=0;rr<qn.za;++rr){var Jt=st,pr=qn,ln=pr.Ac,Ba=pr.Bc+4*rr,vi=pr.zc,Pn=pr.ya[pr.aa+rr];if(pr.Qa.Bb?Pn.$b=le(Jt,pr.Pa.jb[0])?2+le(Jt,pr.Pa.jb[2]):le(Jt,pr.Pa.jb[1]):Pn.$b=0,pr.kc&&(Pn.Ad=le(Jt,pr.Bd)),Pn.Za=!le(Jt,145)+0,Pn.Za){var ri=Pn.Ob,xi=0;for(pr=0;4>pr;++pr){var ha,xr=vi[0+pr];for(ha=0;4>ha;++ha){xr=IH[ln[Ba+ha]][xr];for(var Pr=mT[le(Jt,xr[0])];0<Pr;)Pr=mT[2*Pr+le(Jt,xr[Pr])];xr=-Pr,ln[Ba+ha]=xr}n(ri,xi,ln,Ba,4),xi+=4,vi[0+pr]=xr}}else xr=le(Jt,156)?le(Jt,128)?1:3:le(Jt,163)?2:0,Pn.Ob[0]=xr,a(ln,Ba,xr,4),a(vi,0,xr,4);Pn.Dd=le(Jt,142)?le(Jt,114)?le(Jt,183)?1:3:2:0}if(qn.m.Ka)return Qn(fr,7,"Premature end-of-partition0 encountered.");for(;fr.ja<fr.za;++fr.ja){if(qn=wt,Jt=(st=fr).rb[st.sb-1],ln=st.rb[st.sb+st.ja],rr=st.ya[st.aa+st.ja],Ba=st.kc?rr.Ad:0)Jt.la=ln.la=0,rr.Za||(Jt.Na=ln.Na=0),rr.Hc=0,rr.Gc=0,rr.ia=0;else{var Ln,Lr;if(Jt=ln,ln=qn,Ba=st.Pa.Xc,vi=st.ya[st.aa+st.ja],Pn=st.pb[vi.$b],pr=vi.ad,ri=0,xi=st.rb[st.sb-1],xr=ha=0,a(pr,ri,0,384),vi.Za)var Ua=0,mo=Ba[3];else{Pr=i(16);var Hn=Jt.Na+xi.Na;if(Hn=tm(ln,Ba[1],Hn,Pn.Eb,0,Pr,0),Jt.Na=xi.Na=(0<Hn)+0,1<Hn)Wc(Pr,0,pr,ri);else{var Bi=Pr[0]+3>>3;for(Pr=0;256>Pr;Pr+=16)pr[ri+Pr]=Bi}Ua=1,mo=Ba[0]}var Kr=15&Jt.la,pa=15&xi.la;for(Pr=0;4>Pr;++Pr){var cs=1&pa;for(Bi=Lr=0;4>Bi;++Bi)Kr=Kr>>1|(cs=(Hn=tm(ln,mo,Hn=cs+(1&Kr),Pn.Sc,Ua,pr,ri))>Ua)<<7,Lr=Lr<<2|(3<Hn?3:1<Hn?2:pr[ri+0]!=0),ri+=16;Kr>>=4,pa=pa>>1|cs<<7,ha=(ha<<8|Lr)>>>0}for(mo=Kr,Ua=pa>>4,Ln=0;4>Ln;Ln+=2){for(Lr=0,Kr=Jt.la>>4+Ln,pa=xi.la>>4+Ln,Pr=0;2>Pr;++Pr){for(cs=1&pa,Bi=0;2>Bi;++Bi)Hn=cs+(1&Kr),Kr=Kr>>1|(cs=0<(Hn=tm(ln,Ba[2],Hn,Pn.Qc,0,pr,ri)))<<3,Lr=Lr<<2|(3<Hn?3:1<Hn?2:pr[ri+0]!=0),ri+=16;Kr>>=2,pa=pa>>1|cs<<5}xr|=Lr<<4*Ln,mo|=Kr<<4<<Ln,Ua|=(240&pa)<<Ln}Jt.la=mo,xi.la=Ua,vi.Hc=ha,vi.Gc=xr,vi.ia=43690&xr?0:Pn.ia,Ba=!(ha|xr)}if(0<st.L&&(st.wa[st.Y+st.ja]=st.gd[rr.$b][rr.Za],st.wa[st.Y+st.ja].La|=!Ba),qn.Ka)return Qn(fr,7,"Premature end-of-file encountered.")}if(c1(fr),st=fa,qn=1,rr=(wt=fr).D,Jt=0<wt.L&&wt.M>=wt.zb&&wt.M<=wt.Va,wt.Aa==0)t:{if(rr.M=wt.M,rr.uc=Jt,Ds(wt,rr),qn=1,rr=(Lr=wt.D).Nb,Jt=(xr=k1[wt.L])*wt.R,ln=xr/2*wt.B,Pr=16*rr*wt.R,Bi=8*rr*wt.B,Ba=wt.sa,vi=wt.ta-Jt+Pr,Pn=wt.qa,pr=wt.ra-ln+Bi,ri=wt.Ha,xi=wt.Ia-ln+Bi,pa=(Kr=Lr.M)==0,ha=Kr>=wt.Va-1,wt.Aa==2&&Ds(wt,Lr),Lr.uc)for(cs=(Hn=wt).D.M,t(Hn.D.uc),Lr=Hn.yb;Lr<Hn.Hb;++Lr){Ua=Lr,mo=cs;var yi=(us=(za=Hn).D).Nb;Ln=za.R;var us=us.wa[us.Y+Ua],ds=za.sa,Ui=za.ta+16*yi*Ln+16*Ua,fs=us.dd,en=us.tc;if(en!=0)if(t(3<=en),za.L==1)0<Ua&&tT(ds,Ui,Ln,en+4),us.La&&nT(ds,Ui,Ln,en),0<mo&&eT(ds,Ui,Ln,en+4),us.La&&rT(ds,Ui,Ln,en);else{var hs=za.B,go=za.qa,vd=za.ra+8*yi*hs+8*Ua,Ml=za.Ha,za=za.Ia+8*yi*hs+8*Ua;yi=us.ld,0<Ua&&(da(ds,Ui,Ln,en+4,fs,yi),Zp(go,vd,Ml,za,hs,en+4,fs,yi)),us.La&&(w1(ds,Ui,Ln,en,fs,yi),ZE(go,vd,Ml,za,hs,en,fs,yi)),0<mo&&(zn(ds,Ui,Ln,en+4,fs,yi),Il(go,vd,Ml,za,hs,en+4,fs,yi)),us.La&&(eh(ds,Ui,Ln,en,fs,yi),QE(go,vd,Ml,za,hs,en,fs,yi))}}if(wt.ia&&alert("todo:DitherRow"),st.put!=null){if(Lr=16*Kr,Kr=16*(Kr+1),pa?(st.y=wt.sa,st.O=wt.ta+Pr,st.f=wt.qa,st.N=wt.ra+Bi,st.ea=wt.Ha,st.W=wt.Ia+Bi):(Lr-=xr,st.y=Ba,st.O=vi,st.f=Pn,st.N=pr,st.ea=ri,st.W=xi),ha||(Kr-=xr),Kr>st.o&&(Kr=st.o),st.F=null,st.J=null,wt.Fa!=null&&0<wt.Fa.length&&Lr<Kr&&(st.J=Zr(wt,st,Lr,Kr-Lr),st.F=wt.mb,st.F==null&&st.F.length==0)){qn=Qn(wt,3,"Could not decode alpha data.");break t}Lr<st.j&&(xr=st.j-Lr,Lr=st.j,t(!(1&xr)),st.O+=wt.R*xr,st.N+=wt.B*(xr>>1),st.W+=wt.B*(xr>>1),st.F!=null&&(st.J+=st.width*xr)),Lr<Kr&&(st.O+=st.v,st.N+=st.v>>1,st.W+=st.v>>1,st.F!=null&&(st.J+=st.v),st.ka=Lr-st.j,st.U=st.va-st.v,st.T=Kr-Lr,qn=st.put(st))}rr+1!=wt.Ic||ha||(n(wt.sa,wt.ta-Jt,Ba,vi+16*wt.R,Jt),n(wt.qa,wt.ra-ln,Pn,pr+8*wt.B,ln),n(wt.Ha,wt.Ia-ln,ri,xi+8*wt.B,ln))}if(!qn)return Qn(fr,6,"Output aborted.")}return 1}(ue,Se)),Se.bc!=null&&Se.bc(Se),Ae&=1}return Ae?(ue.cb=0,Ae):0})(w,I)||(N=w.a)}}else N=w.a}N==0&&G.Oa!=null&&G.Oa.fd&&(N=Gp(G.ba))}G=N}V=G!=0?null:11>V?J.f.RGBA.eb:J.f.kb.y}else V=null;return V};var ST=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(T,L){for(var k="",R=0;R<4;R++)k+=String.fromCharCode(T[L++]);return k}function d(T,L){return T[L+0]|T[L+1]<<8}function f(T,L){return(T[L+0]|T[L+1]<<8|T[L+2]<<16)>>>0}function p(T,L){return(T[L+0]|T[L+1]<<8|T[L+2]<<16|T[L+3]<<24)>>>0}new c;var h=[0],v=[0],m=[],x=new c,y=e,g=function(T,L){var k={},R=0,D=!1,q=0,X=0;if(k.frames=[],!function(O,F){for(var B=0;B<4;B++)if(O[F+B]!="RIFF".charCodeAt(B))return!0;return!1}(T,L)){for(p(T,L+=4),L+=8;L<T.length;){var se=u(T,L),Z=p(T,L+=4);L+=4;var K=Z+(1&Z);switch(se){case"VP8 ":case"VP8L":k.frames[R]===void 0&&(k.frames[R]={}),(me=k.frames[R]).src_off=D?X:L-8,me.src_size=q+Z+8,R++,D&&(D=!1,q=0,X=0);break;case"VP8X":(me=k.header={}).feature_flags=T[L];var ie=L+4;me.canvas_width=1+f(T,ie),ie+=3,me.canvas_height=1+f(T,ie),ie+=3;break;case"ALPH":D=!0,q=K+8,X=L-8;break;case"ANIM":(me=k.header).bgcolor=p(T,L),ie=L+4,me.loop_count=d(T,ie),ie+=2;break;case"ANMF":var pe,me;(me=k.frames[R]={}).offset_x=2*f(T,L),L+=3,me.offset_y=2*f(T,L),L+=3,me.width=1+f(T,L),L+=3,me.height=1+f(T,L),L+=3,me.duration=f(T,L),L+=3,pe=T[L++],me.dispose=1&pe,me.blend=pe>>1&1}se!="ANMF"&&(L+=K)}return k}}(y,0);g.response=y,g.rgbaoutput=!0,g.dataurl=!1;var b=g.header?g.header:null,S=g.frames?g.frames:null;if(b){b.loop_counter=b.loop_count,h=[b.canvas_height],v=[b.canvas_width];for(var _=0;_<S.length&&S[_].blend!=0;_++);}var j=S[0],A=x.WebPDecodeRGBA(y,j.src_off,j.src_size,v,h);j.rgba=A,j.imgwidth=v[0],j.imgheight=h[0];for(var E=0;E<v[0]*h[0]*4;E++)m[E]=A[E];return this.width=v,this.height=h,this.data=m,this}(function(e){var t,r,n,a,i,s,o,c,u,d=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new c,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new s,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new s,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var F=O;Object.defineProperty(this,"pdf",{get:function(){return F}});var B=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return B},set:function(Q){B=!!Q}});var U=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return U},set:function(Q){U=!!Q}});var Y=0;Object.defineProperty(this,"posX",{get:function(){return Y},set:function(Q){isNaN(Q)||(Y=Q)}});var oe=0;Object.defineProperty(this,"posY",{get:function(){return oe},set:function(Q){isNaN(Q)||(oe=Q)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Q){var $e;typeof Q=="number"?$e=[Q,Q,Q,Q]:(($e=new Array(4))[0]=Q[0],$e[1]=Q.length>=2?Q[1]:$e[0],$e[2]=Q.length>=3?Q[2]:$e[0],$e[3]=Q.length>=4?Q[3]:$e[1]),u.margin=$e}});var ee=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ee},set:function(Q){ee=Q}});var te=0;Object.defineProperty(this,"lastBreak",{get:function(){return te},set:function(Q){te=Q}});var le=[];Object.defineProperty(this,"pageBreaks",{get:function(){return le},set:function(Q){le=Q}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Q){Q instanceof d&&(u=Q)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Q){u.path=Q}});var Ne=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ne},set:function(Q){Ne=Q}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Q){var $e;$e=p(Q),this.ctx.fillStyle=$e.style,this.ctx.isFillTransparent=$e.a===0,this.ctx.fillOpacity=$e.a,this.pdf.setFillColor($e.r,$e.g,$e.b,{a:$e.a}),this.pdf.setTextColor($e.r,$e.g,$e.b,{a:$e.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Q){var $e=p(Q);this.ctx.strokeStyle=$e.style,this.ctx.isStrokeTransparent=$e.a===0,this.ctx.strokeOpacity=$e.a,$e.a===0?this.pdf.setDrawColor(255,255,255):($e.a,this.pdf.setDrawColor($e.r,$e.g,$e.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Q){["butt","round","square"].indexOf(Q)!==-1&&(this.ctx.lineCap=Q,this.pdf.setLineCap(Q))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Q){isNaN(Q)||(this.ctx.lineWidth=Q,this.pdf.setLineWidth(Q))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Q){["bevel","round","miter"].indexOf(Q)!==-1&&(this.ctx.lineJoin=Q,this.pdf.setLineJoin(Q))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Q){isNaN(Q)||(this.ctx.miterLimit=Q,this.pdf.setMiterLimit(Q))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Q){this.ctx.textBaseline=Q}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Q){["right","end","center","left","start"].indexOf(Q)!==-1&&(this.ctx.textAlign=Q)}});var ve=null,Me=null,Ie=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ie},set:function(Q){ve=null,Me=null,Ie=Q}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Q){var $e;if(this.ctx.font=Q,($e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Q))!==null){var Re=$e[1];$e[2];var it=$e[3],He=$e[4];$e[5];var Ze=$e[6],nt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(He)[2];He=Math.floor(nt==="px"?parseFloat(He)*this.pdf.internal.scaleFactor:nt==="em"?parseFloat(He)*this.pdf.getFontSize():parseFloat(He)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(He);var dt=function(St){var gn,ur,Qt=[],Zt=St.trim();if(Zt==="")return H5;if(Zt in C6)return[C6[Zt]];for(;Zt!=="";){switch(ur=null,gn=(Zt=O6(Zt)).charAt(0)){case'"':case"'":ur=che(Zt.substring(1),gn);break;default:ur=uhe(Zt)}if(ur===null||(Qt.push(ur[0]),(Zt=O6(ur[1]))!==""&&Zt.charAt(0)!==","))return H5;Zt=Zt.replace(/^,/,"")}return Qt}(Ze);if(this.fontFaces){var ft=function(St,gn){var ur=St.getFontList(),Qt=JSON.stringify(ur);if(ve===null||Me!==Qt){var Zt=function(Jr){var Tt=[];return Object.keys(Jr).forEach(function(Or){Jr[Or].forEach(function(Ot){var Ht=null;switch(Ot){case"bold":Ht={family:Or,weight:"bold"};break;case"italic":Ht={family:Or,style:"italic"};break;case"bolditalic":Ht={family:Or,weight:"bold",style:"italic"};break;case"":case"normal":Ht={family:Or}}Ht!==null&&(Ht.ref={name:Or,style:Ot},Tt.push(Ht))})}),Tt}(ur);ve=function(Jr){for(var Tt={},Or=0;Or<Jr.length;++Or){var Ot=q5(Jr[Or]),Ht=Ot.family,Qr=Ot.stretch,nr=Ot.style,Ct=Ot.weight;Tt[Ht]=Tt[Ht]||{},Tt[Ht][Qr]=Tt[Ht][Qr]||{},Tt[Ht][Qr][nr]=Tt[Ht][Qr][nr]||{},Tt[Ht][Qr][nr][Ct]=Ot}return Tt}(Zt.concat(gn)),Me=Qt}return ve}(this.pdf,this.fontFaces),ut=dt.map(function(St){return{family:St,stretch:"normal",weight:it,style:Re}}),qt=function(St,gn,ur){for(var Qt=(ur=ur||{}).defaultFontFamily||"times",Zt=Object.assign({},lhe,ur.genericFontFamilies||{}),Jr=null,Tt=null,Or=0;Or<gn.length;++Or)if(Zt[(Jr=q5(gn[Or])).family]&&(Jr.family=Zt[Jr.family]),St.hasOwnProperty(Jr.family)){Tt=St[Jr.family];break}if(!(Tt=Tt||St[Qt]))throw new Error("Could not find a font-family for the rule '"+k6(Jr)+"' and default family '"+Qt+"'.");if(Tt=function(Ot,Ht){if(Ht[Ot])return Ht[Ot];var Qr=gj[Ot],nr=Qr<=gj.normal?-1:1,Ct=T6(Ht,oB,Qr,nr);if(!Ct)throw new Error("Could not find a matching font-stretch value for "+Ot);return Ct}(Jr.stretch,Tt),Tt=function(Ot,Ht){if(Ht[Ot])return Ht[Ot];for(var Qr=sB[Ot],nr=0;nr<Qr.length;++nr)if(Ht[Qr[nr]])return Ht[Qr[nr]];throw new Error("Could not find a matching font-style for "+Ot)}(Jr.style,Tt),!(Tt=function(Ot,Ht){if(Ht[Ot])return Ht[Ot];if(Ot===400&&Ht[500])return Ht[500];if(Ot===500&&Ht[400])return Ht[400];var Qr=ohe[Ot],nr=T6(Ht,lB,Qr,Ot<400?-1:1);if(!nr)throw new Error("Could not find a matching font-weight for value "+Ot);return nr}(Jr.weight,Tt)))throw new Error("Failed to resolve a font for the rule '"+k6(Jr)+"'.");return Tt}(ft,ut);this.pdf.setFont(qt.ref.name,qt.ref.style)}else{var Mt="";(it==="bold"||parseInt(it,10)>=700||Re==="bold")&&(Mt="bold"),Re==="italic"&&(Mt+="italic"),Mt.length===0&&(Mt="normal");for(var kt="",Xt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},yt=0;yt<dt.length;yt++){if(this.pdf.internal.getFont(dt[yt],Mt,{noFallback:!0,disableWarning:!0})!==void 0){kt=dt[yt];break}if(Mt==="bolditalic"&&this.pdf.internal.getFont(dt[yt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)kt=dt[yt],Mt="bold";else if(this.pdf.internal.getFont(dt[yt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){kt=dt[yt],Mt="normal";break}}if(kt===""){for(var Gt=0;Gt<dt.length;Gt++)if(Xt[dt[Gt]]){kt=Xt[dt[Gt]];break}}kt=kt===""?"Times":kt,this.pdf.setFont(kt,Mt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Q){this.ctx.globalCompositeOperation=Q}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Q){this.ctx.globalAlpha=Q}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Q){this.ctx.lineDashOffset=Q,me.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Q){this.ctx.lineDash=Q,me.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Q){this.ctx.ignoreClearRect=!!Q}})};f.prototype.setLineDash=function(O){this.lineDash=O},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){S.call(this,"fill",!1)},f.prototype.stroke=function(){S.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(O,F){if(isNaN(O)||isNaN(F))throw Xr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var B=this.ctx.transform.applyToPoint(new s(O,F));this.path.push({type:"mt",x:B.x,y:B.y}),this.ctx.lastPoint=new s(O,F)},f.prototype.closePath=function(){var O=new s(0,0),F=0;for(F=this.path.length-1;F!==-1;F--)if(this.path[F].type==="begin"&&Fr(this.path[F+1])==="object"&&typeof this.path[F+1].x=="number"){O=new s(this.path[F+1].x,this.path[F+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(O.x,O.y)},f.prototype.lineTo=function(O,F){if(isNaN(O)||isNaN(F))throw Xr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var B=this.ctx.transform.applyToPoint(new s(O,F));this.path.push({type:"lt",x:B.x,y:B.y}),this.ctx.lastPoint=new s(B.x,B.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),S.call(this,null,!0)},f.prototype.quadraticCurveTo=function(O,F,B,U){if(isNaN(B)||isNaN(U)||isNaN(O)||isNaN(F))throw Xr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Y=this.ctx.transform.applyToPoint(new s(B,U)),oe=this.ctx.transform.applyToPoint(new s(O,F));this.path.push({type:"qct",x1:oe.x,y1:oe.y,x:Y.x,y:Y.y}),this.ctx.lastPoint=new s(Y.x,Y.y)},f.prototype.bezierCurveTo=function(O,F,B,U,Y,oe){if(isNaN(Y)||isNaN(oe)||isNaN(O)||isNaN(F)||isNaN(B)||isNaN(U))throw Xr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ee=this.ctx.transform.applyToPoint(new s(Y,oe)),te=this.ctx.transform.applyToPoint(new s(O,F)),le=this.ctx.transform.applyToPoint(new s(B,U));this.path.push({type:"bct",x1:te.x,y1:te.y,x2:le.x,y2:le.y,x:ee.x,y:ee.y}),this.ctx.lastPoint=new s(ee.x,ee.y)},f.prototype.arc=function(O,F,B,U,Y,oe){if(isNaN(O)||isNaN(F)||isNaN(B)||isNaN(U)||isNaN(Y))throw Xr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(oe=!!oe,!this.ctx.transform.isIdentity){var ee=this.ctx.transform.applyToPoint(new s(O,F));O=ee.x,F=ee.y;var te=this.ctx.transform.applyToPoint(new s(0,B)),le=this.ctx.transform.applyToPoint(new s(0,0));B=Math.sqrt(Math.pow(te.x-le.x,2)+Math.pow(te.y-le.y,2))}Math.abs(Y-U)>=2*Math.PI&&(U=0,Y=2*Math.PI),this.path.push({type:"arc",x:O,y:F,radius:B,startAngle:U,endAngle:Y,counterclockwise:oe})},f.prototype.arcTo=function(O,F,B,U,Y){throw new Error("arcTo not implemented.")},f.prototype.rect=function(O,F,B,U){if(isNaN(O)||isNaN(F)||isNaN(B)||isNaN(U))throw Xr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,F),this.lineTo(O+B,F),this.lineTo(O+B,F+U),this.lineTo(O,F+U),this.lineTo(O,F),this.lineTo(O+B,F),this.lineTo(O,F)},f.prototype.fillRect=function(O,F,B,U){if(isNaN(O)||isNaN(F)||isNaN(B)||isNaN(U))throw Xr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var Y={};this.lineCap!=="butt"&&(Y.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Y.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,F,B,U),this.fill(),Y.hasOwnProperty("lineCap")&&(this.lineCap=Y.lineCap),Y.hasOwnProperty("lineJoin")&&(this.lineJoin=Y.lineJoin)}},f.prototype.strokeRect=function(O,F,B,U){if(isNaN(O)||isNaN(F)||isNaN(B)||isNaN(U))throw Xr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(O,F,B,U),this.stroke())},f.prototype.clearRect=function(O,F,B,U){if(isNaN(O)||isNaN(F)||isNaN(B)||isNaN(U))throw Xr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,F,B,U))},f.prototype.save=function(O){O=typeof O!="boolean"||O;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("q");if(this.pdf.setPage(F),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var U=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=U}},f.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("Q");this.pdf.setPage(F),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(O){var F,B,U,Y;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))F=0,B=0,U=0,Y=0;else{var oe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(oe!==null)F=parseInt(oe[1]),B=parseInt(oe[2]),U=parseInt(oe[3]),Y=1;else if((oe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)F=parseInt(oe[1]),B=parseInt(oe[2]),U=parseInt(oe[3]),Y=parseFloat(oe[4]);else{if(Y=1,typeof O=="string"&&O.charAt(0)!=="#"){var ee=new Z9(O);O=ee.ok?ee.toHex():"#000000"}O.length===4?(F=O.substring(1,2),F+=F,B=O.substring(2,3),B+=B,U=O.substring(3,4),U+=U):(F=O.substring(1,3),B=O.substring(3,5),U=O.substring(5,7)),F=parseInt(F,16),B=parseInt(B,16),U=parseInt(U,16)}}return{r:F,g:B,b:U,a:Y,style:O}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(O,F,B,U){if(isNaN(F)||isNaN(B)||typeof O!="string")throw Xr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(U=isNaN(U)?void 0:U,!h.call(this)){var Y=K(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;R.call(this,{text:O,x:F,y:B,scale:oe,angle:Y,align:this.textAlign,maxWidth:U})}},f.prototype.strokeText=function(O,F,B,U){if(isNaN(F)||isNaN(B)||typeof O!="string")throw Xr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){U=isNaN(U)?void 0:U;var Y=K(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;R.call(this,{text:O,x:F,y:B,scale:oe,renderingMode:"stroke",angle:Y,align:this.textAlign,maxWidth:U})}},f.prototype.measureText=function(O){if(typeof O!="string")throw Xr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var F=this.pdf,B=this.pdf.internal.scaleFactor,U=F.internal.getFontSize(),Y=F.getStringUnitWidth(O)*U/F.internal.scaleFactor;return new function(oe){var ee=(oe=oe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ee}}),this}({width:Y*=Math.round(96*B/72*1e4)/1e4})},f.prototype.scale=function(O,F){if(isNaN(O)||isNaN(F))throw Xr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var B=new c(O,0,0,F,0,0);this.ctx.transform=this.ctx.transform.multiply(B)},f.prototype.rotate=function(O){if(isNaN(O))throw Xr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var F=new c(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(F)},f.prototype.translate=function(O,F){if(isNaN(O)||isNaN(F))throw Xr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var B=new c(1,0,0,1,O,F);this.ctx.transform=this.ctx.transform.multiply(B)},f.prototype.transform=function(O,F,B,U,Y,oe){if(isNaN(O)||isNaN(F)||isNaN(B)||isNaN(U)||isNaN(Y)||isNaN(oe))throw Xr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ee=new c(O,F,B,U,Y,oe);this.ctx.transform=this.ctx.transform.multiply(ee)},f.prototype.setTransform=function(O,F,B,U,Y,oe){O=isNaN(O)?1:O,F=isNaN(F)?0:F,B=isNaN(B)?0:B,U=isNaN(U)?1:U,Y=isNaN(Y)?0:Y,oe=isNaN(oe)?0:oe,this.ctx.transform=new c(O,F,B,U,Y,oe)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(O,F,B,U,Y,oe,ee,te,le){var Ne=this.pdf.getImageProperties(O),ve=1,Me=1,Ie=1,Q=1;U!==void 0&&te!==void 0&&(Ie=te/U,Q=le/Y,ve=Ne.width/U*te/U,Me=Ne.height/Y*le/Y),oe===void 0&&(oe=F,ee=B,F=0,B=0),U!==void 0&&te===void 0&&(te=U,le=Y),U===void 0&&te===void 0&&(te=Ne.width,le=Ne.height);var $e=this.ctx.transform.decompose(),Re=K($e.rotate.shx),it=new c,He=(it=(it=(it=it.multiply($e.translate)).multiply($e.skew)).multiply($e.scale)).applyToRectangle(new o(oe-F*Ie,ee-B*Q,U*ve,Y*Me));if(this.autoPaging){for(var Ze,nt=x.call(this,He),dt=[],ft=0;ft<nt.length;ft+=1)dt.indexOf(nt[ft])===-1&&dt.push(nt[ft]);b(dt);for(var ut=dt[0],qt=dt[dt.length-1],Mt=ut;Mt<qt+1;Mt++){this.pdf.setPage(Mt);var kt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Xt=Mt===1?this.posY+this.margin[0]:this.margin[0],yt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Gt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],St=Mt===1?0:yt+(Mt-2)*Gt;if(this.ctx.clip_path.length!==0){var gn=this.path;Ze=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=g(Ze,this.posX+this.margin[3],-St+Xt+this.ctx.prevPageLastElemOffset),_.call(this,"fill",!0),this.path=gn}var ur=JSON.parse(JSON.stringify(He));ur=g([ur],this.posX+this.margin[3],-St+Xt+this.ctx.prevPageLastElemOffset)[0];var Qt=(Mt>ut||Mt<qt)&&m.call(this);Qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],kt,Gt,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",ur.x,ur.y,ur.w,ur.h,null,null,Re),Qt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(O,"JPEG",He.x,He.y,He.w,He.h,null,null,Re)};var x=function(O,F,B){var U=[];F=F||this.pdf.internal.pageSize.width,B=B||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Y=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":U.push(Math.floor((O.y+Y)/B)+1);break;case"arc":U.push(Math.floor((O.y+Y-O.radius)/B)+1),U.push(Math.floor((O.y+Y+O.radius)/B)+1);break;case"qct":var oe=ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);U.push(Math.floor((oe.y+Y)/B)+1),U.push(Math.floor((oe.y+oe.h+Y)/B)+1);break;case"bct":var ee=pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);U.push(Math.floor((ee.y+Y)/B)+1),U.push(Math.floor((ee.y+ee.h+Y)/B)+1);break;case"rect":U.push(Math.floor((O.y+Y)/B)+1),U.push(Math.floor((O.y+O.h+Y)/B)+1)}for(var te=0;te<U.length;te+=1)for(;this.pdf.internal.getNumberOfPages()<U[te];)y.call(this);return U},y=function(){var O=this.fillStyle,F=this.strokeStyle,B=this.font,U=this.lineCap,Y=this.lineWidth,oe=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=F,this.font=B,this.lineCap=U,this.lineWidth=Y,this.lineJoin=oe},g=function(O,F,B){for(var U=0;U<O.length;U++)switch(O[U].type){case"bct":O[U].x2+=F,O[U].y2+=B;case"qct":O[U].x1+=F,O[U].y1+=B;default:O[U].x+=F,O[U].y+=B}return O},b=function(O){return O.sort(function(F,B){return F-B})},S=function(O,F){var B=this.fillStyle,U=this.strokeStyle,Y=this.lineCap,oe=this.lineWidth,ee=Math.abs(oe*this.ctx.transform.scaleX),te=this.lineJoin;if(this.autoPaging){for(var le,Ne,ve=JSON.parse(JSON.stringify(this.path)),Me=JSON.parse(JSON.stringify(this.path)),Ie=[],Q=0;Q<Me.length;Q++)if(Me[Q].x!==void 0)for(var $e=x.call(this,Me[Q]),Re=0;Re<$e.length;Re+=1)Ie.indexOf($e[Re])===-1&&Ie.push($e[Re]);for(var it=0;it<Ie.length;it++)for(;this.pdf.internal.getNumberOfPages()<Ie[it];)y.call(this);b(Ie);for(var He=Ie[0],Ze=Ie[Ie.length-1],nt=He;nt<Ze+1;nt++){this.pdf.setPage(nt),this.fillStyle=B,this.strokeStyle=U,this.lineCap=Y,this.lineWidth=ee,this.lineJoin=te;var dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ft=nt===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Mt=nt===1?0:ut+(nt-2)*qt;if(this.ctx.clip_path.length!==0){var kt=this.path;le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=g(le,this.posX+this.margin[3],-Mt+ft+this.ctx.prevPageLastElemOffset),_.call(this,O,!0),this.path=kt}if(Ne=JSON.parse(JSON.stringify(ve)),this.path=g(Ne,this.posX+this.margin[3],-Mt+ft+this.ctx.prevPageLastElemOffset),F===!1||nt===0){var Xt=(nt>He||nt<Ze)&&m.call(this);Xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,qt,null).clip().discardPath()),_.call(this,O,F),Xt&&this.pdf.restoreGraphicsState()}this.lineWidth=oe}this.path=ve}else this.lineWidth=ee,_.call(this,O,F),this.lineWidth=oe},_=function(O,F){if((O!=="stroke"||F||!v.call(this))&&(O==="stroke"||F||!h.call(this))){for(var B,U,Y=[],oe=this.path,ee=0;ee<oe.length;ee++){var te=oe[ee];switch(te.type){case"begin":Y.push({begin:!0});break;case"close":Y.push({close:!0});break;case"mt":Y.push({start:te,deltas:[],abs:[]});break;case"lt":var le=Y.length;if(oe[ee-1]&&!isNaN(oe[ee-1].x)&&(B=[te.x-oe[ee-1].x,te.y-oe[ee-1].y],le>0)){for(;le>=0;le--)if(Y[le-1].close!==!0&&Y[le-1].begin!==!0){Y[le-1].deltas.push(B),Y[le-1].abs.push(te);break}}break;case"bct":B=[te.x1-oe[ee-1].x,te.y1-oe[ee-1].y,te.x2-oe[ee-1].x,te.y2-oe[ee-1].y,te.x-oe[ee-1].x,te.y-oe[ee-1].y],Y[Y.length-1].deltas.push(B);break;case"qct":var Ne=oe[ee-1].x+2/3*(te.x1-oe[ee-1].x),ve=oe[ee-1].y+2/3*(te.y1-oe[ee-1].y),Me=te.x+2/3*(te.x1-te.x),Ie=te.y+2/3*(te.y1-te.y),Q=te.x,$e=te.y;B=[Ne-oe[ee-1].x,ve-oe[ee-1].y,Me-oe[ee-1].x,Ie-oe[ee-1].y,Q-oe[ee-1].x,$e-oe[ee-1].y],Y[Y.length-1].deltas.push(B);break;case"arc":Y.push({deltas:[],abs:[],arc:!0}),Array.isArray(Y[Y.length-1].abs)&&Y[Y.length-1].abs.push(te)}}U=F?null:O==="stroke"?"stroke":"fill";for(var Re=!1,it=0;it<Y.length;it++)if(Y[it].arc)for(var He=Y[it].abs,Ze=0;Ze<He.length;Ze++){var nt=He[Ze];nt.type==="arc"?E.call(this,nt.x,nt.y,nt.radius,nt.startAngle,nt.endAngle,nt.counterclockwise,void 0,F,!Re):D.call(this,nt.x,nt.y),Re=!0}else if(Y[it].close===!0)this.pdf.internal.out("h"),Re=!1;else if(Y[it].begin!==!0){var dt=Y[it].start.x,ft=Y[it].start.y;q.call(this,Y[it].deltas,dt,ft),Re=!0}U&&T.call(this,U),F&&L.call(this)}},j=function(O){var F=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,B=F*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-B;case"top":return O+F-B;case"hanging":return O+F-2*B;case"middle":return O+F/2-B;default:return O}},A=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(F,B){this.colorStops.push([F,B])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(O,F,B,U,Y,oe,ee,te,le){for(var Ne=se.call(this,B,U,Y,oe),ve=0;ve<Ne.length;ve++){var Me=Ne[ve];ve===0&&(le?k.call(this,Me.x1+O,Me.y1+F):D.call(this,Me.x1+O,Me.y1+F)),X.call(this,O,F,Me.x2,Me.y2,Me.x3,Me.y3,Me.x4,Me.y4)}te?L.call(this):T.call(this,ee)},T=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(O,F){this.pdf.internal.out(r(O)+" "+n(F)+" m")},R=function(O){var F;switch(O.align){case"right":case"end":F="right";break;case"center":F="center";break;default:F="left"}var B,U,Y,oe=this.pdf.getTextDimensions(O.text),ee=j.call(this,O.y),te=A.call(this,ee)-oe.h,le=this.ctx.transform.applyToPoint(new s(O.x,ee));if(this.autoPaging){var Ne=this.ctx.transform.decompose(),ve=new c;ve=(ve=(ve=ve.multiply(Ne.translate)).multiply(Ne.skew)).multiply(Ne.scale);for(var Me=this.ctx.transform.applyToRectangle(new o(O.x,ee,oe.w,oe.h)),Ie=ve.applyToRectangle(new o(O.x,te,oe.w,oe.h)),Q=x.call(this,Ie),$e=[],Re=0;Re<Q.length;Re+=1)$e.indexOf(Q[Re])===-1&&$e.push(Q[Re]);b($e);for(var it=$e[0],He=$e[$e.length-1],Ze=it;Ze<He+1;Ze++){this.pdf.setPage(Ze);var nt=Ze===1?this.posY+this.margin[0]:this.margin[0],dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ft=this.pdf.internal.pageSize.height-this.margin[2],ut=ft-this.margin[0],qt=this.pdf.internal.pageSize.width-this.margin[1],Mt=qt-this.margin[3],kt=Ze===1?0:dt+(Ze-2)*ut;if(this.ctx.clip_path.length!==0){var Xt=this.path;B=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=g(B,this.posX+this.margin[3],-1*kt+nt),_.call(this,"fill",!0),this.path=Xt}var yt=g([JSON.parse(JSON.stringify(Ie))],this.posX+this.margin[3],-kt+nt+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(U=this.pdf.internal.getFontSize(),this.pdf.setFontSize(U*O.scale),Y=this.lineWidth,this.lineWidth=Y*O.scale);var Gt=this.autoPaging!=="text";if(Gt||yt.y+yt.h<=ft){if(Gt||yt.y>=nt&&yt.x<=qt){var St=Gt?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||qt-yt.x)[0],gn=g([JSON.parse(JSON.stringify(Me))],this.posX+this.margin[3],-kt+nt+this.ctx.prevPageLastElemOffset)[0],ur=Gt&&(Ze>it||Ze<He)&&m.call(this);ur&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Mt,ut,null).clip().discardPath()),this.pdf.text(St,gn.x,gn.y,{angle:O.angle,align:F,renderingMode:O.renderingMode}),ur&&this.pdf.restoreGraphicsState()}}else yt.y<ft&&(this.ctx.prevPageLastElemOffset+=ft-yt.y);O.scale>=.01&&(this.pdf.setFontSize(U),this.lineWidth=Y)}}else O.scale>=.01&&(U=this.pdf.internal.getFontSize(),this.pdf.setFontSize(U*O.scale),Y=this.lineWidth,this.lineWidth=Y*O.scale),this.pdf.text(O.text,le.x+this.posX,le.y+this.posY,{angle:O.angle,align:F,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(U),this.lineWidth=Y)},D=function(O,F,B,U){B=B||0,U=U||0,this.pdf.internal.out(r(O+B)+" "+n(F+U)+" l")},q=function(O,F,B){return this.pdf.lines(O,F,B,null,null)},X=function(O,F,B,U,Y,oe,ee,te){this.pdf.internal.out([t(a(B+O)),t(i(U+F)),t(a(Y+O)),t(i(oe+F)),t(a(ee+O)),t(i(te+F)),"c"].join(" "))},se=function(O,F,B,U){for(var Y=2*Math.PI,oe=Math.PI/2;F>B;)F-=Y;var ee=Math.abs(B-F);ee<Y&&U&&(ee=Y-ee);for(var te=[],le=U?-1:1,Ne=F;ee>1e-5;){var ve=Ne+le*Math.min(ee,oe);te.push(Z.call(this,O,Ne,ve)),ee-=Math.abs(ve-Ne),Ne=ve}return te},Z=function(O,F,B){var U=(B-F)/2,Y=O*Math.cos(U),oe=O*Math.sin(U),ee=Y,te=-oe,le=ee*ee+te*te,Ne=le+ee*Y+te*oe,ve=4/3*(Math.sqrt(2*le*Ne)-Ne)/(ee*oe-te*Y),Me=ee-ve*te,Ie=te+ve*ee,Q=Me,$e=-Ie,Re=U+F,it=Math.cos(Re),He=Math.sin(Re);return{x1:O*Math.cos(F),y1:O*Math.sin(F),x2:Me*it-Ie*He,y2:Me*He+Ie*it,x3:Q*it-$e*He,y3:Q*He+$e*it,x4:O*Math.cos(B),y4:O*Math.sin(B)}},K=function(O){return 180*O/Math.PI},ie=function(O,F,B,U,Y,oe){var ee=O+.5*(B-O),te=F+.5*(U-F),le=Y+.5*(B-Y),Ne=oe+.5*(U-oe),ve=Math.min(O,Y,ee,le),Me=Math.max(O,Y,ee,le),Ie=Math.min(F,oe,te,Ne),Q=Math.max(F,oe,te,Ne);return new o(ve,Ie,Me-ve,Q-Ie)},pe=function(O,F,B,U,Y,oe,ee,te){var le,Ne,ve,Me,Ie,Q,$e,Re,it,He,Ze,nt,dt,ft,ut=B-O,qt=U-F,Mt=Y-B,kt=oe-U,Xt=ee-Y,yt=te-oe;for(Ne=0;Ne<41;Ne++)it=($e=(ve=O+(le=Ne/40)*ut)+le*((Ie=B+le*Mt)-ve))+le*(Ie+le*(Y+le*Xt-Ie)-$e),He=(Re=(Me=F+le*qt)+le*((Q=U+le*kt)-Me))+le*(Q+le*(oe+le*yt-Q)-Re),Ne==0?(Ze=it,nt=He,dt=it,ft=He):(Ze=Math.min(Ze,it),nt=Math.min(nt,He),dt=Math.max(dt,it),ft=Math.max(ft,He));return new o(Math.round(Ze),Math.round(nt),Math.round(dt-Ze),Math.round(ft-nt))},me=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,F,B=(O=this.ctx.lineDash,F=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:F}));this.prevLineDash!==B&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=B)}}})(At.API),function(e){var t=function(s){var o,c,u,d,f,p,h,v,m,x;for(c=[],u=0,d=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;d>u;u+=4)(f=(s.charCodeAt(u)<<24)+(s.charCodeAt(u+1)<<16)+(s.charCodeAt(u+2)<<8)+s.charCodeAt(u+3))!==0?(p=(f=((f=((f=((f=(f-(x=f%85))/85)-(m=f%85))/85)-(v=f%85))/85)-(h=f%85))/85)%85,c.push(p+33,h+33,v+33,m+33,x+33)):c.push(122);return function(y,g){for(var b=g;b>0;b--)y.pop()}(c,o.length),String.fromCharCode.apply(String,c)+"~>"},r=function(s){var o,c,u,d,f,p=String,h="length",v=255,m="charCodeAt",x="slice",y="replace";for(s[x](-2),s=s[x](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),u=[],d=0,f=(s+=o="uuuuu"[x](s[h]%5||5))[h];f>d;d+=5)c=52200625*(s[m](d)-33)+614125*(s[m](d+1)-33)+7225*(s[m](d+2)-33)+85*(s[m](d+3)-33)+(s[m](d+4)-33),u.push(v&c>>24,v&c>>16,v&c>>8,v&c);return function(g,b){for(var S=b;S>0;S--)g.pop()}(u,o[h]),p.fromCharCode.apply(p,u)},n=function(s){return s.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var c="",u=0;u<s.length;u+=2)c+=String.fromCharCode("0x"+(s[u]+s[u+1]));return c},i=function(s){for(var o=new Uint8Array(s.length),c=s.length;c--;)o[c]=s.charCodeAt(c);return(o=cj(o)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};e.processDataByFilters=function(s,o){var c=0,u=s||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),c=0;c<o.length;c+=1)switch(o[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=t(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(At.API),function(e){e.loadFile=function(t,r,n){return function(a,i,s){i=i!==!1,s=typeof s=="function"?s:function(){};var o=void 0;try{o=function(c,u,d){var f=new XMLHttpRequest,p=0,h=function(v){var m=v.length,x=[],y=String.fromCharCode;for(p=0;p<m;p+=1)x.push(y(255&v.charCodeAt(p)));return x.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(h(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return h(f.responseText)}(a,i,s)}catch{}return o}(t,r,n)},e.loadImageFile=e.loadFile}(At.API),function(e){function t(){return(Bt.html2canvas?Promise.resolve(Bt.html2canvas):ly(()=>import("./html2canvas.esm-CBrSDip1.js"),[],import.meta.url)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Bt.DOMPurify?Promise.resolve(Bt.DOMPurify):ly(()=>import("./purify.es-B9ZVCkUG.js"),[],import.meta.url)).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var c=Fr(o);return c==="undefined"?"undefined":c==="string"||o instanceof String?"string":c==="number"||o instanceof Number?"number":c==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(o,c){var u=document.createElement(o);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},i=function o(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(o(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},s=function o(c){var u=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),u);return(d=d.setProgress(1,o,1,[o])).set(c)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,c){return o.__proto__=c||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),c){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:o,dompurify:u})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var v=d[h],m=v.src.find(function(x){return x.format==="truetype"});m&&u.addFont(m.url,v.ref.name,v.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,u.context2d.save(!0),c(this.prop.container,p)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(o,c):this.outputPdf(o,c)},s.prototype.outputPdf=function(o,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,c)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(n(o)!=="object")return this;var c=Object.keys(o||{}).map(function(u){if(u in s.template.prop)return function(){this.prop[u]=o[u]};switch(u){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[u]=o[u]}}},this);return this.then(function(){return this.thenList(c)})},s.prototype.get=function(o,c){return this.then(function(){var u=o in s.template.prop?this.prop[o]:this.opt[o];return c?c(u):u})},s.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(o=o||At.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:c(o.inner.width,o.k),height:c(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,c,u,d){return o!=null&&(this.progress.val=o),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,c,u,d){return this.setProgress(o?this.progress.val+o:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(o,c){var u=this;return this.thenCore(o,c,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(p){return u.updateProgress(null,d),p}).then(d,f).then(function(p){return u.updateProgress(1),p})})},s.prototype.thenCore=function(o,c,u){u=u||Promise.prototype.then;var d=this;o&&(o=o.bind(d)),c&&(c=c.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:s.convert(Object.assign({},d),Promise.prototype),p=u.call(f,o,c);return s.convert(p,d.__proto__)},s.prototype.thenExternal=function(o,c){return Promise.prototype.then.call(this,o,c)},s.prototype.thenList=function(o){var c=this;return o.forEach(function(u){c=c.thenCore(u)}),c},s.prototype.catch=function(o){o&&(o=o.bind(this));var c=Promise.prototype.catch.call(this,o);return s.convert(c,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,At.getPageSize=function(o,c,u){if(Fr(o)==="object"){var d=o;o=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",o=(""+(o||"P")).toLowerCase();var f,p=(""+u).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var v,m=0,x=0;if(h.hasOwnProperty(p))m=h[p][1]/f,x=h[p][0]/f;else try{m=u[1],x=u[0]}catch{throw new Error("Invalid format: "+u)}if(o==="p"||o==="portrait")o="p",x>m&&(v=x,x=m,m=v);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",m>x&&(v=x,x=m,m=v)}return{width:x,height:m,unit:c,k:f,orientation:o}},e.html=function(o,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(q5):null;var u=new s(c);return c.worker?u:u.from(o).doCallback()}}(At.API),At.API.addJS=function(e){return L6=e,this.internal.events.subscribe("postPutResources",function(){Ox=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ox+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),P6=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+L6+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ox!==void 0&&P6!==void 0&&this.internal.out("/Names <</JavaScript "+Ox+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var s=a[i],o=n.exec(s);if(o!=null){var c=o[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(s)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(i=0;i<u;i++){var f=r.internal.newObject();d.push(f);var p=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var h=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<d.length;i++)r.internal.write("(page_"+(i+1)+")"+d[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+h+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,i){var s={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(s),s},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var s=n.children[i];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var o=this.count=this.count_r({count:0},s);if(o>0&&this.line("/Count "+o),s.options&&s.options.pageNumber){var c=r.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])}(At.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,i,s,o){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=s||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(f){for(var p,h=256*f.charCodeAt(4)+f.charCodeAt(5),v=f.length,m={width:0,height:0,numcomponents:1},x=4;x<v;x+=2){if(x+=h,t.indexOf(f.charCodeAt(x+1))!==-1){p=256*f.charCodeAt(x+5)+f.charCodeAt(x+6),m={width:256*f.charCodeAt(x+7)+f.charCodeAt(x+8),height:p,numcomponents:f.charCodeAt(x+9)};break}h=256*f.charCodeAt(x+2)+f.charCodeAt(x+3)}return m}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(At.API),At.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var a,i=Gfe(e,{checkCrc:!0}),s=i.width,o=i.height,c=i.channels,u=i.palette,d=i.depth;a=u&&c===1?function(E){for(var T=E.width,L=E.height,k=E.data,R=E.palette,D=E.depth,q=!1,X=[],se=[],Z=void 0,K=!1,ie=0,pe=0;pe<R.length;pe++){var me=MO(R[pe],4),O=me[0],F=me[1],B=me[2],U=me[3];X.push(O,F,B),U!=null&&(U===0?(ie++,se.length<1&&se.push(pe)):U<255&&(K=!0))}if(K||ie>1){q=!0,se=void 0;var Y=T*L;Z=new Uint8Array(Y);for(var oe=new DataView(k.buffer),ee=0;ee<Y;ee++){var te=W5(oe,ee,D),le=MO(R[te],4)[3];Z[ee]=le}}else ie===0&&(se=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:q?8:void 0,colorBytes:k,alphaBytes:Z,needSMask:q,palette:X,mask:se}}(i):c===2||c===4?function(E){for(var T=E.data,L=E.width,k=E.height,R=E.channels,D=E.depth,q=R===2?"DeviceGray":"DeviceRGB",X=R-1,se=L*k,Z=X,K=se*Z,ie=1*se,pe=Math.ceil(K*D/8),me=Math.ceil(ie*D/8),O=new Uint8Array(pe),F=new Uint8Array(me),B=new DataView(T.buffer),U=new DataView(O.buffer),Y=new DataView(F.buffer),oe=!1,ee=0;ee<se;ee++){for(var te=ee*R,le=0;le<Z;le++)z6(U,W5(B,te+le,D),ee*Z+le,D);var Ne=W5(B,te+Z,D);Ne<(1<<D)-1&&(oe=!0),z6(Y,Ne,1*ee,D)}return{colorSpace:q,colorsPerPixel:X,sMaskBitsPerComponent:oe?D:void 0,colorBytes:O,alphaBytes:F,needSMask:oe}}(i):function(E){var T=E.data,L=E.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:L,colorsPerPixel:L==="DeviceGray"?1:3,colorBytes:T instanceof Uint16Array?function(k){for(var R=k.length,D=new Uint8Array(2*R),q=new DataView(D.buffer,D.byteOffset,D.byteLength),X=0;X<R;X++)q.setUint16(2*X,k[X],!1);return D}(T):T,needSMask:!1}}(i);var f,p,h,v=a,m=v.colorSpace,x=v.colorsPerPixel,y=v.sMaskBitsPerComponent,g=v.colorBytes,b=v.alphaBytes,S=v.needSMask,_=v.palette,j=v.mask,A=null;return n!==At.API.image_compression.NONE&&typeof cj=="function"?(A=function(E){var T;switch(E){case At.API.image_compression.FAST:T=11;break;case At.API.image_compression.MEDIUM:T=13;break;case At.API.image_compression.SLOW:T=14;break;default:T=12}return T}(n),f=this.decode.FLATE_DECODE,p="/Predictor ".concat(A," /Colors ").concat(x," /BitsPerComponent ").concat(d," /Columns ").concat(s),e=M6(g,Math.ceil(s*x*d/8),x,d,n),S&&(h=M6(b,Math.ceil(s*y/8),1,y,n))):(f=void 0,p=void 0,e=g,S&&(h=b)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:r,data:e,index:t,filter:f,decodeParameters:p,transparency:j,palette:_,sMask:h,predictor:A,width:s,height:o,bitsPerComponent:d,sMaskBitsPerComponent:y,colorSpace:m}}},function(e){e.processGIF89A=function(t,r,n,a){var i=new phe(t),s=i.width,o=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:s,height:o},d=new V5(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(At.API),bo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},bo.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Xr.log("bit decode error:"+r)}},bo.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var c=this.palette[i>>7-o&1];this.data[s+4*o]=c.blue,this.data[s+4*o+1]=c.green,this.data[s+4*o+2]=c.red,this.data[s+4*o+3]=255}r!==0&&(this.pos+=4-r)}},bo.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+2*a*4,o=i>>4,c=15&i,u=this.palette[o];if(this.data[s]=u.blue,this.data[s+1]=u.green,this.data[s+2]=u.red,this.data[s+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[s+4]=u.blue,this.data[s+4+1]=u.green,this.data[s+4+2]=u.red,this.data[s+4+3]=255}t!==0&&(this.pos+=4-t)}},bo.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var s=this.palette[a];this.data[i]=s.red,this.data[i+1]=s.green,this.data[i+2]=s.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},bo.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(i&t)/t*255|0,o=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,u=i>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=o,this.data[d+2]=s,this.data[d+3]=u}this.pos+=e}},bo.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,c=(s>>5&r)/r*255|0,u=(s>>11)/t*255|0,d=a*this.width*4+4*i;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},bo.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;this.data[s]=i,this.data[s+1]=a,this.data[s+2]=n,this.data[s+3]=255}this.pos+=this.width%4}},bo.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=s}},bo.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var i=new bo(t,!1),s=i.width,o=i.height,c={data:i.getData(),width:s,height:o},u=new V5(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(At.API),H6.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var i=new H6(t),s=i.width,o=i.height,c={data:i.getData(),width:s,height:o},u=new V5(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(At.API),At.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,i=new Uint8Array(a/4*3),s=new Uint8Array(a/4),o=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],p=n[u+2],h=n[u+3];i[o++]=d,i[o++]=f,i[o++]=p,s[c++]=h}var v=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:v,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},At.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},fh=At.API,Px=fh.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),s=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,c=o.fof?o.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,p=0,h=e.length,v=0,m=o[0]||c,x=[];for(r=0;r<h;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?x.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+s*(1e3/i)||0)/1e3):(p=f&&Fr(u[n])==="object"&&!isNaN(parseInt(u[n][v],10))?u[n][v]/d:0,x.push((o[n]||m)/c+p)),v=n;return x},R6=fh.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return fh.processArabic&&(e=fh.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:Px.apply(this,arguments).reduce(function(i,s){return i+s},0)},I6=function(e,t,r,n){for(var a=[],i=0,s=e.length,o=0;i!==s&&o+t[i]<r;)o+=t[i],i++;a.push(e.slice(0,i));var c=i;for(o=0;i!==s;)o+t[i]>n&&(a.push(e.slice(c,i)),o=0,c=i),o+=t[i],i++;return c!==i&&a.push(e.slice(c,i)),a},D6=function(e,t,r){r||(r={});var n,a,i,s,o,c,u,d=[],f=[d],p=r.textIndent||0,h=0,v=0,m=e.split(" "),x=Px.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?m[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),g=[];m.map(function(S){(S=S.split(/\s*\n/)).length>1?g=g.concat(S.map(function(_,j){return(j&&_.length?`
`:"")+_})):g.push(S[0])}),m=g,c=R6.apply(this,[y,r])}for(i=0,s=m.length;i<s;i++){var b=0;if(n=m[i],c&&n[0]==`
`&&(n=n.substr(1),b=1),p+h+(v=(a=Px.apply(this,[n,r])).reduce(function(S,_){return S+_},0))>t||b){if(v>t){for(o=I6.apply(this,[n,a,t-(p+h),t]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);v=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(S,_){return S+_},0)}else d=[n];f.push(d),p=v+c,h=x}else d.push(n),p+=h+v,h=x}return u=c?function(S,_){return(_?y:"")+S.join(" ")}:function(S){return S.join(" ")},f.map(u)},fh.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),p="Unicode";return f.metadata[p]?{widths:f.metadata[p].widths||{0:1},kerning:f.metadata[p].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var s=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var o,c,u=[];for(o=0,c=n.length;o<c;o++)u=u.concat(D6.apply(this,[n[o],s,i]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},i=0;i<16;i++)n[r[i]]=t[i],a[t[i]]=r[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=e.__fontmetrics__.compress=function(p){var h,v,m,x,y=["{"];for(var g in p){if(h=p[g],isNaN(parseInt(g,10))?v="'"+g+"'":(g=parseInt(g,10),v=(v=s(g).slice(2)).slice(0,-1)+a[v.slice(-1)]),typeof h=="number")h<0?(m=s(h).slice(3),x="-"):(m=s(h).slice(2),x=""),m=x+m.slice(0,-1)+a[m.slice(-1)];else{if(Fr(h)!=="object")throw new Error("Don't know what to do with value type "+Fr(h)+".");m=o(h)}y.push(v+m)}return y.push("}"),y.join("")},c=e.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,v,m,x,y={},g=1,b=y,S=[],_="",j="",A=p.length-1,E=1;E<A;E+=1)(x=p[E])=="'"?h?(m=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(S.push([b,m]),b={},m=void 0):x=="}"?((v=S.pop())[0][v[1]]=b,m=void 0,b=v[0]):x=="-"?g=-1:m===void 0?n.hasOwnProperty(x)?(_+=n[x],m=parseInt(_,16)*g,g=1,_=""):_+=x:n.hasOwnProperty(x)?(j+=n[x],b[m]=parseInt(j,16)*g,g=1,m=void 0,j=""):j+=x;return y},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(p){var h=p.font,v=f.Unicode[h.postScriptName];v&&(h.metadata.Unicode={},h.metadata.Unicode.widths=v.widths,h.metadata.Unicode.kerning=v.kerning);var m=d.Unicode[h.postScriptName];m&&(h.metadata.Unicode.encoding=m,h.encoding=m.codePages[0])}])}(At.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=r.charCodeAt(i);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(s,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(uy(o)),s.metadata=e.API.TTFFont.open(o),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(a,n)}}])}(At),At.API.addSvgAsImage=function(e,t,r,n,a,i,s,o){if(isNaN(t)||isNaN(r))throw Xr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw Xr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(Bt.canvg?Promise.resolve(Bt.canvg):ly(()=>import("./index.es-DnEEnwJr.js"),[],import.meta.url)).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(u,e,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(d)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),t,r,n,a,s,o)})},At.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},At.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,i,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),c=[],u=0,d=0,f=0;function p(v,m){var x,y=!1;for(x=0;x<v.length;x+=1)v[x]===m&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var h=o.length;for(f=0;f<h;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(Fr(e)==="object"){for(a in e)if(i=e[a],p(o,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&p(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(u=0;u<i.length;u+=1)if(n=!0,i[u].length===1&&typeof i[u][0]=="number")c.push(String(i[u]-1));else if(i[u].length>1){for(d=0;d<i[u].length;d+=1)typeof i[u][d]!="number"&&(n=!1);n===!0&&c.push([i[u][0]-1,i[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,m=[];for(v in r)r[v].explicitSet===!0&&(r[v].type==="name"?m.push("/"+v+" /"+r[v].value):m.push("/"+v+" "+r[v].value));m.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+m.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+s.length+o.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+i+s+o+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(At.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,s){for(var o,c=s.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,p=i.length;f<p;++f){if(o=s.metadata.characterToGlyph(i.charCodeAt(f)),s.metadata.glyIdsUsed.push(o),s.metadata.toUnicode[o]=i.charCodeAt(f),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(s.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},n=function(i){var s,o,c,u,d,f,p;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,p=(o=Object.keys(i).sort(function(h,v){return h-v})).length;f<p;f++)s=o[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[s]!==void 0&&i[s]!==null&&typeof i[s].toString=="function"&&(u=("0000"+i[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),c.push("<"+s+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(s){var o=s.font,c=s.out,u=s.newObject,d=s.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),h="",v=0;v<p.length;v++)h+=String.fromCharCode(p[v]);var m=u();d({data:h,addLength1:!0,objectId:m}),c("endobj");var x=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+bh(o.fontName)),c("/FontFile2 "+m+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var g=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+bh(o.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+x+" 0 R"),c("/BaseFont /"+bh(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+g+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(s){var o=s.font,c=s.out,u=s.newObject,d=s.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,p="",h=0;h<f.length;h++)p+=String.fromCharCode(f[h]);var v=u();d({data:p,addLength1:!0,objectId:v}),c("endobj");var m=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:m}),c("endobj");var x=u();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+v+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+bh(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=u();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+m+" 0 R/BaseFont/"+bh(o.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(i)}]);var a=function(i){var s,o=i.text||"",c=i.x,u=i.y,d=i.options||{},f=i.mutex||{},p=f.pdfEscape,h=f.activeFontKey,v=f.fonts,m=h,x="",y=0,g="",b=v[m].encoding;if(v[m].encoding!=="Identity-H")return{text:o,x:c,y:u,options:d,mutex:f};for(g=o,m=h,Array.isArray(o)&&(g=o[0]),y=0;y<g.length;y+=1)v[m].metadata.hasOwnProperty("cmap")&&(s=v[m].metadata.cmap.unicode.codeMap[g[y].charCodeAt(0)]),s||g[y].charCodeAt(0)<256&&v[m].metadata.hasOwnProperty("Unicode")?x+=g[y]:x+="";var S="";return parseInt(m.slice(1))<14||b==="WinAnsiEncoding"?S=p(x,m).split("").map(function(_){return _.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(S=r(x,v[m])),f.isHex=!0,{text:S,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(i){var s=i.text||"",o=[],c={text:s,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(s)){var u=0;for(u=0;u<s.length;u+=1)Array.isArray(s[u])&&s[u].length===3?o.push([a(Object.assign({},c,{text:s[u][0]})).text,s[u][1],s[u][2]]):o.push(a(Object.assign({},c,{text:s[u]})).text);i.text=o}else i.text=a(Object.assign({},c,{text:s})).text}])}(At),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(At.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,i,s,o,c,u,d,f=t,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},m={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,b=0;this.__bidiEngine__={};var S=function(k){var R=k.charCodeAt(),D=R>>8,q=m[D];return q!==void 0?f[256*q+(255&R)]:D===252||D===253?"AL":y.test(D)?"L":D===8?"R":"N"},_=function(k){for(var R,D=0;D<k.length;D++){if((R=S(k.charAt(D)))==="L")return!1;if(R==="R")return!0}return!1},j=function(k,R,D,q){var X,se,Z,K,ie=R[q];switch(ie){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"N":case"AN":break;case"EN":g&&(ie="AN");break;case"AL":g=!0,ie="R";break;case"WS":case"BN":ie="N";break;case"CS":q<1||q+1>=R.length||(X=D[q-1])!=="EN"&&X!=="AN"||(se=R[q+1])!=="EN"&&se!=="AN"?ie="N":g&&(se="AN"),ie=se===X?se:"N";break;case"ES":ie=(X=q>0?D[q-1]:"B")==="EN"&&q+1<R.length&&R[q+1]==="EN"?"EN":"N";break;case"ET":if(q>0&&D[q-1]==="EN"){ie="EN";break}if(g){ie="N";break}for(Z=q+1,K=R.length;Z<K&&R[Z]==="ET";)Z++;ie=Z<K&&R[Z]==="EN"?"EN":"N";break;case"NSM":if(s&&!o){for(K=R.length,Z=q+1;Z<K&&R[Z]==="NSM";)Z++;if(Z<K){var pe=k[q],me=pe>=1425&&pe<=2303||pe===64286;if(X=R[Z],me&&(X==="R"||X==="AL")){ie="R";break}}}ie=q<1||(X=R[q-1])==="B"?"N":D[q-1];break;case"B":g=!1,a=!0,ie=b;break;case"S":i=!0,ie="N"}return ie},A=function(k,R,D){var q=k.split("");return D&&E(q,D,{hiLevel:b}),q.reverse(),R&&R.reverse(),q.join("")},E=function(k,R,D){var q,X,se,Z,K,ie=-1,pe=k.length,me=0,O=[],F=b?h:p,B=[];for(g=!1,a=!1,i=!1,X=0;X<pe;X++)B[X]=S(k[X]);for(se=0;se<pe;se++){if(K=me,O[se]=j(k,B,O,se),q=240&(me=F[K][v[O[se]]]),me&=15,R[se]=Z=F[me][5],q>0)if(q===16){for(X=ie;X<se;X++)R[X]=1;ie=-1}else ie=-1;if(F[me][6])ie===-1&&(ie=se);else if(ie>-1){for(X=ie;X<se;X++)R[X]=Z;ie=-1}B[se]==="B"&&(R[se]=0),D.hiLevel|=Z}i&&function(U,Y,oe){for(var ee=0;ee<oe;ee++)if(U[ee]==="S"){Y[ee]=b;for(var te=ee-1;te>=0&&U[te]==="WS";te--)Y[te]=b}}(B,R,pe)},T=function(k,R,D,q,X){if(!(X.hiLevel<k)){if(k===1&&b===1&&!a)return R.reverse(),void(D&&D.reverse());for(var se,Z,K,ie,pe=R.length,me=0;me<pe;){if(q[me]>=k){for(K=me+1;K<pe&&q[K]>=k;)K++;for(ie=me,Z=K-1;ie<Z;ie++,Z--)se=R[ie],R[ie]=R[Z],R[Z]=se,D&&(se=D[ie],D[ie]=D[Z],D[Z]=se);me=K}me++}}},L=function(k,R,D){var q=k.split(""),X={hiLevel:b};return D||(D=[]),E(q,D,X),function(se,Z,K){if(K.hiLevel!==0&&d)for(var ie,pe=0;pe<se.length;pe++)Z[pe]===1&&(ie=x.indexOf(se[pe]))>=0&&(se[pe]=x[ie+1])}(q,D,X),T(2,q,R,D,X),T(1,q,R,D,X),q.join("")};return this.__bidiEngine__.doBidiReorder=function(k,R,D){if(function(X,se){if(se)for(var Z=0;Z<X.length;Z++)se[Z]=Z;o===void 0&&(o=_(X)),u===void 0&&(u=_(X))}(k,R),s||!c||u)if(s&&c&&o^u)b=o?1:0,k=A(k,R,D);else if(!s&&c&&u)b=o?1:0,k=L(k,R,D),k=A(k,R);else if(!s||o||c||u){if(s&&!c&&o^u)k=A(k,R),o?(b=0,k=L(k,R,D)):(b=1,k=L(k,R,D),k=A(k,R));else if(s&&o&&!c&&u)b=1,k=L(k,R,D),k=A(k,R);else if(!s&&!c&&o^u){var q=d;o?(b=1,k=L(k,R,D),b=0,d=!1,k=L(k,R,D),d=q):(b=0,k=L(k,R,D),k=A(k,R),b=1,d=!1,k=L(k,R,D),d=q,k=A(k,R))}}else b=0,k=L(k,R,D);else b=o?1:0,k=L(k,R,D);return k},this.__bidiEngine__.setOptions=function(k){k&&(s=k.isInputVisual,c=k.isOutputVisual,o=k.isInputRtl,u=k.isOutputRtl,d=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var s=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(s=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?s.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):s.push([r.doBidiReorder(a[o])]);n.text=s}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(At),At.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Vu(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Che(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new mhe(this.contents),this.head=new vhe(this),this.name=new _he(this),this.cmap=new uB(this),this.toUnicode={},this.hhea=new xhe(this),this.maxp=new She(this),this.hmtx=new Nhe(this),this.post=new bhe(this),this.os2=new yhe(this),this.loca=new The(this),this.glyf=new jhe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,o,c,u;for(u=[],s=0,o=(c=this.bbox).length;s<o;s++)t=c[s],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,i,s,o;for(s=0,i=0,o=(t=""+t).length;0<=o?i<o:i>o;i=0<=o?++i:--i)a=t.charCodeAt(i),s+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return s*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var zo,Vu=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,i,s,o,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^s)+256*(255^o)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*i+65536*s+256*o+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,i;for(i=[],n=0,a=t.length;n<a;n++)r=t[n],i.push(this.writeByte(r));return i},e}(),mhe=function(){var e;function t(r){var n,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,i,s,o,c,u,d,f,p,h,v,m;for(m in h=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(h)/c),s=Math.floor(f/c),d=16*h-f,(a=new Vu).writeInt(this.scalarType),a.writeShort(h),a.writeShort(f),a.writeShort(s),a.writeShort(d),i=16*h,u=a.pos+i,o=null,v=[],r)for(p=r[m],a.writeString(m),a.writeInt(e(p)),a.writeInt(u),a.writeInt(p.length),v=v.concat(p),m==="head"&&(o=u),u+=p.length;u%4;)v.push(0),u++;return a.write(v),n=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(n),a.data},e=function(r){var n,a,i,s;for(r=dB.call(r);r.length%4;)r.push(0);for(i=new Vu(r),a=0,n=0,s=r.length;n<s;n=n+=4)a+=i.readUInt32();return 4294967295&a},t}(),ghe={}.hasOwnProperty,bl=function(e,t){for(var r in t)ghe.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};zo=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var vhe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bl(e,zo),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Vu).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),W6=function(){function e(t,r){var n,a,i,s,o,c,u,d,f,p,h,v,m,x,y,g,b;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(h=t.readUInt16(),p=h/2,t.pos+=6,i=function(){var S,_;for(_=[],c=S=0;0<=p?S<p:S>p;c=0<=p?++S:--S)_.push(t.readUInt16());return _}(),t.pos+=2,m=function(){var S,_;for(_=[],c=S=0;0<=p?S<p:S>p;c=0<=p?++S:--S)_.push(t.readUInt16());return _}(),u=function(){var S,_;for(_=[],c=S=0;0<=p?S<p:S>p;c=0<=p?++S:--S)_.push(t.readUInt16());return _}(),d=function(){var S,_;for(_=[],c=S=0;0<=p?S<p:S>p;c=0<=p?++S:--S)_.push(t.readUInt16());return _}(),a=(this.length-t.pos+this.offset)/2,o=function(){var S,_;for(_=[],c=S=0;0<=a?S<a:S>a;c=0<=a?++S:--S)_.push(t.readUInt16());return _}(),c=y=0,b=i.length;y<b;c=++y)for(x=i[c],n=g=v=m[c];v<=x?g<=x:g>=x;n=v<=x?++g:--g)d[c]===0?s=n+u[c]:(s=o[d[c]/2+(n-v)-(p-c)]||0)!==0&&(s+=u[c]),this.codeMap[n]=65535&s}t.pos=f}return e.encode=function(t,r){var n,a,i,s,o,c,u,d,f,p,h,v,m,x,y,g,b,S,_,j,A,E,T,L,k,R,D,q,X,se,Z,K,ie,pe,me,O,F,B,U,Y,oe,ee,te,le,Ne,ve;switch(q=new Vu,s=Object.keys(t).sort(function(Me,Ie){return Me-Ie}),r){case"macroman":for(m=0,x=function(){var Me=[];for(v=0;v<256;++v)Me.push(0);return Me}(),g={0:0},i={},X=0,ie=s.length;X<ie;X++)g[te=t[a=s[X]]]==null&&(g[te]=++m),i[a]={old:t[a],new:g[t[a]]},x[a]=g[t[a]];return q.writeUInt16(1),q.writeUInt16(0),q.writeUInt32(12),q.writeUInt16(0),q.writeUInt16(262),q.writeUInt16(0),q.write(x),{charMap:i,subtable:q.data,maxGlyphID:m+1};case"unicode":for(R=[],f=[],b=0,g={},n={},y=u=null,se=0,pe=s.length;se<pe;se++)g[_=t[a=s[se]]]==null&&(g[_]=++b),n[a]={old:_,new:g[_]},o=g[_]-a,y!=null&&o===u||(y&&f.push(y),R.push(a),u=o),y=a;for(y&&f.push(y),f.push(65535),R.push(65535),L=2*(T=R.length),E=2*Math.pow(Math.log(T)/Math.LN2,2),p=Math.log(E/2)/Math.LN2,A=2*T-E,c=[],j=[],h=[],v=Z=0,me=R.length;Z<me;v=++Z){if(k=R[v],d=f[v],k===65535){c.push(0),j.push(0);break}if(k-(D=n[k].new)>=32768)for(c.push(0),j.push(2*(h.length+T-v)),a=K=k;k<=d?K<=d:K>=d;a=k<=d?++K:--K)h.push(n[a].new);else c.push(D-k),j.push(0)}for(q.writeUInt16(3),q.writeUInt16(1),q.writeUInt32(12),q.writeUInt16(4),q.writeUInt16(16+8*T+2*h.length),q.writeUInt16(0),q.writeUInt16(L),q.writeUInt16(E),q.writeUInt16(p),q.writeUInt16(A),oe=0,O=f.length;oe<O;oe++)a=f[oe],q.writeUInt16(a);for(q.writeUInt16(0),ee=0,F=R.length;ee<F;ee++)a=R[ee],q.writeUInt16(a);for(le=0,B=c.length;le<B;le++)o=c[le],q.writeUInt16(o);for(Ne=0,U=j.length;Ne<U;Ne++)S=j[Ne],q.writeUInt16(S);for(ve=0,Y=h.length;ve<Y;ve++)m=h[ve],q.writeUInt16(m);return{charMap:n,subtable:q.data,maxGlyphID:b+1}}},e}(),uB=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bl(e,zo),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new W6(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,a;return r==null&&(r="macroman"),n=W6.encode(t,r),(a=new Vu).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},e}(),xhe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bl(e,zo),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),yhe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bl(e,zo),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),bhe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bl(e,zo),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var s,o,c;for(c=[],i=s=0,o=this.file.maxp.numGlyphs;0<=o?s<o:s>o;i=0<=o?++s:--s)c.push(t.readUInt32());return c}).call(this)}},e}(),whe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},_he=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bl(e,zo),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,a,i,s,o,c,u,d,f,p;for(t.pos=this.offset,t.readShort(),r=t.readShort(),o=t.readShort(),n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(c={},i=d=0,f=n.length;d<f;i=++d)a=n[i],t.pos=a.offset,u=t.readString(a.length),s=new whe(u,a),c[p=a.nameID]==null&&(c[p]=[]),c[a.nameID].push(s);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),She=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bl(e,zo),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),Nhe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bl(e,zo),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,a,i,s,o,c;for(t.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)d.push(t.readInt16());return d}(),this.widths=(function(){var u,d,f,p;for(p=[],u=0,d=(f=this.metrics).length;u<d;u++)i=f[u],p.push(i.advance);return p}).call(this),n=this.widths[this.widths.length-1],c=[],r=s=0;0<=a?s<a:s>a;r=0<=a?++s:--s)c.push(this.widths.push(n));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),dB=[].slice,jhe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bl(e,zo),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,a,i,s,o,c,u,d,f;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,n=i.indexOf(t),(a=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,s=(o=new Vu(r.read(a))).readShort(),u=o.readShort(),f=o.readShort(),c=o.readShort(),d=o.readShort(),this.cache[t]=s===-1?new Ehe(o,u,f,c,d):new Ahe(o,s,u,f,c,d),this.cache[t]))},e.prototype.encode=function(t,r,n){var a,i,s,o,c;for(s=[],i=[],o=0,c=r.length;o<c;o++)a=t[r[o]],i.push(s.length),a&&(s=s.concat(a.encode(n)));return i.push(s.length),{table:s,offsets:i}},e}(),Ahe=function(){function e(t,r,n,a,i,s){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=s,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Ehe=function(){function e(t,r,n,a,i){var s,o;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Vu(dB.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),The=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bl(e,zo),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),a=0,i=0,s=0;s<n.length;++s)if(n[s]=a,i<r.length&&r[i]==s){++i,n[s]=a;var o=this.offsets[s],c=this.offsets[s+1]-o;c>0&&(a+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},e}(),Che=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,i;for(r in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,i,s,o,c;for(a={},s=0,o=t.length;s<o;s++)a[i=t[s]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(n=a[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],a[i]=n;return a},e.prototype.encode=function(t,r){var n,a,i,s,o,c,u,d,f,p,h,v,m,x,y;for(a in n=uB.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(t),h={0:0},y=n.charMap)h[(c=y[a]).old]=c.new;for(v in p=n.maxGlyphID,s)v in h||(h[v]=p++);return d=function(g){var b,S;for(b in S={},g)S[g[b]]=b;return S}(h),f=Object.keys(d).sort(function(g,b){return g-b}),m=function(){var g,b,S;for(S=[],g=0,b=f.length;g<b;g++)o=f[g],S.push(d[o]);return S}(),i=this.font.glyf.encode(s,m,h),u=this.font.loca.encode(i.offsets,m),x={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},e}();At.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,i,s;if(Array.isArray(r))return"["+function(){var o,c,u;for(u=[],o=0,c=r.length;o<c;o++)n=r[o],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)s=r[a],i.push("/"+a+" "+t.convert(s));return i.push(">>"),i.join(`
`)}return""+r},t}();function fB(e,t,r,n,a){n=n||{};var i=1.15,s=a.internal.scaleFactor,o=a.internal.getFontSize()/s,c=a.getLineHeightFactor?a.getLineHeightFactor():i,u=o*c,d=/\r\n|\r|\n/g,f="",p=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,p=f.length||1),r+=o*(2-i),n.valign==="middle"?r-=p/2*u:n.valign==="bottom"&&(r-=p*u),n.halign==="center"||n.halign==="right"){var h=o;if(n.halign==="center"&&(h*=.5),f&&p>=1){for(var v=0;v<f.length;v++)a.text(f[v],t-a.getStringUnitWidth(f[v])*h,r),r+=u;return a}t-=a.getStringUnitWidth(e)*h}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var V6={},i0=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:V6=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,i;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var s=this.jsPDFDocument.internal.getFont(),o=s.fontStyle,c=s.fontName;if(t.font&&(c=t.font),t.fontStyle){o=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(c,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(i=this.jsPDFDocument).setDrawColor.apply(i,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,i){return this.jsPDFDocument.rect(t,r,n,a,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return V6||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),vj=function(e,t){return vj=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},vj(e,t)};function hB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");vj(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var pB=function(e){hB(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function khe(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Ohe(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function yb(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(i){return r.getTextWidth(i)}).reduce(function(i,s){return Math.max(i,s)},0);return a}function mB(e,t,r,n){var a=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:i});var s=gB(a,!1);s&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,s)}function gB(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function sw(e,t){var r,n,a,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function vB(e,t){var r=sw(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function Phe(e,t,r,n,a){var i={},s=1.3333333333333333,o=G5(t,function(b){return a.getComputedStyle(b).backgroundColor});o!=null&&(i.fillColor=o);var c=G5(t,function(b){return a.getComputedStyle(b).color});c!=null&&(i.textColor=c);var u=Rhe(n,r);u&&(i.cellPadding=u);var d="borderTopColor",f=s*r,p=n.borderTopWidth;if(n.borderBottomWidth===p&&n.borderRightWidth===p&&n.borderLeftWidth===p){var h=(parseFloat(p)||0)/f;h&&(i.lineWidth=h)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},i.lineWidth.top||(i.lineWidth.right?d="borderRightColor":i.lineWidth.bottom?d="borderBottomColor":i.lineWidth.left&&(d="borderLeftColor"));var v=G5(t,function(b){return a.getComputedStyle(b)[d]});v!=null&&(i.lineColor=v);var m=["left","right","center","justify"];m.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),m=["middle","bottom","top"],m.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var x=parseInt(n.fontSize||"");isNaN(x)||(i.fontSize=x/s);var y=Lhe(n);y&&(i.fontStyle=y);var g=(n.fontFamily||"").toLowerCase();return e.indexOf(g)!==-1&&(i.font=g),i}function Lhe(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function G5(e,t){var r=xB(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function xB(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:xB(e.parentElement,t):r}function Rhe(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(o){return parseInt(o||"0")/n}),s=sw(i,0);return a>s.top&&(s.top=a),a>s.bottom&&(s.bottom=a),s}function yB(e,t,r,n,a){var i,s;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof t=="string"?o=r.document.querySelector(t):o=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],p=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:p};for(var h=0;h<o.rows.length;h++){var v=o.rows[h],m=(s=(i=v==null?void 0:v.parentElement)===null||i===void 0?void 0:i.tagName)===null||s===void 0?void 0:s.toLowerCase(),x=Ihe(c,u,r,v,n,a);x&&(m==="thead"?d.push(x):m==="tfoot"?p.push(x):f.push(x))}return{head:d,body:f,foot:p}}function Ihe(e,t,r,n,a,i){for(var s=new pB(n),o=0;o<n.cells.length;o++){var c=n.cells[o],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;i&&(d=Phe(e,c,t,u,r)),s.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:Dhe(c)})}}var f=r.getComputedStyle(n);if(s.length>0&&(a||f.display!=="none"))return s}function Dhe(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function Mhe(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var i=a[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function Zl(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),s=1;s<arguments.length;s++){var o=arguments[s];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(i[c]=o[c])}return i}function bB(e,t){var r=new i0(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();Mhe(a,n,t);var i=Zl({},a,n,t),s;typeof window<"u"&&(s=window);var o=Fhe(a,n,t),c=$he(a,n,t),u=Bhe(r,i),d=zhe(r,i,s);return{id:t.tableId,content:d,hooks:c,styles:o,settings:u}}function Fhe(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=Zl({},u,d,f)}else{var p=[e,t,r],h=p.map(function(v){return v[c]||{}});n[c]=Zl({},h[0],h[1],h[2])}},i=0,s=Object.keys(n);i<s.length;i++){var o=s[i];a(o)}return n}function $he(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,s=n;i<s.length;i++){var o=s[i];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function Bhe(e,t){var r,n,a,i,s,o,c,u,d,f,p,h,v=sw(t.margin,40/e.scaleFactor()),m=(r=Uhe(e,t.startY))!==null&&r!==void 0?r:v.top,x;t.showFoot===!0?x="everyPage":t.showFoot===!1?x="never":x=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var g=(i=t.useCss)!==null&&i!==void 0?i:!1,b=t.theme||(g?"plain":"striped"),S=!!t.horizontalPageBreak,_=(s=t.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:g,theme:b,startY:m,margin:v,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:x,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(p=t.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:S,horizontalPageBreakRepeat:_,horizontalPageBreakBehaviour:(h=t.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function Uhe(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),i=!1;if(r&&r.startPageNumber){var s=r.startPageNumber+r.pageNumber-1;i=s===a}return typeof t=="number"?t:(t==null||t===!1)&&i&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function zhe(e,t,r){var n=t.head||[],a=t.body||[],i=t.foot||[];if(t.html){var s=t.includeHiddenHtml;if(r){var o=yB(e,t.html,r,s,t.useCss)||{};n=o.head||n,a=o.body||n,i=o.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||qhe(n,a,i);return{columns:c,head:n,body:a,foot:i}}function qhe(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var s=1,o;Array.isArray(n)?o=n[parseInt(i)]:o=n[i],typeof o=="object"&&!Array.isArray(o)&&(s=(o==null?void 0:o.colSpan)||1);for(var c=0;c<s;c++){var u=void 0;Array.isArray(n)?u=a.length:u=i+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var xj=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),Hhe=function(e){hB(t,e);function t(r,n,a,i,s,o){var c=e.call(this,r,n,o)||this;return c.cell=a,c.row=i,c.column=s,c.section=i.section,c}return t}(xj),Whe=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,i,s){for(var o=0,c=r;o<c.length;o++){var u=c[o],d=new Hhe(t,this,n,a,i,s),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var i=a[n];i(new xj(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var i=a[n];i(new xj(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,i){return a+i.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),wB=function(){function e(t,r,n,a,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof pB&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var i;return Math.max(n,((i=r.cells[a.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,i){var s=n.cells[i.index];if(!s)return 0;var o=r.getLineHeight(s.styles.fontSize),c=s.padding("vertical"),u=c+o;return u>a?u:a},0)},e}(),_B=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var s=i!=null?""+i:"",o=/\r\n|\r|\n/g;this.text=s.split(o)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,i=n*a+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=sw(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),Vhe=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var i=a[n],s=i.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(r=Math.max(r,s.styles.cellWidth))}return r},e}();function Ghe(e,t){Khe(e,t);var r=[],n=0;t.columns.forEach(function(i){var s=i.getMaxCustomCellWidth(t);s?i.width=s:(i.width=i.wrappedWidth,r.push(i)),n+=i.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=yj(r,a,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),a&&(a=yj(r,a,function(i){return i.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),Yhe(t),Jhe(t,e),Xhe(t)}function Khe(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=vB(e,t);t.allRows().forEach(function(i){for(var s=0,o=t.columns;s<o.length;s++){var c=o[s],u=i.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,i,c,null);var f=u.padding("horizontal");u.contentWidth=yb(u.text,u.styles,e)+f;var p=yb(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=p+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var h=10/r;u.minWidth=u.styles.minCellWidth||h,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(i){for(var s=0,o=t.columns;s<o.length;s++){var c=o[s],u=i.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function yj(e,t,r){for(var n=t,a=e.reduce(function(h,v){return h+v.wrappedWidth},0),i=0;i<e.length;i++){var s=e[i],o=s.wrappedWidth/a,c=n*o,u=s.width+c,d=r(s),f=u<d?d:u;t-=f-s.width,s.width=f}if(t=Math.round(t*1e10)/1e10,t){var p=e.filter(function(h){return t<0?h.width>r(h):!0});p.length&&(t=yj(p,t,r))}return t}function Xhe(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var i=n[a],s=0,o=e.columns;s<o.length;s++){var c=o[s],u=t[c.index];if(r>1)r--,delete i.cells[c.index];else if(u)u.cell.height+=i.height,r=u.cell.colSpan,delete i.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=i.cells[c.index];if(!d)continue;if(d.height=i.height,d.rowSpan>1){var f=n.length-a,p=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:p,row:i}}}}}function Yhe(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,i=0,s=0,o=0;o<e.columns.length;o++){var c=e.columns[o];if(s-=1,s>1&&e.columns[o+1])i+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+i}else{var u=n.cells[c.index];if(!u)continue;if(s=u.colSpan,i=0,u.colSpan>1){a=u,i+=c.width;continue}u.width=c.width+i}}}function Jhe(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var i=a[n],s=0,o=e.columns;s<o.length;s++){var c=o[s],u=i.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=G6(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=G6(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var p=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<p*u.rowSpan?r={height:p,count:u.rowSpan}:r&&r.count>0&&r.height>p&&(p=r.height),p>i.height&&(i.height=p)}}r.count--}}function G6(e,t,r,n,a){return e.map(function(i){return Qhe(i,t,r,n,a)})}function Qhe(e,t,r,n,a){var i=1e4*n.scaleFactor();if(t=Math.ceil(t*i)/i,t>=yb(e,r,n))return e;for(;t<yb(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function SB(e,t){var r=new i0(e),n=Zhe(t,r.scaleFactor()),a=new Whe(t,n);return Ghe(r,a),r.applyStyles(r.userStyles),a}function Zhe(e,t){var r=e.content,n=t0e(r.columns);if(r.head.length===0){var a=K6(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=K6(n,"foot");a&&r.foot.push(a)}var i=e.settings.theme,s=e.styles;return{columns:n,head:K5("head",r.head,n,s,i,t),body:K5("body",r.body,n,s,i,t),foot:K5("foot",r.foot,n,s,i,t)}}function K5(e,t,r,n,a,i){var s={},o=t.map(function(c,u){for(var d=0,f={},p=0,h=0,v=0,m=r;v<m.length;v++){var x=m[v];if(s[x.index]==null||s[x.index].left===0)if(h===0){var y=void 0;Array.isArray(c)?y=c[x.index-p-d]:y=c[x.dataKey];var g={};typeof y=="object"&&!Array.isArray(y)&&(g=(y==null?void 0:y.styles)||{});var b=r0e(e,x,u,a,n,i,g),S=new _B(y,b,e);f[x.dataKey]=S,f[x.index]=S,h=S.colSpan-1,s[x.index]={left:S.rowSpan-1,times:h}}else h--,p++;else s[x.index].left--,h=s[x.index].times,d++}return new wB(c,u,e,f)});return o}function K6(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=e0e(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function e0e(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function t0e(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new Vhe(a,t,r)})}function r0e(e,t,r,n,a,i,s){var o=Ohe(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var u=Zl({},o.table,o[e],a.styles,c),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},p=e==="body"&&r%2===0?Zl({},o.alternateRow,a.alternateRowStyles):{},h=khe(i),v=Zl({},h,u,p,f);return Zl(v,s)}function n0e(e,t,r){var n;r===void 0&&(r={});var a=vB(e,t),i=new Map,s=[],o=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(p){var h=t.columns.find(function(v){return v.dataKey===p||v.index===p});h&&!i.has(h.index)&&(i.set(h.index,!0),s.push(h.index),o.push(t.columns[h.index]),a-=h.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(i.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,s.push(d),o.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:s,columns:o,lastIndex:d-1}}function a0e(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=n0e(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function NB(e,t){var r=t.settings,n=r.startY,a=r.margin,i={x:a.left,y:n},s=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+a.bottom+s;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(p,h){return p+h.height},0);o+=u}var d=new i0(e);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(AB(d),i.y=a.top),t.callWillDrawPageHooks(d,i);var f=Zl({},i);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?i0e(d,t,f,i):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(p){return xc(d,t,p,i,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(p,h){var v=h===t.body.length-1;bb(d,t,p,v,f,i,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(p){return xc(d,t,p,i,t.columns)})),mB(d,t,f,i),t.callEndPageHooks(d,i),t.finalY=i.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function i0e(e,t,r,n){var a=a0e(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?ng(e,t,r,n,u.columns,!0):X6(e,t,n,u.columns),s0e(e,t,r,n,u.columns),X5(e,t,n,u.columns)});else for(var s=-1,o=a[0],c=function(){var u=s;if(o){e.applyStyles(e.userStyles);var d=o.columns;s>=0?ng(e,t,r,n,d,!0):X6(e,t,n,d),u=Y6(e,t,s+1,n,d),X5(e,t,n,d)}var f=u-s;a.slice(1).forEach(function(p){e.applyStyles(e.userStyles),ng(e,t,r,n,p.columns,!0),Y6(e,t,s+1,n,p.columns,f),X5(e,t,n,p.columns)}),s=u};s<t.body.length-1;)c()}function X6(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(i){return xc(e,t,i,r,n)})}function s0e(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(i,s){var o=s===t.body.length-1;bb(e,t,i,o,r,n,a)})}function Y6(e,t,r,n,a,i){e.applyStyles(e.userStyles),i=i??t.body.length;var s=Math.min(r+i,t.body.length),o=-1;return t.body.slice(r,s).forEach(function(c,u){var d=r+u===t.body.length-1,f=jB(e,t,d,n);c.canEntireRowFit(f,a)&&(xc(e,t,c,n,a),o=r+u)}),o}function X5(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(i){return xc(e,t,i,r,n)})}function o0e(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),i=Math.floor((t-a)/n);return Math.max(0,i)}function l0e(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var i=0,s=0,o=r.columns;s<o.length;s++){var c=o[s],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new _B(u.raw,u.styles,u.section);d=Zl(d,u),d.text=[];var f=o0e(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var p=n.scaleFactor(),h=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(p,h),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(p,h),d.contentHeight>i&&(i=d.contentHeight),a[c.index]=d}}var v=new wB(e.raw,-1,e.section,a,!0);v.height=i;for(var m=0,x=r.columns;m<x.length;m++){var c=x[m],d=v.cells[c.index];d&&(d.height=v.height);var u=e.cells[c.index];u&&(u.height=e.height)}return v}function c0e(e,t,r,n){var a=e.pageSize().height,i=n.settings.margin,s=i.top+i.bottom,o=a-s;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>o)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>o;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function bb(e,t,r,n,a,i,s){var o=jB(e,t,n,i);if(r.canEntireRowFit(o,s))xc(e,t,r,i,s);else if(c0e(e,r,o,t)){var c=l0e(r,o,t,e);xc(e,t,r,i,s),ng(e,t,a,i,s),bb(e,t,c,n,a,i,s)}else ng(e,t,a,i,s),bb(e,t,r,n,a,i,s)}function xc(e,t,r,n,a){n.x=t.settings.margin.left;for(var i=0,s=a;i<s.length;i++){var o=s[i],c=r.cells[o.index];if(!c){n.x+=o.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,o,n);if(u===!1){n.x+=o.width;continue}u0e(e,c,n);var d=c.getTextPos();fB(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,o,n),n.x+=o.width}n.y+=r.height}function u0e(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=gB(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),d0e(e,t,r,n.lineWidth))}function d0e(e,t,r,n){var a,i,s,o;n.top&&(a=r.x,i=r.y,s=r.x+t.width,o=r.y,n.right&&(s+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,i,s,o)),n.bottom&&(a=r.x,i=r.y+t.height,s=r.x+t.width,o=r.y+t.height,n.right&&(s+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,i,s,o)),n.left&&(a=r.x,i=r.y,s=r.x,o=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.left,a,i,s,o)),n.right&&(a=r.x+t.width,i=r.y,s=r.x+t.width,o=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.right,a,i,s,o));function c(u,d,f,p,h){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,p,h,"S")}}function jB(e,t,r,n){var a=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function ng(e,t,r,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(o){return xc(e,t,o,n,a)}),t.callEndPageHooks(e,n);var s=t.settings.margin;mB(e,t,r,n),AB(e),t.pageNumber++,n.x=s.left,n.y=s.top,r.y=s.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return xc(e,t,o,n,a)}),e.applyStyles(e.userStyles))}function AB(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function f0e(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=bB(this,n),i=SB(this,a);return NB(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){fB(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return i0.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){i0.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new i0(this),i=yB(a,t,window,r,!1),s=i.head,o=i.body,c=((n=s[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:o,data:o}}}var Y5;function h0e(e,t){var r=bB(e,t),n=SB(e,r);NB(e,n)}try{if(typeof window<"u"&&window){var J6=window,Q6=J6.jsPDF||((Y5=J6.jspdf)===null||Y5===void 0?void 0:Y5.jsPDF);Q6&&f0e(Q6)}}catch(e){console.error("Could not apply autoTable plugin",e)}const p0e=({isOpen:e,onClose:t,staff:r,marks:n,licenses:a,permissions:i,vacations:s,year:o,month:c})=>{var j;const[u,d]=M.useState(""),[f,p]=M.useState(c),[h,v]=M.useState(o),[m,x]=M.useState(!1),{data:y=[]}=D3(),g=M.useMemo(()=>{const A=new Map;for(const E of y)A.set(E.code,E);return A},[y]),b=r.find(A=>A.rut===u),S=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];if(!e)return null;const _=async()=>{if(b){x(!0);try{const A=new At({orientation:"landscape",unit:"mm",format:"letter"}),E=A.internal.pageSize.getWidth(),T=A.internal.pageSize.getHeight(),L=10,k=[37,99,235],R=[248,250,252],D=[51,65,85],q=[16,185,129],X=[226,232,240],se=[251,191,36];A.setFillColor(...k),A.rect(0,0,E,30,"F"),A.setTextColor(255,255,255),A.setFontSize(16),A.setFont("helvetica","bold"),A.text("ASISTENCIA MENSUAL",L,13),A.setFontSize(10),A.setFont("helvetica","normal"),A.text(`${Oue(f)} ${h} | Ley 40 Horas (43 hrs/sem)`,L,22),A.setFillColor(...R),A.roundedRect(L,35,E-2*L,25,2,2,"F"),A.setTextColor(...D),A.setFontSize(12),A.setFont("helvetica","bold"),A.text(b.nombre,L+5,45),A.setFontSize(9),A.setFont("helvetica","normal"),A.text(`RUT: ${b.rut}`,L+5,52),A.text(`Cargo: ${b.cargo}`,L+80,52),A.text(`Terminal: ${b.terminal_code}`,L+140,52);const Z=b.shift?g.get(b.shift.shift_type_code):null;A.text(`Horario Base: ${b.horario||"Sin asignar"}`,L+5,58),A.text(`Turno: ${(Z==null?void 0:Z.name)||"5x2 Fijo (Default)"}`,L+80,58),A.text(`Tipo: ${b.turno||"DIA"}`,L+180,58);const K=Tue(h,f),ie=[];let pe=[];const O=new Date(K[0]+"T12:00:00").getDay(),F=O===0?6:O-1;for(let ee=0;ee<F;ee++)pe.push("");for(const ee of K)pe.push(ee),pe.length===7&&(ie.push(pe),pe=[]);if(pe.length>0){for(;pe.length<7;)pe.push("");ie.push(pe)}const B=[];for(const ee of ie){const te=[],le=ee.find(Me=>Me!=="")||"",Ne=le?ij(le):"",ve=Ne?b9(Ne):[];for(const Me of ee){if(!Me){te.push("");continue}const Ie=new Date(Me+"T12:00:00"),Q=Ie.getDate();let $e=!1;if(b.shift){const Ze=Z==null?void 0:Z.pattern_json;Ze&&($e=v9(Me,b.shift.shift_type_code,b.shift.variant_code,Ze))}else{const Ze=Ie.getDay();$e=Ze===0||Ze===6}const Re=a.some(Ze=>Ze.staff_id===b.id&&Me>=Ze.start_date&&Me<=Ze.end_date),it=s.some(Ze=>Ze.staff_id===b.id&&Me>=Ze.start_date&&Me<=Ze.end_date),He=i.some(Ze=>Ze.staff_id===b.id&&Me>=Ze.start_date&&Me<=Ze.end_date);if(Re)te.push(`${Q}
LIC`);else if(it)te.push(`${Q}
VAC`);else if(He)te.push(`${Q}
PER`);else if($e)te.push(`${Q}
LIBRE`);else{const Ze=ve.includes(Me),nt=b.horario||"10:00-20:00",ft=(Ze?Rue(nt,!0):nt).replace(/:\d{2}/g,"");te.push(`${Q}
${ft}${Ze?"*":""}`)}}B.push(te)}h0e(A,{startY:65,head:[["Lun","Mar","Mi","Jue","Vie","Sb","Dom"]],body:B,theme:"grid",headStyles:{fillColor:k,textColor:[255,255,255],fontSize:10,fontStyle:"bold",halign:"center",valign:"middle",cellPadding:3},styles:{fontSize:9,cellPadding:4,halign:"center",valign:"middle",minCellHeight:18,lineColor:[203,213,225],lineWidth:.3},columnStyles:{0:{cellWidth:35},1:{cellWidth:35},2:{cellWidth:35},3:{cellWidth:35},4:{cellWidth:35},5:{cellWidth:35,fillColor:X},6:{cellWidth:35,fillColor:X}},didParseCell:ee=>{const te=ee.cell.text.join(`
`);te.includes("LIBRE")?(ee.cell.styles.fillColor=X,ee.cell.styles.textColor=[100,116,139]):te.includes("LIC")?(ee.cell.styles.fillColor=[243,232,255],ee.cell.styles.textColor=[107,33,168]):te.includes("VAC")?(ee.cell.styles.fillColor=[204,251,241],ee.cell.styles.textColor=[15,118,110]):te.includes("PER")?(ee.cell.styles.fillColor=[254,243,199],ee.cell.styles.textColor=[180,83,9]):te.includes("*")&&(ee.cell.styles.fillColor=[254,249,195])},margin:{left:L,right:L}});const U=A.lastAutoTable.finalY+8;A.setFontSize(8),A.setTextColor(...D),A.setFont("helvetica","bold"),A.text("LEYENDA:",L,U),A.setFont("helvetica","normal");const Y=[{text:"LIBRE = Da libre",x:L+20},{text:"LIC = Licencia",x:L+60},{text:"VAC = Vacaciones",x:L+95},{text:"PER = Permiso",x:L+135},{text:"* = Da reducido (-1hr Ley 40hrs)",x:L+170}];for(const ee of Y)A.text(ee.text,ee.x,U);A.setFontSize(7),A.text(`Generado: ${new Date().toLocaleString("es-CL")} | Ley 40 Horas: 43 hrs/semana en 2026 (2 das reducidos: Mar y Jue)`,L,T-8);const oe=`Horario_${b.rut.replace(/\./g,"")}_${S[f]}_${h}.pdf`;A.save(oe)}catch(A){console.error("Error generating PDF:",A),alert("Error al generar el PDF")}finally{x(!1)}}};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gradient-to-r from-brand-600 to-brand-500 text-white rounded-t-xl",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Generar PDF Mensual"}),l.jsx("p",{className:"text-sm text-brand-100",children:"Horario para entregar al trabajador"})]}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:l.jsx(xe,{name:"x",size:20})})]}),l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Seleccionar Trabajador"}),l.jsxs("select",{value:u,onChange:A=>d(A.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-brand-500",children:[l.jsx("option",{value:"",children:"-- Seleccionar --"}),r.map(A=>l.jsxs("option",{value:A.rut,children:[A.nombre," (",A.rut,")"]},A.rut))]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Mes"}),l.jsx("select",{value:f,onChange:A=>p(Number(A.target.value)),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-brand-500",children:S.map((A,E)=>l.jsx("option",{value:E,children:A},E))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Ao"}),l.jsxs("select",{value:h,onChange:A=>v(Number(A.target.value)),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-brand-500",children:[l.jsx("option",{value:2025,children:"2025"}),l.jsx("option",{value:2026,children:"2026"}),l.jsx("option",{value:2027,children:"2027"})]})]})]}),b&&l.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[l.jsx("div",{className:"font-medium text-slate-800",children:b.nombre}),l.jsxs("div",{className:"text-sm text-slate-500",children:[b.horario||"Sin horario"," | ",b.turno]}),l.jsx("div",{className:"text-xs text-brand-600 mt-1",children:b.shift?(j=g.get(b.shift.shift_type_code))==null?void 0:j.name:"5x2 Fijo (Por defecto)"})]}),l.jsx("div",{className:"p-3 bg-amber-50 rounded-lg border border-amber-200",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(xe,{name:"info",size:16,className:"text-amber-600 mt-0.5"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-amber-800",children:"Ley 40 Horas"}),l.jsx("div",{className:"text-xs text-amber-700",children:"En 2026: 43 hrs/semana. Los martes y jueves tienen -1 hora (indicados con *)."})]})]})})]}),l.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t",children:[l.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100 rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:_,disabled:!u||m,className:"px-4 py-2 text-sm font-medium text-white bg-brand-600 hover:bg-brand-700 rounded-lg disabled:opacity-50 flex items-center gap-2",children:m?l.jsxs(l.Fragment,{children:[l.jsx(xe,{name:"loader",size:16,className:"animate-spin"}),"Generando..."]}):l.jsxs(l.Fragment,{children:[l.jsx(xe,{name:"download",size:16}),"Generar PDF"]})})]})]})})},m0e=({isOpen:e,onClose:t,staff:r,onSubmit:n,isSubmitting:a=!1})=>{const[i,s]=M.useState("");if(!e||!r)return null;const o=c=>{c.preventDefault(),i.trim()&&n(i.trim())};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 transition-opacity",onClick:t}),l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[l.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[l.jsx(xe,{name:"user-x",size:20}),l.jsx("h3",{className:"font-semibold",children:"Solicitar Desvinculacin"})]}),l.jsx("button",{onClick:t,className:"p-1 hover:bg-slate-100 rounded-lg transition-colors",children:l.jsx(xe,{name:"x",size:20})})]}),l.jsxs("form",{onSubmit:o,className:"p-4 space-y-4",children:[l.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[l.jsx("p",{className:"font-medium text-slate-800",children:r.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:[r.rut," | ",r.cargo," | ",r.terminal_code]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Motivo de la desvinculacin *"}),l.jsx("textarea",{value:i,onChange:c=>s(c.target.value),placeholder:"Describa detalladamente el motivo de la solicitud...",className:"w-full p-3 border rounded-lg text-sm resize-none focus:ring-2 focus:ring-brand-500 focus:border-transparent",rows:4,required:!0,disabled:a})]}),l.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg text-sm text-amber-800 flex gap-2",children:[l.jsx(xe,{name:"info",size:16,className:"shrink-0 mt-0.5"}),l.jsx("p",{children:"Esta solicitud ser enviada por correo al rea de RRHH para su evaluacin. El trabajador seguir activo hasta que se apruebe."})]}),l.jsxs("div",{className:"flex gap-2 pt-2",children:[l.jsx("button",{type:"button",onClick:t,disabled:a,className:`flex-1 py-2 rounded-lg font-medium ${of.secondary}`,children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:!i.trim()||a,className:`flex-1 py-2 rounded-lg font-medium ${of.danger} disabled:opacity-50`,children:a?l.jsxs(l.Fragment,{children:[l.jsx(xe,{name:"loader",size:16,className:"inline animate-spin mr-1"}),"Enviando..."]}):"Enviar solicitud"})]})]})]})})]})},g0e=[{value:"PRINCIPAL",label:"Turno Normal"},{value:"CONTRATURNO",label:"Contraturno"}],v0e=[{id:"1",code:"5X2_FIJO",name:"5x2 Fijo",pattern_json:{type:"fixed",description:"Lunes a Viernes trabaja, Sbado y Domingo libre",offDays:[6,0]},created_at:""},{id:"2",code:"5X2_ROTATIVO",name:"5x2 Rotativo",pattern_json:{type:"rotating",description:"Semana 1: Mircoles+Domingo libre. Semana 2: Viernes+Sbado libre",cycle:2,weeks:[{offDays:[3,0]},{offDays:[5,6]}]},created_at:""},{id:"3",code:"5X2_SUPER",name:"5x2 Super",pattern_json:{type:"rotating",description:"Semana 1: Mircoles+Domingo libre. Semana 2: Jueves+Viernes libre",cycle:2,weeks:[{offDays:[3,0]},{offDays:[4,5]}]},created_at:""},{id:"4",code:"ESPECIAL",name:"Especial (Manual)",pattern_json:{type:"manual",description:"Plantilla de 28 das definida manualmente",cycleDays:28},created_at:""}],x0e=({isOpen:e,onClose:t,staff:r,onSuccess:n})=>{var E;const{data:a=[]}=D3(),{data:i}=rue((r==null?void 0:r.id)??null),{data:s}=nue((r==null?void 0:r.id)??null),o=a.length>0?a:v0e,c=uue(),u=due(),[d,f]=M.useState("5X2_FIJO"),[p,h]=M.useState("PRINCIPAL"),[v,m]=M.useState([]),[x,y]=M.useState(null),[g,b]=M.useState(!1);if(M.useEffect(()=>{i?(f(i.shift_type_code),h(i.variant_code)):(f("5X2_FIJO"),h("PRINCIPAL")),m(s?s.off_days_json:[]),y(null),b(!1)},[i,s,r==null?void 0:r.id]),!e||!r)return null;const S=async()=>{y(null),b(!1);try{console.log("Saving shift:",{staff_id:r.id,shift_type_code:d,variant_code:p}),await c.mutateAsync({staff_id:r.id,shift_type_code:d,variant_code:p,start_date:"2026-01-01"}),d==="ESPECIAL"&&v.length>0&&await u.mutateAsync({staffId:r.id,offDays:v}),b(!0),n&&n(),setTimeout(()=>{t()},1e3)}catch(T){console.error("Error saving shift:",T);const L=T instanceof Error?T.message:"Error desconocido al guardar";y(L)}},_=T=>{m(L=>L.includes(T)?L.filter(k=>k!==T):[...L,T])},j=c.isPending||u.isPending,A=o.find(T=>T.code===d);return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gradient-to-r from-brand-600 to-brand-500 text-white rounded-t-xl",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Configurar Turno"}),l.jsx("p",{className:"text-sm text-brand-100",children:r.nombre})]}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:l.jsx(xe,{name:"x",size:20})})]}),x&&l.jsxs("div",{className:"mx-4 mt-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[l.jsx(xe,{name:"alert-circle",size:18,className:"text-red-600 mt-0.5"}),l.jsx("div",{className:"text-sm text-red-700",children:x})]}),g&&l.jsxs("div",{className:"mx-4 mt-4 p-3 bg-emerald-50 border border-emerald-200 rounded-lg flex items-center gap-2",children:[l.jsx(xe,{name:"check-circle",size:18,className:"text-emerald-600"}),l.jsx("div",{className:"text-sm text-emerald-700 font-medium",children:"Turno guardado correctamente!"})]}),l.jsxs("div",{className:"p-4 space-y-6",children:[i&&l.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[l.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Turno actual asignado:"}),l.jsxs("div",{className:"font-medium text-slate-800",children:[((E=o.find(T=>T.code===i.shift_type_code))==null?void 0:E.name)||i.shift_type_code," - ",i.variant_code]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Turno"}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:o.map(T=>{var L;return l.jsxs("button",{onClick:()=>f(T.code),className:`p-3 rounded-lg border text-left transition-all ${d===T.code?"border-brand-500 bg-brand-50 text-brand-700 ring-2 ring-brand-500/30":"border-slate-200 hover:border-slate-300 hover:bg-slate-50"}`,children:[l.jsx("div",{className:"font-medium text-sm",children:T.name}),l.jsx("div",{className:"text-xs text-slate-500 mt-1",children:((L=T.pattern_json)==null?void 0:L.description)||""})]},T.code)})})]}),(d==="5X2_ROTATIVO"||d==="5X2_SUPER")&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Variante (Semana de inicio)"}),l.jsx("div",{className:"flex gap-2",children:g0e.map(T=>l.jsx("button",{onClick:()=>h(T.value),className:`flex-1 px-4 py-2 rounded-lg border text-sm font-medium transition-all ${p===T.value?"border-brand-500 bg-brand-50 text-brand-700 ring-2 ring-brand-500/30":"border-slate-200 hover:border-slate-300"}`,children:T.label},T.value))})]}),A&&d!=="ESPECIAL"&&l.jsx("div",{className:"p-3 bg-amber-50 rounded-lg border border-amber-200",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(xe,{name:"calendar",size:16,className:"text-amber-600 mt-0.5"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-amber-800",children:"Das Libres"}),l.jsx("div",{className:"text-xs text-amber-700",children:y0e(A,p)})]})]})}),d==="ESPECIAL"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Das Libres (ciclo 28 das)"}),l.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Haz clic en los das que sern libres en el ciclo de 4 semanas"}),l.jsx("div",{className:"space-y-2 p-3 bg-slate-50 rounded-lg",children:[0,1,2,3].map(T=>l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsxs("span",{className:"text-xs text-slate-500 w-16 font-medium",children:["Sem ",T+1,":"]}),l.jsx("div",{className:"flex gap-1 flex-1",children:[0,1,2,3,4,5,6].map(L=>{const k=T*7+L,R=v.includes(k),D=["L","M","X","J","V","S","D"][L];return l.jsx("button",{onClick:()=>_(k),className:`w-9 h-9 rounded text-xs font-bold transition-all ${R?"bg-slate-700 text-white shadow-sm":"bg-emerald-100 text-emerald-700 hover:bg-emerald-200"}`,children:D},k)})})]},T))}),l.jsxs("p",{className:"text-xs text-slate-600 mt-2 font-medium",children:[v.length," das libres seleccionados por ciclo"]})]})]}),l.jsxs("div",{className:"flex justify-between items-center gap-3 p-4 border-t bg-slate-50 rounded-b-xl",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Los cambios aplican para todo el ao 2026"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:t,disabled:j,className:"px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-200 rounded-lg transition-colors",children:"Cancelar"}),l.jsxs("button",{onClick:S,disabled:j||g,className:"px-5 py-2 text-sm font-medium text-white bg-brand-600 hover:bg-brand-700 rounded-lg disabled:opacity-50 flex items-center gap-2 transition-colors shadow-sm",children:[j&&l.jsx(xe,{name:"loader",size:16,className:"animate-spin"}),g?"Guardado!":"Guardar Turno"]})]})]})]})})};function y0e(e,t){const r=e.pattern_json;if(!r)return"";const n=["Domingo","Lunes","Martes","Mircoles","Jueves","Viernes","Sbado"];if(r.type==="fixed"&&r.offDays)return`Libre: ${r.offDays.map(i=>n[i]).join(" y ")} (todas las semanas)`;if(r.type==="rotating"&&r.weeks){const a=[];return r.weeks.forEach((i,s)=>{const o=t==="CONTRATURNO"?(s+1)%r.weeks.length:s,c=i.offDays.map(u=>n[u]).join(" + ");a.push(`Semana ${o+1}: ${c}`)}),a.join(" | ")}return r.description||""}const b0e=[{value:"ALL",label:"Todos"},{value:"EL_ROBLE",label:"El Roble"},{value:"LA_REINA",label:"La Reina"}],w0e=[{value:"TODOS",label:"Todos"},{value:"DIA",label:"Da"},{value:"NOCHE",label:"Noche"}],_0e=()=>{const e=zt(oe=>oe.context),t=Ar(oe=>oe.session),r=new Date().toISOString().split("T")[0],[n,a]=M.useState(()=>ij(r)),i=M.useMemo(()=>M3(n),[n]),s=new Date(i[3]+"T12:00:00"),o=s.getMonth(),c=s.getFullYear(),[u,d]=M.useState({month:o,year:c,terminal:"ALL",turno:"TODOS",search:""}),[f,p]=M.useState(!1),[h,v]=M.useState(null),[m,x]=M.useState(null);vue();const{data:y=[],isLoading:g}=D3(),{data:b=[],isLoading:S}=tue(e,u),_=M.useMemo(()=>b.map(oe=>oe.id),[b]),{data:j=[],isLoading:A}=iue(_,c,o),{data:E=[],isLoading:T}=sue(_,c,o),{data:L=[],isLoading:k}=oue(_,c,o),{data:R=[],isLoading:D}=lue(_,c,o),{data:q=[],isLoading:X}=aue(_,c,o),{data:se,isLoading:Z}=cue(e,c,o),K=mue(),ie=g||S||A||T||k||D||X||Z,pe=M.useMemo(()=>{const oe={SUPERVISOR:0,INSPECTOR:0,CONDUCTOR:0,PLANILLERO:0,CLEANER:0};let ee=0,te=0,le=0,Ne=0,ve=0,Me=0,Ie=0;const Q=new Date().toISOString().split("T")[0],$e=new Set;se&&(se.noMarcaciones.forEach(Re=>$e.add(Re.rut)),se.sinCredenciales.forEach(Re=>$e.add(Re.rut)),se.cambiosDia.forEach(Re=>$e.add(Re.rut)),se.autorizaciones.forEach(Re=>$e.add(Re.rut)));for(const Re of b){const it=Re.cargo.toUpperCase();it.includes("SUPERVISOR")?oe.SUPERVISOR++:it.includes("INSPECTOR")?oe.INSPECTOR++:it.includes("CONDUCTOR")?oe.CONDUCTOR++:it.includes("PLANILLERO")?oe.PLANILLERO++:oe.CLEANER++,x9(Re.horario)==="DIA"?ee++:te++;const Ze=E.some(ut=>ut.staff_id===Re.id&&Q>=ut.start_date&&Q<=ut.end_date),nt=R.some(ut=>ut.staff_id===Re.id&&Q>=ut.start_date&&Q<=ut.end_date),dt=L.some(ut=>ut.staff_id===Re.id&&Q>=ut.start_date&&Q<=ut.end_date);Ze&&le++,nt&&Ne++,dt&&ve++,$e.has(Re.rut)&&Me++;const ft=j.filter(ut=>ut.staff_id===Re.id);for(const ut of i){if(!kue(ut))continue;const qt=ft.some(kt=>kt.mark_date===ut),Mt=E.some(kt=>kt.staff_id===Re.id&&ut>=kt.start_date&&ut<=kt.end_date)||R.some(kt=>kt.staff_id===Re.id&&ut>=kt.start_date&&ut<=kt.end_date)||L.some(kt=>kt.staff_id===Re.id&&ut>=kt.start_date&&ut<=kt.end_date);if(!qt&&!Mt){Ie++;break}}}return{byPosition:oe,programmmedDay:ee,programmedNight:te,onLicense:le,onVacation:Ne,onPermission:ve,withIncidencies:Me,pendingMarks:Ie}},[b,j,E,L,R,se,i]),me=()=>a(Pue(n)),O=()=>a(Lue(n)),F=()=>a(ij(r)),B=oe=>{d(ee=>({...ee,terminal:oe}))},U=()=>{const oe=b.map(le=>{const Ne=j.filter(ve=>ve.staff_id===le.id);return{RUT:le.rut,Nombre:le.nombre,Cargo:le.cargo,Terminal:le.terminal_code,Horario:le.horario,Turno:le.turno,Estado:le.status,Presentes:Ne.filter(ve=>ve.mark==="P").length,Ausentes:Ne.filter(ve=>ve.mark==="A").length,Licencias:E.filter(ve=>ve.staff_id===le.id).length,Permisos:L.filter(ve=>ve.staff_id===le.id).length}}),ee=Jh.json_to_sheet(oe),te=Jh.book_new();Jh.book_append_sheet(te,ee,"Asistencia"),OF(te,`Asistencia_${CO(n).replace(/\s/g,"_")}.xlsx`)},Y=async oe=>{if(!(!h||!t))try{await K.mutateAsync({values:{staff_id:h.id,staff_rut:h.rut,staff_name:h.nombre,terminal_code:h.terminal_code,reason:oe},requestedBy:t.supervisorName}),await gl.sendEmail({audience:"manual",manualRecipients:["rrhh@empresa.cl"],subject:`Solicitud de Desvinculacin - ${h.nombre}`,body:`Se ha solicitado la desvinculacin del trabajador:

Nombre: ${h.nombre}
RUT: ${h.rut}
Cargo: ${h.cargo}
Terminal: ${h.terminal_code}

Motivo:
${oe}

Solicitado por: ${t.supervisorName}
Fecha: ${new Date().toLocaleString("es-CL")}`,module:"asistencia"}),v(null)}catch(ee){console.error("Error creating offboarding request:",ee)}};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-white rounded-lg border p-4 space-y-4",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:me,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Semana anterior",children:l.jsx(xe,{name:"chevron-left",size:20})}),l.jsx("div",{className:"text-center min-w-[180px]",children:l.jsx("div",{className:"font-semibold text-slate-800",children:CO(n)})}),l.jsx("button",{onClick:O,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Semana siguiente",children:l.jsx(xe,{name:"chevron-right",size:20})}),l.jsx("button",{onClick:F,className:"px-3 py-1.5 text-xs font-medium bg-brand-100 text-brand-700 rounded-lg hover:bg-brand-200",children:"Hoy"})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:b0e.map(oe=>l.jsx("button",{onClick:()=>B(oe.value),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${u.terminal===oe.value?xue[oe.value]:"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:oe.label},oe.value))})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[l.jsx("div",{className:"flex gap-1 bg-slate-100 rounded-lg p-1",children:w0e.map(oe=>l.jsx("button",{onClick:()=>d(ee=>({...ee,turno:oe.value})),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${u.turno===oe.value?"bg-white text-slate-800 shadow-sm":"text-slate-600 hover:text-slate-800"}`,children:oe.label},oe.value))}),l.jsxs("div",{className:"relative flex-1 max-w-xs",children:[l.jsx(xe,{name:"search",size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),l.jsx("input",{type:"text",value:u.search,onChange:oe=>d(ee=>({...ee,search:oe.target.value})),placeholder:"Buscar RUT o nombre...",className:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-brand-500 focus:border-transparent"})]}),l.jsxs("div",{className:"flex gap-2 ml-auto",children:[l.jsxs("button",{onClick:()=>p(!0),className:`px-3 py-2 rounded-lg text-sm font-medium flex items-center gap-1 ${of.secondary}`,children:[l.jsx(xe,{name:"file-text",size:16}),l.jsx("span",{className:"hidden sm:inline",children:"PDF por RUT"})]}),l.jsxs("button",{onClick:U,className:`px-3 py-2 rounded-lg text-sm font-medium flex items-center gap-1 ${of.secondary}`,children:[l.jsx(xe,{name:"download",size:16}),l.jsx("span",{className:"hidden sm:inline",children:"Exportar XLSX"})]})]})]}),l.jsx(Fue,{kpis:pe,isLoading:ie})]}),l.jsx("div",{className:"bg-white rounded-lg border p-3",children:l.jsx($ue,{})}),l.jsx(Mue,{staff:b,shiftTypes:y,marks:j,licenses:E,permissions:L,vacations:R,overrides:q,incidences:se||{noMarcaciones:[],sinCredenciales:[],cambiosDia:[],autorizaciones:[]},weekDates:i,isLoading:ie,onRequestOffboarding:oe=>v(oe),onOpenShiftConfig:oe=>x(oe)}),l.jsx(p0e,{isOpen:f,onClose:()=>p(!1),staff:b,marks:j,licenses:E,permissions:L,vacations:R,year:c,month:o}),l.jsx(m0e,{isOpen:h!==null,onClose:()=>v(null),staff:h,onSubmit:Y,isSubmitting:K.isPending}),l.jsx(x0e,{isOpen:m!==null,onClose:()=>x(null),staff:m})]})},Z6="email_notifications",S0e=({isOpen:e,onClose:t})=>{const[r,n]=M.useState({to:[],cc:[]}),[a,i]=M.useState(!0),[s,o]=M.useState(!1),[c,u]=M.useState(""),[d,f]=M.useState("");M.useEffect(()=>{e&&p()},[e]);const p=async()=>{i(!0);try{const g=await P3(Z6);n(g||{to:["isaac.avila@transdev.cl"],cc:[]})}catch(g){console.error("Error loading config:",g),Ci("Error","No se pudo cargar la configuracin")}finally{i(!1)}},h=async()=>{o(!0);try{await zle(Z6,r,"Configuracin de destinatarios para notificaciones"),Ii("Configuracin guardada","Los correos se enviarn a los nuevos destinatarios"),t()}catch(g){console.error("Error saving config:",g),Ci("Error","No se pudo guardar la configuracin")}finally{o(!1)}},v=g=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g),m=g=>{const b=g==="to"?c:d,S=g==="to"?u:f,_=b.trim();if(_){if(!v(_)){Ci("Email invlido","Por favor ingresa un correo electrnico vlido");return}if(r[g].includes(_)){Ci("Email duplicado","Este correo ya est en la lista");return}n(j=>({...j,[g]:[...j[g],_]})),S("")}},x=(g,b)=>{n(S=>({...S,[g]:S[g].filter(_=>_!==b)}))},y=(g,b)=>{g.key==="Enter"&&(g.preventDefault(),m(b))};return e?l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),l.jsxs("div",{className:"relative w-full max-w-lg card p-6 animate-scale-in",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6 border-b pb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-brand-100 p-2 rounded-lg text-brand-600",children:l.jsx(xe,{name:"settings",size:24})}),l.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Configuracin de Correos"})]}),l.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600",children:l.jsx(xe,{name:"x",size:24})})]}),a?l.jsx("div",{className:"py-12 flex justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-600"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"label mb-2 flex justify-between",children:[l.jsx("span",{children:"Destinatarios Principales (Para)"}),l.jsx("span",{className:"text-xs font-normal text-slate-500",children:"Reciben el correo directamente"})]}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[l.jsx("input",{type:"email",className:"input flex-1",placeholder:"ejemplo@transdev.cl",value:c,onChange:g=>u(g.target.value),onKeyDown:g=>y(g,"to")}),l.jsx("button",{type:"button",onClick:()=>m("to"),className:"btn btn-secondary px-3",disabled:!c.trim(),children:l.jsx(xe,{name:"plus",size:18})})]}),l.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 min-h-[60px] border border-slate-200 flex flex-wrap gap-2",children:[r.to.length===0&&l.jsx("span",{className:"text-sm text-slate-400 italic self-center w-full text-center",children:"Sin destinatarios"}),r.to.map(g=>l.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white border border-slate-200 rounded-full text-sm font-medium text-slate-700 shadow-sm",children:[g,l.jsx("button",{onClick:()=>x("to",g),className:"text-slate-400 hover:text-danger-500 ml-1",children:l.jsx(xe,{name:"x",size:14})})]},g))]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"label mb-2 flex justify-between",children:[l.jsx("span",{children:"En Copia (CC)"}),l.jsx("span",{className:"text-xs font-normal text-slate-500",children:"Reciben una copia"})]}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[l.jsx("input",{type:"email",className:"input flex-1",placeholder:"jefe@transdev.cl",value:d,onChange:g=>f(g.target.value),onKeyDown:g=>y(g,"cc")}),l.jsx("button",{type:"button",onClick:()=>m("cc"),className:"btn btn-secondary px-3",disabled:!d.trim(),children:l.jsx(xe,{name:"plus",size:18})})]}),l.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 min-h-[60px] border border-slate-200 flex flex-wrap gap-2",children:[r.cc.length===0&&l.jsx("span",{className:"text-sm text-slate-400 italic self-center w-full text-center",children:"Sin copias"}),r.cc.map(g=>l.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white border border-slate-200 rounded-full text-sm font-medium text-slate-700 shadow-sm",children:[g,l.jsx("button",{onClick:()=>x("cc",g),className:"text-slate-400 hover:text-danger-500 ml-1",children:l.jsx(xe,{name:"x",size:14})})]},g))]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t mt-4",children:[l.jsx("button",{onClick:t,className:"btn btn-secondary",disabled:s,children:"Cancelar"}),l.jsx("button",{onClick:h,className:"btn btn-primary min-w-[120px]",disabled:s,children:s?"Guardando...":"Guardar Cambios"})]})]})]})]}):null},N0e=[{id:"asistencia-2026",label:"Asistencia 2026",icon:"calendar-range"},{id:"no-marcaciones",label:"No Marcaciones",icon:"clock"},{id:"sin-credenciales",label:"Sin Credenciales",icon:"key"},{id:"cambios-dia",label:"Cambios de Da",icon:"calendar"},{id:"autorizaciones",label:"Autorizaciones",icon:"check-circle"},{id:"vacaciones",label:"Vacaciones",icon:"sparkles"}],j0e=()=>{const[e,t]=M.useState("asistencia-2026"),[r,n]=M.useState(!1),a=()=>{switch(e){case"asistencia-2026":return l.jsx(_0e,{});case"no-marcaciones":return l.jsx(Ace,{});case"sin-credenciales":return l.jsx(Tce,{});case"cambios-dia":return l.jsx(kce,{});case"autorizaciones":return l.jsx(Pce,{});case"vacaciones":return l.jsx(Dce,{});default:return null}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 border-b border-slate-200 pb-4",children:[l.jsx("div",{className:"flex flex-wrap gap-2",children:N0e.map(i=>l.jsxs("button",{onClick:()=>t(i.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${e===i.id?"bg-brand-600 text-white shadow-md":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[l.jsx(xe,{name:i.icon,size:18}),l.jsx("span",{className:"hidden sm:inline",children:i.label})]},i.id))}),l.jsxs("button",{onClick:()=>n(!0),className:"btn btn-secondary text-sm flex items-center gap-2 shrink-0",children:[l.jsx(xe,{name:"settings",size:16}),l.jsx("span",{children:"Configurar Correos"})]})]}),a(),l.jsx(S0e,{isOpen:r,onClose:()=>n(!1)})]})},A0e=[{id:"ai-1",area:"interior",responsable:"Equipo Aseo 1",fecha:"2023-12-04T08:00:00Z",estado:"pendiente",observaciones:"Pendiente zona comedor",terminal:"EL_ROBLE"},{id:"ae-1",area:"exterior",responsable:"Equipo Aseo 2",fecha:"2023-12-03T15:00:00Z",estado:"completado",observaciones:"Patio listo",terminal:"LA_REINA"},{id:"ar-1",area:"rodillo",responsable:"Equipo Rodillo",fecha:"2023-12-02T17:00:00Z",estado:"pendiente",terminal:"EL_SALTO"}],E0e=e=>rw(A0e.filter(t=>t.area===e),(t,r)=>r!=null&&r.estado&&r.estado!=="todos"?t.estado===r.estado:!0),q3=({area:e,title:t})=>{var p;const r=zt(h=>h.context),n=zt(h=>h.setContext),[a,i]=M.useState({estado:"todos"}),s=M.useMemo(()=>E0e(e),[e]),o=Ut({queryKey:["aseo",e,r,a],queryFn:()=>s.list({terminalContext:r,filters:a,scope:"view"})}),c=M.useMemo(()=>[{key:"responsable",header:"Responsable"},{key:"fecha",header:"Fecha",render:h=>Ia(h.fecha),value:h=>Ia(h.fecha)},{key:"estado",header:"Estado",render:h=>l.jsx("span",{className:"badge capitalize",children:h.estado}),value:h=>h.estado},{key:"observaciones",header:"Observaciones",render:h=>h.observaciones??"",value:h=>h.observaciones??""},{key:"terminal",header:"Terminal",render:h=>or(h.terminal),value:h=>or(h.terminal)}],[]),u=c.map(h=>({key:h.key,header:h.header,value:v=>h.value?h.value(v):v[h.key]})),d=()=>{o.data&&mr({filename:`aseo_${e}_vista`,sheetName:`Aseo ${e}`,rows:o.data,columns:u})},f=async()=>{const h=await s.list({terminalContext:r,scope:"all"});mr({filename:`aseo_${e}_completo`,sheetName:`Aseo ${e}`,rows:h,columns:u})};return l.jsxs("div",{className:"space-y-4",children:[l.jsx(mn,{title:`Aseo - ${t}`,description:"Control de aseo por rea",actions:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"btn btn-primary",children:"Nuevo registro"}),l.jsx(_a,{onExportView:d,onExportAll:f})]})}),l.jsx(ns,{terminalContext:r,onTerminalChange:n,children:l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsxs("select",{className:"input",value:a.estado,onChange:h=>i({estado:h.target.value}),children:[l.jsx("option",{value:"todos",children:"Todos"}),l.jsx("option",{value:"pendiente",children:"Pendiente"}),l.jsx("option",{value:"completado",children:"Completado"})]})]})}),o.isLoading&&l.jsx(kn,{}),o.isError&&l.jsx(Da,{onRetry:o.refetch}),!o.isLoading&&!o.isError&&l.jsxs(l.Fragment,{children:[!((p=o.data)!=null&&p.length)&&l.jsx(Oc,{description:"Sin registros"}),o.data&&o.data.length>0&&l.jsx(kc,{columns:c,rows:o.data})]})]})},T0e=()=>l.jsx(q3,{area:"interior",title:"Interior"}),C0e=()=>l.jsx(q3,{area:"exterior",title:"Exterior"}),k0e=()=>l.jsx(q3,{area:"rodillo",title:"Rodillo"});/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),P0e=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),eP=e=>{const t=P0e(e);return t.charAt(0).toUpperCase()+t.slice(1)},EB=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),L0e=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var R0e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0e=M.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:s,...o},c)=>M.createElement("svg",{ref:c,...R0e,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:EB("lucide",a),...!i&&!L0e(o)&&{"aria-hidden":"true"},...o},[...s.map(([u,d])=>M.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=(e,t)=>{const r=M.forwardRef(({className:n,...a},i)=>M.createElement(I0e,{ref:i,iconNode:t,className:EB(`lucide-${O0e(eP(e))}`,`lucide-${e}`,n),...a}));return r.displayName=eP(e),r};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],M0e=_n("calendar",D0e);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$0e=_n("circle-alert",F0e);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0e=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],TB=_n("clock",B0e);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0e=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],zg=_n("credit-card",U0e);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0e=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],CB=_n("dollar-sign",z0e);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0e=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],H0e=_n("download",q0e);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0e=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],V0e=_n("eye",W0e);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],K0e=_n("file-text",G0e);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0e=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Y0e=_n("funnel",X0e);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0e=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],kB=_n("mail",J0e);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],OB=_n("plus",Q0e);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0e=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],epe=_n("printer",Z0e);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tpe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],PB=_n("rotate-ccw",tpe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rpe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],npe=_n("save",rpe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ape=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ipe=_n("search",ape);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const spe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ope=_n("send",spe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lpe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],cpe=_n("settings",lpe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const upe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],dpe=_n("square-pen",upe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fpe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],hpe=_n("trash-2",fpe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ppe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],mpe=_n("trending-up",ppe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gpe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ow=_n("triangle-alert",gpe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vpe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],xpe=_n("upload",vpe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ype=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],bpe=_n("user",ype);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wpe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],yc=_n("x",wpe),Gu=["El Roble","La Reina","Maria Angelica"],LB=[{value:"PERDIDA",label:"Perdida"},{value:"DETERIORO",label:"Deterioro"}],_pe=[{value:"ASIGNADA",label:"Asignada"},{value:"RECUPERADA",label:"Recuperada"},{value:"CERRADA",label:"Cerrada"},{value:"CANCELADA",label:"Cancelada"}],Spe=[{value:"LIBRE",label:"Libre"},{value:"ASIGNADA",label:"Asignada"},{value:"INACTIVA",label:"Inactiva"}],vm=({title:e,value:t,subtitle:r,icon:n,colorClass:a="bg-slate-50 text-slate-600"})=>l.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:e}),l.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-1",children:t}),r&&l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:r})]}),l.jsx("div",{className:`p-2 rounded-lg ${a}`,children:n})]})}),Npe=({kpis:e,isLoading:t})=>{if(t)return l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:Array.from({length:5}).map((a,i)=>l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm animate-pulse",children:[l.jsx("div",{className:"h-4 bg-slate-200 rounded w-24 mb-2"}),l.jsx("div",{className:"h-8 bg-slate-200 rounded w-16"})]},i))});const r=Gu.reduce((a,i)=>a+(e.availableByTerminal[i]||0),0),n=Gu.map(a=>`${a.split(" ")[0]}: ${e.availableByTerminal[a]||0}`).join(" | ");return l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[l.jsx(vm,{title:"Disponibles",value:r,subtitle:n,icon:l.jsx(zg,{className:"w-5 h-5"}),colorClass:"bg-emerald-50 text-emerald-600"}),l.jsx(vm,{title:"Prestamos Activos",value:e.activeLoans,icon:l.jsx(TB,{className:"w-5 h-5"}),colorClass:"bg-blue-50 text-blue-600"}),l.jsx(vm,{title:"Atrasados (+7d)",value:e.overdueLoans,icon:l.jsx(ow,{className:"w-5 h-5"}),colorClass:e.overdueLoans>0?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-400"}),l.jsx(vm,{title:"Tiempo Promedio",value:`${e.avgReturnDays} dias`,subtitle:"Ultimos 30 dias",icon:l.jsx(mpe,{className:"w-5 h-5"}),colorClass:"bg-indigo-50 text-indigo-600"}),l.jsx(vm,{title:"Descuentos",value:`$${e.totalDiscounts.toLocaleString("es-CL")}`,icon:l.jsx(CB,{className:"w-5 h-5"}),colorClass:"bg-violet-50 text-violet-600"})]})};function RB(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=RB(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function sr(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=RB(e))&&(n&&(n+=" "),n+=t);return n}var jpe=Array.isArray,is=jpe,Ape=typeof $1=="object"&&$1&&$1.Object===Object&&$1,IB=Ape,Epe=IB,Tpe=typeof self=="object"&&self&&self.Object===Object&&self,Cpe=Epe||Tpe||Function("return this")(),wl=Cpe,kpe=wl,Ope=kpe.Symbol,Jv=Ope,tP=Jv,DB=Object.prototype,Ppe=DB.hasOwnProperty,Lpe=DB.toString,xm=tP?tP.toStringTag:void 0;function Rpe(e){var t=Ppe.call(e,xm),r=e[xm];try{e[xm]=void 0;var n=!0}catch{}var a=Lpe.call(e);return n&&(t?e[xm]=r:delete e[xm]),a}var Ipe=Rpe,Dpe=Object.prototype,Mpe=Dpe.toString;function Fpe(e){return Mpe.call(e)}var $pe=Fpe,rP=Jv,Bpe=Ipe,Upe=$pe,zpe="[object Null]",qpe="[object Undefined]",nP=rP?rP.toStringTag:void 0;function Hpe(e){return e==null?e===void 0?qpe:zpe:nP&&nP in Object(e)?Bpe(e):Upe(e)}var Pc=Hpe;function Wpe(e){return e!=null&&typeof e=="object"}var Lc=Wpe,Vpe=Pc,Gpe=Lc,Kpe="[object Symbol]";function Xpe(e){return typeof e=="symbol"||Gpe(e)&&Vpe(e)==Kpe}var _p=Xpe,Ype=is,Jpe=_p,Qpe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zpe=/^\w*$/;function eme(e,t){if(Ype(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Jpe(e)?!0:Zpe.test(e)||!Qpe.test(e)||t!=null&&e in Object(t)}var H3=eme;function tme(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ed=tme;const Sp=kr(ed);var rme=Pc,nme=ed,ame="[object AsyncFunction]",ime="[object Function]",sme="[object GeneratorFunction]",ome="[object Proxy]";function lme(e){if(!nme(e))return!1;var t=rme(e);return t==ime||t==sme||t==ame||t==ome}var W3=lme;const Vt=kr(W3);var cme=wl,ume=cme["__core-js_shared__"],dme=ume,J5=dme,aP=function(){var e=/[^.]+$/.exec(J5&&J5.keys&&J5.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function fme(e){return!!aP&&aP in e}var hme=fme,pme=Function.prototype,mme=pme.toString;function gme(e){if(e!=null){try{return mme.call(e)}catch{}try{return e+""}catch{}}return""}var MB=gme,vme=W3,xme=hme,yme=ed,bme=MB,wme=/[\\^$.*+?()[\]{}|]/g,_me=/^\[object .+?Constructor\]$/,Sme=Function.prototype,Nme=Object.prototype,jme=Sme.toString,Ame=Nme.hasOwnProperty,Eme=RegExp("^"+jme.call(Ame).replace(wme,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Tme(e){if(!yme(e)||xme(e))return!1;var t=vme(e)?Eme:_me;return t.test(bme(e))}var Cme=Tme;function kme(e,t){return e==null?void 0:e[t]}var Ome=kme,Pme=Cme,Lme=Ome;function Rme(e,t){var r=Lme(e,t);return Pme(r)?r:void 0}var zf=Rme,Ime=zf,Dme=Ime(Object,"create"),lw=Dme,iP=lw;function Mme(){this.__data__=iP?iP(null):{},this.size=0}var Fme=Mme;function $me(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Bme=$me,Ume=lw,zme="__lodash_hash_undefined__",qme=Object.prototype,Hme=qme.hasOwnProperty;function Wme(e){var t=this.__data__;if(Ume){var r=t[e];return r===zme?void 0:r}return Hme.call(t,e)?t[e]:void 0}var Vme=Wme,Gme=lw,Kme=Object.prototype,Xme=Kme.hasOwnProperty;function Yme(e){var t=this.__data__;return Gme?t[e]!==void 0:Xme.call(t,e)}var Jme=Yme,Qme=lw,Zme="__lodash_hash_undefined__";function ege(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Qme&&t===void 0?Zme:t,this}var tge=ege,rge=Fme,nge=Bme,age=Vme,ige=Jme,sge=tge;function Np(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Np.prototype.clear=rge;Np.prototype.delete=nge;Np.prototype.get=age;Np.prototype.has=ige;Np.prototype.set=sge;var oge=Np;function lge(){this.__data__=[],this.size=0}var cge=lge;function uge(e,t){return e===t||e!==e&&t!==t}var V3=uge,dge=V3;function fge(e,t){for(var r=e.length;r--;)if(dge(e[r][0],t))return r;return-1}var cw=fge,hge=cw,pge=Array.prototype,mge=pge.splice;function gge(e){var t=this.__data__,r=hge(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():mge.call(t,r,1),--this.size,!0}var vge=gge,xge=cw;function yge(e){var t=this.__data__,r=xge(t,e);return r<0?void 0:t[r][1]}var bge=yge,wge=cw;function _ge(e){return wge(this.__data__,e)>-1}var Sge=_ge,Nge=cw;function jge(e,t){var r=this.__data__,n=Nge(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Age=jge,Ege=cge,Tge=vge,Cge=bge,kge=Sge,Oge=Age;function jp(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}jp.prototype.clear=Ege;jp.prototype.delete=Tge;jp.prototype.get=Cge;jp.prototype.has=kge;jp.prototype.set=Oge;var uw=jp,Pge=zf,Lge=wl,Rge=Pge(Lge,"Map"),G3=Rge,sP=oge,Ige=uw,Dge=G3;function Mge(){this.size=0,this.__data__={hash:new sP,map:new(Dge||Ige),string:new sP}}var Fge=Mge;function $ge(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Bge=$ge,Uge=Bge;function zge(e,t){var r=e.__data__;return Uge(t)?r[typeof t=="string"?"string":"hash"]:r.map}var dw=zge,qge=dw;function Hge(e){var t=qge(this,e).delete(e);return this.size-=t?1:0,t}var Wge=Hge,Vge=dw;function Gge(e){return Vge(this,e).get(e)}var Kge=Gge,Xge=dw;function Yge(e){return Xge(this,e).has(e)}var Jge=Yge,Qge=dw;function Zge(e,t){var r=Qge(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var eve=Zge,tve=Fge,rve=Wge,nve=Kge,ave=Jge,ive=eve;function Ap(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ap.prototype.clear=tve;Ap.prototype.delete=rve;Ap.prototype.get=nve;Ap.prototype.has=ave;Ap.prototype.set=ive;var K3=Ap,FB=K3,sve="Expected a function";function X3(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(sve);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var s=e.apply(this,n);return r.cache=i.set(a,s)||i,s};return r.cache=new(X3.Cache||FB),r}X3.Cache=FB;var $B=X3;const ove=kr($B);var lve=$B,cve=500;function uve(e){var t=lve(e,function(n){return r.size===cve&&r.clear(),n}),r=t.cache;return t}var dve=uve,fve=dve,hve=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pve=/\\(\\)?/g,mve=fve(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(hve,function(r,n,a,i){t.push(a?i.replace(pve,"$1"):n||r)}),t}),gve=mve;function vve(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var Y3=vve,oP=Jv,xve=Y3,yve=is,bve=_p,lP=oP?oP.prototype:void 0,cP=lP?lP.toString:void 0;function BB(e){if(typeof e=="string")return e;if(yve(e))return xve(e,BB)+"";if(bve(e))return cP?cP.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var wve=BB,_ve=wve;function Sve(e){return e==null?"":_ve(e)}var UB=Sve,Nve=is,jve=H3,Ave=gve,Eve=UB;function Tve(e,t){return Nve(e)?e:jve(e,t)?[e]:Ave(Eve(e))}var zB=Tve,Cve=_p;function kve(e){if(typeof e=="string"||Cve(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var fw=kve,Ove=zB,Pve=fw;function Lve(e,t){t=Ove(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Pve(t[r++])];return r&&r==n?e:void 0}var J3=Lve,Rve=J3;function Ive(e,t,r){var n=e==null?void 0:Rve(e,t);return n===void 0?r:n}var qB=Ive;const Ts=kr(qB);function Dve(e){return e==null}var Mve=Dve;const lr=kr(Mve);var Fve=Pc,$ve=is,Bve=Lc,Uve="[object String]";function zve(e){return typeof e=="string"||!$ve(e)&&Bve(e)&&Fve(e)==Uve}var qve=zve;const Sf=kr(qve);var HB={exports:{}},qr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q3=Symbol.for("react.element"),Z3=Symbol.for("react.portal"),hw=Symbol.for("react.fragment"),pw=Symbol.for("react.strict_mode"),mw=Symbol.for("react.profiler"),gw=Symbol.for("react.provider"),vw=Symbol.for("react.context"),Hve=Symbol.for("react.server_context"),xw=Symbol.for("react.forward_ref"),yw=Symbol.for("react.suspense"),bw=Symbol.for("react.suspense_list"),ww=Symbol.for("react.memo"),_w=Symbol.for("react.lazy"),Wve=Symbol.for("react.offscreen"),WB;WB=Symbol.for("react.module.reference");function io(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Q3:switch(e=e.type,e){case hw:case mw:case pw:case yw:case bw:return e;default:switch(e=e&&e.$$typeof,e){case Hve:case vw:case xw:case _w:case ww:case gw:return e;default:return t}}case Z3:return t}}}qr.ContextConsumer=vw;qr.ContextProvider=gw;qr.Element=Q3;qr.ForwardRef=xw;qr.Fragment=hw;qr.Lazy=_w;qr.Memo=ww;qr.Portal=Z3;qr.Profiler=mw;qr.StrictMode=pw;qr.Suspense=yw;qr.SuspenseList=bw;qr.isAsyncMode=function(){return!1};qr.isConcurrentMode=function(){return!1};qr.isContextConsumer=function(e){return io(e)===vw};qr.isContextProvider=function(e){return io(e)===gw};qr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Q3};qr.isForwardRef=function(e){return io(e)===xw};qr.isFragment=function(e){return io(e)===hw};qr.isLazy=function(e){return io(e)===_w};qr.isMemo=function(e){return io(e)===ww};qr.isPortal=function(e){return io(e)===Z3};qr.isProfiler=function(e){return io(e)===mw};qr.isStrictMode=function(e){return io(e)===pw};qr.isSuspense=function(e){return io(e)===yw};qr.isSuspenseList=function(e){return io(e)===bw};qr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===hw||e===mw||e===pw||e===yw||e===bw||e===Wve||typeof e=="object"&&e!==null&&(e.$$typeof===_w||e.$$typeof===ww||e.$$typeof===gw||e.$$typeof===vw||e.$$typeof===xw||e.$$typeof===WB||e.getModuleId!==void 0)};qr.typeOf=io;HB.exports=qr;var Vve=HB.exports,Gve=Pc,Kve=Lc,Xve="[object Number]";function Yve(e){return typeof e=="number"||Kve(e)&&Gve(e)==Xve}var VB=Yve;const Jve=kr(VB);var Qve=VB;function Zve(e){return Qve(e)&&e!=+e}var e1e=Zve;const Qv=kr(e1e);var ki=function(t){return t===0?0:t>0?1:-1},Hd=function(t){return Sf(t)&&t.indexOf("%")===t.length-1},et=function(t){return Jve(t)&&!Qv(t)},t1e=function(t){return lr(t)},wa=function(t){return et(t)||Sf(t)},r1e=0,Zv=function(t){var r=++r1e;return"".concat(t||"").concat(r)},Oi=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!et(t)&&!Sf(t))return n;var i;if(Hd(t)){var s=t.indexOf("%");i=r*parseFloat(t.slice(0,s))/100}else i=+t;return Qv(i)&&(i=n),a&&i>r&&(i=r),i},du=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},n1e=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},iu=function(t,r){return et(t)&&et(r)?function(n){return t+n*(r-t)}:function(){return r}};function bj(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Ts(n,t))===r})}var a1e=function(t,r){return et(t)&&et(r)?t-r:Sf(t)&&Sf(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function s0(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function wj(e){"@babel/helpers - typeof";return wj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wj(e)}var i1e=["viewBox","children"],s1e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],uP=["points","pathLength"],Q5={svg:i1e,polygon:uP,polyline:uP},eE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],wb=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(M.isValidElement(t)&&(n=t.props),!Sp(n))return null;var a={};return Object.keys(n).forEach(function(i){eE.includes(i)&&(a[i]=r||function(s){return n[i](n,s)})}),a},o1e=function(t,r,n){return function(a){return t(r,n,a),null}},Nf=function(t,r,n){if(!Sp(t)||wj(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var s=t[i];eE.includes(i)&&typeof s=="function"&&(a||(a={}),a[i]=o1e(s,r,n))}),a},l1e=["children"],c1e=["children"];function dP(e,t){if(e==null)return{};var r=u1e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function u1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var fP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},oc=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},hP=null,Z5=null,tE=function e(t){if(t===hP&&Array.isArray(Z5))return Z5;var r=[];return M.Children.forEach(t,function(n){lr(n)||(Vve.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),Z5=r,hP=t,r};function Zs(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return oc(a)}):n=[oc(t)],tE(e).forEach(function(a){var i=Ts(a,"type.displayName")||Ts(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function xs(e,t){var r=Zs(e,t);return r&&r[0]}var pP=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!et(n)||n<=0||!et(a)||a<=0)},d1e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],f1e=function(t){return t&&t.type&&Sf(t.type)&&d1e.indexOf(t.type)>=0},h1e=function(t,r,n,a){var i,s=(i=Q5==null?void 0:Q5[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Vt(t)&&(a&&s.includes(r)||s1e.includes(r))||n&&eE.includes(r)},$t=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(M.isValidElement(t)&&(a=t.props),!Sp(a))return null;var i={};return Object.keys(a).forEach(function(s){var o;h1e((o=a)===null||o===void 0?void 0:o[s],s,r,n)&&(i[s]=a[s])}),i},_j=function e(t,r){if(t===r)return!0;var n=M.Children.count(t);if(n!==M.Children.count(r))return!1;if(n===0)return!0;if(n===1)return mP(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],s=r[a];if(Array.isArray(i)||Array.isArray(s)){if(!e(i,s))return!1}else if(!mP(i,s))return!1}return!0},mP=function(t,r){if(lr(t)&&lr(r))return!0;if(!lr(t)&&!lr(r)){var n=t.props||{},a=n.children,i=dP(n,l1e),s=r.props||{},o=s.children,c=dP(s,c1e);return a&&o?s0(i,c)&&_j(a,o):!a&&!o?s0(i,c):!1}return!1},gP=function(t,r){var n=[],a={};return tE(t).forEach(function(i,s){if(f1e(i))n.push(i);else if(i){var o=oc(i.type),c=r[o]||{},u=c.handler,d=c.once;if(u&&(!d||!a[o])){var f=u(i,o,s);n.push(f),a[o]=!0}}}),n},p1e=function(t){var r=t&&t.type;return r&&fP[r]?fP[r]:null},m1e=function(t,r){return tE(r).indexOf(t)},g1e=["children","width","height","viewBox","className","style","title","desc"];function Sj(){return Sj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sj.apply(this,arguments)}function v1e(e,t){if(e==null)return{};var r=x1e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function x1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Nj(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,s=e.style,o=e.title,c=e.desc,u=v1e(e,g1e),d=a||{width:r,height:n,x:0,y:0},f=sr("recharts-surface",i);return we.createElement("svg",Sj({},$t(u,!0,"svg"),{className:f,width:r,height:n,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),we.createElement("title",null,o),we.createElement("desc",null,c),t)}var y1e=["children","className"];function jj(){return jj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jj.apply(this,arguments)}function b1e(e,t){if(e==null)return{};var r=w1e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function w1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var $r=we.forwardRef(function(e,t){var r=e.children,n=e.className,a=b1e(e,y1e),i=sr("recharts-layer",n);return we.createElement("g",jj({className:i},$t(a,!0),{ref:t}),r)}),Fo=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function _1e(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var S1e=_1e,N1e=S1e;function j1e(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:N1e(e,t,r)}var A1e=j1e,E1e="\\ud800-\\udfff",T1e="\\u0300-\\u036f",C1e="\\ufe20-\\ufe2f",k1e="\\u20d0-\\u20ff",O1e=T1e+C1e+k1e,P1e="\\ufe0e\\ufe0f",L1e="\\u200d",R1e=RegExp("["+L1e+E1e+O1e+P1e+"]");function I1e(e){return R1e.test(e)}var GB=I1e;function D1e(e){return e.split("")}var M1e=D1e,KB="\\ud800-\\udfff",F1e="\\u0300-\\u036f",$1e="\\ufe20-\\ufe2f",B1e="\\u20d0-\\u20ff",U1e=F1e+$1e+B1e,z1e="\\ufe0e\\ufe0f",q1e="["+KB+"]",Aj="["+U1e+"]",Ej="\\ud83c[\\udffb-\\udfff]",H1e="(?:"+Aj+"|"+Ej+")",XB="[^"+KB+"]",YB="(?:\\ud83c[\\udde6-\\uddff]){2}",JB="[\\ud800-\\udbff][\\udc00-\\udfff]",W1e="\\u200d",QB=H1e+"?",ZB="["+z1e+"]?",V1e="(?:"+W1e+"(?:"+[XB,YB,JB].join("|")+")"+ZB+QB+")*",G1e=ZB+QB+V1e,K1e="(?:"+[XB+Aj+"?",Aj,YB,JB,q1e].join("|")+")",X1e=RegExp(Ej+"(?="+Ej+")|"+K1e+G1e,"g");function Y1e(e){return e.match(X1e)||[]}var J1e=Y1e,Q1e=M1e,Z1e=GB,exe=J1e;function txe(e){return Z1e(e)?exe(e):Q1e(e)}var rxe=txe,nxe=A1e,axe=GB,ixe=rxe,sxe=UB;function oxe(e){return function(t){t=sxe(t);var r=axe(t)?ixe(t):void 0,n=r?r[0]:t.charAt(0),a=r?nxe(r,1).join(""):t.slice(1);return n[e]()+a}}var lxe=oxe,cxe=lxe,uxe=cxe("toUpperCase"),dxe=uxe;const Sw=kr(dxe);function nn(e){return function(){return e}}const eU=Math.cos,_b=Math.sin,qo=Math.sqrt,Sb=Math.PI,Nw=2*Sb,Tj=Math.PI,Cj=2*Tj,kd=1e-6,fxe=Cj-kd;function tU(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function hxe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return tU;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class pxe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?tU:hxe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,s){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,o=this._y1,c=n-t,u=a-r,d=s-t,f=o-r,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>kd)if(!(Math.abs(f*c-u*d)>kd)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let h=n-s,v=a-o,m=c*c+u*u,x=h*h+v*v,y=Math.sqrt(m),g=Math.sqrt(p),b=i*Math.tan((Tj-Math.acos((m+p-x)/(2*y*g)))/2),S=b/g,_=b/y;Math.abs(S-1)>kd&&this._append`L${t+S*d},${r+S*f}`,this._append`A${i},${i},0,0,${+(f*h>d*v)},${this._x1=t+_*c},${this._y1=r+_*u}`}}arc(t,r,n,a,i,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),c=n*Math.sin(a),u=t+o,d=r+c,f=1^s,p=s?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>kd||Math.abs(this._y1-d)>kd)&&this._append`L${u},${d}`,n&&(p<0&&(p=p%Cj+Cj),p>fxe?this._append`A${n},${n},0,1,${f},${t-o},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:p>kd&&this._append`A${n},${n},0,${+(p>=Tj)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function rE(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new pxe(t)}function nE(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function rU(e){this._context=e}rU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function jw(e){return new rU(e)}function nU(e){return e[0]}function aU(e){return e[1]}function iU(e,t){var r=nn(!0),n=null,a=jw,i=null,s=rE(o);e=typeof e=="function"?e:e===void 0?nU:nn(e),t=typeof t=="function"?t:t===void 0?aU:nn(t);function o(c){var u,d=(c=nE(c)).length,f,p=!1,h;for(n==null&&(i=a(h=s())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(f,u,c),+t(f,u,c));if(h)return i=null,h+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:nn(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:nn(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:nn(!!c),o):r},o.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),o):a},o.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),o):n},o}function Lx(e,t,r){var n=null,a=nn(!0),i=null,s=jw,o=null,c=rE(u);e=typeof e=="function"?e:e===void 0?nU:nn(+e),t=typeof t=="function"?t:nn(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?aU:nn(+r);function u(f){var p,h,v,m=(f=nE(f)).length,x,y=!1,g,b=new Array(m),S=new Array(m);for(i==null&&(o=s(g=c())),p=0;p<=m;++p){if(!(p<m&&a(x=f[p],p,f))===y)if(y=!y)h=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=p-1;v>=h;--v)o.point(b[v],S[v]);o.lineEnd(),o.areaEnd()}y&&(b[p]=+e(x,p,f),S[p]=+t(x,p,f),o.point(n?+n(x,p,f):b[p],r?+r(x,p,f):S[p]))}if(g)return o=null,g+""||null}function d(){return iU().defined(a).curve(s).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:nn(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:nn(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:nn(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:nn(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:nn(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:nn(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:nn(!!f),u):a},u.curve=function(f){return arguments.length?(s=f,i!=null&&(o=s(i)),u):s},u.context=function(f){return arguments.length?(f==null?i=o=null:o=s(i=f),u):i},u}class sU{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function mxe(e){return new sU(e,!0)}function gxe(e){return new sU(e,!1)}const aE={draw(e,t){const r=qo(t/Sb);e.moveTo(r,0),e.arc(0,0,r,0,Nw)}},vxe={draw(e,t){const r=qo(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},oU=qo(1/3),xxe=oU*2,yxe={draw(e,t){const r=qo(t/xxe),n=r*oU;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},bxe={draw(e,t){const r=qo(t),n=-r/2;e.rect(n,n,r,r)}},wxe=.8908130915292852,lU=_b(Sb/10)/_b(7*Sb/10),_xe=_b(Nw/10)*lU,Sxe=-eU(Nw/10)*lU,Nxe={draw(e,t){const r=qo(t*wxe),n=_xe*r,a=Sxe*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const s=Nw*i/5,o=eU(s),c=_b(s);e.lineTo(c*r,-o*r),e.lineTo(o*n-c*a,c*n+o*a)}e.closePath()}},eS=qo(3),jxe={draw(e,t){const r=-qo(t/(eS*3));e.moveTo(0,r*2),e.lineTo(-eS*r,-r),e.lineTo(eS*r,-r),e.closePath()}},Bs=-.5,Us=qo(3)/2,kj=1/qo(12),Axe=(kj/2+1)*3,Exe={draw(e,t){const r=qo(t/Axe),n=r/2,a=r*kj,i=n,s=r*kj+r,o=-i,c=s;e.moveTo(n,a),e.lineTo(i,s),e.lineTo(o,c),e.lineTo(Bs*n-Us*a,Us*n+Bs*a),e.lineTo(Bs*i-Us*s,Us*i+Bs*s),e.lineTo(Bs*o-Us*c,Us*o+Bs*c),e.lineTo(Bs*n+Us*a,Bs*a-Us*n),e.lineTo(Bs*i+Us*s,Bs*s-Us*i),e.lineTo(Bs*o+Us*c,Bs*c-Us*o),e.closePath()}};function Txe(e,t){let r=null,n=rE(a);e=typeof e=="function"?e:nn(e||aE),t=typeof t=="function"?t:nn(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:nn(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:nn(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Nb(){}function jb(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function cU(e){this._context=e}cU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:jb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:jb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Cxe(e){return new cU(e)}function uU(e){this._context=e}uU.prototype={areaStart:Nb,areaEnd:Nb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:jb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kxe(e){return new uU(e)}function dU(e){this._context=e}dU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:jb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Oxe(e){return new dU(e)}function fU(e){this._context=e}fU.prototype={areaStart:Nb,areaEnd:Nb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Pxe(e){return new fU(e)}function vP(e){return e<0?-1:1}function xP(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),s=(r-e._y1)/(a||n<0&&-0),o=(i*a+s*n)/(n+a);return(vP(i)+vP(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(o))||0}function yP(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function tS(e,t,r){var n=e._x0,a=e._y0,i=e._x1,s=e._y1,o=(i-n)/3;e._context.bezierCurveTo(n+o,a+o*t,i-o,s-o*r,i,s)}function Ab(e){this._context=e}Ab.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:tS(this,this._t0,yP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,tS(this,yP(this,r=xP(this,e,t)),r);break;default:tS(this,this._t0,r=xP(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function hU(e){this._context=new pU(e)}(hU.prototype=Object.create(Ab.prototype)).point=function(e,t){Ab.prototype.point.call(this,t,e)};function pU(e){this._context=e}pU.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function Lxe(e){return new Ab(e)}function Rxe(e){return new hU(e)}function mU(e){this._context=e}mU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=bP(e),a=bP(t),i=0,s=1;s<r;++i,++s)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function bP(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),s=new Array(r);for(a[0]=0,i[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,s[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,s[t]-=n*s[t-1];for(a[r-1]=s[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(s[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Ixe(e){return new mU(e)}function Aw(e,t){this._context=e,this._t=t}Aw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Dxe(e){return new Aw(e,.5)}function Mxe(e){return new Aw(e,0)}function Fxe(e){return new Aw(e,1)}function M0(e,t){if((s=e.length)>1)for(var r=1,n,a,i=e[t[0]],s,o=i.length;r<s;++r)for(a=i,i=e[t[r]],n=0;n<o;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Oj(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function $xe(e,t){return e[t]}function Bxe(e){const t=[];return t.key=e,t}function Uxe(){var e=nn([]),t=Oj,r=M0,n=$xe;function a(i){var s=Array.from(e.apply(this,arguments),Bxe),o,c=s.length,u=-1,d;for(const f of i)for(o=0,++u;o<c;++o)(s[o][u]=[0,+n(f,s[o].key,u,i)]).data=f;for(o=0,d=nE(t(s));o<c;++o)s[d[o]].index=o;return r(s,d),s}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:nn(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:nn(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?Oj:typeof i=="function"?i:nn(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??M0,a):r},a}function zxe(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,s;a<i;++a){for(s=r=0;r<n;++r)s+=e[r][a][1]||0;if(s)for(r=0;r<n;++r)e[r][a][1]/=s}M0(e,t)}}function qxe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var s=0,o=0;s<a;++s)o+=e[s][r][1]||0;n[r][1]+=n[r][0]=-o/2}M0(e,t)}}function Hxe(e,t){if(!(!((s=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,s;n<i;++n){for(var o=0,c=0,u=0;o<s;++o){for(var d=e[t[o]],f=d[n][1]||0,p=d[n-1][1]||0,h=(f-p)/2,v=0;v<o;++v){var m=e[t[v]],x=m[n][1]||0,y=m[n-1][1]||0;h+=x-y}c+=f,u+=h*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,M0(e,t)}}function qg(e){"@babel/helpers - typeof";return qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qg(e)}var Wxe=["type","size","sizeType"];function Pj(){return Pj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pj.apply(this,arguments)}function wP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _P(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wP(Object(r),!0).forEach(function(n){Vxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vxe(e,t,r){return t=Gxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gxe(e){var t=Kxe(e,"string");return qg(t)=="symbol"?t:t+""}function Kxe(e,t){if(qg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xxe(e,t){if(e==null)return{};var r=Yxe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Yxe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var gU={symbolCircle:aE,symbolCross:vxe,symbolDiamond:yxe,symbolSquare:bxe,symbolStar:Nxe,symbolTriangle:jxe,symbolWye:Exe},Jxe=Math.PI/180,Qxe=function(t){var r="symbol".concat(Sw(t));return gU[r]||aE},Zxe=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*Jxe;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},eye=function(t,r){gU["symbol".concat(Sw(t))]=r},iE=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,s=t.sizeType,o=s===void 0?"area":s,c=Xxe(t,Wxe),u=_P(_P({},c),{},{type:n,size:i,sizeType:o}),d=function(){var x=Qxe(n),y=Txe().type(x).size(Zxe(i,o,n));return y()},f=u.className,p=u.cx,h=u.cy,v=$t(u,!0);return p===+p&&h===+h&&i===+i?we.createElement("path",Pj({},v,{className:sr("recharts-symbols",f),transform:"translate(".concat(p,", ").concat(h,")"),d:d()})):null};iE.registerSymbol=eye;function F0(e){"@babel/helpers - typeof";return F0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F0(e)}function Lj(){return Lj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lj.apply(this,arguments)}function SP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tye(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SP(Object(r),!0).forEach(function(n){Hg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xU(n.key),n)}}function aye(e,t,r){return t&&nye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function iye(e,t,r){return t=Eb(t),sye(e,vU()?Reflect.construct(t,r||[],Eb(e).constructor):t.apply(e,r))}function sye(e,t){if(t&&(F0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oye(e)}function oye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vU=function(){return!!e})()}function Eb(e){return Eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Eb(e)}function lye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rj(e,t)}function Rj(e,t){return Rj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Rj(e,t)}function Hg(e,t,r){return t=xU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xU(e){var t=cye(e,"string");return F0(t)=="symbol"?t:t+""}function cye(e,t){if(F0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(F0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zs=32,sE=function(e){function t(){return rye(this,t),iye(this,t,arguments)}return lye(t,e),aye(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=zs/2,s=zs/6,o=zs/3,c=n.inactive?a:n.color;if(n.type==="plainline")return we.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:zs,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return we.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(zs,"M").concat(2*o,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return we.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(zs/8,"h").concat(zs,"v").concat(zs*3/4,"h").concat(-zs,"z"),className:"recharts-legend-icon"});if(we.isValidElement(n.legendIcon)){var u=tye({},n);return delete u.legendIcon,we.cloneElement(n.legendIcon,u)}return we.createElement(iE,{fill:c,cx:i,cy:i,size:zs,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,s=a.iconSize,o=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:zs,height:zs},f={display:o==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(h,v){var m=h.formatter||c,x=sr(Hg(Hg({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",h.inactive));if(h.type==="none")return null;var y=Vt(h.value)?null:h.value;Fo(!Vt(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var g=h.inactive?u:h.color;return we.createElement("li",Lj({className:x,style:f,key:"legend-item-".concat(v)},Nf(n.props,h,v)),we.createElement(Nj,{width:s,height:s,viewBox:d,style:p},n.renderIcon(h)),we.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},m?m(y,h,v):y))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,s=n.align;if(!a||!a.length)return null;var o={padding:0,margin:0,textAlign:i==="horizontal"?s:"left"};return we.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(M.PureComponent);Hg(sE,"displayName","Legend");Hg(sE,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var uye=uw;function dye(){this.__data__=new uye,this.size=0}var fye=dye;function hye(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var pye=hye;function mye(e){return this.__data__.get(e)}var gye=mye;function vye(e){return this.__data__.has(e)}var xye=vye,yye=uw,bye=G3,wye=K3,_ye=200;function Sye(e,t){var r=this.__data__;if(r instanceof yye){var n=r.__data__;if(!bye||n.length<_ye-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new wye(n)}return r.set(e,t),this.size=r.size,this}var Nye=Sye,jye=uw,Aye=fye,Eye=pye,Tye=gye,Cye=xye,kye=Nye;function Ep(e){var t=this.__data__=new jye(e);this.size=t.size}Ep.prototype.clear=Aye;Ep.prototype.delete=Eye;Ep.prototype.get=Tye;Ep.prototype.has=Cye;Ep.prototype.set=kye;var yU=Ep,Oye="__lodash_hash_undefined__";function Pye(e){return this.__data__.set(e,Oye),this}var Lye=Pye;function Rye(e){return this.__data__.has(e)}var Iye=Rye,Dye=K3,Mye=Lye,Fye=Iye;function Tb(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Dye;++t<r;)this.add(e[t])}Tb.prototype.add=Tb.prototype.push=Mye;Tb.prototype.has=Fye;var bU=Tb;function $ye(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var wU=$ye;function Bye(e,t){return e.has(t)}var _U=Bye,Uye=bU,zye=wU,qye=_U,Hye=1,Wye=2;function Vye(e,t,r,n,a,i){var s=r&Hye,o=e.length,c=t.length;if(o!=c&&!(s&&c>o))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var f=-1,p=!0,h=r&Wye?new Uye:void 0;for(i.set(e,t),i.set(t,e);++f<o;){var v=e[f],m=t[f];if(n)var x=s?n(m,v,f,t,e,i):n(v,m,f,e,t,i);if(x!==void 0){if(x)continue;p=!1;break}if(h){if(!zye(t,function(y,g){if(!qye(h,g)&&(v===y||a(v,y,r,n,i)))return h.push(g)})){p=!1;break}}else if(!(v===m||a(v,m,r,n,i))){p=!1;break}}return i.delete(e),i.delete(t),p}var SU=Vye,Gye=wl,Kye=Gye.Uint8Array,Xye=Kye;function Yye(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var Jye=Yye;function Qye(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var oE=Qye,NP=Jv,jP=Xye,Zye=V3,ebe=SU,tbe=Jye,rbe=oE,nbe=1,abe=2,ibe="[object Boolean]",sbe="[object Date]",obe="[object Error]",lbe="[object Map]",cbe="[object Number]",ube="[object RegExp]",dbe="[object Set]",fbe="[object String]",hbe="[object Symbol]",pbe="[object ArrayBuffer]",mbe="[object DataView]",AP=NP?NP.prototype:void 0,rS=AP?AP.valueOf:void 0;function gbe(e,t,r,n,a,i,s){switch(r){case mbe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case pbe:return!(e.byteLength!=t.byteLength||!i(new jP(e),new jP(t)));case ibe:case sbe:case cbe:return Zye(+e,+t);case obe:return e.name==t.name&&e.message==t.message;case ube:case fbe:return e==t+"";case lbe:var o=tbe;case dbe:var c=n&nbe;if(o||(o=rbe),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;n|=abe,s.set(e,t);var d=ebe(o(e),o(t),n,a,i,s);return s.delete(e),d;case hbe:if(rS)return rS.call(e)==rS.call(t)}return!1}var vbe=gbe;function xbe(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var NU=xbe,ybe=NU,bbe=is;function wbe(e,t,r){var n=t(e);return bbe(e)?n:ybe(n,r(e))}var _be=wbe;function Sbe(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[a++]=s)}return i}var Nbe=Sbe;function jbe(){return[]}var Abe=jbe,Ebe=Nbe,Tbe=Abe,Cbe=Object.prototype,kbe=Cbe.propertyIsEnumerable,EP=Object.getOwnPropertySymbols,Obe=EP?function(e){return e==null?[]:(e=Object(e),Ebe(EP(e),function(t){return kbe.call(e,t)}))}:Tbe,Pbe=Obe;function Lbe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Rbe=Lbe,Ibe=Pc,Dbe=Lc,Mbe="[object Arguments]";function Fbe(e){return Dbe(e)&&Ibe(e)==Mbe}var $be=Fbe,TP=$be,Bbe=Lc,jU=Object.prototype,Ube=jU.hasOwnProperty,zbe=jU.propertyIsEnumerable,qbe=TP(function(){return arguments}())?TP:function(e){return Bbe(e)&&Ube.call(e,"callee")&&!zbe.call(e,"callee")},lE=qbe,Cb={exports:{}};function Hbe(){return!1}var Wbe=Hbe;Cb.exports;(function(e,t){var r=wl,n=Wbe,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===a,o=s?r.Buffer:void 0,c=o?o.isBuffer:void 0,u=c||n;e.exports=u})(Cb,Cb.exports);var AU=Cb.exports,Vbe=9007199254740991,Gbe=/^(?:0|[1-9]\d*)$/;function Kbe(e,t){var r=typeof e;return t=t??Vbe,!!t&&(r=="number"||r!="symbol"&&Gbe.test(e))&&e>-1&&e%1==0&&e<t}var cE=Kbe,Xbe=9007199254740991;function Ybe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Xbe}var uE=Ybe,Jbe=Pc,Qbe=uE,Zbe=Lc,e2e="[object Arguments]",t2e="[object Array]",r2e="[object Boolean]",n2e="[object Date]",a2e="[object Error]",i2e="[object Function]",s2e="[object Map]",o2e="[object Number]",l2e="[object Object]",c2e="[object RegExp]",u2e="[object Set]",d2e="[object String]",f2e="[object WeakMap]",h2e="[object ArrayBuffer]",p2e="[object DataView]",m2e="[object Float32Array]",g2e="[object Float64Array]",v2e="[object Int8Array]",x2e="[object Int16Array]",y2e="[object Int32Array]",b2e="[object Uint8Array]",w2e="[object Uint8ClampedArray]",_2e="[object Uint16Array]",S2e="[object Uint32Array]",un={};un[m2e]=un[g2e]=un[v2e]=un[x2e]=un[y2e]=un[b2e]=un[w2e]=un[_2e]=un[S2e]=!0;un[e2e]=un[t2e]=un[h2e]=un[r2e]=un[p2e]=un[n2e]=un[a2e]=un[i2e]=un[s2e]=un[o2e]=un[l2e]=un[c2e]=un[u2e]=un[d2e]=un[f2e]=!1;function N2e(e){return Zbe(e)&&Qbe(e.length)&&!!un[Jbe(e)]}var j2e=N2e;function A2e(e){return function(t){return e(t)}}var EU=A2e,kb={exports:{}};kb.exports;(function(e,t){var r=IB,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,s=i&&r.process,o=function(){try{var c=a&&a.require&&a.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();e.exports=o})(kb,kb.exports);var E2e=kb.exports,T2e=j2e,C2e=EU,CP=E2e,kP=CP&&CP.isTypedArray,k2e=kP?C2e(kP):T2e,TU=k2e,O2e=Rbe,P2e=lE,L2e=is,R2e=AU,I2e=cE,D2e=TU,M2e=Object.prototype,F2e=M2e.hasOwnProperty;function $2e(e,t){var r=L2e(e),n=!r&&P2e(e),a=!r&&!n&&R2e(e),i=!r&&!n&&!a&&D2e(e),s=r||n||a||i,o=s?O2e(e.length,String):[],c=o.length;for(var u in e)(t||F2e.call(e,u))&&!(s&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||I2e(u,c)))&&o.push(u);return o}var B2e=$2e,U2e=Object.prototype;function z2e(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||U2e;return e===r}var q2e=z2e;function H2e(e,t){return function(r){return e(t(r))}}var CU=H2e,W2e=CU,V2e=W2e(Object.keys,Object),G2e=V2e,K2e=q2e,X2e=G2e,Y2e=Object.prototype,J2e=Y2e.hasOwnProperty;function Q2e(e){if(!K2e(e))return X2e(e);var t=[];for(var r in Object(e))J2e.call(e,r)&&r!="constructor"&&t.push(r);return t}var Z2e=Q2e,ewe=W3,twe=uE;function rwe(e){return e!=null&&twe(e.length)&&!ewe(e)}var e1=rwe,nwe=B2e,awe=Z2e,iwe=e1;function swe(e){return iwe(e)?nwe(e):awe(e)}var Ew=swe,owe=_be,lwe=Pbe,cwe=Ew;function uwe(e){return owe(e,cwe,lwe)}var dwe=uwe,OP=dwe,fwe=1,hwe=Object.prototype,pwe=hwe.hasOwnProperty;function mwe(e,t,r,n,a,i){var s=r&fwe,o=OP(e),c=o.length,u=OP(t),d=u.length;if(c!=d&&!s)return!1;for(var f=c;f--;){var p=o[f];if(!(s?p in t:pwe.call(t,p)))return!1}var h=i.get(e),v=i.get(t);if(h&&v)return h==t&&v==e;var m=!0;i.set(e,t),i.set(t,e);for(var x=s;++f<c;){p=o[f];var y=e[p],g=t[p];if(n)var b=s?n(g,y,p,t,e,i):n(y,g,p,e,t,i);if(!(b===void 0?y===g||a(y,g,r,n,i):b)){m=!1;break}x||(x=p=="constructor")}if(m&&!x){var S=e.constructor,_=t.constructor;S!=_&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof _=="function"&&_ instanceof _)&&(m=!1)}return i.delete(e),i.delete(t),m}var gwe=mwe,vwe=zf,xwe=wl,ywe=vwe(xwe,"DataView"),bwe=ywe,wwe=zf,_we=wl,Swe=wwe(_we,"Promise"),Nwe=Swe,jwe=zf,Awe=wl,Ewe=jwe(Awe,"Set"),kU=Ewe,Twe=zf,Cwe=wl,kwe=Twe(Cwe,"WeakMap"),Owe=kwe,Ij=bwe,Dj=G3,Mj=Nwe,Fj=kU,$j=Owe,OU=Pc,Tp=MB,PP="[object Map]",Pwe="[object Object]",LP="[object Promise]",RP="[object Set]",IP="[object WeakMap]",DP="[object DataView]",Lwe=Tp(Ij),Rwe=Tp(Dj),Iwe=Tp(Mj),Dwe=Tp(Fj),Mwe=Tp($j),Od=OU;(Ij&&Od(new Ij(new ArrayBuffer(1)))!=DP||Dj&&Od(new Dj)!=PP||Mj&&Od(Mj.resolve())!=LP||Fj&&Od(new Fj)!=RP||$j&&Od(new $j)!=IP)&&(Od=function(e){var t=OU(e),r=t==Pwe?e.constructor:void 0,n=r?Tp(r):"";if(n)switch(n){case Lwe:return DP;case Rwe:return PP;case Iwe:return LP;case Dwe:return RP;case Mwe:return IP}return t});var Fwe=Od,nS=yU,$we=SU,Bwe=vbe,Uwe=gwe,MP=Fwe,FP=is,$P=AU,zwe=TU,qwe=1,BP="[object Arguments]",UP="[object Array]",Rx="[object Object]",Hwe=Object.prototype,zP=Hwe.hasOwnProperty;function Wwe(e,t,r,n,a,i){var s=FP(e),o=FP(t),c=s?UP:MP(e),u=o?UP:MP(t);c=c==BP?Rx:c,u=u==BP?Rx:u;var d=c==Rx,f=u==Rx,p=c==u;if(p&&$P(e)){if(!$P(t))return!1;s=!0,d=!1}if(p&&!d)return i||(i=new nS),s||zwe(e)?$we(e,t,r,n,a,i):Bwe(e,t,c,r,n,a,i);if(!(r&qwe)){var h=d&&zP.call(e,"__wrapped__"),v=f&&zP.call(t,"__wrapped__");if(h||v){var m=h?e.value():e,x=v?t.value():t;return i||(i=new nS),a(m,x,r,n,i)}}return p?(i||(i=new nS),Uwe(e,t,r,n,a,i)):!1}var Vwe=Wwe,Gwe=Vwe,qP=Lc;function PU(e,t,r,n,a){return e===t?!0:e==null||t==null||!qP(e)&&!qP(t)?e!==e&&t!==t:Gwe(e,t,r,n,PU,a)}var dE=PU,Kwe=yU,Xwe=dE,Ywe=1,Jwe=2;function Qwe(e,t,r,n){var a=r.length,i=a,s=!n;if(e==null)return!i;for(e=Object(e);a--;){var o=r[a];if(s&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++a<i;){o=r[a];var c=o[0],u=e[c],d=o[1];if(s&&o[2]){if(u===void 0&&!(c in e))return!1}else{var f=new Kwe;if(n)var p=n(u,d,c,e,t,f);if(!(p===void 0?Xwe(d,u,Ywe|Jwe,n,f):p))return!1}}return!0}var Zwe=Qwe,e_e=ed;function t_e(e){return e===e&&!e_e(e)}var LU=t_e,r_e=LU,n_e=Ew;function a_e(e){for(var t=n_e(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,r_e(a)]}return t}var i_e=a_e;function s_e(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var RU=s_e,o_e=Zwe,l_e=i_e,c_e=RU;function u_e(e){var t=l_e(e);return t.length==1&&t[0][2]?c_e(t[0][0],t[0][1]):function(r){return r===e||o_e(r,e,t)}}var d_e=u_e;function f_e(e,t){return e!=null&&t in Object(e)}var h_e=f_e,p_e=zB,m_e=lE,g_e=is,v_e=cE,x_e=uE,y_e=fw;function b_e(e,t,r){t=p_e(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var s=y_e(t[n]);if(!(i=e!=null&&r(e,s)))break;e=e[s]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&x_e(a)&&v_e(s,a)&&(g_e(e)||m_e(e)))}var w_e=b_e,__e=h_e,S_e=w_e;function N_e(e,t){return e!=null&&S_e(e,t,__e)}var j_e=N_e,A_e=dE,E_e=qB,T_e=j_e,C_e=H3,k_e=LU,O_e=RU,P_e=fw,L_e=1,R_e=2;function I_e(e,t){return C_e(e)&&k_e(t)?O_e(P_e(e),t):function(r){var n=E_e(r,e);return n===void 0&&n===t?T_e(r,e):A_e(t,n,L_e|R_e)}}var D_e=I_e;function M_e(e){return e}var Cp=M_e;function F_e(e){return function(t){return t==null?void 0:t[e]}}var $_e=F_e,B_e=J3;function U_e(e){return function(t){return B_e(t,e)}}var z_e=U_e,q_e=$_e,H_e=z_e,W_e=H3,V_e=fw;function G_e(e){return W_e(e)?q_e(V_e(e)):H_e(e)}var K_e=G_e,X_e=d_e,Y_e=D_e,J_e=Cp,Q_e=is,Z_e=K_e;function e5e(e){return typeof e=="function"?e:e==null?J_e:typeof e=="object"?Q_e(e)?Y_e(e[0],e[1]):X_e(e):Z_e(e)}var _l=e5e;function t5e(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var IU=t5e;function r5e(e){return e!==e}var n5e=r5e;function a5e(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var i5e=a5e,s5e=IU,o5e=n5e,l5e=i5e;function c5e(e,t,r){return t===t?l5e(e,t,r):s5e(e,o5e,r)}var u5e=c5e,d5e=u5e;function f5e(e,t){var r=e==null?0:e.length;return!!r&&d5e(e,t,0)>-1}var h5e=f5e;function p5e(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var m5e=p5e;function g5e(){}var v5e=g5e,aS=kU,x5e=v5e,y5e=oE,b5e=1/0,w5e=aS&&1/y5e(new aS([,-0]))[1]==b5e?function(e){return new aS(e)}:x5e,_5e=w5e,S5e=bU,N5e=h5e,j5e=m5e,A5e=_U,E5e=_5e,T5e=oE,C5e=200;function k5e(e,t,r){var n=-1,a=N5e,i=e.length,s=!0,o=[],c=o;if(r)s=!1,a=j5e;else if(i>=C5e){var u=t?null:E5e(e);if(u)return T5e(u);s=!1,a=A5e,c=new S5e}else c=t?[]:o;e:for(;++n<i;){var d=e[n],f=t?t(d):d;if(d=r||d!==0?d:0,s&&f===f){for(var p=c.length;p--;)if(c[p]===f)continue e;t&&c.push(f),o.push(d)}else a(c,f,r)||(c!==o&&c.push(f),o.push(d))}return o}var O5e=k5e,P5e=_l,L5e=O5e;function R5e(e,t){return e&&e.length?L5e(e,P5e(t)):[]}var I5e=R5e;const HP=kr(I5e);function DU(e,t,r){return t===!0?HP(e,r):Vt(t)?HP(e,t):e}function $0(e){"@babel/helpers - typeof";return $0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$0(e)}var D5e=["ref"];function WP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ul(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WP(Object(r),!0).forEach(function(n){Tw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,FU(n.key),n)}}function F5e(e,t,r){return t&&VP(e.prototype,t),r&&VP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $5e(e,t,r){return t=Ob(t),B5e(e,MU()?Reflect.construct(t,r||[],Ob(e).constructor):t.apply(e,r))}function B5e(e,t){if(t&&($0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U5e(e)}function U5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MU=function(){return!!e})()}function Ob(e){return Ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ob(e)}function z5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bj(e,t)}function Bj(e,t){return Bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Bj(e,t)}function Tw(e,t,r){return t=FU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FU(e){var t=q5e(e,"string");return $0(t)=="symbol"?t:t+""}function q5e(e,t){if($0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function H5e(e,t){if(e==null)return{};var r=W5e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function W5e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function V5e(e){return e.value}function G5e(e,t){if(we.isValidElement(e))return we.cloneElement(e,t);if(typeof e=="function")return we.createElement(e,t);t.ref;var r=H5e(t,D5e);return we.createElement(sE,r)}var GP=1,lc=function(e){function t(){var r;M5e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=$5e(this,t,[].concat(a)),Tw(r,"lastBoundingBox",{width:-1,height:-1}),r}return z5e(t,e),F5e(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>GP||Math.abs(a.height-this.lastBoundingBox.height)>GP)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ul({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,s=a.align,o=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,p;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(s==="center"&&i==="vertical"){var h=this.getBBoxSnapshot();f={left:((u||0)-h.width)/2}}else f=s==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(o==="middle"){var v=this.getBBoxSnapshot();p={top:((d||0)-v.height)/2}}else p=o==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Ul(Ul({},f),p)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,s=a.width,o=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=Ul(Ul({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(c)),c);return we.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(h){n.wrapperNode=h}},G5e(i,Ul(Ul({},this.props),{},{payload:DU(d,u,V5e)})))}}],[{key:"getWithHeight",value:function(n,a){var i=Ul(Ul({},this.defaultProps),n.props),s=i.layout;return s==="vertical"&&et(n.props.height)?{height:n.props.height}:s==="horizontal"?{width:n.props.width||a}:null}}])}(M.PureComponent);Tw(lc,"displayName","Legend");Tw(lc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var KP=Jv,K5e=lE,X5e=is,XP=KP?KP.isConcatSpreadable:void 0;function Y5e(e){return X5e(e)||K5e(e)||!!(XP&&e&&e[XP])}var J5e=Y5e,Q5e=NU,Z5e=J5e;function $U(e,t,r,n,a){var i=-1,s=e.length;for(r||(r=Z5e),a||(a=[]);++i<s;){var o=e[i];t>0&&r(o)?t>1?$U(o,t-1,r,n,a):Q5e(a,o):n||(a[a.length]=o)}return a}var BU=$U;function eSe(e){return function(t,r,n){for(var a=-1,i=Object(t),s=n(t),o=s.length;o--;){var c=s[e?o:++a];if(r(i[c],c,i)===!1)break}return t}}var tSe=eSe,rSe=tSe,nSe=rSe(),aSe=nSe,iSe=aSe,sSe=Ew;function oSe(e,t){return e&&iSe(e,t,sSe)}var UU=oSe,lSe=e1;function cSe(e,t){return function(r,n){if(r==null)return r;if(!lSe(r))return e(r,n);for(var a=r.length,i=t?a:-1,s=Object(r);(t?i--:++i<a)&&n(s[i],i,s)!==!1;);return r}}var uSe=cSe,dSe=UU,fSe=uSe,hSe=fSe(dSe),fE=hSe,pSe=fE,mSe=e1;function gSe(e,t){var r=-1,n=mSe(e)?Array(e.length):[];return pSe(e,function(a,i,s){n[++r]=t(a,i,s)}),n}var zU=gSe;function vSe(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var xSe=vSe,YP=_p;function ySe(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=YP(e),s=t!==void 0,o=t===null,c=t===t,u=YP(t);if(!o&&!u&&!i&&e>t||i&&s&&c&&!o&&!u||n&&s&&c||!r&&c||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||o&&r&&a||!s&&a||!c)return-1}return 0}var bSe=ySe,wSe=bSe;function _Se(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,s=a.length,o=r.length;++n<s;){var c=wSe(a[n],i[n]);if(c){if(n>=o)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var SSe=_Se,iS=Y3,NSe=J3,jSe=_l,ASe=zU,ESe=xSe,TSe=EU,CSe=SSe,kSe=Cp,OSe=is;function PSe(e,t,r){t.length?t=iS(t,function(i){return OSe(i)?function(s){return NSe(s,i.length===1?i[0]:i)}:i}):t=[kSe];var n=-1;t=iS(t,TSe(jSe));var a=ASe(e,function(i,s,o){var c=iS(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return ESe(a,function(i,s){return CSe(i,s,r)})}var LSe=PSe;function RSe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var ISe=RSe,DSe=ISe,JP=Math.max;function MSe(e,t,r){return t=JP(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=JP(n.length-t,0),s=Array(i);++a<i;)s[a]=n[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=n[a];return o[t]=r(s),DSe(e,this,o)}}var FSe=MSe;function $Se(e){return function(){return e}}var BSe=$Se,USe=zf,zSe=function(){try{var e=USe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),qU=zSe,qSe=BSe,QP=qU,HSe=Cp,WSe=QP?function(e,t){return QP(e,"toString",{configurable:!0,enumerable:!1,value:qSe(t),writable:!0})}:HSe,VSe=WSe,GSe=800,KSe=16,XSe=Date.now;function YSe(e){var t=0,r=0;return function(){var n=XSe(),a=KSe-(n-r);if(r=n,a>0){if(++t>=GSe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var JSe=YSe,QSe=VSe,ZSe=JSe,eNe=ZSe(QSe),tNe=eNe,rNe=Cp,nNe=FSe,aNe=tNe;function iNe(e,t){return aNe(nNe(e,t,rNe),e+"")}var sNe=iNe,oNe=V3,lNe=e1,cNe=cE,uNe=ed;function dNe(e,t,r){if(!uNe(r))return!1;var n=typeof t;return(n=="number"?lNe(r)&&cNe(t,r.length):n=="string"&&t in r)?oNe(r[t],e):!1}var Cw=dNe,fNe=BU,hNe=LSe,pNe=sNe,ZP=Cw,mNe=pNe(function(e,t){if(e==null)return[];var r=t.length;return r>1&&ZP(e,t[0],t[1])?t=[]:r>2&&ZP(t[0],t[1],t[2])&&(t=[t[0]]),hNe(e,fNe(t,1),[])}),gNe=mNe;const hE=kr(gNe);function Wg(e){"@babel/helpers - typeof";return Wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wg(e)}function Uj(){return Uj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uj.apply(this,arguments)}function vNe(e,t){return wNe(e)||bNe(e,t)||yNe(e,t)||xNe()}function xNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yNe(e,t){if(e){if(typeof e=="string")return e8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e8(e,t)}}function e8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bNe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function wNe(e){if(Array.isArray(e))return e}function t8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t8(Object(r),!0).forEach(function(n){_Ne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Ne(e,t,r){return t=SNe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SNe(e){var t=NNe(e,"string");return Wg(t)=="symbol"?t:t+""}function NNe(e,t){if(Wg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jNe(e){return Array.isArray(e)&&wa(e[0])&&wa(e[1])?e.join(" ~ "):e}var ANe=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,s=t.itemStyle,o=s===void 0?{}:s,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,p=t.itemSorter,h=t.wrapperClassName,v=t.labelClassName,m=t.label,x=t.labelFormatter,y=t.accessibilityLayer,g=y===void 0?!1:y,b=function(){if(d&&d.length){var R={padding:0,margin:0},D=(p?hE(d,p):d).map(function(q,X){if(q.type==="none")return null;var se=sS({display:"block",paddingTop:4,paddingBottom:4,color:q.color||"#000"},o),Z=q.formatter||f||jNe,K=q.value,ie=q.name,pe=K,me=ie;if(Z&&pe!=null&&me!=null){var O=Z(K,ie,q,X,d);if(Array.isArray(O)){var F=vNe(O,2);pe=F[0],me=F[1]}else pe=O}return we.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(X),style:se},wa(me)?we.createElement("span",{className:"recharts-tooltip-item-name"},me):null,wa(me)?we.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,we.createElement("span",{className:"recharts-tooltip-item-value"},pe),we.createElement("span",{className:"recharts-tooltip-item-unit"},q.unit||""))});return we.createElement("ul",{className:"recharts-tooltip-item-list",style:R},D)}return null},S=sS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),_=sS({margin:0},u),j=!lr(m),A=j?m:"",E=sr("recharts-default-tooltip",h),T=sr("recharts-tooltip-label",v);j&&x&&d!==void 0&&d!==null&&(A=x(m,d));var L=g?{role:"status","aria-live":"assertive"}:{};return we.createElement("div",Uj({className:E,style:S},L),we.createElement("p",{className:T,style:_},we.isValidElement(A)?A:"".concat(A)),b())};function Vg(e){"@babel/helpers - typeof";return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vg(e)}function Ix(e,t,r){return t=ENe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ENe(e){var t=TNe(e,"string");return Vg(t)=="symbol"?t:t+""}function TNe(e,t){if(Vg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ym="recharts-tooltip-wrapper",CNe={visibility:"hidden"};function kNe(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return sr(ym,Ix(Ix(Ix(Ix({},"".concat(ym,"-right"),et(r)&&t&&et(t.x)&&r>=t.x),"".concat(ym,"-left"),et(r)&&t&&et(t.x)&&r<t.x),"".concat(ym,"-bottom"),et(n)&&t&&et(t.y)&&n>=t.y),"".concat(ym,"-top"),et(n)&&t&&et(t.y)&&n<t.y))}function r8(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,s=e.reverseDirection,o=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&et(i[n]))return i[n];var d=r[n]-o-a,f=r[n]+a;if(t[n])return s[n]?d:f;if(s[n]){var p=d,h=c[n];return p<h?Math.max(f,c[n]):Math.max(d,c[n])}var v=f+o,m=c[n]+u;return v>m?Math.max(d,c[n]):Math.max(f,c[n])}function ONe(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function PNe(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,s=e.tooltipBox,o=e.useTranslate3d,c=e.viewBox,u,d,f;return s.height>0&&s.width>0&&r?(d=r8({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),f=r8({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=ONe({translateX:d,translateY:f,useTranslate3d:o})):u=CNe,{cssProperties:u,cssClasses:kNe({translateX:d,translateY:f,coordinate:r})}}function B0(e){"@babel/helpers - typeof";return B0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B0(e)}function n8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function a8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n8(Object(r),!0).forEach(function(n){qj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RNe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WU(n.key),n)}}function INe(e,t,r){return t&&RNe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function DNe(e,t,r){return t=Pb(t),MNe(e,HU()?Reflect.construct(t,r||[],Pb(e).constructor):t.apply(e,r))}function MNe(e,t){if(t&&(B0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FNe(e)}function FNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HU=function(){return!!e})()}function Pb(e){return Pb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Pb(e)}function $Ne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zj(e,t)}function zj(e,t){return zj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},zj(e,t)}function qj(e,t,r){return t=WU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WU(e){var t=BNe(e,"string");return B0(t)=="symbol"?t:t+""}function BNe(e,t){if(B0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(B0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var i8=1,UNe=function(e){function t(){var r;LNe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=DNe(this,t,[].concat(a)),qj(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),qj(r,"handleKeyDown",function(s){if(s.key==="Escape"){var o,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&o!==void 0?o:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return $Ne(t,e),INe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>i8||Math.abs(n.height-this.state.lastBoundingBox.height)>i8)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,p=a.isAnimationActive,h=a.offset,v=a.position,m=a.reverseDirection,x=a.useTranslate3d,y=a.viewBox,g=a.wrapperStyle,b=PNe({allowEscapeViewBox:s,coordinate:d,offsetTopLeft:h,position:v,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:y}),S=b.cssClasses,_=b.cssProperties,j=a8(a8({transition:p&&i?"transform ".concat(o,"ms ").concat(c):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},g);return we.createElement("div",{tabIndex:-1,className:S,style:j,ref:function(E){n.wrapperNode=E}},u)}}])}(M.PureComponent),zNe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},kp={isSsr:zNe()};function U0(e){"@babel/helpers - typeof";return U0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U0(e)}function s8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function o8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s8(Object(r),!0).forEach(function(n){pE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HNe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GU(n.key),n)}}function WNe(e,t,r){return t&&HNe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function VNe(e,t,r){return t=Lb(t),GNe(e,VU()?Reflect.construct(t,r||[],Lb(e).constructor):t.apply(e,r))}function GNe(e,t){if(t&&(U0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KNe(e)}function KNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VU=function(){return!!e})()}function Lb(e){return Lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lb(e)}function XNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hj(e,t)}function Hj(e,t){return Hj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Hj(e,t)}function pE(e,t,r){return t=GU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GU(e){var t=YNe(e,"string");return U0(t)=="symbol"?t:t+""}function YNe(e,t){if(U0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(U0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function JNe(e){return e.dataKey}function QNe(e,t){return we.isValidElement(e)?we.cloneElement(e,t):typeof e=="function"?we.createElement(e,t):we.createElement(ANe,t)}var Ca=function(e){function t(){return qNe(this,t),VNe(this,t,arguments)}return XNe(t,e),WNe(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,p=a.isAnimationActive,h=a.offset,v=a.payload,m=a.payloadUniqBy,x=a.position,y=a.reverseDirection,g=a.useTranslate3d,b=a.viewBox,S=a.wrapperStyle,_=v??[];f&&_.length&&(_=DU(v.filter(function(A){return A.value!=null&&(A.hide!==!0||n.props.includeHidden)}),m,JNe));var j=_.length>0;return we.createElement(UNe,{allowEscapeViewBox:s,animationDuration:o,animationEasing:c,isAnimationActive:p,active:i,coordinate:d,hasPayload:j,offset:h,position:x,reverseDirection:y,useTranslate3d:g,viewBox:b,wrapperStyle:S},QNe(u,o8(o8({},this.props),{},{payload:_})))}}])}(M.PureComponent);pE(Ca,"displayName","Tooltip");pE(Ca,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!kp.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var ZNe=wl,eje=function(){return ZNe.Date.now()},tje=eje,rje=/\s/;function nje(e){for(var t=e.length;t--&&rje.test(e.charAt(t)););return t}var aje=nje,ije=aje,sje=/^\s+/;function oje(e){return e&&e.slice(0,ije(e)+1).replace(sje,"")}var lje=oje,cje=lje,l8=ed,uje=_p,c8=NaN,dje=/^[-+]0x[0-9a-f]+$/i,fje=/^0b[01]+$/i,hje=/^0o[0-7]+$/i,pje=parseInt;function mje(e){if(typeof e=="number")return e;if(uje(e))return c8;if(l8(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=l8(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=cje(e);var r=fje.test(e);return r||hje.test(e)?pje(e.slice(2),r?2:8):dje.test(e)?c8:+e}var KU=mje,gje=ed,oS=tje,u8=KU,vje="Expected a function",xje=Math.max,yje=Math.min;function bje(e,t,r){var n,a,i,s,o,c,u=0,d=!1,f=!1,p=!0;if(typeof e!="function")throw new TypeError(vje);t=u8(t)||0,gje(r)&&(d=!!r.leading,f="maxWait"in r,i=f?xje(u8(r.maxWait)||0,t):i,p="trailing"in r?!!r.trailing:p);function h(j){var A=n,E=a;return n=a=void 0,u=j,s=e.apply(E,A),s}function v(j){return u=j,o=setTimeout(y,t),d?h(j):s}function m(j){var A=j-c,E=j-u,T=t-A;return f?yje(T,i-E):T}function x(j){var A=j-c,E=j-u;return c===void 0||A>=t||A<0||f&&E>=i}function y(){var j=oS();if(x(j))return g(j);o=setTimeout(y,m(j))}function g(j){return o=void 0,p&&n?h(j):(n=a=void 0,s)}function b(){o!==void 0&&clearTimeout(o),u=0,n=c=a=o=void 0}function S(){return o===void 0?s:g(oS())}function _(){var j=oS(),A=x(j);if(n=arguments,a=this,c=j,A){if(o===void 0)return v(c);if(f)return clearTimeout(o),o=setTimeout(y,t),h(c)}return o===void 0&&(o=setTimeout(y,t)),s}return _.cancel=b,_.flush=S,_}var wje=bje,_je=wje,Sje=ed,Nje="Expected a function";function jje(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(Nje);return Sje(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),_je(e,t,{leading:n,maxWait:t,trailing:a})}var Aje=jje;const XU=kr(Aje);function Gg(e){"@babel/helpers - typeof";return Gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gg(e)}function d8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Dx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d8(Object(r),!0).forEach(function(n){Eje(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eje(e,t,r){return t=Tje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tje(e){var t=Cje(e,"string");return Gg(t)=="symbol"?t:t+""}function Cje(e,t){if(Gg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kje(e,t){return Rje(e)||Lje(e,t)||Pje(e,t)||Oje()}function Oje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pje(e,t){if(e){if(typeof e=="string")return f8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f8(e,t)}}function f8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Lje(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function Rje(e){if(Array.isArray(e))return e}var cc=M.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,s=i===void 0?"100%":i,o=e.height,c=o===void 0?"100%":o,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,p=e.maxHeight,h=e.children,v=e.debounce,m=v===void 0?0:v,x=e.id,y=e.className,g=e.onResize,b=e.style,S=b===void 0?{}:b,_=M.useRef(null),j=M.useRef();j.current=g,M.useImperativeHandle(t,function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})});var A=M.useState({containerWidth:a.width,containerHeight:a.height}),E=kje(A,2),T=E[0],L=E[1],k=M.useCallback(function(D,q){L(function(X){var se=Math.round(D),Z=Math.round(q);return X.containerWidth===se&&X.containerHeight===Z?X:{containerWidth:se,containerHeight:Z}})},[]);M.useEffect(function(){var D=function(ie){var pe,me=ie[0].contentRect,O=me.width,F=me.height;k(O,F),(pe=j.current)===null||pe===void 0||pe.call(j,O,F)};m>0&&(D=XU(D,m,{trailing:!0,leading:!1}));var q=new ResizeObserver(D),X=_.current.getBoundingClientRect(),se=X.width,Z=X.height;return k(se,Z),q.observe(_.current),function(){q.disconnect()}},[k,m]);var R=M.useMemo(function(){var D=T.containerWidth,q=T.containerHeight;if(D<0||q<0)return null;Fo(Hd(s)||Hd(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,c),Fo(!r||r>0,"The aspect(%s) must be greater than zero.",r);var X=Hd(s)?D:s,se=Hd(c)?q:c;r&&r>0&&(X?se=X/r:se&&(X=se*r),p&&se>p&&(se=p)),Fo(X>0||se>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,X,se,s,c,d,f,r);var Z=!Array.isArray(h)&&oc(h.type).endsWith("Chart");return we.Children.map(h,function(K){return we.isValidElement(K)?M.cloneElement(K,Dx({width:X,height:se},Z?{style:Dx({height:"100%",width:"100%",maxHeight:se,maxWidth:X},K.props.style)}:{})):K})},[r,h,c,p,f,d,T,s]);return we.createElement("div",{id:x?"".concat(x):void 0,className:sr("recharts-responsive-container",y),style:Dx(Dx({},S),{},{width:s,height:c,minWidth:d,minHeight:f,maxHeight:p}),ref:_},R)}),Rc=function(t){return null};Rc.displayName="Cell";function Kg(e){"@babel/helpers - typeof";return Kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kg(e)}function h8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h8(Object(r),!0).forEach(function(n){Ije(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ije(e,t,r){return t=Dje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dje(e){var t=Mje(e,"string");return Kg(t)=="symbol"?t:t+""}function Mje(e,t){if(Kg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Kg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hh={widthCache:{},cacheCount:0},Fje=2e3,$je={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},p8="recharts_measurement_span";function Bje(e){var t=Wj({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var ag=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||kp.isSsr)return{width:0,height:0};var n=Bje(r),a=JSON.stringify({text:t,copyStyle:n});if(hh.widthCache[a])return hh.widthCache[a];try{var i=document.getElementById(p8);i||(i=document.createElement("span"),i.setAttribute("id",p8),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var s=Wj(Wj({},$je),n);Object.assign(i.style,s),i.textContent="".concat(t);var o=i.getBoundingClientRect(),c={width:o.width,height:o.height};return hh.widthCache[a]=c,++hh.cacheCount>Fje&&(hh.cacheCount=0,hh.widthCache={}),c}catch{return{width:0,height:0}}},Uje=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Xg(e){"@babel/helpers - typeof";return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xg(e)}function Rb(e,t){return Wje(e)||Hje(e,t)||qje(e,t)||zje()}function zje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qje(e,t){if(e){if(typeof e=="string")return m8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m8(e,t)}}function m8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Hje(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function Wje(e){if(Array.isArray(e))return e}function Vje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Kje(n.key),n)}}function Gje(e,t,r){return t&&g8(e.prototype,t),r&&g8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kje(e){var t=Xje(e,"string");return Xg(t)=="symbol"?t:t+""}function Xje(e,t){if(Xg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var v8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,x8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Yje=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Jje=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,YU={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Qje=Object.keys(YU),Dh="NaN";function Zje(e,t){return e*YU[t]}var Mx=function(){function e(t,r){Vje(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!Yje.test(r)&&(this.num=NaN,this.unit=""),Qje.includes(r)&&(this.num=Zje(t,r),this.unit="px")}return Gje(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=Jje.exec(r))!==null&&n!==void 0?n:[],i=Rb(a,3),s=i[1],o=i[2];return new e(parseFloat(s),o??"")}}])}();function JU(e){if(e.includes(Dh))return Dh;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=v8.exec(t))!==null&&r!==void 0?r:[],a=Rb(n,4),i=a[1],s=a[2],o=a[3],c=Mx.parse(i??""),u=Mx.parse(o??""),d=s==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Dh;t=t.replace(v8,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,p=(f=x8.exec(t))!==null&&f!==void 0?f:[],h=Rb(p,4),v=h[1],m=h[2],x=h[3],y=Mx.parse(v??""),g=Mx.parse(x??""),b=m==="+"?y.add(g):y.subtract(g);if(b.isNaN())return Dh;t=t.replace(x8,b.toString())}return t}var y8=/\(([^()]*)\)/;function e4e(e){for(var t=e;t.includes("(");){var r=y8.exec(t),n=Rb(r,2),a=n[1];t=t.replace(y8,JU(a))}return t}function t4e(e){var t=e.replace(/\s+/g,"");return t=e4e(t),t=JU(t),t}function r4e(e){try{return t4e(e)}catch{return Dh}}function lS(e){var t=r4e(e.slice(5,-1));return t===Dh?"":t}var n4e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],a4e=["dx","dy","angle","className","breakAll"];function Vj(){return Vj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vj.apply(this,arguments)}function b8(e,t){if(e==null)return{};var r=i4e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function i4e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function w8(e,t){return c4e(e)||l4e(e,t)||o4e(e,t)||s4e()}function s4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o4e(e,t){if(e){if(typeof e=="string")return _8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _8(e,t)}}function _8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l4e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function c4e(e){if(Array.isArray(e))return e}var QU=/[ \f\n\r\t\v\u2028\u2029]+/,ZU=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];lr(r)||(n?i=r.toString().split(""):i=r.toString().split(QU));var s=i.map(function(c){return{word:c,width:ag(c,a).width}}),o=n?0:ag("",a).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},u4e=function(t,r,n,a,i){var s=t.maxLines,o=t.children,c=t.style,u=t.breakAll,d=et(s),f=o,p=function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return X.reduce(function(se,Z){var K=Z.word,ie=Z.width,pe=se[se.length-1];if(pe&&(a==null||i||pe.width+ie+n<Number(a)))pe.words.push(K),pe.width+=ie+n;else{var me={words:[K],width:ie};se.push(me)}return se},[])},h=p(r),v=function(X){return X.reduce(function(se,Z){return se.width>Z.width?se:Z})};if(!d)return h;for(var m="",x=function(X){var se=f.slice(0,X),Z=ZU({breakAll:u,style:c,children:se+m}).wordsWithComputedWidth,K=p(Z),ie=K.length>s||v(K).width>Number(a);return[ie,K]},y=0,g=f.length-1,b=0,S;y<=g&&b<=f.length-1;){var _=Math.floor((y+g)/2),j=_-1,A=x(j),E=w8(A,2),T=E[0],L=E[1],k=x(_),R=w8(k,1),D=R[0];if(!T&&!D&&(y=_+1),T&&D&&(g=_-1),!T&&D){S=L;break}b++}return S||h},S8=function(t){var r=lr(t)?[]:t.toString().split(QU);return[{words:r}]},d4e=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,s=t.breakAll,o=t.maxLines;if((r||n)&&!kp.isSsr){var c,u,d=ZU({breakAll:s,children:a,style:i});if(d){var f=d.wordsWithComputedWidth,p=d.spaceWidth;c=f,u=p}else return S8(a);return u4e({breakAll:s,children:a,maxLines:o,style:i},c,u,r,n)}return S8(a)},N8="#808080",jf=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,s=t.lineHeight,o=s===void 0?"1em":s,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,p=t.textAnchor,h=p===void 0?"start":p,v=t.verticalAnchor,m=v===void 0?"end":v,x=t.fill,y=x===void 0?N8:x,g=b8(t,n4e),b=M.useMemo(function(){return d4e({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:f,style:g.style,width:g.width})},[g.breakAll,g.children,g.maxLines,f,g.style,g.width]),S=g.dx,_=g.dy,j=g.angle,A=g.className,E=g.breakAll,T=b8(g,a4e);if(!wa(n)||!wa(i))return null;var L=n+(et(S)?S:0),k=i+(et(_)?_:0),R;switch(m){case"start":R=lS("calc(".concat(u,")"));break;case"middle":R=lS("calc(".concat((b.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:R=lS("calc(".concat(b.length-1," * -").concat(o,")"));break}var D=[];if(f){var q=b[0].width,X=g.width;D.push("scale(".concat((et(X)?X/q:1)/q,")"))}return j&&D.push("rotate(".concat(j,", ").concat(L,", ").concat(k,")")),D.length&&(T.transform=D.join(" ")),we.createElement("text",Vj({},$t(T,!0),{x:L,y:k,className:sr("recharts-text",A),textAnchor:h,fill:y.includes("url")?N8:y}),b.map(function(se,Z){var K=se.words.join(E?"":" ");return we.createElement("tspan",{x:L,dy:Z===0?R:o,key:"".concat(K,"-").concat(Z)},K)}))};function Fu(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function f4e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function mE(e){let t,r,n;e.length!==2?(t=Fu,r=(o,c)=>Fu(e(o),c),n=(o,c)=>e(o)-c):(t=e===Fu||e===f4e?e:h4e,r=e,n=e);function a(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function s(o,c,u=0,d=o.length){const f=a(o,c,u,d-1);return f>u&&n(o[f-1],c)>-n(o[f],c)?f-1:f}return{left:a,center:s,right:i}}function h4e(){return 0}function ez(e){return e===null?NaN:+e}function*p4e(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const m4e=mE(Fu),t1=m4e.right;mE(ez).center;class j8 extends Map{constructor(t,r=x4e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(A8(this,t))}has(t){return super.has(A8(this,t))}set(t,r){return super.set(g4e(this,t),r)}delete(t){return super.delete(v4e(this,t))}}function A8({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function g4e({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function v4e({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function x4e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function y4e(e=Fu){if(e===Fu)return tz;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function tz(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const b4e=Math.sqrt(50),w4e=Math.sqrt(10),_4e=Math.sqrt(2);function Ib(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),s=i>=b4e?10:i>=w4e?5:i>=_4e?2:1;let o,c,u;return a<0?(u=Math.pow(10,-a)/s,o=Math.round(e*u),c=Math.round(t*u),o/u<e&&++o,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*s,o=Math.round(e/u),c=Math.round(t/u),o*u<e&&++o,c*u>t&&--c),c<o&&.5<=r&&r<2?Ib(e,t,r*2):[o,c,u]}function Gj(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,s]=n?Ib(t,e,r):Ib(e,t,r);if(!(i>=a))return[];const o=i-a+1,c=new Array(o);if(n)if(s<0)for(let u=0;u<o;++u)c[u]=(i-u)/-s;else for(let u=0;u<o;++u)c[u]=(i-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(a+u)/-s;else for(let u=0;u<o;++u)c[u]=(a+u)*s;return c}function Kj(e,t,r){return t=+t,e=+e,r=+r,Ib(e,t,r)[2]}function Xj(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?Kj(t,e,r):Kj(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function E8(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function T8(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function rz(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?tz:y4e(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),h=Math.max(r,Math.floor(t-u*f/c+p)),v=Math.min(n,Math.floor(t+(c-u)*f/c+p));rz(e,t,h,v,a)}const i=e[t];let s=r,o=n;for(bm(e,r,t),a(e[n],i)>0&&bm(e,r,n);s<o;){for(bm(e,s,o),++s,--o;a(e[s],i)<0;)++s;for(;a(e[o],i)>0;)--o}a(e[r],i)===0?bm(e,r,o):(++o,bm(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function bm(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function S4e(e,t,r){if(e=Float64Array.from(p4e(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return T8(e);if(t>=1)return E8(e);var n,a=(n-1)*t,i=Math.floor(a),s=E8(rz(e,i).subarray(0,i+1)),o=T8(e.subarray(i+1));return s+(o-s)*(a-i)}}function N4e(e,t,r=ez){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),s=+r(e[i],i,e),o=+r(e[i+1],i+1,e);return s+(o-s)*(a-i)}}function j4e(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function so(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ic(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Yj=Symbol("implicit");function gE(){var e=new j8,t=[],r=[],n=Yj;function a(i){let s=e.get(i);if(s===void 0){if(n!==Yj)return n;e.set(i,s=t.push(i)-1)}return r[s%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new j8;for(const s of i)e.has(s)||e.set(s,t.push(s)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return gE(t,r).unknown(n)},so.apply(a,arguments),a}function Yg(){var e=gE().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,s,o=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var p=t().length,h=a<n,v=h?a:n,m=h?n:a;i=(m-v)/Math.max(1,p-c+u*2),o&&(i=Math.floor(i)),v+=(m-v-i*(p-c))*d,s=i*(1-c),o&&(v=Math.round(v),s=Math.round(s));var x=j4e(p).map(function(y){return v+i*y});return r(h?x.reverse():x)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([n,a]=p,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(p){return[n,a]=p,n=+n,a=+a,o=!0,f()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(p){return arguments.length?(o=!!p,f()):o},e.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),f()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),f()):c},e.paddingOuter=function(p){return arguments.length?(u=+p,f()):u},e.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},e.copy=function(){return Yg(t(),[n,a]).round(o).paddingInner(c).paddingOuter(u).align(d)},so.apply(f(),arguments)}function nz(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return nz(t())},e}function ig(){return nz(Yg.apply(null,arguments).paddingInner(1))}function vE(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function az(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function r1(){}var Jg=.7,Db=1/Jg,o0="\\s*([+-]?\\d+)\\s*",Qg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",hl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",A4e=/^#([0-9a-f]{3,8})$/,E4e=new RegExp(`^rgb\\(${o0},${o0},${o0}\\)$`),T4e=new RegExp(`^rgb\\(${hl},${hl},${hl}\\)$`),C4e=new RegExp(`^rgba\\(${o0},${o0},${o0},${Qg}\\)$`),k4e=new RegExp(`^rgba\\(${hl},${hl},${hl},${Qg}\\)$`),O4e=new RegExp(`^hsl\\(${Qg},${hl},${hl}\\)$`),P4e=new RegExp(`^hsla\\(${Qg},${hl},${hl},${Qg}\\)$`),C8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vE(r1,Zg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:k8,formatHex:k8,formatHex8:L4e,formatHsl:R4e,formatRgb:O8,toString:O8});function k8(){return this.rgb().formatHex()}function L4e(){return this.rgb().formatHex8()}function R4e(){return iz(this).formatHsl()}function O8(){return this.rgb().formatRgb()}function Zg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=A4e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?P8(t):r===3?new Ki(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Fx(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Fx(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=E4e.exec(e))?new Ki(t[1],t[2],t[3],1):(t=T4e.exec(e))?new Ki(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=C4e.exec(e))?Fx(t[1],t[2],t[3],t[4]):(t=k4e.exec(e))?Fx(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=O4e.exec(e))?I8(t[1],t[2]/100,t[3]/100,1):(t=P4e.exec(e))?I8(t[1],t[2]/100,t[3]/100,t[4]):C8.hasOwnProperty(e)?P8(C8[e]):e==="transparent"?new Ki(NaN,NaN,NaN,0):null}function P8(e){return new Ki(e>>16&255,e>>8&255,e&255,1)}function Fx(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ki(e,t,r,n)}function I4e(e){return e instanceof r1||(e=Zg(e)),e?(e=e.rgb(),new Ki(e.r,e.g,e.b,e.opacity)):new Ki}function Jj(e,t,r,n){return arguments.length===1?I4e(e):new Ki(e,t,r,n??1)}function Ki(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}vE(Ki,Jj,az(r1,{brighter(e){return e=e==null?Db:Math.pow(Db,e),new Ki(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Jg:Math.pow(Jg,e),new Ki(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ki(cf(this.r),cf(this.g),cf(this.b),Mb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:L8,formatHex:L8,formatHex8:D4e,formatRgb:R8,toString:R8}));function L8(){return`#${Wd(this.r)}${Wd(this.g)}${Wd(this.b)}`}function D4e(){return`#${Wd(this.r)}${Wd(this.g)}${Wd(this.b)}${Wd((isNaN(this.opacity)?1:this.opacity)*255)}`}function R8(){const e=Mb(this.opacity);return`${e===1?"rgb(":"rgba("}${cf(this.r)}, ${cf(this.g)}, ${cf(this.b)}${e===1?")":`, ${e})`}`}function Mb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function cf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Wd(e){return e=cf(e),(e<16?"0":"")+e.toString(16)}function I8(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Lo(e,t,r,n)}function iz(e){if(e instanceof Lo)return new Lo(e.h,e.s,e.l,e.opacity);if(e instanceof r1||(e=Zg(e)),!e)return new Lo;if(e instanceof Lo)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),s=NaN,o=i-a,c=(i+a)/2;return o?(t===i?s=(r-n)/o+(r<n)*6:r===i?s=(n-t)/o+2:s=(t-r)/o+4,o/=c<.5?i+a:2-i-a,s*=60):o=c>0&&c<1?0:s,new Lo(s,o,c,e.opacity)}function M4e(e,t,r,n){return arguments.length===1?iz(e):new Lo(e,t,r,n??1)}function Lo(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}vE(Lo,M4e,az(r1,{brighter(e){return e=e==null?Db:Math.pow(Db,e),new Lo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jg:Math.pow(Jg,e),new Lo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Ki(cS(e>=240?e-240:e+120,a,n),cS(e,a,n),cS(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Lo(D8(this.h),$x(this.s),$x(this.l),Mb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Mb(this.opacity);return`${e===1?"hsl(":"hsla("}${D8(this.h)}, ${$x(this.s)*100}%, ${$x(this.l)*100}%${e===1?")":`, ${e})`}`}}));function D8(e){return e=(e||0)%360,e<0?e+360:e}function $x(e){return Math.max(0,Math.min(1,e||0))}function cS(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const xE=e=>()=>e;function F4e(e,t){return function(r){return e+r*t}}function $4e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function B4e(e){return(e=+e)==1?sz:function(t,r){return r-t?$4e(t,r,e):xE(isNaN(t)?r:t)}}function sz(e,t){var r=t-e;return r?F4e(e,r):xE(isNaN(e)?t:e)}const M8=function e(t){var r=B4e(t);function n(a,i){var s=r((a=Jj(a)).r,(i=Jj(i)).r),o=r(a.g,i.g),c=r(a.b,i.b),u=sz(a.opacity,i.opacity);return function(d){return a.r=s(d),a.g=o(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function U4e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function z4e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function q4e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),s;for(s=0;s<n;++s)a[s]=Op(e[s],t[s]);for(;s<r;++s)i[s]=t[s];return function(o){for(s=0;s<n;++s)i[s]=a[s](o);return i}}function H4e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Fb(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function W4e(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Op(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var Qj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uS=new RegExp(Qj.source,"g");function V4e(e){return function(){return e}}function G4e(e){return function(t){return e(t)+""}}function K4e(e,t){var r=Qj.lastIndex=uS.lastIndex=0,n,a,i,s=-1,o=[],c=[];for(e=e+"",t=t+"";(n=Qj.exec(e))&&(a=uS.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),o[s]?o[s]+=i:o[++s]=i),(n=n[0])===(a=a[0])?o[s]?o[s]+=a:o[++s]=a:(o[++s]=null,c.push({i:s,x:Fb(n,a)})),r=uS.lastIndex;return r<t.length&&(i=t.slice(r),o[s]?o[s]+=i:o[++s]=i),o.length<2?c[0]?G4e(c[0].x):V4e(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function Op(e,t){var r=typeof t,n;return t==null||r==="boolean"?xE(t):(r==="number"?Fb:r==="string"?(n=Zg(t))?(t=n,M8):K4e:t instanceof Zg?M8:t instanceof Date?H4e:z4e(t)?U4e:Array.isArray(t)?q4e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?W4e:Fb)(e,t)}function yE(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function X4e(e,t){t===void 0&&(t=e,e=Op);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return i[o](s-o)}}function Y4e(e){return function(){return e}}function $b(e){return+e}var F8=[0,1];function Pi(e){return e}function Zj(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Y4e(isNaN(t)?NaN:.5)}function J4e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Q4e(e,t,r){var n=e[0],a=e[1],i=t[0],s=t[1];return a<n?(n=Zj(a,n),i=r(s,i)):(n=Zj(n,a),i=r(i,s)),function(o){return i(n(o))}}function Z4e(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)a[s]=Zj(e[s],e[s+1]),i[s]=r(t[s],t[s+1]);return function(o){var c=t1(e,o,1,n)-1;return i[c](a[c](o))}}function n1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function kw(){var e=F8,t=F8,r=Op,n,a,i,s=Pi,o,c,u;function d(){var p=Math.min(e.length,t.length);return s!==Pi&&(s=J4e(e[0],e[p-1])),o=p>2?Z4e:Q4e,c=u=null,f}function f(p){return p==null||isNaN(p=+p)?i:(c||(c=o(e.map(n),t,r)))(n(s(p)))}return f.invert=function(p){return s(a((u||(u=o(t,e.map(n),Fb)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,$b),d()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),r=yE,d()},f.clamp=function(p){return arguments.length?(s=p?!0:Pi,d()):s!==Pi},f.interpolate=function(p){return arguments.length?(r=p,d()):r},f.unknown=function(p){return arguments.length?(i=p,f):i},function(p,h){return n=p,a=h,d()}}function bE(){return kw()(Pi,Pi)}function eAe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Bb(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function z0(e){return e=Bb(Math.abs(e)),e?e[1]:NaN}function tAe(e,t){return function(r,n){for(var a=r.length,i=[],s=0,o=e[0],c=0;a>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),i.push(r.substring(a-=o,a+o)),!((c+=o+1)>n));)o=e[s=(s+1)%e.length];return i.reverse().join(t)}}function rAe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var nAe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ev(e){if(!(t=nAe.exec(e)))throw new Error("invalid format: "+e);var t;return new wE({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ev.prototype=wE.prototype;function wE(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}wE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function aAe(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var oz;function iAe(e,t){var r=Bb(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(oz=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=n.length;return i===s?n:i>s?n+new Array(i-s+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Bb(e,Math.max(0,t+i-1))[0]}function $8(e,t){var r=Bb(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const B8={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:eAe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>$8(e*100,t),r:$8,s:iAe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function U8(e){return e}var z8=Array.prototype.map,q8=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function sAe(e){var t=e.grouping===void 0||e.thousands===void 0?U8:tAe(z8.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?U8:rAe(z8.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=ev(f);var p=f.fill,h=f.align,v=f.sign,m=f.symbol,x=f.zero,y=f.width,g=f.comma,b=f.precision,S=f.trim,_=f.type;_==="n"?(g=!0,_="g"):B8[_]||(b===void 0&&(b=12),S=!0,_="g"),(x||p==="0"&&h==="=")&&(x=!0,p="0",h="=");var j=m==="$"?r:m==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",A=m==="$"?n:/[%p]/.test(_)?s:"",E=B8[_],T=/[defgprs%]/.test(_);b=b===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function L(k){var R=j,D=A,q,X,se;if(_==="c")D=E(k)+D,k="";else{k=+k;var Z=k<0||1/k<0;if(k=isNaN(k)?c:E(Math.abs(k),b),S&&(k=aAe(k)),Z&&+k==0&&v!=="+"&&(Z=!1),R=(Z?v==="("?v:o:v==="-"||v==="("?"":v)+R,D=(_==="s"?q8[8+oz/3]:"")+D+(Z&&v==="("?")":""),T){for(q=-1,X=k.length;++q<X;)if(se=k.charCodeAt(q),48>se||se>57){D=(se===46?a+k.slice(q+1):k.slice(q))+D,k=k.slice(0,q);break}}}g&&!x&&(k=t(k,1/0));var K=R.length+k.length+D.length,ie=K<y?new Array(y-K+1).join(p):"";switch(g&&x&&(k=t(ie+k,ie.length?y-D.length:1/0),ie=""),h){case"<":k=R+k+D+ie;break;case"=":k=R+ie+k+D;break;case"^":k=ie.slice(0,K=ie.length>>1)+R+k+D+ie.slice(K);break;default:k=ie+R+k+D;break}return i(k)}return L.toString=function(){return f+""},L}function d(f,p){var h=u((f=ev(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(z0(p)/3)))*3,m=Math.pow(10,-v),x=q8[8+v/3];return function(y){return h(m*y)+x}}return{format:u,formatPrefix:d}}var Bx,_E,lz;oAe({thousands:",",grouping:[3],currency:["$",""]});function oAe(e){return Bx=sAe(e),_E=Bx.format,lz=Bx.formatPrefix,Bx}function lAe(e){return Math.max(0,-z0(Math.abs(e)))}function cAe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(z0(t)/3)))*3-z0(Math.abs(e)))}function uAe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,z0(t)-z0(e))+1}function cz(e,t,r,n){var a=Xj(e,t,r),i;switch(n=ev(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=cAe(a,s))&&(n.precision=i),lz(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=uAe(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=lAe(a))&&(n.precision=i-(n.type==="%")*2);break}}return _E(n)}function td(e){var t=e.domain;return e.ticks=function(r){var n=t();return Gj(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return cz(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,s=n[a],o=n[i],c,u,d=10;for(o<s&&(u=s,s=o,o=u,u=a,a=i,i=u);d-- >0;){if(u=Kj(s,o,r),u===c)return n[a]=s,n[i]=o,t(n);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return e},e}function Ub(){var e=bE();return e.copy=function(){return n1(e,Ub())},so.apply(e,arguments),td(e)}function uz(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,$b),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return uz(e).unknown(t)},e=arguments.length?Array.from(e,$b):[0,1],td(r)}function dz(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],s;return i<a&&(s=r,r=n,n=s,s=a,a=i,i=s),e[r]=t.floor(a),e[n]=t.ceil(i),e}function H8(e){return Math.log(e)}function W8(e){return Math.exp(e)}function dAe(e){return-Math.log(-e)}function fAe(e){return-Math.exp(-e)}function hAe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function pAe(e){return e===10?hAe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function mAe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function V8(e){return(t,r)=>-e(-t,r)}function SE(e){const t=e(H8,W8),r=t.domain;let n=10,a,i;function s(){return a=mAe(n),i=pAe(n),r()[0]<0?(a=V8(a),i=V8(i),e(dAe,fAe)):e(H8,W8),t}return t.base=function(o){return arguments.length?(n=+o,s()):n},t.domain=function(o){return arguments.length?(r(o),s()):r()},t.ticks=o=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let p=a(u),h=a(d),v,m;const x=o==null?10:+o;let y=[];if(!(n%1)&&h-p<x){if(p=Math.floor(p),h=Math.ceil(h),u>0){for(;p<=h;++p)for(v=1;v<n;++v)if(m=p<0?v/i(-p):v*i(p),!(m<u)){if(m>d)break;y.push(m)}}else for(;p<=h;++p)for(v=n-1;v>=1;--v)if(m=p>0?v/i(-p):v*i(p),!(m<u)){if(m>d)break;y.push(m)}y.length*2<x&&(y=Gj(u,d,x))}else y=Gj(p,h,Math.min(h-p,x)).map(i);return f?y.reverse():y},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=ev(c)).precision==null&&(c.trim=!0),c=_E(c)),o===1/0)return c;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(dz(r(),{floor:o=>i(Math.floor(a(o))),ceil:o=>i(Math.ceil(a(o)))})),t}function fz(){const e=SE(kw()).domain([1,10]);return e.copy=()=>n1(e,fz()).base(e.base()),so.apply(e,arguments),e}function G8(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function K8(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function NE(e){var t=1,r=e(G8(t),K8(t));return r.constant=function(n){return arguments.length?e(G8(t=+n),K8(t)):t},td(r)}function hz(){var e=NE(kw());return e.copy=function(){return n1(e,hz()).constant(e.constant())},so.apply(e,arguments)}function X8(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function gAe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function vAe(e){return e<0?-e*e:e*e}function jE(e){var t=e(Pi,Pi),r=1;function n(){return r===1?e(Pi,Pi):r===.5?e(gAe,vAe):e(X8(r),X8(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},td(t)}function AE(){var e=jE(kw());return e.copy=function(){return n1(e,AE()).exponent(e.exponent())},so.apply(e,arguments),e}function xAe(){return AE.apply(null,arguments).exponent(.5)}function Y8(e){return Math.sign(e)*e*e}function yAe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function pz(){var e=bE(),t=[0,1],r=!1,n;function a(i){var s=yAe(e(i));return isNaN(s)?n:r?Math.round(s):s}return a.invert=function(i){return e.invert(Y8(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,$b)).map(Y8)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return pz(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},so.apply(a,arguments),td(a)}function mz(){var e=[],t=[],r=[],n;function a(){var s=0,o=Math.max(1,t.length);for(r=new Array(o-1);++s<o;)r[s-1]=N4e(e,s/o);return i}function i(s){return s==null||isNaN(s=+s)?n:t[t1(r,s)]}return i.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},i.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Fu),a()},i.range=function(s){return arguments.length?(t=Array.from(s),a()):t.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return mz().domain(e).range(t).unknown(n)},so.apply(i,arguments)}function gz(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function s(c){return c!=null&&c<=c?a[t1(n,c,0,r)]:i}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},s.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,o()):a.slice()},s.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},s.unknown=function(c){return arguments.length&&(i=c),s},s.thresholds=function(){return n.slice()},s.copy=function(){return gz().domain([e,t]).range(a).unknown(i)},so.apply(td(s),arguments)}function vz(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[t1(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var s=t.indexOf(i);return[e[s-1],e[s]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return vz().domain(e).range(t).unknown(r)},so.apply(a,arguments)}const dS=new Date,fS=new Date;function Sa(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const s=a(i),o=a.ceil(i);return i-s<o-i?s:o},a.offset=(i,s)=>(t(i=new Date(+i),s==null?1:Math.floor(s)),i),a.range=(i,s,o)=>{const c=[];if(i=a.ceil(i),o=o==null?1:Math.floor(o),!(i<s)||!(o>0))return c;let u;do c.push(u=new Date(+i)),t(i,o),e(i);while(u<i&&i<s);return c},a.filter=i=>Sa(s=>{if(s>=s)for(;e(s),!i(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!i(s););else for(;--o>=0;)for(;t(s,1),!i(s););}),r&&(a.count=(i,s)=>(dS.setTime(+i),fS.setTime(+s),e(dS),e(fS),Math.floor(r(dS,fS))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?s=>n(s)%i===0:s=>a.count(0,s)%i===0):a)),a}const zb=Sa(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);zb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Sa(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):zb);zb.range;const ec=1e3,Js=ec*60,tc=Js*60,bc=tc*24,EE=bc*7,J8=bc*30,hS=bc*365,Vd=Sa(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ec)},(e,t)=>(t-e)/ec,e=>e.getUTCSeconds());Vd.range;const TE=Sa(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ec)},(e,t)=>{e.setTime(+e+t*Js)},(e,t)=>(t-e)/Js,e=>e.getMinutes());TE.range;const CE=Sa(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Js)},(e,t)=>(t-e)/Js,e=>e.getUTCMinutes());CE.range;const kE=Sa(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ec-e.getMinutes()*Js)},(e,t)=>{e.setTime(+e+t*tc)},(e,t)=>(t-e)/tc,e=>e.getHours());kE.range;const OE=Sa(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*tc)},(e,t)=>(t-e)/tc,e=>e.getUTCHours());OE.range;const a1=Sa(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Js)/bc,e=>e.getDate()-1);a1.range;const Ow=Sa(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bc,e=>e.getUTCDate()-1);Ow.range;const xz=Sa(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bc,e=>Math.floor(e/bc));xz.range;function qf(e){return Sa(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Js)/EE)}const Pw=qf(0),qb=qf(1),bAe=qf(2),wAe=qf(3),q0=qf(4),_Ae=qf(5),SAe=qf(6);Pw.range;qb.range;bAe.range;wAe.range;q0.range;_Ae.range;SAe.range;function Hf(e){return Sa(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/EE)}const Lw=Hf(0),Hb=Hf(1),NAe=Hf(2),jAe=Hf(3),H0=Hf(4),AAe=Hf(5),EAe=Hf(6);Lw.range;Hb.range;NAe.range;jAe.range;H0.range;AAe.range;EAe.range;const PE=Sa(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());PE.range;const LE=Sa(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());LE.range;const wc=Sa(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());wc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Sa(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});wc.range;const _c=Sa(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());_c.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Sa(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});_c.range;function yz(e,t,r,n,a,i){const s=[[Vd,1,ec],[Vd,5,5*ec],[Vd,15,15*ec],[Vd,30,30*ec],[i,1,Js],[i,5,5*Js],[i,15,15*Js],[i,30,30*Js],[a,1,tc],[a,3,3*tc],[a,6,6*tc],[a,12,12*tc],[n,1,bc],[n,2,2*bc],[r,1,EE],[t,1,J8],[t,3,3*J8],[e,1,hS]];function o(u,d,f){const p=d<u;p&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:c(u,d,f),v=h?h.range(u,+d+1):[];return p?v.reverse():v}function c(u,d,f){const p=Math.abs(d-u)/f,h=mE(([,,x])=>x).right(s,p);if(h===s.length)return e.every(Xj(u/hS,d/hS,f));if(h===0)return zb.every(Math.max(Xj(u,d,f),1));const[v,m]=s[p/s[h-1][2]<s[h][2]/p?h-1:h];return v.every(m)}return[o,c]}const[TAe,CAe]=yz(_c,LE,Lw,xz,OE,CE),[kAe,OAe]=yz(wc,PE,Pw,a1,kE,TE);function pS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function mS(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function wm(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function PAe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,s=e.shortDays,o=e.months,c=e.shortMonths,u=_m(a),d=Sm(a),f=_m(i),p=Sm(i),h=_m(s),v=Sm(s),m=_m(o),x=Sm(o),y=_m(c),g=Sm(c),b={a:Z,A:K,b:ie,B:pe,c:null,d:nL,e:nL,f:t3e,g:d3e,G:h3e,H:QAe,I:ZAe,j:e3e,L:bz,m:r3e,M:n3e,p:me,q:O,Q:sL,s:oL,S:a3e,u:i3e,U:s3e,V:o3e,w:l3e,W:c3e,x:null,X:null,y:u3e,Y:f3e,Z:p3e,"%":iL},S={a:F,A:B,b:U,B:Y,c:null,d:aL,e:aL,f:x3e,g:T3e,G:k3e,H:m3e,I:g3e,j:v3e,L:_z,m:y3e,M:b3e,p:oe,q:ee,Q:sL,s:oL,S:w3e,u:_3e,U:S3e,V:N3e,w:j3e,W:A3e,x:null,X:null,y:E3e,Y:C3e,Z:O3e,"%":iL},_={a:L,A:k,b:R,B:D,c:q,d:tL,e:tL,f:KAe,g:eL,G:Z8,H:rL,I:rL,j:HAe,L:GAe,m:qAe,M:WAe,p:T,q:zAe,Q:YAe,s:JAe,S:VAe,u:MAe,U:FAe,V:$Ae,w:DAe,W:BAe,x:X,X:se,y:eL,Y:Z8,Z:UAe,"%":XAe};b.x=j(r,b),b.X=j(n,b),b.c=j(t,b),S.x=j(r,S),S.X=j(n,S),S.c=j(t,S);function j(te,le){return function(Ne){var ve=[],Me=-1,Ie=0,Q=te.length,$e,Re,it;for(Ne instanceof Date||(Ne=new Date(+Ne));++Me<Q;)te.charCodeAt(Me)===37&&(ve.push(te.slice(Ie,Me)),(Re=Q8[$e=te.charAt(++Me)])!=null?$e=te.charAt(++Me):Re=$e==="e"?" ":"0",(it=le[$e])&&($e=it(Ne,Re)),ve.push($e),Ie=Me+1);return ve.push(te.slice(Ie,Me)),ve.join("")}}function A(te,le){return function(Ne){var ve=wm(1900,void 0,1),Me=E(ve,te,Ne+="",0),Ie,Q;if(Me!=Ne.length)return null;if("Q"in ve)return new Date(ve.Q);if("s"in ve)return new Date(ve.s*1e3+("L"in ve?ve.L:0));if(le&&!("Z"in ve)&&(ve.Z=0),"p"in ve&&(ve.H=ve.H%12+ve.p*12),ve.m===void 0&&(ve.m="q"in ve?ve.q:0),"V"in ve){if(ve.V<1||ve.V>53)return null;"w"in ve||(ve.w=1),"Z"in ve?(Ie=mS(wm(ve.y,0,1)),Q=Ie.getUTCDay(),Ie=Q>4||Q===0?Hb.ceil(Ie):Hb(Ie),Ie=Ow.offset(Ie,(ve.V-1)*7),ve.y=Ie.getUTCFullYear(),ve.m=Ie.getUTCMonth(),ve.d=Ie.getUTCDate()+(ve.w+6)%7):(Ie=pS(wm(ve.y,0,1)),Q=Ie.getDay(),Ie=Q>4||Q===0?qb.ceil(Ie):qb(Ie),Ie=a1.offset(Ie,(ve.V-1)*7),ve.y=Ie.getFullYear(),ve.m=Ie.getMonth(),ve.d=Ie.getDate()+(ve.w+6)%7)}else("W"in ve||"U"in ve)&&("w"in ve||(ve.w="u"in ve?ve.u%7:"W"in ve?1:0),Q="Z"in ve?mS(wm(ve.y,0,1)).getUTCDay():pS(wm(ve.y,0,1)).getDay(),ve.m=0,ve.d="W"in ve?(ve.w+6)%7+ve.W*7-(Q+5)%7:ve.w+ve.U*7-(Q+6)%7);return"Z"in ve?(ve.H+=ve.Z/100|0,ve.M+=ve.Z%100,mS(ve)):pS(ve)}}function E(te,le,Ne,ve){for(var Me=0,Ie=le.length,Q=Ne.length,$e,Re;Me<Ie;){if(ve>=Q)return-1;if($e=le.charCodeAt(Me++),$e===37){if($e=le.charAt(Me++),Re=_[$e in Q8?le.charAt(Me++):$e],!Re||(ve=Re(te,Ne,ve))<0)return-1}else if($e!=Ne.charCodeAt(ve++))return-1}return ve}function T(te,le,Ne){var ve=u.exec(le.slice(Ne));return ve?(te.p=d.get(ve[0].toLowerCase()),Ne+ve[0].length):-1}function L(te,le,Ne){var ve=h.exec(le.slice(Ne));return ve?(te.w=v.get(ve[0].toLowerCase()),Ne+ve[0].length):-1}function k(te,le,Ne){var ve=f.exec(le.slice(Ne));return ve?(te.w=p.get(ve[0].toLowerCase()),Ne+ve[0].length):-1}function R(te,le,Ne){var ve=y.exec(le.slice(Ne));return ve?(te.m=g.get(ve[0].toLowerCase()),Ne+ve[0].length):-1}function D(te,le,Ne){var ve=m.exec(le.slice(Ne));return ve?(te.m=x.get(ve[0].toLowerCase()),Ne+ve[0].length):-1}function q(te,le,Ne){return E(te,t,le,Ne)}function X(te,le,Ne){return E(te,r,le,Ne)}function se(te,le,Ne){return E(te,n,le,Ne)}function Z(te){return s[te.getDay()]}function K(te){return i[te.getDay()]}function ie(te){return c[te.getMonth()]}function pe(te){return o[te.getMonth()]}function me(te){return a[+(te.getHours()>=12)]}function O(te){return 1+~~(te.getMonth()/3)}function F(te){return s[te.getUTCDay()]}function B(te){return i[te.getUTCDay()]}function U(te){return c[te.getUTCMonth()]}function Y(te){return o[te.getUTCMonth()]}function oe(te){return a[+(te.getUTCHours()>=12)]}function ee(te){return 1+~~(te.getUTCMonth()/3)}return{format:function(te){var le=j(te+="",b);return le.toString=function(){return te},le},parse:function(te){var le=A(te+="",!1);return le.toString=function(){return te},le},utcFormat:function(te){var le=j(te+="",S);return le.toString=function(){return te},le},utcParse:function(te){var le=A(te+="",!0);return le.toString=function(){return te},le}}}var Q8={"-":"",_:" ",0:"0"},Ma=/^\s*\d+/,LAe=/^%/,RAe=/[\\^$*+?|[\]().{}]/g;function Sr(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function IAe(e){return e.replace(RAe,"\\$&")}function _m(e){return new RegExp("^(?:"+e.map(IAe).join("|")+")","i")}function Sm(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function DAe(e,t,r){var n=Ma.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function MAe(e,t,r){var n=Ma.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function FAe(e,t,r){var n=Ma.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function $Ae(e,t,r){var n=Ma.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function BAe(e,t,r){var n=Ma.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function Z8(e,t,r){var n=Ma.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function eL(e,t,r){var n=Ma.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function UAe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function zAe(e,t,r){var n=Ma.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function qAe(e,t,r){var n=Ma.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function tL(e,t,r){var n=Ma.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function HAe(e,t,r){var n=Ma.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function rL(e,t,r){var n=Ma.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function WAe(e,t,r){var n=Ma.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function VAe(e,t,r){var n=Ma.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function GAe(e,t,r){var n=Ma.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function KAe(e,t,r){var n=Ma.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function XAe(e,t,r){var n=LAe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function YAe(e,t,r){var n=Ma.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function JAe(e,t,r){var n=Ma.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function nL(e,t){return Sr(e.getDate(),t,2)}function QAe(e,t){return Sr(e.getHours(),t,2)}function ZAe(e,t){return Sr(e.getHours()%12||12,t,2)}function e3e(e,t){return Sr(1+a1.count(wc(e),e),t,3)}function bz(e,t){return Sr(e.getMilliseconds(),t,3)}function t3e(e,t){return bz(e,t)+"000"}function r3e(e,t){return Sr(e.getMonth()+1,t,2)}function n3e(e,t){return Sr(e.getMinutes(),t,2)}function a3e(e,t){return Sr(e.getSeconds(),t,2)}function i3e(e){var t=e.getDay();return t===0?7:t}function s3e(e,t){return Sr(Pw.count(wc(e)-1,e),t,2)}function wz(e){var t=e.getDay();return t>=4||t===0?q0(e):q0.ceil(e)}function o3e(e,t){return e=wz(e),Sr(q0.count(wc(e),e)+(wc(e).getDay()===4),t,2)}function l3e(e){return e.getDay()}function c3e(e,t){return Sr(qb.count(wc(e)-1,e),t,2)}function u3e(e,t){return Sr(e.getFullYear()%100,t,2)}function d3e(e,t){return e=wz(e),Sr(e.getFullYear()%100,t,2)}function f3e(e,t){return Sr(e.getFullYear()%1e4,t,4)}function h3e(e,t){var r=e.getDay();return e=r>=4||r===0?q0(e):q0.ceil(e),Sr(e.getFullYear()%1e4,t,4)}function p3e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Sr(t/60|0,"0",2)+Sr(t%60,"0",2)}function aL(e,t){return Sr(e.getUTCDate(),t,2)}function m3e(e,t){return Sr(e.getUTCHours(),t,2)}function g3e(e,t){return Sr(e.getUTCHours()%12||12,t,2)}function v3e(e,t){return Sr(1+Ow.count(_c(e),e),t,3)}function _z(e,t){return Sr(e.getUTCMilliseconds(),t,3)}function x3e(e,t){return _z(e,t)+"000"}function y3e(e,t){return Sr(e.getUTCMonth()+1,t,2)}function b3e(e,t){return Sr(e.getUTCMinutes(),t,2)}function w3e(e,t){return Sr(e.getUTCSeconds(),t,2)}function _3e(e){var t=e.getUTCDay();return t===0?7:t}function S3e(e,t){return Sr(Lw.count(_c(e)-1,e),t,2)}function Sz(e){var t=e.getUTCDay();return t>=4||t===0?H0(e):H0.ceil(e)}function N3e(e,t){return e=Sz(e),Sr(H0.count(_c(e),e)+(_c(e).getUTCDay()===4),t,2)}function j3e(e){return e.getUTCDay()}function A3e(e,t){return Sr(Hb.count(_c(e)-1,e),t,2)}function E3e(e,t){return Sr(e.getUTCFullYear()%100,t,2)}function T3e(e,t){return e=Sz(e),Sr(e.getUTCFullYear()%100,t,2)}function C3e(e,t){return Sr(e.getUTCFullYear()%1e4,t,4)}function k3e(e,t){var r=e.getUTCDay();return e=r>=4||r===0?H0(e):H0.ceil(e),Sr(e.getUTCFullYear()%1e4,t,4)}function O3e(){return"+0000"}function iL(){return"%"}function sL(e){return+e}function oL(e){return Math.floor(+e/1e3)}var ph,Nz,jz;P3e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function P3e(e){return ph=PAe(e),Nz=ph.format,ph.parse,jz=ph.utcFormat,ph.utcParse,ph}function L3e(e){return new Date(e)}function R3e(e){return e instanceof Date?+e:+new Date(+e)}function RE(e,t,r,n,a,i,s,o,c,u){var d=bE(),f=d.invert,p=d.domain,h=u(".%L"),v=u(":%S"),m=u("%I:%M"),x=u("%I %p"),y=u("%a %d"),g=u("%b %d"),b=u("%B"),S=u("%Y");function _(j){return(c(j)<j?h:o(j)<j?v:s(j)<j?m:i(j)<j?x:n(j)<j?a(j)<j?y:g:r(j)<j?b:S)(j)}return d.invert=function(j){return new Date(f(j))},d.domain=function(j){return arguments.length?p(Array.from(j,R3e)):p().map(L3e)},d.ticks=function(j){var A=p();return e(A[0],A[A.length-1],j??10)},d.tickFormat=function(j,A){return A==null?_:u(A)},d.nice=function(j){var A=p();return(!j||typeof j.range!="function")&&(j=t(A[0],A[A.length-1],j??10)),j?p(dz(A,j)):d},d.copy=function(){return n1(d,RE(e,t,r,n,a,i,s,o,c,u))},d}function I3e(){return so.apply(RE(kAe,OAe,wc,PE,Pw,a1,kE,TE,Vd,Nz).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function D3e(){return so.apply(RE(TAe,CAe,_c,LE,Lw,Ow,OE,CE,Vd,jz).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Rw(){var e=0,t=1,r,n,a,i,s=Pi,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:s(a===0?.5:(f=(i(f)-r)*a,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(p){var h,v;return arguments.length?([h,v]=p,s=f(h,v),u):[s(0),s(1)]}}return u.range=d(Op),u.rangeRound=d(yE),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function rd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Az(){var e=td(Rw()(Pi));return e.copy=function(){return rd(e,Az())},Ic.apply(e,arguments)}function Ez(){var e=SE(Rw()).domain([1,10]);return e.copy=function(){return rd(e,Ez()).base(e.base())},Ic.apply(e,arguments)}function Tz(){var e=NE(Rw());return e.copy=function(){return rd(e,Tz()).constant(e.constant())},Ic.apply(e,arguments)}function IE(){var e=jE(Rw());return e.copy=function(){return rd(e,IE()).exponent(e.exponent())},Ic.apply(e,arguments)}function M3e(){return IE.apply(null,arguments).exponent(.5)}function Cz(){var e=[],t=Pi;function r(n){if(n!=null&&!isNaN(n=+n))return t((t1(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Fu),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>S4e(e,i/n))},r.copy=function(){return Cz(t).domain(e)},Ic.apply(r,arguments)}function Iw(){var e=0,t=.5,r=1,n=1,a,i,s,o,c,u=Pi,d,f=!1,p;function h(m){return isNaN(m=+m)?p:(m=.5+((m=+d(m))-i)*(n*m<n*i?o:c),u(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,r]=m,a=d(e=+e),i=d(t=+t),s=d(r=+r),o=a===i?0:.5/(i-a),c=i===s?0:.5/(s-i),n=i<a?-1:1,h):[e,t,r]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(u=m,h):u};function v(m){return function(x){var y,g,b;return arguments.length?([y,g,b]=x,u=X4e(m,[y,g,b]),h):[u(0),u(.5),u(1)]}}return h.range=v(Op),h.rangeRound=v(yE),h.unknown=function(m){return arguments.length?(p=m,h):p},function(m){return d=m,a=m(e),i=m(t),s=m(r),o=a===i?0:.5/(i-a),c=i===s?0:.5/(s-i),n=i<a?-1:1,h}}function kz(){var e=td(Iw()(Pi));return e.copy=function(){return rd(e,kz())},Ic.apply(e,arguments)}function Oz(){var e=SE(Iw()).domain([.1,1,10]);return e.copy=function(){return rd(e,Oz()).base(e.base())},Ic.apply(e,arguments)}function Pz(){var e=NE(Iw());return e.copy=function(){return rd(e,Pz()).constant(e.constant())},Ic.apply(e,arguments)}function DE(){var e=jE(Iw());return e.copy=function(){return rd(e,DE()).exponent(e.exponent())},Ic.apply(e,arguments)}function F3e(){return DE.apply(null,arguments).exponent(.5)}const lL=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Yg,scaleDiverging:kz,scaleDivergingLog:Oz,scaleDivergingPow:DE,scaleDivergingSqrt:F3e,scaleDivergingSymlog:Pz,scaleIdentity:uz,scaleImplicit:Yj,scaleLinear:Ub,scaleLog:fz,scaleOrdinal:gE,scalePoint:ig,scalePow:AE,scaleQuantile:mz,scaleQuantize:gz,scaleRadial:pz,scaleSequential:Az,scaleSequentialLog:Ez,scaleSequentialPow:IE,scaleSequentialQuantile:Cz,scaleSequentialSqrt:M3e,scaleSequentialSymlog:Tz,scaleSqrt:xAe,scaleSymlog:hz,scaleThreshold:vz,scaleTime:I3e,scaleUtc:D3e,tickFormat:cz},Symbol.toStringTag,{value:"Module"}));var $3e=_p;function B3e(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],s=t(i);if(s!=null&&(o===void 0?s===s&&!$3e(s):r(s,o)))var o=s,c=i}return c}var Dw=B3e;function U3e(e,t){return e>t}var Lz=U3e,z3e=Dw,q3e=Lz,H3e=Cp;function W3e(e){return e&&e.length?z3e(e,H3e,q3e):void 0}var V3e=W3e;const Mw=kr(V3e);function G3e(e,t){return e<t}var Rz=G3e,K3e=Dw,X3e=Rz,Y3e=Cp;function J3e(e){return e&&e.length?K3e(e,Y3e,X3e):void 0}var Q3e=J3e;const Fw=kr(Q3e);var Z3e=Y3,eEe=_l,tEe=zU,rEe=is;function nEe(e,t){var r=rEe(e)?Z3e:tEe;return r(e,eEe(t))}var aEe=nEe,iEe=BU,sEe=aEe;function oEe(e,t){return iEe(sEe(e,t),1)}var lEe=oEe;const cEe=kr(lEe);var uEe=dE;function dEe(e,t){return uEe(e,t)}var fEe=dEe;const $w=kr(fEe);var Pp=1e9,hEe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},FE,wn=!0,no="[DecimalError] ",uf=no+"Invalid argument: ",ME=no+"Exponent out of range: ",Lp=Math.floor,Pd=Math.pow,pEe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ns,Aa=1e7,dn=7,Iz=9007199254740991,Wb=Lp(Iz/dn),mt={};mt.absoluteValue=mt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};mt.comparedTo=mt.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};mt.decimalPlaces=mt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*dn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};mt.dividedBy=mt.div=function(e){return uc(this,new this.constructor(e))};mt.dividedToIntegerBy=mt.idiv=function(e){var t=this,r=t.constructor;return Yr(uc(t,new r(e),0,1),r.precision)};mt.equals=mt.eq=function(e){return!this.cmp(e)};mt.exponent=function(){return oa(this)};mt.greaterThan=mt.gt=function(e){return this.cmp(e)>0};mt.greaterThanOrEqualTo=mt.gte=function(e){return this.cmp(e)>=0};mt.isInteger=mt.isint=function(){return this.e>this.d.length-2};mt.isNegative=mt.isneg=function(){return this.s<0};mt.isPositive=mt.ispos=function(){return this.s>0};mt.isZero=function(){return this.s===0};mt.lessThan=mt.lt=function(e){return this.cmp(e)<0};mt.lessThanOrEqualTo=mt.lte=function(e){return this.cmp(e)<1};mt.logarithm=mt.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Ns))throw Error(no+"NaN");if(r.s<1)throw Error(no+(r.s?"NaN":"-Infinity"));return r.eq(Ns)?new n(0):(wn=!1,t=uc(tv(r,i),tv(e,i),i),wn=!0,Yr(t,a))};mt.minus=mt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Fz(t,e):Dz(t,(e.s=-e.s,e))};mt.modulo=mt.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(no+"NaN");return r.s?(wn=!1,t=uc(r,e,0,1).times(e),wn=!0,r.minus(t)):Yr(new n(r),a)};mt.naturalExponential=mt.exp=function(){return Mz(this)};mt.naturalLogarithm=mt.ln=function(){return tv(this)};mt.negated=mt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};mt.plus=mt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Dz(t,e):Fz(t,(e.s=-e.s,e))};mt.precision=mt.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(uf+e);if(t=oa(a)+1,n=a.d.length-1,r=n*dn+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};mt.squareRoot=mt.sqrt=function(){var e,t,r,n,a,i,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(no+"NaN")}for(e=oa(o),wn=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=ul(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Lp((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=s=r+3;;)if(i=n,n=i.plus(uc(o,i,s+2)).times(.5),ul(i.d).slice(0,s)===(t=ul(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),a==s&&t=="4999"){if(Yr(i,r+1,0),i.times(i).eq(o)){n=i;break}}else if(t!="9999")break;s+=4}return wn=!0,Yr(n,r)};mt.times=mt.mul=function(e){var t,r,n,a,i,s,o,c,u,d=this,f=d.constructor,p=d.d,h=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=p.length,u=h.length,c<u&&(i=p,p=h,h=i,s=c,c=u,u=s),i=[],s=c+u,n=s;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)o=i[a]+h[n]*p[a-n-1]+t,i[a--]=o%Aa|0,t=o/Aa|0;i[a]=(i[a]+t)%Aa|0}for(;!i[--s];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,wn?Yr(e,f.precision):e};mt.toDecimalPlaces=mt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(xl(e,0,Pp),t===void 0?t=n.rounding:xl(t,0,8),Yr(r,e+oa(r)+1,t))};mt.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Af(n,!0):(xl(e,0,Pp),t===void 0?t=a.rounding:xl(t,0,8),n=Yr(new a(n),e+1,t),r=Af(n,!0,e+1)),r};mt.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?Af(a):(xl(e,0,Pp),t===void 0?t=i.rounding:xl(t,0,8),n=Yr(new i(a),e+oa(a)+1,t),r=Af(n.abs(),!1,e+oa(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};mt.toInteger=mt.toint=function(){var e=this,t=e.constructor;return Yr(new t(e),oa(e)+1,t.rounding)};mt.toNumber=function(){return+this};mt.toPower=mt.pow=function(e){var t,r,n,a,i,s,o=this,c=o.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Ns);if(o=new c(o),!o.s){if(e.s<1)throw Error(no+"Infinity");return o}if(o.eq(Ns))return o;if(n=c.precision,e.eq(Ns))return Yr(o,n);if(t=e.e,r=e.d.length-1,s=t>=r,i=o.s,s){if((r=d<0?-d:d)<=Iz){for(a=new c(Ns),t=Math.ceil(n/dn+4),wn=!1;r%2&&(a=a.times(o),uL(a.d,t)),r=Lp(r/2),r!==0;)o=o.times(o),uL(o.d,t);return wn=!0,e.s<0?new c(Ns).div(a):Yr(a,n)}}else if(i<0)throw Error(no+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,wn=!1,a=e.times(tv(o,n+u)),wn=!0,a=Mz(a),a.s=i,a};mt.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=oa(a),n=Af(a,r<=i.toExpNeg||r>=i.toExpPos)):(xl(e,1,Pp),t===void 0?t=i.rounding:xl(t,0,8),a=Yr(new i(a),e,t),r=oa(a),n=Af(a,e<=r||r<=i.toExpNeg,e)),n};mt.toSignificantDigits=mt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(xl(e,1,Pp),t===void 0?t=n.rounding:xl(t,0,8)),Yr(new n(r),e,t)};mt.toString=mt.valueOf=mt.val=mt.toJSON=mt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=oa(e),r=e.constructor;return Af(e,t<=r.toExpNeg||t>=r.toExpPos)};function Dz(e,t){var r,n,a,i,s,o,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),wn?Yr(t,f):t;if(c=e.d,u=t.d,s=e.e,a=t.e,c=c.slice(),i=s-a,i){for(i<0?(n=c,i=-i,o=u.length):(n=u,a=s,o=c.length),s=Math.ceil(f/dn),o=s>o?s+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=c.length,i=u.length,o-i<0&&(i=o,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/Aa|0,c[i]%=Aa;for(r&&(c.unshift(r),++a),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=a,wn?Yr(t,f):t}function xl(e,t,r){if(e!==~~e||e<t||e>r)throw Error(uf+e)}function ul(e){var t,r,n,a=e.length-1,i="",s=e[0];if(a>0){for(i+=s,t=1;t<a;t++)n=e[t]+"",r=dn-n.length,r&&(i+=su(r)),i+=n;s=e[t],n=s+"",r=dn-n.length,r&&(i+=su(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}var uc=function(){function e(n,a){var i,s=0,o=n.length;for(n=n.slice();o--;)i=n[o]*a+s,n[o]=i%Aa|0,s=i/Aa|0;return s&&n.unshift(s),n}function t(n,a,i,s){var o,c;if(i!=s)c=i>s?1:-1;else for(o=c=0;o<i;o++)if(n[o]!=a[o]){c=n[o]>a[o]?1:-1;break}return c}function r(n,a,i){for(var s=0;i--;)n[i]-=s,s=n[i]<a[i]?1:0,n[i]=s*Aa+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,s){var o,c,u,d,f,p,h,v,m,x,y,g,b,S,_,j,A,E,T=n.constructor,L=n.s==a.s?1:-1,k=n.d,R=a.d;if(!n.s)return new T(n);if(!a.s)throw Error(no+"Division by zero");for(c=n.e-a.e,A=R.length,_=k.length,h=new T(L),v=h.d=[],u=0;R[u]==(k[u]||0);)++u;if(R[u]>(k[u]||0)&&--c,i==null?g=i=T.precision:s?g=i+(oa(n)-oa(a))+1:g=i,g<0)return new T(0);if(g=g/dn+2|0,u=0,A==1)for(d=0,R=R[0],g++;(u<_||d)&&g--;u++)b=d*Aa+(k[u]||0),v[u]=b/R|0,d=b%R|0;else{for(d=Aa/(R[0]+1)|0,d>1&&(R=e(R,d),k=e(k,d),A=R.length,_=k.length),S=A,m=k.slice(0,A),x=m.length;x<A;)m[x++]=0;E=R.slice(),E.unshift(0),j=R[0],R[1]>=Aa/2&&++j;do d=0,o=t(R,m,A,x),o<0?(y=m[0],A!=x&&(y=y*Aa+(m[1]||0)),d=y/j|0,d>1?(d>=Aa&&(d=Aa-1),f=e(R,d),p=f.length,x=m.length,o=t(f,m,p,x),o==1&&(d--,r(f,A<p?E:R,p))):(d==0&&(o=d=1),f=R.slice()),p=f.length,p<x&&f.unshift(0),r(m,f,x),o==-1&&(x=m.length,o=t(R,m,A,x),o<1&&(d++,r(m,A<x?E:R,x))),x=m.length):o===0&&(d++,m=[0]),v[u++]=d,o&&m[0]?m[x++]=k[S]||0:(m=[k[S]],x=1);while((S++<_||m[0]!==void 0)&&g--)}return v[0]||v.shift(),h.e=c,Yr(h,s?i+oa(h)+1:i)}}();function Mz(e,t){var r,n,a,i,s,o,c=0,u=0,d=e.constructor,f=d.precision;if(oa(e)>16)throw Error(ME+oa(e));if(!e.s)return new d(Ns);for(wn=!1,o=f,s=new d(.03125);e.abs().gte(.1);)e=e.times(s),u+=5;for(n=Math.log(Pd(2,u))/Math.LN10*2+5|0,o+=n,r=a=i=new d(Ns),d.precision=o;;){if(a=Yr(a.times(e),o),r=r.times(++c),s=i.plus(uc(a,r,o)),ul(s.d).slice(0,o)===ul(i.d).slice(0,o)){for(;u--;)i=Yr(i.times(i),o);return d.precision=f,t==null?(wn=!0,Yr(i,f)):i}i=s}}function oa(e){for(var t=e.e*dn,r=e.d[0];r>=10;r/=10)t++;return t}function gS(e,t,r){if(t>e.LN10.sd())throw wn=!0,r&&(e.precision=r),Error(no+"LN10 precision limit exceeded");return Yr(new e(e.LN10),t)}function su(e){for(var t="";e--;)t+="0";return t}function tv(e,t){var r,n,a,i,s,o,c,u,d,f=1,p=10,h=e,v=h.d,m=h.constructor,x=m.precision;if(h.s<1)throw Error(no+(h.s?"NaN":"-Infinity"));if(h.eq(Ns))return new m(0);if(t==null?(wn=!1,u=x):u=t,h.eq(10))return t==null&&(wn=!0),gS(m,u);if(u+=p,m.precision=u,r=ul(v),n=r.charAt(0),i=oa(h),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(e),r=ul(h.d),n=r.charAt(0),f++;i=oa(h),n>1?(h=new m("0."+r),i++):h=new m(n+"."+r.slice(1))}else return c=gS(m,u+2,x).times(i+""),h=tv(new m(n+"."+r.slice(1)),u-p).plus(c),m.precision=x,t==null?(wn=!0,Yr(h,x)):h;for(o=s=h=uc(h.minus(Ns),h.plus(Ns),u),d=Yr(h.times(h),u),a=3;;){if(s=Yr(s.times(d),u),c=o.plus(uc(s,new m(a),u)),ul(c.d).slice(0,u)===ul(o.d).slice(0,u))return o=o.times(2),i!==0&&(o=o.plus(gS(m,u+2,x).times(i+""))),o=uc(o,new m(f),u),m.precision=x,t==null?(wn=!0,Yr(o,x)):o;o=c,a+=2}}function cL(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Lp(r/dn),e.d=[],n=(r+1)%dn,r<0&&(n+=dn),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=dn;n<a;)e.d.push(+t.slice(n,n+=dn));t=t.slice(n),n=dn-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),wn&&(e.e>Wb||e.e<-Wb))throw Error(ME+r)}else e.s=0,e.e=0,e.d=[0];return e}function Yr(e,t,r){var n,a,i,s,o,c,u,d,f=e.d;for(s=1,i=f[0];i>=10;i/=10)s++;if(n=t-s,n<0)n+=dn,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/dn),i=f.length,d>=i)return e;for(u=i=f[d],s=1;i>=10;i/=10)s++;n%=dn,a=n-dn+s}if(r!==void 0&&(i=Pd(10,s-a-1),o=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?a>0?u/Pd(10,s-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=oa(e),f.length=1,t=t-i-1,f[0]=Pd(10,(dn-t%dn)%dn),e.e=Lp(-t/dn)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=Pd(10,dn-n),f[d]=a>0?(u/Pd(10,s-a)%Pd(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==Aa&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=Aa)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(wn&&(e.e>Wb||e.e<-Wb))throw Error(ME+oa(e));return e}function Fz(e,t){var r,n,a,i,s,o,c,u,d,f,p=e.constructor,h=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),wn?Yr(t,h):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),s=u-n,s){for(d=s<0,d?(r=c,s=-s,o=f.length):(r=f,n=u,o=c.length),a=Math.max(Math.ceil(h/dn),o)+2,s>a&&(s=a,r.length=1),r.reverse(),a=s;a--;)r.push(0);r.reverse()}else{for(a=c.length,o=f.length,d=a<o,d&&(o=a),a=0;a<o;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}s=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),o=c.length,a=f.length-o;a>0;--a)c[o++]=0;for(a=f.length;a>s;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=Aa-1;--c[i],c[a]+=Aa}c[a]-=f[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,wn?Yr(t,h):t):new p(0)}function Af(e,t,r){var n,a=oa(e),i=ul(e.d),s=i.length;return t?(r&&(n=r-s)>0?i=i.charAt(0)+"."+i.slice(1)+su(n):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+su(-a-1)+i,r&&(n=r-s)>0&&(i+=su(n))):a>=s?(i+=su(a+1-s),r&&(n=r-a-1)>0&&(i=i+"."+su(n))):((n=a+1)<s&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-s)>0&&(a+1===s&&(i+="."),i+=su(n))),e.s<0?"-"+i:i}function uL(e,t){if(e.length>t)return e.length=t,!0}function $z(e){var t,r,n;function a(i){var s=this;if(!(s instanceof a))return new a(i);if(s.constructor=a,i instanceof a){s.s=i.s,s.e=i.e,s.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(uf+i);if(i>0)s.s=1;else if(i<0)i=-i,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(i===~~i&&i<1e7){s.e=0,s.d=[i];return}return cL(s,i.toString())}else if(typeof i!="string")throw Error(uf+i);if(i.charCodeAt(0)===45?(i=i.slice(1),s.s=-1):s.s=1,pEe.test(i))cL(s,i);else throw Error(uf+i)}if(a.prototype=mt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=$z,a.config=a.set=mEe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function mEe(e){if(!e||typeof e!="object")throw Error(no+"Object expected");var t,r,n,a=["precision",1,Pp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Lp(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(uf+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(uf+r+": "+n);return this}var FE=$z(hEe);Ns=new FE(1);const Vr=FE;function gEe(e){return bEe(e)||yEe(e)||xEe(e)||vEe()}function vEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xEe(e,t){if(e){if(typeof e=="string")return e4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e4(e,t)}}function yEe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function bEe(e){if(Array.isArray(e))return e4(e)}function e4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var wEe=function(t){return t},Bz={},Uz=function(t){return t===Bz},dL=function(t){return function r(){return arguments.length===0||arguments.length===1&&Uz(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},_Ee=function e(t,r){return t===1?r:dL(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=a.filter(function(o){return o!==Bz}).length;return s>=t?r.apply(void 0,a):e(t-s,dL(function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];var d=a.map(function(f){return Uz(f)?c.shift():f});return r.apply(void 0,gEe(d).concat(c))}))})},Bw=function(t){return _Ee(t.length,t)},t4=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},SEe=Bw(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),NEe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return wEe;var a=r.reverse(),i=a[0],s=a.slice(1);return function(){return s.reduce(function(o,c){return c(o)},i.apply(void 0,arguments))}},r4=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},zz=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r&&i.every(function(o,c){return o===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function jEe(e){var t;return e===0?t=1:t=Math.floor(new Vr(e).abs().log(10).toNumber())+1,t}function AEe(e,t,r){for(var n=new Vr(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var EEe=Bw(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),TEe=Bw(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),CEe=Bw(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const Uw={rangeStep:AEe,getDigitCount:jEe,interpolateNumber:EEe,uninterpolateNumber:TEe,uninterpolateTruncation:CEe};function n4(e){return PEe(e)||OEe(e)||qz(e)||kEe()}function kEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OEe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function PEe(e){if(Array.isArray(e))return a4(e)}function rv(e,t){return IEe(e)||REe(e,t)||qz(e,t)||LEe()}function LEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qz(e,t){if(e){if(typeof e=="string")return a4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a4(e,t)}}function a4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function REe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var s=e[Symbol.iterator](),o;!(n=(o=s.next()).done)&&(r.push(o.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&s.return!=null&&s.return()}finally{if(a)throw i}}return r}}function IEe(e){if(Array.isArray(e))return e}function Hz(e){var t=rv(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function Wz(e,t,r){if(e.lte(0))return new Vr(0);var n=Uw.getDigitCount(e.toNumber()),a=new Vr(10).pow(n),i=e.div(a),s=n!==1?.05:.1,o=new Vr(Math.ceil(i.div(s).toNumber())).add(r).mul(s),c=o.mul(a);return t?c:new Vr(Math.ceil(c))}function DEe(e,t,r){var n=1,a=new Vr(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Vr(10).pow(Uw.getDigitCount(e)-1),a=new Vr(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Vr(Math.floor(e)))}else e===0?a=new Vr(Math.floor((t-1)/2)):r||(a=new Vr(Math.floor(e)));var s=Math.floor((t-1)/2),o=NEe(SEe(function(c){return a.add(new Vr(c-s).mul(n)).toNumber()}),t4);return o(0,t)}function Vz(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Vr(0),tickMin:new Vr(0),tickMax:new Vr(0)};var i=Wz(new Vr(t).sub(e).div(r-1),n,a),s;e<=0&&t>=0?s=new Vr(0):(s=new Vr(e).add(t).div(2),s=s.sub(new Vr(s).mod(i)));var o=Math.ceil(s.sub(e).div(i).toNumber()),c=Math.ceil(new Vr(t).sub(s).div(i).toNumber()),u=o+c+1;return u>r?Vz(e,t,r,n,a+1):(u<r&&(c=t>0?c+(r-u):c,o=t>0?o:o+(r-u)),{step:i,tickMin:s.sub(new Vr(o).mul(i)),tickMax:s.add(new Vr(c).mul(i))})}function MEe(e){var t=rv(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(a,2),o=Hz([r,n]),c=rv(o,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(n4(t4(0,a-1).map(function(){return 1/0}))):[].concat(n4(t4(0,a-1).map(function(){return-1/0})),[d]);return r>n?r4(f):f}if(u===d)return DEe(u,a,i);var p=Vz(u,d,s,i),h=p.step,v=p.tickMin,m=p.tickMax,x=Uw.rangeStep(v,m.add(new Vr(.1).mul(h)),h);return r>n?r4(x):x}function FEe(e,t){var r=rv(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Hz([n,a]),o=rv(s,2),c=o[0],u=o[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var d=Math.max(t,2),f=Wz(new Vr(u).sub(c).div(d-1),i,0),p=[].concat(n4(Uw.rangeStep(new Vr(c),new Vr(u).sub(new Vr(.99).mul(f)),f)),[u]);return n>a?r4(p):p}var $Ee=zz(MEe),BEe=zz(FEe),UEe="Invariant failed";function Ef(e,t){throw new Error(UEe)}var zEe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function W0(e){"@babel/helpers - typeof";return W0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W0(e)}function Vb(){return Vb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vb.apply(this,arguments)}function qEe(e,t){return GEe(e)||VEe(e,t)||WEe(e,t)||HEe()}function HEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WEe(e,t){if(e){if(typeof e=="string")return fL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fL(e,t)}}function fL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function VEe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function GEe(e){if(Array.isArray(e))return e}function KEe(e,t){if(e==null)return{};var r=XEe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function XEe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function YEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JEe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xz(n.key),n)}}function QEe(e,t,r){return t&&JEe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZEe(e,t,r){return t=Gb(t),eTe(e,Gz()?Reflect.construct(t,r||[],Gb(e).constructor):t.apply(e,r))}function eTe(e,t){if(t&&(W0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tTe(e)}function tTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gz=function(){return!!e})()}function Gb(e){return Gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gb(e)}function rTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i4(e,t)}function i4(e,t){return i4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},i4(e,t)}function Kz(e,t,r){return t=Xz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xz(e){var t=nTe(e,"string");return W0(t)=="symbol"?t:t+""}function nTe(e,t){if(W0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(W0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zw=function(e){function t(){return YEe(this,t),ZEe(this,t,arguments)}return rTe(t,e),QEe(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,s=n.width,o=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,p=KEe(n,zEe),h=$t(p,!1);this.props.direction==="x"&&d.type!=="number"&&Ef();var v=c.map(function(m){var x=u(m,o),y=x.x,g=x.y,b=x.value,S=x.errorVal;if(!S)return null;var _=[],j,A;if(Array.isArray(S)){var E=qEe(S,2);j=E[0],A=E[1]}else j=A=S;if(i==="vertical"){var T=d.scale,L=g+a,k=L+s,R=L-s,D=T(b-j),q=T(b+A);_.push({x1:q,y1:k,x2:q,y2:R}),_.push({x1:D,y1:L,x2:q,y2:L}),_.push({x1:D,y1:k,x2:D,y2:R})}else if(i==="horizontal"){var X=f.scale,se=y+a,Z=se-s,K=se+s,ie=X(b-j),pe=X(b+A);_.push({x1:Z,y1:pe,x2:K,y2:pe}),_.push({x1:se,y1:ie,x2:se,y2:pe}),_.push({x1:Z,y1:ie,x2:K,y2:ie})}return we.createElement($r,Vb({className:"recharts-errorBar",key:"bar-".concat(_.map(function(me){return"".concat(me.x1,"-").concat(me.x2,"-").concat(me.y1,"-").concat(me.y2)}))},h),_.map(function(me){return we.createElement("line",Vb({},me,{key:"line-".concat(me.x1,"-").concat(me.x2,"-").concat(me.y1,"-").concat(me.y2)}))}))});return we.createElement($r,{className:"recharts-errorBars"},v)}}])}(we.Component);Kz(zw,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Kz(zw,"displayName","ErrorBar");function nv(e){"@babel/helpers - typeof";return nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nv(e)}function hL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hL(Object(r),!0).forEach(function(n){aTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aTe(e,t,r){return t=iTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iTe(e){var t=sTe(e,"string");return nv(t)=="symbol"?t:t+""}function sTe(e,t){if(nv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(nv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yz=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,s=xs(r,lc);if(!s)return null;var o=lc.defaultProps,c=o!==void 0?wd(wd({},o),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:i==="children"?u=(n||[]).reduce(function(d,f){var p=f.item,h=f.props,v=h.sectors||h.data||[];return d.concat(v.map(function(m){return{type:s.props.iconType||p.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):u=(n||[]).map(function(d){var f=d.item,p=f.type.defaultProps,h=p!==void 0?wd(wd({},p),f.props):{},v=h.dataKey,m=h.name,x=h.legendType,y=h.hide;return{inactive:y,dataKey:v,type:c.iconType||x||"square",color:$E(f),value:m||v,payload:h}}),wd(wd(wd({},c),lc.getWithHeight(s,a)),{},{payload:u,item:s})};function av(e){"@babel/helpers - typeof";return av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},av(e)}function pL(e){return uTe(e)||cTe(e)||lTe(e)||oTe()}function oTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lTe(e,t){if(e){if(typeof e=="string")return s4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s4(e,t)}}function cTe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function uTe(e){if(Array.isArray(e))return s4(e)}function s4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mL(Object(r),!0).forEach(function(n){l0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l0(e,t,r){return t=dTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dTe(e){var t=fTe(e,"string");return av(t)=="symbol"?t:t+""}function fTe(e,t){if(av(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(av(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fi(e,t,r){return lr(e)||lr(t)?r:wa(t)?Ts(e,t,r):Vt(t)?t(e):r}function sg(e,t,r,n){var a=cEe(e,function(o){return fi(o,t)});if(r==="number"){var i=a.filter(function(o){return et(o)||parseFloat(o)});return i.length?[Fw(i),Mw(i)]:[1/0,-1/0]}var s=n?a.filter(function(o){return!lr(o)}):a;return s.map(function(o){return wa(o)||o instanceof Date?o:""})}var hTe=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=-1,o=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(o<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<o;u++){var d=u>0?a[u-1].coordinate:a[o-1].coordinate,f=a[u].coordinate,p=u>=o-1?a[0].coordinate:a[u+1].coordinate,h=void 0;if(ki(f-d)!==ki(p-f)){var v=[];if(ki(p-f)===ki(c[1]-c[0])){h=p;var m=f+c[1]-c[0];v[0]=Math.min(m,(m+d)/2),v[1]=Math.max(m,(m+d)/2)}else{h=d;var x=p+c[1]-c[0];v[0]=Math.min(f,(x+f)/2),v[1]=Math.max(f,(x+f)/2)}var y=[Math.min(f,(h+f)/2),Math.max(f,(h+f)/2)];if(t>y[0]&&t<=y[1]||t>=v[0]&&t<=v[1]){s=a[u].index;break}}else{var g=Math.min(d,p),b=Math.max(d,p);if(t>(g+f)/2&&t<=(b+f)/2){s=a[u].index;break}}}else for(var S=0;S<o;S++)if(S===0&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<o-1&&t>(n[S].coordinate+n[S-1].coordinate)/2&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S===o-1&&t>(n[S].coordinate+n[S-1].coordinate)/2){s=n[S].index;break}return s},$E=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?$n($n({},t.type.defaultProps),t.props):t.props,s=i.stroke,o=i.fill,c;switch(a){case"Line":c=s;break;case"Area":case"Radar":c=s&&s!=="none"?s:o;break;default:c=o;break}return c},pTe=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var s={},o=Object.keys(i),c=0,u=o.length;c<u;c++)for(var d=i[o[c]].stackGroups,f=Object.keys(d),p=0,h=f.length;p<h;p++){var v=d[f[p]],m=v.items,x=v.cateAxisId,y=m.filter(function(A){return oc(A.type).indexOf("Bar")>=0});if(y&&y.length){var g=y[0].type.defaultProps,b=g!==void 0?$n($n({},g),y[0].props):y[0].props,S=b.barSize,_=b[x];s[_]||(s[_]=[]);var j=lr(S)?r:S;s[_].push({item:y[0],stackList:y.slice(1),barSize:lr(j)?void 0:Oi(j,n,0)})}}return s},mTe=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,s=i===void 0?[]:i,o=t.maxBarSize,c=s.length;if(c<1)return null;var u=Oi(r,a,0,!0),d,f=[];if(s[0].barSize===+s[0].barSize){var p=!1,h=a/c,v=s.reduce(function(S,_){return S+_.barSize||0},0);v+=(c-1)*u,v>=a&&(v-=(c-1)*u,u=0),v>=a&&h>0&&(p=!0,h*=.9,v=c*h);var m=(a-v)/2>>0,x={offset:m-u,size:0};d=s.reduce(function(S,_){var j={item:_.item,position:{offset:x.offset+x.size+u,size:p?h:_.barSize}},A=[].concat(pL(S),[j]);return x=A[A.length-1].position,_.stackList&&_.stackList.length&&_.stackList.forEach(function(E){A.push({item:E,position:x})}),A},f)}else{var y=Oi(n,a,0,!0);a-2*y-(c-1)*u<=0&&(u=0);var g=(a-2*y-(c-1)*u)/c;g>1&&(g>>=0);var b=o===+o?Math.min(g,o):g;d=s.reduce(function(S,_,j){var A=[].concat(pL(S),[{item:_.item,position:{offset:y+(g+u)*j+(g-b)/2,size:b}}]);return _.stackList&&_.stackList.length&&_.stackList.forEach(function(E){A.push({item:E,position:A[A.length-1].position})}),A},f)}return d},gTe=function(t,r,n,a){var i=n.children,s=n.width,o=n.margin,c=s-(o.left||0)-(o.right||0),u=Yz({children:i,legendWidth:c});if(u){var d=a||{},f=d.width,p=d.height,h=u.align,v=u.verticalAlign,m=u.layout;if((m==="vertical"||m==="horizontal"&&v==="middle")&&h!=="center"&&et(t[h]))return $n($n({},t),{},l0({},h,t[h]+(f||0)));if((m==="horizontal"||m==="vertical"&&h==="center")&&v!=="middle"&&et(t[v]))return $n($n({},t),{},l0({},v,t[v]+(p||0)))}return t},vTe=function(t,r,n){return lr(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},Jz=function(t,r,n,a,i){var s=r.props.children,o=Zs(s,zw).filter(function(u){return vTe(a,i,u.props.direction)});if(o&&o.length){var c=o.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=fi(d,n);if(lr(f))return u;var p=Array.isArray(f)?[Fw(f),Mw(f)]:[f,f],h=c.reduce(function(v,m){var x=fi(d,m,0),y=p[0]-Math.abs(Array.isArray(x)?x[0]:x),g=p[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(y,v[0]),Math.max(g,v[1])]},[1/0,-1/0]);return[Math.min(h[0],u[0]),Math.max(h[1],u[1])]},[1/0,-1/0])}return null},xTe=function(t,r,n,a,i){var s=r.map(function(o){return Jz(t,o,n,i,a)}).filter(function(o){return!lr(o)});return s&&s.length?s.reduce(function(o,c){return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]},[1/0,-1/0]):null},Qz=function(t,r,n,a,i){var s=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&Jz(t,c,u,a)||sg(t,u,n,i)});if(n==="number")return s.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var o={};return s.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)o[u[d]]||(o[u[d]]=!0,c.push(u[d]));return c},[])},Zz=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},eq=function(t,r,n,a){if(a)return t.map(function(c){return c.coordinate});var i,s,o=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(s=!0),c.coordinate});return i||o.push(r),s||o.push(n),o},rc=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,s=t.type,o=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&s==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?ki(o[0]-o[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var p=i?i.indexOf(f):f;return{coordinate:a(p)+u,value:f,offset:u}});return d.filter(function(f){return!Qv(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,p){return{coordinate:a(f)+u,value:f,index:p,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,p){return{coordinate:a(f)+u,value:i?i[f]:f,index:p,offset:u}})},vS=new WeakMap,Ux=function(t,r){if(typeof r!="function")return t;vS.has(t)||vS.set(t,new WeakMap);var n=vS.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},tq=function(t,r,n){var a=t.scale,i=t.type,s=t.layout,o=t.axisType;if(a==="auto")return s==="radial"&&o==="radiusAxis"?{scale:Yg(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:Ub(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:ig(),realScaleType:"point"}:i==="category"?{scale:Yg(),realScaleType:"band"}:{scale:Ub(),realScaleType:"linear"};if(Sf(a)){var c="scale".concat(Sw(a));return{scale:(lL[c]||ig)(),realScaleType:lL[c]?c:"point"}}return Vt(a)?{scale:a}:{scale:ig(),realScaleType:"point"}},gL=1e-4,rq=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-gL,s=Math.max(a[0],a[1])+gL,o=t(r[0]),c=t(r[n-1]);(o<i||o>s||c<i||c>s)&&t.domain([r[0],r[n-1]])}},yTe=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},bTe=function(t,r){if(!r||r.length!==2||!et(r[0])||!et(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!et(t[0])||t[0]<n)&&(i[0]=n),(!et(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},wTe=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,s=0,o=0;o<r;++o){var c=Qv(t[o][n][1])?t[o][n][0]:t[o][n][1];c>=0?(t[o][n][0]=i,t[o][n][1]=i+c,i=t[o][n][1]):(t[o][n][0]=s,t[o][n][1]=s+c,s=t[o][n][1])}},_Te=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,s=0;s<r;++s){var o=Qv(t[s][n][1])?t[s][n][0]:t[s][n][1];o>=0?(t[s][n][0]=i,t[s][n][1]=i+o,i=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},STe={sign:wTe,expand:zxe,none:M0,silhouette:qxe,wiggle:Hxe,positive:_Te},NTe=function(t,r,n){var a=r.map(function(o){return o.props.dataKey}),i=STe[n],s=Uxe().keys(a).value(function(o,c){return+fi(o,c,0)}).order(Oj).offset(i);return s(t)},jTe=function(t,r,n,a,i,s){if(!t)return null;var o=s?r.reverse():r,c={},u=o.reduce(function(f,p){var h,v=(h=p.type)!==null&&h!==void 0&&h.defaultProps?$n($n({},p.type.defaultProps),p.props):p.props,m=v.stackId,x=v.hide;if(x)return f;var y=v[n],g=f[y]||{hasStack:!1,stackGroups:{}};if(wa(m)){var b=g.stackGroups[m]||{numericAxisId:n,cateAxisId:a,items:[]};b.items.push(p),g.hasStack=!0,g.stackGroups[m]=b}else g.stackGroups[Zv("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[p]};return $n($n({},f),{},l0({},y,g))},c),d={};return Object.keys(u).reduce(function(f,p){var h=u[p];if(h.hasStack){var v={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(m,x){var y=h.stackGroups[x];return $n($n({},m),{},l0({},x,{numericAxisId:n,cateAxisId:a,items:y.items,stackedData:NTe(t,y.items,i)}))},v)}return $n($n({},f),{},l0({},p,h))},d)},nq=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,s=r.originalDomain,o=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=$Ee(u,i,o);return t.domain([Fw(d),Mw(d)]),{niceTicks:d}}if(i&&a==="number"){var f=t.domain(),p=BEe(f,i,o);return{niceTicks:p}}return null},vL=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,s=t.entry,o=t.index;if(r.type==="category")return n[o]?n[o].coordinate+a:null;var c=fi(s,r.dataKey,r.domain[o]);return lr(c)?null:r.scale(c)-i/2+a},ATe=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},ETe=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?$n($n({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(wa(i)){var s=r[i];if(s){var o=s.items.indexOf(t);return o>=0?s.stackedData[o]:null}}return null},TTe=function(t){return t.reduce(function(r,n){return[Fw(n.concat([r[0]]).filter(et)),Mw(n.concat([r[1]]).filter(et))]},[1/0,-1/0])},aq=function(t,r,n){return Object.keys(t).reduce(function(a,i){var s=t[i],o=s.stackedData,c=o.reduce(function(u,d){var f=TTe(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},xL=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,yL=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,o4=function(t,r,n){if(Vt(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(et(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(xL.test(t[0])){var i=+xL.exec(t[0])[1];a[0]=r[0]-i}else Vt(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(et(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(yL.test(t[1])){var s=+yL.exec(t[1])[1];a[1]=r[1]+s}else Vt(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},Kb=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=hE(r,function(f){return f.coordinate}),s=1/0,o=1,c=i.length;o<c;o++){var u=i[o],d=i[o-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},bL=function(t,r,n){return!t||!t.length||$w(t,Ts(n,"type.defaultProps.domain"))?r:t},iq=function(t,r){var n=t.type.defaultProps?$n($n({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,s=n.unit,o=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return $n($n({},$t(t,!1)),{},{dataKey:a,unit:s,formatter:o,name:i||a,color:$E(t),value:fi(r,a),type:c,payload:r,chartType:u,hide:d})};function iv(e){"@babel/helpers - typeof";return iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iv(e)}function wL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Hl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wL(Object(r),!0).forEach(function(n){sq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sq(e,t,r){return t=CTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CTe(e){var t=kTe(e,"string");return iv(t)=="symbol"?t:t+""}function kTe(e,t){if(iv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(iv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OTe(e,t){return ITe(e)||RTe(e,t)||LTe(e,t)||PTe()}function PTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LTe(e,t){if(e){if(typeof e=="string")return _L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _L(e,t)}}function _L(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function RTe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function ITe(e){if(Array.isArray(e))return e}var Xb=Math.PI/180,DTe=function(t){return t*180/Math.PI},on=function(t,r,n,a){return{x:t+Math.cos(-Xb*a)*n,y:r+Math.sin(-Xb*a)*n}},oq=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},MTe=function(t,r,n,a,i){var s=t.width,o=t.height,c=t.startAngle,u=t.endAngle,d=Oi(t.cx,s,s/2),f=Oi(t.cy,o,o/2),p=oq(s,o,n),h=Oi(t.innerRadius,p,0),v=Oi(t.outerRadius,p,p*.8),m=Object.keys(r);return m.reduce(function(x,y){var g=r[y],b=g.domain,S=g.reversed,_;if(lr(g.range))a==="angleAxis"?_=[c,u]:a==="radiusAxis"&&(_=[h,v]),S&&(_=[_[1],_[0]]);else{_=g.range;var j=_,A=OTe(j,2);c=A[0],u=A[1]}var E=tq(g,i),T=E.realScaleType,L=E.scale;L.domain(b).range(_),rq(L);var k=nq(L,Hl(Hl({},g),{},{realScaleType:T})),R=Hl(Hl(Hl({},g),k),{},{range:_,radius:v,realScaleType:T,scale:L,cx:d,cy:f,innerRadius:h,outerRadius:v,startAngle:c,endAngle:u});return Hl(Hl({},x),{},sq({},y,R))},{})},FTe=function(t,r){var n=t.x,a=t.y,i=r.x,s=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-s,2))},$Te=function(t,r){var n=t.x,a=t.y,i=r.cx,s=r.cy,o=FTe({x:n,y:a},{x:i,y:s});if(o<=0)return{radius:o};var c=(n-i)/o,u=Math.acos(c);return a>s&&(u=2*Math.PI-u),{radius:o,angle:DTe(u),angleInRadian:u}},BTe=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),s=Math.min(a,i);return{startAngle:r-s*360,endAngle:n-s*360}},UTe=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),s=Math.floor(a/360),o=Math.min(i,s);return t+o*360},SL=function(t,r){var n=t.x,a=t.y,i=$Te({x:n,y:a},r),s=i.radius,o=i.angle,c=r.innerRadius,u=r.outerRadius;if(s<c||s>u)return!1;if(s===0)return!0;var d=BTe(r),f=d.startAngle,p=d.endAngle,h=o,v;if(f<=p){for(;h>p;)h-=360;for(;h<f;)h+=360;v=h>=f&&h<=p}else{for(;h>f;)h-=360;for(;h<p;)h+=360;v=h>=p&&h<=f}return v?Hl(Hl({},r),{},{radius:s,angle:UTe(h,r)}):null},lq=function(t){return!M.isValidElement(t)&&!Vt(t)&&typeof t!="boolean"?t.className:""};function sv(e){"@babel/helpers - typeof";return sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sv(e)}var zTe=["offset"];function qTe(e){return GTe(e)||VTe(e)||WTe(e)||HTe()}function HTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WTe(e,t){if(e){if(typeof e=="string")return l4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l4(e,t)}}function VTe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function GTe(e){if(Array.isArray(e))return l4(e)}function l4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function KTe(e,t){if(e==null)return{};var r=XTe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function XTe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function NL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ga(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NL(Object(r),!0).forEach(function(n){YTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YTe(e,t,r){return t=JTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JTe(e){var t=QTe(e,"string");return sv(t)=="symbol"?t:t+""}function QTe(e,t){if(sv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ov(){return ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ov.apply(this,arguments)}var ZTe=function(t){var r=t.value,n=t.formatter,a=lr(t.children)?r:t.children;return Vt(n)?n(a):a},eCe=function(t,r){var n=ki(r-t),a=Math.min(Math.abs(r-t),360);return n*a},tCe=function(t,r,n){var a=t.position,i=t.viewBox,s=t.offset,o=t.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,p=c.outerRadius,h=c.startAngle,v=c.endAngle,m=c.clockWise,x=(f+p)/2,y=eCe(h,v),g=y>=0?1:-1,b,S;a==="insideStart"?(b=h+g*s,S=m):a==="insideEnd"?(b=v-g*s,S=!m):a==="end"&&(b=v+g*s,S=m),S=y<=0?S:!S;var _=on(u,d,x,b),j=on(u,d,x,b+(S?1:-1)*359),A="M".concat(_.x,",").concat(_.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(S?0:1,`,
    `).concat(j.x,",").concat(j.y),E=lr(t.id)?Zv("recharts-radial-line-"):t.id;return we.createElement("text",ov({},n,{dominantBaseline:"central",className:sr("recharts-radial-bar-label",o)}),we.createElement("defs",null,we.createElement("path",{id:E,d:A})),we.createElement("textPath",{xlinkHref:"#".concat(E)},r))},rCe=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,s=i.cx,o=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,p=(d+f)/2;if(a==="outside"){var h=on(s,o,u+n,p),v=h.x,m=h.y;return{x:v,y:m,textAnchor:v>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var x=(c+u)/2,y=on(s,o,x,p),g=y.x,b=y.y;return{x:g,y:b,textAnchor:"middle",verticalAnchor:"middle"}},nCe=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,s=r,o=s.x,c=s.y,u=s.width,d=s.height,f=d>=0?1:-1,p=f*a,h=f>0?"end":"start",v=f>0?"start":"end",m=u>=0?1:-1,x=m*a,y=m>0?"end":"start",g=m>0?"start":"end";if(i==="top"){var b={x:o+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:h};return ga(ga({},b),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var S={x:o+u/2,y:c+d+p,textAnchor:"middle",verticalAnchor:v};return ga(ga({},S),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(i==="left"){var _={x:o-x,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return ga(ga({},_),n?{width:Math.max(_.x-n.x,0),height:d}:{})}if(i==="right"){var j={x:o+u+x,y:c+d/2,textAnchor:g,verticalAnchor:"middle"};return ga(ga({},j),n?{width:Math.max(n.x+n.width-j.x,0),height:d}:{})}var A=n?{width:u,height:d}:{};return i==="insideLeft"?ga({x:o+x,y:c+d/2,textAnchor:g,verticalAnchor:"middle"},A):i==="insideRight"?ga({x:o+u-x,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},A):i==="insideTop"?ga({x:o+u/2,y:c+p,textAnchor:"middle",verticalAnchor:v},A):i==="insideBottom"?ga({x:o+u/2,y:c+d-p,textAnchor:"middle",verticalAnchor:h},A):i==="insideTopLeft"?ga({x:o+x,y:c+p,textAnchor:g,verticalAnchor:v},A):i==="insideTopRight"?ga({x:o+u-x,y:c+p,textAnchor:y,verticalAnchor:v},A):i==="insideBottomLeft"?ga({x:o+x,y:c+d-p,textAnchor:g,verticalAnchor:h},A):i==="insideBottomRight"?ga({x:o+u-x,y:c+d-p,textAnchor:y,verticalAnchor:h},A):Sp(i)&&(et(i.x)||Hd(i.x))&&(et(i.y)||Hd(i.y))?ga({x:o+Oi(i.x,u),y:c+Oi(i.y,d),textAnchor:"end",verticalAnchor:"end"},A):ga({x:o+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},A)},aCe=function(t){return"cx"in t&&et(t.cx)};function ka(e){var t=e.offset,r=t===void 0?5:t,n=KTe(e,zTe),a=ga({offset:r},n),i=a.viewBox,s=a.position,o=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,p=a.textBreakAll;if(!i||lr(o)&&lr(c)&&!M.isValidElement(u)&&!Vt(u))return null;if(M.isValidElement(u))return M.cloneElement(u,a);var h;if(Vt(u)){if(h=M.createElement(u,a),M.isValidElement(h))return h}else h=ZTe(a);var v=aCe(i),m=$t(a,!0);if(v&&(s==="insideStart"||s==="insideEnd"||s==="end"))return tCe(a,h,m);var x=v?rCe(a):nCe(a);return we.createElement(jf,ov({className:sr("recharts-label",f)},m,x,{breakAll:p}),h)}ka.displayName="Label";var cq=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,s=t.endAngle,o=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,p=t.y,h=t.top,v=t.left,m=t.width,x=t.height,y=t.clockWise,g=t.labelViewBox;if(g)return g;if(et(m)&&et(x)){if(et(f)&&et(p))return{x:f,y:p,width:m,height:x};if(et(h)&&et(v))return{x:h,y:v,width:m,height:x}}return et(f)&&et(p)?{x:f,y:p,width:0,height:0}:et(r)&&et(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:s||a||0,innerRadius:u||0,outerRadius:d||c||o||0,clockWise:y}:t.viewBox?t.viewBox:{}},iCe=function(t,r){return t?t===!0?we.createElement(ka,{key:"label-implicit",viewBox:r}):wa(t)?we.createElement(ka,{key:"label-implicit",viewBox:r,value:t}):M.isValidElement(t)?t.type===ka?M.cloneElement(t,{key:"label-implicit",viewBox:r}):we.createElement(ka,{key:"label-implicit",content:t,viewBox:r}):Vt(t)?we.createElement(ka,{key:"label-implicit",content:t,viewBox:r}):Sp(t)?we.createElement(ka,ov({viewBox:r},t,{key:"label-implicit"})):null:null},sCe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=cq(t),s=Zs(a,ka).map(function(c,u){return M.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return s;var o=iCe(t.label,r||i);return[o].concat(qTe(s))};ka.parseViewBox=cq;ka.renderCallByParent=sCe;function oCe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var lCe=oCe;const cCe=kr(lCe);function lv(e){"@babel/helpers - typeof";return lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lv(e)}var uCe=["valueAccessor"],dCe=["data","dataKey","clockWise","id","textBreakAll"];function fCe(e){return gCe(e)||mCe(e)||pCe(e)||hCe()}function hCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pCe(e,t){if(e){if(typeof e=="string")return c4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c4(e,t)}}function mCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gCe(e){if(Array.isArray(e))return c4(e)}function c4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Yb(){return Yb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yb.apply(this,arguments)}function jL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function AL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jL(Object(r),!0).forEach(function(n){vCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vCe(e,t,r){return t=xCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xCe(e){var t=yCe(e,"string");return lv(t)=="symbol"?t:t+""}function yCe(e,t){if(lv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(lv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EL(e,t){if(e==null)return{};var r=bCe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function bCe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var wCe=function(t){return Array.isArray(t.value)?cCe(t.value):t.value};function $u(e){var t=e.valueAccessor,r=t===void 0?wCe:t,n=EL(e,uCe),a=n.data,i=n.dataKey,s=n.clockWise,o=n.id,c=n.textBreakAll,u=EL(n,dCe);return!a||!a.length?null:we.createElement($r,{className:"recharts-label-list"},a.map(function(d,f){var p=lr(i)?r(d,f):fi(d&&d.payload,i),h=lr(o)?{}:{id:"".concat(o,"-").concat(f)};return we.createElement(ka,Yb({},$t(d,!0),u,h,{parentViewBox:d.parentViewBox,value:p,textBreakAll:c,viewBox:ka.parseViewBox(lr(s)?d:AL(AL({},d),{},{clockWise:s})),key:"label-".concat(f),index:f}))}))}$u.displayName="LabelList";function _Ce(e,t){return e?e===!0?we.createElement($u,{key:"labelList-implicit",data:t}):we.isValidElement(e)||Vt(e)?we.createElement($u,{key:"labelList-implicit",data:t,content:e}):Sp(e)?we.createElement($u,Yb({data:t},e,{key:"labelList-implicit"})):null:null}function SCe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=Zs(n,$u).map(function(s,o){return M.cloneElement(s,{data:t,key:"labelList-".concat(o)})});if(!r)return a;var i=_Ce(e.label,t);return[i].concat(fCe(a))}$u.renderCallByParent=SCe;function cv(e){"@babel/helpers - typeof";return cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cv(e)}function u4(){return u4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u4.apply(this,arguments)}function TL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function CL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TL(Object(r),!0).forEach(function(n){NCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NCe(e,t,r){return t=jCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jCe(e){var t=ACe(e,"string");return cv(t)=="symbol"?t:t+""}function ACe(e,t){if(cv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ECe=function(t,r){var n=ki(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},zx=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,s=t.sign,o=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(o?1:-1)+a,f=Math.asin(c/d)/Xb,p=u?i:i+s*f,h=on(r,n,d,p),v=on(r,n,a,p),m=u?i-s*f:i,x=on(r,n,d*Math.cos(f*Xb),m);return{center:h,circleTangency:v,lineTangency:x,theta:f}},uq=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,s=t.startAngle,o=t.endAngle,c=ECe(s,o),u=s+c,d=on(r,n,i,s),f=on(r,n,i,u),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(s>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var h=on(r,n,a,s),v=on(r,n,a,u);p+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(s<=u),`,
            `).concat(h.x,",").concat(h.y," Z")}else p+="L ".concat(r,",").concat(n," Z");return p},TCe=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,s=t.cornerRadius,o=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=ki(d-u),p=zx({cx:r,cy:n,radius:i,angle:u,sign:f,cornerRadius:s,cornerIsExternal:c}),h=p.circleTangency,v=p.lineTangency,m=p.theta,x=zx({cx:r,cy:n,radius:i,angle:d,sign:-f,cornerRadius:s,cornerIsExternal:c}),y=x.circleTangency,g=x.lineTangency,b=x.theta,S=c?Math.abs(u-d):Math.abs(u-d)-m-b;if(S<0)return o?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):uq({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var _="M ".concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(g.x,",").concat(g.y,`
  `);if(a>0){var j=zx({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),A=j.circleTangency,E=j.lineTangency,T=j.theta,L=zx({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),k=L.circleTangency,R=L.lineTangency,D=L.theta,q=c?Math.abs(u-d):Math.abs(u-d)-T-D;if(q<0&&s===0)return"".concat(_,"L").concat(r,",").concat(n,"Z");_+="L".concat(R.x,",").concat(R.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(q>180),",").concat(+(f>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(E.x,",").concat(E.y,"Z")}else _+="L".concat(r,",").concat(n,"Z");return _},CCe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},dq=function(t){var r=CL(CL({},CCe),t),n=r.cx,a=r.cy,i=r.innerRadius,s=r.outerRadius,o=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,p=r.className;if(s<i||d===f)return null;var h=sr("recharts-sector",p),v=s-i,m=Oi(o,v,0,!0),x;return m>0&&Math.abs(d-f)<360?x=TCe({cx:n,cy:a,innerRadius:i,outerRadius:s,cornerRadius:Math.min(m,v/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):x=uq({cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:d,endAngle:f}),we.createElement("path",u4({},$t(r,!0),{className:h,d:x,role:"img"}))};function uv(e){"@babel/helpers - typeof";return uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uv(e)}function d4(){return d4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d4.apply(this,arguments)}function kL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function OL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kL(Object(r),!0).forEach(function(n){kCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kCe(e,t,r){return t=OCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OCe(e){var t=PCe(e,"string");return uv(t)=="symbol"?t:t+""}function PCe(e,t){if(uv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(uv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PL={curveBasisClosed:kxe,curveBasisOpen:Oxe,curveBasis:Cxe,curveBumpX:mxe,curveBumpY:gxe,curveLinearClosed:Pxe,curveLinear:jw,curveMonotoneX:Lxe,curveMonotoneY:Rxe,curveNatural:Ixe,curveStep:Dxe,curveStepAfter:Fxe,curveStepBefore:Mxe},qx=function(t){return t.x===+t.x&&t.y===+t.y},Nm=function(t){return t.x},jm=function(t){return t.y},LCe=function(t,r){if(Vt(t))return t;var n="curve".concat(Sw(t));return(n==="curveMonotone"||n==="curveBump")&&r?PL["".concat(n).concat(r==="vertical"?"Y":"X")]:PL[n]||jw},RCe=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,s=t.baseLine,o=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=LCe(n,o),f=u?i.filter(function(m){return qx(m)}):i,p;if(Array.isArray(s)){var h=u?s.filter(function(m){return qx(m)}):s,v=f.map(function(m,x){return OL(OL({},m),{},{base:h[x]})});return o==="vertical"?p=Lx().y(jm).x1(Nm).x0(function(m){return m.base.x}):p=Lx().x(Nm).y1(jm).y0(function(m){return m.base.y}),p.defined(qx).curve(d),p(v)}return o==="vertical"&&et(s)?p=Lx().y(jm).x1(Nm).x0(s):et(s)?p=Lx().x(Nm).y1(jm).y0(s):p=iU().x(Nm).y(jm),p.defined(qx).curve(d),p(f)},f4=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var s=n&&n.length?RCe(t):a;return M.createElement("path",d4({},$t(t,!1),wb(t),{className:sr("recharts-curve",r),d:s,ref:i}))},fq={exports:{}},ICe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",DCe=ICe,MCe=DCe;function hq(){}function pq(){}pq.resetWarningCache=hq;var FCe=function(){function e(n,a,i,s,o,c){if(c!==MCe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:pq,resetWarningCache:hq};return r.PropTypes=r,r};fq.exports=FCe();var $Ce=fq.exports;const Tr=kr($Ce),{getOwnPropertyNames:BCe,getOwnPropertySymbols:UCe}=Object,{hasOwnProperty:zCe}=Object.prototype;function xS(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function Hx(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);const{cache:i}=a,s=i.get(r),o=i.get(n);if(s&&o)return s===n&&o===r;i.set(r,n),i.set(n,r);const c=e(r,n,a);return i.delete(r),i.delete(n),c}}function qCe(e){return e!=null?e[Symbol.toStringTag]:void 0}function LL(e){return BCe(e).concat(UCe(e))}const HCe=Object.hasOwn||((e,t)=>zCe.call(e,t));function Wf(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const WCe="__v",VCe="__o",GCe="_owner",{getOwnPropertyDescriptor:RL,keys:IL}=Object;function KCe(e,t){return e.byteLength===t.byteLength&&Jb(new Uint8Array(e),new Uint8Array(t))}function XCe(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function YCe(e,t){return e.byteLength===t.byteLength&&Jb(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function JCe(e,t){return Wf(e.getTime(),t.getTime())}function QCe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function ZCe(e,t){return e===t}function DL(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.entries();let s,o,c=0;for(;(s=i.next())&&!s.done;){const u=t.entries();let d=!1,f=0;for(;(o=u.next())&&!o.done;){if(a[f]){f++;continue}const p=s.value,h=o.value;if(r.equals(p[0],h[0],c,f,e,t,r)&&r.equals(p[1],h[1],p[0],h[0],e,t,r)){d=a[f]=!0;break}f++}if(!d)return!1;c++}return!0}const eke=Wf;function tke(e,t,r){const n=IL(e);let a=n.length;if(IL(t).length!==a)return!1;for(;a-- >0;)if(!mq(e,t,r,n[a]))return!1;return!0}function Am(e,t,r){const n=LL(e);let a=n.length;if(LL(t).length!==a)return!1;let i,s,o;for(;a-- >0;)if(i=n[a],!mq(e,t,r,i)||(s=RL(e,i),o=RL(t,i),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function rke(e,t){return Wf(e.valueOf(),t.valueOf())}function nke(e,t){return e.source===t.source&&e.flags===t.flags}function ML(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.values();let s,o;for(;(s=i.next())&&!s.done;){const c=t.values();let u=!1,d=0;for(;(o=c.next())&&!o.done;){if(!a[d]&&r.equals(s.value,o.value,s.value,o.value,e,t,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function Jb(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function ake(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function mq(e,t,r,n){return(n===GCe||n===VCe||n===WCe)&&(e.$$typeof||t.$$typeof)?!0:HCe(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const ike="[object ArrayBuffer]",ske="[object Arguments]",oke="[object Boolean]",lke="[object DataView]",cke="[object Date]",uke="[object Error]",dke="[object Map]",fke="[object Number]",hke="[object Object]",pke="[object RegExp]",mke="[object Set]",gke="[object String]",vke={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},xke="[object URL]",yke=Object.prototype.toString;function bke({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:s,areNumbersEqual:o,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:d,areSetsEqual:f,areTypedArraysEqual:p,areUrlsEqual:h,unknownTagComparators:v}){return function(x,y,g){if(x===y)return!0;if(x==null||y==null)return!1;const b=typeof x;if(b!==typeof y)return!1;if(b!=="object")return b==="number"?o(x,y,g):b==="function"?i(x,y,g):!1;const S=x.constructor;if(S!==y.constructor)return!1;if(S===Object)return c(x,y,g);if(Array.isArray(x))return t(x,y,g);if(S===Date)return n(x,y,g);if(S===RegExp)return d(x,y,g);if(S===Map)return s(x,y,g);if(S===Set)return f(x,y,g);const _=yke.call(x);if(_===cke)return n(x,y,g);if(_===pke)return d(x,y,g);if(_===dke)return s(x,y,g);if(_===mke)return f(x,y,g);if(_===hke)return typeof x.then!="function"&&typeof y.then!="function"&&c(x,y,g);if(_===xke)return h(x,y,g);if(_===uke)return a(x,y,g);if(_===ske)return c(x,y,g);if(vke[_])return p(x,y,g);if(_===ike)return e(x,y,g);if(_===lke)return r(x,y,g);if(_===oke||_===fke||_===gke)return u(x,y,g);if(v){let j=v[_];if(!j){const A=qCe(x);A&&(j=v[A])}if(j)return j(x,y,g)}return!1}}function wke({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:KCe,areArraysEqual:r?Am:XCe,areDataViewsEqual:YCe,areDatesEqual:JCe,areErrorsEqual:QCe,areFunctionsEqual:ZCe,areMapsEqual:r?xS(DL,Am):DL,areNumbersEqual:eke,areObjectsEqual:r?Am:tke,arePrimitiveWrappersEqual:rke,areRegExpsEqual:nke,areSetsEqual:r?xS(ML,Am):ML,areTypedArraysEqual:r?xS(Jb,Am):Jb,areUrlsEqual:ake,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const a=Hx(n.areArraysEqual),i=Hx(n.areMapsEqual),s=Hx(n.areObjectsEqual),o=Hx(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:o})}return n}function _ke(e){return function(t,r,n,a,i,s,o){return e(t,r,o)}}function Ske({circular:e,comparator:t,createState:r,equals:n,strict:a}){if(r)return function(o,c){const{cache:u=e?new WeakMap:void 0,meta:d}=r();return t(o,c,{cache:u,equals:n,meta:d,strict:a})};if(e)return function(o,c){return t(o,c,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(o,c){return t(o,c,i)}}const Nke=nd();nd({strict:!0});nd({circular:!0});nd({circular:!0,strict:!0});nd({createInternalComparator:()=>Wf});nd({strict:!0,createInternalComparator:()=>Wf});nd({circular:!0,createInternalComparator:()=>Wf});nd({circular:!0,createInternalComparator:()=>Wf,strict:!0});function nd(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:a=!1}=e,i=wke(e),s=bke(i),o=r?r(s):_ke(s);return Ske({circular:t,comparator:s,createState:n,equals:o,strict:a})}function jke(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function FL(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):jke(a)};requestAnimationFrame(n)}function h4(e){"@babel/helpers - typeof";return h4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h4(e)}function Ake(e){return kke(e)||Cke(e)||Tke(e)||Eke()}function Eke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tke(e,t){if(e){if(typeof e=="string")return $L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $L(e,t)}}function $L(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Cke(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kke(e){if(Array.isArray(e))return e}function Oke(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var s=i,o=Ake(s),c=o[0],u=o.slice(1);if(typeof c=="number"){FL(a.bind(null,u),c);return}a(c),FL(a.bind(null,u));return}h4(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function dv(e){"@babel/helpers - typeof";return dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dv(e)}function BL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function UL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BL(Object(r),!0).forEach(function(n){gq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gq(e,t,r){return t=Pke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pke(e){var t=Lke(e,"string");return dv(t)==="symbol"?t:String(t)}function Lke(e,t){if(dv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rke=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},Ike=function(t){return t},Dke=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},og=function(t,r){return Object.keys(r).reduce(function(n,a){return UL(UL({},n),{},gq({},a,t(a,r[a])))},{})},zL=function(t,r,n){return t.map(function(a){return"".concat(Dke(a)," ").concat(r,"ms ").concat(n)}).join(",")};function Mke(e,t){return Bke(e)||$ke(e,t)||vq(e,t)||Fke()}function Fke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $ke(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function Bke(e){if(Array.isArray(e))return e}function Uke(e){return Hke(e)||qke(e)||vq(e)||zke()}function zke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vq(e,t){if(e){if(typeof e=="string")return p4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p4(e,t)}}function qke(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Hke(e){if(Array.isArray(e))return p4(e)}function p4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Qb=1e-4,xq=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},yq=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},qL=function(t,r){return function(n){var a=xq(t,r);return yq(a,n)}},Wke=function(t,r){return function(n){var a=xq(t,r),i=[].concat(Uke(a.map(function(s,o){return s*o}).slice(1)),[0]);return yq(i,n)}},HL=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],s=r[2],o=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,s=1,o=1;break;case"ease":a=.25,i=.1,s=.25,o=1;break;case"ease-in":a=.42,i=0,s=1,o=1;break;case"ease-out":a=.42,i=0,s=.58,o=1;break;case"ease-in-out":a=0,i=0,s=.58,o=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),d=Mke(u,4);a=d[0],i=d[1],s=d[2],o=d[3]}}}var f=qL(a,s),p=qL(i,o),h=Wke(a,s),v=function(y){return y>1?1:y<0?0:y},m=function(y){for(var g=y>1?1:y,b=g,S=0;S<8;++S){var _=f(b)-g,j=h(b);if(Math.abs(_-g)<Qb||j<Qb)return p(b);b=v(b-_/j)}return p(b)};return m.isStepper=!1,m},Vke=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,s=t.dt,o=s===void 0?17:s,c=function(d,f,p){var h=-(d-f)*n,v=p*i,m=p+(h-v)*o/1e3,x=p*o/1e3+d;return Math.abs(x-f)<Qb&&Math.abs(m)<Qb?[f,0]:[x,m]};return c.isStepper=!0,c.dt=o,c},Gke=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return HL(a);case"spring":return Vke();default:if(a.split("(")[0]==="cubic-bezier")return HL(a)}return typeof a=="function"?a:null};function fv(e){"@babel/helpers - typeof";return fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fv(e)}function WL(e){return Yke(e)||Xke(e)||bq(e)||Kke()}function Kke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xke(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Yke(e){if(Array.isArray(e))return g4(e)}function VL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Va(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VL(Object(r),!0).forEach(function(n){m4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function m4(e,t,r){return t=Jke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jke(e){var t=Qke(e,"string");return fv(t)==="symbol"?t:String(t)}function Qke(e,t){if(fv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zke(e,t){return rOe(e)||tOe(e,t)||bq(e,t)||eOe()}function eOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bq(e,t){if(e){if(typeof e=="string")return g4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g4(e,t)}}function g4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tOe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function rOe(e){if(Array.isArray(e))return e}var Zb=function(t,r,n){return t+(r-t)*n},v4=function(t){var r=t.from,n=t.to;return r!==n},nOe=function e(t,r,n){var a=og(function(i,s){if(v4(s)){var o=t(s.from,s.to,s.velocity),c=Zke(o,2),u=c[0],d=c[1];return Va(Va({},s),{},{from:u,velocity:d})}return s},r);return n<1?og(function(i,s){return v4(s)?Va(Va({},s),{},{velocity:Zb(s.velocity,a[i].velocity,n),from:Zb(s.from,a[i].from,n)}):s},r):e(t,a,n-1)};const aOe=function(e,t,r,n,a){var i=Rke(e,t),s=i.reduce(function(x,y){return Va(Va({},x),{},m4({},y,[e[y],t[y]]))},{}),o=i.reduce(function(x,y){return Va(Va({},x),{},m4({},y,{from:e[y],velocity:0,to:t[y]}))},{}),c=-1,u,d,f=function(){return null},p=function(){return og(function(y,g){return g.from},o)},h=function(){return!Object.values(o).filter(v4).length},v=function(y){u||(u=y);var g=y-u,b=g/r.dt;o=nOe(r,o,b),a(Va(Va(Va({},e),t),p())),u=y,h()||(c=requestAnimationFrame(f))},m=function(y){d||(d=y);var g=(y-d)/n,b=og(function(_,j){return Zb.apply(void 0,WL(j).concat([r(g)]))},s);if(a(Va(Va(Va({},e),t),b)),g<1)c=requestAnimationFrame(f);else{var S=og(function(_,j){return Zb.apply(void 0,WL(j).concat([r(1)]))},s);a(Va(Va(Va({},e),t),S))}};return f=r.isStepper?v:m,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function V0(e){"@babel/helpers - typeof";return V0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V0(e)}var iOe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function sOe(e,t){if(e==null)return{};var r=oOe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function oOe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function yS(e){return dOe(e)||uOe(e)||cOe(e)||lOe()}function lOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cOe(e,t){if(e){if(typeof e=="string")return x4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x4(e,t)}}function uOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dOe(e){if(Array.isArray(e))return x4(e)}function x4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function GL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GL(Object(r),!0).forEach(function(n){$m(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $m(e,t,r){return t=wq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hOe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wq(n.key),n)}}function pOe(e,t,r){return t&&hOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wq(e){var t=mOe(e,"string");return V0(t)==="symbol"?t:String(t)}function mOe(e,t){if(V0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(V0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y4(e,t)}function y4(e,t){return y4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},y4(e,t)}function vOe(e){var t=xOe();return function(){var n=e2(e),a;if(t){var i=e2(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return b4(this,a)}}function b4(e,t){if(t&&(V0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w4(e)}function w4(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xOe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function e2(e){return e2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},e2(e)}var Sc=function(e){gOe(r,e);var t=vOe(r);function r(n,a){var i;fOe(this,r),i=t.call(this,n,a);var s=i.props,o=s.isActive,c=s.attributeName,u=s.from,d=s.to,f=s.steps,p=s.children,h=s.duration;if(i.handleStyleChange=i.handleStyleChange.bind(w4(i)),i.changeStyle=i.changeStyle.bind(w4(i)),!o||h<=0)return i.state={style:{}},typeof p=="function"&&(i.state={style:d}),b4(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof p=="function")return i.state={style:u},b4(i);i.state={style:c?$m({},c,u):u}}else i.state={style:{}};return i}return pOe(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,s=a.canBegin;this.mounted=!0,!(!i||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,s=i.isActive,o=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,p=this.state.style;if(o){if(!s){var h={style:c?$m({},c,d):d};this.state&&p&&(c&&p[c]!==d||!c&&p!==d)&&this.setState(h);return}if(!(Nke(a.to,d)&&a.canBegin&&a.isActive)){var v=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=v||u?f:a.to;if(this.state&&p){var x={style:c?$m({},c,m):m};(c&&p[c]!==m||!c&&p!==m)&&this.setState(x)}this.runAnimation(wo(wo({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,s=a.from,o=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,p=a.onAnimationStart,h=aOe(s,o,Gke(u),c,this.changeStyle),v=function(){i.stopJSAnimation=h()};this.manager.start([p,d,v,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,s=a.steps,o=a.begin,c=a.onAnimationStart,u=s[0],d=u.style,f=u.duration,p=f===void 0?0:f,h=function(m,x,y){if(y===0)return m;var g=x.duration,b=x.easing,S=b===void 0?"ease":b,_=x.style,j=x.properties,A=x.onAnimationEnd,E=y>0?s[y-1]:x,T=j||Object.keys(_);if(typeof S=="function"||S==="spring")return[].concat(yS(m),[i.runJSAnimation.bind(i,{from:E.style,to:_,duration:g,easing:S}),g]);var L=zL(T,g,S),k=wo(wo(wo({},E.style),_),{},{transition:L});return[].concat(yS(m),[k,g,A]).filter(Ike)};return this.manager.start([c].concat(yS(s.reduce(h,[d,Math.max(p,o)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=Oke());var i=a.begin,s=a.duration,o=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,p=a.steps,h=a.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof h=="function"||u==="spring"){this.runJSAnimation(a);return}if(p.length>1){this.runStepAnimation(a);return}var m=o?$m({},o,c):c,x=zL(Object.keys(m),s,u);v.start([d,i,wo(wo({},m),{},{transition:x}),s,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var s=a.duration;a.attributeName,a.easing;var o=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=sOe(a,iOe),u=M.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!o||u===0||s<=0)return i;var f=function(h){var v=h.props,m=v.style,x=m===void 0?{}:m,y=v.className,g=M.cloneElement(h,wo(wo({},c),{},{style:wo(wo({},x),d),className:y}));return g};return u===1?f(M.Children.only(i)):we.createElement("div",null,M.Children.map(i,function(p){return f(p)}))}}]),r}(M.PureComponent);Sc.displayName="Animate";Sc.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Sc.propTypes={from:Tr.oneOfType([Tr.object,Tr.string]),to:Tr.oneOfType([Tr.object,Tr.string]),attributeName:Tr.string,duration:Tr.number,begin:Tr.number,easing:Tr.oneOfType([Tr.string,Tr.func]),steps:Tr.arrayOf(Tr.shape({duration:Tr.number.isRequired,style:Tr.object.isRequired,easing:Tr.oneOfType([Tr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Tr.func]),properties:Tr.arrayOf("string"),onAnimationEnd:Tr.func})),children:Tr.oneOfType([Tr.node,Tr.func]),isActive:Tr.bool,canBegin:Tr.bool,onAnimationEnd:Tr.func,shouldReAnimate:Tr.bool,onAnimationStart:Tr.func,onAnimationReStart:Tr.func};function hv(e){"@babel/helpers - typeof";return hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hv(e)}function t2(){return t2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t2.apply(this,arguments)}function yOe(e,t){return SOe(e)||_Oe(e,t)||wOe(e,t)||bOe()}function bOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wOe(e,t){if(e){if(typeof e=="string")return KL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KL(e,t)}}function KL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _Oe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function SOe(e){if(Array.isArray(e))return e}function XL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function YL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XL(Object(r),!0).forEach(function(n){NOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NOe(e,t,r){return t=jOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jOe(e){var t=AOe(e,"string");return hv(t)=="symbol"?t:t+""}function AOe(e,t){if(hv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JL=function(t,r,n,a,i){var s=Math.min(Math.abs(n)/2,Math.abs(a)/2),o=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(s>0&&i instanceof Array){for(var f=[0,0,0,0],p=0,h=4;p<h;p++)f[p]=i[p]>s?s:i[p];d="M".concat(t,",").concat(r+o*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+o*f[1])),d+="L ".concat(t+n,",").concat(r+a-o*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-c*f[2],",").concat(r+a)),d+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-o*f[3])),d+="Z"}else if(s>0&&i===+i&&i>0){var v=Math.min(s,i);d="M ".concat(t,",").concat(r+o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+c*v,",").concat(r,`
            L `).concat(t+n-c*v,",").concat(r,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+n,",").concat(r+o*v,`
            L `).concat(t+n,",").concat(r+a-o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+n-c*v,",").concat(r+a,`
            L `).concat(t+c*v,",").concat(r+a,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t,",").concat(r+a-o*v," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},EOe=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,s=r.y,o=r.width,c=r.height;if(Math.abs(o)>0&&Math.abs(c)>0){var u=Math.min(i,i+o),d=Math.max(i,i+o),f=Math.min(s,s+c),p=Math.max(s,s+c);return n>=u&&n<=d&&a>=f&&a<=p}return!1},TOe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},BE=function(t){var r=YL(YL({},TOe),t),n=M.useRef(),a=M.useState(-1),i=yOe(a,2),s=i[0],o=i[1];M.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&o(S)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,p=r.radius,h=r.className,v=r.animationEasing,m=r.animationDuration,x=r.animationBegin,y=r.isAnimationActive,g=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var b=sr("recharts-rectangle",h);return g?we.createElement(Sc,{canBegin:s>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:m,animationEasing:v,isActive:g},function(S){var _=S.width,j=S.height,A=S.x,E=S.y;return we.createElement(Sc,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:m,isActive:y,easing:v},we.createElement("path",t2({},$t(r,!0),{className:b,d:JL(A,E,_,j,p),ref:n})))}):we.createElement("path",t2({},$t(r,!0),{className:b,d:JL(c,u,d,f,p)}))},COe=["points","className","baseLinePoints","connectNulls"];function Mh(){return Mh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mh.apply(this,arguments)}function kOe(e,t){if(e==null)return{};var r=OOe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function OOe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function QL(e){return IOe(e)||ROe(e)||LOe(e)||POe()}function POe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LOe(e,t){if(e){if(typeof e=="string")return _4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _4(e,t)}}function ROe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function IOe(e){if(Array.isArray(e))return _4(e)}function _4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ZL=function(t){return t&&t.x===+t.x&&t.y===+t.y},DOe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){ZL(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),ZL(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},lg=function(t,r){var n=DOe(t);r&&(n=[n.reduce(function(i,s){return[].concat(QL(i),QL(s))},[])]);var a=n.map(function(i){return i.reduce(function(s,o,c){return"".concat(s).concat(c===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},MOe=function(t,r,n){var a=lg(t,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(lg(r.reverse(),n).slice(1))},FOe=function(t){var r=t.points,n=t.className,a=t.baseLinePoints,i=t.connectNulls,s=kOe(t,COe);if(!r||!r.length)return null;var o=sr("recharts-polygon",n);if(a&&a.length){var c=s.stroke&&s.stroke!=="none",u=MOe(r,a,i);return we.createElement("g",{className:o},we.createElement("path",Mh({},$t(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),c?we.createElement("path",Mh({},$t(s,!0),{fill:"none",d:lg(r,i)})):null,c?we.createElement("path",Mh({},$t(s,!0),{fill:"none",d:lg(a,i)})):null)}var d=lg(r,i);return we.createElement("path",Mh({},$t(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",className:o,d}))};function S4(){return S4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S4.apply(this,arguments)}var UE=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,s=sr("recharts-dot",i);return r===+r&&n===+n&&a===+a?M.createElement("circle",S4({},$t(t,!1),wb(t),{className:s,cx:r,cy:n,r:a})):null};function pv(e){"@babel/helpers - typeof";return pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pv(e)}var $Oe=["x","y","top","left","width","height","className"];function N4(){return N4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N4.apply(this,arguments)}function eR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function BOe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eR(Object(r),!0).forEach(function(n){UOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UOe(e,t,r){return t=zOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zOe(e){var t=qOe(e,"string");return pv(t)=="symbol"?t:t+""}function qOe(e,t){if(pv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HOe(e,t){if(e==null)return{};var r=WOe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function WOe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var VOe=function(t,r,n,a,i,s){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(s,",").concat(r,"h").concat(n)},GOe=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,s=t.top,o=s===void 0?0:s,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,p=t.height,h=p===void 0?0:p,v=t.className,m=HOe(t,$Oe),x=BOe({x:n,y:i,top:o,left:u,width:f,height:h},m);return!et(n)||!et(i)||!et(f)||!et(h)||!et(o)||!et(u)?null:we.createElement("path",N4({},$t(x,!0),{className:sr("recharts-cross",v),d:VOe(n,i,f,h,o,u)}))},KOe=Dw,XOe=Lz,YOe=_l;function JOe(e,t){return e&&e.length?KOe(e,YOe(t),XOe):void 0}var QOe=JOe;const ZOe=kr(QOe);var e6e=Dw,t6e=_l,r6e=Rz;function n6e(e,t){return e&&e.length?e6e(e,t6e(t),r6e):void 0}var a6e=n6e;const i6e=kr(a6e);var s6e=["cx","cy","angle","ticks","axisLine"],o6e=["ticks","tick","angle","tickFormatter","stroke"];function G0(e){"@babel/helpers - typeof";return G0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G0(e)}function cg(){return cg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cg.apply(this,arguments)}function tR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _d(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tR(Object(r),!0).forEach(function(n){qw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rR(e,t){if(e==null)return{};var r=l6e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function l6e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function c6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Sq(n.key),n)}}function u6e(e,t,r){return t&&nR(e.prototype,t),r&&nR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d6e(e,t,r){return t=r2(t),f6e(e,_q()?Reflect.construct(t,r||[],r2(e).constructor):t.apply(e,r))}function f6e(e,t){if(t&&(G0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h6e(e)}function h6e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_q=function(){return!!e})()}function r2(e){return r2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},r2(e)}function p6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j4(e,t)}function j4(e,t){return j4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},j4(e,t)}function qw(e,t,r){return t=Sq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sq(e){var t=m6e(e,"string");return G0(t)=="symbol"?t:t+""}function m6e(e,t){if(G0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(G0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Hw=function(e){function t(){return c6e(this,t),d6e(this,t,arguments)}return p6e(t,e),u6e(t,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,s=i.angle,o=i.cx,c=i.cy;return on(o,c,a,s)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.angle,o=n.ticks,c=ZOe(o,function(d){return d.coordinate||0}),u=i6e(o,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.angle,o=n.ticks,c=n.axisLine,u=rR(n,s6e),d=o.reduce(function(v,m){return[Math.min(v[0],m.coordinate),Math.max(v[1],m.coordinate)]},[1/0,-1/0]),f=on(a,i,d[0],s),p=on(a,i,d[1],s),h=_d(_d(_d({},$t(u,!1)),{},{fill:"none"},$t(c,!1)),{},{x1:f.x,y1:f.y,x2:p.x,y2:p.y});return we.createElement("line",cg({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,s=a.tick,o=a.angle,c=a.tickFormatter,u=a.stroke,d=rR(a,o6e),f=this.getTickTextAnchor(),p=$t(d,!1),h=$t(s,!1),v=i.map(function(m,x){var y=n.getTickValueCoord(m),g=_d(_d(_d(_d({textAnchor:f,transform:"rotate(".concat(90-o,", ").concat(y.x,", ").concat(y.y,")")},p),{},{stroke:"none",fill:u},h),{},{index:x},y),{},{payload:m});return we.createElement($r,cg({className:sr("recharts-polar-radius-axis-tick",lq(s)),key:"tick-".concat(m.coordinate)},Nf(n.props,m,x)),t.renderTickItem(s,g,c?c(m.value,x):m.value))});return we.createElement($r,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,s=n.tick;return!a||!a.length?null:we.createElement($r,{className:sr("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),s&&this.renderTicks(),ka.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var s;return we.isValidElement(n)?s=we.cloneElement(n,a):Vt(n)?s=n(a):s=we.createElement(jf,cg({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),s}}])}(M.PureComponent);qw(Hw,"displayName","PolarRadiusAxis");qw(Hw,"axisType","radiusAxis");qw(Hw,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function K0(e){"@babel/helpers - typeof";return K0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K0(e)}function Md(){return Md=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Md.apply(this,arguments)}function aR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Sd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aR(Object(r),!0).forEach(function(n){Ww(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jq(n.key),n)}}function v6e(e,t,r){return t&&iR(e.prototype,t),r&&iR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function x6e(e,t,r){return t=n2(t),y6e(e,Nq()?Reflect.construct(t,r||[],n2(e).constructor):t.apply(e,r))}function y6e(e,t){if(t&&(K0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b6e(e)}function b6e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nq=function(){return!!e})()}function n2(e){return n2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},n2(e)}function w6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A4(e,t)}function A4(e,t){return A4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},A4(e,t)}function Ww(e,t,r){return t=jq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jq(e){var t=_6e(e,"string");return K0(t)=="symbol"?t:t+""}function _6e(e,t){if(K0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(K0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var S6e=Math.PI/180,sR=1e-5,Vw=function(e){function t(){return g6e(this,t),x6e(this,t,arguments)}return w6e(t,e),v6e(t,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,s=a.cy,o=a.radius,c=a.orientation,u=a.tickSize,d=u||8,f=on(i,s,o,n.coordinate),p=on(i,s,o+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:p.x,y2:p.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*S6e),s;return i>sR?s=a==="outer"?"start":"end":i<-sR?s=a==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.radius,o=n.axisLine,c=n.axisLineType,u=Sd(Sd({},$t(this.props,!1)),{},{fill:"none"},$t(o,!1));if(c==="circle")return we.createElement(UE,Md({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:s}));var d=this.props.ticks,f=d.map(function(p){return on(a,i,s,p.coordinate)});return we.createElement(FOe,Md({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,s=a.tick,o=a.tickLine,c=a.tickFormatter,u=a.stroke,d=$t(this.props,!1),f=$t(s,!1),p=Sd(Sd({},d),{},{fill:"none"},$t(o,!1)),h=i.map(function(v,m){var x=n.getTickLineCoord(v),y=n.getTickTextAnchor(v),g=Sd(Sd(Sd({textAnchor:y},d),{},{stroke:"none",fill:u},f),{},{index:m,payload:v,x:x.x2,y:x.y2});return we.createElement($r,Md({className:sr("recharts-polar-angle-axis-tick",lq(s)),key:"tick-".concat(v.coordinate)},Nf(n.props,v,m)),o&&we.createElement("line",Md({className:"recharts-polar-angle-axis-tick-line"},p,x)),s&&t.renderTickItem(s,g,c?c(v.value,m):v.value))});return we.createElement($r,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,s=n.axisLine;return i<=0||!a||!a.length?null:we.createElement($r,{className:sr("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var s;return we.isValidElement(n)?s=we.cloneElement(n,a):Vt(n)?s=n(a):s=we.createElement(jf,Md({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),s}}])}(M.PureComponent);Ww(Vw,"displayName","PolarAngleAxis");Ww(Vw,"axisType","angleAxis");Ww(Vw,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var N6e=CU,j6e=N6e(Object.getPrototypeOf,Object),A6e=j6e,E6e=Pc,T6e=A6e,C6e=Lc,k6e="[object Object]",O6e=Function.prototype,P6e=Object.prototype,Aq=O6e.toString,L6e=P6e.hasOwnProperty,R6e=Aq.call(Object);function I6e(e){if(!C6e(e)||E6e(e)!=k6e)return!1;var t=T6e(e);if(t===null)return!0;var r=L6e.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Aq.call(r)==R6e}var D6e=I6e;const M6e=kr(D6e);var F6e=Pc,$6e=Lc,B6e="[object Boolean]";function U6e(e){return e===!0||e===!1||$6e(e)&&F6e(e)==B6e}var z6e=U6e;const q6e=kr(z6e);function mv(e){"@babel/helpers - typeof";return mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mv(e)}function a2(){return a2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a2.apply(this,arguments)}function H6e(e,t){return K6e(e)||G6e(e,t)||V6e(e,t)||W6e()}function W6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V6e(e,t){if(e){if(typeof e=="string")return oR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oR(e,t)}}function oR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function G6e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function K6e(e){if(Array.isArray(e))return e}function lR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lR(Object(r),!0).forEach(function(n){X6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X6e(e,t,r){return t=Y6e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y6e(e){var t=J6e(e,"string");return mv(t)=="symbol"?t:t+""}function J6e(e,t){if(mv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(mv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uR=function(t,r,n,a,i){var s=n-a,o;return o="M ".concat(t,",").concat(r),o+="L ".concat(t+n,",").concat(r),o+="L ".concat(t+n-s/2,",").concat(r+i),o+="L ".concat(t+n-s/2-a,",").concat(r+i),o+="L ".concat(t,",").concat(r," Z"),o},Q6e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Z6e=function(t){var r=cR(cR({},Q6e),t),n=M.useRef(),a=M.useState(-1),i=H6e(a,2),s=i[0],o=i[1];M.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var b=n.current.getTotalLength();b&&o(b)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,p=r.height,h=r.className,v=r.animationEasing,m=r.animationDuration,x=r.animationBegin,y=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||p!==+p||d===0&&f===0||p===0)return null;var g=sr("recharts-trapezoid",h);return y?we.createElement(Sc,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:p,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:p,x:c,y:u},duration:m,animationEasing:v,isActive:y},function(b){var S=b.upperWidth,_=b.lowerWidth,j=b.height,A=b.x,E=b.y;return we.createElement(Sc,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:m,easing:v},we.createElement("path",a2({},$t(r,!0),{className:g,d:uR(A,E,S,_,j),ref:n})))}):we.createElement("g",null,we.createElement("path",a2({},$t(r,!0),{className:g,d:uR(c,u,d,f,p)})))},ePe=["option","shapeType","propTransformer","activeClassName","isActive"];function gv(e){"@babel/helpers - typeof";return gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gv(e)}function tPe(e,t){if(e==null)return{};var r=rPe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rPe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function dR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function i2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dR(Object(r),!0).forEach(function(n){nPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nPe(e,t,r){return t=aPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aPe(e){var t=iPe(e,"string");return gv(t)=="symbol"?t:t+""}function iPe(e,t){if(gv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sPe(e,t){return i2(i2({},t),e)}function oPe(e,t){return e==="symbols"}function fR(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return we.createElement(BE,r);case"trapezoid":return we.createElement(Z6e,r);case"sector":return we.createElement(dq,r);case"symbols":if(oPe(t))return we.createElement(iE,r);break;default:return null}}function lPe(e){return M.isValidElement(e)?e.props:e}function Eq(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?sPe:n,i=e.activeClassName,s=i===void 0?"recharts-active-shape":i,o=e.isActive,c=tPe(e,ePe),u;if(M.isValidElement(t))u=M.cloneElement(t,i2(i2({},c),lPe(t)));else if(Vt(t))u=t(c);else if(M6e(t)&&!q6e(t)){var d=a(t,c);u=we.createElement(fR,{shapeType:r,elementProps:d})}else{var f=c;u=we.createElement(fR,{shapeType:r,elementProps:f})}return o?we.createElement($r,{className:s},u):u}function Gw(e,t){return t!=null&&"trapezoids"in e.props}function Kw(e,t){return t!=null&&"sectors"in e.props}function vv(e,t){return t!=null&&"points"in e.props}function cPe(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function uPe(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function dPe(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function fPe(e,t){var r;return Gw(e,t)?r=cPe:Kw(e,t)?r=uPe:vv(e,t)&&(r=dPe),r}function hPe(e,t){var r;return Gw(e,t)?r="trapezoids":Kw(e,t)?r="sectors":vv(e,t)&&(r="points"),r}function pPe(e,t){if(Gw(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Kw(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return vv(e,t)?t.payload:{}}function mPe(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=hPe(r,t),i=pPe(r,t),s=n.filter(function(c,u){var d=$w(i,c),f=r.props[a].filter(function(v){var m=fPe(r,t);return m(v,t)}),p=r.props[a].indexOf(f[f.length-1]),h=u===p;return d&&h}),o=n.indexOf(s[s.length-1]);return o}var my;function X0(e){"@babel/helpers - typeof";return X0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X0(e)}function Fh(){return Fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fh.apply(this,arguments)}function hR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hR(Object(r),!0).forEach(function(n){Xs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Cq(n.key),n)}}function vPe(e,t,r){return t&&pR(e.prototype,t),r&&pR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function xPe(e,t,r){return t=s2(t),yPe(e,Tq()?Reflect.construct(t,r||[],s2(e).constructor):t.apply(e,r))}function yPe(e,t){if(t&&(X0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bPe(e)}function bPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tq=function(){return!!e})()}function s2(e){return s2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},s2(e)}function wPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E4(e,t)}function E4(e,t){return E4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},E4(e,t)}function Xs(e,t,r){return t=Cq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cq(e){var t=_Pe(e,"string");return X0(t)=="symbol"?t:t+""}function _Pe(e,t){if(X0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(X0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ho=function(e){function t(r){var n;return gPe(this,t),n=xPe(this,t,[r]),Xs(n,"pieRef",null),Xs(n,"sectorRefs",[]),Xs(n,"id",Zv("recharts-pie-")),Xs(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Vt(a)&&a()}),Xs(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Vt(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return wPe(t,e),vPe(t,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.label,o=i.labelLine,c=i.dataKey,u=i.valueKey,d=$t(this.props,!1),f=$t(s,!1),p=$t(o,!1),h=s&&s.offsetRadius||20,v=n.map(function(m,x){var y=(m.startAngle+m.endAngle)/2,g=on(m.cx,m.cy,m.outerRadius+h,y),b=rn(rn(rn(rn({},d),m),{},{stroke:"none"},f),{},{index:x,textAnchor:t.getTextAnchor(g.x,m.cx)},g),S=rn(rn(rn(rn({},d),m),{},{fill:"none",stroke:m.fill},p),{},{index:x,points:[on(m.cx,m.cy,m.outerRadius,y),g]}),_=c;return lr(c)&&lr(u)?_="value":lr(c)&&(_=u),we.createElement($r,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(x)},o&&t.renderLabelLineItem(o,S,"line"),t.renderLabelItem(s,b,fi(m,_)))});return we.createElement($r,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,s=i.activeShape,o=i.blendStroke,c=i.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=a.isActiveIndex(d),p=c&&a.hasActiveIndex()?c:null,h=f?s:p,v=rn(rn({},u),{},{stroke:o?u.fill:u.stroke,tabIndex:-1});return we.createElement($r,Fh({ref:function(x){x&&!a.sectorRefs.includes(x)&&a.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},Nf(a.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),we.createElement(Eq,Fh({option:h,isActive:f,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,s=a.isAnimationActive,o=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state,p=f.prevSectors,h=f.prevIsAnimationActive;return we.createElement(Sc,{begin:o,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var m=v.t,x=[],y=i&&i[0],g=y.startAngle;return i.forEach(function(b,S){var _=p&&p[S],j=S>0?Ts(b,"paddingAngle",0):0;if(_){var A=iu(_.endAngle-_.startAngle,b.endAngle-b.startAngle),E=rn(rn({},b),{},{startAngle:g+j,endAngle:g+A(m)+j});x.push(E),g=E.endAngle}else{var T=b.endAngle,L=b.startAngle,k=iu(0,T-L),R=k(m),D=rn(rn({},b),{},{startAngle:g+j,endAngle:g+R+j});x.push(D),g=D.endAngle}}),we.createElement($r,null,n.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var s=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[s].focus(),a.setState({sectorToFocus:s});break}case"ArrowRight":{var o=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,s=this.state.prevSectors;return i&&a&&a.length&&(!s||!$w(s,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,s=a.sectors,o=a.className,c=a.label,u=a.cx,d=a.cy,f=a.innerRadius,p=a.outerRadius,h=a.isAnimationActive,v=this.state.isAnimationFinished;if(i||!s||!s.length||!et(u)||!et(d)||!et(f)||!et(p))return null;var m=sr("recharts-pie",o);return we.createElement($r,{tabIndex:this.props.rootTabIndex,className:m,ref:function(y){n.pieRef=y}},this.renderSectors(),c&&this.renderLabels(s),ka.renderCallByParent(this.props,null,!1),(!h||v)&&$u.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(we.isValidElement(n))return we.cloneElement(n,a);if(Vt(n))return n(a);var s=sr("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return we.createElement(f4,Fh({},a,{key:i,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(n,a,i){if(we.isValidElement(n))return we.cloneElement(n,a);var s=i;if(Vt(n)&&(s=n(a),we.isValidElement(s)))return s;var o=sr("recharts-pie-label-text",typeof n!="boolean"&&!Vt(n)?n.className:"");return we.createElement(jf,Fh({},a,{alignmentBaseline:"middle",className:o}),s)}}])}(M.PureComponent);my=Ho;Xs(Ho,"displayName","Pie");Xs(Ho,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!kp.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Xs(Ho,"parseDeltaAngle",function(e,t){var r=ki(t-e),n=Math.min(Math.abs(t-e),360);return r*n});Xs(Ho,"getRealPieData",function(e){var t=e.data,r=e.children,n=$t(e,!1),a=Zs(r,Rc);return t&&t.length?t.map(function(i,s){return rn(rn(rn({payload:i},n),i),a&&a[s]&&a[s].props)}):a&&a.length?a.map(function(i){return rn(rn({},n),i.props)}):[]});Xs(Ho,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,i=t.height,s=oq(a,i),o=n+Oi(e.cx,a,a/2),c=r+Oi(e.cy,i,i/2),u=Oi(e.innerRadius,s,0),d=Oi(e.outerRadius,s,s*.8),f=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:o,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});Xs(Ho,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?rn(rn({},t.type.defaultProps),t.props):t.props,a=my.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,s=n.startAngle,o=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,p=n.tooltipType,h=Math.abs(n.minAngle),v=my.parseCoordinateOfPie(n,r),m=my.parseDeltaAngle(s,o),x=Math.abs(m),y=u;lr(u)&&lr(f)?(Fo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y="value"):lr(u)&&(Fo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y=f);var g=a.filter(function(E){return fi(E,y,0)!==0}).length,b=(x>=360?g:g-1)*c,S=x-g*h-b,_=a.reduce(function(E,T){var L=fi(T,y,0);return E+(et(L)?L:0)},0),j;if(_>0){var A;j=a.map(function(E,T){var L=fi(E,y,0),k=fi(E,d,T),R=(et(L)?L:0)/_,D;T?D=A.endAngle+ki(m)*c*(L!==0?1:0):D=s;var q=D+ki(m)*((L!==0?h:0)+R*S),X=(D+q)/2,se=(v.innerRadius+v.outerRadius)/2,Z=[{name:k,value:L,payload:E,dataKey:y,type:p}],K=on(v.cx,v.cy,se,X);return A=rn(rn(rn({percent:R,cornerRadius:i,name:k,tooltipPayload:Z,midAngle:X,middleRadius:se,tooltipPosition:K},E),v),{},{value:fi(E,y),startAngle:D,endAngle:q,payload:E,paddingAngle:ki(m)*c}),A})}return rn(rn({},v),{},{sectors:j,data:a})});var SPe=Math.ceil,NPe=Math.max;function jPe(e,t,r,n){for(var a=-1,i=NPe(SPe((t-e)/(r||1)),0),s=Array(i);i--;)s[n?i:++a]=e,e+=r;return s}var APe=jPe,EPe=KU,mR=1/0,TPe=17976931348623157e292;function CPe(e){if(!e)return e===0?e:0;if(e=EPe(e),e===mR||e===-mR){var t=e<0?-1:1;return t*TPe}return e===e?e:0}var kq=CPe,kPe=APe,OPe=Cw,bS=kq;function PPe(e){return function(t,r,n){return n&&typeof n!="number"&&OPe(t,r,n)&&(r=n=void 0),t=bS(t),r===void 0?(r=t,t=0):r=bS(r),n=n===void 0?t<r?1:-1:bS(n),kPe(t,r,n,e)}}var LPe=PPe,RPe=LPe,IPe=RPe(),DPe=IPe;const o2=kr(DPe);function xv(e){"@babel/helpers - typeof";return xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xv(e)}function gR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gR(Object(r),!0).forEach(function(n){Oq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Oq(e,t,r){return t=MPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MPe(e){var t=FPe(e,"string");return xv(t)=="symbol"?t:t+""}function FPe(e,t){if(xv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $Pe=["Webkit","Moz","O","ms"],BPe=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=$Pe.reduce(function(i,s){return vR(vR({},i),{},Oq({},s+n,r))},{});return a[t]=r,a};function Y0(e){"@babel/helpers - typeof";return Y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y0(e)}function l2(){return l2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l2.apply(this,arguments)}function xR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xR(Object(r),!0).forEach(function(n){ms(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Lq(n.key),n)}}function zPe(e,t,r){return t&&yR(e.prototype,t),r&&yR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function qPe(e,t,r){return t=c2(t),HPe(e,Pq()?Reflect.construct(t,r||[],c2(e).constructor):t.apply(e,r))}function HPe(e,t){if(t&&(Y0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WPe(e)}function WPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pq=function(){return!!e})()}function c2(e){return c2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},c2(e)}function VPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T4(e,t)}function T4(e,t){return T4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},T4(e,t)}function ms(e,t,r){return t=Lq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lq(e){var t=GPe(e,"string");return Y0(t)=="symbol"?t:t+""}function GPe(e,t){if(Y0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Y0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var KPe=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,s=t.width,o=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=ig().domain(o2(0,c)).range([i,i+s-o]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},bR=function(t){return t.changedTouches&&!!t.changedTouches.length},J0=function(e){function t(r){var n;return UPe(this,t),n=qPe(this,t,[r]),ms(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),ms(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),ms(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,s=a.onDragEnd,o=a.startIndex;s==null||s({endIndex:i,startIndex:o})}),n.detachDragEndListener()}),ms(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),ms(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),ms(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),ms(n,"handleSlideDragStart",function(a){var i=bR(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return VPe(t,e),zPe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,s=this.state.scaleValues,o=this.props,c=o.gap,u=o.data,d=u.length-1,f=Math.min(a,i),p=Math.max(a,i),h=t.getIndexInRange(s,f),v=t.getIndexInRange(s,p);return{startIndex:h-h%c,endIndex:v===d?d:v-v%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,s=a.tickFormatter,o=a.dataKey,c=fi(i[n],o,n);return Vt(s)?s(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,s=a.startX,o=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,p=c.startIndex,h=c.endIndex,v=c.onChange,m=n.pageX-i;m>0?m=Math.min(m,u+d-f-o,u+d-f-s):m<0&&(m=Math.max(m,u-s,u-o));var x=this.getIndex({startX:s+m,endX:o+m});(x.startIndex!==p||x.endIndex!==h)&&v&&v(x),this.setState({startX:s+m,endX:o+m,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=bR(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,s=a.movingTravellerId,o=a.endX,c=a.startX,u=this.state[s],d=this.props,f=d.x,p=d.width,h=d.travellerWidth,v=d.onChange,m=d.gap,x=d.data,y={startX:this.state.startX,endX:this.state.endX},g=n.pageX-i;g>0?g=Math.min(g,f+p-h-u):g<0&&(g=Math.max(g,f-u)),y[s]=u+g;var b=this.getIndex(y),S=b.startIndex,_=b.endIndex,j=function(){var E=x.length-1;return s==="startX"&&(o>c?S%m===0:_%m===0)||o<c&&_===E||s==="endX"&&(o>c?_%m===0:S%m===0)||o>c&&_===E};this.setState(ms(ms({},s,u+g),"brushMoveStartX",n.pageX),function(){v&&j()&&v(b)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,s=this.state,o=s.scaleValues,c=s.startX,u=s.endX,d=this.state[a],f=o.indexOf(d);if(f!==-1){var p=f+n;if(!(p===-1||p>=o.length)){var h=o[p];a==="startX"&&h>=u||a==="endX"&&h<=c||this.setState(ms({},a,h),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,o=n.height,c=n.fill,u=n.stroke;return we.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:s,height:o})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,o=n.height,c=n.data,u=n.children,d=n.padding,f=M.Children.only(u);return f?we.cloneElement(f,{x:a,y:i,width:s,height:o,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,s,o=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,p=c.traveller,h=c.ariaLabel,v=c.data,m=c.startIndex,x=c.endIndex,y=Math.max(n,this.props.x),g=wS(wS({},$t(this.props,!1)),{},{x:y,y:u,width:d,height:f}),b=h||"Min value: ".concat((i=v[m])===null||i===void 0?void 0:i.name,", Max value: ").concat((s=v[x])===null||s===void 0?void 0:s.name);return we.createElement($r,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(_){["ArrowLeft","ArrowRight"].includes(_.key)&&(_.preventDefault(),_.stopPropagation(),o.handleTravellerMoveKeyboard(_.key==="ArrowRight"?1:-1,a))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(p,g))}},{key:"renderSlide",value:function(n,a){var i=this.props,s=i.y,o=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return we.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:s,width:f,height:o})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,s=n.y,o=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,p=d.endX,h=5,v={pointerEvents:"none",fill:u};return we.createElement($r,{className:"recharts-brush-texts"},we.createElement(jf,l2({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,p)-h,y:s+o/2},v),this.getTextOfTick(a)),we.createElement(jf,l2({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,p)+c+h,y:s+o/2},v),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,s=n.children,o=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,p=this.state,h=p.startX,v=p.endX,m=p.isTextActive,x=p.isSlideMoving,y=p.isTravellerMoving,g=p.isTravellerFocused;if(!a||!a.length||!et(o)||!et(c)||!et(u)||!et(d)||u<=0||d<=0)return null;var b=sr("recharts-brush",i),S=we.Children.count(s)===1,_=BPe("userSelect","none");return we.createElement($r,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:_},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(h,v),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(v,"endX"),(m||x||y||g||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,s=n.width,o=n.height,c=n.stroke,u=Math.floor(i+o/2)-1;return we.createElement(we.Fragment,null,we.createElement("rect",{x:a,y:i,width:s,height:o,fill:c,stroke:"none"}),we.createElement("line",{x1:a+1,y1:u,x2:a+s-1,y2:u,fill:"none",stroke:"#fff"}),we.createElement("line",{x1:a+1,y1:u+2,x2:a+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return we.isValidElement(n)?i=we.cloneElement(n,a):Vt(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,s=n.width,o=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return wS({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:s},i&&i.length?KPe({data:i,width:s,x:o,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(s!==a.prevWidth||o!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([o,o+s-c]);var p=a.scale.domain().map(function(h){return a.scale(h)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:s,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,s=0,o=i-1;o-s>1;){var c=Math.floor((s+o)/2);n[c]>a?o=c:s=c}return a>=n[o]?o:s}}])}(M.PureComponent);ms(J0,"displayName","Brush");ms(J0,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var XPe=fE;function YPe(e,t){var r;return XPe(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var JPe=YPe,QPe=wU,ZPe=_l,e8e=JPe,t8e=is,r8e=Cw;function n8e(e,t,r){var n=t8e(e)?QPe:e8e;return r&&r8e(e,t,r)&&(t=void 0),n(e,ZPe(t))}var a8e=n8e;const i8e=kr(a8e);var pl=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},wR=qU;function s8e(e,t,r){t=="__proto__"&&wR?wR(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var o8e=s8e,l8e=o8e,c8e=UU,u8e=_l;function d8e(e,t){var r={};return t=u8e(t),c8e(e,function(n,a,i){l8e(r,a,t(n,a,i))}),r}var f8e=d8e;const h8e=kr(f8e);function p8e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var m8e=p8e,g8e=fE;function v8e(e,t){var r=!0;return g8e(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var x8e=v8e,y8e=m8e,b8e=x8e,w8e=_l,_8e=is,S8e=Cw;function N8e(e,t,r){var n=_8e(e)?y8e:b8e;return r&&S8e(e,t,r)&&(t=void 0),n(e,w8e(t))}var j8e=N8e;const Rq=kr(j8e);var A8e=["x","y"];function yv(e){"@babel/helpers - typeof";return yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yv(e)}function C4(){return C4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C4.apply(this,arguments)}function _R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Em(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_R(Object(r),!0).forEach(function(n){E8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_R(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function E8e(e,t,r){return t=T8e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T8e(e){var t=C8e(e,"string");return yv(t)=="symbol"?t:t+""}function C8e(e,t){if(yv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function k8e(e,t){if(e==null)return{};var r=O8e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function O8e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function P8e(e,t){var r=e.x,n=e.y,a=k8e(e,A8e),i="".concat(r),s=parseInt(i,10),o="".concat(n),c=parseInt(o,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),p=parseInt(f,10);return Em(Em(Em(Em(Em({},t),a),s?{x:s}:{}),c?{y:c}:{}),{},{height:d,width:p,name:t.name,radius:t.radius})}function SR(e){return we.createElement(Eq,C4({shapeType:"rectangle",propTransformer:P8e,activeClassName:"recharts-active-bar"},e))}var L8e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=et(n)||t1e(n);return i?t(n,a):(i||Ef(),r)}},R8e=["value","background"],Iq;function Q0(e){"@babel/helpers - typeof";return Q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q0(e)}function I8e(e,t){if(e==null)return{};var r=D8e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function D8e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function u2(){return u2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u2.apply(this,arguments)}function NR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function na(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NR(Object(r),!0).forEach(function(n){Eu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Mq(n.key),n)}}function F8e(e,t,r){return t&&jR(e.prototype,t),r&&jR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $8e(e,t,r){return t=d2(t),B8e(e,Dq()?Reflect.construct(t,r||[],d2(e).constructor):t.apply(e,r))}function B8e(e,t){if(t&&(Q0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U8e(e)}function U8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dq=function(){return!!e})()}function d2(e){return d2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},d2(e)}function z8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k4(e,t)}function k4(e,t){return k4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},k4(e,t)}function Eu(e,t,r){return t=Mq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mq(e){var t=q8e(e,"string");return Q0(t)=="symbol"?t:t+""}function q8e(e,t){if(Q0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Q0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Xi=function(e){function t(){var r;M8e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=$8e(this,t,[].concat(a)),Eu(r,"state",{isAnimationFinished:!1}),Eu(r,"id",Zv("recharts-bar-")),Eu(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),s&&s()}),Eu(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),s&&s()}),r}return z8e(t,e),F8e(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,s=i.shape,o=i.dataKey,c=i.activeIndex,u=i.activeBar,d=$t(this.props,!1);return n&&n.map(function(f,p){var h=p===c,v=h?u:s,m=na(na(na({},d),f),{},{isActive:h,option:v,index:p,dataKey:o,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return we.createElement($r,u2({className:"recharts-bar-rectangle"},Nf(a.props,f,p),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(p)}),we.createElement(SR,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,s=a.layout,o=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,p=this.state.prevData;return we.createElement(Sc,{begin:c,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var v=h.t,m=i.map(function(x,y){var g=p&&p[y];if(g){var b=iu(g.x,x.x),S=iu(g.y,x.y),_=iu(g.width,x.width),j=iu(g.height,x.height);return na(na({},x),{},{x:b(v),y:S(v),width:_(v),height:j(v)})}if(s==="horizontal"){var A=iu(0,x.height),E=A(v);return na(na({},x),{},{y:x.y+x.height-E,height:E})}var T=iu(0,x.width),L=T(v);return na(na({},x),{},{width:L})});return we.createElement($r,null,n.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,s=this.state.prevData;return i&&a&&a.length&&(!s||!$w(s,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,s=a.dataKey,o=a.activeIndex,c=$t(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,p=I8e(u,R8e);if(!f)return null;var h=na(na(na(na(na({},p),{},{fill:"#eee"},f),c),Nf(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:s,index:d,className:"recharts-bar-background-rectangle"});return we.createElement(SR,u2({key:"background-bar-".concat(d),option:n.props.background,isActive:d===o},h))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.data,o=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=Zs(d,zw);if(!f)return null;var p=u==="vertical"?s[0].height/2:s[0].width/2,h=function(x,y){var g=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:g,errorVal:fi(x,y)}},v={clipPath:n?"url(#clipPath-".concat(a,")"):null};return we.createElement($r,v,f.map(function(m){return we.cloneElement(m,{key:"error-bar-".concat(a,"-").concat(m.props.dataKey),data:s,xAxis:o,yAxis:c,layout:u,offset:p,dataPointFormatter:h})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,s=n.className,o=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,p=n.height,h=n.isAnimationActive,v=n.background,m=n.id;if(a||!i||!i.length)return null;var x=this.state.isAnimationFinished,y=sr("recharts-bar",s),g=o&&o.allowDataOverflow,b=c&&c.allowDataOverflow,S=g||b,_=lr(m)?this.id:m;return we.createElement($r,{className:y},g||b?we.createElement("defs",null,we.createElement("clipPath",{id:"clipPath-".concat(_)},we.createElement("rect",{x:g?u:u-f/2,y:b?d:d-p/2,width:g?f:f*2,height:b?p:p*2}))):null,we.createElement($r,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(_,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,_),(!h||x)&&$u.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(M.PureComponent);Iq=Xi;Eu(Xi,"displayName","Bar");Eu(Xi,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!kp.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Eu(Xi,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,s=e.yAxis,o=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,p=e.offset,h=yTe(n,r);if(!h)return null;var v=t.layout,m=r.type.defaultProps,x=m!==void 0?na(na({},m),r.props):r.props,y=x.dataKey,g=x.children,b=x.minPointSize,S=v==="horizontal"?s:i,_=u?S.scale.domain():null,j=ATe({numericAxis:S}),A=Zs(g,Rc),E=f.map(function(T,L){var k,R,D,q,X,se;u?k=bTe(u[d+L],_):(k=fi(T,y),Array.isArray(k)||(k=[j,k]));var Z=L8e(b,Iq.defaultProps.minPointSize)(k[1],L);if(v==="horizontal"){var K,ie=[s.scale(k[0]),s.scale(k[1])],pe=ie[0],me=ie[1];R=vL({axis:i,ticks:o,bandSize:a,offset:h.offset,entry:T,index:L}),D=(K=me??pe)!==null&&K!==void 0?K:void 0,q=h.size;var O=pe-me;if(X=Number.isNaN(O)?0:O,se={x:R,y:s.y,width:q,height:s.height},Math.abs(Z)>0&&Math.abs(X)<Math.abs(Z)){var F=ki(X||Z)*(Math.abs(Z)-Math.abs(X));D-=F,X+=F}}else{var B=[i.scale(k[0]),i.scale(k[1])],U=B[0],Y=B[1];if(R=U,D=vL({axis:s,ticks:c,bandSize:a,offset:h.offset,entry:T,index:L}),q=Y-U,X=h.size,se={x:i.x,y:D,width:i.width,height:X},Math.abs(Z)>0&&Math.abs(q)<Math.abs(Z)){var oe=ki(q||Z)*(Math.abs(Z)-Math.abs(q));q+=oe}}return na(na(na({},T),{},{x:R,y:D,width:q,height:X,value:u?k:k[1],payload:T,background:se},A&&A[L]&&A[L].props),{},{tooltipPayload:[iq(r,T)],tooltipPosition:{x:R+q/2,y:D+X/2}})});return na({data:E,layout:v},p)});function bv(e){"@babel/helpers - typeof";return bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bv(e)}function H8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fq(n.key),n)}}function W8e(e,t,r){return t&&AR(e.prototype,t),r&&AR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ER(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Co(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ER(Object(r),!0).forEach(function(n){Xw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ER(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xw(e,t,r){return t=Fq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fq(e){var t=V8e(e,"string");return bv(t)=="symbol"?t:t+""}function V8e(e,t){if(bv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G8e=function(t,r,n,a,i){var s=t.width,o=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:o-n.bottom,bottomMirror:o-n.bottom},p=!!xs(u,Xi);return d.reduce(function(h,v){var m=r[v],x=m.orientation,y=m.domain,g=m.padding,b=g===void 0?{}:g,S=m.mirror,_=m.reversed,j="".concat(x).concat(S?"Mirror":""),A,E,T,L,k;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var R=y[1]-y[0],D=1/0,q=m.categoricalDomain.sort(a1e);if(q.forEach(function(B,U){U>0&&(D=Math.min((B||0)-(q[U-1]||0),D))}),Number.isFinite(D)){var X=D/R,se=m.layout==="vertical"?n.height:n.width;if(m.padding==="gap"&&(A=X*se/2),m.padding==="no-gap"){var Z=Oi(t.barCategoryGap,X*se),K=X*se/2;A=K-Z-(K-Z)/se*Z}}}a==="xAxis"?E=[n.left+(b.left||0)+(A||0),n.left+n.width-(b.right||0)-(A||0)]:a==="yAxis"?E=c==="horizontal"?[n.top+n.height-(b.bottom||0),n.top+(b.top||0)]:[n.top+(b.top||0)+(A||0),n.top+n.height-(b.bottom||0)-(A||0)]:E=m.range,_&&(E=[E[1],E[0]]);var ie=tq(m,i,p),pe=ie.scale,me=ie.realScaleType;pe.domain(y).range(E),rq(pe);var O=nq(pe,Co(Co({},m),{},{realScaleType:me}));a==="xAxis"?(k=x==="top"&&!S||x==="bottom"&&S,T=n.left,L=f[j]-k*m.height):a==="yAxis"&&(k=x==="left"&&!S||x==="right"&&S,T=f[j]-k*m.width,L=n.top);var F=Co(Co(Co({},m),O),{},{realScaleType:me,x:T,y:L,scale:pe,width:a==="xAxis"?n.width:m.width,height:a==="yAxis"?n.height:m.height});return F.bandSize=Kb(F,O),!m.hide&&a==="xAxis"?f[j]+=(k?-1:1)*F.height:m.hide||(f[j]+=(k?-1:1)*F.width),Co(Co({},h),{},Xw({},v,F))},{})},$q=function(t,r){var n=t.x,a=t.y,i=r.x,s=r.y;return{x:Math.min(n,i),y:Math.min(a,s),width:Math.abs(i-n),height:Math.abs(s-a)}},K8e=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return $q({x:r,y:n},{x:a,y:i})},Bq=function(){function e(t){H8e(this,e),this.scale=t}return W8e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(r)+o}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();Xw(Bq,"EPS",1e-4);var zE=function(t){var r=Object.keys(t).reduce(function(n,a){return Co(Co({},n),{},Xw({},a,Bq.create(t[a])))},{});return Co(Co({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.bandAware,o=i.position;return h8e(a,function(c,u){return r[u].apply(c,{bandAware:s,position:o})})},isInRange:function(a){return Rq(a,function(i,s){return r[s].isInRange(i)})}})};function X8e(e){return(e%180+180)%180}var Y8e=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=X8e(a),s=i*Math.PI/180,o=Math.atan(n/r),c=s>o&&s<Math.PI-o?n/Math.sin(s):r/Math.cos(s);return Math.abs(c)},J8e=_l,Q8e=e1,Z8e=Ew;function eLe(e){return function(t,r,n){var a=Object(t);if(!Q8e(t)){var i=J8e(r);t=Z8e(t),r=function(o){return i(a[o],o,a)}}var s=e(t,r,n);return s>-1?a[i?t[s]:s]:void 0}}var tLe=eLe,rLe=kq;function nLe(e){var t=rLe(e),r=t%1;return t===t?r?t-r:t:0}var aLe=nLe,iLe=IU,sLe=_l,oLe=aLe,lLe=Math.max;function cLe(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:oLe(r);return a<0&&(a=lLe(n+a,0)),iLe(e,sLe(t),a)}var uLe=cLe,dLe=tLe,fLe=uLe,hLe=dLe(fLe),pLe=hLe;const mLe=kr(pLe);var gLe=ove(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),qE=M.createContext(void 0),HE=M.createContext(void 0),Uq=M.createContext(void 0),zq=M.createContext({}),qq=M.createContext(void 0),Hq=M.createContext(0),Wq=M.createContext(0),TR=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,s=t.clipPathId,o=t.children,c=t.width,u=t.height,d=gLe(i);return we.createElement(qE.Provider,{value:n},we.createElement(HE.Provider,{value:a},we.createElement(zq.Provider,{value:i},we.createElement(Uq.Provider,{value:d},we.createElement(qq.Provider,{value:s},we.createElement(Hq.Provider,{value:u},we.createElement(Wq.Provider,{value:c},o)))))))},vLe=function(){return M.useContext(qq)},Vq=function(t){var r=M.useContext(qE);r==null&&Ef();var n=r[t];return n==null&&Ef(),n},xLe=function(){var t=M.useContext(qE);return du(t)},yLe=function(){var t=M.useContext(HE),r=mLe(t,function(n){return Rq(n.domain,Number.isFinite)});return r||du(t)},Gq=function(t){var r=M.useContext(HE);r==null&&Ef();var n=r[t];return n==null&&Ef(),n},bLe=function(){var t=M.useContext(Uq);return t},wLe=function(){return M.useContext(zq)},WE=function(){return M.useContext(Wq)},VE=function(){return M.useContext(Hq)};function Z0(e){"@babel/helpers - typeof";return Z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z0(e)}function _Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SLe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xq(n.key),n)}}function NLe(e,t,r){return t&&SLe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jLe(e,t,r){return t=f2(t),ALe(e,Kq()?Reflect.construct(t,r||[],f2(e).constructor):t.apply(e,r))}function ALe(e,t){if(t&&(Z0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ELe(e)}function ELe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kq=function(){return!!e})()}function f2(e){return f2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},f2(e)}function TLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O4(e,t)}function O4(e,t){return O4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},O4(e,t)}function CR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CR(Object(r),!0).forEach(function(n){GE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GE(e,t,r){return t=Xq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xq(e){var t=CLe(e,"string");return Z0(t)=="symbol"?t:t+""}function CLe(e,t){if(Z0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Z0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function kLe(e,t){return RLe(e)||LLe(e,t)||PLe(e,t)||OLe()}function OLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PLe(e,t){if(e){if(typeof e=="string")return OR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OR(e,t)}}function OR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function LLe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function RLe(e){if(Array.isArray(e))return e}function P4(){return P4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P4.apply(this,arguments)}var ILe=function(t,r){var n;return we.isValidElement(t)?n=we.cloneElement(t,r):Vt(t)?n=t(r):n=we.createElement("line",P4({},r,{className:"recharts-reference-line-line"})),n},DLe=function(t,r,n,a,i,s,o,c,u){var d=i.x,f=i.y,p=i.width,h=i.height;if(n){var v=u.y,m=t.y.apply(v,{position:s});if(pl(u,"discard")&&!t.y.isInRange(m))return null;var x=[{x:d+p,y:m},{x:d,y:m}];return c==="left"?x.reverse():x}if(r){var y=u.x,g=t.x.apply(y,{position:s});if(pl(u,"discard")&&!t.x.isInRange(g))return null;var b=[{x:g,y:f+h},{x:g,y:f}];return o==="top"?b.reverse():b}if(a){var S=u.segment,_=S.map(function(j){return t.apply(j,{position:s})});return pl(u,"discard")&&i8e(_,function(j){return!t.isInRange(j)})?null:_}return null};function MLe(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,s=e.shape,o=e.className,c=e.alwaysShow,u=vLe(),d=Vq(a),f=Gq(i),p=bLe();if(!u||!p)return null;Fo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=zE({x:d.scale,y:f.scale}),v=wa(t),m=wa(r),x=n&&n.length===2,y=DLe(h,v,m,x,p,e.position,d.orientation,f.orientation,e);if(!y)return null;var g=kLe(y,2),b=g[0],S=b.x,_=b.y,j=g[1],A=j.x,E=j.y,T=pl(e,"hidden")?"url(#".concat(u,")"):void 0,L=kR(kR({clipPath:T},$t(e,!0)),{},{x1:S,y1:_,x2:A,y2:E});return we.createElement($r,{className:sr("recharts-reference-line",o)},ILe(s,L),ka.renderCallByParent(e,K8e({x1:S,y1:_,x2:A,y2:E})))}var KE=function(e){function t(){return _Le(this,t),jLe(this,t,arguments)}return TLe(t,e),NLe(t,[{key:"render",value:function(){return we.createElement(MLe,this.props)}}])}(we.Component);GE(KE,"displayName","ReferenceLine");GE(KE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function L4(){return L4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L4.apply(this,arguments)}function ep(e){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ep(e)}function PR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PR(Object(r),!0).forEach(function(n){Yw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $Le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Jq(n.key),n)}}function BLe(e,t,r){return t&&$Le(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ULe(e,t,r){return t=h2(t),zLe(e,Yq()?Reflect.construct(t,r||[],h2(e).constructor):t.apply(e,r))}function zLe(e,t){if(t&&(ep(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qLe(e)}function qLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yq=function(){return!!e})()}function h2(e){return h2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},h2(e)}function HLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R4(e,t)}function R4(e,t){return R4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},R4(e,t)}function Yw(e,t,r){return t=Jq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jq(e){var t=WLe(e,"string");return ep(t)=="symbol"?t:t+""}function WLe(e,t){if(ep(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ep(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var VLe=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,s=zE({x:a.scale,y:i.scale}),o=s.apply({x:r,y:n},{bandAware:!0});return pl(t,"discard")&&!s.isInRange(o)?null:o},Jw=function(e){function t(){return FLe(this,t),ULe(this,t,arguments)}return HLe(t,e),BLe(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,s=n.r,o=n.alwaysShow,c=n.clipPathId,u=wa(a),d=wa(i);if(Fo(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=VLe(this.props);if(!f)return null;var p=f.x,h=f.y,v=this.props,m=v.shape,x=v.className,y=pl(this.props,"hidden")?"url(#".concat(c,")"):void 0,g=LR(LR({clipPath:y},$t(this.props,!0)),{},{cx:p,cy:h});return we.createElement($r,{className:sr("recharts-reference-dot",x)},t.renderDot(m,g),ka.renderCallByParent(this.props,{x:p-s,y:h-s,width:2*s,height:2*s}))}}])}(we.Component);Yw(Jw,"displayName","ReferenceDot");Yw(Jw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Yw(Jw,"renderDot",function(e,t){var r;return we.isValidElement(e)?r=we.cloneElement(e,t):Vt(e)?r=e(t):r=we.createElement(UE,L4({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function I4(){return I4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I4.apply(this,arguments)}function tp(e){"@babel/helpers - typeof";return tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tp(e)}function RR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function IR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RR(Object(r),!0).forEach(function(n){Qw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KLe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Zq(n.key),n)}}function XLe(e,t,r){return t&&KLe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function YLe(e,t,r){return t=p2(t),JLe(e,Qq()?Reflect.construct(t,r||[],p2(e).constructor):t.apply(e,r))}function JLe(e,t){if(t&&(tp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QLe(e)}function QLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qq=function(){return!!e})()}function p2(e){return p2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},p2(e)}function ZLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D4(e,t)}function D4(e,t){return D4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},D4(e,t)}function Qw(e,t,r){return t=Zq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zq(e){var t=eRe(e,"string");return tp(t)=="symbol"?t:t+""}function eRe(e,t){if(tp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(tp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var tRe=function(t,r,n,a,i){var s=i.x1,o=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var p=zE({x:d.scale,y:f.scale}),h={x:t?p.x.apply(s,{position:"start"}):p.x.rangeMin,y:n?p.y.apply(c,{position:"start"}):p.y.rangeMin},v={x:r?p.x.apply(o,{position:"end"}):p.x.rangeMax,y:a?p.y.apply(u,{position:"end"}):p.y.rangeMax};return pl(i,"discard")&&(!p.isInRange(h)||!p.isInRange(v))?null:$q(h,v)},Zw=function(e){function t(){return GLe(this,t),YLe(this,t,arguments)}return ZLe(t,e),XLe(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,s=n.y1,o=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;Fo(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=wa(a),p=wa(i),h=wa(s),v=wa(o),m=this.props.shape;if(!f&&!p&&!h&&!v&&!m)return null;var x=tRe(f,p,h,v,this.props);if(!x&&!m)return null;var y=pl(this.props,"hidden")?"url(#".concat(d,")"):void 0;return we.createElement($r,{className:sr("recharts-reference-area",c)},t.renderRect(m,IR(IR({clipPath:y},$t(this.props,!0)),x)),ka.renderCallByParent(this.props,x))}}])}(we.Component);Qw(Zw,"displayName","ReferenceArea");Qw(Zw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Qw(Zw,"renderRect",function(e,t){var r;return we.isValidElement(e)?r=we.cloneElement(e,t):Vt(e)?r=e(t):r=we.createElement(BE,I4({},t,{className:"recharts-reference-area-rect"})),r});function eH(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function rRe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Y8e(n,r)}function nRe(e,t,r){var n=r==="width",a=e.x,i=e.y,s=e.width,o=e.height;return t===1?{start:n?a:i,end:n?a+s:i+o}:{start:n?a+s:i+o,end:n?a:i}}function m2(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function aRe(e,t){return eH(e,t+1)}function iRe(e,t,r,n,a){for(var i=(n||[]).slice(),s=t.start,o=t.end,c=0,u=1,d=s,f=function(){var v=n==null?void 0:n[c];if(v===void 0)return{v:eH(n,u)};var m=c,x,y=function(){return x===void 0&&(x=r(v,m)),x},g=v.coordinate,b=c===0||m2(e,g,y,d,o);b||(c=0,d=s,u+=1),b&&(d=g+e*(y()/2+a),c+=u)},p;u<=i.length;)if(p=f(),p)return p.v;return[]}function wv(e){"@babel/helpers - typeof";return wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wv(e)}function DR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ci(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DR(Object(r),!0).forEach(function(n){sRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sRe(e,t,r){return t=oRe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oRe(e){var t=lRe(e,"string");return wv(t)=="symbol"?t:t+""}function lRe(e,t){if(wv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cRe(e,t,r,n,a){for(var i=(n||[]).slice(),s=i.length,o=t.start,c=t.end,u=function(p){var h=i[p],v,m=function(){return v===void 0&&(v=r(h,p)),v};if(p===s-1){var x=e*(h.coordinate+e*m()/2-c);i[p]=h=ci(ci({},h),{},{tickCoord:x>0?h.coordinate-x*e:h.coordinate})}else i[p]=h=ci(ci({},h),{},{tickCoord:h.coordinate});var y=m2(e,h.tickCoord,m,o,c);y&&(c=h.tickCoord-e*(m()/2+a),i[p]=ci(ci({},h),{},{isShow:!0}))},d=s-1;d>=0;d--)u(d);return i}function uRe(e,t,r,n,a,i){var s=(n||[]).slice(),o=s.length,c=t.start,u=t.end;if(i){var d=n[o-1],f=r(d,o-1),p=e*(d.coordinate+e*f/2-u);s[o-1]=d=ci(ci({},d),{},{tickCoord:p>0?d.coordinate-p*e:d.coordinate});var h=m2(e,d.tickCoord,function(){return f},c,u);h&&(u=d.tickCoord-e*(f/2+a),s[o-1]=ci(ci({},d),{},{isShow:!0}))}for(var v=i?o-1:o,m=function(g){var b=s[g],S,_=function(){return S===void 0&&(S=r(b,g)),S};if(g===0){var j=e*(b.coordinate-e*_()/2-c);s[g]=b=ci(ci({},b),{},{tickCoord:j<0?b.coordinate-j*e:b.coordinate})}else s[g]=b=ci(ci({},b),{},{tickCoord:b.coordinate});var A=m2(e,b.tickCoord,_,c,u);A&&(c=b.tickCoord+e*(_()/2+a),s[g]=ci(ci({},b),{},{isShow:!0}))},x=0;x<v;x++)m(x);return s}function XE(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,s=e.minTickGap,o=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!a||!a.length||!n)return[];if(et(c)||kp.isSsr)return aRe(a,typeof c=="number"&&et(c)?c:0);var p=[],h=o==="top"||o==="bottom"?"width":"height",v=d&&h==="width"?ag(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},m=function(b,S){var _=Vt(u)?u(b.value,S):b.value;return h==="width"?rRe(ag(_,{fontSize:t,letterSpacing:r}),v,f):ag(_,{fontSize:t,letterSpacing:r})[h]},x=a.length>=2?ki(a[1].coordinate-a[0].coordinate):1,y=nRe(i,x,h);return c==="equidistantPreserveStart"?iRe(x,y,m,a,s):(c==="preserveStart"||c==="preserveStartEnd"?p=uRe(x,y,m,a,s,c==="preserveStartEnd"):p=cRe(x,y,m,a,s),p.filter(function(g){return g.isShow}))}var dRe=["viewBox"],fRe=["viewBox"],hRe=["ticks"];function rp(e){"@babel/helpers - typeof";return rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rp(e)}function $h(){return $h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$h.apply(this,arguments)}function MR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ma(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MR(Object(r),!0).forEach(function(n){YE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _S(e,t){if(e==null)return{};var r=pRe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pRe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function mRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rH(n.key),n)}}function gRe(e,t,r){return t&&FR(e.prototype,t),r&&FR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vRe(e,t,r){return t=g2(t),xRe(e,tH()?Reflect.construct(t,r||[],g2(e).constructor):t.apply(e,r))}function xRe(e,t){if(t&&(rp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yRe(e)}function yRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tH=function(){return!!e})()}function g2(e){return g2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},g2(e)}function bRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M4(e,t)}function M4(e,t){return M4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},M4(e,t)}function YE(e,t,r){return t=rH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rH(e){var t=wRe(e,"string");return rp(t)=="symbol"?t:t+""}function wRe(e,t){if(rp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Rp=function(e){function t(r){var n;return mRe(this,t),n=vRe(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return bRe(t,e),gRe(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,s=_S(n,dRe),o=this.props,c=o.viewBox,u=_S(o,fRe);return!s0(i,c)||!s0(s,u)||!s0(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,s=a.y,o=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,p=a.tickMargin,h,v,m,x,y,g,b=f?-1:1,S=n.tickSize||d,_=et(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":h=v=n.coordinate,x=s+ +!f*c,m=x-b*S,g=m-b*p,y=_;break;case"left":m=x=n.coordinate,v=i+ +!f*o,h=v-b*S,y=h-b*p,g=_;break;case"right":m=x=n.coordinate,v=i+ +f*o,h=v+b*S,y=h+b*p,g=_;break;default:h=v=n.coordinate,x=s+ +f*c,m=x+b*S,g=m+b*p,y=_;break}return{line:{x1:h,y1:m,x2:v,y2:x},tick:{x:y,y:g}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s;switch(a){case"left":s=i?"start":"end";break;case"right":s=i?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s="end";switch(a){case"left":case"right":s="middle";break;case"top":s=i?"start":"end";break;default:s=i?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,o=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=ma(ma(ma({},$t(this.props,!1)),$t(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!u||c==="bottom"&&u);f=ma(ma({},f),{},{x1:a,y1:i+p*o,x2:a+s,y2:i+p*o})}else{var h=+(c==="left"&&!u||c==="right"&&u);f=ma(ma({},f),{},{x1:a+h*s,y1:i,x2:a+h*s,y2:i+o})}return we.createElement("line",$h({},f,{className:sr("recharts-cartesian-axis-line",Ts(d,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var s=this,o=this.props,c=o.tickLine,u=o.stroke,d=o.tick,f=o.tickFormatter,p=o.unit,h=XE(ma(ma({},this.props),{},{ticks:n}),a,i),v=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),x=$t(this.props,!1),y=$t(d,!1),g=ma(ma({},x),{},{fill:"none"},$t(c,!1)),b=h.map(function(S,_){var j=s.getTickLineCoord(S),A=j.line,E=j.tick,T=ma(ma(ma(ma({textAnchor:v,verticalAnchor:m},x),{},{stroke:"none",fill:u},y),E),{},{index:_,payload:S,visibleTicksCount:h.length,tickFormatter:f});return we.createElement($r,$h({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},Nf(s.props,S,_)),c&&we.createElement("line",$h({},g,A,{className:sr("recharts-cartesian-axis-tick-line",Ts(c,"className"))})),d&&t.renderTickItem(d,T,"".concat(Vt(f)?f(S.value,_):S.value).concat(p||"")))});return we.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,s=a.width,o=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,p=f.ticks,h=_S(f,hRe),v=p;return Vt(c)&&(v=p&&p.length>0?c(this.props):c(h)),s<=0||o<=0||!v||!v.length?null:we.createElement($r,{className:sr("recharts-cartesian-axis",u),ref:function(x){n.layerReference=x}},i&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),ka.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var s,o=sr(a.className,"recharts-cartesian-axis-tick-value");return we.isValidElement(n)?s=we.cloneElement(n,ma(ma({},a),{},{className:o})):Vt(n)?s=n(ma(ma({},a),{},{className:o})):s=we.createElement(jf,$h({},a,{className:"recharts-cartesian-axis-tick-value"}),i),s}}])}(M.Component);YE(Rp,"displayName","CartesianAxis");YE(Rp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var _Re=["x1","y1","x2","y2","key"],SRe=["offset"];function Tf(e){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tf(e)}function $R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function di(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$R(Object(r),!0).forEach(function(n){NRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$R(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NRe(e,t,r){return t=jRe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jRe(e){var t=ARe(e,"string");return Tf(t)=="symbol"?t:t+""}function ARe(e,t){if(Tf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gd(){return Gd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gd.apply(this,arguments)}function BR(e,t){if(e==null)return{};var r=ERe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ERe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var TRe=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,s=t.width,o=t.height,c=t.ry;return we.createElement("rect",{x:a,y:i,ry:c,width:s,height:o,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function nH(e,t){var r;if(we.isValidElement(e))r=we.cloneElement(e,t);else if(Vt(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,s=t.y2,o=t.key,c=BR(t,_Re),u=$t(c,!1);u.offset;var d=BR(u,SRe);r=we.createElement("line",Gd({},d,{x1:n,y1:a,x2:i,y2:s,fill:"none",key:o}))}return r}function CRe(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(o,c){var u=di(di({},e),{},{x1:t,y1:o,x2:t+r,y2:o,key:"line-".concat(c),index:c});return nH(a,u)});return we.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function kRe(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(o,c){var u=di(di({},e),{},{x1:o,y1:t,x2:o,y2:t+r,key:"line-".concat(c),index:c});return nH(a,u)});return we.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function ORe(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,s=e.height,o=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=o.map(function(p){return Math.round(p+a-a)}).sort(function(p,h){return p-h});a!==d[0]&&d.unshift(0);var f=d.map(function(p,h){var v=!d[h+1],m=v?a+s-p:d[h+1]-p;if(m<=0)return null;var x=h%t.length;return we.createElement("rect",{key:"react-".concat(h),y:p,x:n,height:m,width:i,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return we.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function PRe(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,s=e.y,o=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(p){return Math.round(p+i-i)}).sort(function(p,h){return p-h});i!==d[0]&&d.unshift(0);var f=d.map(function(p,h){var v=!d[h+1],m=v?i+o-p:d[h+1]-p;if(m<=0)return null;var x=h%n.length;return we.createElement("rect",{key:"react-".concat(h),x:p,y:s,width:m,height:c,stroke:"none",fill:n[x],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return we.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var LRe=function(t,r){var n=t.xAxis,a=t.width,i=t.height,s=t.offset;return eq(XE(di(di(di({},Rp.defaultProps),n),{},{ticks:rc(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.left,s.left+s.width,r)},RRe=function(t,r){var n=t.yAxis,a=t.width,i=t.height,s=t.offset;return eq(XE(di(di(di({},Rp.defaultProps),n),{},{ticks:rc(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.top,s.top+s.height,r)},mh={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Cf(e){var t,r,n,a,i,s,o=WE(),c=VE(),u=wLe(),d=di(di({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:mh.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:mh.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:mh.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:mh.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:mh.vertical,verticalFill:(s=e.verticalFill)!==null&&s!==void 0?s:mh.verticalFill,x:et(e.x)?e.x:u.left,y:et(e.y)?e.y:u.top,width:et(e.width)?e.width:u.width,height:et(e.height)?e.height:u.height}),f=d.x,p=d.y,h=d.width,v=d.height,m=d.syncWithTicks,x=d.horizontalValues,y=d.verticalValues,g=xLe(),b=yLe();if(!et(h)||h<=0||!et(v)||v<=0||!et(f)||f!==+f||!et(p)||p!==+p)return null;var S=d.verticalCoordinatesGenerator||LRe,_=d.horizontalCoordinatesGenerator||RRe,j=d.horizontalPoints,A=d.verticalPoints;if((!j||!j.length)&&Vt(_)){var E=x&&x.length,T=_({yAxis:b?di(di({},b),{},{ticks:E?x:b.ticks}):void 0,width:o,height:c,offset:u},E?!0:m);Fo(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Tf(T),"]")),Array.isArray(T)&&(j=T)}if((!A||!A.length)&&Vt(S)){var L=y&&y.length,k=S({xAxis:g?di(di({},g),{},{ticks:L?y:g.ticks}):void 0,width:o,height:c,offset:u},L?!0:m);Fo(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Tf(k),"]")),Array.isArray(k)&&(A=k)}return we.createElement("g",{className:"recharts-cartesian-grid"},we.createElement(TRe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),we.createElement(CRe,Gd({},d,{offset:u,horizontalPoints:j,xAxis:g,yAxis:b})),we.createElement(kRe,Gd({},d,{offset:u,verticalPoints:A,xAxis:g,yAxis:b})),we.createElement(ORe,Gd({},d,{horizontalPoints:j})),we.createElement(PRe,Gd({},d,{verticalPoints:A})))}Cf.displayName="CartesianGrid";function np(e){"@babel/helpers - typeof";return np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},np(e)}function IRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DRe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sH(n.key),n)}}function MRe(e,t,r){return t&&DRe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function FRe(e,t,r){return t=v2(t),$Re(e,aH()?Reflect.construct(t,r||[],v2(e).constructor):t.apply(e,r))}function $Re(e,t){if(t&&(np(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BRe(e)}function BRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aH=function(){return!!e})()}function v2(e){return v2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},v2(e)}function URe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F4(e,t)}function F4(e,t){return F4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},F4(e,t)}function iH(e,t,r){return t=sH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sH(e){var t=zRe(e,"string");return np(t)=="symbol"?t:t+""}function zRe(e,t){if(np(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(np(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function $4(){return $4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$4.apply(this,arguments)}function qRe(e){var t=e.xAxisId,r=WE(),n=VE(),a=Vq(t);return a==null?null:M.createElement(Rp,$4({},a,{className:sr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(s){return rc(s,!0)}}))}var Nc=function(e){function t(){return IRe(this,t),FRe(this,t,arguments)}return URe(t,e),MRe(t,[{key:"render",value:function(){return M.createElement(qRe,this.props)}}])}(M.Component);iH(Nc,"displayName","XAxis");iH(Nc,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function ap(e){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ap(e)}function HRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WRe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cH(n.key),n)}}function VRe(e,t,r){return t&&WRe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function GRe(e,t,r){return t=x2(t),KRe(e,oH()?Reflect.construct(t,r||[],x2(e).constructor):t.apply(e,r))}function KRe(e,t){if(t&&(ap(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XRe(e)}function XRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oH=function(){return!!e})()}function x2(e){return x2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},x2(e)}function YRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B4(e,t)}function B4(e,t){return B4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},B4(e,t)}function lH(e,t,r){return t=cH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cH(e){var t=JRe(e,"string");return ap(t)=="symbol"?t:t+""}function JRe(e,t){if(ap(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function U4(){return U4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U4.apply(this,arguments)}var QRe=function(t){var r=t.yAxisId,n=WE(),a=VE(),i=Gq(r);return i==null?null:M.createElement(Rp,U4({},i,{className:sr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(o){return rc(o,!0)}}))},jc=function(e){function t(){return HRe(this,t),GRe(this,t,arguments)}return YRe(t,e),VRe(t,[{key:"render",value:function(){return M.createElement(QRe,this.props)}}])}(M.Component);lH(jc,"displayName","YAxis");lH(jc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function UR(e){return rIe(e)||tIe(e)||eIe(e)||ZRe()}function ZRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eIe(e,t){if(e){if(typeof e=="string")return z4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z4(e,t)}}function tIe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rIe(e){if(Array.isArray(e))return z4(e)}function z4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var q4=function(t,r,n,a,i){var s=Zs(t,KE),o=Zs(t,Jw),c=[].concat(UR(s),UR(o)),u=Zs(t,Zw),d="".concat(a,"Id"),f=a[0],p=r;if(c.length&&(p=c.reduce(function(m,x){if(x.props[d]===n&&pl(x.props,"extendDomain")&&et(x.props[f])){var y=x.props[f];return[Math.min(m[0],y),Math.max(m[1],y)]}return m},p)),u.length){var h="".concat(f,"1"),v="".concat(f,"2");p=u.reduce(function(m,x){if(x.props[d]===n&&pl(x.props,"extendDomain")&&et(x.props[h])&&et(x.props[v])){var y=x.props[h],g=x.props[v];return[Math.min(m[0],y,g),Math.max(m[1],y,g)]}return m},p)}return i&&i.length&&(p=i.reduce(function(m,x){return et(x)?[Math.min(m[0],x),Math.max(m[1],x)]:m},p)),p},uH={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new a(d,f||c,p),v=r?r+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],h]:c._events[v].push(h):(c._events[v]=h,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,h=f.length,v=new Array(h);p<h;p++)v[p]=f[p].fn;return v},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,p,h,v){var m=r?r+u:u;if(!this._events[m])return!1;var x=this._events[m],y=arguments.length,g,b;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),y){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,p),!0;case 5:return x.fn.call(x.context,d,f,p,h),!0;case 6:return x.fn.call(x.context,d,f,p,h,v),!0}for(b=1,g=new Array(y-1);b<y;b++)g[b-1]=arguments[b];x.fn.apply(x.context,g)}else{var S=x.length,_;for(b=0;b<S;b++)switch(x[b].once&&this.removeListener(u,x[b].fn,void 0,!0),y){case 1:x[b].fn.call(x[b].context);break;case 2:x[b].fn.call(x[b].context,d);break;case 3:x[b].fn.call(x[b].context,d,f);break;case 4:x[b].fn.call(x[b].context,d,f,p);break;default:if(!g)for(_=1,g=new Array(y-1);_<y;_++)g[_-1]=arguments[_];x[b].fn.apply(x[b].context,g)}}return!0},o.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,p){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return s(this,h),this;var v=this._events[h];if(v.fn)v.fn===d&&(!p||v.once)&&(!f||v.context===f)&&s(this,h);else{for(var m=0,x=[],y=v.length;m<y;m++)(v[m].fn!==d||p&&!v[m].once||f&&v[m].context!==f)&&x.push(v[m]);x.length?this._events[h]=x.length===1?x[0]:x:s(this,h)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&s(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(uH);var nIe=uH.exports;const aIe=kr(nIe);var SS=new aIe,NS="recharts.syncMouseEvents";function _v(e){"@babel/helpers - typeof";return _v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_v(e)}function iIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sIe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dH(n.key),n)}}function oIe(e,t,r){return t&&sIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jS(e,t,r){return t=dH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dH(e){var t=lIe(e,"string");return _v(t)=="symbol"?t:t+""}function lIe(e,t){if(_v(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_v(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var cIe=function(){function e(){iIe(this,e),jS(this,"activeIndex",0),jS(this,"coordinateList",[]),jS(this,"layout","horizontal")}return oIe(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,s=r.container,o=s===void 0?null:s,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,p=r.mouseHandlerCallback,h=p===void 0?null:p;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,s=a.y,o=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+c+u,p=s+this.offset.top+o/2+d;this.mouseHandlerCallback({pageX:f,pageY:p})}}}])}();function uIe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&et(n)&&et(a))return!0}return!1}function dIe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function fH(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,s=on(t,r,n,a),o=on(t,r,n,i);return{points:[s,o],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function fIe(e,t,r){var n,a,i,s;if(e==="horizontal")n=t.x,i=n,a=r.top,s=r.top+r.height;else if(e==="vertical")a=t.y,s=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var o=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,p=on(o,c,u,f),h=on(o,c,d,f);n=p.x,a=p.y,i=h.x,s=h.y}else return fH(t);return[{x:n,y:a},{x:i,y:s}]}function Sv(e){"@babel/helpers - typeof";return Sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sv(e)}function zR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zR(Object(r),!0).forEach(function(n){hIe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hIe(e,t,r){return t=pIe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pIe(e){var t=mIe(e,"string");return Sv(t)=="symbol"?t:t+""}function mIe(e,t){if(Sv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gIe(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,s=e.activeCoordinate,o=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,p=e.chartName,h=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!h||!i||!s||p!=="ScatterChart"&&a!=="axis")return null;var v,m=f4;if(p==="ScatterChart")v=s,m=GOe;else if(p==="BarChart")v=dIe(f,s,c,d),m=BE;else if(f==="radial"){var x=fH(s),y=x.cx,g=x.cy,b=x.radius,S=x.startAngle,_=x.endAngle;v={cx:y,cy:g,startAngle:S,endAngle:_,innerRadius:b,outerRadius:b},m=dq}else v={points:fIe(f,s,c)},m=f4;var j=Wx(Wx(Wx(Wx({stroke:"#ccc",pointerEvents:"none"},c),v),$t(h,!1)),{},{payload:o,payloadIndex:u,className:sr("recharts-tooltip-cursor",h.className)});return M.isValidElement(h)?M.cloneElement(h,j):M.createElement(m,j)}var vIe=["item"],xIe=["children","className","width","height","style","compact","title","desc"];function ip(e){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ip(e)}function Bh(){return Bh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bh.apply(this,arguments)}function qR(e,t){return wIe(e)||bIe(e,t)||pH(e,t)||yIe()}function yIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bIe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function wIe(e){if(Array.isArray(e))return e}function HR(e,t){if(e==null)return{};var r=_Ie(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _Ie(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function SIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NIe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mH(n.key),n)}}function jIe(e,t,r){return t&&NIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function AIe(e,t,r){return t=y2(t),EIe(e,hH()?Reflect.construct(t,r||[],y2(e).constructor):t.apply(e,r))}function EIe(e,t){if(t&&(ip(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TIe(e)}function TIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hH=function(){return!!e})()}function y2(e){return y2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},y2(e)}function CIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H4(e,t)}function H4(e,t){return H4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},H4(e,t)}function sp(e){return PIe(e)||OIe(e)||pH(e)||kIe()}function kIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pH(e,t){if(e){if(typeof e=="string")return W4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W4(e,t)}}function OIe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function PIe(e){if(Array.isArray(e))return W4(e)}function W4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function WR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ue(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WR(Object(r),!0).forEach(function(n){Rt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rt(e,t,r){return t=mH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mH(e){var t=LIe(e,"string");return ip(t)=="symbol"?t:t+""}function LIe(e,t){if(ip(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ip(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RIe={xAxis:["bottom","top"],yAxis:["left","right"]},IIe={width:"100%",height:"100%"},gH={x:0,y:0};function Vx(e){return e}var DIe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},MIe=function(t,r,n,a){var i=r.find(function(d){return d&&d.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var s=i.coordinate,o=a.radius;return Ue(Ue(Ue({},a),on(a.cx,a.cy,o,s)),{},{angle:s,radius:o})}var c=i.coordinate,u=a.angle;return Ue(Ue(Ue({},a),on(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return gH},e_=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,s=(n??[]).reduce(function(o,c){var u=c.props.data;return u&&u.length?[].concat(sp(o),sp(u)):o},[]);return s.length>0?s:t&&t.length&&et(a)&&et(i)?t.slice(a,i+1):[]};function vH(e){return e==="number"?[0,"auto"]:void 0}var V4=function(t,r,n,a){var i=t.graphicalItems,s=t.tooltipAxis,o=e_(r,t);return n<0||!i||!i.length||n>=o.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var p;if(s.dataKey&&!s.allowDuplicatedCategory){var h=f===void 0?o:f;p=bj(h,s.dataKey,a)}else p=f&&f[n]||o[n];return p?[].concat(sp(c),[iq(u,p)]):c},[])},VR=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},s=DIe(i,n),o=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=hTe(s,o,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,p=V4(t,r,d,f),h=MIe(n,o,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:p,activeCoordinate:h}}return null},FIe=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,s=r.axisIdKey,o=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,p=t.stackOffset,h=Zz(d,i);return n.reduce(function(v,m){var x,y=m.type.defaultProps!==void 0?Ue(Ue({},m.type.defaultProps),m.props):m.props,g=y.type,b=y.dataKey,S=y.allowDataOverflow,_=y.allowDuplicatedCategory,j=y.scale,A=y.ticks,E=y.includeHidden,T=y[s];if(v[T])return v;var L=e_(t.data,{graphicalItems:a.filter(function(O){var F,B=s in O.props?O.props[s]:(F=O.type.defaultProps)===null||F===void 0?void 0:F[s];return B===T}),dataStartIndex:c,dataEndIndex:u}),k=L.length,R,D,q;uIe(y.domain,S,g)&&(R=o4(y.domain,null,S),h&&(g==="number"||j!=="auto")&&(q=sg(L,b,"category")));var X=vH(g);if(!R||R.length===0){var se,Z=(se=y.domain)!==null&&se!==void 0?se:X;if(b){if(R=sg(L,b,g),g==="category"&&h){var K=n1e(R);_&&K?(D=R,R=o2(0,k)):_||(R=bL(Z,R,m).reduce(function(O,F){return O.indexOf(F)>=0?O:[].concat(sp(O),[F])},[]))}else if(g==="category")_?R=R.filter(function(O){return O!==""&&!lr(O)}):R=bL(Z,R,m).reduce(function(O,F){return O.indexOf(F)>=0||F===""||lr(F)?O:[].concat(sp(O),[F])},[]);else if(g==="number"){var ie=xTe(L,a.filter(function(O){var F,B,U=s in O.props?O.props[s]:(F=O.type.defaultProps)===null||F===void 0?void 0:F[s],Y="hide"in O.props?O.props.hide:(B=O.type.defaultProps)===null||B===void 0?void 0:B.hide;return U===T&&(E||!Y)}),b,i,d);ie&&(R=ie)}h&&(g==="number"||j!=="auto")&&(q=sg(L,b,"category"))}else h?R=o2(0,k):o&&o[T]&&o[T].hasStack&&g==="number"?R=p==="expand"?[0,1]:aq(o[T].stackGroups,c,u):R=Qz(L,a.filter(function(O){var F=s in O.props?O.props[s]:O.type.defaultProps[s],B="hide"in O.props?O.props.hide:O.type.defaultProps.hide;return F===T&&(E||!B)}),g,d,!0);if(g==="number")R=q4(f,R,T,i,A),Z&&(R=o4(Z,R,S));else if(g==="category"&&Z){var pe=Z,me=R.every(function(O){return pe.indexOf(O)>=0});me&&(R=pe)}}return Ue(Ue({},v),{},Rt({},T,Ue(Ue({},y),{},{axisType:i,domain:R,categoricalDomain:q,duplicateDomain:D,originalDomain:(x=y.domain)!==null&&x!==void 0?x:X,isCategorical:h,layout:d})))},{})},$Ie=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,s=r.axisIdKey,o=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,p=e_(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),h=p.length,v=Zz(d,i),m=-1;return n.reduce(function(x,y){var g=y.type.defaultProps!==void 0?Ue(Ue({},y.type.defaultProps),y.props):y.props,b=g[s],S=vH("number");if(!x[b]){m++;var _;return v?_=o2(0,h):o&&o[b]&&o[b].hasStack?(_=aq(o[b].stackGroups,c,u),_=q4(f,_,b,i)):(_=o4(S,Qz(p,n.filter(function(j){var A,E,T=s in j.props?j.props[s]:(A=j.type.defaultProps)===null||A===void 0?void 0:A[s],L="hide"in j.props?j.props.hide:(E=j.type.defaultProps)===null||E===void 0?void 0:E.hide;return T===b&&!L}),"number",d),a.defaultProps.allowDataOverflow),_=q4(f,_,b,i)),Ue(Ue({},x),{},Rt({},b,Ue(Ue({axisType:i},a.defaultProps),{},{hide:!0,orientation:Ts(RIe,"".concat(i,".").concat(m%2),null),domain:_,originalDomain:S,isCategorical:v,layout:d})))}return x},{})},BIe=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,s=r.graphicalItems,o=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(a,"Id"),p=Zs(d,i),h={};return p&&p.length?h=FIe(t,{axes:p,graphicalItems:s,axisType:a,axisIdKey:f,stackGroups:o,dataStartIndex:c,dataEndIndex:u}):s&&s.length&&(h=$Ie(t,{Axis:i,graphicalItems:s,axisType:a,axisIdKey:f,stackGroups:o,dataStartIndex:c,dataEndIndex:u})),h},UIe=function(t){var r=du(t),n=rc(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:hE(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Kb(r,n)}},GR=function(t){var r=t.children,n=t.defaultShowTooltip,a=xs(r,J0),i=0,s=0;return t.data&&t.data.length!==0&&(s=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(s=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},zIe=function(t){return!t||!t.length?!1:t.some(function(r){var n=oc(r&&r.type);return n&&n.indexOf("Bar")>=0})},KR=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},qIe=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,s=i===void 0?{}:i,o=t.yAxisMap,c=o===void 0?{}:o,u=n.width,d=n.height,f=n.children,p=n.margin||{},h=xs(f,J0),v=xs(f,lc),m=Object.keys(c).reduce(function(_,j){var A=c[j],E=A.orientation;return!A.mirror&&!A.hide?Ue(Ue({},_),{},Rt({},E,_[E]+A.width)):_},{left:p.left||0,right:p.right||0}),x=Object.keys(s).reduce(function(_,j){var A=s[j],E=A.orientation;return!A.mirror&&!A.hide?Ue(Ue({},_),{},Rt({},E,Ts(_,"".concat(E))+A.height)):_},{top:p.top||0,bottom:p.bottom||0}),y=Ue(Ue({},x),m),g=y.bottom;h&&(y.bottom+=h.props.height||J0.defaultProps.height),v&&r&&(y=gTe(y,a,n,r));var b=u-y.left-y.right,S=d-y.top-y.bottom;return Ue(Ue({brushBottom:g},y),{},{width:Math.max(b,0),height:Math.max(S,0)})},HIe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},xH=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,s=t.validateTooltipEventTypes,o=s===void 0?["axis"]:s,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,p=function(y,g){var b=g.graphicalItems,S=g.stackGroups,_=g.offset,j=g.updateId,A=g.dataStartIndex,E=g.dataEndIndex,T=y.barSize,L=y.layout,k=y.barGap,R=y.barCategoryGap,D=y.maxBarSize,q=KR(L),X=q.numericAxisName,se=q.cateAxisName,Z=zIe(b),K=[];return b.forEach(function(ie,pe){var me=e_(y.data,{graphicalItems:[ie],dataStartIndex:A,dataEndIndex:E}),O=ie.type.defaultProps!==void 0?Ue(Ue({},ie.type.defaultProps),ie.props):ie.props,F=O.dataKey,B=O.maxBarSize,U=O["".concat(X,"Id")],Y=O["".concat(se,"Id")],oe={},ee=c.reduce(function(nt,dt){var ft=g["".concat(dt.axisType,"Map")],ut=O["".concat(dt.axisType,"Id")];ft&&ft[ut]||dt.axisType==="zAxis"||Ef();var qt=ft[ut];return Ue(Ue({},nt),{},Rt(Rt({},dt.axisType,qt),"".concat(dt.axisType,"Ticks"),rc(qt)))},oe),te=ee[se],le=ee["".concat(se,"Ticks")],Ne=S&&S[U]&&S[U].hasStack&&ETe(ie,S[U].stackGroups),ve=oc(ie.type).indexOf("Bar")>=0,Me=Kb(te,le),Ie=[],Q=Z&&pTe({barSize:T,stackGroups:S,totalSize:HIe(ee,se)});if(ve){var $e,Re,it=lr(B)?D:B,He=($e=(Re=Kb(te,le,!0))!==null&&Re!==void 0?Re:it)!==null&&$e!==void 0?$e:0;Ie=mTe({barGap:k,barCategoryGap:R,bandSize:He!==Me?He:Me,sizeList:Q[Y],maxBarSize:it}),He!==Me&&(Ie=Ie.map(function(nt){return Ue(Ue({},nt),{},{position:Ue(Ue({},nt.position),{},{offset:nt.position.offset-He/2})})}))}var Ze=ie&&ie.type&&ie.type.getComposedData;Ze&&K.push({props:Ue(Ue({},Ze(Ue(Ue({},ee),{},{displayedData:me,props:y,dataKey:F,item:ie,bandSize:Me,barPosition:Ie,offset:_,stackedData:Ne,layout:L,dataStartIndex:A,dataEndIndex:E}))),{},Rt(Rt(Rt({key:ie.key||"item-".concat(pe)},X,ee[X]),se,ee[se]),"animationId",j)),childIndex:m1e(ie,y.children),item:ie})}),K},h=function(y,g){var b=y.props,S=y.dataStartIndex,_=y.dataEndIndex,j=y.updateId;if(!pP({props:b}))return null;var A=b.children,E=b.layout,T=b.stackOffset,L=b.data,k=b.reverseStackOrder,R=KR(E),D=R.numericAxisName,q=R.cateAxisName,X=Zs(A,n),se=jTe(L,X,"".concat(D,"Id"),"".concat(q,"Id"),T,k),Z=c.reduce(function(O,F){var B="".concat(F.axisType,"Map");return Ue(Ue({},O),{},Rt({},B,BIe(b,Ue(Ue({},F),{},{graphicalItems:X,stackGroups:F.axisType===D&&se,dataStartIndex:S,dataEndIndex:_}))))},{}),K=qIe(Ue(Ue({},Z),{},{props:b,graphicalItems:X}),g==null?void 0:g.legendBBox);Object.keys(Z).forEach(function(O){Z[O]=d(b,Z[O],K,O.replace("Map",""),r)});var ie=Z["".concat(q,"Map")],pe=UIe(ie),me=p(b,Ue(Ue({},Z),{},{dataStartIndex:S,dataEndIndex:_,updateId:j,graphicalItems:X,stackGroups:se,offset:K}));return Ue(Ue({formattedGraphicalItems:me,graphicalItems:X,offset:K,stackGroups:se},pe),Z)},v=function(x){function y(g){var b,S,_;return SIe(this,y),_=AIe(this,y,[g]),Rt(_,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Rt(_,"accessibilityManager",new cIe),Rt(_,"handleLegendBBoxUpdate",function(j){if(j){var A=_.state,E=A.dataStartIndex,T=A.dataEndIndex,L=A.updateId;_.setState(Ue({legendBBox:j},h({props:_.props,dataStartIndex:E,dataEndIndex:T,updateId:L},Ue(Ue({},_.state),{},{legendBBox:j}))))}}),Rt(_,"handleReceiveSyncEvent",function(j,A,E){if(_.props.syncId===j){if(E===_.eventEmitterSymbol&&typeof _.props.syncMethod!="function")return;_.applySyncEvent(A)}}),Rt(_,"handleBrushChange",function(j){var A=j.startIndex,E=j.endIndex;if(A!==_.state.dataStartIndex||E!==_.state.dataEndIndex){var T=_.state.updateId;_.setState(function(){return Ue({dataStartIndex:A,dataEndIndex:E},h({props:_.props,dataStartIndex:A,dataEndIndex:E,updateId:T},_.state))}),_.triggerSyncEvent({dataStartIndex:A,dataEndIndex:E})}}),Rt(_,"handleMouseEnter",function(j){var A=_.getMouseInfo(j);if(A){var E=Ue(Ue({},A),{},{isTooltipActive:!0});_.setState(E),_.triggerSyncEvent(E);var T=_.props.onMouseEnter;Vt(T)&&T(E,j)}}),Rt(_,"triggeredAfterMouseMove",function(j){var A=_.getMouseInfo(j),E=A?Ue(Ue({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};_.setState(E),_.triggerSyncEvent(E);var T=_.props.onMouseMove;Vt(T)&&T(E,j)}),Rt(_,"handleItemMouseEnter",function(j){_.setState(function(){return{isTooltipActive:!0,activeItem:j,activePayload:j.tooltipPayload,activeCoordinate:j.tooltipPosition||{x:j.cx,y:j.cy}}})}),Rt(_,"handleItemMouseLeave",function(){_.setState(function(){return{isTooltipActive:!1}})}),Rt(_,"handleMouseMove",function(j){j.persist(),_.throttleTriggeredAfterMouseMove(j)}),Rt(_,"handleMouseLeave",function(j){_.throttleTriggeredAfterMouseMove.cancel();var A={isTooltipActive:!1};_.setState(A),_.triggerSyncEvent(A);var E=_.props.onMouseLeave;Vt(E)&&E(A,j)}),Rt(_,"handleOuterEvent",function(j){var A=p1e(j),E=Ts(_.props,"".concat(A));if(A&&Vt(E)){var T,L;/.*touch.*/i.test(A)?L=_.getMouseInfo(j.changedTouches[0]):L=_.getMouseInfo(j),E((T=L)!==null&&T!==void 0?T:{},j)}}),Rt(_,"handleClick",function(j){var A=_.getMouseInfo(j);if(A){var E=Ue(Ue({},A),{},{isTooltipActive:!0});_.setState(E),_.triggerSyncEvent(E);var T=_.props.onClick;Vt(T)&&T(E,j)}}),Rt(_,"handleMouseDown",function(j){var A=_.props.onMouseDown;if(Vt(A)){var E=_.getMouseInfo(j);A(E,j)}}),Rt(_,"handleMouseUp",function(j){var A=_.props.onMouseUp;if(Vt(A)){var E=_.getMouseInfo(j);A(E,j)}}),Rt(_,"handleTouchMove",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&_.throttleTriggeredAfterMouseMove(j.changedTouches[0])}),Rt(_,"handleTouchStart",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&_.handleMouseDown(j.changedTouches[0])}),Rt(_,"handleTouchEnd",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&_.handleMouseUp(j.changedTouches[0])}),Rt(_,"handleDoubleClick",function(j){var A=_.props.onDoubleClick;if(Vt(A)){var E=_.getMouseInfo(j);A(E,j)}}),Rt(_,"handleContextMenu",function(j){var A=_.props.onContextMenu;if(Vt(A)){var E=_.getMouseInfo(j);A(E,j)}}),Rt(_,"triggerSyncEvent",function(j){_.props.syncId!==void 0&&SS.emit(NS,_.props.syncId,j,_.eventEmitterSymbol)}),Rt(_,"applySyncEvent",function(j){var A=_.props,E=A.layout,T=A.syncMethod,L=_.state.updateId,k=j.dataStartIndex,R=j.dataEndIndex;if(j.dataStartIndex!==void 0||j.dataEndIndex!==void 0)_.setState(Ue({dataStartIndex:k,dataEndIndex:R},h({props:_.props,dataStartIndex:k,dataEndIndex:R,updateId:L},_.state)));else if(j.activeTooltipIndex!==void 0){var D=j.chartX,q=j.chartY,X=j.activeTooltipIndex,se=_.state,Z=se.offset,K=se.tooltipTicks;if(!Z)return;if(typeof T=="function")X=T(K,j);else if(T==="value"){X=-1;for(var ie=0;ie<K.length;ie++)if(K[ie].value===j.activeLabel){X=ie;break}}var pe=Ue(Ue({},Z),{},{x:Z.left,y:Z.top}),me=Math.min(D,pe.x+pe.width),O=Math.min(q,pe.y+pe.height),F=K[X]&&K[X].value,B=V4(_.state,_.props.data,X),U=K[X]?{x:E==="horizontal"?K[X].coordinate:me,y:E==="horizontal"?O:K[X].coordinate}:gH;_.setState(Ue(Ue({},j),{},{activeLabel:F,activeCoordinate:U,activePayload:B,activeTooltipIndex:X}))}else _.setState(j)}),Rt(_,"renderCursor",function(j){var A,E=_.state,T=E.isTooltipActive,L=E.activeCoordinate,k=E.activePayload,R=E.offset,D=E.activeTooltipIndex,q=E.tooltipAxisBandSize,X=_.getTooltipEventType(),se=(A=j.props.active)!==null&&A!==void 0?A:T,Z=_.props.layout,K=j.key||"_recharts-cursor";return we.createElement(gIe,{key:K,activeCoordinate:L,activePayload:k,activeTooltipIndex:D,chartName:r,element:j,isActive:se,layout:Z,offset:R,tooltipAxisBandSize:q,tooltipEventType:X})}),Rt(_,"renderPolarAxis",function(j,A,E){var T=Ts(j,"type.axisType"),L=Ts(_.state,"".concat(T,"Map")),k=j.type.defaultProps,R=k!==void 0?Ue(Ue({},k),j.props):j.props,D=L&&L[R["".concat(T,"Id")]];return M.cloneElement(j,Ue(Ue({},D),{},{className:sr(T,D.className),key:j.key||"".concat(A,"-").concat(E),ticks:rc(D,!0)}))}),Rt(_,"renderPolarGrid",function(j){var A=j.props,E=A.radialLines,T=A.polarAngles,L=A.polarRadius,k=_.state,R=k.radiusAxisMap,D=k.angleAxisMap,q=du(R),X=du(D),se=X.cx,Z=X.cy,K=X.innerRadius,ie=X.outerRadius;return M.cloneElement(j,{polarAngles:Array.isArray(T)?T:rc(X,!0).map(function(pe){return pe.coordinate}),polarRadius:Array.isArray(L)?L:rc(q,!0).map(function(pe){return pe.coordinate}),cx:se,cy:Z,innerRadius:K,outerRadius:ie,key:j.key||"polar-grid",radialLines:E})}),Rt(_,"renderLegend",function(){var j=_.state.formattedGraphicalItems,A=_.props,E=A.children,T=A.width,L=A.height,k=_.props.margin||{},R=T-(k.left||0)-(k.right||0),D=Yz({children:E,formattedGraphicalItems:j,legendWidth:R,legendContent:u});if(!D)return null;var q=D.item,X=HR(D,vIe);return M.cloneElement(q,Ue(Ue({},X),{},{chartWidth:T,chartHeight:L,margin:k,onBBoxUpdate:_.handleLegendBBoxUpdate}))}),Rt(_,"renderTooltip",function(){var j,A=_.props,E=A.children,T=A.accessibilityLayer,L=xs(E,Ca);if(!L)return null;var k=_.state,R=k.isTooltipActive,D=k.activeCoordinate,q=k.activePayload,X=k.activeLabel,se=k.offset,Z=(j=L.props.active)!==null&&j!==void 0?j:R;return M.cloneElement(L,{viewBox:Ue(Ue({},se),{},{x:se.left,y:se.top}),active:Z,label:X,payload:Z?q:[],coordinate:D,accessibilityLayer:T})}),Rt(_,"renderBrush",function(j){var A=_.props,E=A.margin,T=A.data,L=_.state,k=L.offset,R=L.dataStartIndex,D=L.dataEndIndex,q=L.updateId;return M.cloneElement(j,{key:j.key||"_recharts-brush",onChange:Ux(_.handleBrushChange,j.props.onChange),data:T,x:et(j.props.x)?j.props.x:k.left,y:et(j.props.y)?j.props.y:k.top+k.height+k.brushBottom-(E.bottom||0),width:et(j.props.width)?j.props.width:k.width,startIndex:R,endIndex:D,updateId:"brush-".concat(q)})}),Rt(_,"renderReferenceElement",function(j,A,E){if(!j)return null;var T=_,L=T.clipPathId,k=_.state,R=k.xAxisMap,D=k.yAxisMap,q=k.offset,X=j.type.defaultProps||{},se=j.props,Z=se.xAxisId,K=Z===void 0?X.xAxisId:Z,ie=se.yAxisId,pe=ie===void 0?X.yAxisId:ie;return M.cloneElement(j,{key:j.key||"".concat(A,"-").concat(E),xAxis:R[K],yAxis:D[pe],viewBox:{x:q.left,y:q.top,width:q.width,height:q.height},clipPathId:L})}),Rt(_,"renderActivePoints",function(j){var A=j.item,E=j.activePoint,T=j.basePoint,L=j.childIndex,k=j.isRange,R=[],D=A.props.key,q=A.item.type.defaultProps!==void 0?Ue(Ue({},A.item.type.defaultProps),A.item.props):A.item.props,X=q.activeDot,se=q.dataKey,Z=Ue(Ue({index:L,dataKey:se,cx:E.x,cy:E.y,r:4,fill:$E(A.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},$t(X,!1)),wb(X));return R.push(y.renderActiveDot(X,Z,"".concat(D,"-activePoint-").concat(L))),T?R.push(y.renderActiveDot(X,Ue(Ue({},Z),{},{cx:T.x,cy:T.y}),"".concat(D,"-basePoint-").concat(L))):k&&R.push(null),R}),Rt(_,"renderGraphicChild",function(j,A,E){var T=_.filterFormatItem(j,A,E);if(!T)return null;var L=_.getTooltipEventType(),k=_.state,R=k.isTooltipActive,D=k.tooltipAxis,q=k.activeTooltipIndex,X=k.activeLabel,se=_.props.children,Z=xs(se,Ca),K=T.props,ie=K.points,pe=K.isRange,me=K.baseLine,O=T.item.type.defaultProps!==void 0?Ue(Ue({},T.item.type.defaultProps),T.item.props):T.item.props,F=O.activeDot,B=O.hide,U=O.activeBar,Y=O.activeShape,oe=!!(!B&&R&&Z&&(F||U||Y)),ee={};L!=="axis"&&Z&&Z.props.trigger==="click"?ee={onClick:Ux(_.handleItemMouseEnter,j.props.onClick)}:L!=="axis"&&(ee={onMouseLeave:Ux(_.handleItemMouseLeave,j.props.onMouseLeave),onMouseEnter:Ux(_.handleItemMouseEnter,j.props.onMouseEnter)});var te=M.cloneElement(j,Ue(Ue({},T.props),ee));function le(dt){return typeof D.dataKey=="function"?D.dataKey(dt.payload):null}if(oe)if(q>=0){var Ne,ve;if(D.dataKey&&!D.allowDuplicatedCategory){var Me=typeof D.dataKey=="function"?le:"payload.".concat(D.dataKey.toString());Ne=bj(ie,Me,X),ve=pe&&me&&bj(me,Me,X)}else Ne=ie==null?void 0:ie[q],ve=pe&&me&&me[q];if(Y||U){var Ie=j.props.activeIndex!==void 0?j.props.activeIndex:q;return[M.cloneElement(j,Ue(Ue(Ue({},T.props),ee),{},{activeIndex:Ie})),null,null]}if(!lr(Ne))return[te].concat(sp(_.renderActivePoints({item:T,activePoint:Ne,basePoint:ve,childIndex:q,isRange:pe})))}else{var Q,$e=(Q=_.getItemByXY(_.state.activeCoordinate))!==null&&Q!==void 0?Q:{graphicalItem:te},Re=$e.graphicalItem,it=Re.item,He=it===void 0?j:it,Ze=Re.childIndex,nt=Ue(Ue(Ue({},T.props),ee),{},{activeIndex:Ze});return[M.cloneElement(He,nt),null,null]}return pe?[te,null,null]:[te,null]}),Rt(_,"renderCustomized",function(j,A,E){return M.cloneElement(j,Ue(Ue({key:"recharts-customized-".concat(E)},_.props),_.state))}),Rt(_,"renderMap",{CartesianGrid:{handler:Vx,once:!0},ReferenceArea:{handler:_.renderReferenceElement},ReferenceLine:{handler:Vx},ReferenceDot:{handler:_.renderReferenceElement},XAxis:{handler:Vx},YAxis:{handler:Vx},Brush:{handler:_.renderBrush,once:!0},Bar:{handler:_.renderGraphicChild},Line:{handler:_.renderGraphicChild},Area:{handler:_.renderGraphicChild},Radar:{handler:_.renderGraphicChild},RadialBar:{handler:_.renderGraphicChild},Scatter:{handler:_.renderGraphicChild},Pie:{handler:_.renderGraphicChild},Funnel:{handler:_.renderGraphicChild},Tooltip:{handler:_.renderCursor,once:!0},PolarGrid:{handler:_.renderPolarGrid,once:!0},PolarAngleAxis:{handler:_.renderPolarAxis},PolarRadiusAxis:{handler:_.renderPolarAxis},Customized:{handler:_.renderCustomized}}),_.clipPathId="".concat((b=g.id)!==null&&b!==void 0?b:Zv("recharts"),"-clip"),_.throttleTriggeredAfterMouseMove=XU(_.triggeredAfterMouseMove,(S=g.throttleDelay)!==null&&S!==void 0?S:1e3/60),_.state={},_}return CIe(y,x),jIe(y,[{key:"componentDidMount",value:function(){var b,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,S=b.children,_=b.data,j=b.height,A=b.layout,E=xs(S,Ca);if(E){var T=E.props.defaultIndex;if(!(typeof T!="number"||T<0||T>this.state.tooltipTicks.length-1)){var L=this.state.tooltipTicks[T]&&this.state.tooltipTicks[T].value,k=V4(this.state,_,T,L),R=this.state.tooltipTicks[T].coordinate,D=(this.state.offset.top+j)/2,q=A==="horizontal",X=q?{x:R,y:D}:{y:R,x:D},se=this.state.formattedGraphicalItems.find(function(K){var ie=K.item;return ie.type.name==="Scatter"});se&&(X=Ue(Ue({},X),se.props.points[T].tooltipPosition),k=se.props.points[T].tooltipPayload);var Z={activeTooltipIndex:T,isTooltipActive:!0,activeLabel:L,activePayload:k,activeCoordinate:X};this.setState(Z),this.renderCursor(E),this.accessibilityManager.setIndex(T)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var _,j;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0}})}return null}},{key:"componentDidUpdate",value:function(b){_j([xs(b.children,Ca)],[xs(this.props.children,Ca)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=xs(this.props.children,Ca);if(b&&typeof b.props.shared=="boolean"){var S=b.props.shared?"axis":"item";return o.indexOf(S)>=0?S:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var S=this.container,_=S.getBoundingClientRect(),j=Uje(_),A={chartX:Math.round(b.pageX-j.left),chartY:Math.round(b.pageY-j.top)},E=_.width/S.offsetWidth||1,T=this.inRange(A.chartX,A.chartY,E);if(!T)return null;var L=this.state,k=L.xAxisMap,R=L.yAxisMap,D=this.getTooltipEventType(),q=VR(this.state,this.props.data,this.props.layout,T);if(D!=="axis"&&k&&R){var X=du(k).scale,se=du(R).scale,Z=X&&X.invert?X.invert(A.chartX):null,K=se&&se.invert?se.invert(A.chartY):null;return Ue(Ue({},A),{},{xValue:Z,yValue:K},q)}return q?Ue(Ue({},A),q):null}},{key:"inRange",value:function(b,S){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,j=this.props.layout,A=b/_,E=S/_;if(j==="horizontal"||j==="vertical"){var T=this.state.offset,L=A>=T.left&&A<=T.left+T.width&&E>=T.top&&E<=T.top+T.height;return L?{x:A,y:E}:null}var k=this.state,R=k.angleAxisMap,D=k.radiusAxisMap;if(R&&D){var q=du(R);return SL({x:A,y:E},q)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,S=this.getTooltipEventType(),_=xs(b,Ca),j={};_&&S==="axis"&&(_.props.trigger==="click"?j={onClick:this.handleClick}:j={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var A=wb(this.props,this.handleOuterEvent);return Ue(Ue({},A),j)}},{key:"addListener",value:function(){SS.on(NS,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){SS.removeListener(NS,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,S,_){for(var j=this.state.formattedGraphicalItems,A=0,E=j.length;A<E;A++){var T=j[A];if(T.item===b||T.props.key===b.key||S===oc(T.item.type)&&_===T.childIndex)return T}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,S=this.state.offset,_=S.left,j=S.top,A=S.height,E=S.width;return we.createElement("defs",null,we.createElement("clipPath",{id:b},we.createElement("rect",{x:_,y:j,height:A,width:E})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(S,_){var j=qR(_,2),A=j[0],E=j[1];return Ue(Ue({},S),{},Rt({},A,E.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(S,_){var j=qR(_,2),A=j[0],E=j[1];return Ue(Ue({},S),{},Rt({},A,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[b])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(b){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[b])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(b){var S=this.state,_=S.formattedGraphicalItems,j=S.activeItem;if(_&&_.length)for(var A=0,E=_.length;A<E;A++){var T=_[A],L=T.props,k=T.item,R=k.type.defaultProps!==void 0?Ue(Ue({},k.type.defaultProps),k.props):k.props,D=oc(k.type);if(D==="Bar"){var q=(L.data||[]).find(function(K){return EOe(b,K)});if(q)return{graphicalItem:T,payload:q}}else if(D==="RadialBar"){var X=(L.data||[]).find(function(K){return SL(b,K)});if(X)return{graphicalItem:T,payload:X}}else if(Gw(T,j)||Kw(T,j)||vv(T,j)){var se=mPe({graphicalItem:T,activeTooltipItem:j,itemData:R.data}),Z=R.activeIndex===void 0?se:R.activeIndex;return{graphicalItem:Ue(Ue({},T),{},{childIndex:Z}),payload:vv(T,j)?R.data[se]:T.props.data[se]}}}return null}},{key:"render",value:function(){var b=this;if(!pP(this))return null;var S=this.props,_=S.children,j=S.className,A=S.width,E=S.height,T=S.style,L=S.compact,k=S.title,R=S.desc,D=HR(S,xIe),q=$t(D,!1);if(L)return we.createElement(TR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},we.createElement(Nj,Bh({},q,{width:A,height:E,title:k,desc:R}),this.renderClipPath(),gP(_,this.renderMap)));if(this.props.accessibilityLayer){var X,se;q.tabIndex=(X=this.props.tabIndex)!==null&&X!==void 0?X:0,q.role=(se=this.props.role)!==null&&se!==void 0?se:"application",q.onKeyDown=function(K){b.accessibilityManager.keyboardEvent(K)},q.onFocus=function(){b.accessibilityManager.focus()}}var Z=this.parseEventsOfWrapper();return we.createElement(TR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},we.createElement("div",Bh({className:sr("recharts-wrapper",j),style:Ue({position:"relative",cursor:"default",width:A,height:E},T)},Z,{ref:function(ie){b.container=ie}}),we.createElement(Nj,Bh({},q,{width:A,height:E,title:k,desc:R,style:IIe}),this.renderClipPath(),gP(_,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(M.Component);Rt(v,"displayName",r),Rt(v,"defaultProps",Ue({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Rt(v,"getDerivedStateFromProps",function(x,y){var g=x.dataKey,b=x.data,S=x.children,_=x.width,j=x.height,A=x.layout,E=x.stackOffset,T=x.margin,L=y.dataStartIndex,k=y.dataEndIndex;if(y.updateId===void 0){var R=GR(x);return Ue(Ue(Ue({},R),{},{updateId:0},h(Ue(Ue({props:x},R),{},{updateId:0}),y)),{},{prevDataKey:g,prevData:b,prevWidth:_,prevHeight:j,prevLayout:A,prevStackOffset:E,prevMargin:T,prevChildren:S})}if(g!==y.prevDataKey||b!==y.prevData||_!==y.prevWidth||j!==y.prevHeight||A!==y.prevLayout||E!==y.prevStackOffset||!s0(T,y.prevMargin)){var D=GR(x),q={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},X=Ue(Ue({},VR(y,b,A)),{},{updateId:y.updateId+1}),se=Ue(Ue(Ue({},D),q),X);return Ue(Ue(Ue({},se),h(Ue({props:x},se),y)),{},{prevDataKey:g,prevData:b,prevWidth:_,prevHeight:j,prevLayout:A,prevStackOffset:E,prevMargin:T,prevChildren:S})}if(!_j(S,y.prevChildren)){var Z,K,ie,pe,me=xs(S,J0),O=me&&(Z=(K=me.props)===null||K===void 0?void 0:K.startIndex)!==null&&Z!==void 0?Z:L,F=me&&(ie=(pe=me.props)===null||pe===void 0?void 0:pe.endIndex)!==null&&ie!==void 0?ie:k,B=O!==L||F!==k,U=!lr(b),Y=U&&!B?y.updateId:y.updateId+1;return Ue(Ue({updateId:Y},h(Ue(Ue({props:x},y),{},{updateId:Y,dataStartIndex:O,dataEndIndex:F}),y)),{},{prevChildren:S,dataStartIndex:O,dataEndIndex:F})}return null}),Rt(v,"renderActiveDot",function(x,y,g){var b;return M.isValidElement(x)?b=M.cloneElement(x,y):Vt(x)?b=x(y):b=we.createElement(UE,y),we.createElement($r,{className:"recharts-active-dot",key:g},b)});var m=M.forwardRef(function(y,g){return we.createElement(v,Bh({},y,{ref:g}))});return m.displayName=v.displayName,m},op=xH({chartName:"BarChart",GraphicalChild:Xi,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Nc},{axisType:"yAxis",AxisComp:jc}],formatAxisMap:G8e}),JE=xH({chartName:"PieChart",GraphicalChild:Ho,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Vw},{axisType:"radiusAxis",AxisComp:Hw}],formatAxisMap:MTe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Tm={ASIGNADA:"#3b82f6",RECUPERADA:"#8b5cf6",CERRADA:"#6b7280",PERDIDA:"#ef4444",DETERIORO:"#f97316"},WIe=({loans:e})=>{const t=M.useMemo(()=>{const a={},i=new Date;for(let s=7;s>=0;s--){const o=new Date(i);o.setDate(o.getDate()-s*7);const c=`S${8-s}`;a[c]=0}return e.forEach(s=>{const o=new Date(s.issued_at),c=Math.floor((i.getTime()-o.getTime())/(1e3*60*60*24*7));if(c>=0&&c<8){const u=`S${8-c}`;a[u]!==void 0&&a[u]++}}),Object.entries(a).map(([s,o])=>({week:s,count:o}))},[e]),r=M.useMemo(()=>{const a=e.filter(s=>s.reason==="PERDIDA").length,i=e.filter(s=>s.reason==="DETERIORO").length;return[{name:"Perdida",value:a,color:Tm.PERDIDA},{name:"Deterioro",value:i,color:Tm.DETERIORO}].filter(s=>s.value>0)},[e]),n=M.useMemo(()=>Gu.map(a=>{const i=e.filter(s=>{var o;return((o=s.backup_cards)==null?void 0:o.inventory_terminal)===a});return{terminal:a.split(" ")[0],ASIGNADA:i.filter(s=>s.status==="ASIGNADA").length,RECUPERADA:i.filter(s=>s.status==="RECUPERADA").length,CERRADA:i.filter(s=>s.status==="CERRADA").length}}),[e]);return l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Prestamos por Semana"}),l.jsx("div",{className:"h-48",children:l.jsx(cc,{width:"100%",height:"100%",children:l.jsxs(op,{data:t,children:[l.jsx(Cf,{strokeDasharray:"3 3",vertical:!1}),l.jsx(Nc,{dataKey:"week",tick:{fontSize:11}}),l.jsx(jc,{tick:{fontSize:11},allowDecimals:!1}),l.jsx(Ca,{}),l.jsx(Xi,{dataKey:"count",name:"Prestamos",fill:"#3b82f6",radius:[4,4,0,0]})]})})})]}),l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Motivo de Solicitud"}),l.jsx("div",{className:"h-48",children:r.length>0?l.jsx(cc,{width:"100%",height:"100%",children:l.jsxs(JE,{children:[l.jsx(Ho,{data:r,cx:"50%",cy:"50%",innerRadius:40,outerRadius:70,paddingAngle:2,dataKey:"value",label:({name:a,percent:i})=>`${a} ${(i*100).toFixed(0)}%`,labelLine:!1,children:r.map((a,i)=>l.jsx(Rc,{fill:a.color},`cell-${i}`))}),l.jsx(Ca,{})]})}):l.jsx("div",{className:"h-full flex items-center justify-center text-slate-400 text-sm",children:"Sin datos"})})]}),l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Estado por Terminal"}),l.jsx("div",{className:"h-48",children:l.jsx(cc,{width:"100%",height:"100%",children:l.jsxs(op,{data:n,layout:"vertical",children:[l.jsx(Cf,{strokeDasharray:"3 3",horizontal:!1}),l.jsx(Nc,{type:"number",tick:{fontSize:11},allowDecimals:!1}),l.jsx(jc,{type:"category",dataKey:"terminal",tick:{fontSize:11},width:60}),l.jsx(Ca,{}),l.jsx(lc,{wrapperStyle:{fontSize:10}}),l.jsx(Xi,{dataKey:"ASIGNADA",name:"Asignada",stackId:"a",fill:Tm.ASIGNADA}),l.jsx(Xi,{dataKey:"RECUPERADA",name:"Recuperada",stackId:"a",fill:Tm.RECUPERADA}),l.jsx(Xi,{dataKey:"CERRADA",name:"Cerrada",stackId:"a",fill:Tm.CERRADA})]})})})]})]})},b2=e=>e.replace(/[.\-\s]/g,"").toUpperCase(),kf=e=>{const t=b2(e);if(t.length<2)return t;const r=t.slice(0,-1),n=t.slice(-1);return`${r.replace(/\B(?=(\d{3})+(?!\d))/g,".")}-${n}`},XR=e=>{const t=b2(e);if(t.length<8||t.length>9)return!1;const r=t.slice(0,-1),n=t.slice(-1);if(!/^\d+$/.test(r))return!1;let a=0,i=2;for(let c=r.length-1;c>=0;c--)a+=parseInt(r[c])*i,i=i===7?2:i+1;const s=a%11,o=s===0?"0":s===1?"K":String(11-s);return n===o},VIe=({status:e,isOverdue:t})=>{const r="inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded-full";if(t&&e==="ASIGNADA")return l.jsxs("span",{className:`${r} bg-amber-100 text-amber-800`,children:[l.jsx(ow,{className:"w-3 h-3"}),"ATRASADA"]});const n={ASIGNADA:"bg-blue-100 text-blue-800",RECUPERADA:"bg-emerald-100 text-emerald-800",CERRADA:"bg-slate-100 text-slate-700",CANCELADA:"bg-red-100 text-red-800"};return l.jsx("span",{className:`${r} ${n[e]||"bg-slate-100 text-slate-700"}`,children:e})},GIe=({reason:e})=>{const t={PERDIDA:"bg-red-50 text-red-700",DETERIORO:"bg-orange-50 text-orange-700"};return l.jsx("span",{className:`inline-block px-2 py-0.5 text-xs font-medium rounded ${t[e]||""}`,children:e==="PERDIDA"?"Perdida":"Deterioro"})},KIe=({loans:e,onView:t,onEdit:r,onRecover:n,onCancel:a,onResendEmails:i})=>{const s=M.useMemo(()=>{const o=new Date;return e.map(c=>{const u=new Date(c.issued_at),d=Math.floor((o.getTime()-u.getTime())/(1e3*60*60*24));return{...c,daysPassed:d,isOverdue:c.status==="ASIGNADA"&&d>c.alert_after_days}})},[e]);return e.length===0?l.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:l.jsx("p",{className:"text-slate-500",children:"No se encontraron prestamos con los filtros seleccionados."})}):l.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[l.jsx("thead",{className:"bg-slate-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Trabajador"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"RUT"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Terminal"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Tarjeta"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Motivo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Entrega"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Dias"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Acciones"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:s.map(o=>{var c,u;return l.jsxs("tr",{className:`hover:bg-slate-50 ${o.isOverdue?"bg-amber-50/50":""}`,children:[l.jsxs("td",{className:"px-4 py-3 whitespace-nowrap",children:[l.jsx("p",{className:"text-sm font-medium text-slate-900",children:o.person_name}),l.jsx("p",{className:"text-xs text-slate-500",children:o.person_cargo||"-"})]}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-700",children:kf(o.person_rut)}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-700",children:o.person_terminal}),l.jsxs("td",{className:"px-4 py-3 whitespace-nowrap",children:[l.jsx("p",{className:"text-sm font-mono text-slate-900",children:((c=o.backup_cards)==null?void 0:c.card_number)||"-"}),l.jsx("p",{className:"text-xs text-slate-500",children:(u=o.backup_cards)==null?void 0:u.inventory_terminal})]}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:l.jsx(GIe,{reason:o.reason})}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-700",children:new Date(o.issued_at).toLocaleDateString("es-CL")}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:l.jsxs("span",{className:`text-sm font-medium ${o.isOverdue?"text-amber-600":"text-slate-700"}`,children:[o.daysPassed,"d"]})}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:l.jsx(VIe,{status:o.status,isOverdue:o.isOverdue})}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[l.jsx("button",{onClick:()=>t(o),className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded",title:"Ver detalle",children:l.jsx(V0e,{className:"w-4 h-4"})}),o.status==="ASIGNADA"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>r(o),className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded",title:"Editar",children:l.jsx(dpe,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>n(o),className:"p-1.5 text-slate-400 hover:text-emerald-600 hover:bg-emerald-50 rounded",title:"Marcar recuperada",children:l.jsx(PB,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>a(o),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Cancelar",children:l.jsx(yc,{className:"w-4 h-4"})})]}),l.jsx("button",{onClick:()=>i(o),className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded",title:"Reenviar correos",children:l.jsx(kB,{className:"w-4 h-4"})})]})})]},o.id)})})]})})})},XIe=async(e,t)=>{let r=Le.from("backup_cards").select("*").order("card_number",{ascending:!0});e&&e!=="TODAS"&&(r=r.eq("status",e)),t&&(r=r.eq("inventory_terminal",t));const{data:n,error:a}=await r;if(a)throw a;return n},YIe=async e=>{let t=Le.from("backup_cards").select("*").eq("status","LIBRE").order("card_number");e&&(t=t.eq("inventory_terminal",e));const{data:r,error:n}=await t;if(n)throw n;return r},JIe=async e=>{const{data:t,error:r}=await Le.from("backup_cards").insert({card_number:e.card_number,inventory_terminal:e.inventory_terminal,notes:e.notes||null,status:"LIBRE"}).select().single();if(r)throw r;return t},QIe=async e=>{const{error:t}=await Le.from("backup_cards").update({status:"INACTIVA"}).eq("id",e);if(t)throw t},ZIe=async e=>{let t=Le.from("backup_loans").select("*, backup_cards(*)").order("issued_at",{ascending:!1});e&&(e.search&&(t=t.or(`person_rut.ilike.%${e.search}%,person_name.ilike.%${e.search}%`)),e.terminal&&(t=t.eq("person_terminal",e.terminal)),e.status&&e.status!=="TODAS"&&(t=t.eq("status",e.status)),e.reason&&e.reason!=="TODAS"&&(t=t.eq("reason",e.reason)),e.dateFrom&&(t=t.gte("issued_at",e.dateFrom)),e.dateTo&&(t=t.lte("issued_at",e.dateTo+"T23:59:59")));const{data:r,error:n}=await t;if(n)throw n;return r},eDe=async e=>{const{data:t,error:r}=await Le.from("backup_loans").insert({card_id:e.card_id,person_rut:e.person_rut,person_name:e.person_name,person_cargo:e.person_cargo||null,person_terminal:e.person_terminal,person_turno:e.person_turno||null,person_horario:e.person_horario||null,person_contacto:e.person_contacto||null,boss_email:e.worker_email||null,reason:e.reason,requested_at:e.requested_at,discount_amount:e.discount_amount,discount_applied:e.discount_applied,created_by_supervisor:e.created_by_supervisor,status:"ASIGNADA"}).select("*, backup_cards(*)").single();if(r)throw r;const{error:n}=await Le.from("backup_cards").update({status:"ASIGNADA"}).eq("id",e.card_id);if(n)throw n;return t},tDe=async(e,t,r)=>{const{data:n,error:a}=await Le.from("backup_loans").select("card_id").eq("id",e).single();if(a)throw a;const{error:i}=await Le.from("backup_loans").update({status:"CERRADA",recovered_at:t,closed_at:new Date().toISOString()}).eq("id",e);if(i)throw i;const{error:s}=await Le.from("backup_cards").update({status:"LIBRE"}).eq("id",n.card_id);if(s)throw s},rDe=async(e,t)=>{const{data:r,error:n}=await Le.from("backup_loans").select("card_id").eq("id",e).single();if(n)throw n;const{error:a}=await Le.from("backup_loans").update({status:"CANCELADA",cancel_reason:t,closed_at:new Date().toISOString()}).eq("id",e);if(a)throw a;const{error:i}=await Le.from("backup_cards").update({status:"LIBRE"}).eq("id",r.card_id);if(i)throw i},nDe=async e=>{const{error:t}=await Le.from("backup_loans").update({emails_sent_at:new Date().toISOString()}).eq("id",e);if(t)throw t},yH=async()=>{const{data:e,error:t}=await Le.from("backup_email_settings").select("*").order("scope_type",{ascending:!1});if(t)throw t;return e},aDe=async e=>{const{data:t,error:r}=await Le.from("backup_email_settings").upsert(e,{onConflict:"scope_type,scope_code"}).select().single();if(r)throw r;return t},iDe=async()=>{const{data:e,error:t}=await Le.from("backup_cards").select("inventory_terminal, status");if(t)throw t;const r={"El Roble":0,"La Reina":0,"Maria Angelica":0};e==null||e.forEach(h=>{if(h.status==="LIBRE"){const v=h.inventory_terminal;Gu.includes(v)&&r[v]++}});const{data:n,error:a}=await Le.from("backup_loans").select("id, issued_at, alert_after_days, discount_amount, discount_applied").eq("status","ASIGNADA");if(a)throw a;const i=new Date;let s=0,o=0;n==null||n.forEach(h=>{const v=new Date(h.issued_at);Math.floor((i.getTime()-v.getTime())/(1e3*60*60*24))>h.alert_after_days&&s++,h.discount_applied&&(o+=h.discount_amount)});const c=new Date;c.setDate(c.getDate()-30);const{data:u,error:d}=await Le.from("backup_loans").select("issued_at, recovered_at, discount_amount, discount_applied").in("status",["RECUPERADA","CERRADA"]).gte("closed_at",c.toISOString());if(d)throw d;let f=0,p=0;return u==null||u.forEach(h=>{if(h.recovered_at){const v=new Date(h.issued_at),m=new Date(h.recovered_at),x=Math.floor((m.getTime()-v.getTime())/(1e3*60*60*24));f+=x,p++}h.discount_applied&&(o+=h.discount_amount)}),{availableByTerminal:r,activeLoans:(n==null?void 0:n.length)||0,overdueLoans:s,avgReturnDays:p>0?Math.round(f/p):0,totalDiscounts:o}},bi={user:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="9" cy="5" r="3.5" stroke="#64748b" stroke-width="1.5"/>
        <path d="M2 16C2 12.686 5.13401 10 9 10C12.866 10 16 12.686 16 16" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,id:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="1.5" y="3.5" width="15" height="11" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <circle cx="6" cy="8" r="1.5" stroke="#64748b" stroke-width="1"/>
        <path d="M4 12C4 10.8954 4.89543 10 6 10C7.10457 10 8 10.8954 8 12" stroke="#64748b" stroke-width="1"/>
        <path d="M10.5 7.5H14.5M10.5 10H13" stroke="#64748b" stroke-width="1.2" stroke-linecap="round"/>
    </svg>`,building:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M2 16V3.5C2 3.22386 2.22386 3 2.5 3H9.5C9.77614 3 10 3.22386 10 3.5V16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M10 7H14.5C14.7761 7 15 7.22386 15 7.5V16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M5 6H7M5 9H7M5 12H7M12 10H13M12 13H13" stroke="#64748b" stroke-width="1.2" stroke-linecap="round"/>
        <path d="M1 16H17" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,calendar:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="2" y="3.5" width="14" height="12" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <path d="M2 7H16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M5.5 1.5V4.5M12.5 1.5V4.5" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,card:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="1" y="3" width="16" height="12" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <path d="M1 7H17" stroke="#64748b" stroke-width="1.5"/>
        <path d="M4 11H8" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,warning:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M9 6V10M9 12.5V13" stroke="#f59e0b" stroke-width="1.5" stroke-linecap="round"/>
        <path d="M3 15L9 3L15 15H3Z" stroke="#f59e0b" stroke-width="1.5" stroke-linejoin="round"/>
    </svg>`,money:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="9" cy="9" r="7" stroke="#64748b" stroke-width="1.5"/>
        <path d="M9 5V13M11 7H7.5C6.67157 7 6 7.67157 6 8.5C6 9.32843 6.67157 10 7.5 10H10.5C11.3284 10 12 10.6716 12 11.5C12 12.3284 11.3284 13 10.5 13H6" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,supervisor:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="9" cy="6" r="3" stroke="#64748b" stroke-width="1.5"/>
        <path d="M3 16C3 13.2386 5.68629 11 9 11C12.3137 11 15 13.2386 15 16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M9 3L10 1.5L11 3" stroke="#f59e0b" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`},wi=(e,t,r,n=!1)=>`
    <tr>
        <td style="padding: 14px 16px; border-bottom: 1px solid #e2e8f0; width: 40%; vertical-align: middle;">
            <table role="presentation" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="padding-right: 12px; vertical-align: middle;">${e}</td>
                    <td style="font-size: 11px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">${t}</td>
                </tr>
            </table>
        </td>
        <td style="padding: 14px 16px; border-bottom: 1px solid #e2e8f0; font-size: 14px; font-weight: ${n?"700":"500"}; color: ${n?"#0f172a":"#334155"}; text-align: right;">${r}</td>
    </tr>
`,sDe=e=>new Date(e).toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),oDe=async(e,t,r,n)=>{var f;const a=((f=e.backup_cards)==null?void 0:f.card_number)||"N/A",i=e.person_terminal,s=e.reason==="PERDIDA"?"Prdida de Credencial":"Deterioro de Credencial",o=sDe(e.issued_at),c=n?[n]:void 0,u=e.reason==="PERDIDA"?"#ef4444":"#f59e0b",d=e.reason==="PERDIDA"?"#fef2f2":"#fffbeb";try{const p=`Solicitud Nueva Credencial - ${e.person_name}`,h=`
            <!-- Status Banner -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td style="background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 12px; padding: 24px; text-align: center;">
                        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                            <tr>
                                <td align="center" style="padding-bottom: 8px;">
                                    <svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="28" cy="28" r="26" fill="#dbeafe" stroke="#3b82f6" stroke-width="3"/>
                                        <rect x="18" y="20" width="20" height="16" rx="2" stroke="#2563eb" stroke-width="2.5"/>
                                        <circle cx="24" cy="27" r="3" stroke="#2563eb" stroke-width="2"/>
                                        <path d="M20 33C20 31 21.5 29 24 29C26.5 29 28 31 28 33" stroke="#2563eb" stroke-width="2"/>
                                        <path d="M31 25H35M31 29H34" stroke="#2563eb" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                </td>
                            </tr>
                            <tr>
                                <td align="center">
                                    <span style="font-size: 11px; font-weight: 700; color: #1e40af; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 4px;">Accin Requerida</span>
                                    <span style="font-size: 20px; font-weight: 800; color: #1d4ed8; letter-spacing: -0.5px;">SOLICITUD DE NUEVA CREDENCIAL</span>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
            
            <!-- Reason Badge -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td align="center">
                        <span style="display: inline-block; padding: 8px 20px; background: ${d}; border: 1px solid ${u}; border-radius: 100px; color: ${u}; font-size: 12px; font-weight: 700; letter-spacing: 0.5px; text-transform: uppercase;">${s}</span>
                    </td>
                </tr>
            </table>
            
            <!-- Worker Data Section -->
            <p style="margin: 0 0 12px 0; font-size: 12px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">Datos del Trabajador</p>
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate; margin-bottom: 24px;">
                ${wi(bi.user,"Nombre",e.person_name,!0)}
                ${wi(bi.id,"RUT",e.person_rut)}
                ${wi(bi.building,"Terminal",i)}
                ${wi(bi.id,"Cargo",e.person_cargo||"No especificado")}
            </table>
            
            <!-- Backup Info Section -->
            <p style="margin: 0 0 12px 0; font-size: 12px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">Informacin del Respaldo</p>
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate; margin-bottom: 24px;">
                ${wi(bi.card,"Tarjeta Asignada",`N ${a}`,!0)}
                ${wi(bi.calendar,"Fecha Solicitud",e.requested_at)}
                ${wi(bi.supervisor,"Supervisor Entrega",e.created_by_supervisor)}
            </table>
            
            <!-- Action Message -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 16px;">
                <tr>
                    <td style="padding: 20px; background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 12px;">
                        <p style="margin: 0; font-size: 14px; color: #166534; font-weight: 600; text-align: center;">
                             Por favor proceder con la emisin de una nueva credencial para este trabajador.
                        </p>
                    </td>
                </tr>
            </table>
            
            ${n?`
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="padding: 12px 16px; background: #fef3c7; border: 1px solid #fde68a; border-radius: 8px;">
                        <p style="margin: 0; font-size: 13px; color: #92400e; font-weight: 500;">
                             <strong>Documento adjunto:</strong> Autorizacin de descuento firmada
                        </p>
                    </td>
                </tr>
            </table>
            `:""}
        `.trim();await gl.sendEmail({audience:"manual",manualRecipients:[t],cc:r?r.split(",").map(x=>x.trim()).filter(Boolean):void 0,subject:p,body:h,attachments:c,module:"credenciales"});const v=`Notificacin Credencial Respaldo - ${e.person_name}`,m=`
            <!-- Status Banner -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td style="background: #fef3c7; border: 1px solid #fde68a; border-radius: 12px; padding: 24px; text-align: center;">
                        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                            <tr>
                                <td align="center" style="padding-bottom: 8px;">
                                    <svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="28" cy="28" r="26" fill="#fef9c3" stroke="#eab308" stroke-width="3"/>
                                        <path d="M28 18V32M28 36V38" stroke="#ca8a04" stroke-width="4" stroke-linecap="round"/>
                                    </svg>
                                </td>
                            </tr>
                            <tr>
                                <td align="center">
                                    <span style="font-size: 11px; font-weight: 700; color: #92400e; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 4px;">Notificacin Importante</span>
                                    <span style="font-size: 18px; font-weight: 800; color: #b45309; letter-spacing: -0.5px;">CREDENCIAL DE RESPALDO ASIGNADA</span>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
            
            <!-- Intro Message -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td style="padding: 16px 20px; background: #f8fafc; border-radius: 12px;">
                        <p style="margin: 0; font-size: 14px; color: #475569; line-height: 1.6;">
                            Se le informa que el trabajador a su cargo <strong style="color: #0f172a;">${e.person_name}</strong> utilizar una tarjeta de respaldo mientras se gestiona una nueva credencial.
                        </p>
                    </td>
                </tr>
            </table>
            
            <!-- Worker Data Section -->
            <p style="margin: 0 0 12px 0; font-size: 12px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">Datos del Trabajador</p>
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate; margin-bottom: 24px;">
                ${wi(bi.user,"Nombre",e.person_name,!0)}
                ${wi(bi.id,"RUT",e.person_rut)}
                ${wi(bi.building,"Terminal",i)}
                ${wi(bi.id,"Cargo",e.person_cargo||"No especificado")}
            </table>
            
            <!-- Backup Info Section -->
            <p style="margin: 0 0 12px 0; font-size: 12px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">Informacin del Respaldo</p>
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate; margin-bottom: 24px;">
                ${wi(bi.card,"Tarjeta Asignada",`N ${a}`,!0)}
                ${wi(bi.warning,"Motivo",s)}
                ${wi(bi.calendar,"Fecha de Entrega",o)}
                ${e.discount_applied?wi(bi.money,"Descuento Aplicado",`$${e.discount_amount.toLocaleString("es-CL")} (1 cuota)`,!0):""}
            </table>
            
            <!-- Important Notice -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 16px;">
                <tr>
                    <td style="padding: 20px; background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 12px;">
                        <p style="margin: 0; font-size: 14px; color: #1e40af; font-weight: 500; text-align: center;">
                             Una vez que el trabajador reciba su nueva credencial, deber devolver la tarjeta de respaldo.
                        </p>
                    </td>
                </tr>
            </table>
            
            ${n?`
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td style="padding: 12px 16px; background: #fef3c7; border: 1px solid #fde68a; border-radius: 8px;">
                        <p style="margin: 0; font-size: 13px; color: #92400e; font-weight: 500;">
                             <strong>Documento adjunto:</strong> Autorizacin de descuento firmada
                        </p>
                    </td>
                </tr>
            </table>
            `:""}
            
            <!-- Signature -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="padding-top: 16px; border-top: 1px solid #e2e8f0;">
                        <p style="margin: 0; font-size: 14px; color: #64748b;">Saludos cordiales,</p>
                        <p style="margin: 4px 0 0 0; font-size: 14px; font-weight: 700; color: #0f172a;">Gestin de Personal</p>
                    </td>
                </tr>
            </table>
        `.trim();return e.boss_email&&await gl.sendEmail({audience:"manual",manualRecipients:[e.boss_email],subject:v,body:m,module:"credenciales"}),await nDe(e.id),{success:!0}}catch(p){return console.error("Error sending backup emails:",p),{success:!1,error:p instanceof Error?p.message:"Error desconocido al enviar correos"}}},lDe=({isOpen:e,onClose:t,onSubmit:r,isLoading:n,supervisorName:a})=>{const i=M.useRef(null),[s,o]=M.useState({person_rut:"",person_name:"",person_cargo:"",person_terminal:"EL_ROBLE",person_turno:"",person_horario:"",person_contacto:"",worker_email:"",reason:"PERDIDA",requested_at:new Date().toISOString().split("T")[0],card_id:"",discount_applied:!0,discount_amount:5e3,send_emails:!0,created_by_supervisor:a}),[c,u]=M.useState(""),[d,f]=M.useState(""),{data:p=[]}=Ut({queryKey:["backup-cards-available",c],queryFn:()=>YIe(c||void 0),enabled:e}),h=async()=>{const x=b2(s.person_rut);if(!x)return;if(!XR(x)){f("RUT invalido");return}f("");const{data:y}=await Le.from("staff").select("nombre, cargo, terminal_code, turno, horario, contacto").eq("rut",x).single();o(y?g=>({...g,person_rut:kf(x),person_name:y.nombre,person_cargo:y.cargo||"",person_terminal:y.terminal_code||"EL_ROBLE",person_turno:y.turno||"",person_horario:y.horario||"",person_contacto:y.contacto||""}):g=>({...g,person_rut:kf(x)}))},v=async x=>{if(x.preventDefault(),!XR(b2(s.person_rut))){f("RUT invalido");return}await r(s,m)},m=()=>{const x=window.open("","_blank");if(x){const y=new Date().toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"});x.document.write(`
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autorizacin de Descuento - ${s.person_name||"RBU"}</title>
    <style>
        @page { size: letter; margin: 15mm 20mm; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: Arial, Helvetica, sans-serif;
            background-color: white;
            padding: 0;
            color: #000;
            font-size: 12px;
            line-height: 1.4;
        }

        .page {
            width: 100%;
            max-width: 210mm;
            margin: 0 auto;
        }

        /* Header Styles */
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 5px;
            padding-bottom: 5px;
            border-bottom: 3px solid black;
        }

        /* Logo RBU con camion CSS */
        .logo-container {
            position: relative;
            width: 150px;
            height: 50px;
        }
        .truck-body {
            border: 4px solid #003399;
            border-radius: 8px;
            width: 120px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            top: 0;
            left: 0;
            background: white;
            z-index: 2;
        }
        .truck-cab {
            position: absolute;
            top: 5px;
            right: 15px;
            width: 25px;
            height: 35px;
            border-top: 4px solid #003399;
            border-right: 4px solid #003399;
            border-radius: 0 5px 0 0;
        }
        .logo-text {
            color: #cc0000;
            font-weight: 900;
            font-size: 32px;
            font-family: 'Arial Black', Arial, sans-serif;
            letter-spacing: -2px;
        }
        .wheel {
            width: 12px;
            height: 12px;
            border: 4px solid #003399;
            border-radius: 50%;
            position: absolute;
            bottom: -5px;
            background: white;
            z-index: 3;
        }
        .w1 { left: 20px; }
        .w2 { left: 90px; }

        .rbu-santiago {
            color: #cc0000;
            font-weight: bold;
            font-size: 14px;
        }

        .title-bar {
            background-color: black;
            color: white;
            text-align: center;
            padding: 8px 0;
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 25px;
        }

        /* Form Fields */
        .field-row {
            display: flex;
            margin-bottom: 20px;
            align-items: flex-end;
        }
        
        .field-label {
            font-weight: bold;
            font-size: 11px;
            white-space: nowrap;
            margin-right: 10px;
        }

        .field-line {
            border-bottom: 2px solid black;
            flex-grow: 1;
            min-height: 18px;
            padding-left: 5px;
            font-size: 12px;
        }

        .rut-row {
            display: flex;
            justify-content: space-between;
        }
        
        .rut-container {
            display: flex;
            width: 38%;
            align-items: flex-end;
        }
        
        .cargo-container {
            display: flex;
            width: 55%;
            align-items: flex-end;
        }

        /* Authorization Text */
        .auth-text {
            text-align: center;
            font-weight: bold;
            margin: 25px 0;
            font-size: 13px;
            letter-spacing: 0.5px;
        }

        .amount-row {
            display: flex;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 12px;
            gap: 20px;
        }

        .concept-row {
            margin-left: 30px;
            margin-bottom: 5px;
            font-size: 13px;
        }
        .desc-small {
            font-size: 10px;
            margin-left: 30px;
            margin-bottom: 18px;
            color: #555;
        }

        /* Right aligned details */
        .details-right {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            margin-right: 20px;
        }
        
        .detail-item {
            display: flex;
            align-items: flex-end;
            margin-bottom: 8px;
            width: 280px;
            justify-content: flex-end;
        }
        
        .detail-item label {
            font-size: 11px;
            margin-right: 10px;
        }
        
        .detail-value {
            border-bottom: 2px solid black;
            width: 110px;
            text-align: right;
            font-weight: bold;
            font-size: 14px;
            padding-bottom: 2px;
            padding-right: 5px;
        }

        /* Signature & Date */
        .sig-date-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-top: 30px;
            margin-bottom: 10px;
            font-style: italic;
            font-size: 11px;
            font-weight: bold;
        }
        .date-val {
            font-size: 12px;
            font-style: normal;
        }

        .signature-line {
            border-bottom: 2px solid black;
            width: 200px;
            margin-top: 40px;
        }

        .legal-text {
            font-size: 9px;
            text-align: justify;
            line-height: 1.3;
            margin: 15px 0;
            padding-top: 10px;
            border-top: 1px solid #ccc;
        }

        /* Observations Box */
        .obs-header {
            background-color: #333;
            color: white;
            font-weight: bold;
            text-align: center;
            font-size: 11px;
            padding: 4px;
            border: 2px solid black;
            border-bottom: none;
        }
        .obs-box {
            border: 2px solid black;
            height: 50px;
            margin-bottom: 30px;
        }

        /* Footer */
        .footer-line {
            border-top: 3px solid black;
            padding-top: 8px;
            text-align: center;
            font-size: 10px;
            font-weight: bold;
            margin-top: 20px;
        }
        .company-name {
            text-align: right;
            font-weight: bold;
            margin-top: 15px;
            font-size: 11px;
            border-bottom: 2px solid black;
            display: inline-block;
            float: right;
            padding-bottom: 2px;
            text-decoration: underline;
        }

        /* Bottom Detail Section */
        .bottom-detail-title {
            text-align: center;
            font-style: italic;
            font-weight: bold;
            font-size: 14px;
            margin-top: 30px;
            margin-bottom: 10px;
            clear: both;
        }
        
        .bottom-table {
            width: 100%;
            font-size: 11px;
            overflow: hidden;
        }
        .bt-left { 
            float: left; 
            font-weight: bold;
        }
        .bt-right { 
            float: right; 
            text-align: center;
        }
        .costo-header {
            font-weight: bold;
            font-size: 10px;
            margin-bottom: 3px;
            color: #555;
        }

        @media print {
            body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
        }
    </style>
</head>
<body>

    <div class="page">
        <div class="header-top">
            <div class="logo-container">
                <div class="truck-cab"></div>
                <div class="truck-body">
                    <span class="logo-text">RBU</span>
                </div>
                <div class="wheel w1"></div>
                <div class="wheel w2"></div>
            </div>
            <div class="rbu-santiago">RBU Santiago.</div>
        </div>

        <div class="title-bar">
            Autorizacin de Descuento
        </div>

        <div class="field-row">
            <span class="field-label">NOMBRE DEL<br>TRABAJADOR:</span>
            <div class="field-line">${s.person_name||""}</div>
        </div>

        <div class="field-row rut-row">
            <div class="rut-container">
                <span class="field-label">RUT :</span>
                <div class="field-line">${s.person_rut||""}</div>
            </div>
            <div class="cargo-container">
                <span class="field-label">Cargo desempeado:</span>
                <div class="field-line">${s.person_cargo||""}</div>
            </div>
        </div>

        <div class="auth-text">
            EL TRABAJADOR INDIVIDUALIZADO AUTORIZA EN ESTE ACTO
        </div>

        <div class="amount-row">
            <span>EL DESCUENTO DE:</span>
            <span>$</span>
            <span>${s.discount_amount.toLocaleString("es-CL")}</span>
        </div>

        <div class="concept-row">
            <strong>POR CONCEPTO DE:</strong> &nbsp; ${s.reason==="PERDIDA"?"Prdida Credencial":"Deterioro Credencial"}
        </div>
        <div class="desc-small">Descripcin : Tarjeta de acceso vehicular</div>

        <div class="details-right">
            <div class="detail-item">
                <label>A descontar en:</label>
                <div class="detail-value">1 Cuota</div>
            </div>
            <div class="detail-item">
                <label>A contar de:</label>
                <div class="detail-value" style="font-style: italic; font-size: 12px;">Mes en curso</div>
            </div>
            <div class="detail-item">
                <label>Valor de cada cuota:</label>
                <div class="detail-value">$ ${s.discount_amount.toLocaleString("es-CL")}</div>
            </div>
        </div>

        <div class="sig-date-row">
            <div>
                <span>Firma y Rut del trabajador</span>
                <div class="signature-line"></div>
            </div>
            <span>Fecha : &nbsp; <span class="date-val"><strong>${y}</strong></span></span>
        </div>

        <div class="legal-text">
            El trabajador, mediante el presente instrumento, otorga mandato expreso a REDBUS URBANO S.A. para que descuente de sus remuneraciones en las cuotas y plazos indicados la suma indicada en este acto. Asimismo faculta expresamente a REDBUS URBANO S.A., para que en el evento de que por cualquier causa se pusiese trmino al contrato de trabajo, descuente el total del saldo adeudado de las indemnizaciones a que tenga derecho y/o otros emolumentos que pudiere tener derecho al trmino de la relacin laboral.
        </div>

        <div class="obs-header">Observaciones</div>
        <div class="obs-box"></div>

        <div class="footer-line">
            Av. El Salto 4651, Huechuraba, Santiago.<br>
            Fono: (56 2) 4881800 &nbsp;&nbsp; Fax: (56 2) 4881818
        </div>

        <div style="overflow: hidden; margin-top: 15px;">
            <div class="company-name">REDBUS URBANO S.A.</div>
        </div>

        <div class="bottom-detail-title">Detalle Descuento</div>
        
        <div class="bottom-table">
            <span class="bt-left">${s.reason==="PERDIDA"?"Prdida Credencial":"Deterioro Credencial"}</span>
            <div class="bt-right">
                <div class="costo-header">COSTO</div>
                <div><strong>$${s.discount_amount.toLocaleString("es-CL")}</strong></div>
            </div>
        </div>

    </div>

</body>
</html>
            `),x.document.close(),setTimeout(()=>x.print(),300)}};return M.useEffect(()=>{e&&(o({person_rut:"",person_name:"",person_cargo:"",person_terminal:"EL_ROBLE",person_turno:"",person_horario:"",person_contacto:"",worker_email:"",reason:"PERDIDA",requested_at:new Date().toISOString().split("T")[0],card_id:"",discount_applied:!0,discount_amount:5e3,send_emails:!0,created_by_supervisor:a}),f(""),u(""))},[e,a]),e?l.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[l.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:t}),l.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:l.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between z-10",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Nuevo Prestamo de Respaldo"}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg",children:l.jsx(yc,{className:"w-5 h-5 text-slate-500"})})]}),l.jsxs("form",{onSubmit:v,className:"p-6 space-y-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Datos del Trabajador"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"RUT"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",className:`input pr-10 ${d?"border-red-500":""}`,value:s.person_rut,onChange:x=>o(y=>({...y,person_rut:x.target.value})),onBlur:h,placeholder:"12.345.678-9",required:!0}),l.jsx(ipe,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"})]}),d&&l.jsx("p",{className:"text-xs text-red-500 mt-1",children:d})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nombre"}),l.jsx("input",{type:"text",className:"input",value:s.person_name,onChange:x=>o(y=>({...y,person_name:x.target.value})),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Cargo"}),l.jsx("input",{type:"text",className:"input",value:s.person_cargo,onChange:x=>o(y=>({...y,person_cargo:x.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Terminal"}),l.jsx("select",{className:"input",value:s.person_terminal,onChange:x=>o(y=>({...y,person_terminal:x.target.value})),required:!0,children:es.map(x=>l.jsx("option",{value:x.value,children:x.label},x.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Turno"}),l.jsx("input",{type:"text",className:"input",value:s.person_turno,onChange:x=>o(y=>({...y,person_turno:x.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Horario"}),l.jsx("input",{type:"text",className:"input",value:s.person_horario,onChange:x=>o(y=>({...y,person_horario:x.target.value})),placeholder:"08:00-18:00"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contacto"}),l.jsx("input",{type:"text",className:"input",value:s.person_contacto,onChange:x=>o(y=>({...y,person_contacto:x.target.value}))})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:["Correo ",l.jsx("span",{className:"text-slate-400 font-normal",children:"(opcional)"})]}),l.jsx("input",{type:"email",className:"input",value:s.worker_email,onChange:x=>o(y=>({...y,worker_email:x.target.value})),placeholder:"Para notificar cuando llegue su credencial"})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Solicitud"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Motivo"}),l.jsx("select",{className:"input",value:s.reason,onChange:x=>o(y=>({...y,reason:x.target.value})),required:!0,children:LB.map(x=>l.jsx("option",{value:x.value,children:x.label},x.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Fecha Solicitud"}),l.jsx("input",{type:"date",className:"input",value:s.requested_at,onChange:x=>o(y=>({...y,requested_at:x.target.value})),required:!0})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Tarjeta de Respaldo"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Terminal de Inventario"}),l.jsxs("select",{className:"input",value:c,onChange:x=>{u(x.target.value),o(y=>({...y,card_id:""}))},children:[l.jsx("option",{value:"",children:"Todos"}),Gu.map(x=>l.jsx("option",{value:x,children:x},x))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Tarjeta Disponible"}),l.jsxs("select",{className:"input",value:s.card_id,onChange:x=>o(y=>({...y,card_id:x.target.value})),required:!0,children:[l.jsx("option",{value:"",children:"Seleccionar tarjeta..."}),p.map(x=>l.jsxs("option",{value:x.id,children:[x.card_number," (",x.inventory_terminal,")"]},x.id))]}),p.length===0&&l.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"No hay tarjetas disponibles"})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Descuento"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:s.discount_applied,onChange:x=>o(y=>({...y,discount_applied:x.target.checked})),className:"w-4 h-4 rounded border-slate-300"}),l.jsxs("span",{className:"text-sm text-slate-700",children:["Aplicar descuento de $",s.discount_amount.toLocaleString("es-CL")," (1 cuota)"]})]}),s.discount_applied&&l.jsxs("span",{className:"text-xs text-slate-500 italic flex items-center gap-1",children:[l.jsx(epe,{className:"w-3 h-3"}),"Se imprimir automticamente al crear"]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Notificaciones"}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:s.send_emails,onChange:x=>o(y=>({...y,send_emails:x.target.checked})),className:"w-4 h-4 rounded border-slate-300"}),l.jsx("span",{className:"text-sm text-slate-700",children:"Enviar correos al crear"})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[l.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n||!s.card_id,children:n?"Guardando...":"Crear Prestamo"})]})]}),l.jsx("div",{ref:i,className:"hidden"})]})})]}):null},cDe=({isOpen:e,loan:t,onClose:r})=>{var i,s;if(!e||!t)return null;const n=o=>o?new Date(o).toLocaleDateString("es-CL",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",a=Math.floor((new Date().getTime()-new Date(t.issued_at).getTime())/(1e3*60*60*24));return l.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[l.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:r}),l.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:l.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between z-10",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Detalle del Prestamo"}),l.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg",children:l.jsx(yc,{className:"w-5 h-5 text-slate-500"})})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[l.jsx(bpe,{className:"w-4 h-4"}),"Trabajador"]}),l.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Nombre:"}),l.jsx("span",{className:"text-sm font-medium text-slate-900",children:t.person_name})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"RUT:"}),l.jsx("span",{className:"text-sm font-medium text-slate-900",children:kf(t.person_rut)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Cargo:"}),l.jsx("span",{className:"text-sm text-slate-900",children:t.person_cargo||"-"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Terminal:"}),l.jsx("span",{className:"text-sm text-slate-900",children:t.person_terminal})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Turno:"}),l.jsx("span",{className:"text-sm text-slate-900",children:t.person_turno||"-"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Horario:"}),l.jsx("span",{className:"text-sm text-slate-900",children:t.person_horario||"-"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Contacto:"}),l.jsx("span",{className:"text-sm text-slate-900",children:t.person_contacto||"-"})]})]})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[l.jsx(zg,{className:"w-4 h-4"}),"Tarjeta de Respaldo"]}),l.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Numero:"}),l.jsx("span",{className:"text-sm font-mono font-medium text-slate-900",children:((i=t.backup_cards)==null?void 0:i.card_number)||"-"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Terminal Inventario:"}),l.jsx("span",{className:"text-sm text-slate-900",children:((s=t.backup_cards)==null?void 0:s.inventory_terminal)||"-"})]})]})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[l.jsx(M0e,{className:"w-4 h-4"}),"Solicitud"]}),l.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Motivo:"}),l.jsx("span",{className:`text-sm font-medium px-2 py-0.5 rounded ${t.reason==="PERDIDA"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:t.reason==="PERDIDA"?"Perdida":"Deterioro"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Fecha Solicitud:"}),l.jsx("span",{className:"text-sm text-slate-900",children:t.requested_at})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Fecha Entrega:"}),l.jsx("span",{className:"text-sm text-slate-900",children:n(t.issued_at)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Dias Transcurridos:"}),l.jsxs("span",{className:`text-sm font-medium ${a>t.alert_after_days?"text-amber-600":"text-slate-900"}`,children:[a," dias"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Estado:"}),l.jsx("span",{className:`text-sm font-medium px-2 py-0.5 rounded ${t.status==="ASIGNADA"?"bg-blue-100 text-blue-700":t.status==="CERRADA"?"bg-slate-100 text-slate-700":t.status==="CANCELADA"?"bg-red-100 text-red-700":"bg-emerald-100 text-emerald-700"}`,children:t.status})]}),t.recovered_at&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Recuperada:"}),l.jsx("span",{className:"text-sm text-slate-900",children:n(t.recovered_at)})]}),t.cancel_reason&&l.jsxs("div",{className:"pt-2 border-t border-slate-200",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Motivo Cancelacion:"}),l.jsx("p",{className:"text-sm text-slate-900 mt-1",children:t.cancel_reason})]})]})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[l.jsx(CB,{className:"w-4 h-4"}),"Descuento"]}),l.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Aplicado:"}),l.jsx("span",{className:`text-sm font-medium ${t.discount_applied?"text-emerald-600":"text-slate-500"}`,children:t.discount_applied?"Si":"No"})]}),t.discount_applied&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Monto:"}),l.jsxs("span",{className:"text-sm font-medium text-slate-900",children:["$",t.discount_amount.toLocaleString("es-CL")]})]})]})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[l.jsx(TB,{className:"w-4 h-4"}),"Auditoria"]}),l.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Creado por:"}),l.jsx("span",{className:"text-sm text-slate-900",children:t.created_by_supervisor})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Creado:"}),l.jsx("span",{className:"text-sm text-slate-900",children:n(t.created_at)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Correo Trabajador:"}),l.jsx("span",{className:"text-sm text-slate-900",children:t.boss_email||"-"})]}),t.emails_sent_at&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Emails Enviados:"}),l.jsx("span",{className:"text-sm text-slate-900",children:n(t.emails_sent_at)})]})]})]})]}),l.jsx("div",{className:"border-t border-slate-200 px-6 py-4 flex justify-end",children:l.jsx("button",{onClick:r,className:"btn btn-secondary",children:"Cerrar"})})]})})]})},uDe=({isOpen:e,loan:t,onClose:r,onSubmit:n,isLoading:a})=>{var d;const[i,s]=M.useState(new Date().toISOString().split("T")[0]),[o,c]=M.useState(""),u=async f=>{f.preventDefault(),t&&(await n(t.id,i,o),c(""))};return!e||!t?null:l.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[l.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:r}),l.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:l.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-md",children:[l.jsxs("div",{className:"border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(PB,{className:"w-5 h-5 text-emerald-600"}),l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Marcar como Recuperada"})]}),l.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg",children:l.jsx(yc,{className:"w-5 h-5 text-slate-500"})})]}),l.jsxs("form",{onSubmit:u,className:"p-6 space-y-4",children:[l.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[l.jsxs("p",{className:"text-sm text-slate-600",children:[l.jsx("span",{className:"font-medium",children:"Trabajador:"})," ",t.person_name]}),l.jsxs("p",{className:"text-sm text-slate-600",children:[l.jsx("span",{className:"font-medium",children:"RUT:"})," ",kf(t.person_rut)]}),l.jsxs("p",{className:"text-sm text-slate-600",children:[l.jsx("span",{className:"font-medium",children:"Tarjeta:"})," ",(d=t.backup_cards)==null?void 0:d.card_number]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Fecha de Devolucion"}),l.jsx("input",{type:"date",className:"input",value:i,onChange:f=>s(f.target.value),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Observacion (opcional)"}),l.jsx("textarea",{className:"input min-h-[80px]",value:o,onChange:f=>c(f.target.value),placeholder:"Notas adicionales..."})]}),l.jsx("p",{className:"text-sm text-slate-500",children:"Al confirmar, la tarjeta sera liberada y quedara disponible para nuevos prestamos."}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[l.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:a,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary bg-emerald-600 hover:bg-emerald-700",disabled:a,children:a?"Procesando...":"Confirmar Devolucion"})]})]})]})})]})},dDe=({isOpen:e,loan:t,onClose:r,onSubmit:n,isLoading:a})=>{var c;const[i,s]=M.useState(""),o=async u=>{u.preventDefault(),!(!t||!i.trim())&&(await n(t.id,i.trim()),s(""))};return!e||!t?null:l.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[l.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:r}),l.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:l.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-md",children:[l.jsxs("div",{className:"border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ow,{className:"w-5 h-5 text-red-600"}),l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Cancelar Prestamo"})]}),l.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg",children:l.jsx(yc,{className:"w-5 h-5 text-slate-500"})})]}),l.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[l.jsx("p",{className:"text-sm text-red-800 font-medium mb-2",children:"Esta accion no se puede deshacer."}),l.jsxs("p",{className:"text-sm text-red-700",children:["El prestamo a ",t.person_name," (tarjeta ",(c=t.backup_cards)==null?void 0:c.card_number,") sera cancelado y la tarjeta sera liberada."]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Motivo de cancelacion (obligatorio)"}),l.jsx("textarea",{className:"input min-h-[100px]",value:i,onChange:u=>s(u.target.value),placeholder:"Explique por que se cancela este prestamo...",required:!0})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[l.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:a,children:"Volver"}),l.jsx("button",{type:"submit",className:"btn btn-primary bg-red-600 hover:bg-red-700",disabled:a||!i.trim(),children:a?"Cancelando...":"Confirmar Cancelacion"})]})]})]})})]})},fDe=({isOpen:e,onClose:t})=>{const r=Lt(),[n,a]=M.useState(!1),[i,s]=M.useState(""),[o,c]=M.useState(""),[u,d]=M.useState({card_number:"",inventory_terminal:"El Roble",notes:""}),{data:f=[],isLoading:p}=Ut({queryKey:["backup-cards",i,o],queryFn:()=>XIe(o||void 0,i||void 0),enabled:e}),h=Dt({mutationFn:JIe,onSuccess:()=>{r.invalidateQueries({queryKey:["backup-cards"]}),a(!1),d({card_number:"",inventory_terminal:"El Roble",notes:""})}}),v=Dt({mutationFn:QIe,onSuccess:()=>{r.invalidateQueries({queryKey:["backup-cards"]})}}),m=g=>{g.preventDefault(),h.mutate(u)},x=g=>{confirm(`Desactivar tarjeta ${g.card_number}?`)&&v.mutate(g.id)};if(!e)return null;const y={LIBRE:"bg-emerald-100 text-emerald-800",ASIGNADA:"bg-blue-100 text-blue-800",INACTIVA:"bg-slate-100 text-slate-600"};return l.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[l.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:t}),l.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:l.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[85vh] flex flex-col",children:[l.jsxs("div",{className:"border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(zg,{className:"w-5 h-5 text-slate-600"}),l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Inventario de Tarjetas"})]}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg",children:l.jsx(yc,{className:"w-5 h-5 text-slate-500"})})]}),l.jsxs("div",{className:"p-4 border-b border-slate-100 flex flex-wrap items-center gap-3",children:[l.jsxs("select",{className:"input w-auto",value:i,onChange:g=>s(g.target.value),children:[l.jsx("option",{value:"",children:"Todos los terminales"}),Gu.map(g=>l.jsx("option",{value:g,children:g},g))]}),l.jsxs("select",{className:"input w-auto",value:o,onChange:g=>c(g.target.value),children:[l.jsx("option",{value:"",children:"Todos los estados"}),Spe.map(g=>l.jsx("option",{value:g.value,children:g.label},g.value))]}),l.jsx("div",{className:"flex-1"}),l.jsxs("button",{onClick:()=>a(!n),className:"btn btn-primary flex items-center gap-2",children:[l.jsx(OB,{className:"w-4 h-4"}),"Agregar Tarjeta"]})]}),n&&l.jsxs("form",{onSubmit:m,className:"p-4 bg-slate-50 border-b border-slate-100",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Numero de Tarjeta"}),l.jsx("input",{type:"text",className:"input",value:u.card_number,onChange:g=>d(b=>({...b,card_number:g.target.value})),placeholder:"Ej: TR-001",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Terminal"}),l.jsx("select",{className:"input",value:u.inventory_terminal,onChange:g=>d(b=>({...b,inventory_terminal:g.target.value})),children:Gu.map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Notas (opcional)"}),l.jsx("input",{type:"text",className:"input",value:u.notes,onChange:g=>d(b=>({...b,notes:g.target.value}))})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[l.jsx("button",{type:"button",onClick:()=>a(!1),className:"btn btn-secondary text-sm",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary text-sm",disabled:h.isPending,children:h.isPending?"Guardando...":"Guardar"})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:p?l.jsx("div",{className:"flex items-center justify-center py-8",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):f.length===0?l.jsx("div",{className:"text-center py-8 text-slate-500",children:"No hay tarjetas registradas"}):l.jsx("div",{className:"space-y-2",children:f.map(g=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(zg,{className:"w-5 h-5 text-slate-400"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-slate-900",children:g.card_number}),l.jsx("p",{className:"text-xs text-slate-500",children:g.inventory_terminal})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${y[g.status]||""}`,children:g.status}),g.status!=="INACTIVA"&&g.status!=="ASIGNADA"&&l.jsx("button",{onClick:()=>x(g),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Desactivar",children:l.jsx(hpe,{className:"w-4 h-4"})})]})]},g.id))})}),l.jsx("div",{className:"border-t border-slate-200 px-6 py-4 flex justify-end",children:l.jsx("button",{onClick:t,className:"btn btn-secondary",children:"Cerrar"})})]})})]})},hDe=({isOpen:e,onClose:t})=>{const r=Lt(),[n,a]=M.useState("GLOBAL"),[i,s]=M.useState({manager_email:"",cc_emails:"",subject_manager:"Solicitud de Nueva Credencial",subject_boss:"Notificacion de Credencial de Respaldo",enabled:!0}),{data:o=[],isLoading:c}=Ut({queryKey:["backup-email-settings"],queryFn:yH,enabled:e}),u=Dt({mutationFn:aDe,onSuccess:()=>{r.invalidateQueries({queryKey:["backup-email-settings"]})}});M.useEffect(()=>{const f=o.find(p=>n==="GLOBAL"?p.scope_type==="GLOBAL":p.scope_code===n);s(f?{manager_email:f.manager_email,cc_emails:f.cc_emails||"",subject_manager:f.subject_manager,subject_boss:f.subject_boss,enabled:f.enabled}:{manager_email:"",cc_emails:"",subject_manager:"Solicitud de Nueva Credencial",subject_boss:"Notificacion de Credencial de Respaldo",enabled:!0})},[n,o]);const d=f=>{f.preventDefault(),u.mutate({scope_type:n==="GLOBAL"?"GLOBAL":"TERMINAL",scope_code:n,...i})};return e?l.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[l.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:t}),l.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:l.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-lg",children:[l.jsxs("div",{className:"border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(kB,{className:"w-5 h-5 text-slate-600"}),l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Configuracion de Correos"})]}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg",children:l.jsx(yc,{className:"w-5 h-5 text-slate-500"})})]}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Configurar para:"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{type:"button",onClick:()=>a("GLOBAL"),className:`px-3 py-1.5 text-sm rounded-lg border ${n==="GLOBAL"?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:"Global"}),Gu.map(f=>l.jsx("button",{type:"button",onClick:()=>a(f),className:`px-3 py-1.5 text-sm rounded-lg border ${n===f?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:f},f))]})]}),c?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):l.jsxs("form",{onSubmit:d,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Email del Gestor (crear credencial)"}),l.jsx("input",{type:"email",className:"input",value:i.manager_email,onChange:f=>s(p=>({...p,manager_email:f.target.value})),placeholder:"gestor@empresa.cl",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"CC (opcional, separar por coma)"}),l.jsx("input",{type:"text",className:"input",value:i.cc_emails,onChange:f=>s(p=>({...p,cc_emails:f.target.value})),placeholder:"copia1@empresa.cl, copia2@empresa.cl"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asunto para Gestor"}),l.jsx("input",{type:"text",className:"input",value:i.subject_manager,onChange:f=>s(p=>({...p,subject_manager:f.target.value})),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asunto para Jefatura"}),l.jsx("input",{type:"text",className:"input",value:i.subject_boss,onChange:f=>s(p=>({...p,subject_boss:f.target.value})),required:!0})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:i.enabled,onChange:f=>s(p=>({...p,enabled:f.target.checked})),className:"w-4 h-4 rounded border-slate-300"}),l.jsx("span",{className:"text-sm text-slate-700",children:"Envio habilitado"})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[l.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",children:"Cerrar"}),l.jsxs("button",{type:"submit",className:"btn btn-primary flex items-center gap-2",disabled:u.isPending,children:[l.jsx(npe,{className:"w-4 h-4"}),u.isPending?"Guardando...":"Guardar"]})]}),u.isSuccess&&l.jsx("p",{className:"text-sm text-emerald-600 text-center",children:"Configuracion guardada correctamente"})]})]})]})})]}):null},pDe=({isOpen:e,loan:t,managerEmail:r,workerEmail:n,cc:a,onClose:i,onSubmit:s,isLoading:o})=>{const c=M.useRef(null),[u,d]=M.useState(null),[f,p]=M.useState(null),[h,v]=M.useState(""),m=S=>{var A;const _=(A=S.target.files)==null?void 0:A[0];if(!_)return;if(!["application/pdf","image/png","image/jpeg"].includes(_.type)){v("Solo se permiten archivos PDF, PNG o JPG");return}if(_.size>5*1024*1024){v("El archivo no puede superar 5MB");return}if(v(""),d(_),_.type.startsWith("image/")){const E=new FileReader;E.onload=T=>{var L;return p((L=T.target)==null?void 0:L.result)},E.readAsDataURL(_)}else p(null)},x=async()=>{if(!u){v("Debe adjuntar el documento firmado");return}const S=new FileReader;S.onload=async _=>{var A;const j=((A=_.target)==null?void 0:A.result).split(",")[1];await s({filename:`autorizacion_descuento_${(t==null?void 0:t.person_rut)||"firmado"}.${u.name.split(".").pop()}`,content:j})},S.readAsDataURL(u)},y=async()=>{await s(null)},g=()=>{d(null),p(null),v("")},b=()=>{g(),i()};return!e||!t?null:l.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[l.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:b}),l.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:l.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-lg",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Adjuntar Documento Firmado"}),l.jsx("button",{onClick:b,className:"p-2 hover:bg-slate-100 rounded-lg",children:l.jsx(yc,{className:"w-5 h-5 text-slate-500"})})]}),l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[l.jsxs("p",{className:"text-sm text-blue-800",children:[l.jsx("strong",{children:"Trabajador:"})," ",t.person_name," (",kf(t.person_rut),")"]}),l.jsx("p",{className:"text-sm text-blue-800 mt-1",children:l.jsx("strong",{children:"Se enviar correo a:"})}),l.jsxs("ul",{className:"text-xs text-blue-700 mt-1 list-disc list-inside",children:[l.jsxs("li",{children:["Gestor de credenciales: ",r," ",l.jsx("span",{className:"text-blue-500",children:"(con adjunto)"})]}),n&&l.jsxs("li",{children:["Notificacin trabajador: ",n]}),a&&l.jsxs("li",{children:["CC: ",a]})]})]}),l.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[l.jsx($0e,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-amber-800",children:"Importante"}),l.jsx("p",{className:"text-xs text-amber-700",children:"Adjunte el documento de autorizacin de descuento firmado por el trabajador. Este se enviar SOLO al gestor de credenciales."})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Documento Firmado (PDF, PNG, JPG)"}),l.jsx("input",{type:"file",ref:c,onChange:m,accept:".pdf,.png,.jpg,.jpeg",className:"hidden"}),u?l.jsx("div",{className:"border border-slate-200 rounded-lg p-3",children:l.jsxs("div",{className:"flex items-center gap-3",children:[f?l.jsx("img",{src:f,alt:"Preview",className:"w-16 h-16 object-cover rounded"}):l.jsx("div",{className:"w-16 h-16 bg-red-50 rounded flex items-center justify-center",children:l.jsx(K0e,{className:"w-8 h-8 text-red-500"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:u.name}),l.jsxs("p",{className:"text-xs text-slate-500",children:[(u.size/1024).toFixed(1)," KB"]})]}),l.jsx("button",{type:"button",onClick:()=>{d(null),p(null)},className:"p-1 hover:bg-slate-100 rounded",children:l.jsx(yc,{className:"w-4 h-4 text-slate-500"})})]})}):l.jsxs("button",{type:"button",onClick:()=>{var S;return(S=c.current)==null?void 0:S.click()},className:"w-full border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:border-blue-400 hover:bg-blue-50/50 transition-colors",children:[l.jsx(xpe,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Haga clic para seleccionar archivo"}),l.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Max 5MB"})]}),h&&l.jsx("p",{className:"text-xs text-red-500 mt-2",children:h})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-slate-200 bg-slate-50 rounded-b-xl",children:[l.jsx("button",{type:"button",onClick:y,className:"text-sm text-slate-500 hover:text-slate-700",disabled:o,children:"Enviar sin adjunto"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:b,className:"btn btn-secondary",disabled:o,children:"Cancelar"}),l.jsx("button",{type:"button",onClick:x,className:"btn btn-primary flex items-center gap-2",disabled:o||!u,children:o?"Enviando...":l.jsxs(l.Fragment,{children:[l.jsx(ope,{className:"w-4 h-4"}),"Enviar Correos"]})})]})]})]})})]})},mDe=()=>{var B,U,Y,oe;const e=Lt(),t=zt(ee=>ee.context),r=zt(ee=>ee.setContext),n=Ar(ee=>ee.session),[a,i]=M.useState({status:"TODAS",reason:"TODAS",alertsOnly:!1}),[s,o]=M.useState(!1),[c,u]=M.useState(!1),[d,f]=M.useState(!1),[p,h]=M.useState(null),[v,m]=M.useState(!1),[x,y]=M.useState(!1),[g,b]=M.useState(!1),[S,_]=M.useState(!1),[j,A]=M.useState(null),[E,T]=M.useState(!1),L=Ut({queryKey:["backup-loans",a],queryFn:()=>ZIe(a)}),k=Ut({queryKey:["backup-kpis"],queryFn:iDe}),R=Ut({queryKey:["backup-email-settings"],queryFn:yH}),D=Dt({mutationFn:async ee=>({loan:await eDe(ee),sendEmails:ee.send_emails}),onSuccess:({loan:ee,sendEmails:te})=>{e.invalidateQueries({queryKey:["backup-loans"]}),e.invalidateQueries({queryKey:["backup-kpis"]}),e.invalidateQueries({queryKey:["backup-cards"]}),o(!1),te&&(A(ee),_(!0))}}),q=Dt({mutationFn:({id:ee,recoveredAt:te,observation:le})=>tDe(ee,te),onSuccess:()=>{e.invalidateQueries({queryKey:["backup-loans"]}),e.invalidateQueries({queryKey:["backup-kpis"]}),e.invalidateQueries({queryKey:["backup-cards"]}),y(!1),h(null)}}),X=Dt({mutationFn:({id:ee,reason:te})=>rDe(ee,te),onSuccess:()=>{e.invalidateQueries({queryKey:["backup-loans"]}),e.invalidateQueries({queryKey:["backup-kpis"]}),e.invalidateQueries({queryKey:["backup-cards"]}),b(!1),h(null)}}),se=M.useMemo(()=>{var te;let ee=L.data||[];if(t.mode!=="ALL"&&t.value){const le=(te=es.find(Ne=>Ne.value===t.value))==null?void 0:te.label;le&&(ee=ee.filter(Ne=>Ne.person_terminal===t.value||Ne.person_terminal===le))}if(a.alertsOnly){const le=new Date;ee=ee.filter(Ne=>{if(Ne.status!=="ASIGNADA")return!1;const ve=new Date(Ne.issued_at);return Math.floor((le.getTime()-ve.getTime())/(1e3*60*60*24))>Ne.alert_after_days})}return ee},[L.data,t,a.alertsOnly]),Z=ee=>{h(ee),m(!0)},K=ee=>{Z(ee)},ie=ee=>{h(ee),y(!0)},pe=ee=>{h(ee),b(!0)},me=ee=>{A(ee),_(!0)},O=async ee=>{var Ne;if(!j)return;const te=(Ne=R.data)==null?void 0:Ne.find(ve=>ve.scope_code===j.person_terminal||ve.scope_type==="GLOBAL");if(!te){VK("Configuracin requerida",'Configure los correos primero en el botn "Correos"'),_(!1),A(null);return}T(!0);const le=await oDe(j,te.manager_email,te.cc_emails||void 0,ee);T(!1),le.success?(Ii("Correos enviados","Los correos de notificacin fueron enviados correctamente",j.person_name),e.invalidateQueries({queryKey:["backup-loans"]})):Ci("Error al enviar correos",le.error||"Error desconocido"),_(!1),A(null)},F=()=>{if(!se.length)return;const ee=new Date,te=se.map(le=>{var Me;const Ne=new Date(le.issued_at),ve=Math.floor((ee.getTime()-Ne.getTime())/(1e3*60*60*24));return{rut:kf(le.person_rut),nombre:le.person_name,cargo:le.person_cargo||"",terminal:le.person_terminal,tarjeta:((Me=le.backup_cards)==null?void 0:Me.card_number)||"",motivo:le.reason==="PERDIDA"?"Perdida":"Deterioro",fecha_entrega:new Date(le.issued_at).toLocaleDateString("es-CL"),dias:ve,estado:le.status,descuento:le.discount_applied?le.discount_amount:0,correo_trabajador:le.boss_email||"",creado_por:le.created_by_supervisor}});mr({filename:`prestamos_respaldo_${new Date().toISOString().split("T")[0]}`,sheetName:"Prestamos",rows:te,columns:[{key:"rut",header:"RUT"},{key:"nombre",header:"Nombre"},{key:"cargo",header:"Cargo"},{key:"terminal",header:"Terminal"},{key:"tarjeta",header:"Tarjeta"},{key:"motivo",header:"Motivo"},{key:"fecha_entrega",header:"Fecha Entrega"},{key:"dias",header:"Dias"},{key:"estado",header:"Estado"},{key:"descuento",header:"Descuento"},{key:"email_jefatura",header:"Email Jefatura"},{key:"creado_por",header:"Creado Por"}]})};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(mn,{title:"Credenciales de Respaldo",description:"Control de prestamo de tarjetas de respaldo",actions:l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("button",{onClick:()=>f(!0),className:"btn btn-secondary flex items-center gap-2",children:[l.jsx(cpe,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Correos"})]}),l.jsxs("button",{onClick:()=>u(!0),className:"btn btn-secondary flex items-center gap-2",children:[l.jsx(zg,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Tarjetas"})]}),l.jsxs("button",{onClick:F,className:"btn btn-secondary flex items-center gap-2",children:[l.jsx(H0e,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"XLSX"})]}),l.jsxs("button",{onClick:()=>o(!0),className:"btn btn-primary flex items-center gap-2",children:[l.jsx(OB,{className:"w-4 h-4"}),"Nuevo Prestamo"]})]})}),l.jsx(Npe,{kpis:k.data||{availableByTerminal:{"El Roble":0,"La Reina":0,"Maria Angelica":0},activeLoans:0,overdueLoans:0,avgReturnDays:0,totalDiscounts:0},isLoading:k.isLoading}),!L.isLoading&&L.data&&L.data.length>0&&l.jsx(WIe,{loans:L.data}),l.jsxs("div",{className:"bg-white px-3 py-2 rounded-lg border border-slate-200 shadow-sm flex flex-wrap items-center gap-2",children:[l.jsx(Y0e,{className:"w-4 h-4 text-slate-400 flex-shrink-0"}),l.jsx("input",{type:"text",className:"h-8 px-2 text-sm border border-slate-200 rounded-md w-32 focus:outline-none focus:ring-1 focus:ring-blue-400",placeholder:"RUT/Nombre...",value:a.search||"",onChange:ee=>i(te=>({...te,search:ee.target.value}))}),l.jsxs("select",{className:"h-8 px-2 text-sm border border-slate-200 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-400",value:t.value||"",onChange:ee=>{ee.target.value?r({mode:"TERMINAL",value:ee.target.value}):r({mode:"ALL"})},children:[l.jsx("option",{value:"",children:"Terminal"}),es.map(ee=>l.jsx("option",{value:ee.value,children:ee.label},ee.value))]}),l.jsxs("select",{className:"h-8 px-2 text-sm border border-slate-200 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-400",value:a.status||"TODAS",onChange:ee=>i(te=>({...te,status:ee.target.value})),children:[l.jsx("option",{value:"TODAS",children:"Estado"}),_pe.map(ee=>l.jsx("option",{value:ee.value,children:ee.label},ee.value))]}),l.jsxs("select",{className:"h-8 px-2 text-sm border border-slate-200 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-400",value:a.reason||"TODAS",onChange:ee=>i(te=>({...te,reason:ee.target.value})),children:[l.jsx("option",{value:"TODAS",children:"Motivo"}),LB.map(ee=>l.jsx("option",{value:ee.value,children:ee.label},ee.value))]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer text-xs text-slate-600 whitespace-nowrap",children:[l.jsx("input",{type:"checkbox",checked:a.alertsOnly||!1,onChange:ee=>i(te=>({...te,alertsOnly:ee.target.checked})),className:"w-3.5 h-3.5 rounded border-slate-300"}),l.jsx(ow,{className:"w-3.5 h-3.5 text-amber-500"}),"Atrasados"]}),l.jsx("div",{className:"h-4 w-px bg-slate-200 hidden sm:block"}),l.jsx("input",{type:"date",className:"h-8 px-2 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400",value:a.dateFrom||"",onChange:ee=>i(te=>({...te,dateFrom:ee.target.value})),title:"Desde"}),l.jsx("span",{className:"text-slate-400 text-xs",children:"-"}),l.jsx("input",{type:"date",className:"h-8 px-2 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400",value:a.dateTo||"",onChange:ee=>i(te=>({...te,dateTo:ee.target.value})),title:"Hasta"})]}),L.isLoading&&l.jsx(kn,{label:"Cargando prestamos..."}),L.isError&&l.jsx(Da,{message:"Error al cargar prestamos",onRetry:L.refetch}),!L.isLoading&&!L.isError&&l.jsx(KIe,{loans:se,onView:Z,onEdit:K,onRecover:ie,onCancel:pe,onResendEmails:me}),l.jsx(lDe,{isOpen:s,onClose:()=>o(!1),onSubmit:async(ee,te)=>{await D.mutateAsync(ee),ee.discount_applied&&te()},isLoading:D.isPending,supervisorName:(n==null?void 0:n.supervisorName)||"Supervisor"}),l.jsx(cDe,{isOpen:v,loan:p,onClose:()=>{m(!1),h(null)}}),l.jsx(uDe,{isOpen:x,loan:p,onClose:()=>{y(!1),h(null)},onSubmit:async(ee,te,le)=>{await q.mutateAsync({id:ee,recoveredAt:te,observation:le})},isLoading:q.isPending}),l.jsx(dDe,{isOpen:g,loan:p,onClose:()=>{b(!1),h(null)},onSubmit:async(ee,te)=>{await X.mutateAsync({id:ee,reason:te})},isLoading:X.isPending}),l.jsx(fDe,{isOpen:c,onClose:()=>u(!1)}),l.jsx(hDe,{isOpen:d,onClose:()=>f(!1)}),l.jsx(pDe,{isOpen:S,loan:j,managerEmail:((U=(B=R.data)==null?void 0:B.find(ee=>ee.scope_code===(j==null?void 0:j.person_terminal)||ee.scope_type==="GLOBAL"))==null?void 0:U.manager_email)||"",workerEmail:(j==null?void 0:j.boss_email)||"",cc:((oe=(Y=R.data)==null?void 0:Y.find(ee=>ee.scope_code===(j==null?void 0:j.person_terminal)||ee.scope_type==="GLOBAL"))==null?void 0:oe.cc_emails)||void 0,onClose:()=>{_(!1),A(null)},onSubmit:O,isLoading:E})]})},gDe=[{id:"s-1",solicitante:"Ana Prez",tipo:"Materiales",fecha:"2023-12-04",estado:"abierta",terminal:"EL_ROBLE"},{id:"s-2",solicitante:"Carlos Vega",tipo:"Personal",fecha:"2023-12-03",estado:"en_proceso",terminal:"LA_REINA"},{id:"s-3",solicitante:"Laura Soto",tipo:"Tecnologa",fecha:"2023-12-02",estado:"cerrada",terminal:"EL_SALTO"}],YR=rw(gDe,(e,t)=>t!=null&&t.estado&&t.estado!=="todas"?e.estado===t.estado:!0),vDe=()=>{const e=zt(y=>y.context),t=zt(y=>y.setContext),[r,n]=M.useState({estado:"todas"}),[a,i]=M.useState(""),[s,o]=M.useState(""),[c,u]=M.useState([]),d=Ut({queryKey:["solicitudes",e,r],queryFn:()=>YR.list({terminalContext:e,filters:r,scope:"view"})}),f=M.useMemo(()=>[...d.data??[],...c],[d.data,c]),p=M.useMemo(()=>[{key:"tipo",header:"Tipo"},{key:"solicitante",header:"Solicitante"},{key:"estado",header:"Estado",render:y=>l.jsx("span",{className:"badge capitalize",children:y.estado}),value:y=>y.estado},{key:"fecha",header:"Fecha"},{key:"terminal",header:"Terminal",render:y=>or(y.terminal),value:y=>or(y.terminal)}],[]),h=p.map(y=>({key:y.key,header:y.header,value:g=>y.value?y.value(g):g[y.key]})),v=()=>{mr({filename:"solicitudes_vista",sheetName:"Solicitudes",rows:f,columns:h})},m=async()=>{const y=await YR.list({terminalContext:e,scope:"all"});mr({filename:"solicitudes_completo",sheetName:"Solicitudes",rows:y,columns:h})},x=()=>{const y={id:`local-${Date.now()}`,solicitante:s,tipo:a,estado:"abierta",fecha:new Date().toISOString().slice(0,10),terminal:e.value??"EL_ROBLE"};u(g=>[y,...g]),o(""),i("")};return l.jsxs("div",{className:"space-y-4",children:[l.jsx(mn,{title:"Solicitudes",description:"Formulario universal para requerimientos",actions:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"btn btn-primary",onClick:()=>{var y;return(y=document.getElementById("solicitud-form"))==null?void 0:y.scrollIntoView({behavior:"smooth"})},children:"Nueva solicitud"}),l.jsx(_a,{onExportView:v,onExportAll:m})]})}),l.jsx(ns,{terminalContext:e,onTerminalChange:t,children:l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsxs("select",{className:"input",value:r.estado,onChange:y=>n({estado:y.target.value}),children:[l.jsx("option",{value:"todas",children:"Todas"}),l.jsx("option",{value:"abierta",children:"Abierta"}),l.jsx("option",{value:"en_proceso",children:"En proceso"}),l.jsx("option",{value:"cerrada",children:"Cerrada"})]})]})}),l.jsxs("div",{className:"card p-4",id:"solicitud-form",children:[l.jsx("p",{className:"mb-3 text-sm font-semibold text-slate-900",children:"Crear nueva solicitud"}),l.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"label",children:"Solicitante"}),l.jsx("input",{className:"input",value:s,onChange:y=>o(y.target.value)})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"label",children:"Tipo"}),l.jsx("input",{className:"input",value:a,onChange:y=>i(y.target.value),placeholder:"Ej: Materiales"})]}),l.jsx("div",{className:"flex items-end justify-end",children:l.jsx("button",{className:"btn btn-primary",onClick:x,disabled:!s||!a,children:"Registrar (mock)"})})]})]}),d.isLoading&&l.jsx(kn,{}),d.isError&&l.jsx(Da,{onRetry:d.refetch}),!d.isLoading&&!d.isError&&l.jsxs(l.Fragment,{children:[!f.length&&l.jsx(Oc,{description:"Sin solicitudes"}),f.length>0&&l.jsx(kc,{columns:p,rows:f})]})]})},i1=({terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:o,children:c})=>l.jsxs(ns,{terminalContext:e,onTerminalChange:t,children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Buscar PPU"}),l.jsx("input",{type:"text",className:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700 outline-none focus:border-brand-500 focus:ring-1 focus:ring-brand-500 w-32 lg:w-40",placeholder:"PPU...",value:r,onChange:u=>n(u.target.value)})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Desde"}),l.jsx("input",{type:"date",className:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700 outline-none focus:border-brand-500 w-full",value:a,onChange:u=>i(u.target.value)})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Hasta"}),l.jsx("input",{type:"date",className:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700 outline-none focus:border-brand-500 w-full",value:s,onChange:u=>o(u.target.value)})]}),c]}),s1=({items:e})=>l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:e.map((t,r)=>l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:t.label}),l.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:t.value}),t.subtext&&l.jsx("p",{className:"text-xs text-slate-400 mt-1 font-medium",children:t.subtext})]}),t.icon&&l.jsx("div",{className:`p-2 rounded-lg ${t.colorClass||"bg-slate-100 text-slate-600"}`,children:l.jsx(xe,{name:t.icon,size:20})})]},r))}),xDe="https://wvcplgwemvqhvtstlqmt.supabase.co",bH="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind2Y3BsZ3dlbXZxaHZ0c3RscW10Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAzNjIyMDUsImV4cCI6MjA3NTkzODIwNX0.K1YOv5lRn9fOous3AyG2gPxsQBzqOXRfYHgrCmO5zxk",yDe=Y$(xDe,bH,{auth:{persistSession:!1,autoRefreshToken:!1},realtime:{params:{eventsPerSecond:10}}}),bDe=()=>!!bH,o1=async(e,t)=>{if(!bDe())return[];let r=yDe.from(e).select("*");if(t.terminalContext&&t.terminalContext.mode!=="ALL"){const c=Fi(t.terminalContext).map(u=>zu[u]).filter(Boolean);c.length>0&&(r=r.in("terminal",c))}t.search&&(r=r.ilike("bus_ppu",`%${t.search}%`)),t.dateFrom&&(r=r.gte("created_at",t.dateFrom)),t.dateTo&&(r=r.lte("created_at",t.dateTo));const n=t.sortBy||"updated_at",a=t.sortOrder||"desc";r=r.order(n,{ascending:a==="asc"});const{data:i,error:s}=await r;if(s)throw console.error(`Error fetching ${e}:`,s),s;return i},wDe=e=>o1("extintores",e),_De=e=>o1("tags",e),SDe=e=>o1("mobileye",e),NDe=e=>o1("odometro",e),jDe=e=>o1("publicidad",e),ADe=e=>Ut({queryKey:["minicheck","extintores",e],queryFn:()=>wDe(e)}),EDe=e=>Ut({queryKey:["minicheck","tags",e],queryFn:()=>_De(e)}),TDe=e=>Ut({queryKey:["minicheck","mobileye",e],queryFn:()=>SDe(e)}),CDe=e=>Ut({queryKey:["minicheck","odometros",e],queryFn:()=>NDe(e)}),kDe=e=>Ut({queryKey:["minicheck","publicidad",e],queryFn:()=>jDe(e)}),ODe=()=>{const e=zt(g=>g.context),t=zt(g=>g.setContext),[r,n]=M.useState(""),[a,i]=M.useState(""),[s,o]=M.useState(""),c=M.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:p}=ADe(c),h=M.useMemo(()=>{if(!u)return[];const g=u.length,b=u.filter(j=>j.certificacion==="VENCIDA").length,S=u.filter(j=>!j.tiene).length,_=u.filter(j=>j.presion==="BAJA_CARGA").length;return[{label:"Total Registros",value:g,icon:"clipboard"},{label:"Vencidos",value:b,icon:"alert-triangle",colorClass:"bg-red-50 text-red-600"},{label:"Sin Extintor",value:S,icon:"x",colorClass:"bg-orange-50 text-orange-600"},{label:"Presin Baja",value:_,icon:"activity",colorClass:"bg-yellow-50 text-yellow-600"}]},[u]),v=M.useMemo(()=>{if(!u)return[];const g=u.filter(S=>S.certificacion==="VIGENTE").length,b=u.filter(S=>S.certificacion==="VENCIDA").length;return[{name:"VIGENTE",value:g,color:"#10b981"},{name:"VENCIDA",value:b,color:"#ef4444"}]},[u]),m=[{key:"bus_ppu",header:"PPU",value:g=>g.bus_ppu},{key:"terminal",header:"Terminal",render:g=>or(g.terminal),value:g=>g.terminal},{key:"tiene",header:"Tiene",render:g=>l.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${g.tiene?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g.tiene?"S":"NO"}),value:g=>g.tiene?"SI":"NO"},{key:"certificacion",header:"Certificacin",render:g=>l.jsx("span",{className:`text-xs font-bold ${g.certificacion==="VIGENTE"?"text-green-600":"text-red-600"}`,children:g.certificacion||"-"}),value:g=>g.certificacion||"-"},{key:"vencimiento_mes",header:"Vencimiento",render:g=>g.vencimiento_mes&&g.vencimiento_anio?`${g.vencimiento_mes}/${g.vencimiento_anio}`:"-",value:g=>`${g.vencimiento_mes}/${g.vencimiento_anio}`},{key:"presion",header:"Presin",value:g=>g.presion||"-"},{key:"cilindro",header:"Cilindro OK",render:g=>g.cilindro?"S":"No",value:g=>g.cilindro?"S":"No"},{key:"updated_at",header:"Actualizado",render:g=>Ia(g.updated_at),value:g=>Ia(g.updated_at)}],x=m.map(g=>({header:g.header,key:g.key,value:g.value})),y=()=>{u&&mr({filename:`minicheck_extintor_${new Date().toISOString().split("T")[0]}`,sheetName:"Extintores",rows:u,columns:x})};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(mn,{title:"Control de Extintores",description:"Validacin de estado y vencimiento de extintores",actions:l.jsx("div",{className:"flex gap-2",children:l.jsx(_a,{onExportView:y,onExportAll:y})})}),l.jsx(i1,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:o}),d&&l.jsx(kn,{label:"Cargando extintores..."}),f&&l.jsx(Da,{message:"No se pudieron obtener los registros de extintores.",onRetry:p}),!d&&!f&&l.jsxs(l.Fragment,{children:[l.jsx(s1,{items:h}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80",children:[l.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-4",children:"Estado Certificacin"}),l.jsx(cc,{width:"100%",height:"100%",children:l.jsxs(op,{data:v,children:[l.jsx(Cf,{strokeDasharray:"3 3",vertical:!1}),l.jsx(Nc,{dataKey:"name",tick:{fontSize:10}}),l.jsx(jc,{tick:{fontSize:10}}),l.jsx(Ca,{}),l.jsx(Xi,{dataKey:"value",name:"Cantidad",radius:[4,4,0,0],children:v.map((g,b)=>l.jsx(Rc,{fill:g.color},`cell-${b}`))})]})})]}),l.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?l.jsx(kc,{columns:m,rows:u}):l.jsx(Oc,{label:"Sin registros",description:"No se encontraron extintores con los filtros seleccionados."})})]})]})]})},PDe=()=>{const e=zt(g=>g.context),t=zt(g=>g.setContext),[r,n]=M.useState(""),[a,i]=M.useState(""),[s,o]=M.useState(""),c=M.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:p}=EDe(c),h=M.useMemo(()=>{if(!u)return[];const g=u.length,b=u.filter(_=>!_.tiene).length,S=u.filter(_=>_.serie&&_.serie.trim().length>0).length;return[{label:"Total Registros",value:g,icon:"clipboard"},{label:"Sin TAG",value:b,icon:"alert-circle",colorClass:"bg-red-50 text-red-600"},{label:"Serie Informada",value:S,icon:"check",colorClass:"bg-blue-50 text-blue-600"}]},[u]),v=M.useMemo(()=>{if(!u)return[];const g=u.filter(S=>S.tiene).length,b=u.filter(S=>!S.tiene).length;return[{name:"Con TAG",value:g,color:"#10b981"},{name:"Sin TAG",value:b,color:"#ef4444"}]},[u]),m=[{key:"bus_ppu",header:"PPU",value:g=>g.bus_ppu},{key:"terminal",header:"Terminal",render:g=>or(g.terminal),value:g=>g.terminal},{key:"tiene",header:"Tiene TAG",render:g=>l.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${g.tiene?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g.tiene?"S":"NO"}),value:g=>g.tiene?"SI":"NO"},{key:"serie",header:"N Serie",value:g=>g.serie||"-"},{key:"observacion",header:"Observacin",value:g=>g.observacion||""},{key:"updated_at",header:"Actualizado",render:g=>Ia(g.updated_at),value:g=>Ia(g.updated_at)}],x=m.map(g=>({header:g.header,key:g.key,value:g.value})),y=()=>{u&&mr({filename:`minicheck_tag_${new Date().toISOString().split("T")[0]}`,sheetName:"Tags",rows:u,columns:x})};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(mn,{title:"Control de TAG",description:"Verificacin de dispositivos TAG",actions:l.jsx("div",{className:"flex gap-2",children:l.jsx(_a,{onExportView:y,onExportAll:y})})}),l.jsx(i1,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:o}),d&&l.jsx(kn,{label:"Cargando tags..."}),f&&l.jsx(Da,{message:"No se pudieron cargar los datos.",onRetry:p}),!d&&!f&&l.jsxs(l.Fragment,{children:[l.jsx(s1,{items:h}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80 flex flex-col items-center justify-center",children:[l.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-2 w-full text-left",children:"Distribucin"}),l.jsx(cc,{width:"100%",height:"100%",children:l.jsxs(JE,{children:[l.jsx(Ho,{data:v,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:v.map((g,b)=>l.jsx(Rc,{fill:g.color},`cell-${b}`))}),l.jsx(Ca,{}),l.jsx(lc,{})]})})]}),l.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?l.jsx(kc,{columns:m,rows:u}):l.jsx(Oc,{label:"Sin registros",description:"No se encontraron datos."})})]})]})]})},LDe=()=>{const e=zt(b=>b.context),t=zt(b=>b.setContext),[r,n]=M.useState(""),[a,i]=M.useState(""),[s,o]=M.useState(""),c=M.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:p}=TDe(c),h=b=>b.consola&&b.sensor_frontal&&b.sensor_izq&&b.sensor_der,v=M.useMemo(()=>{if(!u)return[];const b=u.length,S=u.filter(j=>!h(j)).length,_=u.filter(j=>j.alerta_izq||j.alerta_der).length;return[{label:"Total Registros",value:b,icon:"clipboard"},{label:"Falla Sensores",value:S,icon:"alert-triangle",colorClass:"bg-red-50 text-red-600"},{label:"Alertas Activas",value:_,icon:"bell",colorClass:"bg-yellow-50 text-yellow-600"}]},[u]),m=M.useMemo(()=>{if(!u)return[];const b=u.filter(_=>h(_)).length,S=u.filter(_=>!h(_)).length;return[{name:"Sensores OK",value:b,color:"#10b981"},{name:"Falla",value:S,color:"#ef4444"}]},[u]),x=[{key:"bus_ppu",header:"PPU",value:b=>b.bus_ppu},{key:"terminal",header:"Terminal",render:b=>or(b.terminal),value:b=>b.terminal},{key:"bus_marca",header:"Marca",value:b=>b.bus_marca||"-"},{key:"consola",header:"Consola",render:b=>b.consola?l.jsx(xe,{name:"check",size:16,className:"text-green-500"}):l.jsx(xe,{name:"x",size:16,className:"text-red-500"}),value:b=>b.consola?"OK":"Falla"},{key:"id",header:"Sensores OK?",render:b=>{const S=h(b);return l.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${S?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:S?"S":"NO"})},value:b=>h(b)?"S":"NO"},{key:"id",header:"Alertas",render:b=>{const S=[];return b.alerta_izq&&S.push("IZQ"),b.alerta_der&&S.push("DER"),S.length>0?l.jsx("span",{className:"text-red-600 font-bold text-xs",children:S.join(", ")}):"-"},value:b=>{const S=[];return b.alerta_izq&&S.push("IZQ"),b.alerta_der&&S.push("DER"),S.join(", ")}},{key:"updated_at",header:"Actualizado",render:b=>Ia(b.updated_at),value:b=>Ia(b.updated_at)}],y=x.map(b=>({header:b.header,key:b.key,value:b.value})),g=()=>{u&&mr({filename:`minicheck_mobileye_${new Date().toISOString().split("T")[0]}`,sheetName:"Mobileye",rows:u,columns:y})};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(mn,{title:"Control Mobileye",description:"Estado de sensores y cmaras Mobileye",actions:l.jsx("div",{className:"flex gap-2",children:l.jsx(_a,{onExportView:g,onExportAll:g})})}),l.jsx(i1,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:o}),d&&l.jsx(kn,{label:"Cargando Mobileye..."}),f&&l.jsx(Da,{message:"No se pudieron cargar los datos.",onRetry:p}),!d&&!f&&l.jsxs(l.Fragment,{children:[l.jsx(s1,{items:v}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80",children:[l.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-4",children:"Estado General Sensores"}),l.jsx(cc,{width:"100%",height:"100%",children:l.jsxs(op,{data:m,children:[l.jsx(Cf,{strokeDasharray:"3 3",vertical:!1}),l.jsx(Nc,{dataKey:"name",tick:{fontSize:10}}),l.jsx(jc,{tick:{fontSize:10}}),l.jsx(Ca,{}),l.jsx(Xi,{dataKey:"value",name:"Cantidad",radius:[4,4,0,0],children:m.map((b,S)=>l.jsx(Rc,{fill:b.color},`cell-${S}`))})]})})]}),l.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?l.jsx(kc,{columns:x,rows:u}):l.jsx(Oc,{label:"Sin registros",description:"No se encontraron datos."})})]})]})]})},RDe=()=>{const e=zt(g=>g.context),t=zt(g=>g.setContext),[r,n]=M.useState(""),[a,i]=M.useState(""),[s,o]=M.useState(""),c=M.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:p}=CDe(c),h=M.useMemo(()=>{if(!u)return[];const g=u.length,b=u.filter(_=>_.estado==="INCONSISTENTE").length,S=u.filter(_=>_.estado==="NO_FUNCIONA").length;return[{label:"Total Registros",value:g,icon:"clipboard"},{label:"Inconsistentes",value:b,icon:"alert-triangle",colorClass:"bg-yellow-50 text-yellow-600"},{label:"No Funciona",value:S,icon:"x-circle",colorClass:"bg-red-50 text-red-600"}]},[u]),v=M.useMemo(()=>{if(!u)return[];const g=u.filter(_=>_.estado==="OK").length,b=u.filter(_=>_.estado==="INCONSISTENTE").length,S=u.filter(_=>_.estado==="NO_FUNCIONA").length;return[{name:"OK",value:g,color:"#10b981"},{name:"INCONSISTENTE",value:b,color:"#f59e0b"},{name:"NO FUNCIONA",value:S,color:"#ef4444"}].filter(_=>_.value>0)},[u]),m=[{key:"bus_ppu",header:"PPU",value:g=>g.bus_ppu},{key:"terminal",header:"Terminal",render:g=>or(g.terminal),value:g=>g.terminal},{key:"lectura",header:"Lectura",value:g=>g.lectura.toLocaleString("es-CL")},{key:"estado",header:"Estado",render:g=>{let b="bg-gray-100 text-gray-800";return g.estado==="OK"&&(b="bg-green-100 text-green-800"),g.estado==="INCONSISTENTE"&&(b="bg-yellow-100 text-yellow-800"),g.estado==="NO_FUNCIONA"&&(b="bg-red-100 text-red-800"),l.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${b}`,children:g.estado})},value:g=>g.estado},{key:"observacion",header:"Observacin",value:g=>g.observacion||""},{key:"updated_at",header:"Actualizado",render:g=>Ia(g.updated_at),value:g=>Ia(g.updated_at)}],x=m.map(g=>({header:g.header,key:g.key,value:g.value})),y=()=>{u&&mr({filename:`minicheck_odometro_${new Date().toISOString().split("T")[0]}`,sheetName:"Odometros",rows:u,columns:x})};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(mn,{title:"Control Odmetro",description:"Lecturas y estado de odmetros",actions:l.jsx("div",{className:"flex gap-2",children:l.jsx(_a,{onExportView:y,onExportAll:y})})}),l.jsx(i1,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:o}),d&&l.jsx(kn,{label:"Cargando Odmetros..."}),f&&l.jsx(Da,{message:"No se pudieron cargar los datos.",onRetry:p}),!d&&!f&&l.jsxs(l.Fragment,{children:[l.jsx(s1,{items:h}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80 flex flex-col items-center justify-center",children:[l.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-2 w-full text-left",children:"Distribucin Estados"}),l.jsx(cc,{width:"100%",height:"100%",children:l.jsxs(JE,{children:[l.jsx(Ho,{data:v,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:v.map((g,b)=>l.jsx(Rc,{fill:g.color},`cell-${b}`))}),l.jsx(Ca,{}),l.jsx(lc,{})]})})]}),l.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?l.jsx(kc,{columns:m,rows:u}):l.jsx(Oc,{label:"Sin registros",description:"No se encontraron datos."})})]})]})]})},IDe=()=>{const e=zt(g=>g.context),t=zt(g=>g.setContext),[r,n]=M.useState(""),[a,i]=M.useState(""),[s,o]=M.useState(""),c=M.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:p}=kDe(c),h=M.useMemo(()=>{if(!u)return[];const g=u.length,b=u.filter(j=>j.danio).length,S=u.filter(j=>j.residuos).length,_=u.filter(j=>!j.tiene).length;return[{label:"Total Registros",value:g,icon:"clipboard"},{label:"Con Dao",value:b,icon:"alert-triangle",colorClass:"bg-red-50 text-red-600"},{label:"Con Residuos",value:S,icon:"trash",colorClass:"bg-orange-50 text-orange-600"},{label:"Sin Publicidad",value:_,icon:"x-circle",colorClass:"bg-gray-50 text-gray-600"}]},[u]),v=M.useMemo(()=>{if(!u)return[];const g=u.filter(_=>_.danio).length,b=u.filter(_=>_.residuos).length,S=u.filter(_=>!_.tiene).length;return[{name:"Con Dao",value:g,color:"#ef4444"},{name:"Con Residuos",value:b,color:"#f97316"},{name:"Sin Pub.",value:S,color:"#64748b"}]},[u]),m=[{key:"bus_ppu",header:"PPU",value:g=>g.bus_ppu},{key:"terminal",header:"Terminal",render:g=>or(g.terminal),value:g=>g.terminal},{key:"tiene",header:"Tiene",render:g=>g.tiene?l.jsx("span",{className:"text-green-600 font-bold",children:"S"}):l.jsx("span",{className:"text-gray-400",children:"NO"}),value:g=>g.tiene?"SI":"NO"},{key:"danio",header:"Dao",render:g=>g.danio?l.jsx("span",{className:"px-2 py-0.5 rounded bg-red-100 text-red-800 text-xs font-bold",children:"S"}):l.jsx("span",{className:"text-gray-400",children:"-"}),value:g=>g.danio?"SI":"NO"},{key:"residuos",header:"Residuos",render:g=>g.residuos?l.jsx("span",{className:"px-2 py-0.5 rounded bg-orange-100 text-orange-800 text-xs font-bold",children:"S"}):l.jsx("span",{className:"text-gray-400",children:"-"}),value:g=>g.residuos?"SI":"NO"},{key:"nombre_publicidad",header:"Nombre",value:g=>g.nombre_publicidad||"-"},{key:"updated_at",header:"Actualizado",render:g=>Ia(g.updated_at),value:g=>Ia(g.updated_at)}],x=m.map(g=>({header:g.header,key:g.key,value:g.value})),y=()=>{u&&mr({filename:`minicheck_publicidad_${new Date().toISOString().split("T")[0]}`,sheetName:"Publicidad",rows:u,columns:x})};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(mn,{title:"Control Publicidad",description:"Estado de publicidad en buses",actions:l.jsx("div",{className:"flex gap-2",children:l.jsx(_a,{onExportView:y,onExportAll:y})})}),l.jsx(i1,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:o}),d&&l.jsx(kn,{label:"Cargando publicidad..."}),f&&l.jsx(Da,{message:"No se pudieron cargar los datos.",onRetry:p}),!d&&!f&&l.jsxs(l.Fragment,{children:[l.jsx(s1,{items:h}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80",children:[l.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-4",children:"Problemas Detectados"}),l.jsx(cc,{width:"100%",height:"100%",children:l.jsxs(op,{data:v,children:[l.jsx(Cf,{strokeDasharray:"3 3",vertical:!1}),l.jsx(Nc,{dataKey:"name",tick:{fontSize:10}}),l.jsx(jc,{tick:{fontSize:10}}),l.jsx(Ca,{}),l.jsx(Xi,{dataKey:"value",name:"Cantidad",radius:[4,4,0,0],children:v.map((g,b)=>l.jsx(Rc,{fill:g.color},`cell-${b}`))})]})})]}),l.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?l.jsx(kc,{columns:m,rows:u}):l.jsx(Oc,{label:"Sin registros",description:"No se encontraron datos."})})]})]})]})},DDe=[{ppu:"ABCD12",modelo:"Camin 3/4",estado:"operativo",odometro:123400,proximaMantencion:"2024-01-15",terminal:"EL_ROBLE"},{ppu:"EFGH34",modelo:"Furgn",estado:"en_taller",odometro:88400,proximaMantencion:"2024-02-01",terminal:"LA_REINA"},{ppu:"IJKL56",modelo:"Tracto",estado:"fuera_servicio",odometro:23e4,proximaMantencion:"2024-01-30",terminal:"EL_SALTO"}],JR=rw(DDe,(e,t)=>t!=null&&t.estado&&t.estado!=="todos"?e.estado===t.estado:!0),MDe=()=>{const e=zt(v=>v.context),t=zt(v=>v.setContext),[r,n]=M.useState({estado:"todos"}),[a,i]=M.useState(""),s=Ut({queryKey:["flota",e,r],queryFn:()=>JR.list({terminalContext:e,filters:r,scope:"view"})}),o=s.data??[],c=M.useMemo(()=>[{key:"ppu",header:"PPU"},{key:"modelo",header:"Modelo"},{key:"estado",header:"Estado",render:v=>l.jsx("span",{className:"badge capitalize",children:v.estado}),value:v=>v.estado},{key:"odometro",header:"Odmetro"},{key:"proximaMantencion",header:"Mantencin",render:v=>Ia(v.proximaMantencion),value:v=>Ia(v.proximaMantencion)},{key:"terminal",header:"Terminal",render:v=>or(v.terminal),value:v=>or(v.terminal)}],[]),u=c.map(v=>({key:v.key,header:v.header,value:m=>v.value?v.value(m):m[v.key]})),d=()=>{mr({filename:"flota_vista",sheetName:"Flota",rows:o,columns:u})},f=async()=>{const v=await JR.list({terminalContext:e,scope:"all"});mr({filename:"flota_completo",sheetName:"Flota",rows:v,columns:u})},p=M.useMemo(()=>{const v={};return o.forEach(m=>{v[m.estado]=(v[m.estado]??0)+1}),Object.entries(v).map(([m,x])=>({estado:m,count:x}))},[o]),h=o.find(v=>v.ppu===a)??o[0];return l.jsxs("div",{className:"space-y-4",children:[l.jsx(mn,{title:"Estado de Flota",description:"Vista por PPU con ficha y grficas",actions:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"btn btn-primary",children:"Agregar unidad"}),l.jsx(_a,{onExportView:d,onExportAll:f})]})}),l.jsx(ns,{terminalContext:e,onTerminalChange:t,children:l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsxs("select",{className:"input",value:r.estado,onChange:v=>n({estado:v.target.value}),children:[l.jsx("option",{value:"todos",children:"Todos"}),l.jsx("option",{value:"operativo",children:"Operativo"}),l.jsx("option",{value:"en_taller",children:"En taller"}),l.jsx("option",{value:"fuera_servicio",children:"Fuera de servicio"})]})]})}),s.isLoading&&l.jsx(kn,{}),s.isError&&l.jsx(Da,{onRetry:s.refetch}),!s.isLoading&&!s.isError&&o.length===0&&l.jsx(Oc,{description:"Sin unidades"}),!s.isLoading&&!s.isError&&o.length>0&&l.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[l.jsx("div",{className:"md:col-span-2 space-y-3",children:l.jsx(kc,{columns:c,rows:o})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"card p-4",children:[l.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Resumen por estado"}),l.jsx("div",{className:"mt-2 h-48",children:l.jsx(cc,{width:"100%",height:"100%",children:l.jsxs(op,{data:p,children:[l.jsx(Cf,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),l.jsx(Nc,{dataKey:"estado",tick:{fontSize:12}}),l.jsx(jc,{allowDecimals:!1}),l.jsx(Ca,{}),l.jsx(Xi,{dataKey:"count",fill:"#3c5eff",radius:[6,6,0,0]})]})})})]}),h&&l.jsxs("div",{className:"card p-4",children:[l.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[l.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Ficha rpida"}),l.jsx("select",{className:"input w-32",value:h.ppu,onChange:v=>i(v.target.value),children:o.map(v=>l.jsx("option",{value:v.ppu,children:v.ppu},v.ppu))})]}),l.jsxs("dl",{className:"space-y-2 text-sm text-slate-700",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("dt",{className:"font-semibold",children:"Modelo"}),l.jsx("dd",{children:h.modelo})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("dt",{className:"font-semibold",children:"Estado"}),l.jsx("dd",{className:"badge capitalize",children:h.estado})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("dt",{className:"font-semibold",children:"Odmetro"}),l.jsx("dd",{children:h.odometro.toLocaleString("es-CL")})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("dt",{className:"font-semibold",children:"Prxima mantencin"}),l.jsx("dd",{children:Ia(h.proximaMantencion)})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("dt",{className:"font-semibold",children:"Terminal"}),l.jsx("dd",{children:or(h.terminal)})]})]})]})]})]})]})},lp={TERMINAL:["El Roble"],CABEZAL:["El Descanso","Aeropuerto","Intermodal La Cisterna"]},c0=e=>{const t={};return e.forEach(r=>{t[r.supply_id]=(t[r.supply_id]||0)+r.quantity}),t},u0=(e,t,r,n)=>e.filter(a=>a.location_type===t&&a.location_name===r&&n.includes(a.period)),FDe=(e,t)=>{const r={},n=u0(e,"TERMINAL","El Roble",["DAY"]),a=c0(n);Object.entries(a).forEach(([o,c])=>{r[o]=(r[o]||0)+c*5});const i=u0(e,"TERMINAL","El Roble",["NIGHT"]),s=c0(i);return Object.entries(s).forEach(([o,c])=>{r[o]=(r[o]||0)+c*4}),lp.CABEZAL.forEach(o=>{const c=u0(e,"CABEZAL",o,["DAY"]),u=c0(c);Object.entries(u).forEach(([d,f])=>{r[d]=(r[d]||0)+f*5})}),wH(r,t)},$De=(e,t)=>{const r={},n=u0(e,"TERMINAL","El Roble",["DAY"]),a=c0(n);Object.entries(a).forEach(([o,c])=>{r[o]=(r[o]||0)+c*2});const i=u0(e,"TERMINAL","El Roble",["NIGHT"]),s=c0(i);return Object.entries(s).forEach(([o,c])=>{r[o]=(r[o]||0)+c*3}),lp.CABEZAL.forEach(o=>{const c=u0(e,"CABEZAL",o,["WEEKEND"]),u=c0(c);Object.entries(u).forEach(([d,f])=>{r[d]=(r[d]||0)+f*2})}),wH(r,t)},wH=(e,t)=>{const r=new Map(t.map(n=>[n.id,n]));return Object.entries(e).filter(([,n])=>n>0).map(([n,a])=>{var i;return{supply_id:n,supply_name:((i=r.get(n))==null?void 0:i.name)||"Desconocido",quantity:a}}).sort((n,a)=>n.supply_name.localeCompare(a.supply_name))},BDe=()=>{const e=new Date().getDay();return e===1?"SEMANA":e===5?"FIN_SEMANA":"EXTRA"},UDe=(e,t)=>{if(!t)return null;const r=new Date(e);return r.setDate(r.getDate()+t),r},G4=(e,t=3)=>{if(!e)return!1;const r=new Date(e),n=new Date;return Math.ceil((r.getTime()-n.getTime())/(1e3*60*60*24))<=t},K4=e=>({SEMANA:"Semana",FIN_SEMANA:"Fin de Semana",EXTRA:"Extra"})[e]||e,QR=e=>e==="PENDIENTE"?"Pendiente":"Retirado",t_=async()=>{if(!gr())return[];const{data:e,error:t}=await Le.from("supplies").select("*").order("name");if(t)throw console.error("Error fetching supplies:",t),t;return e||[]},zDe=async e=>{const{data:t,error:r}=await Le.from("supplies").insert(e).select().single();if(r)throw console.error("Error creating supply:",r),r;return t},qDe=async(e,t)=>{const{data:r,error:n}=await Le.from("supplies").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating supply:",n),n;return r},HDe=async e=>{const{error:t}=await Le.from("supplies").delete().eq("id",e);if(t)throw console.error("Error deleting supply:",t),t},_H=async()=>{if(!gr())return[];const{data:e,error:t}=await Le.from("supply_consumption_profiles").select("*").order("location_type").order("location_name").order("period");if(t)throw console.error("Error fetching consumption profiles:",t),t;return e||[]},WDe=async e=>{const{data:t,error:r}=await Le.from("supply_consumption_profiles").upsert(e,{onConflict:"location_type,location_name,period,supply_id"}).select().single();if(r)throw console.error("Error upserting consumption profile:",r),r;return t},SH=async e=>{if(!gr())return[];let t=Le.from("supply_requests").select("*").order("requested_at",{ascending:!1});e!=null&&e.status&&(t=t.eq("status",e.status)),e!=null&&e.terminal&&(t=t.eq("terminal",e.terminal));const{data:r,error:n}=await t;if(n)throw console.error("Error fetching supply requests:",n),n;return r||[]},VDe=async e=>{if(!gr())return null;const{data:t,error:r}=await Le.from("supply_requests").select("*").eq("id",e).single();if(r)throw console.error("Error fetching supply request:",r),r;const{data:n,error:a}=await Le.from("supply_request_items").select("*, supply:supplies(*)").eq("request_id",e);if(a)throw console.error("Error fetching request items:",a),a;return{...t,items:n||[]}},GDe=async(e,t,r)=>{const{data:n,error:a}=await Le.from("supply_requests").insert({terminal:e.terminal,request_type:e.request_type,created_by:t,consumption_snapshot:r}).select().single();if(a)throw console.error("Error creating supply request:",a),a;const i=e.items.filter(s=>s.quantity>0).map(s=>({request_id:n.id,supply_id:s.supply_id,quantity:s.quantity,is_extra:s.is_extra}));if(i.length>0){const{error:s}=await Le.from("supply_request_items").insert(i);if(s)throw console.error("Error creating request items:",s),s}try{await KDe(n,r||{})}catch(s){console.error("Error sending request email:",s)}return n},KDe=async(e,t)=>{let r;e.request_type==="SEMANA"?r="MONDAY":e.request_type==="FIN_SEMANA"?r="FRIDAY":r="MANUAL";const{data:n,error:a}=await Le.from("supply_email_settings").select("*").eq("trigger",r).eq("enabled",!0).single();if(a||!n){console.log(`No enabled email settings found for trigger: ${r}`);return}if(!n.recipients){console.log(`No recipients configured for trigger: ${r}`);return}const i=Object.entries(t).map(([u,d])=>`<tr><td style="padding: 8px; border-bottom: 1px solid #e2e8f0;">${u}</td><td style="padding: 8px; border-bottom: 1px solid #e2e8f0; text-align: center;">${d}</td></tr>`).join(""),s=Object.values(t).reduce((u,d)=>u+d,0),o=`
        <p><strong>Terminal:</strong> ${e.terminal}</p>
        <p><strong>Tipo:</strong> ${e.request_type==="SEMANA"?"Semanal":e.request_type==="FIN_SEMANA"?"Fin de Semana":"Extra"}</p>
        <p><strong>Solicitado por:</strong> ${e.created_by}</p>
        <p><strong>Fecha:</strong> ${new Date(e.requested_at).toLocaleString("es-CL")}</p>
        
        <table style="width: 100%; border-collapse: collapse; margin-top: 16px;">
            <thead>
                <tr style="background-color: #f8fafc;">
                    <th style="padding: 10px; text-align: left; border-bottom: 2px solid #e2e8f0;">Insumo</th>
                    <th style="padding: 10px; text-align: center; border-bottom: 2px solid #e2e8f0;">Cantidad</th>
                </tr>
            </thead>
            <tbody>
                ${i}
            </tbody>
            <tfoot>
                <tr style="background-color: #f8fafc; font-weight: bold;">
                    <td style="padding: 10px;">TOTAL</td>
                    <td style="padding: 10px; text-align: center;">${s} unidades</td>
                </tr>
            </tfoot>
        </table>
        
        ${n.body?`<div style="margin-top: 24px;">${n.body}</div>`:""}
    `,{emailService:c}=await ly(async()=>{const{emailService:u}=await Promise.resolve().then(()=>Zse);return{emailService:u}},void 0,import.meta.url);await c.sendEmail({audience:"manual",manualRecipients:n.recipients.split(",").map(u=>u.trim()),subject:n.subject,body:o,module:"informativos"})},XDe=async e=>{const{data:t,error:r}=await Le.from("supply_requests").update({status:"RETIRADO",retrieved_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw console.error("Error marking request as retrieved:",r),r;return t},YDe=async e=>{const{error:t}=await Le.from("supply_requests").delete().eq("id",e);if(t)throw console.error("Error deleting supply request:",t),t},JDe=async(e,t)=>{const r=t.name.split(".").pop(),a=`receipts/${`${e}_${Date.now()}.${r}`}`,{error:i}=await Le.storage.from("supply-receipts").upload(a,t);if(i)throw console.error("Error uploading receipt:",i),i;const{error:s}=await Le.from("supply_requests").update({receipt_path:a}).eq("id",e);if(s)throw console.error("Error updating receipt path:",s),s;return a},QDe=async e=>{const{data:t}=await Le.storage.from("supply-receipts").createSignedUrl(e,3600);return(t==null?void 0:t.signedUrl)||""},ZDe=async()=>{if(!gr())return[];const{data:e,error:t}=await Le.from("supply_deliveries").select("*, supply:supplies(*)").order("delivered_at",{ascending:!1});if(t)throw console.error("Error fetching deliveries with supplies:",t),t;return e||[]},e7e=async(e,t,r)=>{const n=new Date,a=UDe(n,r),{data:i,error:s}=await Le.from("supply_deliveries").insert({...e,created_by:t,delivered_at:n.toISOString(),next_delivery_at:(a==null?void 0:a.toISOString())||null}).select().single();if(s)throw console.error("Error creating delivery:",s),s;return i},NH=async()=>{if(!gr())return[];const{data:e,error:t}=await Le.from("supply_email_settings").select("*").order("trigger");if(t)throw console.error("Error fetching email settings:",t),t;return e||[]},ZR=async(e,t)=>{const{data:r,error:n}=await Le.from("supply_email_settings").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating email settings:",n),n;return r},t7e=async(e,t)=>{const{data:r,error:n}=await Le.from("supply_email_settings").insert({trigger:e,...t}).select().single();if(n)throw console.error("Error creating email settings:",n),n;return r},r7e=async()=>{const e=await NH();if(e.length>0)return e;const t=[{trigger:"MONDAY",recipients:"",subject:"Solicitud Semanal de Insumos",body:"",enabled:!0},{trigger:"FRIDAY",recipients:"",subject:"Solicitud Fin de Semana - Insumos",body:"",enabled:!0},{trigger:"MANUAL",recipients:"",subject:"Solicitud Manual de Insumos",body:"",enabled:!0}],r=[];for(const n of t)try{const a=await t7e(n.trigger,{recipients:n.recipients,subject:n.subject,body:n.body,enabled:n.enabled});r.push(a)}catch(a){console.error(`Error creating default email setting for ${n.trigger}:`,a)}return r},n7e=async()=>{if(!gr())return{pending:0,retrieved:0};const{data:e,error:t}=await Le.from("supply_requests").select("status");if(t)throw console.error("Error fetching request stats:",t),t;const r=(e==null?void 0:e.filter(a=>a.status==="PENDIENTE").length)||0,n=(e==null?void 0:e.filter(a=>a.status==="RETIRADO").length)||0;return{pending:r,retrieved:n}},a7e=async(e=7)=>{if(!gr())return[];const t=new Date;t.setDate(t.getDate()+e);const{data:r,error:n}=await Le.from("supply_deliveries").select("*, supply:supplies(*)").not("next_delivery_at","is",null).lte("next_delivery_at",t.toISOString()).order("next_delivery_at");if(n)throw console.error("Error fetching upcoming deliveries:",n),n;return r||[]},i7e=()=>{const[e,t]=M.useState({supplies:[],requestStats:{pending:0,retrieved:0},upcomingDeliveries:[],recentRequests:[]}),[r,n]=M.useState(!0);M.useEffect(()=>{(async()=>{try{const[s,o,c,u]=await Promise.all([t_(),n7e(),a7e(7),SH()]);t({supplies:s,requestStats:o,upcomingDeliveries:c,recentRequests:u.slice(0,5)})}catch(s){console.error("Error loading dashboard stats:",s)}finally{n(!1)}})()},[]),e.supplies.filter(i=>i.min_stock>0&&i.min_stock>0);const a=e.upcomingDeliveries.filter(i=>G4(i.next_delivery_at,3));return r?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[l.jsx("div",{className:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-brand-100 text-brand-600",children:l.jsx(xe,{name:"package",size:22})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Insumos"}),l.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.supplies.length})]})]})}),l.jsx("div",{className:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-warning-100 text-warning-600",children:l.jsx(xe,{name:"clock",size:22})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Pendientes"}),l.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.requestStats.pending})]})]})}),l.jsx("div",{className:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-success-100 text-success-600",children:l.jsx(xe,{name:"check-circle",size:22})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Retiradas"}),l.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.requestStats.retrieved})]})]})}),l.jsx("div",{className:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`flex h-11 w-11 items-center justify-center rounded-xl ${a.length>0?"bg-danger-100 text-danger-600":"bg-slate-100 text-slate-500"}`,children:l.jsx(xe,{name:"alert-triangle",size:22})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Alertas"}),l.jsx("p",{className:"text-2xl font-bold text-slate-800",children:a.length})]})]})})]}),l.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[l.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-4",children:[l.jsx("h3",{className:"font-semibold text-slate-800",children:"Solicitudes Recientes"}),l.jsx(xe,{name:"file-text",size:18,className:"text-slate-400"})]}),l.jsx("div",{className:"divide-y divide-slate-100",children:e.recentRequests.length===0?l.jsx("div",{className:"px-5 py-8 text-center text-sm text-slate-500",children:"No hay solicitudes registradas"}):e.recentRequests.map(i=>l.jsxs("div",{className:"flex items-center gap-4 px-5 py-3.5",children:[l.jsx("div",{className:`flex h-9 w-9 items-center justify-center rounded-lg ${i.status==="PENDIENTE"?"bg-warning-100 text-warning-600":"bg-success-100 text-success-600"}`,children:l.jsx(xe,{name:i.status==="PENDIENTE"?"clock":"check",size:16})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("p",{className:"text-sm font-medium text-slate-800 truncate",children:[K4(i.request_type)," - ",i.terminal]}),l.jsx("p",{className:"text-xs text-slate-500",children:new Date(i.requested_at).toLocaleDateString("es-CL")})]}),l.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${i.status==="PENDIENTE"?"bg-warning-100 text-warning-700":"bg-success-100 text-success-700"}`,children:i.status==="PENDIENTE"?"Pendiente":"Retirado"})]},i.id))})]}),l.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-4",children:[l.jsx("h3",{className:"font-semibold text-slate-800",children:"Entregas Proximas"}),l.jsx(xe,{name:"calendar",size:18,className:"text-slate-400"})]}),l.jsx("div",{className:"divide-y divide-slate-100",children:e.upcomingDeliveries.length===0?l.jsx("div",{className:"px-5 py-8 text-center text-sm text-slate-500",children:"No hay entregas programadas"}):e.upcomingDeliveries.slice(0,5).map(i=>{const s=G4(i.next_delivery_at,3);return l.jsxs("div",{className:"flex items-center gap-4 px-5 py-3.5",children:[l.jsx("div",{className:`flex h-9 w-9 items-center justify-center rounded-lg ${s?"bg-danger-100 text-danger-600":"bg-slate-100 text-slate-600"}`,children:l.jsx(xe,{name:"user",size:16})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium text-slate-800 truncate",children:i.staff_name}),l.jsx("p",{className:"text-xs text-slate-500",children:i.next_delivery_at?new Date(i.next_delivery_at).toLocaleDateString("es-CL"):"Sin fecha"})]}),s&&l.jsx("span",{className:"inline-flex items-center rounded-full bg-danger-100 px-2.5 py-0.5 text-xs font-medium text-danger-700",children:"Vencida"})]},i.id)})})]})]}),l.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-4",children:[l.jsx("h3",{className:"font-semibold text-slate-800",children:"Catalogo de Insumos"}),l.jsxs("span",{className:"text-sm text-slate-500",children:[e.supplies.length," insumos"]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[l.jsx("th",{className:"px-5 py-3",children:"Nombre"}),l.jsx("th",{className:"px-5 py-3",children:"Unidad"}),l.jsx("th",{className:"px-5 py-3 text-center",children:"Vida Util"}),l.jsx("th",{className:"px-5 py-3 text-center",children:"Stock Min"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:e.supplies.map(i=>l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"px-5 py-3 text-sm font-medium text-slate-800",children:i.name}),l.jsx("td",{className:"px-5 py-3 text-sm text-slate-600",children:i.unit}),l.jsx("td",{className:"px-5 py-3 text-center text-sm text-slate-600",children:i.life_days?`${i.life_days} dias`:"-"}),l.jsx("td",{className:"px-5 py-3 text-center text-sm text-slate-600",children:i.min_stock>0?i.min_stock:"-"})]},i.id))})]})})]})]})},s7e=({onSuccess:e,onCancel:t})=>{const r=Ar(A=>A.session),[n,a]=M.useState([]),[i,s]=M.useState([]),[o,c]=M.useState(!0),[u,d]=M.useState(!1),[f,p]=M.useState(lp.TERMINAL[0]),[h,v]=M.useState(BDe()),[m,x]=M.useState([]),[y,g]=M.useState({supply_id:"",quantity:0});M.useEffect(()=>{(async()=>{try{const[E,T]=await Promise.all([t_(),_H()]);a(E),s(T)}catch(E){console.error("Error loading form data:",E)}finally{c(!1)}})()},[]),M.useEffect(()=>{if(n.length===0||i.length===0)return;let A;h==="SEMANA"?A=FDe(i,n):h==="FIN_SEMANA"?A=$De(i,n):A=[],x(A.map(E=>({...E,is_extra:!1})))},[h,n,i]);const b=(A,E)=>{x(T=>T.map(L=>L.supply_id===A?{...L,quantity:Math.max(0,E)}:L))},S=()=>{if(!y.supply_id||y.quantity<=0)return;const A=n.find(T=>T.id===y.supply_id);if(!A)return;const E=m.find(T=>T.supply_id===y.supply_id);x(E?T=>T.map(L=>L.supply_id===y.supply_id?{...L,quantity:L.quantity+y.quantity}:L):T=>[...T,{supply_id:y.supply_id,supply_name:A.name,quantity:y.quantity,is_extra:!0}]),g({supply_id:"",quantity:0})},_=A=>{x(E=>E.filter(T=>T.supply_id!==A))},j=async()=>{const A=m.filter(E=>E.quantity>0);if(A.length===0){alert("Debe agregar al menos un insumo");return}d(!0);try{const E={};A.forEach(T=>{E[T.supply_name]=T.quantity}),await GDe({terminal:f,request_type:h,items:A.map(T=>({supply_id:T.supply_id,quantity:T.quantity,is_extra:T.is_extra}))},(r==null?void 0:r.supervisorName)||"Usuario",E),e()}catch(E){console.error("Error creating request:",E),alert("Error al crear la solicitud")}finally{d(!1)}};return o?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):l.jsxs("div",{className:"space-y-5",children:[l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Terminal"}),l.jsx("select",{value:f,onChange:A=>p(A.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:lp.TERMINAL.map(A=>l.jsx("option",{value:A,children:A},A))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Tipo de Solicitud"}),l.jsxs("select",{value:h,onChange:A=>v(A.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:[l.jsx("option",{value:"SEMANA",children:"Semana (Lun-Vie)"}),l.jsx("option",{value:"FIN_SEMANA",children:"Fin de Semana"}),l.jsx("option",{value:"EXTRA",children:"Extra"})]})]})]}),h!=="EXTRA"&&l.jsx("div",{className:"rounded-lg bg-brand-50 p-3 text-sm text-brand-700",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(xe,{name:"info",size:18,className:"mt-0.5 flex-shrink-0"}),l.jsx("p",{children:h==="SEMANA"?"Calculo automatico para Lunes a Viernes incluyendo noches de lunes a jueves.":"Calculo automatico para Viernes noche, Sabado y Domingo completos."})]})}),l.jsx("div",{className:"rounded-lg border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-50 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[l.jsx("th",{className:"px-4 py-2",children:"Insumo"}),l.jsx("th",{className:"px-4 py-2 text-right w-24",children:"Cantidad"}),l.jsx("th",{className:"px-4 py-2 w-12"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:m.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-4 py-6 text-center text-slate-500",children:"No hay insumos. Agregue items extra."})}):m.map(A=>l.jsxs("tr",{children:[l.jsxs("td",{className:"px-4 py-2 text-slate-800",children:[A.supply_name,A.is_extra&&l.jsx("span",{className:"ml-2 text-xs text-brand-500",children:"(extra)"})]}),l.jsx("td",{className:"px-4 py-2",children:l.jsx("input",{type:"number",min:"0",value:A.quantity,onChange:E=>b(A.supply_id,parseInt(E.target.value)||0),className:"w-full rounded border border-slate-300 px-2 py-1 text-right text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})}),l.jsx("td",{className:"px-4 py-2 text-center",children:l.jsx("button",{onClick:()=>_(A.supply_id),className:"rounded p-1 text-slate-400 hover:bg-danger-100 hover:text-danger-600",children:l.jsx(xe,{name:"x",size:16})})})]},A.supply_id))})]})}),l.jsxs("div",{className:"rounded-lg border border-dashed border-slate-300 p-4",children:[l.jsx("p",{className:"mb-3 text-sm font-medium text-slate-700",children:"Agregar insumo extra"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("select",{value:y.supply_id,onChange:A=>g(E=>({...E,supply_id:A.target.value})),className:"flex-1 rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:[l.jsx("option",{value:"",children:"Seleccionar insumo..."}),n.filter(A=>!m.some(E=>E.supply_id===A.id)).map(A=>l.jsx("option",{value:A.id,children:A.name},A.id))]}),l.jsx("input",{type:"number",min:"1",placeholder:"Cant.",value:y.quantity||"",onChange:A=>g(E=>({...E,quantity:parseInt(A.target.value)||0})),className:"w-20 rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"}),l.jsx("button",{onClick:S,disabled:!y.supply_id||y.quantity<=0,className:"rounded-lg bg-slate-100 px-3 py-2 text-slate-600 hover:bg-slate-200 disabled:opacity-50",children:l.jsx(xe,{name:"plus",size:18})})]})]}),l.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-slate-50 px-4 py-3",children:[l.jsxs("span",{className:"text-sm font-medium text-slate-600",children:["Total items: ",m.filter(A=>A.quantity>0).length]}),l.jsxs("span",{className:"text-sm font-bold text-slate-800",children:[m.reduce((A,E)=>A+E.quantity,0)," unidades"]})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:t,className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),l.jsxs("button",{onClick:j,disabled:u||m.filter(A=>A.quantity>0).length===0,className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[u&&l.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Crear Solicitud"]})]})]})},o7e=({onRefresh:e})=>{const[t,r]=M.useState([]),[n,a]=M.useState(!0),[i,s]=M.useState(!1),[o,c]=M.useState(null),[u,d]=M.useState(!1),[f,p]=M.useState("ALL"),[h,v]=M.useState(null),[m,x]=M.useState(null),[y,g]=M.useState(!1),[b,S]=M.useState(null),_=async()=>{try{a(!0);const D=await SH(f!=="ALL"?{status:f}:void 0);r(D)}catch(D){console.error("Error loading requests:",D)}finally{a(!1)}};M.useEffect(()=>{_()},[f]);const j=async D=>{try{const q=await VDe(D);c(q),d(!0)}catch(q){console.error("Error loading request detail:",q)}},A=D=>{v(D),x(null),S(null)},E=async()=>{if(!(!h||!m)){g(!0),S(null);try{await JDe(h,m),await XDe(h),v(null),x(null),await _(),e==null||e()}catch(D){console.error("Error closing request:",D);const q=D instanceof Error?D.message:"Error desconocido";q.includes("Bucket not found")||q.includes("not found")?S('El bucket de almacenamiento no existe. Contacte al administrador para crear el bucket "supply-receipts" en Supabase Storage.'):q.includes("security")||q.includes("policy")?S("Error de permisos. Verifique las polticas del bucket en Supabase."):S(`Error al cerrar solicitud: ${q}`)}finally{g(!1)}}},T=D=>{var X;const q=(X=D.target.files)==null?void 0:X[0];if(q){if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(q.type)){S("Tipo de archivo no vlido. Use PDF, JPG o PNG.");return}if(q.size>5*1024*1024){S("El archivo excede 5MB.");return}x(q),S(null)}},L=async D=>{if(confirm("Eliminar esta solicitud?"))try{await YDe(D),await _(),e==null||e()}catch(q){console.error("Error deleting request:",q)}},k=async D=>{try{const q=await QDe(D);window.open(q,"_blank")}catch(q){console.error("Error getting receipt URL:",q)}},R=()=>{s(!1),_(),e==null||e()};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>p("ALL"),className:`rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${f==="ALL"?"bg-brand-500 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Todas"}),l.jsx("button",{onClick:()=>p("PENDIENTE"),className:`rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${f==="PENDIENTE"?"bg-warning-500 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Pendientes"}),l.jsx("button",{onClick:()=>p("RETIRADO"),className:`rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${f==="RETIRADO"?"bg-success-500 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Retiradas"})]}),l.jsxs("button",{onClick:()=>s(!0),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 transition-colors",children:[l.jsx(xe,{name:"plus",size:18}),l.jsx("span",{children:"Nueva Solicitud"})]})]}),l.jsx("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:n?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):t.length===0?l.jsxs("div",{className:"px-5 py-12 text-center",children:[l.jsx(xe,{name:"inbox",size:40,className:"mx-auto text-slate-300 mb-3"}),l.jsx("p",{className:"text-sm text-slate-500",children:"No hay solicitudes registradas"})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[l.jsx("th",{className:"px-4 py-3",children:"Fecha"}),l.jsx("th",{className:"px-4 py-3",children:"Tipo"}),l.jsx("th",{className:"px-4 py-3",children:"Terminal"}),l.jsx("th",{className:"px-4 py-3",children:"Estado"}),l.jsx("th",{className:"px-4 py-3",children:"Creado por"}),l.jsx("th",{className:"px-4 py-3 text-right",children:"Acciones"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:t.map(D=>l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:new Date(D.requested_at).toLocaleDateString("es-CL")}),l.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:K4(D.request_type)}),l.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:D.terminal}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${D.status==="PENDIENTE"?"bg-warning-100 text-warning-700":"bg-success-100 text-success-700"}`,children:QR(D.status)})}),l.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:D.created_by}),l.jsx("td",{className:"px-4 py-3",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[l.jsx("button",{onClick:()=>j(D.id),className:"rounded-lg p-1.5 text-slate-500 hover:bg-slate-100 hover:text-brand-600",title:"Ver detalle",children:l.jsx(xe,{name:"eye",size:16})}),D.status==="PENDIENTE"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>A(D.id),className:"rounded-lg p-1.5 text-slate-500 hover:bg-success-100 hover:text-success-600",title:"Cerrar solicitud (requiere boleta)",children:l.jsx(xe,{name:"check",size:16})}),l.jsx("button",{onClick:()=>L(D.id),className:"rounded-lg p-1.5 text-slate-500 hover:bg-danger-100 hover:text-danger-600",title:"Eliminar",children:l.jsx(xe,{name:"trash",size:16})})]}),D.receipt_path&&l.jsx("button",{onClick:()=>k(D.receipt_path),className:"rounded-lg p-1.5 text-slate-500 hover:bg-slate-100 hover:text-brand-600",title:"Ver boleta",children:l.jsx(xe,{name:"file",size:16})})]})})]},D.id))})]})})}),i&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/60 p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"relative mt-8 w-full max-w-2xl rounded-2xl bg-white p-6 shadow-xl",children:[l.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Nueva Solicitud"}),l.jsx("button",{onClick:()=>s(!1),className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:l.jsx(xe,{name:"x",size:20})})]}),l.jsx(s7e,{onSuccess:R,onCancel:()=>s(!1)})]})}),u&&o&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/60 p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"relative mt-8 w-full max-w-lg rounded-2xl bg-white p-6 shadow-xl",children:[l.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Detalle Solicitud"}),l.jsx("button",{onClick:()=>{d(!1),c(null)},className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:l.jsx(xe,{name:"x",size:20})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Tipo:"}),l.jsx("span",{className:"ml-2 font-medium text-slate-800",children:K4(o.request_type)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Estado:"}),l.jsx("span",{className:`ml-2 font-medium ${o.status==="PENDIENTE"?"text-warning-600":"text-success-600"}`,children:QR(o.status)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Terminal:"}),l.jsx("span",{className:"ml-2 font-medium text-slate-800",children:o.terminal})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Fecha:"}),l.jsx("span",{className:"ml-2 font-medium text-slate-800",children:new Date(o.requested_at).toLocaleDateString("es-CL")})]})]}),l.jsx("div",{className:"rounded-lg border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-50 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[l.jsx("th",{className:"px-4 py-2",children:"Insumo"}),l.jsx("th",{className:"px-4 py-2 text-right",children:"Cantidad"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:o.items.map(D=>{var q;return l.jsxs("tr",{children:[l.jsxs("td",{className:"px-4 py-2 text-slate-800",children:[((q=D.supply)==null?void 0:q.name)||"Desconocido",D.is_extra&&l.jsx("span",{className:"ml-2 text-xs text-brand-500",children:"(extra)"})]}),l.jsx("td",{className:"px-4 py-2 text-right font-medium text-slate-800",children:D.quantity})]},D.id)})})]})})]})]})}),h&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/60 p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"relative mt-8 w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[l.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Cerrar Solicitud"}),l.jsx("button",{onClick:()=>v(null),className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:l.jsx(xe,{name:"x",size:20})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"rounded-lg bg-warning-50 p-4 text-sm text-warning-800",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(xe,{name:"alert-triangle",size:18,className:"mt-0.5 flex-shrink-0"}),l.jsxs("p",{children:[l.jsx("strong",{children:"Obligatorio:"})," Debe adjuntar la boleta o comprobante para cerrar esta solicitud."]})]})}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700",children:"Boleta o Comprobante (PDF, JPG, PNG - max 5MB) *"}),l.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:T,className:"block w-full text-sm text-slate-500 file:mr-4 file:rounded-lg file:border-0 file:bg-brand-50 file:px-4 file:py-2 file:text-sm file:font-medium file:text-brand-700 hover:file:bg-brand-100"}),m&&l.jsxs("p",{className:"mt-2 flex items-center gap-2 text-sm text-success-600",children:[l.jsx(xe,{name:"check",size:16}),m.name]})]}),b&&l.jsx("div",{className:"rounded-lg bg-danger-50 p-3 text-sm text-danger-700",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(xe,{name:"alert-triangle",size:16,className:"mt-0.5 flex-shrink-0"}),l.jsx("p",{children:b})]})}),l.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[l.jsx("button",{onClick:()=>v(null),className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),l.jsxs("button",{onClick:E,disabled:!m||y,className:"inline-flex items-center gap-2 rounded-lg bg-success-500 px-4 py-2 text-sm font-medium text-white hover:bg-success-600 disabled:opacity-50",children:[y&&l.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Cerrar Solicitud"]})]})]})]})})]})},l7e=()=>{const e=Ar(g=>g.session),[t,r]=M.useState([]),[n,a]=M.useState([]),[i,s]=M.useState([]),[o,c]=M.useState(!0),[u,d]=M.useState(!1),[f,p]=M.useState(!1),[h,v]=M.useState({supply_id:"",staff_rut:"",staff_name:"",quantity:1,notes:""}),m=async()=>{try{const[g,b,S]=await Promise.all([t_(),ZDe(),Q$({mode:"ALL"},{cargo:"cleaner",status:"ACTIVO"})]);r(g),a(b),s(S)}catch(g){console.error("Error loading deliveries data:",g)}finally{c(!1)}};M.useEffect(()=>{m()},[]);const x=g=>{const b=i.find(S=>S.rut===g);v(S=>({...S,staff_rut:g,staff_name:(b==null?void 0:b.nombre)||""}))},y=async()=>{if(!h.supply_id||!h.staff_rut||h.quantity<=0){alert("Complete todos los campos requeridos");return}p(!0);try{const g=t.find(b=>b.id===h.supply_id);await e7e(h,(e==null?void 0:e.supervisorName)||"Usuario",(g==null?void 0:g.life_days)||null),d(!1),v({supply_id:"",staff_rut:"",staff_name:"",quantity:1,notes:""}),await m()}catch(g){console.error("Error creating delivery:",g),alert("Error al registrar la entrega")}finally{p(!1)}};return o?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Registro de entregas de insumos a personal de limpieza"}),l.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600",children:[l.jsx(xe,{name:"plus",size:18}),l.jsx("span",{children:"Nueva Entrega"})]})]}),l.jsx("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:n.length===0?l.jsxs("div",{className:"px-5 py-12 text-center",children:[l.jsx(xe,{name:"package",size:40,className:"mx-auto text-slate-300 mb-3"}),l.jsx("p",{className:"text-sm text-slate-500",children:"No hay entregas registradas"})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[l.jsx("th",{className:"px-4 py-3",children:"Fecha"}),l.jsx("th",{className:"px-4 py-3",children:"Personal"}),l.jsx("th",{className:"px-4 py-3",children:"Insumo"}),l.jsx("th",{className:"px-4 py-3 text-center",children:"Cantidad"}),l.jsx("th",{className:"px-4 py-3",children:"Proxima Entrega"}),l.jsx("th",{className:"px-4 py-3",children:"Notas"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:n.map(g=>{var S;const b=G4(g.next_delivery_at,3);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:new Date(g.delivered_at).toLocaleDateString("es-CL")}),l.jsx("td",{className:"px-4 py-3",children:l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-slate-800",children:g.staff_name}),l.jsx("p",{className:"text-xs text-slate-500",children:g.staff_rut})]})}),l.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:((S=g.supply)==null?void 0:S.name)||"Desconocido"}),l.jsx("td",{className:"px-4 py-3 text-center text-sm font-medium text-slate-800",children:g.quantity}),l.jsx("td",{className:"px-4 py-3",children:g.next_delivery_at?l.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${b?"bg-danger-100 text-danger-700":"bg-slate-100 text-slate-600"}`,children:new Date(g.next_delivery_at).toLocaleDateString("es-CL")}):l.jsx("span",{className:"text-sm text-slate-400",children:"-"})}),l.jsx("td",{className:"px-4 py-3 text-sm text-slate-500",children:g.notes||"-"})]},g.id)})})]})})}),u&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/60 p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"relative mt-8 w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[l.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Nueva Entrega"}),l.jsx("button",{onClick:()=>d(!1),className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:l.jsx(xe,{name:"x",size:20})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Personal (Cleaner)"}),l.jsxs("select",{value:h.staff_rut,onChange:g=>x(g.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:[l.jsx("option",{value:"",children:"Seleccionar cleaner..."}),i.map(g=>l.jsxs("option",{value:g.rut,children:[g.nombre," (",g.rut,")"]},g.rut))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Insumo"}),l.jsxs("select",{value:h.supply_id,onChange:g=>v(b=>({...b,supply_id:g.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:[l.jsx("option",{value:"",children:"Seleccionar insumo..."}),t.map(g=>l.jsxs("option",{value:g.id,children:[g.name," (",g.unit,")",g.life_days&&` - ${g.life_days} dias vida util`]},g.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Cantidad"}),l.jsx("input",{type:"number",min:"1",value:h.quantity,onChange:g=>v(b=>({...b,quantity:parseInt(g.target.value)||1})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Notas (opcional)"}),l.jsx("textarea",{value:h.notes||"",onChange:g=>v(b=>({...b,notes:g.target.value})),rows:2,className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",placeholder:"Observaciones..."})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[l.jsx("button",{onClick:()=>d(!1),className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),l.jsxs("button",{onClick:y,disabled:f||!h.supply_id||!h.staff_rut,className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[f&&l.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Registrar Entrega"]})]})]})]})})]})},c7e=["rollo","bolsa","unidad","litro","kit"],u7e=()=>{const[e,t]=M.useState("consumption"),[r,n]=M.useState("TERMINAL"),[a,i]=M.useState([]),[s,o]=M.useState([]),[c,u]=M.useState(!0),[d,f]=M.useState(!1),[p,h]=M.useState(!1),[v,m]=M.useState({name:"",unit:"unidad",life_days:null,min_stock:0}),x=async()=>{try{const[E,T]=await Promise.all([t_(),_H()]);i(E),o(T)}catch(E){console.error("Error loading config data:",E)}finally{u(!1)}};M.useEffect(()=>{x()},[]);const y=(E,T,L,k)=>{const R=s.find(D=>D.location_type===E&&D.location_name===T&&D.period===L&&D.supply_id===k);return(R==null?void 0:R.quantity)||0},g=async(E,T,L,k,R)=>{f(!0);try{await WDe({location_type:E,location_name:T,period:L,supply_id:k,quantity:Math.max(0,R)}),await x()}catch(D){console.error("Error updating profile:",D)}finally{f(!1)}},b=async(E,T,L)=>{f(!0);try{await qDe(E,{[T]:L}),await x()}catch(k){console.error("Error updating supply:",k)}finally{f(!1)}},S=async()=>{if(!v.name.trim()){alert("Ingrese el nombre del insumo");return}f(!0);try{await zDe({name:v.name.trim(),unit:v.unit,life_days:v.life_days,min_stock:v.min_stock}),m({name:"",unit:"unidad",life_days:null,min_stock:0}),h(!1),await x()}catch(E){console.error("Error creating supply:",E),alert("Error al crear el insumo")}finally{f(!1)}},_=async(E,T)=>{if(confirm(`Eliminar insumo "${T}"? Esta accion no se puede deshacer.`)){f(!0);try{await HDe(E),await x()}catch(L){console.error("Error deleting supply:",L),alert("Error al eliminar. Puede que tenga datos asociados.")}finally{f(!1)}}};if(c)return l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})});const j=r==="TERMINAL"?[{key:"DAY",label:"Dia"},{key:"NIGHT",label:"Noche"}]:[{key:"DAY",label:"Dia (L-V)"},{key:"WEEKEND",label:"Fin de Semana"}],A=r==="TERMINAL"?lp.TERMINAL:lp.CABEZAL;return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-2 border-b border-slate-200 pb-2",children:[l.jsx("button",{onClick:()=>t("consumption"),className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${e==="consumption"?"bg-brand-500 text-white":"text-slate-600 hover:bg-slate-100"}`,children:"Consumos"}),l.jsx("button",{onClick:()=>t("supplies"),className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${e==="supplies"?"bg-brand-500 text-white":"text-slate-600 hover:bg-slate-100"}`,children:"Insumos"})]}),e==="consumption"&&l.jsxs("div",{className:"space-y-4",children:[a.length===0&&l.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 p-8 text-center",children:[l.jsx(xe,{name:"package",size:40,className:"mx-auto text-slate-300 mb-3"}),l.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"No hay insumos configurados. Agregue insumos primero."}),l.jsxs("button",{onClick:()=>t("supplies"),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600",children:[l.jsx(xe,{name:"plus",size:18}),"Agregar Insumos"]})]}),a.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>n("TERMINAL"),className:`flex-1 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors ${r==="TERMINAL"?"bg-slate-800 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Terminal"}),l.jsx("button",{onClick:()=>n("CABEZAL"),className:`flex-1 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors ${r==="CABEZAL"?"bg-slate-800 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Cabezales"})]}),d&&l.jsxs("div",{className:"flex items-center gap-2 text-sm text-brand-600",children:[l.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-brand-500 border-t-transparent"}),"Guardando..."]}),A.map(E=>l.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:[l.jsx("div",{className:"border-b border-slate-100 px-4 py-3 bg-slate-50",children:l.jsx("h3",{className:"font-medium text-slate-800",children:E})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[l.jsx("th",{className:"px-4 py-2",children:"Insumo"}),j.map(T=>l.jsx("th",{className:"px-4 py-2 text-center w-28",children:T.label},T.key))]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:a.map(T=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-2 text-slate-800",children:T.name}),j.map(L=>l.jsx("td",{className:"px-4 py-2 text-center",children:l.jsx("input",{type:"number",min:"0",value:y(r,E,L.key,T.id),onChange:k=>g(r,E,L.key,T.id,parseInt(k.target.value)||0),className:"w-16 rounded border border-slate-300 px-2 py-1 text-center text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})},L.key))]},T.id))})]})})]},E))]})]}),e==="supplies"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600",children:[l.jsx(xe,{name:"plus",size:18}),"Agregar Insumo"]})}),p&&l.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-brand-200 p-4",children:[l.jsx("h4",{className:"font-medium text-slate-800 mb-3",children:"Nuevo Insumo"}),l.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 md:grid-cols-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Nombre *"}),l.jsx("input",{type:"text",value:v.name,onChange:E=>m(T=>({...T,name:E.target.value})),placeholder:"Ej: Nova",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Unidad *"}),l.jsx("select",{value:v.unit,onChange:E=>m(T=>({...T,unit:E.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:c7e.map(E=>l.jsx("option",{value:E,children:E},E))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Vida Util (dias)"}),l.jsx("input",{type:"number",min:"0",value:v.life_days||"",placeholder:"Opcional",onChange:E=>m(T=>({...T,life_days:E.target.value?parseInt(E.target.value):null})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Stock Minimo"}),l.jsx("input",{type:"number",min:"0",value:v.min_stock,onChange:E=>m(T=>({...T,min_stock:parseInt(E.target.value)||0})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[l.jsx("button",{onClick:()=>{h(!1),m({name:"",unit:"unidad",life_days:null,min_stock:0})},className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),l.jsxs("button",{onClick:S,disabled:d||!v.name.trim(),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[d&&l.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Guardar"]})]})]}),a.length===0&&!p?l.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 p-8 text-center",children:[l.jsx(xe,{name:"package",size:40,className:"mx-auto text-slate-300 mb-3"}),l.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"No hay insumos configurados"}),l.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600",children:[l.jsx(xe,{name:"plus",size:18}),"Agregar Primer Insumo"]})]}):a.length>0&&l.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:[l.jsx("div",{className:"border-b border-slate-100 px-4 py-3 bg-slate-50",children:l.jsx("h3",{className:"font-medium text-slate-800",children:"Configuracion de Insumos"})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[l.jsx("th",{className:"px-4 py-2",children:"Insumo"}),l.jsx("th",{className:"px-4 py-2",children:"Unidad"}),l.jsx("th",{className:"px-4 py-2 text-center w-28",children:"Vida Util (dias)"}),l.jsx("th",{className:"px-4 py-2 text-center w-28",children:"Stock Minimo"}),l.jsx("th",{className:"px-4 py-2 w-16"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:a.map(E=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-2 font-medium text-slate-800",children:E.name}),l.jsx("td",{className:"px-4 py-2 text-slate-600",children:E.unit}),l.jsx("td",{className:"px-4 py-2 text-center",children:l.jsx("input",{type:"number",min:"0",value:E.life_days||"",placeholder:"-",onChange:T=>b(E.id,"life_days",T.target.value?parseInt(T.target.value):null),className:"w-16 rounded border border-slate-300 px-2 py-1 text-center text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})}),l.jsx("td",{className:"px-4 py-2 text-center",children:l.jsx("input",{type:"number",min:"0",value:E.min_stock||"",placeholder:"-",onChange:T=>b(E.id,"min_stock",parseInt(T.target.value)||0),className:"w-16 rounded border border-slate-300 px-2 py-1 text-center text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})}),l.jsx("td",{className:"px-4 py-2 text-center",children:l.jsx("button",{onClick:()=>_(E.id,E.name),className:"rounded p-1 text-slate-400 hover:bg-danger-100 hover:text-danger-600",children:l.jsx(xe,{name:"trash",size:16})})})]},E.id))})]})})]})]})]})},d7e={MONDAY:"Lunes (Solicitud Semanal)",FRIDAY:"Viernes (Fin de Semana)",MANUAL:"Manual"},f7e=()=>{const[e,t]=M.useState([]),[r,n]=M.useState(!0),[a,i]=M.useState(!1),[s,o]=M.useState(null),[c,u]=M.useState(null),[d,f]=M.useState(null),[p,h]=M.useState({recipients:"",subject:"",body:"",enabled:!0}),v=async()=>{try{const _=await NH();return t(_),_}catch(_){return console.error("Error loading email settings:",_),[]}finally{n(!1)}},m=async()=>{i(!0);try{const _=await r7e();t(_)}catch(_){console.error("Error creating default settings:",_),alert("Error al crear configuraciones. Verifique que las tablas existan en Supabase.")}finally{i(!1)}};M.useEffect(()=>{v()},[]);const x=_=>{f(_.id),h({recipients:_.recipients,subject:_.subject,body:_.body,enabled:_.enabled})},y=()=>{f(null),h({recipients:"",subject:"",body:"",enabled:!0})},g=async _=>{o(_);try{await ZR(_,p),await v(),f(null)}catch(j){console.error("Error saving email settings:",j),alert("Error al guardar la configuracion")}finally{o(null)}},b=async _=>{o(_.id);try{await ZR(_.id,{enabled:!_.enabled}),await v()}catch(j){console.error("Error toggling email setting:",j)}finally{o(null)}},S=async _=>{if(!_.recipients){alert("Configure los destinatarios primero");return}u(_.id);try{await gl.sendEmail({audience:"manual",manualRecipients:_.recipients.split(",").map(j=>j.trim()),subject:`[TEST] ${_.subject}`,body:`<p>Este es un correo de prueba.</p><hr/>${_.body}`,module:"informativos"}),alert("Correo de prueba enviado")}catch(j){console.error("Error sending test email:",j),alert("Error al enviar el correo de prueba")}finally{u(null)}};return r?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):e.length===0?l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 p-8 text-center",children:[l.jsx(xe,{name:"send",size:40,className:"mx-auto text-slate-300 mb-3"}),l.jsx("h3",{className:"font-medium text-slate-800 mb-2",children:"Configurar Correos Automaticos"}),l.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Cree las configuraciones de correo para las solicitudes automaticas de Lunes, Viernes y Manual."}),l.jsxs("button",{onClick:m,disabled:a,className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[a?l.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}):l.jsx(xe,{name:"plus",size:18}),"Crear Configuraciones"]})]})}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"rounded-lg bg-slate-50 p-4 text-sm text-slate-600",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(xe,{name:"info",size:18,className:"mt-0.5 flex-shrink-0 text-slate-500"}),l.jsx("p",{children:"Configure los destinatarios y plantillas de correo para las solicitudes automaticas. Los correos se envian automaticamente los dias configurados."})]})}),l.jsx("div",{className:"space-y-4",children:e.map(_=>{const j=d===_.id,A=s===_.id,E=c===_.id;return l.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-4 py-3 bg-slate-50",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:`h-2 w-2 rounded-full ${_.enabled?"bg-success-500":"bg-slate-400"}`}),l.jsx("h3",{className:"font-medium text-slate-800",children:d7e[_.trigger]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("button",{onClick:()=>b(_),disabled:A,className:`rounded-lg px-3 py-1 text-xs font-medium transition-colors ${_.enabled?"bg-success-100 text-success-700 hover:bg-success-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:_.enabled?"Activo":"Inactivo"})})]}),l.jsx("div",{className:"p-4",children:j?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Destinatarios (separados por coma)"}),l.jsx("input",{type:"text",value:p.recipients,onChange:T=>h(L=>({...L,recipients:T.target.value})),placeholder:"correo1@ejemplo.com, correo2@ejemplo.com",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Asunto"}),l.jsx("input",{type:"text",value:p.subject,onChange:T=>h(L=>({...L,subject:T.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Cuerpo del mensaje (HTML permitido)"}),l.jsx("textarea",{value:p.body,onChange:T=>h(L=>({...L,body:T.target.value})),rows:4,placeholder:"Ejemplo: <p>Estimados,</p><p>Se adjunta la solicitud de insumos.</p>",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{onClick:y,className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),l.jsxs("button",{onClick:()=>g(_.id),disabled:A,className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[A&&l.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Guardar"]})]})]}):l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Destinatarios"}),l.jsx("p",{className:"mt-1 text-sm text-slate-800",children:_.recipients||l.jsx("span",{className:"text-slate-400 italic",children:"No configurado"})})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Asunto"}),l.jsx("p",{className:"mt-1 text-sm text-slate-800",children:_.subject})]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Mensaje"}),l.jsx("p",{className:"mt-1 text-sm text-slate-600 line-clamp-2",children:_.body||l.jsx("span",{className:"text-slate-400 italic",children:"Sin mensaje"})})]}),l.jsxs("div",{className:"flex gap-2 pt-2",children:[l.jsxs("button",{onClick:()=>x(_),className:"inline-flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-sm font-medium text-slate-600 hover:bg-slate-100",children:[l.jsx(xe,{name:"edit",size:14}),"Editar"]}),l.jsxs("button",{onClick:()=>S(_),disabled:E||!_.recipients,className:"inline-flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-sm font-medium text-brand-600 hover:bg-brand-50 disabled:opacity-50",children:[E?l.jsx("div",{className:"h-3.5 w-3.5 animate-spin rounded-full border-2 border-brand-500 border-t-transparent"}):l.jsx(xe,{name:"send",size:14}),"Enviar Prueba"]})]})]})})]},_.id)})})]})},h7e=[{key:"dashboard",label:"Dashboard",icon:"bar-chart"},{key:"solicitudes",label:"Solicitudes",icon:"file-text"},{key:"entregas",label:"Entregas",icon:"package"},{key:"config",label:"Configuracion",icon:"settings"}],p7e=()=>{const[e,t]=M.useState("dashboard"),[r,n]=M.useState("consumption"),[a,i]=M.useState(0),s=()=>i(o=>o+1);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Solicitudes de Insumos"}),l.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Gestion inteligente de insumos, solicitudes y entregas a personal"})]}),l.jsx("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 pb-3",children:h7e.map(o=>l.jsxs("button",{onClick:()=>t(o.key),className:`inline-flex items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium transition-all ${e===o.key?"bg-brand-500 text-white shadow-brand":"text-slate-600 hover:bg-slate-100"}`,children:[l.jsx(xe,{name:o.icon,size:18}),l.jsx("span",{className:"hidden sm:inline",children:o.label})]},o.key))}),l.jsxs("div",{children:[e==="dashboard"&&l.jsx(i7e,{}),e==="solicitudes"&&l.jsx(o7e,{onRefresh:s}),e==="entregas"&&l.jsx(l7e,{}),e==="config"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>n("consumption"),className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${r==="consumption"?"bg-slate-800 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Consumos e Insumos"}),l.jsx("button",{onClick:()=>n("emails"),className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${r==="emails"?"bg-slate-800 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Correos"})]}),r==="consumption"&&l.jsx(u7e,{}),r==="emails"&&l.jsx(f7e,{})]})]},a)]})},m7e=()=>{const e=Ar(a=>a.session),t=Ar(a=>a.hydrateSession),[r,n]=M.useState(!0);return M.useEffect(()=>{t().finally(()=>n(!1))},[t]),r?l.jsx(kn,{label:"Validando sesin"}):e?l.jsx(J7,{}):l.jsx(Y7,{to:"/",replace:!0})},g7e=()=>l.jsx(YX,{children:l.jsxs(zX,{children:[l.jsx(Rn,{path:"/",element:l.jsx(oY,{})}),l.jsx(Rn,{element:l.jsx(m7e,{}),children:l.jsxs(Rn,{element:l.jsx(hY,{}),children:[l.jsx(Rn,{path:"/personal",element:l.jsx(Jse,{})}),l.jsx(Rn,{path:"/reuniones",element:l.jsx(Woe,{})}),l.jsx(Rn,{path:"/tareas",element:l.jsx(Ile,{})}),l.jsx(Rn,{path:"/informativos",element:l.jsx(Mle,{})}),l.jsx(Rn,{path:"/asistencia",element:l.jsx(j0e,{})}),l.jsx(Rn,{path:"/aseo/interior",element:l.jsx(T0e,{})}),l.jsx(Rn,{path:"/aseo/exterior",element:l.jsx(C0e,{})}),l.jsx(Rn,{path:"/aseo/rodillo",element:l.jsx(k0e,{})}),l.jsx(Rn,{path:"/credenciales",element:l.jsx(mDe,{})}),l.jsx(Rn,{path:"/solicitudes",element:l.jsx(vDe,{})}),l.jsx(Rn,{path:"/minicheck/extintor",element:l.jsx(ODe,{})}),l.jsx(Rn,{path:"/minicheck/tag",element:l.jsx(PDe,{})}),l.jsx(Rn,{path:"/minicheck/mobileye",element:l.jsx(LDe,{})}),l.jsx(Rn,{path:"/minicheck/odometro",element:l.jsx(RDe,{})}),l.jsx(Rn,{path:"/minicheck/publicidad",element:l.jsx(IDe,{})}),l.jsx(Rn,{path:"/estado-flota",element:l.jsx(MDe,{})}),l.jsx(Rn,{path:"/insumos",element:l.jsx(p7e,{})})]})}),l.jsx(Rn,{path:"*",element:l.jsx(Y7,{to:"/",replace:!0})})]})});AS.createRoot(document.getElementById("root")).render(l.jsx(we.StrictMode,{children:l.jsx(YK,{children:l.jsx(g7e,{})})}));export{Fr as _,$1 as c,kr as g};
