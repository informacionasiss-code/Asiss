var wW=Object.defineProperty;var zT=e=>{throw TypeError(e)};var _W=(e,t,r)=>t in e?wW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Dr=(e,t,r)=>_W(e,typeof t!="symbol"?t+"":t,r),D_=(e,t,r)=>t.has(e)||zT("Cannot "+r);var ge=(e,t,r)=>(D_(e,t,"read from private field"),r?r.call(e):t.get(e)),It=(e,t,r)=>t.has(e)?zT("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ft=(e,t,r,n)=>(D_(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),sr=(e,t,r)=>(D_(e,t,"access private method"),r);var U1=(e,t,r,n)=>({set _(a){ft(e,t,a,r)},get _(){return ge(e,t,n)}});function wR(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var z1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function SW(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var _R={exports:{}},N2={},SR={exports:{}},fr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pv=Symbol.for("react.element"),NW=Symbol.for("react.portal"),jW=Symbol.for("react.fragment"),AW=Symbol.for("react.strict_mode"),EW=Symbol.for("react.profiler"),TW=Symbol.for("react.provider"),CW=Symbol.for("react.context"),kW=Symbol.for("react.forward_ref"),OW=Symbol.for("react.suspense"),PW=Symbol.for("react.memo"),LW=Symbol.for("react.lazy"),qT=Symbol.iterator;function IW(e){return e===null||typeof e!="object"?null:(e=qT&&e[qT]||e["@@iterator"],typeof e=="function"?e:null)}var NR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jR=Object.assign,AR={};function dp(e,t,r){this.props=e,this.context=t,this.refs=AR,this.updater=r||NR}dp.prototype.isReactComponent={};dp.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};dp.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ER(){}ER.prototype=dp.prototype;function nA(e,t,r){this.props=e,this.context=t,this.refs=AR,this.updater=r||NR}var aA=nA.prototype=new ER;aA.constructor=nA;jR(aA,dp.prototype);aA.isPureReactComponent=!0;var HT=Array.isArray,TR=Object.prototype.hasOwnProperty,iA={current:null},CR={key:!0,ref:!0,__self:!0,__source:!0};function kR(e,t,r){var n,a={},i=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)TR.call(t,n)&&!CR.hasOwnProperty(n)&&(a[n]=t[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:Pv,type:e,key:i,ref:s,props:a,_owner:iA.current}}function RW(e,t){return{$$typeof:Pv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function sA(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pv}function DW(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var WT=/\/+/g;function M_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?DW(""+e.key):t.toString(36)}function Xx(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Pv:case NW:s=!0}}if(s)return s=e,a=a(s),e=n===""?"."+M_(s,0):n,HT(a)?(r="",e!=null&&(r=e.replace(WT,"$&/")+"/"),Xx(a,t,r,"",function(u){return u})):a!=null&&(sA(a)&&(a=RW(a,r+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(WT,"$&/")+"/")+e)),t.push(a)),1;if(s=0,n=n===""?".":n+":",HT(e))for(var o=0;o<e.length;o++){i=e[o];var c=n+M_(i,o);s+=Xx(i,t,r,c,a)}else if(c=IW(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=n+M_(i,o++),s+=Xx(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function q1(e,t,r){if(e==null)return e;var n=[],a=0;return Xx(e,n,"","",function(i){return t.call(r,i,a++)}),n}function MW(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var $i={current:null},Yx={transition:null},FW={ReactCurrentDispatcher:$i,ReactCurrentBatchConfig:Yx,ReactCurrentOwner:iA};function OR(){throw Error("act(...) is not supported in production builds of React.")}fr.Children={map:q1,forEach:function(e,t,r){q1(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return q1(e,function(){t++}),t},toArray:function(e){return q1(e,function(t){return t})||[]},only:function(e){if(!sA(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};fr.Component=dp;fr.Fragment=jW;fr.Profiler=EW;fr.PureComponent=nA;fr.StrictMode=AW;fr.Suspense=OW;fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FW;fr.act=OR;fr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=jR({},e.props),a=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=iA.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)TR.call(t,c)&&!CR.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Pv,type:e.type,key:a,ref:i,props:n,_owner:s}};fr.createContext=function(e){return e={$$typeof:CW,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:TW,_context:e},e.Consumer=e};fr.createElement=kR;fr.createFactory=function(e){var t=kR.bind(null,e);return t.type=e,t};fr.createRef=function(){return{current:null}};fr.forwardRef=function(e){return{$$typeof:kW,render:e}};fr.isValidElement=sA;fr.lazy=function(e){return{$$typeof:LW,_payload:{_status:-1,_result:e},_init:MW}};fr.memo=function(e,t){return{$$typeof:PW,type:e,compare:t===void 0?null:t}};fr.startTransition=function(e){var t=Yx.transition;Yx.transition={};try{e()}finally{Yx.transition=t}};fr.unstable_act=OR;fr.useCallback=function(e,t){return $i.current.useCallback(e,t)};fr.useContext=function(e){return $i.current.useContext(e)};fr.useDebugValue=function(){};fr.useDeferredValue=function(e){return $i.current.useDeferredValue(e)};fr.useEffect=function(e,t){return $i.current.useEffect(e,t)};fr.useId=function(){return $i.current.useId()};fr.useImperativeHandle=function(e,t,r){return $i.current.useImperativeHandle(e,t,r)};fr.useInsertionEffect=function(e,t){return $i.current.useInsertionEffect(e,t)};fr.useLayoutEffect=function(e,t){return $i.current.useLayoutEffect(e,t)};fr.useMemo=function(e,t){return $i.current.useMemo(e,t)};fr.useReducer=function(e,t,r){return $i.current.useReducer(e,t,r)};fr.useRef=function(e){return $i.current.useRef(e)};fr.useState=function(e){return $i.current.useState(e)};fr.useSyncExternalStore=function(e,t,r){return $i.current.useSyncExternalStore(e,t,r)};fr.useTransition=function(){return $i.current.useTransition()};fr.version="18.3.1";SR.exports=fr;var F=SR.exports;const _e=Pr(F),$W=wR({__proto__:null,default:_e},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BW=F,UW=Symbol.for("react.element"),zW=Symbol.for("react.fragment"),qW=Object.prototype.hasOwnProperty,HW=BW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WW={key:!0,ref:!0,__self:!0,__source:!0};function PR(e,t,r){var n,a={},i=null,s=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)qW.call(t,n)&&!WW.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:UW,type:e,key:i,ref:s,props:a,_owner:HW.current}}N2.Fragment=zW;N2.jsx=PR;N2.jsxs=PR;_R.exports=N2;var l=_R.exports,PS={},LR={exports:{}},Is={},IR={exports:{}},RR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(J,oe){var we=J.length;J.push(oe);e:for(;0<we;){var xe=we-1>>>1,k=J[xe];if(0<a(k,oe))J[xe]=oe,J[we]=k,we=xe;else break e}}function r(J){return J.length===0?null:J[0]}function n(J){if(J.length===0)return null;var oe=J[0],we=J.pop();if(we!==oe){J[0]=we;e:for(var xe=0,k=J.length,M=k>>>1;xe<M;){var B=2*(xe+1)-1,U=J[B],Z=B+1,pe=J[Z];if(0>a(U,we))Z<k&&0>a(pe,U)?(J[xe]=pe,J[Z]=we,xe=Z):(J[xe]=U,J[B]=we,xe=B);else if(Z<k&&0>a(pe,we))J[xe]=pe,J[Z]=we,xe=Z;else break e}}return oe}function a(J,oe){var we=J.sortIndex-oe.sortIndex;return we!==0?we:J.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var c=[],u=[],d=1,f=null,p=3,h=!1,g=!1,m=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(J){for(var oe=r(u);oe!==null;){if(oe.callback===null)n(u);else if(oe.startTime<=J)n(u),oe.sortIndex=oe.expirationTime,t(c,oe);else break;oe=r(u)}}function S(J){if(m=!1,b(J),!g)if(r(c)!==null)g=!0,se(_);else{var oe=r(u);oe!==null&&ee(S,oe.startTime-J)}}function _(J,oe){g=!1,m&&(m=!1,y(E),E=-1),h=!0;var we=p;try{for(b(oe),f=r(c);f!==null&&(!(f.expirationTime>oe)||J&&!O());){var xe=f.callback;if(typeof xe=="function"){f.callback=null,p=f.priorityLevel;var k=xe(f.expirationTime<=oe);oe=e.unstable_now(),typeof k=="function"?f.callback=k:f===r(c)&&n(c),b(oe)}else n(c);f=r(c)}if(f!==null)var M=!0;else{var B=r(u);B!==null&&ee(S,B.startTime-oe),M=!1}return M}finally{f=null,p=we,h=!1}}var A=!1,j=null,E=-1,T=5,L=-1;function O(){return!(e.unstable_now()-L<T)}function I(){if(j!==null){var J=e.unstable_now();L=J;var oe=!0;try{oe=j(!0,J)}finally{oe?D():(A=!1,j=null)}}else A=!1}var D;if(typeof v=="function")D=function(){v(I)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Y=z.port2;z.port1.onmessage=I,D=function(){Y.postMessage(null)}}else D=function(){x(I,0)};function se(J){j=J,A||(A=!0,D())}function ee(J,oe){E=x(function(){J(e.unstable_now())},oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_continueExecution=function(){g||h||(g=!0,se(_))},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(J){switch(p){case 1:case 2:case 3:var oe=3;break;default:oe=p}var we=p;p=oe;try{return J()}finally{p=we}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(J,oe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var we=p;p=J;try{return oe()}finally{p=we}},e.unstable_scheduleCallback=function(J,oe,we){var xe=e.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?xe+we:xe):we=xe,J){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=we+k,J={id:d++,callback:oe,priorityLevel:J,startTime:we,expirationTime:k,sortIndex:-1},we>xe?(J.sortIndex=we,t(u,J),r(c)===null&&J===r(u)&&(m?(y(E),E=-1):m=!0,ee(S,we-xe))):(J.sortIndex=k,t(c,J),g||h||(g=!0,se(_))),J},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(J){var oe=p;return function(){var we=p;p=oe;try{return J.apply(this,arguments)}finally{p=we}}}})(RR);IR.exports=RR;var VW=IR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GW=F,Ps=VW;function et(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DR=new Set,fg={};function If(e,t){j0(e,t),j0(e+"Capture",t)}function j0(e,t){for(fg[e]=t,e=0;e<t.length;e++)DR.add(t[e])}var hc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),LS=Object.prototype.hasOwnProperty,KW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,VT={},GT={};function XW(e){return LS.call(GT,e)?!0:LS.call(VT,e)?!1:KW.test(e)?GT[e]=!0:(VT[e]=!0,!1)}function YW(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function JW(e,t,r,n){if(t===null||typeof t>"u"||YW(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Bi(e,t,r,n,a,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var ti={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ti[e]=new Bi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ti[t]=new Bi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ti[e]=new Bi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ti[e]=new Bi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ti[e]=new Bi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ti[e]=new Bi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ti[e]=new Bi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ti[e]=new Bi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ti[e]=new Bi(e,5,!1,e.toLowerCase(),null,!1,!1)});var oA=/[\-:]([a-z])/g;function lA(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(oA,lA);ti[t]=new Bi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(oA,lA);ti[t]=new Bi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(oA,lA);ti[t]=new Bi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ti[e]=new Bi(e,1,!1,e.toLowerCase(),null,!1,!1)});ti.xlinkHref=new Bi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ti[e]=new Bi(e,1,!1,e.toLowerCase(),null,!0,!0)});function cA(e,t,r,n){var a=ti.hasOwnProperty(t)?ti[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(JW(t,r,a,n)&&(r=null),n||a===null?XW(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ec=GW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H1=Symbol.for("react.element"),Nh=Symbol.for("react.portal"),jh=Symbol.for("react.fragment"),uA=Symbol.for("react.strict_mode"),IS=Symbol.for("react.profiler"),MR=Symbol.for("react.provider"),FR=Symbol.for("react.context"),dA=Symbol.for("react.forward_ref"),RS=Symbol.for("react.suspense"),DS=Symbol.for("react.suspense_list"),fA=Symbol.for("react.memo"),iu=Symbol.for("react.lazy"),$R=Symbol.for("react.offscreen"),KT=Symbol.iterator;function lm(e){return e===null||typeof e!="object"?null:(e=KT&&e[KT]||e["@@iterator"],typeof e=="function"?e:null)}var Cn=Object.assign,F_;function Om(e){if(F_===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);F_=t&&t[1]||""}return`
`+F_+e}var $_=!1;function B_(e,t){if(!e||$_)return"";$_=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),s=a.length-1,o=i.length-1;1<=s&&0<=o&&a[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==i[o]){if(s!==1||o!==1)do if(s--,o--,0>o||a[s]!==i[o]){var c=`
`+a[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=o);break}}}finally{$_=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Om(e):""}function QW(e){switch(e.tag){case 5:return Om(e.type);case 16:return Om("Lazy");case 13:return Om("Suspense");case 19:return Om("SuspenseList");case 0:case 2:case 15:return e=B_(e.type,!1),e;case 11:return e=B_(e.type.render,!1),e;case 1:return e=B_(e.type,!0),e;default:return""}}function MS(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case jh:return"Fragment";case Nh:return"Portal";case IS:return"Profiler";case uA:return"StrictMode";case RS:return"Suspense";case DS:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case FR:return(e.displayName||"Context")+".Consumer";case MR:return(e._context.displayName||"Context")+".Provider";case dA:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fA:return t=e.displayName||null,t!==null?t:MS(e.type)||"Memo";case iu:t=e._payload,e=e._init;try{return MS(e(t))}catch{}}return null}function ZW(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return MS(t);case 8:return t===uA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function zu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function BR(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function eV(e){var t=BR(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(s){n=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function W1(e){e._valueTracker||(e._valueTracker=eV(e))}function UR(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=BR(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function yy(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function FS(e,t){var r=t.checked;return Cn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function XT(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=zu(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function zR(e,t){t=t.checked,t!=null&&cA(e,"checked",t,!1)}function $S(e,t){zR(e,t);var r=zu(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?BS(e,t.type,r):t.hasOwnProperty("defaultValue")&&BS(e,t.type,zu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function YT(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function BS(e,t,r){(t!=="number"||yy(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Pm=Array.isArray;function Hh(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+zu(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function US(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(et(91));return Cn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function JT(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(et(92));if(Pm(r)){if(1<r.length)throw Error(et(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:zu(r)}}function qR(e,t){var r=zu(t.value),n=zu(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function QT(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function HR(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zS(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?HR(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var V1,WR=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(V1=V1||document.createElement("div"),V1.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=V1.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function hg(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var zm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tV=["Webkit","ms","Moz","O"];Object.keys(zm).forEach(function(e){tV.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),zm[t]=zm[e]})});function VR(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||zm.hasOwnProperty(e)&&zm[e]?(""+t).trim():t+"px"}function GR(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=VR(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var rV=Cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qS(e,t){if(t){if(rV[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(et(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(et(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(et(61))}if(t.style!=null&&typeof t.style!="object")throw Error(et(62))}}function HS(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var WS=null;function hA(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var VS=null,Wh=null,Vh=null;function ZT(e){if(e=Rv(e)){if(typeof VS!="function")throw Error(et(280));var t=e.stateNode;t&&(t=C2(t),VS(e.stateNode,e.type,t))}}function KR(e){Wh?Vh?Vh.push(e):Vh=[e]:Wh=e}function XR(){if(Wh){var e=Wh,t=Vh;if(Vh=Wh=null,ZT(e),t)for(e=0;e<t.length;e++)ZT(t[e])}}function YR(e,t){return e(t)}function JR(){}var U_=!1;function QR(e,t,r){if(U_)return e(t,r);U_=!0;try{return YR(e,t,r)}finally{U_=!1,(Wh!==null||Vh!==null)&&(JR(),XR())}}function pg(e,t){var r=e.stateNode;if(r===null)return null;var n=C2(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(et(231,t,typeof r));return r}var GS=!1;if(hc)try{var cm={};Object.defineProperty(cm,"passive",{get:function(){GS=!0}}),window.addEventListener("test",cm,cm),window.removeEventListener("test",cm,cm)}catch{GS=!1}function nV(e,t,r,n,a,i,s,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var qm=!1,by=null,wy=!1,KS=null,aV={onError:function(e){qm=!0,by=e}};function iV(e,t,r,n,a,i,s,o,c){qm=!1,by=null,nV.apply(aV,arguments)}function sV(e,t,r,n,a,i,s,o,c){if(iV.apply(this,arguments),qm){if(qm){var u=by;qm=!1,by=null}else throw Error(et(198));wy||(wy=!0,KS=u)}}function Rf(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function ZR(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function eC(e){if(Rf(e)!==e)throw Error(et(188))}function oV(e){var t=e.alternate;if(!t){if(t=Rf(e),t===null)throw Error(et(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return eC(a),e;if(i===n)return eC(a),t;i=i.sibling}throw Error(et(188))}if(r.return!==n.return)r=a,n=i;else{for(var s=!1,o=a.child;o;){if(o===r){s=!0,r=a,n=i;break}if(o===n){s=!0,n=a,r=i;break}o=o.sibling}if(!s){for(o=i.child;o;){if(o===r){s=!0,r=i,n=a;break}if(o===n){s=!0,n=i,r=a;break}o=o.sibling}if(!s)throw Error(et(189))}}if(r.alternate!==n)throw Error(et(190))}if(r.tag!==3)throw Error(et(188));return r.stateNode.current===r?e:t}function eD(e){return e=oV(e),e!==null?tD(e):null}function tD(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=tD(e);if(t!==null)return t;e=e.sibling}return null}var rD=Ps.unstable_scheduleCallback,tC=Ps.unstable_cancelCallback,lV=Ps.unstable_shouldYield,cV=Ps.unstable_requestPaint,Vn=Ps.unstable_now,uV=Ps.unstable_getCurrentPriorityLevel,pA=Ps.unstable_ImmediatePriority,nD=Ps.unstable_UserBlockingPriority,_y=Ps.unstable_NormalPriority,dV=Ps.unstable_LowPriority,aD=Ps.unstable_IdlePriority,j2=null,hl=null;function fV(e){if(hl&&typeof hl.onCommitFiberRoot=="function")try{hl.onCommitFiberRoot(j2,e,void 0,(e.current.flags&128)===128)}catch{}}var Mo=Math.clz32?Math.clz32:mV,hV=Math.log,pV=Math.LN2;function mV(e){return e>>>=0,e===0?32:31-(hV(e)/pV|0)|0}var G1=64,K1=4194304;function Lm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Sy(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,s=r&268435455;if(s!==0){var o=s&~a;o!==0?n=Lm(o):(i&=s,i!==0&&(n=Lm(i)))}else s=r&~a,s!==0?n=Lm(s):i!==0&&(n=Lm(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Mo(t),a=1<<r,n|=e[r],t&=~a;return n}function gV(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vV(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-Mo(i),o=1<<s,c=a[s];c===-1?(!(o&r)||o&n)&&(a[s]=gV(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function XS(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function iD(){var e=G1;return G1<<=1,!(G1&4194240)&&(G1=64),e}function z_(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Lv(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Mo(t),e[t]=r}function xV(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Mo(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function mA(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Mo(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var qr=0;function sD(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var oD,gA,lD,cD,uD,YS=!1,X1=[],ku=null,Ou=null,Pu=null,mg=new Map,gg=new Map,cu=[],yV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rC(e,t){switch(e){case"focusin":case"focusout":ku=null;break;case"dragenter":case"dragleave":Ou=null;break;case"mouseover":case"mouseout":Pu=null;break;case"pointerover":case"pointerout":mg.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gg.delete(t.pointerId)}}function um(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Rv(t),t!==null&&gA(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function bV(e,t,r,n,a){switch(t){case"focusin":return ku=um(ku,e,t,r,n,a),!0;case"dragenter":return Ou=um(Ou,e,t,r,n,a),!0;case"mouseover":return Pu=um(Pu,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return mg.set(i,um(mg.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,gg.set(i,um(gg.get(i)||null,e,t,r,n,a)),!0}return!1}function dD(e){var t=Ud(e.target);if(t!==null){var r=Rf(t);if(r!==null){if(t=r.tag,t===13){if(t=ZR(r),t!==null){e.blockedOn=t,uD(e.priority,function(){lD(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Jx(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=JS(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);WS=n,r.target.dispatchEvent(n),WS=null}else return t=Rv(r),t!==null&&gA(t),e.blockedOn=r,!1;t.shift()}return!0}function nC(e,t,r){Jx(e)&&r.delete(t)}function wV(){YS=!1,ku!==null&&Jx(ku)&&(ku=null),Ou!==null&&Jx(Ou)&&(Ou=null),Pu!==null&&Jx(Pu)&&(Pu=null),mg.forEach(nC),gg.forEach(nC)}function dm(e,t){e.blockedOn===t&&(e.blockedOn=null,YS||(YS=!0,Ps.unstable_scheduleCallback(Ps.unstable_NormalPriority,wV)))}function vg(e){function t(a){return dm(a,e)}if(0<X1.length){dm(X1[0],e);for(var r=1;r<X1.length;r++){var n=X1[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ku!==null&&dm(ku,e),Ou!==null&&dm(Ou,e),Pu!==null&&dm(Pu,e),mg.forEach(t),gg.forEach(t),r=0;r<cu.length;r++)n=cu[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<cu.length&&(r=cu[0],r.blockedOn===null);)dD(r),r.blockedOn===null&&cu.shift()}var Gh=Ec.ReactCurrentBatchConfig,Ny=!0;function _V(e,t,r,n){var a=qr,i=Gh.transition;Gh.transition=null;try{qr=1,vA(e,t,r,n)}finally{qr=a,Gh.transition=i}}function SV(e,t,r,n){var a=qr,i=Gh.transition;Gh.transition=null;try{qr=4,vA(e,t,r,n)}finally{qr=a,Gh.transition=i}}function vA(e,t,r,n){if(Ny){var a=JS(e,t,r,n);if(a===null)Q_(e,t,n,jy,r),rC(e,n);else if(bV(a,e,t,r,n))n.stopPropagation();else if(rC(e,n),t&4&&-1<yV.indexOf(e)){for(;a!==null;){var i=Rv(a);if(i!==null&&oD(i),i=JS(e,t,r,n),i===null&&Q_(e,t,n,jy,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Q_(e,t,n,null,r)}}var jy=null;function JS(e,t,r,n){if(jy=null,e=hA(n),e=Ud(e),e!==null)if(t=Rf(e),t===null)e=null;else if(r=t.tag,r===13){if(e=ZR(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return jy=e,null}function fD(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uV()){case pA:return 1;case nD:return 4;case _y:case dV:return 16;case aD:return 536870912;default:return 16}default:return 16}}var Su=null,xA=null,Qx=null;function hD(){if(Qx)return Qx;var e,t=xA,r=t.length,n,a="value"in Su?Su.value:Su.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===a[i-n];n++);return Qx=a.slice(e,1<n?1-n:void 0)}function Zx(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Y1(){return!0}function aC(){return!1}function Rs(e){function t(r,n,a,i,s){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Y1:aC,this.isPropagationStopped=aC,this}return Cn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Y1)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Y1)},persist:function(){},isPersistent:Y1}),t}var fp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yA=Rs(fp),Iv=Cn({},fp,{view:0,detail:0}),NV=Rs(Iv),q_,H_,fm,A2=Cn({},Iv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bA,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fm&&(fm&&e.type==="mousemove"?(q_=e.screenX-fm.screenX,H_=e.screenY-fm.screenY):H_=q_=0,fm=e),q_)},movementY:function(e){return"movementY"in e?e.movementY:H_}}),iC=Rs(A2),jV=Cn({},A2,{dataTransfer:0}),AV=Rs(jV),EV=Cn({},Iv,{relatedTarget:0}),W_=Rs(EV),TV=Cn({},fp,{animationName:0,elapsedTime:0,pseudoElement:0}),CV=Rs(TV),kV=Cn({},fp,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),OV=Rs(kV),PV=Cn({},fp,{data:0}),sC=Rs(PV),LV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DV(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=RV[e])?!!t[e]:!1}function bA(){return DV}var MV=Cn({},Iv,{key:function(e){if(e.key){var t=LV[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zx(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?IV[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bA,charCode:function(e){return e.type==="keypress"?Zx(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zx(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),FV=Rs(MV),$V=Cn({},A2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oC=Rs($V),BV=Cn({},Iv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bA}),UV=Rs(BV),zV=Cn({},fp,{propertyName:0,elapsedTime:0,pseudoElement:0}),qV=Rs(zV),HV=Cn({},A2,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),WV=Rs(HV),VV=[9,13,27,32],wA=hc&&"CompositionEvent"in window,Hm=null;hc&&"documentMode"in document&&(Hm=document.documentMode);var GV=hc&&"TextEvent"in window&&!Hm,pD=hc&&(!wA||Hm&&8<Hm&&11>=Hm),lC=" ",cC=!1;function mD(e,t){switch(e){case"keyup":return VV.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gD(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ah=!1;function KV(e,t){switch(e){case"compositionend":return gD(t);case"keypress":return t.which!==32?null:(cC=!0,lC);case"textInput":return e=t.data,e===lC&&cC?null:e;default:return null}}function XV(e,t){if(Ah)return e==="compositionend"||!wA&&mD(e,t)?(e=hD(),Qx=xA=Su=null,Ah=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pD&&t.locale!=="ko"?null:t.data;default:return null}}var YV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!YV[e.type]:t==="textarea"}function vD(e,t,r,n){KR(n),t=Ay(t,"onChange"),0<t.length&&(r=new yA("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Wm=null,xg=null;function JV(e){TD(e,0)}function E2(e){var t=Ch(e);if(UR(t))return e}function QV(e,t){if(e==="change")return t}var xD=!1;if(hc){var V_;if(hc){var G_="oninput"in document;if(!G_){var dC=document.createElement("div");dC.setAttribute("oninput","return;"),G_=typeof dC.oninput=="function"}V_=G_}else V_=!1;xD=V_&&(!document.documentMode||9<document.documentMode)}function fC(){Wm&&(Wm.detachEvent("onpropertychange",yD),xg=Wm=null)}function yD(e){if(e.propertyName==="value"&&E2(xg)){var t=[];vD(t,xg,e,hA(e)),QR(JV,t)}}function ZV(e,t,r){e==="focusin"?(fC(),Wm=t,xg=r,Wm.attachEvent("onpropertychange",yD)):e==="focusout"&&fC()}function eG(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return E2(xg)}function tG(e,t){if(e==="click")return E2(t)}function rG(e,t){if(e==="input"||e==="change")return E2(t)}function nG(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Uo=typeof Object.is=="function"?Object.is:nG;function yg(e,t){if(Uo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!LS.call(t,a)||!Uo(e[a],t[a]))return!1}return!0}function hC(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pC(e,t){var r=hC(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hC(r)}}function bD(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bD(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function wD(){for(var e=window,t=yy();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=yy(e.document)}return t}function _A(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function aG(e){var t=wD(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&bD(r.ownerDocument.documentElement,r)){if(n!==null&&_A(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=pC(r,i);var s=pC(r,n);a&&s&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var iG=hc&&"documentMode"in document&&11>=document.documentMode,Eh=null,QS=null,Vm=null,ZS=!1;function mC(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ZS||Eh==null||Eh!==yy(n)||(n=Eh,"selectionStart"in n&&_A(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Vm&&yg(Vm,n)||(Vm=n,n=Ay(QS,"onSelect"),0<n.length&&(t=new yA("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Eh)))}function J1(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Th={animationend:J1("Animation","AnimationEnd"),animationiteration:J1("Animation","AnimationIteration"),animationstart:J1("Animation","AnimationStart"),transitionend:J1("Transition","TransitionEnd")},K_={},_D={};hc&&(_D=document.createElement("div").style,"AnimationEvent"in window||(delete Th.animationend.animation,delete Th.animationiteration.animation,delete Th.animationstart.animation),"TransitionEvent"in window||delete Th.transitionend.transition);function T2(e){if(K_[e])return K_[e];if(!Th[e])return e;var t=Th[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in _D)return K_[e]=t[r];return e}var SD=T2("animationend"),ND=T2("animationiteration"),jD=T2("animationstart"),AD=T2("transitionend"),ED=new Map,gC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yu(e,t){ED.set(e,t),If(t,[e])}for(var X_=0;X_<gC.length;X_++){var Y_=gC[X_],sG=Y_.toLowerCase(),oG=Y_[0].toUpperCase()+Y_.slice(1);Yu(sG,"on"+oG)}Yu(SD,"onAnimationEnd");Yu(ND,"onAnimationIteration");Yu(jD,"onAnimationStart");Yu("dblclick","onDoubleClick");Yu("focusin","onFocus");Yu("focusout","onBlur");Yu(AD,"onTransitionEnd");j0("onMouseEnter",["mouseout","mouseover"]);j0("onMouseLeave",["mouseout","mouseover"]);j0("onPointerEnter",["pointerout","pointerover"]);j0("onPointerLeave",["pointerout","pointerover"]);If("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));If("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));If("onBeforeInput",["compositionend","keypress","textInput","paste"]);If("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));If("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));If("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Im="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lG=new Set("cancel close invalid load scroll toggle".split(" ").concat(Im));function vC(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,sV(n,t,void 0,e),e.currentTarget=null}function TD(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;vC(a,o,u),i=c}else for(s=0;s<n.length;s++){if(o=n[s],c=o.instance,u=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;vC(a,o,u),i=c}}}if(wy)throw e=KS,wy=!1,KS=null,e}function un(e,t){var r=t[aN];r===void 0&&(r=t[aN]=new Set);var n=e+"__bubble";r.has(n)||(CD(t,e,2,!1),r.add(n))}function J_(e,t,r){var n=0;t&&(n|=4),CD(r,e,n,t)}var Q1="_reactListening"+Math.random().toString(36).slice(2);function bg(e){if(!e[Q1]){e[Q1]=!0,DR.forEach(function(r){r!=="selectionchange"&&(lG.has(r)||J_(r,!1,e),J_(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Q1]||(t[Q1]=!0,J_("selectionchange",!1,t))}}function CD(e,t,r,n){switch(fD(t)){case 1:var a=_V;break;case 4:a=SV;break;default:a=vA}r=a.bind(null,t,r,e),a=void 0,!GS||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Q_(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(s===4)for(s=n.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;s=s.return}for(;o!==null;){if(s=Ud(o),s===null)return;if(c=s.tag,c===5||c===6){n=i=s;continue e}o=o.parentNode}}n=n.return}QR(function(){var u=i,d=hA(r),f=[];e:{var p=ED.get(e);if(p!==void 0){var h=yA,g=e;switch(e){case"keypress":if(Zx(r)===0)break e;case"keydown":case"keyup":h=FV;break;case"focusin":g="focus",h=W_;break;case"focusout":g="blur",h=W_;break;case"beforeblur":case"afterblur":h=W_;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=iC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=AV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=UV;break;case SD:case ND:case jD:h=CV;break;case AD:h=qV;break;case"scroll":h=NV;break;case"wheel":h=WV;break;case"copy":case"cut":case"paste":h=OV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=oC}var m=(t&4)!==0,x=!m&&e==="scroll",y=m?p!==null?p+"Capture":null:p;m=[];for(var v=u,b;v!==null;){b=v;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,y!==null&&(S=pg(v,y),S!=null&&m.push(wg(v,S,b)))),x)break;v=v.return}0<m.length&&(p=new h(p,g,null,r,d),f.push({event:p,listeners:m}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",p&&r!==WS&&(g=r.relatedTarget||r.fromElement)&&(Ud(g)||g[pc]))break e;if((h||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,h?(g=r.relatedTarget||r.toElement,h=u,g=g?Ud(g):null,g!==null&&(x=Rf(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(h=null,g=u),h!==g)){if(m=iC,S="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=oC,S="onPointerLeave",y="onPointerEnter",v="pointer"),x=h==null?p:Ch(h),b=g==null?p:Ch(g),p=new m(S,v+"leave",h,r,d),p.target=x,p.relatedTarget=b,S=null,Ud(d)===u&&(m=new m(y,v+"enter",g,r,d),m.target=b,m.relatedTarget=x,S=m),x=S,h&&g)t:{for(m=h,y=g,v=0,b=m;b;b=ih(b))v++;for(b=0,S=y;S;S=ih(S))b++;for(;0<v-b;)m=ih(m),v--;for(;0<b-v;)y=ih(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=ih(m),y=ih(y)}m=null}else m=null;h!==null&&xC(f,p,h,m,!1),g!==null&&x!==null&&xC(f,x,g,m,!0)}}e:{if(p=u?Ch(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var _=QV;else if(uC(p))if(xD)_=rG;else{_=eG;var A=ZV}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(_=tG);if(_&&(_=_(e,u))){vD(f,_,r,d);break e}A&&A(e,p,u),e==="focusout"&&(A=p._wrapperState)&&A.controlled&&p.type==="number"&&BS(p,"number",p.value)}switch(A=u?Ch(u):window,e){case"focusin":(uC(A)||A.contentEditable==="true")&&(Eh=A,QS=u,Vm=null);break;case"focusout":Vm=QS=Eh=null;break;case"mousedown":ZS=!0;break;case"contextmenu":case"mouseup":case"dragend":ZS=!1,mC(f,r,d);break;case"selectionchange":if(iG)break;case"keydown":case"keyup":mC(f,r,d)}var j;if(wA)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ah?mD(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(pD&&r.locale!=="ko"&&(Ah||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ah&&(j=hD()):(Su=d,xA="value"in Su?Su.value:Su.textContent,Ah=!0)),A=Ay(u,E),0<A.length&&(E=new sC(E,e,null,r,d),f.push({event:E,listeners:A}),j?E.data=j:(j=gD(r),j!==null&&(E.data=j)))),(j=GV?KV(e,r):XV(e,r))&&(u=Ay(u,"onBeforeInput"),0<u.length&&(d=new sC("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=j))}TD(f,t)})}function wg(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ay(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=pg(e,r),i!=null&&n.unshift(wg(e,i,a)),i=pg(e,t),i!=null&&n.push(wg(e,i,a))),e=e.return}return n}function ih(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xC(e,t,r,n,a){for(var i=t._reactName,s=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,a?(c=pg(r,i),c!=null&&s.unshift(wg(r,c,o))):a||(c=pg(r,i),c!=null&&s.push(wg(r,c,o)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var cG=/\r\n?/g,uG=/\u0000|\uFFFD/g;function yC(e){return(typeof e=="string"?e:""+e).replace(cG,`
`).replace(uG,"")}function Z1(e,t,r){if(t=yC(t),yC(e)!==t&&r)throw Error(et(425))}function Ey(){}var eN=null,tN=null;function rN(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nN=typeof setTimeout=="function"?setTimeout:void 0,dG=typeof clearTimeout=="function"?clearTimeout:void 0,bC=typeof Promise=="function"?Promise:void 0,fG=typeof queueMicrotask=="function"?queueMicrotask:typeof bC<"u"?function(e){return bC.resolve(null).then(e).catch(hG)}:nN;function hG(e){setTimeout(function(){throw e})}function Z_(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),vg(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);vg(t)}function Lu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function wC(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var hp=Math.random().toString(36).slice(2),ul="__reactFiber$"+hp,_g="__reactProps$"+hp,pc="__reactContainer$"+hp,aN="__reactEvents$"+hp,pG="__reactListeners$"+hp,mG="__reactHandles$"+hp;function Ud(e){var t=e[ul];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pc]||r[ul]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=wC(e);e!==null;){if(r=e[ul])return r;e=wC(e)}return t}e=r,r=e.parentNode}return null}function Rv(e){return e=e[ul]||e[pc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ch(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(et(33))}function C2(e){return e[_g]||null}var iN=[],kh=-1;function Ju(e){return{current:e}}function pn(e){0>kh||(e.current=iN[kh],iN[kh]=null,kh--)}function on(e,t){kh++,iN[kh]=e.current,e.current=t}var qu={},vi=Ju(qu),Zi=Ju(!1),pf=qu;function A0(e,t){var r=e.type.contextTypes;if(!r)return qu;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function es(e){return e=e.childContextTypes,e!=null}function Ty(){pn(Zi),pn(vi)}function _C(e,t,r){if(vi.current!==qu)throw Error(et(168));on(vi,t),on(Zi,r)}function kD(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(et(108,ZW(e)||"Unknown",a));return Cn({},r,n)}function Cy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||qu,pf=vi.current,on(vi,e),on(Zi,Zi.current),!0}function SC(e,t,r){var n=e.stateNode;if(!n)throw Error(et(169));r?(e=kD(e,t,pf),n.__reactInternalMemoizedMergedChildContext=e,pn(Zi),pn(vi),on(vi,e)):pn(Zi),on(Zi,r)}var Vl=null,k2=!1,e5=!1;function OD(e){Vl===null?Vl=[e]:Vl.push(e)}function gG(e){k2=!0,OD(e)}function Qu(){if(!e5&&Vl!==null){e5=!0;var e=0,t=qr;try{var r=Vl;for(qr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Vl=null,k2=!1}catch(a){throw Vl!==null&&(Vl=Vl.slice(e+1)),rD(pA,Qu),a}finally{qr=t,e5=!1}}return null}var Oh=[],Ph=0,ky=null,Oy=0,Xs=[],Ys=0,mf=null,Ql=1,Zl="";function Ed(e,t){Oh[Ph++]=Oy,Oh[Ph++]=ky,ky=e,Oy=t}function PD(e,t,r){Xs[Ys++]=Ql,Xs[Ys++]=Zl,Xs[Ys++]=mf,mf=e;var n=Ql;e=Zl;var a=32-Mo(n)-1;n&=~(1<<a),r+=1;var i=32-Mo(t)+a;if(30<i){var s=a-a%5;i=(n&(1<<s)-1).toString(32),n>>=s,a-=s,Ql=1<<32-Mo(t)+a|r<<a|n,Zl=i+e}else Ql=1<<i|r<<a|n,Zl=e}function SA(e){e.return!==null&&(Ed(e,1),PD(e,1,0))}function NA(e){for(;e===ky;)ky=Oh[--Ph],Oh[Ph]=null,Oy=Oh[--Ph],Oh[Ph]=null;for(;e===mf;)mf=Xs[--Ys],Xs[Ys]=null,Zl=Xs[--Ys],Xs[Ys]=null,Ql=Xs[--Ys],Xs[Ys]=null}var ks=null,Ts=null,bn=!1,Po=null;function LD(e,t){var r=Qs(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function NC(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ks=e,Ts=Lu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ks=e,Ts=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=mf!==null?{id:Ql,overflow:Zl}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Qs(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ks=e,Ts=null,!0):!1;default:return!1}}function sN(e){return(e.mode&1)!==0&&(e.flags&128)===0}function oN(e){if(bn){var t=Ts;if(t){var r=t;if(!NC(e,t)){if(sN(e))throw Error(et(418));t=Lu(r.nextSibling);var n=ks;t&&NC(e,t)?LD(n,r):(e.flags=e.flags&-4097|2,bn=!1,ks=e)}}else{if(sN(e))throw Error(et(418));e.flags=e.flags&-4097|2,bn=!1,ks=e}}}function jC(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ks=e}function ex(e){if(e!==ks)return!1;if(!bn)return jC(e),bn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!rN(e.type,e.memoizedProps)),t&&(t=Ts)){if(sN(e))throw ID(),Error(et(418));for(;t;)LD(e,t),t=Lu(t.nextSibling)}if(jC(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(et(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ts=Lu(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ts=null}}else Ts=ks?Lu(e.stateNode.nextSibling):null;return!0}function ID(){for(var e=Ts;e;)e=Lu(e.nextSibling)}function E0(){Ts=ks=null,bn=!1}function jA(e){Po===null?Po=[e]:Po.push(e)}var vG=Ec.ReactCurrentBatchConfig;function hm(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(et(309));var n=r.stateNode}if(!n)throw Error(et(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var o=a.refs;s===null?delete o[i]:o[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(et(284));if(!r._owner)throw Error(et(290,e))}return e}function tx(e,t){throw e=Object.prototype.toString.call(t),Error(et(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function AC(e){var t=e._init;return t(e._payload)}function RD(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function r(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function n(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function a(y,v){return y=Mu(y,v),y.index=0,y.sibling=null,y}function i(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function s(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,v,b,S){return v===null||v.tag!==6?(v=o5(b,y.mode,S),v.return=y,v):(v=a(v,b),v.return=y,v)}function c(y,v,b,S){var _=b.type;return _===jh?d(y,v,b.props.children,S,b.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===iu&&AC(_)===v.type)?(S=a(v,b.props),S.ref=hm(y,v,b),S.return=y,S):(S=sy(b.type,b.key,b.props,null,y.mode,S),S.ref=hm(y,v,b),S.return=y,S)}function u(y,v,b,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=l5(b,y.mode,S),v.return=y,v):(v=a(v,b.children||[]),v.return=y,v)}function d(y,v,b,S,_){return v===null||v.tag!==7?(v=lf(b,y.mode,S,_),v.return=y,v):(v=a(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=o5(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case H1:return b=sy(v.type,v.key,v.props,null,y.mode,b),b.ref=hm(y,null,v),b.return=y,b;case Nh:return v=l5(v,y.mode,b),v.return=y,v;case iu:var S=v._init;return f(y,S(v._payload),b)}if(Pm(v)||lm(v))return v=lf(v,y.mode,b,null),v.return=y,v;tx(y,v)}return null}function p(y,v,b,S){var _=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:o(y,v,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case H1:return b.key===_?c(y,v,b,S):null;case Nh:return b.key===_?u(y,v,b,S):null;case iu:return _=b._init,p(y,v,_(b._payload),S)}if(Pm(b)||lm(b))return _!==null?null:d(y,v,b,S,null);tx(y,b)}return null}function h(y,v,b,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(b)||null,o(v,y,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case H1:return y=y.get(S.key===null?b:S.key)||null,c(v,y,S,_);case Nh:return y=y.get(S.key===null?b:S.key)||null,u(v,y,S,_);case iu:var A=S._init;return h(y,v,b,A(S._payload),_)}if(Pm(S)||lm(S))return y=y.get(b)||null,d(v,y,S,_,null);tx(v,S)}return null}function g(y,v,b,S){for(var _=null,A=null,j=v,E=v=0,T=null;j!==null&&E<b.length;E++){j.index>E?(T=j,j=null):T=j.sibling;var L=p(y,j,b[E],S);if(L===null){j===null&&(j=T);break}e&&j&&L.alternate===null&&t(y,j),v=i(L,v,E),A===null?_=L:A.sibling=L,A=L,j=T}if(E===b.length)return r(y,j),bn&&Ed(y,E),_;if(j===null){for(;E<b.length;E++)j=f(y,b[E],S),j!==null&&(v=i(j,v,E),A===null?_=j:A.sibling=j,A=j);return bn&&Ed(y,E),_}for(j=n(y,j);E<b.length;E++)T=h(j,y,E,b[E],S),T!==null&&(e&&T.alternate!==null&&j.delete(T.key===null?E:T.key),v=i(T,v,E),A===null?_=T:A.sibling=T,A=T);return e&&j.forEach(function(O){return t(y,O)}),bn&&Ed(y,E),_}function m(y,v,b,S){var _=lm(b);if(typeof _!="function")throw Error(et(150));if(b=_.call(b),b==null)throw Error(et(151));for(var A=_=null,j=v,E=v=0,T=null,L=b.next();j!==null&&!L.done;E++,L=b.next()){j.index>E?(T=j,j=null):T=j.sibling;var O=p(y,j,L.value,S);if(O===null){j===null&&(j=T);break}e&&j&&O.alternate===null&&t(y,j),v=i(O,v,E),A===null?_=O:A.sibling=O,A=O,j=T}if(L.done)return r(y,j),bn&&Ed(y,E),_;if(j===null){for(;!L.done;E++,L=b.next())L=f(y,L.value,S),L!==null&&(v=i(L,v,E),A===null?_=L:A.sibling=L,A=L);return bn&&Ed(y,E),_}for(j=n(y,j);!L.done;E++,L=b.next())L=h(j,y,E,L.value,S),L!==null&&(e&&L.alternate!==null&&j.delete(L.key===null?E:L.key),v=i(L,v,E),A===null?_=L:A.sibling=L,A=L);return e&&j.forEach(function(I){return t(y,I)}),bn&&Ed(y,E),_}function x(y,v,b,S){if(typeof b=="object"&&b!==null&&b.type===jh&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case H1:e:{for(var _=b.key,A=v;A!==null;){if(A.key===_){if(_=b.type,_===jh){if(A.tag===7){r(y,A.sibling),v=a(A,b.props.children),v.return=y,y=v;break e}}else if(A.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===iu&&AC(_)===A.type){r(y,A.sibling),v=a(A,b.props),v.ref=hm(y,A,b),v.return=y,y=v;break e}r(y,A);break}else t(y,A);A=A.sibling}b.type===jh?(v=lf(b.props.children,y.mode,S,b.key),v.return=y,y=v):(S=sy(b.type,b.key,b.props,null,y.mode,S),S.ref=hm(y,v,b),S.return=y,y=S)}return s(y);case Nh:e:{for(A=b.key;v!==null;){if(v.key===A)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){r(y,v.sibling),v=a(v,b.children||[]),v.return=y,y=v;break e}else{r(y,v);break}else t(y,v);v=v.sibling}v=l5(b,y.mode,S),v.return=y,y=v}return s(y);case iu:return A=b._init,x(y,v,A(b._payload),S)}if(Pm(b))return g(y,v,b,S);if(lm(b))return m(y,v,b,S);tx(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(r(y,v.sibling),v=a(v,b),v.return=y,y=v):(r(y,v),v=o5(b,y.mode,S),v.return=y,y=v),s(y)):r(y,v)}return x}var T0=RD(!0),DD=RD(!1),Py=Ju(null),Ly=null,Lh=null,AA=null;function EA(){AA=Lh=Ly=null}function TA(e){var t=Py.current;pn(Py),e._currentValue=t}function lN(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Kh(e,t){Ly=e,AA=Lh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Yi=!0),e.firstContext=null)}function ro(e){var t=e._currentValue;if(AA!==e)if(e={context:e,memoizedValue:t,next:null},Lh===null){if(Ly===null)throw Error(et(308));Lh=e,Ly.dependencies={lanes:0,firstContext:e}}else Lh=Lh.next=e;return t}var zd=null;function CA(e){zd===null?zd=[e]:zd.push(e)}function MD(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,CA(t)):(r.next=a.next,a.next=r),t.interleaved=r,mc(e,n)}function mc(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var su=!1;function kA(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function FD(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ac(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Iu(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,wr&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,mc(e,r)}return a=n.interleaved,a===null?(t.next=t,CA(n)):(t.next=a.next,a.next=t),n.interleaved=t,mc(e,r)}function ey(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,mA(e,r)}}function EC(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=s:i=i.next=s,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Iy(e,t,r,n){var a=e.updateQueue;su=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,u=c.next;c.next=null,s===null?i=u:s.next=u,s=c;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==s&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;s=0,d=u=c=null,o=i;do{var p=o.lane,h=o.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,m=o;switch(p=t,h=r,m.tag){case 1:if(g=m.payload,typeof g=="function"){f=g.call(h,f,p);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,p=typeof g=="function"?g.call(h,f,p):g,p==null)break e;f=Cn({},f,p);break e;case 2:su=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[o]:p.push(o))}else h={eventTime:h,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,s|=p;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;p=o,o=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do s|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);vf|=s,e.lanes=s,e.memoizedState=f}}function TC(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(et(191,a));a.call(n)}}}var Dv={},pl=Ju(Dv),Sg=Ju(Dv),Ng=Ju(Dv);function qd(e){if(e===Dv)throw Error(et(174));return e}function OA(e,t){switch(on(Ng,t),on(Sg,e),on(pl,Dv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:zS(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=zS(t,e)}pn(pl),on(pl,t)}function C0(){pn(pl),pn(Sg),pn(Ng)}function $D(e){qd(Ng.current);var t=qd(pl.current),r=zS(t,e.type);t!==r&&(on(Sg,e),on(pl,r))}function PA(e){Sg.current===e&&(pn(pl),pn(Sg))}var jn=Ju(0);function Ry(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var t5=[];function LA(){for(var e=0;e<t5.length;e++)t5[e]._workInProgressVersionPrimary=null;t5.length=0}var ty=Ec.ReactCurrentDispatcher,r5=Ec.ReactCurrentBatchConfig,gf=0,En=null,ba=null,Ca=null,Dy=!1,Gm=!1,jg=0,xG=0;function ii(){throw Error(et(321))}function IA(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Uo(e[r],t[r]))return!1;return!0}function RA(e,t,r,n,a,i){if(gf=i,En=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ty.current=e===null||e.memoizedState===null?_G:SG,e=r(n,a),Gm){i=0;do{if(Gm=!1,jg=0,25<=i)throw Error(et(301));i+=1,Ca=ba=null,t.updateQueue=null,ty.current=NG,e=r(n,a)}while(Gm)}if(ty.current=My,t=ba!==null&&ba.next!==null,gf=0,Ca=ba=En=null,Dy=!1,t)throw Error(et(300));return e}function DA(){var e=jg!==0;return jg=0,e}function il(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ca===null?En.memoizedState=Ca=e:Ca=Ca.next=e,Ca}function no(){if(ba===null){var e=En.alternate;e=e!==null?e.memoizedState:null}else e=ba.next;var t=Ca===null?En.memoizedState:Ca.next;if(t!==null)Ca=t,ba=e;else{if(e===null)throw Error(et(310));ba=e,e={memoizedState:ba.memoizedState,baseState:ba.baseState,baseQueue:ba.baseQueue,queue:ba.queue,next:null},Ca===null?En.memoizedState=Ca=e:Ca=Ca.next=e}return Ca}function Ag(e,t){return typeof t=="function"?t(e):t}function n5(e){var t=no(),r=t.queue;if(r===null)throw Error(et(311));r.lastRenderedReducer=e;var n=ba,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var s=a.next;a.next=i.next,i.next=s}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var o=s=null,c=null,u=i;do{var d=u.lane;if((gf&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=f,s=n):c=c.next=f,En.lanes|=d,vf|=d}u=u.next}while(u!==null&&u!==i);c===null?s=n:c.next=o,Uo(n,t.memoizedState)||(Yi=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,En.lanes|=i,vf|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function a5(e){var t=no(),r=t.queue;if(r===null)throw Error(et(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var s=a=a.next;do i=e(i,s.action),s=s.next;while(s!==a);Uo(i,t.memoizedState)||(Yi=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function BD(){}function UD(e,t){var r=En,n=no(),a=t(),i=!Uo(n.memoizedState,a);if(i&&(n.memoizedState=a,Yi=!0),n=n.queue,MA(HD.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Ca!==null&&Ca.memoizedState.tag&1){if(r.flags|=2048,Eg(9,qD.bind(null,r,n,a,t),void 0,null),Da===null)throw Error(et(349));gf&30||zD(r,t,a)}return a}function zD(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=En.updateQueue,t===null?(t={lastEffect:null,stores:null},En.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function qD(e,t,r,n){t.value=r,t.getSnapshot=n,WD(t)&&VD(e)}function HD(e,t,r){return r(function(){WD(t)&&VD(e)})}function WD(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Uo(e,r)}catch{return!0}}function VD(e){var t=mc(e,1);t!==null&&Fo(t,e,1,-1)}function CC(e){var t=il();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ag,lastRenderedState:e},t.queue=e,e=e.dispatch=wG.bind(null,En,e),[t.memoizedState,e]}function Eg(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=En.updateQueue,t===null?(t={lastEffect:null,stores:null},En.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function GD(){return no().memoizedState}function ry(e,t,r,n){var a=il();En.flags|=e,a.memoizedState=Eg(1|t,r,void 0,n===void 0?null:n)}function O2(e,t,r,n){var a=no();n=n===void 0?null:n;var i=void 0;if(ba!==null){var s=ba.memoizedState;if(i=s.destroy,n!==null&&IA(n,s.deps)){a.memoizedState=Eg(t,r,i,n);return}}En.flags|=e,a.memoizedState=Eg(1|t,r,i,n)}function kC(e,t){return ry(8390656,8,e,t)}function MA(e,t){return O2(2048,8,e,t)}function KD(e,t){return O2(4,2,e,t)}function XD(e,t){return O2(4,4,e,t)}function YD(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function JD(e,t,r){return r=r!=null?r.concat([e]):null,O2(4,4,YD.bind(null,t,e),r)}function FA(){}function QD(e,t){var r=no();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&IA(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function ZD(e,t){var r=no();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&IA(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function e7(e,t,r){return gf&21?(Uo(r,t)||(r=iD(),En.lanes|=r,vf|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Yi=!0),e.memoizedState=r)}function yG(e,t){var r=qr;qr=r!==0&&4>r?r:4,e(!0);var n=r5.transition;r5.transition={};try{e(!1),t()}finally{qr=r,r5.transition=n}}function t7(){return no().memoizedState}function bG(e,t,r){var n=Du(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},r7(e))n7(t,r);else if(r=MD(e,t,r,n),r!==null){var a=Di();Fo(r,e,n,a),a7(r,t,n)}}function wG(e,t,r){var n=Du(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(r7(e))n7(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,o=i(s,r);if(a.hasEagerState=!0,a.eagerState=o,Uo(o,s)){var c=t.interleaved;c===null?(a.next=a,CA(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=MD(e,t,a,n),r!==null&&(a=Di(),Fo(r,e,n,a),a7(r,t,n))}}function r7(e){var t=e.alternate;return e===En||t!==null&&t===En}function n7(e,t){Gm=Dy=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function a7(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,mA(e,r)}}var My={readContext:ro,useCallback:ii,useContext:ii,useEffect:ii,useImperativeHandle:ii,useInsertionEffect:ii,useLayoutEffect:ii,useMemo:ii,useReducer:ii,useRef:ii,useState:ii,useDebugValue:ii,useDeferredValue:ii,useTransition:ii,useMutableSource:ii,useSyncExternalStore:ii,useId:ii,unstable_isNewReconciler:!1},_G={readContext:ro,useCallback:function(e,t){return il().memoizedState=[e,t===void 0?null:t],e},useContext:ro,useEffect:kC,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ry(4194308,4,YD.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ry(4194308,4,e,t)},useInsertionEffect:function(e,t){return ry(4,2,e,t)},useMemo:function(e,t){var r=il();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=il();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=bG.bind(null,En,e),[n.memoizedState,e]},useRef:function(e){var t=il();return e={current:e},t.memoizedState=e},useState:CC,useDebugValue:FA,useDeferredValue:function(e){return il().memoizedState=e},useTransition:function(){var e=CC(!1),t=e[0];return e=yG.bind(null,e[1]),il().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=En,a=il();if(bn){if(r===void 0)throw Error(et(407));r=r()}else{if(r=t(),Da===null)throw Error(et(349));gf&30||zD(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,kC(HD.bind(null,n,i,e),[e]),n.flags|=2048,Eg(9,qD.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=il(),t=Da.identifierPrefix;if(bn){var r=Zl,n=Ql;r=(n&~(1<<32-Mo(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=jg++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=xG++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},SG={readContext:ro,useCallback:QD,useContext:ro,useEffect:MA,useImperativeHandle:JD,useInsertionEffect:KD,useLayoutEffect:XD,useMemo:ZD,useReducer:n5,useRef:GD,useState:function(){return n5(Ag)},useDebugValue:FA,useDeferredValue:function(e){var t=no();return e7(t,ba.memoizedState,e)},useTransition:function(){var e=n5(Ag)[0],t=no().memoizedState;return[e,t]},useMutableSource:BD,useSyncExternalStore:UD,useId:t7,unstable_isNewReconciler:!1},NG={readContext:ro,useCallback:QD,useContext:ro,useEffect:MA,useImperativeHandle:JD,useInsertionEffect:KD,useLayoutEffect:XD,useMemo:ZD,useReducer:a5,useRef:GD,useState:function(){return a5(Ag)},useDebugValue:FA,useDeferredValue:function(e){var t=no();return ba===null?t.memoizedState=e:e7(t,ba.memoizedState,e)},useTransition:function(){var e=a5(Ag)[0],t=no().memoizedState;return[e,t]},useMutableSource:BD,useSyncExternalStore:UD,useId:t7,unstable_isNewReconciler:!1};function jo(e,t){if(e&&e.defaultProps){t=Cn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function cN(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Cn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var P2={isMounted:function(e){return(e=e._reactInternals)?Rf(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Di(),a=Du(e),i=ac(n,a);i.payload=t,r!=null&&(i.callback=r),t=Iu(e,i,a),t!==null&&(Fo(t,e,a,n),ey(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Di(),a=Du(e),i=ac(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Iu(e,i,a),t!==null&&(Fo(t,e,a,n),ey(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Di(),n=Du(e),a=ac(r,n);a.tag=2,t!=null&&(a.callback=t),t=Iu(e,a,n),t!==null&&(Fo(t,e,n,r),ey(t,e,n))}};function OC(e,t,r,n,a,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,s):t.prototype&&t.prototype.isPureReactComponent?!yg(r,n)||!yg(a,i):!0}function i7(e,t,r){var n=!1,a=qu,i=t.contextType;return typeof i=="object"&&i!==null?i=ro(i):(a=es(t)?pf:vi.current,n=t.contextTypes,i=(n=n!=null)?A0(e,a):qu),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=P2,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function PC(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&P2.enqueueReplaceState(t,t.state,null)}function uN(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},kA(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=ro(i):(i=es(t)?pf:vi.current,a.context=A0(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(cN(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&P2.enqueueReplaceState(a,a.state,null),Iy(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function k0(e,t){try{var r="",n=t;do r+=QW(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function i5(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function dN(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var jG=typeof WeakMap=="function"?WeakMap:Map;function s7(e,t,r){r=ac(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){$y||($y=!0,wN=n),dN(e,t)},r}function o7(e,t,r){r=ac(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){dN(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){dN(e,t),typeof n!="function"&&(Ru===null?Ru=new Set([this]):Ru.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function LC(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new jG;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=$G.bind(null,e,t,r),t.then(e,e))}function IC(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function RC(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ac(-1,1),t.tag=2,Iu(r,t,1))),r.lanes|=1),e)}var AG=Ec.ReactCurrentOwner,Yi=!1;function Ei(e,t,r,n){t.child=e===null?DD(t,null,r,n):T0(t,e.child,r,n)}function DC(e,t,r,n,a){r=r.render;var i=t.ref;return Kh(t,a),n=RA(e,t,r,n,i,a),r=DA(),e!==null&&!Yi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,gc(e,t,a)):(bn&&r&&SA(t),t.flags|=1,Ei(e,t,n,a),t.child)}function MC(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!VA(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,l7(e,t,i,n,a)):(e=sy(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var s=i.memoizedProps;if(r=r.compare,r=r!==null?r:yg,r(s,n)&&e.ref===t.ref)return gc(e,t,a)}return t.flags|=1,e=Mu(i,n),e.ref=t.ref,e.return=t,t.child=e}function l7(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(yg(i,n)&&e.ref===t.ref)if(Yi=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Yi=!0);else return t.lanes=e.lanes,gc(e,t,a)}return fN(e,t,r,n,a)}function c7(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},on(Rh,bs),bs|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,on(Rh,bs),bs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,on(Rh,bs),bs|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,on(Rh,bs),bs|=n;return Ei(e,t,a,r),t.child}function u7(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function fN(e,t,r,n,a){var i=es(r)?pf:vi.current;return i=A0(t,i),Kh(t,a),r=RA(e,t,r,n,i,a),n=DA(),e!==null&&!Yi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,gc(e,t,a)):(bn&&n&&SA(t),t.flags|=1,Ei(e,t,r,a),t.child)}function FC(e,t,r,n,a){if(es(r)){var i=!0;Cy(t)}else i=!1;if(Kh(t,a),t.stateNode===null)ny(e,t),i7(t,r,n),uN(t,r,n,a),n=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var c=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=ro(u):(u=es(r)?pf:vi.current,u=A0(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==n||c!==u)&&PC(t,s,n,u),su=!1;var p=t.memoizedState;s.state=p,Iy(t,n,s,a),c=t.memoizedState,o!==n||p!==c||Zi.current||su?(typeof d=="function"&&(cN(t,r,d,n),c=t.memoizedState),(o=su||OC(t,r,o,n,p,c,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),s.props=n,s.state=c,s.context=u,n=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,FD(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:jo(t.type,o),s.props=u,f=t.pendingProps,p=s.context,c=r.contextType,typeof c=="object"&&c!==null?c=ro(c):(c=es(r)?pf:vi.current,c=A0(t,c));var h=r.getDerivedStateFromProps;(d=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||p!==c)&&PC(t,s,n,c),su=!1,p=t.memoizedState,s.state=p,Iy(t,n,s,a);var g=t.memoizedState;o!==f||p!==g||Zi.current||su?(typeof h=="function"&&(cN(t,r,h,n),g=t.memoizedState),(u=su||OC(t,r,u,n,p,g,c)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,g,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,g,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),s.props=n,s.state=g,s.context=c,n=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return hN(e,t,r,n,i,a)}function hN(e,t,r,n,a,i){u7(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return a&&SC(t,r,!1),gc(e,t,i);n=t.stateNode,AG.current=t;var o=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=T0(t,e.child,null,i),t.child=T0(t,null,o,i)):Ei(e,t,o,i),t.memoizedState=n.state,a&&SC(t,r,!0),t.child}function d7(e){var t=e.stateNode;t.pendingContext?_C(e,t.pendingContext,t.pendingContext!==t.context):t.context&&_C(e,t.context,!1),OA(e,t.containerInfo)}function $C(e,t,r,n,a){return E0(),jA(a),t.flags|=256,Ei(e,t,r,n),t.child}var pN={dehydrated:null,treeContext:null,retryLane:0};function mN(e){return{baseLanes:e,cachePool:null,transitions:null}}function f7(e,t,r){var n=t.pendingProps,a=jn.current,i=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),on(jn,a&1),e===null)return oN(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,i?(n=t.mode,i=t.child,s={mode:"hidden",children:s},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=R2(s,n,0,null),e=lf(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=mN(r),t.memoizedState=pN,e):$A(t,s));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return EG(e,t,s,n,o,a,r);if(i){i=n.fallback,s=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(s&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Mu(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=Mu(o,i):(i=lf(i,s,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,s=e.child.memoizedState,s=s===null?mN(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~r,t.memoizedState=pN,n}return i=e.child,e=i.sibling,n=Mu(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function $A(e,t){return t=R2({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function rx(e,t,r,n){return n!==null&&jA(n),T0(t,e.child,null,r),e=$A(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function EG(e,t,r,n,a,i,s){if(r)return t.flags&256?(t.flags&=-257,n=i5(Error(et(422))),rx(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=R2({mode:"visible",children:n.children},a,0,null),i=lf(i,a,s,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&T0(t,e.child,null,s),t.child.memoizedState=mN(s),t.memoizedState=pN,i);if(!(t.mode&1))return rx(e,t,s,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(et(419)),n=i5(i,n,void 0),rx(e,t,s,n)}if(o=(s&e.childLanes)!==0,Yi||o){if(n=Da,n!==null){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|s)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,mc(e,a),Fo(n,e,a,-1))}return WA(),n=i5(Error(et(421))),rx(e,t,s,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=BG.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Ts=Lu(a.nextSibling),ks=t,bn=!0,Po=null,e!==null&&(Xs[Ys++]=Ql,Xs[Ys++]=Zl,Xs[Ys++]=mf,Ql=e.id,Zl=e.overflow,mf=t),t=$A(t,n.children),t.flags|=4096,t)}function BC(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),lN(e.return,t,r)}function s5(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function h7(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Ei(e,t,n.children,r),n=jn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&BC(e,r,t);else if(e.tag===19)BC(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(on(jn,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Ry(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),s5(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ry(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}s5(t,!0,r,null,i);break;case"together":s5(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ny(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function gc(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),vf|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(et(153));if(t.child!==null){for(e=t.child,r=Mu(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Mu(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function TG(e,t,r){switch(t.tag){case 3:d7(t),E0();break;case 5:$D(t);break;case 1:es(t.type)&&Cy(t);break;case 4:OA(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;on(Py,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(on(jn,jn.current&1),t.flags|=128,null):r&t.child.childLanes?f7(e,t,r):(on(jn,jn.current&1),e=gc(e,t,r),e!==null?e.sibling:null);on(jn,jn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return h7(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),on(jn,jn.current),n)break;return null;case 22:case 23:return t.lanes=0,c7(e,t,r)}return gc(e,t,r)}var p7,gN,m7,g7;p7=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};gN=function(){};m7=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,qd(pl.current);var i=null;switch(r){case"input":a=FS(e,a),n=FS(e,n),i=[];break;case"select":a=Cn({},a,{value:void 0}),n=Cn({},n,{value:void 0}),i=[];break;case"textarea":a=US(e,a),n=US(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ey)}qS(r,n);var s;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var o=a[u];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(fg.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(o=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&o[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(fg.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&un("scroll",e),i||o===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};g7=function(e,t,r,n){r!==n&&(t.flags|=4)};function pm(e,t){if(!bn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function si(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function CG(e,t,r){var n=t.pendingProps;switch(NA(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return si(t),null;case 1:return es(t.type)&&Ty(),si(t),null;case 3:return n=t.stateNode,C0(),pn(Zi),pn(vi),LA(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ex(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Po!==null&&(NN(Po),Po=null))),gN(e,t),si(t),null;case 5:PA(t);var a=qd(Ng.current);if(r=t.type,e!==null&&t.stateNode!=null)m7(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(et(166));return si(t),null}if(e=qd(pl.current),ex(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ul]=t,n[_g]=i,e=(t.mode&1)!==0,r){case"dialog":un("cancel",n),un("close",n);break;case"iframe":case"object":case"embed":un("load",n);break;case"video":case"audio":for(a=0;a<Im.length;a++)un(Im[a],n);break;case"source":un("error",n);break;case"img":case"image":case"link":un("error",n),un("load",n);break;case"details":un("toggle",n);break;case"input":XT(n,i),un("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},un("invalid",n);break;case"textarea":JT(n,i),un("invalid",n)}qS(r,i),a=null;for(var s in i)if(i.hasOwnProperty(s)){var o=i[s];s==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&Z1(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Z1(n.textContent,o,e),a=["children",""+o]):fg.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&un("scroll",n)}switch(r){case"input":W1(n),YT(n,i,!0);break;case"textarea":W1(n),QT(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Ey)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=HR(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[ul]=t,e[_g]=n,p7(e,t,!1,!1),t.stateNode=e;e:{switch(s=HS(r,n),r){case"dialog":un("cancel",e),un("close",e),a=n;break;case"iframe":case"object":case"embed":un("load",e),a=n;break;case"video":case"audio":for(a=0;a<Im.length;a++)un(Im[a],e);a=n;break;case"source":un("error",e),a=n;break;case"img":case"image":case"link":un("error",e),un("load",e),a=n;break;case"details":un("toggle",e),a=n;break;case"input":XT(e,n),a=FS(e,n),un("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Cn({},n,{value:void 0}),un("invalid",e);break;case"textarea":JT(e,n),a=US(e,n),un("invalid",e);break;default:a=n}qS(r,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?GR(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&WR(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&hg(e,c):typeof c=="number"&&hg(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fg.hasOwnProperty(i)?c!=null&&i==="onScroll"&&un("scroll",e):c!=null&&cA(e,i,c,s))}switch(r){case"input":W1(e),YT(e,n,!1);break;case"textarea":W1(e),QT(e);break;case"option":n.value!=null&&e.setAttribute("value",""+zu(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Hh(e,!!n.multiple,i,!1):n.defaultValue!=null&&Hh(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ey)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return si(t),null;case 6:if(e&&t.stateNode!=null)g7(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(et(166));if(r=qd(Ng.current),qd(pl.current),ex(t)){if(n=t.stateNode,r=t.memoizedProps,n[ul]=t,(i=n.nodeValue!==r)&&(e=ks,e!==null))switch(e.tag){case 3:Z1(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Z1(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ul]=t,t.stateNode=n}return si(t),null;case 13:if(pn(jn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(bn&&Ts!==null&&t.mode&1&&!(t.flags&128))ID(),E0(),t.flags|=98560,i=!1;else if(i=ex(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(et(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(et(317));i[ul]=t}else E0(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;si(t),i=!1}else Po!==null&&(NN(Po),Po=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||jn.current&1?_a===0&&(_a=3):WA())),t.updateQueue!==null&&(t.flags|=4),si(t),null);case 4:return C0(),gN(e,t),e===null&&bg(t.stateNode.containerInfo),si(t),null;case 10:return TA(t.type._context),si(t),null;case 17:return es(t.type)&&Ty(),si(t),null;case 19:if(pn(jn),i=t.memoizedState,i===null)return si(t),null;if(n=(t.flags&128)!==0,s=i.rendering,s===null)if(n)pm(i,!1);else{if(_a!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Ry(e),s!==null){for(t.flags|=128,pm(i,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return on(jn,jn.current&1|2),t.child}e=e.sibling}i.tail!==null&&Vn()>O0&&(t.flags|=128,n=!0,pm(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ry(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),pm(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!bn)return si(t),null}else 2*Vn()-i.renderingStartTime>O0&&r!==1073741824&&(t.flags|=128,n=!0,pm(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(r=i.last,r!==null?r.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Vn(),t.sibling=null,r=jn.current,on(jn,n?r&1|2:r&1),t):(si(t),null);case 22:case 23:return HA(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?bs&1073741824&&(si(t),t.subtreeFlags&6&&(t.flags|=8192)):si(t),null;case 24:return null;case 25:return null}throw Error(et(156,t.tag))}function kG(e,t){switch(NA(t),t.tag){case 1:return es(t.type)&&Ty(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return C0(),pn(Zi),pn(vi),LA(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return PA(t),null;case 13:if(pn(jn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(et(340));E0()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pn(jn),null;case 4:return C0(),null;case 10:return TA(t.type._context),null;case 22:case 23:return HA(),null;case 24:return null;default:return null}}var nx=!1,fi=!1,OG=typeof WeakSet=="function"?WeakSet:Set,gt=null;function Ih(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Fn(e,t,n)}else r.current=null}function vN(e,t,r){try{r()}catch(n){Fn(e,t,n)}}var UC=!1;function PG(e,t){if(eN=Ny,e=wD(),_A(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var s=0,o=-1,c=-1,u=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==r||a!==0&&f.nodeType!==3||(o=s+a),f!==i||n!==0&&f.nodeType!==3||(c=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)p=f,f=h;for(;;){if(f===e)break t;if(p===r&&++u===a&&(o=s),p===i&&++d===n&&(c=s),(h=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=h}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(tN={focusedElem:e,selectionRange:r},Ny=!1,gt=t;gt!==null;)if(t=gt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,gt=e;else for(;gt!==null;){t=gt;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,x=g.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:jo(t.type,m),x);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(S){Fn(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,gt=e;break}gt=t.return}return g=UC,UC=!1,g}function Km(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&vN(t,r,i)}a=a.next}while(a!==n)}}function L2(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function xN(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function v7(e){var t=e.alternate;t!==null&&(e.alternate=null,v7(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ul],delete t[_g],delete t[aN],delete t[pG],delete t[mG])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function x7(e){return e.tag===5||e.tag===3||e.tag===4}function zC(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||x7(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yN(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ey));else if(n!==4&&(e=e.child,e!==null))for(yN(e,t,r),e=e.sibling;e!==null;)yN(e,t,r),e=e.sibling}function bN(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(bN(e,t,r),e=e.sibling;e!==null;)bN(e,t,r),e=e.sibling}var Xa=null,Co=!1;function Zc(e,t,r){for(r=r.child;r!==null;)y7(e,t,r),r=r.sibling}function y7(e,t,r){if(hl&&typeof hl.onCommitFiberUnmount=="function")try{hl.onCommitFiberUnmount(j2,r)}catch{}switch(r.tag){case 5:fi||Ih(r,t);case 6:var n=Xa,a=Co;Xa=null,Zc(e,t,r),Xa=n,Co=a,Xa!==null&&(Co?(e=Xa,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Xa.removeChild(r.stateNode));break;case 18:Xa!==null&&(Co?(e=Xa,r=r.stateNode,e.nodeType===8?Z_(e.parentNode,r):e.nodeType===1&&Z_(e,r),vg(e)):Z_(Xa,r.stateNode));break;case 4:n=Xa,a=Co,Xa=r.stateNode.containerInfo,Co=!0,Zc(e,t,r),Xa=n,Co=a;break;case 0:case 11:case 14:case 15:if(!fi&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&vN(r,t,s),a=a.next}while(a!==n)}Zc(e,t,r);break;case 1:if(!fi&&(Ih(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Fn(r,t,o)}Zc(e,t,r);break;case 21:Zc(e,t,r);break;case 22:r.mode&1?(fi=(n=fi)||r.memoizedState!==null,Zc(e,t,r),fi=n):Zc(e,t,r);break;default:Zc(e,t,r)}}function qC(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new OG),t.forEach(function(n){var a=UG.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function yo(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:Xa=o.stateNode,Co=!1;break e;case 3:Xa=o.stateNode.containerInfo,Co=!0;break e;case 4:Xa=o.stateNode.containerInfo,Co=!0;break e}o=o.return}if(Xa===null)throw Error(et(160));y7(i,s,a),Xa=null,Co=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Fn(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)b7(t,e),t=t.sibling}function b7(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yo(t,e),el(e),n&4){try{Km(3,e,e.return),L2(3,e)}catch(m){Fn(e,e.return,m)}try{Km(5,e,e.return)}catch(m){Fn(e,e.return,m)}}break;case 1:yo(t,e),el(e),n&512&&r!==null&&Ih(r,r.return);break;case 5:if(yo(t,e),el(e),n&512&&r!==null&&Ih(r,r.return),e.flags&32){var a=e.stateNode;try{hg(a,"")}catch(m){Fn(e,e.return,m)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,s=r!==null?r.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&zR(a,i),HS(o,s);var u=HS(o,i);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];d==="style"?GR(a,f):d==="dangerouslySetInnerHTML"?WR(a,f):d==="children"?hg(a,f):cA(a,d,f,u)}switch(o){case"input":$S(a,i);break;case"textarea":qR(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?Hh(a,!!i.multiple,h,!1):p!==!!i.multiple&&(i.defaultValue!=null?Hh(a,!!i.multiple,i.defaultValue,!0):Hh(a,!!i.multiple,i.multiple?[]:"",!1))}a[_g]=i}catch(m){Fn(e,e.return,m)}}break;case 6:if(yo(t,e),el(e),n&4){if(e.stateNode===null)throw Error(et(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(m){Fn(e,e.return,m)}}break;case 3:if(yo(t,e),el(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{vg(t.containerInfo)}catch(m){Fn(e,e.return,m)}break;case 4:yo(t,e),el(e);break;case 13:yo(t,e),el(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(zA=Vn())),n&4&&qC(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(fi=(u=fi)||d,yo(t,e),fi=u):yo(t,e),el(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(gt=e,d=e.child;d!==null;){for(f=gt=d;gt!==null;){switch(p=gt,h=p.child,p.tag){case 0:case 11:case 14:case 15:Km(4,p,p.return);break;case 1:Ih(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Fn(n,r,m)}}break;case 5:Ih(p,p.return);break;case 22:if(p.memoizedState!==null){WC(f);continue}}h!==null?(h.return=p,gt=h):WC(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,c=f.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=VR("display",s))}catch(m){Fn(e,e.return,m)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){Fn(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:yo(t,e),el(e),n&4&&qC(e);break;case 21:break;default:yo(t,e),el(e)}}function el(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(x7(r)){var n=r;break e}r=r.return}throw Error(et(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(hg(a,""),n.flags&=-33);var i=zC(e);bN(e,i,a);break;case 3:case 4:var s=n.stateNode.containerInfo,o=zC(e);yN(e,o,s);break;default:throw Error(et(161))}}catch(c){Fn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function LG(e,t,r){gt=e,w7(e)}function w7(e,t,r){for(var n=(e.mode&1)!==0;gt!==null;){var a=gt,i=a.child;if(a.tag===22&&n){var s=a.memoizedState!==null||nx;if(!s){var o=a.alternate,c=o!==null&&o.memoizedState!==null||fi;o=nx;var u=fi;if(nx=s,(fi=c)&&!u)for(gt=a;gt!==null;)s=gt,c=s.child,s.tag===22&&s.memoizedState!==null?VC(a):c!==null?(c.return=s,gt=c):VC(a);for(;i!==null;)gt=i,w7(i),i=i.sibling;gt=a,nx=o,fi=u}HC(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,gt=i):HC(e)}}function HC(e){for(;gt!==null;){var t=gt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:fi||L2(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!fi)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:jo(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&TC(t,i,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}TC(t,s,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&vg(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}fi||t.flags&512&&xN(t)}catch(p){Fn(t,t.return,p)}}if(t===e){gt=null;break}if(r=t.sibling,r!==null){r.return=t.return,gt=r;break}gt=t.return}}function WC(e){for(;gt!==null;){var t=gt;if(t===e){gt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,gt=r;break}gt=t.return}}function VC(e){for(;gt!==null;){var t=gt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{L2(4,t)}catch(c){Fn(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Fn(t,a,c)}}var i=t.return;try{xN(t)}catch(c){Fn(t,i,c)}break;case 5:var s=t.return;try{xN(t)}catch(c){Fn(t,s,c)}}}catch(c){Fn(t,t.return,c)}if(t===e){gt=null;break}var o=t.sibling;if(o!==null){o.return=t.return,gt=o;break}gt=t.return}}var IG=Math.ceil,Fy=Ec.ReactCurrentDispatcher,BA=Ec.ReactCurrentOwner,eo=Ec.ReactCurrentBatchConfig,wr=0,Da=null,oa=null,Za=0,bs=0,Rh=Ju(0),_a=0,Tg=null,vf=0,I2=0,UA=0,Xm=null,Xi=null,zA=0,O0=1/0,Hl=null,$y=!1,wN=null,Ru=null,ax=!1,Nu=null,By=0,Ym=0,_N=null,ay=-1,iy=0;function Di(){return wr&6?Vn():ay!==-1?ay:ay=Vn()}function Du(e){return e.mode&1?wr&2&&Za!==0?Za&-Za:vG.transition!==null?(iy===0&&(iy=iD()),iy):(e=qr,e!==0||(e=window.event,e=e===void 0?16:fD(e.type)),e):1}function Fo(e,t,r,n){if(50<Ym)throw Ym=0,_N=null,Error(et(185));Lv(e,r,n),(!(wr&2)||e!==Da)&&(e===Da&&(!(wr&2)&&(I2|=r),_a===4&&uu(e,Za)),ts(e,n),r===1&&wr===0&&!(t.mode&1)&&(O0=Vn()+500,k2&&Qu()))}function ts(e,t){var r=e.callbackNode;vV(e,t);var n=Sy(e,e===Da?Za:0);if(n===0)r!==null&&tC(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&tC(r),t===1)e.tag===0?gG(GC.bind(null,e)):OD(GC.bind(null,e)),fG(function(){!(wr&6)&&Qu()}),r=null;else{switch(sD(n)){case 1:r=pA;break;case 4:r=nD;break;case 16:r=_y;break;case 536870912:r=aD;break;default:r=_y}r=C7(r,_7.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function _7(e,t){if(ay=-1,iy=0,wr&6)throw Error(et(327));var r=e.callbackNode;if(Xh()&&e.callbackNode!==r)return null;var n=Sy(e,e===Da?Za:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Uy(e,n);else{t=n;var a=wr;wr|=2;var i=N7();(Da!==e||Za!==t)&&(Hl=null,O0=Vn()+500,of(e,t));do try{MG();break}catch(o){S7(e,o)}while(!0);EA(),Fy.current=i,wr=a,oa!==null?t=0:(Da=null,Za=0,t=_a)}if(t!==0){if(t===2&&(a=XS(e),a!==0&&(n=a,t=SN(e,a))),t===1)throw r=Tg,of(e,0),uu(e,n),ts(e,Vn()),r;if(t===6)uu(e,n);else{if(a=e.current.alternate,!(n&30)&&!RG(a)&&(t=Uy(e,n),t===2&&(i=XS(e),i!==0&&(n=i,t=SN(e,i))),t===1))throw r=Tg,of(e,0),uu(e,n),ts(e,Vn()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(et(345));case 2:Td(e,Xi,Hl);break;case 3:if(uu(e,n),(n&130023424)===n&&(t=zA+500-Vn(),10<t)){if(Sy(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Di(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=nN(Td.bind(null,e,Xi,Hl),t);break}Td(e,Xi,Hl);break;case 4:if(uu(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var s=31-Mo(n);i=1<<s,s=t[s],s>a&&(a=s),n&=~i}if(n=a,n=Vn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*IG(n/1960))-n,10<n){e.timeoutHandle=nN(Td.bind(null,e,Xi,Hl),n);break}Td(e,Xi,Hl);break;case 5:Td(e,Xi,Hl);break;default:throw Error(et(329))}}}return ts(e,Vn()),e.callbackNode===r?_7.bind(null,e):null}function SN(e,t){var r=Xm;return e.current.memoizedState.isDehydrated&&(of(e,t).flags|=256),e=Uy(e,t),e!==2&&(t=Xi,Xi=r,t!==null&&NN(t)),e}function NN(e){Xi===null?Xi=e:Xi.push.apply(Xi,e)}function RG(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Uo(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function uu(e,t){for(t&=~UA,t&=~I2,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Mo(t),n=1<<r;e[r]=-1,t&=~n}}function GC(e){if(wr&6)throw Error(et(327));Xh();var t=Sy(e,0);if(!(t&1))return ts(e,Vn()),null;var r=Uy(e,t);if(e.tag!==0&&r===2){var n=XS(e);n!==0&&(t=n,r=SN(e,n))}if(r===1)throw r=Tg,of(e,0),uu(e,t),ts(e,Vn()),r;if(r===6)throw Error(et(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Td(e,Xi,Hl),ts(e,Vn()),null}function qA(e,t){var r=wr;wr|=1;try{return e(t)}finally{wr=r,wr===0&&(O0=Vn()+500,k2&&Qu())}}function xf(e){Nu!==null&&Nu.tag===0&&!(wr&6)&&Xh();var t=wr;wr|=1;var r=eo.transition,n=qr;try{if(eo.transition=null,qr=1,e)return e()}finally{qr=n,eo.transition=r,wr=t,!(wr&6)&&Qu()}}function HA(){bs=Rh.current,pn(Rh)}function of(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,dG(r)),oa!==null)for(r=oa.return;r!==null;){var n=r;switch(NA(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ty();break;case 3:C0(),pn(Zi),pn(vi),LA();break;case 5:PA(n);break;case 4:C0();break;case 13:pn(jn);break;case 19:pn(jn);break;case 10:TA(n.type._context);break;case 22:case 23:HA()}r=r.return}if(Da=e,oa=e=Mu(e.current,null),Za=bs=t,_a=0,Tg=null,UA=I2=vf=0,Xi=Xm=null,zd!==null){for(t=0;t<zd.length;t++)if(r=zd[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var s=i.next;i.next=a,n.next=s}r.pending=n}zd=null}return e}function S7(e,t){do{var r=oa;try{if(EA(),ty.current=My,Dy){for(var n=En.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Dy=!1}if(gf=0,Ca=ba=En=null,Gm=!1,jg=0,BA.current=null,r===null||r.return===null){_a=1,Tg=t,oa=null;break}e:{var i=e,s=r.return,o=r,c=t;if(t=Za,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=IC(s);if(h!==null){h.flags&=-257,RC(h,s,o,i,t),h.mode&1&&LC(i,u,t),t=h,c=u;var g=t.updateQueue;if(g===null){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}else{if(!(t&1)){LC(i,u,t),WA();break e}c=Error(et(426))}}else if(bn&&o.mode&1){var x=IC(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),RC(x,s,o,i,t),jA(k0(c,o));break e}}i=c=k0(c,o),_a!==4&&(_a=2),Xm===null?Xm=[i]:Xm.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=s7(i,c,t);EC(i,y);break e;case 1:o=c;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ru===null||!Ru.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=o7(i,o,t);EC(i,S);break e}}i=i.return}while(i!==null)}A7(r)}catch(_){t=_,oa===r&&r!==null&&(oa=r=r.return);continue}break}while(!0)}function N7(){var e=Fy.current;return Fy.current=My,e===null?My:e}function WA(){(_a===0||_a===3||_a===2)&&(_a=4),Da===null||!(vf&268435455)&&!(I2&268435455)||uu(Da,Za)}function Uy(e,t){var r=wr;wr|=2;var n=N7();(Da!==e||Za!==t)&&(Hl=null,of(e,t));do try{DG();break}catch(a){S7(e,a)}while(!0);if(EA(),wr=r,Fy.current=n,oa!==null)throw Error(et(261));return Da=null,Za=0,_a}function DG(){for(;oa!==null;)j7(oa)}function MG(){for(;oa!==null&&!lV();)j7(oa)}function j7(e){var t=T7(e.alternate,e,bs);e.memoizedProps=e.pendingProps,t===null?A7(e):oa=t,BA.current=null}function A7(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=kG(r,t),r!==null){r.flags&=32767,oa=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_a=6,oa=null;return}}else if(r=CG(r,t,bs),r!==null){oa=r;return}if(t=t.sibling,t!==null){oa=t;return}oa=t=e}while(t!==null);_a===0&&(_a=5)}function Td(e,t,r){var n=qr,a=eo.transition;try{eo.transition=null,qr=1,FG(e,t,r,n)}finally{eo.transition=a,qr=n}return null}function FG(e,t,r,n){do Xh();while(Nu!==null);if(wr&6)throw Error(et(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(et(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(xV(e,i),e===Da&&(oa=Da=null,Za=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ax||(ax=!0,C7(_y,function(){return Xh(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=eo.transition,eo.transition=null;var s=qr;qr=1;var o=wr;wr|=4,BA.current=null,PG(e,r),b7(r,e),aG(tN),Ny=!!eN,tN=eN=null,e.current=r,LG(r),cV(),wr=o,qr=s,eo.transition=i}else e.current=r;if(ax&&(ax=!1,Nu=e,By=a),i=e.pendingLanes,i===0&&(Ru=null),fV(r.stateNode),ts(e,Vn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if($y)throw $y=!1,e=wN,wN=null,e;return By&1&&e.tag!==0&&Xh(),i=e.pendingLanes,i&1?e===_N?Ym++:(Ym=0,_N=e):Ym=0,Qu(),null}function Xh(){if(Nu!==null){var e=sD(By),t=eo.transition,r=qr;try{if(eo.transition=null,qr=16>e?16:e,Nu===null)var n=!1;else{if(e=Nu,Nu=null,By=0,wr&6)throw Error(et(331));var a=wr;for(wr|=4,gt=e.current;gt!==null;){var i=gt,s=i.child;if(gt.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(gt=u;gt!==null;){var d=gt;switch(d.tag){case 0:case 11:case 15:Km(8,d,i)}var f=d.child;if(f!==null)f.return=d,gt=f;else for(;gt!==null;){d=gt;var p=d.sibling,h=d.return;if(v7(d),d===u){gt=null;break}if(p!==null){p.return=h,gt=p;break}gt=h}}}var g=i.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var x=m.sibling;m.sibling=null,m=x}while(m!==null)}}gt=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,gt=s;else e:for(;gt!==null;){if(i=gt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Km(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,gt=y;break e}gt=i.return}}var v=e.current;for(gt=v;gt!==null;){s=gt;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,gt=b;else e:for(s=v;gt!==null;){if(o=gt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:L2(9,o)}}catch(_){Fn(o,o.return,_)}if(o===s){gt=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,gt=S;break e}gt=o.return}}if(wr=a,Qu(),hl&&typeof hl.onPostCommitFiberRoot=="function")try{hl.onPostCommitFiberRoot(j2,e)}catch{}n=!0}return n}finally{qr=r,eo.transition=t}}return!1}function KC(e,t,r){t=k0(r,t),t=s7(e,t,1),e=Iu(e,t,1),t=Di(),e!==null&&(Lv(e,1,t),ts(e,t))}function Fn(e,t,r){if(e.tag===3)KC(e,e,r);else for(;t!==null;){if(t.tag===3){KC(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ru===null||!Ru.has(n))){e=k0(r,e),e=o7(t,e,1),t=Iu(t,e,1),e=Di(),t!==null&&(Lv(t,1,e),ts(t,e));break}}t=t.return}}function $G(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Di(),e.pingedLanes|=e.suspendedLanes&r,Da===e&&(Za&r)===r&&(_a===4||_a===3&&(Za&130023424)===Za&&500>Vn()-zA?of(e,0):UA|=r),ts(e,t)}function E7(e,t){t===0&&(e.mode&1?(t=K1,K1<<=1,!(K1&130023424)&&(K1=4194304)):t=1);var r=Di();e=mc(e,t),e!==null&&(Lv(e,t,r),ts(e,r))}function BG(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),E7(e,r)}function UG(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(et(314))}n!==null&&n.delete(t),E7(e,r)}var T7;T7=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Zi.current)Yi=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Yi=!1,TG(e,t,r);Yi=!!(e.flags&131072)}else Yi=!1,bn&&t.flags&1048576&&PD(t,Oy,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ny(e,t),e=t.pendingProps;var a=A0(t,vi.current);Kh(t,r),a=RA(null,t,n,e,a,r);var i=DA();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,es(n)?(i=!0,Cy(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,kA(t),a.updater=P2,t.stateNode=a,a._reactInternals=t,uN(t,n,e,r),t=hN(null,t,n,!0,i,r)):(t.tag=0,bn&&i&&SA(t),Ei(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ny(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=qG(n),e=jo(n,e),a){case 0:t=fN(null,t,n,e,r);break e;case 1:t=FC(null,t,n,e,r);break e;case 11:t=DC(null,t,n,e,r);break e;case 14:t=MC(null,t,n,jo(n.type,e),r);break e}throw Error(et(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:jo(n,a),fN(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:jo(n,a),FC(e,t,n,a,r);case 3:e:{if(d7(t),e===null)throw Error(et(387));n=t.pendingProps,i=t.memoizedState,a=i.element,FD(e,t),Iy(t,n,null,r);var s=t.memoizedState;if(n=s.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=k0(Error(et(423)),t),t=$C(e,t,n,r,a);break e}else if(n!==a){a=k0(Error(et(424)),t),t=$C(e,t,n,r,a);break e}else for(Ts=Lu(t.stateNode.containerInfo.firstChild),ks=t,bn=!0,Po=null,r=DD(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(E0(),n===a){t=gc(e,t,r);break e}Ei(e,t,n,r)}t=t.child}return t;case 5:return $D(t),e===null&&oN(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,s=a.children,rN(n,a)?s=null:i!==null&&rN(n,i)&&(t.flags|=32),u7(e,t),Ei(e,t,s,r),t.child;case 6:return e===null&&oN(t),null;case 13:return f7(e,t,r);case 4:return OA(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=T0(t,null,n,r):Ei(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:jo(n,a),DC(e,t,n,a,r);case 7:return Ei(e,t,t.pendingProps,r),t.child;case 8:return Ei(e,t,t.pendingProps.children,r),t.child;case 12:return Ei(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,s=a.value,on(Py,n._currentValue),n._currentValue=s,i!==null)if(Uo(i.value,s)){if(i.children===a.children&&!Zi.current){t=gc(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){s=i.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=ac(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),lN(i.return,r,t),o.lanes|=r;break}c=c.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(et(341));s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),lN(s,r,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}Ei(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Kh(t,r),a=ro(a),n=n(a),t.flags|=1,Ei(e,t,n,r),t.child;case 14:return n=t.type,a=jo(n,t.pendingProps),a=jo(n.type,a),MC(e,t,n,a,r);case 15:return l7(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:jo(n,a),ny(e,t),t.tag=1,es(n)?(e=!0,Cy(t)):e=!1,Kh(t,r),i7(t,n,a),uN(t,n,a,r),hN(null,t,n,!0,e,r);case 19:return h7(e,t,r);case 22:return c7(e,t,r)}throw Error(et(156,t.tag))};function C7(e,t){return rD(e,t)}function zG(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qs(e,t,r,n){return new zG(e,t,r,n)}function VA(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qG(e){if(typeof e=="function")return VA(e)?1:0;if(e!=null){if(e=e.$$typeof,e===dA)return 11;if(e===fA)return 14}return 2}function Mu(e,t){var r=e.alternate;return r===null?(r=Qs(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function sy(e,t,r,n,a,i){var s=2;if(n=e,typeof e=="function")VA(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case jh:return lf(r.children,a,i,t);case uA:s=8,a|=8;break;case IS:return e=Qs(12,r,t,a|2),e.elementType=IS,e.lanes=i,e;case RS:return e=Qs(13,r,t,a),e.elementType=RS,e.lanes=i,e;case DS:return e=Qs(19,r,t,a),e.elementType=DS,e.lanes=i,e;case $R:return R2(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case MR:s=10;break e;case FR:s=9;break e;case dA:s=11;break e;case fA:s=14;break e;case iu:s=16,n=null;break e}throw Error(et(130,e==null?e:typeof e,""))}return t=Qs(s,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function lf(e,t,r,n){return e=Qs(7,e,n,t),e.lanes=r,e}function R2(e,t,r,n){return e=Qs(22,e,n,t),e.elementType=$R,e.lanes=r,e.stateNode={isHidden:!1},e}function o5(e,t,r){return e=Qs(6,e,null,t),e.lanes=r,e}function l5(e,t,r){return t=Qs(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function HG(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=z_(0),this.expirationTimes=z_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=z_(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function GA(e,t,r,n,a,i,s,o,c){return e=new HG(e,t,r,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Qs(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},kA(i),e}function WG(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nh,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function k7(e){if(!e)return qu;e=e._reactInternals;e:{if(Rf(e)!==e||e.tag!==1)throw Error(et(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(es(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(et(171))}if(e.tag===1){var r=e.type;if(es(r))return kD(e,r,t)}return t}function O7(e,t,r,n,a,i,s,o,c){return e=GA(r,n,!0,e,a,i,s,o,c),e.context=k7(null),r=e.current,n=Di(),a=Du(r),i=ac(n,a),i.callback=t??null,Iu(r,i,a),e.current.lanes=a,Lv(e,a,n),ts(e,n),e}function D2(e,t,r,n){var a=t.current,i=Di(),s=Du(a);return r=k7(r),t.context===null?t.context=r:t.pendingContext=r,t=ac(i,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Iu(a,t,s),e!==null&&(Fo(e,a,s,i),ey(e,a,s)),s}function zy(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function XC(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function KA(e,t){XC(e,t),(e=e.alternate)&&XC(e,t)}function VG(){return null}var P7=typeof reportError=="function"?reportError:function(e){console.error(e)};function XA(e){this._internalRoot=e}M2.prototype.render=XA.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(et(409));D2(e,t,null,null)};M2.prototype.unmount=XA.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;xf(function(){D2(null,e,null,null)}),t[pc]=null}};function M2(e){this._internalRoot=e}M2.prototype.unstable_scheduleHydration=function(e){if(e){var t=cD();e={blockedOn:null,target:e,priority:t};for(var r=0;r<cu.length&&t!==0&&t<cu[r].priority;r++);cu.splice(r,0,e),r===0&&dD(e)}};function YA(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function F2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function YC(){}function GG(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=zy(s);i.call(u)}}var s=O7(t,n,e,0,null,!1,!1,"",YC);return e._reactRootContainer=s,e[pc]=s.current,bg(e.nodeType===8?e.parentNode:e),xf(),s}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var u=zy(c);o.call(u)}}var c=GA(e,0,!1,null,null,!1,!1,"",YC);return e._reactRootContainer=c,e[pc]=c.current,bg(e.nodeType===8?e.parentNode:e),xf(function(){D2(t,c,r,n)}),c}function $2(e,t,r,n,a){var i=r._reactRootContainer;if(i){var s=i;if(typeof a=="function"){var o=a;a=function(){var c=zy(s);o.call(c)}}D2(t,s,e,a)}else s=GG(r,t,e,a,n);return zy(s)}oD=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Lm(t.pendingLanes);r!==0&&(mA(t,r|1),ts(t,Vn()),!(wr&6)&&(O0=Vn()+500,Qu()))}break;case 13:xf(function(){var n=mc(e,1);if(n!==null){var a=Di();Fo(n,e,1,a)}}),KA(e,1)}};gA=function(e){if(e.tag===13){var t=mc(e,134217728);if(t!==null){var r=Di();Fo(t,e,134217728,r)}KA(e,134217728)}};lD=function(e){if(e.tag===13){var t=Du(e),r=mc(e,t);if(r!==null){var n=Di();Fo(r,e,t,n)}KA(e,t)}};cD=function(){return qr};uD=function(e,t){var r=qr;try{return qr=e,t()}finally{qr=r}};VS=function(e,t,r){switch(t){case"input":if($S(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=C2(n);if(!a)throw Error(et(90));UR(n),$S(n,a)}}}break;case"textarea":qR(e,r);break;case"select":t=r.value,t!=null&&Hh(e,!!r.multiple,t,!1)}};YR=qA;JR=xf;var KG={usingClientEntryPoint:!1,Events:[Rv,Ch,C2,KR,XR,qA]},mm={findFiberByHostInstance:Ud,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},XG={bundleType:mm.bundleType,version:mm.version,rendererPackageName:mm.rendererPackageName,rendererConfig:mm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ec.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=eD(e),e===null?null:e.stateNode},findFiberByHostInstance:mm.findFiberByHostInstance||VG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ix=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ix.isDisabled&&ix.supportsFiber)try{j2=ix.inject(XG),hl=ix}catch{}}Is.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KG;Is.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!YA(t))throw Error(et(200));return WG(e,t,null,r)};Is.createRoot=function(e,t){if(!YA(e))throw Error(et(299));var r=!1,n="",a=P7;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=GA(e,1,!1,null,null,r,!1,n,a),e[pc]=t.current,bg(e.nodeType===8?e.parentNode:e),new XA(t)};Is.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(et(188)):(e=Object.keys(e).join(","),Error(et(268,e)));return e=eD(t),e=e===null?null:e.stateNode,e};Is.flushSync=function(e){return xf(e)};Is.hydrate=function(e,t,r){if(!F2(t))throw Error(et(200));return $2(null,e,t,!0,r)};Is.hydrateRoot=function(e,t,r){if(!YA(e))throw Error(et(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",s=P7;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=O7(t,null,e,1,r??null,a,!1,i,s),e[pc]=t.current,bg(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new M2(t)};Is.render=function(e,t,r){if(!F2(t))throw Error(et(200));return $2(null,e,t,!1,r)};Is.unmountComponentAtNode=function(e){if(!F2(e))throw Error(et(40));return e._reactRootContainer?(xf(function(){$2(null,null,e,!1,function(){e._reactRootContainer=null,e[pc]=null})}),!0):!1};Is.unstable_batchedUpdates=qA;Is.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!F2(r))throw Error(et(200));if(e==null||e._reactInternals===void 0)throw Error(et(38));return $2(e,t,r,!1,n)};Is.version="18.3.1-next-f1338f8080-20240426";function L7(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(L7)}catch(e){console.error(e)}}L7(),LR.exports=Is;var YG=LR.exports,JC=YG;PS.createRoot=JC.createRoot,PS.hydrateRoot=JC.hydrateRoot;var pp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},JG={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},pu,rA,uR,QG=(uR=class{constructor(){It(this,pu,JG);It(this,rA,!1)}setTimeoutProvider(e){ft(this,pu,e)}setTimeout(e,t){return ge(this,pu).setTimeout(e,t)}clearTimeout(e){ge(this,pu).clearTimeout(e)}setInterval(e,t){return ge(this,pu).setInterval(e,t)}clearInterval(e){ge(this,pu).clearInterval(e)}},pu=new WeakMap,rA=new WeakMap,uR),Hd=new QG;function ZG(e){setTimeout(e,0)}var yf=typeof window>"u"||"Deno"in globalThis;function Ti(){}function eK(e,t){return typeof e=="function"?e(t):e}function jN(e){return typeof e=="number"&&e>=0&&e!==1/0}function I7(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Fu(e,t){return typeof e=="function"?e(t):e}function Ks(e,t){return typeof e=="function"?e(t):e}function QC(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:s,stale:o}=e;if(s){if(n){if(t.queryHash!==JA(s,t.options))return!1}else if(!Cg(t.queryKey,s))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||a&&a!==t.state.fetchStatus||i&&!i(t))}function ZC(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(bf(t.options.mutationKey)!==bf(i))return!1}else if(!Cg(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function JA(e,t){return((t==null?void 0:t.queryKeyHashFn)||bf)(e)}function bf(e){return JSON.stringify(e,(t,r)=>AN(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Cg(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Cg(e[r],t[r])):!1}var tK=Object.prototype.hasOwnProperty;function R7(e,t){if(e===t)return e;const r=ek(e)&&ek(t);if(!r&&!(AN(e)&&AN(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),s=i.length,o=r?new Array(s):{};let c=0;for(let u=0;u<s;u++){const d=r?u:i[u],f=e[d],p=t[d];if(f===p){o[d]=f,(r?u<a:tK.call(e,d))&&c++;continue}if(f===null||p===null||typeof f!="object"||typeof p!="object"){o[d]=p;continue}const h=R7(f,p);o[d]=h,h===f&&c++}return a===s&&c===a?e:o}function qy(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function ek(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function AN(e){if(!tk(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!tk(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function tk(e){return Object.prototype.toString.call(e)==="[object Object]"}function rK(e){return new Promise(t=>{Hd.setTimeout(t,e)})}function EN(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?R7(e,t):t}function nK(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function aK(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var QA=Symbol();function D7(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===QA?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function M7(e,t){return typeof e=="function"?e(...t):!!e}var Jd,mu,h0,dR,iK=(dR=class extends pp{constructor(){super();It(this,Jd);It(this,mu);It(this,h0);ft(this,h0,t=>{if(!yf&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){ge(this,mu)||this.setEventListener(ge(this,h0))}onUnsubscribe(){var t;this.hasListeners()||((t=ge(this,mu))==null||t.call(this),ft(this,mu,void 0))}setEventListener(t){var r;ft(this,h0,t),(r=ge(this,mu))==null||r.call(this),ft(this,mu,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){ge(this,Jd)!==t&&(ft(this,Jd,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof ge(this,Jd)=="boolean"?ge(this,Jd):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Jd=new WeakMap,mu=new WeakMap,h0=new WeakMap,dR),ZA=new iK;function TN(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var sK=ZG;function oK(){let e=[],t=0,r=o=>{o()},n=o=>{o()},a=sK;const i=o=>{t?e.push(o):a(()=>{r(o)})},s=()=>{const o=e;e=[],o.length&&a(()=>{n(()=>{o.forEach(c=>{r(c)})})})};return{batch:o=>{let c;t++;try{c=o()}finally{t--,t||s()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{a=o}}}var wa=oK(),p0,gu,m0,fR,lK=(fR=class extends pp{constructor(){super();It(this,p0,!0);It(this,gu);It(this,m0);ft(this,m0,t=>{if(!yf&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){ge(this,gu)||this.setEventListener(ge(this,m0))}onUnsubscribe(){var t;this.hasListeners()||((t=ge(this,gu))==null||t.call(this),ft(this,gu,void 0))}setEventListener(t){var r;ft(this,m0,t),(r=ge(this,gu))==null||r.call(this),ft(this,gu,t(this.setOnline.bind(this)))}setOnline(t){ge(this,p0)!==t&&(ft(this,p0,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return ge(this,p0)}},p0=new WeakMap,gu=new WeakMap,m0=new WeakMap,fR),Hy=new lK;function cK(e){return Math.min(1e3*2**e,3e4)}function F7(e){return(e??"online")==="online"?Hy.isOnline():!0}var CN=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function $7(e){let t=!1,r=0,n;const a=TN(),i=()=>a.status!=="pending",s=m=>{var x;if(!i()){const y=new CN(m);p(y),(x=e.onCancel)==null||x.call(e,y)}},o=()=>{t=!0},c=()=>{t=!1},u=()=>ZA.isFocused()&&(e.networkMode==="always"||Hy.isOnline())&&e.canRun(),d=()=>F7(e.networkMode)&&e.canRun(),f=m=>{i()||(n==null||n(),a.resolve(m))},p=m=>{i()||(n==null||n(),a.reject(m))},h=()=>new Promise(m=>{var x;n=y=>{(i()||u())&&m(y)},(x=e.onPause)==null||x.call(e)}).then(()=>{var m;n=void 0,i()||(m=e.onContinue)==null||m.call(e)}),g=()=>{if(i())return;let m;const x=r===0?e.initialPromise:void 0;try{m=x??e.fn()}catch(y){m=Promise.reject(y)}Promise.resolve(m).then(f).catch(y=>{var A;if(i())return;const v=e.retry??(yf?0:3),b=e.retryDelay??cK,S=typeof b=="function"?b(r,y):b,_=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,y);if(t||!_){p(y);return}r++,(A=e.onFail)==null||A.call(e,r,y),rK(S).then(()=>u()?void 0:h()).then(()=>{t?p(y):g()})})};return{promise:a,status:()=>a.status,cancel:s,continue:()=>(n==null||n(),a),cancelRetry:o,continueRetry:c,canStart:d,start:()=>(d()?g():h().then(g),a)}}var Qd,hR,B7=(hR=class{constructor(){It(this,Qd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),jN(this.gcTime)&&ft(this,Qd,Hd.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(yf?1/0:5*60*1e3))}clearGcTimeout(){ge(this,Qd)&&(Hd.clearTimeout(ge(this,Qd)),ft(this,Qd,void 0))}},Qd=new WeakMap,hR),Zd,g0,Vs,ef,Ea,Ev,tf,Eo,ql,pR,uK=(pR=class extends B7{constructor(t){super();It(this,Eo);It(this,Zd);It(this,g0);It(this,Vs);It(this,ef);It(this,Ea);It(this,Ev);It(this,tf);ft(this,tf,!1),ft(this,Ev,t.defaultOptions),this.setOptions(t.options),this.observers=[],ft(this,ef,t.client),ft(this,Vs,ge(this,ef).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ft(this,Zd,nk(this.options)),this.state=t.state??ge(this,Zd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=ge(this,Ea))==null?void 0:t.promise}setOptions(t){if(this.options={...ge(this,Ev),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=nk(this.options);r.data!==void 0&&(this.setState(rk(r.data,r.dataUpdatedAt)),ft(this,Zd,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ge(this,Vs).remove(this)}setData(t,r){const n=EN(this.state.data,t,this.options);return sr(this,Eo,ql).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){sr(this,Eo,ql).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=ge(this,Ea))==null?void 0:n.promise;return(a=ge(this,Ea))==null||a.cancel(t),r?r.then(Ti).catch(Ti):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ge(this,Zd))}isActive(){return this.observers.some(t=>Ks(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===QA||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Fu(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!I7(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=ge(this,Ea))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=ge(this,Ea))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),ge(this,Vs).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(ge(this,Ea)&&(ge(this,tf)?ge(this,Ea).cancel({revert:!0}):ge(this,Ea).cancelRetry()),this.scheduleGc()),ge(this,Vs).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||sr(this,Eo,ql).call(this,{type:"invalidate"})}async fetch(t,r){var c,u,d,f,p,h,g,m,x,y,v,b;if(this.state.fetchStatus!=="idle"&&((c=ge(this,Ea))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ge(this,Ea))return ge(this,Ea).continueRetry(),ge(this,Ea).promise}if(t&&this.setOptions(t),!this.options.queryFn){const S=this.observers.find(_=>_.options.queryFn);S&&this.setOptions(S.options)}const n=new AbortController,a=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(ft(this,tf,!0),n.signal)})},i=()=>{const S=D7(this.options,r),A=(()=>{const j={client:ge(this,ef),queryKey:this.queryKey,meta:this.meta};return a(j),j})();return ft(this,tf,!1),this.options.persister?this.options.persister(S,A,this):S(A)},o=(()=>{const S={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:ge(this,ef),state:this.state,fetchFn:i};return a(S),S})();(u=this.options.behavior)==null||u.onFetch(o,this),ft(this,g0,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&sr(this,Eo,ql).call(this,{type:"fetch",meta:(f=o.fetchOptions)==null?void 0:f.meta}),ft(this,Ea,$7({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,onCancel:S=>{S instanceof CN&&S.revert&&this.setState({...ge(this,g0),fetchStatus:"idle"}),n.abort()},onFail:(S,_)=>{sr(this,Eo,ql).call(this,{type:"failed",failureCount:S,error:_})},onPause:()=>{sr(this,Eo,ql).call(this,{type:"pause"})},onContinue:()=>{sr(this,Eo,ql).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const S=await ge(this,Ea).start();if(S===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(S),(h=(p=ge(this,Vs).config).onSuccess)==null||h.call(p,S,this),(m=(g=ge(this,Vs).config).onSettled)==null||m.call(g,S,this.state.error,this),S}catch(S){if(S instanceof CN){if(S.silent)return ge(this,Ea).promise;if(S.revert){if(this.state.data===void 0)throw S;return this.state.data}}throw sr(this,Eo,ql).call(this,{type:"error",error:S}),(y=(x=ge(this,Vs).config).onError)==null||y.call(x,S,this),(b=(v=ge(this,Vs).config).onSettled)==null||b.call(v,this.state.data,S,this),S}finally{this.scheduleGc()}}},Zd=new WeakMap,g0=new WeakMap,Vs=new WeakMap,ef=new WeakMap,Ea=new WeakMap,Ev=new WeakMap,tf=new WeakMap,Eo=new WeakSet,ql=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...U7(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...rk(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ft(this,g0,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),wa.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),ge(this,Vs).notify({query:this,type:"updated",action:t})})},pR);function U7(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:F7(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function rk(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function nk(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Vi,mr,Tv,ji,rf,v0,Kl,vu,Cv,x0,y0,nf,af,xu,b0,Or,Rm,kN,ON,PN,LN,IN,RN,DN,z7,mR,dK=(mR=class extends pp{constructor(t,r){super();It(this,Or);It(this,Vi);It(this,mr);It(this,Tv);It(this,ji);It(this,rf);It(this,v0);It(this,Kl);It(this,vu);It(this,Cv);It(this,x0);It(this,y0);It(this,nf);It(this,af);It(this,xu);It(this,b0,new Set);this.options=r,ft(this,Vi,t),ft(this,vu,null),ft(this,Kl,TN()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ge(this,mr).addObserver(this),ak(ge(this,mr),this.options)?sr(this,Or,Rm).call(this):this.updateResult(),sr(this,Or,LN).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return MN(ge(this,mr),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return MN(ge(this,mr),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,sr(this,Or,IN).call(this),sr(this,Or,RN).call(this),ge(this,mr).removeObserver(this)}setOptions(t){const r=this.options,n=ge(this,mr);if(this.options=ge(this,Vi).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ks(this.options.enabled,ge(this,mr))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");sr(this,Or,DN).call(this),ge(this,mr).setOptions(this.options),r._defaulted&&!qy(this.options,r)&&ge(this,Vi).getQueryCache().notify({type:"observerOptionsUpdated",query:ge(this,mr),observer:this});const a=this.hasListeners();a&&ik(ge(this,mr),n,this.options,r)&&sr(this,Or,Rm).call(this),this.updateResult(),a&&(ge(this,mr)!==n||Ks(this.options.enabled,ge(this,mr))!==Ks(r.enabled,ge(this,mr))||Fu(this.options.staleTime,ge(this,mr))!==Fu(r.staleTime,ge(this,mr)))&&sr(this,Or,kN).call(this);const i=sr(this,Or,ON).call(this);a&&(ge(this,mr)!==n||Ks(this.options.enabled,ge(this,mr))!==Ks(r.enabled,ge(this,mr))||i!==ge(this,xu))&&sr(this,Or,PN).call(this,i)}getOptimisticResult(t){const r=ge(this,Vi).getQueryCache().build(ge(this,Vi),t),n=this.createResult(r,t);return hK(this,n)&&(ft(this,ji,n),ft(this,v0,this.options),ft(this,rf,ge(this,mr).state)),n}getCurrentResult(){return ge(this,ji)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&ge(this,Kl).status==="pending"&&ge(this,Kl).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){ge(this,b0).add(t)}getCurrentQuery(){return ge(this,mr)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=ge(this,Vi).defaultQueryOptions(t),n=ge(this,Vi).getQueryCache().build(ge(this,Vi),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return sr(this,Or,Rm).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),ge(this,ji)))}createResult(t,r){var T;const n=ge(this,mr),a=this.options,i=ge(this,ji),s=ge(this,rf),o=ge(this,v0),u=t!==n?t.state:ge(this,Tv),{state:d}=t;let f={...d},p=!1,h;if(r._optimisticResults){const L=this.hasListeners(),O=!L&&ak(t,r),I=L&&ik(t,n,r,a);(O||I)&&(f={...f,...U7(d.data,t.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:g,errorUpdatedAt:m,status:x}=f;h=f.data;let y=!1;if(r.placeholderData!==void 0&&h===void 0&&x==="pending"){let L;i!=null&&i.isPlaceholderData&&r.placeholderData===(o==null?void 0:o.placeholderData)?(L=i.data,y=!0):L=typeof r.placeholderData=="function"?r.placeholderData((T=ge(this,y0))==null?void 0:T.state.data,ge(this,y0)):r.placeholderData,L!==void 0&&(x="success",h=EN(i==null?void 0:i.data,L,r),p=!0)}if(r.select&&h!==void 0&&!y)if(i&&h===(s==null?void 0:s.data)&&r.select===ge(this,Cv))h=ge(this,x0);else try{ft(this,Cv,r.select),h=r.select(h),h=EN(i==null?void 0:i.data,h,r),ft(this,x0,h),ft(this,vu,null)}catch(L){ft(this,vu,L)}ge(this,vu)&&(g=ge(this,vu),h=ge(this,x0),m=Date.now(),x="error");const v=f.fetchStatus==="fetching",b=x==="pending",S=x==="error",_=b&&v,A=h!==void 0,E={status:x,fetchStatus:f.fetchStatus,isPending:b,isSuccess:x==="success",isError:S,isInitialLoading:_,isLoading:_,data:h,dataUpdatedAt:f.dataUpdatedAt,error:g,errorUpdatedAt:m,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:v,isRefetching:v&&!b,isLoadingError:S&&!A,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:S&&A,isStale:e3(t,r),refetch:this.refetch,promise:ge(this,Kl),isEnabled:Ks(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const L=D=>{E.status==="error"?D.reject(E.error):E.data!==void 0&&D.resolve(E.data)},O=()=>{const D=ft(this,Kl,E.promise=TN());L(D)},I=ge(this,Kl);switch(I.status){case"pending":t.queryHash===n.queryHash&&L(I);break;case"fulfilled":(E.status==="error"||E.data!==I.value)&&O();break;case"rejected":(E.status!=="error"||E.error!==I.reason)&&O();break}}return E}updateResult(){const t=ge(this,ji),r=this.createResult(ge(this,mr),this.options);if(ft(this,rf,ge(this,mr).state),ft(this,v0,this.options),ge(this,rf).data!==void 0&&ft(this,y0,ge(this,mr)),qy(r,t))return;ft(this,ji,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!ge(this,b0).size)return!0;const s=new Set(i??ge(this,b0));return this.options.throwOnError&&s.add("error"),Object.keys(ge(this,ji)).some(o=>{const c=o;return ge(this,ji)[c]!==t[c]&&s.has(c)})};sr(this,Or,z7).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&sr(this,Or,LN).call(this)}},Vi=new WeakMap,mr=new WeakMap,Tv=new WeakMap,ji=new WeakMap,rf=new WeakMap,v0=new WeakMap,Kl=new WeakMap,vu=new WeakMap,Cv=new WeakMap,x0=new WeakMap,y0=new WeakMap,nf=new WeakMap,af=new WeakMap,xu=new WeakMap,b0=new WeakMap,Or=new WeakSet,Rm=function(t){sr(this,Or,DN).call(this);let r=ge(this,mr).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Ti)),r},kN=function(){sr(this,Or,IN).call(this);const t=Fu(this.options.staleTime,ge(this,mr));if(yf||ge(this,ji).isStale||!jN(t))return;const n=I7(ge(this,ji).dataUpdatedAt,t)+1;ft(this,nf,Hd.setTimeout(()=>{ge(this,ji).isStale||this.updateResult()},n))},ON=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ge(this,mr)):this.options.refetchInterval)??!1},PN=function(t){sr(this,Or,RN).call(this),ft(this,xu,t),!(yf||Ks(this.options.enabled,ge(this,mr))===!1||!jN(ge(this,xu))||ge(this,xu)===0)&&ft(this,af,Hd.setInterval(()=>{(this.options.refetchIntervalInBackground||ZA.isFocused())&&sr(this,Or,Rm).call(this)},ge(this,xu)))},LN=function(){sr(this,Or,kN).call(this),sr(this,Or,PN).call(this,sr(this,Or,ON).call(this))},IN=function(){ge(this,nf)&&(Hd.clearTimeout(ge(this,nf)),ft(this,nf,void 0))},RN=function(){ge(this,af)&&(Hd.clearInterval(ge(this,af)),ft(this,af,void 0))},DN=function(){const t=ge(this,Vi).getQueryCache().build(ge(this,Vi),this.options);if(t===ge(this,mr))return;const r=ge(this,mr);ft(this,mr,t),ft(this,Tv,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},z7=function(t){wa.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(ge(this,ji))}),ge(this,Vi).getQueryCache().notify({query:ge(this,mr),type:"observerResultsUpdated"})})},mR);function fK(e,t){return Ks(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function ak(e,t){return fK(e,t)||e.state.data!==void 0&&MN(e,t,t.refetchOnMount)}function MN(e,t,r){if(Ks(t.enabled,e)!==!1&&Fu(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&e3(e,t)}return!1}function ik(e,t,r,n){return(e!==t||Ks(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&e3(e,r)}function e3(e,t){return Ks(t.enabled,e)!==!1&&e.isStaleByTime(Fu(t.staleTime,e))}function hK(e,t){return!qy(e.getCurrentResult(),t)}function sk(e){return{onFetch:(t,r)=>{var d,f,p,h,g;const n=t.options,a=(p=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((h=t.state.data)==null?void 0:h.pages)||[],s=((g=t.state.data)==null?void 0:g.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const u=async()=>{let m=!1;const x=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},y=D7(t.options,t.fetchOptions),v=async(b,S,_)=>{if(m)return Promise.reject();if(S==null&&b.pages.length)return Promise.resolve(b);const j=(()=>{const O={client:t.client,queryKey:t.queryKey,pageParam:S,direction:_?"backward":"forward",meta:t.options.meta};return x(O),O})(),E=await y(j),{maxPages:T}=t.options,L=_?aK:nK;return{pages:L(b.pages,E,T),pageParams:L(b.pageParams,S,T)}};if(a&&i.length){const b=a==="backward",S=b?pK:ok,_={pages:i,pageParams:s},A=S(n,_);o=await v(_,A,b)}else{const b=e??i.length;do{const S=c===0?s[0]??n.initialPageParam:ok(n,o);if(c>0&&S==null)break;o=await v(o,S),c++}while(c<b)}return o};t.options.persister?t.fetchFn=()=>{var m,x;return(x=(m=t.options).persister)==null?void 0:x.call(m,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function ok(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function pK(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var kv,ol,Ai,sf,ll,au,gR,mK=(gR=class extends B7{constructor(t){super();It(this,ll);It(this,kv);It(this,ol);It(this,Ai);It(this,sf);ft(this,kv,t.client),this.mutationId=t.mutationId,ft(this,Ai,t.mutationCache),ft(this,ol,[]),this.state=t.state||q7(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){ge(this,ol).includes(t)||(ge(this,ol).push(t),this.clearGcTimeout(),ge(this,Ai).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ft(this,ol,ge(this,ol).filter(r=>r!==t)),this.scheduleGc(),ge(this,Ai).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){ge(this,ol).length||(this.state.status==="pending"?this.scheduleGc():ge(this,Ai).remove(this))}continue(){var t;return((t=ge(this,sf))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,o,c,u,d,f,p,h,g,m,x,y,v,b,S,_,A,j,E,T;const r=()=>{sr(this,ll,au).call(this,{type:"continue"})},n={client:ge(this,kv),meta:this.options.meta,mutationKey:this.options.mutationKey};ft(this,sf,$7({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(L,O)=>{sr(this,ll,au).call(this,{type:"failed",failureCount:L,error:O})},onPause:()=>{sr(this,ll,au).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ge(this,Ai).canRun(this)}));const a=this.state.status==="pending",i=!ge(this,sf).canStart();try{if(a)r();else{sr(this,ll,au).call(this,{type:"pending",variables:t,isPaused:i}),await((o=(s=ge(this,Ai).config).onMutate)==null?void 0:o.call(s,t,this,n));const O=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,n));O!==this.state.context&&sr(this,ll,au).call(this,{type:"pending",context:O,variables:t,isPaused:i})}const L=await ge(this,sf).start();return await((f=(d=ge(this,Ai).config).onSuccess)==null?void 0:f.call(d,L,t,this.state.context,this,n)),await((h=(p=this.options).onSuccess)==null?void 0:h.call(p,L,t,this.state.context,n)),await((m=(g=ge(this,Ai).config).onSettled)==null?void 0:m.call(g,L,null,this.state.variables,this.state.context,this,n)),await((y=(x=this.options).onSettled)==null?void 0:y.call(x,L,null,t,this.state.context,n)),sr(this,ll,au).call(this,{type:"success",data:L}),L}catch(L){try{throw await((b=(v=ge(this,Ai).config).onError)==null?void 0:b.call(v,L,t,this.state.context,this,n)),await((_=(S=this.options).onError)==null?void 0:_.call(S,L,t,this.state.context,n)),await((j=(A=ge(this,Ai).config).onSettled)==null?void 0:j.call(A,void 0,L,this.state.variables,this.state.context,this,n)),await((T=(E=this.options).onSettled)==null?void 0:T.call(E,void 0,L,t,this.state.context,n)),L}finally{sr(this,ll,au).call(this,{type:"error",error:L})}}finally{ge(this,Ai).runNext(this)}}},kv=new WeakMap,ol=new WeakMap,Ai=new WeakMap,sf=new WeakMap,ll=new WeakSet,au=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),wa.batch(()=>{ge(this,ol).forEach(n=>{n.onMutationUpdate(t)}),ge(this,Ai).notify({mutation:this,type:"updated",action:t})})},gR);function q7(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Xl,To,Ov,vR,gK=(vR=class extends pp{constructor(t={}){super();It(this,Xl);It(this,To);It(this,Ov);this.config=t,ft(this,Xl,new Set),ft(this,To,new Map),ft(this,Ov,0)}build(t,r,n){const a=new mK({client:t,mutationCache:this,mutationId:++U1(this,Ov)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){ge(this,Xl).add(t);const r=sx(t);if(typeof r=="string"){const n=ge(this,To).get(r);n?n.push(t):ge(this,To).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(ge(this,Xl).delete(t)){const r=sx(t);if(typeof r=="string"){const n=ge(this,To).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&ge(this,To).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=sx(t);if(typeof r=="string"){const n=ge(this,To).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=sx(t);if(typeof r=="string"){const a=(n=ge(this,To).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){wa.batch(()=>{ge(this,Xl).forEach(t=>{this.notify({type:"removed",mutation:t})}),ge(this,Xl).clear(),ge(this,To).clear()})}getAll(){return Array.from(ge(this,Xl))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>ZC(r,n))}findAll(t={}){return this.getAll().filter(r=>ZC(t,r))}notify(t){wa.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return wa.batch(()=>Promise.all(t.map(r=>r.continue().catch(Ti))))}},Xl=new WeakMap,To=new WeakMap,Ov=new WeakMap,vR);function sx(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Yl,yu,Gi,Jl,fc,oy,FN,xR,vK=(xR=class extends pp{constructor(r,n){super();It(this,fc);It(this,Yl);It(this,yu);It(this,Gi);It(this,Jl);ft(this,Yl,r),this.setOptions(n),this.bindMethods(),sr(this,fc,oy).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=ge(this,Yl).defaultMutationOptions(r),qy(this.options,n)||ge(this,Yl).getMutationCache().notify({type:"observerOptionsUpdated",mutation:ge(this,Gi),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&bf(n.mutationKey)!==bf(this.options.mutationKey)?this.reset():((a=ge(this,Gi))==null?void 0:a.state.status)==="pending"&&ge(this,Gi).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=ge(this,Gi))==null||r.removeObserver(this)}onMutationUpdate(r){sr(this,fc,oy).call(this),sr(this,fc,FN).call(this,r)}getCurrentResult(){return ge(this,yu)}reset(){var r;(r=ge(this,Gi))==null||r.removeObserver(this),ft(this,Gi,void 0),sr(this,fc,oy).call(this),sr(this,fc,FN).call(this)}mutate(r,n){var a;return ft(this,Jl,n),(a=ge(this,Gi))==null||a.removeObserver(this),ft(this,Gi,ge(this,Yl).getMutationCache().build(ge(this,Yl),this.options)),ge(this,Gi).addObserver(this),ge(this,Gi).execute(r)}},Yl=new WeakMap,yu=new WeakMap,Gi=new WeakMap,Jl=new WeakMap,fc=new WeakSet,oy=function(){var n;const r=((n=ge(this,Gi))==null?void 0:n.state)??q7();ft(this,yu,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},FN=function(r){wa.batch(()=>{var n,a,i,s,o,c,u,d;if(ge(this,Jl)&&this.hasListeners()){const f=ge(this,yu).variables,p=ge(this,yu).context,h={client:ge(this,Yl),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(n=ge(this,Jl)).onSuccess)==null||a.call(n,r.data,f,p,h),(s=(i=ge(this,Jl)).onSettled)==null||s.call(i,r.data,null,f,p,h)):(r==null?void 0:r.type)==="error"&&((c=(o=ge(this,Jl)).onError)==null||c.call(o,r.error,f,p,h),(d=(u=ge(this,Jl)).onSettled)==null||d.call(u,void 0,r.error,f,p,h))}this.listeners.forEach(f=>{f(ge(this,yu))})})},xR),cl,yR,xK=(yR=class extends pp{constructor(t={}){super();It(this,cl);this.config=t,ft(this,cl,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??JA(a,r);let s=this.get(i);return s||(s=new uK({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(s)),s}add(t){ge(this,cl).has(t.queryHash)||(ge(this,cl).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=ge(this,cl).get(t.queryHash);r&&(t.destroy(),r===t&&ge(this,cl).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){wa.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return ge(this,cl).get(t)}getAll(){return[...ge(this,cl).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>QC(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>QC(t,n)):r}notify(t){wa.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){wa.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){wa.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},cl=new WeakMap,yR),Dn,bu,wu,w0,_0,_u,S0,N0,bR,yK=(bR=class{constructor(e={}){It(this,Dn);It(this,bu);It(this,wu);It(this,w0);It(this,_0);It(this,_u);It(this,S0);It(this,N0);ft(this,Dn,e.queryCache||new xK),ft(this,bu,e.mutationCache||new gK),ft(this,wu,e.defaultOptions||{}),ft(this,w0,new Map),ft(this,_0,new Map),ft(this,_u,0)}mount(){U1(this,_u)._++,ge(this,_u)===1&&(ft(this,S0,ZA.subscribe(async e=>{e&&(await this.resumePausedMutations(),ge(this,Dn).onFocus())})),ft(this,N0,Hy.subscribe(async e=>{e&&(await this.resumePausedMutations(),ge(this,Dn).onOnline())})))}unmount(){var e,t;U1(this,_u)._--,ge(this,_u)===0&&((e=ge(this,S0))==null||e.call(this),ft(this,S0,void 0),(t=ge(this,N0))==null||t.call(this),ft(this,N0,void 0))}isFetching(e){return ge(this,Dn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return ge(this,bu).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=ge(this,Dn).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=ge(this,Dn).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Fu(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return ge(this,Dn).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=ge(this,Dn).get(n.queryHash),i=a==null?void 0:a.state.data,s=eK(t,i);if(s!==void 0)return ge(this,Dn).build(this,n).setData(s,{...r,manual:!0})}setQueriesData(e,t,r){return wa.batch(()=>ge(this,Dn).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=ge(this,Dn).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=ge(this,Dn);wa.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=ge(this,Dn);return wa.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=wa.batch(()=>ge(this,Dn).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(Ti).catch(Ti)}invalidateQueries(e,t={}){return wa.batch(()=>(ge(this,Dn).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=wa.batch(()=>ge(this,Dn).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Ti)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Ti)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=ge(this,Dn).build(this,t);return r.isStaleByTime(Fu(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ti).catch(Ti)}fetchInfiniteQuery(e){return e.behavior=sk(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ti).catch(Ti)}ensureInfiniteQueryData(e){return e.behavior=sk(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Hy.isOnline()?ge(this,bu).resumePausedMutations():Promise.resolve()}getQueryCache(){return ge(this,Dn)}getMutationCache(){return ge(this,bu)}getDefaultOptions(){return ge(this,wu)}setDefaultOptions(e){ft(this,wu,e)}setQueryDefaults(e,t){ge(this,w0).set(bf(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...ge(this,w0).values()],r={};return t.forEach(n=>{Cg(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){ge(this,_0).set(bf(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...ge(this,_0).values()],r={};return t.forEach(n=>{Cg(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...ge(this,wu).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=JA(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===QA&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...ge(this,wu).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){ge(this,Dn).clear(),ge(this,bu).clear()}},Dn=new WeakMap,bu=new WeakMap,wu=new WeakMap,w0=new WeakMap,_0=new WeakMap,_u=new WeakMap,S0=new WeakMap,N0=new WeakMap,bR),H7=F.createContext(void 0),Mt=e=>{const t=F.useContext(H7);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},bK=({client:e,children:t})=>(F.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),l.jsx(H7.Provider,{value:e,children:t})),W7=F.createContext(!1),wK=()=>F.useContext(W7);W7.Provider;function _K(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var SK=F.createContext(_K()),NK=()=>F.useContext(SK),jK=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},AK=e=>{F.useEffect(()=>{e.clearReset()},[e])},EK=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||M7(r,[e.error,n])),TK=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},CK=(e,t)=>e.isLoading&&e.isFetching&&!t,kK=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,lk=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function OK(e,t,r){var f,p,h,g,m;const n=wK(),a=NK(),i=Mt(),s=i.defaultQueryOptions(e);(p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,s),s._optimisticResults=n?"isRestoring":"optimistic",TK(s),jK(s,a),AK(a);const o=!i.getQueryCache().get(s.queryHash),[c]=F.useState(()=>new t(i,s)),u=c.getOptimisticResult(s),d=!n&&e.subscribed!==!1;if(F.useSyncExternalStore(F.useCallback(x=>{const y=d?c.subscribe(wa.batchCalls(x)):Ti;return c.updateResult(),y},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),F.useEffect(()=>{c.setOptions(s)},[s,c]),kK(s,u))throw lk(s,c,a);if(EK({result:u,errorResetBoundary:a,throwOnError:s.throwOnError,query:i.getQueryCache().get(s.queryHash),suspense:s.suspense}))throw u.error;if((g=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||g.call(h,s,u),s.experimental_prefetchInRender&&!yf&&CK(u,n)){const x=o?lk(s,c,a):(m=i.getQueryCache().get(s.queryHash))==null?void 0:m.promise;x==null||x.catch(Ti).finally(()=>{c.updateResult()})}return s.notifyOnChangeProps?u:c.trackResult(u)}function zt(e,t){return OK(e,dK)}function Ft(e,t){const r=Mt(),[n]=F.useState(()=>new vK(r,e));F.useEffect(()=>{n.setOptions(e)},[n,e]);const a=F.useSyncExternalStore(F.useCallback(s=>n.subscribe(wa.batchCalls(s)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=F.useCallback((s,o)=>{n.mutate(s,o).catch(Ti)},[n]);if(a.error&&M7(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const PK={},ck=e=>{let t;const r=new Set,n=(d,f)=>{const p=typeof d=="function"?d(t):d;if(!Object.is(p,t)){const h=t;t=f??(typeof p!="object"||p===null)?p:Object.assign({},t,p),r.forEach(g=>g(t,h))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(PK?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,c);return c},LK=e=>e?ck(e):ck;var V7={exports:{}},G7={},K7={exports:{}},X7={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P0=F;function IK(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var RK=typeof Object.is=="function"?Object.is:IK,DK=P0.useState,MK=P0.useEffect,FK=P0.useLayoutEffect,$K=P0.useDebugValue;function BK(e,t){var r=t(),n=DK({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return FK(function(){a.value=r,a.getSnapshot=t,c5(a)&&i({inst:a})},[e,r,t]),MK(function(){return c5(a)&&i({inst:a}),e(function(){c5(a)&&i({inst:a})})},[e]),$K(r),r}function c5(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!RK(e,r)}catch{return!0}}function UK(e,t){return t()}var zK=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?UK:BK;X7.useSyncExternalStore=P0.useSyncExternalStore!==void 0?P0.useSyncExternalStore:zK;K7.exports=X7;var qK=K7.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B2=F,HK=qK;function WK(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var VK=typeof Object.is=="function"?Object.is:WK,GK=HK.useSyncExternalStore,KK=B2.useRef,XK=B2.useEffect,YK=B2.useMemo,JK=B2.useDebugValue;G7.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=KK(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=YK(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),a!==void 0&&s.hasValue){var g=s.value;if(a(g,h))return f=g}return f=h}if(g=f,VK(d,h))return g;var m=n(h);return a!==void 0&&a(g,m)?(d=h,g):(d=h,f=m)}var u=!1,d,f,p=r===void 0?null:r;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,r,n,a]);var o=GK(e,i[0],i[1]);return XK(function(){s.hasValue=!0,s.value=o},[o]),JK(o),o};V7.exports=G7;var QK=V7.exports;const ZK=Pr(QK),Y7={},{useDebugValue:eX}=_e,{useSyncExternalStoreWithSelector:tX}=ZK;let uk=!1;const rX=e=>e;function nX(e,t=rX,r){(Y7?"production":void 0)!=="production"&&r&&!uk&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),uk=!0);const n=tX(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return eX(n),n}const dk=e=>{(Y7?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?LK(e):e,r=(n,a)=>nX(t,n,a);return Object.assign(r,t),r},U2=e=>e?dk(e):dk,aX=e=>{try{const t=window.AudioContext||window.webkitAudioContext;if(!t)return;const r=new t,n=r.createOscillator(),a=r.createGain();switch(n.connect(a),a.connect(r.destination),e){case"success":n.frequency.setValueAtTime(880,r.currentTime),n.frequency.setValueAtTime(1108.73,r.currentTime+.1),a.gain.setValueAtTime(.3,r.currentTime),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.3),n.start(r.currentTime),n.stop(r.currentTime+.3);break;case"error":n.frequency.setValueAtTime(220,r.currentTime),n.frequency.setValueAtTime(196,r.currentTime+.15),a.gain.setValueAtTime(.3,r.currentTime),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.4),n.start(r.currentTime),n.stop(r.currentTime+.4);break;case"warning":n.frequency.setValueAtTime(440,r.currentTime),a.gain.setValueAtTime(.2,r.currentTime),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.2),n.start(r.currentTime),n.stop(r.currentTime+.2);break;case"info":n.frequency.setValueAtTime(523.25,r.currentTime),a.gain.setValueAtTime(.15,r.currentTime),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.15),n.start(r.currentTime),n.stop(r.currentTime+.15);break}}catch{}},Mv=U2(e=>({toasts:[],addToast:t=>{const r=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,n={...t,id:r,duration:t.duration??5e3};aX(t.type),e(a=>({toasts:[...a.toasts,n]})),setTimeout(()=>{e(a=>({toasts:a.toasts.filter(i=>i.id!==r)}))},n.duration)},removeToast:t=>e(r=>({toasts:r.toasts.filter(n=>n.id!==t)})),clearAll:()=>e({toasts:[]})})),Fi=(e,t,r)=>{Mv.getState().addToast({type:"success",title:e,message:t,createdBy:r})},Pi=(e,t)=>{Mv.getState().addToast({type:"error",title:e,message:t,duration:8e3})},iX=(e,t)=>{Mv.getState().addToast({type:"warning",title:e,message:t})},sX={users:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"}),calendar:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"}),clipboard:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25z"}),megaphone:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 110-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 01-1.44-4.282m3.102.069a18.03 18.03 0 01-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 018.835 2.535M10.34 6.66a23.847 23.847 0 008.835-2.535m0 0A23.74 23.74 0 0018.795 3m.38 1.125a23.91 23.91 0 011.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 001.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 010 3.46"}),clock:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}),key:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"}),inbox:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 13.5h3.86a2.25 2.25 0 012.012 1.244l.256.512a2.25 2.25 0 002.013 1.244h3.218a2.25 2.25 0 002.013-1.244l.256-.512a2.25 2.25 0 012.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 00-2.15-1.588H6.911a2.25 2.25 0 00-2.15 1.588L2.35 13.177a2.25 2.25 0 00-.1.661z"}),sparkles:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"}),truck:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}),"check-circle":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),tag:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),eye:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),gauge:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6l4 2m6-2a10 10 0 11-20 0 10 10 0 0120 0z"}),image:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"}),home:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}),"chevron-down":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}),"chevron-right":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}),menu:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}),x:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}),search:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"}),bell:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"}),logout:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}),settings:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),building:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}),layers:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.429 9.75L2.25 12l4.179 2.25m0-4.5l5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-4.179 2.25m0 0L21.75 12l-4.179 2.25m0 0l4.179 2.25L12 21.75 2.25 16.5l4.179-2.25m11.142 0l-5.571 3-5.571-3"}),droplet:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3.75c-3.314 0-6 4.03-6 9a6 6 0 1012 0c0-4.97-2.686-9-6-9z"}),spray:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23.693L5 15.5m14.8-.2a2.251 2.251 0 01.45 2.574l-.788 1.576a2.25 2.25 0 01-2.45 1.186l-6.09-1.218a5.227 5.227 0 01-2.842-1.61l-.91-1.014a2.25 2.25 0 01-.218-2.692l1.55-2.58"}),brush:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}),info:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}),"alert-circle":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}),"alert-triangle":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"}),check:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}),"x-circle":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),trash:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}),activity:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"}),user:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"}),plus:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}),package:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"}),"file-text":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}),"bar-chart":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"}),edit:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}),send:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}),upload:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}),file:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}),"calendar-range":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008zM12 15h.008v.008H12V15zm0 2.25h.008v.008H12v-.008zM9.75 15h.008v.008H9.75V15zm0 2.25h.008v.008H9.75v-.008zM7.5 15h.008v.008H7.5V15zm0 2.25h.008v.008H7.5v-.008zm6.75-4.5h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V15zm0 2.25h.008v.008h-.008v-.008zm2.25-4.5h.008v.008H16.5v-.008zm0 2.25h.008v.008H16.5V15z"}),"chevron-left":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}),"user-x":l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M22 10.5h-6m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"}),download:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}),loader:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}),sun:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"}),moon:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"}),palmtree:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21v-8.25M15.75 21H8.25M12 12.75c0 0-4.5-3-4.5-6.375A4.5 4.5 0 0112 2.25a4.5 4.5 0 014.5 4.125c0 3.375-4.5 6.375-4.5 6.375z"})},me=({name:e,className:t="",size:r=24})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:r,height:r,className:t,children:sX[e]}),oX=({toast:e})=>{const{removeToast:t}=Mv(),r={success:"bg-gradient-to-r from-success-500 to-success-600",error:"bg-gradient-to-r from-danger-500 to-danger-600",warning:"bg-gradient-to-r from-warning-500 to-warning-600",info:"bg-gradient-to-r from-brand-500 to-brand-600"},n={success:"check-circle",error:"alert-circle",warning:"alert-triangle",info:"info"};return l.jsxs("div",{className:`${r[e.type]} text-white rounded-xl shadow-2xl p-4 min-w-[320px] max-w-[420px] animate-slide-in-right flex items-start gap-3`,style:{animation:"slideInRight 0.3s ease-out"},children:[l.jsx("div",{className:"flex-shrink-0 mt-0.5",children:l.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:l.jsx(me,{name:n[e.type],size:22,className:"text-white"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"flex items-center gap-2 mb-1",children:l.jsx("h4",{className:"font-bold text-base",children:e.title})}),l.jsx("p",{className:"text-sm text-white/90 leading-relaxed",children:e.message}),e.createdBy&&l.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-white/80",children:[l.jsx(me,{name:"user",size:14}),l.jsxs("span",{children:["Registrado por: ",l.jsx("strong",{className:"text-white",children:e.createdBy})]})]})]}),l.jsx("button",{onClick:()=>t(e.id),className:"flex-shrink-0 p-1 hover:bg-white/20 rounded-lg transition-colors",children:l.jsx(me,{name:"x",size:18,className:"text-white/80"})})]})},lX=()=>{const{toasts:e}=Mv();return e.length===0?null:l.jsxs(l.Fragment,{children:[l.jsx("style",{children:`
        @keyframes slideInRight {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
      `}),l.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3",children:e.map(t=>l.jsx(oX,{toast:t},t.id))})]})},cX=({children:e})=>{const[t]=F.useState(()=>new yK({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:6e4}}}));return l.jsxs(bK,{client:t,children:[e,l.jsx(lX,{})]})};/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kg(){return kg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kg.apply(this,arguments)}var ju;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ju||(ju={}));const fk="popstate";function uX(e){e===void 0&&(e={});function t(a,i){let{pathname:s="/",search:o="",hash:c=""}=Df(a.location.hash.substr(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),$N("",{pathname:s,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){let s=a.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let c=a.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof i=="string"?i:Wy(i))}function n(a,i){z2(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return fX(t,r,n,e)}function Tn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function z2(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function dX(){return Math.random().toString(36).substr(2,8)}function hk(e,t){return{usr:e.state,key:e.key,idx:t}}function $N(e,t,r,n){return r===void 0&&(r=null),kg({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Df(t):t,{state:r,key:t&&t.key||n||dX()})}function Wy(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Df(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function fX(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,s=a.history,o=ju.Pop,c=null,u=d();u==null&&(u=0,s.replaceState(kg({},s.state,{idx:u}),""));function d(){return(s.state||{idx:null}).idx}function f(){o=ju.Pop;let x=d(),y=x==null?null:x-u;u=x,c&&c({action:o,location:m.location,delta:y})}function p(x,y){o=ju.Push;let v=$N(m.location,x,y);r&&r(v,x),u=d()+1;let b=hk(v,u),S=m.createHref(v);try{s.pushState(b,"",S)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;a.location.assign(S)}i&&c&&c({action:o,location:m.location,delta:1})}function h(x,y){o=ju.Replace;let v=$N(m.location,x,y);r&&r(v,x),u=d();let b=hk(v,u),S=m.createHref(v);s.replaceState(b,"",S),i&&c&&c({action:o,location:m.location,delta:0})}function g(x){let y=a.location.origin!=="null"?a.location.origin:a.location.href,v=typeof x=="string"?x:Wy(x);return v=v.replace(/ $/,"%20"),Tn(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return o},get location(){return e(a,s)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(fk,f),c=x,()=>{a.removeEventListener(fk,f),c=null}},createHref(x){return t(a,x)},createURL:g,encodeLocation(x){let y=g(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:h,go(x){return s.go(x)}};return m}var pk;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(pk||(pk={}));function hX(e,t,r){return r===void 0&&(r="/"),pX(e,t,r)}function pX(e,t,r,n){let a=typeof t=="string"?Df(t):t,i=L0(a.pathname||"/",r);if(i==null)return null;let s=J7(e);mX(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=AX(i);o=NX(s[c],u)}return o}function J7(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,s,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};c.relativePath.startsWith("/")&&(Tn(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=$u([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Tn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),J7(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:_X(u,i.index),routesMeta:d})};return e.forEach((i,s)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))a(i,s);else for(let c of Q7(i.path))a(i,s,c)}),t}function Q7(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let s=Q7(n.join("/")),o=[];return o.push(...s.map(c=>c===""?i:[i,c].join("/"))),a&&o.push(...s),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function mX(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:SX(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const gX=/^:[\w-]+$/,vX=3,xX=2,yX=1,bX=10,wX=-2,mk=e=>e==="*";function _X(e,t){let r=e.split("/"),n=r.length;return r.some(mk)&&(n+=wX),t&&(n+=xX),r.filter(a=>!mk(a)).reduce((a,i)=>a+(gX.test(i)?vX:i===""?yX:bX),n)}function SX(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function NX(e,t,r){let{routesMeta:n}=e,a={},i="/",s=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=BN({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!f)return null;Object.assign(a,f.params),s.push({params:a,pathname:$u([i,f.pathname]),pathnameBase:OX($u([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=$u([i,f.pathnameBase]))}return s}function BN(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=jX(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:p,isOptional:h}=d;if(p==="*"){let m=o[f]||"";s=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const g=o[f];return h&&!g?u[p]=void 0:u[p]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:s,pattern:e}}function jX(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),z2(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function AX(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return z2(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function L0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const EX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TX=e=>EX.test(e);function CX(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Df(e):e,i;if(r)if(TX(r))i=r;else{if(r.includes("//")){let s=r;r=r.replace(/\/\/+/g,"/"),z2(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+r))}r.startsWith("/")?i=gk(r.substring(1),"/"):i=gk(r,t)}else i=t;return{pathname:i,search:PX(n),hash:LX(a)}}function gk(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function u5(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kX(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function t3(e,t){let r=kX(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function r3(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Df(e):(a=kg({},e),Tn(!a.pathname||!a.pathname.includes("?"),u5("?","pathname","search",a)),Tn(!a.pathname||!a.pathname.includes("#"),u5("#","pathname","hash",a)),Tn(!a.search||!a.search.includes("#"),u5("#","search","hash",a)));let i=e===""||a.pathname==="",s=i?"/":a.pathname,o;if(s==null)o=r;else{let f=t.length-1;if(!n&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),f-=1;a.pathname=p.join("/")}o=f>=0?t[f]:"/"}let c=CX(a,o),u=s&&s!=="/"&&s.endsWith("/"),d=(i||s===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const $u=e=>e.join("/").replace(/\/\/+/g,"/"),OX=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),PX=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,LX=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function IX(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Z7=["post","put","patch","delete"];new Set(Z7);const RX=["get",...Z7];new Set(RX);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Og(){return Og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Og.apply(this,arguments)}const q2=F.createContext(null),eM=F.createContext(null),Tc=F.createContext(null),H2=F.createContext(null),Cc=F.createContext({outlet:null,matches:[],isDataRoute:!1}),tM=F.createContext(null);function DX(e,t){let{relative:r}=t===void 0?{}:t;mp()||Tn(!1);let{basename:n,navigator:a}=F.useContext(Tc),{hash:i,pathname:s,search:o}=W2(e,{relative:r}),c=s;return n!=="/"&&(c=s==="/"?n:$u([n,s])),a.createHref({pathname:c,search:o,hash:i})}function mp(){return F.useContext(H2)!=null}function Mf(){return mp()||Tn(!1),F.useContext(H2).location}function rM(e){F.useContext(Tc).static||F.useLayoutEffect(e)}function n3(){let{isDataRoute:e}=F.useContext(Cc);return e?JX():MX()}function MX(){mp()||Tn(!1);let e=F.useContext(q2),{basename:t,future:r,navigator:n}=F.useContext(Tc),{matches:a}=F.useContext(Cc),{pathname:i}=Mf(),s=JSON.stringify(t3(a,r.v7_relativeSplatPath)),o=F.useRef(!1);return rM(()=>{o.current=!0}),F.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=r3(u,JSON.parse(s),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:$u([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,s,i,e])}const FX=F.createContext(null);function $X(e){let t=F.useContext(Cc).outlet;return t&&F.createElement(FX.Provider,{value:e},t)}function W2(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=F.useContext(Tc),{matches:a}=F.useContext(Cc),{pathname:i}=Mf(),s=JSON.stringify(t3(a,n.v7_relativeSplatPath));return F.useMemo(()=>r3(e,JSON.parse(s),i,r==="path"),[e,s,i,r])}function BX(e,t){return UX(e,t)}function UX(e,t,r,n){mp()||Tn(!1);let{navigator:a}=F.useContext(Tc),{matches:i}=F.useContext(Cc),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let u=Mf(),d;if(t){var f;let x=typeof t=="string"?Df(t):t;c==="/"||(f=x.pathname)!=null&&f.startsWith(c)||Tn(!1),d=x}else d=u;let p=d.pathname||"/",h=p;if(c!=="/"){let x=c.replace(/^\//,"").split("/");h="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let g=hX(e,{pathname:h}),m=VX(g&&g.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:$u([c,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:$u([c,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,r,n);return t&&m?F.createElement(H2.Provider,{value:{location:Og({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ju.Pop}},m):m}function zX(){let e=YX(),t=IX(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},t),r?F.createElement("pre",{style:a},r):null,null)}const qX=F.createElement(zX,null);class HX extends F.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?F.createElement(Cc.Provider,{value:this.props.routeContext},F.createElement(tM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function WX(e){let{routeContext:t,match:r,children:n}=e,a=F.useContext(q2);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),F.createElement(Cc.Provider,{value:t},n)}function VX(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,o=(a=r)==null?void 0:a.errors;if(o!=null){let d=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);d>=0||Tn(!1),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:p,errors:h}=r,g=f.route.loader&&p[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||g){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,p)=>{let h,g=!1,m=null,x=null;r&&(h=o&&f.route.id?o[f.route.id]:void 0,m=f.route.errorElement||qX,c&&(u<0&&p===0?(QX("route-fallback"),g=!0,x=null):u===p&&(g=!0,x=f.route.hydrateFallbackElement||null)));let y=t.concat(s.slice(0,p+1)),v=()=>{let b;return h?b=m:g?b=x:f.route.Component?b=F.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,F.createElement(WX,{match:f,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?F.createElement(HX,{location:r.location,revalidation:r.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var nM=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(nM||{}),aM=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(aM||{});function GX(e){let t=F.useContext(q2);return t||Tn(!1),t}function KX(e){let t=F.useContext(eM);return t||Tn(!1),t}function XX(e){let t=F.useContext(Cc);return t||Tn(!1),t}function iM(e){let t=XX(),r=t.matches[t.matches.length-1];return r.route.id||Tn(!1),r.route.id}function YX(){var e;let t=F.useContext(tM),r=KX(),n=iM();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function JX(){let{router:e}=GX(nM.UseNavigateStable),t=iM(aM.UseNavigateStable),r=F.useRef(!1);return rM(()=>{r.current=!0}),F.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Og({fromRouteId:t},i)))},[e,t])}const vk={};function QX(e,t,r){vk[e]||(vk[e]=!0)}function ZX(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function sM(e){let{to:t,replace:r,state:n,relative:a}=e;mp()||Tn(!1);let{future:i,static:s}=F.useContext(Tc),{matches:o}=F.useContext(Cc),{pathname:c}=Mf(),u=n3(),d=r3(t,t3(o,i.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(d);return F.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:a}),[u,f,a,r,n]),null}function oM(e){return $X(e.context)}function Rn(e){Tn(!1)}function eY(e){let{basename:t="/",children:r=null,location:n,navigationType:a=ju.Pop,navigator:i,static:s=!1,future:o}=e;mp()&&Tn(!1);let c=t.replace(/^\/*/,"/"),u=F.useMemo(()=>({basename:c,navigator:i,static:s,future:Og({v7_relativeSplatPath:!1},o)}),[c,o,i,s]);typeof n=="string"&&(n=Df(n));let{pathname:d="/",search:f="",hash:p="",state:h=null,key:g="default"}=n,m=F.useMemo(()=>{let x=L0(d,c);return x==null?null:{location:{pathname:x,search:f,hash:p,state:h,key:g},navigationType:a}},[c,d,f,p,h,g,a]);return m==null?null:F.createElement(Tc.Provider,{value:u},F.createElement(H2.Provider,{children:r,value:m}))}function tY(e){let{children:t,location:r}=e;return BX(UN(t),r)}new Promise(()=>{});function UN(e,t){t===void 0&&(t=[]);let r=[];return F.Children.forEach(e,(n,a)=>{if(!F.isValidElement(n))return;let i=[...t,a];if(n.type===F.Fragment){r.push.apply(r,UN(n.props.children,i));return}n.type!==Rn&&Tn(!1),!n.props.index||!n.props.children||Tn(!1);let s={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=UN(n.props.children,i)),r.push(s)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vy(){return Vy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vy.apply(this,arguments)}function lM(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function rY(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function nY(e,t){return e.button===0&&(!t||t==="_self")&&!rY(e)}const aY=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],iY=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],sY="6";try{window.__reactRouterVersion=sY}catch{}const oY=F.createContext({isTransitioning:!1}),lY="startTransition",xk=$W[lY];function cY(e){let{basename:t,children:r,future:n,window:a}=e,i=F.useRef();i.current==null&&(i.current=uX({window:a,v5Compat:!0}));let s=i.current,[o,c]=F.useState({action:s.action,location:s.location}),{v7_startTransition:u}=n||{},d=F.useCallback(f=>{u&&xk?xk(()=>c(f)):c(f)},[c,u]);return F.useLayoutEffect(()=>s.listen(d),[s,d]),F.useEffect(()=>ZX(n),[n]),F.createElement(eY,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:s,future:n})}const uY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fY=F.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:s,state:o,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,p=lM(t,aY),{basename:h}=F.useContext(Tc),g,m=!1;if(typeof u=="string"&&dY.test(u)&&(g=u,uY))try{let b=new URL(window.location.href),S=u.startsWith("//")?new URL(b.protocol+u):new URL(u),_=L0(S.pathname,h);S.origin===b.origin&&_!=null?u=_+S.search+S.hash:m=!0}catch{}let x=DX(u,{relative:a}),y=mY(u,{replace:s,state:o,target:c,preventScrollReset:d,relative:a,viewTransition:f});function v(b){n&&n(b),b.defaultPrevented||y(b)}return F.createElement("a",Vy({},p,{href:g||x,onClick:m||i?n:v,ref:r,target:c}))}),hY=F.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:a=!1,className:i="",end:s=!1,style:o,to:c,viewTransition:u,children:d}=t,f=lM(t,iY),p=W2(c,{relative:f.relative}),h=Mf(),g=F.useContext(eM),{navigator:m,basename:x}=F.useContext(Tc),y=g!=null&&gY(p)&&u===!0,v=m.encodeLocation?m.encodeLocation(p).pathname:p.pathname,b=h.pathname,S=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;a||(b=b.toLowerCase(),S=S?S.toLowerCase():null,v=v.toLowerCase()),S&&x&&(S=L0(S,x)||S);const _=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let A=b===v||!s&&b.startsWith(v)&&b.charAt(_)==="/",j=S!=null&&(S===v||!s&&S.startsWith(v)&&S.charAt(v.length)==="/"),E={isActive:A,isPending:j,isTransitioning:y},T=A?n:void 0,L;typeof i=="function"?L=i(E):L=[i,A?"active":null,j?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let O=typeof o=="function"?o(E):o;return F.createElement(fY,Vy({},f,{"aria-current":T,className:L,ref:r,style:O,to:c,viewTransition:u}),typeof d=="function"?d(E):d)});var zN;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(zN||(zN={}));var yk;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(yk||(yk={}));function pY(e){let t=F.useContext(q2);return t||Tn(!1),t}function mY(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:s,viewTransition:o}=t===void 0?{}:t,c=n3(),u=Mf(),d=W2(e,{relative:s});return F.useCallback(f=>{if(nY(f,r)){f.preventDefault();let p=n!==void 0?n:Wy(u)===Wy(d);c(e,{replace:p,state:a,preventScrollReset:i,relative:s,viewTransition:o})}},[u,c,d,n,a,r,e,i,s,o])}function gY(e,t){t===void 0&&(t={});let r=F.useContext(oY);r==null&&Tn(!1);let{basename:n}=pY(zN.useViewTransitionState),a=W2(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=L0(r.currentLocation.pathname,n)||r.currentLocation.pathname,s=L0(r.nextLocation.pathname,n)||r.nextLocation.pathname;return BN(a.pathname,s)!=null||BN(a.pathname,i)!=null}let ox=null;const vY=(e,t)=>({supervisorName:e,terminalCode:t,startedAt:new Date().toISOString()}),Gy={startSession:async(e,t)=>(ox=vY(e,t),ox),getSession:async()=>ox,logout:async()=>{ox=null}},jr=U2(e=>({session:null,setSession:t=>e({session:t}),clearSession:()=>e({session:null}),hydrateSession:async()=>{const t=await Gy.getSession();e({session:t})}})),qN=["EL_ROBLE","LA_REINA","MARIA_ANGELICA","EL_DESCANSO"],Hu={EL_ROBLE:"El Roble",LA_REINA:"La Reina",MARIA_ANGELICA:"Mara Anglica",EL_DESCANSO:"El Descanso",EL_SALTO:"El Salto",LO_ECHEVERS:"Lo Echevers",COLO_COLO:"Colo Colo"},a3=[{code:"GRUPO_ROBLE",name:"Grupo El Roble",members:qN}],ns=Object.entries(Hu).map(([e,t])=>({value:e,label:t})),xY=a3.map(e=>({value:e.code,label:e.name})),cM={mode:"ALL"},Ui=e=>{if(e.mode==="ALL"||!e.value)return Object.keys(Hu);if(e.mode==="TERMINAL"){const r=e.value;return qN.includes(r)?qN:[r]}const t=a3.find(r=>r.code===e.value);return t?t.members:Object.keys(Hu)},yY=(e,t)=>{const r=Ui(t);return e.filter(n=>r.includes(n.terminal))},ur=e=>{if(Hu[e])return Hu[e];const t=a3.find(r=>r.code===e);return(t==null?void 0:t.name)??String(e)},Vt=U2(e=>({context:cM,setContext:t=>e({context:t})})),bY=()=>{const e=n3(),t=jr(f=>f.setSession),r=jr(f=>f.session),n=Vt(f=>f.setContext),[a,i]=F.useState(""),[s,o]=F.useState("EL_ROBLE"),[c,u]=F.useState(!1);F.useEffect(()=>{r&&e("/personal")},[r,e]);const d=async f=>{f.preventDefault(),u(!0);const p=await Gy.startSession(a,s);t(p),n({mode:"TERMINAL",value:s}),e("/personal")};return l.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-dark-900 via-dark-800 to-brand-900",children:[l.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-brand-500/30 rounded-full blur-3xl animate-float"}),l.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent-500/20 rounded-full blur-3xl animate-float",style:{animationDelay:"1s"}}),l.jsx("div",{className:"absolute top-1/2 right-1/3 w-64 h-64 bg-brand-600/20 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),l.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})]}),l.jsxs("div",{className:"relative z-10 w-full max-w-lg px-4 animate-slide-up",children:[l.jsx("div",{className:"flex justify-center mb-8",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br from-brand-500 to-brand-700 shadow-brand-lg",children:l.jsx("span",{className:"text-3xl font-bold text-white",children:"A"})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-2xl font-bold text-white",children:"Asiss"}),l.jsx("span",{className:"text-sm text-slate-400",children:"Dashboard de Logstica"})]})]})}),l.jsxs("div",{className:"card-glass p-8 md:p-10",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Bienvenido"}),l.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Ingresa tus datos para acceder al panel de control"})]}),l.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Nombre del Supervisor"}),l.jsxs("div",{className:"relative",children:[l.jsx(me,{name:"users",size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"}),l.jsx("input",{type:"text",className:"input pl-10",value:a,onChange:f=>i(f.target.value),placeholder:"Ej: Ana Prez",required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Terminal"}),l.jsxs("div",{className:"relative",children:[l.jsx(me,{name:"building",size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none z-10"}),l.jsx("select",{className:"input pl-10 appearance-none cursor-pointer",value:s,onChange:f=>o(f.target.value),style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2394a3b8'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px",paddingRight:"40px"},children:ns.map(f=>l.jsx("option",{value:f.value,children:f.label},f.value))})]})]}),l.jsx("button",{type:"submit",disabled:c||!a,className:"btn btn-primary w-full py-3.5 text-base",children:c?l.jsxs("span",{className:"flex items-center justify-center gap-2",children:[l.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Iniciando sesin..."]}):l.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Entrar al Dashboard",l.jsx(me,{name:"chevron-right",size:18})]})})]}),l.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200",children:l.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-slate-500",children:[l.jsx(me,{name:"check-circle",size:14,className:"text-success-500"}),l.jsx("span",{children:"Conexin segura  Datos protegidos"})]})})]}),l.jsx("p",{className:"mt-6 text-center text-xs text-slate-500",children:"Versin 2.0   2024 Asiss"})]})]})},bk=[{label:"Operacin",icon:"building",items:[{label:"Personal",to:"/personal",icon:"users"},{label:"Reuniones",to:"/reuniones",icon:"calendar"},{label:"Tareas",to:"/tareas",icon:"clipboard"},{label:"Informativos",to:"/informativos",icon:"megaphone"},{label:"Asistencia",to:"/asistencia",icon:"clock"},{label:"Credenciales",to:"/credenciales",icon:"key"},{label:"Solicitudes",to:"/solicitudes",icon:"inbox"}]},{label:"Aseo",icon:"sparkles",items:[{label:"Interior",to:"/aseo/interior",icon:"droplet"},{label:"Exterior",to:"/aseo/exterior",icon:"spray"},{label:"Rodillo",to:"/aseo/rodillo",icon:"brush"}]},{label:"Insumos",icon:"package",items:[{label:"Solicitudes",to:"/insumos",icon:"file-text"}]},{label:"MiniCheck",icon:"check-circle",items:[{label:"Extintor",to:"/minicheck/extintor",icon:"check-circle"},{label:"Tag",to:"/minicheck/tag",icon:"tag"},{label:"Mobileye",to:"/minicheck/mobileye",icon:"eye"},{label:"Odmetro",to:"/minicheck/odometro",icon:"gauge"},{label:"Publicidad",to:"/minicheck/publicidad",icon:"image"}]},{label:"Flota",icon:"truck",items:[{label:"Estado de Flota",to:"/estado-flota",icon:"truck"}]}],wY=({isOpen:e,onClose:t})=>{const r=Mf(),[n,a]=F.useState(()=>{const o=bk.find(c=>c.items.some(u=>r.pathname.startsWith(u.to)));return o?[o.label]:["Operacin"]}),i=o=>{a(c=>c.includes(o)?c.filter(u=>u!==o):[...c,o])},s=o=>o.items.some(c=>r.pathname.startsWith(c.to));return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`${e?"fixed":"hidden"} inset-0 z-40 bg-black/60 backdrop-blur-sm md:hidden`,onClick:t}),l.jsx("aside",{className:`${e?"translate-x-0":"-translate-x-full"} fixed inset-y-0 left-0 z-50 w-72 transform transition-transform duration-300 ease-out md:translate-x-0`,children:l.jsxs("div",{className:"flex h-full flex-col bg-gradient-to-b from-dark-800 to-dark-900",children:[l.jsxs("div",{className:"flex items-center gap-3 px-6 py-5 border-b border-white/10",children:[l.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-brand-500 to-brand-700 shadow-brand",children:l.jsx("span",{className:"text-lg font-bold text-white",children:"A"})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-sm font-bold text-white",children:"Asiss"}),l.jsx("span",{className:"text-xs text-slate-400",children:"Dashboard Logstica"})]}),l.jsx("button",{onClick:t,className:"ml-auto rounded-lg p-1.5 text-slate-400 hover:bg-white/10 hover:text-white md:hidden",children:l.jsx(me,{name:"x",size:20})})]}),l.jsx("nav",{className:"flex-1 overflow-y-auto custom-scrollbar px-3 py-4 space-y-1",children:bk.map(o=>{const c=n.includes(o.label),u=s(o);return l.jsxs("div",{className:"mb-1",children:[l.jsxs("button",{onClick:()=>i(o.label),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 group ${u?"bg-white/10 text-white":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[l.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-lg transition-all duration-200 ${u?"bg-gradient-to-br from-brand-500 to-brand-600 text-white shadow-brand":"bg-white/5 text-slate-400 group-hover:bg-white/10 group-hover:text-slate-200"}`,children:l.jsx(me,{name:o.icon,size:18})}),l.jsx("span",{className:"flex-1 text-left text-sm font-semibold",children:o.label}),l.jsx(me,{name:"chevron-down",size:16,className:`transition-transform duration-200 ${c?"rotate-0":"-rotate-90"}`})]}),l.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-out ${c?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:l.jsx("div",{className:"mt-1 ml-4 pl-4 border-l border-white/10 space-y-0.5",children:o.items.map(d=>l.jsxs(hY,{to:d.to,onClick:t,className:({isActive:f})=>`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-all duration-200 ${f?"bg-brand-500/20 text-brand-300 font-medium":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[l.jsx(me,{name:d.icon,size:16}),l.jsx("span",{children:d.label})]},d.to))})})]},o.label)})}),l.jsx("div",{className:"border-t border-white/10 px-4 py-4",children:l.jsxs("div",{className:"flex items-center gap-3 px-2",children:[l.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-gradient-to-br from-accent-400 to-accent-600 text-white text-sm font-bold",children:"S"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium text-white truncate",children:"Supervisor"}),l.jsx("p",{className:"text-xs text-slate-400",children:"Terminal Activo"})]})]})})]})})]})},d5=new Set;let lx=[];const _Y=()=>crypto.randomUUID(),wk={subscribeNotifications:e=>(d5.add(e),()=>d5.delete(e)),publishNotification:e=>{const t={id:e.id??_Y(),createdAt:e.createdAt??new Date().toISOString(),...e};return lx=[t,...lx].slice(0,50),d5.forEach(r=>r(t)),t},getNotifications:()=>lx,clear:()=>{lx=[]}},SY=U2(e=>({items:[],last:void 0,addNotification:t=>e(r=>({items:[t,...r.items],last:t})),setAll:t=>e({items:t}),clear:()=>e({items:[],last:void 0})})),Ma=e=>(typeof e=="string"?new Date(e):e).toLocaleDateString("es-CL",{year:"numeric",month:"short",day:"numeric"}),NY=()=>{const{items:e,addNotification:t,setAll:r,last:n}=SY(),[a,i]=F.useState(!1),[s,o]=F.useState(!1);return F.useEffect(()=>{r(wk.getNotifications());const c=wk.subscribeNotifications(u=>{t(u),o(!0),setTimeout(()=>o(!1),3500)});return()=>c()},[t,r]),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{type:"button",className:"btn btn-secondary h-10",onClick:()=>i(c=>!c),children:[l.jsxs("span",{className:"relative inline-flex items-center",children:[l.jsx("svg",{className:"h-5 w-5 text-slate-600",fill:"none",stroke:"currentColor",strokeWidth:"1.8",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14 17h5l-1.405-1.405A2.032 2.032 0 0117 14.158V11a5.002 5.002 0 00-3-4.584V6a2 2 0 10-4 0v.416A5.002 5.002 0 007 11v3.159c0 .538-.214 1.055-.595 1.436L5 17h5m4 0v1a3 3 0 11-6 0v-1m6 0H8"})}),e.length>0&&l.jsx("span",{className:"absolute -right-2 -top-2 flex h-5 min-w-[20px] items-center justify-center rounded-full bg-brand-500 px-1 text-xs font-bold text-white",children:e.length})]}),l.jsx("span",{className:"hidden text-sm font-semibold text-slate-700 sm:inline",children:"Alertas"})]}),a&&l.jsxs("div",{className:"absolute right-0 z-30 mt-2 w-80 rounded-lg border border-slate-200 bg-white shadow-lg",children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[l.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Notificaciones"}),l.jsx("button",{className:"text-xs text-brand-600 hover:underline",onClick:()=>i(!1),children:"Cerrar"})]}),l.jsxs("div",{className:"max-h-80 space-y-2 overflow-y-auto px-4 pb-4",children:[e.length===0&&l.jsx("p",{className:"text-sm text-slate-500",children:"Sin notificaciones por ahora."}),e.map(c=>l.jsxs("div",{className:"rounded-md border border-slate-100 bg-slate-50 p-3",children:[l.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[l.jsx("span",{className:"font-semibold capitalize",children:c.level}),l.jsx("span",{children:Ma(c.createdAt)})]}),l.jsx("p",{className:"text-sm font-semibold text-slate-800",children:c.title}),l.jsx("p",{className:"text-sm text-slate-600",children:c.message})]},c.id))]})]}),s&&n&&l.jsxs("div",{className:"fixed bottom-4 right-4 z-40 max-w-sm rounded-md border border-slate-200 bg-white px-4 py-3 shadow-lg",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-xs font-semibold uppercase text-brand-700",children:n.level}),l.jsx("button",{onClick:()=>o(!1),className:"text-xs text-slate-500 hover:text-slate-700",children:"Cerrar"})]}),l.jsx("p",{className:"text-sm font-semibold text-slate-900",children:n.title}),l.jsx("p",{className:"text-sm text-slate-700",children:n.message})]})]})},jY=({onMenuToggle:e})=>{var i;const t=Vt(s=>s.context),r=jr(s=>s.session),n=jr(s=>s.clearSession),a=()=>t.mode==="ALL"?"Todos los terminales":t.mode==="TERMINAL"&&t.value?ur(t.value):"Terminal";return l.jsx("header",{className:"header px-4 md:px-6",children:l.jsxs("div",{className:"flex w-full items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:e,className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-100 text-slate-600 transition-all hover:bg-slate-200 md:hidden","aria-label":"Abrir men",children:l.jsx(me,{name:"menu",size:20})}),l.jsxs("div",{className:"hidden md:block",children:[l.jsx("h1",{className:"text-lg font-bold text-slate-900",children:"Dashboard"}),l.jsx("p",{className:"text-xs text-slate-500",children:a()})]})]}),l.jsx("div",{className:"hidden lg:flex flex-1 max-w-md mx-8",children:l.jsxs("div",{className:"relative w-full",children:[l.jsx(me,{name:"search",size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),l.jsx("input",{type:"search",placeholder:"Buscar en el dashboard...",className:"w-full rounded-xl border border-slate-200 bg-slate-50 py-2.5 pl-10 pr-4 text-sm transition-all placeholder:text-slate-400 focus:border-brand-500 focus:bg-white focus:outline-none focus:ring-2 focus:ring-brand-500/20"})]})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"md:hidden",children:l.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-brand-50 px-3 py-1.5",children:[l.jsx(me,{name:"building",size:14,className:"text-brand-600"}),l.jsx("span",{className:"text-xs font-semibold text-brand-700",children:t.mode==="ALL"?"Todos":(i=t.value)==null?void 0:i.split("_").pop()})]})}),l.jsx(NY,{}),r&&l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"hidden sm:flex items-center gap-3 rounded-xl border border-slate-200 bg-white px-3 py-2 shadow-sm",children:[l.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-brand-500 to-brand-600 text-white text-sm font-bold",children:r.supervisorName.charAt(0).toUpperCase()}),l.jsxs("div",{className:"hidden md:flex flex-col leading-tight",children:[l.jsx("span",{className:"text-sm font-semibold text-slate-900",children:r.supervisorName}),l.jsx("span",{className:"text-xs text-slate-500",children:ur(r.terminalCode)})]}),l.jsx("button",{onClick:()=>{n(),Gy.logout()},className:"ml-1 rounded-lg p-1.5 text-slate-400 transition-colors hover:bg-slate-100 hover:text-danger-600",title:"Cerrar sesin",children:l.jsx(me,{name:"logout",size:18})})]}),l.jsx("button",{onClick:()=>{n(),Gy.logout()},className:"sm:hidden flex h-10 w-10 items-center justify-center rounded-xl bg-slate-100 text-slate-600 transition-all hover:bg-danger-100 hover:text-danger-600",title:"Cerrar sesin",children:l.jsx(me,{name:"logout",size:20})})]})]})]})})},AY=({onClick:e,isOpen:t})=>l.jsx("button",{onClick:e,className:`
                fixed bottom-6 right-6 z-50
                w-14 h-14 rounded-full
                bg-gradient-to-br from-slate-700 to-slate-900
                text-white shadow-lg
                flex items-center justify-center
                transition-all duration-300 ease-out
                hover:scale-110 hover:shadow-xl
                active:scale-95
                focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2
                ${t?"rotate-45 bg-red-600":""}
            `,title:"Asis Command","aria-label":"Abrir Asis Command",children:l.jsx(me,{name:t?"x":"settings",className:"w-6 h-6"})});var HN=function(e,t){return HN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},HN(e,t)};function uM(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");HN(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ky=function(){return Ky=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ky.apply(this,arguments)};function gp(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function dM(e,t,r,n){var a=arguments.length,i=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(a<3?s(i):a>3?s(t,r,i):s(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function fM(e,t){return function(r,n){t(r,n,e)}}function hM(e,t,r,n,a,i){function s(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var o=n.kind,c=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f,p=!1,h=r.length-1;h>=0;h--){var g={};for(var m in n)g[m]=m==="access"?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(y){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(y||null))};var x=(0,r[h])(o==="accessor"?{get:d.get,set:d.set}:d[c],g);if(o==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(f=s(x.get))&&(d.get=f),(f=s(x.set))&&(d.set=f),(f=s(x.init))&&a.unshift(f)}else(f=s(x))&&(o==="field"?a.unshift(f):d[c]=f)}u&&Object.defineProperty(u,n.name,d),p=!0}function pM(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function mM(e){return typeof e=="symbol"?e:"".concat(e)}function gM(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function vM(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function vt(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})}function xM(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var V2=Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function yM(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&V2(t,e,r)}function Xy(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function i3(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function bM(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i3(arguments[t]));return e}function wM(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var i=arguments[t],s=0,o=i.length;s<o;s++,a++)n[a]=i[s];return n}function _M(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function I0(e){return this instanceof I0?(this.v=e,this):new I0(e)}function SM(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",s),a[Symbol.asyncIterator]=function(){return this},a;function s(h){return function(g){return Promise.resolve(g).then(h,f)}}function o(h,g){n[h]&&(a[h]=function(m){return new Promise(function(x,y){i.push([h,m,x,y])>1||c(h,m)})},g&&(a[h]=g(a[h])))}function c(h,g){try{u(n[h](g))}catch(m){p(i[0][3],m)}}function u(h){h.value instanceof I0?Promise.resolve(h.value.v).then(d,f):p(i[0][2],h)}function d(h){c("next",h)}function f(h){c("throw",h)}function p(h,g){h(g),i.shift(),i.length&&c(i[0][0],i[0][1])}}function NM(e){var t,r;return t={},n("next"),n("throw",function(a){throw a}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(a,i){t[a]=e[a]?function(s){return(r=!r)?{value:I0(e[a](s)),done:!1}:i?i(s):s}:i}}function jM(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Xy=="function"?Xy(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(s){return new Promise(function(o,c){s=e[i](s),a(o,c,s.done,s.value)})}}function a(i,s,o,c){Promise.resolve(c).then(function(u){i({value:u,done:o})},s)}}function AM(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var EY=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},WN=function(e){return WN=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},WN(e)};function EM(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=WN(e),n=0;n<r.length;n++)r[n]!=="default"&&V2(t,e,r[n]);return EY(t,e),t}function TM(e){return e&&e.__esModule?e:{default:e}}function CM(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function kM(e,t,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}function OM(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function PM(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var TY=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function LM(e){function t(i){e.error=e.hasError?new TY(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;function a(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(a,function(s){return t(s),a()})}else n|=1}catch(s){t(s)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function IM(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,a,i,s){return n?t?".jsx":".js":a&&(!i||!s)?r:a+i+"."+s.toLowerCase()+"js"}):e}const CY={__extends:uM,__assign:Ky,__rest:gp,__decorate:dM,__param:fM,__esDecorate:hM,__runInitializers:pM,__propKey:mM,__setFunctionName:gM,__metadata:vM,__awaiter:vt,__generator:xM,__createBinding:V2,__exportStar:yM,__values:Xy,__read:i3,__spread:bM,__spreadArrays:wM,__spreadArray:_M,__await:I0,__asyncGenerator:SM,__asyncDelegator:NM,__asyncValues:jM,__makeTemplateObject:AM,__importStar:EM,__importDefault:TM,__classPrivateFieldGet:CM,__classPrivateFieldSet:kM,__classPrivateFieldIn:OM,__addDisposableResource:PM,__disposeResources:LM,__rewriteRelativeImportExtension:IM},kY=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:PM,get __assign(){return Ky},__asyncDelegator:NM,__asyncGenerator:SM,__asyncValues:jM,__await:I0,__awaiter:vt,__classPrivateFieldGet:CM,__classPrivateFieldIn:OM,__classPrivateFieldSet:kM,__createBinding:V2,__decorate:dM,__disposeResources:LM,__esDecorate:hM,__exportStar:yM,__extends:uM,__generator:xM,__importDefault:TM,__importStar:EM,__makeTemplateObject:AM,__metadata:vM,__param:fM,__propKey:mM,__read:i3,__rest:gp,__rewriteRelativeImportExtension:IM,__runInitializers:pM,__setFunctionName:gM,__spread:bM,__spreadArray:_M,__spreadArrays:wM,__values:Xy,default:CY},Symbol.toStringTag,{value:"Module"})),OY=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class G2 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class RM extends G2{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class VN extends G2{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class GN extends G2{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Yy;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Yy||(Yy={}));class PY{constructor(t,{headers:r={},customFetch:n,region:a=Yy.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=OY(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return vt(this,arguments,void 0,function*(r,n={}){var a;let i,s;try{const{headers:o,method:c,body:u,signal:d,timeout:f}=n;let p={},{region:h}=n;h||(h=this.region);const g=new URL(`${this.url}/${r}`);h&&h!=="any"&&(p["x-region"]=h,g.searchParams.set("forceFunctionRegion",h));let m;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",m=u):typeof u=="string"?(p["Content-Type"]="text/plain",m=u):typeof FormData<"u"&&u instanceof FormData?m=u:(p["Content-Type"]="application/json",m=JSON.stringify(u)):m=u;let x=d;f&&(s=new AbortController,i=setTimeout(()=>s.abort(),f),d?(x=s.signal,d.addEventListener("abort",()=>s.abort())):x=s.signal);const y=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),o),body:m,signal:x}).catch(_=>{throw new RM(_)}),v=y.headers.get("x-relay-error");if(v&&v==="true")throw new VN(y);if(!y.ok)throw new GN(y);let b=((a=y.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),S;return b==="application/json"?S=yield y.json():b==="application/octet-stream"||b==="application/pdf"?S=yield y.blob():b==="text/event-stream"?S=y:b==="multipart/form-data"?S=yield y.formData():S=yield y.text(),{data:S,error:null,response:y}}catch(o){return{data:null,error:o,response:o instanceof GN||o instanceof VN?o.context:void 0}}finally{i&&clearTimeout(i)}})}}var Oi={};const vp=SW(kY);var cx={},ux={},dx={},fx={},hx={},px={},_k;function DM(){if(_k)return px;_k=1,Object.defineProperty(px,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return px.default=e,px}var Sk;function MM(){if(Sk)return hx;Sk=1,Object.defineProperty(hx,"__esModule",{value:!0});const t=vp.__importDefault(DM());class r{constructor(a){var i,s;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(i=a.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=a.signal,this.isMaybeSingle=(s=a.isMaybeSingle)!==null&&s!==void 0?s:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=new Headers(this.headers),this.headers.set(a,i),this}then(a,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let o=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,f,p;let h=null,g=null,m=null,x=c.status,y=c.statusText;if(c.ok){if(this.method!=="HEAD"){const _=await c.text();_===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?g=_:g=JSON.parse(_))}const b=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),S=(f=c.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");b&&S&&S.length>1&&(m=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(h={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,m=null,x=406,y="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const b=await c.text();try{h=JSON.parse(b),Array.isArray(h)&&c.status===404&&(g=[],h=null,x=200,y="OK")}catch{c.status===404&&b===""?(x=204,y="No Content"):h={message:b}}if(h&&this.isMaybeSingle&&(!((p=h==null?void 0:h.details)===null||p===void 0)&&p.includes("0 rows"))&&(h=null,x=200,y="OK"),h&&this.shouldThrowOnError)throw new t.default(h)}return{error:h,data:g,count:m,status:x,statusText:y}});return this.shouldThrowOnError||(o=o.catch(c=>{var u,d,f,p,h,g;let m="";const x=c==null?void 0:c.cause;if(x){const y=(u=x==null?void 0:x.message)!==null&&u!==void 0?u:"",v=(d=x==null?void 0:x.code)!==null&&d!==void 0?d:"";m=`${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"FetchError"}: ${c==null?void 0:c.message}`,m+=`

Caused by: ${(p=x==null?void 0:x.name)!==null&&p!==void 0?p:"Error"}: ${y}`,v&&(m+=` (${v})`),x!=null&&x.stack&&(m+=`
${x.stack}`)}else m=(h=c==null?void 0:c.stack)!==null&&h!==void 0?h:"";return{error:{message:`${(g=c==null?void 0:c.name)!==null&&g!==void 0?g:"FetchError"}: ${c==null?void 0:c.message}`,details:m,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(a,i)}returns(){return this}overrideTypes(){return this}}return hx.default=r,hx}var Nk;function FM(){if(Nk)return fx;Nk=1,Object.defineProperty(fx,"__esModule",{value:!0});const t=vp.__importDefault(MM());class r extends t.default{select(a){let i=!1;const s=(a??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:i=!0,nullsFirst:s,foreignTable:o,referencedTable:c=o}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${a}.${i?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:s=i}={}){const o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${a}`),this}range(a,i,{foreignTable:s,referencedTable:o=s}={}){const c=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(u,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:i=!1,settings:s=!1,buffers:o=!1,wal:c=!1,format:u="text"}={}){var d;const f=[a?"analyze":null,i?"verbose":null,s?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),p=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${p}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return fx.default=r,fx}var jk;function s3(){if(jk)return dx;jk=1,Object.defineProperty(dx,"__esModule",{value:!0});const t=vp.__importDefault(FM()),r=new RegExp("[,()]");class n extends t.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}regexMatch(i,s){return this.url.searchParams.append(i,`match.${s}`),this}regexIMatch(i,s){return this.url.searchParams.append(i,`imatch.${s}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}isDistinct(i,s){return this.url.searchParams.append(i,`isdistinct.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${u}fts${d}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return dx.default=n,dx}var Ak;function $M(){if(Ak)return ux;Ak=1,Object.defineProperty(ux,"__esModule",{value:!0});const t=vp.__importDefault(s3());class r{constructor(a,{headers:i={},schema:s,fetch:o}){this.url=a,this.headers=new Headers(i),this.schema=s,this.fetch=o}select(a,i){const{head:s=!1,count:o}=i??{},c=s?"HEAD":"GET";let u=!1;const d=(a??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",d),o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:s=!0}={}){var o;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const u=a.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:s=!1,count:o,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const f=a.reduce((p,h)=>p.concat(Object.keys(h)),[]);if(f.length>0){const p=[...new Set(f)].map(h=>`"${h}"`);this.url.searchParams.set("columns",p.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(a,{count:i}={}){var s;const o="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:a}={}){var i;const s="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return ux.default=r,ux}var Ek;function LY(){if(Ek)return cx;Ek=1,Object.defineProperty(cx,"__esModule",{value:!0});const e=vp,t=e.__importDefault($M()),r=e.__importDefault(s3());class n{constructor(i,{headers:s={},schema:o,fetch:c}={}){this.url=i,this.headers=new Headers(s),this.schemaName=o,this.fetch=c}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const s=new URL(`${this.url}/${i}`);return new t.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,s={},{head:o=!1,get:c=!1,count:u}={}){var d;let f;const p=new URL(`${this.url}/rpc/${i}`);let h;o||c?(f=o?"HEAD":"GET",Object.entries(s).filter(([m,x])=>x!==void 0).map(([m,x])=>[m,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([m,x])=>{p.searchParams.append(m,x)})):(f="POST",h=s);const g=new Headers(this.headers);return u&&g.set("Prefer",`count=${u}`),new r.default({method:f,url:p,headers:g,schema:this.schemaName,body:h,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return cx.default=n,cx}Object.defineProperty(Oi,"__esModule",{value:!0});var BM=Oi.PostgrestError=YM=Oi.PostgrestBuilder=KM=Oi.PostgrestTransformBuilder=VM=Oi.PostgrestFilterBuilder=HM=Oi.PostgrestQueryBuilder=zM=Oi.PostgrestClient=void 0;const xp=vp,UM=xp.__importDefault(LY());var zM=Oi.PostgrestClient=UM.default;const qM=xp.__importDefault($M());var HM=Oi.PostgrestQueryBuilder=qM.default;const WM=xp.__importDefault(s3());var VM=Oi.PostgrestFilterBuilder=WM.default;const GM=xp.__importDefault(FM());var KM=Oi.PostgrestTransformBuilder=GM.default;const XM=xp.__importDefault(MM());var YM=Oi.PostgrestBuilder=XM.default;const JM=xp.__importDefault(DM());BM=Oi.PostgrestError=JM.default;var QM=Oi.default={PostgrestClient:UM.default,PostgrestQueryBuilder:qM.default,PostgrestFilterBuilder:WM.default,PostgrestTransformBuilder:GM.default,PostgrestBuilder:XM.default,PostgrestError:JM.default};const IY=wR({__proto__:null,get PostgrestBuilder(){return YM},get PostgrestClient(){return zM},get PostgrestError(){return BM},get PostgrestFilterBuilder(){return VM},get PostgrestQueryBuilder(){return HM},get PostgrestTransformBuilder(){return KM},default:QM},[Oi]),{PostgrestClient:RY,PostgrestQueryBuilder:mMe,PostgrestFilterBuilder:gMe,PostgrestTransformBuilder:vMe,PostgrestBuilder:xMe,PostgrestError:DY}=QM||IY;class ZM{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const MY="2.87.3",FY=`realtime-js/${MY}`,eF="1.0.0",$Y="2.0.0",Tk=eF,KN=1e4,BY=1e3,UY=100;var Dd;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Dd||(Dd={}));var na;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(na||(na={}));var ko;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ko||(ko={}));var XN;(function(e){e.websocket="websocket"})(XN||(XN={}));var Md;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Md||(Md={}));class zY{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},s=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(t,r,n){var a,i;const s=t.topic,o=(a=t.ref)!==null&&a!==void 0?a:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const p=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+s.length+u.length+f.length,h=new ArrayBuffer(this.HEADER_LENGTH+p);let g=new DataView(h),m=0;g.setUint8(m++,this.KINDS.userBroadcastPush),g.setUint8(m++,c.length),g.setUint8(m++,o.length),g.setUint8(m++,s.length),g.setUint8(m++,u.length),g.setUint8(m++,f.length),g.setUint8(m++,r),Array.from(c,y=>g.setUint8(m++,y.charCodeAt(0))),Array.from(o,y=>g.setUint8(m++,y.charCodeAt(0))),Array.from(s,y=>g.setUint8(m++,y.charCodeAt(0))),Array.from(u,y=>g.setUint8(m++,y.charCodeAt(0))),Array.from(f,y=>g.setUint8(m++,y.charCodeAt(0)));var x=new Uint8Array(h.byteLength+n.byteLength);return x.set(new Uint8Array(h),0),x.set(new Uint8Array(n),h.byteLength),x.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,i,s,o,c]=n;return r({join_ref:a,ref:i,topic:s,event:o,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),s=r.getUint8(3),o=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+a));c=c+a;const d=n.decode(t.slice(c,c+i));c=c+i;const f=n.decode(t.slice(c,c+s));c=c+s;const p=t.slice(c,t.byteLength),h=o===this.JSON_ENCODING?JSON.parse(n.decode(p)):p,g={type:this.BROADCAST_EVENT,event:d,payload:h};return s>0&&(g.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class tF{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var rn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(rn||(rn={}));const Ck=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,s)=>(i[s]=qY(s,e,t,a),i),{}):{}},qY=(e,t,r,n)=>{const a=t.find(o=>o.name===e),i=a==null?void 0:a.type,s=r[e];return i&&!n.includes(i)?rF(i,s):YN(s)},rF=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return GY(t,r)}switch(e){case rn.bool:return HY(t);case rn.float4:case rn.float8:case rn.int2:case rn.int4:case rn.int8:case rn.numeric:case rn.oid:return WY(t);case rn.json:case rn.jsonb:return VY(t);case rn.timestamp:return KY(t);case rn.abstime:case rn.date:case rn.daterange:case rn.int4range:case rn.int8range:case rn.money:case rn.reltime:case rn.text:case rn.time:case rn.timestamptz:case rn.timetz:case rn.tsrange:case rn.tstzrange:return YN(t);default:return YN(t)}},YN=e=>e,HY=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},WY=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},VY=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},GY=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const s=e.slice(1,r);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(o=>rF(t,o))}return e},KY=e=>typeof e=="string"?e.replace(" ","T"):e,nF=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class f5{constructor(t,r,n={},a=KN){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var JN;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(JN||(JN={}));class Yh{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:s,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Yh.syncState(this.state,a,i,s),this.pendingDiffs.forEach(c=>{this.state=Yh.syncDiff(this.state,c,i,s)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:s,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Yh.syncDiff(this.state,a,i,s),o())}),this.onJoin((a,i,s)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:s})}),this.onLeave((a,i,s)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),s=this.transformState(r),o={},c={};return this.map(i,(u,d)=>{s[u]||(c[u]=d)}),this.map(s,(u,d)=>{const f=i[u];if(f){const p=d.map(x=>x.presence_ref),h=f.map(x=>x.presence_ref),g=d.filter(x=>h.indexOf(x.presence_ref)<0),m=f.filter(x=>p.indexOf(x.presence_ref)<0);g.length>0&&(o[u]=g),m.length>0&&(c[u]=m)}else o[u]=d}),this.syncDiff(i,{joins:o,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:s}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(o,c)=>{var u;const d=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(c),d.length>0){const f=t[o].map(h=>h.presence_ref),p=d.filter(h=>f.indexOf(h.presence_ref)<0);t[o].unshift(...p)}n(o,d,c)}),this.map(s,(o,c)=>{let u=t[o];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[o]=u,a(o,u,c),u.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var QN;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(QN||(QN={}));var Jh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Jh||(Jh={}));var sl;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(sl||(sl={}));const XY=na;class Wd{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=na.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new f5(this,ko.join,this.params,this.timeout),this.rejoinTimer=new tF(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=na.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=na.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=na.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=na.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=na.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ko.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Yh(this),this.broadcastEndpointURL=nF(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==na.closed){const{config:{broadcast:s,presence:o,private:c}}=this.params,u=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[Jh.PRESENCE]&&this.bindings[Jh.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},p={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(sl.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(sl.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:h})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),h===void 0){t==null||t(sl.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,x=(g=m==null?void 0:m.length)!==null&&g!==void 0?g:0,y=[];for(let v=0;v<x;v++){const b=m[v],{filter:{event:S,schema:_,table:A,filter:j}}=b,E=h&&h[v];if(E&&E.event===S&&Wd.isFilterValueEqual(E.schema,_)&&Wd.isFilterValueEqual(E.table,A)&&Wd.isFilterValueEqual(E.filter,j))y.push(Object.assign(Object.assign({},b),{id:E.id}));else{this.unsubscribe(),this.state=na.errored,t==null||t(sl.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(sl.SUBSCRIBED);return}}).receive("error",h=>{this.state=na.errored,t==null||t(sl.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(sl.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===na.joined&&t===Jh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const u=await o.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:s}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var s,o,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(s=this.params)===null||s===void 0?void 0:s.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=na.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ko.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new f5(this,ko.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=na.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),s=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),s}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new f5(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>UY){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const s=t.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=ko;if(n&&[o,c,u,d].indexOf(s)>=0&&n!==this._joinRef())return;let p=this._onMessage(s,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(h=>{var g,m,x;return((g=h.filter)===null||g===void 0?void 0:g.event)==="*"||((x=(m=h.filter)===null||m===void 0?void 0:m.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===s}).map(h=>h.callback(p,n)):(i=this.bindings[s])===null||i===void 0||i.filter(h=>{var g,m,x,y,v,b;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in h){const S=h.id,_=(g=h.filter)===null||g===void 0?void 0:g.event;return S&&((m=r.ids)===null||m===void 0?void 0:m.includes(S))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const S=(v=(y=h==null?void 0:h.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return S==="*"||S===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===s}).map(h=>{if(typeof p=="object"&&"ids"in p){const g=p.data,{schema:m,table:x,commit_timestamp:y,type:v,errors:b}=g;p=Object.assign(Object.assign({},{schema:m,table:x,commit_timestamp:y,eventType:v,new:{},old:{},errors:b}),this._getPayloadRecords(g))}h.callback(p,n)})}_isClosed(){return this.state===na.closed}_isJoined(){return this.state===na.joined}_isJoining(){return this.state===na.joining}_isLeaving(){return this.state===na.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Wd.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ko.close,{},t)}_onError(t){this._on(ko.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=na.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Ck(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Ck(t.columns,t.old_record)),r}}const h5=()=>{},mx={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},YY=[1e3,2e3,5e3,1e4],JY=1e4,QY=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class aF{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=KN,this.transport=null,this.heartbeatIntervalMs=mx.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=h5,this.ref=0,this.reconnectTimer=null,this.vsn=Tk,this.logger=h5,this.conn=null,this.sendBuffer=[],this.serializer=new zY,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${XN.websocket}`,this.httpEndpoint=nF(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ZM.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Dd.connecting:return Md.Connecting;case Dd.open:return Md.Open;case Dd.closing:return Md.Closing;default:return Md.Closed}}isConnected(){return this.connectionState()===Md.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new Wd(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,s=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(BY,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},mx.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:s}=r,o=s?`(${s})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${o}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,s)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Dd.open||this.conn.readyState===Dd.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ko.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([QY],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:FY};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(ko.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new tF(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},mx.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,s,o,c,u,d,f,p,h;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:KN,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:mx.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:h5,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Tk,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:g=>YY[g-1]||JY,this.vsn){case eF:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(g,m)=>m(JSON.stringify(g)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(g,m)=>m(JSON.parse(g));break;case $Y:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class K2 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Nn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class ZY extends K2{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ZN extends K2{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const o3=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),eJ=()=>Response,ej=e=>{if(Array.isArray(e))return e.map(r=>ej(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=ej(n)}),t},tJ=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},rJ=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),p5=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},nJ=(e,t,r)=>vt(void 0,void 0,void 0,function*(){const n=yield eJ();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const i=e.status||500,s=(a==null?void 0:a.statusCode)||i+"";t(new ZY(p5(a),i,s))}).catch(a=>{t(new ZN(p5(a),a))}):t(new ZN(p5(e),e))}),aJ=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(tJ(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Fv(e,t,r,n,a,i){return vt(this,void 0,void 0,function*(){return new Promise((s,o)=>{e(r,aJ(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>nJ(c,o,n))})})}function Pg(e,t,r,n){return vt(this,void 0,void 0,function*(){return Fv(e,"GET",t,r,n)})}function Ao(e,t,r,n,a){return vt(this,void 0,void 0,function*(){return Fv(e,"POST",t,n,a,r)})}function tj(e,t,r,n,a){return vt(this,void 0,void 0,function*(){return Fv(e,"PUT",t,n,a,r)})}function iJ(e,t,r,n){return vt(this,void 0,void 0,function*(){return Fv(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function l3(e,t,r,n,a){return vt(this,void 0,void 0,function*(){return Fv(e,"DELETE",t,n,a,r)})}class sJ{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return vt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nn(t))return{data:null,error:t};throw t}})}}var iF;class oJ{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[iF]="BlobDownloadBuilder",this.promise=null}asStream(){return new sJ(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return vt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nn(t))return{data:null,error:t};throw t}})}}iF=Symbol.toStringTag;const lJ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},kk={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cJ{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=o3(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return vt(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},kk),a);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",s.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=n,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!s.duplex&&(s.duplex="half")),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(t=="PUT"?tj:Ao)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:o},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Nn(i))return{data:null,error:i};throw i}})}upload(t,r,n){return vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return vt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),s=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${s}`);o.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:kk.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield tj(this.fetch,o.toString(),c,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Nn(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return vt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield Ao(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),s=new URL(this.url+i.url),o=s.searchParams.get("token");if(!o)throw new K2("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}update(t,r,n){return vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return vt(this,void 0,void 0,function*(){try{return{data:yield Ao(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nn(a))return{data:null,error:a};throw a}})}copy(t,r,n){return vt(this,void 0,void 0,function*(){try{return{data:{path:(yield Ao(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nn(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return vt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Ao(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nn(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return vt(this,void 0,void 0,function*(){try{const a=yield Ao(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nn(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),s=i?`?${i}`:"",o=this._getFinalPath(t),c=()=>Pg(this.fetch,`${this.url}/${a}/${o}${s}`,{headers:this.headers,noResolveJson:!0});return new oJ(c,this.shouldThrowOnError)}info(t){return vt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Pg(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ej(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}exists(t){return vt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield iJ(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n)&&n instanceof ZN){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(t){return vt(this,void 0,void 0,function*(){try{return{data:yield l3(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}list(t,r,n){return vt(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},lJ),r),{prefix:t||""});return{data:yield Ao(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nn(a))return{data:null,error:a};throw a}})}listV2(t,r){return vt(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Ao(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const sF="2.87.3",oF={"X-Client-Info":`storage-js/${sF}`};class uJ{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},oF),r),this.fetch=o3(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return vt(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield Pg(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}getBucket(t){return vt(this,void 0,void 0,function*(){try{return{data:yield Pg(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}createBucket(t){return vt(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Ao(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nn(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return vt(this,void 0,void 0,function*(){try{return{data:yield tj(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}emptyBucket(t){return vt(this,void 0,void 0,function*(){try{return{data:yield Ao(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return vt(this,void 0,void 0,function*(){try{return{data:yield l3(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var Lg=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function dJ(e,t,r){const n=new URL(t,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&n.searchParams.set(a,i);return n.toString()}async function fJ(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function hJ(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:a,body:i,headers:s}){const o=dJ(e.baseUrl,n,a),c=await fJ(e.auth),u=await t(o,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...s},body:i?JSON.stringify(i):void 0}),d=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),p=f&&d?JSON.parse(d):d;if(!u.ok){const h=f?p:void 0,g=h==null?void 0:h.error;throw new Lg((g==null?void 0:g.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:g==null?void 0:g.type,icebergCode:g==null?void 0:g.code,details:h})}return{status:u.status,headers:u.headers,data:p}}}}function gx(e){return e.join("")}var pJ=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:gx(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${gx(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${gx(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${gx(e.namespace)}`}),!0}catch(t){if(t instanceof Lg&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Lg&&r.status===409)return;throw r}}};function sh(e){return e.join("")}var mJ=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${sh(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${sh(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${sh(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${sh(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${sh(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${sh(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Lg&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Lg&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},gJ=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=hJ({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new pJ(this.client,t),this.tableOps=new mJ(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class vJ{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},oF),r),this.fetch=o3(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return vt(this,void 0,void 0,function*(){try{return{data:yield Ao(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}listBuckets(t){return vt(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Pg(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return vt(this,void 0,void 0,function*(){try{return{data:yield l3(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}from(t){if(!rJ(t))throw new K2("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new gJ({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>vt(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(i,s){const o=i[s];return typeof o!="function"?o:(...c)=>vt(this,void 0,void 0,function*(){try{return{data:yield o.apply(i,c),error:null}}catch(u){if(n)throw u;return{data:null,error:u}}})}})}}const c3={"X-Client-Info":`storage-js/${sF}`,"Content-Type":"application/json"};class lF extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function js(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class m5 extends lF{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class xJ extends lF{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var Ok;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Ok||(Ok={}));const u3=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),yJ=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Pk=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),bJ=(e,t,r)=>vt(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e.status||500,i=e;if(typeof i.json=="function")i.json().then(s=>{const o=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||a+"";t(new m5(Pk(s),a,o))}).catch(()=>{const s=a+"",o=i.statusText||`HTTP ${a} error`;t(new m5(o,a,s))});else{const s=a+"",o=i.statusText||`HTTP ${a} error`;t(new m5(o,a,s))}}else t(new xJ(Pk(e),e))}),wJ=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(yJ(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function _J(e,t,r,n,a,i){return vt(this,void 0,void 0,function*(){return new Promise((s,o)=>{e(r,wJ(t,n,a,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>s(c)).catch(c=>bJ(c,o,n))})})}function As(e,t,r,n,a){return vt(this,void 0,void 0,function*(){return _J(e,"POST",t,n,a,r)})}class SJ{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},c3),r),this.fetch=u3(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return vt(this,void 0,void 0,function*(){try{return{data:(yield As(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(js(r))return{data:null,error:r};throw r}})}getIndex(t,r){return vt(this,void 0,void 0,function*(){try{return{data:yield As(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(js(n))return{data:null,error:n};throw n}})}listIndexes(t){return vt(this,void 0,void 0,function*(){try{return{data:yield As(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(js(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return vt(this,void 0,void 0,function*(){try{return{data:(yield As(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(js(n))return{data:null,error:n};throw n}})}}class NJ{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},c3),r),this.fetch=u3(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return vt(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield As(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(js(r))return{data:null,error:r};throw r}})}getVectors(t){return vt(this,void 0,void 0,function*(){try{return{data:yield As(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(js(r))return{data:null,error:r};throw r}})}listVectors(t){return vt(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield As(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(js(r))return{data:null,error:r};throw r}})}queryVectors(t){return vt(this,void 0,void 0,function*(){try{return{data:yield As(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(js(r))return{data:null,error:r};throw r}})}deleteVectors(t){return vt(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield As(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(js(r))return{data:null,error:r};throw r}})}}class jJ{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},c3),r),this.fetch=u3(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return vt(this,void 0,void 0,function*(){try{return{data:(yield As(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(js(r))return{data:null,error:r};throw r}})}getBucket(t){return vt(this,void 0,void 0,function*(){try{return{data:yield As(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(js(r))return{data:null,error:r};throw r}})}listBuckets(){return vt(this,arguments,void 0,function*(t={}){try{return{data:yield As(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(js(r))return{data:null,error:r};throw r}})}deleteBucket(t){return vt(this,void 0,void 0,function*(){try{return{data:(yield As(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(js(r))return{data:null,error:r};throw r}})}}class AJ extends jJ{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new EJ(this.url,this.headers,t,this.fetch)}createBucket(t){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return vt(this,void 0,void 0,function*(){return r.createBucket.call(this,t)})}getBucket(t){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return vt(this,void 0,void 0,function*(){return r.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return vt(this,arguments,void 0,function*(r={}){return t.listBuckets.call(this,r)})}deleteBucket(t){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return vt(this,void 0,void 0,function*(){return r.deleteBucket.call(this,t)})}}class EJ extends SJ{constructor(t,r,n,a){super(t,r,a),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return vt(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return vt(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return vt(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return vt(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new TJ(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class TJ extends NJ{constructor(t,r,n,a,i){super(t,r,i),this.vectorBucketName=n,this.indexName=a}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return vt(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return vt(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return vt(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return vt(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return vt(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class CJ extends uJ{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new cJ(this.url,this.headers,t,this.fetch)}get vectors(){return new AJ(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new vJ(this.url+"/iceberg",this.headers,this.fetch)}}const kJ="2.87.3";let Dm="";typeof Deno<"u"?Dm="deno":typeof document<"u"?Dm="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Dm="react-native":Dm="node";const OJ={"X-Client-Info":`supabase-js-${Dm}/${kJ}`},PJ={headers:OJ},LJ={schema:"public"},IJ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},RJ={},DJ=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),MJ=()=>Headers,FJ=(e,t,r)=>{const n=DJ(r),a=MJ();return async(i,s)=>{var o;const c=(o=await t())!==null&&o!==void 0?o:e;let u=new a(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},s),{headers:u}))}};function $J(e){return e.endsWith("/")?e:e+"/"}function BJ(e,t){var r,n;const{db:a,auth:i,realtime:s,global:o}=e,{db:c,auth:u,realtime:d,global:f}=t,p={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),s),storage:{},global:Object.assign(Object.assign(Object.assign({},f),o),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function UJ(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL($J(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const cF="2.87.3",yh=30*1e3,rj=3,g5=rj*yh,zJ="http://localhost:9999",qJ="supabase.auth.token",HJ={"X-Client-Info":`gotrue-js/${cF}`},nj="X-Supabase-Api-Version",uF={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},WJ=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,VJ=10*60*1e3;class R0 extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Et(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class dF extends R0{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function fF(e){return Et(e)&&e.name==="AuthApiError"}class du extends R0{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class wl extends R0{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Wi extends wl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function hF(e){return Et(e)&&e.name==="AuthSessionMissingError"}class Cd extends wl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mm extends wl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Fm extends wl{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function pF(e){return Et(e)&&e.name==="AuthImplicitGrantRedirectError"}class aj extends wl{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class mF extends wl{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}function GJ(e){return Et(e)&&e.name==="AuthPKCECodeVerifierMissingError"}class Jy extends wl{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function ly(e){return Et(e)&&e.name==="AuthRetryableFetchError"}class ij extends wl{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}function KJ(e){return Et(e)&&e.name==="AuthWeakPasswordError"}class Qy extends wl{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Zy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lk=` 	
\r=`.split(""),XJ=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Lk.length;t+=1)e[Lk[t].charCodeAt(0)]=-2;for(let t=0;t<Zy.length;t+=1)e[Zy[t].charCodeAt(0)]=t;return e})();function Ik(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Zy[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Zy[n]),t.queuedBits-=6}}function gF(e,t,r){const n=XJ[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Rk(e){const t=[],r=s=>{t.push(String.fromCodePoint(s))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=s=>{QJ(s,n,r)};for(let s=0;s<e.length;s+=1)gF(e.charCodeAt(s),a,i);return t.join("")}function YJ(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function JJ(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}YJ(n,t)}}function QJ(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Qh(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)gF(e.charCodeAt(a),r,n);return new Uint8Array(t)}function ZJ(e){const t=[];return JJ(e,r=>t.push(r)),new Uint8Array(t)}function Vd(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>Ik(a,r,n)),Ik(null,r,n),t.join("")}function eQ(e){return Math.round(Date.now()/1e3)+e}function tQ(){return Symbol("auth-callback")}const Va=()=>typeof window<"u"&&typeof document<"u",bd={tested:!1,writable:!1},vF=()=>{if(!Va())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bd.tested)return bd.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),bd.tested=!0,bd.writable=!0}catch{bd.tested=!0,bd.writable=!1}return bd.writable};function rQ(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const xF=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),nQ=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",bh=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},wd=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Wa=async(e,t)=>{await e.removeItem(t)};class X2{constructor(){this.promise=new X2.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}X2.promiseConstructor=Promise;function v5(e){const t=e.split(".");if(t.length!==3)throw new Qy("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!WJ.test(t[n]))throw new Qy("JWT not in base64url format");return{header:JSON.parse(Rk(t[0])),payload:JSON.parse(Rk(t[1])),signature:Qh(t[2]),raw:{header:t[0],payload:t[1]}}}async function aQ(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function iQ(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const s=await e(i);if(!t(i,null,s)){n(s);return}}catch(s){if(!t(i,s)){a(s);return}}})()})}function sQ(e){return("0"+e.toString(16)).substr(-2)}function oQ(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,sQ).join("")}async function lQ(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function cQ(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await lQ(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function oh(e,t,r=!1){const n=oQ();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await bh(e,`${t}-code-verifier`,a);const i=await cQ(n);return[i,n===i?"plain":"s256"]}const uQ=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function dQ(e){const t=e.headers.get(nj);if(!t||!t.match(uQ))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function fQ(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function hQ(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const pQ=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function lh(e){if(!pQ.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function x5(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function mQ(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function Dk(e){return JSON.parse(JSON.stringify(e))}const kd=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),gQ=[502,503,504];async function Mk(e){var t;if(!nQ(e))throw new Jy(kd(e),0);if(gQ.includes(e.status))throw new Jy(kd(e),e.status);let r;try{r=await e.json()}catch(i){throw new du(kd(i),i)}let n;const a=dQ(e);if(a&&a.getTime()>=uF["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new ij(kd(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Wi}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0))throw new ij(kd(r),e.status,r.weak_password.reasons);throw new dF(kd(r),e.status||500,n)}const vQ=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Ut(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[nj]||(i[nj]=uF["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const s=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(s.redirect_to=n.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await xQ(e,t,r+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function xQ(e,t,r,n,a,i){const s=vQ(t,n,a,i);let o;try{o=await e(r,Object.assign({},s))}catch(c){throw console.error(c),new Jy(kd(c),0)}if(o.ok||await Mk(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await Mk(c)}}function No(e){var t;let r=null;wQ(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=eQ(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Fk(e){const t=No(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function fu(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function yQ(e){return{data:e,error:null}}function bQ(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,s=gp(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},s);return{data:{properties:o,user:c},error:null}}function $k(e){return e}function wQ(e){return e.access_token&&e.refresh_token&&e.expires_in}const cy=["global","local","others"];class d3{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=xF(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=cy[0]){if(cy.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${cy.join(", ")}`);try{return await Ut(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Et(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Ut(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:fu})}catch(n){if(Et(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=gp(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Ut(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:bQ,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Et(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Ut(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:fu})}catch(r){if(Et(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,s,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Ut(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:$k});if(d.error)throw d.error;const f=await d.json(),p=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);u[`${x}Page`]=m}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Et(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){lh(t);try{return await Ut(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:fu})}catch(r){if(Et(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){lh(t);try{return await Ut(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:fu})}catch(n){if(Et(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){lh(t);try{return await Ut(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:fu})}catch(n){if(Et(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){lh(t.userId);try{const{data:r,error:n}=await Ut(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(Et(r))return{data:null,error:r};throw r}}async _deleteFactor(t){lh(t.userId),lh(t.id);try{return{data:await Ut(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Et(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,s,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Ut(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:$k});if(d.error)throw d.error;const f=await d.json(),p=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);u[`${x}Page`]=m}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Et(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Ut(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Et(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Ut(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Et(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Ut(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Et(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Ut(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Et(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Ut(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Et(r))return{data:null,error:r};throw r}}}function Bk(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Od={debug:!!(globalThis&&vF()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class f3 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class yF extends f3{}class _Q extends f3{}async function bF(e,t,r){Od.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Od.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Od.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Od.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Od.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new yF(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Od.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const Uk={};async function SQ(e,t,r){var n;const a=(n=Uk[e])!==null&&n!==void 0?n:Promise.resolve(),i=Promise.race([a.catch(()=>null),t>=0?new Promise((s,o)=>{setTimeout(()=>{o(new _Q(`Acquiring process lock with name "${e}" timed out`))},t)}):null].filter(s=>s)).catch(s=>{if(s&&s.isAcquireTimeout)throw s;return null}).then(async()=>await r());return Uk[e]=i.catch(async s=>{if(s&&s.isAcquireTimeout)return await a,null;throw s}),await i}function NQ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function wF(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function jQ(e){return parseInt(e,16)}function AQ(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function EQ(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:s,notBefore:o,requestId:c,resources:u,scheme:d,uri:f,version:p}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const h=wF(e.address),g=d?`${d}://${n}`:n,m=e.statement?`${e.statement}
`:"",x=`${g} wants you to sign in with your Ethereum account:
${h}

${m}`;let y=`URI: ${f}
Version: ${p}
Chain ID: ${r}${s?`
Nonce: ${s}`:""}
Issued At: ${i.toISOString()}`;if(a&&(y+=`
Expiration Time: ${a.toISOString()}`),o&&(y+=`
Not Before: ${o.toISOString()}`),c&&(y+=`
Request ID: ${c}`),u){let v=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);v+=`
- ${b}`}y+=v}return`${x}
${y}`}class sa extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class eb extends sa{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function TQ({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new sa({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new sa({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new sa({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new sa({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new sa({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new sa({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new sa({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new sa({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(_F(s)){if(i.rp.id!==s)return new sa({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new sa({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new sa({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new sa({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new sa({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function CQ({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new sa({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new sa({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(_F(n)){if(r.rpId!==n)return new sa({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new sa({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new sa({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new sa({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class kQ{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const OQ=new kQ;function PQ(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=gp(e,["challenge","user","excludeCredentials"]),i=Qh(t).buffer,s=Object.assign(Object.assign({},r),{id:Qh(r.id).buffer}),o=Object.assign(Object.assign({},a),{challenge:i,user:s});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];o.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Qh(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function LQ(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=gp(e,["challenge","allowCredentials"]),a=Qh(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let s=0;s<r.length;s++){const o=r[s];i.allowCredentials[s]=Object.assign(Object.assign({},o),{id:Qh(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return i}function IQ(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Vd(new Uint8Array(e.response.attestationObject)),clientDataJSON:Vd(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function RQ(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Vd(new Uint8Array(a.authenticatorData)),clientDataJSON:Vd(new Uint8Array(a.clientDataJSON)),signature:Vd(new Uint8Array(a.signature)),userHandle:a.userHandle?Vd(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function _F(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function zk(){var e,t;return!!(Va()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function DQ(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new eb("Browser returned unexpected credential type",t)}:{data:null,error:new eb("Empty credential response",t)}}catch(t){return{data:null,error:TQ({error:t,options:e})}}}async function MQ(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new eb("Browser returned unexpected credential type",t)}:{data:null,error:new eb("Empty credential response",t)}}catch(t){return{data:null,error:CQ({error:t,options:e})}}}const FQ={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},$Q={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function tb(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const s=a[i];if(s!==void 0)if(Array.isArray(s))n[i]=s;else if(r(s))n[i]=s;else if(t(s)){const o=n[i];t(o)?n[i]=tb(o,s):n[i]=tb(s)}else n[i]=s}return n}function BQ(e,t){return tb(FQ,e,t||{})}function UQ(e,t){return tb($Q,e,t||{})}class zQ{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){try{const{data:s,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!s)return{data:null,error:o};const c=a??OQ.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=BQ(s.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:f}=await DQ({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=UQ(s.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:f}=await MQ(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(s){return Et(s)?{data:null,error:s}:{data:null,error:new du("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new R0("rpId is required for WebAuthn authentication")};try{if(!zk())return{data:null,error:new du("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!s)return{data:null,error:o};const{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(s){return Et(s)?{data:null,error:s}:{data:null,error:new du("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new R0("rpId is required for WebAuthn registration")};try{if(!zk())return{data:null,error:new du("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:o};const{data:c,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(s){return Et(s)?{data:null,error:s}:{data:null,error:new du("Unexpected error in register",s)}}}}NQ();const qQ={url:zJ,storageKey:qJ,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:HJ,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function qk(e,t,r){return await r()}const ch={};class D0{get jwks(){var t,r;return(r=(t=ch[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ch[this.storageKey]=Object.assign(Object.assign({},ch[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ch[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ch[this.storageKey]=Object.assign(Object.assign({},ch[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},qQ),t);if(this.storageKey=i.storageKey,this.instanceID=(r=D0.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,D0.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Va()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new d3({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=xF(i.fetch),this.lock=i.lock||qk,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Va()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=bF:this.lock=qk,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new zQ(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:vF()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Bk(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Bk(this.memoryStorage)),Va()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${cF}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Va()&&(r=rQ(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Va()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),pF(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:s,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),await this._saveSession(s),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Et(r)?this._returnResult({error:r}):this._returnResult({error:new du("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await Ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:No}),{data:s,error:o}=i;if(o||!s)return this._returnResult({data:{user:null,session:null},error:o});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(Et(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:d,password:f,options:p}=t;let h=null,g=null;this.flowType==="pkce"&&([h,g]=await oh(this.storage,this.storageKey)),i=await Ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:h,code_challenge_method:g},xform:No})}else if("phone"in t){const{phone:d,password:f,options:p}=t;i=await Ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(a=p==null?void 0:p.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:No})}else throw new Mm("You must provide either an email or phone number and a password");const{data:s,error:o}=i;if(o||!s)return await Wa(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await Wa(this.storage,`${this.storageKey}-code-verifier`),Et(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:s,options:o}=t;r=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Fk})}else if("phone"in t){const{phone:i,password:s,options:o}=t;r=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Fk})}else throw new Mm("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new Cd;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(Et(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,s,o,c,u,d,f,p;let h,g;if("message"in t)h=t.message,g=t.signature;else{const{chain:m,wallet:x,statement:y,options:v}=t;let b;if(Va())if(typeof x=="object")b=x;else{const T=window;if("ethereum"in T&&typeof T.ethereum=="object"&&"request"in T.ethereum&&typeof T.ethereum.request=="function")b=T.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=x}const S=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href),_=await b.request({method:"eth_requestAccounts"}).then(T=>T).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const A=wF(_[0]);let j=(n=v==null?void 0:v.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!j){const T=await b.request({method:"eth_chainId"});j=jQ(T)}const E={domain:S.host,address:A,statement:y,uri:S.href,version:"1",chainId:j,nonce:(a=v==null?void 0:v.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(s=(i=v==null?void 0:v.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(o=v==null?void 0:v.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=v==null?void 0:v.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=v==null?void 0:v.signInWithEthereum)===null||d===void 0?void 0:d.resources};h=EQ(E),g=await b.request({method:"personal_sign",params:[AQ(h),A]})}try{const{data:m,error:x}=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:g},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:No});if(x)throw x;if(!m||!m.session||!m.user){const y=new Cd;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:x})}catch(m){if(Et(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithSolana(t){var r,n,a,i,s,o,c,u,d,f,p,h;let g,m;if("message"in t)g=t.message,m=t.signature;else{const{chain:x,wallet:y,statement:v,options:b}=t;let S;if(Va())if(typeof y=="object")S=y;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))S=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=y}const _=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in S&&S.signIn){const A=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),v?{statement:v}:null));let j;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")j=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)j=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)g=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),m=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${_.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(a=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const A=await S.signMessage(new TextEncoder().encode(g),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=A}}try{const{data:x,error:y}=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Vd(m)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:No});if(y)throw y;if(!x||!x.session||!x.user){const v=new Cd;return this._returnResult({data:{user:null,session:null},error:v})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:y})}catch(x){if(Et(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(t){const r=await wd(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new mF;const{data:i,error:s}=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:No});if(await Wa(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!i||!i.session||!i.user){const o=new Cd;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:s})}catch(i){if(await Wa(this.storage,`${this.storageKey}-code-verifier`),Et(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:s}=t,o=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:No}),{data:c,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Cd;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(Et(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,i,s;try{if("email"in t){const{email:o,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await oh(this.storage,this.storageKey));const{error:f}=await Ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:o,options:c}=t,{data:u,error:d}=await Ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(s=c==null?void 0:c.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Mm("You must provide either an email or phone number.")}catch(o){if(await Wa(this.storage,`${this.storageKey}-code-verifier`),Et(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:s,error:o}=await Ut(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:No});if(o)throw o;if(!s)throw new Error("An error occurred on token verification.");const c=s.session,u=s.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(Et(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,i,s;try{let o=null,c=null;this.flowType==="pkce"&&([o,c]=await oh(this.storage,this.storageKey));const u=await Ut(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:yQ});return!((i=u.data)===null||i===void 0)&&i.url&&Va()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(o){if(await Wa(this.storage,`${this.storageKey}-code-verifier`),Et(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Wi;const{error:a}=await Ut(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(Et(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:s}=await Ut(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:s,error:o}=await Ut(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:o})}throw new Mm("You must provide either an email or phone number and a type")}catch(r){if(Et(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await wd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<g5:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const s=await wd(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=x5()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};t.user=mQ(t.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:fu}):await this._useSession(async r=>{var n,a,i;const{data:s,error:o}=r;if(o)throw o;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Wi}:await Ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:fu})})}catch(r){if(Et(r))return hF(r)&&(await this._removeSession(),await Wa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Wi;const s=a.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await oh(this.storage,this.storageKey));const{data:u,error:d}=await Ut(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:s.access_token,xform:fu});if(d)throw d;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(n){if(await Wa(this.storage,`${this.storageKey}-code-verifier`),Et(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Wi;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:s}=v5(t.access_token);if(s.exp&&(n=s.exp,a=n<=r),a){const{data:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(Et(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:s,error:o}=r;if(o)throw o;t=(n=s.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Wi;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Et(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Va())throw new Fm("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Fm(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new aj("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fm("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new aj("No code detected.");const{data:v,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:s,expires_in:o,expires_at:c,token_type:u}=t;if(!i||!o||!s||!u)throw new Fm("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let p=d+f;c&&(p=parseInt(c));const h=p-d;h*1e3<=yh&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${f}s`);const g=p-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,p,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,p,d);const{data:m,error:x}=await this._getUser(i);if(x)throw x;const y={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:p,refresh_token:s,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(n){if(Et(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await wd(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const s=(n=a.session)===null||n===void 0?void 0:n.access_token;if(s){const{error:o}=await this.admin.signOut(s,t);if(o&&!(fF(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await Wa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=tQ(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:s}=r;if(s)throw s;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await oh(this.storage,this.storageKey,!0));try{return await Ut(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Wa(this.storage,`${this.storageKey}-code-verifier`),Et(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Et(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var s,o,c,u,d;const{data:f,error:p}=i;if(p)throw p;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ut(this.fetch,"GET",h,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return Va()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(Et(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:s,provider:o,token:c,access_token:u,nonce:d}=t,f=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:No}),{data:p,error:h}=f;return h?this._returnResult({data:{user:null,session:null},error:h}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new Cd}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:h}))}catch(a){if(await Wa(this.storage,`${this.storageKey}-code-verifier`),Et(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)throw s;return await Ut(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Et(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await iQ(async a=>(a>0&&await aQ(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Ut(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:No})),(a,i)=>{const s=200*Math.pow(2,a);return i&&ly(i)&&Date.now()+s-n<yh})}catch(n){if(this._debug(r,"error",n),Et(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Va()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await wd(this.storage,this.storageKey);if(a&&this.userStorage){let s=await wd(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:a.user},await bh(this.userStorage,this.storageKey+"-user",s)),a.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:x5()}else if(a&&!a.user&&!a.user){const s=await wd(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(a.user=s.user,await Wa(this.storage,this.storageKey+"-user"),await bh(this.storage,this.storageKey,a)):a.user=x5()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<g5;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${g5}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:s}=await this._callRefreshToken(a.refresh_token);s&&(console.error(s),ly(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:o}=await this._getUser(a.access_token);!o&&(s!=null&&s.user)?(a.user=s.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Wi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new X2;const{data:i,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!i.session)throw new Wi;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={data:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(a,"error",i),Et(i)){const s={data:null,error:i};return ly(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],s=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(s),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Wa(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await bh(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=Dk(a);await bh(this.storage,this.storageKey,i)}else{const a=Dk(r);await bh(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Wa(this.storage,this.storageKey),await Wa(this.storage,this.storageKey+"-code-verifier"),await Wa(this.storage,this.storageKey+"-user"),this.userStorage&&await Wa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Va()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),yh);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/yh);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${yh}ms, refresh threshold is ${rj} ticks`),a<=rj&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof f3)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Va()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,s]=await oh(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(s)}`});a.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await Ut(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Et(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await Ut(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(Et(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?IQ(t.webauthn.credential_response):RQ(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:c}=await Ut(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(r){if(Et(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const s=await Ut(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(s.error)return s;const{data:o}=s;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:PQ(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:LQ(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Et(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=v5(n.access_token);let s=null;i.aal&&(s=i.aal);let o=s;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const u=i.amr||[];return{data:{currentLevel:s,nextLevel:o,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Ut(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Wi})})}catch(r){if(Et(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Wi});const s=await Ut(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&Va()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(Et(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Wi});const s=await Ut(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&Va()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(Et(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Ut(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Wi})})}catch(t){if(Et(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(await Ut(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Wi})})}catch(r){if(Et(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+VJ>a)return n;const{data:i,error:s}=await Ut(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:h,error:g}=await this.getSession();if(g||!h.session)return this._returnResult({data:null,error:g});n=h.session.access_token}const{header:a,payload:i,signature:s,raw:{header:o,payload:c}}=v5(n);r!=null&&r.allowExpired||fQ(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:h}=await this.getUser(n);if(h)throw h;return{data:{claims:i,header:a,signature:s},error:null}}const d=hQ(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,s,ZJ(`${o}.${c}`)))throw new Qy("Invalid JWT signature");return{data:{claims:i,header:a,signature:s},error:null}}catch(n){if(Et(n))return this._returnResult({data:null,error:n});throw n}}}D0.nextInstanceID={};const HQ=d3,SF=D0;class WQ extends SF{constructor(t){super(t)}}class NF{constructor(t,r,n){var a,i,s;this.supabaseUrl=t,this.supabaseKey=r;const o=UJ(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:LJ,realtime:RJ,auth:Object.assign(Object.assign({},IJ),{storageKey:c}),global:PJ},d=BJ(n??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=d.auth)!==null&&s!==void 0?s:{},this.headers,d.global.fetch),this.fetch=FJ(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new RY(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new CJ(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new PY(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:s,flowType:o,lock:c,debug:u,throwOnError:d},f,p){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new WQ({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),f),storageKey:s,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:o,lock:c,debug:u,throwOnError:d,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new aF(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const VQ=(e,t,r)=>new NF(e,t,r);function GQ(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}GQ()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const KQ=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:HQ,AuthApiError:dF,AuthClient:SF,AuthError:R0,AuthImplicitGrantRedirectError:Fm,AuthInvalidCredentialsError:Mm,AuthInvalidJwtError:Qy,AuthInvalidTokenResponseError:Cd,AuthPKCECodeVerifierMissingError:mF,AuthPKCEGrantCodeExchangeError:aj,AuthRetryableFetchError:Jy,AuthSessionMissingError:Wi,AuthUnknownError:du,AuthWeakPasswordError:ij,CustomAuthError:wl,get FunctionRegion(){return Yy},FunctionsError:G2,FunctionsFetchError:RM,FunctionsHttpError:GN,FunctionsRelayError:VN,GoTrueAdminApi:d3,GoTrueClient:D0,NavigatorLockAcquireTimeoutError:yF,PostgrestError:DY,REALTIME_CHANNEL_STATES:XY,get REALTIME_LISTEN_TYPES(){return Jh},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return QN},get REALTIME_PRESENCE_LISTEN_EVENTS(){return JN},get REALTIME_SUBSCRIBE_STATES(){return sl},RealtimeChannel:Wd,RealtimeClient:aF,RealtimePresence:Yh,SIGN_OUT_SCOPES:cy,SupabaseClient:NF,WebSocketFactory:ZM,createClient:VQ,isAuthApiError:fF,isAuthError:Et,isAuthImplicitGrantRedirectError:pF,isAuthPKCECodeVerifierMissingError:GJ,isAuthRetryableFetchError:ly,isAuthSessionMissingError:hF,isAuthWeakPasswordError:KJ,lockInternals:Od,navigatorLock:bF,processLock:SQ},Symbol.toStringTag,{value:"Module"})),{createClient:jF}=KQ,XQ="https://kzslhhctjfxsdvcrqvvs.supabase.co",AF="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt6c2xoaGN0amZ4c2R2Y3JxdnZzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4NDAzODQsImV4cCI6MjA4MTQxNjM4NH0.NQ1maFD5Nl8y-5TxJFjeSdhOSzOi-6Hd8o4VcrmLUKo",Ee=jF(XQ,AF,{auth:{persistSession:!1,autoRefreshToken:!1},realtime:{params:{eventsPerSecond:10}}}),Zt=()=>!!AF;async function YQ(e=20,t){if(!Zt())return[];let r=Ee.from("asis_command_logs").select("*").order("created_at",{ascending:!1}).limit(e);t&&(r=r.eq("executed_by",t));const{data:n,error:a}=await r;return a?(console.error("fetchCommandLogs error:",a.message),[]):n||[]}async function JQ(e){if(!Zt())return null;const{data:t,error:r}=await Ee.from("asis_command_logs").insert(e).select().single();return r?(console.error("createCommandLog error:",r.message),null):t}async function QQ(e){if(!Zt()||!e)return null;const t=[e,e.replace(/-/g,""),e.replace(/\./g,"").replace(/-/g,"")];for(const r of t){const{data:n,error:a}=await Ee.from("staff").select("id, rut, nombre, cargo, terminal_code, horario, status").or(`rut.eq.${r},rut.ilike.%${r}%`).limit(1).single();if(n&&!a)return n}return null}async function ZQ(e,t,r,n,a){if(!Zt())return{success:!1,error:"Supabase no configurado"};const{error:i}=await Ee.from("attendance_vacations").insert({staff_id:e,start_date:t,end_date:r,note:n,created_by:a});return i?{success:!1,error:i.message}:{success:!0}}async function eZ(e,t,r,n,a){if(!Zt())return{success:!1,error:"Supabase no configurado"};const{error:i}=await Ee.from("attendance_licenses").insert({staff_id:e,start_date:t,end_date:r,note:n,created_by:a});return i?{success:!1,error:i.message}:{success:!0}}async function tZ(e,t,r,n,a,i){if(!Zt())return{success:!1,error:"Supabase no configurado"};const{error:s}=await Ee.from("attendance_permissions").insert({staff_id:e,start_date:t,end_date:r,permission_type:n,note:a,created_by:i});return s?{success:!1,error:s.message}:{success:!0}}async function Hk(e,t,r,n,a,i,s){if(!Zt())return{success:!1,error:"Supabase no configurado"};const o=n==="LLEGADA"?"ENTRADA":"SALIDA",{error:c}=await Ee.from("attendance_autorizaciones").insert({rut:t.rut,nombre:t.nombre,cargo:t.cargo,terminal_code:t.terminal_code,turno:t.horario.split(" ")[0]||"DIA",horario:t.horario,authorization_date:r,entry_or_exit:o,motivo:i,created_by_supervisor:s,auth_status:"AUTORIZADO",authorized_by:s,authorized_at:new Date().toISOString()});return c?{success:!1,error:c.message}:{success:!0}}async function rZ(e,t,r,n,a){if(!Zt())return{success:!1,error:"Supabase no configurado"};const{error:i}=await Ee.from("attendance_cambios_dia").insert({rut:e.rut,nombre:e.nombre,terminal_code:e.terminal_code,date:new Date().toISOString().split("T")[0],day_off_date:t,day_on_date:r,document_path:`Motivo: ${n}`,created_by_supervisor:a,auth_status:"PENDIENTE"});return i?{success:!1,error:i.message}:{success:!0}}async function nZ(e,t,r,n){if(!Zt())return{success:!1,error:"Supabase no configurado"};const{error:a}=await Ee.from("attendance_no_marcaciones").insert({rut:e.rut,nombre:e.nombre,terminal_code:e.terminal_code,date:t,observations:r,incident_state:"INFORMADA",created_by_supervisor:n,auth_status:"PENDIENTE"});return a?{success:!1,error:a.message}:{success:!0}}async function aZ(e,t,r,n){if(!Zt())return{success:!1,error:"Supabase no configurado"};const{error:a}=await Ee.from("attendance_sin_credenciales").insert({rut:e.rut,nombre:e.nombre,terminal_code:e.terminal_code,date:t,observacion:r,cargo:e.cargo,created_by_supervisor:n,auth_status:"PENDIENTE"});return a?{success:!1,error:a.message}:{success:!0}}const uy={VACACIONES:"Vacaciones",LICENCIA:"Licencia Mdica",PERMISO:"Permiso",AUTORIZACION_LLEGADA:"Autorizacin Llegada Tarda",AUTORIZACION_SALIDA:"Autorizacin Salida Anticipada",CAMBIO_DIA:"Cambio de Da",NO_MARCACION:"No Marcacin",SIN_CREDENCIAL:"Sin Credencial",UNKNOWN:"Comando no reconocido"},iZ={VACACIONES:"attendance_vacations",LICENCIA:"attendance_licenses",PERMISO:"attendance_permissions",AUTORIZACION_LLEGADA:"attendance_autorizaciones",AUTORIZACION_SALIDA:"attendance_autorizaciones",CAMBIO_DIA:"attendance_cambios_dia",NO_MARCACION:"attendance_no_marcaciones",SIN_CREDENCIAL:"attendance_sin_credenciales",UNKNOWN:null},sZ=[{label:"Vacaciones",template:"vacaciones para [RUT] desde [fecha] por [das] das",intent:"VACACIONES"},{label:"Licencia",template:"licencia para [RUT] desde [fecha] hasta [fecha]",intent:"LICENCIA"},{label:"Permiso",template:"permiso para [RUT] el [fecha] de [hora] a [hora]",intent:"PERMISO"},{label:"Llegada tarda",template:"llegada tarda [RUT] el [fecha] a las [hora]",intent:"AUTORIZACION_LLEGADA"},{label:"Salida anticipada",template:"salida anticipada [RUT] el [fecha] a las [hora]",intent:"AUTORIZACION_SALIDA"},{label:"Cambio de da",template:"cambio de da [RUT] del [da] al [da]",intent:"CAMBIO_DIA"}];function Ig(e){if(!e)return"";let t=e.replace(/\./g,"").replace(/\s/g,"").toUpperCase();return!t.includes("-")&&t.length>1&&(t=t.slice(0,-1)+"-"+t.slice(-1)),t}function Wk(e){const r=Ig(e).match(/^(\d{7,8})-?([\dkK])$/i);if(!r)return!1;const n=r[1],a=r[2].toUpperCase();let i=0,s=2;for(let u=n.length-1;u>=0;u--)i+=parseInt(n[u],10)*s,s=s===7?2:s+1;const o=i%11,c=o===0?"0":o===1?"K":String(11-o);return a===c}function oZ(e){if(!e)return null;const t=[/\b(\d{1,2}\.?\d{3}\.?\d{3}-?[\dkK])\b/gi,/\brut\s*:?\s*(\d{1,2}\.?\d{3}\.?\d{3}-?[\dkK])\b/gi,/\bpara\s+(\d{1,2}\.?\d{3}\.?\d{3}-?[\dkK])\b/gi];for(const a of t){const i=e.matchAll(a);for(const s of i){const o=s[1],c=Ig(o);if(Wk(c))return c}}const r=/\b(\d{7,8})[\s-]?([\dkK])\b/gi,n=e.matchAll(r);for(const a of n){const i=a[1]+"-"+a[2];if(Wk(i))return Ig(i)}return null}function lZ(e){const r=Ig(e).match(/^(\d+)-?([\dkK])$/i);if(!r)return e;const n=r[1],a=r[2];return`${n.replace(/\B(?=(\d{3})+(?!\d))/g,".")}-${a}`}function eu(e){const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`}function y5(e,t){const r=new Date(e);return r.setDate(r.getDate()+t),r}function cZ(e){const t=new Date(e);return t.setHours(0,0,0,0),t}const uZ=()=>cZ(new Date),dZ={enero:0,febrero:1,marzo:2,abril:3,mayo:4,junio:5,julio:6,agosto:7,septiembre:8,octubre:9,noviembre:10,diciembre:11,ene:0,feb:1,mar:2,abr:3,may:4,jun:5,jul:6,ago:7,sep:8,oct:9,nov:10,dic:11};function Vk(e,t){const r=new Date(e),n=r.getDay();let a=t-n;return a<=0&&(a+=7),r.setDate(r.getDate()+a),r}const fZ={domingo:0,lunes:1,martes:2,mircoles:3,miercoles:3,jueves:4,viernes:5,sbado:6,sabado:6};function _d(e){if(!e)return null;const t=e.toLowerCase().trim(),r=uZ();if(/\bhoy\b/.test(t))return eu(r);if(/\bma[n]ana\b/.test(t))return eu(y5(r,1));if(/\bpasado\s+ma[n]ana\b/.test(t))return eu(y5(r,2));for(const[o,c]of Object.entries(fZ)){if(new RegExp(`\\bpr[o]ximo\\s+${o}\\b`,"i").test(t)){let u=Vk(r,c);return(u.getTime()-r.getTime())/(1e3*60*60*24)<1&&(u=y5(u,7)),eu(u)}if(new RegExp(`\\b(el|este)\\s+${o}\\b`,"i").test(t)||new RegExp(`\\b${o}\\b`).test(t))return eu(Vk(r,c))}const n=t.match(/\b(\d{4})-(\d{2})-(\d{2})\b/);if(n)return n[0];const a=t.match(/\b(\d{1,2})\s+de\s+(\w+)(?:\s+de\s+(\d{4}))?\b/);if(a){const o=parseInt(a[1],10),c=a[2],u=dZ[c];if(u!==void 0){let d=a[3]?parseInt(a[3],10):r.getFullYear();const f=new Date(d,u,o);return!a[3]&&f<r&&(d+=1),eu(new Date(d,u,o))}}const i=t.match(/\b(\d{1,2})[\/\-.](\d{1,2})[\/\-.](\d{2,4})\b/);if(i){const o=parseInt(i[1],10),c=parseInt(i[2],10)-1;let u=parseInt(i[3],10);return u<100&&(u+=2e3),eu(new Date(u,c,o))}const s=t.match(/\b(\d{1,2})[\/\-.](\d{1,2})\b/);if(s){const o=parseInt(s[1],10),c=parseInt(s[2],10)-1;let u=r.getFullYear();return new Date(u,c,o)<r&&(u+=1),eu(new Date(u,c,o))}return null}function hZ(e){if(!e)return{startDate:null,endDate:null};const t=e.toLowerCase(),r=t.match(/desde\s+(.+?)\s+hasta\s+(.+?)(?:\s|$)/);if(r)return{startDate:_d(r[1]),endDate:_d(r[2])};const n=t.match(/del?\s+(.+?)\s+al?\s+(.+?)(?:\s|$)/);if(n)return{startDate:_d(n[1]),endDate:_d(n[2])};const a=t.match(/desde\s+(.+?)(?:\s+por|\s+durante|$)/);if(a)return{startDate:_d(a[1]),endDate:null};const i=t.match(/\bel\s+(.+?)(?:\s+a\s+las|\s+motivo|$)/);if(i){const o=_d(i[1]);return{startDate:o,endDate:o}}return{startDate:_d(e),endDate:null}}function b5(e){if(!e)return null;const t=e.toLowerCase(),r=t.match(/\b(\d{1,2}):(\d{2})\b/);if(r){const a=parseInt(r[1],10),i=parseInt(r[2],10);if(a>=0&&a<=23&&i>=0&&i<=59)return`${a.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`}const n=t.match(/a\s+las?\s+(\d{1,2})(?:\s*(?:hrs?|horas?))?/);if(n){const a=parseInt(n[1],10);if(a>=0&&a<=23)return`${a.toString().padStart(2,"0")}:00`}return null}function pZ(e){if(!e)return{startTime:null,endTime:null};const t=e.toLowerCase(),r=t.match(/(\d{1,2}:\d{2})\s*[-a]\s*(\d{1,2}:\d{2})/);if(r)return{startTime:b5(r[1]),endTime:b5(r[2])};const n=t.match(/de\s+(\d{1,2})\s+a\s+(\d{1,2})/);if(n){const i=parseInt(n[1],10),s=parseInt(n[2],10);if(i>=0&&i<=23&&s>=0&&s<=23)return{startTime:`${i.toString().padStart(2,"0")}:00`,endTime:`${s.toString().padStart(2,"0")}:00`}}return{startTime:b5(e),endTime:null}}function mZ(e){const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`}function gZ(e){if(!e)return null;const t=e.toLowerCase(),r=t.match(/(?:por|durante)?\s*(\d+)\s*d[i]as?/i);if(r)return parseInt(r[1],10);const n=t.match(/(?:por|durante)?\s*(?:una|(\d+))\s*semanas?/i);if(n)return(n[1]?parseInt(n[1],10):1)*7;const a=t.match(/(?:por|durante)?\s*(?:un|(\d+))\s*mes(?:es)?/i);return a?(a[1]?parseInt(a[1],10):1)*30:null}function vZ(e,t){const r=new Date(e+"T12:00:00");return r.setDate(r.getDate()+t-1),mZ(r)}const xZ=[{intent:"VACACIONES",patterns:[/\bvacaciones\b/i,/\bvacaci[o]n\b/i,/\bferiado\s+legal\b/i],priority:10},{intent:"LICENCIA",patterns:[/\blicencia\b/i,/\blicencia\s+m[e]dica\b/i,/\blic\.\s*m[e]dica\b/i],priority:10},{intent:"PERMISO",patterns:[/\bpermiso\b/i,/\bpermiso\s+administrativo\b/i,/\bpermiso\s+personal\b/i],priority:9},{intent:"AUTORIZACION_LLEGADA",patterns:[/\bllegada\s+tard[i]a\b/i,/\bautorizaci[o]n\s+(?:de\s+)?llegada\b/i,/\blleg[o]\s+tarde\b/i,/\batraso\b/i,/\bentrada\s+tard[i]a\b/i],priority:8},{intent:"AUTORIZACION_SALIDA",patterns:[/\bsalida\s+anticipada\b/i,/\bautorizaci[o]n\s+(?:de\s+)?salida\b/i,/\bsalir\s+temprano\b/i,/\bsalir\s+antes\b/i,/\bretiro\s+anticipado\b/i],priority:8},{intent:"CAMBIO_DIA",patterns:[/\bcambio\s+de\s+d[i]a\b/i,/\bcambiar\s+(?:el\s+)?d[i]a\b/i,/\bintercambio\s+de\s+d[i]a\b/i,/\bmover\s+(?:el\s+)?turno\b/i],priority:7},{intent:"NO_MARCACION",patterns:[/\bno\s+marcaci[o]n\b/i,/\bno\s+marc[o]\b/i,/\bsin\s+marcaci[o]n\b/i,/\bolvid[o]\s+marcar\b/i,/\bfalt[o]\s+marca\b/i],priority:6},{intent:"SIN_CREDENCIAL",patterns:[/\bsin\s+credencial\b/i,/\bolvid[o]\s+(?:la\s+)?credencial\b/i,/\bno\s+tiene\s+credencial\b/i,/\bcredencial\s+olvidada\b/i],priority:5}];function yZ(e){var n,a;if(!e)return{intent:"UNKNOWN",confidence:0};const t=e.toLowerCase(),r=[...xZ].sort((i,s)=>s.priority-i.priority);for(const{intent:i,patterns:s}of r)for(const o of s)if(o.test(t)){const c=((a=(n=t.match(o))==null?void 0:n[0])==null?void 0:a.length)??0,u=Math.min(.9+c/e.length*.1,1);return{intent:i,confidence:u}}return{intent:"UNKNOWN",confidence:0}}function bZ(e){if(!e)return null;const t=e.toLowerCase(),r=t.match(/(?:por\s+)?motivo\s*:?\s*(?:de\s+)?(.+?)(?:\.|$)/i);if(r)return r[1].trim();const n=t.match(/raz[o]n\s*:?\s*(.+?)(?:\.|$)/i);if(n)return n[1].trim();const a=t.match(/nota\s*:?\s*(.+?)(?:\.|$)/i);return a?a[1].trim():null}function wZ(e){const t=[],{intent:r,confidence:n}=yZ(e),a=oZ(e),i=a?Ig(a):null;!i&&r!=="UNKNOWN"&&t.push("No se encontr un RUT vlido en el comando");const{startDate:s,endDate:o}=hZ(e);!s&&r!=="UNKNOWN"&&t.push("No se pudo determinar la fecha de inicio");const c=gZ(e);let u=o;!u&&s&&c&&(u=vZ(s,c)),s&&!u&&!c&&(u=s);const{startTime:d,endTime:f}=pZ(e),p=bZ(e);return{intent:r,rut:a,rutNormalized:i,startDate:s,endDate:u,startTime:d,endTime:f,durationDays:c,reason:p,rawText:e,confidence:n,errors:t,isValid:t.length===0}}function _Z(e){const t=[...e.errors];return e.intent==="UNKNOWN"&&t.push("No se reconoci el tipo de comando. Intenta con: vacaciones, licencia, permiso, llegada tarda, salida anticipada"),e.rutNormalized||t.push("Se requiere un RUT vlido"),e.startDate||t.push("Se requiere una fecha de inicio"),(e.intent==="VACACIONES"||e.intent==="LICENCIA")&&(e.endDate||t.push('Se requiere una fecha de trmino o duracin (ej: "por 5 das")')),(e.intent==="AUTORIZACION_LLEGADA"||e.intent==="AUTORIZACION_SALIDA")&&(e.startTime||t.push('Se requiere una hora (ej: "a las 09:30")')),{isValid:t.length===0,errors:t}}const EF={logs:e=>["asisCommand","logs",e],emailSettings:()=>["asisCommand","emailSettings"],person:e=>["asisCommand","person",e]},SZ=e=>zt({queryKey:EF.logs(e),queryFn:()=>YQ(20,e),staleTime:3e4}),NZ=e=>zt({queryKey:EF.person(e||""),queryFn:()=>e?QQ(e):null,enabled:!!e}),jZ=()=>{const e=Mt();return Ft({mutationFn:JQ,onSuccess:()=>{e.invalidateQueries({queryKey:["asisCommand","logs"]})}})},AZ=()=>{const e=Mt(),t=jZ();return Ft({mutationFn:async({parsed:r,person:n,executedBy:a,terminalCode:i})=>{let s;switch(r.intent){case"VACACIONES":s=await ZQ(n.id,r.startDate,r.endDate,r.reason||"Registrado via Asis Command",a);break;case"LICENCIA":s=await eZ(n.id,r.startDate,r.endDate,r.reason||"Registrado via Asis Command",a);break;case"PERMISO":s=await tZ(n.id,r.startDate,r.endDate,"PERSONAL",r.reason||"Registrado via Asis Command",a);break;case"AUTORIZACION_LLEGADA":s=await Hk(n.id,n,r.startDate,"LLEGADA",r.startTime||"00:00",r.reason||"Llegada Tarde",a);break;case"AUTORIZACION_SALIDA":s=await Hk(n.id,n,r.startDate,"SALIDA",r.startTime||"00:00",r.reason||"Salida Anticipada",a);break;case"CAMBIO_DIA":const o=r.startDate,c=r.endDate&&r.endDate!==r.startDate?r.endDate:r.startDate;s=await rZ(n,o,c,r.reason||"Cambio solicitado",a);break;case"NO_MARCACION":s=await nZ(n,r.startDate,r.reason||"No marc asistencia",a);break;case"SIN_CREDENCIAL":s=await aZ(n,r.startDate,r.reason||"Sin credencial fsica",a);break;default:s={success:!1,error:`Intent ${r.intent} no implementado an`}}if(await t.mutateAsync({command_text:r.rawText,parsed_intent:r.intent,payload_json:{person:{id:n.id,rut:n.rut,nombre:n.nombre},startDate:r.startDate,endDate:r.endDate,reason:r.reason},executed_by:a,terminal_code:i,status:s.success?"OK":"ERROR",error_message:s.error}),!s.success)throw new Error(s.error);return s},onSuccess:()=>{e.invalidateQueries({queryKey:["asistencia2026"]})}})};function EZ(e,t){const{isValid:r}=_Z(e),n=[];(t==null?void 0:t.status)==="DESVINCULADO"&&n.push("Esta persona est DESVINCULADA del sistema");let i=uy[e.intent];return e.startDate&&e.endDate&&e.startDate!==e.endDate?i+=` del ${e.startDate} al ${e.endDate}`:e.startDate&&(i+=` el ${e.startDate}`),e.startTime&&(i+=` a las ${e.startTime}`),{parsedCommand:e,person:t,personNotFound:e.rutNormalized!==null&&t===null,action:i,targetTable:iZ[e.intent],emailRecipients:[],warnings:n,canExecute:r&&t!==null&&t.status!=="DESVINCULADO"}}const TZ=({isOpen:e,onClose:t})=>{const r=jr(T=>T.session),n=Vt(T=>T.context),[a,i]=F.useState(""),[s,o]=F.useState(null),[c,u]=F.useState(null),[d,f]=F.useState(!1),[p,h]=F.useState(null),[g,m]=F.useState(null),x=F.useRef(null),{data:y=[]}=SZ(r==null?void 0:r.supervisorName),{data:v,isLoading:b}=NZ((s==null?void 0:s.rutNormalized)||null),S=AZ();F.useEffect(()=>{e&&x.current&&setTimeout(()=>{var T;return(T=x.current)==null?void 0:T.focus()},300)},[e]),F.useEffect(()=>{if(a.trim().length>5){const T=wZ(a);o(T)}else o(null),u(null)},[a]),F.useEffect(()=>{if(s){const T=EZ(s,v||null);u(T)}},[s,v]);const _=T=>{var L;i(T),(L=x.current)==null||L.focus()},A=()=>{!(c!=null&&c.canExecute)||!v||!r||f(!0)},j=async()=>{if(!(!s||!v||!r)){m(null),h(null);try{await S.mutateAsync({parsed:s,person:v,executedBy:r.supervisorName,terminalCode:String(n??"")}),h(`${uy[s.intent]} registrado correctamente para ${v.nombre}`),i(""),o(null),u(null),f(!1),setTimeout(()=>h(null),5e3)}catch(T){m(T instanceof Error?T.message:"Error al ejecutar comando")}}},E=()=>{f(!1),m(null)};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`
                    fixed inset-0 bg-black/30 z-40
                    transition-opacity duration-300
                    ${e?"opacity-100":"opacity-0 pointer-events-none"}
                `,onClick:t}),l.jsxs("div",{className:`
                    fixed top-0 right-0 h-full z-50
                    w-full sm:w-[400px] max-w-full
                    bg-white shadow-2xl
                    transform transition-transform duration-300 ease-out
                    ${e?"translate-x-0":"translate-x-full"}
                    flex flex-col
                `,children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-slate-50",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(me,{name:"settings",className:"w-5 h-5 text-slate-700"}),l.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Asis Command"})]}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-200 rounded-lg transition-colors",children:l.jsx(me,{name:"x",className:"w-5 h-5"})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[p&&l.jsxs("div",{className:"p-3 bg-emerald-50 border border-emerald-200 rounded-lg text-emerald-800 text-sm flex items-start gap-2",children:[l.jsx(me,{name:"check-circle",className:"w-5 h-5 flex-shrink-0 mt-0.5"}),l.jsx("span",{children:p})]}),g&&l.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm flex items-start gap-2",children:[l.jsx(me,{name:"alert-circle",className:"w-5 h-5 flex-shrink-0 mt-0.5"}),l.jsx("span",{children:g})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-medium text-slate-500 uppercase mb-2",children:"Acciones rpidas"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:sZ.map(T=>l.jsx("button",{onClick:()=>_(T.template),className:"px-3 py-1.5 text-sm bg-slate-100 hover:bg-slate-200 rounded-full transition-colors",children:T.label},T.label))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase mb-2 block",children:"Escribe tu comando"}),l.jsx("textarea",{ref:x,value:a,onChange:T=>i(T.target.value),placeholder:"Ej: vacaciones para 18866264-1 desde el lunes por 5 das",className:"w-full p-3 border border-slate-300 rounded-lg resize-none focus:ring-2 focus:ring-slate-500 focus:border-transparent",rows:3}),s&&!s.isValid&&l.jsx("div",{className:"animate-fade-in-up",children:l.jsxs("div",{className:"flex gap-2 mt-2 overflow-x-auto pb-2",children:[!s.startDate&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-xs text-slate-400 py-1",children:"Sugerencias:"}),l.jsx("button",{onClick:()=>i(T=>`${T} hoy`),className:"px-2 py-0.5 text-xs bg-indigo-50 text-indigo-700 rounded-md border border-indigo-100 hover:bg-indigo-100 transition-colors",children:"Hoy"}),l.jsx("button",{onClick:()=>i(T=>`${T} maana`),className:"px-2 py-0.5 text-xs bg-indigo-50 text-indigo-700 rounded-md border border-indigo-100 hover:bg-indigo-100 transition-colors",children:"Maana"}),l.jsx("button",{onClick:()=>i(T=>`${T} el lunes`),className:"px-2 py-0.5 text-xs bg-indigo-50 text-indigo-700 rounded-md border border-indigo-100 hover:bg-indigo-100 transition-colors",children:"El lunes"})]}),s.startDate&&!s.durationDays&&!s.endDate&&["VACACIONES","LICENCIA"].includes(s.intent)&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>i(T=>`${T} por 1 da`),className:"px-2 py-0.5 text-xs bg-indigo-50 text-indigo-700 rounded-md border border-indigo-100 hover:bg-indigo-100 transition-colors",children:"1 da"}),l.jsx("button",{onClick:()=>i(T=>`${T} por 5 das`),className:"px-2 py-0.5 text-xs bg-indigo-50 text-indigo-700 rounded-md border border-indigo-100 hover:bg-indigo-100 transition-colors",children:"5 das"})]})]})})]}),c&&s&&s.intent!=="UNKNOWN"&&l.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl shadow-sm space-y-3 animate-slide-up",children:[l.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-slate-100",children:[l.jsxs("h3",{className:"font-medium text-slate-800 flex items-center gap-2",children:[l.jsx(me,{name:"file-text",className:"w-4 h-4 text-indigo-500"}),"Vista previa"]}),l.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full font-medium transition-all duration-300 ${c.canExecute?"bg-emerald-100 text-emerald-700 shadow-sm":"bg-amber-50 text-amber-700"}`,children:c.canExecute?"Listo para ejecutar":"Faltan datos"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-y-3 gap-x-4 text-sm mt-2",children:[l.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[l.jsx("span",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider block mb-0.5",children:"Accin"}),l.jsx("div",{className:"font-medium text-slate-800 bg-slate-50 px-2 py-1 rounded inline-block",children:uy[s.intent]})]}),l.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[l.jsx("span",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider block mb-0.5",children:"RUT"}),l.jsx("div",{className:"font-mono text-slate-700",children:s.rutNormalized?lZ(s.rutNormalized):l.jsx("span",{className:"text-slate-300",children:"-"})})]}),v?l.jsx(l.Fragment,{children:l.jsxs("div",{className:"col-span-2 bg-indigo-50/50 p-2 rounded-lg border border-indigo-50 flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold text-xs",children:v.nombre.charAt(0)}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-slate-800 text-sm",children:v.nombre}),l.jsx("div",{className:"text-xs text-indigo-600 font-medium",children:v.cargo})]})]})}):b&&l.jsxs("div",{className:"col-span-2 text-slate-500 flex items-center gap-2 py-2 animate-pulse",children:[l.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-slate-300 border-t-indigo-500 animate-spin"}),"Buscando persona..."]}),c.personNotFound&&l.jsxs("div",{className:"col-span-2 p-2 bg-red-50 text-red-700 text-xs rounded-lg border border-red-100 flex items-center gap-2",children:[l.jsx(me,{name:"user-x",className:"w-4 h-4"}),"No encontramos a esta persona en la base de datos."]}),l.jsxs("div",{className:"col-span-2 grid grid-cols-2 gap-4 pt-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider block mb-0.5",children:"Desde"}),l.jsx("div",{className:"text-slate-800",children:s.startDate||l.jsx("span",{className:"text-slate-300",children:"-"})}),s.startTime&&l.jsx("div",{className:"text-xs text-slate-500 mt-0.5",children:s.startTime})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider block mb-0.5",children:"Hasta"}),l.jsx("div",{className:"text-slate-800",children:s.endDate||l.jsx("span",{className:"text-slate-300",children:"-"})}),s.endTime&&l.jsx("div",{className:"text-xs text-slate-500 mt-0.5",children:s.endTime})]})]}),s.durationDays&&l.jsx("div",{className:"col-span-2 pt-1",children:l.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2 py-1 bg-slate-100 text-slate-600 rounded text-xs font-medium",children:[l.jsx(me,{name:"clock",className:"w-3 h-3"}),"Duracin: ",s.durationDays," das"]})})]}),s.errors.length>0&&l.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-100 rounded-lg space-y-1",children:s.errors.map((T,L)=>l.jsxs("div",{className:"flex items-center gap-2 text-xs text-red-700 font-medium",children:[l.jsx(me,{name:"x-circle",className:"w-3.5 h-3.5"}),T]},L))}),c.warnings.length>0&&l.jsx("div",{className:"mt-3 p-3 bg-amber-50 border border-amber-100 rounded-lg space-y-1",children:c.warnings.map((T,L)=>l.jsxs("div",{className:"flex items-center gap-2 text-xs text-amber-700 font-medium",children:[l.jsx(me,{name:"alert-triangle",className:"w-3.5 h-3.5"}),T]},L))}),!d&&l.jsx("button",{onClick:A,disabled:!c.canExecute||S.isPending,className:`
                                        w-full py-3 rounded-xl font-semibold shadow-sm transition-all duration-200 transform active:scale-[0.98]
                                        ${c.canExecute?"bg-indigo-600 text-white hover:bg-indigo-700 shadow-indigo-200 hover:shadow-indigo-300":"bg-slate-100 text-slate-400 cursor-not-allowed"}
                                        flex items-center justify-center gap-2 mt-4
                                    `,children:S.isPending?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Procesando..."]}):l.jsxs(l.Fragment,{children:["Ejecutar Comando ",l.jsx(me,{name:"chevron-right",className:"w-4 h-4"})]})}),d&&l.jsxs("div",{className:"flex gap-3 mt-4 animate-fade-in",children:[l.jsx("button",{onClick:E,className:"flex-1 py-3 rounded-xl font-medium border border-slate-200 text-slate-600 hover:bg-slate-50 hover:text-slate-800 transition-colors",children:"Cancelar"}),l.jsx("button",{onClick:j,disabled:S.isPending,className:"flex-1 py-3 rounded-xl font-semibold bg-emerald-600 text-white hover:bg-emerald-700 shadow-lg shadow-emerald-200 hover:shadow-emerald-300 transition-all transform active:scale-[0.98] flex items-center justify-center gap-2",children:S.isPending?"Guardando...":"Confirmar Todo"})]})]}),y.length>0&&!s&&l.jsxs("div",{className:"animate-fade-in delay-100",children:[l.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 px-1",children:"Historial reciente"}),l.jsx("div",{className:"space-y-2",children:y.slice(0,8).map(T=>l.jsxs("div",{className:"group p-3 bg-white border border-slate-100 rounded-xl cursor-pointer hover:border-indigo-200 hover:shadow-md hover:shadow-indigo-50 transition-all duration-200",onClick:()=>i(T.command_text),children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 group-hover:text-indigo-700 transition-colors",children:T.parsed_intent?uy[T.parsed_intent]:"Comando"}),l.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded-full ${T.status==="OK"?"bg-emerald-50 text-emerald-600":"bg-red-50 text-red-600"}`,children:T.status==="OK"?"EXITOSO":"FALLIDO"})]}),l.jsx("div",{className:"text-xs text-slate-500 truncate font-mono bg-slate-50 p-1.5 rounded group-hover:bg-indigo-50/50 transition-colors",children:T.command_text})]},T.id))})]})]}),l.jsx("div",{className:"p-4 border-t bg-slate-50/80 backdrop-blur-sm text-center",children:l.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Asis Command AI v1.0  Escribe en lenguaje natural"})})]})]})},CZ=()=>{const[e,t]=F.useState(!1),r=()=>{t(a=>!a)},n=()=>{t(!1)};return l.jsxs(l.Fragment,{children:[l.jsx(AY,{onClick:r,isOpen:e}),l.jsx(TZ,{isOpen:e,onClose:n})]})},kZ=()=>{const[e,t]=F.useState(!1);return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-slate-100 to-slate-50",children:[l.jsxs("div",{className:"flex",children:[l.jsx(wY,{isOpen:e,onClose:()=>t(!1)}),l.jsxs("div",{className:"flex min-h-screen flex-1 flex-col md:ml-72",children:[l.jsx(jY,{onMenuToggle:()=>t(r=>!r)}),l.jsx("main",{className:"flex-1 px-4 pb-8 pt-6 md:px-8",children:l.jsx("div",{className:"animate-fade-in",children:l.jsx(oM,{})})}),l.jsx("footer",{className:"border-t border-slate-200 bg-white/50 px-4 py-4 md:px-8",children:l.jsxs("div",{className:"flex flex-col items-center justify-between gap-2 text-xs text-slate-500 sm:flex-row",children:[l.jsx("p",{children:" 2024 Asiss  Dashboard de Operaciones y Logstica"}),l.jsxs("p",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-success-500 animate-pulse"}),"Sistema operativo"]})]})})]})]}),l.jsx(CZ,{})]})},kn=({label:e="Cargando..."})=>l.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"h-12 w-12 rounded-full border-[3px] border-slate-200"}),l.jsx("div",{className:"absolute inset-0 h-12 w-12 rounded-full border-[3px] border-transparent border-t-brand-500 animate-spin"})]}),l.jsx("p",{className:"mt-4 text-sm font-medium text-slate-600",children:e})]}),gn=({title:e,description:t,actions:r})=>l.jsxs("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900 md:text-3xl",children:e}),t&&l.jsx("p",{className:"mt-1 text-sm text-slate-500",children:t})]}),r&&l.jsx("div",{className:"flex flex-wrap items-center gap-3",children:r})]}),OZ=({value:e,onChange:t,label:r="Terminal actual"})=>{const n=e.mode==="ALL"?"ALL":e.mode==="GROUP"?`GROUP:${e.value}`:`TERMINAL:${e.value}`,a=i=>{const s=i.target.value;if(s==="ALL"){t(cM);return}if(s.startsWith("GROUP:")){const c=s.replace("GROUP:","");t({mode:"GROUP",value:c});return}const o=s.replace("TERMINAL:","");t({mode:"TERMINAL",value:o})};return l.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-600",children:[l.jsx("span",{className:"mb-1",children:r}),l.jsxs("select",{value:n,onChange:a,className:"input min-w-[200px]","aria-label":"Selector de terminal",children:[l.jsx("option",{value:"ALL",children:"Todos"}),l.jsx("optgroup",{label:"Terminales",children:ns.map(i=>l.jsx("option",{value:`TERMINAL:${i.value}`,children:i.label},i.value))}),l.jsx("optgroup",{label:"Grupos",children:xY.map(i=>l.jsx("option",{value:`GROUP:${i.value}`,children:i.label},i.value))})]})]})},ss=({terminalContext:e,onTerminalChange:t,children:r})=>l.jsx("div",{className:"card p-4 mb-6",children:l.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx(OZ,{value:e,onChange:t})}),r&&l.jsx("div",{className:"flex flex-wrap items-end gap-3 border-t border-slate-100 pt-4 lg:border-0 lg:pt-0",children:r})]})}),Fa=({message:e="Ha ocurrido un error",onRetry:t})=>l.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border border-danger-200 bg-danger-50/50 px-6 py-12 text-center",children:[l.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-danger-100 mb-4",children:l.jsx("svg",{className:"h-7 w-7 text-danger-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})})}),l.jsx("p",{className:"text-sm font-semibold text-danger-700",children:e}),l.jsx("p",{className:"mt-1 text-xs text-danger-600 max-w-xs",children:"Por favor intenta de nuevo o contacta soporte si el problema persiste."}),t&&l.jsxs("button",{onClick:t,className:"mt-4 btn btn-secondary text-danger-700 border-danger-300 hover:bg-danger-100",children:[l.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reintentar"]})]}),Na=({onExportView:e,onExportAll:t})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:e,className:"btn btn-secondary text-sm",children:[l.jsx(me,{name:"clipboard",size:16}),l.jsx("span",{className:"hidden sm:inline",children:"Exportar Vista"}),l.jsx("span",{className:"sm:hidden",children:"Vista"})]}),l.jsxs("button",{onClick:t,className:"btn btn-primary text-sm",children:[l.jsx(me,{name:"layers",size:16}),l.jsx("span",{className:"hidden sm:inline",children:"Exportar Todo"}),l.jsx("span",{className:"sm:hidden",children:"Todo"})]})]});/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var rb={};rb.version="0.18.5";var TF=1252,PZ=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],CF=function(e){PZ.indexOf(e)!=-1&&(TF=e)};function LZ(){CF(1252)}var Rg=function(e){CF(e)};function IZ(){Rg(1200),LZ()}var vx=function(t){return String.fromCharCode(t)},Gk=function(t){return String.fromCharCode(t)},nb,Au="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Dg(e){for(var t="",r=0,n=0,a=0,i=0,s=0,o=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),i=r>>2,n=e.charCodeAt(u++),s=(r&3)<<4|n>>4,a=e.charCodeAt(u++),o=(n&15)<<2|a>>6,c=a&63,isNaN(n)?o=c=64:isNaN(a)&&(c=64),t+=Au.charAt(i)+Au.charAt(s)+Au.charAt(o)+Au.charAt(c);return t}function vc(e){var t="",r=0,n=0,a=0,i=0,s=0,o=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)i=Au.indexOf(e.charAt(u++)),s=Au.indexOf(e.charAt(u++)),r=i<<2|s>>4,t+=String.fromCharCode(r),o=Au.indexOf(e.charAt(u++)),n=(s&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),c=Au.indexOf(e.charAt(u++)),a=(o&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var Er=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),kc=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function wf(e){return Er?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function Kk(e){return Er?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Io=function(t){return Er?kc(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function Y2(e){if(typeof ArrayBuffer>"u")return Io(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function $v(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function RZ(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}var Ja=Er?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:kc(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function DZ(e){for(var t=[],r=0,n=e.length+250,a=wf(e.length+255),i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s<128)a[r++]=s;else if(s<2048)a[r++]=192|s>>6&31,a[r++]=128|s&63;else if(s>=55296&&s<57344){s=(s&1023)+64;var o=e.charCodeAt(++i)&1023;a[r++]=240|s>>8&7,a[r++]=128|s>>2&63,a[r++]=128|o>>6&15|(s&3)<<4,a[r++]=128|o&63}else a[r++]=224|s>>12&15,a[r++]=128|s>>6&63,a[r++]=128|s&63;r>n&&(t.push(a.slice(0,r)),r=0,a=wf(65535),n=65530)}return t.push(a.slice(0,r)),Ja(t)}var Jm=/\u0000/g,xx=/[\u0001-\u0006]/g;function Zh(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Do(e,t){var r=""+e;return r.length>=t?r:$n("0",t-r.length)+r}function h3(e,t){var r=""+e;return r.length>=t?r:$n(" ",t-r.length)+r}function ab(e,t){var r=""+e;return r.length>=t?r:r+$n(" ",t-r.length)}function MZ(e,t){var r=""+Math.round(e);return r.length>=t?r:$n("0",t-r.length)+r}function FZ(e,t){var r=""+e;return r.length>=t?r:$n("0",t-r.length)+r}var Xk=Math.pow(2,32);function uh(e,t){if(e>Xk||e<-Xk)return MZ(e,t);var r=Math.round(e);return FZ(r,t)}function ib(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var Yk=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],w5=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function $Z(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Un={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Jk={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},BZ={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function sb(e,t,r){for(var n=e<0?-1:1,a=e*n,i=0,s=1,o=0,c=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),o=f*s+i,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),i=s,s=o,c=u,u=d;if(d>t&&(u>t?(d=c,o=i):(d=u,o=s)),!r)return[0,n*o,d];var p=Math.floor(n*o/d);return[p,n*o-p*d,d]}function yx(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),i=0,s=[],o={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)s=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)s=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),s=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),n<60&&(i=(i+6)%7),r&&(i=GZ(c,s))}return o.y=s[0],o.m=s[1],o.d=s[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=i,o}var kF=new Date(1899,11,31,0,0,0),UZ=kF.getTime(),zZ=new Date(1900,2,1,0,0,0);function OF(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=zZ&&(r+=24*60*60*1e3),(r-(UZ+(e.getTimezoneOffset()-kF.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function p3(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function qZ(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function HZ(e){var t=e<0?12:11,r=p3(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function WZ(e){var t=p3(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function VZ(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=HZ(e):t===10?r=e.toFixed(10).substr(0,12):r=WZ(e),p3(qZ(r.toUpperCase()))}function sj(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):VZ(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Wu(14,OF(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function GZ(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function KZ(e,t,r,n){var a="",i=0,s=0,o=r.y,c,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return w5[r.m-1][1];case 5:return w5[r.m-1][0];default:return w5[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return Yk[r.q][0];default:return Yk[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Do(r.S,t.length):(n>=2?s=n===3?1e3:100:s=n===1?10:1,i=Math.round(s*(r.S+r.u)),i>=60*s&&(i=0),t==="s"?i===0?"0":""+i/s:(a=Do(i,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=o,u=1;break}var d=u>0?Do(c,u):"";return d}function Eu(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var PF=/%/g;function XZ(e,t,r){var n=t.replace(PF,""),a=t.length-n.length;return ic(e,n,r*Math.pow(10,2*a))+$n("%",a)}function YZ(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return ic(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function LF(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+LF(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),r.indexOf("e")===-1){var s=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+i):r+="E+"+(s-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(a+i)%a)+"."+d.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var IF=/# (\?+)( ?)\/( ?)(\d+)/;function JZ(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),i=Math.floor(a/n),s=a-i*n,o=n;return r+(i===0?"":""+i)+" "+(s===0?$n(" ",e[1].length+1+e[4].length):h3(s,e[1].length)+e[2]+"/"+e[3]+Do(o,e[4].length))}function QZ(e,t,r){return r+(t===0?"":""+t)+$n(" ",e[1].length+2+e[4].length)}var RF=/^#*0*\.([0#]+)/,DF=/\).*[0#]/,MF=/\(###\) ###\\?-####/;function Ci(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function Qk(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function Zk(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function ZZ(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function eee(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Ws(e,t,r){if(e.charCodeAt(0)===40&&!t.match(DF)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Ws("n",n,r):"("+Ws("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return YZ(e,t,r);if(t.indexOf("%")!==-1)return XZ(e,t,r);if(t.indexOf("E")!==-1)return LF(t,r);if(t.charCodeAt(0)===36)return"$"+Ws(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,s,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+uh(c,t.length);if(t.match(/^[#?]+$/))return a=uh(r,0),a==="0"&&(a=""),a.length>t.length?a:Ci(t.substr(0,t.length-a.length))+a;if(i=t.match(IF))return JZ(i,c,u);if(t.match(/^#+0+$/))return u+uh(c,t.length-t.indexOf("0"));if(i=t.match(RF))return a=Qk(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Ci(i[1])).replace(/\.$/,"."+Ci(i[1])).replace(/\.(\d*)$/,function(g,m){return"."+m+$n("0",Ci(i[1]).length-m.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+Qk(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+Eu(uh(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Ws(e,t,-r):Eu(""+(Math.floor(r)+ZZ(r,i[1].length)))+"."+Do(Zk(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Ws(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Zh(Ws(e,t.replace(/[\\-]/g,""),r)),s=0,Zh(Zh(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return s<a.length?a.charAt(s++):g==="0"?"0":""}));if(t.match(MF))return a=Ws(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(i[4].length,7),o=sb(c,Math.pow(10,s)-1,!1),a=""+u,d=ic("n",i[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+i[2]+"/"+i[3],d=ab(o[2],s),d.length<i[4].length&&(d=Ci(i[4].substr(i[4].length-d.length))+d),a+=d,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(i[1].length,i[4].length),7),o=sb(c,Math.pow(10,s)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?h3(o[1],s)+i[2]+"/"+i[3]+ab(o[2],s):$n(" ",2*s+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=uh(r,0),t.length<=a.length?a:Ci(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),s=a.indexOf(".");var f=t.indexOf(".")-s,p=t.length-a.length-f;return Ci(t.substr(0,f)+a+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return s=Zk(r,i[1].length),r<0?"-"+Ws(e,t,-r):Eu(eee(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Do(0,3-g.length):"")+g})+"."+Do(s,i[1].length);switch(t){case"###,##0.00":return Ws(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var h=Eu(uh(c,0));return h!=="0"?u+h:"";case"###,###.00":return Ws(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Ws(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function tee(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return ic(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function ree(e,t,r){var n=t.replace(PF,""),a=t.length-n.length;return ic(e,n,r*Math.pow(10,2*a))+$n("%",a)}function FF(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+FF(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),!r.match(/[Ee]/)){var s=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+i):r+="E+"+(s-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(a+i)%a)+"."+d.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function rl(e,t,r){if(e.charCodeAt(0)===40&&!t.match(DF)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?rl("n",n,r):"("+rl("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return tee(e,t,r);if(t.indexOf("%")!==-1)return ree(e,t,r);if(t.indexOf("E")!==-1)return FF(t,r);if(t.charCodeAt(0)===36)return"$"+rl(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,s,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Do(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:Ci(t.substr(0,t.length-a.length))+a;if(i=t.match(IF))return QZ(i,c,u);if(t.match(/^#+0+$/))return u+Do(c,t.length-t.indexOf("0"));if(i=t.match(RF))return a=(""+r).replace(/^([^\.]+)$/,"$1."+Ci(i[1])).replace(/\.$/,"."+Ci(i[1])),a=a.replace(/\.(\d*)$/,function(g,m){return"."+m+$n("0",Ci(i[1]).length-m.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+Eu(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+rl(e,t,-r):Eu(""+r)+"."+$n("0",i[1].length);if(i=t.match(/^#,#*,#0/))return rl(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Zh(rl(e,t.replace(/[\\-]/g,""),r)),s=0,Zh(Zh(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return s<a.length?a.charAt(s++):g==="0"?"0":""}));if(t.match(MF))return a=rl(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(i[4].length,7),o=sb(c,Math.pow(10,s)-1,!1),a=""+u,d=ic("n",i[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+i[2]+"/"+i[3],d=ab(o[2],s),d.length<i[4].length&&(d=Ci(i[4].substr(i[4].length-d.length))+d),a+=d,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(i[1].length,i[4].length),7),o=sb(c,Math.pow(10,s)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?h3(o[1],s)+i[2]+"/"+i[3]+ab(o[2],s):$n(" ",2*s+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:Ci(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),s=a.indexOf(".");var f=t.indexOf(".")-s,p=t.length-a.length-f;return Ci(t.substr(0,f)+a+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+rl(e,t,-r):Eu(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Do(0,3-g.length):"")+g})+"."+Do(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var h=Eu(""+c);return h!=="0"?u+h:"";default:if(t.match(/\.[0#?]*$/))return rl(e,t.slice(0,t.lastIndexOf(".")),r)+Ci(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function ic(e,t,r){return(r|0)===r?rl(e,t,r):Ws(e,t,r)}function nee(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var $F=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function BF(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":ib(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match($F))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function aee(e,t,r,n){for(var a=[],i="",s=0,o="",c="t",u,d,f,p="H";s<e.length;)switch(o=e.charAt(s)){case"G":if(!ib(e,s))throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"G",v:"General"},s+=7;break;case'"':for(i="";(f=e.charCodeAt(++s))!==34&&s<e.length;)i+=String.fromCharCode(f);a[a.length]={t:"t",v:i},++s;break;case"\\":var h=e.charAt(++s),g=h==="("||h===")"?h:"t";a[a.length]={t:g,v:h},++s;break;case"_":a[a.length]={t:"t",v:" "},s+=2;break;case"@":a[a.length]={t:"T",v:t},++s;break;case"B":case"b":if(e.charAt(s+1)==="1"||e.charAt(s+1)==="2"){if(u==null&&(u=yx(t,r,e.charAt(s+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(s,2)},c=o,s+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=yx(t,r),u==null))return"";for(i=o;++s<e.length&&e.charAt(s).toLowerCase()===o;)i+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=p),a[a.length]={t:o,v:i},c=o;break;case"A":case"a":case"":var m={t:o,v:o};if(u==null&&(u=yx(t,r)),e.substr(s,3).toUpperCase()==="A/P"?(u!=null&&(m.v=u.H>=12?"P":"A"),m.t="T",p="h",s+=3):e.substr(s,5).toUpperCase()==="AM/PM"?(u!=null&&(m.v=u.H>=12?"PM":"AM"),m.t="T",s+=5,p="h"):e.substr(s,5).toUpperCase()==="/"?(u!=null&&(m.v=u.H>=12?"":""),m.t="T",s+=5,p="h"):(m.t="t",++s),u==null&&m.t==="T")return"";a[a.length]=m,c=o;break;case"[":for(i=o;e.charAt(s++)!=="]"&&s<e.length;)i+=e.charAt(s);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match($F)){if(u==null&&(u=yx(t,r),u==null))return"";a[a.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",BF(e)||(a[a.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=o;++s<e.length&&(o=e.charAt(s))==="0";)i+=o;a[a.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++s<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(s))>-1;)i+=o;a[a.length]={t:"n",v:i};break;case"?":for(i=o;e.charAt(++s)===o;)i+=o;a[a.length]={t:o,v:i},c=o;break;case"*":++s,(e.charAt(s)==" "||e.charAt(s)=="*")&&++s;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;s<e.length&&"0123456789".indexOf(e.charAt(++s))>-1;)i+=e.charAt(s);a[a.length]={t:"D",v:i};break;case" ":a[a.length]={t:o,v:o},++s;break;case"$":a[a.length]={t:"t",v:"$"},++s;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"t",v:o},++s;break}var x=0,y=0,v;for(s=a.length-1,c="t";s>=0;--s)switch(a[s].t){case"h":case"H":a[s].t=p,c="h",x<1&&(x=1);break;case"s":(v=a[s].v.match(/\.0+$/))&&(y=Math.max(y,v[0].length-1)),x<3&&(x=3);case"d":case"y":case"M":case"e":c=a[s].t;break;case"m":c==="s"&&(a[s].t="M",x<2&&(x=2));break;case"X":break;case"Z":x<1&&a[s].v.match(/[Hh]/)&&(x=1),x<2&&a[s].v.match(/[Mm]/)&&(x=2),x<3&&a[s].v.match(/[Ss]/)&&(x=3)}switch(x){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",S;for(s=0;s<a.length;++s)switch(a[s].t){case"t":case"T":case" ":case"D":break;case"X":a[s].v="",a[s].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[s].v=KZ(a[s].t.charCodeAt(0),a[s].v,u,y),a[s].t="t";break;case"n":case"?":for(S=s+1;a[S]!=null&&((o=a[S].t)==="?"||o==="D"||(o===" "||o==="t")&&a[S+1]!=null&&(a[S+1].t==="?"||a[S+1].t==="t"&&a[S+1].v==="/")||a[s].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[S].v==="/"||a[S].v===" "&&a[S+1]!=null&&a[S+1].t=="?"));)a[s].v+=a[S].v,a[S]={v:"",t:";"},++S;b+=a[s].v,s=S-1;break;case"G":a[s].t="t",a[s].v=sj(t,r);break}var _="",A,j;if(b.length>0){b.charCodeAt(0)==40?(A=t<0&&b.charCodeAt(0)===45?-t:t,j=ic("n",b,A)):(A=t<0&&n>1?-t:t,j=ic("n",b,A),A<0&&a[0]&&a[0].t=="t"&&(j=j.substr(1),a[0].v="-"+a[0].v)),S=j.length-1;var E=a.length;for(s=0;s<a.length;++s)if(a[s]!=null&&a[s].t!="t"&&a[s].v.indexOf(".")>-1){E=s;break}var T=a.length;if(E===a.length&&j.indexOf("E")===-1){for(s=a.length-1;s>=0;--s)a[s]==null||"n?".indexOf(a[s].t)===-1||(S>=a[s].v.length-1?(S-=a[s].v.length,a[s].v=j.substr(S+1,a[s].v.length)):S<0?a[s].v="":(a[s].v=j.substr(0,S+1),S=-1),a[s].t="t",T=s);S>=0&&T<a.length&&(a[T].v=j.substr(0,S+1)+a[T].v)}else if(E!==a.length&&j.indexOf("E")===-1){for(S=j.indexOf(".")-1,s=E;s>=0;--s)if(!(a[s]==null||"n?".indexOf(a[s].t)===-1)){for(d=a[s].v.indexOf(".")>-1&&s===E?a[s].v.indexOf(".")-1:a[s].v.length-1,_=a[s].v.substr(d+1);d>=0;--d)S>=0&&(a[s].v.charAt(d)==="0"||a[s].v.charAt(d)==="#")&&(_=j.charAt(S--)+_);a[s].v=_,a[s].t="t",T=s}for(S>=0&&T<a.length&&(a[T].v=j.substr(0,S+1)+a[T].v),S=j.indexOf(".")+1,s=E;s<a.length;++s)if(!(a[s]==null||"n?(".indexOf(a[s].t)===-1&&s!==E)){for(d=a[s].v.indexOf(".")>-1&&s===E?a[s].v.indexOf(".")+1:0,_=a[s].v.substr(0,d);d<a[s].v.length;++d)S<j.length&&(_+=j.charAt(S++));a[s].v=_,a[s].t="t",T=s}}}for(s=0;s<a.length;++s)a[s]!=null&&"n?".indexOf(a[s].t)>-1&&(A=n>1&&t<0&&s>0&&a[s-1].v==="-"?-t:t,a[s].v=ic(a[s].t,a[s].v,A),a[s].t="t");var L="";for(s=0;s!==a.length;++s)a[s]!=null&&(L+=a[s].v);return L}var eO=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function tO(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function iee(e,t){var r=nee(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var s=r[0].match(eO),o=r[1].match(eO);return tO(t,s)?[n,r[0]]:tO(t,o)?[n,r[1]]:[n,r[s!=null&&o!=null?2:1]]}return[n,i]}function Wu(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Un)[e],n==null&&(n=r.table&&r.table[Jk[e]]||Un[Jk[e]]),n==null&&(n=BZ[e]||"General");break}if(ib(n,0))return sj(t,r);t instanceof Date&&(t=OF(t,r.date1904));var a=iee(n,t);if(ib(a[1]))return sj(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return aee(a[1],t,r,a[0])}function UF(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Un[r]==null){t<0&&(t=r);continue}if(Un[r]==e){t=r;break}}t<0&&(t=391)}return Un[t]=e,t}function J2(e){for(var t=0;t!=392;++t)e[t]!==void 0&&UF(e[t],t)}function Q2(){Un=$Z()}var zF=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function see(e){var t=typeof e=="number"?Un[e]:e;return t=t.replace(zF,"(\\d+)"),new RegExp("^"+t+"$")}function oee(e,t,r){var n=-1,a=-1,i=-1,s=-1,o=-1,c=-1;(t.match(zF)||[]).forEach(function(f,p){var h=parseInt(r[p+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=h;break;case"d":i=h;break;case"h":s=h;break;case"s":c=h;break;case"m":s>=0?o=h:a=h;break}}),c>=0&&o==-1&&a>=0&&(o=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return s==-1&&o==-1&&c==-1?u:n==-1&&a==-1&&i==-1?d:u+"T"+d}var lee=function(){var e={};e.version="1.2.0";function t(){for(var j=0,E=new Array(256),T=0;T!=256;++T)j=T,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,E[T]=j;return typeof Int32Array<"u"?new Int32Array(E):E}var r=t();function n(j){var E=0,T=0,L=0,O=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(L=0;L!=256;++L)O[L]=j[L];for(L=0;L!=256;++L)for(T=j[L],E=256+L;E<4096;E+=256)T=O[E]=T>>>8^j[T&255];var I=[];for(L=1;L!=16;++L)I[L-1]=typeof Int32Array<"u"?O.subarray(L*256,L*256+256):O.slice(L*256,L*256+256);return I}var a=n(r),i=a[0],s=a[1],o=a[2],c=a[3],u=a[4],d=a[5],f=a[6],p=a[7],h=a[8],g=a[9],m=a[10],x=a[11],y=a[12],v=a[13],b=a[14];function S(j,E){for(var T=E^-1,L=0,O=j.length;L<O;)T=T>>>8^r[(T^j.charCodeAt(L++))&255];return~T}function _(j,E){for(var T=E^-1,L=j.length-15,O=0;O<L;)T=b[j[O++]^T&255]^v[j[O++]^T>>8&255]^y[j[O++]^T>>16&255]^x[j[O++]^T>>>24]^m[j[O++]]^g[j[O++]]^h[j[O++]]^p[j[O++]]^f[j[O++]]^d[j[O++]]^u[j[O++]]^c[j[O++]]^o[j[O++]]^s[j[O++]]^i[j[O++]]^r[j[O++]];for(L+=15;O<L;)T=T>>>8^r[(T^j[O++])&255];return~T}function A(j,E){for(var T=E^-1,L=0,O=j.length,I=0,D=0;L<O;)I=j.charCodeAt(L++),I<128?T=T>>>8^r[(T^I)&255]:I<2048?(T=T>>>8^r[(T^(192|I>>6&31))&255],T=T>>>8^r[(T^(128|I&63))&255]):I>=55296&&I<57344?(I=(I&1023)+64,D=j.charCodeAt(L++)&1023,T=T>>>8^r[(T^(240|I>>8&7))&255],T=T>>>8^r[(T^(128|I>>2&63))&255],T=T>>>8^r[(T^(128|D>>6&15|(I&3)<<4))&255],T=T>>>8^r[(T^(128|D&63))&255]):(T=T>>>8^r[(T^(224|I>>12&15))&255],T=T>>>8^r[(T^(128|I>>6&63))&255],T=T>>>8^r[(T^(128|I&63))&255]);return~T}return e.table=r,e.bstr=S,e.buf=_,e.str=A,e}(),Gr=function(){var t={};t.version="1.2.1";function r(W,ue){for(var re=W.split("/"),ie=ue.split("/"),de=0,he=0,Te=Math.min(re.length,ie.length);de<Te;++de){if(he=re[de].length-ie[de].length)return he;if(re[de]!=ie[de])return re[de]<ie[de]?-1:1}return re.length-ie.length}function n(W){if(W.charAt(W.length-1)=="/")return W.slice(0,-1).indexOf("/")===-1?W:n(W.slice(0,-1));var ue=W.lastIndexOf("/");return ue===-1?W:W.slice(0,ue+1)}function a(W){if(W.charAt(W.length-1)=="/")return a(W.slice(0,-1));var ue=W.lastIndexOf("/");return ue===-1?W:W.slice(ue+1)}function i(W,ue){typeof ue=="string"&&(ue=new Date(ue));var re=ue.getHours();re=re<<6|ue.getMinutes(),re=re<<5|ue.getSeconds()>>>1,W.write_shift(2,re);var ie=ue.getFullYear()-1980;ie=ie<<4|ue.getMonth()+1,ie=ie<<5|ue.getDate(),W.write_shift(2,ie)}function s(W){var ue=W.read_shift(2)&65535,re=W.read_shift(2)&65535,ie=new Date,de=re&31;re>>>=5;var he=re&15;re>>>=4,ie.setMilliseconds(0),ie.setFullYear(re+1980),ie.setMonth(he-1),ie.setDate(de);var Te=ue&31;ue>>>=5;var De=ue&63;return ue>>>=6,ie.setHours(ue),ie.setMinutes(De),ie.setSeconds(Te<<1),ie}function o(W){_s(W,0);for(var ue={},re=0;W.l<=W.length-4;){var ie=W.read_shift(2),de=W.read_shift(2),he=W.l+de,Te={};switch(ie){case 21589:re=W.read_shift(1),re&1&&(Te.mtime=W.read_shift(4)),de>5&&(re&2&&(Te.atime=W.read_shift(4)),re&4&&(Te.ctime=W.read_shift(4))),Te.mtime&&(Te.mt=new Date(Te.mtime*1e3));break}W.l=he,ue[ie]=Te}return ue}var c;function u(){return c||(c={})}function d(W,ue){if(W[0]==80&&W[1]==75)return Ge(W,ue);if((W[0]|32)==109&&(W[1]|32)==105)return mt(W,ue);if(W.length<512)throw new Error("CFB file size "+W.length+" < 512");var re=3,ie=512,de=0,he=0,Te=0,De=0,Ce=0,ke=[],Le=W.slice(0,512);_s(Le,0);var Je=f(Le);switch(re=Je[0],re){case 3:ie=512;break;case 4:ie=4096;break;case 0:if(Je[1]==0)return Ge(W,ue);default:throw new Error("Major Version: Expected 3 or 4 saw "+re)}ie!==512&&(Le=W.slice(0,ie),_s(Le,28));var at=W.slice(0,ie);p(Le,re);var ut=Le.read_shift(4,"i");if(re===3&&ut!==0)throw new Error("# Directory Sectors: Expected 0 saw "+ut);Le.l+=4,Te=Le.read_shift(4,"i"),Le.l+=4,Le.chk("00100000","Mini Stream Cutoff Size: "),De=Le.read_shift(4,"i"),de=Le.read_shift(4,"i"),Ce=Le.read_shift(4,"i"),he=Le.read_shift(4,"i");for(var tt=-1,ct=0;ct<109&&(tt=Le.read_shift(4,"i"),!(tt<0));++ct)ke[ct]=tt;var Ht=h(W,ie);x(Ce,he,Ht,ie,ke);var Vr=v(Ht,Te,ke,ie);Vr[Te].name="!Directory",de>0&&De!==D&&(Vr[De].name="!MiniFAT"),Vr[ke[0]].name="!FAT",Vr.fat_addrs=ke,Vr.ssz=ie;var hr={},Pn=[],Go=[],ho=[];b(Te,Vr,Ht,Pn,de,hr,Go,De),g(Go,ho,Pn),Pn.shift();var Ko={FileIndex:Go,FullPaths:ho};return ue&&ue.raw&&(Ko.raw={header:at,sectors:Ht}),Ko}function f(W){if(W[W.l]==80&&W[W.l+1]==75)return[0,0];W.chk(z,"Header Signature: "),W.l+=16;var ue=W.read_shift(2,"u");return[W.read_shift(2,"u"),ue]}function p(W,ue){var re=9;switch(W.l+=2,re=W.read_shift(2)){case 9:if(ue!=3)throw new Error("Sector Shift: Expected 9 saw "+re);break;case 12:if(ue!=4)throw new Error("Sector Shift: Expected 12 saw "+re);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+re)}W.chk("0600","Mini Sector Shift: "),W.chk("000000000000","Reserved: ")}function h(W,ue){for(var re=Math.ceil(W.length/ue)-1,ie=[],de=1;de<re;++de)ie[de-1]=W.slice(de*ue,(de+1)*ue);return ie[re-1]=W.slice(re*ue),ie}function g(W,ue,re){for(var ie=0,de=0,he=0,Te=0,De=0,Ce=re.length,ke=[],Le=[];ie<Ce;++ie)ke[ie]=Le[ie]=ie,ue[ie]=re[ie];for(;De<Le.length;++De)ie=Le[De],de=W[ie].L,he=W[ie].R,Te=W[ie].C,ke[ie]===ie&&(de!==-1&&ke[de]!==de&&(ke[ie]=ke[de]),he!==-1&&ke[he]!==he&&(ke[ie]=ke[he])),Te!==-1&&(ke[Te]=ie),de!==-1&&ie!=ke[ie]&&(ke[de]=ke[ie],Le.lastIndexOf(de)<De&&Le.push(de)),he!==-1&&ie!=ke[ie]&&(ke[he]=ke[ie],Le.lastIndexOf(he)<De&&Le.push(he));for(ie=1;ie<Ce;++ie)ke[ie]===ie&&(he!==-1&&ke[he]!==he?ke[ie]=ke[he]:de!==-1&&ke[de]!==de&&(ke[ie]=ke[de]));for(ie=1;ie<Ce;++ie)if(W[ie].type!==0){if(De=ie,De!=ke[De])do De=ke[De],ue[ie]=ue[De]+"/"+ue[ie];while(De!==0&&ke[De]!==-1&&De!=ke[De]);ke[ie]=-1}for(ue[0]+="/",ie=1;ie<Ce;++ie)W[ie].type!==2&&(ue[ie]+="/")}function m(W,ue,re){for(var ie=W.start,de=W.size,he=[],Te=ie;re&&de>0&&Te>=0;)he.push(ue.slice(Te*I,Te*I+I)),de-=I,Te=Fd(re,Te*4);return he.length===0?$e(0):Ja(he).slice(0,W.size)}function x(W,ue,re,ie,de){var he=D;if(W===D){if(ue!==0)throw new Error("DIFAT chain shorter than expected")}else if(W!==-1){var Te=re[W],De=(ie>>>2)-1;if(!Te)return;for(var Ce=0;Ce<De&&(he=Fd(Te,Ce*4))!==D;++Ce)de.push(he);x(Fd(Te,ie-4),ue-1,re,ie,de)}}function y(W,ue,re,ie,de){var he=[],Te=[];de||(de=[]);var De=ie-1,Ce=0,ke=0;for(Ce=ue;Ce>=0;){de[Ce]=!0,he[he.length]=Ce,Te.push(W[Ce]);var Le=re[Math.floor(Ce*4/ie)];if(ke=Ce*4&De,ie<4+ke)throw new Error("FAT boundary crossed: "+Ce+" 4 "+ie);if(!W[Le])break;Ce=Fd(W[Le],ke)}return{nodes:he,data:cO([Te])}}function v(W,ue,re,ie){var de=W.length,he=[],Te=[],De=[],Ce=[],ke=ie-1,Le=0,Je=0,at=0,ut=0;for(Le=0;Le<de;++Le)if(De=[],at=Le+ue,at>=de&&(at-=de),!Te[at]){Ce=[];var tt=[];for(Je=at;Je>=0;){tt[Je]=!0,Te[Je]=!0,De[De.length]=Je,Ce.push(W[Je]);var ct=re[Math.floor(Je*4/ie)];if(ut=Je*4&ke,ie<4+ut)throw new Error("FAT boundary crossed: "+Je+" 4 "+ie);if(!W[ct]||(Je=Fd(W[ct],ut),tt[Je]))break}he[at]={nodes:De,data:cO([Ce])}}return he}function b(W,ue,re,ie,de,he,Te,De){for(var Ce=0,ke=ie.length?2:0,Le=ue[W].data,Je=0,at=0,ut;Je<Le.length;Je+=128){var tt=Le.slice(Je,Je+128);_s(tt,64),at=tt.read_shift(2),ut=y3(tt,0,at-ke),ie.push(ut);var ct={name:ut,type:tt.read_shift(1),color:tt.read_shift(1),L:tt.read_shift(4,"i"),R:tt.read_shift(4,"i"),C:tt.read_shift(4,"i"),clsid:tt.read_shift(16),state:tt.read_shift(4,"i"),start:0,size:0},Ht=tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2);Ht!==0&&(ct.ct=S(tt,tt.l-8));var Vr=tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2);Vr!==0&&(ct.mt=S(tt,tt.l-8)),ct.start=tt.read_shift(4,"i"),ct.size=tt.read_shift(4,"i"),ct.size<0&&ct.start<0&&(ct.size=ct.type=0,ct.start=D,ct.name=""),ct.type===5?(Ce=ct.start,de>0&&Ce!==D&&(ue[Ce].name="!StreamData")):ct.size>=4096?(ct.storage="fat",ue[ct.start]===void 0&&(ue[ct.start]=y(re,ct.start,ue.fat_addrs,ue.ssz)),ue[ct.start].name=ct.name,ct.content=ue[ct.start].data.slice(0,ct.size)):(ct.storage="minifat",ct.size<0?ct.size=0:Ce!==D&&ct.start!==D&&ue[Ce]&&(ct.content=m(ct,ue[Ce].data,(ue[De]||{}).data))),ct.content&&_s(ct.content,0),he[ut]=ct,Te.push(ct)}}function S(W,ue){return new Date((Ns(W,ue+4)/1e7*Math.pow(2,32)+Ns(W,ue)/1e7-11644473600)*1e3)}function _(W,ue){return u(),d(c.readFileSync(W),ue)}function A(W,ue){var re=ue&&ue.type;switch(re||Er&&Buffer.isBuffer(W)&&(re="buffer"),re||"base64"){case"file":return _(W,ue);case"base64":return d(Io(vc(W)),ue);case"binary":return d(Io(W),ue)}return d(W,ue)}function j(W,ue){var re=ue||{},ie=re.root||"Root Entry";if(W.FullPaths||(W.FullPaths=[]),W.FileIndex||(W.FileIndex=[]),W.FullPaths.length!==W.FileIndex.length)throw new Error("inconsistent CFB structure");W.FullPaths.length===0&&(W.FullPaths[0]=ie+"/",W.FileIndex[0]={name:ie,type:5}),re.CLSID&&(W.FileIndex[0].clsid=re.CLSID),E(W)}function E(W){var ue="Sh33tJ5";if(!Gr.find(W,"/"+ue)){var re=$e(4);re[0]=55,re[1]=re[3]=50,re[2]=54,W.FileIndex.push({name:ue,type:2,content:re,size:4,L:69,R:69,C:69}),W.FullPaths.push(W.FullPaths[0]+ue),T(W)}}function T(W,ue){j(W);for(var re=!1,ie=!1,de=W.FullPaths.length-1;de>=0;--de){var he=W.FileIndex[de];switch(he.type){case 0:ie?re=!0:(W.FileIndex.pop(),W.FullPaths.pop());break;case 1:case 2:case 5:ie=!0,isNaN(he.R*he.L*he.C)&&(re=!0),he.R>-1&&he.L>-1&&he.R==he.L&&(re=!0);break;default:re=!0;break}}if(!(!re&&!ue)){var Te=new Date(1987,1,19),De=0,Ce=Object.create?Object.create(null):{},ke=[];for(de=0;de<W.FullPaths.length;++de)Ce[W.FullPaths[de]]=!0,W.FileIndex[de].type!==0&&ke.push([W.FullPaths[de],W.FileIndex[de]]);for(de=0;de<ke.length;++de){var Le=n(ke[de][0]);ie=Ce[Le],ie||(ke.push([Le,{name:a(Le).replace("/",""),type:1,clsid:se,ct:Te,mt:Te,content:null}]),Ce[Le]=!0)}for(ke.sort(function(ut,tt){return r(ut[0],tt[0])}),W.FullPaths=[],W.FileIndex=[],de=0;de<ke.length;++de)W.FullPaths[de]=ke[de][0],W.FileIndex[de]=ke[de][1];for(de=0;de<ke.length;++de){var Je=W.FileIndex[de],at=W.FullPaths[de];if(Je.name=a(at).replace("/",""),Je.L=Je.R=Je.C=-(Je.color=1),Je.size=Je.content?Je.content.length:0,Je.start=0,Je.clsid=Je.clsid||se,de===0)Je.C=ke.length>1?1:-1,Je.size=0,Je.type=5;else if(at.slice(-1)=="/"){for(De=de+1;De<ke.length&&n(W.FullPaths[De])!=at;++De);for(Je.C=De>=ke.length?-1:De,De=de+1;De<ke.length&&n(W.FullPaths[De])!=n(at);++De);Je.R=De>=ke.length?-1:De,Je.type=1}else n(W.FullPaths[de+1]||"")==n(at)&&(Je.R=de+1),Je.type=2}}}function L(W,ue){var re=ue||{};if(re.fileType=="mad")return uo(W,re);switch(T(W),re.fileType){case"zip":return yt(W,re)}var ie=function(ut){for(var tt=0,ct=0,Ht=0;Ht<ut.FileIndex.length;++Ht){var Vr=ut.FileIndex[Ht];if(Vr.content){var hr=Vr.content.length;hr>0&&(hr<4096?tt+=hr+63>>6:ct+=hr+511>>9)}}for(var Pn=ut.FullPaths.length+3>>2,Go=tt+7>>3,ho=tt+127>>7,Ko=Go+ct+Pn+ho,Ds=Ko+127>>7,Mc=Ds<=109?0:Math.ceil((Ds-109)/127);Ko+Ds+Mc+127>>7>Ds;)Mc=++Ds<=109?0:Math.ceil((Ds-109)/127);var Qn=[1,Mc,Ds,ho,Pn,ct,tt,0];return ut.FileIndex[0].size=tt<<6,Qn[7]=(ut.FileIndex[0].start=Qn[0]+Qn[1]+Qn[2]+Qn[3]+Qn[4]+Qn[5])+(Qn[6]+7>>3),Qn}(W),de=$e(ie[7]<<9),he=0,Te=0;{for(he=0;he<8;++he)de.write_shift(1,Y[he]);for(he=0;he<8;++he)de.write_shift(2,0);for(de.write_shift(2,62),de.write_shift(2,3),de.write_shift(2,65534),de.write_shift(2,9),de.write_shift(2,6),he=0;he<3;++he)de.write_shift(2,0);for(de.write_shift(4,0),de.write_shift(4,ie[2]),de.write_shift(4,ie[0]+ie[1]+ie[2]+ie[3]-1),de.write_shift(4,0),de.write_shift(4,4096),de.write_shift(4,ie[3]?ie[0]+ie[1]+ie[2]-1:D),de.write_shift(4,ie[3]),de.write_shift(-4,ie[1]?ie[0]-1:D),de.write_shift(4,ie[1]),he=0;he<109;++he)de.write_shift(-4,he<ie[2]?ie[1]+he:-1)}if(ie[1])for(Te=0;Te<ie[1];++Te){for(;he<236+Te*127;++he)de.write_shift(-4,he<ie[2]?ie[1]+he:-1);de.write_shift(-4,Te===ie[1]-1?D:Te+1)}var De=function(ut){for(Te+=ut;he<Te-1;++he)de.write_shift(-4,he+1);ut&&(++he,de.write_shift(-4,D))};for(Te=he=0,Te+=ie[1];he<Te;++he)de.write_shift(-4,ee.DIFSECT);for(Te+=ie[2];he<Te;++he)de.write_shift(-4,ee.FATSECT);De(ie[3]),De(ie[4]);for(var Ce=0,ke=0,Le=W.FileIndex[0];Ce<W.FileIndex.length;++Ce)Le=W.FileIndex[Ce],Le.content&&(ke=Le.content.length,!(ke<4096)&&(Le.start=Te,De(ke+511>>9)));for(De(ie[6]+7>>3);de.l&511;)de.write_shift(-4,ee.ENDOFCHAIN);for(Te=he=0,Ce=0;Ce<W.FileIndex.length;++Ce)Le=W.FileIndex[Ce],Le.content&&(ke=Le.content.length,!(!ke||ke>=4096)&&(Le.start=Te,De(ke+63>>6)));for(;de.l&511;)de.write_shift(-4,ee.ENDOFCHAIN);for(he=0;he<ie[4]<<2;++he){var Je=W.FullPaths[he];if(!Je||Je.length===0){for(Ce=0;Ce<17;++Ce)de.write_shift(4,0);for(Ce=0;Ce<3;++Ce)de.write_shift(4,-1);for(Ce=0;Ce<12;++Ce)de.write_shift(4,0);continue}Le=W.FileIndex[he],he===0&&(Le.start=Le.size?Le.start-1:D);var at=he===0&&re.root||Le.name;if(ke=2*(at.length+1),de.write_shift(64,at,"utf16le"),de.write_shift(2,ke),de.write_shift(1,Le.type),de.write_shift(1,Le.color),de.write_shift(-4,Le.L),de.write_shift(-4,Le.R),de.write_shift(-4,Le.C),Le.clsid)de.write_shift(16,Le.clsid,"hex");else for(Ce=0;Ce<4;++Ce)de.write_shift(4,0);de.write_shift(4,Le.state||0),de.write_shift(4,0),de.write_shift(4,0),de.write_shift(4,0),de.write_shift(4,0),de.write_shift(4,Le.start),de.write_shift(4,Le.size),de.write_shift(4,0)}for(he=1;he<W.FileIndex.length;++he)if(Le=W.FileIndex[he],Le.size>=4096)if(de.l=Le.start+1<<9,Er&&Buffer.isBuffer(Le.content))Le.content.copy(de,de.l,0,Le.size),de.l+=Le.size+511&-512;else{for(Ce=0;Ce<Le.size;++Ce)de.write_shift(1,Le.content[Ce]);for(;Ce&511;++Ce)de.write_shift(1,0)}for(he=1;he<W.FileIndex.length;++he)if(Le=W.FileIndex[he],Le.size>0&&Le.size<4096)if(Er&&Buffer.isBuffer(Le.content))Le.content.copy(de,de.l,0,Le.size),de.l+=Le.size+63&-64;else{for(Ce=0;Ce<Le.size;++Ce)de.write_shift(1,Le.content[Ce]);for(;Ce&63;++Ce)de.write_shift(1,0)}if(Er)de.l=de.length;else for(;de.l<de.length;)de.write_shift(1,0);return de}function O(W,ue){var re=W.FullPaths.map(function(Ce){return Ce.toUpperCase()}),ie=re.map(function(Ce){var ke=Ce.split("/");return ke[ke.length-(Ce.slice(-1)=="/"?2:1)]}),de=!1;ue.charCodeAt(0)===47?(de=!0,ue=re[0].slice(0,-1)+ue):de=ue.indexOf("/")!==-1;var he=ue.toUpperCase(),Te=de===!0?re.indexOf(he):ie.indexOf(he);if(Te!==-1)return W.FileIndex[Te];var De=!he.match(xx);for(he=he.replace(Jm,""),De&&(he=he.replace(xx,"!")),Te=0;Te<re.length;++Te)if((De?re[Te].replace(xx,"!"):re[Te]).replace(Jm,"")==he||(De?ie[Te].replace(xx,"!"):ie[Te]).replace(Jm,"")==he)return W.FileIndex[Te];return null}var I=64,D=-2,z="d0cf11e0a1b11ae1",Y=[208,207,17,224,161,177,26,225],se="00000000000000000000000000000000",ee={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:z,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:se,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function J(W,ue,re){u();var ie=L(W,re);c.writeFileSync(ue,ie)}function oe(W){for(var ue=new Array(W.length),re=0;re<W.length;++re)ue[re]=String.fromCharCode(W[re]);return ue.join("")}function we(W,ue){var re=L(W,ue);switch(ue&&ue.type||"buffer"){case"file":return u(),c.writeFileSync(ue.filename,re),re;case"binary":return typeof re=="string"?re:oe(re);case"base64":return Dg(typeof re=="string"?re:oe(re));case"buffer":if(Er)return Buffer.isBuffer(re)?re:kc(re);case"array":return typeof re=="string"?Io(re):re}return re}var xe;function k(W){try{var ue=W.InflateRaw,re=new ue;if(re._processChunk(new Uint8Array([3,0]),re._finishFlushFlag),re.bytesRead)xe=W;else throw new Error("zlib does not expose bytesRead")}catch(ie){console.error("cannot use native zlib: "+(ie.message||ie))}}function M(W,ue){if(!xe)return _r(W,ue);var re=xe.InflateRaw,ie=new re,de=ie._processChunk(W.slice(W.l),ie._finishFlushFlag);return W.l+=ie.bytesRead,de}function B(W){return xe?xe.deflateRawSync(W):qt(W)}var U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],pe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function K(W){var ue=(W<<1|W<<11)&139536|(W<<5|W<<15)&558144;return(ue>>16|ue>>8|ue)&255}for(var te=typeof Uint8Array<"u",ae=te?new Uint8Array(256):[],be=0;be<256;++be)ae[be]=K(be);function ve(W,ue){var re=ae[W&255];return ue<=8?re>>>8-ue:(re=re<<8|ae[W>>8&255],ue<=16?re>>>16-ue:(re=re<<8|ae[W>>16&255],re>>>24-ue))}function Fe(W,ue){var re=ue&7,ie=ue>>>3;return(W[ie]|(re<=6?0:W[ie+1]<<8))>>>re&3}function Me(W,ue){var re=ue&7,ie=ue>>>3;return(W[ie]|(re<=5?0:W[ie+1]<<8))>>>re&7}function X(W,ue){var re=ue&7,ie=ue>>>3;return(W[ie]|(re<=4?0:W[ie+1]<<8))>>>re&15}function Ie(W,ue){var re=ue&7,ie=ue>>>3;return(W[ie]|(re<=3?0:W[ie+1]<<8))>>>re&31}function Re(W,ue){var re=ue&7,ie=ue>>>3;return(W[ie]|(re<=1?0:W[ie+1]<<8))>>>re&127}function Qe(W,ue,re){var ie=ue&7,de=ue>>>3,he=(1<<re)-1,Te=W[de]>>>ie;return re<8-ie||(Te|=W[de+1]<<8-ie,re<16-ie)||(Te|=W[de+2]<<16-ie,re<24-ie)||(Te|=W[de+3]<<24-ie),Te&he}function Ue(W,ue,re){var ie=ue&7,de=ue>>>3;return ie<=5?W[de]|=(re&7)<<ie:(W[de]|=re<<ie&255,W[de+1]=(re&7)>>8-ie),ue+3}function pt(W,ue,re){var ie=ue&7,de=ue>>>3;return re=(re&1)<<ie,W[de]|=re,ue+1}function st(W,ue,re){var ie=ue&7,de=ue>>>3;return re<<=ie,W[de]|=re&255,re>>>=8,W[de+1]=re,ue+8}function dt(W,ue,re){var ie=ue&7,de=ue>>>3;return re<<=ie,W[de]|=re&255,re>>>=8,W[de+1]=re&255,W[de+2]=re>>>8,ue+16}function rt(W,ue){var re=W.length,ie=2*re>ue?2*re:ue+5,de=0;if(re>=ue)return W;if(Er){var he=Kk(ie);if(W.copy)W.copy(he);else for(;de<W.length;++de)he[de]=W[de];return he}else if(te){var Te=new Uint8Array(ie);if(Te.set)Te.set(W);else for(;de<re;++de)Te[de]=W[de];return Te}return W.length=ie,W}function Dt(W){for(var ue=new Array(W),re=0;re<W;++re)ue[re]=0;return ue}function ht(W,ue,re){var ie=1,de=0,he=0,Te=0,De=0,Ce=W.length,ke=te?new Uint16Array(32):Dt(32);for(he=0;he<32;++he)ke[he]=0;for(he=Ce;he<re;++he)W[he]=0;Ce=W.length;var Le=te?new Uint16Array(Ce):Dt(Ce);for(he=0;he<Ce;++he)ke[de=W[he]]++,ie<de&&(ie=de),Le[he]=0;for(ke[0]=0,he=1;he<=ie;++he)ke[he+16]=De=De+ke[he-1]<<1;for(he=0;he<Ce;++he)De=W[he],De!=0&&(Le[he]=ke[De+16]++);var Je=0;for(he=0;he<Ce;++he)if(Je=W[he],Je!=0)for(De=ve(Le[he],ie)>>ie-Je,Te=(1<<ie+4-Je)-1;Te>=0;--Te)ue[De|Te<<Je]=Je&15|he<<4;return ie}var $t=te?new Uint16Array(512):Dt(512),tr=te?new Uint16Array(32):Dt(32);if(!te){for(var Tt=0;Tt<512;++Tt)$t[Tt]=0;for(Tt=0;Tt<32;++Tt)tr[Tt]=0}(function(){for(var W=[],ue=0;ue<32;ue++)W.push(5);ht(W,tr,32);var re=[];for(ue=0;ue<=143;ue++)re.push(8);for(;ue<=255;ue++)re.push(9);for(;ue<=279;ue++)re.push(7);for(;ue<=287;ue++)re.push(8);ht(re,$t,288)})();var _t=function(){for(var ue=te?new Uint8Array(32768):[],re=0,ie=0;re<pe.length-1;++re)for(;ie<pe[re+1];++ie)ue[ie]=re;for(;ie<32768;++ie)ue[ie]=29;var de=te?new Uint8Array(259):[];for(re=0,ie=0;re<Z.length-1;++re)for(;ie<Z[re+1];++ie)de[ie]=re;function he(De,Ce){for(var ke=0;ke<De.length;){var Le=Math.min(65535,De.length-ke),Je=ke+Le==De.length;for(Ce.write_shift(1,+Je),Ce.write_shift(2,Le),Ce.write_shift(2,~Le&65535);Le-- >0;)Ce[Ce.l++]=De[ke++]}return Ce.l}function Te(De,Ce){for(var ke=0,Le=0,Je=te?new Uint16Array(32768):[];Le<De.length;){var at=Math.min(65535,De.length-Le);if(at<10){for(ke=Ue(Ce,ke,+(Le+at==De.length)),ke&7&&(ke+=8-(ke&7)),Ce.l=ke/8|0,Ce.write_shift(2,at),Ce.write_shift(2,~at&65535);at-- >0;)Ce[Ce.l++]=De[Le++];ke=Ce.l*8;continue}ke=Ue(Ce,ke,+(Le+at==De.length)+2);for(var ut=0;at-- >0;){var tt=De[Le];ut=(ut<<5^tt)&32767;var ct=-1,Ht=0;if((ct=Je[ut])&&(ct|=Le&-32768,ct>Le&&(ct-=32768),ct<Le))for(;De[ct+Ht]==De[Le+Ht]&&Ht<250;)++Ht;if(Ht>2){tt=de[Ht],tt<=22?ke=st(Ce,ke,ae[tt+1]>>1)-1:(st(Ce,ke,3),ke+=5,st(Ce,ke,ae[tt-23]>>5),ke+=3);var Vr=tt<8?0:tt-4>>2;Vr>0&&(dt(Ce,ke,Ht-Z[tt]),ke+=Vr),tt=ue[Le-ct],ke=st(Ce,ke,ae[tt]>>3),ke-=3;var hr=tt<4?0:tt-2>>1;hr>0&&(dt(Ce,ke,Le-ct-pe[tt]),ke+=hr);for(var Pn=0;Pn<Ht;++Pn)Je[ut]=Le&32767,ut=(ut<<5^De[Le])&32767,++Le;at-=Ht-1}else tt<=143?tt=tt+48:ke=pt(Ce,ke,1),ke=st(Ce,ke,ae[tt]),Je[ut]=Le&32767,++Le}ke=st(Ce,ke,0)-1}return Ce.l=(ke+7)/8|0,Ce.l}return function(Ce,ke){return Ce.length<8?he(Ce,ke):Te(Ce,ke)}}();function qt(W){var ue=$e(50+Math.floor(W.length*1.1)),re=_t(W,ue);return ue.slice(0,re)}var Nt=te?new Uint16Array(32768):Dt(32768),Xr=te?new Uint16Array(32768):Dt(32768),lr=te?new Uint16Array(128):Dt(128),Yt=1,Jt=1;function Lr(W,ue){var re=Ie(W,ue)+257;ue+=5;var ie=Ie(W,ue)+1;ue+=5;var de=X(W,ue)+4;ue+=4;for(var he=0,Te=te?new Uint8Array(19):Dt(19),De=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ce=1,ke=te?new Uint8Array(8):Dt(8),Le=te?new Uint8Array(8):Dt(8),Je=Te.length,at=0;at<de;++at)Te[U[at]]=he=Me(W,ue),Ce<he&&(Ce=he),ke[he]++,ue+=3;var ut=0;for(ke[0]=0,at=1;at<=Ce;++at)Le[at]=ut=ut+ke[at-1]<<1;for(at=0;at<Je;++at)(ut=Te[at])!=0&&(De[at]=Le[ut]++);var tt=0;for(at=0;at<Je;++at)if(tt=Te[at],tt!=0){ut=ae[De[at]]>>8-tt;for(var ct=(1<<7-tt)-1;ct>=0;--ct)lr[ut|ct<<tt]=tt&7|at<<3}var Ht=[];for(Ce=1;Ht.length<re+ie;)switch(ut=lr[Re(W,ue)],ue+=ut&7,ut>>>=3){case 16:for(he=3+Fe(W,ue),ue+=2,ut=Ht[Ht.length-1];he-- >0;)Ht.push(ut);break;case 17:for(he=3+Me(W,ue),ue+=3;he-- >0;)Ht.push(0);break;case 18:for(he=11+Re(W,ue),ue+=7;he-- >0;)Ht.push(0);break;default:Ht.push(ut),Ce<ut&&(Ce=ut);break}var Vr=Ht.slice(0,re),hr=Ht.slice(re);for(at=re;at<286;++at)Vr[at]=0;for(at=ie;at<30;++at)hr[at]=0;return Yt=ht(Vr,Nt,286),Jt=ht(hr,Xr,30),ue}function kt(W,ue){if(W[0]==3&&!(W[1]&3))return[wf(ue),2];for(var re=0,ie=0,de=Kk(ue||1<<18),he=0,Te=de.length>>>0,De=0,Ce=0;!(ie&1);){if(ie=Me(W,re),re+=3,ie>>>1)ie>>1==1?(De=9,Ce=5):(re=Lr(W,re),De=Yt,Ce=Jt);else{re&7&&(re+=8-(re&7));var ke=W[re>>>3]|W[(re>>>3)+1]<<8;if(re+=32,ke>0)for(!ue&&Te<he+ke&&(de=rt(de,he+ke),Te=de.length);ke-- >0;)de[he++]=W[re>>>3],re+=8;continue}for(;;){!ue&&Te<he+32767&&(de=rt(de,he+32767),Te=de.length);var Le=Qe(W,re,De),Je=ie>>>1==1?$t[Le]:Nt[Le];if(re+=Je&15,Je>>>=4,!(Je>>>8&255))de[he++]=Je;else{if(Je==256)break;Je-=257;var at=Je<8?0:Je-4>>2;at>5&&(at=0);var ut=he+Z[Je];at>0&&(ut+=Qe(W,re,at),re+=at),Le=Qe(W,re,Ce),Je=ie>>>1==1?tr[Le]:Xr[Le],re+=Je&15,Je>>>=4;var tt=Je<4?0:Je-2>>1,ct=pe[Je];for(tt>0&&(ct+=Qe(W,re,tt),re+=tt),!ue&&Te<ut&&(de=rt(de,ut+100),Te=de.length);he<ut;)de[he]=de[he-ct],++he}}}return ue?[de,re+7>>>3]:[de.slice(0,he),re+7>>>3]}function _r(W,ue){var re=W.slice(W.l||0),ie=kt(re,ue);return W.l+=ie[1],ie[0]}function Rt(W,ue){if(W)typeof console<"u"&&console.error(ue);else throw new Error(ue)}function Ge(W,ue){var re=W;_s(re,0);var ie=[],de=[],he={FileIndex:ie,FullPaths:de};j(he,{root:ue.root});for(var Te=re.length-4;(re[Te]!=80||re[Te+1]!=75||re[Te+2]!=5||re[Te+3]!=6)&&Te>=0;)--Te;re.l=Te+4,re.l+=4;var De=re.read_shift(2);re.l+=6;var Ce=re.read_shift(4);for(re.l=Ce,Te=0;Te<De;++Te){re.l+=20;var ke=re.read_shift(4),Le=re.read_shift(4),Je=re.read_shift(2),at=re.read_shift(2),ut=re.read_shift(2);re.l+=8;var tt=re.read_shift(4),ct=o(re.slice(re.l+Je,re.l+Je+at));re.l+=Je+at+ut;var Ht=re.l;re.l=tt+4,We(re,ke,Le,he,ct),re.l=Ht}return he}function We(W,ue,re,ie,de){W.l+=2;var he=W.read_shift(2),Te=W.read_shift(2),De=s(W);if(he&8257)throw new Error("Unsupported ZIP encryption");for(var Ce=W.read_shift(4),ke=W.read_shift(4),Le=W.read_shift(4),Je=W.read_shift(2),at=W.read_shift(2),ut="",tt=0;tt<Je;++tt)ut+=String.fromCharCode(W[W.l++]);if(at){var ct=o(W.slice(W.l,W.l+at));(ct[21589]||{}).mt&&(De=ct[21589].mt),((de||{})[21589]||{}).mt&&(De=de[21589].mt)}W.l+=at;var Ht=W.slice(W.l,W.l+ke);switch(Te){case 8:Ht=M(W,Le);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Te)}var Vr=!1;he&8&&(Ce=W.read_shift(4),Ce==134695760&&(Ce=W.read_shift(4),Vr=!0),ke=W.read_shift(4),Le=W.read_shift(4)),ke!=ue&&Rt(Vr,"Bad compressed size: "+ue+" != "+ke),Le!=re&&Rt(Vr,"Bad uncompressed size: "+re+" != "+Le),ni(ie,ut,Ht,{unsafe:!0,mt:De})}function yt(W,ue){var re=ue||{},ie=[],de=[],he=$e(1),Te=re.compression?8:0,De=0,Ce=0,ke=0,Le=0,Je=0,at=W.FullPaths[0],ut=at,tt=W.FileIndex[0],ct=[],Ht=0;for(Ce=1;Ce<W.FullPaths.length;++Ce)if(ut=W.FullPaths[Ce].slice(at.length),tt=W.FileIndex[Ce],!(!tt.size||!tt.content||ut=="Sh33tJ5")){var Vr=Le,hr=$e(ut.length);for(ke=0;ke<ut.length;++ke)hr.write_shift(1,ut.charCodeAt(ke)&127);hr=hr.slice(0,hr.l),ct[Je]=lee.buf(tt.content,0);var Pn=tt.content;Te==8&&(Pn=B(Pn)),he=$e(30),he.write_shift(4,67324752),he.write_shift(2,20),he.write_shift(2,De),he.write_shift(2,Te),tt.mt?i(he,tt.mt):he.write_shift(4,0),he.write_shift(-4,ct[Je]),he.write_shift(4,Pn.length),he.write_shift(4,tt.content.length),he.write_shift(2,hr.length),he.write_shift(2,0),Le+=he.length,ie.push(he),Le+=hr.length,ie.push(hr),Le+=Pn.length,ie.push(Pn),he=$e(46),he.write_shift(4,33639248),he.write_shift(2,0),he.write_shift(2,20),he.write_shift(2,De),he.write_shift(2,Te),he.write_shift(4,0),he.write_shift(-4,ct[Je]),he.write_shift(4,Pn.length),he.write_shift(4,tt.content.length),he.write_shift(2,hr.length),he.write_shift(2,0),he.write_shift(2,0),he.write_shift(2,0),he.write_shift(2,0),he.write_shift(4,0),he.write_shift(4,Vr),Ht+=he.l,de.push(he),Ht+=hr.length,de.push(hr),++Je}return he=$e(22),he.write_shift(4,101010256),he.write_shift(2,0),he.write_shift(2,0),he.write_shift(2,Je),he.write_shift(2,Je),he.write_shift(4,Ht),he.write_shift(4,Le),he.write_shift(2,0),Ja([Ja(ie),Ja(de),he])}var Lt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function gr(W,ue){if(W.ctype)return W.ctype;var re=W.name||"",ie=re.match(/\.([^\.]+)$/);return ie&&Lt[ie[1]]||ue&&(ie=(re=ue).match(/[\.\\]([^\.\\])+$/),ie&&Lt[ie[1]])?Lt[ie[1]]:"application/octet-stream"}function co(W){for(var ue=Dg(W),re=[],ie=0;ie<ue.length;ie+=76)re.push(ue.slice(ie,ie+76));return re.join(`\r
`)+`\r
`}function On(W){var ue=W.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ke){var Le=ke.charCodeAt(0).toString(16).toUpperCase();return"="+(Le.length==1?"0"+Le:Le)});ue=ue.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ue.charAt(0)==`
`&&(ue="=0D"+ue.slice(1)),ue=ue.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var re=[],ie=ue.split(`\r
`),de=0;de<ie.length;++de){var he=ie[de];if(he.length==0){re.push("");continue}for(var Te=0;Te<he.length;){var De=76,Ce=he.slice(Te,Te+De);Ce.charAt(De-1)=="="?De--:Ce.charAt(De-2)=="="?De-=2:Ce.charAt(De-3)=="="&&(De-=3),Ce=he.slice(Te,Te+De),Te+=De,Te<he.length&&(Ce+="="),re.push(Ce)}}return re.join(`\r
`)}function Aa(W){for(var ue=[],re=0;re<W.length;++re){for(var ie=W[re];re<=W.length&&ie.charAt(ie.length-1)=="=";)ie=ie.slice(0,ie.length-1)+W[++re];ue.push(ie)}for(var de=0;de<ue.length;++de)ue[de]=ue[de].replace(/[=][0-9A-Fa-f]{2}/g,function(he){return String.fromCharCode(parseInt(he.slice(1),16))});return Io(ue.join(`\r
`))}function xi(W,ue,re){for(var ie="",de="",he="",Te,De=0;De<10;++De){var Ce=ue[De];if(!Ce||Ce.match(/^\s*$/))break;var ke=Ce.match(/^(.*?):\s*([^\s].*)$/);if(ke)switch(ke[1].toLowerCase()){case"content-location":ie=ke[2].trim();break;case"content-type":he=ke[2].trim();break;case"content-transfer-encoding":de=ke[2].trim();break}}switch(++De,de.toLowerCase()){case"base64":Te=Io(vc(ue.slice(De).join("")));break;case"quoted-printable":Te=Aa(ue.slice(De));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+de)}var Le=ni(W,ie.slice(re.length),Te,{unsafe:!0});he&&(Le.ctype=he)}function mt(W,ue){if(oe(W.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var re=ue&&ue.root||"",ie=(Er&&Buffer.isBuffer(W)?W.toString("binary"):oe(W)).split(`\r
`),de=0,he="";for(de=0;de<ie.length;++de)if(he=ie[de],!!/^Content-Location:/i.test(he)&&(he=he.slice(he.indexOf("file")),re||(re=he.slice(0,he.lastIndexOf("/")+1)),he.slice(0,re.length)!=re))for(;re.length>0&&(re=re.slice(0,re.length-1),re=re.slice(0,re.lastIndexOf("/")+1),he.slice(0,re.length)!=re););var Te=(ie[1]||"").match(/boundary="(.*?)"/);if(!Te)throw new Error("MAD cannot find boundary");var De="--"+(Te[1]||""),Ce=[],ke=[],Le={FileIndex:Ce,FullPaths:ke};j(Le);var Je,at=0;for(de=0;de<ie.length;++de){var ut=ie[de];ut!==De&&ut!==De+"--"||(at++&&xi(Le,ie.slice(Je,de),re),Je=de)}return Le}function uo(W,ue){var re=ue||{},ie=re.boundary||"SheetJS";ie="------="+ie;for(var de=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ie.slice(2)+'"',"","",""],he=W.FullPaths[0],Te=he,De=W.FileIndex[0],Ce=1;Ce<W.FullPaths.length;++Ce)if(Te=W.FullPaths[Ce].slice(he.length),De=W.FileIndex[Ce],!(!De.size||!De.content||Te=="Sh33tJ5")){Te=Te.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Ht){return"_x"+Ht.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Ht){return"_u"+Ht.charCodeAt(0).toString(16)+"_"});for(var ke=De.content,Le=Er&&Buffer.isBuffer(ke)?ke.toString("binary"):oe(ke),Je=0,at=Math.min(1024,Le.length),ut=0,tt=0;tt<=at;++tt)(ut=Le.charCodeAt(tt))>=32&&ut<128&&++Je;var ct=Je>=at*4/5;de.push(ie),de.push("Content-Location: "+(re.root||"file:///C:/SheetJS/")+Te),de.push("Content-Transfer-Encoding: "+(ct?"quoted-printable":"base64")),de.push("Content-Type: "+gr(De,Te)),de.push(""),de.push(ct?On(Le):co(Le))}return de.push(ie+`--\r
`),de.join(`\r
`)}function fo(W){var ue={};return j(ue,W),ue}function ni(W,ue,re,ie){var de=ie&&ie.unsafe;de||j(W);var he=!de&&Gr.find(W,ue);if(!he){var Te=W.FullPaths[0];ue.slice(0,Te.length)==Te?Te=ue:(Te.slice(-1)!="/"&&(Te+="/"),Te=(Te+ue).replace("//","/")),he={name:a(ue),type:2},W.FileIndex.push(he),W.FullPaths.push(Te),de||Gr.utils.cfb_gc(W)}return he.content=re,he.size=re?re.length:0,ie&&(ie.CLSID&&(he.clsid=ie.CLSID),ie.mt&&(he.mt=ie.mt),ie.ct&&(he.ct=ie.ct)),he}function zi(W,ue){j(W);var re=Gr.find(W,ue);if(re){for(var ie=0;ie<W.FileIndex.length;++ie)if(W.FileIndex[ie]==re)return W.FileIndex.splice(ie,1),W.FullPaths.splice(ie,1),!0}return!1}function vn(W,ue,re){j(W);var ie=Gr.find(W,ue);if(ie){for(var de=0;de<W.FileIndex.length;++de)if(W.FileIndex[de]==ie)return W.FileIndex[de].name=a(re),W.FullPaths[de]=re,!0}return!1}function Jn(W){T(W,!0)}return t.find=O,t.read=A,t.parse=d,t.write=we,t.writeFile=J,t.utils={cfb_new:fo,cfb_add:ni,cfb_del:zi,cfb_mov:vn,cfb_gc:Jn,ReadShift:Zm,CheckField:s$,prep_blob:_s,bconcat:Ja,use_zlib:k,_deflateRaw:qt,_inflateRaw:_r,consts:ee},t}();function cee(e){return typeof e=="string"?Y2(e):Array.isArray(e)?RZ(e):e}function Bv(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=Y2(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Fg(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([cee(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var s=document.createElement("a");if(s.download!=null)return s.download=e,s.href=i,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=$v(t)),o.write(t),o.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function ri(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function rO(e,t){for(var r=[],n=ri(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function m3(e){for(var t=[],r=ri(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function Z2(e){for(var t=[],r=ri(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function uee(e){for(var t=[],r=ri(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var ob=new Date(1899,11,30,0,0,0);function as(e,t){var r=e.getTime(),n=ob.getTime()+(e.getTimezoneOffset()-ob.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var qF=new Date,dee=ob.getTime()+(qF.getTimezoneOffset()-ob.getTimezoneOffset())*6e4,nO=qF.getTimezoneOffset();function HF(e){var t=new Date;return t.setTime(e*24*60*60*1e3+dee),t.getTimezoneOffset()!==nO&&t.setTime(t.getTime()+(t.getTimezoneOffset()-nO)*6e4),t}var aO=new Date("2017-02-19T19:06:09.000Z"),WF=isNaN(aO.getFullYear())?new Date("2/19/17"):aO,fee=WF.getFullYear()==2017;function Mi(e,t){var r=new Date(e);if(fee)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(WF.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function ew(e,t){if(Er&&Buffer.isBuffer(e))return e.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function is(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=is(e[r]));return t}function $n(e,t){for(var r="";r.length<t;)r+=e;return r}function sc(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var hee=["january","february","march","april","may","june","july","august","september","october","november","december"];function Mg(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var s=e.toLowerCase();if(s.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(s=s.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),s.length>3&&hee.indexOf(s)==-1)return r}else if(s.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}function or(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return Er?n=kc(r):n=DZ(r),Gr.utils.cfb_add(e,t,n)}Gr.utils.cfb_add(e,t,r)}else e.file(t,r)}function g3(){return Gr.utils.cfb_new()}var ua=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,pee={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},v3=m3(pee),x3=/[&<>'"]/g,mee=/[\u0000-\u0008\u000b-\u001f]/g;function zr(e){var t=e+"";return t.replace(x3,function(r){return v3[r]}).replace(mee,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function iO(e){return zr(e).replace(/ /g,"_x0020_")}var VF=/[\u0000-\u001f]/g;function gee(e){var t=e+"";return t.replace(x3,function(r){return v3[r]}).replace(/\n/g,"<br/>").replace(VF,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function vee(e){var t=e+"";return t.replace(x3,function(r){return v3[r]}).replace(VF,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function xee(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function yee(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function _5(e){for(var t="",r=0,n=0,a=0,i=0,s=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){s=(n&31)<<6,s|=a&63,t+=String.fromCharCode(s);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|i&63);continue}s=e.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(i&63)<<6|s&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function sO(e){var t=wf(2*e.length),r,n,a=1,i=0,s=0,o;for(n=0;n<e.length;n+=a)a=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,s=55296+(r>>>10&1023),r=56320+(r&1023)),s!==0&&(t[i++]=s&255,t[i++]=s>>>8,s=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function oO(e){return kc(e,"binary").toString("utf8")}var bx="foo bar baz",Qm=Er&&(oO(bx)==_5(bx)&&oO||sO(bx)==_5(bx)&&sO)||_5,Fg=Er?function(e){return kc(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},bee=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),GF=/(^\s|\s$|\n)/;function Qa(e,t){return"<"+e+(t.match(GF)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function $g(e){return ri(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function it(e,t,r){return"<"+e+(r!=null?$g(r):"")+(t!=null?(t.match(GF)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function oj(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function wee(e,t){switch(typeof e){case"string":var r=it("vt:lpwstr",zr(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return it((e|0)==e?"vt:i4":"vt:r8",zr(String(e)));case"boolean":return it("vt:bool",e?"true":"false")}if(e instanceof Date)return it("vt:filetime",oj(e));throw new Error("Unable to serialize "+e)}var La={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},yp=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Ss={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function _ee(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,i=5;i>=0;--i)a=a*256+e[t+i];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function See(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,i=0,s=n?-t:t;isFinite(s)?s==0?a=i=0:(a=Math.floor(Math.log(s)/Math.LN2),i=s*Math.pow(2,52-a),a<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?a=-1022:(i-=Math.pow(2,52),a+=1023)):(a=2047,i=isNaN(t)?26985:0);for(var o=0;o<=5;++o,i/=256)e[r+o]=i&255;e[r+6]=(a&15)<<4|i&15,e[r+7]=a>>4|n}var lO=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,i=e[0][n].length;a<i;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},cO=Er?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:kc(t)})):lO(e)}:lO,uO=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode($m(e,a)));return n.join("").replace(Jm,"")},y3=Er?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Jm,""):uO(e,t,r)}:uO,dO=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},KF=Er?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):dO(e,t,r)}:dO,fO=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(wh(e,a)));return n.join("")},Uv=Er?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):fO(t,r,n)}:fO,XF=function(e,t){var r=Ns(e,t);return r>0?Uv(e,t+4,t+4+r-1):""},YF=XF,JF=function(e,t){var r=Ns(e,t);return r>0?Uv(e,t+4,t+4+r-1):""},QF=JF,ZF=function(e,t){var r=2*Ns(e,t);return r>0?Uv(e,t+4,t+4+r-1):""},e$=ZF,t$=function(t,r){var n=Ns(t,r);return n>0?y3(t,r+4,r+4+n):""},r$=t$,n$=function(e,t){var r=Ns(e,t);return r>0?Uv(e,t+4,t+4+r):""},a$=n$,i$=function(e,t){return _ee(e,t)},lb=i$,b3=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Er&&(YF=function(t,r){if(!Buffer.isBuffer(t))return XF(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},QF=function(t,r){if(!Buffer.isBuffer(t))return JF(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},e$=function(t,r){if(!Buffer.isBuffer(t))return ZF(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},r$=function(t,r){if(!Buffer.isBuffer(t))return t$(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},a$=function(t,r){if(!Buffer.isBuffer(t))return n$(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},lb=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):i$(t,r)},b3=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var wh=function(e,t){return e[t]},$m=function(e,t){return e[t+1]*256+e[t]},Nee=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Ns=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Fd=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},jee=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Zm(e,t){var r="",n,a,i=[],s,o,c,u;switch(t){case"dbcs":if(u=this.l,Er&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode($m(this,u)),u+=2;e*=2;break;case"utf8":r=Uv(this,this.l,this.l+e);break;case"utf16le":e*=2,r=y3(this,this.l,this.l+e);break;case"wstr":return Zm.call(this,e,"dbcs");case"lpstr-ansi":r=YF(this,this.l),e=4+Ns(this,this.l);break;case"lpstr-cp":r=QF(this,this.l),e=4+Ns(this,this.l);break;case"lpwstr":r=e$(this,this.l),e=4+2*Ns(this,this.l);break;case"lpp4":e=4+Ns(this,this.l),r=r$(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Ns(this,this.l),r=a$(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(s=wh(this,this.l+e++))!==0;)i.push(vx(s));r=i.join("");break;case"_wstr":for(e=0,r="";(s=$m(this,this.l+e))!==0;)i.push(vx(s)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return s=wh(this,u),this.l=u+1,o=Zm.call(this,e-c,s?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(vx($m(this,u))),u+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return s=wh(this,u),this.l=u+1,o=Zm.call(this,e-c,s?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(vx(wh(this,u))),u+=1}r=i.join("");break;default:switch(e){case 1:return n=wh(this,this.l),this.l++,n;case 2:return n=(t==="i"?Nee:$m)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(n=(e>0?Fd:jee)(this,this.l),this.l+=4,n):(a=Ns(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=lb(this,this.l):a=lb([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=KF(this,this.l,e);break}}return this.l+=e,r}var Aee=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Eee=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Tee=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Cee(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)Tee(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var s=t.charCodeAt(a);this[this.l++]=s&255,this[this.l++]=s>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,Aee(this,t,this.l);break;case 8:if(n=8,r==="f"){See(this,t,this.l);break}case 16:break;case-4:n=4,Eee(this,t,this.l);break}return this.l+=n,this}function s$(e,t){var r=KF(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function _s(e,t){e.l=t,e.read_shift=Zm,e.chk=s$,e.write_shift=Cee}function vl(e,t){e.l+=t}function $e(e){var t=wf(e);return _s(t,0),t}function rs(){var e=[],t=Er?256:2048,r=function(u){var d=$e(u);return _s(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},s=function(){return a(),Ja(e)},o=function(u){a(),n=u,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:o,end:s,_bufs:e}}function Ke(e,t,r,n){var a=+t,i;if(!isNaN(a)){n||(n=_se[a].p||(r||[]).length||0),i=1+(a>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var s=e.next(i);a<=127?s.write_shift(1,a):(s.write_shift(1,(a&127)+128),s.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)s.write_shift(1,(n&127)+128),n>>=7;else{s.write_shift(1,n);break}n>0&&b3(r)&&e.push(r)}}function eg(e,t,r){var n=is(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function hO(e,t,r){var n=is(e);return n.s=eg(n.s,t.s,r),n.e=eg(n.e,t.s,r),n}function tg(e,t){if(e.cRel&&e.c<0)for(e=is(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=is(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Hr(e);return!e.cRel&&e.cRel!=null&&(r=Pee(r)),!e.rRel&&e.rRel!=null&&(r=kee(r)),r}function S5(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+mi(e.s.c)+":"+(e.e.cRel?"":"$")+mi(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+ei(e.s.r)+":"+(e.e.rRel?"":"$")+ei(e.e.r):tg(e.s,t.biff)+":"+tg(e.e,t.biff)}function w3(e){return parseInt(Oee(e),10)-1}function ei(e){return""+(e+1)}function kee(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Oee(e){return e.replace(/\$(\d+)$/,"$1")}function _3(e){for(var t=Lee(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function mi(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Pee(e){return e.replace(/^([A-Z])/,"$$$1")}function Lee(e){return e.replace(/^\$([A-Z])/,"$1")}function Iee(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ia(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Hr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Ls(e){var t=e.indexOf(":");return t==-1?{s:Ia(e),e:Ia(e)}:{s:Ia(e.slice(0,t)),e:Ia(e.slice(t+1))}}function la(e,t){return typeof t>"u"||typeof t=="number"?la(e.s,e.e):(typeof e!="string"&&(e=Hr(e)),typeof t!="string"&&(t=Hr(t)),e==t?e:e+":"+t)}function mn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,i=e.length;for(r=0;n<i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===i||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function pO(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Wu(e.z,r?as(t):t)}catch{}try{return e.w=Wu((e.XF||{}).numFmtId||(r?14:0),r?as(t):t)}catch{return""+t}}function xc(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?zv[e.v]||e.v:t==null?pO(e,e.v):pO(e,t))}function Ff(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function o$(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,i=e||(a?[]:{}),s=0,o=0;if(i&&n.origin!=null){if(typeof n.origin=="number")s=n.origin;else{var c=typeof n.origin=="string"?Ia(n.origin):n.origin;s=c.r,o=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var d=mn(i["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),s==-1&&(u.e.r=s=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=t[f].length;++p)if(!(typeof t[f][p]>"u")){var h={v:t[f][p]},g=s+f,m=o+p;if(u.s.r>g&&(u.s.r=g),u.s.c>m&&(u.s.c=m),u.e.r<g&&(u.e.r=g),u.e.c<m&&(u.e.c=m),t[f][p]&&typeof t[f][p]=="object"&&!Array.isArray(t[f][p])&&!(t[f][p]instanceof Date))h=t[f][p];else if(Array.isArray(h.v)&&(h.f=t[f][p][1],h.v=h.v[0]),h.v===null)if(h.f)h.t="n";else if(n.nullError)h.t="e",h.v=0;else if(n.sheetStubs)h.t="z";else continue;else typeof h.v=="number"?h.t="n":typeof h.v=="boolean"?h.t="b":h.v instanceof Date?(h.z=n.dateNF||Un[14],n.cellDates?(h.t="d",h.w=Wu(h.z,as(h.v))):(h.t="n",h.v=as(h.v),h.w=Wu(h.z,h.v))):h.t="s";if(a)i[g]||(i[g]=[]),i[g][m]&&i[g][m].z&&(h.z=i[g][m].z),i[g][m]=h;else{var x=Hr({c:m,r:g});i[x]&&i[x].z&&(h.z=i[x].z),i[x]=h}}}return u.s.c<1e7&&(i["!ref"]=la(u)),i}function bp(e,t){return o$(null,e,t)}function Ree(e){return e.read_shift(4,"i")}function $o(e,t){return t||(t=$e(4)),t.write_shift(4,e),t}function gi(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Ra(e,t){var r=!1;return t==null&&(r=!0,t=$e(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function Dee(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Mee(e,t){return t||(t=$e(4)),t.write_shift(2,0),t.write_shift(2,0),t}function S3(e,t){var r=e.l,n=e.read_shift(1),a=gi(e),i=[],s={t:a,h:a};if(n&1){for(var o=e.read_shift(4),c=0;c!=o;++c)i.push(Dee(e));s.r=i}else s.r=[{ich:0,ifnt:0}];return e.l=r+t,s}function Fee(e,t){var r=!1;return t==null&&(r=!0,t=$e(15+4*e.t.length)),t.write_shift(1,0),Ra(e.t,t),r?t.slice(0,t.l):t}var $ee=S3;function Bee(e,t){var r=!1;return t==null&&(r=!0,t=$e(23+4*e.t.length)),t.write_shift(1,1),Ra(e.t,t),t.write_shift(4,1),Mee({},t),r?t.slice(0,t.l):t}function so(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function $f(e,t){return t==null&&(t=$e(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Bf(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Uf(e,t){return t==null&&(t=$e(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Uee=gi,l$=Ra;function N3(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function cb(e,t){var r=!1;return t==null&&(r=!0,t=$e(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var zee=gi,lj=N3,j3=cb;function c$(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?lb([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Fd(t,0)>>2;return r?a/100:a}function u$(e,t){t==null&&(t=$e(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function d$(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function qee(e,t){return t||(t=$e(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var zf=d$,wp=qee;function _p(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function _f(e,t){return(t||$e(8)).write_shift(8,e,"f")}function Hee(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),i=e.read_shift(2,"i"),s=e.read_shift(1),o=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=Zee[a];u&&(t.rgb=jO(u));break;case 2:t.rgb=jO([s,o,c]);break;case 3:t.theme=a;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function ub(e,t){if(t||(t=$e(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function Wee(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Vee(e,t){t||(t=$e(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}var f$=2,ys=3,wx=11,db=19,_x=64,Gee=65,Kee=71,Xee=4108,Yee=4126,Ya=80,mO={1:{n:"CodePage",t:f$},2:{n:"Category",t:Ya},3:{n:"PresentationFormat",t:Ya},4:{n:"ByteCount",t:ys},5:{n:"LineCount",t:ys},6:{n:"ParagraphCount",t:ys},7:{n:"SlideCount",t:ys},8:{n:"NoteCount",t:ys},9:{n:"HiddenCount",t:ys},10:{n:"MultimediaClipCount",t:ys},11:{n:"ScaleCrop",t:wx},12:{n:"HeadingPairs",t:Xee},13:{n:"TitlesOfParts",t:Yee},14:{n:"Manager",t:Ya},15:{n:"Company",t:Ya},16:{n:"LinksUpToDate",t:wx},17:{n:"CharacterCount",t:ys},19:{n:"SharedDoc",t:wx},22:{n:"HyperlinksChanged",t:wx},23:{n:"AppVersion",t:ys,p:"version"},24:{n:"DigSig",t:Gee},26:{n:"ContentType",t:Ya},27:{n:"ContentStatus",t:Ya},28:{n:"Language",t:Ya},29:{n:"Version",t:Ya},255:{},2147483648:{n:"Locale",t:db},2147483651:{n:"Behavior",t:db},1919054434:{}},gO={1:{n:"CodePage",t:f$},2:{n:"Title",t:Ya},3:{n:"Subject",t:Ya},4:{n:"Author",t:Ya},5:{n:"Keywords",t:Ya},6:{n:"Comments",t:Ya},7:{n:"Template",t:Ya},8:{n:"LastAuthor",t:Ya},9:{n:"RevNumber",t:Ya},10:{n:"EditTime",t:_x},11:{n:"LastPrinted",t:_x},12:{n:"CreatedDate",t:_x},13:{n:"ModifiedDate",t:_x},14:{n:"PageCount",t:ys},15:{n:"WordCount",t:ys},16:{n:"CharCount",t:ys},17:{n:"Thumbnail",t:Kee},18:{n:"Application",t:Ya},19:{n:"DocSecurity",t:ys},255:{},2147483648:{n:"Locale",t:db},2147483651:{n:"Behavior",t:db},1919054434:{}};function Jee(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Qee=Jee([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Zee=is(Qee),zv={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},ete={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Sx={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function h$(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function p$(e,t){var r=uee(ete),n=[],a;n[n.length]=ua,n[n.length]=it("Types",null,{xmlns:La.CT,"xmlns:xsd":La.xsd,"xmlns:xsi":La.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return it("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=it("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:Sx[c][t.bookType]||Sx[c].xlsx}))},s=function(c){(e[c]||[]).forEach(function(u){n[n.length]=it("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:Sx[c][t.bookType]||Sx[c].xlsx})})},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=it("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return i("workbooks"),s("sheets"),s("charts"),o("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),s("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Sr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function m$(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function e0(e){var t=[ua,it("Relationships",null,{xmlns:La.RELS})];return ri(e["!id"]).forEach(function(r){t[t.length]=it("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Fr(e,t,r,n,a,i){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[Sr.HLINK,Sr.XPATH,Sr.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}function tte(e){var t=[ua];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function vO(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function rte(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function nte(e){var t=[ua];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(vO(e[r][0],e[r][1])),t.push(rte("",e[r][0]));return t.push(vO("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function g$(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+rb.version+"</meta:generator></office:meta></office:document-meta>"}var cf=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function N5(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=zr(t),n[n.length]=r?it(e,t,r):Qa(e,t))}function v$(e,t){var r=t||{},n=[ua,it("cp:coreProperties",null,{"xmlns:cp":La.CORE_PROPS,"xmlns:dc":La.dc,"xmlns:dcterms":La.dcterms,"xmlns:dcmitype":La.dcmitype,"xmlns:xsi":La.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&N5("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:oj(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&N5("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:oj(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var i=0;i!=cf.length;++i){var s=cf[i],o=r.Props&&r.Props[s[1]]!=null?r.Props[s[1]]:e?e[s[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&N5(s[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var t0=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],x$=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function y$(e){var t=[],r=it;return e||(e={}),e.Application="SheetJS",t[t.length]=ua,t[t.length]=it("Properties",null,{xmlns:La.EXT_PROPS,"xmlns:vt":La.vt}),t0.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=zr(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+zr(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function b$(e){var t=[ua,it("Properties",null,{xmlns:La.CUST_PROPS,"xmlns:vt":La.vt})];if(!e)return t.join("");var r=1;return ri(e).forEach(function(a){++r,t[t.length]=it("property",wee(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:zr(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var xO={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function ate(e,t){var r=[];return ri(xO).map(function(n){for(var a=0;a<cf.length;++a)if(cf[a][1]==n)return cf[a];for(a=0;a<t0.length;++a)if(t0[a][1]==n)return t0[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(Qa(xO[n[1]]||n[1],a))}}),it("DocumentProperties",r.join(""),{xmlns:Ss.o})}function ite(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&ri(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var s=0;s<cf.length;++s)if(i==cf[s][1])return;for(s=0;s<t0.length;++s)if(i==t0[s][1])return;for(s=0;s<r.length;++s)if(i==r[s])return;var o=e[i],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),a.push(it(iO(i),o,{"dt:dt":c}))}}),t&&ri(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var s=t[i],o="string";typeof s=="number"?(o="float",s=String(s)):s===!0||s===!1?(o="boolean",s=s?"1":"0"):s instanceof Date?(o="dateTime.tz",s=s.toISOString()):s=String(s),a.push(it(iO(i),s,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Ss.o+'">'+a.join("")+"</"+n+">"}function ste(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),a+=i);var s=$e(8);return s.write_shift(4,n),s.write_shift(4,a),s}function yO(e,t){var r=$e(4),n=$e(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=$e(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=ste(t);break;case 31:case 80:for(n=$e(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Ja([r,n])}var w$=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function ote(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function bO(e,t,r){var n=$e(8),a=[],i=[],s=8,o=0,c=$e(8),u=$e(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),i.push(c),a.push(u),s+=8+c.length,!t){u=$e(8),u.write_shift(4,0),a.unshift(u);var d=[$e(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(c=$e(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Ja(d),i.unshift(c),s+=8+c.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(w$.indexOf(e[o][0])>-1||x$.indexOf(e[o][0])>-1)&&e[o][1]!=null){var p=e[o][1],h=0;if(t){h=+t[e[o][0]];var g=r[h];if(g.p=="version"&&typeof p=="string"){var m=p.split(".");p=(+m[0]<<16)+(+m[1]||0)}c=yO(g.t,p)}else{var x=ote(p);x==-1&&(x=31,p=String(p)),c=yO(x,p)}i.push(c),u=$e(8),u.write_shift(4,t?h:2+o),a.push(u),s+=8+c.length}var y=8*(i.length+1);for(o=0;o<i.length;++o)a[o].write_shift(4,y),y+=i[o].length;return n.write_shift(4,s),n.write_shift(4,i.length),Ja([n].concat(a).concat(i))}function wO(e,t,r,n,a,i){var s=$e(a?68:48),o=[s];s.write_shift(2,65534),s.write_shift(2,0),s.write_shift(4,842412599),s.write_shift(16,Gr.utils.consts.HEADER_CLSID,"hex"),s.write_shift(4,a?2:1),s.write_shift(16,t,"hex"),s.write_shift(4,a?68:48);var c=bO(e,r,n);if(o.push(c),a){var u=bO(a,null,null);s.write_shift(16,i,"hex"),s.write_shift(4,68+c.length),o.push(u)}return Ja(o)}function lte(e,t){t||(t=$e(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function cte(e,t){return e.read_shift(t)===1}function ki(e,t){return t||(t=$e(2)),t.write_shift(2,+!!e),t}function _$(e){return e.read_shift(2,"u")}function Gs(e,t){return t||(t=$e(2)),t.write_shift(2,e),t}function S$(e,t,r){return r||(r=$e(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function N$(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var s=n?e.read_shift(n,a):"";return s}function ute(e){var t=e.t||"",r=$e(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=$e(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return Ja(a)}function dte(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function fte(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):dte(e,n,r)}function hte(e,t,r){if(r.biff>5)return fte(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function j$(e,t,r){return r||(r=$e(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function _O(e,t){t||(t=$e(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function pte(e){var t=$e(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),i=a>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var s=[8,6815827,6619237,4849780,83];for(r=0;r<s.length;++r)t.write_shift(4,s[r]);if(i==28)n=n.slice(1),_O(n,t);else if(i&2){for(s="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));var o=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),i&8&&_O(a>-1?n.slice(a+1):"",t)}else{for(s="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function Sf(e,t,r,n){return n||(n=$e(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function mte(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),i=e.read_shift(n,"i"),s=e.read_shift(n,"i");return[a,i,s]}function gte(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function A$(e,t){return t||(t=$e(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function A3(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=$e(a);return i.write_shift(2,n),i.write_shift(2,t),a>4&&i.write_shift(2,29282),a>6&&i.write_shift(2,1997),a>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function vte(e,t){var r=!t||t.biff==8,n=$e(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function xte(e,t){var r=!t||t.biff>=8?2:1,n=$e(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function yte(e,t){var r=$e(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=ute(e[a]);var i=Ja([r].concat(n));return i.parts=[r.length].concat(n.map(function(s){return s.length})),i}function bte(){var e=$e(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function wte(e){var t=$e(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function _te(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,i=$e(a);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function Ste(e,t,r,n){var a=$e(10);return Sf(e,t,n,a),a.write_shift(4,r),a}function Nte(e,t,r,n,a){var i=!a||a.biff==8,s=$e(8+ +i+(1+i)*r.length);return Sf(e,t,n,s),s.write_shift(2,r.length),i&&s.write_shift(1,1),s.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),s}function jte(e,t,r,n){var a=r&&r.biff==5;n||(n=$e(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}function Ate(e,t){var r=t.biff==8||!t.biff?4:2,n=$e(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function SO(e,t,r,n){var a=r&&r.biff==5;n||(n=$e(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&a&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function Ete(e){var t=$e(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function Tte(e,t,r,n,a,i){var s=$e(8);return Sf(e,t,n,s),S$(r,i,s),s}function Cte(e,t,r,n){var a=$e(14);return Sf(e,t,n,a),_f(r,a),a}function kte(e,t,r){if(r.biff<8)return Ote(e,t,r);for(var n=[],a=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(mte(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function Ote(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=N$(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function Pte(e){var t=$e(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)A$(e[r],t);return t}function Lte(e){var t=$e(24),r=Ia(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Ja([t,pte(e[1])])}function Ite(e){var t=e[1].Tooltip,r=$e(10+2*(t.length+1));r.write_shift(2,2048);var n=Ia(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function Rte(e){return e||(e=$e(4)),e.write_shift(2,1),e.write_shift(2,1),e}function Dte(e,t,r){if(!r.cellStyles)return vl(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),i=e.read_shift(n),s=e.read_shift(n),o=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:i,w:s,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function Mte(e,t){var r=$e(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function Fte(e){for(var t=$e(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}function $te(e,t,r){var n=$e(15);return Hv(n,e,t),n.write_shift(8,r,"f"),n}function Bte(e,t,r){var n=$e(9);return Hv(n,e,t),n.write_shift(2,r),n}var Ute=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=m3({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var u=[],d=wf(1);switch(c.type){case"base64":d=Io(vc(o));break;case"binary":d=Io(o);break;case"buffer":case"array":d=o;break}_s(d,0);var f=d.read_shift(1),p=!!(f&136),h=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:h=!0,p=!0;break;case 49:h=!0,p=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var m=0,x=521;f==2&&(m=d.read_shift(2)),d.l+=3,f!=2&&(m=d.read_shift(4)),m>1048576&&(m=1e6),f!=2&&(x=d.read_shift(2));var y=d.read_shift(2),v=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(v=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var b=[],S={},_=Math.min(d.length,f==2?521:x-10-(h?264:0)),A=g?32:11;d.l<_&&d[d.l]!=13;)switch(S={},S.name=nb.utils.decode(v,d.slice(d.l,d.l+A)).replace(/[\u0000\r\n].*$/g,""),d.l+=A,S.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(S.offset=d.read_shift(4)),S.len=d.read_shift(1),f==2&&(S.offset=d.read_shift(2)),S.dec=d.read_shift(1),S.name.length&&b.push(S),f!=2&&(d.l+=g?13:14),S.type){case"B":(!h||S.len!=8)&&c.WTF&&console.log("Skipping "+S.name+":"+S.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+S.name+":"+S.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+S.type)}if(d[d.l]!==13&&(d.l=x-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=x;var j=0,E=0;for(u[0]=[],E=0;E!=b.length;++E)u[0][E]=b[E].name;for(;m-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++j]=[],E=0,E=0;E!=b.length;++E){var T=d.slice(d.l,d.l+b[E].len);d.l+=b[E].len,_s(T,0);var L=nb.utils.decode(v,T);switch(b[E].type){case"C":L.trim().length&&(u[j][E]=L.replace(/\s+$/,""));break;case"D":L.length===8?u[j][E]=new Date(+L.slice(0,4),+L.slice(4,6)-1,+L.slice(6,8)):u[j][E]=L;break;case"F":u[j][E]=parseFloat(L.trim());break;case"+":case"I":u[j][E]=g?T.read_shift(-4,"i")^2147483648:T.read_shift(4,"i");break;case"L":switch(L.trim().toUpperCase()){case"Y":case"T":u[j][E]=!0;break;case"N":case"F":u[j][E]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+L+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[j][E]="##MEMO##"+(g?parseInt(L.trim(),10):T.read_shift(4));break;case"N":L=L.replace(/\u0000/g,"").trim(),L&&L!="."&&(u[j][E]=+L||0);break;case"@":u[j][E]=new Date(T.read_shift(-8,"f")-621356832e5);break;case"T":u[j][E]=new Date((T.read_shift(4)-2440588)*864e5+T.read_shift(4));break;case"Y":u[j][E]=T.read_shift(4,"i")/1e4+T.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[j][E]=-T.read_shift(-8,"f");break;case"B":if(h&&b[E].len==8){u[j][E]=T.read_shift(8,"f");break}case"G":case"P":T.l+=b[E].len;break;case"0":if(b[E].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[E].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=b,u}function n(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=bp(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(o,c){try{return Ff(n(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function s(o,c){var u=c||{};if(+u.codepage>=0&&Rg(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=rs(),f=gb(o,{header:1,raw:!0,cellDates:!0}),p=f[0],h=f.slice(1),g=o["!cols"]||[],m=0,x=0,y=0,v=1;for(m=0;m<p.length;++m){if(((g[m]||{}).DBF||{}).name){p[m]=g[m].DBF.name,++y;continue}if(p[m]!=null){if(++y,typeof p[m]=="number"&&(p[m]=p[m].toString(10)),typeof p[m]!="string")throw new Error("DBF Invalid column name "+p[m]+" |"+typeof p[m]+"|");if(p.indexOf(p[m])!==m){for(x=0;x<1024;++x)if(p.indexOf(p[m]+"_"+x)==-1){p[m]+="_"+x;break}}}}var b=mn(o["!ref"]),S=[],_=[],A=[];for(m=0;m<=b.e.c-b.s.c;++m){var j="",E="",T=0,L=[];for(x=0;x<h.length;++x)h[x][m]!=null&&L.push(h[x][m]);if(L.length==0||p[m]==null){S[m]="?";continue}for(x=0;x<L.length;++x){switch(typeof L[x]){case"number":E="B";break;case"string":E="C";break;case"boolean":E="L";break;case"object":E=L[x]instanceof Date?"D":"C";break;default:E="C"}T=Math.max(T,String(L[x]).length),j=j&&j!=E?"C":E}T>250&&(T=250),E=((g[m]||{}).DBF||{}).type,E=="C"&&g[m].DBF.len>T&&(T=g[m].DBF.len),j=="B"&&E=="N"&&(j="N",A[m]=g[m].DBF.dec,T=g[m].DBF.len),_[m]=j=="C"||E=="N"?T:i[j]||0,v+=_[m],S[m]=j}var O=d.next(32);for(O.write_shift(4,318902576),O.write_shift(4,h.length),O.write_shift(2,296+32*y),O.write_shift(2,v),m=0;m<4;++m)O.write_shift(4,0);for(O.write_shift(4,0|(+t[TF]||3)<<8),m=0,x=0;m<p.length;++m)if(p[m]!=null){var I=d.next(32),D=(p[m].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);I.write_shift(1,D,"sbcs"),I.write_shift(1,S[m]=="?"?"C":S[m],"sbcs"),I.write_shift(4,x),I.write_shift(1,_[m]||i[S[m]]||0),I.write_shift(1,A[m]||0),I.write_shift(1,2),I.write_shift(4,0),I.write_shift(1,0),I.write_shift(4,0),I.write_shift(4,0),x+=_[m]||i[S[m]]||0}var z=d.next(264);for(z.write_shift(4,13),m=0;m<65;++m)z.write_shift(4,0);for(m=0;m<h.length;++m){var Y=d.next(v);for(Y.write_shift(1,0),x=0;x<p.length;++x)if(p[x]!=null)switch(S[x]){case"L":Y.write_shift(1,h[m][x]==null?63:h[m][x]?84:70);break;case"B":Y.write_shift(8,h[m][x]||0,"f");break;case"N":var se="0";for(typeof h[m][x]=="number"&&(se=h[m][x].toFixed(A[x]||0)),y=0;y<_[x]-se.length;++y)Y.write_shift(1,32);Y.write_shift(1,se,"sbcs");break;case"D":h[m][x]?(Y.write_shift(4,("0000"+h[m][x].getFullYear()).slice(-4),"sbcs"),Y.write_shift(2,("00"+(h[m][x].getMonth()+1)).slice(-2),"sbcs"),Y.write_shift(2,("00"+h[m][x].getDate()).slice(-2),"sbcs")):Y.write_shift(8,"00000000","sbcs");break;case"C":var ee=String(h[m][x]!=null?h[m][x]:"").slice(0,_[x]);for(Y.write_shift(1,ee,"sbcs"),y=0;y<_[x]-ee.length;++y)Y.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:s}}(),zte=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+ri(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,h){var g=e[h];return typeof g=="number"?Gk(g):g},n=function(p,h,g){var m=h.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return m==59?p:Gk(m)};e["|"]=254;function a(p,h){switch(h.type){case"base64":return i(vc(p),h);case"binary":return i(p,h);case"buffer":return i(Er&&Buffer.isBuffer(p)?p.toString("binary"):$v(p),h);case"array":return i(ew(p),h)}throw new Error("Unrecognized type "+h.type)}function i(p,h){var g=p.split(/[\n\r]+/),m=-1,x=-1,y=0,v=0,b=[],S=[],_=null,A={},j=[],E=[],T=[],L=0,O;for(+h.codepage>=0&&Rg(+h.codepage);y!==g.length;++y){L=0;var I=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),D=I.replace(/;;/g,"\0").split(";").map(function(U){return U.replace(/\u0000/g,";")}),z=D[0],Y;if(I.length>0)switch(z){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&S.push(I.slice(3).replace(/;;/g,";"));break;case"C":var se=!1,ee=!1,J=!1,oe=!1,we=-1,xe=-1;for(v=1;v<D.length;++v)switch(D[v].charAt(0)){case"A":break;case"X":x=parseInt(D[v].slice(1))-1,ee=!0;break;case"Y":for(m=parseInt(D[v].slice(1))-1,ee||(x=0),O=b.length;O<=m;++O)b[O]=[];break;case"K":Y=D[v].slice(1),Y.charAt(0)==='"'?Y=Y.slice(1,Y.length-1):Y==="TRUE"?Y=!0:Y==="FALSE"?Y=!1:isNaN(sc(Y))?isNaN(Mg(Y).getDate())||(Y=Mi(Y)):(Y=sc(Y),_!==null&&BF(_)&&(Y=HF(Y))),se=!0;break;case"E":oe=!0;var k=Bre(D[v].slice(1),{r:m,c:x});b[m][x]=[b[m][x],k];break;case"S":J=!0,b[m][x]=[b[m][x],"S5S"];break;case"G":break;case"R":we=parseInt(D[v].slice(1))-1;break;case"C":xe=parseInt(D[v].slice(1))-1;break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+I)}if(se&&(b[m][x]&&b[m][x].length==2?b[m][x][0]=Y:b[m][x]=Y,_=null),J){if(oe)throw new Error("SYLK shared formula cannot have own formula");var M=we>-1&&b[we][xe];if(!M||!M[1])throw new Error("SYLK shared formula cannot find base");b[m][x][1]=Ure(M[1],{r:m-we,c:x-xe})}break;case"F":var B=0;for(v=1;v<D.length;++v)switch(D[v].charAt(0)){case"X":x=parseInt(D[v].slice(1))-1,++B;break;case"Y":for(m=parseInt(D[v].slice(1))-1,O=b.length;O<=m;++O)b[O]=[];break;case"M":L=parseInt(D[v].slice(1))/20;break;case"F":break;case"G":break;case"P":_=S[parseInt(D[v].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(T=D[v].slice(1).split(" "),O=parseInt(T[0],10);O<=parseInt(T[1],10);++O)L=parseInt(T[2],10),E[O-1]=L===0?{hidden:!0}:{wch:L},E3(E[O-1]);break;case"C":x=parseInt(D[v].slice(1))-1,E[x]||(E[x]={});break;case"R":m=parseInt(D[v].slice(1))-1,j[m]||(j[m]={}),L>0?(j[m].hpt=L,j[m].hpx=O$(L)):L===0&&(j[m].hidden=!0);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+I)}B<1&&(_=null);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+I)}}return j.length>0&&(A["!rows"]=j),E.length>0&&(A["!cols"]=E),h&&h.sheetRows&&(b=b.slice(0,h.sheetRows)),[b,A]}function s(p,h){var g=a(p,h),m=g[0],x=g[1],y=bp(m,h);return ri(x).forEach(function(v){y[v]=x[v]}),y}function o(p,h){return Ff(s(p,h),h)}function c(p,h,g,m){var x="C;Y"+(g+1)+";X"+(m+1)+";K";switch(p.t){case"n":x+=p.v||0,p.f&&!p.F&&(x+=";E"+C3(p.f,{r:g,c:m}));break;case"b":x+=p.v?"TRUE":"FALSE";break;case"e":x+=p.w||p.v;break;case"d":x+='"'+(p.w||p.v)+'"';break;case"s":x+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return x}function u(p,h){h.forEach(function(g,m){var x="F;W"+(m+1)+" "+(m+1)+" ";g.hidden?x+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=fb(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=hb(g.wpx)),typeof g.wch=="number"&&(x+=Math.round(g.wch))),x.charAt(x.length-1)!=" "&&p.push(x)})}function d(p,h){h.forEach(function(g,m){var x="F;";g.hidden?x+="M0;":g.hpt?x+="M"+20*g.hpt+";":g.hpx&&(x+="M"+20*pb(g.hpx)+";"),x.length>2&&p.push(x+"R"+(m+1))})}function f(p,h){var g=["ID;PWXL;N;E"],m=[],x=mn(p["!ref"]),y,v=Array.isArray(p),b=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),p["!cols"]&&u(g,p["!cols"]),p["!rows"]&&d(g,p["!rows"]),g.push("B;Y"+(x.e.r-x.s.r+1)+";X"+(x.e.c-x.s.c+1)+";D"+[x.s.c,x.s.r,x.e.c,x.e.r].join(" "));for(var S=x.s.r;S<=x.e.r;++S)for(var _=x.s.c;_<=x.e.c;++_){var A=Hr({r:S,c:_});y=v?(p[S]||[])[_]:p[A],!(!y||y.v==null&&(!y.f||y.F))&&m.push(c(y,p,S,_))}return g.join(b)+b+m.join(b)+b+"E"+b}return{to_workbook:o,to_sheet:s,from_sheet:f}}(),qte=function(){function e(i,s){switch(s.type){case"base64":return t(vc(i),s);case"binary":return t(i,s);case"buffer":return t(Er&&Buffer.isBuffer(i)?i.toString("binary"):$v(i),s);case"array":return t(ew(i),s)}throw new Error("Unrecognized type "+s.type)}function t(i,s){for(var o=i.split(`
`),c=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var p=o[d].trim().split(","),h=p[0],g=p[1];++d;for(var m=o[d]||"";(m.match(/["]/g)||[]).length&1&&d<o.length-1;)m+=`
`+o[++d];switch(m=m.trim(),+h){case-1:if(m==="BOT"){f[++c]=[],u=0;continue}else if(m!=="EOD")throw new Error("Unrecognized DIF special command "+m);break;case 0:m==="TRUE"?f[c][u]=!0:m==="FALSE"?f[c][u]=!1:isNaN(sc(g))?isNaN(Mg(g).getDate())?f[c][u]=g:f[c][u]=Mi(g):f[c][u]=sc(g),++u;break;case 1:m=m.slice(1,m.length-1),m=m.replace(/""/g,'"'),m&&m.match(/^=".*"$/)&&(m=m.slice(2,-1)),f[c][u++]=m!==""?m:null;break}if(m==="EOD")break}}return s&&s.sheetRows&&(f=f.slice(0,s.sheetRows)),f}function r(i,s){return bp(e(i,s),s)}function n(i,s){return Ff(r(i,s),s)}var a=function(){var i=function(c,u,d,f,p){c.push(u),c.push(d+","+f),c.push('"'+p.replace(/"/g,'""')+'"')},s=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=mn(c["!ref"]),f,p=Array.isArray(c);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,d.e.r-d.s.r+1,""),i(u,"TUPLES",0,d.e.c-d.s.c+1,""),i(u,"DATA",0,0,"");for(var h=d.s.r;h<=d.e.r;++h){s(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var m=Hr({r:h,c:g});if(f=p?(c[h]||[])[g]:c[m],!f){s(u,1,0,"");continue}switch(f.t){case"n":var x=f.w;!x&&f.v!=null&&(x=f.v),x==null?f.f&&!f.F?s(u,1,0,"="+f.f):s(u,1,0,""):s(u,0,x,"V");break;case"b":s(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":s(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Wu(f.z||Un[14],as(Mi(f.v)))),s(u,0,f.w,"V");break;default:s(u,1,0,"")}}}s(u,-1,0,"EOD");var y=`\r
`,v=u.join(y);return v}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),E$=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,p){for(var h=f.split(`
`),g=-1,m=-1,x=0,y=[];x!==h.length;++x){var v=h[x].trim().split(":");if(v[0]==="cell"){var b=Ia(v[1]);if(y.length<=b.r)for(g=y.length;g<=b.r;++g)y[g]||(y[g]=[]);switch(g=b.r,m=b.c,v[2]){case"t":y[g][m]=e(v[3]);break;case"v":y[g][m]=+v[3];break;case"vtf":var S=v[v.length-1];case"vtc":switch(v[3]){case"nl":y[g][m]=!!+v[4];break;default:y[g][m]=+v[4];break}v[2]=="vtf"&&(y[g][m]=[y[g][m],S])}}}return p&&p.sheetRows&&(y=y.slice(0,p.sheetRows)),y}function n(f,p){return bp(r(f,p),p)}function a(f,p){return Ff(n(f,p),p)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),s=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var p=[],h=[],g,m="",x=Ls(f["!ref"]),y=Array.isArray(f),v=x.s.r;v<=x.e.r;++v)for(var b=x.s.c;b<=x.e.c;++b)if(m=Hr({r:v,c:b}),g=y?(f[v]||[])[b]:f[m],!(!g||g.v==null||g.t==="z")){switch(h=["cell",m,"t"],g.t){case"s":case"str":h.push(t(g.v));break;case"n":g.f?(h[2]="vtf",h[3]="n",h[4]=g.v,h[5]=t(g.f)):(h[2]="v",h[3]=g.v);break;case"b":h[2]="vt"+(g.f?"f":"c"),h[3]="nl",h[4]=g.v?"1":"0",h[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var S=as(Mi(g.v));h[2]="vtc",h[3]="nd",h[4]=""+S,h[5]=g.w||Wu(g.z||Un[14],S);break;case"e":continue}p.push(h.join(":"))}return p.push("sheet:c:"+(x.e.c-x.s.c+1)+":r:"+(x.e.r-x.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function d(f){return[i,s,o,s,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),Hte=function(){function e(d,f,p,h,g){g.raw?f[p][h]=d:d===""||(d==="TRUE"?f[p][h]=!0:d==="FALSE"?f[p][h]=!1:isNaN(sc(d))?isNaN(Mg(d).getDate())?f[p][h]=d:f[p][h]=Mi(d):f[p][h]=sc(d))}function t(d,f){var p=f||{},h=[];if(!d||d.length===0)return h;for(var g=d.split(/[\r\n]/),m=g.length-1;m>=0&&g[m].length===0;)--m;for(var x=10,y=0,v=0;v<=m;++v)y=g[v].indexOf(" "),y==-1?y=g[v].length:y++,x=Math.max(x,y);for(v=0;v<=m;++v){h[v]=[];var b=0;for(e(g[v].slice(0,x).trim(),h,v,b,p),b=1;b<=(g[v].length-x)/10+1;++b)e(g[v].slice(x+(b-1)*10,x+b*10).trim(),h,v,b,p)}return p.sheetRows&&(h=h.slice(0,p.sheetRows)),h}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},p=!1,h=0,g=0;h<d.length;++h)(g=d.charCodeAt(h))==34?p=!p:!p&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&g.push([f[h],h]);if(!g.length){f=n;for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&g.push([f[h],h])}return g.sort(function(m,x){return m[0]-x[0]||n[m[1]]-n[x[1]]}),r[g.pop()[1]]||44}function i(d,f){var p=f||{},h="",g=p.dense?[]:{},m={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(h=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(h=d.charAt(4),d=d.slice(6)):h=a(d.slice(0,1024)):p&&p.FS?h=p.FS:h=a(d.slice(0,1024));var x=0,y=0,v=0,b=0,S=0,_=h.charCodeAt(0),A=!1,j=0,E=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var T=p.dateNF!=null?see(p.dateNF):null;function L(){var O=d.slice(b,S),I={};if(O.charAt(0)=='"'&&O.charAt(O.length-1)=='"'&&(O=O.slice(1,-1).replace(/""/g,'"')),O.length===0)I.t="z";else if(p.raw)I.t="s",I.v=O;else if(O.trim().length===0)I.t="s",I.v=O;else if(O.charCodeAt(0)==61)O.charCodeAt(1)==34&&O.charCodeAt(O.length-1)==34?(I.t="s",I.v=O.slice(2,-1).replace(/""/g,'"')):zre(O)?(I.t="n",I.f=O.slice(1)):(I.t="s",I.v=O);else if(O=="TRUE")I.t="b",I.v=!0;else if(O=="FALSE")I.t="b",I.v=!1;else if(!isNaN(v=sc(O)))I.t="n",p.cellText!==!1&&(I.w=O),I.v=v;else if(!isNaN(Mg(O).getDate())||T&&O.match(T)){I.z=p.dateNF||Un[14];var D=0;T&&O.match(T)&&(O=oee(O,p.dateNF,O.match(T)||[]),D=1),p.cellDates?(I.t="d",I.v=Mi(O,D)):(I.t="n",I.v=as(Mi(O,D))),p.cellText!==!1&&(I.w=Wu(I.z,I.v instanceof Date?as(I.v):I.v)),p.cellNF||delete I.z}else I.t="s",I.v=O;if(I.t=="z"||(p.dense?(g[x]||(g[x]=[]),g[x][y]=I):g[Hr({c:y,r:x})]=I),b=S+1,E=d.charCodeAt(b),m.e.c<y&&(m.e.c=y),m.e.r<x&&(m.e.r=x),j==_)++y;else if(y=0,++x,p.sheetRows&&p.sheetRows<=x)return!0}e:for(;S<d.length;++S)switch(j=d.charCodeAt(S)){case 34:E===34&&(A=!A);break;case _:case 10:case 13:if(!A&&L())break e;break}return S-b>0&&L(),g["!ref"]=la(m),g}function s(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?i(d,f):bp(t(d,f),f)}function o(d,f){var p="",h=f.type=="string"?[0,0,0,0]:roe(d,f);switch(f.type){case"base64":p=vc(d);break;case"binary":p=d;break;case"buffer":f.codepage==65001?p=d.toString("utf8"):f.codepage&&typeof nb<"u"||(p=Er&&Buffer.isBuffer(d)?d.toString("binary"):$v(d));break;case"array":p=ew(d);break;case"string":p=d;break;default:throw new Error("Unrecognized type "+f.type)}return h[0]==239&&h[1]==187&&h[2]==191?p=Qm(p.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?p=Qm(p):f.type=="binary"&&typeof nb<"u",p.slice(0,19)=="socialcalc:version:"?E$.to_sheet(f.type=="string"?p:Qm(p),f):s(p,f)}function c(d,f){return Ff(o(d,f),f)}function u(d){for(var f=[],p=mn(d["!ref"]),h,g=Array.isArray(d),m=p.s.r;m<=p.e.r;++m){for(var x=[],y=p.s.c;y<=p.e.c;++y){var v=Hr({r:m,c:y});if(h=g?(d[m]||[])[y]:d[v],!h||h.v==null){x.push("          ");continue}for(var b=(h.w||(xc(h),h.w)||"").slice(0,10);b.length<10;)b+=" ";x.push(b+(y===0?" ":""))}f.push(x.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}}(),NO=function(){function e(k,M,B){if(k){_s(k,k.l||0);for(var U=B.Enum||we;k.l<k.length;){var Z=k.read_shift(2),pe=U[Z]||U[65535],K=k.read_shift(2),te=k.l+K,ae=pe.f&&pe.f(k,K,B);if(k.l=te,M(ae,pe,Z))return}}}function t(k,M){switch(M.type){case"base64":return r(Io(vc(k)),M);case"binary":return r(Io(k),M);case"buffer":case"array":return r(k,M)}throw"Unsupported type "+M.type}function r(k,M){if(!k)return k;var B=M||{},U=B.dense?[]:{},Z="Sheet1",pe="",K=0,te={},ae=[],be=[],ve={s:{r:0,c:0},e:{r:0,c:0}},Fe=B.sheetRows||0;if(k[2]==0&&(k[3]==8||k[3]==9)&&k.length>=16&&k[14]==5&&k[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(k[2]==2)B.Enum=we,e(k,function(Re,Qe,Ue){switch(Ue){case 0:B.vers=Re,Re>=4096&&(B.qpro=!0);break;case 6:ve=Re;break;case 204:Re&&(pe=Re);break;case 222:pe=Re;break;case 15:case 51:B.qpro||(Re[1].v=Re[1].v.slice(1));case 13:case 14:case 16:Ue==14&&(Re[2]&112)==112&&(Re[2]&15)>1&&(Re[2]&15)<15&&(Re[1].z=B.dateNF||Un[14],B.cellDates&&(Re[1].t="d",Re[1].v=HF(Re[1].v))),B.qpro&&Re[3]>K&&(U["!ref"]=la(ve),te[Z]=U,ae.push(Z),U=B.dense?[]:{},ve={s:{r:0,c:0},e:{r:0,c:0}},K=Re[3],Z=pe||"Sheet"+(K+1),pe="");var pt=B.dense?(U[Re[0].r]||[])[Re[0].c]:U[Hr(Re[0])];if(pt){pt.t=Re[1].t,pt.v=Re[1].v,Re[1].z!=null&&(pt.z=Re[1].z),Re[1].f!=null&&(pt.f=Re[1].f);break}B.dense?(U[Re[0].r]||(U[Re[0].r]=[]),U[Re[0].r][Re[0].c]=Re[1]):U[Hr(Re[0])]=Re[1];break}},B);else if(k[2]==26||k[2]==14)B.Enum=xe,k[2]==14&&(B.qpro=!0,k.l=0),e(k,function(Re,Qe,Ue){switch(Ue){case 204:Z=Re;break;case 22:Re[1].v=Re[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Re[3]>K&&(U["!ref"]=la(ve),te[Z]=U,ae.push(Z),U=B.dense?[]:{},ve={s:{r:0,c:0},e:{r:0,c:0}},K=Re[3],Z="Sheet"+(K+1)),Fe>0&&Re[0].r>=Fe)break;B.dense?(U[Re[0].r]||(U[Re[0].r]=[]),U[Re[0].r][Re[0].c]=Re[1]):U[Hr(Re[0])]=Re[1],ve.e.c<Re[0].c&&(ve.e.c=Re[0].c),ve.e.r<Re[0].r&&(ve.e.r=Re[0].r);break;case 27:Re[14e3]&&(be[Re[14e3][0]]=Re[14e3][1]);break;case 1537:be[Re[0]]=Re[1],Re[0]==K&&(Z=Re[1]);break}},B);else throw new Error("Unrecognized LOTUS BOF "+k[2]);if(U["!ref"]=la(ve),te[pe||Z]=U,ae.push(pe||Z),!be.length)return{SheetNames:ae,Sheets:te};for(var Me={},X=[],Ie=0;Ie<be.length;++Ie)te[ae[Ie]]?(X.push(be[Ie]||ae[Ie]),Me[be[Ie]]=te[be[Ie]]||te[ae[Ie]]):(X.push(be[Ie]),Me[be[Ie]]={"!ref":"A1"});return{SheetNames:X,Sheets:Me}}function n(k,M){var B=M||{};if(+B.codepage>=0&&Rg(+B.codepage),B.type=="string")throw new Error("Cannot write WK1 to JS string");var U=rs(),Z=mn(k["!ref"]),pe=Array.isArray(k),K=[];ot(U,0,i(1030)),ot(U,6,c(Z));for(var te=Math.min(Z.e.r,8191),ae=Z.s.r;ae<=te;++ae)for(var be=ei(ae),ve=Z.s.c;ve<=Z.e.c;++ve){ae===Z.s.r&&(K[ve]=mi(ve));var Fe=K[ve]+be,Me=pe?(k[ae]||[])[ve]:k[Fe];if(!(!Me||Me.t=="z"))if(Me.t=="n")(Me.v|0)==Me.v&&Me.v>=-32768&&Me.v<=32767?ot(U,13,h(ae,ve,Me.v)):ot(U,14,m(ae,ve,Me.v));else{var X=xc(Me);ot(U,15,f(ae,ve,X.slice(0,239)))}}return ot(U,1),U.end()}function a(k,M){var B=M||{};if(+B.codepage>=0&&Rg(+B.codepage),B.type=="string")throw new Error("Cannot write WK3 to JS string");var U=rs();ot(U,0,s(k));for(var Z=0,pe=0;Z<k.SheetNames.length;++Z)(k.Sheets[k.SheetNames[Z]]||{})["!ref"]&&ot(U,27,oe(k.SheetNames[Z],pe++));var K=0;for(Z=0;Z<k.SheetNames.length;++Z){var te=k.Sheets[k.SheetNames[Z]];if(!(!te||!te["!ref"])){for(var ae=mn(te["!ref"]),be=Array.isArray(te),ve=[],Fe=Math.min(ae.e.r,8191),Me=ae.s.r;Me<=Fe;++Me)for(var X=ei(Me),Ie=ae.s.c;Ie<=ae.e.c;++Ie){Me===ae.s.r&&(ve[Ie]=mi(Ie));var Re=ve[Ie]+X,Qe=be?(te[Me]||[])[Ie]:te[Re];if(!(!Qe||Qe.t=="z"))if(Qe.t=="n")ot(U,23,L(Me,Ie,K,Qe.v));else{var Ue=xc(Qe);ot(U,22,j(Me,Ie,K,Ue.slice(0,239)))}}++K}}return ot(U,1),U.end()}function i(k){var M=$e(2);return M.write_shift(2,k),M}function s(k){var M=$e(26);M.write_shift(2,4096),M.write_shift(2,4),M.write_shift(4,0);for(var B=0,U=0,Z=0,pe=0;pe<k.SheetNames.length;++pe){var K=k.SheetNames[pe],te=k.Sheets[K];if(!(!te||!te["!ref"])){++Z;var ae=Ls(te["!ref"]);B<ae.e.r&&(B=ae.e.r),U<ae.e.c&&(U=ae.e.c)}}return B>8191&&(B=8191),M.write_shift(2,B),M.write_shift(1,Z),M.write_shift(1,U),M.write_shift(2,0),M.write_shift(2,0),M.write_shift(1,1),M.write_shift(1,2),M.write_shift(4,0),M.write_shift(4,0),M}function o(k,M,B){var U={s:{c:0,r:0},e:{c:0,r:0}};return M==8&&B.qpro?(U.s.c=k.read_shift(1),k.l++,U.s.r=k.read_shift(2),U.e.c=k.read_shift(1),k.l++,U.e.r=k.read_shift(2),U):(U.s.c=k.read_shift(2),U.s.r=k.read_shift(2),M==12&&B.qpro&&(k.l+=2),U.e.c=k.read_shift(2),U.e.r=k.read_shift(2),M==12&&B.qpro&&(k.l+=2),U.s.c==65535&&(U.s.c=U.e.c=U.s.r=U.e.r=0),U)}function c(k){var M=$e(8);return M.write_shift(2,k.s.c),M.write_shift(2,k.s.r),M.write_shift(2,k.e.c),M.write_shift(2,k.e.r),M}function u(k,M,B){var U=[{c:0,r:0},{t:"n",v:0},0,0];return B.qpro&&B.vers!=20768?(U[0].c=k.read_shift(1),U[3]=k.read_shift(1),U[0].r=k.read_shift(2),k.l+=2):(U[2]=k.read_shift(1),U[0].c=k.read_shift(2),U[0].r=k.read_shift(2)),U}function d(k,M,B){var U=k.l+M,Z=u(k,M,B);if(Z[1].t="s",B.vers==20768){k.l++;var pe=k.read_shift(1);return Z[1].v=k.read_shift(pe,"utf8"),Z}return B.qpro&&k.l++,Z[1].v=k.read_shift(U-k.l,"cstr"),Z}function f(k,M,B){var U=$e(7+B.length);U.write_shift(1,255),U.write_shift(2,M),U.write_shift(2,k),U.write_shift(1,39);for(var Z=0;Z<U.length;++Z){var pe=B.charCodeAt(Z);U.write_shift(1,pe>=128?95:pe)}return U.write_shift(1,0),U}function p(k,M,B){var U=u(k,M,B);return U[1].v=k.read_shift(2,"i"),U}function h(k,M,B){var U=$e(7);return U.write_shift(1,255),U.write_shift(2,M),U.write_shift(2,k),U.write_shift(2,B,"i"),U}function g(k,M,B){var U=u(k,M,B);return U[1].v=k.read_shift(8,"f"),U}function m(k,M,B){var U=$e(13);return U.write_shift(1,255),U.write_shift(2,M),U.write_shift(2,k),U.write_shift(8,B,"f"),U}function x(k,M,B){var U=k.l+M,Z=u(k,M,B);if(Z[1].v=k.read_shift(8,"f"),B.qpro)k.l=U;else{var pe=k.read_shift(2);S(k.slice(k.l,k.l+pe),Z),k.l+=pe}return Z}function y(k,M,B){var U=M&32768;return M&=-32769,M=(U?k:0)+(M>=8192?M-16384:M),(U?"":"$")+(B?mi(M):ei(M))}var v={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function S(k,M){_s(k,0);for(var B=[],U=0,Z="",pe="",K="",te="";k.l<k.length;){var ae=k[k.l++];switch(ae){case 0:B.push(k.read_shift(8,"f"));break;case 1:pe=y(M[0].c,k.read_shift(2),!0),Z=y(M[0].r,k.read_shift(2),!1),B.push(pe+Z);break;case 2:{var be=y(M[0].c,k.read_shift(2),!0),ve=y(M[0].r,k.read_shift(2),!1);pe=y(M[0].c,k.read_shift(2),!0),Z=y(M[0].r,k.read_shift(2),!1),B.push(be+ve+":"+pe+Z)}break;case 3:if(k.l<k.length){console.error("WK1 premature formula end");return}break;case 4:B.push("("+B.pop()+")");break;case 5:B.push(k.read_shift(2));break;case 6:{for(var Fe="";ae=k[k.l++];)Fe+=String.fromCharCode(ae);B.push('"'+Fe.replace(/"/g,'""')+'"')}break;case 8:B.push("-"+B.pop());break;case 23:B.push("+"+B.pop());break;case 22:B.push("NOT("+B.pop()+")");break;case 20:case 21:te=B.pop(),K=B.pop(),B.push(["AND","OR"][ae-20]+"("+K+","+te+")");break;default:if(ae<32&&b[ae])te=B.pop(),K=B.pop(),B.push(K+b[ae]+te);else if(v[ae]){if(U=v[ae][1],U==69&&(U=k[k.l++]),U>B.length){console.error("WK1 bad formula parse 0x"+ae.toString(16)+":|"+B.join("|")+"|");return}var Me=B.slice(-U);B.length-=U,B.push(v[ae][0]+"("+Me.join(",")+")")}else return ae<=7?console.error("WK1 invalid opcode "+ae.toString(16)):ae<=24?console.error("WK1 unsupported op "+ae.toString(16)):ae<=30?console.error("WK1 invalid opcode "+ae.toString(16)):ae<=115?console.error("WK1 unsupported function opcode "+ae.toString(16)):console.error("WK1 unrecognized opcode "+ae.toString(16))}}B.length==1?M[1].f=""+B[0]:console.error("WK1 bad formula parse |"+B.join("|")+"|")}function _(k){var M=[{c:0,r:0},{t:"n",v:0},0];return M[0].r=k.read_shift(2),M[3]=k[k.l++],M[0].c=k[k.l++],M}function A(k,M){var B=_(k);return B[1].t="s",B[1].v=k.read_shift(M-4,"cstr"),B}function j(k,M,B,U){var Z=$e(6+U.length);Z.write_shift(2,k),Z.write_shift(1,B),Z.write_shift(1,M),Z.write_shift(1,39);for(var pe=0;pe<U.length;++pe){var K=U.charCodeAt(pe);Z.write_shift(1,K>=128?95:K)}return Z.write_shift(1,0),Z}function E(k,M){var B=_(k);B[1].v=k.read_shift(2);var U=B[1].v>>1;if(B[1].v&1)switch(U&7){case 0:U=(U>>3)*5e3;break;case 1:U=(U>>3)*500;break;case 2:U=(U>>3)/20;break;case 3:U=(U>>3)/200;break;case 4:U=(U>>3)/2e3;break;case 5:U=(U>>3)/2e4;break;case 6:U=(U>>3)/16;break;case 7:U=(U>>3)/64;break}return B[1].v=U,B}function T(k,M){var B=_(k),U=k.read_shift(4),Z=k.read_shift(4),pe=k.read_shift(2);if(pe==65535)return U===0&&Z===3221225472?(B[1].t="e",B[1].v=15):U===0&&Z===3489660928?(B[1].t="e",B[1].v=42):B[1].v=0,B;var K=pe&32768;return pe=(pe&32767)-16446,B[1].v=(1-K*2)*(Z*Math.pow(2,pe+32)+U*Math.pow(2,pe)),B}function L(k,M,B,U){var Z=$e(14);if(Z.write_shift(2,k),Z.write_shift(1,B),Z.write_shift(1,M),U==0)return Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(2,65535),Z;var pe=0,K=0,te=0,ae=0;return U<0&&(pe=1,U=-U),K=Math.log2(U)|0,U/=Math.pow(2,K-31),ae=U>>>0,ae&2147483648||(U/=2,++K,ae=U>>>0),U-=ae,ae|=2147483648,ae>>>=0,U*=Math.pow(2,32),te=U>>>0,Z.write_shift(4,te),Z.write_shift(4,ae),K+=16383+(pe?32768:0),Z.write_shift(2,K),Z}function O(k,M){var B=T(k);return k.l+=M-14,B}function I(k,M){var B=_(k),U=k.read_shift(4);return B[1].v=U>>6,B}function D(k,M){var B=_(k),U=k.read_shift(8,"f");return B[1].v=U,B}function z(k,M){var B=D(k);return k.l+=M-10,B}function Y(k,M){return k[k.l+M-1]==0?k.read_shift(M,"cstr"):""}function se(k,M){var B=k[k.l++];B>M-1&&(B=M-1);for(var U="";U.length<B;)U+=String.fromCharCode(k[k.l++]);return U}function ee(k,M,B){if(!(!B.qpro||M<21)){var U=k.read_shift(1);k.l+=17,k.l+=1,k.l+=2;var Z=k.read_shift(M-21,"cstr");return[U,Z]}}function J(k,M){for(var B={},U=k.l+M;k.l<U;){var Z=k.read_shift(2);if(Z==14e3){for(B[Z]=[0,""],B[Z][0]=k.read_shift(2);k[k.l];)B[Z][1]+=String.fromCharCode(k[k.l]),k.l++;k.l++}}return B}function oe(k,M){var B=$e(5+k.length);B.write_shift(2,14e3),B.write_shift(2,M);for(var U=0;U<k.length;++U){var Z=k.charCodeAt(U);B[B.l++]=Z>127?95:Z}return B[B.l++]=0,B}var we={0:{n:"BOF",f:_$},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:x},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Y},222:{n:"SHEETNAMELP",f:se},65535:{n:""}},xe={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:A},23:{n:"NUMBER17",f:T},24:{n:"NUMBER18",f:E},25:{n:"FORMULA19",f:O},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:J},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:I},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:z},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Y},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ee},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}(),Wte=/^\s|\s$|[\t\n\r]/;function T$(e,t){if(!t.bookSST)return"";var r=[ua];r[r.length]=it("sst",null,{xmlns:yp[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],i="<si>";a.r?i+=a.r:(i+="<t",a.t||(a.t=""),a.t.match(Wte)&&(i+=' xml:space="preserve"'),i+=">"+zr(a.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Vte(e){return[e.read_shift(4),e.read_shift(4)]}function Gte(e,t){return t||(t=$e(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var Kte=Fee;function Xte(e){var t=rs();Ke(t,159,Gte(e));for(var r=0;r<e.length;++r)Ke(t,19,Kte(e[r]));return Ke(t,160),t.end()}function Yte(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function C$(e){var t=0,r,n=Yte(e),a=n.length+1,i,s,o,c,u;for(r=wf(a),r[0]=n.length,i=1;i!=a;++i)r[i]=n[i-1];for(i=a-1;i>=0;--i)s=r[i],o=t&16384?1:0,c=t<<1&32767,u=o|c,t=u^s;return t^52811}var Jte=function(){function e(a,i){switch(i.type){case"base64":return t(vc(a),i);case"binary":return t(a,i);case"buffer":return t(Er&&Buffer.isBuffer(a)?a.toString("binary"):$v(a),i);case"array":return t(ew(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){var s=i||{},o=s.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var p=/\\\w+\b/g,h=0,g,m=-1;g=p.exec(d);){switch(g[0]){case"\\cell":var x=d.slice(h,p.lastIndex-g[0].length);if(x[0]==" "&&(x=x.slice(1)),++m,x.length){var y={v:x,t:"s"};Array.isArray(o)?o[f][m]=y:o[Hr({r:f,c:m})]=y}break}h=p.lastIndex}m>u.e.c&&(u.e.c=m)}),o["!ref"]=la(u),o}function r(a,i){return Ff(e(a,i),i)}function n(a){for(var i=["{\\rtf1\\ansi"],s=mn(a["!ref"]),o,c=Array.isArray(a),u=s.s.r;u<=s.e.r;++u){i.push("\\trowd\\trautofit1");for(var d=s.s.c;d<=s.e.c;++d)i.push("\\cellx"+(d+1));for(i.push("\\pard\\intbl"),d=s.s.c;d<=s.e.c;++d){var f=Hr({r:u,c:d});o=c?(a[u]||[])[d]:a[f],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(xc(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function jO(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}var Qte=6,oc=Qte;function fb(e){return Math.floor((e+Math.round(128/oc)/256)*oc)}function hb(e){return Math.floor((e-5)/oc*100+.5)/100}function cj(e){return Math.round((e*oc+5)/oc*256)/256}function E3(e){e.width?(e.wpx=fb(e.width),e.wch=hb(e.wpx),e.MDW=oc):e.wpx?(e.wch=hb(e.wpx),e.width=cj(e.wch),e.MDW=oc):typeof e.wch=="number"&&(e.width=cj(e.wch),e.wpx=fb(e.width),e.MDW=oc),e.customWidth&&delete e.customWidth}var Zte=96,k$=Zte;function pb(e){return e*96/k$}function O$(e){return e*k$/96}function ere(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=it("numFmt",null,{numFmtId:n,formatCode:zr(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=it("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function tre(e){var t=[];return t[t.length]=it("cellXfs",null),e.forEach(function(r){t[t.length]=it("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=it("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function P$(e,t){var r=[ua,it("styleSheet",null,{xmlns:yp[0],"xmlns:vt":La.vt})],n;return e.SSF&&(n=ere(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=tre(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function rre(e,t){var r=e.read_shift(2),n=gi(e);return[r,n]}function nre(e,t,r){r||(r=$e(6+4*t.length)),r.write_shift(2,e),Ra(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function are(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=Wee(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var s=e.read_shift(1);s!=0&&(n.underline=s);var o=e.read_shift(1);o>0&&(n.family=o);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=Hee(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=gi(e),n}function ire(e,t){t||(t=$e(25+4*32)),t.write_shift(2,e.sz*20),Vee(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),ub(e.color,t);var n=0;return n=2,t.write_shift(1,n),Ra(e.name,t),t.length>t.l?t.slice(0,t.l):t}var sre=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],j5,ore=vl;function AO(e,t){t||(t=$e(4*3+8*7+16*1)),j5||(j5=m3(sre));var r=j5[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(ub({auto:1},t),ub({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function lre(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function L$(e,t,r){r||(r=$e(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function gm(e,t){return t||(t=$e(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var cre=vl;function ure(e,t){return t||(t=$e(51)),t.write_shift(1,0),gm(null,t),gm(null,t),gm(null,t),gm(null,t),gm(null,t),t.length>t.l?t.slice(0,t.l):t}function dre(e,t){return t||(t=$e(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),cb(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function fre(e,t,r){var n=$e(2052);return n.write_shift(4,e),cb(t,n),cb(r,n),n.length>n.l?n.slice(0,n.l):n}function hre(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(Ke(e,615,$o(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Ke(e,44,nre(a,t[a]))}),Ke(e,616))}}function pre(e){var t=1;Ke(e,611,$o(t)),Ke(e,43,ire({sz:12,color:{theme:1},name:"Calibri",family:2})),Ke(e,612)}function mre(e){var t=2;Ke(e,603,$o(t)),Ke(e,45,AO({patternType:"none"})),Ke(e,45,AO({patternType:"gray125"})),Ke(e,604)}function gre(e){var t=1;Ke(e,613,$o(t)),Ke(e,46,ure()),Ke(e,614)}function vre(e){var t=1;Ke(e,626,$o(t)),Ke(e,47,L$({numFmtId:0},65535)),Ke(e,627)}function xre(e,t){Ke(e,617,$o(t.length)),t.forEach(function(r){Ke(e,47,L$(r,0))}),Ke(e,618)}function yre(e){var t=1;Ke(e,619,$o(t)),Ke(e,48,dre({xfId:0,name:"Normal"})),Ke(e,620)}function bre(e){var t=0;Ke(e,505,$o(t)),Ke(e,506)}function wre(e){var t=0;Ke(e,508,fre(t,"TableStyleMedium9","PivotStyleMedium4")),Ke(e,509)}function _re(e,t){var r=rs();return Ke(r,278),hre(r,e.SSF),pre(r),mre(r),gre(r),vre(r),xre(r,t.cellXfs),yre(r),bre(r),wre(r),Ke(r,279),r.end()}function I$(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[ua];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Sre(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:gi(e)}}function Nre(e){var t=$e(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Ra(e.name,t),t.slice(0,t.l)}function jre(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function Are(e){var t=$e(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function Ere(e,t){var r=$e(8+2*t.length);return r.write_shift(4,e),Ra(t,r),r.slice(0,r.l)}function Tre(e){return e.l+=4,e.read_shift(4)!=0}function Cre(e,t){var r=$e(8);return r.write_shift(4,e),r.write_shift(4,1),r}function kre(){var e=rs();return Ke(e,332),Ke(e,334,$o(1)),Ke(e,335,Nre({name:"XLDAPR",version:12e4,flags:3496657072})),Ke(e,336),Ke(e,339,Ere(1,"XLDAPR")),Ke(e,52),Ke(e,35,$o(514)),Ke(e,4096,$o(0)),Ke(e,4097,Gs(1)),Ke(e,36),Ke(e,53),Ke(e,340),Ke(e,337,Cre(1)),Ke(e,51,Are([[1,0]])),Ke(e,338),Ke(e,333),e.end()}function R$(){var e=[ua];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function Ore(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Hr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}var Dh=1024;function D$(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[it("xml",null,{"xmlns:v":Ss.v,"xmlns:o":Ss.o,"xmlns:x":Ss.x,"xmlns:mv":Ss.mv}).replace(/\/>/,">"),it("o:shapelayout",it("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),it("v:shapetype",[it("v:stroke",null,{joinstyle:"miter"}),it("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Dh<e*1e3;)Dh+=1e3;return t.forEach(function(i){var s=Ia(i[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?it("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=it("v:fill",c,o),d={on:"t",obscured:"t"};++Dh,a=a.concat(["<v:shape"+$g({id:"_x0000_s"+Dh,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,it("v:shadow",null,d),it("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Qa("x:Anchor",[s.c+1,0,s.r+1,0,s.c+3,20,s.r+5,20].join(",")),Qa("x:AutoFill","False"),Qa("x:Row",String(s.r)),Qa("x:Column",String(s.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function M$(e){var t=[ua,it("comments",null,{xmlns:yp[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var i=zr(a.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(zr(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),i.length<=1)t.push(Qa("t",zr(i[0]||"")));else{for(var s=`Comment:
    `+i[0]+`
`,o=1;o<i.length;++o)s+=`Reply:
    `+i[o]+`
`;t.push(Qa("t",zr(s)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function Pre(e,t,r){var n=[ua,it("ThreadedComments",null,{xmlns:La.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var i="";(a[1]||[]).forEach(function(s,o){if(!s.T){delete s.ID;return}s.a&&t.indexOf(s.a)==-1&&t.push(s.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?i=c.id:c.parentId=i,s.ID=c.id,s.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),n.push(it("threadedComment",Qa("text",s.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function Lre(e){var t=[ua,it("personList",null,{xmlns:La.TCMNT,"xmlns:x":yp[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(it("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function Ire(e){var t={};t.iauthor=e.read_shift(4);var r=zf(e);return t.rfx=r.s,t.ref=Hr(r.s),e.l+=16,t}function Rre(e,t){return t==null&&(t=$e(36)),t.write_shift(4,e[1].iauthor),wp(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var Dre=gi;function Mre(e){return Ra(e.slice(0,54))}function Fre(e){var t=rs(),r=[];return Ke(t,628),Ke(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Ke(t,632,Mre(a.a)))})}),Ke(t,631),Ke(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var i={s:Ia(n[0]),e:Ia(n[0])};Ke(t,635,Rre([i,a])),a.t&&a.t.length>0&&Ke(t,637,Bee(a)),Ke(t,636),delete a.iauthor})}),Ke(t,634),Ke(t,629),t.end()}function $re(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Gr.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var F$=["xlsb","xlsm","xlam","biff8","xla"],Bre=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,i,s){var o=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),s.length==0?o=!0:s.charAt(0)=="["&&(o=!0,s=s.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,d=s.length>0?parseInt(s,10)|0:0;return o?d+=t.c:--d,c?u+=t.r:--u,a+(o?"":"$")+mi(d)+(c?"":"$")+ei(u)}return function(a,i){return t=i,a.replace(e,r)}}(),T3=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,C3=function(){return function(t,r){return t.replace(T3,function(n,a,i,s,o,c){var u=_3(s)-(i?0:r.c),d=w3(c)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",p=u==0?"":i?u+1:"["+u+"]";return a+"R"+f+"C"+p})}}();function Ure(e,t){return e.replace(T3,function(r,n,a,i,s,o){return n+(a=="$"?a+i:mi(_3(i)+t.c))+(s=="$"?s+o:ei(w3(o)+t.r))})}function zre(e){return e.length!=1}function ra(e){e.l+=1}function Vu(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function $$(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return B$(e);r.biff==12&&(n=4)}var a=e.read_shift(n),i=e.read_shift(n),s=Vu(e),o=Vu(e);return{s:{r:a,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function B$(e){var t=Vu(e),r=Vu(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function qre(e,t,r){if(r.biff<8)return B$(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),i=Vu(e),s=Vu(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:s[0],cRel:s[1],rRel:s[2]}}}function U$(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return Hre(e);var n=e.read_shift(r&&r.biff==12?4:2),a=Vu(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function Hre(e){var t=Vu(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function Wre(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Vre(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return Gre(e);var a=e.read_shift(n>=12?4:2),i=e.read_shift(2),s=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;a>524287;)a-=1048576;if(s==1)for(;i>8191;)i=i-16384;return{r:a,c:i,cRel:s,rRel:o}}function Gre(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function Kre(e,t,r){var n=(e[e.l++]&96)>>5,a=$$(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function Xre(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var s=$$(e,i,r);return[n,a,s]}function Yre(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Jre(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,a]}function Qre(e,t,r){var n=(e[e.l++]&96)>>5,a=qre(e,t-1,r);return[n,a]}function Zre(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function EO(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function ene(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],i=0;i<=n;++i)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function tne(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function rne(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function nne(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function ane(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function z$(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function ine(e){return e.read_shift(2),z$(e)}function sne(e){return e.read_shift(2),z$(e)}function one(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=U$(e,0,r);return[n,a]}function lne(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=Vre(e,0,r);return[n,a]}function cne(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=U$(e,0,r);return[n,a,i]}function une(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[uae[a],W$[a],n]}function dne(e,t,r){var n=e[e.l++],a=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:fne(e);return[a,(i[0]===0?W$:cae)[i[1]]]}function fne(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function hne(e,t,r){e.l+=r&&r.biff==2?3:4}function pne(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function mne(e){return e.l++,zv[e.read_shift(1)]}function gne(e){return e.l++,e.read_shift(2)}function vne(e){return e.l++,e.read_shift(1)!==0}function xne(e){return e.l++,_p(e)}function yne(e,t,r){return e.l++,N$(e,t-1,r)}function bne(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=cte(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=zv[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=_p(e);break;case 2:r[1]=hte(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function wne(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],i=0;i!=n;++i)a.push((r.biff==12?zf:gte)(e));return a}function _ne(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var i=0,s=[];i!=n&&(s[i]=[]);++i)for(var o=0;o!=a;++o)s[i][o]=bne(e,r.biff);return s}function Sne(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,i=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function Nne(e,t,r){if(r.biff==5)return jne(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),i=e.read_shift(4);return[n,a,i]}function jne(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function Ane(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function Ene(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function Tne(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function Cne(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,a]}var kne=vl,One=vl,Pne=vl;function qv(e,t,r){return e.l+=2,[Wre(e)]}function k3(e){return e.l+=6,[]}var Lne=qv,Ine=k3,Rne=k3,Dne=qv;function q$(e){return e.l+=2,[_$(e),e.read_shift(2)&1]}var Mne=qv,Fne=q$,$ne=k3,Bne=qv,Une=qv,zne=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function qne(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),i=e.read_shift(2),s=zne[r>>2&31];return{ixti:t,coltype:r&3,rt:s,idx:n,c:a,C:i}}function Hne(e){return e.l+=2,[e.read_shift(4)]}function Wne(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Vne(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Gne(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Kne(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Xne(e){return e.l+=4,[0,0]}var TO={1:{n:"PtgExp",f:pne},2:{n:"PtgTbl",f:Pne},3:{n:"PtgAdd",f:ra},4:{n:"PtgSub",f:ra},5:{n:"PtgMul",f:ra},6:{n:"PtgDiv",f:ra},7:{n:"PtgPower",f:ra},8:{n:"PtgConcat",f:ra},9:{n:"PtgLt",f:ra},10:{n:"PtgLe",f:ra},11:{n:"PtgEq",f:ra},12:{n:"PtgGe",f:ra},13:{n:"PtgGt",f:ra},14:{n:"PtgNe",f:ra},15:{n:"PtgIsect",f:ra},16:{n:"PtgUnion",f:ra},17:{n:"PtgRange",f:ra},18:{n:"PtgUplus",f:ra},19:{n:"PtgUminus",f:ra},20:{n:"PtgPercent",f:ra},21:{n:"PtgParen",f:ra},22:{n:"PtgMissArg",f:ra},23:{n:"PtgStr",f:yne},26:{n:"PtgSheet",f:Wne},27:{n:"PtgEndSheet",f:Vne},28:{n:"PtgErr",f:mne},29:{n:"PtgBool",f:vne},30:{n:"PtgInt",f:gne},31:{n:"PtgNum",f:xne},32:{n:"PtgArray",f:Zre},33:{n:"PtgFunc",f:une},34:{n:"PtgFuncVar",f:dne},35:{n:"PtgName",f:Sne},36:{n:"PtgRef",f:one},37:{n:"PtgArea",f:Kre},38:{n:"PtgMemArea",f:Ane},39:{n:"PtgMemErr",f:kne},40:{n:"PtgMemNoMem",f:One},41:{n:"PtgMemFunc",f:Ene},42:{n:"PtgRefErr",f:Tne},43:{n:"PtgAreaErr",f:Yre},44:{n:"PtgRefN",f:lne},45:{n:"PtgAreaN",f:Qre},46:{n:"PtgMemAreaN",f:Gne},47:{n:"PtgMemNoMemN",f:Kne},57:{n:"PtgNameX",f:Nne},58:{n:"PtgRef3d",f:cne},59:{n:"PtgArea3d",f:Xre},60:{n:"PtgRefErr3d",f:Cne},61:{n:"PtgAreaErr3d",f:Jre},255:{}},Yne={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Jne={1:{n:"PtgElfLel",f:q$},2:{n:"PtgElfRw",f:Bne},3:{n:"PtgElfCol",f:Lne},6:{n:"PtgElfRwV",f:Une},7:{n:"PtgElfColV",f:Dne},10:{n:"PtgElfRadical",f:Mne},11:{n:"PtgElfRadicalS",f:$ne},13:{n:"PtgElfColS",f:Ine},15:{n:"PtgElfColSV",f:Rne},16:{n:"PtgElfRadicalLel",f:Fne},25:{n:"PtgList",f:qne},29:{n:"PtgSxName",f:Hne},255:{}},Qne={0:{n:"PtgAttrNoop",f:Xne},1:{n:"PtgAttrSemi",f:ane},2:{n:"PtgAttrIf",f:rne},4:{n:"PtgAttrChoose",f:ene},8:{n:"PtgAttrGoto",f:tne},16:{n:"PtgAttrSum",f:hne},32:{n:"PtgAttrBaxcel",f:EO},33:{n:"PtgAttrBaxcel",f:EO},64:{n:"PtgAttrSpace",f:ine},65:{n:"PtgAttrSpaceSemi",f:sne},128:{n:"PtgAttrIfError",f:nne},255:{}};function Zne(e,t,r,n){if(n.biff<8)return vl(e,t);for(var a=e.l+t,i=[],s=0;s!==r.length;++s)switch(r[s][0]){case"PtgArray":r[s][1]=_ne(e,0,n),i.push(r[s][1]);break;case"PtgMemArea":r[s][2]=wne(e,r[s][1],n),i.push(r[s][2]);break;case"PtgExp":n&&n.biff==12&&(r[s][1][1]=e.read_shift(4),i.push(r[s][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[s][0]}return t=a-e.l,t!==0&&i.push(vl(e,t)),i}function eae(e,t,r){for(var n=e.l+t,a,i,s=[];n!=e.l;)t=n-e.l,i=e[e.l],a=TO[i]||TO[Yne[i]],(i===24||i===25)&&(a=(i===24?Jne:Qne)[e[e.l+1]]),!a||!a.f?vl(e,t):s.push([a.n,a.f(e,t,r)]);return s}function tae(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],i=0;i<n.length;++i){var s=n[i];if(s)switch(s[0]){case 2:a.push('"'+s[1].replace(/"/g,'""')+'"');break;default:a.push(s[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var rae={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function nae(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function H$(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function CO(e,t,r){var n=H$(e,t,r);return n=="#REF"?n:nae(n,r)}function M0(e,t,r,n,a){var i=a&&a.biff||8,s={s:{c:0,r:0}},o=[],c,u,d,f=0,p=0,h,g="";if(!e[0]||!e[0][0])return"";for(var m=-1,x="",y=0,v=e[0].length;y<v;++y){var b=e[0][y];switch(b[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),m>=0){switch(e[0][m][1][0]){case 0:x=$n(" ",e[0][m][1][1]);break;case 1:x=$n("\r",e[0][m][1][1]);break;default:if(x="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}u=u+x,m=-1}o.push(u+rae[b[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=eg(b[1][1],s,a),o.push(tg(d,i));break;case"PtgRefN":d=r?eg(b[1][1],r,a):b[1][1],o.push(tg(d,i));break;case"PtgRef3d":f=b[1][1],d=eg(b[1][2],s,a),g=CO(n,f,a),o.push(g+"!"+tg(d,i));break;case"PtgFunc":case"PtgFuncVar":var S=b[1][0],_=b[1][1];S||(S=0),S&=127;var A=S==0?[]:o.slice(-S);o.length-=S,_==="User"&&(_=A.shift()),o.push(_+"("+A.join(",")+")");break;case"PtgBool":o.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(b[1]);break;case"PtgNum":o.push(String(b[1]));break;case"PtgStr":o.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(b[1]);break;case"PtgAreaN":h=hO(b[1][1],r?{s:r}:s,a),o.push(S5(h,a));break;case"PtgArea":h=hO(b[1][1],s,a),o.push(S5(h,a));break;case"PtgArea3d":f=b[1][1],h=b[1][2],g=CO(n,f,a),o.push(g+"!"+S5(h,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=b[1][2];var j=(n.names||[])[p-1]||(n[0]||[])[p],E=j?j.Name:"SH33TJSNAME"+String(p);E&&E.slice(0,6)=="_xlfn."&&!a.xlfn&&(E=E.slice(6)),o.push(E);break;case"PtgNameX":var T=b[1][1];p=b[1][2];var L;if(a.biff<=5)T<0&&(T=-T),n[T]&&(L=n[T][p]);else{var O="";if(((n[T]||[])[0]||[])[0]==14849||(((n[T]||[])[0]||[])[0]==1025?n[T][p]&&n[T][p].itab>0&&(O=n.SheetNames[n[T][p].itab-1]+"!"):O=n.SheetNames[p-1]+"!"),n[T]&&n[T][p])O+=n[T][p].Name;else if(n[0]&&n[0][p])O+=n[0][p].Name;else{var I=(H$(n,T,a)||"").split(";;");I[p-1]?O=I[p-1]:O+="SH33TJSERRX"}o.push(O);break}L||(L={Name:"SH33TJSERRY"}),o.push(L.Name);break;case"PtgParen":var D="(",z=")";if(m>=0){switch(x="",e[0][m][1][0]){case 2:D=$n(" ",e[0][m][1][1])+D;break;case 3:D=$n("\r",e[0][m][1][1])+D;break;case 4:z=$n(" ",e[0][m][1][1])+z;break;case 5:z=$n("\r",e[0][m][1][1])+z;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}m=-1}o.push(D+o.pop()+z);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var Y={c:r.c,r:r.r};if(n.sharedf[Hr(d)]){var se=n.sharedf[Hr(d)];o.push(M0(se,s,Y,n,a))}else{var ee=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(M0(u[1],s,Y,n,a)),ee=!0;break}ee||o.push(b[1])}break;case"PtgArray":o.push("{"+tae(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":m=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var J=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&m>=0&&J.indexOf(e[0][y][0])==-1){b=e[0][m];var oe=!0;switch(b[1][0]){case 4:oe=!1;case 0:x=$n(" ",b[1][1]);break;case 5:oe=!1;case 1:x=$n("\r",b[1][1]);break;default:if(x="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}o.push((oe?x:"")+o.pop()+(oe?"":x)),m=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function aae(e){if(e==null){var t=$e(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return _f(e);return _f(0)}function iae(e,t,r,n,a){var i=Sf(t,r,a),s=aae(e.v),o=$e(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=$e(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Ja([i,s,o,u]);return f}function tw(e,t,r){var n=e.read_shift(4),a=eae(e,n,r),i=e.read_shift(4),s=i>0?Zne(e,i,a,r):null;return[a,s]}var sae=tw,rw=tw,oae=tw,lae=tw,cae={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},W$={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},uae={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function dae(e){var t="of:="+e.replace(T3,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function fae(e){return e.replace(/\./,"!")}var rg=typeof Map<"u";function O3(e,t,r){var n=0,a=e.length;if(r){if(rg?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=rg?r.get(t):r[t];n<i.length;++n)if(e[i[n]].t===t)return e.Count++,i[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(rg?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function nw(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(oc=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=hb(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=cj(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function V$(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Zu(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,i=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){UF(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=i;++a)if(e[a].numFmtId===n)return a;return e[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function hae(e,t,r){if(e&&e["!ref"]){var n=mn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function pae(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+la(e[r])+'"/>';return t+"</mergeCells>"}function mae(e,t,r,n,a){var i=!1,s={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,s.codeName=Fg(zr(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+it("outlinePr",null,u)}!i&&!o||(a[a.length]=it("sheetPr",o,s))}var gae=["objects","scenarios","selectLockedCells","selectUnlockedCells"],vae=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function xae(e){var t={sheet:1};return gae.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),vae.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=C$(e.password).toString(16).toUpperCase()),it("sheetProtection",null,t)}function yae(e){return V$(e),it("pageMargins",null,e)}function bae(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=it("col",null,nw(a,n)));return r[r.length]="</cols>",r.join("")}function wae(e,t,r,n){var a=typeof e.ref=="string"?e.ref:la(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,s=Ls(a);s.s.r==s.e.r&&(s.e.r=Ls(t["!ref"]).e.r,a=la(s));for(var o=0;o<i.length;++o){var c=i[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),it("autoFilter",null,{ref:a})}function _ae(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),it("sheetViews",it("sheetView",null,a),{})}function Sae(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",i=e.t,s=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=zv[e.v];break;case"d":n&&n.cellDates?a=Mi(e.v,-1).toISOString():(e=is(e),e.t="n",a=""+(e.v=as(Mi(e.v)))),typeof e.z>"u"&&(e.z=Un[14]);break;default:a=e.v;break}var o=Qa("v",zr(a)),c={r:t},u=Zu(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=Qa("v",""+O3(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=s),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=it("f",zr(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),it("c",o,c)}function Nae(e,t,r,n){var a=[],i=[],s=mn(e["!ref"]),o="",c,u="",d=[],f=0,p=0,h=e["!rows"],g=Array.isArray(e),m={r:u},x,y=-1;for(p=s.s.c;p<=s.e.c;++p)d[p]=mi(p);for(f=s.s.r;f<=s.e.r;++f){for(i=[],u=ei(f),p=s.s.c;p<=s.e.c;++p){c=d[p]+u;var v=g?(e[f]||[])[p]:e[c];v!==void 0&&(o=Sae(v,c,e,t))!=null&&i.push(o)}(i.length>0||h&&h[f])&&(m={r:u},h&&h[f]&&(x=h[f],x.hidden&&(m.hidden=1),y=-1,x.hpx?y=pb(x.hpx):x.hpt&&(y=x.hpt),y>-1&&(m.ht=y,m.customHeight=1),x.level&&(m.outlineLevel=x.level)),a[a.length]=it("row",i.join(""),m))}if(h)for(;f<h.length;++f)h&&h[f]&&(m={r:f+1},x=h[f],x.hidden&&(m.hidden=1),y=-1,x.hpx?y=pb(x.hpx):x.hpt&&(y=x.hpt),y>-1&&(m.ht=y,m.customHeight=1),x.level&&(m.outlineLevel=x.level),a[a.length]=it("row","",m));return a.join("")}function G$(e,t,r,n){var a=[ua,it("worksheet",null,{xmlns:yp[0],"xmlns:r":La.r})],i=r.SheetNames[e],s=0,o="",c=r.Sheets[i];c==null&&(c={});var u=c["!ref"]||"A1",d=mn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=la(d)}n||(n={}),c["!comments"]=[];var f=[];mae(c,r,e,t,a),a[a.length]=it("dimension",null,{ref:u}),a[a.length]=_ae(c,t,e,r),t.sheetFormat&&(a[a.length]=it("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=bae(c,c["!cols"])),a[s=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=Nae(c,t),o.length>0&&(a[a.length]=o)),a.length>s+1&&(a[a.length]="</sheetData>",a[s]=a[s].replace("/>",">")),c["!protect"]&&(a[a.length]=xae(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=wae(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=pae(c["!merges"]));var p=-1,h,g=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(m){m[1].Target&&(h={ref:m[0]},m[1].Target.charAt(0)!="#"&&(g=Fr(n,-1,zr(m[1].Target).replace(/#.*$/,""),Sr.HLINK),h["r:id"]="rId"+g),(p=m[1].Target.indexOf("#"))>-1&&(h.location=zr(m[1].Target.slice(p+1))),m[1].Tooltip&&(h.tooltip=zr(m[1].Tooltip)),a[a.length]=it("hyperlink",null,h))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=yae(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=Qa("ignoredErrors",it("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=Fr(n,-1,"../drawings/drawing"+(e+1)+".xml",Sr.DRAW),a[a.length]=it("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=f),c["!comments"].length>0&&(g=Fr(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Sr.VML),a[a.length]=it("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function jae(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=a/20),r}function Aae(e,t,r){var n=$e(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var i=320;a.hpx?i=pb(a.hpx)*20:a.hpt&&(i=a.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var s=0;a.level&&(s|=a.level),a.hidden&&(s|=16),(a.hpx||a.hpt)&&(s|=32),n.write_shift(1,s),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,p=-1,h=d<<10;h<d+1<<10;++h){u.c=h;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Hr(u)];g&&(f<0&&(f=h),p=h)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,p))}var m=n.l;return n.l=c,n.write_shift(4,o),n.l=m,n.length>n.l?n.slice(0,n.l):n}function Eae(e,t,r,n){var a=Aae(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&Ke(e,0,a)}var Tae=zf,Cae=wp;function kae(){}function Oae(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=Uee(e),r}function Pae(e,t,r){r==null&&(r=$e(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return ub({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),l$(e,r),r.slice(0,r.l)}function Lae(e){var t=so(e);return[t]}function Iae(e,t,r){return r==null&&(r=$e(8)),$f(t,r)}function Rae(e){var t=Bf(e);return[t]}function Dae(e,t,r){return r==null&&(r=$e(4)),Uf(t,r)}function Mae(e){var t=so(e),r=e.read_shift(1);return[t,r,"b"]}function Fae(e,t,r){return r==null&&(r=$e(9)),$f(t,r),r.write_shift(1,e.v?1:0),r}function $ae(e){var t=Bf(e),r=e.read_shift(1);return[t,r,"b"]}function Bae(e,t,r){return r==null&&(r=$e(5)),Uf(t,r),r.write_shift(1,e.v?1:0),r}function Uae(e){var t=so(e),r=e.read_shift(1);return[t,r,"e"]}function zae(e,t,r){return r==null&&(r=$e(9)),$f(t,r),r.write_shift(1,e.v),r}function qae(e){var t=Bf(e),r=e.read_shift(1);return[t,r,"e"]}function Hae(e,t,r){return r==null&&(r=$e(8)),Uf(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function Wae(e){var t=so(e),r=e.read_shift(4);return[t,r,"s"]}function Vae(e,t,r){return r==null&&(r=$e(12)),$f(t,r),r.write_shift(4,t.v),r}function Gae(e){var t=Bf(e),r=e.read_shift(4);return[t,r,"s"]}function Kae(e,t,r){return r==null&&(r=$e(8)),Uf(t,r),r.write_shift(4,t.v),r}function Xae(e){var t=so(e),r=_p(e);return[t,r,"n"]}function Yae(e,t,r){return r==null&&(r=$e(16)),$f(t,r),_f(e.v,r),r}function Jae(e){var t=Bf(e),r=_p(e);return[t,r,"n"]}function Qae(e,t,r){return r==null&&(r=$e(12)),Uf(t,r),_f(e.v,r),r}function Zae(e){var t=so(e),r=c$(e);return[t,r,"n"]}function eie(e,t,r){return r==null&&(r=$e(12)),$f(t,r),u$(e.v,r),r}function tie(e){var t=Bf(e),r=c$(e);return[t,r,"n"]}function rie(e,t,r){return r==null&&(r=$e(8)),Uf(t,r),u$(e.v,r),r}function nie(e){var t=so(e),r=S3(e);return[t,r,"is"]}function aie(e){var t=so(e),r=gi(e);return[t,r,"str"]}function iie(e,t,r){return r==null&&(r=$e(12+4*e.v.length)),$f(t,r),Ra(e.v,r),r.length>r.l?r.slice(0,r.l):r}function sie(e){var t=Bf(e),r=gi(e);return[t,r,"str"]}function oie(e,t,r){return r==null&&(r=$e(8+4*e.v.length)),Uf(t,r),Ra(e.v,r),r.length>r.l?r.slice(0,r.l):r}function lie(e,t,r){var n=e.l+t,a=so(e);a.r=r["!row"];var i=e.read_shift(1),s=[a,i,"b"];if(r.cellFormula){e.l+=2;var o=rw(e,n-e.l,r);s[3]=M0(o,null,a,r.supbooks,r)}else e.l=n;return s}function cie(e,t,r){var n=e.l+t,a=so(e);a.r=r["!row"];var i=e.read_shift(1),s=[a,i,"e"];if(r.cellFormula){e.l+=2;var o=rw(e,n-e.l,r);s[3]=M0(o,null,a,r.supbooks,r)}else e.l=n;return s}function uie(e,t,r){var n=e.l+t,a=so(e);a.r=r["!row"];var i=_p(e),s=[a,i,"n"];if(r.cellFormula){e.l+=2;var o=rw(e,n-e.l,r);s[3]=M0(o,null,a,r.supbooks,r)}else e.l=n;return s}function die(e,t,r){var n=e.l+t,a=so(e);a.r=r["!row"];var i=gi(e),s=[a,i,"str"];if(r.cellFormula){e.l+=2;var o=rw(e,n-e.l,r);s[3]=M0(o,null,a,r.supbooks,r)}else e.l=n;return s}var fie=zf,hie=wp;function pie(e,t){return t==null&&(t=$e(4)),t.write_shift(4,e),t}function mie(e,t){var r=e.l+t,n=zf(e),a=N3(e),i=gi(e),s=gi(e),o=gi(e);e.l=r;var c={rfx:n,relId:a,loc:i,display:o};return s&&(c.Tooltip=s),c}function gie(e,t){var r=$e(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));wp({s:Ia(e[0]),e:Ia(e[0])},r),j3("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return Ra(a||"",r),Ra(e[1].Tooltip||"",r),Ra("",r),r.slice(0,r.l)}function vie(){}function xie(e,t,r){var n=e.l+t,a=d$(e),i=e.read_shift(1),s=[a];if(s[2]=i,r.cellFormula){var o=sae(e,n-e.l,r);s[1]=o}else e.l=n;return s}function yie(e,t,r){var n=e.l+t,a=zf(e),i=[a];if(r.cellFormula){var s=lae(e,n-e.l,r);i[1]=s,e.l=n}else e.l=n;return i}function bie(e,t,r){r==null&&(r=$e(18));var n=nw(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var K$=["left","right","top","bottom","header","footer"];function wie(e){var t={};return K$.forEach(function(r){t[r]=_p(e)}),t}function _ie(e,t){return t==null&&(t=$e(6*8)),V$(e),K$.forEach(function(r){_f(e[r],t)}),t}function Sie(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function Nie(e,t,r){r==null&&(r=$e(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function jie(e){var t=$e(24);return t.write_shift(4,4),t.write_shift(4,1),wp(e,t),t}function Aie(e,t){return t==null&&(t=$e(16*4+2)),t.write_shift(2,e.password?C$(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function Eie(){}function Tie(){}function Cie(e,t,r,n,a,i,s){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=is(t),t.z=t.z||Un[14],t.v=as(Mi(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var c={r,c:n};switch(c.s=Zu(a.cellXfs,t,a),t.l&&i["!links"].push([Hr(c),t.l]),t.c&&i["!comments"].push([Hr(c),t.c]),t.t){case"s":case"str":return a.bookSST?(o=O3(a.Strings,t.v,a.revStrings),c.t="s",c.v=o,s?Ke(e,18,Kae(t,c)):Ke(e,7,Vae(t,c))):(c.t="str",s?Ke(e,17,oie(t,c)):Ke(e,6,iie(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?s?Ke(e,13,rie(t,c)):Ke(e,2,eie(t,c)):s?Ke(e,16,Qae(t,c)):Ke(e,5,Yae(t,c)),!0;case"b":return c.t="b",s?Ke(e,15,Bae(t,c)):Ke(e,4,Fae(t,c)),!0;case"e":return c.t="e",s?Ke(e,14,Hae(t,c)):Ke(e,3,zae(t,c)),!0}return s?Ke(e,12,Dae(t,c)):Ke(e,1,Iae(t,c)),!0}function kie(e,t,r,n){var a=mn(t["!ref"]||"A1"),i,s="",o=[];Ke(e,145);var c=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){s=ei(d),Eae(e,t,a,d);var f=!1;if(d<=a.e.r)for(var p=a.s.c;p<=a.e.c;++p){d===a.s.r&&(o[p]=mi(p)),i=o[p]+s;var h=c?(t[d]||[])[p]:t[i];if(!h){f=!1;continue}f=Cie(e,h,d,p,n,t,f)}}Ke(e,146)}function Oie(e,t){!t||!t["!merges"]||(Ke(e,177,pie(t["!merges"].length)),t["!merges"].forEach(function(r){Ke(e,176,hie(r))}),Ke(e,178))}function Pie(e,t){!t||!t["!cols"]||(Ke(e,390),t["!cols"].forEach(function(r,n){r&&Ke(e,60,bie(n,r))}),Ke(e,391))}function Lie(e,t){!t||!t["!ref"]||(Ke(e,648),Ke(e,649,jie(mn(t["!ref"]))),Ke(e,650))}function Iie(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=Fr(r,-1,n[1].Target.replace(/#.*$/,""),Sr.HLINK);Ke(e,494,gie(n,a))}}),delete t["!links"]}function Rie(e,t,r,n){if(t["!comments"].length>0){var a=Fr(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Sr.VML);Ke(e,551,j3("rId"+a)),t["!legacy"]=a}}function Die(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],i=typeof a.ref=="string"?a.ref:la(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=Ls(i);o.s.r==o.e.r&&(o.e.r=Ls(t["!ref"]).e.r,i=la(o));for(var c=0;c<s.length;++c){var u=s[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+i;break}}c==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),Ke(e,161,wp(mn(i))),Ke(e,162)}}function Mie(e,t,r){Ke(e,133),Ke(e,137,Nie(t,r)),Ke(e,138),Ke(e,134)}function Fie(e,t){t["!protect"]&&Ke(e,535,Aie(t["!protect"]))}function $ie(e,t,r,n){var a=rs(),i=r.SheetNames[e],s=r.Sheets[i]||{},o=i;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var c=mn(s["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return s["!links"]=[],s["!comments"]=[],Ke(a,129),(r.vbaraw||s["!outline"])&&Ke(a,147,Pae(o,s["!outline"])),Ke(a,148,Cae(c)),Mie(a,s,r.Workbook),Pie(a,s),kie(a,s,e,t),Fie(a,s),Die(a,s,r,e),Oie(a,s),Iie(a,s,n),s["!margins"]&&Ke(a,476,_ie(s["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&Lie(a,s),Rie(a,s,e,n),Ke(a,130),a.end()}function Bie(e,t){e.l+=10;var r=gi(e);return{name:r}}var Uie=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function zie(e){return!e.Workbook||!e.Workbook.WBProps?"false":yee(e.Workbook.WBProps.date1904)?"true":"false"}var qie="][*?/\\".split("");function X$(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return qie.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Hie(e,t,r){e.forEach(function(n,a){X$(n);for(var i=0;i<a;++i)if(n==e[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var s=t&&t[a]&&t[a].CodeName||n;if(s.charCodeAt(0)==95&&s.length>22)throw new Error("Bad Code Name: Worksheet"+s)}})}function Wie(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];Hie(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)hae(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}function Y$(e){var t=[ua];t[t.length]=it("workbook",null,{xmlns:yp[0],"xmlns:r":La.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(Uie.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=it("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],i=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!a[i]||!a[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var s={name:zr(e.SheetNames[i].slice(0,31))};if(s.sheetId=""+(i+1),s["r:id"]="rId"+(i+1),a[i])switch(a[i].Hidden){case 1:s.state="hidden";break;case 2:s.state="veryHidden";break}t[t.length]=it("sheet",null,s)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(t[t.length]=it("definedName",zr(o.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function Vie(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=lj(e),r.name=gi(e),r}function Gie(e,t){return t||(t=$e(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),j3(e.strRelID,t),Ra(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function Kie(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?gi(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Xie(e,t){t||(t=$e(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),l$(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function Yie(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),i=zee(e),s=oae(e,0,r),o=N3(e);e.l=n;var c={Name:i,Ptg:s};return a<268435455&&(c.Sheet=a),o&&(c.Comment=o),c}function Jie(e,t){Ke(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Ke(e,156,Gie(a))}Ke(e,144)}function Qie(e,t){t||(t=$e(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Ra("SheetJS",t),Ra(rb.version,t),Ra(rb.version,t),Ra("7262",t),t.length>t.l?t.slice(0,t.l):t}function Zie(e,t){t||(t=$e(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function ese(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&i==-1&&(i=n);i>a||(Ke(e,135),Ke(e,158,Zie(a)),Ke(e,136))}}function tse(e,t){var r=rs();return Ke(r,131),Ke(r,128,Qie()),Ke(r,153,Xie(e.Workbook&&e.Workbook.WBProps||null)),ese(r,e),Jie(r,e),Ke(r,132),r.end()}function rse(e,t,r){return(t.slice(-4)===".bin"?tse:Y$)(e)}function nse(e,t,r,n,a){return(t.slice(-4)===".bin"?$ie:G$)(e,r,n,a)}function ase(e,t,r){return(t.slice(-4)===".bin"?_re:P$)(e,r)}function ise(e,t,r){return(t.slice(-4)===".bin"?Xte:T$)(e,r)}function sse(e,t,r){return(t.slice(-4)===".bin"?Fre:M$)(e)}function ose(e){return(e.slice(-4)===".bin"?kre:R$)()}function lse(e,t){var r=[];return e.Props&&r.push(ate(e.Props,t)),e.Custprops&&r.push(ite(e.Props,e.Custprops)),r.join("")}function cse(){return""}function use(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var i=[];i.push(it("NumberFormat",null,{"ss:Format":zr(Un[n.numFmtId])}));var s={"ss:ID":"s"+(21+a)};r.push(it("Style",i.join(""),s))}),it("Styles",r.join(""))}function J$(e){return it("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+C3(e.Ref,{r:0,c:0})})}function dse(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(J$(a)))}return it("Names",r.join(""))}function fse(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,i=[],s=0;s<a.length;++s){var o=a[s];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||i.push(J$(o)))}return i.join("")}function hse(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(it("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(it("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(it("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(it("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(Qa("ProtectContents","True")),e["!protect"].objects&&a.push(Qa("ProtectObjects","True")),e["!protect"].scenarios&&a.push(Qa("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(Qa("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(Qa("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(s){e["!protect"][s[0]]&&a.push("<"+s[1]+"/>")})),a.length==0?"":it("WorksheetOptions",a.join(""),{xmlns:Ss.x})}function pse(e){return e.map(function(t){var r=xee(t.t||""),n=it("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return it("Comment",n,{"ss:Author":t.a})}).join("")}function mse(e,t,r,n,a,i,s){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+zr(C3(e.f,s))),e.F&&e.F.slice(0,t.length)==t){var c=Ia(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==s.r?"":"["+(c.r-s.r)+"]")+"C"+(c.c==s.c?"":"["+(c.c-s.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=zr(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=zr(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=s.c||u[d].s.r!=s.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",p="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",p=String(e.v);break;case"b":f="Boolean",p=e.v?"1":"0";break;case"e":f="Error",p=zv[e.v];break;case"d":f="DateTime",p=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Un[14]);break;case"s":f="String",p=vee(e.v||"");break}var h=Zu(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+h),o["ss:Index"]=s.c+1;var g=e.v!=null?p:"",m=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(m+=pse(e.c)),it("Cell",m,o)}function gse(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=O$(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function vse(e,t,r,n){if(!e["!ref"])return"";var a=mn(e["!ref"]),i=e["!merges"]||[],s=0,o=[];e["!cols"]&&e["!cols"].forEach(function(x,y){E3(x);var v=!!x.width,b=nw(y,x),S={"ss:Index":y+1};v&&(S["ss:Width"]=fb(b.width)),x.hidden&&(S["ss:Hidden"]="1"),o.push(it("Column",null,S))});for(var c=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[gse(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var p=!1;for(s=0;s!=i.length;++s)if(!(i[s].s.c>f)&&!(i[s].s.r>u)&&!(i[s].e.c<f)&&!(i[s].e.r<u)){(i[s].s.c!=f||i[s].s.r!=u)&&(p=!0);break}if(!p){var h={r:u,c:f},g=Hr(h),m=c?(e[u]||[])[f]:e[g];d.push(mse(m,g,e,t,r,n,h))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function xse(e,t,r){var n=[],a=r.SheetNames[e],i=r.Sheets[a],s=i?fse(i,t,e,r):"";return s.length>0&&n.push("<Names>"+s+"</Names>"),s=i?vse(i,t,e,r):"",s.length>0&&n.push("<Table>"+s+"</Table>"),n.push(hse(i,t,e,r)),n.join("")}function yse(e,t){t||(t={}),e.SSF||(e.SSF=is(Un)),e.SSF&&(Q2(),J2(e.SSF),t.revssf=Z2(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Zu(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(lse(e,t)),r.push(cse()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(it("Worksheet",xse(n,t,e),{"ss:Name":zr(e.SheetNames[n])}));return r[2]=use(e,t),r[3]=dse(e),ua+it("Workbook",r.join(""),{xmlns:Ss.ss,"xmlns:o":Ss.o,"xmlns:x":Ss.x,"xmlns:ss":Ss.ss,"xmlns:dt":Ss.dt,"xmlns:html":Ss.html})}var A5={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function bse(e,t){var r=[],n=[],a=[],i=0,s,o=rO(mO,"n"),c=rO(gO,"n");if(e.Props)for(s=ri(e.Props),i=0;i<s.length;++i)(Object.prototype.hasOwnProperty.call(o,s[i])?r:Object.prototype.hasOwnProperty.call(c,s[i])?n:a).push([s[i],e.Props[s[i]]]);if(e.Custprops)for(s=ri(e.Custprops),i=0;i<s.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},s[i])||(Object.prototype.hasOwnProperty.call(o,s[i])?r:Object.prototype.hasOwnProperty.call(c,s[i])?n:a).push([s[i],e.Custprops[s[i]]]);var u=[];for(i=0;i<a.length;++i)w$.indexOf(a[i][0])>-1||x$.indexOf(a[i][0])>-1||a[i][1]!=null&&u.push(a[i]);n.length&&Gr.utils.cfb_add(t,"/SummaryInformation",wO(n,A5.SI,c,gO)),(r.length||u.length)&&Gr.utils.cfb_add(t,"/DocumentSummaryInformation",wO(r,A5.DSI,o,mO,u.length?u:null,A5.UDI))}function wse(e,t){var r=t||{},n=Gr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Gr.utils.cfb_add(n,a,Q$(e,r)),r.biff==8&&(e.Props||e.Custprops)&&bse(e,n),r.biff==8&&e.vbaraw&&$re(n,Gr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var _se={0:{f:jae},1:{f:Lae},2:{f:Zae},3:{f:Uae},4:{f:Mae},5:{f:Xae},6:{f:aie},7:{f:Wae},8:{f:die},9:{f:uie},10:{f:lie},11:{f:cie},12:{f:Rae},13:{f:tie},14:{f:qae},15:{f:$ae},16:{f:Jae},17:{f:sie},18:{f:Gae},19:{f:S3},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Yie},40:{},42:{},43:{f:are},44:{f:rre},45:{f:ore},46:{f:cre},47:{f:lre},48:{},49:{f:Ree},50:{},51:{f:jre},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Dte},62:{f:nie},63:{f:Ore},64:{f:Eie},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:vl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Sie},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Oae},148:{f:Tae,p:16},151:{f:vie},152:{},153:{f:Kie},154:{},155:{},156:{f:Vie},157:{},158:{},159:{T:1,f:Vte},160:{T:-1},161:{T:1,f:zf},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:fie},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Sre},336:{T:-1},337:{f:Tre,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:lj},357:{},358:{},359:{},360:{T:1},361:{},362:{f:kte},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:xie},427:{f:yie},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:wie},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:kae},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:mie},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:lj},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Dre},633:{T:1},634:{T:-1},635:{T:1,f:Ire},636:{T:-1},637:{f:$ee},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Bie},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Tie},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function ot(e,t,r,n){var a=t;if(!isNaN(a)){var i=n||(r||[]).length||0,s=e.next(4);s.write_shift(2,a),s.write_shift(2,i),i>0&&b3(r)&&e.push(r)}}function Sse(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return ot(e,t,r,a);var i=t;if(!isNaN(i)){for(var s=r.parts||[],o=0,c=0,u=0;u+(s[o]||8224)<=8224;)u+=s[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,i),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(s[o]||8224)<=8224;)u+=s[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function Hv(e,t,r){return e||(e=$e(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function Nse(e,t,r,n){var a=$e(9);return Hv(a,e,t),S$(r,n||"b",a),a}function jse(e,t,r){var n=$e(8+2*r.length);return Hv(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function Ase(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?as(Mi(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?ot(e,2,Bte(r,n,a)):ot(e,3,$te(r,n,a));return;case"b":case"e":ot(e,5,Nse(r,n,t.v,t.t));return;case"s":case"str":ot(e,4,jse(r,n,(t.v||"").slice(0,255)));return}ot(e,1,Hv(null,r,n))}function Ese(e,t,r,n){var a=Array.isArray(t),i=mn(t["!ref"]||"A1"),s,o="",c=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),s=la(i)}for(var u=i.s.r;u<=i.e.r;++u){o=ei(u);for(var d=i.s.c;d<=i.e.c;++d){u===i.s.r&&(c[d]=mi(d)),s=c[d]+o;var f=a?(t[u]||[])[d]:t[s];f&&Ase(e,f,u,d)}}}function Tse(e,t){for(var r=t||{},n=rs(),a=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(a=i);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return ot(n,r.biff==4?1033:r.biff==3?521:9,A3(e,16,r)),Ese(n,e.Sheets[e.SheetNames[a]],a,r),ot(n,10),n.end()}function Cse(e,t,r){ot(e,49,_te({sz:12,name:"Arial"},r))}function kse(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&ot(e,1054,jte(a,t[a],r))})}function Ose(e,t){var r=$e(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),ot(e,2151,r),r=$e(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),A$(mn(t["!ref"]||"A1"),r),r.write_shift(4,4),ot(e,2152,r)}function Pse(e,t){for(var r=0;r<16;++r)ot(e,224,SO({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){ot(e,224,SO(n,0,t))})}function Lse(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];ot(e,440,Lte(n)),n[1].Tooltip&&ot(e,2048,Ite(n))}delete t["!links"]}function Ise(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&ot(e,125,Mte(nw(a,n),a))})}}function Rse(e,t,r,n,a){var i=16+Zu(a.cellXfs,t,a);if(t.v==null&&!t.bf){ot(e,513,Sf(r,n,i));return}if(t.bf)ot(e,6,iae(t,r,n,a,i));else switch(t.t){case"d":case"n":var s=t.t=="d"?as(Mi(t.v)):t.v;ot(e,515,Cte(r,n,s,i));break;case"b":case"e":ot(e,517,Tte(r,n,t.v,i,a,t.t));break;case"s":case"str":if(a.bookSST){var o=O3(a.Strings,t.v,a.revStrings);ot(e,253,Ste(r,n,o,i))}else ot(e,516,Nte(r,n,(t.v||"").slice(0,255),i,a));break;default:ot(e,513,Sf(r,n,i))}}function Dse(e,t,r){var n=rs(),a=r.SheetNames[e],i=r.Sheets[a]||{},s=(r||{}).Workbook||{},o=(s.Sheets||[])[e]||{},c=Array.isArray(i),u=t.biff==8,d,f="",p=[],h=mn(i["!ref"]||"A1"),g=u?65536:16384;if(h.e.c>255||h.e.r>=g){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");h.e.c=Math.min(h.e.c,255),h.e.r=Math.min(h.e.c,g-1)}ot(n,2057,A3(r,16,t)),ot(n,13,Gs(1)),ot(n,12,Gs(100)),ot(n,15,ki(!0)),ot(n,17,ki(!1)),ot(n,16,_f(.001)),ot(n,95,ki(!0)),ot(n,42,ki(!1)),ot(n,43,ki(!1)),ot(n,130,Gs(1)),ot(n,128,Ete()),ot(n,131,ki(!1)),ot(n,132,ki(!1)),u&&Ise(n,i["!cols"]),ot(n,512,Ate(h,t)),u&&(i["!links"]=[]);for(var m=h.s.r;m<=h.e.r;++m){f=ei(m);for(var x=h.s.c;x<=h.e.c;++x){m===h.s.r&&(p[x]=mi(x)),d=p[x]+f;var y=c?(i[m]||[])[x]:i[d];y&&(Rse(n,y,m,x,t),u&&y.l&&i["!links"].push([d,y.l]))}}var v=o.CodeName||o.name||a;return u&&ot(n,574,wte((s.Views||[])[0])),u&&(i["!merges"]||[]).length&&ot(n,229,Pte(i["!merges"])),u&&Lse(n,i),ot(n,442,j$(v)),u&&Ose(n,i),ot(n,10),n.end()}function Mse(e,t,r){var n=rs(),a=(e||{}).Workbook||{},i=a.Sheets||[],s=a.WBProps||{},o=r.biff==8,c=r.biff==5;if(ot(n,2057,A3(e,5,r)),r.bookType=="xla"&&ot(n,135),ot(n,225,o?Gs(1200):null),ot(n,193,lte(2)),c&&ot(n,191),c&&ot(n,192),ot(n,226),ot(n,92,vte("SheetJS",r)),ot(n,66,Gs(o?1200:1252)),o&&ot(n,353,Gs(0)),o&&ot(n,448),ot(n,317,Fte(e.SheetNames.length)),o&&e.vbaraw&&ot(n,211),o&&e.vbaraw){var u=s.CodeName||"ThisWorkbook";ot(n,442,j$(u))}ot(n,156,Gs(17)),ot(n,25,ki(!1)),ot(n,18,ki(!1)),ot(n,19,Gs(0)),o&&ot(n,431,ki(!1)),o&&ot(n,444,Gs(0)),ot(n,61,bte()),ot(n,64,ki(!1)),ot(n,141,Gs(0)),ot(n,34,ki(zie(e)=="true")),ot(n,14,ki(!0)),o&&ot(n,439,ki(!1)),ot(n,218,Gs(0)),Cse(n,e,r),kse(n,e.SSF,r),Pse(n,r),o&&ot(n,352,ki(!1));var d=n.end(),f=rs();o&&ot(f,140,Rte()),o&&r.Strings&&Sse(f,252,yte(r.Strings)),ot(f,10);var p=f.end(),h=rs(),g=0,m=0;for(m=0;m<e.SheetNames.length;++m)g+=(o?12:11)+(o?2:1)*e.SheetNames[m].length;var x=d.length+g+p.length;for(m=0;m<e.SheetNames.length;++m){var y=i[m]||{};ot(h,133,xte({pos:x,hs:y.Hidden||0,dt:0,name:e.SheetNames[m]},r)),x+=t[m].length}var v=h.end();if(g!=v.length)throw new Error("BS8 "+g+" != "+v.length);var b=[];return d.length&&b.push(d),v.length&&b.push(v),p.length&&b.push(p),Ja(b)}function Fse(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=is(Un)),e&&e.SSF&&(Q2(),J2(e.SSF),r.revssf=Z2(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,P3(r),r.cellXfs=[],Zu(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=Dse(a,r,e);return n.unshift(Mse(e,n,r)),Ja(n)}function Q$(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Ls(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return Fse(e,t);case 4:case 3:case 2:return Tse(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function $se(e,t,r,n){for(var a=e["!merges"]||[],i=[],s=t.s.c;s<=t.e.c;++s){for(var o=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>s)&&!(a[u].e.r<r||a[u].e.c<s)){if(a[u].s.r<r||a[u].s.c<s){o=-1;break}o=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(o<0)){var d=Hr({r,c:s}),f=n.dense?(e[r]||[])[s]:e[d],p=f&&f.v!=null&&(f.h||gee(f.w||(xc(f),f.w)||""))||"",h={};o>1&&(h.rowspan=o),c>1&&(h.colspan=c),n.editable?p='<span contenteditable="true">'+p+"</span>":f&&(h["data-t"]=f&&f.t||"z",f.v!=null&&(h["data-v"]=f.v),f.z!=null&&(h["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+f.l.Target+'">'+p+"</a>")),h.id=(n.id||"sjs")+"-"+d,i.push(it("td",p,h))}}var g="<tr>";return g+i.join("")+"</tr>"}var Bse='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Use="</body></html>";function zse(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Z$(e,t){var r=t||{},n=r.header!=null?r.header:Bse,a=r.footer!=null?r.footer:Use,i=[n],s=Ls(e["!ref"]);r.dense=Array.isArray(e),i.push(zse(e,s,r));for(var o=s.s.r;o<=s.e.r;++o)i.push($se(e,s,o,r));return i.push("</table>"+a),i.join("")}function e9(e,t,r){var n=r||{},a=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var s=typeof n.origin=="string"?Ia(n.origin):n.origin;a=s.r,i=s.c}var o=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:a,c:i}};if(e["!ref"]){var d=Ls(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],p=0,h=e["!rows"]||(e["!rows"]=[]),g=0,m=0,x=0,y=0,v=0,b=0;for(e["!cols"]||(e["!cols"]=[]);g<o.length&&m<c;++g){var S=o[g];if(kO(S)){if(n.display)continue;h[m]={hidden:!0}}var _=S.children;for(x=y=0;x<_.length;++x){var A=_[x];if(!(n.display&&kO(A))){var j=A.hasAttribute("data-v")?A.getAttribute("data-v"):A.hasAttribute("v")?A.getAttribute("v"):bee(A.innerHTML),E=A.getAttribute("data-z")||A.getAttribute("z");for(p=0;p<f.length;++p){var T=f[p];T.s.c==y+i&&T.s.r<m+a&&m+a<=T.e.r&&(y=T.e.c+1-i,p=-1)}b=+A.getAttribute("colspan")||1,((v=+A.getAttribute("rowspan")||1)>1||b>1)&&f.push({s:{r:m+a,c:y+i},e:{r:m+a+(v||1)-1,c:y+i+(b||1)-1}});var L={t:"s",v:j},O=A.getAttribute("data-t")||A.getAttribute("t")||"";j!=null&&(j.length==0?L.t=O||"z":n.raw||j.trim().length==0||O=="s"||(j==="TRUE"?L={t:"b",v:!0}:j==="FALSE"?L={t:"b",v:!1}:isNaN(sc(j))?isNaN(Mg(j).getDate())||(L={t:"d",v:Mi(j)},n.cellDates||(L={t:"n",v:as(L.v)}),L.z=n.dateNF||Un[14]):L={t:"n",v:sc(j)})),L.z===void 0&&E!=null&&(L.z=E);var I="",D=A.getElementsByTagName("A");if(D&&D.length)for(var z=0;z<D.length&&!(D[z].hasAttribute("href")&&(I=D[z].getAttribute("href"),I.charAt(0)!="#"));++z);I&&I.charAt(0)!="#"&&(L.l={Target:I}),n.dense?(e[m+a]||(e[m+a]=[]),e[m+a][y+i]=L):e[Hr({c:y+i,r:m+a})]=L,u.e.c<y+i&&(u.e.c=y+i),y+=b}}++m}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,m-1+a),e["!ref"]=la(u),m>=c&&(e["!fullref"]=la((u.e.r=o.length-g+m-1+a,u))),e}function t9(e,t){var r=t||{},n=r.dense?[]:{};return e9(n,e,t)}function qse(e,t){return Ff(t9(e,t),t)}function kO(e){var t="",r=Hse(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Hse(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var Wse=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+$g({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return ua+t}}(),OO=function(){var e=function(i){return zr(i).replace(/  +/g,function(s){return'<text:s text:c="'+s.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,s,o){var c=[];c.push('      <table:table table:name="'+zr(s.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=Ls(i["!ref"]||"A1"),p=i["!merges"]||[],h=0,g=Array.isArray(i);if(i["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(i["!cols"][d]?' table:style-name="co'+i["!cols"][d].ods+'"':"")+`></table:table-column>
`);var m="",x=i["!rows"]||[];for(u=0;u<f.s.r;++u)m=x[u]?' table:style-name="ro'+x[u].ods+'"':"",c.push("        <table:table-row"+m+`></table:table-row>
`);for(;u<=f.e.r;++u){for(m=x[u]?' table:style-name="ro'+x[u].ods+'"':"",c.push("        <table:table-row"+m+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var y=!1,v={},b="";for(h=0;h!=p.length;++h)if(!(p[h].s.c>d)&&!(p[h].s.r>u)&&!(p[h].e.c<d)&&!(p[h].e.r<u)){(p[h].s.c!=d||p[h].s.r!=u)&&(y=!0),v["table:number-columns-spanned"]=p[h].e.c-p[h].s.c+1,v["table:number-rows-spanned"]=p[h].e.r-p[h].s.r+1;break}if(y){c.push(r);continue}var S=Hr({r:u,c:d}),_=g?(i[u]||[])[d]:i[S];if(_&&_.f&&(v["table:formula"]=zr(dae(_.f)),_.F&&_.F.slice(0,S.length)==S)){var A=Ls(_.F);v["table:number-matrix-columns-spanned"]=A.e.c-A.s.c+1,v["table:number-matrix-rows-spanned"]=A.e.r-A.s.r+1}if(!_){c.push(t);continue}switch(_.t){case"b":b=_.v?"TRUE":"FALSE",v["office:value-type"]="boolean",v["office:boolean-value"]=_.v?"true":"false";break;case"n":b=_.w||String(_.v||0),v["office:value-type"]="float",v["office:value"]=_.v||0;break;case"s":case"str":b=_.v==null?"":_.v,v["office:value-type"]="string";break;case"d":b=_.w||Mi(_.v).toISOString(),v["office:value-type"]="date",v["office:date-value"]=Mi(_.v).toISOString(),v["table:style-name"]="ce1";break;default:c.push(t);continue}var j=e(b);if(_.l&&_.l.Target){var E=_.l.Target;E=E.charAt(0)=="#"?"#"+fae(E.slice(1)):E,E.charAt(0)!="#"&&!E.match(/^\w+:/)&&(E="../"+E),j=it("text:a",j,{"xlink:href":E.replace(/&/g,"&amp;")})}c.push("          "+it("table:table-cell",it("text:p",j,{}),v)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(i,s){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var o=0;s.SheetNames.map(function(u){return s.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;E3(f),f.ods=o;var p=u["!cols"][d].wpx+"px";i.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),i.push(`  </style:style>
`),++o}}});var c=0;s.SheetNames.map(function(u){return s.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(s,o){var c=[ua],u=$g({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=$g({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(g$().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,s),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=s.SheetNames.length;++f)c.push(n(s.Sheets[s.SheetNames[f]],s,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function r9(e,t){if(t.bookType=="fods")return OO(e,t);var r=g3(),n="",a=[],i=[];return n="mimetype",or(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",or(r,n,OO(e,t)),a.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",or(r,n,Wse(e,t)),a.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",or(r,n,ua+g$()),a.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",or(r,n,nte(i)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",or(r,n,tte(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function mb(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Vse(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Io(Fg(e))}function Gse(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Gu(e){var t=e.reduce(function(a,i){return a+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function Kse(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var i=0;a>=1;++i,a/=256)e[t+i]=a&255;e[t+15]|=r>=0?0:128}function Bg(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function Mr(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function r0(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function ya(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=Bg(e,r),i=a&7;a=Math.floor(a/8);var s=0,o;if(a==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);o=e.slice(c,r[0])}break;case 5:s=4,o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 1:s=8,o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 2:s=Bg(e,r),o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(a," at offset ").concat(n))}var u={data:o,type:i};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function Ga(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(Mr(n*8+a.type)),a.type==2&&t.push(Mr(a.data.length)),t.push(a.data))})}),Gu(t)}function bo(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=Bg(e,n),i=ya(e.slice(n[0],n[0]+a));n[0]+=a;var s={id:r0(i[1][0].data),messages:[]};i[2].forEach(function(o){var c=ya(o.data),u=r0(c[3][0].data);s.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=i[3])!=null&&t[0]&&(s.merge=r0(i[3][0].data)>>>0>0),r.push(s)}return r}function dh(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:Mr(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Mr(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(s){a.push(s.data),s.meta[3]=[{type:0,data:Mr(s.data.length)}],n[2].push({data:Ga(s.meta),type:2})});var i=Ga(n);t.push(Mr(i.length)),t.push(i),a.forEach(function(s){return t.push(s)})}),Gu(t)}function Xse(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=Bg(t,r),a=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var s=t[r[0]++]>>2;if(s<60)++s;else{var o=s-59;s=t[r[0]],o>1&&(s|=t[r[0]+1]<<8),o>2&&(s|=t[r[0]+2]<<16),o>3&&(s|=t[r[0]+3]<<24),s>>>=0,s++,r[0]+=o}a.push(t.slice(r[0],r[0]+s)),r[0]+=s;continue}else{var c=0,u=0;if(i==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Gu(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=Gu(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function wo(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Xse(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Gu(t)}function fh(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var i=Mr(n),s=i.length;t.push(i),n<=60?(s++,t.push(new Uint8Array([n-1<<2]))):n<=256?(s+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(s+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(s+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(s+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),s+=n,a[0]=0,a[1]=s&255,a[2]=s>>8&255,a[3]=s>>16&255,r+=n}return Gu(t)}function E5(e,t){var r=new Uint8Array(32),n=mb(r),a=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,Kse(r,a,e.v),i|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),i|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,i,!0),r.slice(0,a)}function T5(e,t){var r=new Uint8Array(32),n=mb(r),a=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),i|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),i|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,i,!0),r.slice(0,a)}function tu(e){var t=ya(e);return Bg(t[1][0].data)}function Yse(e,t,r){var n,a,i,s;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((s=(i=e[8])==null?void 0:i[0])==null?void 0:s.data)&&r0(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=mb(e[7][0].data),d=0,f=[],p=mb(e[4][0].data),h=0,g=[],m=0;m<t.length;++m){if(t[m]==null){u.setUint16(m*2,65535,!0),p.setUint16(m*2,65535);continue}u.setUint16(m*2,d,!0),p.setUint16(m*2,h,!0);var x,y;switch(typeof t[m]){case"string":x=E5({t:"s",v:t[m]},r),y=T5({t:"s",v:t[m]},r);break;case"number":x=E5({t:"n",v:t[m]},r),y=T5({t:"n",v:t[m]},r);break;case"boolean":x=E5({t:"b",v:t[m]},r),y=T5({t:"b",v:t[m]},r);break;default:throw new Error("Unsupported value "+t[m])}f.push(x),d+=x.length,g.push(y),h+=y.length,++c}for(e[2][0].data=Mr(c);m<e[7][0].data.length/2;++m)u.setUint16(m*2,65535,!0),p.setUint16(m*2,65535,!0);return e[6][0].data=Gu(f),e[3][0].data=Gu(g),c}function Jse(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Ls(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(la(n)));var i=gb(r,{range:n,header:1}),s=["~Sh33tJ5~"];i.forEach(function(M){return M.forEach(function(B){typeof B=="string"&&s.push(B)})});var o={},c=[],u=Gr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(M,B){return[M,u.FullPaths[B]]}).forEach(function(M){var B=M[0],U=M[1];if(B.type==2&&B.name.match(/\.iwa/)){var Z=B.content,pe=wo(Z),K=bo(pe);K.forEach(function(te){c.push(te.id),o[te.id]={deps:[],location:U,type:r0(te.messages[0].meta[1][0].data)}})}}),c.sort(function(M,B){return M-B});var d=c.filter(function(M){return M>1}).map(function(M){return[M,Mr(M)]});u.FileIndex.map(function(M,B){return[M,u.FullPaths[B]]}).forEach(function(M){var B=M[0];if(M[1],!!B.name.match(/\.iwa/)){var U=bo(wo(B.content));U.forEach(function(Z){Z.messages.forEach(function(pe){d.forEach(function(K){Z.messages.some(function(te){return r0(te.meta[1][0].data)!=11006&&Gse(te.data,K[1])})&&o[K[0]].deps.push(Z.id)})})})}});for(var f=Gr.find(u,o[1].location),p=bo(wo(f.content)),h,g=0;g<p.length;++g){var m=p[g];m.id==1&&(h=m)}var x=tu(ya(h.messages[0].data)[1][0].data);for(f=Gr.find(u,o[x].location),p=bo(wo(f.content)),g=0;g<p.length;++g)m=p[g],m.id==x&&(h=m);for(x=tu(ya(h.messages[0].data)[2][0].data),f=Gr.find(u,o[x].location),p=bo(wo(f.content)),g=0;g<p.length;++g)m=p[g],m.id==x&&(h=m);for(x=tu(ya(h.messages[0].data)[2][0].data),f=Gr.find(u,o[x].location),p=bo(wo(f.content)),g=0;g<p.length;++g)m=p[g],m.id==x&&(h=m);var y=ya(h.messages[0].data);{y[6][0].data=Mr(n.e.r+1),y[7][0].data=Mr(n.e.c+1);var v=tu(y[46][0].data),b=Gr.find(u,o[v].location),S=bo(wo(b.content));{for(var _=0;_<S.length&&S[_].id!=v;++_);if(S[_].id!=v)throw"Bad ColumnRowUIDMapArchive";var A=ya(S[_].messages[0].data);A[1]=[],A[2]=[],A[3]=[];for(var j=0;j<=n.e.c;++j){var E=[];E[1]=E[2]=[{type:0,data:Mr(j+420690)}],A[1].push({type:2,data:Ga(E)}),A[2].push({type:0,data:Mr(j)}),A[3].push({type:0,data:Mr(j)})}A[4]=[],A[5]=[],A[6]=[];for(var T=0;T<=n.e.r;++T)E=[],E[1]=E[2]=[{type:0,data:Mr(T+726270)}],A[4].push({type:2,data:Ga(E)}),A[5].push({type:0,data:Mr(T)}),A[6].push({type:0,data:Mr(T)});S[_].messages[0].data=Ga(A)}b.content=fh(dh(S)),b.size=b.content.length,delete y[46];var L=ya(y[4][0].data);{L[7][0].data=Mr(n.e.r+1);var O=ya(L[1][0].data),I=tu(O[2][0].data);b=Gr.find(u,o[I].location),S=bo(wo(b.content));{if(S[0].id!=I)throw"Bad HeaderStorageBucket";var D=ya(S[0].messages[0].data);for(T=0;T<i.length;++T){var z=ya(D[2][0].data);z[1][0].data=Mr(T),z[4][0].data=Mr(i[T].length),D[2][T]={type:D[2][0].type,data:Ga(z)}}S[0].messages[0].data=Ga(D)}b.content=fh(dh(S)),b.size=b.content.length;var Y=tu(L[2][0].data);b=Gr.find(u,o[Y].location),S=bo(wo(b.content));{if(S[0].id!=Y)throw"Bad HeaderStorageBucket";for(D=ya(S[0].messages[0].data),j=0;j<=n.e.c;++j)z=ya(D[2][0].data),z[1][0].data=Mr(j),z[4][0].data=Mr(n.e.r+1),D[2][j]={type:D[2][0].type,data:Ga(z)};S[0].messages[0].data=Ga(D)}b.content=fh(dh(S)),b.size=b.content.length;var se=tu(L[4][0].data);(function(){for(var M=Gr.find(u,o[se].location),B=bo(wo(M.content)),U,Z=0;Z<B.length;++Z){var pe=B[Z];pe.id==se&&(U=pe)}var K=ya(U.messages[0].data);{K[3]=[];var te=[];s.forEach(function(ve,Fe){te[1]=[{type:0,data:Mr(Fe)}],te[2]=[{type:0,data:Mr(1)}],te[3]=[{type:2,data:Vse(ve)}],K[3].push({type:2,data:Ga(te)})})}U.messages[0].data=Ga(K);var ae=dh(B),be=fh(ae);M.content=be,M.size=M.content.length})();var ee=ya(L[3][0].data);{var J=ee[1][0];delete ee[2];var oe=ya(J.data);{var we=tu(oe[2][0].data);(function(){for(var M=Gr.find(u,o[we].location),B=bo(wo(M.content)),U,Z=0;Z<B.length;++Z){var pe=B[Z];pe.id==we&&(U=pe)}var K=ya(U.messages[0].data);{delete K[6],delete ee[7];var te=new Uint8Array(K[5][0].data);K[5]=[];for(var ae=0,be=0;be<=n.e.r;++be){var ve=ya(te);ae+=Yse(ve,i[be],s),ve[1][0].data=Mr(be),K[5].push({data:Ga(ve),type:2})}K[1]=[{type:0,data:Mr(n.e.c+1)}],K[2]=[{type:0,data:Mr(n.e.r+1)}],K[3]=[{type:0,data:Mr(ae)}],K[4]=[{type:0,data:Mr(n.e.r+1)}]}U.messages[0].data=Ga(K);var Fe=dh(B),Me=fh(Fe);M.content=Me,M.size=M.content.length})()}J.data=Ga(oe)}L[3][0].data=Ga(ee)}y[4][0].data=Ga(L)}h.messages[0].data=Ga(y);var xe=dh(p),k=fh(xe);return f.content=k,f.size=f.content.length,u}function Qse(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function P3(e){Qse([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function Zse(e,t){return t.bookType=="ods"?r9(e,t):t.bookType=="numbers"?Jse(e,t):t.bookType=="xlsb"?eoe(e,t):toe(e,t)}function eoe(e,t){Dh=1024,e&&!e.SSF&&(e.SSF=is(Un)),e&&e.SSF&&(Q2(),J2(e.SSF),t.revssf=Z2(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,rg?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=F$.indexOf(t.bookType)>-1,a=h$();P3(t=t||{});var i=g3(),s="",o=0;if(t.cellXfs=[],Zu(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),s="docProps/core.xml",or(i,s,v$(e.Props,t)),a.coreprops.push(s),Fr(t.rels,2,s,Sr.CORE_PROPS),s="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,or(i,s,y$(e.Props)),a.extprops.push(s),Fr(t.rels,3,s,Sr.EXT_PROPS),e.Custprops!==e.Props&&ri(e.Custprops||{}).length>0&&(s="docProps/custom.xml",or(i,s,b$(e.Custprops)),a.custprops.push(s),Fr(t.rels,4,s,Sr.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],p=(f||{})["!type"]||"sheet";switch(p){case"chart":default:s="xl/worksheets/sheet"+o+"."+r,or(i,s,nse(o-1,s,t,e,d)),a.sheets.push(s),Fr(t.wbrels,-1,"worksheets/sheet"+o+"."+r,Sr.WS[0])}if(f){var h=f["!comments"],g=!1,m="";h&&h.length>0&&(m="xl/comments"+o+"."+r,or(i,m,sse(h,m)),a.comments.push(m),Fr(d,-1,"../comments"+o+"."+r,Sr.CMNT),g=!0),f["!legacy"]&&g&&or(i,"xl/drawings/vmlDrawing"+o+".vml",D$(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&or(i,m$(s),e0(d))}return t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+r,or(i,s,ise(t.Strings,s,t)),a.strs.push(s),Fr(t.wbrels,-1,"sharedStrings."+r,Sr.SST)),s="xl/workbook."+r,or(i,s,rse(e,s)),a.workbooks.push(s),Fr(t.rels,1,s,Sr.WB),s="xl/theme/theme1.xml",or(i,s,I$(e.Themes,t)),a.themes.push(s),Fr(t.wbrels,-1,"theme/theme1.xml",Sr.THEME),s="xl/styles."+r,or(i,s,ase(e,s,t)),a.styles.push(s),Fr(t.wbrels,-1,"styles."+r,Sr.STY),e.vbaraw&&n&&(s="xl/vbaProject.bin",or(i,s,e.vbaraw),a.vba.push(s),Fr(t.wbrels,-1,"vbaProject.bin",Sr.VBA)),s="xl/metadata."+r,or(i,s,ose(s)),a.metadata.push(s),Fr(t.wbrels,-1,"metadata."+r,Sr.XLMETA),or(i,"[Content_Types].xml",p$(a,t)),or(i,"_rels/.rels",e0(t.rels)),or(i,"xl/_rels/workbook."+r+".rels",e0(t.wbrels)),delete t.revssf,delete t.ssf,i}function toe(e,t){Dh=1024,e&&!e.SSF&&(e.SSF=is(Un)),e&&e.SSF&&(Q2(),J2(e.SSF),t.revssf=Z2(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,rg?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=F$.indexOf(t.bookType)>-1,a=h$();P3(t=t||{});var i=g3(),s="",o=0;if(t.cellXfs=[],Zu(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),s="docProps/core.xml",or(i,s,v$(e.Props,t)),a.coreprops.push(s),Fr(t.rels,2,s,Sr.CORE_PROPS),s="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,or(i,s,y$(e.Props)),a.extprops.push(s),Fr(t.rels,3,s,Sr.EXT_PROPS),e.Custprops!==e.Props&&ri(e.Custprops||{}).length>0&&(s="docProps/custom.xml",or(i,s,b$(e.Custprops)),a.custprops.push(s),Fr(t.rels,4,s,Sr.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},p=e.Sheets[e.SheetNames[o-1]],h=(p||{})["!type"]||"sheet";switch(h){case"chart":default:s="xl/worksheets/sheet"+o+"."+r,or(i,s,G$(o-1,t,e,f)),a.sheets.push(s),Fr(t.wbrels,-1,"worksheets/sheet"+o+"."+r,Sr.WS[0])}if(p){var g=p["!comments"],m=!1,x="";if(g&&g.length>0){var y=!1;g.forEach(function(v){v[1].forEach(function(b){b.T==!0&&(y=!0)})}),y&&(x="xl/threadedComments/threadedComment"+o+"."+r,or(i,x,Pre(g,d,t)),a.threadedcomments.push(x),Fr(f,-1,"../threadedComments/threadedComment"+o+"."+r,Sr.TCMNT)),x="xl/comments"+o+"."+r,or(i,x,M$(g)),a.comments.push(x),Fr(f,-1,"../comments"+o+"."+r,Sr.CMNT),m=!0}p["!legacy"]&&m&&or(i,"xl/drawings/vmlDrawing"+o+".vml",D$(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}f["!id"].rId1&&or(i,m$(s),e0(f))}return t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+r,or(i,s,T$(t.Strings,t)),a.strs.push(s),Fr(t.wbrels,-1,"sharedStrings."+r,Sr.SST)),s="xl/workbook."+r,or(i,s,Y$(e)),a.workbooks.push(s),Fr(t.rels,1,s,Sr.WB),s="xl/theme/theme1.xml",or(i,s,I$(e.Themes,t)),a.themes.push(s),Fr(t.wbrels,-1,"theme/theme1.xml",Sr.THEME),s="xl/styles."+r,or(i,s,P$(e,t)),a.styles.push(s),Fr(t.wbrels,-1,"styles."+r,Sr.STY),e.vbaraw&&n&&(s="xl/vbaProject.bin",or(i,s,e.vbaraw),a.vba.push(s),Fr(t.wbrels,-1,"vbaProject.bin",Sr.VBA)),s="xl/metadata."+r,or(i,s,R$()),a.metadata.push(s),Fr(t.wbrels,-1,"metadata."+r,Sr.XLMETA),d.length>1&&(s="xl/persons/person.xml",or(i,s,Lre(d)),a.people.push(s),Fr(t.wbrels,-1,"persons/person.xml",Sr.PEOPLE)),or(i,"[Content_Types].xml",p$(a,t)),or(i,"_rels/.rels",e0(t.rels)),or(i,"xl/_rels/workbook."+r+".rels",e0(t.wbrels)),delete t.revssf,delete t.ssf,i}function roe(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=vc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function n9(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Bv(t.file,Gr.write(e,{type:Er?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Gr.write(e,t)}function noe(e,t){var r=is(t||{}),n=Zse(e,r);return aoe(n,r)}function aoe(e,t){var r={},n=Er?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?Gr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(Y2(a))}return t.password&&typeof encrypt_agile<"u"?n9(encrypt_agile(a,t.password),t):t.type==="file"?Bv(t.file,a):t.type=="string"?Qm(a):a}function ioe(e,t){var r=t||{},n=wse(e,r);return n9(n,r)}function nl(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Dg(Fg(n));case"binary":return Fg(n);case"string":return e;case"file":return Bv(t.file,n,"utf8");case"buffer":return Er?kc(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):nl(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function soe(e,t){switch(t.type){case"base64":return Dg(e);case"binary":return e;case"string":return e;case"file":return Bv(t.file,e,"binary");case"buffer":return Er?kc(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Nx(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?Dg(r):t.type=="string"?Qm(r):r;case"file":return Bv(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function a9(e,t){IZ(),Wie(e);var r=is(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=a9(e,r);return r.type="array",Y2(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return nl(yse(e,r),r);case"slk":case"sylk":return nl(zte.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return nl(Z$(e.Sheets[e.SheetNames[a]],r),r);case"txt":return soe(s9(e.Sheets[e.SheetNames[a]],r),r);case"csv":return nl(L3(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return nl(qte.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return Nx(Ute.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return nl(Hte.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return nl(Jte.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return nl(E$.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return nl(r9(e,r),r);case"wk1":return Nx(NO.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return Nx(NO.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Nx(Q$(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),ioe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return noe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function ooe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function i9(e,t,r){var n={};return n.type="file",n.file=t,ooe(n),a9(e,n)}function loe(e,t,r,n,a,i,s,o){var c=ei(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,p=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!s||e[r])for(var h=t.s.c;h<=t.e.c;++h){var g=s?e[r][h]:e[n[h]+c];if(g===void 0||g.t===void 0){if(u===void 0)continue;i[h]!=null&&(p[i[h]]=u);continue}var m=g.v;switch(g.t){case"z":if(m==null)break;continue;case"e":m=m==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(i[h]!=null){if(m==null)if(g.t=="e"&&m===null)p[i[h]]=null;else if(u!==void 0)p[i[h]]=u;else if(d&&m===null)p[i[h]]=null;else continue;else p[i[h]]=d&&(g.t!=="n"||g.t==="n"&&o.rawNumbers!==!1)?m:xc(g,m,o);m!=null&&(f=!1)}}return{row:p,isempty:f}}function gb(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,i=[],s=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=mn(d);break;case"number":c=mn(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=ei(c.s.r),p=[],h=[],g=0,m=0,x=Array.isArray(e),y=c.s.r,v=0,b={};x&&!e[y]&&(e[y]=[]);var S=u.skipHidden&&e["!cols"]||[],_=u.skipHidden&&e["!rows"]||[];for(v=c.s.c;v<=c.e.c;++v)if(!(S[v]||{}).hidden)switch(p[v]=mi(v),r=x?e[y][v]:e[p[v]+f],n){case 1:i[v]=v-c.s.c;break;case 2:i[v]=p[v];break;case 3:i[v]=u.header[v-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=s=xc(r,null,u),m=b[s]||0,!m)b[s]=1;else{do o=s+"_"+m++;while(b[o]);b[s]=m,b[o]=1}i[v]=o}for(y=c.s.r+a;y<=c.e.r;++y)if(!(_[y]||{}).hidden){var A=loe(e,c,y,p,n,i,x,u);(A.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(h[g++]=A.row)}return h.length=g,h}var PO=/"/g;function coe(e,t,r,n,a,i,s,o){for(var c=!0,u=[],d="",f=ei(r),p=t.s.c;p<=t.e.c;++p)if(n[p]){var h=o.dense?(e[r]||[])[p]:e[n[p]+f];if(h==null)d="";else if(h.v!=null){c=!1,d=""+(o.rawNumbers&&h.t=="n"?h.v:xc(h,null,o));for(var g=0,m=0;g!==d.length;++g)if((m=d.charCodeAt(g))===a||m===i||m===34||o.forceQuotes){d='"'+d.replace(PO,'""')+'"';break}d=="ID"&&(d='"ID"')}else h.f!=null&&!h.F?(c=!1,d="="+h.f,d.indexOf(",")>=0&&(d='"'+d.replace(PO,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&c?null:u.join(s)}function L3(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=mn(e["!ref"]),i=n.FS!==void 0?n.FS:",",s=i.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var p=n.skipHidden&&e["!cols"]||[],h=n.skipHidden&&e["!rows"]||[],g=a.s.c;g<=a.e.c;++g)(p[g]||{}).hidden||(f[g]=mi(g));for(var m=0,x=a.s.r;x<=a.e.r;++x)(h[x]||{}).hidden||(d=coe(e,a,x,f,s,c,i,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((m++?o:"")+d)));return delete n.dense,r.join("")}function s9(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=L3(e,t);return r}function uoe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=mn(e["!ref"]),i="",s=[],o,c=[],u=Array.isArray(e);for(o=a.s.c;o<=a.e.c;++o)s[o]=mi(o);for(var d=a.s.r;d<=a.e.r;++d)for(i=ei(d),o=a.s.c;o<=a.e.c;++o)if(t=s[o]+i,r=u?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function o9(e,t,r){var n=r||{},a=+!n.skipHeader,i=e||{},s=0,o=0;if(i&&n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var c=typeof n.origin=="string"?Ia(n.origin):n.origin;s=c.r,o=c.c}var u,d={s:{c:0,r:0},e:{c:o,r:s+t.length-1+a}};if(i["!ref"]){var f=mn(i["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),s==-1&&(s=f.e.r+1,d.e.r=s+t.length-1+a)}else s==-1&&(s=0,d.e.r=t.length-1+a);var p=n.header||[],h=0;t.forEach(function(m,x){ri(m).forEach(function(y){(h=p.indexOf(y))==-1&&(p[h=p.length]=y);var v=m[y],b="z",S="",_=Hr({c:o+h,r:s+x+a});u=Ug(i,_),v&&typeof v=="object"&&!(v instanceof Date)?i[_]=v:(typeof v=="number"?b="n":typeof v=="boolean"?b="b":typeof v=="string"?b="s":v instanceof Date?(b="d",n.cellDates||(b="n",v=as(v)),S=n.dateNF||Un[14]):v===null&&n.nullError&&(b="e",v=0),u?(u.t=b,u.v=v,delete u.w,delete u.R,S&&(u.z=S)):i[_]=u={t:b,v},S&&(u.z=S))})}),d.e.c=Math.max(d.e.c,o+p.length-1);var g=ei(s);if(a)for(h=0;h<p.length;++h)i[mi(h+o)+g]={t:"s",v:p[h]};return i["!ref"]=la(d),i}function doe(e,t){return o9(null,e,t)}function Ug(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Ia(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Ug(e,Hr(t)):Ug(e,Hr({r:t,c:r||0}))}function foe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function hoe(){return{SheetNames:[],Sheets:{}}}function poe(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);a=i&&+i[2]||0;var s=i&&i[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=s+a)!=-1;++a);}if(X$(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function moe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=foe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function goe(e,t){return e.z=t,e}function l9(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function voe(e,t,r){return l9(e,"#"+t,r)}function xoe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function yoe(e,t,r,n){for(var a=typeof t!="string"?t:mn(t),i=typeof t=="string"?t:la(t),s=a.s.r;s<=a.e.r;++s)for(var o=a.s.c;o<=a.e.c;++o){var c=Ug(e,s,o);c.t="n",c.F=i,delete c.v,s==a.s.r&&o==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var aa={encode_col:mi,encode_row:ei,encode_cell:Hr,encode_range:la,decode_col:_3,decode_row:w3,split_cell:Iee,decode_cell:Ia,decode_range:Ls,format_cell:xc,sheet_add_aoa:o$,sheet_add_json:o9,sheet_add_dom:e9,aoa_to_sheet:bp,json_to_sheet:doe,table_to_sheet:t9,table_to_book:qse,sheet_to_csv:L3,sheet_to_txt:s9,sheet_to_json:gb,sheet_to_html:Z$,sheet_to_formulae:uoe,sheet_to_row_object_array:gb,sheet_get_cell:Ug,book_new:hoe,book_append_sheet:poe,book_set_sheet_visibility:moe,cell_set_number_format:goe,cell_set_hyperlink:l9,cell_set_internal_link:voe,cell_add_comment:xoe,sheet_set_array_formula:yoe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const xr=({filename:e,sheetName:t,rows:r,columns:n})=>{const a=e.endsWith(".xlsx")?e:`${e}.xlsx`,i=n.map(u=>u.header),s=r.map(u=>n.map(d=>(d.value?d.value(u):u[d.key])??"")),o=aa.aoa_to_sheet([i,...s]),c=aa.book_new();aa.book_append_sheet(c,o,t),i9(c,a)},ed=e=>e.replace(/[.\-\s]/g,"").toUpperCase(),Yn=e=>{const t=ed(e);if(t.length<2)return t;const r=t.slice(0,-1),n=t.slice(-1);return`${r.replace(/\B(?=(\d{3})+(?!\d))/g,".")}-${n}`},boe=e=>{const t=e.replace(/\D/g,"");let r=0,n=2;for(let i=t.length-1;i>=0;i--)r+=parseInt(t[i],10)*n,n=n===7?2:n+1;const a=11-r%11;return a===11?"0":a===10?"K":String(a)},uj=e=>{if(!e||e.trim()==="")return{valid:!1,error:"RUT es requerido"};const t=ed(e);if(!/^\d{7,9}[0-9K]$/i.test(t))return{valid:!1,error:"Formato de RUT invlido"};const r=t.slice(0,-1),n=t.slice(-1).toUpperCase(),a=boe(r);return n!==a?{valid:!1,error:"Dgito verificador invlido"}:{valid:!0}},F0=[{value:"conductor",label:"Conductor"},{value:"inspector_patio",label:"Inspector Patio"},{value:"cleaner",label:"Cleaner"},{value:"planillero",label:"Planillero"},{value:"supervisor",label:"Supervisor"}],woe=[{value:"todos",label:"Todos"},{value:"ACTIVO",label:"Activo"},{value:"DESVINCULADO",label:"Desvinculado"}],c9=async(e,t)=>{if(!Zt())return console.warn("Supabase not configured, returning empty array"),[];const r=Ui(e);let n=Ee.from("staff").select(`
      *,
      staff_admonitions(count)
    `).in("terminal_code",r).order("nombre",{ascending:!0});if(t!=null&&t.status&&t.status!=="todos"&&(n=n.eq("status",t.status)),t!=null&&t.cargo&&t.cargo!=="todos"&&(n=n.eq("cargo",t.cargo)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}const{data:a,error:i}=await n;if(i)throw console.error("Error fetching staff:",i),i;return(a||[]).map(s=>{var o,c;return{...s,admonition_count:((c=(o=s.staff_admonitions)==null?void 0:o[0])==null?void 0:c.count)??0}})},_oe=async e=>{const t=ed(e),{data:r,error:n}=await Ee.from("staff").select("*").eq("rut",t).single();if(n){if(n.code==="PGRST116")return null;throw n}return r},Soe=async e=>{var n,a,i,s,o,c;const{data:t,error:r}=await Ee.from("staff").insert({rut:ed(e.rut),nombre:e.nombre.trim(),cargo:e.cargo,terminal_code:e.terminal_code,turno:e.turno.trim(),horario:e.horario.trim(),contacto:e.contacto.trim(),email:((n=e.email)==null?void 0:n.trim())||null,talla_polera:((a=e.talla_polera)==null?void 0:a.trim())||null,talla_chaqueta:((i=e.talla_chaqueta)==null?void 0:i.trim())||null,talla_pantalon:((s=e.talla_pantalon)==null?void 0:s.trim())||null,talla_zapato_seguridad:((o=e.talla_zapato_seguridad)==null?void 0:o.trim())||null,talla_chaleco_reflectante:((c=e.talla_chaleco_reflectante)==null?void 0:c.trim())||null}).select().single();if(r)throw r.code==="23505"?new Error("Ya existe un trabajador con ese RUT"):r;return t},Noe=async(e,t)=>{var i,s,o,c,u,d;const r={};t.rut!==void 0&&(r.rut=ed(t.rut)),t.nombre!==void 0&&(r.nombre=t.nombre.trim()),t.cargo!==void 0&&(r.cargo=t.cargo),t.terminal_code!==void 0&&(r.terminal_code=t.terminal_code),t.turno!==void 0&&(r.turno=t.turno.trim()),t.horario!==void 0&&(r.horario=t.horario.trim()),t.contacto!==void 0&&(r.contacto=t.contacto.trim()),t.email!==void 0&&(r.email=((i=t.email)==null?void 0:i.trim())||null),t.talla_polera!==void 0&&(r.talla_polera=((s=t.talla_polera)==null?void 0:s.trim())||null),t.talla_chaqueta!==void 0&&(r.talla_chaqueta=((o=t.talla_chaqueta)==null?void 0:o.trim())||null),t.talla_pantalon!==void 0&&(r.talla_pantalon=((c=t.talla_pantalon)==null?void 0:c.trim())||null),t.talla_zapato_seguridad!==void 0&&(r.talla_zapato_seguridad=((u=t.talla_zapato_seguridad)==null?void 0:u.trim())||null),t.talla_chaleco_reflectante!==void 0&&(r.talla_chaleco_reflectante=((d=t.talla_chaleco_reflectante)==null?void 0:d.trim())||null);const{data:n,error:a}=await Ee.from("staff").update(r).eq("id",e).select().single();if(a)throw a;return n},joe=async(e,t)=>{const{data:r,error:n}=await Ee.from("staff").update({status:"DESVINCULADO",terminated_at:new Date().toISOString(),termination_comment:t.trim()}).eq("id",e).select().single();if(n)throw n;return r},Aoe=async e=>{const t=Ui(e),{data:r,error:n}=await Ee.from("staff").select("cargo, terminal_code").eq("status","ACTIVO").in("terminal_code",t);if(n)throw n;const{data:a}=await Ee.from("staff_caps").select("*").eq("scope_code","ER_LR"),i=new Map;(a||[]).forEach(d=>{i.set(d.cargo,d.max_q)});const s=new Map;F0.forEach(d=>s.set(d.value,0)),(r||[]).forEach(d=>{const f=s.get(d.cargo)||0;s.set(d.cargo,f+1)});const o=F0.map(d=>({cargo:d.value,count:s.get(d.value)||0,max_q:i.get(d.value)??null})),c=new Map;t.forEach(d=>c.set(d,0)),(r||[]).forEach(d=>{const f=c.get(d.terminal_code)||0;c.set(d.terminal_code,f+1)});const u=t.map(d=>({terminal_code:d,count:c.get(d)||0}));return{byCargo:o,byTerminal:u,total:(r==null?void 0:r.length)||0}},Eoe=async(e,t,r,n)=>{const a=n.name.split(".").pop(),i=`staff/${e}/admonitions/${Date.now()}.${a}`,{error:s}=await Ee.storage.from("staff-docs").upload(i,n);if(s)throw console.error("Upload error:",s),new Error("Error al subir el documento");const{data:o,error:c}=await Ee.from("staff_admonitions").insert({staff_id:e,reason:t.trim(),admonition_date:r,document_path:i}).select().single();if(c)throw c;return o},Toe=(e,t)=>{const r=Ee.channel("staff-changes").on("postgres_changes",{event:"*",schema:"public",table:"staff"},n=>{e({eventType:n.eventType,new:n.new,old:n.old})}).on("postgres_changes",{event:"INSERT",schema:"public",table:"staff_admonitions"},n=>{t({eventType:n.eventType,new:n.new})}).subscribe();return()=>{Ee.removeChannel(r)}},yn={all:["staff"],lists:()=>[...yn.all,"list"],list:(e,t)=>[...yn.lists(),e,t],details:()=>[...yn.all,"detail"],detail:e=>[...yn.details(),e],counts:e=>[...yn.all,"counts",e],caps:()=>[...yn.all,"caps"],admonitions:e=>[...yn.all,"admonitions",e]},u9=(e,t)=>zt({queryKey:yn.list(e,t),queryFn:()=>c9(e,t)}),Coe=e=>zt({queryKey:yn.counts(e),queryFn:()=>Aoe(e)}),koe=()=>{const e=Mt();return Ft({mutationFn:t=>Soe(t),onSuccess:()=>{e.invalidateQueries({queryKey:yn.lists()}),e.invalidateQueries({queryKey:yn.counts({})})}})},Ooe=()=>{const e=Mt();return Ft({mutationFn:({id:t,values:r})=>Noe(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:yn.lists()}),e.invalidateQueries({queryKey:yn.detail(t.id)}),e.invalidateQueries({queryKey:yn.counts({})})}})},Poe=()=>{const e=Mt();return Ft({mutationFn:({id:t,comment:r})=>joe(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:yn.lists()}),e.invalidateQueries({queryKey:yn.detail(t.id)}),e.invalidateQueries({queryKey:yn.counts({})})}})},Loe=()=>{const e=Mt();return Ft({mutationFn:({staffId:t,reason:r,admonitionDate:n,file:a})=>Eoe(t,r,n,a),onSuccess:t=>{e.invalidateQueries({queryKey:yn.admonitions(t.staff_id)}),e.invalidateQueries({queryKey:yn.lists()})}})},Ioe=e=>{const t=Mt();F.useEffect(()=>Toe(n=>{console.log("Staff change:",n.eventType),t.invalidateQueries({queryKey:yn.lists()}),t.invalidateQueries({queryKey:yn.counts(e)}),n.new&&t.invalidateQueries({queryKey:yn.detail(n.new.id)})},n=>{console.log("Admonition change:",n.eventType),n.new&&(t.invalidateQueries({queryKey:yn.admonitions(n.new.staff_id)}),t.invalidateQueries({queryKey:yn.lists()}))}),[t,e])},Roe=e=>({conductor:"calendar",inspector_patio:"clipboard",cleaner:"check-circle",planillero:"layers",supervisor:"users"})[e]||"users",Doe=e=>{var t;return((t=F0.find(r=>r.value===e))==null?void 0:t.label)||e},Moe=({terminalContext:e})=>{const{data:t,isLoading:r}=Coe(e);if(r)return l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6",children:[...Array(5)].map((a,i)=>l.jsxs("div",{className:"card p-4 animate-pulse",children:[l.jsx("div",{className:"h-4 bg-slate-200 rounded w-20 mb-2"}),l.jsx("div",{className:"h-8 bg-slate-200 rounded w-16"})]},i))});if(!t)return null;const n=e.mode==="ALL"||e.mode==="TERMINAL"&&(e.value==="EL_ROBLE"||e.value==="LA_REINA");return l.jsxs("div",{className:"space-y-4 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide mb-3",children:["Personal por Cargo ",n&&"(ER-LR)"]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:t.byCargo.map(a=>{const i=a.max_q?a.count/a.max_q*100:0,s=a.max_q&&a.count>a.max_q,o=a.max_q&&i>=80&&!s;return l.jsxs("div",{className:`card p-4 transition-all ${s?"border-danger-300 bg-danger-50":o?"border-warning-300 bg-warning-50":""}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-slate-100",children:l.jsx(me,{name:Roe(a.cargo),size:18,className:"text-slate-600"})}),l.jsx("span",{className:"text-xs font-semibold text-slate-600 uppercase",children:Doe(a.cargo)})]}),l.jsxs("div",{className:"flex items-baseline gap-1",children:[l.jsx("span",{className:`text-2xl font-bold ${s?"text-danger-600":o?"text-warning-600":"text-slate-900"}`,children:a.count}),a.max_q&&l.jsxs("span",{className:"text-sm text-slate-500",children:["/ ",a.max_q]})]}),a.max_q&&l.jsx("div",{className:"mt-2 h-1.5 bg-slate-200 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full transition-all ${s?"bg-danger-500":o?"bg-warning-500":"bg-brand-500"}`,style:{width:`${Math.min(i,100)}%`}})})]},a.cargo)})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide mb-3",children:"Personal por Terminal"}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.byTerminal.map(a=>l.jsxs("div",{className:"card px-4 py-3 flex items-center gap-3",children:[l.jsx(me,{name:"building",size:18,className:"text-slate-400"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-slate-500",children:ur(a.terminal_code)}),l.jsx("p",{className:"text-lg font-bold text-slate-900",children:a.count})]})]},a.terminal_code)),l.jsxs("div",{className:"card px-4 py-3 flex items-center gap-3 bg-brand-50 border-brand-200",children:[l.jsx(me,{name:"users",size:18,className:"text-brand-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-brand-600 font-semibold",children:"Total"}),l.jsx("p",{className:"text-lg font-bold text-brand-700",children:t.total})]})]})]})]})]})},Foe=e=>{var t;return((t=F0.find(r=>r.value===e))==null?void 0:t.label)||e},$oe=({staff:e,onEdit:t,onOffboard:r,onAdmonish:n})=>e.length?l.jsx("div",{className:"table-container overflow-x-auto",children:l.jsxs("table",{className:"table",children:[l.jsx("thead",{className:"table-header",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"table-header-cell",children:"RUT"}),l.jsx("th",{scope:"col",className:"table-header-cell",children:"Nombre"}),l.jsx("th",{scope:"col",className:"table-header-cell",children:"Cargo"}),l.jsx("th",{scope:"col",className:"table-header-cell",children:"Terminal"}),l.jsx("th",{scope:"col",className:"table-header-cell",children:"Turno"}),l.jsx("th",{scope:"col",className:"table-header-cell",children:"Horario"}),l.jsx("th",{scope:"col",className:"table-header-cell",children:"Contacto"}),l.jsx("th",{scope:"col",className:"table-header-cell",children:"Estado"}),l.jsx("th",{scope:"col",className:"table-header-cell text-right",children:"Acciones"})]})}),l.jsx("tbody",{className:"table-body",children:e.map(a=>{const i=a.status==="DESVINCULADO";return l.jsxs("tr",{className:`table-row ${i?"bg-danger-50 hover:bg-danger-100":""}`,children:[l.jsx("td",{className:"table-cell font-mono text-sm",children:Yn(a.rut)}),l.jsx("td",{className:"table-cell",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium text-slate-900",children:a.nombre}),a.admonition_count>0&&l.jsxs("span",{className:"badge badge-warning text-xs",title:`${a.admonition_count} amonestacin(es)`,children:[" ",a.admonition_count]})]})}),l.jsx("td",{className:"table-cell",children:Foe(a.cargo)}),l.jsx("td",{className:"table-cell",children:ur(a.terminal_code)}),l.jsx("td",{className:"table-cell",children:a.turno}),l.jsx("td",{className:"table-cell font-mono text-xs",children:a.horario}),l.jsx("td",{className:"table-cell text-sm",children:a.contacto}),l.jsx("td",{className:"table-cell",children:l.jsx("span",{className:`badge ${i?"badge-danger":"badge-success"}`,children:a.status})}),l.jsx("td",{className:"table-cell",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[!i&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>t(a),className:"btn btn-ghost btn-icon text-slate-600 hover:text-brand-600",title:"Modificar",children:l.jsx(me,{name:"clipboard",size:16})}),l.jsx("button",{onClick:()=>n(a),className:"btn btn-ghost btn-icon text-slate-600 hover:text-warning-600",title:"Amonestar",children:l.jsx(me,{name:"megaphone",size:16})}),l.jsx("button",{onClick:()=>r(a),className:"btn btn-ghost btn-icon text-slate-600 hover:text-danger-600",title:"Desvincular",children:l.jsx(me,{name:"logout",size:16})})]}),i&&l.jsx("span",{className:"text-xs text-danger-600",children:a.terminated_at?new Date(a.terminated_at).toLocaleDateString("es-CL"):"Desvinculado"})]})})]},a.id)})})]})}):l.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50/50 px-6 py-12 text-center",children:[l.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-slate-100 mb-4",children:l.jsx(me,{name:"users",size:28,className:"text-slate-400"})}),l.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"No hay personal registrado"}),l.jsx("p",{className:"mt-1 text-xs text-slate-500 max-w-xs",children:'Comienza agregando trabajadores con el botn "Nuevo Trabajador"'})]}),Boe=["Maana","Tarde","Noche","Rotativo"],C5=["XS","S","M","L","XL","XXL","XXXL"],Uoe=["36","38","40","42","44","46","48","50","52","54","56","58","60"],zoe=["35","36","37","38","39","40","41","42","43","44","45","46"],LO=e=>e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e):!0,qoe=({initialData:e,onSubmit:t,onCancel:r,isLoading:n})=>{const[a,i]=F.useState({rut:"",nombre:"",cargo:"conductor",terminal_code:"EL_ROBLE",turno:"Maana",horario:"08:00-18:00",contacto:"",email:"",talla_polera:"",talla_chaqueta:"",talla_pantalon:"",talla_zapato_seguridad:"",talla_chaleco_reflectante:""}),[s,o]=F.useState(null),[c,u]=F.useState(null),[d,f]=F.useState(""),[p,h]=F.useState(!1);F.useEffect(()=>{if(e){i({rut:e.rut,nombre:e.nombre,cargo:e.cargo,terminal_code:e.terminal_code,turno:e.turno,horario:e.horario,contacto:e.contacto,email:e.email||"",talla_polera:e.talla_polera||"",talla_chaqueta:e.talla_chaqueta||"",talla_pantalon:e.talla_pantalon||"",talla_zapato_seguridad:e.talla_zapato_seguridad||"",talla_chaleco_reflectante:e.talla_chaleco_reflectante||""}),f(Yn(e.rut));const S=e.email||e.talla_polera||e.talla_chaqueta||e.talla_pantalon||e.talla_zapato_seguridad||e.talla_chaleco_reflectante;h(!!S)}},[e]);const g=S=>{f(S);const _=uj(S);_.valid?(o(null),i(A=>({...A,rut:ed(S)}))):o(_.error||null)},m=()=>{a.rut&&f(Yn(a.rut))},x=S=>{i(_=>({..._,email:S})),S&&!LO(S)?u("Formato de correo invlido"):u(null)},y=S=>{S.preventDefault();const _=uj(a.rut);if(!_.valid){o(_.error||"RUT invlido");return}if(a.email&&!LO(a.email)){u("Formato de correo invlido");return}t(a)},v=!!e,b=(S,_,A)=>l.jsxs("div",{children:[l.jsx("label",{className:"label",children:S}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",className:"input",list:`${_}-options`,value:a[_]||"",onChange:j=>i(E=>({...E,[_]:j.target.value})),placeholder:"Seleccionar o escribir..."}),l.jsx("datalist",{id:`${_}-options`,children:A.map(j=>l.jsx("option",{value:j},j))})]})]});return l.jsxs("form",{onSubmit:y,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"RUT"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",className:`input ${s?"border-danger-500 focus:ring-danger-500":""}`,value:d,onChange:S=>g(S.target.value),onBlur:m,placeholder:"12.345.678-9",disabled:v,required:!0}),v&&l.jsx(me,{name:"key",size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"})]}),s&&l.jsx("p",{className:"mt-1 text-xs text-danger-600",children:s}),v&&l.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"El RUT no puede modificarse"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Nombre Completo"}),l.jsx("input",{type:"text",className:"input",value:a.nombre,onChange:S=>i(_=>({..._,nombre:S.target.value})),placeholder:"Juan Prez Gonzlez",required:!0})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Cargo"}),l.jsx("select",{className:"input",value:a.cargo,onChange:S=>i(_=>({..._,cargo:S.target.value})),required:!0,children:F0.map(S=>l.jsx("option",{value:S.value,children:S.label},S.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Terminal"}),l.jsx("select",{className:"input",value:a.terminal_code,onChange:S=>i(_=>({..._,terminal_code:S.target.value})),required:!0,children:ns.map(S=>l.jsx("option",{value:S.value,children:S.label},S.value))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Turno"}),l.jsx("select",{className:"input",value:a.turno,onChange:S=>i(_=>({..._,turno:S.target.value})),required:!0,children:Boe.map(S=>l.jsx("option",{value:S,children:S},S))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Horario"}),l.jsx("input",{type:"text",className:"input",value:a.horario,onChange:S=>i(_=>({..._,horario:S.target.value})),placeholder:"08:00-18:00",required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Contacto"}),l.jsx("input",{type:"text",className:"input",value:a.contacto,onChange:S=>i(_=>({..._,contacto:S.target.value})),placeholder:"Telfono o email",required:!0})]}),l.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[l.jsxs("button",{type:"button",onClick:()=>h(!p),className:"w-full flex items-center justify-between px-4 py-3 bg-slate-50 hover:bg-slate-100 transition-colors",children:[l.jsxs("span",{className:"font-medium text-slate-700 flex items-center gap-2",children:[l.jsx(me,{name:"tag",size:18}),"Tallas y Correo"]}),l.jsx(me,{name:"chevron-down",size:18,className:`text-slate-500 transition-transform ${p?"rotate-180":""}`})]}),p&&l.jsxs("div",{className:"p-4 space-y-4 bg-white",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Correo Electrnico"}),l.jsx("input",{type:"email",className:`input ${c?"border-danger-500 focus:ring-danger-500":""}`,value:a.email||"",onChange:S=>x(S.target.value),placeholder:"trabajador@ejemplo.com"}),c&&l.jsx("p",{className:"mt-1 text-xs text-danger-600",children:c})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[b("Talla Polera","talla_polera",C5),b("Talla Chaqueta","talla_chaqueta",C5),b("Talla Pantaln","talla_pantalon",Uoe),b("Talla Zapato de Seguridad","talla_zapato_seguridad",zoe),b("Talla Chaleco Reflectante","talla_chaleco_reflectante",C5)]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[l.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n||!!s||!!c,children:n?l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Guardando..."]}):v?"Guardar Cambios":"Crear Trabajador"})]})]})},Hoe=({staffName:e,onConfirm:t,onCancel:r,isLoading:n})=>{const[a,i]=F.useState(""),s=o=>{o.preventDefault(),a.trim()&&t(a.trim())};return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),l.jsxs("div",{className:"relative w-full max-w-md card p-6 animate-scale-in",children:[l.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[l.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-danger-100",children:l.jsx(me,{name:"logout",size:24,className:"text-danger-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Desvincular Trabajador"}),l.jsxs("p",{className:"text-sm text-slate-600",children:["Ests seguro que deseas desvincular a ",l.jsx("strong",{children:e}),"?"]})]})]}),l.jsx("div",{className:"mb-4 p-3 rounded-lg bg-warning-50 border border-warning-200",children:l.jsxs("p",{className:"text-sm text-warning-800",children:[l.jsx("strong",{children:" Esta accin es irreversible."})," El trabajador quedar marcado como desvinculado y no podr ser eliminado del sistema."]})}),l.jsxs("form",{onSubmit:s,children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"label",children:"Motivo de Desvinculacin *"}),l.jsx("textarea",{className:"input min-h-[100px]",value:a,onChange:o=>i(o.target.value),placeholder:"Describe el motivo de la desvinculacin...",required:!0})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-danger",disabled:n||!a.trim(),children:n?l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Procesando..."]}):"Confirmar Desvinculacin"})]})]})]})]})},Woe=({staffName:e,onConfirm:t,onCancel:r,isLoading:n})=>{const[a,i]=F.useState(""),[s,o]=F.useState(new Date().toISOString().split("T")[0]),[c,u]=F.useState(null),[d,f]=F.useState(!1),p=F.useRef(null),h=v=>{v.preventDefault(),a.trim()&&s&&c&&t(a.trim(),s,c)},g=v=>{v.preventDefault(),v.stopPropagation(),v.type==="dragenter"||v.type==="dragover"?f(!0):v.type==="dragleave"&&f(!1)},m=v=>{v.preventDefault(),v.stopPropagation(),f(!1),v.dataTransfer.files&&v.dataTransfer.files[0]&&u(v.dataTransfer.files[0])},x=v=>{v.target.files&&v.target.files[0]&&u(v.target.files[0])},y=()=>{u(null),p.current&&(p.current.value="")};return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),l.jsxs("div",{className:"relative w-full max-w-lg card p-6 animate-scale-in",children:[l.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[l.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-warning-100",children:l.jsx(me,{name:"megaphone",size:24,className:"text-warning-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Registrar Amonestacin"}),l.jsxs("p",{className:"text-sm text-slate-600",children:["Amonestacin para ",l.jsx("strong",{children:e})]})]})]}),l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Motivo de la Amonestacin *"}),l.jsx("textarea",{className:"input min-h-[80px]",value:a,onChange:v=>i(v.target.value),placeholder:"Describe el motivo de la amonestacin...",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha de Amonestacin *"}),l.jsx("input",{type:"date",className:"input",value:s,onChange:v=>o(v.target.value),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Documento Adjunto *"}),l.jsxs("div",{className:`border-2 border-dashed rounded-xl p-6 text-center transition-all ${d?"border-brand-500 bg-brand-50":c?"border-success-300 bg-success-50":"border-slate-300 hover:border-slate-400"}`,onDragEnter:g,onDragLeave:g,onDragOver:g,onDrop:m,children:[l.jsx("input",{ref:p,type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:x,className:"hidden",id:"admonition-file"}),c?l.jsxs("div",{className:"flex items-center justify-center gap-3",children:[l.jsx(me,{name:"check-circle",size:24,className:"text-success-600"}),l.jsxs("div",{className:"text-left",children:[l.jsx("p",{className:"text-sm font-medium text-slate-900",children:c.name}),l.jsxs("p",{className:"text-xs text-slate-500",children:[(c.size/1024).toFixed(1)," KB"]})]}),l.jsx("button",{type:"button",onClick:y,className:"ml-4 text-danger-600 hover:text-danger-700",children:l.jsx(me,{name:"x",size:20})})]}):l.jsxs("label",{htmlFor:"admonition-file",className:"cursor-pointer flex flex-col items-center gap-2",children:[l.jsx(me,{name:"image",size:32,className:"text-slate-400"}),l.jsxs("p",{className:"text-sm text-slate-600",children:[l.jsx("span",{className:"font-semibold text-brand-600",children:"Haz clic para subir"})," ","o arrastra el archivo aqu"]}),l.jsx("p",{className:"text-xs text-slate-400",children:"PDF, JPG, PNG (mx. 10MB)"})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n||!a.trim()||!s||!c,children:n?l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Guardando..."]}):"Registrar Amonestacin"})]})]})]})]})},Voe=()=>{const e=Vt(b=>b.context),t=Vt(b=>b.setContext),[r,n]=F.useState({status:"todos",cargo:"todos"}),[a,i]=F.useState({type:"none"}),s=u9(e,r),o=koe(),c=Ooe(),u=Poe(),d=Loe();Ioe(e);const f=[{key:"rut",header:"RUT",value:b=>Yn(b.rut)},{key:"nombre",header:"NOMBRE",value:b=>b.nombre},{key:"cargo",header:"CARGO",value:b=>b.cargo},{key:"terminal_code",header:"TERMINAL",value:b=>ur(b.terminal_code)},{key:"turno",header:"TURNO",value:b=>b.turno},{key:"horario",header:"HORARIO",value:b=>b.horario},{key:"contacto",header:"CONTACTO",value:b=>b.contacto},{key:"email",header:"CORREO",value:b=>b.email||""},{key:"talla_polera",header:"TALLA_POLERA",value:b=>b.talla_polera||""},{key:"talla_chaqueta",header:"TALLA_CHAQUETA",value:b=>b.talla_chaqueta||""},{key:"talla_pantalon",header:"TALLA_PANTALON",value:b=>b.talla_pantalon||""},{key:"talla_zapato_seguridad",header:"TALLA_ZAPATO_SEGURIDAD",value:b=>b.talla_zapato_seguridad||""},{key:"talla_chaleco_reflectante",header:"TALLA_CHALECO_REFLECTANTE",value:b=>b.talla_chaleco_reflectante||""},{key:"status",header:"ESTADO",value:b=>b.status},{key:"terminated_at",header:"FECHA_DESVINCULACION",value:b=>b.terminated_at?new Date(b.terminated_at).toLocaleDateString("es-CL"):""},{key:"termination_comment",header:"COMENTARIO_DESVINCULACION",value:b=>b.termination_comment||""}],p=()=>{s.data&&xr({filename:"personal_vista",sheetName:"Personal",rows:s.data,columns:f})},h=()=>{s.data&&xr({filename:"personal_completo",sheetName:"Personal",rows:s.data,columns:f})},g=async b=>{try{await o.mutateAsync(b),i({type:"none"})}catch(S){console.error("Error creating staff:",S),alert(S instanceof Error?S.message:"Error al crear trabajador")}},m=async b=>{if(a.type==="edit")try{await c.mutateAsync({id:a.staff.id,values:b}),i({type:"none"})}catch(S){console.error("Error updating staff:",S),alert(S instanceof Error?S.message:"Error al actualizar trabajador")}},x=async b=>{if(a.type==="offboard")try{await u.mutateAsync({id:a.staff.id,comment:b}),i({type:"none"})}catch(S){console.error("Error offboarding staff:",S),alert(S instanceof Error?S.message:"Error al desvincular trabajador")}},y=async(b,S,_)=>{if(a.type==="admonish")try{await d.mutateAsync({staffId:a.staff.id,reason:b,admonitionDate:S,file:_}),i({type:"none"})}catch(A){console.error("Error creating admonition:",A),alert(A instanceof Error?A.message:"Error al registrar amonestacin")}},v=()=>i({type:"none"});return l.jsxs("div",{className:"space-y-4",children:[l.jsx(gn,{title:"Personal",description:"Gestin del equipo operativo por terminal.",actions:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{className:"btn btn-primary",onClick:()=>i({type:"create"}),children:[l.jsx(me,{name:"users",size:18}),"Nuevo Trabajador"]}),l.jsx(Na,{onExportView:p,onExportAll:h})]})}),l.jsx(Moe,{terminalContext:e}),l.jsxs(ss,{terminalContext:e,onTerminalChange:t,children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsx("select",{className:"input",value:r.status,onChange:b=>n(S=>({...S,status:b.target.value})),children:woe.map(b=>l.jsx("option",{value:b.value,children:b.label},b.value))})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Cargo"}),l.jsxs("select",{className:"input",value:r.cargo||"todos",onChange:b=>n(S=>({...S,cargo:b.target.value})),children:[l.jsx("option",{value:"todos",children:"Todos"}),F0.map(b=>l.jsx("option",{value:b.value,children:b.label},b.value))]})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Buscar"}),l.jsx("input",{className:"input",placeholder:"RUT o nombre",value:r.search??"",onChange:b=>n(S=>({...S,search:b.target.value}))})]})]}),s.isLoading&&l.jsx(kn,{label:"Cargando personal..."}),s.isError&&l.jsx(Fa,{onRetry:()=>s.refetch()}),!s.isLoading&&!s.isError&&l.jsx($oe,{staff:s.data||[],onEdit:b=>i({type:"edit",staff:b}),onOffboard:b=>i({type:"offboard",staff:b}),onAdmonish:b=>i({type:"admonish",staff:b})}),(a.type==="create"||a.type==="edit")&&l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:v}),l.jsxs("div",{className:"relative w-full max-w-2xl card p-6 animate-scale-in max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-900",children:a.type==="create"?"Nuevo Trabajador":"Editar Trabajador"}),l.jsx("button",{onClick:v,className:"text-slate-400 hover:text-slate-600",children:l.jsx(me,{name:"x",size:24})})]}),l.jsx(qoe,{initialData:a.type==="edit"?a.staff:null,onSubmit:a.type==="create"?g:m,onCancel:v,isLoading:o.isPending||c.isPending})]})]}),a.type==="offboard"&&l.jsx(Hoe,{staffName:a.staff.nombre,onConfirm:x,onCancel:v,isLoading:u.isPending}),a.type==="admonish"&&l.jsx(Woe,{staffName:a.staff.nombre,onConfirm:y,onCancel:v,isLoading:d.isPending})]})},Goe="https://kzslhhctjfxsdvcrqvvs.supabase.co/functions/v1/send-email",IO="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt6c2xoaGN0amZ4c2R2Y3JxdnZzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4NDAzODQsImV4cCI6MjA4MTQxNjM4NH0.NQ1maFD5Nl8y-5TxJFjeSdhOSzOi-6Hd8o4VcrmLUKo",xl={sendEmail:async e=>{const t=await fetch(Goe,{method:"POST",headers:{"Content-Type":"application/json",apikey:IO,Authorization:`Bearer ${IO}`},body:JSON.stringify(e)});if(!t.ok){const n=await t.text();throw new Error(`Email send failed: ${t.status} ${n}`)}const r=await t.json();return{accepted:r.accepted??!0,messageId:r.messageId??"pending"}}},Koe=Object.freeze(Object.defineProperty({__proto__:null,emailService:xl},Symbol.toStringTag,{value:"Module"})),Xoe=async(e,t)=>{if(!Zt())return[];const r=Ui(e);let n=Ee.from("meetings").select(`
            *,
            meeting_invitees(count),
            meeting_files(count),
            meeting_actions(count)
        `).in("terminal_code",r).order("starts_at",{ascending:!1});if(t!=null&&t.status&&t.status!=="todos"&&(n=n.eq("status",t.status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.ilike("title",s)}t!=null&&t.date_from&&(n=n.gte("starts_at",t.date_from)),t!=null&&t.date_to&&(n=n.lte("starts_at",t.date_to+"T23:59:59"));const{data:a,error:i}=await n;if(i)throw i;return(a||[]).map(s=>{var o,c,u,d,f,p;return{...s,invitees_count:((c=(o=s.meeting_invitees)==null?void 0:o[0])==null?void 0:c.count)||0,files_count:((d=(u=s.meeting_files)==null?void 0:u[0])==null?void 0:d.count)||0,actions_count:((p=(f=s.meeting_actions)==null?void 0:f[0])==null?void 0:p.count)||0}})},d9=async e=>{const{data:t,error:r}=await Ee.from("meetings").select("*").eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t},Yoe=async(e,t)=>{const{data:r,error:n}=await Ee.from("meetings").insert({title:e.title,terminal_code:e.terminal_code,starts_at:e.starts_at,duration_minutes:e.duration_minutes,location:e.location||null,meeting_link:e.meeting_link||null,agenda_json:e.agenda_json||[],created_by_supervisor:t}).select().single();if(n)throw Pi("Error al crear reunin","No se pudo guardar la reunin"),n;return e.invitees.length>0&&await h9(r.id,e.invitees),Fi("Reunin creada",`"${e.title}" programada correctamente`,t),r},Joe=async(e,t)=>{const r={};t.title!==void 0&&(r.title=t.title),t.terminal_code!==void 0&&(r.terminal_code=t.terminal_code),t.starts_at!==void 0&&(r.starts_at=t.starts_at),t.duration_minutes!==void 0&&(r.duration_minutes=t.duration_minutes),t.location!==void 0&&(r.location=t.location||null),t.meeting_link!==void 0&&(r.meeting_link=t.meeting_link||null),t.agenda_json!==void 0&&(r.agenda_json=t.agenda_json);const{data:n,error:a}=await Ee.from("meetings").update(r).eq("id",e).select().single();if(a)throw a;return n},Qoe=async(e,t,r)=>{const n={status:t};r&&(n.cancel_reason=r);const{error:a}=await Ee.from("meetings").update(n).eq("id",e);if(a)throw a},Zoe=async(e,t)=>{const{error:r}=await Ee.from("meetings").update({minutes_text:t}).eq("id",e);if(r)throw r},f9=async e=>{const{data:t,error:r}=await Ee.from("meeting_invitees").select("*").eq("meeting_id",e).order("invitee_name");if(r)throw r;return t||[]},h9=async(e,t)=>{const r=t.map(a=>({meeting_id:e,staff_id:a.staff_id||null,invitee_name:a.invitee_name,invitee_email:a.invitee_email||null})),{error:n}=await Ee.from("meeting_invitees").insert(r);if(n)throw n},RO=async(e,t)=>{const{error:r}=await Ee.from("meeting_invitees").update({notification_status:t,notified_at:t==="ENVIADO"?new Date().toISOString():null}).eq("id",e);if(r)throw r},ele=async e=>{const{data:t,error:r}=await Ee.from("meeting_files").select("*").eq("meeting_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},tle=async(e,t,r)=>{const n=t.name.split(".").pop(),a=`meetings/${e}/${Date.now()}.${n}`,{error:i}=await Ee.storage.from("meeting-files").upload(a,t);if(i)throw Pi("Error al subir archivo",i.message),i;const{data:s,error:o}=await Ee.from("meeting_files").insert({meeting_id:e,storage_path:a,file_name:t.name,mime_type:t.type,size_bytes:t.size,uploaded_by:r}).select().single();if(o)throw o;return s},rle=async(e,t)=>{await Ee.storage.from("meeting-files").remove([t]);const{error:r}=await Ee.from("meeting_files").delete().eq("id",e);if(r)throw r},nle=async e=>{const{data:t,error:r}=await Ee.storage.from("meeting-files").createSignedUrl(e,3600);if(r)throw r;return t.signedUrl},ale=async e=>{const{data:t,error:r}=await Ee.from("meeting_actions").select("*").eq("meeting_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},ile=async(e,t)=>{const{data:r,error:n}=await Ee.from("meeting_actions").insert({meeting_id:e,description:t.description,responsible_staff_id:t.responsible_staff_id||null,responsible_name:t.responsible_name||null,due_date:t.due_date||null}).select().single();if(n)throw n;return r},sle=async(e,t)=>{const{data:r,error:n}=await Ee.from("meeting_actions").update(t).eq("id",e).select().single();if(n)throw n;return r},ole=async e=>{const{error:t}=await Ee.from("meeting_actions").delete().eq("id",e);if(t)throw t},p9=async(e,t)=>{const{data:r,error:n}=await Ee.from("meeting_email_settings").select("*").eq("scope_type",e).eq("scope_code",t).single();if(n){if(n.code==="PGRST116")return null;throw n}return r},lle=async e=>{const{error:t}=await Ee.from("meeting_email_settings").upsert(e,{onConflict:"scope_type,scope_code"});if(t)throw t},cle=async(e,t,r)=>{var c;const n=await p9("GLOBAL","ALL");if(!(n!=null&&n.enabled))return;const a=new Date(e.starts_at),i=a.toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),s=a.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"}),o=e.agenda_json.map((u,d)=>`${d+1}. ${u.text}`).join(`
`)||"Sin agenda definida";for(const u of t)if(u.invitee_email)try{const d=n.subject_template.replace("{{title}}",e.title),f=n.body_template.replace("{{invitee_name}}",u.invitee_name).replace("{{title}}",e.title).replace("{{date}}",i).replace("{{time}}",s).replace("{{duration}}",e.duration_minutes.toString()).replace("{{location}}",e.location||e.meeting_link||"Por confirmar").replace("{{agenda}}",o).replace("{{organizer}}",r);await xl.sendEmail({audience:"manual",manualRecipients:[u.invitee_email],cc:((c=n.cc_emails)==null?void 0:c.split(",").map(p=>p.trim()).filter(Boolean))||[],subject:d,body:f.replace(/\n/g,"<br>")}),await RO(u.id,"ENVIADO")}catch(d){console.error("Error sending invitation:",d),await RO(u.id,"ERROR")}},ule=async()=>{const{data:e,error:t}=await Ee.from("staff").select("id, nombre, email, terminal_code").eq("cargo","Supervisor").eq("status","ACTIVO").order("nombre");if(t)throw t;return e||[]},Tr={all:["meetings"],list:(e,t)=>[...Tr.all,"list",e,t],detail:e=>[...Tr.all,"detail",e],invitees:e=>[...Tr.all,"invitees",e],files:e=>[...Tr.all,"files",e],actions:e=>[...Tr.all,"actions",e],supervisors:["supervisors"],emailSettings:e=>[...Tr.all,"emailSettings",e]},I3=e=>{const t=Vt(n=>n.context),r=t.mode==="ALL"?"ALL":t.value||"ALL";return zt({queryKey:Tr.list(r,e),queryFn:()=>Xoe(t,e)})},dle=e=>zt({queryKey:Tr.detail(e||""),queryFn:()=>d9(e),enabled:!!e}),m9=()=>{const e=Mt(),t=jr(r=>r.session);return Ft({mutationFn:r=>Yoe(r,(t==null?void 0:t.supervisorName)||""),onSuccess:()=>{e.invalidateQueries({queryKey:Tr.all})}})},fle=()=>{const e=Mt();return Ft({mutationFn:({id:t,values:r})=>Joe(t,r),onSuccess:(t,{id:r})=>{e.invalidateQueries({queryKey:Tr.all}),e.invalidateQueries({queryKey:Tr.detail(r)})}})},hle=()=>{const e=Mt();return Ft({mutationFn:({id:t,status:r,reason:n})=>Qoe(t,r,n),onSuccess:()=>{e.invalidateQueries({queryKey:Tr.all})}})},ple=()=>{const e=Mt();return Ft({mutationFn:({id:t,minutes:r})=>Zoe(t,r),onSuccess:(t,{id:r})=>{e.invalidateQueries({queryKey:Tr.detail(r)})}})},g9=e=>zt({queryKey:Tr.invitees(e||""),queryFn:()=>f9(e),enabled:!!e}),mle=()=>{const e=Mt();return Ft({mutationFn:({meetingId:t,invitees:r})=>h9(t,r),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:Tr.invitees(r)}),e.invalidateQueries({queryKey:Tr.all})}})},gle=e=>zt({queryKey:Tr.files(e||""),queryFn:()=>ele(e),enabled:!!e}),vle=()=>{const e=Mt(),t=jr(r=>r.session);return Ft({mutationFn:({meetingId:r,file:n})=>tle(r,n,(t==null?void 0:t.supervisorName)||""),onSuccess:(r,{meetingId:n})=>{e.invalidateQueries({queryKey:Tr.files(n)}),e.invalidateQueries({queryKey:Tr.all})}})},xle=()=>{const e=Mt();return Ft({mutationFn:({id:t,storagePath:r,meetingId:n})=>rle(t,r),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:Tr.files(r)}),e.invalidateQueries({queryKey:Tr.all})}})},yle=e=>zt({queryKey:Tr.actions(e||""),queryFn:()=>ale(e),enabled:!!e}),ble=()=>{const e=Mt();return Ft({mutationFn:({meetingId:t,values:r})=>ile(t,r),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:Tr.actions(r)}),e.invalidateQueries({queryKey:Tr.all})}})},wle=()=>{const e=Mt();return Ft({mutationFn:({id:t,meetingId:r,values:n})=>sle(t,n),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:Tr.actions(r)})}})},_le=()=>{const e=Mt();return Ft({mutationFn:({id:t,meetingId:r})=>ole(t),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:Tr.actions(r)}),e.invalidateQueries({queryKey:Tr.all})}})},Sle=()=>zt({queryKey:Tr.supervisors,queryFn:ule,staleTime:5*60*1e3}),Nle=(e,t)=>zt({queryKey:Tr.emailSettings(`${e}-${t}`),queryFn:()=>p9(e,t)}),jle=()=>{const e=Mt();return Ft({mutationFn:t=>lle(t),onSuccess:()=>{e.invalidateQueries({queryKey:Tr.all})}})},Ale=()=>{const e=Mt(),t=jr(r=>r.session);return Ft({mutationFn:async({meetingId:r})=>{const n=await d9(r),a=await f9(r);n&&a.length>0&&await cle(n,a,(t==null?void 0:t.supervisorName)||"")},onSuccess:(r,{meetingId:n})=>{e.invalidateQueries({queryKey:Tr.invitees(n)})}})},Ele=["ISAAC AVILA","CLAUDIO ARRIAGADA","CRISTIAN LURASCHI"],jx=e=>e.toUpperCase().trim().replace(/\s+/g," "),v9=e=>{const t=jx(e);return Ele.some(r=>jx(r)===t||t.includes(jx(r))||jx(r).includes(t))},Tle=[{value:"todos",label:"Todos"},{value:"PROGRAMADA",label:"Programada"},{value:"REALIZADA",label:"Realizada"},{value:"CANCELADA",label:"Cancelada"}],Cle=({value:e,onChange:t,existingInvitees:r=[]})=>{const n=Sle(),[a,i]=F.useState(""),[s,o]=F.useState(!1),[c,u]=F.useState(""),[d,f]=F.useState(""),p=new Set([...r.map(y=>y.staff_id).filter(Boolean),...e.map(y=>y.staff_id).filter(Boolean)]),h=F.useMemo(()=>{if(!n.data)return[];const y=a.toLowerCase();return n.data.filter(v=>!p.has(v.id)).filter(v=>v.nombre.toLowerCase().includes(y)||(v.email||"").toLowerCase().includes(y)).slice(0,8)},[n.data,a,p]),g=y=>{t([...e,{staff_id:y.id,invitee_name:y.nombre,invitee_email:y.email||void 0}]),i(""),o(!1)},m=()=>{d.trim()&&(t([...e,{invitee_name:d.trim(),invitee_email:c.trim()||void 0}]),f(""),u(""))},x=y=>{t(e.filter((v,b)=>b!==y))};return l.jsxs("div",{className:"space-y-3",children:[r.length>0&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Ya invitados:"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(y=>l.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1 bg-slate-100 rounded-full text-sm",children:[l.jsx(me,{name:"user",size:14,className:"text-slate-400"}),l.jsx("span",{children:y.invitee_name})]},y.id))})]}),e.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2",children:e.map((y,v)=>l.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1 bg-brand-100 text-brand-800 rounded-full text-sm",children:[l.jsx(me,{name:"user",size:14}),l.jsx("span",{children:y.invitee_name}),l.jsx("button",{type:"button",onClick:()=>x(v),className:"ml-1 hover:text-brand-600",children:l.jsx(me,{name:"x",size:14})})]},v))}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",className:"input",value:a,onChange:y=>{i(y.target.value),o(!0)},onFocus:()=>o(!0),placeholder:"Buscar supervisor por nombre o correo..."}),s&&h.length>0&&l.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.map(y=>l.jsxs("button",{type:"button",onClick:()=>g(y),className:"w-full px-4 py-2 text-left hover:bg-slate-50 border-b last:border-b-0 border-slate-100",children:[l.jsx("div",{className:"font-medium text-slate-800",children:y.nombre}),y.email&&l.jsx("div",{className:"text-sm text-slate-500",children:y.email})]},y.id))})]}),l.jsxs("div",{className:"border-t pt-3",children:[l.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Agregar invitado externo:"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-2",children:[l.jsx("input",{type:"text",className:"input flex-1",value:d,onChange:y=>f(y.target.value),placeholder:"Nombre"}),l.jsx("input",{type:"email",className:"input flex-1",value:c,onChange:y=>u(y.target.value),placeholder:"Correo (opcional)"}),l.jsx("button",{type:"button",onClick:m,className:"btn btn-secondary shrink-0",disabled:!d.trim(),children:l.jsx(me,{name:"plus",size:18})})]})]})]})},DO=({meeting:e,onClose:t,onSuccess:r})=>{const n=Vt(v=>v.context),a=m9(),i=fle(),s=g9((e==null?void 0:e.id)||null),o=mle(),[c,u]=F.useState({title:"",terminal_code:n.mode==="TERMINAL"?n.value:"EL_ROBLE",starts_at:"",duration_minutes:60,location:"",meeting_link:"",agenda_json:[],invitees:[]}),[d,f]=F.useState("");F.useEffect(()=>{e&&u({title:e.title,terminal_code:e.terminal_code,starts_at:e.starts_at.slice(0,16),duration_minutes:e.duration_minutes,location:e.location||"",meeting_link:e.meeting_link||"",agenda_json:e.agenda_json||[],invitees:[]})},[e]);const p=()=>{if(!d.trim())return;const v={id:crypto.randomUUID(),text:d.trim()};u(b=>({...b,agenda_json:[...b.agenda_json,v]})),f("")},h=v=>{u(b=>({...b,agenda_json:b.agenda_json.filter(S=>S.id!==v)}))},g=v=>{u(b=>({...b,invitees:v}))},m=async v=>{v.preventDefault();try{e?(await i.mutateAsync({id:e.id,values:c}),c.invitees.length>0&&await o.mutateAsync({meetingId:e.id,invitees:c.invitees})):await a.mutateAsync(c),r()}catch(b){console.error("Error saving meeting:",b)}},x=c.title&&c.starts_at&&c.terminal_code,y=a.isPending||i.isPending;return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),l.jsxs("div",{className:"relative w-full max-w-2xl bg-white rounded-2xl shadow-2xl max-h-[90vh] overflow-hidden",children:[l.jsx("div",{className:"bg-brand-600 text-white p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-xl font-bold",children:e?"Editar Reunin":"Nueva Reunin"}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg",children:l.jsx(me,{name:"x",size:24})})]})}),l.jsxs("form",{onSubmit:m,className:"p-6 overflow-y-auto max-h-[calc(90vh-180px)]",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Ttulo de la reunin"}),l.jsx("input",{type:"text",className:"input",value:c.title,onChange:v=>u(b=>({...b,title:v.target.value})),placeholder:"Ej: Reunin de coordinacin semanal",required:!0})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Terminal"}),l.jsx("select",{className:"input",value:c.terminal_code,onChange:v=>u(b=>({...b,terminal_code:v.target.value})),required:!0,children:ns.map(v=>l.jsx("option",{value:v.value,children:v.label},v.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha y hora"}),l.jsx("input",{type:"datetime-local",className:"input",value:c.starts_at,onChange:v=>u(b=>({...b,starts_at:v.target.value})),required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Duracin (minutos)"}),l.jsxs("select",{className:"input",value:c.duration_minutes,onChange:v=>u(b=>({...b,duration_minutes:Number(v.target.value)})),children:[l.jsx("option",{value:30,children:"30 minutos"}),l.jsx("option",{value:60,children:"1 hora"}),l.jsx("option",{value:90,children:"1.5 horas"}),l.jsx("option",{value:120,children:"2 horas"}),l.jsx("option",{value:180,children:"3 horas"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Lugar / Sala"}),l.jsx("input",{type:"text",className:"input",value:c.location,onChange:v=>u(b=>({...b,location:v.target.value})),placeholder:"Ej: Sala de reuniones"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Link de videollamada (opcional)"}),l.jsx("input",{type:"url",className:"input",value:c.meeting_link,onChange:v=>u(b=>({...b,meeting_link:v.target.value})),placeholder:"https://meet.google.com/..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Agenda"}),l.jsxs("div",{className:"space-y-2",children:[c.agenda_json.map((v,b)=>l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-2 rounded-lg",children:[l.jsxs("span",{className:"font-medium text-slate-500",children:[b+1,"."]}),l.jsx("span",{className:"flex-1",children:v.text}),l.jsx("button",{type:"button",onClick:()=>h(v.id),className:"text-red-500 hover:text-red-700",children:l.jsx(me,{name:"x",size:16})})]},v.id)),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",className:"input flex-1",value:d,onChange:v=>f(v.target.value),placeholder:"Agregar punto a la agenda",onKeyDown:v=>v.key==="Enter"&&(v.preventDefault(),p())}),l.jsx("button",{type:"button",onClick:p,className:"btn btn-secondary",children:l.jsx(me,{name:"plus",size:18})})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Invitados (supervisores)"}),l.jsx(Cle,{value:c.invitees,onChange:g,existingInvitees:s.data||[]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-6 mt-6 border-t",children:[l.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:!x||y,className:"btn btn-primary",children:y?"Guardando...":e?"Actualizar":"Crear Reunin"})]})]})]})]})},kle=({meetingTitle:e,onConfirm:t,onCancel:r,isLoading:n})=>{const[a,i]=F.useState("");return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),l.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 animate-scale-in",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:l.jsx(me,{name:"alert-triangle",size:24,className:"text-red-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Cancelar Reunin"}),l.jsx("p",{className:"text-sm text-slate-500",children:e})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"label",children:"Motivo de cancelacin"}),l.jsx("textarea",{className:"input min-h-[100px] resize-none",value:a,onChange:s=>i(s.target.value),placeholder:"Indique el motivo por el cual se cancela esta reunin...",required:!0})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Volver"}),l.jsx("button",{onClick:()=>t(a),disabled:!a.trim()||n,className:"btn bg-red-600 hover:bg-red-700 text-white",children:n?"Cancelando...":"Confirmar Cancelacin"})]})]})]})},Ole=({onOpenMeeting:e})=>{const t=Vt(_=>_.context),r=Vt(_=>_.setContext),n=jr(_=>_.session),a=(n==null?void 0:n.supervisorName)??"",i=v9(a),[s,o]=F.useState({status:"todos"}),[c,u]=F.useState(!1),[d,f]=F.useState(null),[p,h]=F.useState(null),g=I3(s);m9();const m=hle(),x=[{key:"starts_at",header:"Fecha/Hora",value:_=>y(_.starts_at)},{key:"title",header:"Ttulo",value:_=>_.title},{key:"terminal",header:"Terminal",value:_=>ur(_.terminal_code)},{key:"status",header:"Estado",value:_=>_.status},{key:"duration",header:"Duracin (min)",value:_=>_.duration_minutes.toString()},{key:"invitees",header:"Invitados",value:_=>_.invitees_count.toString()},{key:"location",header:"Lugar",value:_=>_.location||_.meeting_link||""}],y=_=>{const A=new Date(_);return A.toLocaleDateString("es-CL",{day:"2-digit",month:"short",year:"numeric"})+" "+A.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})},v=_=>{switch(_){case"REALIZADA":return l.jsx("span",{className:"badge badge-success",children:_});case"CANCELADA":return l.jsx("span",{className:"badge badge-danger",children:_});default:return l.jsx("span",{className:"badge badge-warning",children:_})}},b=async _=>{p&&(await m.mutateAsync({id:p.id,status:"CANCELADA",reason:_}),h(null))},S=async _=>{await m.mutateAsync({id:_.id,status:"REALIZADA"})};return l.jsxs("div",{className:"space-y-4",children:[l.jsx(gn,{title:"Reuniones",description:"Gestin de reuniones y seguimiento de acuerdos",actions:l.jsxs("div",{className:"flex gap-2",children:[i&&l.jsxs("button",{className:"btn btn-primary",onClick:()=>u(!0),children:[l.jsx(me,{name:"plus",size:18})," Nueva Reunin"]}),l.jsx(Na,{onExportView:()=>xr({filename:"reuniones",sheetName:"Reuniones",rows:g.data||[],columns:x}),onExportAll:()=>xr({filename:"reuniones_all",sheetName:"Reuniones",rows:g.data||[],columns:x})})]})}),l.jsxs(ss,{terminalContext:t,onTerminalChange:r,children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsx("select",{className:"input",value:s.status,onChange:_=>o(A=>({...A,status:_.target.value})),children:Tle.map(_=>l.jsx("option",{value:_.value,children:_.label},_.value))})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Buscar"}),l.jsx("input",{className:"input",placeholder:"Ttulo de reunin",value:s.search??"",onChange:_=>o(A=>({...A,search:_.target.value}))})]})]}),g.isLoading&&l.jsx(kn,{label:"Cargando reuniones..."}),g.isError&&l.jsx(Fa,{onRetry:()=>g.refetch()}),!g.isLoading&&!g.isError&&l.jsx("div",{className:"table-container overflow-x-auto",children:l.jsxs("table",{className:"table",children:[l.jsx("thead",{className:"table-header",children:l.jsxs("tr",{children:[l.jsx("th",{className:"table-header-cell",children:"Fecha/Hora"}),l.jsx("th",{className:"table-header-cell",children:"Ttulo"}),l.jsx("th",{className:"table-header-cell",children:"Terminal"}),l.jsx("th",{className:"table-header-cell",children:"Estado"}),l.jsx("th",{className:"table-header-cell text-center",children:"Inv."}),l.jsx("th",{className:"table-header-cell text-center",children:"Tareas"}),l.jsx("th",{className:"table-header-cell text-center",children:"Adj."}),l.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),l.jsx("tbody",{className:"table-body",children:(g.data||[]).length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"table-cell text-center text-slate-500 py-8",children:"No hay reuniones registradas"})}):(g.data||[]).map(_=>l.jsxs("tr",{className:"table-row cursor-pointer hover:bg-slate-50",onClick:()=>e(_.id),children:[l.jsx("td",{className:"table-cell text-sm",children:y(_.starts_at)}),l.jsx("td",{className:"table-cell font-medium",children:_.title}),l.jsx("td",{className:"table-cell text-sm",children:ur(_.terminal_code)}),l.jsx("td",{className:"table-cell",children:v(_.status)}),l.jsx("td",{className:"table-cell text-center",children:l.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-sm font-medium",children:_.invitees_count})}),l.jsx("td",{className:"table-cell text-center",children:l.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-sm font-medium",children:_.actions_count})}),l.jsx("td",{className:"table-cell text-center",children:l.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-sm font-medium",children:_.files_count})}),l.jsx("td",{className:"table-cell",onClick:A=>A.stopPropagation(),children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[l.jsx("button",{onClick:()=>e(_.id),className:"btn btn-ghost btn-icon",title:"Ver detalle",children:l.jsx(me,{name:"eye",size:16})}),i&&_.status==="PROGRAMADA"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>f(_),className:"btn btn-ghost btn-icon",title:"Editar",children:l.jsx(me,{name:"edit",size:16})}),l.jsx("button",{onClick:()=>S(_),className:"btn btn-ghost btn-icon text-success-600",title:"Marcar realizada",children:l.jsx(me,{name:"check-circle",size:16})}),l.jsx("button",{onClick:()=>h(_),className:"btn btn-ghost btn-icon text-danger-600",title:"Cancelar",children:l.jsx(me,{name:"x-circle",size:16})})]})]})})]},_.id))})]})}),c&&l.jsx(DO,{onClose:()=>u(!1),onSuccess:()=>u(!1)}),d&&l.jsx(DO,{meeting:d,onClose:()=>f(null),onSuccess:()=>f(null)}),p&&l.jsx(kle,{meetingTitle:p.title,onConfirm:b,onCancel:()=>h(null),isLoading:m.isPending})]})},Ple=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],Lle=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],Ile=({onOpenMeeting:e})=>{const t=new Date,[r,n]=F.useState(t.getFullYear()),[a,i]=F.useState(t.getMonth()),[s,o]=F.useState(null),c=I3({status:"todos"}),u=F.useMemo(()=>{const y=new Date(r,a,1),b=new Date(r,a+1,0).getDate();let S=y.getDay();const _=[];for(let A=0;A<S;A++)_.push(null);for(let A=1;A<=b;A++)_.push(A);return _},[r,a]),d=y=>{if(!c.data)return[];const v=`${r}-${String(a+1).padStart(2,"0")}-${String(y).padStart(2,"0")}`;return c.data.filter(b=>b.starts_at.startsWith(v))},f=F.useMemo(()=>{if(!c.data)return[];const y=new Date().toISOString();return c.data.filter(v=>v.status==="PROGRAMADA"&&v.starts_at>=y).sort((v,b)=>v.starts_at.localeCompare(b.starts_at)).slice(0,5)},[c.data]),p=s?d(parseInt(s.split("-")[2])):[],h=()=>{a===0?(i(11),n(r-1)):i(a-1)},g=()=>{a===11?(i(0),n(r+1)):i(a+1)},m=y=>new Date(y).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"}),x=y=>{switch(y){case"REALIZADA":return"bg-green-500";case"CANCELADA":return"bg-red-500";default:return"bg-brand-500"}};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(gn,{title:"Agenda",description:"Vista de calendario de reuniones"}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("button",{onClick:h,className:"btn btn-ghost btn-icon",children:l.jsx(me,{name:"chevron-right",size:20,className:"rotate-180"})}),l.jsxs("h3",{className:"text-lg font-bold text-slate-800",children:[Ple[a]," ",r]}),l.jsx("button",{onClick:g,className:"btn btn-ghost btn-icon",children:l.jsx(me,{name:"chevron-right",size:20})})]}),l.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:Lle.map(y=>l.jsx("div",{className:"text-center text-xs font-semibold text-slate-500 py-2",children:y},y))}),l.jsx("div",{className:"grid grid-cols-7 gap-1",children:u.map((y,v)=>{if(y===null)return l.jsx("div",{className:"h-16"},`e-${v}`);const b=d(y),S=`${r}-${String(a+1).padStart(2,"0")}-${String(y).padStart(2,"0")}`,_=y===t.getDate()&&a===t.getMonth()&&r===t.getFullYear(),A=s===S;return l.jsxs("button",{onClick:()=>o(S),className:`h-16 rounded-lg border text-left p-1 transition-all ${A?"border-brand-500 bg-brand-50":"border-transparent hover:bg-slate-50"} ${_?"ring-2 ring-brand-400":""}`,children:[l.jsx("span",{className:`text-sm font-medium ${_?"text-brand-600":"text-slate-700"}`,children:y}),l.jsxs("div",{className:"mt-1 space-y-0.5",children:[b.slice(0,2).map(j=>l.jsx("div",{className:`h-1 rounded ${x(j.status)}`},j.id)),b.length>2&&l.jsxs("span",{className:"text-[10px] text-slate-500",children:["+",b.length-2]})]})]},y)})}),s&&l.jsxs("div",{className:"mt-4 pt-4 border-t",children:[l.jsxs("h4",{className:"font-semibold text-slate-700 mb-2",children:["Reuniones del ",new Date(s+"T12:00:00").toLocaleDateString("es-CL",{day:"numeric",month:"long"})]}),p.length===0?l.jsx("p",{className:"text-sm text-slate-500",children:"Sin reuniones programadas"}):l.jsx("div",{className:"space-y-2",children:p.map(y=>l.jsx("button",{onClick:()=>e(y.id),className:"w-full text-left p-3 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`w-2 h-2 rounded-full ${x(y.status)}`}),l.jsx("span",{className:"font-medium",children:y.title}),l.jsx("span",{className:"text-sm text-slate-500 ml-auto",children:m(y.starts_at)})]})},y.id))})]})]}),l.jsxs("div",{className:"card p-6",children:[l.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[l.jsx(me,{name:"clock",size:18})," Prximas reuniones"]}),f.length===0?l.jsx("p",{className:"text-sm text-slate-500",children:"Sin reuniones prximas"}):l.jsx("div",{className:"space-y-3",children:f.map(y=>l.jsxs("button",{onClick:()=>e(y.id),className:"w-full text-left p-3 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors",children:[l.jsx("div",{className:"font-medium text-slate-800",children:y.title}),l.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:[new Date(y.starts_at).toLocaleDateString("es-CL",{day:"numeric",month:"short"})," - ",m(y.starts_at)]}),l.jsx("div",{className:"text-xs text-slate-400 mt-1",children:ur(y.terminal_code)})]},y.id))})]})]})]})},Rle=({onOpenMeeting:e})=>{const t=Vt(c=>c.context),r=Vt(c=>c.setContext),[n,a]=F.useState({status:"REALIZADA"}),i=I3(n),s=(i.data||[]).filter(c=>c.minutes_text),o=[{key:"date",header:"Fecha",value:c=>new Date(c.starts_at).toLocaleDateString("es-CL")},{key:"title",header:"Ttulo",value:c=>c.title},{key:"terminal",header:"Terminal",value:c=>ur(c.terminal_code)},{key:"minutes",header:"Minuta",value:c=>c.minutes_text||""}];return l.jsxs("div",{className:"space-y-4",children:[l.jsx(gn,{title:"Minutas y Reportes",description:"Registro de minutas de reuniones realizadas",actions:l.jsx(Na,{onExportView:()=>xr({filename:"minutas",sheetName:"Minutas",rows:s,columns:o}),onExportAll:()=>xr({filename:"minutas_all",sheetName:"Minutas",rows:s,columns:o})})}),l.jsx(ss,{terminalContext:t,onTerminalChange:r,children:l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Buscar"}),l.jsx("input",{className:"input",placeholder:"Ttulo de reunin",value:n.search??"",onChange:c=>a(u=>({...u,search:c.target.value}))})]})}),i.isLoading&&l.jsx(kn,{label:"Cargando minutas..."}),!i.isLoading&&s.length===0&&l.jsxs("div",{className:"card p-8 text-center text-slate-500",children:[l.jsx(me,{name:"file-text",size:48,className:"mx-auto mb-3 opacity-50"}),l.jsx("p",{children:"No hay minutas registradas"})]}),l.jsx("div",{className:"grid gap-4",children:s.map(c=>l.jsxs("div",{className:"card p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>e(c.id),children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-800",children:c.title}),l.jsxs("div",{className:"text-sm text-slate-500",children:[new Date(c.starts_at).toLocaleDateString("es-CL",{day:"numeric",month:"long",year:"numeric"})," - ",ur(c.terminal_code)]})]}),l.jsx("span",{className:"badge badge-success",children:c.status})]}),l.jsx("div",{className:"text-sm text-slate-600 line-clamp-3 bg-slate-50 p-3 rounded-lg",children:c.minutes_text})]},c.id))})]})},Dle=()=>{const e=Nle("GLOBAL","ALL"),t=jle(),[r,n]=F.useState(!0),[a,i]=F.useState(""),[s,o]=F.useState(""),[c,u]=F.useState("");F.useEffect(()=>{e.data&&(n(e.data.enabled),i(e.data.cc_emails||""),o(e.data.subject_template),u(e.data.body_template))},[e.data]);const d=async()=>{await t.mutateAsync({scope_type:"GLOBAL",scope_code:"ALL",enabled:r,cc_emails:a||null,subject_template:s,body_template:c})};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(gn,{title:"Configuracin",description:"Ajustes de correo y notificaciones para reuniones"}),l.jsxs("div",{className:"card p-6 max-w-2xl",children:[l.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[l.jsx(me,{name:"send",size:18})," Configuracin de Correos"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-slate-800",children:"Notificaciones por correo"}),l.jsx("div",{className:"text-sm text-slate-500",children:"Enviar invitaciones automticas al crear reuniones"})]}),l.jsx("button",{onClick:()=>n(!r),className:`relative w-12 h-6 rounded-full transition-colors ${r?"bg-brand-600":"bg-slate-300"}`,children:l.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${r?"left-7":"left-1"}`})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Correos en copia (CC)"}),l.jsx("input",{type:"text",className:"input",value:a,onChange:f=>i(f.target.value),placeholder:"correo1@ejemplo.cl, correo2@ejemplo.cl"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Separar mltiples correos con coma"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Plantilla de asunto"}),l.jsx("input",{type:"text",className:"input",value:s,onChange:f=>o(f.target.value)}),l.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Variables: ","{{title}}"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Plantilla de cuerpo"}),l.jsx("textarea",{className:"input min-h-[200px] font-mono text-sm",value:c,onChange:f=>u(f.target.value)}),l.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Variables: ","{{invitee_name}}, {{title}}, {{date}}, {{time}}, {{duration}}, {{location}}, {{agenda}}, {{organizer}}"]})]}),l.jsx("div",{className:"flex justify-end pt-4 border-t",children:l.jsx("button",{onClick:d,disabled:t.isPending,className:"btn btn-primary",children:t.isPending?"Guardando...":"Guardar Configuracin"})})]})]})]})},Mle=({meetingId:e,onClose:t})=>{const r=jr(D=>D.session),n=(r==null?void 0:r.supervisorName)??"",a=v9(n),[i,s]=F.useState("info"),[o,c]=F.useState(""),[u,d]=F.useState(!0),f=dle(e),p=g9(e),h=gle(e),g=yle(e),m=ple(),x=Ale(),y=vle(),v=xle(),b=ble(),S=wle(),_=_le(),A=f.data;F.useState(()=>{A!=null&&A.minutes_text&&c(A.minutes_text)});const j=async()=>{await m.mutateAsync({id:e,minutes:o}),d(!0)},E=async D=>{var Y;const z=(Y=D.target.files)==null?void 0:Y[0];z&&(await y.mutateAsync({meetingId:e,file:z}),D.target.value="")},T=async(D,z)=>{const Y=await nle(D);window.open(Y,"_blank")},L=D=>{const z=new Date(D);return z.toLocaleDateString("es-CL",{weekday:"long",day:"numeric",month:"long",year:"numeric"})+" a las "+z.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})},O=D=>{switch(D){case"REALIZADA":return l.jsx("span",{className:"badge badge-success",children:D});case"CANCELADA":return l.jsx("span",{className:"badge badge-danger",children:D});default:return l.jsx("span",{className:"badge badge-warning",children:D})}};if(f.isLoading)return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:l.jsx(kn,{label:"Cargando reunin..."})});if(!A)return null;const I=[{id:"info",label:"Info",icon:"info"},{id:"agenda",label:"Agenda",icon:"clipboard"},{id:"invitees",label:"Invitados",icon:"users"},{id:"minutes",label:"Minuta",icon:"file-text"},{id:"actions",label:"Acuerdos",icon:"check-circle"},{id:"files",label:"Archivos",icon:"file"}];return l.jsx("div",{className:"fixed inset-0 z-50 flex bg-black/50 backdrop-blur-sm",children:l.jsxs("div",{className:"w-full h-full bg-white flex flex-col lg:flex-row animate-scale-in",children:[l.jsxs("div",{className:"lg:w-64 bg-slate-50 border-b lg:border-b-0 lg:border-r border-slate-200 p-4 flex lg:flex-col gap-2 overflow-x-auto lg:overflow-visible shrink-0",children:[I.map(D=>l.jsxs("button",{onClick:()=>s(D.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all whitespace-nowrap ${i===D.id?"bg-brand-600 text-white":"text-slate-600 hover:bg-slate-200"}`,children:[l.jsx(me,{name:D.icon,size:18}),l.jsx("span",{className:"hidden lg:inline",children:D.label})]},D.id)),l.jsxs("button",{onClick:t,className:"mt-auto flex items-center gap-2 px-4 py-2 rounded-lg text-slate-600 hover:bg-slate-200",children:[l.jsx(me,{name:"x",size:18})," ",l.jsx("span",{className:"hidden lg:inline",children:"Cerrar"})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[l.jsx("div",{className:"mb-6 pb-4 border-b",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:A.title}),l.jsx("p",{className:"text-slate-500 mt-1",children:L(A.starts_at)})]}),O(A.status)]})}),i==="info"&&l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm text-slate-500",children:"Terminal"}),l.jsx("div",{className:"font-medium",children:ur(A.terminal_code)})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm text-slate-500",children:"Duracin"}),l.jsxs("div",{className:"font-medium",children:[A.duration_minutes," minutos"]})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm text-slate-500",children:"Lugar"}),l.jsx("div",{className:"font-medium",children:A.location||"No especificado"})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm text-slate-500",children:"Link"}),A.meeting_link?l.jsx("a",{href:A.meeting_link,target:"_blank",rel:"noopener noreferrer",className:"text-brand-600 hover:underline",children:"Unirse a la reunin"}):l.jsx("div",{className:"font-medium",children:"No disponible"})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg md:col-span-2",children:[l.jsx("div",{className:"text-sm text-slate-500",children:"Organizado por"}),l.jsx("div",{className:"font-medium",children:A.created_by_supervisor})]})]}),i==="agenda"&&l.jsx("div",{className:"space-y-2",children:A.agenda_json.length===0?l.jsx("p",{className:"text-slate-500",children:"Sin agenda definida"}):A.agenda_json.map((D,z)=>l.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 p-3 rounded-lg",children:[l.jsx("span",{className:"w-6 h-6 rounded-full bg-brand-100 text-brand-600 flex items-center justify-center text-sm font-bold",children:z+1}),l.jsx("span",{className:"flex-1",children:D.text})]},D.id))}),i==="invitees"&&l.jsxs("div",{className:"space-y-4",children:[a&&l.jsxs("button",{onClick:()=>x.mutate({meetingId:e}),disabled:x.isPending,className:"btn btn-secondary",children:[l.jsx(me,{name:"send",size:16})," ",x.isPending?"Enviando...":"Reenviar invitaciones"]}),l.jsx("div",{className:"space-y-2",children:(p.data||[]).map(D=>l.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:D.invitee_name}),D.invitee_email&&l.jsx("div",{className:"text-sm text-slate-500",children:D.invitee_email})]}),l.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${D.notification_status==="ENVIADO"?"bg-green-100 text-green-700":D.notification_status==="ERROR"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:D.notification_status})]},D.id))})]}),i==="minutes"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("textarea",{className:"input min-h-[300px] font-mono",value:o,onChange:D=>{c(D.target.value),d(!1)},placeholder:"Escriba la minuta de la reunin aqu...",disabled:!a}),a&&l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:j,disabled:u||m.isPending,className:"btn btn-primary",children:m.isPending?"Guardando...":"Guardar Minuta"}),u&&l.jsx("span",{className:"text-sm text-green-600",children:"Guardado"})]})]}),i==="actions"&&l.jsx(Fle,{actions:g.data||[],meetingId:e,canManage:a,onCreate:D=>b.mutate({meetingId:e,values:D}),onUpdate:(D,z)=>S.mutate({id:D,meetingId:e,values:z}),onDelete:D=>_.mutate({id:D,meetingId:e})}),i==="files"&&l.jsxs("div",{className:"space-y-4",children:[a&&l.jsxs("label",{className:"btn btn-secondary cursor-pointer inline-flex items-center gap-2",children:[l.jsx(me,{name:"upload",size:16})," Subir archivo",l.jsx("input",{type:"file",className:"hidden",accept:".pdf,.png,.jpg,.jpeg,.doc,.docx",onChange:E})]}),l.jsx("div",{className:"space-y-2",children:(h.data||[]).map(D=>l.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(me,{name:"file",size:20,className:"text-slate-400"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:D.file_name}),l.jsxs("div",{className:"text-xs text-slate-500",children:[(D.size_bytes/1024).toFixed(1)," KB"]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>T(D.storage_path,D.file_name),className:"btn btn-ghost btn-icon",children:l.jsx(me,{name:"eye",size:16})}),a&&l.jsx("button",{onClick:()=>v.mutate({id:D.id,storagePath:D.storage_path,meetingId:e}),className:"btn btn-ghost btn-icon text-red-500",children:l.jsx(me,{name:"trash",size:16})})]})]},D.id))})]})]})]})})},Fle=({actions:e,canManage:t,onCreate:r,onUpdate:n,onDelete:a})=>{const[i,s]=F.useState(""),[o,c]=F.useState(""),[u,d]=F.useState(""),f=()=>{i.trim()&&(r({description:i,responsible_name:o||void 0,due_date:u||void 0}),s(""),c(""),d(""))};return l.jsxs("div",{className:"space-y-4",children:[t&&l.jsxs("div",{className:"space-y-2 bg-slate-50 p-4 rounded-lg",children:[l.jsx("input",{className:"input",value:i,onChange:p=>s(p.target.value),placeholder:"Descripcin del acuerdo"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx("input",{className:"input",value:o,onChange:p=>c(p.target.value),placeholder:"Responsable"}),l.jsx("input",{type:"date",className:"input",value:u,onChange:p=>d(p.target.value)})]}),l.jsxs("button",{onClick:f,className:"btn btn-primary",disabled:!i.trim(),children:[l.jsx(me,{name:"plus",size:16})," Agregar Acuerdo"]})]}),l.jsx("div",{className:"space-y-2",children:e.map(p=>l.jsxs("div",{className:"flex items-start gap-3 bg-slate-50 p-3 rounded-lg",children:[l.jsx("button",{onClick:()=>n(p.id,{status:p.status==="CUMPLIDO"?"PENDIENTE":"CUMPLIDO"}),className:`mt-0.5 w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 ${p.status==="CUMPLIDO"?"bg-green-500 border-green-500 text-white":"border-slate-300"}`,disabled:!t,children:p.status==="CUMPLIDO"&&l.jsx(me,{name:"check",size:12})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:p.status==="CUMPLIDO"?"line-through text-slate-400":"",children:p.description}),l.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:[p.responsible_name&&l.jsx("span",{children:p.responsible_name}),p.due_date&&l.jsx("span",{className:"ml-2",children:new Date(p.due_date).toLocaleDateString("es-CL")})]})]}),t&&l.jsx("button",{onClick:()=>a(p.id),className:"text-red-500 hover:text-red-700",children:l.jsx(me,{name:"trash",size:16})})]},p.id))})]})},$le=[{id:"agenda",label:"Agenda",icon:"calendar"},{id:"reuniones",label:"Reuniones",icon:"users"},{id:"minutas",label:"Minutas",icon:"file-text"},{id:"config",label:"Configuracin",icon:"settings"}],Ble=()=>{const[e,t]=F.useState("reuniones"),[r,n]=F.useState(null),a=o=>{n(o)},i=()=>{n(null)},s=()=>{switch(e){case"agenda":return l.jsx(Ile,{onOpenMeeting:a});case"reuniones":return l.jsx(Ole,{onOpenMeeting:a});case"minutas":return l.jsx(Rle,{onOpenMeeting:a});case"config":return l.jsx(Dle,{});default:return null}};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 border-b border-slate-200 pb-4",children:l.jsx("div",{className:"flex flex-wrap gap-2",children:$le.map(o=>l.jsxs("button",{onClick:()=>t(o.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${e===o.id?"bg-brand-600 text-white shadow-md":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[l.jsx(me,{name:o.icon,size:18}),l.jsx("span",{className:"hidden sm:inline",children:o.label})]},o.id))})}),s(),r&&l.jsx(Mle,{meetingId:r,onClose:i})]})},Ule=async(e,t,r)=>{if(!Zt())return[];const n=Ui(e);let a=Ee.from("tasks").select("*").in("terminal_code",n).order("updated_at",{ascending:!1});if(t!=null&&t.status&&t.status!=="todos"&&(a=a.eq("status",t.status)),t!=null&&t.priority&&t.priority!=="todos"&&(a=a.eq("priority",t.priority)),t!=null&&t.search){const o=`%${t.search}%`;a=a.or(`title.ilike.${o},description.ilike.${o}`)}t!=null&&t.assigned_to_name&&(a=a.ilike("assigned_to_name",`%${t.assigned_to_name}%`)),t!=null&&t.date_from&&(a=a.gte("created_at",t.date_from)),t!=null&&t.date_to&&(a=a.lte("created_at",t.date_to+"T23:59:59")),t!=null&&t.due_from&&(a=a.gte("due_at",t.due_from)),t!=null&&t.due_to&&(a=a.lte("due_at",t.due_to+"T23:59:59")),t!=null&&t.only_mine&&r&&(a=a.ilike("assigned_to_name",`%${r}%`));const{data:i,error:s}=await a;if(s)throw s;return i||[]},R3=async e=>{const{data:t,error:r}=await Ee.from("tasks").select("*").eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t},zle=async e=>{const t=Ui(e),r=new Date().toISOString(),{data:n,error:a}=await Ee.from("tasks").select("status, due_at").in("terminal_code",t);if(a)throw a;const i=n||[];return{pending:i.filter(s=>s.status==="PENDIENTE").length,inProgress:i.filter(s=>s.status==="EN_CURSO").length,completed:i.filter(s=>s.status==="TERMINADO").length,evaluated:i.filter(s=>s.status==="EVALUADO").length,rejected:i.filter(s=>s.status==="RECHAZADO").length,overdue:i.filter(s=>s.due_at&&s.due_at<r&&!["EVALUADO","RECHAZADO"].includes(s.status)).length}},qle=async(e,t)=>{const{data:r,error:n}=await Ee.from("tasks").insert({title:e.title,description:e.description||null,terminal_code:e.terminal_code,priority:e.priority,assigned_to_staff_id:e.assigned_to_staff_id||null,assigned_to_name:e.assigned_to_name,assigned_to_email:e.assigned_to_email||null,created_by_supervisor:t,due_at:e.due_at||null,period_start:e.period_start||null,period_end:e.period_end||null}).select().single();if(n)throw Pi("Error al crear tarea","No se pudo guardar la tarea"),n;return Fi("Tarea creada",`"${e.title}" asignada a ${e.assigned_to_name}`,t),e.assigned_to_email&&await D3("assigned",r),r},Hle=async(e,t)=>{const r={};t.title!==void 0&&(r.title=t.title),t.description!==void 0&&(r.description=t.description||null),t.terminal_code!==void 0&&(r.terminal_code=t.terminal_code),t.priority!==void 0&&(r.priority=t.priority),t.assigned_to_staff_id!==void 0&&(r.assigned_to_staff_id=t.assigned_to_staff_id||null),t.assigned_to_name!==void 0&&(r.assigned_to_name=t.assigned_to_name),t.assigned_to_email!==void 0&&(r.assigned_to_email=t.assigned_to_email||null),t.due_at!==void 0&&(r.due_at=t.due_at||null),t.period_start!==void 0&&(r.period_start=t.period_start||null),t.period_end!==void 0&&(r.period_end=t.period_end||null);const{data:n,error:a}=await Ee.from("tasks").update(r).eq("id",e).select().single();if(a)throw a;return n},Wle=async(e,t,r)=>{const{error:n}=await Ee.from("tasks").update({status:t}).eq("id",e);if(n)throw n;const a=await R3(e);a!=null&&a.assigned_to_email&&await D3("status_change",a)},Vle=async(e,t,r,n,a)=>{const i={status:t?"EVALUADO":"RECHAZADO",evaluated_by:r,evaluated_at:new Date().toISOString()};t&&n&&(i.evaluation_note=n),!t&&a&&(i.rejected_reason=a);const{error:s}=await Ee.from("tasks").update(i).eq("id",e);if(s)throw s;const o=await R3(e);o!=null&&o.assigned_to_email&&await D3(t?"evaluated_ok":"evaluated_reject",o),Fi(t?"Tarea evaluada":"Tarea rechazada",t?"La tarea ha sido aceptada":"La tarea ha sido devuelta",r)},Gle=async e=>{const{data:t,error:r}=await Ee.from("task_comments").select("*").eq("task_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},Kle=async(e,t,r)=>{const{data:n,error:a}=await Ee.from("task_comments").insert({task_id:e,author_name:r,body:t}).select().single();if(a)throw a;return n},Xle=async e=>{const{data:t,error:r}=await Ee.from("task_attachments").select("*").eq("task_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},Yle=async(e,t,r)=>{const n=t.name.split(".").pop(),a=`tasks/${e}/${Date.now()}.${n}`,{error:i}=await Ee.storage.from("task-files").upload(a,t);if(i)throw Pi("Error al subir archivo",i.message),i;const{data:s,error:o}=await Ee.from("task_attachments").insert({task_id:e,type:"FILE",storage_path:a,file_name:t.name,mime_type:t.type,size_bytes:t.size,created_by:r}).select().single();if(o)throw o;return s},Jle=async(e,t,r,n)=>{const{data:a,error:i}=await Ee.from("task_attachments").insert({task_id:e,type:"URL",url:t,file_name:r,created_by:n}).select().single();if(i)throw i;return a},Qle=async(e,t)=>{t&&await Ee.storage.from("task-files").remove([t]);const{error:r}=await Ee.from("task_attachments").delete().eq("id",e);if(r)throw r},Zle=async e=>{const{data:t,error:r}=await Ee.storage.from("task-files").createSignedUrl(e,3600);if(r)throw r;return t.signedUrl},x9=async(e,t)=>{const{data:r,error:n}=await Ee.from("task_email_settings").select("*").eq("scope_type",e).eq("scope_code",t).single();if(n){if(n.code==="PGRST116")return null;throw n}return r},ece=async e=>{const{error:t}=await Ee.from("task_email_settings").upsert(e,{onConflict:"scope_type,scope_code"});if(t)throw t},D3=async(e,t,r)=>{var a;const n=await x9("GLOBAL","ALL");if(!(!(n!=null&&n.enabled)||!t.assigned_to_email))try{const i=n.subject_templates[e]||"",s=n.body_templates[e]||"",o=c=>c.replace(/\{\{title\}\}/g,t.title).replace(/\{\{description\}\}/g,t.description||"").replace(/\{\{assigned_name\}\}/g,t.assigned_to_name).replace(/\{\{status\}\}/g,t.status).replace(/\{\{priority\}\}/g,t.priority).replace(/\{\{due_date\}\}/g,t.due_at?new Date(t.due_at).toLocaleDateString("es-CL"):"Sin fecha").replace(/\{\{creator\}\}/g,t.created_by_supervisor).replace(/\{\{reason\}\}/g,t.rejected_reason||"");await xl.sendEmail({audience:"manual",manualRecipients:[t.assigned_to_email],cc:((a=n.cc_emails)==null?void 0:a.split(",").map(c=>c.trim()).filter(Boolean))||[],subject:o(i),body:o(s).replace(/\n/g,"<br>")})}catch(i){console.error("Error sending task email:",i)}},tce=async()=>{const{data:e,error:t}=await Ee.from("staff").select("id, nombre, email, cargo, terminal_code").eq("status","ACTIVO").order("nombre");if(t)throw t;return e||[]},An={all:["tasks"],list:(e,t)=>[...An.all,"list",e,t],detail:e=>[...An.all,"detail",e],kpis:e=>[...An.all,"kpis",e],comments:e=>[...An.all,"comments",e],attachments:e=>[...An.all,"attachments",e],staff:["staff-for-assignment"],emailSettings:e=>[...An.all,"emailSettings",e]},aw=e=>{const t=Vt(a=>a.context),r=jr(a=>a.session),n=t.mode==="ALL"?"ALL":t.value||"ALL";return zt({queryKey:An.list(n,e),queryFn:()=>Ule(t,e,r==null?void 0:r.supervisorName)})},rce=e=>zt({queryKey:An.detail(e||""),queryFn:()=>R3(e),enabled:!!e}),nce=()=>{const e=Vt(r=>r.context),t=e.mode==="ALL"?"ALL":e.value||"ALL";return zt({queryKey:An.kpis(t),queryFn:()=>zle(e)})},ace=()=>{const e=Mt(),t=jr(r=>r.session);return Ft({mutationFn:r=>qle(r,(t==null?void 0:t.supervisorName)||""),onSuccess:()=>{e.invalidateQueries({queryKey:An.all})}})},ice=()=>{const e=Mt();return Ft({mutationFn:({id:t,values:r})=>Hle(t,r),onSuccess:(t,{id:r})=>{e.invalidateQueries({queryKey:An.all}),e.invalidateQueries({queryKey:An.detail(r)})}})},y9=()=>{const e=Mt(),t=jr(r=>r.session);return Ft({mutationFn:({id:r,status:n})=>Wle(r,n,(t==null?void 0:t.supervisorName)||""),onSuccess:()=>{e.invalidateQueries({queryKey:An.all})}})},sce=()=>{const e=Mt(),t=jr(r=>r.session);return Ft({mutationFn:({id:r,accepted:n,note:a,reason:i})=>Vle(r,n,(t==null?void 0:t.supervisorName)||"",a,i),onSuccess:()=>{e.invalidateQueries({queryKey:An.all})}})},oce=e=>zt({queryKey:An.comments(e||""),queryFn:()=>Gle(e),enabled:!!e}),lce=()=>{const e=Mt(),t=jr(r=>r.session);return Ft({mutationFn:({taskId:r,body:n})=>Kle(r,n,(t==null?void 0:t.supervisorName)||""),onSuccess:(r,{taskId:n})=>{e.invalidateQueries({queryKey:An.comments(n)})}})},cce=e=>zt({queryKey:An.attachments(e||""),queryFn:()=>Xle(e),enabled:!!e}),uce=()=>{const e=Mt(),t=jr(r=>r.session);return Ft({mutationFn:({taskId:r,file:n})=>Yle(r,n,(t==null?void 0:t.supervisorName)||""),onSuccess:(r,{taskId:n})=>{e.invalidateQueries({queryKey:An.attachments(n)})}})},dce=()=>{const e=Mt(),t=jr(r=>r.session);return Ft({mutationFn:({taskId:r,url:n,label:a})=>Jle(r,n,a,(t==null?void 0:t.supervisorName)||""),onSuccess:(r,{taskId:n})=>{e.invalidateQueries({queryKey:An.attachments(n)})}})},fce=()=>{const e=Mt();return Ft({mutationFn:({id:t,storagePath:r,taskId:n})=>Qle(t,r),onSuccess:(t,{taskId:r})=>{e.invalidateQueries({queryKey:An.attachments(r)})}})},hce=()=>zt({queryKey:An.staff,queryFn:tce,staleTime:5*60*1e3}),pce=(e,t)=>zt({queryKey:An.emailSettings(`${e}-${t}`),queryFn:()=>x9(e,t)}),mce=()=>{const e=Mt();return Ft({mutationFn:t=>ece(t),onSuccess:()=>{e.invalidateQueries({queryKey:An.all})}})},gce=["ISAAC AVILA","CLAUDIO ARRIAGADA","CRISTIAN LURASCHI"],Mh=e=>e.toUpperCase().trim().replace(/\s+/g," "),vb=e=>{const t=Mh(e);return gce.some(r=>Mh(r)===t||t.includes(Mh(r))||Mh(r).includes(t))},b9=(e,t)=>Mh(e)===Mh(t),w9=(e,t,r)=>{if(t)return["PENDIENTE","EN_CURSO","TERMINADO","EVALUADO","RECHAZADO"];if(r)switch(e){case"PENDIENTE":return["EN_CURSO"];case"EN_CURSO":return["TERMINADO"];case"RECHAZADO":return["EN_CURSO"];default:return[]}return[]},vce=[{value:"todos",label:"Todos"},{value:"PENDIENTE",label:"Pendiente"},{value:"EN_CURSO",label:"En Curso"},{value:"TERMINADO",label:"Terminado"},{value:"EVALUADO",label:"Evaluado"},{value:"RECHAZADO",label:"Rechazado"}],M3=[{value:"BAJA",label:"Baja",color:"bg-slate-100 text-slate-700"},{value:"MEDIA",label:"Media",color:"bg-blue-100 text-blue-700"},{value:"ALTA",label:"Alta",color:"bg-amber-100 text-amber-700"},{value:"CRITICA",label:"Critica",color:"bg-red-100 text-red-700"}],xce=["PENDIENTE","EN_CURSO","TERMINADO","EVALUADO","RECHAZADO"],F3=e=>{switch(e){case"PENDIENTE":return"bg-slate-100 text-slate-700 border-slate-300";case"EN_CURSO":return"bg-blue-100 text-blue-700 border-blue-300";case"TERMINADO":return"bg-amber-100 text-amber-700 border-amber-300";case"EVALUADO":return"bg-green-100 text-green-700 border-green-300";case"RECHAZADO":return"bg-red-100 text-red-700 border-red-300"}},zg=e=>{var t;return((t=M3.find(r=>r.value===e))==null?void 0:t.color)||""},dj=({task:e,onClose:t,onSuccess:r})=>{const n=Vt(v=>v.context),a=ace(),i=ice(),s=hce(),[o,c]=F.useState({title:"",description:"",terminal_code:n.mode==="TERMINAL"?n.value:"EL_ROBLE",priority:"MEDIA",assigned_to_name:"",assigned_to_email:"",due_at:"",period_start:"",period_end:""}),[u,d]=F.useState(""),[f,p]=F.useState(!1);F.useEffect(()=>{var v;e&&c({title:e.title,description:e.description||"",terminal_code:e.terminal_code,priority:e.priority,assigned_to_staff_id:e.assigned_to_staff_id||void 0,assigned_to_name:e.assigned_to_name,assigned_to_email:e.assigned_to_email||"",due_at:((v=e.due_at)==null?void 0:v.slice(0,16))||"",period_start:e.period_start||"",period_end:e.period_end||""})},[e]);const h=(s.data||[]).filter(v=>v.nombre.toLowerCase().includes(u.toLowerCase())).slice(0,8),g=v=>{c(b=>({...b,assigned_to_staff_id:v.id,assigned_to_name:v.nombre,assigned_to_email:v.email||""})),d(""),p(!1)},m=async v=>{v.preventDefault();try{e?await i.mutateAsync({id:e.id,values:o}):await a.mutateAsync(o),r()}catch(b){console.error("Error saving task:",b)}},x=o.title&&o.assigned_to_name&&o.terminal_code,y=a.isPending||i.isPending;return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),l.jsxs("div",{className:"relative w-full max-w-2xl bg-white rounded-2xl shadow-2xl max-h-[90vh] overflow-hidden",children:[l.jsx("div",{className:"bg-brand-600 text-white p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-xl font-bold",children:e?"Editar Tarea":"Nueva Tarea"}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg",children:l.jsx(me,{name:"x",size:24})})]})}),l.jsxs("form",{onSubmit:m,className:"p-6 overflow-y-auto max-h-[calc(90vh-180px)]",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Ttulo"}),l.jsx("input",{type:"text",className:"input",value:o.title,onChange:v=>c(b=>({...b,title:v.target.value})),placeholder:"Descripcin breve de la tarea",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Descripcin"}),l.jsx("textarea",{className:"input min-h-[80px]",value:o.description,onChange:v=>c(b=>({...b,description:v.target.value})),placeholder:"Detalles adicionales..."})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Terminal"}),l.jsx("select",{className:"input",value:o.terminal_code,onChange:v=>c(b=>({...b,terminal_code:v.target.value})),required:!0,children:ns.map(v=>l.jsx("option",{value:v.value,children:v.label},v.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Prioridad"}),l.jsx("select",{className:"input",value:o.priority,onChange:v=>c(b=>({...b,priority:v.target.value})),children:M3.map(v=>l.jsx("option",{value:v.value,children:v.label},v.value))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Asignar a"}),l.jsxs("div",{className:"relative",children:[o.assigned_to_name&&l.jsxs("div",{className:"mb-2 inline-flex items-center gap-2 px-3 py-1 bg-brand-100 text-brand-800 rounded-full text-sm",children:[l.jsx(me,{name:"user",size:14}),l.jsx("span",{children:o.assigned_to_name}),l.jsx("button",{type:"button",onClick:()=>c(v=>({...v,assigned_to_staff_id:void 0,assigned_to_name:"",assigned_to_email:""})),className:"hover:text-brand-600",children:l.jsx(me,{name:"x",size:14})})]}),l.jsx("input",{type:"text",className:"input",value:u,onChange:v=>{d(v.target.value),p(!0)},onFocus:()=>p(!0),placeholder:"Buscar personal..."}),f&&h.length>0&&l.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.map(v=>l.jsxs("button",{type:"button",onClick:()=>g(v),className:"w-full px-4 py-2 text-left hover:bg-slate-50 border-b last:border-b-0",children:[l.jsx("div",{className:"font-medium text-sm",children:v.nombre}),l.jsxs("div",{className:"text-xs text-slate-500",children:[v.cargo," - ",v.terminal_code]})]},v.id))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Correo del asignado (opcional)"}),l.jsx("input",{type:"email",className:"input",value:o.assigned_to_email,onChange:v=>c(b=>({...b,assigned_to_email:v.target.value})),placeholder:"correo@ejemplo.cl"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Vencimiento"}),l.jsx("input",{type:"datetime-local",className:"input",value:o.due_at,onChange:v=>c(b=>({...b,due_at:v.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Periodo desde"}),l.jsx("input",{type:"date",className:"input",value:o.period_start,onChange:v=>c(b=>({...b,period_start:v.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Periodo hasta"}),l.jsx("input",{type:"date",className:"input",value:o.period_end,onChange:v=>c(b=>({...b,period_end:v.target.value}))})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-6 mt-6 border-t",children:[l.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:!x||y,className:"btn btn-primary",children:y?"Guardando...":e?"Actualizar":"Crear Tarea"})]})]})]})]})},yce={PENDIENTE:"Pendiente",EN_CURSO:"En Curso",TERMINADO:"Terminado",EVALUADO:"Evaluado",RECHAZADO:"Rechazado"},bce=({onOpenTask:e})=>{const t=jr(m=>m.session),r=(t==null?void 0:t.supervisorName)??"",n=vb(r),[a,i]=F.useState(!1),[s,o]=F.useState(null),c=aw(),u=y9(),d=m=>(c.data||[]).filter(x=>x.status===m),f=m=>{o(m)},p=m=>{m.preventDefault()},h=async m=>{if(!s||s.status===m){o(null);return}const x=vb(r),y=b9(r,s.assigned_to_name);if(!w9(s.status,x,y).includes(m)){o(null);return}await u.mutateAsync({id:s.id,status:m}),o(null)},g=m=>{if(!m)return null;const x=new Date(m),v=x<new Date;return l.jsx("span",{className:`text-xs ${v?"text-red-600 font-medium":"text-slate-500"}`,children:x.toLocaleDateString("es-CL",{day:"2-digit",month:"short"})})};return l.jsxs("div",{className:"space-y-4",children:[l.jsx(gn,{title:"Tablero de Tareas",description:"Vista Kanban con arrastrar y soltar",actions:n&&l.jsxs("button",{className:"btn btn-primary",onClick:()=>i(!0),children:[l.jsx(me,{name:"plus",size:18})," Nueva Tarea"]})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 overflow-x-auto pb-4",children:xce.map(m=>l.jsxs("div",{className:"bg-slate-100 rounded-xl p-3 min-h-[400px]",onDragOver:p,onDrop:()=>h(m),children:[l.jsxs("div",{className:`flex items-center justify-between mb-3 px-2 py-1 rounded-lg ${F3(m)}`,children:[l.jsx("span",{className:"font-semibold text-sm",children:yce[m]}),l.jsx("span",{className:"text-xs font-medium px-2 py-0.5 bg-white/50 rounded-full",children:d(m).length})]}),l.jsx("div",{className:"space-y-2",children:d(m).map(x=>l.jsxs("div",{draggable:!0,onDragStart:()=>f(x),onClick:()=>e(x.id),className:`bg-white rounded-lg p-3 shadow-sm cursor-pointer hover:shadow-md transition-shadow border-l-4 ${(s==null?void 0:s.id)===x.id?"opacity-50":""}`,style:{borderLeftColor:x.priority==="CRITICA"?"#ef4444":x.priority==="ALTA"?"#f59e0b":x.priority==="MEDIA"?"#3b82f6":"#94a3b8"},children:[l.jsx("div",{className:"font-medium text-sm text-slate-800 line-clamp-2",children:x.title}),l.jsxs("div",{className:"flex items-center justify-between mt-2",children:[l.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${zg(x.priority)}`,children:x.priority}),g(x.due_at)]}),l.jsx("div",{className:"text-xs text-slate-500 mt-2 truncate",children:x.assigned_to_name})]},x.id))})]},m))}),a&&l.jsx(dj,{onClose:()=>i(!1),onSuccess:()=>i(!1)})]})},wce=({onOpenTask:e})=>{const t=Vt(m=>m.context),r=Vt(m=>m.setContext),n=jr(m=>m.session),a=(n==null?void 0:n.supervisorName)??"",i=vb(a),[s,o]=F.useState({status:"todos",priority:"todos"}),[c,u]=F.useState(!1),[d,f]=F.useState(null),p=aw(s),h=[{key:"due_at",header:"Vencimiento",value:m=>m.due_at?new Date(m.due_at).toLocaleDateString("es-CL"):""},{key:"title",header:"Ttulo",value:m=>m.title},{key:"terminal",header:"Terminal",value:m=>ur(m.terminal_code)},{key:"priority",header:"Prioridad",value:m=>m.priority},{key:"assigned",header:"Asignado",value:m=>m.assigned_to_name},{key:"status",header:"Estado",value:m=>m.status},{key:"created",header:"Creado",value:m=>new Date(m.created_at).toLocaleDateString("es-CL")}],g=m=>{if(!m)return"-";const x=new Date(m),v=x<new Date;return l.jsx("span",{className:v?"text-red-600 font-medium":"",children:x.toLocaleDateString("es-CL",{day:"2-digit",month:"short"})})};return l.jsxs("div",{className:"space-y-4",children:[l.jsx(gn,{title:"Lista de Tareas",description:"Vista de tabla con filtros avanzados",actions:l.jsxs("div",{className:"flex gap-2",children:[i&&l.jsxs("button",{className:"btn btn-primary",onClick:()=>u(!0),children:[l.jsx(me,{name:"plus",size:18})," Nueva Tarea"]}),l.jsx(Na,{onExportView:()=>xr({filename:"tareas",sheetName:"Tareas",rows:p.data||[],columns:h}),onExportAll:()=>xr({filename:"tareas_all",sheetName:"Tareas",rows:p.data||[],columns:h})})]})}),l.jsxs(ss,{terminalContext:t,onTerminalChange:r,children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsx("select",{className:"input",value:s.status,onChange:m=>o(x=>({...x,status:m.target.value})),children:vce.map(m=>l.jsx("option",{value:m.value,children:m.label},m.value))})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Prioridad"}),l.jsxs("select",{className:"input",value:s.priority,onChange:m=>o(x=>({...x,priority:m.target.value})),children:[l.jsx("option",{value:"todos",children:"Todas"}),M3.map(m=>l.jsx("option",{value:m.value,children:m.label},m.value))]})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Buscar"}),l.jsx("input",{className:"input",placeholder:"Ttulo o descripcin",value:s.search??"",onChange:m=>o(x=>({...x,search:m.target.value}))})]}),l.jsx("div",{className:"flex items-end",children:l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:s.only_mine||!1,onChange:m=>o(x=>({...x,only_mine:m.target.checked})),className:"w-4 h-4 rounded"}),l.jsx("span",{className:"text-sm",children:"Solo mis tareas"})]})})]}),p.isLoading&&l.jsx(kn,{label:"Cargando tareas..."}),p.isError&&l.jsx(Fa,{onRetry:()=>p.refetch()}),!p.isLoading&&!p.isError&&l.jsx("div",{className:"table-container overflow-x-auto",children:l.jsxs("table",{className:"table",children:[l.jsx("thead",{className:"table-header",children:l.jsxs("tr",{children:[l.jsx("th",{className:"table-header-cell",children:"Vence"}),l.jsx("th",{className:"table-header-cell",children:"Ttulo"}),l.jsx("th",{className:"table-header-cell",children:"Terminal"}),l.jsx("th",{className:"table-header-cell",children:"Prioridad"}),l.jsx("th",{className:"table-header-cell",children:"Asignado"}),l.jsx("th",{className:"table-header-cell",children:"Estado"}),l.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),l.jsx("tbody",{className:"table-body",children:(p.data||[]).length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"table-cell text-center text-slate-500 py-8",children:"No hay tareas"})}):(p.data||[]).map(m=>l.jsxs("tr",{className:"table-row cursor-pointer hover:bg-slate-50",onClick:()=>e(m.id),children:[l.jsx("td",{className:"table-cell text-sm",children:g(m.due_at)}),l.jsx("td",{className:"table-cell font-medium",children:m.title}),l.jsx("td",{className:"table-cell text-sm",children:ur(m.terminal_code)}),l.jsx("td",{className:"table-cell",children:l.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${zg(m.priority)}`,children:m.priority})}),l.jsx("td",{className:"table-cell text-sm",children:m.assigned_to_name}),l.jsx("td",{className:"table-cell",children:l.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${F3(m.status)}`,children:m.status})}),l.jsx("td",{className:"table-cell",onClick:x=>x.stopPropagation(),children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[l.jsx("button",{onClick:()=>e(m.id),className:"btn btn-ghost btn-icon",title:"Ver",children:l.jsx(me,{name:"eye",size:16})}),i&&l.jsx("button",{onClick:()=>f(m),className:"btn btn-ghost btn-icon",title:"Editar",children:l.jsx(me,{name:"edit",size:16})})]})})]},m.id))})]})}),c&&l.jsx(dj,{onClose:()=>u(!1),onSuccess:()=>u(!1)}),d&&l.jsx(dj,{task:d,onClose:()=>f(null),onSuccess:()=>f(null)})]})},_ce=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],Sce=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],Nce=({onOpenTask:e})=>{const t=new Date,[r,n]=F.useState(t.getFullYear()),[a,i]=F.useState(t.getMonth()),[s,o]=F.useState(null),c=aw(),u=F.useMemo(()=>{const g=new Date(r,a,1),x=new Date(r,a+1,0).getDate(),y=g.getDay(),v=[];for(let b=0;b<y;b++)v.push(null);for(let b=1;b<=x;b++)v.push(b);return v},[r,a]),d=g=>{if(!c.data)return[];const m=`${r}-${String(a+1).padStart(2,"0")}-${String(g).padStart(2,"0")}`;return c.data.filter(x=>x.due_at&&x.due_at.startsWith(m)?!0:x.period_start&&x.period_end?m>=x.period_start&&m<=x.period_end:!1)},f=s?d(parseInt(s.split("-")[2])):[],p=()=>{a===0?(i(11),n(r-1)):i(a-1)},h=()=>{a===11?(i(0),n(r+1)):i(a+1)};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(gn,{title:"Calendario de Tareas",description:"Vista mensual con vencimientos y periodos"}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("button",{onClick:p,className:"btn btn-ghost btn-icon",children:l.jsx(me,{name:"chevron-right",size:20,className:"rotate-180"})}),l.jsxs("h3",{className:"text-lg font-bold text-slate-800",children:[_ce[a]," ",r]}),l.jsx("button",{onClick:h,className:"btn btn-ghost btn-icon",children:l.jsx(me,{name:"chevron-right",size:20})})]}),l.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:Sce.map(g=>l.jsx("div",{className:"text-center text-xs font-semibold text-slate-500 py-2",children:g},g))}),l.jsx("div",{className:"grid grid-cols-7 gap-1",children:u.map((g,m)=>{if(g===null)return l.jsx("div",{className:"h-20"},`e-${m}`);const x=d(g),y=`${r}-${String(a+1).padStart(2,"0")}-${String(g).padStart(2,"0")}`,v=g===t.getDate()&&a===t.getMonth()&&r===t.getFullYear(),b=s===y;return l.jsxs("button",{onClick:()=>o(y),className:`h-20 rounded-lg border text-left p-1 transition-all ${b?"border-brand-500 bg-brand-50":"border-transparent hover:bg-slate-50"} ${v?"ring-2 ring-brand-400":""}`,children:[l.jsx("span",{className:`text-sm font-medium ${v?"text-brand-600":"text-slate-700"}`,children:g}),l.jsxs("div",{className:"mt-1 space-y-0.5 overflow-hidden",children:[x.slice(0,2).map(S=>l.jsx("div",{className:`text-[10px] px-1 rounded truncate ${zg(S.priority)}`,children:S.title},S.id)),x.length>2&&l.jsxs("span",{className:"text-[10px] text-slate-500",children:["+",x.length-2]})]})]},g)})})]}),l.jsxs("div",{className:"card p-6",children:[l.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[l.jsx(me,{name:"clipboard",size:18}),s?`Tareas: ${new Date(s+"T12:00:00").toLocaleDateString("es-CL",{day:"numeric",month:"long"})}`:"Selecciona un da"]}),s===null?l.jsx("p",{className:"text-sm text-slate-500",children:"Haz clic en un da para ver las tareas"}):f.length===0?l.jsx("p",{className:"text-sm text-slate-500",children:"Sin tareas para este da"}):l.jsx("div",{className:"space-y-2",children:f.map(g=>l.jsxs("button",{onClick:()=>e(g.id),className:"w-full text-left p-3 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors",children:[l.jsx("div",{className:"font-medium text-sm",children:g.title}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${zg(g.priority)}`,children:g.priority}),l.jsx("span",{className:"text-xs text-slate-500",children:g.assigned_to_name})]})]},g.id))})]})]})]})},jce=()=>{const e=nce();aw();const t=e.data,r=[{key:"metric",header:"Mtrica",value:i=>i.metric},{key:"value",header:"Valor",value:i=>i.value.toString()}],n=t?[{metric:"Pendientes",value:t.pending},{metric:"En Curso",value:t.inProgress},{metric:"Terminadas",value:t.completed},{metric:"Evaluadas",value:t.evaluated},{metric:"Rechazadas",value:t.rejected},{metric:"Vencidas",value:t.overdue}]:[],a=({label:i,value:s,icon:o,color:c})=>l.jsx("div",{className:`card p-4 border-l-4 ${c}`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-slate-800",children:s}),l.jsx("div",{className:"text-sm text-slate-500",children:i})]}),l.jsx("div",{className:"p-3 bg-slate-100 rounded-full",children:l.jsx(me,{name:o,size:24,className:"text-slate-600"})})]})});return e.isLoading?l.jsx(kn,{label:"Cargando reportes..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsx(gn,{title:"Reportes de Tareas",description:"KPIs y mtricas de rendimiento",actions:l.jsx(Na,{onExportView:()=>xr({filename:"reporte_tareas",sheetName:"KPIs",rows:n,columns:r}),onExportAll:()=>xr({filename:"reporte_tareas",sheetName:"KPIs",rows:n,columns:r})})}),t&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[l.jsx(a,{label:"Pendientes",value:t.pending,icon:"clock",color:"border-slate-400"}),l.jsx(a,{label:"En Curso",value:t.inProgress,icon:"activity",color:"border-blue-500"}),l.jsx(a,{label:"Terminadas",value:t.completed,icon:"check",color:"border-amber-500"}),l.jsx(a,{label:"Evaluadas",value:t.evaluated,icon:"check-circle",color:"border-green-500"}),l.jsx(a,{label:"Rechazadas",value:t.rejected,icon:"x-circle",color:"border-red-500"}),l.jsx(a,{label:"Vencidas",value:t.overdue,icon:"alert-triangle",color:"border-orange-500"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"card p-6",children:[l.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Distribucin por Estado"}),l.jsx("div",{className:"space-y-3",children:[{label:"Pendientes",value:t.pending,color:"bg-slate-400"},{label:"En Curso",value:t.inProgress,color:"bg-blue-500"},{label:"Terminadas",value:t.completed,color:"bg-amber-500"},{label:"Evaluadas",value:t.evaluated,color:"bg-green-500"},{label:"Rechazadas",value:t.rejected,color:"bg-red-500"}].map(i=>{const s=t.pending+t.inProgress+t.completed+t.evaluated+t.rejected,o=s>0?i.value/s*100:0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[l.jsx("span",{children:i.label}),l.jsx("span",{className:"font-medium",children:i.value})]}),l.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full ${i.color} rounded-full`,style:{width:`${o}%`}})})]},i.label)})})]}),l.jsxs("div",{className:"card p-6",children:[l.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Resumen General"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded-lg",children:[l.jsx("span",{className:"text-slate-600",children:"Total de tareas"}),l.jsx("span",{className:"text-xl font-bold text-brand-600",children:t.pending+t.inProgress+t.completed+t.evaluated+t.rejected})]}),l.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded-lg",children:[l.jsx("span",{className:"text-slate-600",children:"Tasa de cumplimiento"}),l.jsx("span",{className:"text-xl font-bold text-green-600",children:(()=>{const i=t.evaluated,s=t.pending+t.inProgress+t.completed+t.evaluated;return s>0?`${Math.round(i/s*100)}%`:"0%"})()})]}),l.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50 rounded-lg",children:[l.jsx("span",{className:"text-slate-600",children:"Requieren atencin"}),l.jsx("span",{className:"text-xl font-bold text-red-600",children:t.overdue+t.rejected})]})]})]})]})]})]})},Ace=()=>{const e=pce("GLOBAL","ALL"),t=mce(),[r,n]=F.useState(!0),[a,i]=F.useState(""),[s,o]=F.useState({assigned:"Nueva tarea asignada: {{title}}",status_change:"Tarea actualizada: {{title}}",overdue:"Tarea vencida: {{title}}",evaluated_ok:"Tarea evaluada: {{title}}",evaluated_reject:"Tarea rechazada: {{title}}"}),[c,u]=F.useState({assigned:"",status_change:"",overdue:"",evaluated_ok:"",evaluated_reject:""});F.useEffect(()=>{e.data&&(n(e.data.enabled),i(e.data.cc_emails||""),o(e.data.subject_templates),u(e.data.body_templates))},[e.data]);const d=async()=>{await t.mutateAsync({scope_type:"GLOBAL",scope_code:"ALL",enabled:r,cc_emails:a||null,subject_templates:s,body_templates:c})},f=[{key:"assigned",label:"Al asignar tarea"},{key:"status_change",label:"Cambio de estado"},{key:"overdue",label:"Tarea vencida"},{key:"evaluated_ok",label:"Tarea aceptada"},{key:"evaluated_reject",label:"Tarea rechazada"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsx(gn,{title:"Configuracin",description:"Ajustes de correo y notificaciones para tareas"}),l.jsxs("div",{className:"card p-6 max-w-3xl",children:[l.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[l.jsx(me,{name:"send",size:18})," Configuracin de Correos"]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-slate-800",children:"Notificaciones por correo"}),l.jsx("div",{className:"text-sm text-slate-500",children:"Enviar correos al asignar, cambiar estado o evaluar tareas"})]}),l.jsx("button",{onClick:()=>n(!r),className:`relative w-12 h-6 rounded-full transition-colors ${r?"bg-brand-600":"bg-slate-300"}`,children:l.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${r?"left-7":"left-1"}`})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Correos en copia (CC)"}),l.jsx("input",{type:"text",className:"input",value:a,onChange:p=>i(p.target.value),placeholder:"correo1@ejemplo.cl, correo2@ejemplo.cl"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Separar mltiples correos con coma"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-medium text-slate-700",children:"Plantillas de correo"}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Variables: ","{{title}}, {{description}}, {{assigned_name}}, {{status}}, {{priority}}, {{due_date}}, {{creator}}, {{reason}}"]}),f.map(({key:p,label:h})=>l.jsxs("div",{className:"border rounded-lg p-4",children:[l.jsx("div",{className:"font-medium text-sm text-slate-700 mb-2",children:h}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("input",{type:"text",className:"input text-sm",placeholder:"Asunto",value:s[p],onChange:g=>o(m=>({...m,[p]:g.target.value}))}),l.jsx("textarea",{className:"input min-h-[80px] text-sm font-mono",placeholder:"Cuerpo del correo",value:c[p],onChange:g=>u(m=>({...m,[p]:g.target.value}))})]})]},p))]}),l.jsx("div",{className:"flex justify-end pt-4 border-t",children:l.jsx("button",{onClick:d,disabled:t.isPending,className:"btn btn-primary",children:t.isPending?"Guardando...":"Guardar Configuracin"})})]})]})]})},Ece=({mode:e,taskTitle:t,onConfirm:r,onCancel:n,isLoading:a})=>{const[i,s]=F.useState(""),o=e==="accept";return l.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:n}),l.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 animate-scale-in",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:`p-3 rounded-full ${o?"bg-green-100":"bg-red-100"}`,children:l.jsx(me,{name:o?"check-circle":"x-circle",size:24,className:o?"text-green-600":"text-red-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800",children:o?"Aceptar Tarea":"Rechazar Tarea"}),l.jsx("p",{className:"text-sm text-slate-500",children:t})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"label",children:o?"Nota de evaluacin (opcional)":"Motivo de rechazo"}),l.jsx("textarea",{className:"input min-h-[100px] resize-none",value:i,onChange:c=>s(c.target.value),placeholder:o?"Comentario sobre la tarea completada...":"Indique por qu se rechaza la tarea...",required:!o})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",children:"Cancelar"}),l.jsx("button",{onClick:()=>r(o?i:void 0,o?void 0:i),disabled:!o&&!i.trim()||a,className:`btn ${o?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"} text-white`,children:a?"Procesando...":o?"Aceptar":"Rechazar"})]})]})]})},Tce=({taskId:e,onClose:t})=>{const r=jr(ee=>ee.session),n=(r==null?void 0:r.supervisorName)??"",a=vb(n),[i,s]=F.useState("info"),[o,c]=F.useState(""),[u,d]=F.useState(null),[f,p]=F.useState({url:"",label:""}),h=rce(e),g=oce(e),m=cce(e),x=lce(),y=uce(),v=dce(),b=fce(),S=y9(),_=sce(),A=h.data,j=A?b9(n,A.assigned_to_name):!1,E=A?w9(A.status,a,j):[],T=async ee=>{await S.mutateAsync({id:e,status:ee})},L=async()=>{o.trim()&&(await x.mutateAsync({taskId:e,body:o}),c(""))},O=async ee=>{var oe;const J=(oe=ee.target.files)==null?void 0:oe[0];J&&(await y.mutateAsync({taskId:e,file:J}),ee.target.value="")},I=async()=>{f.url.trim()&&(await v.mutateAsync({taskId:e,url:f.url,label:f.label||f.url}),p({url:"",label:""}))},D=async ee=>{const J=await Zle(ee);window.open(J,"_blank")},z=async(ee,J,oe)=>{await _.mutateAsync({id:e,accepted:ee,note:J,reason:oe}),d(null)};if(h.isLoading)return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:l.jsx(kn,{label:"Cargando tarea..."})});if(!A)return null;const Y=ee=>new Date(ee).toLocaleString("es-CL"),se=[{id:"info",label:"Info",icon:"info"},{id:"comments",label:"Comentarios",icon:"clipboard"},{id:"attachments",label:"Adjuntos",icon:"file"}];return l.jsxs("div",{className:"fixed inset-0 z-50 flex bg-black/50 backdrop-blur-sm",children:[l.jsxs("div",{className:"w-full h-full bg-white flex flex-col lg:flex-row animate-scale-in",children:[l.jsxs("div",{className:"lg:w-64 bg-slate-50 border-b lg:border-b-0 lg:border-r border-slate-200 p-4 flex lg:flex-col gap-2 overflow-x-auto lg:overflow-visible shrink-0",children:[se.map(ee=>l.jsxs("button",{onClick:()=>s(ee.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all whitespace-nowrap ${i===ee.id?"bg-brand-600 text-white":"text-slate-600 hover:bg-slate-200"}`,children:[l.jsx(me,{name:ee.icon,size:18}),l.jsx("span",{className:"hidden lg:inline",children:ee.label})]},ee.id)),l.jsxs("button",{onClick:t,className:"mt-auto flex items-center gap-2 px-4 py-2 rounded-lg text-slate-600 hover:bg-slate-200",children:[l.jsx(me,{name:"x",size:18})," ",l.jsx("span",{className:"hidden lg:inline",children:"Cerrar"})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[l.jsxs("div",{className:"mb-6 pb-4 border-b",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:A.title}),l.jsx("p",{className:"text-slate-500 mt-1",children:A.description||"Sin descripcin"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${zg(A.priority)}`,children:A.priority}),l.jsx("span",{className:`px-3 py-1 rounded-full text-sm border ${F3(A.status)}`,children:A.status})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[E.filter(ee=>ee!==A.status&&!["EVALUADO","RECHAZADO"].includes(ee)).map(ee=>l.jsxs("button",{onClick:()=>T(ee),className:"btn btn-secondary text-sm",disabled:S.isPending,children:["Cambiar a ",ee]},ee)),a&&A.status==="TERMINADO"&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>d("accept"),className:"btn bg-green-600 hover:bg-green-700 text-white text-sm",children:[l.jsx(me,{name:"check-circle",size:16})," Aceptar"]}),l.jsxs("button",{onClick:()=>d("reject"),className:"btn bg-red-600 hover:bg-red-700 text-white text-sm",children:[l.jsx(me,{name:"x-circle",size:16})," Rechazar"]})]})]})]}),i==="info"&&l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm text-slate-500",children:"Terminal"}),l.jsx("div",{className:"font-medium",children:ur(A.terminal_code)})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm text-slate-500",children:"Asignado a"}),l.jsx("div",{className:"font-medium",children:A.assigned_to_name})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm text-slate-500",children:"Vencimiento"}),l.jsx("div",{className:"font-medium",children:A.due_at?Y(A.due_at):"Sin fecha"})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm text-slate-500",children:"Creado por"}),l.jsx("div",{className:"font-medium",children:A.created_by_supervisor})]}),A.evaluated_by&&l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg md:col-span-2",children:[l.jsx("div",{className:"text-sm text-slate-500",children:"Evaluado por"}),l.jsxs("div",{className:"font-medium",children:[A.evaluated_by," - ",A.evaluated_at?Y(A.evaluated_at):""]}),A.evaluation_note&&l.jsx("div",{className:"text-sm text-slate-600 mt-1",children:A.evaluation_note})]}),A.rejected_reason&&l.jsxs("div",{className:"bg-red-50 p-4 rounded-lg md:col-span-2 border border-red-200",children:[l.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Motivo de rechazo"}),l.jsx("div",{className:"text-red-700 mt-1",children:A.rejected_reason})]})]}),i==="comments"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("textarea",{className:"input flex-1 min-h-[80px]",value:o,onChange:ee=>c(ee.target.value),placeholder:"Agregar comentario o actualizacin..."}),l.jsx("button",{onClick:L,disabled:!o.trim()||x.isPending,className:"btn btn-primary self-end",children:l.jsx(me,{name:"send",size:16})})]}),l.jsx("div",{className:"space-y-3",children:(g.data||[]).map(ee=>l.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"font-medium text-slate-700",children:ee.author_name}),l.jsx("span",{className:"text-slate-400",children:new Date(ee.created_at).toLocaleString("es-CL")})]}),l.jsx("div",{className:"mt-2 text-slate-600",children:ee.body})]},ee.id))})]}),i==="attachments"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:l.jsxs("label",{className:"btn btn-secondary cursor-pointer inline-flex items-center gap-2",children:[l.jsx(me,{name:"upload",size:16})," Subir archivo",l.jsx("input",{type:"file",className:"hidden",accept:".pdf,.png,.jpg,.jpeg,.xlsx",onChange:O})]})}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 p-3 bg-slate-50 rounded-lg",children:[l.jsx("input",{type:"url",className:"input flex-1",placeholder:"URL",value:f.url,onChange:ee=>p(J=>({...J,url:ee.target.value}))}),l.jsx("input",{type:"text",className:"input flex-1",placeholder:"Etiqueta (opcional)",value:f.label,onChange:ee=>p(J=>({...J,label:ee.target.value}))}),l.jsx("button",{onClick:I,disabled:!f.url,className:"btn btn-secondary shrink-0",children:l.jsx(me,{name:"plus",size:16})})]}),l.jsx("div",{className:"space-y-2",children:(m.data||[]).map(ee=>l.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(me,{name:ee.type==="URL"?"activity":"file",size:20,className:"text-slate-400"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-sm",children:ee.file_name}),ee.size_bytes&&l.jsxs("div",{className:"text-xs text-slate-500",children:[(ee.size_bytes/1024).toFixed(1)," KB"]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[ee.type==="FILE"&&ee.storage_path&&l.jsx("button",{onClick:()=>D(ee.storage_path),className:"btn btn-ghost btn-icon",children:l.jsx(me,{name:"eye",size:16})}),ee.type==="URL"&&ee.url&&l.jsx("a",{href:ee.url,target:"_blank",rel:"noopener noreferrer",className:"btn btn-ghost btn-icon",children:l.jsx(me,{name:"eye",size:16})}),l.jsx("button",{onClick:()=>b.mutate({id:ee.id,storagePath:ee.storage_path,taskId:e}),className:"btn btn-ghost btn-icon text-red-500",children:l.jsx(me,{name:"trash",size:16})})]})]},ee.id))})]})]})]}),u&&l.jsx(Ece,{mode:u,taskTitle:A.title,onConfirm:(ee,J)=>z(u==="accept",ee,J),onCancel:()=>d(null),isLoading:_.isPending})]})},Cce=[{id:"kanban",label:"Tablero",icon:"layers"},{id:"lista",label:"Lista",icon:"clipboard"},{id:"calendario",label:"Calendario",icon:"calendar"},{id:"reportes",label:"Reportes",icon:"bar-chart"},{id:"config",label:"Configuracin",icon:"settings"}],kce=()=>{const[e,t]=F.useState("kanban"),[r,n]=F.useState(null),a=o=>{n(o)},i=()=>{n(null)},s=()=>{switch(e){case"kanban":return l.jsx(bce,{onOpenTask:a});case"lista":return l.jsx(wce,{onOpenTask:a});case"calendario":return l.jsx(Nce,{onOpenTask:a});case"reportes":return l.jsx(jce,{});case"config":return l.jsx(Ace,{});default:return null}};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 border-b border-slate-200 pb-4",children:l.jsx("div",{className:"flex flex-wrap gap-2",children:Cce.map(o=>l.jsxs("button",{onClick:()=>t(o.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${e===o.id?"bg-brand-600 text-white shadow-md":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[l.jsx(me,{name:o.icon,size:18}),l.jsx("span",{className:"hidden sm:inline",children:o.label})]},o.id))})}),s(),r&&l.jsx(Tce,{taskId:r,onClose:i})]})},Oc=({columns:e,rows:t,emptyMessage:r="Sin resultados"})=>t.length?l.jsx("div",{className:"table-container overflow-x-auto",children:l.jsxs("table",{className:"table",children:[l.jsx("thead",{className:"table-header",children:l.jsx("tr",{children:e.map(n=>l.jsx("th",{scope:"col",className:"table-header-cell",children:n.header},n.key))})}),l.jsx("tbody",{className:"table-body",children:t.map((n,a)=>l.jsx("tr",{className:"table-row",children:e.map(i=>l.jsx("td",{className:"table-cell",children:i.render?i.render(n):n[i.key]},i.key))},a))})]})}):l.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50/50 px-6 py-12 text-center",children:[l.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-slate-100 mb-3",children:l.jsx("svg",{className:"h-6 w-6 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),l.jsx("p",{className:"text-sm font-medium text-slate-600",children:r}),l.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"No hay datos para mostrar en este momento"})]}),Pc=({label:e="Sin datos",description:t})=>l.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50/50 px-6 py-12 text-center",children:[l.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-slate-100 mb-4",children:l.jsx("svg",{className:"h-7 w-7 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),l.jsx("p",{className:"text-sm font-semibold text-slate-700",children:e}),t&&l.jsx("p",{className:"mt-1 text-xs text-slate-500 max-w-xs",children:t})]}),iw=(e,t)=>({list:async({terminalContext:r,filters:n,scope:a})=>{const i=yY(e,r);return a==="all"?i:t?i.filter(s=>t(s,n)):i}}),Oce=[{id:"i-1",titulo:"Actualizacin de protocolos",fecha:"2023-12-02",enviadoPor:"Equipo Seguridad",alcance:"todos",terminal:"EL_ROBLE"},{id:"i-2",titulo:"Corte programado",fecha:"2023-12-03",enviadoPor:"Operaciones",alcance:"terminal",terminal:"LA_REINA"},{id:"i-3",titulo:"Campaa de seguridad",fecha:"2023-12-01",enviadoPor:"Prevencin",alcance:"segmentado",terminal:"EL_SALTO"}],MO=iw(Oce,(e,t)=>t!=null&&t.alcance&&t.alcance!=="todos"?e.alcance===t.alcance:!0),Pce=()=>{var L;const e=Vt(O=>O.context),t=Vt(O=>O.setContext),[r,n]=F.useState({alcance:"todos"}),[a,i]=F.useState("todos"),[s,o]=F.useState("EL_ROBLE"),[c,u]=F.useState(""),[d,f]=F.useState(""),[p,h]=F.useState(""),[g,m]=F.useState(!1),[x,y]=F.useState(""),[v,b]=F.useState(""),S=zt({queryKey:["informativos",e,r],queryFn:()=>MO.list({terminalContext:e,filters:r,scope:"view"})}),_=F.useMemo(()=>[{key:"titulo",header:"Ttulo"},{key:"enviadoPor",header:"Enviado por"},{key:"alcance",header:"Alcance",render:O=>l.jsx("span",{className:"badge",children:O.alcance}),value:O=>O.alcance},{key:"fecha",header:"Fecha",render:O=>Ma(O.fecha),value:O=>Ma(O.fecha)},{key:"terminal",header:"Terminal",render:O=>ur(O.terminal),value:O=>ur(O.terminal)}],[]),A=_.map(O=>({key:O.key,header:O.header,value:I=>O.value?O.value(I):I[O.key]})),j=()=>{S.data&&xr({filename:"informativos_vista",sheetName:"Informativos",rows:S.data,columns:A})},E=async()=>{const O=await MO.list({terminalContext:e,scope:"all"});xr({filename:"informativos_completo",sheetName:"Informativos",rows:O,columns:A})},T=async()=>{b(""),m(!0);try{const O=await xl.sendEmail({audience:a,terminalCodes:a==="por_terminal"?[s]:void 0,manualRecipients:a==="manual"?c.split(",").map(I=>I.trim()).filter(Boolean):void 0,subject:d,body:p});y(`Correo enviado (${O.messageId})`),f(""),h(""),u("")}catch(O){b(O.message)}finally{m(!1)}};return l.jsxs("div",{className:"space-y-4",children:[l.jsx(gn,{title:"Informativos",description:"Comunicaciones internas con opciones de envo por terminal.",actions:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"btn btn-primary",children:"Nuevo informativo"}),l.jsx(Na,{onExportView:j,onExportAll:E})]})}),l.jsx(ss,{terminalContext:e,onTerminalChange:t,children:l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Alcance"}),l.jsxs("select",{className:"input",value:r.alcance,onChange:O=>n({alcance:O.target.value}),children:[l.jsx("option",{value:"todos",children:"Todos"}),l.jsx("option",{value:"terminal",children:"Por terminal"}),l.jsx("option",{value:"segmentado",children:"Segmentado"})]})]})}),S.isLoading&&l.jsx(kn,{}),S.isError&&l.jsx(Fa,{onRetry:S.refetch}),!S.isLoading&&!S.isError&&l.jsxs(l.Fragment,{children:[!((L=S.data)!=null&&L.length)&&l.jsx(Pc,{description:"No hay informativos con los filtros actuales."}),S.data&&S.data.length>0&&l.jsx(Oc,{columns:_,rows:S.data})]}),l.jsxs("div",{className:"card p-4",children:[l.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-base font-semibold text-slate-900",children:"Enviar correo interno"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Mdulo preparado para conectar a Edge Function."})]}),l.jsxs("div",{className:"flex flex-col items-end gap-1 text-right",children:[x&&l.jsx("span",{className:"badge",children:x}),v&&l.jsx("span",{className:"text-xs font-semibold text-red-600",children:v})]})]}),l.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"label",children:"Destinatarios"}),l.jsxs("select",{className:"input",value:a,onChange:O=>i(O.target.value),children:[l.jsx("option",{value:"todos",children:"Todos"}),l.jsx("option",{value:"por_terminal",children:"Por terminal"}),l.jsx("option",{value:"manual",children:"Lista manual"})]})]}),a==="por_terminal"&&l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"label",children:"Terminal objetivo"}),l.jsx("select",{className:"input",value:s,onChange:O=>o(O.target.value),children:ns.map(O=>l.jsx("option",{value:O.value,children:O.label},O.value))})]}),a==="manual"&&l.jsxs("div",{className:"space-y-1 md:col-span-2",children:[l.jsx("label",{className:"label",children:"Correos (separados por coma)"}),l.jsx("input",{className:"input",value:c,onChange:O=>u(O.target.value),placeholder:"correo1@dominio.com, correo2@dominio.com"})]}),l.jsxs("div",{className:"md:col-span-3 grid gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"label",children:"Asunto"}),l.jsx("input",{className:"input",value:d,onChange:O=>f(O.target.value)})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"label",children:"Mensaje"}),l.jsx("textarea",{className:"input min-h-[120px]",value:p,onChange:O=>h(O.target.value),placeholder:"Contenido del correo"})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{className:"btn btn-primary",onClick:T,disabled:g||!d||!p,children:g?"Enviando...":"Enviar (mock)"})})]})]})]})]})},Lce=["ISAAC AVILA","CLAUDIO ARRIAGADA","CRISTIAN LURASCHI"],Ice={EL_ROBLE:"CRISTIAN LURASCHI",LA_REINA:"CRISTIAN LURASCHI"},td=e=>e.trim().replace(/\s+/g," ").toUpperCase(),Wv=e=>{const t=td(e);return Lce.includes(t)},Rce=e=>Ice[e]??"",Vv=({data:e,isLoading:t})=>{if(t)return l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[...Array(4)].map((n,a)=>l.jsxs("div",{className:"card p-4 animate-pulse",children:[l.jsx("div",{className:"h-4 bg-slate-200 rounded w-24 mb-2"}),l.jsx("div",{className:"h-8 bg-slate-200 rounded w-12"})]},a))});if(!e)return null;const r=[{label:"Pendientes Hoy",value:e.pendingToday,icon:"clock",bgClass:"bg-warning-50 border-warning-200",textClass:"text-warning-700",iconClass:"text-warning-500"},{label:"Pendientes Total",value:e.pendingTotal,icon:"inbox",bgClass:"bg-orange-50 border-orange-200",textClass:"text-orange-700",iconClass:"text-orange-500"},{label:"Autorizados (30d)",value:e.authorizedRange,icon:"check-circle",bgClass:"bg-success-50 border-success-200",textClass:"text-success-700",iconClass:"text-success-500"},{label:"Rechazados (30d)",value:e.rejectedRange,icon:"x",bgClass:"bg-danger-50 border-danger-200",textClass:"text-danger-700",iconClass:"text-danger-500"}];return l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:r.map(n=>l.jsxs("div",{className:`card p-4 ${n.bgClass}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(me,{name:n.icon,size:18,className:n.iconClass}),l.jsx("span",{className:"text-xs font-semibold text-slate-600 uppercase",children:n.label})]}),l.jsx("p",{className:`text-2xl font-bold ${n.textClass}`,children:n.value})]},n.label))})},yl=({mode:e,itemName:t,onConfirm:r,onCancel:n,isLoading:a})=>{const[i,s]=F.useState(""),o=u=>{u.preventDefault(),!(e==="reject"&&!i.trim())&&r(i.trim()||void 0)},c=e==="authorize";return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:n}),l.jsxs("div",{className:"relative w-full max-w-md card p-6 animate-scale-in",children:[l.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[l.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-full ${c?"bg-success-100":"bg-danger-100"}`,children:l.jsx(me,{name:c?"check-circle":"x",size:24,className:c?"text-success-600":"text-danger-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900",children:c?"Autorizar Registro":"Rechazar Registro"}),l.jsx("p",{className:"text-sm text-slate-600",children:c?`Confirmas la autorizacin de "${t}"?`:`Confirmas el rechazo de "${t}"?`})]})]}),l.jsxs("form",{onSubmit:o,children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"label",children:c?"Comentario (opcional)":"Motivo del rechazo *"}),l.jsx("textarea",{className:"input min-h-[80px]",value:i,onChange:u=>s(u.target.value),placeholder:c?"Agregar comentario...":"Describe el motivo del rechazo...",required:!c})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",disabled:a,children:"Cancelar"}),l.jsx("button",{type:"submit",className:`btn ${c?"btn-success":"btn-danger"}`,disabled:a||!c&&!i.trim(),children:a?l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Procesando..."]}):c?"Autorizar":"Rechazar"})]})]})]})]})},sw=({value:e,onChange:t,onStaffFound:r,disabled:n})=>{const[a,i]=F.useState(""),[s,o]=F.useState(!1),[c,u]=F.useState(null),[d,f]=F.useState(!1);F.useEffect(()=>{e&&i(Yn(e))},[e]);const p=m=>{if(i(m),u(null),f(!1),uj(m).valid){const y=ed(m);t(y),h(y)}else t(""),r(null)},h=async m=>{o(!0);try{const x=await _oe(m);x?(f(!0),r(x)):(u("RUT no encontrado en Personal"),r(null))}catch{u("Error al buscar RUT"),r(null)}finally{o(!1)}},g=()=>{e&&i(Yn(e))};return l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"RUT"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",className:`input pr-10 ${c?"border-danger-500":d?"border-success-500":""}`,value:a,onChange:m=>p(m.target.value),onBlur:g,placeholder:"12.345.678-9",disabled:n}),l.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:s?l.jsxs("svg",{className:"animate-spin h-4 w-4 text-slate-400",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):d?l.jsx(me,{name:"check-circle",size:18,className:"text-success-500"}):c?l.jsx(me,{name:"x",size:18,className:"text-danger-500"}):l.jsx(me,{name:"search",size:18,className:"text-slate-400"})})]}),c&&l.jsx("p",{className:"mt-1 text-xs text-danger-600",children:c}),d&&l.jsx("p",{className:"mt-1 text-xs text-success-600",children:"Datos cargados desde Personal"})]})},Dce=({initialData:e,supervisorName:t,onSubmit:r,onCancel:n,isLoading:a})=>{const[i,s]=F.useState({rut:"",nombre:"",area:"Logstica",cargo:"",jefe_terminal:"",terminal_code:"EL_ROBLE",cabezal:"",incident_state:"",schedule_in_out:"",date:new Date().toISOString().split("T")[0],time_range:"",observations:"",informed_by:t,...e});F.useEffect(()=>{const u=Rce(i.terminal_code);u&&s(d=>({...d,jefe_terminal:u}))},[i.terminal_code]);const o=u=>{u&&s(d=>({...d,nombre:u.nombre,cargo:u.cargo,terminal_code:u.terminal_code}))},c=u=>{u.preventDefault(),r(i)};return l.jsxs("form",{onSubmit:c,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(sw,{value:i.rut,onChange:u=>s(d=>({...d,rut:u})),onStaffFound:o,disabled:!!(e!=null&&e.rut)}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Nombre"}),l.jsx("input",{type:"text",className:"input",value:i.nombre,onChange:u=>s(d=>({...d,nombre:u.target.value})),required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"rea"}),l.jsx("input",{type:"text",className:"input",value:i.area,onChange:u=>s(d=>({...d,area:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Cargo"}),l.jsx("input",{type:"text",className:"input",value:i.cargo,onChange:u=>s(d=>({...d,cargo:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Terminal"}),l.jsx("select",{className:"input",value:i.terminal_code,onChange:u=>s(d=>({...d,terminal_code:u.target.value})),required:!0,children:ns.map(u=>l.jsx("option",{value:u.value,children:u.label},u.value))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Jefe de Terminal"}),l.jsx("input",{type:"text",className:"input",value:i.jefe_terminal,onChange:u=>s(d=>({...d,jefe_terminal:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Cabezal"}),l.jsx("input",{type:"text",className:"input",value:i.cabezal,onChange:u=>s(d=>({...d,cabezal:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Estado (Incidente)"}),l.jsx("input",{type:"text",className:"input",value:i.incident_state,onChange:u=>s(d=>({...d,incident_state:u.target.value}))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Horario Entrada/Salida"}),l.jsx("input",{type:"text",className:"input",value:i.schedule_in_out,onChange:u=>s(d=>({...d,schedule_in_out:u.target.value})),placeholder:"08:00-18:00"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha"}),l.jsx("input",{type:"date",className:"input",value:i.date,onChange:u=>s(d=>({...d,date:u.target.value})),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Horario (Rango)"}),l.jsx("input",{type:"text",className:"input",value:i.time_range,onChange:u=>s(d=>({...d,time_range:u.target.value})),placeholder:"10:00-14:00"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Observaciones"}),l.jsx("textarea",{className:"input min-h-[80px]",value:i.observations,onChange:u=>s(d=>({...d,observations:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Informado Por"}),l.jsx("input",{type:"text",className:"input",value:i.informed_by,onChange:u=>s(d=>({...d,informed_by:u.target.value}))})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[l.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",disabled:a,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?"Guardando...":e?"Guardar Cambios":"Crear Registro"})]})]})},$3=async e=>{const{data:t,error:r}=await Ee.from("app_configuration").select("value").eq("key",e).single();return r?(r.code==="PGRST116"||console.error(`Error fetching config ${e}:`,r),null):t.value},Mce=async(e,t,r)=>{const{error:n}=await Ee.from("app_configuration").upsert({key:e,value:t,description:r},{onConflict:"key"});if(n)throw console.error(`Error updating config ${e}:`,n),n},Fce=async(e,t)=>{if(!Zt())return[];const r=Ui(e);let n=Ee.from("attendance_no_marcaciones").select("*").in("terminal_code",r).order("date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}t!=null&&t.date_from&&(n=n.gte("date",t.date_from)),t!=null&&t.date_to&&(n=n.lte("date",t.date_to));const{data:a,error:i}=await n;if(i)throw i;return a||[]},$ce=async(e,t)=>{const{data:r,error:n}=await Ee.from("attendance_no_marcaciones").insert({...e,created_by_supervisor:td(t)}).select().single();if(n)throw Pi("Error al crear registro","No se pudo guardar el registro de No Marcacin"),n;try{await Gv("No Marcaciones",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.date,createdBy:t,details:{rea:e.area||"",Cargo:e.cargo||"","Jefe Terminal":e.jefe_terminal||"",Observaciones:e.observations||""}}),Fi("Registro creado exitosamente",`No Marcacin para ${e.nombre} guardado y correo enviado`,t)}catch{Fi("Registro creado",`No Marcacin para ${e.nombre} guardado (correo no enviado)`,t)}return r},Bce=async(e,t)=>{const{data:r,error:n}=await Ee.from("attendance_no_marcaciones").update(t).eq("id",e).select().single();if(n)throw n;return r},Uce=async(e,t)=>{if(!Zt())return[];const r=Ui(e);let n=Ee.from("attendance_sin_credenciales").select("*").in("terminal_code",r).order("date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}const{data:a,error:i}=await n;if(i)throw i;return a||[]},zce=async(e,t)=>{const{data:r,error:n}=await Ee.from("attendance_sin_credenciales").insert({...e,created_by_supervisor:td(t)}).select().single();if(n)throw Pi("Error al crear registro","No se pudo guardar el registro de Sin Credenciales"),n;try{await Gv("Sin Credenciales",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.date,createdBy:t,details:{Cabezal:e.cabezal||"",Horario:`${e.start_time||""} - ${e.end_time||""}`,Cargo:e.cargo||"","Supervisor Autoriza":e.supervisor_autoriza||""}}),Fi("Registro creado exitosamente",`Sin Credenciales para ${e.nombre} guardado y correo enviado`,t)}catch{Fi("Registro creado",`Sin Credenciales para ${e.nombre} guardado (correo no enviado)`,t)}return r},qce=async(e,t)=>{const{data:r,error:n}=await Ee.from("attendance_sin_credenciales").update(t).eq("id",e).select().single();if(n)throw n;return r},Hce=async(e,t)=>{if(!Zt())return[];const r=Ui(e);let n=Ee.from("attendance_cambios_dia").select("*").in("terminal_code",r).order("date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}const{data:a,error:i}=await n;if(i)throw i;return a||[]},Wce=async(e,t)=>{let r=null;if(e.document){const u=e.document.name.split(".").pop(),d=`cambios-dia/${Date.now()}.${u}`,{error:f}=await Ee.storage.from("attendance-docs").upload(d,e.document);if(f)throw console.error("Storage Upload Error Detail:",f),Pi("Error al subir documento","Verifica que el archivo sea imagen o PDF y menor a 5MB"),new Error(`Error al subir documento: ${f.message}`);r=d}const{document:n,...a}=e,i={...a,document_path:r,created_by_supervisor:td(t)};["day_off_date","day_on_date","prog_start","prog_end","reprogram_start","reprogram_end","day_off_start","day_off_end","day_on_start","day_on_end"].forEach(u=>{i[u]===""&&(i[u]=null)});const{data:o,error:c}=await Ee.from("attendance_cambios_dia").insert(i).select().single();if(c)throw Pi("Error al crear registro","No se pudo guardar el registro de Cambio de Da"),c;try{let u="No adjunto";if(r){const{data:d}=Ee.storage.from("attendance-docs").getPublicUrl(r);u=`<a href="${d.publicUrl}" target="_blank" style="color: #2563eb; text-decoration: underline; font-weight: 700;">Ver Documento Adjunto</a>`}await Gv("Cambios de Da",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.date,createdBy:t,details:{"Jornada Programada":`${e.prog_start||""} - ${e.prog_end||""}`,"Da No Trabaja":e.day_off_date||"","Da Trabaja":e.day_on_date||"",Documento:u}}),Fi("Registro creado exitosamente",`Cambio de Da para ${e.nombre} guardado y correo enviado`,t)}catch{Fi("Registro creado",`Cambio de Da para ${e.nombre} guardado (correo no enviado)`,t)}return o},Vce=async(e,t)=>{const{document:r,...n}=t,a={...n};["day_off_date","day_on_date","prog_start","prog_end","reprogram_start","reprogram_end","day_off_start","day_off_end","day_on_start","day_on_end"].forEach(c=>{a[c]===""&&(a[c]=null)});const{data:s,error:o}=await Ee.from("attendance_cambios_dia").update(a).eq("id",e).select().single();if(o)throw o;return s},Gce=async e=>{const{data:t,error:r}=await Ee.storage.from("attendance-docs").createSignedUrl(e,3600);if(r)throw r;return t.signedUrl},Kce=async(e,t)=>{if(!Zt())return[];const r=Ui(e);let n=Ee.from("attendance_autorizaciones").select("*").in("terminal_code",r).order("authorization_date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}const{data:a,error:i}=await n;if(i)throw i;return a||[]},Xce=async(e,t)=>{const{data:r,error:n}=await Ee.from("attendance_autorizaciones").insert({...e,created_by_supervisor:td(t)}).select().single();if(n)throw Pi("Error al crear registro","No se pudo guardar la autorizacin"),n;try{await Gv("Autorizaciones",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.authorization_date,createdBy:t,details:{Tipo:e.entry_or_exit==="ENTRADA"?"Llegada Tarda":"Retiro Anticipado",Horario:e.horario||"",Turno:e.turno||"",Motivo:e.motivo||""}}),Fi("Registro creado exitosamente",`Autorizacin para ${e.nombre} guardada y correo enviado`,t)}catch{Fi("Registro creado",`Autorizacin para ${e.nombre} guardada (correo no enviado)`,t)}return r},Yce=async(e,t)=>{const{data:r,error:n}=await Ee.from("attendance_autorizaciones").update(t).eq("id",e).select().single();if(n)throw n;return r},Jce=async(e,t,r)=>{const{error:n}=await Ee.from(e).update({auth_status:"AUTORIZADO",authorized_by:td(r),authorized_at:new Date().toISOString()}).eq("id",t);if(n)throw n},Qce=async(e,t,r,n)=>{const{error:a}=await Ee.from(e).update({auth_status:"RECHAZADO",authorized_by:td(r),authorized_at:new Date().toISOString(),rejection_reason:n}).eq("id",t);if(a)throw a},Zce=async(e,t,r="date")=>{if(!Zt())return{pendingToday:0,pendingTotal:0,authorizedRange:0,rejectedRange:0};const n=Ui(t),a=new Date().toISOString().split("T")[0],{count:i}=await Ee.from(e).select("*",{count:"exact",head:!0}).in("terminal_code",n).eq("auth_status","PENDIENTE").eq(r,a),{count:s}=await Ee.from(e).select("*",{count:"exact",head:!0}).in("terminal_code",n).eq("auth_status","PENDIENTE"),o=new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],{count:c}=await Ee.from(e).select("*",{count:"exact",head:!0}).in("terminal_code",n).eq("auth_status","AUTORIZADO").gte(r,o),{count:u}=await Ee.from(e).select("*",{count:"exact",head:!0}).in("terminal_code",n).eq("auth_status","RECHAZADO").gte(r,o);return{pendingToday:i??0,pendingTotal:s??0,authorizedRange:c??0,rejectedRange:u??0}},eue=(e,t)=>{const r=Ee.channel("attendance-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_no_marcaciones"},()=>e("attendance_no_marcaciones")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_no_marcaciones"},()=>t("attendance_no_marcaciones")).on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_sin_credenciales"},()=>e("attendance_sin_credenciales")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_sin_credenciales"},()=>t("attendance_sin_credenciales")).on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_cambios_dia"},()=>e("attendance_cambios_dia")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_cambios_dia"},()=>t("attendance_cambios_dia")).on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_autorizaciones"},()=>e("attendance_autorizaciones")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_autorizaciones"},()=>t("attendance_autorizaciones")).on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_vacaciones"},()=>e("attendance_vacaciones")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_vacaciones"},()=>t("attendance_vacaciones")).subscribe();return()=>{Ee.removeChannel(r)}},B3=(e,t)=>{const r=new Date(e+"T12:00:00"),n=new Date(t+"T12:00:00");let a=0;const i=new Date(r);for(;i<=n;){const s=i.getDay();s!==0&&s!==6&&a++,i.setDate(i.getDate()+1)}return a},U3=(e,t)=>{const r=new Date(e+"T12:00:00"),n=new Date(t+"T12:00:00"),a=Math.abs(n.getTime()-r.getTime());return Math.ceil(a/(1e3*60*60*24))+1},tue=async(e,t,r)=>{const{count:n,error:a}=await Ee.from("staff").select("*",{count:"exact",head:!0}).eq("cargo",e).eq("terminal_code",t).eq("turno",r).eq("status","ACTIVO");if(a)throw a;return n??0},_9=async(e,t,r,n,a,i)=>{let s=Ee.from("attendance_vacaciones").select("*").eq("cargo",e).eq("terminal_code",t).eq("turno",r).in("auth_status",["PENDIENTE","AUTORIZADO"]).lte("start_date",a).gte("end_date",n);i&&(s=s.neq("rut",i));const{data:o,error:c}=await s;if(c)throw c;const u=await tue(e,t,r),d=new Set((o==null?void 0:o.map(h=>h.rut))||[]).size,f=u-d-1;let p=0;if(o&&o.length>0){const h=new Date(n),g=new Date(a);for(const m of o){const x=new Date(m.start_date),y=new Date(m.end_date),v=new Date(Math.max(h.getTime(),x.getTime())),b=new Date(Math.min(g.getTime(),y.getTime())),S=Math.ceil((b.getTime()-v.getTime())/(1e3*60*60*24))+1;S>p&&(p=S)}}return{hasConflict:((o==null?void 0:o.length)??0)>0,conflictingVacations:(o||[]).map(h=>({nombre:h.nombre,cargo:h.cargo,turno:h.turno,start_date:h.start_date,end_date:h.end_date})),totalStaffCount:u,availableStaffCount:Math.max(0,f),overlappingDays:p}},rue=async(e,t)=>{if(!Zt())return[];const r=Ui(e);let n=Ee.from("attendance_vacaciones").select("*").in("terminal_code",r).order("start_date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}t!=null&&t.date_from&&(n=n.gte("start_date",t.date_from)),t!=null&&t.date_to&&(n=n.lte("end_date",t.date_to));const{data:a,error:i}=await n;if(i)throw i;return a||[]},nue=async(e,t)=>{const r=U3(e.start_date,e.end_date),n=B3(e.start_date,e.end_date),a=await _9(e.cargo,e.terminal_code,e.turno,e.start_date,e.end_date),i=a.hasConflict?`${a.conflictingVacations.length} persona(s) en misma posicin en vacaciones. Disponibles: ${a.availableStaffCount}/${a.totalStaffCount}`:null,{data:s,error:o}=await Ee.from("attendance_vacaciones").insert({rut:e.rut,nombre:e.nombre,cargo:e.cargo,terminal_code:e.terminal_code,turno:e.turno,start_date:e.start_date,end_date:e.end_date,return_date:e.return_date,calendar_days:r,business_days:n,has_conflict:a.hasConflict,conflict_authorized:e.conflict_authorized,conflict_details:i,created_by_supervisor:td(t)}).select().single();if(o)throw Pi("Error al crear registro","No se pudo guardar la solicitud de vacaciones"),o;try{const c=a.hasConflict?`<strong style="color: #dc2626;">ADVERTENCIA:</strong> ${i}`:"Sin conflictos detectados";await Gv("Vacaciones",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.start_date,createdBy:t,details:{"Fecha Inicio":e.start_date,"Fecha Trmino":e.end_date,"Fecha Vuelta":e.return_date,"Das Calendario":r.toString(),"Das a Descontar":n.toString(),Conflictos:c}}),Fi("Solicitud de vacaciones creada",`Vacaciones para ${e.nombre} (${n} das hbiles) registradas`,t)}catch{Fi("Solicitud creada",`Vacaciones para ${e.nombre} registradas (correo no enviado)`,t)}return s},aue=async(e,t)=>{const r={...t};t.start_date&&t.end_date&&(r.calendar_days=U3(t.start_date,t.end_date),r.business_days=B3(t.start_date,t.end_date));const{data:n,error:a}=await Ee.from("attendance_vacaciones").update(r).eq("id",e).select().single();if(a)throw a;return n},S9="isaac.avila@transdev.cl",Ki={check:`<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="28" cy="28" r="26" fill="#dcfce7" stroke="#22c55e" stroke-width="3"/>
        <path d="M18 28L24 34L38 20" stroke="#16a34a" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,x:`<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="28" cy="28" r="26" fill="#fee2e2" stroke="#ef4444" stroke-width="3"/>
        <path d="M20 20L36 36M36 20L20 36" stroke="#dc2626" stroke-width="4" stroke-linecap="round"/>
    </svg>`,clock:`<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="28" cy="28" r="26" fill="#fef3c7" stroke="#f59e0b" stroke-width="3"/>
        <circle cx="28" cy="28" r="3" fill="#d97706"/>
        <path d="M28 16V28L36 33" stroke="#d97706" stroke-width="3" stroke-linecap="round"/>
    </svg>`,user:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="9" cy="5" r="3.5" stroke="#64748b" stroke-width="1.5"/>
        <path d="M2 16C2 12.686 5.13401 10 9 10C12.866 10 16 12.686 16 16" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,id:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="1.5" y="3.5" width="15" height="11" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <circle cx="6" cy="8" r="1.5" stroke="#64748b" stroke-width="1"/>
        <path d="M4 12C4 10.8954 4.89543 10 6 10C7.10457 10 8 10.8954 8 12" stroke="#64748b" stroke-width="1"/>
        <path d="M10.5 7.5H14.5M10.5 10H13" stroke="#64748b" stroke-width="1.2" stroke-linecap="round"/>
    </svg>`,building:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M2 16V3.5C2 3.22386 2.22386 3 2.5 3H9.5C9.77614 3 10 3.22386 10 3.5V16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M10 7H14.5C14.7761 7 15 7.22386 15 7.5V16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M5 6H7M5 9H7M5 12H7M12 10H13M12 13H13" stroke="#64748b" stroke-width="1.2" stroke-linecap="round"/>
        <path d="M1 16H17" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,calendar:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="2" y="3.5" width="14" height="12" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <path d="M2 7H16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M5.5 1.5V4.5M12.5 1.5V4.5" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`},N9=e=>new Date(e+"T12:00:00").toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Lo=(e,t,r,n=!1)=>`
    <tr>
        <td style="padding: 12px 16px; border-bottom: 1px solid #e2e8f0; width: 40%; vertical-align: middle;">
            <table role="presentation" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="padding-right: 12px; vertical-align: middle;">${e}</td>
                    <td style="font-size: 11px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">${t}</td>
                </tr>
            </table>
        </td>
        <td style="padding: 12px 16px; border-bottom: 1px solid #e2e8f0; font-size: 14px; font-weight: ${n?"700":"500"}; color: ${n?"#0f172a":"#334155"}; text-align: right;">${r}</td>
    </tr>
`,j9=async(e,t,r,n,a,i,s)=>{const o=e==="AUTORIZADO",c=o?"#16a34a":"#dc2626",u=o?"#f0fdf4":"#fef2f2",d=o?"#bbf7d0":"#fecaca",f=o?Ki.check:Ki.x,p=`${t} ${e} - ${n}`,h=`
        <!-- Status Banner -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
            <tr>
                <td style="background: ${u}; border: 1px solid ${d}; border-radius: 12px; padding: 24px; text-align: center;">
                    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                        <tr>
                            <td align="center" style="padding-bottom: 8px;">
                                ${f}
                            </td>
                        </tr>
                        <tr>
                            <td align="center">
                                <span style="font-size: 11px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 4px;">Estado del Registro</span>
                                <span style="font-size: 20px; font-weight: 800; color: ${c}; letter-spacing: -0.5px;">${e}</span>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
        
        <!-- Data Table -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate;">
            ${Lo(Ki.id,"Subseccin",t,!0)}
            ${Lo(Ki.id,"RUT",Yn(r))}
            ${Lo(Ki.user,"Trabajador",n)}
            ${Lo(Ki.building,"Terminal",ur(a))}
            ${Lo(Ki.calendar,"Fecha",N9(i))}
            ${s?Lo(Ki.id,"Motivo",s,!0):""}
        </table>
    `.trim(),g=await $3("email_notifications"),m=g!=null&&g.to&&g.to.length>0?g.to:[S9],x=(g==null?void 0:g.cc)||[];try{await xl.sendEmail({audience:"manual",manualRecipients:m,cc:x,subject:p,body:h})}catch(y){console.error("Error sending authorization email:",y)}},Gv=async(e,t)=>{const r=t.details?Object.entries(t.details).filter(([c,u])=>u&&u.trim()).map(([c,u])=>Lo(Ki.id,c,u)).join(""):"",n=`Nuevo Registro: ${e}`,a=`
        <!-- Worker Name Header -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
            <tr>
                <td align="center">
                    <h2 style="margin: 0; font-size: 24px; font-weight: 800; color: #0f172a;">${t.nombre}</h2>
                </td>
            </tr>
        </table>
        
        <!-- Status Banner -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
            <tr>
                <td style="background: #fffbeb; border: 1px solid #fde68a; border-radius: 12px; padding: 24px; text-align: center;">
                    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                        <tr>
                            <td align="center" style="padding-bottom: 8px;">
                                ${Ki.clock}
                            </td>
                        </tr>
                        <tr>
                            <td align="center">
                                <span style="font-size: 11px; font-weight: 700; color: #92400e; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 4px;">Estado del Registro</span>
                                <span style="font-size: 18px; font-weight: 800; color: #b45309; letter-spacing: -0.5px;">PENDIENTE DE AUTORIZACIN</span>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
        
        <!-- Subsection Badge -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
            <tr>
                <td align="center">
                    <span style="display: inline-block; padding: 8px 20px; background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 100px; color: #2563eb; font-size: 12px; font-weight: 700; letter-spacing: 0.5px; text-transform: uppercase;">${e}</span>
                </td>
            </tr>
        </table>
        
        <!-- Data Table -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate;">
            ${Lo(Ki.id,"RUT",Yn(t.rut))}
            ${Lo(Ki.user,"Trabajador",t.nombre,!0)}
            ${Lo(Ki.building,"Terminal",ur(t.terminal))}
            ${Lo(Ki.calendar,"Fecha",N9(t.date))}
            ${r}
        </table>
        
        <!-- Registered By -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-top: 24px;">
            <tr>
                <td style="padding: 16px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px;">
                    <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
                        <tr>
                            <td width="40" style="padding-right: 12px; vertical-align: middle;">
                                <div style="width: 40px; height: 40px; background: #2563eb; border-radius: 50%; text-align: center; line-height: 40px; color: white; font-weight: 700; font-size: 16px;">${t.createdBy.charAt(0)}</div>
                            </td>
                            <td style="vertical-align: middle;">
                                <span style="display: block; font-size: 10px; color: #64748b; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 2px;">Registrado por</span>
                                <span style="display: block; font-size: 14px; font-weight: 700; color: #0f172a;">${t.createdBy}</span>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    `.trim(),i=await $3("email_notifications"),s=i!=null&&i.to&&i.to.length>0?i.to:[S9],o=(i==null?void 0:i.cc)||[];try{await xl.sendEmail({audience:"manual",manualRecipients:s,cc:o,subject:n,body:a})}catch(c){console.error("Error sending record created email:",c)}},Kv=[{value:"todos",label:"Todos"},{value:"PENDIENTE",label:"Pendiente"},{value:"AUTORIZADO",label:"Autorizado"},{value:"RECHAZADO",label:"Rechazado"}],A9=[{value:"ENTRADA",label:"Llegada Tarda"},{value:"SALIDA",label:"Retiro Anticipado"}],E9={"asistencia-2026":"Asistencia 2026","no-marcaciones":"No Marcaciones","sin-credenciales":"Sin Credenciales","cambios-dia":"Cambios de Da",autorizaciones:"Autorizaciones",vacaciones:"Vacaciones"},sn={all:["attendance"],noMarcaciones:(e,t)=>[...sn.all,"no-marcaciones",e,t],sinCredenciales:(e,t)=>[...sn.all,"sin-credenciales",e,t],cambiosDia:(e,t)=>[...sn.all,"cambios-dia",e,t],autorizaciones:(e,t)=>[...sn.all,"autorizaciones",e,t],vacaciones:(e,t)=>[...sn.all,"vacaciones",e,t],kpis:(e,t)=>[...sn.all,"kpis",e,t]},iue=(e,t)=>zt({queryKey:sn.noMarcaciones(e,t),queryFn:()=>Fce(e,t)}),sue=(e,t)=>zt({queryKey:sn.sinCredenciales(e,t),queryFn:()=>Uce(e,t)}),oue=(e,t)=>zt({queryKey:sn.cambiosDia(e,t),queryFn:()=>Hce(e,t)}),lue=(e,t)=>zt({queryKey:sn.autorizaciones(e,t),queryFn:()=>Kce(e,t)}),cue=(e,t)=>zt({queryKey:sn.vacaciones(e,t),queryFn:()=>rue(e,t)}),z3={"asistencia-2026":"attendance_marks","no-marcaciones":"attendance_no_marcaciones","sin-credenciales":"attendance_sin_credenciales","cambios-dia":"attendance_cambios_dia",autorizaciones:"attendance_autorizaciones",vacaciones:"attendance_vacaciones"},uue={"asistencia-2026":"mark_date","no-marcaciones":"date","sin-credenciales":"date","cambios-dia":"date",autorizaciones:"authorization_date",vacaciones:"start_date"},Xv=(e,t)=>zt({queryKey:sn.kpis(e,t),queryFn:()=>Zce(z3[e],t,uue[e])}),due=()=>{const e=Mt();return Ft({mutationFn:({values:t,createdBy:r})=>$ce(t,r),onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},fue=()=>{const e=Mt();return Ft({mutationFn:({values:t,createdBy:r})=>zce(t,r),onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},hue=()=>{const e=Mt();return Ft({mutationFn:({values:t,createdBy:r})=>Wce(t,r),onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},pue=()=>{const e=Mt();return Ft({mutationFn:({values:t,createdBy:r})=>Xce(t,r),onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},mue=()=>{const e=Mt();return Ft({mutationFn:({values:t,createdBy:r})=>nue(t,r),onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},gue=()=>{const e=Mt();return Ft({mutationFn:({id:t,values:r})=>Bce(t,r),onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},vue=()=>{const e=Mt();return Ft({mutationFn:({id:t,values:r})=>qce(t,r),onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},xue=()=>{const e=Mt();return Ft({mutationFn:({id:t,values:r})=>Vce(t,r),onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},yue=()=>{const e=Mt();return Ft({mutationFn:({id:t,values:r})=>Yce(t,r),onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},bue=()=>{const e=Mt();return Ft({mutationFn:({id:t,values:r})=>aue(t,r),onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},Yv=()=>{const e=Mt();return Ft({mutationFn:async({subsection:t,id:r,authorizedBy:n,rut:a,nombre:i,terminal:s,date:o})=>{await Jce(z3[t],r,n),await j9("AUTORIZADO",E9[t],a,i,s,o)},onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},Jv=()=>{const e=Mt();return Ft({mutationFn:async({subsection:t,id:r,authorizedBy:n,reason:a,rut:i,nombre:s,terminal:o,date:c})=>{await Qce(z3[t],r,n,a),await j9("RECHAZADO",E9[t],i,s,o,c,a)},onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},Qv=()=>{const e=Mt();F.useEffect(()=>{const t=eue(()=>e.invalidateQueries({queryKey:sn.all}),()=>e.invalidateQueries({queryKey:sn.all}));return()=>{t()}},[e])},wue=()=>{const e=Vt(_=>_.context),t=Vt(_=>_.setContext),r=jr(_=>_.session),n=(r==null?void 0:r.supervisorName)??"",a=Wv(n),[i,s]=F.useState({auth_status:"todos"}),[o,c]=F.useState({type:"none"}),u=iue(e,i),d=Xv("no-marcaciones",e),f=due(),p=gue(),h=Yv(),g=Jv();Qv();const m=[{key:"rut",header:"RUT",value:_=>Yn(_.rut)},{key:"nombre",header:"Nombre",value:_=>_.nombre},{key:"area",header:"rea",value:_=>_.area},{key:"cargo",header:"Cargo",value:_=>_.cargo},{key:"jefe_terminal",header:"Jefe Terminal",value:_=>_.jefe_terminal},{key:"terminal",header:"Terminal",value:_=>ur(_.terminal_code)},{key:"cabezal",header:"Cabezal",value:_=>_.cabezal},{key:"incident_state",header:"Estado",value:_=>_.incident_state},{key:"date",header:"Fecha",value:_=>_.date},{key:"auth_status",header:"Autorizacin",value:_=>_.auth_status}],x=async _=>{await f.mutateAsync({values:_,createdBy:n}),c({type:"none"})},y=async _=>{o.type==="edit"&&(await p.mutateAsync({id:o.record.id,values:_}),c({type:"none"}))},v=async()=>{if(o.type!=="authorize")return;const _=o.record;await h.mutateAsync({subsection:"no-marcaciones",id:_.id,authorizedBy:n,rut:_.rut,nombre:_.nombre,terminal:_.terminal_code,date:_.date}),c({type:"none"})},b=async _=>{if(o.type!=="reject"||!_)return;const A=o.record;await g.mutateAsync({subsection:"no-marcaciones",id:A.id,authorizedBy:n,reason:_,rut:A.rut,nombre:A.nombre,terminal:A.terminal_code,date:A.date}),c({type:"none"})},S=_=>{switch(_){case"AUTORIZADO":return l.jsx("span",{className:"badge badge-success",children:_});case"RECHAZADO":return l.jsx("span",{className:"badge badge-danger",children:_});default:return l.jsx("span",{className:"badge badge-warning",children:_})}};return l.jsxs("div",{className:"space-y-4",children:[l.jsx(gn,{title:"No Marcaciones",description:"Registros de no marcacin de personal",actions:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[l.jsx(me,{name:"clipboard",size:18})," Nuevo Registro"]}),l.jsx(Na,{onExportView:()=>xr({filename:"no_marcaciones",sheetName:"Datos",rows:u.data||[],columns:m}),onExportAll:()=>xr({filename:"no_marcaciones_all",sheetName:"Datos",rows:u.data||[],columns:m})})]})}),l.jsx(Vv,{data:d.data,isLoading:d.isLoading}),l.jsxs(ss,{terminalContext:e,onTerminalChange:t,children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsx("select",{className:"input",value:i.auth_status,onChange:_=>s(A=>({...A,auth_status:_.target.value})),children:Kv.map(_=>l.jsx("option",{value:_.value,children:_.label},_.value))})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Buscar"}),l.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:_=>s(A=>({...A,search:_.target.value}))})]})]}),u.isLoading&&l.jsx(kn,{label:"Cargando registros..."}),u.isError&&l.jsx(Fa,{onRetry:()=>u.refetch()}),!u.isLoading&&!u.isError&&l.jsx("div",{className:"table-container overflow-x-auto",children:l.jsxs("table",{className:"table",children:[l.jsx("thead",{className:"table-header",children:l.jsxs("tr",{children:[l.jsx("th",{className:"table-header-cell",children:"RUT"}),l.jsx("th",{className:"table-header-cell",children:"Nombre"}),l.jsx("th",{className:"table-header-cell",children:"Terminal"}),l.jsx("th",{className:"table-header-cell",children:"Fecha"}),l.jsx("th",{className:"table-header-cell",children:"Estado"}),l.jsx("th",{className:"table-header-cell",children:"Autorizacin"}),l.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),l.jsx("tbody",{className:"table-body",children:(u.data||[]).map(_=>l.jsxs("tr",{className:"table-row",children:[l.jsx("td",{className:"table-cell font-mono text-sm",children:Yn(_.rut)}),l.jsx("td",{className:"table-cell font-medium",children:_.nombre}),l.jsx("td",{className:"table-cell",children:ur(_.terminal_code)}),l.jsx("td",{className:"table-cell",children:_.date}),l.jsx("td",{className:"table-cell",children:_.incident_state||"-"}),l.jsx("td",{className:"table-cell",children:S(_.auth_status)}),l.jsx("td",{className:"table-cell",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[_.auth_status==="PENDIENTE"&&l.jsx("button",{onClick:()=>c({type:"edit",record:_}),className:"btn btn-ghost btn-icon",title:"Editar",children:l.jsx(me,{name:"clipboard",size:16})}),a&&_.auth_status==="PENDIENTE"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>c({type:"authorize",record:_}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:l.jsx(me,{name:"check-circle",size:16})}),l.jsx("button",{onClick:()=>c({type:"reject",record:_}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:l.jsx(me,{name:"x",size:16})})]})]})})]},_.id))})]})}),(o.type==="create"||o.type==="edit")&&l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),l.jsxs("div",{className:"relative w-full max-w-3xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-xl font-bold",children:o.type==="create"?"Nuevo Registro":"Editar Registro"}),l.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:l.jsx(me,{name:"x",size:24})})]}),l.jsx(Dce,{initialData:o.type==="edit"?{...o.record,area:o.record.area??"Logstica",cargo:o.record.cargo??"",jefe_terminal:o.record.jefe_terminal??"",cabezal:o.record.cabezal??"",incident_state:o.record.incident_state??"",schedule_in_out:o.record.schedule_in_out??"",time_range:o.record.time_range??"",observations:o.record.observations??"",informed_by:o.record.informed_by??n}:void 0,supervisorName:n,onSubmit:o.type==="create"?x:y,onCancel:()=>c({type:"none"}),isLoading:f.isPending||p.isPending})]})]}),o.type==="authorize"&&l.jsx(yl,{mode:"authorize",itemName:o.record.nombre,onConfirm:v,onCancel:()=>c({type:"none"}),isLoading:h.isPending}),o.type==="reject"&&l.jsx(yl,{mode:"reject",itemName:o.record.nombre,onConfirm:b,onCancel:()=>c({type:"none"}),isLoading:g.isPending})]})},_ue=({initialData:e,supervisorName:t,onSubmit:r,onCancel:n,isLoading:a})=>{const[i,s]=F.useState({rut:"",nombre:"",terminal_code:"EL_ROBLE",cabezal:"",date:new Date().toISOString().split("T")[0],start_time:"",end_time:"",cargo:"",supervisor_autoriza:t,area:"Logstica",responsable:"",observacion:"",...e}),o=u=>{if(u){const[d,f]=(u.horario||"").split("-"),p=(d==null?void 0:d.trim())||"",h=(f==null?void 0:f.trim())||"";s(g=>({...g,nombre:u.nombre,cargo:u.cargo,terminal_code:u.terminal_code,start_time:p,end_time:h}))}},c=u=>{u.preventDefault(),r(i)};return l.jsxs("form",{onSubmit:c,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(sw,{value:i.rut,onChange:u=>s(d=>({...d,rut:u})),onStaffFound:o,disabled:!!(e!=null&&e.rut)}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Nombre"}),l.jsx("input",{type:"text",className:"input",value:i.nombre,onChange:u=>s(d=>({...d,nombre:u.target.value})),required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Terminal"}),l.jsx("select",{className:"input",value:i.terminal_code,onChange:u=>s(d=>({...d,terminal_code:u.target.value})),required:!0,children:ns.map(u=>l.jsx("option",{value:u.value,children:u.label},u.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Cabezal"}),l.jsx("input",{type:"text",className:"input",value:i.cabezal,onChange:u=>s(d=>({...d,cabezal:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha"}),l.jsx("input",{type:"date",className:"input",value:i.date,onChange:u=>s(d=>({...d,date:u.target.value})),required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Hora Inicio"}),l.jsx("input",{type:"time",className:"input",value:i.start_time,onChange:u=>s(d=>({...d,start_time:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Hora Fin"}),l.jsx("input",{type:"time",className:"input",value:i.end_time,onChange:u=>s(d=>({...d,end_time:u.target.value}))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Cargo"}),l.jsx("input",{type:"text",className:"input",value:i.cargo,onChange:u=>s(d=>({...d,cargo:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Supervisor Autoriza"}),l.jsx("input",{type:"text",className:"input",value:i.supervisor_autoriza,onChange:u=>s(d=>({...d,supervisor_autoriza:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"rea"}),l.jsx("input",{type:"text",className:"input",value:i.area,onChange:u=>s(d=>({...d,area:u.target.value}))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Responsable"}),l.jsx("input",{type:"text",className:"input",value:i.responsable,onChange:u=>s(d=>({...d,responsable:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Observacin"}),l.jsx("textarea",{className:"input min-h-[80px]",value:i.observacion,onChange:u=>s(d=>({...d,observacion:u.target.value}))})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[l.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",disabled:a,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?"Guardando...":e?"Guardar Cambios":"Crear Registro"})]})]})},Sue=()=>{const e=Vt(_=>_.context),t=Vt(_=>_.setContext),r=jr(_=>_.session),n=(r==null?void 0:r.supervisorName)??"",a=Wv(n),[i,s]=F.useState({auth_status:"todos"}),[o,c]=F.useState({type:"none"}),u=sue(e,i),d=Xv("sin-credenciales",e),f=fue(),p=vue(),h=Yv(),g=Jv();Qv();const m=[{key:"rut",header:"RUT",value:_=>Yn(_.rut)},{key:"nombre",header:"Nombre",value:_=>_.nombre},{key:"terminal",header:"Terminal",value:_=>ur(_.terminal_code)},{key:"cabezal",header:"Cabezal",value:_=>_.cabezal},{key:"date",header:"Fecha",value:_=>_.date},{key:"start_time",header:"Hora Inicio",value:_=>_.start_time},{key:"end_time",header:"Hora Fin",value:_=>_.end_time},{key:"cargo",header:"Cargo",value:_=>_.cargo},{key:"supervisor_autoriza",header:"Supervisor Autoriza",value:_=>_.supervisor_autoriza},{key:"auth_status",header:"Autorizacin",value:_=>_.auth_status}],x=async _=>{await f.mutateAsync({values:_,createdBy:n}),c({type:"none"})},y=async _=>{o.type==="edit"&&(await p.mutateAsync({id:o.record.id,values:_}),c({type:"none"}))},v=async()=>{if(o.type!=="authorize")return;const _=o.record;await h.mutateAsync({subsection:"sin-credenciales",id:_.id,authorizedBy:n,rut:_.rut,nombre:_.nombre,terminal:_.terminal_code,date:_.date}),c({type:"none"})},b=async _=>{if(o.type!=="reject"||!_)return;const A=o.record;await g.mutateAsync({subsection:"sin-credenciales",id:A.id,authorizedBy:n,reason:_,rut:A.rut,nombre:A.nombre,terminal:A.terminal_code,date:A.date}),c({type:"none"})},S=_=>{switch(_){case"AUTORIZADO":return l.jsx("span",{className:"badge badge-success",children:_});case"RECHAZADO":return l.jsx("span",{className:"badge badge-danger",children:_});default:return l.jsx("span",{className:"badge badge-warning",children:_})}};return l.jsxs("div",{className:"space-y-4",children:[l.jsx(gn,{title:"Sin Credenciales",description:"Registros de personal sin credencial",actions:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[l.jsx(me,{name:"key",size:18})," Nuevo Registro"]}),l.jsx(Na,{onExportView:()=>xr({filename:"sin_credenciales",sheetName:"Datos",rows:u.data||[],columns:m}),onExportAll:()=>xr({filename:"sin_credenciales_all",sheetName:"Datos",rows:u.data||[],columns:m})})]})}),l.jsx(Vv,{data:d.data,isLoading:d.isLoading}),l.jsxs(ss,{terminalContext:e,onTerminalChange:t,children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsx("select",{className:"input",value:i.auth_status,onChange:_=>s(A=>({...A,auth_status:_.target.value})),children:Kv.map(_=>l.jsx("option",{value:_.value,children:_.label},_.value))})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Buscar"}),l.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:_=>s(A=>({...A,search:_.target.value}))})]})]}),u.isLoading&&l.jsx(kn,{label:"Cargando registros..."}),u.isError&&l.jsx(Fa,{onRetry:()=>u.refetch()}),!u.isLoading&&!u.isError&&l.jsx("div",{className:"table-container overflow-x-auto",children:l.jsxs("table",{className:"table",children:[l.jsx("thead",{className:"table-header",children:l.jsxs("tr",{children:[l.jsx("th",{className:"table-header-cell",children:"RUT"}),l.jsx("th",{className:"table-header-cell",children:"Nombre"}),l.jsx("th",{className:"table-header-cell",children:"Terminal"}),l.jsx("th",{className:"table-header-cell",children:"Cabezal"}),l.jsx("th",{className:"table-header-cell",children:"Fecha"}),l.jsx("th",{className:"table-header-cell",children:"Hora"}),l.jsx("th",{className:"table-header-cell",children:"Autorizacin"}),l.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),l.jsx("tbody",{className:"table-body",children:(u.data||[]).map(_=>l.jsxs("tr",{className:"table-row",children:[l.jsx("td",{className:"table-cell font-mono text-sm",children:Yn(_.rut)}),l.jsx("td",{className:"table-cell font-medium",children:_.nombre}),l.jsx("td",{className:"table-cell",children:ur(_.terminal_code)}),l.jsx("td",{className:"table-cell",children:_.cabezal||"-"}),l.jsx("td",{className:"table-cell",children:_.date}),l.jsxs("td",{className:"table-cell",children:[_.start_time," - ",_.end_time]}),l.jsx("td",{className:"table-cell",children:S(_.auth_status)}),l.jsx("td",{className:"table-cell",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[_.auth_status==="PENDIENTE"&&l.jsx("button",{onClick:()=>c({type:"edit",record:_}),className:"btn btn-ghost btn-icon",title:"Editar",children:l.jsx(me,{name:"clipboard",size:16})}),a&&_.auth_status==="PENDIENTE"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>c({type:"authorize",record:_}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:l.jsx(me,{name:"check-circle",size:16})}),l.jsx("button",{onClick:()=>c({type:"reject",record:_}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:l.jsx(me,{name:"x",size:16})})]})]})})]},_.id))})]})}),(o.type==="create"||o.type==="edit")&&l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),l.jsxs("div",{className:"relative w-full max-w-3xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-xl font-bold",children:o.type==="create"?"Nuevo Registro":"Editar Registro"}),l.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:l.jsx(me,{name:"x",size:24})})]}),l.jsx(_ue,{initialData:o.type==="edit"?{...o.record,cabezal:o.record.cabezal??"",start_time:o.record.start_time??"",end_time:o.record.end_time??"",cargo:o.record.cargo??"",supervisor_autoriza:o.record.supervisor_autoriza??"",area:o.record.area??"",responsable:o.record.responsable??"",observacion:o.record.observacion??""}:void 0,supervisorName:n,onSubmit:o.type==="create"?x:y,onCancel:()=>c({type:"none"}),isLoading:f.isPending||p.isPending})]})]}),o.type==="authorize"&&l.jsx(yl,{mode:"authorize",itemName:o.record.nombre,onConfirm:v,onCancel:()=>c({type:"none"}),isLoading:h.isPending}),o.type==="reject"&&l.jsx(yl,{mode:"reject",itemName:o.record.nombre,onConfirm:b,onCancel:()=>c({type:"none"}),isLoading:g.isPending})]})},Nue=({initialData:e,onSubmit:t,onCancel:r,isLoading:n})=>{const a=F.useRef(null),[i,s]=F.useState({rut:"",nombre:"",terminal_code:"EL_ROBLE",cabezal:"",date:new Date().toISOString().split("T")[0],prog_start:"",prog_end:"",reprogram_start:"",reprogram_end:"",day_off_date:"",day_off_start:"",day_off_end:"",day_on_date:"",day_on_start:"",day_on_end:"",document:null,...e}),o=u=>{if(u){const[d,f]=(u.horario||"").split("-"),p=(d==null?void 0:d.trim())||"",h=(f==null?void 0:f.trim())||"";s(g=>({...g,nombre:u.nombre,terminal_code:u.terminal_code,prog_start:p,prog_end:h,day_off_start:p,day_off_end:h,day_on_start:p,day_on_end:h}))}},c=u=>{u.preventDefault(),t(i)};return l.jsxs("form",{onSubmit:c,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(sw,{value:i.rut,onChange:u=>s(d=>({...d,rut:u})),onStaffFound:o,disabled:!!(e!=null&&e.rut)}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Nombre"}),l.jsx("input",{type:"text",className:"input",value:i.nombre,onChange:u=>s(d=>({...d,nombre:u.target.value})),required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Terminal"}),l.jsx("select",{className:"input",value:i.terminal_code,onChange:u=>s(d=>({...d,terminal_code:u.target.value})),required:!0,children:ns.map(u=>l.jsx("option",{value:u.value,children:u.label},u.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Cabezal"}),l.jsx("input",{type:"text",className:"input",value:i.cabezal,onChange:u=>s(d=>({...d,cabezal:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha Registro"}),l.jsx("input",{type:"date",className:"input",value:i.date,onChange:u=>s(d=>({...d,date:u.target.value})),required:!0})]})]}),l.jsxs("div",{className:"card p-4 bg-brand-50 border-brand-200",children:[l.jsx("h4",{className:"font-semibold text-brand-800 mb-3",children:"Jornada Programada (desde Personal)"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Entrada"}),l.jsx("input",{type:"text",className:"input bg-brand-100 font-medium",value:i.prog_start,onChange:u=>s(d=>({...d,prog_start:u.target.value})),placeholder:"--:--",readOnly:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Salida"}),l.jsx("input",{type:"text",className:"input bg-brand-100 font-medium",value:i.prog_end,onChange:u=>s(d=>({...d,prog_end:u.target.value})),placeholder:"--:--",readOnly:!0})]})]})]}),l.jsxs("div",{className:"card p-4 bg-slate-50",children:[l.jsx("h4",{className:"font-semibold text-slate-700 mb-3",children:"Da Programado (No Trabaja)"}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha"}),l.jsx("input",{type:"date",className:"input",value:i.day_off_date,onChange:u=>s(d=>({...d,day_off_date:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Inicio"}),l.jsx("input",{type:"text",className:"input font-medium",value:i.day_off_start,onChange:u=>s(d=>({...d,day_off_start:u.target.value})),placeholder:"--:--"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Trmino"}),l.jsx("input",{type:"text",className:"input font-medium",value:i.day_off_end,onChange:u=>s(d=>({...d,day_off_end:u.target.value})),placeholder:"--:--"})]})]})]}),l.jsxs("div",{className:"card p-4 bg-success-50 border-success-200",children:[l.jsx("h4",{className:"font-semibold text-success-800 mb-3",children:"Da ReProgramado (Trabaja)"}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha"}),l.jsx("input",{type:"date",className:"input",value:i.day_on_date,onChange:u=>s(d=>({...d,day_on_date:u.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Inicio"}),l.jsx("input",{type:"text",className:"input font-medium",value:i.day_on_start,onChange:u=>s(d=>({...d,day_on_start:u.target.value})),placeholder:"--:--"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Trmino"}),l.jsx("input",{type:"text",className:"input font-medium",value:i.day_on_end,onChange:u=>s(d=>({...d,day_on_end:u.target.value})),placeholder:"--:--"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Documento Adjunto (opcional)"}),l.jsxs("div",{className:"border-2 border-dashed rounded-xl p-4 text-center",children:[l.jsx("input",{ref:a,type:"file",accept:".pdf,.jpg,.jpeg,.png",className:"hidden",onChange:u=>s(d=>{var f;return{...d,document:((f=u.target.files)==null?void 0:f[0])||null}})}),i.document?l.jsxs("div",{className:"flex items-center justify-center gap-3",children:[l.jsx(me,{name:"check-circle",size:20,className:"text-success-600"}),l.jsx("span",{className:"text-sm",children:i.document.name}),l.jsx("button",{type:"button",onClick:()=>{s(u=>({...u,document:null})),a.current&&(a.current.value="")},className:"text-danger-600",children:l.jsx(me,{name:"x",size:18})})]}):l.jsxs("button",{type:"button",onClick:()=>{var u;return(u=a.current)==null?void 0:u.click()},className:"btn btn-secondary",children:[l.jsx(me,{name:"image",size:18})," Seleccionar Archivo"]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[l.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Guardando...":e?"Guardar Cambios":"Crear Registro"})]})]})},jue=()=>{const e=Vt(A=>A.context),t=Vt(A=>A.setContext),r=jr(A=>A.session),n=(r==null?void 0:r.supervisorName)??"",a=Wv(n),[i,s]=F.useState({auth_status:"todos"}),[o,c]=F.useState({type:"none"}),u=oue(e,i),d=Xv("cambios-dia",e),f=hue(),p=xue(),h=Yv(),g=Jv();Qv();const m=[{key:"rut",header:"RUT",value:A=>Yn(A.rut)},{key:"nombre",header:"Nombre",value:A=>A.nombre},{key:"terminal",header:"Terminal",value:A=>ur(A.terminal_code)},{key:"cabezal",header:"Cabezal",value:A=>A.cabezal},{key:"date",header:"Fecha",value:A=>A.date},{key:"prog_start",header:"Prog. Inicio",value:A=>A.prog_start},{key:"prog_end",header:"Prog. Fin",value:A=>A.prog_end},{key:"reprogram_start",header:"Reprog. Inicio",value:A=>A.reprogram_start},{key:"reprogram_end",header:"Reprog. Fin",value:A=>A.reprogram_end},{key:"auth_status",header:"Autorizacin",value:A=>A.auth_status}],x=async A=>{await f.mutateAsync({values:A,createdBy:n}),c({type:"none"})},y=async A=>{o.type==="edit"&&(await p.mutateAsync({id:o.record.id,values:A}),c({type:"none"}))},v=async()=>{if(o.type!=="authorize")return;const A=o.record;await h.mutateAsync({subsection:"cambios-dia",id:A.id,authorizedBy:n,rut:A.rut,nombre:A.nombre,terminal:A.terminal_code,date:A.date}),c({type:"none"})},b=async A=>{if(o.type!=="reject"||!A)return;const j=o.record;await g.mutateAsync({subsection:"cambios-dia",id:j.id,authorizedBy:n,reason:A,rut:j.rut,nombre:j.nombre,terminal:j.terminal_code,date:j.date}),c({type:"none"})},S=async A=>{try{const j=await Gce(A);window.open(j,"_blank")}catch(j){console.error("Error getting document URL:",j)}},_=A=>{switch(A){case"AUTORIZADO":return l.jsx("span",{className:"badge badge-success",children:A});case"RECHAZADO":return l.jsx("span",{className:"badge badge-danger",children:A});default:return l.jsx("span",{className:"badge badge-warning",children:A})}};return l.jsxs("div",{className:"space-y-4",children:[l.jsx(gn,{title:"Cambios de Da",description:"Reprogramaciones de jornada laboral",actions:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[l.jsx(me,{name:"calendar",size:18})," Nuevo Registro"]}),l.jsx(Na,{onExportView:()=>xr({filename:"cambios_dia",sheetName:"Datos",rows:u.data||[],columns:m}),onExportAll:()=>xr({filename:"cambios_dia_all",sheetName:"Datos",rows:u.data||[],columns:m})})]})}),l.jsx(Vv,{data:d.data,isLoading:d.isLoading}),l.jsxs(ss,{terminalContext:e,onTerminalChange:t,children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsx("select",{className:"input",value:i.auth_status,onChange:A=>s(j=>({...j,auth_status:A.target.value})),children:Kv.map(A=>l.jsx("option",{value:A.value,children:A.label},A.value))})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Buscar"}),l.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:A=>s(j=>({...j,search:A.target.value}))})]})]}),u.isLoading&&l.jsx(kn,{label:"Cargando registros..."}),u.isError&&l.jsx(Fa,{onRetry:()=>u.refetch()}),!u.isLoading&&!u.isError&&l.jsx("div",{className:"table-container overflow-x-auto",children:l.jsxs("table",{className:"table",children:[l.jsx("thead",{className:"table-header",children:l.jsxs("tr",{children:[l.jsx("th",{className:"table-header-cell",children:"RUT"}),l.jsx("th",{className:"table-header-cell",children:"Nombre"}),l.jsx("th",{className:"table-header-cell",children:"Terminal"}),l.jsx("th",{className:"table-header-cell",children:"Fecha"}),l.jsx("th",{className:"table-header-cell",children:"Jornada Prog."}),l.jsx("th",{className:"table-header-cell",children:"Jornada Reprog."}),l.jsx("th",{className:"table-header-cell",children:"Doc"}),l.jsx("th",{className:"table-header-cell",children:"Autorizacin"}),l.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),l.jsx("tbody",{className:"table-body",children:(u.data||[]).map(A=>l.jsxs("tr",{className:"table-row",children:[l.jsx("td",{className:"table-cell font-mono text-sm",children:Yn(A.rut)}),l.jsx("td",{className:"table-cell font-medium",children:A.nombre}),l.jsx("td",{className:"table-cell",children:ur(A.terminal_code)}),l.jsx("td",{className:"table-cell",children:A.date}),l.jsxs("td",{className:"table-cell text-xs",children:[A.prog_start," - ",A.prog_end]}),l.jsxs("td",{className:"table-cell text-xs",children:[A.reprogram_start," - ",A.reprogram_end]}),l.jsx("td",{className:"table-cell",children:A.document_path?l.jsx("button",{onClick:()=>S(A.document_path),className:"text-brand-600 hover:underline",children:l.jsx(me,{name:"image",size:16})}):"-"}),l.jsx("td",{className:"table-cell",children:_(A.auth_status)}),l.jsx("td",{className:"table-cell",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[A.auth_status==="PENDIENTE"&&l.jsx("button",{onClick:()=>c({type:"edit",record:A}),className:"btn btn-ghost btn-icon",title:"Editar",children:l.jsx(me,{name:"clipboard",size:16})}),a&&A.auth_status==="PENDIENTE"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>c({type:"authorize",record:A}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:l.jsx(me,{name:"check-circle",size:16})}),l.jsx("button",{onClick:()=>c({type:"reject",record:A}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:l.jsx(me,{name:"x",size:16})})]})]})})]},A.id))})]})}),(o.type==="create"||o.type==="edit")&&l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),l.jsxs("div",{className:"relative w-full max-w-4xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-xl font-bold",children:o.type==="create"?"Nuevo Registro":"Editar Registro"}),l.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:l.jsx(me,{name:"x",size:24})})]}),l.jsx(Nue,{initialData:o.type==="edit"?{...o.record,cabezal:o.record.cabezal??"",prog_start:o.record.prog_start??"",prog_end:o.record.prog_end??"",reprogram_start:o.record.reprogram_start??"",reprogram_end:o.record.reprogram_end??"",day_off_date:o.record.day_off_date??"",day_off_start:o.record.day_off_start??"",day_off_end:o.record.day_off_end??"",day_on_date:o.record.day_on_date??"",day_on_start:o.record.day_on_start??"",day_on_end:o.record.day_on_end??"",document:null}:void 0,onSubmit:o.type==="create"?x:y,onCancel:()=>c({type:"none"}),isLoading:f.isPending||p.isPending})]})]}),o.type==="authorize"&&l.jsx(yl,{mode:"authorize",itemName:o.record.nombre,onConfirm:v,onCancel:()=>c({type:"none"}),isLoading:h.isPending}),o.type==="reject"&&l.jsx(yl,{mode:"reject",itemName:o.record.nombre,onConfirm:b,onCancel:()=>c({type:"none"}),isLoading:g.isPending})]})},Aue=({initialData:e,onSubmit:t,onCancel:r,isLoading:n})=>{const[a,i]=F.useState({rut:"",nombre:"",cargo:"",terminal_code:"EL_ROBLE",turno:"",horario:"",authorization_date:new Date().toISOString().split("T")[0],entry_or_exit:"ENTRADA",motivo:"",...e}),s=c=>{c&&i(u=>({...u,nombre:c.nombre,cargo:c.cargo,terminal_code:c.terminal_code,turno:c.turno,horario:c.horario}))},o=c=>{c.preventDefault(),t(a)};return l.jsxs("form",{onSubmit:o,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(sw,{value:a.rut,onChange:c=>i(u=>({...u,rut:c})),onStaffFound:s,disabled:!!(e!=null&&e.rut)}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Nombre"}),l.jsx("input",{type:"text",className:"input",value:a.nombre,onChange:c=>i(u=>({...u,nombre:c.target.value})),required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Cargo"}),l.jsx("input",{type:"text",className:"input",value:a.cargo,onChange:c=>i(u=>({...u,cargo:c.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Terminal"}),l.jsx("select",{className:"input",value:a.terminal_code,onChange:c=>i(u=>({...u,terminal_code:c.target.value})),required:!0,children:ns.map(c=>l.jsx("option",{value:c.value,children:c.label},c.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Turno"}),l.jsx("input",{type:"text",className:"input",value:a.turno,onChange:c=>i(u=>({...u,turno:c.target.value}))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Horario"}),l.jsx("input",{type:"text",className:"input",value:a.horario,onChange:c=>i(u=>({...u,horario:c.target.value})),placeholder:"08:00-18:00"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha de Autorizacin"}),l.jsx("input",{type:"date",className:"input",value:a.authorization_date,onChange:c=>i(u=>({...u,authorization_date:c.target.value})),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Tipo"}),l.jsx("select",{className:"input",value:a.entry_or_exit,onChange:c=>i(u=>({...u,entry_or_exit:c.target.value})),required:!0,children:A9.map(c=>l.jsx("option",{value:c.value,children:c.label},c.value))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Motivo"}),l.jsx("textarea",{className:"input min-h-[80px]",value:a.motivo,onChange:c=>i(u=>({...u,motivo:c.target.value})),placeholder:"Describe el motivo de la autorizacin...",required:!0})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[l.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Guardando...":e?"Guardar Cambios":"Crear Registro"})]})]})},Eue=()=>{const e=Vt(j=>j.context),t=Vt(j=>j.setContext),r=jr(j=>j.session),n=(r==null?void 0:r.supervisorName)??"",a=Wv(n),[i,s]=F.useState({auth_status:"todos"}),[o,c]=F.useState({type:"none"}),u=lue(e,i),d=Xv("autorizaciones",e),f=pue(),p=yue(),h=Yv(),g=Jv();Qv();const m=j=>{var E;return((E=A9.find(T=>T.value===j))==null?void 0:E.label)||j},x=[{key:"rut",header:"RUT",value:j=>Yn(j.rut)},{key:"nombre",header:"Nombre",value:j=>j.nombre},{key:"cargo",header:"Cargo",value:j=>j.cargo},{key:"terminal",header:"Terminal",value:j=>ur(j.terminal_code)},{key:"turno",header:"Turno",value:j=>j.turno},{key:"horario",header:"Horario",value:j=>j.horario},{key:"authorization_date",header:"Fecha",value:j=>j.authorization_date},{key:"entry_or_exit",header:"Tipo",value:j=>m(j.entry_or_exit)},{key:"motivo",header:"Motivo",value:j=>j.motivo},{key:"auth_status",header:"Autorizacin",value:j=>j.auth_status}],y=async j=>{await f.mutateAsync({values:j,createdBy:n}),c({type:"none"})},v=async j=>{o.type==="edit"&&(await p.mutateAsync({id:o.record.id,values:j}),c({type:"none"}))},b=async()=>{if(o.type!=="authorize")return;const j=o.record;await h.mutateAsync({subsection:"autorizaciones",id:j.id,authorizedBy:n,rut:j.rut,nombre:j.nombre,terminal:j.terminal_code,date:j.authorization_date}),c({type:"none"})},S=async j=>{if(o.type!=="reject"||!j)return;const E=o.record;await g.mutateAsync({subsection:"autorizaciones",id:E.id,authorizedBy:n,reason:j,rut:E.rut,nombre:E.nombre,terminal:E.terminal_code,date:E.authorization_date}),c({type:"none"})},_=j=>{switch(j){case"AUTORIZADO":return l.jsx("span",{className:"badge badge-success",children:j});case"RECHAZADO":return l.jsx("span",{className:"badge badge-danger",children:j});default:return l.jsx("span",{className:"badge badge-warning",children:j})}},A=j=>j==="ENTRADA"?l.jsx("span",{className:"badge bg-blue-100 text-blue-700",children:"Llegada Tarda"}):l.jsx("span",{className:"badge bg-purple-100 text-purple-700",children:"Retiro Anticipado"});return l.jsxs("div",{className:"space-y-4",children:[l.jsx(gn,{title:"Autorizaciones",description:"Retiros anticipados y llegadas tardas",actions:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[l.jsx(me,{name:"check-circle",size:18})," Nueva Solicitud"]}),l.jsx(Na,{onExportView:()=>xr({filename:"autorizaciones",sheetName:"Datos",rows:u.data||[],columns:x}),onExportAll:()=>xr({filename:"autorizaciones_all",sheetName:"Datos",rows:u.data||[],columns:x})})]})}),l.jsx(Vv,{data:d.data,isLoading:d.isLoading}),l.jsxs(ss,{terminalContext:e,onTerminalChange:t,children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsx("select",{className:"input",value:i.auth_status,onChange:j=>s(E=>({...E,auth_status:j.target.value})),children:Kv.map(j=>l.jsx("option",{value:j.value,children:j.label},j.value))})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Buscar"}),l.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:j=>s(E=>({...E,search:j.target.value}))})]})]}),u.isLoading&&l.jsx(kn,{label:"Cargando registros..."}),u.isError&&l.jsx(Fa,{onRetry:()=>u.refetch()}),!u.isLoading&&!u.isError&&l.jsx("div",{className:"table-container overflow-x-auto",children:l.jsxs("table",{className:"table",children:[l.jsx("thead",{className:"table-header",children:l.jsxs("tr",{children:[l.jsx("th",{className:"table-header-cell",children:"RUT"}),l.jsx("th",{className:"table-header-cell",children:"Nombre"}),l.jsx("th",{className:"table-header-cell",children:"Terminal"}),l.jsx("th",{className:"table-header-cell",children:"Fecha"}),l.jsx("th",{className:"table-header-cell",children:"Tipo"}),l.jsx("th",{className:"table-header-cell",children:"Motivo"}),l.jsx("th",{className:"table-header-cell",children:"Autorizacin"}),l.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),l.jsx("tbody",{className:"table-body",children:(u.data||[]).map(j=>l.jsxs("tr",{className:"table-row",children:[l.jsx("td",{className:"table-cell font-mono text-sm",children:Yn(j.rut)}),l.jsx("td",{className:"table-cell font-medium",children:j.nombre}),l.jsx("td",{className:"table-cell",children:ur(j.terminal_code)}),l.jsx("td",{className:"table-cell",children:j.authorization_date}),l.jsx("td",{className:"table-cell",children:A(j.entry_or_exit)}),l.jsx("td",{className:"table-cell max-w-[200px] truncate",title:j.motivo,children:j.motivo}),l.jsx("td",{className:"table-cell",children:_(j.auth_status)}),l.jsx("td",{className:"table-cell",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[j.auth_status==="PENDIENTE"&&l.jsx("button",{onClick:()=>c({type:"edit",record:j}),className:"btn btn-ghost btn-icon",title:"Editar",children:l.jsx(me,{name:"clipboard",size:16})}),a&&j.auth_status==="PENDIENTE"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>c({type:"authorize",record:j}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:l.jsx(me,{name:"check-circle",size:16})}),l.jsx("button",{onClick:()=>c({type:"reject",record:j}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:l.jsx(me,{name:"x",size:16})})]})]})})]},j.id))})]})}),(o.type==="create"||o.type==="edit")&&l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),l.jsxs("div",{className:"relative w-full max-w-3xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-xl font-bold",children:o.type==="create"?"Nueva Solicitud":"Editar Solicitud"}),l.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:l.jsx(me,{name:"x",size:24})})]}),l.jsx(Aue,{initialData:o.type==="edit"?{...o.record,cargo:o.record.cargo??"",turno:o.record.turno??"",horario:o.record.horario??""}:void 0,onSubmit:o.type==="create"?y:v,onCancel:()=>c({type:"none"}),isLoading:f.isPending||p.isPending})]})]}),o.type==="authorize"&&l.jsx(yl,{mode:"authorize",itemName:o.record.nombre,onConfirm:b,onCancel:()=>c({type:"none"}),isLoading:h.isPending}),o.type==="reject"&&l.jsx(yl,{mode:"reject",itemName:o.record.nombre,onConfirm:S,onCancel:()=>c({type:"none"}),isLoading:g.isPending})]})},k5=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],Tue=["Lun","Mar","Mi","Jue","Vie","Sb","Dom"],Cue=({isOpen:e,onClose:t,vacaciones:r})=>{const n=new Date,[a,i]=F.useState(n.getFullYear()),[s,o]=F.useState(n.getMonth()),[c,u]=F.useState(null),[d,f]=F.useState("todos"),[p,h]=F.useState("todos"),g=F.useMemo(()=>{const E=new Set;return r.forEach(T=>E.add(T.cargo)),Array.from(E).sort()},[r]),m=F.useMemo(()=>r.filter(E=>!(d!=="todos"&&E.terminal_code!==d||p!=="todos"&&E.cargo!==p)),[r,d,p]),x=F.useMemo(()=>{const E=new Date(a,s,1),L=new Date(a,s+1,0).getDate();let O=E.getDay()-1;O<0&&(O=6);const I=[];for(let D=0;D<O;D++)I.push(null);for(let D=1;D<=L;D++)I.push(D);return I},[a,s]),y=E=>{const T=`${a}-${String(s+1).padStart(2,"0")}-${String(E).padStart(2,"0")}`;return m.filter(L=>T>=L.start_date&&T<=L.end_date)},v=c?y(c):[],b=()=>{s===0?(o(11),i(a-1)):o(s-1),u(null)},S=()=>{s===11?(o(0),i(a+1)):o(s+1),u(null)},_=()=>{i(n.getFullYear()),o(n.getMonth()),u(n.getDate())};if(!e)return null;const A=E=>E===n.getDate()&&s===n.getMonth()&&a===n.getFullYear(),j=E=>E%7===5||E%7===6;return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),l.jsxs("div",{className:"relative w-full max-w-5xl bg-white rounded-2xl shadow-2xl max-h-[90vh] overflow-hidden animate-scale-in",children:[l.jsxs("div",{className:"bg-gradient-to-r from-brand-600 to-brand-700 text-white p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-3",children:[l.jsx(me,{name:"calendar",size:28}),"Calendario de Vacaciones"]}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:l.jsx(me,{name:"x",size:24})})]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("div",{className:"flex-1 min-w-[180px]",children:[l.jsx("label",{className:"text-white/70 text-xs font-medium block mb-1",children:"Terminal"}),l.jsxs("select",{className:"w-full px-3 py-2 rounded-lg bg-white/20 text-white border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50",value:d,onChange:E=>f(E.target.value),children:[l.jsx("option",{value:"todos",className:"text-slate-800",children:"Todos los terminales"}),ns.map(E=>l.jsx("option",{value:E.value,className:"text-slate-800",children:E.label},E.value))]})]}),l.jsxs("div",{className:"flex-1 min-w-[180px]",children:[l.jsx("label",{className:"text-white/70 text-xs font-medium block mb-1",children:"Cargo"}),l.jsxs("select",{className:"w-full px-3 py-2 rounded-lg bg-white/20 text-white border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50",value:p,onChange:E=>h(E.target.value),children:[l.jsx("option",{value:"todos",className:"text-slate-800",children:"Todos los cargos"}),g.map(E=>l.jsx("option",{value:E,className:"text-slate-800",children:E},E))]})]})]})]}),l.jsxs("div",{className:"flex flex-col lg:flex-row",children:[l.jsxs("div",{className:"flex-1 p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("button",{onClick:b,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:l.jsx(me,{name:"chevron-right",size:24,className:"rotate-180"})}),l.jsxs("div",{className:"text-center",children:[l.jsxs("h3",{className:"text-xl font-bold text-slate-800",children:[k5[s]," ",a]}),l.jsx("button",{onClick:_,className:"text-sm text-brand-600 hover:text-brand-700 font-medium mt-1",children:"Ir a hoy"})]}),l.jsx("button",{onClick:S,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:l.jsx(me,{name:"chevron-right",size:24})})]}),l.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:Tue.map((E,T)=>l.jsx("div",{className:`text-center text-sm font-semibold py-2 ${T>=5?"text-slate-400":"text-slate-600"}`,children:E},E))}),l.jsx("div",{className:"grid grid-cols-7 gap-1",children:x.map((E,T)=>{if(E===null)return l.jsx("div",{className:"h-16"},`empty-${T}`);const L=y(E),O=L.length>0,I=c===E,D=A(E),z=j(T);return l.jsxs("button",{onClick:()=>u(E),className:`
                                            h-16 rounded-lg border-2 transition-all text-left p-1 relative
                                            ${I?"border-brand-500 bg-brand-50 shadow-md":"border-transparent"}
                                            ${D?"ring-2 ring-brand-400 ring-offset-1":""}
                                            ${z?"bg-slate-50":"bg-white"}
                                            ${O?"hover:border-brand-300":"hover:bg-slate-50"}
                                        `,children:[l.jsx("span",{className:`
                                            text-sm font-semibold
                                            ${D?"text-brand-600":z?"text-slate-400":"text-slate-700"}
                                        `,children:E}),O&&l.jsxs("div",{className:"mt-1 space-y-0.5",children:[L.slice(0,2).map((Y,se)=>l.jsx("div",{className:"text-[10px] bg-amber-100 text-amber-800 rounded px-1 truncate font-medium",title:`${Y.nombre} - ${Y.cargo}`,children:Y.nombre.split(" ")[0]},se)),L.length>2&&l.jsxs("div",{className:"text-[10px] text-amber-600 font-medium px-1",children:["+",L.length-2," ms"]})]})]},E)})}),l.jsxs("div",{className:"flex items-center gap-6 mt-6 text-sm text-slate-600",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 bg-amber-100 rounded border border-amber-200"}),l.jsx("span",{children:"Con vacaciones"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 bg-slate-50 rounded border border-slate-200"}),l.jsx("span",{children:"Fin de semana"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 rounded ring-2 ring-brand-400 ring-offset-1"}),l.jsx("span",{children:"Hoy"})]})]})]}),l.jsxs("div",{className:"lg:w-80 border-t lg:border-t-0 lg:border-l border-slate-200 bg-slate-50 p-6",children:[l.jsxs("h4",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[l.jsx(me,{name:"users",size:18}),c?l.jsxs(l.Fragment,{children:["Vacaciones: ",c," ",k5[s]]}):l.jsx(l.Fragment,{children:"Selecciona un da"})]}),c===null?l.jsxs("div",{className:"text-center py-8 text-slate-400",children:[l.jsx(me,{name:"calendar",size:48,className:"mx-auto mb-3 opacity-50"}),l.jsx("p",{children:"Haz clic en un da para ver quin est de vacaciones"})]}):v.length===0?l.jsxs("div",{className:"text-center py-8 text-slate-400",children:[l.jsx(me,{name:"check-circle",size:48,className:"mx-auto mb-3 opacity-50"}),l.jsx("p",{children:"Sin vacaciones registradas para este da"})]}):l.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:v.map((E,T)=>l.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200 shadow-sm",children:[l.jsx("div",{className:"font-semibold text-slate-800",children:E.nombre}),l.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(me,{name:"tag",size:14,className:"text-slate-400"}),E.cargo]}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx(me,{name:"building",size:14,className:"text-slate-400"}),Hu[E.terminal_code]||E.terminal_code]}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx(me,{name:"clock",size:14,className:"text-slate-400"}),E.turno]})]}),l.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-100 text-xs text-slate-500",children:[E.start_date,"  ",E.end_date,l.jsxs("span",{className:"ml-2 font-medium text-brand-600",children:["(",E.business_days," das hbiles)"]})]})]},T))}),m.length>0&&l.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-200",children:[l.jsxs("div",{className:"text-xs text-slate-500 uppercase font-semibold mb-2",children:["Resumen ",k5[s]]}),l.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[l.jsx("div",{className:"text-2xl font-bold text-brand-600",children:m.filter(E=>{const T=`${a}-${String(s+1).padStart(2,"0")}-01`,L=`${a}-${String(s+1).padStart(2,"0")}-31`;return E.end_date>=T&&E.start_date<=L}).length}),l.jsx("div",{className:"text-sm text-slate-600",children:"personas con vacaciones"})]})]})]})]})]})]})},kue=({initialData:e,onSubmit:t,onCancel:r,isLoading:n})=>{const a=Vt(E=>E.context),i=u9(a),[s,o]=F.useState(""),[c,u]=F.useState(null),[d,f]=F.useState(!1),[p,h]=F.useState({rut:"",nombre:"",cargo:"",terminal_code:"",turno:"",start_date:"",end_date:"",return_date:"",conflict_authorized:!1}),[g,m]=F.useState(null),[x,y]=F.useState(!1),v=F.useMemo(()=>!p.start_date||!p.end_date?0:U3(p.start_date,p.end_date),[p.start_date,p.end_date]),b=F.useMemo(()=>!p.start_date||!p.end_date?0:B3(p.start_date,p.end_date),[p.start_date,p.end_date]);F.useEffect(()=>{e&&(h({rut:e.rut,nombre:e.nombre,cargo:e.cargo,terminal_code:e.terminal_code,turno:e.turno,start_date:e.start_date,end_date:e.end_date,return_date:e.return_date,conflict_authorized:e.conflict_authorized}),o(Yn(e.rut)))},[e]);const S=F.useMemo(()=>{if(!s||!i.data)return[];const E=ed(s).toLowerCase();return i.data.filter(T=>T.status==="ACTIVO").filter(T=>T.rut.toLowerCase().includes(E)||T.nombre.toLowerCase().includes(E)).slice(0,8)},[s,i.data]);F.useEffect(()=>{(async()=>{if(!p.cargo||!p.terminal_code||!p.turno||!p.start_date||!p.end_date){m(null);return}y(!0);try{const T=await _9(p.cargo,p.terminal_code,p.turno,p.start_date,p.end_date,e==null?void 0:e.rut);m(T)}catch(T){console.error("Error checking conflicts:",T)}finally{y(!1)}})()},[p.cargo,p.terminal_code,p.turno,p.start_date,p.end_date,e==null?void 0:e.rut]),F.useEffect(()=>{if(p.end_date){const E=new Date(p.end_date+"T12:00:00");for(E.setDate(E.getDate()+1);E.getDay()===0||E.getDay()===6;)E.setDate(E.getDate()+1);h(T=>({...T,return_date:E.toISOString().split("T")[0]}))}},[p.end_date]);const _=E=>{u(E),o(Yn(E.rut)),h(T=>({...T,rut:E.rut,nombre:E.nombre,cargo:E.cargo,terminal_code:E.terminal_code,turno:E.turno})),f(!1)},A=async E=>{E.preventDefault(),await t(p)},j=p.rut&&p.start_date&&p.end_date&&p.return_date&&(!(g!=null&&g.hasConflict)||p.conflict_authorized);return l.jsxs("form",{onSubmit:A,className:"space-y-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("label",{className:"label",children:"Buscar Trabajador por RUT"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",className:"input pr-10",placeholder:"Ingrese RUT o nombre...",value:s,onChange:E=>{o(E.target.value),f(!0)},onFocus:()=>f(!0)}),l.jsx(me,{name:"search",size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"})]}),d&&S.length>0&&l.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:S.map(E=>l.jsx("button",{type:"button",onClick:()=>_(E),className:"w-full px-4 py-3 text-left hover:bg-slate-50 border-b last:border-b-0 border-slate-100",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-slate-800",children:E.nombre}),l.jsx("div",{className:"text-sm text-slate-500 font-mono",children:Yn(E.rut)})]}),l.jsxs("div",{className:"text-right text-sm text-slate-500",children:[l.jsx("div",{children:E.cargo}),l.jsx("div",{children:E.turno})]})]})},E.id))}),d&&s&&S.length===0&&i.data&&l.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg p-4 text-slate-500 text-sm",children:"No se encontraron trabajadores activos"})]}),c&&l.jsx("div",{className:"bg-brand-50 border border-brand-200 rounded-lg p-4",children:l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 block",children:"Nombre"}),l.jsx("span",{className:"font-semibold text-slate-800",children:c.nombre})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 block",children:"Cargo"}),l.jsx("span",{className:"font-semibold text-slate-800",children:c.cargo})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 block",children:"Terminal"}),l.jsx("span",{className:"font-semibold text-slate-800",children:Hu[c.terminal_code]||c.terminal_code})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 block",children:"Turno"}),l.jsx("span",{className:"font-semibold text-slate-800",children:c.turno})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha Inicio"}),l.jsx("input",{type:"date",className:"input",value:p.start_date,onChange:E=>h(T=>({...T,start_date:E.target.value})),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha Trmino"}),l.jsx("input",{type:"date",className:"input",value:p.end_date,min:p.start_date,onChange:E=>h(T=>({...T,end_date:E.target.value})),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Fecha Vuelta"}),l.jsx("input",{type:"date",className:"input",value:p.return_date,min:p.end_date,onChange:E=>h(T=>({...T,return_date:E.target.value})),required:!0})]})]}),p.start_date&&p.end_date&&l.jsx("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-slate-700",children:v}),l.jsx("div",{className:"text-sm text-slate-500",children:"Das calendario"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-brand-600",children:b}),l.jsx("div",{className:"text-sm text-slate-500",children:"Das a descontar"}),l.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"(sin sbados ni domingos)"})]})]})}),x&&l.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4 text-center text-slate-500",children:[l.jsx(me,{name:"clock",size:20,className:"inline-block mr-2 animate-spin"}),"Verificando disponibilidad..."]}),(g==null?void 0:g.hasConflict)&&!x&&l.jsx("div",{className:"bg-amber-50 border border-amber-300 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(me,{name:"alert-triangle",size:24,className:"text-amber-600 shrink-0 mt-0.5"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-semibold text-amber-800 mb-2",children:"Conflicto de Personal Detectado"}),l.jsxs("p",{className:"text-sm text-amber-700 mb-3",children:["Hay ",g.conflictingVacations.length," persona(s) del mismo cargo, terminal y turno con vacaciones en fechas solapadas."]}),l.jsx("div",{className:"bg-white/50 rounded p-3 mb-3",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-amber-700",children:"Personal total:"}),l.jsx("span",{className:"font-bold ml-2",children:g.totalStaffCount})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-amber-700",children:"Disponibles:"}),l.jsx("span",{className:"font-bold ml-2 text-amber-800",children:g.availableStaffCount})]})]})}),l.jsxs("div",{className:"text-sm text-amber-700 mb-3",children:[l.jsx("strong",{children:"En vacaciones:"}),l.jsx("ul",{className:"mt-1 space-y-1",children:g.conflictingVacations.map((E,T)=>l.jsxs("li",{children:[" ",E.nombre," (",E.start_date," al ",E.end_date,")"]},T))})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:p.conflict_authorized,onChange:E=>h(T=>({...T,conflict_authorized:E.target.checked})),className:"w-4 h-4 text-amber-600 border-amber-300 rounded focus:ring-amber-500"}),l.jsx("span",{className:"text-sm font-medium text-amber-800",children:"Autorizo esta solicitud a pesar del conflicto"})]})]})]})}),g&&!g.hasConflict&&!x&&p.start_date&&p.end_date&&l.jsxs("div",{className:"bg-green-50 border border-green-300 rounded-lg p-4 flex items-center gap-3",children:[l.jsx(me,{name:"check-circle",size:24,className:"text-green-600"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-green-800",children:"Sin conflictos"}),l.jsxs("span",{className:"text-green-700 text-sm ml-2",children:["(",g.availableStaffCount+1," de ",g.totalStaffCount," disponibles despus de esta solicitud)"]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[l.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:!j||n,className:"btn btn-primary",children:n?"Guardando...":e?"Actualizar":"Solicitar Vacaciones"})]})]})},Oue=()=>{const e=Vt(E=>E.context),t=Vt(E=>E.setContext),r=jr(E=>E.session),n=(r==null?void 0:r.supervisorName)??"",a=Wv(n),[i,s]=F.useState({auth_status:"todos"}),[o,c]=F.useState({type:"none"}),[u,d]=F.useState(!1),f=cue(e,i),p=Xv("vacaciones",e),h=mue(),g=bue(),m=Yv(),x=Jv();Qv();const y=[{key:"rut",header:"RUT",value:E=>Yn(E.rut)},{key:"nombre",header:"Nombre",value:E=>E.nombre},{key:"cargo",header:"Cargo",value:E=>E.cargo},{key:"terminal",header:"Terminal",value:E=>ur(E.terminal_code)},{key:"turno",header:"Turno",value:E=>E.turno},{key:"start_date",header:"Fecha Inicio",value:E=>E.start_date},{key:"end_date",header:"Fecha Trmino",value:E=>E.end_date},{key:"return_date",header:"Fecha Vuelta",value:E=>E.return_date},{key:"calendar_days",header:"Das Calendario",value:E=>E.calendar_days.toString()},{key:"business_days",header:"Das Hbiles",value:E=>E.business_days.toString()},{key:"has_conflict",header:"Conflicto",value:E=>E.has_conflict?"S":"No"},{key:"auth_status",header:"Estado",value:E=>E.auth_status}],v=async E=>{await h.mutateAsync({values:E,createdBy:n}),c({type:"none"})},b=async E=>{o.type==="edit"&&(await g.mutateAsync({id:o.record.id,values:E}),c({type:"none"}))},S=async()=>{if(o.type!=="authorize")return;const E=o.record;await m.mutateAsync({subsection:"vacaciones",id:E.id,authorizedBy:n,rut:E.rut,nombre:E.nombre,terminal:E.terminal_code,date:E.start_date}),c({type:"none"})},_=async E=>{if(o.type!=="reject"||!E)return;const T=o.record;await x.mutateAsync({subsection:"vacaciones",id:T.id,authorizedBy:n,reason:E,rut:T.rut,nombre:T.nombre,terminal:T.terminal_code,date:T.start_date}),c({type:"none"})},A=E=>{switch(E){case"AUTORIZADO":return l.jsx("span",{className:"badge badge-success",children:E});case"RECHAZADO":return l.jsx("span",{className:"badge badge-danger",children:E});default:return l.jsx("span",{className:"badge badge-warning",children:E})}},j=E=>new Date(E+"T12:00:00").toLocaleDateString("es-CL",{day:"2-digit",month:"short"});return l.jsxs("div",{className:"space-y-4",children:[l.jsx(gn,{title:"Vacaciones",description:"Gestin inteligente de vacaciones con deteccin de conflictos",actions:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{className:"btn btn-secondary",onClick:()=>d(!0),children:[l.jsx(me,{name:"calendar",size:18})," Calendario"]}),l.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[l.jsx(me,{name:"plus",size:18})," Nueva Solicitud"]}),l.jsx(Na,{onExportView:()=>xr({filename:"vacaciones",sheetName:"Datos",rows:f.data||[],columns:y}),onExportAll:()=>xr({filename:"vacaciones_all",sheetName:"Datos",rows:f.data||[],columns:y})})]})}),l.jsx(Vv,{data:p.data,isLoading:p.isLoading}),l.jsxs(ss,{terminalContext:e,onTerminalChange:t,children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsx("select",{className:"input",value:i.auth_status,onChange:E=>s(T=>({...T,auth_status:E.target.value})),children:Kv.map(E=>l.jsx("option",{value:E.value,children:E.label},E.value))})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Buscar"}),l.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:E=>s(T=>({...T,search:E.target.value}))})]})]}),f.isLoading&&l.jsx(kn,{label:"Cargando vacaciones..."}),f.isError&&l.jsx(Fa,{onRetry:()=>f.refetch()}),!f.isLoading&&!f.isError&&l.jsx("div",{className:"table-container overflow-x-auto",children:l.jsxs("table",{className:"table",children:[l.jsx("thead",{className:"table-header",children:l.jsxs("tr",{children:[l.jsx("th",{className:"table-header-cell",children:"RUT"}),l.jsx("th",{className:"table-header-cell",children:"Nombre"}),l.jsx("th",{className:"table-header-cell",children:"Cargo/Turno"}),l.jsx("th",{className:"table-header-cell",children:"Perodo"}),l.jsx("th",{className:"table-header-cell text-center",children:"Das"}),l.jsx("th",{className:"table-header-cell",children:"Conflicto"}),l.jsx("th",{className:"table-header-cell",children:"Estado"}),l.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),l.jsx("tbody",{className:"table-body",children:(f.data||[]).length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"table-cell text-center text-slate-500 py-8",children:"No hay solicitudes de vacaciones registradas"})}):(f.data||[]).map(E=>l.jsxs("tr",{className:"table-row",children:[l.jsx("td",{className:"table-cell font-mono text-sm",children:Yn(E.rut)}),l.jsx("td",{className:"table-cell font-medium",children:E.nombre}),l.jsxs("td",{className:"table-cell",children:[l.jsx("div",{className:"text-sm",children:E.cargo}),l.jsx("div",{className:"text-xs text-slate-500",children:E.turno})]}),l.jsxs("td",{className:"table-cell",children:[l.jsxs("div",{className:"text-sm",children:[j(E.start_date)," - ",j(E.end_date)]}),l.jsxs("div",{className:"text-xs text-slate-500",children:["Vuelta: ",j(E.return_date)]})]}),l.jsxs("td",{className:"table-cell text-center",children:[l.jsx("div",{className:"text-lg font-bold text-brand-600",children:E.business_days}),l.jsxs("div",{className:"text-xs text-slate-500",children:[E.calendar_days," cal"]})]}),l.jsx("td",{className:"table-cell",children:E.has_conflict?l.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium ${E.conflict_authorized?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:[l.jsx(me,{name:"alert-triangle",size:12}),E.conflict_authorized?"Autorizado":"Sin autorizar"]}):l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-700",children:[l.jsx(me,{name:"check-circle",size:12}),"Sin conflicto"]})}),l.jsx("td",{className:"table-cell",children:A(E.auth_status)}),l.jsx("td",{className:"table-cell",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[E.auth_status==="PENDIENTE"&&l.jsx("button",{onClick:()=>c({type:"edit",record:E}),className:"btn btn-ghost btn-icon",title:"Editar",children:l.jsx(me,{name:"clipboard",size:16})}),a&&E.auth_status==="PENDIENTE"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>c({type:"authorize",record:E}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:l.jsx(me,{name:"check-circle",size:16})}),l.jsx("button",{onClick:()=>c({type:"reject",record:E}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:l.jsx(me,{name:"x",size:16})})]})]})})]},E.id))})]})}),(o.type==="create"||o.type==="edit")&&l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),l.jsxs("div",{className:"relative w-full max-w-3xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-xl font-bold",children:o.type==="create"?"Nueva Solicitud de Vacaciones":"Editar Solicitud"}),l.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:l.jsx(me,{name:"x",size:24})})]}),l.jsx(kue,{initialData:o.type==="edit"?o.record:void 0,onSubmit:o.type==="create"?v:b,onCancel:()=>c({type:"none"}),isLoading:h.isPending||g.isPending})]})]}),o.type==="authorize"&&l.jsx(yl,{mode:"authorize",itemName:o.record.nombre,onConfirm:S,onCancel:()=>c({type:"none"}),isLoading:m.isPending}),o.type==="reject"&&l.jsx(yl,{mode:"reject",itemName:o.record.nombre,onConfirm:_,onCancel:()=>c({type:"none"}),isLoading:x.isPending}),l.jsx(Cue,{isOpen:u,onClose:()=>d(!1),vacaciones:f.data||[]})]})};async function Pue(){if(!Zt())return[];const{data:e,error:t}=await Ee.from("shift_types").select("*").order("code");if(t)throw t;return e||[]}async function Lue(e,t){if(!Zt())return[];let r=Ee.from("staff").select("id, rut, nombre, cargo, terminal_code, turno, horario, contacto, status").order("cargo").order("nombre"),n=[];if(t!=null&&t.terminal&&t.terminal!=="ALL"?n=[t.terminal]:n=Ui(e),n.length>0&&(r=r.in("terminal_code",n)),t!=null&&t.turno&&t.turno!=="TODOS"&&(t.turno==="DIA"?r=r.or("turno.ilike.%dia%,turno.ilike.%day%"):r=r.or("turno.ilike.%noche%,turno.ilike.%night%")),t!=null&&t.search){const p=`%${t.search}%`;r=r.or(`rut.ilike.${p},nombre.ilike.${p}`)}const{data:a,error:i}=await r;if(i)throw i;const{data:s,error:o}=await Ee.from("staff_shifts").select("*");o&&console.warn("fetchStaffWithShifts - Error fetching shifts:",o.message),console.log("fetchStaffWithShifts - Fetched shifts:",(s==null?void 0:s.length)??0);const c=new Map;if(s)for(const p of s)c.set(p.staff_id,p),console.log("Shift loaded:",p.staff_id,"->",p.shift_type_code,p.variant_code);const{data:u}=await Ee.from("staff_admonitions").select("staff_id"),d=new Map;if(u)for(const p of u)d.set(p.staff_id,(d.get(p.staff_id)||0)+1);const f=(a||[]).map(p=>{const h=p.id,g=c.get(h);return{id:h,rut:p.rut,nombre:p.nombre,cargo:p.cargo,terminal_code:p.terminal_code,turno:p.turno,horario:p.horario,contacto:p.contacto,status:p.status,shift:g,admonitionCount:d.get(h)||0}});return console.log("fetchStaffWithShifts - Loaded",f.length,"staff, with shifts:",f.filter(p=>p.shift).length),f}async function Iue(e){if(!Zt())return null;const{data:t,error:r}=await Ee.from("staff_shifts").select("*").eq("staff_id",e).single();if(r&&r.code!=="PGRST116")throw r;return t||null}async function Rue(e){if(!Zt())throw new Error("Supabase not configured");console.log("upsertStaffShift - Attempting insert:",e);const{data:t,error:r}=await Ee.from("staff_shifts").upsert({staff_id:e.staff_id,shift_type_code:e.shift_type_code,variant_code:e.variant_code,start_date:e.start_date||"2026-01-01"},{onConflict:"staff_id"}).select().single();if(r)throw console.error("upsertStaffShift - ERROR:",r),r;return console.log("upsertStaffShift - SUCCESS:",t),t}async function Due(e){if(!Zt())return null;try{const{data:t,error:r}=await Ee.from("staff_shift_special_templates").select("*").eq("staff_id",e).single();return r&&r.code!=="PGRST116"&&r.code!=="406"?(console.warn("fetchSpecialTemplate error (ignoring):",r.code,r.message),null):t||null}catch(t){return console.warn("fetchSpecialTemplate exception (ignoring):",t),null}}async function Mue(e){if(!Zt()||e.length===0)return[];try{const{data:t,error:r}=await Ee.from("staff_shift_special_templates").select("*").in("staff_id",e);return r?(console.warn("fetchAllSpecialTemplates error (ignoring):",r.message),[]):t||[]}catch(t){return console.warn("fetchAllSpecialTemplates exception (ignoring):",t),[]}}async function Fue(e,t){if(!Zt())throw new Error("Supabase not configured");const{data:r,error:n}=await Ee.from("staff_shift_special_templates").upsert({staff_id:e,off_days_json:t},{onConflict:"staff_id"}).select().single();if(n)throw n;return r}async function $ue(e,t,r){if(!Zt()||e.length===0)return[];const n=`${t}-${String(r+1).padStart(2,"0")}-01`,a=new Date(t,r+1,0).toISOString().split("T")[0],{data:i,error:s}=await Ee.from("staff_shift_overrides").select("*").in("staff_id",e).gte("override_date",n).lte("override_date",a);if(s)throw s;return i||[]}async function Bue(e,t,r){if(!Zt()||e.length===0)return[];const n=`${t}-${String(r+1).padStart(2,"0")}-01`,a=new Date(t,r+1,0).toISOString().split("T")[0],{data:i,error:s}=await Ee.from("attendance_marks").select("*").in("staff_id",e).gte("mark_date",n).lte("mark_date",a);if(s)throw s;return i||[]}async function Uue(e,t){if(!Zt())throw new Error("Supabase not configured");const{data:r,error:n}=await Ee.from("attendance_marks").upsert({staff_id:e.staff_id,mark_date:e.mark_date,mark:e.mark,note:e.note||null,created_by:t},{onConflict:"staff_id,mark_date"}).select().single();if(n)throw n;return r}async function zue(e,t,r){if(!Zt())throw new Error("Supabase not configured");if(e.length===0)return[];const n=e.map(s=>({staff_id:s,mark_date:t,mark:"P",created_by:r})),{data:a,error:i}=await Ee.from("attendance_marks").upsert(n,{onConflict:"staff_id,mark_date"}).select();if(i)throw i;return a||[]}async function que(e,t,r){if(!Zt()||e.length===0)return[];const n=`${t}-${String(r+1).padStart(2,"0")}-01`,a=new Date(t,r+1,0).toISOString().split("T")[0],{data:i,error:s}=await Ee.from("attendance_licenses").select("*").in("staff_id",e).or(`start_date.lte.${a},end_date.gte.${n}`);if(s)throw s;return i||[]}async function Hue(e,t){if(!Zt())throw new Error("Supabase not configured");let r=null;if(e.document){const i=`${e.staff_id}/${Date.now()}_${e.document.name}`,{error:s}=await Ee.storage.from("attendance-docs").upload(i,e.document);if(s)throw s;r=i}const{data:n,error:a}=await Ee.from("attendance_licenses").insert({staff_id:e.staff_id,start_date:e.start_date,end_date:e.end_date,note:e.note||null,document_path:r,created_by:t}).select().single();if(a)throw a;return n}async function Wue(e,t,r){if(!Zt()||e.length===0)return[];const n=`${t}-${String(r+1).padStart(2,"0")}-01`,a=new Date(t,r+1,0).toISOString().split("T")[0],{data:i,error:s}=await Ee.from("attendance_permissions").select("*").in("staff_id",e).or(`start_date.lte.${a},end_date.gte.${n}`);if(s)throw s;return i||[]}async function Vue(e,t){if(!Zt())throw new Error("Supabase not configured");const{data:r,error:n}=await Ee.from("attendance_permissions").insert({staff_id:e.staff_id,start_date:e.start_date,end_date:e.end_date,permission_type:e.permission_type,note:e.note||null,created_by:t}).select().single();if(n)throw n;return r}async function Gue(e,t,r){if(!Zt()||e.length===0)return[];const n=`${t}-${String(r+1).padStart(2,"0")}-01`,a=new Date(t,r+1,0).toISOString().split("T")[0],{data:i,error:s}=await Ee.from("staff").select("id, rut").in("id",e);if(s)throw s;const o=(i||[]).map(f=>f.rut),c=Object.fromEntries((i||[]).map(f=>[f.rut,f.id])),{data:u,error:d}=await Ee.from("attendance_vacaciones").select("rut, start_date, end_date").in("rut",o).eq("auth_status","AUTORIZADO").or(`start_date.lte.${a},end_date.gte.${n}`);if(d)throw d;return(u||[]).map(f=>({staff_id:c[f.rut],start_date:f.start_date,end_date:f.end_date}))}async function Kue(e,t,r){if(!Zt())return{noMarcaciones:[],sinCredenciales:[],cambiosDia:[],autorizaciones:[]};const n=`${t}-${String(r+1).padStart(2,"0")}-01`,a=new Date(t,r+1,0).toISOString().split("T")[0],[i,s,o,c]=await Promise.all([Ee.from("attendance_no_marcaciones").select("rut, date").in("terminal_code",e).gte("date",n).lte("date",a),Ee.from("attendance_sin_credenciales").select("rut, date").in("terminal_code",e).gte("date",n).lte("date",a),Ee.from("attendance_cambios_dia").select("rut, date").in("terminal_code",e).gte("date",n).lte("date",a),Ee.from("attendance_autorizaciones").select("rut, authorization_date").in("terminal_code",e).gte("authorization_date",n).lte("authorization_date",a)]);return{noMarcaciones:(i.data||[]).map(u=>({rut:u.rut,date:u.date})),sinCredenciales:(s.data||[]).map(u=>({rut:u.rut,date:u.date})),cambiosDia:(o.data||[]).map(u=>({rut:u.rut,date:u.date})),autorizaciones:(c.data||[]).map(u=>({rut:u.rut,date:u.authorization_date}))}}async function Xue(e,t){if(!Zt())throw new Error("Supabase not configured");const{data:r,error:n}=await Ee.from("offboarding_requests").insert({staff_id:e.staff_id,staff_rut:e.staff_rut,staff_name:e.staff_name,terminal_code:e.terminal_code,reason:e.reason,requested_by:t,status:"ENVIADA"}).select().single();if(n)throw n;return r}function Yue(e,t,r){const n=[],a=Ee.channel("attendance_marks_changes").on("postgres_changes",{event:"*",schema:"public",table:"attendance_marks"},()=>e()).subscribe();n.push(a);const i=Ee.channel("attendance_licenses_changes").on("postgres_changes",{event:"*",schema:"public",table:"attendance_licenses"},()=>t()).subscribe();n.push(i);const s=Ee.channel("attendance_permissions_changes").on("postgres_changes",{event:"*",schema:"public",table:"attendance_permissions"},()=>r()).subscribe();return n.push(s),()=>{n.forEach(o=>{Ee.removeChannel(o)})}}const Nr={all:["asistencia2026"],shiftTypes:()=>[...Nr.all,"shiftTypes"],staff:()=>[...Nr.all,"staff"],staffList:(e,t)=>[...Nr.staff(),e,t],staffShift:e=>[...Nr.all,"staffShift",e],specialTemplate:e=>[...Nr.all,"specialTemplate",e],monthData:()=>[...Nr.all,"monthData"],overrides:(e,t,r)=>[...Nr.monthData(),"overrides",e.join(","),t,r],marks:(e,t,r)=>[...Nr.monthData(),"marks",e.join(","),t,r],licenses:(e,t,r)=>[...Nr.monthData(),"licenses",e.join(","),t,r],permissions:(e,t,r)=>[...Nr.monthData(),"permissions",e.join(","),t,r],vacations:(e,t,r)=>[...Nr.monthData(),"vacations",e.join(","),t,r],incidences:(e,t,r)=>[...Nr.monthData(),"incidences",e.join(","),t,r]},q3=()=>zt({queryKey:Nr.shiftTypes(),queryFn:Pue}),Jue=(e,t)=>zt({queryKey:Nr.staffList(e,t),queryFn:()=>Lue(e,t)}),Que=e=>zt({queryKey:Nr.staffShift(e||""),queryFn:()=>e?Iue(e):null,enabled:!!e}),Zue=e=>zt({queryKey:Nr.specialTemplate(e||""),queryFn:()=>e?Due(e):null,enabled:!!e}),ede=e=>zt({queryKey:["asistencia2026","specialTemplates","all",e.join(",")],queryFn:()=>Mue(e),enabled:e.length>0}),tde=(e,t,r)=>zt({queryKey:Nr.overrides(e,t,r),queryFn:()=>$ue(e,t,r),enabled:e.length>0}),rde=(e,t,r)=>zt({queryKey:Nr.marks(e,t,r),queryFn:()=>Bue(e,t,r),enabled:e.length>0}),nde=(e,t,r)=>zt({queryKey:Nr.licenses(e,t,r),queryFn:()=>que(e,t,r),enabled:e.length>0}),ade=(e,t,r)=>zt({queryKey:Nr.permissions(e,t,r),queryFn:()=>Wue(e,t,r),enabled:e.length>0}),ide=(e,t,r)=>zt({queryKey:Nr.vacations(e,t,r),queryFn:()=>Gue(e,t,r),enabled:e.length>0}),sde=(e,t,r)=>{const n=Ui(e);return zt({queryKey:Nr.incidences(n,t,r),queryFn:()=>Kue(n,t,r)})},ode=()=>{const e=Mt();return Ft({mutationFn:t=>Rue(t),onSuccess:t=>{console.log("useUpsertStaffShift - Invalidating queries for staff_id:",t.staff_id),e.invalidateQueries({queryKey:Nr.all})}})},lde=()=>{const e=Mt();return Ft({mutationFn:({staffId:t,offDays:r})=>Fue(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:Nr.specialTemplate(t.staff_id)})}})},cde=()=>{const e=Mt();return Ft({mutationFn:({values:t,createdBy:r})=>Uue(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:Nr.monthData()})}})},ude=()=>{const e=Mt();return Ft({mutationFn:({values:t,createdBy:r})=>Hue(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:Nr.monthData()})}})},dde=()=>{const e=Mt();return Ft({mutationFn:({values:t,createdBy:r})=>Vue(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:Nr.monthData()})}})},fde=()=>{const e=Mt();return Ft({mutationFn:({values:t,requestedBy:r})=>Xue(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:Nr.staff()})}})},hde=()=>{const e=Mt();return Ft({mutationFn:({staffIds:t,date:r,createdBy:n})=>zue(t,r,n),onSuccess:()=>{e.invalidateQueries({queryKey:Nr.monthData()})}})},pde=()=>{const e=Mt();F.useEffect(()=>Yue(()=>{console.log("Attendance marks changed"),e.invalidateQueries({queryKey:Nr.monthData()})},()=>{console.log("Licenses changed"),e.invalidateQueries({queryKey:Nr.monthData()})},()=>{console.log("Permissions changed"),e.invalidateQueries({queryKey:Nr.monthData()})}),[e])},$r={OFF:{bg:"bg-slate-100",text:"text-slate-500",border:"border-slate-200"},WORK_DIA:{bg:"bg-sky-50",text:"text-sky-700",border:"border-sky-200"},WORK_NOCHE:{bg:"bg-indigo-50",text:"text-indigo-700",border:"border-indigo-200"},LIC:{bg:"bg-purple-50",text:"text-purple-700",border:"border-purple-200"},VAC:{bg:"bg-teal-50",text:"text-teal-700",border:"border-teal-200"},PER:{bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-200"},PRESENTE:{bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-200"},AUSENTE:{bg:"bg-red-50",text:"text-red-700",border:"border-red-200"},PENDING:{bg:"bg-yellow-50",text:"text-yellow-700",border:"border-yellow-300"},DESVINCULADO:{bg:"bg-slate-50",text:"text-slate-400 line-through",border:"border-slate-200"}},Bm={NM:"bg-yellow-100 text-yellow-800 border-yellow-300",NC:"bg-orange-100 text-orange-800 border-orange-300",CD:"bg-blue-100 text-blue-800 border-blue-300",AUT:"bg-green-100 text-green-800 border-green-300"},mde={EL_ROBLE:"bg-emerald-600 hover:bg-emerald-700 text-white",LA_REINA:"bg-blue-600 hover:bg-blue-700 text-white",EL_SALTO:"bg-amber-600 hover:bg-amber-700 text-white",LO_ECHEVERS:"bg-purple-600 hover:bg-purple-700 text-white",COLO_COLO:"bg-red-600 hover:bg-red-700 text-white",ALL:"bg-slate-600 hover:bg-slate-700 text-white"},Sd={count:"bg-slate-100 text-slate-700",programmed:"bg-sky-100 text-sky-700",license:"bg-purple-100 text-purple-700",vacation:"bg-teal-100 text-teal-700",permission:"bg-amber-100 text-amber-700",incident:"bg-orange-100 text-orange-700",pending:"bg-red-100 text-red-700"},gde={SUPERVISOR:"bg-indigo-50/50",INSPECTOR:"bg-sky-50/50",CONDUCTOR:"bg-emerald-50/50",PLANILLERO:"bg-amber-50/50",CLEANER:"bg-slate-50/50"},uf={secondary:"bg-slate-100 hover:bg-slate-200 text-slate-700",success:"bg-emerald-600 hover:bg-emerald-700 text-white",danger:"bg-red-600 hover:bg-red-700 text-white"},vde=({isOff:e,horario:t,reducido:r=!1,turno:n,mark:a,incidencies:i=[],isToday:s=!1,isDisabled:o=!1,licenseCode:c,vacationCode:u,permissionCode:d,onClick:f})=>{const p=()=>{if(o){const x=$r.DESVINCULADO;return`${x.bg} ${x.text} border ${x.border}`}if(c){const x=$r.LIC;return`${x.bg} ${x.text} border ${x.border}`}if(u){const x=$r.VAC;return`${x.bg} ${x.text} border ${x.border}`}if(d){const x=$r.PER;return`${x.bg} ${x.text} border ${x.border}`}if(a){const x=a.mark==="P"?$r.PRESENTE:$r.AUSENTE;return`${x.bg} ${x.text} border ${x.border}`}if(e){const x=$r.OFF;return`${x.bg} ${x.text} border ${x.border}`}const m=n==="NOCHE"?$r.WORK_NOCHE:$r.WORK_DIA;return`${m.bg} ${m.text} border ${m.border}`},h=()=>{if(c)return l.jsx("span",{className:"text-xs font-bold",children:"LIC"});if(u)return l.jsx("span",{className:"text-xs font-bold",children:"VAC"});if(d)return l.jsx("span",{className:"text-xs font-bold",children:"PER"});if(a)return l.jsx("span",{className:"text-lg font-bold",children:a.mark});if(e)return l.jsx("span",{className:"text-lg font-bold text-slate-500",children:"L"});if(t){const m=xde(t,r);return l.jsx("div",{className:"text-center leading-tight",children:l.jsx("div",{className:`text-[10px] font-semibold ${r?"text-amber-600":""}`,children:m})})}return l.jsx("span",{className:"text-xs font-medium",children:n==="NOCHE"?"N":"D"})},g=i.slice(0,2);return l.jsxs("button",{onClick:f,disabled:o,className:`
                relative w-full h-14 rounded-md transition-all
                flex flex-col items-center justify-center
                ${p()}
                ${s?"ring-2 ring-brand-500 ring-offset-1":""}
                ${o?"cursor-not-allowed opacity-50":"hover:scale-105 cursor-pointer hover:shadow-md"}
            `,children:[h(),g.length>0&&l.jsx("div",{className:"absolute bottom-0.5 left-0.5 right-0.5 flex gap-0.5 justify-center",children:g.map(m=>l.jsx("span",{className:`text-[7px] font-bold px-0.5 rounded ${Bm[m]}`,title:yde(m),children:m},m))})]})};function xde(e,t){if(!e)return"";const r=e.match(/(\d{1,2}):(\d{2})-(\d{1,2}):(\d{2})/);if(!r)return e;const n=parseInt(r[1],10);let a=parseInt(r[3],10);return t&&(a=a===0?23:a-1),`${n.toString().padStart(2,"0")}-${a.toString().padStart(2,"0")}`}function yde(e){return{NM:"No Marcacin",NC:"Sin Credencial",CD:"Cambio de Da",AUT:"Autorizacin"}[e]||e}const T9=new Date(Date.UTC(2025,11,29,12,0,0));function C9(e,t){const r=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate());return Math.floor((n-r)/(1e3*60*60*24))}function bde(e){const[t,r,n]=e.split("-").map(Number);return new Date(Date.UTC(t,r-1,n,12,0,0))}function wde(e,t){const r=C9(T9,e);return(Math.floor(r/7)%t+t)%t}function _de(e){return e.getUTCDay()}function O5(e,t,r){return e>=t&&e<=r}function k9(e,t,r,n,a,i){var c,u;if(i)return i.override_type==="OFF";const s=bde(e),o=_de(s);switch(n.type){case"fixed":return((c=n.offDays)==null?void 0:c.includes(o))??!1;case"rotating":{if(!n.weeks||!n.cycle)return!1;let d=wde(s,n.cycle);r==="CONTRATURNO"&&(d=(d+1)%n.cycle);const f=n.weeks[d];return((u=f==null?void 0:f.offDays)==null?void 0:u.includes(o))??!1}case"manual":{if(!a||!n.cycleDays)return!1;const f=(C9(T9,s)%n.cycleDays+n.cycleDays)%n.cycleDays;return a.off_days_json.includes(f)}default:return!1}}function O9(e){if(!e)return"DIA";const t=e.match(/^(\d{1,2}):(\d{2})/);if(!t)return"DIA";const r=parseInt(t[1],10);return r>=20||r<6?"NOCHE":"DIA"}function Sde(e,t){return new Date(e,t+1,0).getDate()}function Nde(e,t){const r=Sde(e,t),n=[];for(let a=1;a<=r;a++){const i=new Date(e,t,a);n.push(i.toISOString().split("T")[0])}return n}function jde(e){return new Date(e+"T12:00:00").getDate()}function P9(e){const t=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],r=new Date(e+"T12:00:00");return t[r.getDay()]}function FO(e){const t=new Date().toISOString().split("T")[0];return e===t}function Ade(e){const t=new Date().toISOString().split("T")[0];return e<t}function Ede(e){return["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][e]}function fj(e){const t=new Date(e+"T12:00:00"),r=t.getDay(),n=t.getDate()-r+(r===0?-6:1);return new Date(t.setDate(n)).toISOString().split("T")[0]}function H3(e){const t=[],r=new Date(e+"T12:00:00");for(let n=0;n<7;n++){const a=new Date(r);a.setDate(r.getDate()+n),t.push(a.toISOString().split("T")[0])}return t}function Tde(e){const t=new Date(e+"T12:00:00");return t.setDate(t.getDate()-7),t.toISOString().split("T")[0]}function Cde(e){const t=new Date(e+"T12:00:00");return t.setDate(t.getDate()+7),t.toISOString().split("T")[0]}function $O(e){const t=H3(e),r=new Date(t[0]+"T12:00:00"),n=new Date(t[6]+"T12:00:00"),a=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],i=r.getDate(),s=a[r.getMonth()],o=n.getDate(),c=a[n.getMonth()],u=n.getFullYear();return r.getMonth()===n.getMonth()?`${i} - ${o} ${s} ${u}`:`${i} ${s} - ${o} ${c} ${u}`}function L9(e){const t=H3(e);return[t[0],t[1]]}function kde(e,t){if(!e)return e;const r=e.match(/(\d{1,2}):(\d{2})-(\d{1,2}):(\d{2})/);if(!r)return e;const n=parseInt(r[1],10),a=r[2],i=r[3],s=r[4];return`${((n+1)%24).toString().padStart(2,"0")}:${a}-${i}:${s}`}const Ode=({isOpen:e,onClose:t,staff:r,date:n,currentMark:a,currentNote:i,incidencies:s=[],onMarkPresent:o,onMarkAbsent:c,onRegisterLicense:u,onRegisterPermission:d,onRequestOffboarding:f,isManager:p=!1})=>{const[h,g]=F.useState("none"),[m,x]=F.useState(""),[y,v]=F.useState(n),[b,S]=F.useState(n),[_,A]=F.useState(""),[j,E]=F.useState(n),[T,L]=F.useState(n),[O,I]=F.useState("PERSONAL"),[D,z]=F.useState("");if(!e||!r)return null;const Y=P9(n),se=new Date(n+"T12:00:00").getDate(),ee=r.status==="DESVINCULADO",J=()=>{m.trim()&&(c(m.trim()),x(""),g("none"))},oe=()=>{u(y,b,_||void 0),A(""),g("none")},we=()=>{d(j,T,O,D||void 0),z(""),g("none")};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 transition-opacity",onClick:t}),l.jsxs("div",{className:"fixed right-0 top-0 h-full w-full max-w-md bg-white shadow-xl z-50 flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-slate-50",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-900",children:r.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:[r.rut," | ",r.cargo," | ",Y," ",se]})]}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-200 rounded-lg transition-colors",children:l.jsx(me,{name:"x",size:20})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[ee&&l.jsxs("div",{className:"p-3 bg-slate-100 rounded-lg text-slate-600 text-sm",children:[l.jsx(me,{name:"alert-triangle",size:16,className:"inline mr-2"}),"Este trabajador est desvinculado. No se permiten nuevas marcaciones."]}),a&&l.jsxs("div",{className:`p-3 rounded-lg flex items-center gap-2 ${a==="P"?$r.PRESENTE.bg:$r.AUSENTE.bg}`,children:[l.jsx(me,{name:a==="P"?"check-circle":"x-circle",size:20}),l.jsx("span",{className:"font-medium",children:a==="P"?"Presente":"Ausente"}),i&&l.jsxs("span",{className:"text-sm opacity-75",children:["- ",i]})]}),!ee&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Marcar asistencia"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:o,className:`flex-1 py-2 rounded-lg font-medium transition-colors ${uf.success}`,children:[l.jsx(me,{name:"check",size:16,className:"inline mr-1"}),"Presente (P)"]}),l.jsxs("button",{onClick:()=>g("absent"),className:`flex-1 py-2 rounded-lg font-medium transition-colors ${uf.danger}`,children:[l.jsx(me,{name:"x",size:16,className:"inline mr-1"}),"Ausente (A)"]})]})]}),h==="absent"&&l.jsxs("div",{className:"space-y-3 p-3 bg-red-50 rounded-lg border border-red-100",children:[l.jsx("h4",{className:"text-sm font-medium text-red-800",children:"Registrar Ausencia"}),l.jsx("textarea",{value:m,onChange:xe=>x(xe.target.value),placeholder:"Motivo de la ausencia (requerido)",className:"w-full p-2 border rounded-lg text-sm resize-none",rows:2}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:J,disabled:!m.trim(),className:"flex-1 py-2 rounded-lg font-medium bg-red-600 text-white disabled:opacity-50",children:"Confirmar"}),l.jsx("button",{onClick:()=>g("none"),className:"px-4 py-2 rounded-lg font-medium bg-slate-100 text-slate-600",children:"Cancelar"})]})]}),!ee&&h==="none"&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Registrar"}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsx("button",{onClick:()=>g("license"),className:`py-2 px-3 rounded-lg text-sm font-medium ${$r.LIC.bg} ${$r.LIC.text} border ${$r.LIC.border}`,children:"Licencia"}),l.jsx("button",{onClick:()=>g("permission"),className:`py-2 px-3 rounded-lg text-sm font-medium ${$r.PER.bg} ${$r.PER.text} border ${$r.PER.border}`,children:"Permiso"}),l.jsx("button",{disabled:!0,className:`py-2 px-3 rounded-lg text-sm font-medium ${$r.VAC.bg} ${$r.VAC.text} border ${$r.VAC.border} opacity-50 cursor-not-allowed`,title:"Gestionar en seccin Vacaciones",children:"Vacacin"})]})]}),h==="license"&&l.jsxs("div",{className:"space-y-3 p-3 bg-purple-50 rounded-lg border border-purple-100",children:[l.jsx("h4",{className:"text-sm font-medium text-purple-800",children:"Registrar Licencia"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-slate-600",children:"Desde"}),l.jsx("input",{type:"date",value:y,onChange:xe=>v(xe.target.value),className:"w-full p-2 border rounded-lg text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-slate-600",children:"Hasta"}),l.jsx("input",{type:"date",value:b,onChange:xe=>S(xe.target.value),className:"w-full p-2 border rounded-lg text-sm"})]})]}),l.jsx("textarea",{value:_,onChange:xe=>A(xe.target.value),placeholder:"Notas (opcional)",className:"w-full p-2 border rounded-lg text-sm resize-none",rows:2}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:oe,className:"flex-1 py-2 rounded-lg font-medium bg-purple-600 text-white",children:"Guardar"}),l.jsx("button",{onClick:()=>g("none"),className:"px-4 py-2 rounded-lg font-medium bg-slate-100 text-slate-600",children:"Cancelar"})]})]}),h==="permission"&&l.jsxs("div",{className:"space-y-3 p-3 bg-amber-50 rounded-lg border border-amber-100",children:[l.jsx("h4",{className:"text-sm font-medium text-amber-800",children:"Registrar Permiso"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-slate-600",children:"Desde"}),l.jsx("input",{type:"date",value:j,onChange:xe=>E(xe.target.value),className:"w-full p-2 border rounded-lg text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-slate-600",children:"Hasta"}),l.jsx("input",{type:"date",value:T,onChange:xe=>L(xe.target.value),className:"w-full p-2 border rounded-lg text-sm"})]})]}),l.jsxs("select",{value:O,onChange:xe=>I(xe.target.value),className:"w-full p-2 border rounded-lg text-sm",children:[l.jsx("option",{value:"PERSONAL",children:"Personal"}),l.jsx("option",{value:"MEDICO",children:"Mdico"}),l.jsx("option",{value:"FAMILIAR",children:"Familiar"}),l.jsx("option",{value:"OTRO",children:"Otro"})]}),l.jsx("textarea",{value:D,onChange:xe=>z(xe.target.value),placeholder:"Notas (opcional)",className:"w-full p-2 border rounded-lg text-sm resize-none",rows:2}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:we,className:"flex-1 py-2 rounded-lg font-medium bg-amber-600 text-white",children:"Guardar"}),l.jsx("button",{onClick:()=>g("none"),className:"px-4 py-2 rounded-lg font-medium bg-slate-100 text-slate-600",children:"Cancelar"})]})]}),s.length>0&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Incidencias relacionadas"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.includes("NM")&&l.jsx("span",{className:"px-2 py-1 text-sm bg-yellow-100 text-yellow-800 rounded",children:"No Marcacin"}),s.includes("NC")&&l.jsx("span",{className:"px-2 py-1 text-sm bg-orange-100 text-orange-800 rounded",children:"Sin Credencial"}),s.includes("CD")&&l.jsx("span",{className:"px-2 py-1 text-sm bg-blue-100 text-blue-800 rounded",children:"Cambio de Da"}),s.includes("AUT")&&l.jsx("span",{className:"px-2 py-1 text-sm bg-green-100 text-green-800 rounded",children:"Autorizacin"})]})]}),p&&!ee&&f&&l.jsx("div",{className:"pt-4 border-t",children:l.jsxs("button",{onClick:f,className:"w-full py-2 rounded-lg text-sm font-medium text-red-600 border border-red-200 hover:bg-red-50 transition-colors",children:[l.jsx(me,{name:"user-x",size:16,className:"inline mr-1"}),"Solicitar Desvinculacin"]})})]}),l.jsx("div",{className:"p-4 border-t bg-slate-50",children:l.jsx("button",{onClick:t,className:`w-full py-2 rounded-lg font-medium ${uf.secondary}`,children:"Cerrar"})})]})]})},BO=["SUPERVISOR","INSPECTOR","CONDUCTOR","PLANILLERO","CLEANER"];function Pde(e){return{"5X2_FIJO":{id:"1",code:"5X2_FIJO",name:"5x2 Fijo",pattern_json:{type:"fixed",description:"Lun-Vie trabaja",offDays:[6,0]},created_at:""},"5X2_ROTATIVO":{id:"2",code:"5X2_ROTATIVO",name:"5x2 Rotativo",pattern_json:{type:"rotating",description:"Rotativo 2 semanas",cycle:2,weeks:[{offDays:[3,0]},{offDays:[5,6]}]},created_at:""},"5X2_SUPER":{id:"3",code:"5X2_SUPER",name:"5x2 Super",pattern_json:{type:"rotating",description:"Super 2 semanas",cycle:2,weeks:[{offDays:[3,0]},{offDays:[4,5]}]},created_at:""},ESPECIAL:{id:"4",code:"ESPECIAL",name:"Especial",pattern_json:{type:"manual",description:"Manual 28 dias",cycleDays:28},created_at:""},SUPERVISOR_RELEVO:{id:"5",code:"SUPERVISOR_RELEVO",name:"Supervisor Relevo",pattern_json:{type:"rotating",description:"Sem1: Mi+Dom (2 libres), Sem2: Mi+Vie+Sb (3 libres)",cycle:2,weeks:[{offDays:[3,0]},{offDays:[3,5,6]}]},created_at:""}}[e]}const Lde=({staff:e,shiftTypes:t,marks:r,licenses:n,permissions:a,vacations:i,overrides:s,incidences:o,specialTemplates:c,weekDates:u,isLoading:d=!1,onRequestOffboarding:f,onOpenShiftConfig:p})=>{var we,xe;const h=jr(k=>k.session),[g,m]=F.useState(null),x=cde(),y=ude(),v=dde(),b=hde(),S=F.useMemo(()=>{const k={};for(const M of BO)k[M]=[];for(const M of e){const B=M.cargo.toUpperCase();let U="CLEANER";B.includes("SUPERVISOR")?U="SUPERVISOR":B.includes("INSPECTOR")?U="INSPECTOR":B.includes("CONDUCTOR")?U="CONDUCTOR":B.includes("PLANILLERO")&&(U="PLANILLERO"),k[U]&&k[U].push(M)}return k},[e]),_=F.useMemo(()=>{const k=new Map;for(const M of r)k.set(`${M.staff_id}-${M.mark_date}`,M);return k},[r]),A=F.useMemo(()=>{const k=new Map;for(const M of t)k.set(M.code,M);return k},[t]),j=F.useMemo(()=>{const k=new Map;for(const M of c)k.set(M.staff_id,M);return k},[c]),E=F.useMemo(()=>{const k=new Map;for(const M of s)k.set(`${M.staff_id}-${M.override_date}`,M);return k},[s]),T=(k,M)=>n.find(B=>B.staff_id===k&&O5(M,B.start_date,B.end_date)),L=(k,M)=>i.find(B=>B.staff_id===k&&O5(M,B.start_date,B.end_date)),O=(k,M)=>a.find(B=>B.staff_id===k&&O5(M,B.start_date,B.end_date)),I=(k,M)=>{const B=[];return o.noMarcaciones.some(U=>U.rut===k&&U.date===M)&&B.push("NM"),o.sinCredenciales.some(U=>U.rut===k&&U.date===M)&&B.push("NC"),o.cambiosDia.some(U=>U.rut===k&&U.date===M)&&B.push("CD"),o.autorizaciones.some(U=>U.rut===k&&U.date===M)&&B.push("AUT"),B},D=(k,M)=>{const B=_.get(`${k.id}-${M}`),U=T(k.id,M),Z=L(k.id,M),pe=O(k.id,M),K=E.get(`${k.id}-${M}`),te=I(k.rut,M);let ae=!1;const be=k.horario,ve=O9(k.horario),Fe=new Date(M+"T12:00:00").getDay();if(k.shift){let Ie=A.get(k.shift.shift_type_code);if(Ie!=null&&Ie.pattern_json||(Ie=Pde(k.shift.shift_type_code)),Ie!=null&&Ie.pattern_json){const Re=j.get(k.id);ae=k9(M,k.shift.shift_type_code,k.shift.variant_code,Ie.pattern_json,Re,K),M===u[0]&&console.log("getDayStatus -",k.nombre,"shift:",k.shift.shift_type_code,"variant:",k.shift.variant_code,"pattern:",Ie.pattern_json.type,"isOff:",ae)}else ae=Fe===0||Fe===6,M===u[0]&&console.log("getDayStatus -",k.nombre,"NO PATTERN FOUND, using default Sat/Sun")}else ae=Fe===0||Fe===6;const X=L9(u[0]).includes(M)&&!ae;return{mark:B,license:U,vacation:Z,permission:pe,isOff:ae,horario:be,turno:ve,reducido:X,incidencies:te}},z=()=>{if(!h)return;const k=new Date().toISOString().split("T")[0],M=e.filter(B=>{if(B.status==="DESVINCULADO")return!1;const U=D(B,k);return!(U.isOff||U.license||U.vacation||U.permission||U.mark)});if(M.length===0){alert("No hay personal pendiente de marcar para hoy");return}confirm(`Marcar ${M.length} personas como PRESENTE hoy?`)&&b.mutate({staffIds:M.map(B=>B.id),date:k,createdBy:h.supervisorName})},Y=()=>{!g||!h||(x.mutate({values:{staff_id:g.staff.id,mark_date:g.date,mark:"P"},createdBy:h.supervisorName}),m(null))},se=k=>{!g||!h||(x.mutate({values:{staff_id:g.staff.id,mark_date:g.date,mark:"A",note:k},createdBy:h.supervisorName}),m(null))},ee=(k,M,B)=>{!g||!h||(y.mutate({values:{staff_id:g.staff.id,start_date:k,end_date:M,note:B},createdBy:h.supervisorName}),m(null))},J=(k,M,B,U)=>{!g||!h||(v.mutate({values:{staff_id:g.staff.id,start_date:k,end_date:M,permission_type:B,note:U},createdBy:h.supervisorName}),m(null))},oe=h&&["Isaac","Claudio","Cristian"].some(k=>{var M;return(M=h.supervisorName)==null?void 0:M.includes(k)});return d?l.jsxs("div",{className:"flex items-center justify-center h-64",children:[l.jsx(me,{name:"loader",size:24,className:"animate-spin text-brand-600"}),l.jsx("span",{className:"ml-2 text-slate-600",children:"Cargando..."})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white rounded-lg border shadow-sm overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 border-b",children:[l.jsxs("span",{className:"text-sm text-slate-600",children:[e.length," trabajadores"]}),l.jsxs("button",{onClick:z,disabled:b.isPending,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg font-medium text-sm hover:bg-emerald-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[l.jsx(me,{name:"check",size:16}),b.isPending?"Marcando...":"Marcar Todos Presente Hoy"]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full border-collapse",children:[l.jsx("thead",{className:"bg-slate-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"sticky left-0 z-10 bg-slate-100 border-b border-r px-3 py-2 text-left min-w-[220px]",children:l.jsx("span",{className:"text-slate-700 font-semibold text-sm",children:"Personal"})}),u.map(k=>{const M=P9(k),B=jde(k),U=FO(k);return l.jsxs("th",{className:`border-b px-1 py-2 text-center min-w-[70px] ${U?"bg-brand-50":"bg-slate-50"}`,children:[l.jsx("div",{className:"text-xs font-medium text-slate-500",children:M}),l.jsx("div",{className:`text-lg font-bold ${U?"text-brand-600":"text-slate-700"}`,children:B})]},k)})]})}),l.jsx("tbody",{children:BO.map(k=>{const M=S[k]||[];return M.length===0?null:l.jsxs(_e.Fragment,{children:[l.jsx("tr",{className:gde[k],children:l.jsxs("td",{colSpan:u.length+1,className:"sticky left-0 px-3 py-2 font-semibold text-sm text-slate-700 border-b",children:[k," (",M.length,")"]})}),M.map(B=>{const U=B.status==="DESVINCULADO",Z=B.shift?A.get(B.shift.shift_type_code):null;return l.jsxs("tr",{className:`hover:bg-slate-50/50 transition-colors ${U?"bg-slate-50 opacity-60":""}`,children:[l.jsx("td",{className:"sticky left-0 z-10 bg-white border-b border-r px-3 py-2",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:`font-medium text-sm text-slate-800 truncate ${U?"line-through":""}`,children:B.nombre}),l.jsxs("div",{className:"text-xs text-slate-500 truncate",children:[B.rut," | ",B.horario||"Sin horario",Z&&l.jsxs("span",{className:"ml-1 text-brand-600",children:["(",Z.name,")"]})]})]}),p&&l.jsx("button",{onClick:()=>p(B),className:"p-1.5 hover:bg-slate-100 rounded text-slate-400 hover:text-brand-600 transition-colors",title:"Configurar turno y das libres",children:l.jsx(me,{name:"settings",size:16})}),B.admonitionCount&&B.admonitionCount>0&&l.jsx("span",{className:"px-1.5 py-0.5 text-xs font-medium bg-red-100 text-red-700 rounded",children:B.admonitionCount})]})}),u.map(pe=>{const K=D(B,pe);return l.jsx("td",{className:"border-b p-0.5",children:l.jsx(vde,{date:pe,isOff:K.isOff,horario:K.isOff?void 0:K.horario,reducido:K.reducido,turno:K.turno,mark:K.mark,incidencies:K.incidencies,isToday:FO(pe),isDisabled:U,licenseCode:K.license?"LIC":void 0,vacationCode:K.vacation?"VAC":void 0,permissionCode:K.permission?"PER":void 0,onClick:()=>m({staff:B,date:pe})})},pe)})]},B.id)})]},k)})})]})})]}),l.jsx(Ode,{isOpen:g!==null,onClose:()=>m(null),staff:(g==null?void 0:g.staff)??null,date:(g==null?void 0:g.date)??"",currentMark:g?(we=_.get(`${g.staff.id}-${g.date}`))==null?void 0:we.mark:void 0,currentNote:g?((xe=_.get(`${g.staff.id}-${g.date}`))==null?void 0:xe.note)??void 0:void 0,incidencies:g?I(g.staff.rut,g.date):[],onMarkPresent:Y,onMarkAbsent:se,onRegisterLicense:ee,onRegisterPermission:J,onRegisterVacation:()=>{},onRequestOffboarding:oe&&f&&g?()=>f(g.staff):void 0,isManager:oe??!1})]})},Ide=({kpis:e,isLoading:t})=>{if(t)return l.jsx("div",{className:"flex flex-wrap gap-2",children:[...Array(6)].map((a,i)=>l.jsx("div",{className:"h-8 w-24 bg-slate-100 rounded-lg animate-pulse"},i))});const r=[{label:"Sup",value:e.byPosition.SUPERVISOR},{label:"Insp",value:e.byPosition.INSPECTOR},{label:"Cond",value:e.byPosition.CONDUCTOR},{label:"Plan",value:e.byPosition.PLANILLERO},{label:"Clean",value:e.byPosition.CLEANER}],n=Object.values(e.byPosition).reduce((a,i)=>a+i,0);return l.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[l.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-lg ${Sd.count}`,children:[l.jsx(me,{name:"users",size:14}),l.jsx("span",{className:"font-medium",children:n}),l.jsx("span",{className:"text-slate-500 hidden sm:inline",children:"Total"})]}),l.jsx("div",{className:"hidden md:flex items-center gap-1",children:r.map(a=>l.jsx("div",{className:"px-2 py-1 rounded bg-slate-50 text-slate-600 font-medium",title:a.label,children:a.value},a.label))}),l.jsx("div",{className:"w-px h-5 bg-slate-200 hidden sm:block"}),l.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-lg ${Sd.programmed}`,children:[l.jsx(me,{name:"sun",size:14}),l.jsx("span",{className:"font-medium",children:e.programmmedDay}),l.jsx("span",{className:"hidden sm:inline",children:"Da"})]}),l.jsxs("div",{className:"flex items-center gap-1 px-2 py-1.5 rounded-lg bg-indigo-100 text-indigo-700",children:[l.jsx(me,{name:"moon",size:14}),l.jsx("span",{className:"font-medium",children:e.programmedNight}),l.jsx("span",{className:"hidden sm:inline",children:"Noche"})]}),l.jsx("div",{className:"w-px h-5 bg-slate-200 hidden sm:block"}),e.onLicense>0&&l.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-lg ${Sd.license}`,children:[l.jsx(me,{name:"file-text",size:14}),l.jsx("span",{className:"font-medium",children:e.onLicense}),l.jsx("span",{className:"hidden sm:inline",children:"Lic"})]}),e.onVacation>0&&l.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-lg ${Sd.vacation}`,children:[l.jsx(me,{name:"palmtree",size:14}),l.jsx("span",{className:"font-medium",children:e.onVacation}),l.jsx("span",{className:"hidden sm:inline",children:"Vac"})]}),e.onPermission>0&&l.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-lg ${Sd.permission}`,children:[l.jsx(me,{name:"clock",size:14}),l.jsx("span",{className:"font-medium",children:e.onPermission}),l.jsx("span",{className:"hidden sm:inline",children:"Per"})]}),e.withIncidencies>0&&l.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-lg ${Sd.incident}`,children:[l.jsx(me,{name:"alert-triangle",size:14}),l.jsx("span",{className:"font-medium",children:e.withIncidencies}),l.jsx("span",{className:"hidden sm:inline",children:"Inc"})]}),e.pendingMarks>0&&l.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-lg ${Sd.pending}`,children:[l.jsx(me,{name:"alert-circle",size:14}),l.jsx("span",{className:"font-medium",children:e.pendingMarks}),l.jsx("span",{className:"hidden sm:inline",children:"Pend"})]})]})},Rde=()=>{const e=[{label:"Libre (OFF)",colors:$r.OFF},{label:"Turno Da",colors:$r.WORK_DIA},{label:"Turno Noche",colors:$r.WORK_NOCHE},{label:"Presente (P)",colors:$r.PRESENTE},{label:"Ausente (A)",colors:$r.AUSENTE},{label:"Licencia (LIC)",colors:$r.LIC},{label:"Vacaciones (VAC)",colors:$r.VAC},{label:"Permiso (PER)",colors:$r.PER},{label:"Pendiente",colors:$r.PENDING}],t=[{label:"No Marcacin (NM)",className:Bm.NM},{label:"Sin Credencial (NC)",className:Bm.NC},{label:"Cambio Da (CD)",className:Bm.CD},{label:"Autorizacin (AUT)",className:Bm.AUT}];return l.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:[e.map(r=>l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:`w-4 h-4 rounded ${r.colors.bg} ${r.colors.border} border`}),l.jsx("span",{className:"text-slate-600",children:r.label})]},r.label)),l.jsx("div",{className:"w-px h-4 bg-slate-300"}),t.map(r=>{var n;return l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium border ${r.className}`,children:(n=r.label.match(/\((\w+)\)/))==null?void 0:n[1]}),l.jsx("span",{className:"text-slate-600 hidden xl:inline",children:r.label.split(" (")[0]})]},r.label)})]})},Dde="modulepreload",Mde=function(e,t){return new URL(e,t).href},UO={},dy=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){const s=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(u=>{if(u=Mde(u,n),u in UO)return;UO[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!n)for(let g=s.length-1;g>=0;g--){const m=s[g];if(m.href===u&&(!d||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Dde,d||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((g,m)=>{h.addEventListener("load",g),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return a.then(s=>{for(const o of s||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})};function Br(e){"@babel/helpers - typeof";return Br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Br(e)}var zo=Uint8Array,Cs=Uint16Array,W3=Int32Array,V3=new zo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),G3=new zo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),zO=new zo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),I9=function(e,t){for(var r=new Cs(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new W3(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},R9=I9(V3,2),Fde=R9.b,hj=R9.r;Fde[28]=258,hj[258]=28;var $de=I9(G3,0),qO=$de.r,pj=new Cs(32768);for(var hn=0;hn<32768;++hn){var ru=(hn&43690)>>1|(hn&21845)<<1;ru=(ru&52428)>>2|(ru&13107)<<2,ru=(ru&61680)>>4|(ru&3855)<<4,pj[hn]=((ru&65280)>>8|(ru&255)<<8)>>1}var ng=function(e,t,r){for(var n=e.length,a=0,i=new Cs(t);a<n;++a)e[a]&&++i[e[a]-1];var s=new Cs(t);for(a=1;a<t;++a)s[a]=s[a-1]+i[a-1]<<1;var o;if(r){o=new Cs(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=s[e[a]-1]++<<d,p=f|(1<<d)-1;f<=p;++f)o[pj[f]>>c]=u}else for(o=new Cs(n),a=0;a<n;++a)e[a]&&(o[a]=pj[s[e[a]-1]++]>>15-e[a]);return o},Nf=new zo(288);for(var hn=0;hn<144;++hn)Nf[hn]=8;for(var hn=144;hn<256;++hn)Nf[hn]=9;for(var hn=256;hn<280;++hn)Nf[hn]=7;for(var hn=280;hn<288;++hn)Nf[hn]=8;var xb=new zo(32);for(var hn=0;hn<32;++hn)xb[hn]=5;var Bde=ng(Nf,9,0),Ude=ng(xb,5,0),D9=function(e){return(e+7)/8|0},zde=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new zo(e.subarray(t,r))},Bl=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},vm=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},P5=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,i=r.slice();if(!a)return{t:F9,l:0};if(a==1){var s=new zo(r[0].s+1);return s[r[0].s]=1,{t:s,l:1}}r.sort(function(_,A){return _.f-A.f}),r.push({s:-1,f:25001});var o=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:o.f+c.f,l:o,r:c};d!=a-1;)o=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:o.f+c.f,l:o,r:c};for(var p=i[0].s,n=1;n<a;++n)i[n].s>p&&(p=i[n].s);var h=new Cs(p+1),g=mj(r[d-1],h,0);if(g>t){var n=0,m=0,x=g-t,y=1<<x;for(i.sort(function(A,j){return h[j.s]-h[A.s]||A.f-j.f});n<a;++n){var v=i[n].s;if(h[v]>t)m+=y-(1<<g-h[v]),h[v]=t;else break}for(m>>=x;m>0;){var b=i[n].s;h[b]<t?m-=1<<t-h[b]++-1:++n}for(;n>=0&&m;--n){var S=i[n].s;h[S]==t&&(--h[S],++m)}g=t}return{t:new zo(h),l:g}},mj=function(e,t,r){return e.s==-1?Math.max(mj(e.l,t,r+1),mj(e.r,t,r+1)):t[e.s]=r},HO=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Cs(++t),n=0,a=e[0],i=1,s=function(c){r[n++]=c},o=1;o<=t;++o)if(e[o]==a&&o!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)s(32754);i>2&&(s(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(s(a),--i;i>6;i-=6)s(8304);i>2&&(s(i-3<<5|8208),i=0)}for(;i--;)s(a);i=1,a=e[o]}return{c:r.subarray(0,n),n:t}},xm=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},M9=function(e,t,r){var n=r.length,a=D9(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<n;++i)e[a+i+4]=r[i];return(a+4+n)*8},WO=function(e,t,r,n,a,i,s,o,c,u,d){Bl(t,d++,r),++a[256];for(var f=P5(a,15),p=f.t,h=f.l,g=P5(i,15),m=g.t,x=g.l,y=HO(p),v=y.c,b=y.n,S=HO(m),_=S.c,A=S.n,j=new Cs(19),E=0;E<v.length;++E)++j[v[E]&31];for(var E=0;E<_.length;++E)++j[_[E]&31];for(var T=P5(j,7),L=T.t,O=T.l,I=19;I>4&&!L[zO[I-1]];--I);var D=u+5<<3,z=xm(a,Nf)+xm(i,xb)+s,Y=xm(a,p)+xm(i,m)+s+14+3*I+xm(j,L)+2*j[16]+3*j[17]+7*j[18];if(c>=0&&D<=z&&D<=Y)return M9(t,d,e.subarray(c,c+u));var se,ee,J,oe;if(Bl(t,d,1+(Y<z)),d+=2,Y<z){se=ng(p,h,0),ee=p,J=ng(m,x,0),oe=m;var we=ng(L,O,0);Bl(t,d,b-257),Bl(t,d+5,A-1),Bl(t,d+10,I-4),d+=14;for(var E=0;E<I;++E)Bl(t,d+3*E,L[zO[E]]);d+=3*I;for(var xe=[v,_],k=0;k<2;++k)for(var M=xe[k],E=0;E<M.length;++E){var B=M[E]&31;Bl(t,d,we[B]),d+=L[B],B>15&&(Bl(t,d,M[E]>>5&127),d+=M[E]>>12)}}else se=Bde,ee=Nf,J=Ude,oe=xb;for(var E=0;E<o;++E){var U=n[E];if(U>255){var B=U>>18&31;vm(t,d,se[B+257]),d+=ee[B+257],B>7&&(Bl(t,d,U>>23&31),d+=V3[B]);var Z=U&31;vm(t,d,J[Z]),d+=oe[Z],Z>3&&(vm(t,d,U>>5&8191),d+=G3[Z])}else vm(t,d,se[U]),d+=ee[U]}return vm(t,d,se[256]),d+ee[256]},qde=new W3([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F9=new zo(0),Hde=function(e,t,r,n,a,i){var s=i.z||e.length,o=new zo(n+s+5*(1+Math.ceil(s/7e3))+a),c=o.subarray(n,o.length-a),u=i.l,d=(i.r||0)&7;if(t){d&&(c[0]=i.r>>3);for(var f=qde[t-1],p=f>>13,h=f&8191,g=(1<<r)-1,m=i.p||new Cs(32768),x=i.h||new Cs(g+1),y=Math.ceil(r/3),v=2*y,b=function(Me){return(e[Me]^e[Me+1]<<y^e[Me+2]<<v)&g},S=new W3(25e3),_=new Cs(288),A=new Cs(32),j=0,E=0,T=i.i||0,L=0,O=i.w||0,I=0;T+2<s;++T){var D=b(T),z=T&32767,Y=x[D];if(m[z]=Y,x[D]=z,O<=T){var se=s-T;if((j>7e3||L>24576)&&(se>423||!u)){d=WO(e,c,0,S,_,A,E,L,I,T-I,d),L=j=E=0,I=T;for(var ee=0;ee<286;++ee)_[ee]=0;for(var ee=0;ee<30;++ee)A[ee]=0}var J=2,oe=0,we=h,xe=z-Y&32767;if(se>2&&D==b(T-xe))for(var k=Math.min(p,se)-1,M=Math.min(32767,T),B=Math.min(258,se);xe<=M&&--we&&z!=Y;){if(e[T+J]==e[T+J-xe]){for(var U=0;U<B&&e[T+U]==e[T+U-xe];++U);if(U>J){if(J=U,oe=xe,U>k)break;for(var Z=Math.min(xe,U-2),pe=0,ee=0;ee<Z;++ee){var K=T-xe+ee&32767,te=m[K],ae=K-te&32767;ae>pe&&(pe=ae,Y=K)}}}z=Y,Y=m[z],xe+=z-Y&32767}if(oe){S[L++]=268435456|hj[J]<<18|qO[oe];var be=hj[J]&31,ve=qO[oe]&31;E+=V3[be]+G3[ve],++_[257+be],++A[ve],O=T+J,++j}else S[L++]=e[T],++_[e[T]]}}for(T=Math.max(T,O);T<s;++T)S[L++]=e[T],++_[e[T]];d=WO(e,c,u,S,_,A,E,L,I,T-I,d),u||(i.r=d&7|c[d/8|0]<<3,d-=7,i.h=x,i.p=m,i.i=T,i.w=O)}else{for(var T=i.w||0;T<s+u;T+=65535){var Fe=T+65535;Fe>=s&&(c[d/8|0]=u,Fe=s),d=M9(c,d+1,e.subarray(T,Fe))}i.i=s}return zde(o,0,n+D9(d)+a)},$9=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,i=r.length|0,s=0;s!=i;){for(var o=Math.min(s+2655,i);s<o;++s)a+=n+=r[s];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Wde=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),s=new zo(i.length+e.length);s.set(i),s.set(e,i.length),e=s,a.w=i.length}return Hde(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},B9=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Vde=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=$9();a.p(t.dictionary),B9(e,2,a.d())}};function gj(e,t){t||(t={});var r=$9();r.p(e);var n=Wde(e,t,t.dictionary?6:2,4);return Vde(n,t),B9(n,n.length-4,r.d()),n}var Gde=typeof TextDecoder<"u"&&new TextDecoder,Kde=0;try{Gde.decode(F9,{stream:!0}),Kde=1}catch{}function Xde(e){if(Array.isArray(e))return e}function Yde(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function VO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Jde(e,t){if(e){if(typeof e=="string")return VO(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?VO(e,t):void 0}}function Qde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GO(e,t){return Xde(e)||Yde(e,t)||Jde(e,t)||Qde()}function KO(e,t="utf8"){return new TextDecoder(t).decode(e)}const Zde=new TextEncoder;function efe(e){return Zde.encode(e)}const tfe=1024*8,rfe=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),L5={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class K3{constructor(t=tfe,r={}){Dr(this,"buffer");Dr(this,"byteLength");Dr(this,"byteOffset");Dr(this,"length");Dr(this,"offset");Dr(this,"lastWrittenByte");Dr(this,"littleEndian");Dr(this,"_data");Dr(this,"_mark");Dr(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const a=r.offset?r.offset>>>0:0,i=t.byteLength-a;let s=a;(ArrayBuffer.isView(t)||t instanceof K3)&&(t.byteLength!==t.buffer.byteLength&&(s=t.byteOffset+a),t=t.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=L5[r].BYTES_PER_ELEMENT*t,a=this.byteOffset+this.offset,i=this.buffer.slice(a,a+n);if(this.littleEndian===rfe&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(a,a+n));o.reverse();const c=new L5[r](o.buffer);return this.offset+=n,c.reverse(),c}const s=new L5[r](i);return this.offset+=n,s}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return KO(this.readBytes(t))}decodeText(t=1,r="utf8"){return KO(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(efe(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Sp(e){let t=e.length;for(;--t>=0;)e[t]=0}const nfe=3,afe=258,U9=29,ife=256,sfe=ife+1+U9,z9=30,ofe=512,lfe=new Array((sfe+2)*2);Sp(lfe);const cfe=new Array(z9*2);Sp(cfe);const ufe=new Array(ofe);Sp(ufe);const dfe=new Array(afe-nfe+1);Sp(dfe);const ffe=new Array(U9);Sp(ffe);const hfe=new Array(z9);Sp(hfe);const pfe=(e,t,r,n)=>{let a=e&65535|0,i=e>>>16&65535|0,s=0;for(;r!==0;){s=r>2e3?2e3:r,r-=s;do a=a+t[n++]|0,i=i+a|0;while(--s);a%=65521,i%=65521}return a|i<<16|0};var vj=pfe;const mfe=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},gfe=new Uint32Array(mfe()),vfe=(e,t,r,n)=>{const a=gfe,i=n+r;e^=-1;for(let s=n;s<i;s++)e=e>>>8^a[(e^t[s])&255];return e^-1};var tl=vfe,xj={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},q9={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const xfe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var yfe=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)xfe(r,n)&&(e[n]=r[n])}}return e},bfe=e=>{let t=0;for(let n=0,a=e.length;n<a;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,a=0,i=e.length;n<i;n++){let s=e[n];r.set(s,a),a+=s.length}return r},H9={assign:yfe,flattenChunks:bfe};let W9=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{W9=!1}const qg=new Uint8Array(256);for(let e=0;e<256;e++)qg[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;qg[254]=qg[254]=1;var wfe=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,a,i,s=e.length,o=0;for(a=0;a<s;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<s&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(o),i=0,a=0;i<o;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<s&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|r&63):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|r&63):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|r&63);return t};const _fe=(e,t)=>{if(t<65534&&e.subarray&&W9)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var Sfe=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,a;const i=new Array(r*2);for(a=0,n=0;n<r;){let s=e[n++];if(s<128){i[a++]=s;continue}let o=qg[s];if(o>4){i[a++]=65533,n+=o-1;continue}for(s&=o===2?31:o===3?15:7;o>1&&n<r;)s=s<<6|e[n++]&63,o--;if(o>1){i[a++]=65533;continue}s<65536?i[a++]=s:(s-=65536,i[a++]=55296|s>>10&1023,i[a++]=56320|s&1023)}return _fe(i,a)},Nfe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+qg[e[r]]>t?r:t},yj={string2buf:wfe,buf2string:Sfe,utf8border:Nfe};function jfe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Afe=jfe;const Ax=16209,Efe=16191;var Tfe=function(t,r){let n,a,i,s,o,c,u,d,f,p,h,g,m,x,y,v,b,S,_,A,j,E,T,L;const O=t.state;n=t.next_in,T=t.input,a=n+(t.avail_in-5),i=t.next_out,L=t.output,s=i-(r-t.avail_out),o=i+(t.avail_out-257),c=O.dmax,u=O.wsize,d=O.whave,f=O.wnext,p=O.window,h=O.hold,g=O.bits,m=O.lencode,x=O.distcode,y=(1<<O.lenbits)-1,v=(1<<O.distbits)-1;e:do{g<15&&(h+=T[n++]<<g,g+=8,h+=T[n++]<<g,g+=8),b=m[h&y];t:for(;;){if(S=b>>>24,h>>>=S,g-=S,S=b>>>16&255,S===0)L[i++]=b&65535;else if(S&16){_=b&65535,S&=15,S&&(g<S&&(h+=T[n++]<<g,g+=8),_+=h&(1<<S)-1,h>>>=S,g-=S),g<15&&(h+=T[n++]<<g,g+=8,h+=T[n++]<<g,g+=8),b=x[h&v];r:for(;;){if(S=b>>>24,h>>>=S,g-=S,S=b>>>16&255,S&16){if(A=b&65535,S&=15,g<S&&(h+=T[n++]<<g,g+=8,g<S&&(h+=T[n++]<<g,g+=8)),A+=h&(1<<S)-1,A>c){t.msg="invalid distance too far back",O.mode=Ax;break e}if(h>>>=S,g-=S,S=i-s,A>S){if(S=A-S,S>d&&O.sane){t.msg="invalid distance too far back",O.mode=Ax;break e}if(j=0,E=p,f===0){if(j+=u-S,S<_){_-=S;do L[i++]=p[j++];while(--S);j=i-A,E=L}}else if(f<S){if(j+=u+f-S,S-=f,S<_){_-=S;do L[i++]=p[j++];while(--S);if(j=0,f<_){S=f,_-=S;do L[i++]=p[j++];while(--S);j=i-A,E=L}}}else if(j+=f-S,S<_){_-=S;do L[i++]=p[j++];while(--S);j=i-A,E=L}for(;_>2;)L[i++]=E[j++],L[i++]=E[j++],L[i++]=E[j++],_-=3;_&&(L[i++]=E[j++],_>1&&(L[i++]=E[j++]))}else{j=i-A;do L[i++]=L[j++],L[i++]=L[j++],L[i++]=L[j++],_-=3;while(_>2);_&&(L[i++]=L[j++],_>1&&(L[i++]=L[j++]))}}else if(S&64){t.msg="invalid distance code",O.mode=Ax;break e}else{b=x[(b&65535)+(h&(1<<S)-1)];continue r}break}}else if(S&64)if(S&32){O.mode=Efe;break e}else{t.msg="invalid literal/length code",O.mode=Ax;break e}else{b=m[(b&65535)+(h&(1<<S)-1)];continue t}break}}while(n<a&&i<o);_=g>>3,n-=_,g-=_<<3,h&=(1<<g)-1,t.next_in=n,t.next_out=i,t.avail_in=n<a?5+(a-n):5-(n-a),t.avail_out=i<o?257+(o-i):257-(i-o),O.hold=h,O.bits=g};const hh=15,XO=852,YO=592,JO=0,I5=1,QO=2,Cfe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),kfe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ofe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Pfe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Lfe=(e,t,r,n,a,i,s,o)=>{const c=o.bits;let u=0,d=0,f=0,p=0,h=0,g=0,m=0,x=0,y=0,v=0,b,S,_,A,j,E=null,T;const L=new Uint16Array(hh+1),O=new Uint16Array(hh+1);let I=null,D,z,Y;for(u=0;u<=hh;u++)L[u]=0;for(d=0;d<n;d++)L[t[r+d]]++;for(h=c,p=hh;p>=1&&L[p]===0;p--);if(h>p&&(h=p),p===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,o.bits=1,0;for(f=1;f<p&&L[f]===0;f++);for(h<f&&(h=f),x=1,u=1;u<=hh;u++)if(x<<=1,x-=L[u],x<0)return-1;if(x>0&&(e===JO||p!==1))return-1;for(O[1]=0,u=1;u<hh;u++)O[u+1]=O[u]+L[u];for(d=0;d<n;d++)t[r+d]!==0&&(s[O[t[r+d]]++]=d);if(e===JO?(E=I=s,T=20):e===I5?(E=Cfe,I=kfe,T=257):(E=Ofe,I=Pfe,T=0),v=0,d=0,u=f,j=i,g=h,m=0,_=-1,y=1<<h,A=y-1,e===I5&&y>XO||e===QO&&y>YO)return 1;for(;;){D=u-m,s[d]+1<T?(z=0,Y=s[d]):s[d]>=T?(z=I[s[d]-T],Y=E[s[d]-T]):(z=96,Y=0),b=1<<u-m,S=1<<g,f=S;do S-=b,a[j+(v>>m)+S]=D<<24|z<<16|Y|0;while(S!==0);for(b=1<<u-1;v&b;)b>>=1;if(b!==0?(v&=b-1,v+=b):v=0,d++,--L[u]===0){if(u===p)break;u=t[r+s[d]]}if(u>h&&(v&A)!==_){for(m===0&&(m=h),j+=f,g=u-m,x=1<<g;g+m<p&&(x-=L[g+m],!(x<=0));)g++,x<<=1;if(y+=1<<g,e===I5&&y>XO||e===QO&&y>YO)return 1;_=v&A,a[_]=h<<24|g<<16|j-i|0}}return v!==0&&(a[j+v]=u-m<<24|64<<16|0),o.bits=h,0};var ag=Lfe;const Ife=0,V9=1,G9=2,{Z_FINISH:ZO,Z_BLOCK:Rfe,Z_TREES:Ex,Z_OK:jf,Z_STREAM_END:Dfe,Z_NEED_DICT:Mfe,Z_STREAM_ERROR:ao,Z_DATA_ERROR:K9,Z_MEM_ERROR:X9,Z_BUF_ERROR:Ffe,Z_DEFLATED:e6}=q9,ow=16180,t6=16181,r6=16182,n6=16183,a6=16184,i6=16185,s6=16186,o6=16187,l6=16188,c6=16189,yb=16190,Ul=16191,R5=16192,u6=16193,D5=16194,d6=16195,f6=16196,h6=16197,p6=16198,Tx=16199,Cx=16200,m6=16201,g6=16202,v6=16203,x6=16204,y6=16205,M5=16206,b6=16207,w6=16208,xn=16209,Y9=16210,J9=16211,$fe=852,Bfe=592,Ufe=15,zfe=Ufe,_6=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function qfe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const qf=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<ow||t.mode>J9?1:0},Q9=e=>{if(qf(e))return ao;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=ow,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array($fe),t.distcode=t.distdyn=new Int32Array(Bfe),t.sane=1,t.back=-1,jf},Z9=e=>{if(qf(e))return ao;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Q9(e)},eB=(e,t)=>{let r;if(qf(e))return ao;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?ao:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Z9(e))},tB=(e,t)=>{if(!e)return ao;const r=new qfe;e.state=r,r.strm=e,r.window=null,r.mode=ow;const n=eB(e,t);return n!==jf&&(e.state=null),n},Hfe=e=>tB(e,zfe);let S6=!0,F5,$5;const Wfe=e=>{if(S6){F5=new Int32Array(512),$5=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(ag(V9,e.lens,0,288,F5,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;ag(G9,e.lens,0,32,$5,0,e.work,{bits:5}),S6=!1}e.lencode=F5,e.lenbits=9,e.distcode=$5,e.distbits=5},rB=(e,t,r,n)=>{let a;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>n&&(a=n),i.window.set(t.subarray(r-n,r-n+a),i.wnext),n-=a,n?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},Vfe=(e,t)=>{let r,n,a,i,s,o,c,u,d,f,p,h,g,m,x=0,y,v,b,S,_,A,j,E;const T=new Uint8Array(4);let L,O;const I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(qf(e)||!e.output||!e.input&&e.avail_in!==0)return ao;r=e.state,r.mode===Ul&&(r.mode=R5),s=e.next_out,a=e.output,c=e.avail_out,i=e.next_in,n=e.input,o=e.avail_in,u=r.hold,d=r.bits,f=o,p=c,E=jf;e:for(;;)switch(r.mode){case ow:if(r.wrap===0){r.mode=R5;break}for(;d<16;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,T[0]=u&255,T[1]=u>>>8&255,r.check=tl(r.check,T,2,0),u=0,d=0,r.mode=t6;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=xn;break}if((u&15)!==e6){e.msg="unknown compression method",r.mode=xn;break}if(u>>>=4,d-=4,j=(u&15)+8,r.wbits===0&&(r.wbits=j),j>15||j>r.wbits){e.msg="invalid window size",r.mode=xn;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=u&512?c6:Ul,u=0,d=0;break;case t6:for(;d<16;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==e6){e.msg="unknown compression method",r.mode=xn;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=xn;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,r.check=tl(r.check,T,2,0)),u=0,d=0,r.mode=r6;case r6:for(;d<32;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,T[2]=u>>>16&255,T[3]=u>>>24&255,r.check=tl(r.check,T,4,0)),u=0,d=0,r.mode=n6;case n6:for(;d<16;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,r.check=tl(r.check,T,2,0)),u=0,d=0,r.mode=a6;case a6:if(r.flags&1024){for(;d<16;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,r.check=tl(r.check,T,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=i6;case i6:if(r.flags&1024&&(h=r.length,h>o&&(h=o),h&&(r.head&&(j=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+h),j)),r.flags&512&&r.wrap&4&&(r.check=tl(r.check,n,h,i)),o-=h,i+=h,r.length-=h),r.length))break e;r.length=0,r.mode=s6;case s6:if(r.flags&2048){if(o===0)break e;h=0;do j=n[i+h++],r.head&&j&&r.length<65536&&(r.head.name+=String.fromCharCode(j));while(j&&h<o);if(r.flags&512&&r.wrap&4&&(r.check=tl(r.check,n,h,i)),o-=h,i+=h,j)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=o6;case o6:if(r.flags&4096){if(o===0)break e;h=0;do j=n[i+h++],r.head&&j&&r.length<65536&&(r.head.comment+=String.fromCharCode(j));while(j&&h<o);if(r.flags&512&&r.wrap&4&&(r.check=tl(r.check,n,h,i)),o-=h,i+=h,j)break e}else r.head&&(r.head.comment=null);r.mode=l6;case l6:if(r.flags&512){for(;d<16;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){e.msg="header crc mismatch",r.mode=xn;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Ul;break;case c6:for(;d<32;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}e.adler=r.check=_6(u),u=0,d=0,r.mode=yb;case yb:if(r.havedict===0)return e.next_out=s,e.avail_out=c,e.next_in=i,e.avail_in=o,r.hold=u,r.bits=d,Mfe;e.adler=r.check=1,r.mode=Ul;case Ul:if(t===Rfe||t===Ex)break e;case R5:if(r.last){u>>>=d&7,d-=d&7,r.mode=M5;break}for(;d<3;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=u6;break;case 1:if(Wfe(r),r.mode=Tx,t===Ex){u>>>=2,d-=2;break e}break;case 2:r.mode=f6;break;case 3:e.msg="invalid block type",r.mode=xn}u>>>=2,d-=2;break;case u6:for(u>>>=d&7,d-=d&7;d<32;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=xn;break}if(r.length=u&65535,u=0,d=0,r.mode=D5,t===Ex)break e;case D5:r.mode=d6;case d6:if(h=r.length,h){if(h>o&&(h=o),h>c&&(h=c),h===0)break e;a.set(n.subarray(i,i+h),s),o-=h,i+=h,c-=h,s+=h,r.length-=h;break}r.mode=Ul;break;case f6:for(;d<14;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=xn;break}r.have=0,r.mode=h6;case h6:for(;r.have<r.ncode;){for(;d<3;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}r.lens[I[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[I[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,L={bits:r.lenbits},E=ag(Ife,r.lens,0,19,r.lencode,0,r.work,L),r.lenbits=L.bits,E){e.msg="invalid code lengths set",r.mode=xn;break}r.have=0,r.mode=p6;case p6:for(;r.have<r.nlen+r.ndist;){for(;x=r.lencode[u&(1<<r.lenbits)-1],y=x>>>24,v=x>>>16&255,b=x&65535,!(y<=d);){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}if(b<16)u>>>=y,d-=y,r.lens[r.have++]=b;else{if(b===16){for(O=y+2;d<O;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}if(u>>>=y,d-=y,r.have===0){e.msg="invalid bit length repeat",r.mode=xn;break}j=r.lens[r.have-1],h=3+(u&3),u>>>=2,d-=2}else if(b===17){for(O=y+3;d<O;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}u>>>=y,d-=y,j=0,h=3+(u&7),u>>>=3,d-=3}else{for(O=y+7;d<O;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}u>>>=y,d-=y,j=0,h=11+(u&127),u>>>=7,d-=7}if(r.have+h>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=xn;break}for(;h--;)r.lens[r.have++]=j}}if(r.mode===xn)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=xn;break}if(r.lenbits=9,L={bits:r.lenbits},E=ag(V9,r.lens,0,r.nlen,r.lencode,0,r.work,L),r.lenbits=L.bits,E){e.msg="invalid literal/lengths set",r.mode=xn;break}if(r.distbits=6,r.distcode=r.distdyn,L={bits:r.distbits},E=ag(G9,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,L),r.distbits=L.bits,E){e.msg="invalid distances set",r.mode=xn;break}if(r.mode=Tx,t===Ex)break e;case Tx:r.mode=Cx;case Cx:if(o>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=i,e.avail_in=o,r.hold=u,r.bits=d,Tfe(e,p),s=e.next_out,a=e.output,c=e.avail_out,i=e.next_in,n=e.input,o=e.avail_in,u=r.hold,d=r.bits,r.mode===Ul&&(r.back=-1);break}for(r.back=0;x=r.lencode[u&(1<<r.lenbits)-1],y=x>>>24,v=x>>>16&255,b=x&65535,!(y<=d);){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}if(v&&!(v&240)){for(S=y,_=v,A=b;x=r.lencode[A+((u&(1<<S+_)-1)>>S)],y=x>>>24,v=x>>>16&255,b=x&65535,!(S+y<=d);){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}u>>>=S,d-=S,r.back+=S}if(u>>>=y,d-=y,r.back+=y,r.length=b,v===0){r.mode=y6;break}if(v&32){r.back=-1,r.mode=Ul;break}if(v&64){e.msg="invalid literal/length code",r.mode=xn;break}r.extra=v&15,r.mode=m6;case m6:if(r.extra){for(O=r.extra;d<O;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=g6;case g6:for(;x=r.distcode[u&(1<<r.distbits)-1],y=x>>>24,v=x>>>16&255,b=x&65535,!(y<=d);){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}if(!(v&240)){for(S=y,_=v,A=b;x=r.distcode[A+((u&(1<<S+_)-1)>>S)],y=x>>>24,v=x>>>16&255,b=x&65535,!(S+y<=d);){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}u>>>=S,d-=S,r.back+=S}if(u>>>=y,d-=y,r.back+=y,v&64){e.msg="invalid distance code",r.mode=xn;break}r.offset=b,r.extra=v&15,r.mode=v6;case v6:if(r.extra){for(O=r.extra;d<O;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=xn;break}r.mode=x6;case x6:if(c===0)break e;if(h=p-c,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=xn;break}h>r.wnext?(h-=r.wnext,g=r.wsize-h):g=r.wnext-h,h>r.length&&(h=r.length),m=r.window}else m=a,g=s-r.offset,h=r.length;h>c&&(h=c),c-=h,r.length-=h;do a[s++]=m[g++];while(--h);r.length===0&&(r.mode=Cx);break;case y6:if(c===0)break e;a[s++]=r.length,c--,r.mode=Cx;break;case M5:if(r.wrap){for(;d<32;){if(o===0)break e;o--,u|=n[i++]<<d,d+=8}if(p-=c,e.total_out+=p,r.total+=p,r.wrap&4&&p&&(e.adler=r.check=r.flags?tl(r.check,a,p,s-p):vj(r.check,a,p,s-p)),p=c,r.wrap&4&&(r.flags?u:_6(u))!==r.check){e.msg="incorrect data check",r.mode=xn;break}u=0,d=0}r.mode=b6;case b6:if(r.wrap&&r.flags){for(;d<32;){if(o===0)break e;o--,u+=n[i++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=xn;break}u=0,d=0}r.mode=w6;case w6:E=Dfe;break e;case xn:E=K9;break e;case Y9:return X9;case J9:default:return ao}return e.next_out=s,e.avail_out=c,e.next_in=i,e.avail_in=o,r.hold=u,r.bits=d,(r.wsize||p!==e.avail_out&&r.mode<xn&&(r.mode<M5||t!==ZO))&&rB(e,e.output,e.next_out,p-e.avail_out),f-=e.avail_in,p-=e.avail_out,e.total_in+=f,e.total_out+=p,r.total+=p,r.wrap&4&&p&&(e.adler=r.check=r.flags?tl(r.check,a,p,e.next_out-p):vj(r.check,a,p,e.next_out-p)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Ul?128:0)+(r.mode===Tx||r.mode===D5?256:0),(f===0&&p===0||t===ZO)&&E===jf&&(E=Ffe),E},Gfe=e=>{if(qf(e))return ao;let t=e.state;return t.window&&(t.window=null),e.state=null,jf},Kfe=(e,t)=>{if(qf(e))return ao;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,jf):ao},Xfe=(e,t)=>{const r=t.length;let n,a,i;return qf(e)||(n=e.state,n.wrap!==0&&n.mode!==yb)?ao:n.mode===yb&&(a=1,a=vj(a,t,r,0),a!==n.check)?K9:(i=rB(e,t,r,r),i?(n.mode=Y9,X9):(n.havedict=1,jf))};var Yfe=Z9,Jfe=eB,Qfe=Q9,Zfe=Hfe,ehe=tB,the=Vfe,rhe=Gfe,nhe=Kfe,ahe=Xfe,ihe="pako inflate (from Nodeca project)",Gl={inflateReset:Yfe,inflateReset2:Jfe,inflateResetKeep:Qfe,inflateInit:Zfe,inflateInit2:ehe,inflate:the,inflateEnd:rhe,inflateGetHeader:nhe,inflateSetDictionary:ahe,inflateInfo:ihe};function she(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var ohe=she;const nB=Object.prototype.toString,{Z_NO_FLUSH:lhe,Z_FINISH:che,Z_OK:Hg,Z_STREAM_END:B5,Z_NEED_DICT:U5,Z_STREAM_ERROR:uhe,Z_DATA_ERROR:N6,Z_MEM_ERROR:dhe}=q9;function Zv(e){this.options=H9.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Afe,this.strm.avail_out=0;let r=Gl.inflateInit2(this.strm,t.windowBits);if(r!==Hg)throw new Error(xj[r]);if(this.header=new ohe,Gl.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=yj.string2buf(t.dictionary):nB.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Gl.inflateSetDictionary(this.strm,t.dictionary),r!==Hg)))throw new Error(xj[r])}Zv.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let i,s,o;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?che:lhe,nB.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=Gl.inflate(r,s),i===U5&&a&&(i=Gl.inflateSetDictionary(r,a),i===Hg?i=Gl.inflate(r,s):i===N6&&(i=U5));r.avail_in>0&&i===B5&&r.state.wrap>0&&e[r.next_in]!==0;)Gl.inflateReset(r),i=Gl.inflate(r,s);switch(i){case uhe:case N6:case U5:case dhe:return this.onEnd(i),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||i===B5))if(this.options.to==="string"){let c=yj.utf8border(r.output,r.next_out),u=r.next_out-c,d=yj.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===Hg&&o===0)){if(i===B5)return i=Gl.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Zv.prototype.onData=function(e){this.chunks.push(e)};Zv.prototype.onEnd=function(e){e===Hg&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=H9.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function fhe(e,t){const r=new Zv(t);if(r.push(e),r.err)throw r.msg||xj[r.err];return r.result}var hhe=Zv,phe=fhe,mhe={Inflate:hhe,inflate:phe};const{Inflate:ghe,inflate:vhe}=mhe;var j6=ghe,xhe=vhe;const aB=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;aB[e]=t}const A6=4294967295;function yhe(e,t,r){let n=e;for(let a=0;a<r;a++)n=aB[(n^t[a])&255]^n>>>8;return n}function bhe(e,t){return(yhe(A6,e,t)^A6)>>>0}function E6(e,t,r){const n=e.readUint32(),a=bhe(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function iB(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function sB(e,t,r,n){let a=0;for(;a<n;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+t[a-n]&255}function oB(e,t,r,n){let a=0;if(r.length===0)for(;a<n;a++)t[a]=e[a];else for(;a<n;a++)t[a]=e[a]+r[a]&255}function lB(e,t,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+(t[i-a]>>1)&255}else{for(;i<a;i++)t[i]=e[i]+(r[i]>>1)&255;for(;i<n;i++)t[i]=e[i]+(t[i-a]+r[i]>>1)&255}}function cB(e,t,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+t[i-a]&255}else{for(;i<a;i++)t[i]=e[i]+r[i]&255;for(;i<n;i++)t[i]=e[i]+whe(t[i-a],r[i],r[i-a])&255}}function whe(e,t,r){const n=e+t-r,a=Math.abs(n-e),i=Math.abs(n-t),s=Math.abs(n-r);return a<=i&&a<=s?e:i<=s?t:r}function _he(e,t,r,n,a,i){switch(e){case 0:iB(t,r,a);break;case 1:sB(t,r,a,i);break;case 2:oB(t,r,n,a);break;case 3:lB(t,r,n,a,i);break;case 4:cB(t,r,n,a,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const She=new Uint16Array([255]),Nhe=new Uint8Array(She.buffer),jhe=Nhe[0]===255;function Ahe(e){const{data:t,width:r,height:n,channels:a,depth:i}=e,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(i/8)*a,c=new Uint8Array(n*r*o);let u=0;for(let d=0;d<7;d++){const f=s[d],p=Math.ceil((r-f.x)/f.xStep),h=Math.ceil((n-f.y)/f.yStep);if(p<=0||h<=0)continue;const g=p*o,m=new Uint8Array(g);for(let x=0;x<h;x++){const y=t[u++],v=t.subarray(u,u+g);u+=g;const b=new Uint8Array(g);_he(y,v,b,m,g,o),m.set(b);for(let S=0;S<p;S++){const _=f.x+S*f.xStep,A=f.y+x*f.yStep;if(!(_>=r||A>=n))for(let j=0;j<o;j++)c[(A*r+_)*o+j]=b[S*o+j]}}}if(i===16){const d=new Uint16Array(c.buffer);if(jhe)for(let f=0;f<d.length;f++)d[f]=Ehe(d[f]);return d}else return c}function Ehe(e){return(e&255)<<8|e>>8&255}const The=new Uint16Array([255]),Che=new Uint8Array(The.buffer),khe=Che[0]===255,Ohe=new Uint8Array(0);function T6(e){const{data:t,width:r,height:n,channels:a,depth:i}=e,s=Math.ceil(i/8)*a,o=Math.ceil(i/8*a*r),c=new Uint8Array(n*o);let u=Ohe,d=0,f,p;for(let h=0;h<n;h++){switch(f=t.subarray(d+1,d+1+o),p=c.subarray(h*o,(h+1)*o),t[d]){case 0:iB(f,p,o);break;case 1:sB(f,p,o,s);break;case 2:oB(f,p,u,o);break;case 3:lB(f,p,u,o,s);break;case 4:cB(f,p,u,o,s);break;default:throw new Error(`Unsupported filter: ${t[d]}`)}u=p,d+=o+1}if(i===16){const h=new Uint16Array(c.buffer);if(khe)for(let g=0;g<h.length;g++)h[g]=Phe(h[g]);return h}else return c}function Phe(e){return(e&255)<<8|e>>8&255}const fy=Uint8Array.of(137,80,78,71,13,10,26,10);function C6(e){if(!Lhe(e.readBytes(fy.length)))throw new Error("wrong PNG signature")}function Lhe(e){if(e.length<fy.length)return!1;for(let t=0;t<fy.length;t++)if(e[t]!==fy[t])return!1;return!0}const Ihe="tEXt",Rhe=0,uB=new TextDecoder("latin1");function Dhe(e){if(Fhe(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const Mhe=/^[\u0000-\u00FF]*$/;function Fhe(e){if(!Mhe.test(e))throw new Error("invalid latin1 text")}function $he(e,t,r){const n=dB(t);e[n]=Bhe(t,r-n.length-1)}function dB(e){for(e.mark();e.readByte()!==Rhe;);const t=e.offset;e.reset();const r=uB.decode(e.readBytes(t-e.offset-1));return e.skip(1),Dhe(r),r}function Bhe(e,t){return uB.decode(e.readBytes(t))}const vs={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},z5={UNKNOWN:-1,DEFLATE:0},k6={UNKNOWN:-1,ADAPTIVE:0},q5={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},kx={NONE:0,BACKGROUND:1,PREVIOUS:2},H5={SOURCE:0,OVER:1};class Uhe extends K3{constructor(r,n={}){super(r);Dr(this,"_checkCrc");Dr(this,"_inflator");Dr(this,"_png");Dr(this,"_apng");Dr(this,"_end");Dr(this,"_hasPalette");Dr(this,"_palette");Dr(this,"_hasTransparency");Dr(this,"_transparency");Dr(this,"_compressionMethod");Dr(this,"_filterMethod");Dr(this,"_interlaceMethod");Dr(this,"_colorType");Dr(this,"_isAnimated");Dr(this,"_numberOfFrames");Dr(this,"_numberOfPlays");Dr(this,"_frames");Dr(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new j6,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=z5.UNKNOWN,this._filterMethod=k6.UNKNOWN,this._interlaceMethod=q5.UNKNOWN,this._colorType=vs.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(C6(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(C6(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case Ihe:$he(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?E6(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?E6(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=zhe(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case vs.GREYSCALE:a=1;break;case vs.TRUECOLOUR:a=3;break;case vs.INDEXED_COLOUR:a=1;break;case vs.GREYSCALE_ALPHA:a=2;break;case vs.TRUECOLOUR_ALPHA:a=4;break;case vs.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==z5.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let i=0;i<n;i++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case vs.GREYSCALE:case vs.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case vs.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case vs.UNKNOWN:case vs.GREYSCALE_ALPHA:case vs.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=dB(this),a=this.readUint8();if(a!==z5.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const i=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:xhe(i)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=T6({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const i=this._apng.frames.at(r-1);this.disposeFrame(a,i,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case kx.NONE:break;case kx.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let s=0;s<this._png.width;s++){const o=(i*r.width+s)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[o+c]=0}break;case kx.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,i=(s,o)=>{const c=((s+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,u=(s*n.width+o)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case H5.SOURCE:for(let s=0;s<n.height;s++)for(let o=0;o<n.width;o++){const{index:c,frameIndex:u}=i(s,o);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case H5.OVER:for(let s=0;s<n.height;s++)for(let o=0;o<n.width;o++){const{index:c,frameIndex:u}=i(s,o);for(let d=0;d<this._png.channels;d++){const f=n.data[u+this._png.channels-1]/a,p=d%(this._png.channels-1)===0?1:n.data[u+d],h=Math.floor(f*p+(1-f)*r.data[c+d]);r.data[c+d]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==k6.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===q5.NO_INTERLACE)this._png.data=T6({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===q5.ADAM7)this._png.data=Ahe({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:kx.NONE,blendOp:H5.SOURCE,data:r}),this._inflator=new j6,this._writingDataChunks=!1}}function zhe(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var O6;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(O6||(O6={}));function qhe(e,t){return new Uhe(e,t).decode()}var Gt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function W5(){Gt.console&&typeof Gt.console.log=="function"&&Gt.console.log.apply(Gt.console,arguments)}var Qr={log:W5,warn:function(e){Gt.console&&(typeof Gt.console.warn=="function"?Gt.console.warn.apply(Gt.console,arguments):W5.call(null,arguments))},error:function(e){Gt.console&&(typeof Gt.console.error=="function"?Gt.console.error.apply(Gt.console,arguments):W5(e))}};function V5(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Pd(n.response,t,r)},n.onerror=function(){Qr.error("could not download file")},n.send()}function P6(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Ox(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Pd=Gt.saveAs||((typeof window>"u"?"undefined":Br(window))!=="object"||window!==Gt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Gt.URL||Gt.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?P6(a.href)?V5(e,t,r):Ox(a,a.target="_blank"):Ox(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){Ox(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(P6(e))V5(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Ox(n)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:Br(i)!=="object"&&(Qr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return V5(e,t,r);var a=e.type==="application/octet-stream",i=/constructor/i.test(Gt.HTMLElement)||Gt.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||a&&i)&&(typeof FileReader>"u"?"undefined":Br(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=s?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(e)}else{var c=Gt.URL||Gt.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function fB(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,s=a.exec(e);s&&(t=i(s),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+o+c+u}}var hy=Gt.atob.bind(Gt),L6=Gt.btoa.bind(Gt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function G5(e,t){var r=e[0],n=e[1],a=e[2],i=e[3];r=oi(r,n,a,i,t[0],7,-680876936),i=oi(i,r,n,a,t[1],12,-389564586),a=oi(a,i,r,n,t[2],17,606105819),n=oi(n,a,i,r,t[3],22,-1044525330),r=oi(r,n,a,i,t[4],7,-176418897),i=oi(i,r,n,a,t[5],12,1200080426),a=oi(a,i,r,n,t[6],17,-1473231341),n=oi(n,a,i,r,t[7],22,-45705983),r=oi(r,n,a,i,t[8],7,1770035416),i=oi(i,r,n,a,t[9],12,-1958414417),a=oi(a,i,r,n,t[10],17,-42063),n=oi(n,a,i,r,t[11],22,-1990404162),r=oi(r,n,a,i,t[12],7,1804603682),i=oi(i,r,n,a,t[13],12,-40341101),a=oi(a,i,r,n,t[14],17,-1502002290),r=li(r,n=oi(n,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=li(i,r,n,a,t[6],9,-1069501632),a=li(a,i,r,n,t[11],14,643717713),n=li(n,a,i,r,t[0],20,-373897302),r=li(r,n,a,i,t[5],5,-701558691),i=li(i,r,n,a,t[10],9,38016083),a=li(a,i,r,n,t[15],14,-660478335),n=li(n,a,i,r,t[4],20,-405537848),r=li(r,n,a,i,t[9],5,568446438),i=li(i,r,n,a,t[14],9,-1019803690),a=li(a,i,r,n,t[3],14,-187363961),n=li(n,a,i,r,t[8],20,1163531501),r=li(r,n,a,i,t[13],5,-1444681467),i=li(i,r,n,a,t[2],9,-51403784),a=li(a,i,r,n,t[7],14,1735328473),r=ci(r,n=li(n,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=ci(i,r,n,a,t[8],11,-2022574463),a=ci(a,i,r,n,t[11],16,1839030562),n=ci(n,a,i,r,t[14],23,-35309556),r=ci(r,n,a,i,t[1],4,-1530992060),i=ci(i,r,n,a,t[4],11,1272893353),a=ci(a,i,r,n,t[7],16,-155497632),n=ci(n,a,i,r,t[10],23,-1094730640),r=ci(r,n,a,i,t[13],4,681279174),i=ci(i,r,n,a,t[0],11,-358537222),a=ci(a,i,r,n,t[3],16,-722521979),n=ci(n,a,i,r,t[6],23,76029189),r=ci(r,n,a,i,t[9],4,-640364487),i=ci(i,r,n,a,t[12],11,-421815835),a=ci(a,i,r,n,t[15],16,530742520),r=ui(r,n=ci(n,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=ui(i,r,n,a,t[7],10,1126891415),a=ui(a,i,r,n,t[14],15,-1416354905),n=ui(n,a,i,r,t[5],21,-57434055),r=ui(r,n,a,i,t[12],6,1700485571),i=ui(i,r,n,a,t[3],10,-1894986606),a=ui(a,i,r,n,t[10],15,-1051523),n=ui(n,a,i,r,t[1],21,-2054922799),r=ui(r,n,a,i,t[8],6,1873313359),i=ui(i,r,n,a,t[15],10,-30611744),a=ui(a,i,r,n,t[6],15,-1560198380),n=ui(n,a,i,r,t[13],21,1309151649),r=ui(r,n,a,i,t[4],6,-145523070),i=ui(i,r,n,a,t[11],10,-1120210379),a=ui(a,i,r,n,t[2],15,718787259),n=ui(n,a,i,r,t[9],21,-343485551),e[0]=Tu(r,e[0]),e[1]=Tu(n,e[1]),e[2]=Tu(a,e[2]),e[3]=Tu(i,e[3])}function lw(e,t,r,n,a,i){return t=Tu(Tu(t,e),Tu(n,i)),Tu(t<<a|t>>>32-a,r)}function oi(e,t,r,n,a,i,s){return lw(t&r|~t&n,e,t,a,i,s)}function li(e,t,r,n,a,i,s){return lw(t&n|r&~n,e,t,a,i,s)}function ci(e,t,r,n,a,i,s){return lw(t^r^n,e,t,a,i,s)}function ui(e,t,r,n,a,i,s){return lw(r^(t|~n),e,t,a,i,s)}function hB(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)G5(n,Hhe(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(G5(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,G5(n,a),n}function Hhe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var I6="0123456789abcdef".split("");function Whe(e){for(var t="",r=0;r<4;r++)t+=I6[e>>8*r+4&15]+I6[e>>8*r&15];return t}function Vhe(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function bj(e){return hB(e).map(Vhe).join("")}var Ghe=function(e){for(var t=0;t<e.length;t++)e[t]=Whe(e[t]);return e.join("")}(hB("hello"))!="5d41402abc4b2a76b9719d911017c592";function Tu(e,t){if(Ghe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function wj(e,t){var r,n,a,i;if(e!==r){for(var s=(a=e,i=1+(256/e.length|0),new Array(i+1).join(a)),o=[],c=0;c<256;c++)o[c]=c;var u=0;for(c=0;c<256;c++){var d=o[c];u=(u+d+s.charCodeAt(c))%256,o[c]=o[u],o[u]=d}r=e,n=o}else o=n;var f=t.length,p=0,h=0,g="";for(c=0;c<f;c++)h=(h+(d=o[p=(p+1)%256]))%256,o[p]=o[h],o[h]=d,s=o[(o[p]+o[h])%256],g+=String.fromCharCode(t.charCodeAt(c)^s);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var R6={print:4,modify:8,copy:16,"annot-forms":32};function _h(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(o){if(R6.perm!==void 0)throw new Error("Invalid permission: "+o);a+=R6[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),s=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,s),this.P=-(1+(255^a)),this.encryptionKey=bj(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=wj(this.encryptionKey,this.padding)}function Sh(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);t+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):e[n]}return t}function D6(e){if(Br(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!a],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var s=t[r][i];try{s[0].apply(e,n)}catch(o){Gt.console&&Qr.error("jsPDF PubSub Error",o.message,o)}s[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function bb(e){if(!(this instanceof bb))return new bb(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function pB(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function $d(e,t,r,n,a){if(!(this instanceof $d))return new $d(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,pB.call(this,n,a)}function Fh(e,t,r,n,a){if(!(this instanceof Fh))return new Fh(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,pB.call(this,n,a)}function Pt(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],s=[],o=1,c=16,u="S",d=null;Br(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,i=e.compress||e.compressPdf||i,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),s=e.filters||(i===!0?["FlateEncode"]:s),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,p={},h={internal:{},__private__:{}};h.__private__.PubSub=D6;var g="1.3",m=h.__private__.getPdfVersion=function(){return g};h.__private__.setPdfVersion=function(C){g=C};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return x};var y=h.__private__.getPageFormat=function(C){return x[C]};a=a||"a4";var v="compat",b="advanced",S=v;function _(){this.saveGraphicsState(),X(new mt(qt,0,0,-qt,0,ud()*qt).toString()+" cm"),this.setFontSize(this.getFontSize()/qt),u="n",S=b}function A(){this.restoreGraphicsState(),u="S",S=v}var j=h.__private__.combineFontStyleAndFontWeight=function(C,q){if(C=="bold"&&q=="normal"||C=="bold"&&q==400||C=="normal"&&q=="italic"||C=="bold"&&q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return q&&(C=q==400||q==="normal"?C==="italic"?"italic":"normal":q!=700&&q!=="bold"||C!=="normal"?(q==700?"bold":q)+""+C:"bold"),C};h.advancedAPI=function(C){var q=S===v;return q&&_.call(this),typeof C!="function"||(C(this),q&&A.call(this)),this},h.compatAPI=function(C){var q=S===b;return q&&A.call(this),typeof C!="function"||(C(this),q&&_.call(this)),this},h.isAdvancedAPI=function(){return S===b};var E,T=function(C){if(S!==b)throw new Error(C+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},L=h.roundToPrecision=h.__private__.roundToPrecision=function(C,q){var fe=t||q;if(isNaN(C)||isNaN(fe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return C.toFixed(fe).replace(/0+$/,"")};E=h.hpf=h.__private__.hpf=typeof c=="number"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return L(C,c)}:c==="smart"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return L(C,C>-1&&C<1?16:5)}:function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return L(C,16)};var O=h.f2=h.__private__.f2=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f2");return L(C,2)},I=h.__private__.f3=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f3");return L(C,3)},D=h.scale=h.__private__.scale=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.scale");return S===v?C*qt:S===b?C:void 0},z=function(C){return D(function(q){return S===v?ud()-q:S===b?q:void 0}(C))};h.__private__.setPrecision=h.setPrecision=function(C){typeof parseInt(C,10)=="number"&&(t=parseInt(C,10))};var Y,se="00000000000000000000000000000000",ee=h.__private__.getFileId=function(){return se},J=h.__private__.setFileId=function(C){return se=C!==void 0&&/^[a-fA-F0-9]{32}$/.test(C)?C.toUpperCase():se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(da=new _h(d.userPermissions,d.userPassword,d.ownerPassword,se)),se};h.setFileId=function(C){return J(C),this},h.getFileId=function(){return ee()};var oe=h.__private__.convertDateToPDFDate=function(C){var q=C.getTimezoneOffset(),fe=q<0?"+":"-",ye=Math.floor(Math.abs(q/60)),je=Math.abs(q%60),He=[fe,B(ye),"'",B(je),"'"].join("");return["D:",C.getFullYear(),B(C.getMonth()+1),B(C.getDate()),B(C.getHours()),B(C.getMinutes()),B(C.getSeconds()),He].join("")},we=h.__private__.convertPDFDateToDate=function(C){var q=parseInt(C.substr(2,4),10),fe=parseInt(C.substr(6,2),10)-1,ye=parseInt(C.substr(8,2),10),je=parseInt(C.substr(10,2),10),He=parseInt(C.substr(12,2),10),Xe=parseInt(C.substr(14,2),10);return new Date(q,fe,ye,je,He,Xe,0)},xe=h.__private__.setCreationDate=function(C){var q;if(C===void 0&&(C=new Date),C instanceof Date)q=oe(C);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(C))throw new Error("Invalid argument passed to jsPDF.setCreationDate");q=C}return Y=q},k=h.__private__.getCreationDate=function(C){var q=Y;return C==="jsDate"&&(q=we(Y)),q};h.setCreationDate=function(C){return xe(C),this},h.getCreationDate=function(C){return k(C)};var M,B=h.__private__.padd2=function(C){return("0"+parseInt(C)).slice(-2)},U=h.__private__.padd2Hex=function(C){return("00"+(C=C.toString())).substr(C.length)},Z=0,pe=[],K=[],te=0,ae=[],be=[],ve=!1,Fe=K;h.__private__.setCustomOutputDestination=function(C){ve=!0,Fe=C};var Me=function(C){ve||(Fe=C)};h.__private__.resetCustomOutputDestination=function(){ve=!1,Fe=K};var X=h.__private__.out=function(C){return C=C.toString(),te+=C.length+1,Fe.push(C),Fe},Ie=h.__private__.write=function(C){return X(arguments.length===1?C.toString():Array.prototype.join.call(arguments," "))},Re=h.__private__.getArrayBuffer=function(C){for(var q=C.length,fe=new ArrayBuffer(q),ye=new Uint8Array(fe);q--;)ye[q]=C.charCodeAt(q);return fe},Qe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return Qe};var Ue=e.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(C){return Ue=S===b?C/qt:C,this};var pt,st=h.__private__.getFontSize=h.getFontSize=function(){return S===v?Ue:Ue*qt},dt=e.R2L||!1;h.__private__.setR2L=h.setR2L=function(C){return dt=C,this},h.__private__.getR2L=h.getR2L=function(){return dt};var rt,Dt=h.__private__.setZoomMode=function(C){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(C))pt=C;else if(isNaN(C)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(C)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+C+'" is not recognized.');pt=C}else pt=parseInt(C,10)};h.__private__.getZoomMode=function(){return pt};var ht,$t=h.__private__.setPageMode=function(C){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(C)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+C+'" is not recognized.');rt=C};h.__private__.getPageMode=function(){return rt};var tr=h.__private__.setLayoutMode=function(C){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(C)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+C+'" is not recognized.');ht=C};h.__private__.getLayoutMode=function(){return ht},h.__private__.setDisplayMode=h.setDisplayMode=function(C,q,fe){return Dt(C),tr(q),$t(fe),this};var Tt={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(C){if(Object.keys(Tt).indexOf(C)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Tt[C]},h.__private__.getDocumentProperties=function(){return Tt},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(C){for(var q in Tt)Tt.hasOwnProperty(q)&&C[q]&&(Tt[q]=C[q]);return this},h.__private__.setDocumentProperty=function(C,q){if(Object.keys(Tt).indexOf(C)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Tt[C]=q};var _t,qt,Nt,Xr,lr,Yt={},Jt={},Lr=[],kt={},_r={},Rt={},Ge={},We=null,yt=0,Lt=[],gr=new D6(h),co=e.hotfixes||[],On={},Aa={},xi=[],mt=function C(q,fe,ye,je,He,Xe){if(!(this instanceof C))return new C(q,fe,ye,je,He,Xe);isNaN(q)&&(q=1),isNaN(fe)&&(fe=0),isNaN(ye)&&(ye=0),isNaN(je)&&(je=1),isNaN(He)&&(He=0),isNaN(Xe)&&(Xe=0),this._matrix=[q,fe,ye,je,He,Xe]};Object.defineProperty(mt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(mt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(mt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(mt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(mt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(mt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(mt.prototype,"a",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(mt.prototype,"b",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(mt.prototype,"c",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(mt.prototype,"d",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(mt.prototype,"e",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(mt.prototype,"f",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(mt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(mt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(mt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(mt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),mt.prototype.join=function(C){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(C)},mt.prototype.multiply=function(C){var q=C.sx*this.sx+C.shy*this.shx,fe=C.sx*this.shy+C.shy*this.sy,ye=C.shx*this.sx+C.sy*this.shx,je=C.shx*this.shy+C.sy*this.sy,He=C.tx*this.sx+C.ty*this.shx+this.tx,Xe=C.tx*this.shy+C.ty*this.sy+this.ty;return new mt(q,fe,ye,je,He,Xe)},mt.prototype.decompose=function(){var C=this.sx,q=this.shy,fe=this.shx,ye=this.sy,je=this.tx,He=this.ty,Xe=Math.sqrt(C*C+q*q),St=(C/=Xe)*fe+(q/=Xe)*ye;fe-=C*St,ye-=q*St;var Ct=Math.sqrt(fe*fe+ye*ye);return St/=Ct,C*(ye/=Ct)<q*(fe/=Ct)&&(C=-C,q=-q,St=-St,Xe=-Xe),{scale:new mt(Xe,0,0,Ct,0,0),translate:new mt(1,0,0,1,je,He),rotate:new mt(C,q,-q,C,0,0),skew:new mt(1,0,St,1,0,0)}},mt.prototype.toString=function(C){return this.join(" ")},mt.prototype.inversed=function(){var C=this.sx,q=this.shy,fe=this.shx,ye=this.sy,je=this.tx,He=this.ty,Xe=1/(C*ye-q*fe),St=ye*Xe,Ct=-q*Xe,Kt=-fe*Xe,nr=C*Xe;return new mt(St,Ct,Kt,nr,-St*je-Kt*He,-Ct*je-nr*He)},mt.prototype.applyToPoint=function(C){var q=C.x*this.sx+C.y*this.shx+this.tx,fe=C.x*this.shy+C.y*this.sy+this.ty;return new Cl(q,fe)},mt.prototype.applyToRectangle=function(C){var q=this.applyToPoint(C),fe=this.applyToPoint(new Cl(C.x+C.w,C.y+C.h));return new zp(q.x,q.y,fe.x-q.x,fe.y-q.y)},mt.prototype.clone=function(){var C=this.sx,q=this.shy,fe=this.shx,ye=this.sy,je=this.tx,He=this.ty;return new mt(C,q,fe,ye,je,He)},h.Matrix=mt;var uo=h.matrixMult=function(C,q){return q.multiply(C)},fo=new mt(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=fo;var ni=function(C,q){if(!_r[C]){var fe=(q instanceof $d?"Sh":"P")+(Object.keys(kt).length+1).toString(10);q.id=fe,_r[C]=fe,kt[fe]=q,gr.publish("addPattern",q)}};h.ShadingPattern=$d,h.TilingPattern=Fh,h.addShadingPattern=function(C,q){return T("addShadingPattern()"),ni(C,q),this},h.beginTilingPattern=function(C){T("beginTilingPattern()"),qp(C.boundingBox[0],C.boundingBox[1],C.boundingBox[2]-C.boundingBox[0],C.boundingBox[3]-C.boundingBox[1],C.matrix)},h.endTilingPattern=function(C,q){T("endTilingPattern()"),q.stream=be[M].join(`
`),ni(C,q),gr.publish("endTilingPattern",q),xi.pop().restore()};var zi,vn=h.__private__.newObject=function(){var C=Jn();return W(C,!0),C},Jn=h.__private__.newObjectDeferred=function(){return Z++,pe[Z]=function(){return te},Z},W=function(C,q){return q=typeof q=="boolean"&&q,pe[C]=te,q&&X(C+" 0 obj"),C},ue=h.__private__.newAdditionalObject=function(){var C={objId:Jn(),content:""};return ae.push(C),C},re=Jn(),ie=Jn(),de=h.__private__.decodeColorString=function(C){var q=C.split(" ");if(q.length!==2||q[1]!=="g"&&q[1]!=="G")q.length!==5||q[4]!=="k"&&q[4]!=="K"||(q=[(1-q[0])*(1-q[3]),(1-q[1])*(1-q[3]),(1-q[2])*(1-q[3]),"r"]);else{var fe=parseFloat(q[0]);q=[fe,fe,fe,"r"]}for(var ye="#",je=0;je<3;je++)ye+=("0"+Math.floor(255*parseFloat(q[je])).toString(16)).slice(-2);return ye},he=h.__private__.encodeColorString=function(C){var q;typeof C=="string"&&(C={ch1:C});var fe=C.ch1,ye=C.ch2,je=C.ch3,He=C.ch4,Xe=C.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof fe=="string"&&fe.charAt(0)!=="#"){var St=new fB(fe);if(St.ok)fe=St.toHex();else if(!/^\d*\.?\d*$/.test(fe))throw new Error('Invalid color "'+fe+'" passed to jsPDF.encodeColorString.')}if(typeof fe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(fe)&&(fe="#"+fe[1]+fe[1]+fe[2]+fe[2]+fe[3]+fe[3]),typeof fe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(fe)){var Ct=parseInt(fe.substr(1),16);fe=Ct>>16&255,ye=Ct>>8&255,je=255&Ct}if(ye===void 0||He===void 0&&fe===ye&&ye===je)q=typeof fe=="string"?fe+" "+Xe[0]:C.precision===2?O(fe/255)+" "+Xe[0]:I(fe/255)+" "+Xe[0];else if(He===void 0||Br(He)==="object"){if(He&&!isNaN(He.a)&&He.a===0)return["1.","1.","1.",Xe[1]].join(" ");q=typeof fe=="string"?[fe,ye,je,Xe[1]].join(" "):C.precision===2?[O(fe/255),O(ye/255),O(je/255),Xe[1]].join(" "):[I(fe/255),I(ye/255),I(je/255),Xe[1]].join(" ")}else q=typeof fe=="string"?[fe,ye,je,He,Xe[2]].join(" "):C.precision===2?[O(fe),O(ye),O(je),O(He),Xe[2]].join(" "):[I(fe),I(ye),I(je),I(He),Xe[2]].join(" ");return q},Te=h.__private__.getFilters=function(){return s},De=h.__private__.putStream=function(C){var q=(C=C||{}).data||"",fe=C.filters||Te(),ye=C.alreadyAppliedFilters||[],je=C.addLength1||!1,He=q.length,Xe=C.objectId,St=function(fa){return fa};if(d!==null&&Xe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(St=da.encryptor(Xe,0));var Ct={};fe===!0&&(fe=["FlateEncode"]);var Kt=C.additionalKeyValues||[],nr=(Ct=Pt.API.processDataByFilters!==void 0?Pt.API.processDataByFilters(q,fe):{data:q,reverseChain:[]}).reverseChain+(Array.isArray(ye)?ye.join(" "):ye.toString());if(Ct.data.length!==0&&(Kt.push({key:"Length",value:Ct.data.length}),je===!0&&Kt.push({key:"Length1",value:He})),nr.length!=0)if(nr.split("/").length-1==1)Kt.push({key:"Filter",value:nr});else{Kt.push({key:"Filter",value:"["+nr+"]"});for(var yr=0;yr<Kt.length;yr+=1)if(Kt[yr].key==="DecodeParms"){for(var Sn=[],ea=0;ea<Ct.reverseChain.split("/").length-1;ea+=1)Sn.push("null");Sn.push(Kt[yr].value),Kt[yr].value="["+Sn.join(" ")+"]"}}X("<<");for(var en=0;en<Kt.length;en++)X("/"+Kt[en].key+" "+Kt[en].value);X(">>"),Ct.data.length!==0&&(X("stream"),X(St(Ct.data)),X("endstream"))},Ce=h.__private__.putPage=function(C){var q=C.number,fe=C.data,ye=C.objId,je=C.contentsObjId;W(ye,!0),X("<</Type /Page"),X("/Parent "+C.rootDictionaryObjId+" 0 R"),X("/Resources "+C.resourceDictionaryObjId+" 0 R"),X("/MediaBox ["+parseFloat(E(C.mediaBox.bottomLeftX))+" "+parseFloat(E(C.mediaBox.bottomLeftY))+" "+E(C.mediaBox.topRightX)+" "+E(C.mediaBox.topRightY)+"]"),C.cropBox!==null&&X("/CropBox ["+E(C.cropBox.bottomLeftX)+" "+E(C.cropBox.bottomLeftY)+" "+E(C.cropBox.topRightX)+" "+E(C.cropBox.topRightY)+"]"),C.bleedBox!==null&&X("/BleedBox ["+E(C.bleedBox.bottomLeftX)+" "+E(C.bleedBox.bottomLeftY)+" "+E(C.bleedBox.topRightX)+" "+E(C.bleedBox.topRightY)+"]"),C.trimBox!==null&&X("/TrimBox ["+E(C.trimBox.bottomLeftX)+" "+E(C.trimBox.bottomLeftY)+" "+E(C.trimBox.topRightX)+" "+E(C.trimBox.topRightY)+"]"),C.artBox!==null&&X("/ArtBox ["+E(C.artBox.bottomLeftX)+" "+E(C.artBox.bottomLeftY)+" "+E(C.artBox.topRightX)+" "+E(C.artBox.topRightY)+"]"),typeof C.userUnit=="number"&&C.userUnit!==1&&X("/UserUnit "+C.userUnit),gr.publish("putPage",{objId:ye,pageContext:Lt[q],pageNumber:q,page:fe}),X("/Contents "+je+" 0 R"),X(">>"),X("endobj");var He=fe.join(`
`);return S===b&&(He+=`
Q`),W(je,!0),De({data:He,filters:Te(),objectId:je}),X("endobj"),ye},ke=h.__private__.putPages=function(){var C,q,fe=[];for(C=1;C<=yt;C++)Lt[C].objId=Jn(),Lt[C].contentsObjId=Jn();for(C=1;C<=yt;C++)fe.push(Ce({number:C,data:be[C],objId:Lt[C].objId,contentsObjId:Lt[C].contentsObjId,mediaBox:Lt[C].mediaBox,cropBox:Lt[C].cropBox,bleedBox:Lt[C].bleedBox,trimBox:Lt[C].trimBox,artBox:Lt[C].artBox,userUnit:Lt[C].userUnit,rootDictionaryObjId:re,resourceDictionaryObjId:ie}));W(re,!0),X("<</Type /Pages");var ye="/Kids [";for(q=0;q<yt;q++)ye+=fe[q]+" 0 R ";X(ye+"]"),X("/Count "+yt),X(">>"),X("endobj"),gr.publish("postPutPages")},Le=function(C){gr.publish("putFont",{font:C,out:X,newObject:vn,putStream:De}),C.isAlreadyPutted!==!0&&(C.objectNumber=vn(),X("<<"),X("/Type /Font"),X("/BaseFont /"+Sh(C.postScriptName)),X("/Subtype /Type1"),typeof C.encoding=="string"&&X("/Encoding /"+C.encoding),X("/FirstChar 32"),X("/LastChar 255"),X(">>"),X("endobj"))},Je=function(C){C.objectNumber=vn();var q=[];q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Form"}),q.push({key:"BBox",value:"["+[E(C.x),E(C.y),E(C.x+C.width),E(C.y+C.height)].join(" ")+"]"}),q.push({key:"Matrix",value:"["+C.matrix.toString()+"]"});var fe=C.pages[1].join(`
`);De({data:fe,additionalKeyValues:q,objectId:C.objectNumber}),X("endobj")},at=function(C,q){q||(q=21);var fe=vn(),ye=function(Xe,St){var Ct,Kt=[],nr=1/(St-1);for(Ct=0;Ct<1;Ct+=nr)Kt.push(Ct);if(Kt.push(1),Xe[0].offset!=0){var yr={offset:0,color:Xe[0].color};Xe.unshift(yr)}if(Xe[Xe.length-1].offset!=1){var Sn={offset:1,color:Xe[Xe.length-1].color};Xe.push(Sn)}for(var ea="",en=0,fa=0;fa<Kt.length;fa++){for(Ct=Kt[fa];Ct>Xe[en+1].offset;)en++;var ta=Xe[en].offset,Ba=(Ct-ta)/(Xe[en+1].offset-ta),Pl=Xe[en].color,mo=Xe[en+1].color;ea+=U(Math.round((1-Ba)*Pl[0]+Ba*mo[0]).toString(16))+U(Math.round((1-Ba)*Pl[1]+Ba*mo[1]).toString(16))+U(Math.round((1-Ba)*Pl[2]+Ba*mo[2]).toString(16))}return ea.trim()}(C.colors,q),je=[];je.push({key:"FunctionType",value:"0"}),je.push({key:"Domain",value:"[0.0 1.0]"}),je.push({key:"Size",value:"["+q+"]"}),je.push({key:"BitsPerSample",value:"8"}),je.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),je.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),De({data:ye,additionalKeyValues:je,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:fe}),X("endobj"),C.objectNumber=vn(),X("<< /ShadingType "+C.type),X("/ColorSpace /DeviceRGB");var He="/Coords ["+E(parseFloat(C.coords[0]))+" "+E(parseFloat(C.coords[1]))+" ";C.type===2?He+=E(parseFloat(C.coords[2]))+" "+E(parseFloat(C.coords[3])):He+=E(parseFloat(C.coords[2]))+" "+E(parseFloat(C.coords[3]))+" "+E(parseFloat(C.coords[4]))+" "+E(parseFloat(C.coords[5])),X(He+="]"),C.matrix&&X("/Matrix ["+C.matrix.toString()+"]"),X("/Function "+fe+" 0 R"),X("/Extend [true true]"),X(">>"),X("endobj")},ut=function(C,q){var fe=Jn(),ye=vn();q.push({resourcesOid:fe,objectOid:ye}),C.objectNumber=ye;var je=[];je.push({key:"Type",value:"/Pattern"}),je.push({key:"PatternType",value:"1"}),je.push({key:"PaintType",value:"1"}),je.push({key:"TilingType",value:"1"}),je.push({key:"BBox",value:"["+C.boundingBox.map(E).join(" ")+"]"}),je.push({key:"XStep",value:E(C.xStep)}),je.push({key:"YStep",value:E(C.yStep)}),je.push({key:"Resources",value:fe+" 0 R"}),C.matrix&&je.push({key:"Matrix",value:"["+C.matrix.toString()+"]"}),De({data:C.stream,additionalKeyValues:je,objectId:C.objectNumber}),X("endobj")},tt=function(C){for(var q in C.objectNumber=vn(),X("<<"),C)switch(q){case"opacity":X("/ca "+O(C[q]));break;case"stroke-opacity":X("/CA "+O(C[q]))}X(">>"),X("endobj")},ct=function(C){W(C.resourcesOid,!0),X("<<"),X("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var q in X("/Font <<"),Yt)Yt.hasOwnProperty(q)&&(f===!1||f===!0&&p.hasOwnProperty(q))&&X("/"+q+" "+Yt[q].objectNumber+" 0 R");X(">>")}(),function(){if(Object.keys(kt).length>0){for(var q in X("/Shading <<"),kt)kt.hasOwnProperty(q)&&kt[q]instanceof $d&&kt[q].objectNumber>=0&&X("/"+q+" "+kt[q].objectNumber+" 0 R");gr.publish("putShadingPatternDict"),X(">>")}}(),function(q){if(Object.keys(kt).length>0){for(var fe in X("/Pattern <<"),kt)kt.hasOwnProperty(fe)&&kt[fe]instanceof h.TilingPattern&&kt[fe].objectNumber>=0&&kt[fe].objectNumber<q&&X("/"+fe+" "+kt[fe].objectNumber+" 0 R");gr.publish("putTilingPatternDict"),X(">>")}}(C.objectOid),function(){if(Object.keys(Rt).length>0){var q;for(q in X("/ExtGState <<"),Rt)Rt.hasOwnProperty(q)&&Rt[q].objectNumber>=0&&X("/"+q+" "+Rt[q].objectNumber+" 0 R");gr.publish("putGStateDict"),X(">>")}}(),function(){for(var q in X("/XObject <<"),On)On.hasOwnProperty(q)&&On[q].objectNumber>=0&&X("/"+q+" "+On[q].objectNumber+" 0 R");gr.publish("putXobjectDict"),X(">>")}(),X(">>"),X("endobj")},Ht=function(C){Jt[C.fontName]=Jt[C.fontName]||{},Jt[C.fontName][C.fontStyle]=C.id},Vr=function(C,q,fe,ye,je){var He={id:"F"+(Object.keys(Yt).length+1).toString(10),postScriptName:C,fontName:q,fontStyle:fe,encoding:ye,isStandardFont:je||!1,metadata:{}};return gr.publish("addFont",{font:He,instance:this}),Yt[He.id]=He,Ht(He),He.id},hr=h.__private__.pdfEscape=h.pdfEscape=function(C,q){return function(fe,ye){var je,He,Xe,St,Ct,Kt,nr,yr,Sn;if(Xe=(ye=ye||{}).sourceEncoding||"Unicode",Ct=ye.outputEncoding,(ye.autoencode||Ct)&&Yt[_t].metadata&&Yt[_t].metadata[Xe]&&Yt[_t].metadata[Xe].encoding&&(St=Yt[_t].metadata[Xe].encoding,!Ct&&Yt[_t].encoding&&(Ct=Yt[_t].encoding),!Ct&&St.codePages&&(Ct=St.codePages[0]),typeof Ct=="string"&&(Ct=St[Ct]),Ct)){for(nr=!1,Kt=[],je=0,He=fe.length;je<He;je++)(yr=Ct[fe.charCodeAt(je)])?Kt.push(String.fromCharCode(yr)):Kt.push(fe[je]),Kt[je].charCodeAt(0)>>8&&(nr=!0);fe=Kt.join("")}for(je=fe.length;nr===void 0&&je!==0;)fe.charCodeAt(je-1)>>8&&(nr=!0),je--;if(!nr)return fe;for(Kt=ye.noBOM?[]:[254,255],je=0,He=fe.length;je<He;je++){if((Sn=(yr=fe.charCodeAt(je))>>8)>>8)throw new Error("Character at position "+je+" of string '"+fe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Kt.push(Sn),Kt.push(yr-(Sn<<8))}return String.fromCharCode.apply(void 0,Kt)}(C,q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Pn=h.__private__.beginPage=function(C){be[++yt]=[],Lt[yt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(C[0]),topRightY:Number(C[1])}},Ko(yt),Me(be[M])},Go=function(C,q){var fe,ye,je;switch(r=q||r,typeof C=="string"&&(fe=y(C.toLowerCase()),Array.isArray(fe)&&(ye=fe[0],je=fe[1])),Array.isArray(C)&&(ye=C[0]*qt,je=C[1]*qt),isNaN(ye)&&(ye=a[0],je=a[1]),(ye>14400||je>14400)&&(Qr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ye=Math.min(14400,ye),je=Math.min(14400,je)),a=[ye,je],r.substr(0,1)){case"l":je>ye&&(a=[je,ye]);break;case"p":ye>je&&(a=[je,ye])}Pn(a),Qt(Fp),X(Qf),Bp!==0&&X(Bp+" J"),Up!==0&&X(Up+" j"),gr.publish("addPage",{pageNumber:yt})},ho=function(C){C>0&&C<=yt&&(be.splice(C,1),Lt.splice(C,1),yt--,M>yt&&(M=yt),this.setPage(M))},Ko=function(C){C>0&&C<=yt&&(M=C)},Ds=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return be.length-1},Mc=function(C,q,fe){var ye,je=void 0;return fe=fe||{},C=C!==void 0?C:Yt[_t].fontName,q=q!==void 0?q:Yt[_t].fontStyle,ye=C.toLowerCase(),Jt[ye]!==void 0&&Jt[ye][q]!==void 0?je=Jt[ye][q]:Jt[C]!==void 0&&Jt[C][q]!==void 0?je=Jt[C][q]:fe.disableWarning===!1&&Qr.warn("Unable to look up font label for font '"+C+"', '"+q+"'. Refer to getFontList() for available fonts."),je||fe.noFallback||(je=Jt.times[q])==null&&(je=Jt.times.normal),je},Qn=h.__private__.putInfo=function(){var C=vn(),q=function(ye){return ye};for(var fe in d!==null&&(q=da.encryptor(C,0)),X("<<"),X("/Producer ("+hr(q("jsPDF "+Pt.version))+")"),Tt)Tt.hasOwnProperty(fe)&&Tt[fe]&&X("/"+fe.substr(0,1).toUpperCase()+fe.substr(1)+" ("+hr(q(Tt[fe]))+")");X("/CreationDate ("+hr(q(Y))+")"),X(">>"),X("endobj")},Xf=h.__private__.putCatalog=function(C){var q=(C=C||{}).rootDictionaryObjId||re;switch(vn(),X("<<"),X("/Type /Catalog"),X("/Pages "+q+" 0 R"),pt||(pt="fullwidth"),pt){case"fullwidth":X("/OpenAction [3 0 R /FitH null]");break;case"fullheight":X("/OpenAction [3 0 R /FitV null]");break;case"fullpage":X("/OpenAction [3 0 R /Fit]");break;case"original":X("/OpenAction [3 0 R /XYZ null null 1]");break;default:var fe=""+pt;fe.substr(fe.length-1)==="%"&&(pt=parseInt(pt)/100),typeof pt=="number"&&X("/OpenAction [3 0 R /XYZ null null "+O(pt)+"]")}switch(ht||(ht="continuous"),ht){case"continuous":X("/PageLayout /OneColumn");break;case"single":X("/PageLayout /SinglePage");break;case"two":case"twoleft":X("/PageLayout /TwoColumnLeft");break;case"tworight":X("/PageLayout /TwoColumnRight")}rt&&X("/PageMode /"+rt),gr.publish("putCatalog"),X(">>"),X("endobj")},i_=h.__private__.putTrailer=function(){X("trailer"),X("<<"),X("/Size "+(Z+1)),X("/Root "+Z+" 0 R"),X("/Info "+(Z-1)+" 0 R"),d!==null&&X("/Encrypt "+da.oid+" 0 R"),X("/ID [ <"+se+"> <"+se+"> ]"),X(">>")},Zn=h.__private__.putHeader=function(){X("%PDF-"+g),X("%")},d1=h.__private__.putXRef=function(){var C="0000000000";X("xref"),X("0 "+(Z+1)),X("0000000000 65535 f ");for(var q=1;q<=Z;q++)typeof pe[q]=="function"?X((C+pe[q]()).slice(-10)+" 00000 n "):pe[q]!==void 0?X((C+pe[q]).slice(-10)+" 00000 n "):X("0000000000 00000 n ")},Xo=h.__private__.buildDocument=function(){var C;Z=0,te=0,K=[],pe=[],ae=[],re=Jn(),ie=Jn(),Me(K),gr.publish("buildDocument"),Zn(),ke(),function(){gr.publish("putAdditionalObjects");for(var fe=0;fe<ae.length;fe++){var ye=ae[fe];W(ye.objId,!0),X(ye.content),X("endobj")}gr.publish("postPutAdditionalObjects")}(),C=[],function(){for(var fe in Yt)Yt.hasOwnProperty(fe)&&(f===!1||f===!0&&p.hasOwnProperty(fe))&&Le(Yt[fe])}(),function(){var fe;for(fe in Rt)Rt.hasOwnProperty(fe)&&tt(Rt[fe])}(),function(){for(var fe in On)On.hasOwnProperty(fe)&&Je(On[fe])}(),function(fe){var ye;for(ye in kt)kt.hasOwnProperty(ye)&&(kt[ye]instanceof $d?at(kt[ye]):kt[ye]instanceof Fh&&ut(kt[ye],fe))}(C),gr.publish("putResources"),C.forEach(ct),ct({resourcesOid:ie,objectOid:Number.MAX_SAFE_INTEGER}),gr.publish("postPutResources"),d!==null&&(da.oid=vn(),X("<<"),X("/Filter /Standard"),X("/V "+da.v),X("/R "+da.r),X("/U <"+da.toHexString(da.U)+">"),X("/O <"+da.toHexString(da.O)+">"),X("/P "+da.P),X(">>"),X("endobj")),Qn(),Xf();var q=te;return d1(),i_(),X("startxref"),X(""+q),X("%%EOF"),Me(be[M]),K.join(`
`)},Yf=h.__private__.getBlob=function(C){return new Blob([Re(C)],{type:"application/pdf"})},f1=h.output=h.__private__.output=(zi=function(C,q){switch(typeof(q=q||{})=="string"?q={filename:q}:q.filename=q.filename||"generated.pdf",C){case void 0:return Xo();case"save":h.save(q.filename);break;case"arraybuffer":return Re(Xo());case"blob":return Yf(Xo());case"bloburi":case"bloburl":if(Gt.URL!==void 0&&typeof Gt.URL.createObjectURL=="function")return Gt.URL&&Gt.URL.createObjectURL(Yf(Xo()))||void 0;Qr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var fe="",ye=Xo();try{fe=L6(ye)}catch{fe=L6(unescape(encodeURIComponent(ye)))}return"data:application/pdf;filename="+q.filename+";base64,"+fe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Gt)==="[object Window]"){var je="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",He=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';q.pdfObjectUrl&&(je=q.pdfObjectUrl,He="");var Xe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+je+'"'+He+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(q)+");<\/script></body></html>",St=Gt.open();return St!==null&&St.document.write(Xe),St}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Gt)==="[object Window]"){var Ct='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+q.filename+'" width="500px" height="400px" /></body></html>',Kt=Gt.open();if(Kt!==null){Kt.document.write(Ct);var nr=this;Kt.document.documentElement.querySelector("#pdfViewer").onload=function(){Kt.document.title=q.filename,Kt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(nr.output("bloburl"))}}return Kt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Gt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var yr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",q)+'"></iframe></body></html>',Sn=Gt.open();if(Sn!==null&&(Sn.document.write(yr),Sn.document.title=q.filename),Sn||typeof safari>"u")return Sn;break;case"datauri":case"dataurl":return Gt.document.location.href=this.output("datauristring",q);default:return null}},zi.foo=function(){try{return zi.apply(this,arguments)}catch(fe){var C=fe.stack||"";~C.indexOf(" at ")&&(C=C.split(" at ")[1]);var q="Error in function "+C.split(`
`)[0].split("<")[0]+": "+fe.message;if(!Gt.console)throw new Error(q);Gt.console.error(q,fe),Gt.alert&&alert(q)}},zi.foo.bar=zi,zi.foo),Ms=function(C){return Array.isArray(co)===!0&&co.indexOf(C)>-1};switch(n){case"pt":qt=1;break;case"mm":qt=72/25.4;break;case"cm":qt=72/2.54;break;case"in":qt=72;break;case"px":qt=Ms("px_scaling")==1?.75:96/72;break;case"pc":case"em":qt=12;break;case"ex":qt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);qt=n}var da=null;xe(),J();var jl=h.__private__.getPageInfo=h.getPageInfo=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Lt[C].objId,pageNumber:C,pageContext:Lt[C]}},h1=h.__private__.getPageInfoByObjId=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var q in Lt)if(Lt[q].objId===C)break;return jl(q)},s_=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:Lt[M].objId,pageNumber:M,pageContext:Lt[M]}};h.addPage=function(){return Go.apply(this,arguments),this},h.setPage=function(){return Ko.apply(this,arguments),Me.call(this,be[M]),this},h.insertPage=function(C){return this.addPage(),this.movePage(M,C),this},h.movePage=function(C,q){var fe,ye;if(C>q){fe=be[C],ye=Lt[C];for(var je=C;je>q;je--)be[je]=be[je-1],Lt[je]=Lt[je-1];be[q]=fe,Lt[q]=ye,this.setPage(q)}else if(C<q){fe=be[C],ye=Lt[C];for(var He=C;He<q;He++)be[He]=be[He+1],Lt[He]=Lt[He+1];be[q]=fe,Lt[q]=ye,this.setPage(q)}return this},h.deletePage=function(){return ho.apply(this,arguments),this},h.__private__.text=h.text=function(C,q,fe,ye,je){var He,Xe,St,Ct,Kt,nr,yr,Sn,ea,en=(ye=ye||{}).scope||this;if(typeof C=="number"&&typeof q=="number"&&(typeof fe=="string"||Array.isArray(fe))){var fa=fe;fe=q,q=C,C=fa}if(arguments[3]instanceof mt==0?(St=arguments[4],Ct=arguments[5],Br(yr=arguments[3])==="object"&&yr!==null||(typeof St=="string"&&(Ct=St,St=null),typeof yr=="string"&&(Ct=yr,yr=null),typeof yr=="number"&&(St=yr,yr=null),ye={flags:yr,angle:St,align:Ct})):(T("The transform parameter of text() with a Matrix value"),ea=je),isNaN(q)||isNaN(fe)||C==null)throw new Error("Invalid arguments passed to jsPDF.text");if(C.length===0)return en;var ta,Ba="",Pl=typeof ye.lineHeightFactor=="number"?ye.lineHeightFactor:od,mo=en.internal.scaleFactor;function Ll(Cr){return Cr=Cr.split("	").join(Array(ye.TabLen||9).join(" ")),hr(Cr,yr)}function Wp(Cr){for(var Yr,qn=Cr.concat(),ha=[],Dl=qn.length;Dl--;)typeof(Yr=qn.shift())=="string"?ha.push(Yr):Array.isArray(Cr)&&(Yr.length===1||Yr[1]===void 0&&Yr[2]===void 0)?ha.push(Yr[0]):ha.push([Yr[0],Yr[1],Yr[2]]);return ha}function eh(Cr,Yr){var qn;if(typeof Cr=="string")qn=Yr(Cr)[0];else if(Array.isArray(Cr)){for(var ha,Dl,tm=Cr.concat(),nh=[],N1=tm.length;N1--;)typeof(ha=tm.shift())=="string"?nh.push(Yr(ha)[0]):Array.isArray(ha)&&typeof ha[0]=="string"&&(Dl=Yr(ha[0],ha[1],ha[2]),nh.push([Dl[0],Dl[1],Dl[2]]));qn=nh}return qn}var Fc=!1,dd=!0;if(typeof C=="string")Fc=!0;else if(Array.isArray(C)){var fd=C.concat();Xe=[];for(var $c,Ua=fd.length;Ua--;)(typeof($c=fd.shift())!="string"||Array.isArray($c)&&typeof $c[0]!="string")&&(dd=!1);Fc=dd}if(Fc===!1)throw new Error('Type of text must be string or Array. "'+C+'" is not recognized.');typeof C=="string"&&(C=C.match(/[\r?\n]/)?C.split(/\r\n|\r|\n/g):[C]);var hd=Ue/en.internal.scaleFactor,pd=hd*(Pl-1);switch(ye.baseline){case"bottom":fe-=pd;break;case"top":fe+=hd-pd;break;case"hanging":fe+=hd-2*pd;break;case"middle":fe+=hd/2-pd}if((nr=ye.maxWidth||0)>0&&(typeof C=="string"?C=en.splitTextToSize(C,nr):Object.prototype.toString.call(C)==="[object Array]"&&(C=C.reduce(function(Cr,Yr){return Cr.concat(en.splitTextToSize(Yr,nr))},[]))),He={text:C,x:q,y:fe,options:ye,mutex:{pdfEscape:hr,activeFontKey:_t,fonts:Yt,activeFontSize:Ue}},gr.publish("preProcessText",He),C=He.text,St=(ye=He.options).angle,ea instanceof mt==0&&St&&typeof St=="number"){St*=Math.PI/180,ye.rotationDirection===0&&(St=-St),S===b&&(St=-St);var Vp=Math.cos(St),Gp=Math.sin(St);ea=new mt(Vp,Gp,-Gp,Vp,0,0)}else St&&St instanceof mt&&(ea=St);S!==b||ea||(ea=fo),(Kt=ye.charSpace||Tl)!==void 0&&(Ba+=E(D(Kt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Sn=ye.horizontalScale)!==void 0&&(Ba+=E(100*Sn)+` Tz
`),ye.lang;var yi=-1,Il=ye.renderingMode!==void 0?ye.renderingMode:ye.stroke,th=en.internal.getCurrentPageInfo().pageContext;switch(Il){case 0:case!1:case"fill":yi=0;break;case 1:case!0:case"stroke":yi=1;break;case 2:case"fillThenStroke":yi=2;break;case 3:case"invisible":yi=3;break;case 4:case"fillAndAddForClipping":yi=4;break;case 5:case"strokeAndAddPathForClipping":yi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":yi=6;break;case 7:case"addToPathForClipping":yi=7}var _1=th.usedRenderingMode!==void 0?th.usedRenderingMode:-1;yi!==-1?Ba+=yi+` Tr
`:_1!==-1&&(Ba+=`0 Tr
`),yi!==-1&&(th.usedRenderingMode=yi),Ct=ye.align||"left";var Fs,md=Ue*Pl,Kp=en.internal.pageSize.getWidth(),Xp=Yt[_t];Kt=ye.charSpace||Tl,nr=ye.maxWidth||0,yr=Object.assign({autoencode:!0,noBOM:!0},ye.flags);var Bc=[],gd=function(Cr){return en.getStringUnitWidth(Cr,{font:Xp,charSpace:Kt,fontSize:Ue,doKerning:!1})*Ue/mo};if(Object.prototype.toString.call(C)==="[object Array]"){var cs;Xe=Wp(C),Ct!=="left"&&(Fs=Xe.map(gd));var us,Uc=0;if(Ct==="right"){q-=Fs[0],C=[],Ua=Xe.length;for(var Rl=0;Rl<Ua;Rl++)Rl===0?(us=Al(q),cs=El(fe)):(us=D(Uc-Fs[Rl]),cs=-md),C.push([Xe[Rl],us,cs]),Uc=Fs[Rl]}else if(Ct==="center"){q-=Fs[0]/2,C=[],Ua=Xe.length;for(var zc=0;zc<Ua;zc++)zc===0?(us=Al(q),cs=El(fe)):(us=D((Uc-Fs[zc])/2),cs=-md),C.push([Xe[zc],us,cs]),Uc=Fs[zc]}else if(Ct==="left"){C=[],Ua=Xe.length;for(var Yp=0;Yp<Ua;Yp++)C.push(Xe[Yp])}else if(Ct==="justify"&&Xp.encoding==="Identity-H"){C=[],Ua=Xe.length,nr=nr!==0?nr:Kp;for(var rh=0,zn=0;zn<Ua;zn++)if(cs=zn===0?El(fe):-md,us=zn===0?Al(q):rh,zn<Ua-1){var S1=D((nr-Fs[zn])/(Xe[zn].split(" ").length-1)),Jo=Xe[zn].split(" ");C.push([Jo[0]+" ",us,cs]),rh=0;for(var Qo=1;Qo<Jo.length;Qo++){var Jp=(gd(Jo[Qo-1]+" "+Jo[Qo])-gd(Jo[Qo]))*mo+S1;Qo==Jo.length-1?C.push([Jo[Qo],Jp,0]):C.push([Jo[Qo]+" ",Jp,0]),rh-=Jp}}else C.push([Xe[zn],us,cs]);C.push(["",rh,0])}else{if(Ct!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(C=[],Ua=Xe.length,nr=nr!==0?nr:Kp,zn=0;zn<Ua;zn++){cs=zn===0?El(fe):-md,us=zn===0?Al(q):0;var Qp=Xe[zn].split(" ").length-1,Zp=Qp>0?(nr-Fs[zn])/Qp:0;zn<Ua-1?Bc.push(E(D(Zp))):Bc.push(0),C.push([Xe[zn],us,cs])}}}(typeof ye.R2L=="boolean"?ye.R2L:dt)===!0&&(C=eh(C,function(Cr,Yr,qn){return[Cr.split("").reverse().join(""),Yr,qn]})),He={text:C,x:q,y:fe,options:ye,mutex:{pdfEscape:hr,activeFontKey:_t,fonts:Yt,activeFontSize:Ue}},gr.publish("postProcessText",He),C=He.text,ta=He.mutex.isHex||!1;var em=Yt[_t].encoding;em!=="WinAnsiEncoding"&&em!=="StandardEncoding"||(C=eh(C,function(Cr,Yr,qn){return[Ll(Cr),Yr,qn]})),Xe=Wp(C),C=[];for(var qc,Hc,Wc,vd=Array.isArray(Xe[0])?1:0,Vc="",xd=function(Cr,Yr,qn){var ha="";return qn instanceof mt?(qn=typeof ye.angle=="number"?uo(qn,new mt(1,0,0,1,Cr,Yr)):uo(new mt(1,0,0,1,Cr,Yr),qn),S===b&&(qn=uo(new mt(1,0,0,-1,0,0),qn)),ha=qn.join(" ")+` Tm
`):ha=E(Cr)+" "+E(Yr)+` Td
`,ha},$s=0;$s<Xe.length;$s++){switch(Vc="",vd){case 1:Wc=(ta?"<":"(")+Xe[$s][0]+(ta?">":")"),qc=parseFloat(Xe[$s][1]),Hc=parseFloat(Xe[$s][2]);break;case 0:Wc=(ta?"<":"(")+Xe[$s]+(ta?">":")"),qc=Al(q),Hc=El(fe)}Bc!==void 0&&Bc[$s]!==void 0&&(Vc=Bc[$s]+` Tw
`),$s===0?C.push(Vc+xd(qc,Hc,ea)+Wc):vd===0?C.push(Vc+Wc):vd===1&&C.push(Vc+xd(qc,Hc,ea)+Wc)}C=vd===0?C.join(` Tj
T* `):C.join(` Tj
`),C+=` Tj
`;var Zo=`BT
/`;return Zo+=_t+" "+Ue+` Tf
`,Zo+=E(Ue*Pl)+` TL
`,Zo+=ld+`
`,Zo+=Ba,Zo+=C,X(Zo+="ET"),p[_t]=!0,en};var o_=h.__private__.clip=h.clip=function(C){return X(C==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return o_("evenodd")},h.__private__.discardPath=h.discardPath=function(){return X("n"),this};var Yo=h.__private__.isValidStyle=function(C){var q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(C)!==-1&&(q=!0),q};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(C){return Yo(C)&&(u=C),this};var p1=h.__private__.getStyle=h.getStyle=function(C){var q=u;switch(C){case"D":case"S":q="S";break;case"F":q="f";break;case"FD":case"DF":q="B";break;case"f":case"f*":case"B":case"B*":q=C}return q},m1=h.close=function(){return X("h"),this};h.stroke=function(){return X("S"),this},h.fill=function(C){return Jf("f",C),this},h.fillEvenOdd=function(C){return Jf("f*",C),this},h.fillStroke=function(C){return Jf("B",C),this},h.fillStrokeEvenOdd=function(C){return Jf("B*",C),this};var Jf=function(C,q){Br(q)==="object"?c_(q,C):X(C)},sd=function(C){C===null||S===b&&C===void 0||(C=p1(C),X(C))};function l_(C,q,fe,ye,je){var He=new Fh(q||this.boundingBox,fe||this.xStep,ye||this.yStep,this.gState,je||this.matrix);He.stream=this.stream;var Xe=C+"$$"+this.cloneIndex+++"$$";return ni(Xe,He),He}var c_=function(C,q){var fe=_r[C.key],ye=kt[fe];if(ye instanceof $d)X("q"),X(u_(q)),ye.gState&&h.setGState(ye.gState),X(C.matrix.toString()+" cm"),X("/"+fe+" sh"),X("Q");else if(ye instanceof Fh){var je=new mt(1,0,0,-1,0,ud());C.matrix&&(je=je.multiply(C.matrix||fo),fe=l_.call(ye,C.key,C.boundingBox,C.xStep,C.yStep,je).id),X("q"),X("/Pattern cs"),X("/"+fe+" scn"),ye.gState&&h.setGState(ye.gState),X(q),X("Q")}},u_=function(C){switch(C){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Mp=h.moveTo=function(C,q){return X(E(D(C))+" "+E(z(q))+" m"),this},g1=h.lineTo=function(C,q){return X(E(D(C))+" "+E(z(q))+" l"),this},po=h.curveTo=function(C,q,fe,ye,je,He){return X([E(D(C)),E(z(q)),E(D(fe)),E(z(ye)),E(D(je)),E(z(He)),"c"].join(" ")),this};h.__private__.line=h.line=function(C,q,fe,ye,je){if(isNaN(C)||isNaN(q)||isNaN(fe)||isNaN(ye)||!Yo(je))throw new Error("Invalid arguments passed to jsPDF.line");return S===v?this.lines([[fe-C,ye-q]],C,q,[1,1],je||"S"):this.lines([[fe-C,ye-q]],C,q,[1,1]).stroke()},h.__private__.lines=h.lines=function(C,q,fe,ye,je,He){var Xe,St,Ct,Kt,nr,yr,Sn,ea,en,fa,ta,Ba;if(typeof C=="number"&&(Ba=fe,fe=q,q=C,C=Ba),ye=ye||[1,1],He=He||!1,isNaN(q)||isNaN(fe)||!Array.isArray(C)||!Array.isArray(ye)||!Yo(je)||typeof He!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Mp(q,fe),Xe=ye[0],St=ye[1],Kt=C.length,fa=q,ta=fe,Ct=0;Ct<Kt;Ct++)(nr=C[Ct]).length===2?(fa=nr[0]*Xe+fa,ta=nr[1]*St+ta,g1(fa,ta)):(yr=nr[0]*Xe+fa,Sn=nr[1]*St+ta,ea=nr[2]*Xe+fa,en=nr[3]*St+ta,fa=nr[4]*Xe+fa,ta=nr[5]*St+ta,po(yr,Sn,ea,en,fa,ta));return He&&m1(),sd(je),this},h.path=function(C){for(var q=0;q<C.length;q++){var fe=C[q],ye=fe.c;switch(fe.op){case"m":Mp(ye[0],ye[1]);break;case"l":g1(ye[0],ye[1]);break;case"c":po.apply(this,ye);break;case"h":m1()}}return this},h.__private__.rect=h.rect=function(C,q,fe,ye,je){if(isNaN(C)||isNaN(q)||isNaN(fe)||isNaN(ye)||!Yo(je))throw new Error("Invalid arguments passed to jsPDF.rect");return S===v&&(ye=-ye),X([E(D(C)),E(z(q)),E(D(fe)),E(D(ye)),"re"].join(" ")),sd(je),this},h.__private__.triangle=h.triangle=function(C,q,fe,ye,je,He,Xe){if(isNaN(C)||isNaN(q)||isNaN(fe)||isNaN(ye)||isNaN(je)||isNaN(He)||!Yo(Xe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[fe-C,ye-q],[je-fe,He-ye],[C-je,q-He]],C,q,[1,1],Xe,!0),this},h.__private__.roundedRect=h.roundedRect=function(C,q,fe,ye,je,He,Xe){if(isNaN(C)||isNaN(q)||isNaN(fe)||isNaN(ye)||isNaN(je)||isNaN(He)||!Yo(Xe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var St=4/3*(Math.SQRT2-1);return je=Math.min(je,.5*fe),He=Math.min(He,.5*ye),this.lines([[fe-2*je,0],[je*St,0,je,He-He*St,je,He],[0,ye-2*He],[0,He*St,-je*St,He,-je,He],[2*je-fe,0],[-je*St,0,-je,-He*St,-je,-He],[0,2*He-ye],[0,-He*St,je*St,-He,je,-He]],C+je,q,[1,1],Xe,!0),this},h.__private__.ellipse=h.ellipse=function(C,q,fe,ye,je){if(isNaN(C)||isNaN(q)||isNaN(fe)||isNaN(ye)||!Yo(je))throw new Error("Invalid arguments passed to jsPDF.ellipse");var He=4/3*(Math.SQRT2-1)*fe,Xe=4/3*(Math.SQRT2-1)*ye;return Mp(C+fe,q),po(C+fe,q-Xe,C+He,q-ye,C,q-ye),po(C-He,q-ye,C-fe,q-Xe,C-fe,q),po(C-fe,q+Xe,C-He,q+ye,C,q+ye),po(C+He,q+ye,C+fe,q+Xe,C+fe,q),sd(je),this},h.__private__.circle=h.circle=function(C,q,fe,ye){if(isNaN(C)||isNaN(q)||isNaN(fe)||!Yo(ye))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(C,q,fe,fe,ye)},h.setFont=function(C,q,fe){return fe&&(q=j(q,fe)),_t=Mc(C,q,{disableWarning:!1}),this};var d_=h.__private__.getFont=h.getFont=function(){return Yt[Mc.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var C,q,fe={};for(C in Jt)if(Jt.hasOwnProperty(C))for(q in fe[C]=[],Jt[C])Jt[C].hasOwnProperty(q)&&fe[C].push(q);return fe},h.addFont=function(C,q,fe,ye,je){var He=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&He.indexOf(arguments[3])!==-1?je=arguments[3]:arguments[3]&&He.indexOf(arguments[3])==-1&&(fe=j(fe,ye)),Vr.call(this,C,q,fe,je=je||"Identity-H")};var od,Fp=e.lineWidth||.200025,f_=h.__private__.getLineWidth=h.getLineWidth=function(){return Fp},Qt=h.__private__.setLineWidth=h.setLineWidth=function(C){return Fp=C,X(E(D(C))+" w"),this};h.__private__.setLineDash=Pt.API.setLineDash=Pt.API.setLineDashPattern=function(C,q){if(C=C||[],q=q||0,isNaN(q)||!Array.isArray(C))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return C=C.map(function(fe){return E(D(fe))}).join(" "),q=E(D(q)),X("["+C+"] "+q+" d"),this};var h_=h.__private__.getLineHeight=h.getLineHeight=function(){return Ue*od};h.__private__.getLineHeight=h.getLineHeight=function(){return Ue*od};var p_=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(C){return typeof(C=C||1.15)=="number"&&(od=C),this},m_=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return od};p_(e.lineHeight);var Al=h.__private__.getHorizontalCoordinate=function(C){return D(C)},El=h.__private__.getVerticalCoordinate=function(C){return S===b?C:Lt[M].mediaBox.topRightY-Lt[M].mediaBox.bottomLeftY-D(C)},g_=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(C){return E(Al(C))},v_=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(C){return E(El(C))},Qf=e.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return de(Qf)},h.__private__.setStrokeColor=h.setDrawColor=function(C,q,fe,ye){return Qf=he({ch1:C,ch2:q,ch3:fe,ch4:ye,pdfColorType:"draw",precision:2}),X(Qf),this};var $p=e.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return de($p)},h.__private__.setFillColor=h.setFillColor=function(C,q,fe,ye){return $p=he({ch1:C,ch2:q,ch3:fe,ch4:ye,pdfColorType:"fill",precision:2}),X($p),this};var ld=e.textColor||"0 g",x_=h.__private__.getTextColor=h.getTextColor=function(){return de(ld)};h.__private__.setTextColor=h.setTextColor=function(C,q,fe,ye){return ld=he({ch1:C,ch2:q,ch3:fe,ch4:ye,pdfColorType:"text",precision:3}),this};var Tl=e.charSpace,y_=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(Tl||0)};h.__private__.setCharSpace=h.setCharSpace=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Tl=C,this};var Bp=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(C){var q=h.CapJoinStyles[C];if(q===void 0)throw new Error("Line cap style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Bp=q,X(q+" J"),this};var Up=0;h.__private__.setLineJoin=h.setLineJoin=function(C){var q=h.CapJoinStyles[C];if(q===void 0)throw new Error("Line join style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Up=q,X(q+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(C){if(C=C||0,isNaN(C))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return X(E(D(C))+" M"),this},h.GState=bb,h.setGState=function(C){(C=typeof C=="string"?Rt[Ge[C]]:v1(null,C)).equals(We)||(X("/"+C.id+" gs"),We=C)};var v1=function(C,q){if(!C||!Ge[C]){var fe=!1;for(var ye in Rt)if(Rt.hasOwnProperty(ye)&&Rt[ye].equals(q)){fe=!0;break}if(fe)q=Rt[ye];else{var je="GS"+(Object.keys(Rt).length+1).toString(10);Rt[je]=q,q.id=je}return C&&(Ge[C]=q.id),gr.publish("addGState",q),q}};h.addGState=function(C,q){return v1(C,q),this},h.saveGraphicsState=function(){return X("q"),Lr.push({key:_t,size:Ue,color:ld}),this},h.restoreGraphicsState=function(){X("Q");var C=Lr.pop();return _t=C.key,Ue=C.size,ld=C.color,We=null,this},h.setCurrentTransformationMatrix=function(C){return X(C.toString()+" cm"),this},h.comment=function(C){return X("#"+C),this};var Cl=function(C,q){var fe=C||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return fe},set:function(He){isNaN(He)||(fe=parseFloat(He))}});var ye=q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ye},set:function(He){isNaN(He)||(ye=parseFloat(He))}});var je="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return je},set:function(He){je=He.toString()}}),this},zp=function(C,q,fe,ye){Cl.call(this,C,q),this.type="rect";var je=fe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return je},set:function(Xe){isNaN(Xe)||(je=parseFloat(Xe))}});var He=ye||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return He},set:function(Xe){isNaN(Xe)||(He=parseFloat(Xe))}}),this},Zf=function(){this.page=yt,this.currentPage=M,this.pages=be.slice(0),this.pagesContext=Lt.slice(0),this.x=Nt,this.y=Xr,this.matrix=lr,this.width=Hp(M),this.height=y1(M),this.outputDestination=Fe,this.id="",this.objectNumber=-1};Zf.prototype.restore=function(){yt=this.page,M=this.currentPage,Lt=this.pagesContext,be=this.pages,Nt=this.x,Xr=this.y,lr=this.matrix,x1(M,this.width),kl(M,this.height),Fe=this.outputDestination};var qp=function(C,q,fe,ye,je){xi.push(new Zf),yt=M=0,be=[],Nt=C,Xr=q,lr=je,Pn([fe,ye])};for(var cd in h.beginFormObject=function(C,q,fe,ye,je){return qp(C,q,fe,ye,je),this},h.endFormObject=function(C){return function(q){if(Aa[q])xi.pop().restore();else{var fe=new Zf,ye="Xo"+(Object.keys(On).length+1).toString(10);fe.id=ye,Aa[q]=ye,On[ye]=fe,gr.publish("addFormObject",fe),xi.pop().restore()}}(C),this},h.doFormObject=function(C,q){var fe=On[Aa[C]];return X("q"),X(q.toString()+" cm"),X("/"+fe.id+" Do"),X("Q"),this},h.getFormObject=function(C){var q=On[Aa[C]];return{x:q.x,y:q.y,width:q.width,height:q.height,matrix:q.matrix}},h.save=function(C,q){return C=C||"generated.pdf",(q=q||{}).returnPromise=q.returnPromise||!1,q.returnPromise===!1?(Pd(Yf(Xo()),C),typeof Pd.unload=="function"&&Gt.setTimeout&&setTimeout(Pd.unload,911),this):new Promise(function(fe,ye){try{var je=Pd(Yf(Xo()),C);typeof Pd.unload=="function"&&Gt.setTimeout&&setTimeout(Pd.unload,911),fe(je)}catch(He){ye(He.message)}})},Pt.API)Pt.API.hasOwnProperty(cd)&&(cd==="events"&&Pt.API.events.length?function(C,q){var fe,ye,je;for(je=q.length-1;je!==-1;je--)fe=q[je][0],ye=q[je][1],C.subscribe.apply(C,[fe].concat(typeof ye=="function"?[ye]:ye))}(gr,Pt.API.events):h[cd]=Pt.API[cd]);function Hp(C){return Lt[C].mediaBox.topRightX-Lt[C].mediaBox.bottomLeftX}function x1(C,q){Lt[C].mediaBox.topRightX=q+Lt[C].mediaBox.bottomLeftX}function y1(C){return Lt[C].mediaBox.topRightY-Lt[C].mediaBox.bottomLeftY}function kl(C,q){Lt[C].mediaBox.topRightY=q+Lt[C].mediaBox.bottomLeftY}var Ol=h.getPageWidth=function(C){return Hp(C=C||M)/qt},b1=h.setPageWidth=function(C,q){x1(C,q*qt)},ud=h.getPageHeight=function(C){return y1(C=C||M)/qt},w1=h.setPageHeight=function(C,q){kl(C,q*qt)};return h.internal={pdfEscape:hr,getStyle:p1,getFont:d_,getFontSize:st,getCharSpace:y_,getTextColor:x_,getLineHeight:h_,getLineHeightFactor:m_,getLineWidth:f_,write:Ie,getHorizontalCoordinate:Al,getVerticalCoordinate:El,getCoordinateString:g_,getVerticalCoordinateString:v_,collections:{},newObject:vn,newAdditionalObject:ue,newObjectDeferred:Jn,newObjectDeferredBegin:W,getFilters:Te,putStream:De,events:gr,scaleFactor:qt,pageSize:{getWidth:function(){return Ol(M)},setWidth:function(C){b1(M,C)},getHeight:function(){return ud(M)},setHeight:function(C){w1(M,C)}},encryptionOptions:d,encryption:da,getEncryptor:function(C){return d!==null?da.encryptor(C,0):function(q){return q}},output:f1,getNumberOfPages:Ds,get pages(){return be},out:X,f2:O,f3:I,getPageInfo:jl,getPageInfoByObjId:h1,getCurrentPageInfo:s_,getPDFVersion:m,Point:Cl,Rectangle:zp,Matrix:mt,hasHotfix:Ms},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return Ol(M)},set:function(C){b1(M,C)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return ud(M)},set:function(C){w1(M,C)},enumerable:!0,configurable:!0}),(function(C){for(var q=0,fe=Qe.length;q<fe;q++){var ye=Vr.call(this,C[q][0],C[q][1],C[q][2],Qe[q][3],!0);f===!1&&(p[ye]=!0);var je=C[q][0].split("-");Ht({id:ye,fontName:je[0],fontStyle:je[1]||""})}gr.publish("addFonts",{fonts:Yt,dictionary:Jt})}).call(h,Qe),_t="F1",Go(a,r),gr.publish("initialized"),h}_h.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},_h.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},_h.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},_h.prototype.processOwnerPassword=function(e,t){return wj(bj(t).substr(0,5),e)},_h.prototype.encryptor=function(e,t){var r=bj(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return wj(r,n)}},bb.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Br(e)!==Br(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Pt.API={events:[]},Pt.version="3.0.4";var Mn=Pt.API,X3=1,Hf=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ph=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},er=function(e){return e.toFixed(2)},nu=function(e){return e.toFixed(5)};Mn.__acroform__={};var os=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},M6=function(e){return e*X3},al=function(e){var t=new gB,r=wt.internal.getHeight(e)||0,n=wt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(er(n)),Number(er(r))],t},Khe=Mn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},Xhe=Mn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},Yhe=Mn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Gn=Mn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Yhe(e,t-1)},Kn=Mn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Khe(e,t-1)},Xn=Mn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Xhe(e,t-1)},Jhe=Mn.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],i=e[1],s=e[2],o=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(i+o)||0,c.upperRight_X=r(a+s)||0,c.upperRight_Y=n(i)||0,[Number(er(c.lowerLeft_X)),Number(er(c.lowerLeft_Y)),Number(er(c.upperRight_X)),Number(er(c.upperRight_Y))]},Qhe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=_j(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+er(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=al(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},_j=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(O){return O.split(`
`)}):a.map(function(O){return[O]});var i=r,s=wt.internal.getHeight(e)||0;s=s<0?-s:s;var o=wt.internal.getWidth(e)||0;o=o<0?-o:o;var c=function(O,I,D){if(O+1<a.length){var z=I+" "+a[O+1][0];return Px(z,e,D).width<=o-4}return!1};i++;e:for(;i>0;){t="",i--;var u,d,f=Px("3",e,i).height,p=e.multiline?s-i:(s-f)/2,h=p+=2,g=0,m=0,x=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+Px(t,e,i=12).width+", FieldWidth:"+o+`
`;break}for(var y="",v=0,b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var S=!1;if(a[b].length!==1&&x!==a[b].length-1){if((f+2)*(v+2)+2>s)continue e;y+=a[b][x],S=!0,m=b,b--}else{y=(y+=a[b][x]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var _=parseInt(b),A=c(_,y,i),j=b>=a.length-1;if(A&&!j){y+=" ",x=0;continue}if(A||j){if(j)m=_;else if(e.multiline&&(f+2)*(v+2)+2>s)continue e}else{if(!e.multiline||(f+2)*(v+2)+2>s)continue e;m=_}}for(var E="",T=g;T<=m;T++){var L=a[T];if(e.multiline){if(T===m){E+=L[x]+" ",x=(x+1)%L.length;continue}if(T===g){E+=L[L.length-1]+" ";continue}}E+=L[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,d=Px(E,e,i).width,e.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;default:u=2}t+=er(u)+" "+er(h)+` Td
`,t+="("+Hf(E)+`) Tj
`,t+=-er(u)+` 0 Td
`,h=-(i+2),d=0,g=S?m:m+1,v++,y=""}break}return n.text=t,n.fontSize=i,n},Px=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},Zhe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},e0e=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},t0e=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(qo.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Zhe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");X3=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new vB,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&e0e(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var i=!n;for(var s in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(s)){var o=n[s],c=[],u=o.Rect;if(o.Rect&&(o.Rect=Jhe(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=wt.createDefaultAppearanceStream(o),Br(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=Qhe(o);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var h=o.appearanceStreamContent[p];if(f+="/"+p+" ",f+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var s in h)if(h.hasOwnProperty(s)){var g=h[s];typeof g=="function"&&(g=g.call(a,o)),f+="/"+s+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=h)=="function"&&(g=g.call(a,o)),f+="/"+s+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:o.objId}),a.internal.out("endobj")}i&&function(m,x){for(var y in m)if(m.hasOwnProperty(y)){var v=y,b=m[y];x.internal.newObjectDeferredBegin(b.objId,!0),Br(b)==="object"&&typeof b.putStream=="function"&&b.putStream(),delete m[v]}}(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},mB=Mn.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(s){return s};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),Br(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+Hf(n(e[i].toString()))+")"):a+=e[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},K5=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+Hf(n(e))+")"},dl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};dl.prototype.toString=function(){return this.objId+" 0 R"},dl.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},dl.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:mB(a,this.objId,this.scope)}):a instanceof dl?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var gB=function(){dl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};os(gB,dl);var vB=function(){dl.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Hf(r(e))+")"}},set:function(r){e=r}})};os(vB,dl);var qo=function e(){dl.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Gn(t,3)},set:function(y){y?this.F=Kn(t,3):this.F=Xn(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof wb)return;i="FieldObject"+e.FieldNum++}var y=function(v){return v};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Hf(y(i))+")"},set:function(y){i=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(y){i=y}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(y){s=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/X3:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof wb||this instanceof df))return K5(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof ka==0?K5(p,this.objId,this.scope):p},set:function(y){y=y.toString(),p=this instanceof ka==0?y.substr(0,1)==="("?ph(y.substr(1,y.length-2)):ph(y):y}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ka==1?ph(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof ka==1?"/"+y:y}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof ka==0?K5(h,this.objId,this.scope):h},set:function(y){y=y.toString(),h=this instanceof ka==0?y.substr(0,1)==="("?ph(y.substr(1,y.length-2)):ph(y):y}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ka==1?ph(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof ka==1?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(y){y=!!y,m=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,1)},set:function(y){y?this.Ff=Kn(this.Ff,1):this.Ff=Xn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,2)},set:function(y){y?this.Ff=Kn(this.Ff,2):this.Ff=Xn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,3)},set:function(y){y?this.Ff=Kn(this.Ff,3):this.Ff=Xn(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');x=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(x){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:x=2;break;case"center":case 1:x=1;break;default:x=0}}})};os(qo,dl);var n0=function(){qo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return mB(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(i,s,o){o||(o=1);for(var c,u=[];c=s.exec(i);)u.push(c[o]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,18)},set:function(r){r?this.Ff=Kn(this.Ff,18):this.Ff=Xn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Kn(this.Ff,19):this.Ff=Xn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,20)},set:function(r){r?(this.Ff=Kn(this.Ff,20),t.sort()):this.Ff=Xn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,22)},set:function(r){r?this.Ff=Kn(this.Ff,22):this.Ff=Xn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,23)},set:function(r){r?this.Ff=Kn(this.Ff,23):this.Ff=Xn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,27)},set:function(r){r?this.Ff=Kn(this.Ff,27):this.Ff=Xn(this.Ff,27)}}),this.hasAppearanceStream=!1};os(n0,qo);var a0=function(){n0.call(this),this.fontName="helvetica",this.combo=!1};os(a0,n0);var i0=function(){a0.call(this),this.combo=!0};os(i0,a0);var py=function(){i0.call(this),this.edit=!0};os(py,i0);var ka=function(){qo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,15)},set:function(r){r?this.Ff=Kn(this.Ff,15):this.Ff=Xn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,16)},set:function(r){r?this.Ff=Kn(this.Ff,16):this.Ff=Xn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,17)},set:function(r){r?this.Ff=Kn(this.Ff,17):this.Ff=Xn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,26)},set:function(r){r?this.Ff=Kn(this.Ff,26):this.Ff=Xn(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+Hf(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Br(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};os(ka,qo);var my=function(){ka.call(this),this.pushButton=!0};os(my,ka);var s0=function(){ka.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};os(s0,ka);var wb=function(){var e,t;qo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,s=[];for(i in s.push("<<"),n)s.push("/"+i+" ("+Hf(a(n[i]))+")");return s.push(">>"),s.join(`
`)},set:function(a){Br(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=wt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};os(wb,qo),s0.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},s0.prototype.createOption=function(e){var t=new wb;return t.Parent=this,t.optionName=e,this.Kids.push(t),r0e.call(this.scope,t),t};var gy=function(){ka.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=wt.CheckBox.createAppearanceStream()};os(gy,ka);var df=function(){qo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,13)},set:function(t){t?this.Ff=Kn(this.Ff,13):this.Ff=Xn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,21)},set:function(t){t?this.Ff=Kn(this.Ff,21):this.Ff=Xn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,23)},set:function(t){t?this.Ff=Kn(this.Ff,23):this.Ff=Xn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,24)},set:function(t){t?this.Ff=Kn(this.Ff,24):this.Ff=Xn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,25)},set:function(t){t?this.Ff=Kn(this.Ff,25):this.Ff=Xn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,26)},set:function(t){t?this.Ff=Kn(this.Ff,26):this.Ff=Xn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};os(df,qo);var vy=function(){df.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,14)},set:function(e){e?this.Ff=Kn(this.Ff,14):this.Ff=Xn(this.Ff,14)}}),this.password=!0};os(vy,df);var wt={CheckBox:{createAppearanceStream:function(){return{N:{On:wt.CheckBox.YesNormal},D:{On:wt.CheckBox.YesPushDown,Off:wt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=al(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=_j(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+er(wt.internal.getWidth(e))+" "+er(wt.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+er(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=al(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],i=wt.internal.getHeight(e),s=wt.internal.getWidth(e),o=_j(e,e.caption);return a.push("1 g"),a.push("0 0 "+er(s)+" "+er(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+er(s-1)+" "+er(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+er(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=al(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+er(wt.internal.getWidth(e))+" "+er(wt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:wt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=wt.RadioButton.Circle.YesNormal,t.D[e]=wt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=al(e);t.scope=e.scope;var r=[],n=wt.internal.getWidth(e)<=wt.internal.getHeight(e)?wt.internal.getWidth(e)/4:wt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=wt.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+nu(wt.internal.getWidth(e)/2)+" "+nu(wt.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=al(e);t.scope=e.scope;var r=[],n=wt.internal.getWidth(e)<=wt.internal.getHeight(e)?wt.internal.getWidth(e)/4:wt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*wt.internal.Bezier_C).toFixed(5)),s=Number((n*wt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+nu(wt.internal.getWidth(e)/2)+" "+nu(wt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+nu(wt.internal.getWidth(e)/2)+" "+nu(wt.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=al(e);t.scope=e.scope;var r=[],n=wt.internal.getWidth(e)<=wt.internal.getHeight(e)?wt.internal.getWidth(e)/4:wt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*wt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+nu(wt.internal.getWidth(e)/2)+" "+nu(wt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:wt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=wt.RadioButton.Cross.YesNormal,t.D[e]=wt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=al(e);t.scope=e.scope;var r=[],n=wt.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+er(wt.internal.getWidth(e)-2)+" "+er(wt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(er(n.x1.x)+" "+er(n.x1.y)+" m"),r.push(er(n.x2.x)+" "+er(n.x2.y)+" l"),r.push(er(n.x4.x)+" "+er(n.x4.y)+" m"),r.push(er(n.x3.x)+" "+er(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=al(e);t.scope=e.scope;var r=wt.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+er(wt.internal.getWidth(e))+" "+er(wt.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+er(wt.internal.getWidth(e)-2)+" "+er(wt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(er(r.x1.x)+" "+er(r.x1.y)+" m"),n.push(er(r.x2.x)+" "+er(r.x2.y)+" l"),n.push(er(r.x4.x)+" "+er(r.x4.y)+" m"),n.push(er(r.x3.x)+" "+er(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=al(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+er(wt.internal.getWidth(e))+" "+er(wt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};wt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=wt.internal.getWidth(e),r=wt.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},wt.internal.getWidth=function(e){var t=0;return Br(e)==="object"&&(t=M6(e.Rect[2])),t},wt.internal.getHeight=function(e){var t=0;return Br(e)==="object"&&(t=M6(e.Rect[3])),t};var r0e=Mn.addField=function(e){if(t0e(this,e),!(e instanceof qo))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Mn.AcroFormChoiceField=n0,Mn.AcroFormListBox=a0,Mn.AcroFormComboBox=i0,Mn.AcroFormEditBox=py,Mn.AcroFormButton=ka,Mn.AcroFormPushButton=my,Mn.AcroFormRadioButton=s0,Mn.AcroFormCheckBox=gy,Mn.AcroFormTextField=df,Mn.AcroFormPasswordField=vy,Mn.AcroFormAppearance=wt,Mn.AcroForm={ChoiceField:n0,ListBox:a0,ComboBox:i0,EditBox:py,Button:ka,PushButton:my,RadioButton:s0,CheckBox:gy,TextField:df,PasswordField:vy,Appearance:wt},Pt.AcroForm={ChoiceField:n0,ListBox:a0,ComboBox:i0,EditBox:py,Button:ka,PushButton:my,RadioButton:s0,CheckBox:gy,TextField:df,PasswordField:vy,Appearance:wt};Pt.AcroForm;function xB(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(O,I){var D,z,Y,se,ee,J=r;if((I=I||r)==="RGBA"||O.data!==void 0&&O.data instanceof Uint8ClampedArray&&"height"in O&&"width"in O)return"RGBA";if(A(O))for(ee in n)for(Y=n[ee],D=0;D<Y.length;D+=1){for(se=!0,z=0;z<Y[D].length;z+=1)if(Y[D][z]!==void 0&&Y[D][z]!==O[z]){se=!1;break}if(se===!0){J=ee;break}}else for(ee in n)for(Y=n[ee],D=0;D<Y.length;D+=1){for(se=!0,z=0;z<Y[D].length;z+=1)if(Y[D][z]!==void 0&&Y[D][z]!==O.charCodeAt(z)){se=!1;break}if(se===!0){J=ee;break}}return J===r&&I!==r&&(J=I),J},i=function O(I){for(var D=this.internal.write,z=this.internal.putStream,Y=(0,this.internal.getFilters)();Y.indexOf("FlateEncode")!==-1;)Y.splice(Y.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var se=[];if(se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Image"}),se.push({key:"Width",value:I.width}),se.push({key:"Height",value:I.height}),I.colorSpace===y.INDEXED?se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(se.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===y.DEVICE_CMYK&&se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),se.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&se.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)&&I.transparency.length>0){for(var ee="",J=0,oe=I.transparency.length;J<oe;J++)ee+=I.transparency[J]+" "+I.transparency[J]+" ";se.push({key:"Mask",value:"["+ee+"]"})}I.sMask!==void 0&&se.push({key:"SMask",value:I.objectId+1+" 0 R"});var we=I.filter!==void 0?["/"+I.filter]:void 0;if(z({data:I.data,additionalKeyValues:se,alreadyAppliedFilters:we,objectId:I.objectId}),D("endobj"),"sMask"in I&&I.sMask!==void 0){var xe,k=(xe=I.sMaskBitsPerComponent)!==null&&xe!==void 0?xe:I.bitsPerComponent,M={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:k,data:I.sMask};"filter"in I&&(M.decodeParameters="/Predictor ".concat(I.predictor," /Colors 1 /BitsPerComponent ").concat(k," /Columns ").concat(I.width),M.filter=I.filter),O.call(this,M)}if(I.colorSpace===y.INDEXED){var B=this.internal.newObject();z({data:E(new Uint8Array(I.palette)),objectId:B}),D("endobj")}},s=function(){var O=this.internal.collections[t+"images"];for(var I in O)i.call(this,O[I])},o=function(){var O,I=this.internal.collections[t+"images"],D=this.internal.write;for(var z in I)D("/I"+(O=I[z]).index,O.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},u=function(){var O=this.internal.collections[t+"images"];return c.call(this),O},d=function(){return Object.keys(this.internal.collections[t+"images"]).length},f=function(O){return typeof e["process"+O.toUpperCase()]=="function"},p=function(O){return Br(O)==="object"&&O.nodeType===1},h=function(O,I){if(O.nodeName==="IMG"&&O.hasAttribute("src")){var D=""+O.getAttribute("src");if(D.indexOf("data:image/")===0)return hy(unescape(D).split("base64,").pop());var z=e.loadFile(D,!0);if(z!==void 0)return z}if(O.nodeName==="CANVAS"){if(O.width===0||O.height===0)throw new Error("Given canvas must have data. Canvas width: "+O.width+", height: "+O.height);var Y;switch(I){case"PNG":Y="image/png";break;case"WEBP":Y="image/webp";break;default:Y="image/jpeg"}return hy(O.toDataURL(Y,1).split("base64,").pop())}},g=function(O){var I=this.internal.collections[t+"images"];if(I){for(var D in I)if(O===I[D].alias)return I[D]}},m=function(O,I,D){return O||I||(O=-96,I=-96),O<0&&(O=-1*D.width*72/O/this.internal.scaleFactor),I<0&&(I=-1*D.height*72/I/this.internal.scaleFactor),O===0&&(O=I*D.width/D.height),I===0&&(I=O*D.height/D.width),[O,I]},x=function(O,I,D,z,Y,se){var ee=m.call(this,D,z,Y),J=this.internal.getCoordinateString,oe=this.internal.getVerticalCoordinateString,we=u.call(this);if(D=ee[0],z=ee[1],we[Y.index]=Y,se){se*=Math.PI/180;var xe=Math.cos(se),k=Math.sin(se),M=function(U){return U.toFixed(4)},B=[M(xe),M(k),M(-1*k),M(xe),0,0,"cm"]}this.internal.write("q"),se?(this.internal.write([1,"0","0",1,J(O),oe(I+z),"cm"].join(" ")),this.internal.write(B.join(" ")),this.internal.write([J(D),"0","0",J(z),"0","0","cm"].join(" "))):this.internal.write([J(D),"0","0",J(z),J(O),oe(I+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Y.index+" Do"),this.internal.write("Q")},y=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=e.__addimage__.sHashCode=function(O){var I,D,z=0;if(typeof O=="string")for(D=O.length,I=0;I<D;I++)z=(z<<5)-z+O.charCodeAt(I),z|=0;else if(A(O))for(D=O.byteLength/2,I=0;I<D;I++)z=(z<<5)-z+O[I],z|=0;return z},S=e.__addimage__.validateStringAsBase64=function(O){(O=O||"").toString().trim();var I=!0;return O.length===0&&(I=!1),O.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(O.substr(0,O.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(O.substr(-2))===!1&&(I=!1),I},_=e.__addimage__.extractImageFromDataUrl=function(O){if(O==null||!(O=O.trim()).startsWith("data:"))return null;var I=O.indexOf(",");return I<0?null:O.substring(0,I).trim().endsWith("base64")?O.substring(I+1):null};e.__addimage__.isArrayBuffer=function(O){return O instanceof ArrayBuffer};var A=e.__addimage__.isArrayBufferView=function(O){return O instanceof Int8Array||O instanceof Uint8Array||O instanceof Uint8ClampedArray||O instanceof Int16Array||O instanceof Uint16Array||O instanceof Int32Array||O instanceof Uint32Array||O instanceof Float32Array||O instanceof Float64Array},j=e.__addimage__.binaryStringToUint8Array=function(O){for(var I=O.length,D=new Uint8Array(I),z=0;z<I;z++)D[z]=O.charCodeAt(z);return D},E=e.__addimage__.arrayBufferToBinaryString=function(O){for(var I="",D=A(O)?O:new Uint8Array(O),z=0;z<D.length;z+=8192)I+=String.fromCharCode.apply(null,D.subarray(z,z+8192));return I};e.addImage=function(){var O,I,D,z,Y,se,ee,J,oe;if(typeof arguments[1]=="number"?(I=r,D=arguments[1],z=arguments[2],Y=arguments[3],se=arguments[4],ee=arguments[5],J=arguments[6],oe=arguments[7]):(I=arguments[1],D=arguments[2],z=arguments[3],Y=arguments[4],se=arguments[5],ee=arguments[6],J=arguments[7],oe=arguments[8]),Br(O=arguments[0])==="object"&&!p(O)&&"imageData"in O){var we=O;O=we.imageData,I=we.format||I||r,D=we.x||D||0,z=we.y||z||0,Y=we.w||we.width||Y,se=we.h||we.height||se,ee=we.alias||ee,J=we.compression||J,oe=we.rotation||we.angle||oe}var xe=this.internal.getFilters();if(J===void 0&&xe.indexOf("FlateEncode")!==-1&&(J="SLOW"),isNaN(D)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var k=T.call(this,O,I,ee,J);return x.call(this,D,z,Y,se,k,oe),this};var T=function(O,I,D,z){var Y,se,ee;if(typeof O=="string"&&a(O)===r){O=unescape(O);var J=L(O,!1);(J!==""||(J=e.loadFile(O,!0))!==void 0)&&(O=J)}if(p(O)&&(O=h(O,I)),I=a(O,I),!f(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((ee=D)==null||ee.length===0)&&(D=function(oe){return typeof oe=="string"||A(oe)?b(oe):A(oe.data)?b(oe.data):null}(O)),(Y=g.call(this,D))||(O instanceof Uint8Array||I==="RGBA"||(se=O,O=j(O)),Y=this["process"+I.toUpperCase()](O,d.call(this),D,function(oe){return oe&&typeof oe=="string"&&(oe=oe.toUpperCase()),oe in e.image_compression?oe:v.NONE}(z),se)),!Y)throw new Error("An unknown error occurred whilst processing the image.");return Y},L=e.__addimage__.convertBase64ToBinaryString=function(O,I){I=typeof I!="boolean"||I;var D,z="";if(typeof O=="string"){var Y;D=(Y=_(O))!==null&&Y!==void 0?Y:O;try{z=hy(D)}catch(se){if(I)throw S(D)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return z};e.getImageProperties=function(O){var I,D,z="";if(p(O)&&(O=h(O)),typeof O=="string"&&a(O)===r&&((z=L(O,!1))===""&&(z=e.loadFile(O)||""),O=z),D=a(O),!f(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(O instanceof Uint8Array||(O=j(O)),!(I=this["process"+D.toUpperCase()](O)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=D,I}})(Pt.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Pt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,i,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){n=u[p];var h=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var m=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(m.objId),v=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+h(y(n.contents))+")",i+=" /Popup "+x.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+h(y(v))+") >>",m.content=i;var b=m.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+s(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(i+=" /Open true"),i+=" >>",x.content=i,this.internal.write(m.objId,"0 R",x.objId,"0 R");break;case"freetext":a="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var S=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+h(g(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+S+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var _=this.annotations._nameMap[n.options.name];n.options.pageNumber=_.page,n.options.top=_.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+h(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var A=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+A+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,i,s){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+i)},options:s,type:"link"})},e.textWithLink=function(r,n,a,i){var s,o,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var d=this.splitTextToSize(r,o).length;s=Math.ceil(u*d)}else o=c,s=u;return this.text(r,n,a,i),a+=.2*u,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,a-u,o,s,i),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Pt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(m){return t[m.charCodeAt(0)]!==void 0},s=e.__arabicParser__.isArabicLetter=function(m){return typeof m=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(m)},o=e.__arabicParser__.isArabicEndLetter=function(m){return s(m)&&i(m)&&t[m.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(m){return s(m)&&a.indexOf(m.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(m){return s(m)&&i(m)&&t[m.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(m){return s(m)&&i(m)&&t[m.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(m){return s(m)&&i(m)&&t[m.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(m){return s(m)&&i(m)&&t[m.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(m){var x=0,y=r,v="",b=0;for(x=0;x<m.length;x+=1)y[m.charCodeAt(x)]!==void 0?(b++,typeof(y=y[m.charCodeAt(x)])=="number"&&(v+=String.fromCharCode(y),y=r,b=0),x===m.length-1&&(y=r,v+=m.charAt(x-(b-1)),x-=b-1,b=0)):(y=r,v+=m.charAt(x-b),x-=b,b=0);return v};e.__arabicParser__.isArabicDiacritic=function(m){return m!==void 0&&n[m.charCodeAt(0)]!==void 0};var p=e.__arabicParser__.getCorrectForm=function(m,x,y){return s(m)?i(m)===!1?-1:!u(m)||!s(x)&&!s(y)||!s(y)&&o(x)||o(m)&&!s(x)||o(m)&&c(x)||o(m)&&o(x)?0:d(m)&&s(x)&&!o(x)&&s(y)&&u(y)?3:o(m)||!s(y)?1:2:-1},h=function(m){var x=0,y=0,v=0,b="",S="",_="",A=(m=m||"").split("\\s+"),j=[];for(x=0;x<A.length;x+=1){for(j.push(""),y=0;y<A[x].length;y+=1)b=A[x][y],S=A[x][y-1],_=A[x][y+1],s(b)?(v=p(b,S,_),j[x]+=v!==-1?String.fromCharCode(t[b.charCodeAt(0)][v]):b):j[x]+=b;j[x]=f(j[x])}return j.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var m,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(x)){var v=0;for(y=[],v=0;v<x.length;v+=1)Array.isArray(x[v])?y.push([h(x[v][0]),x[v][1],x[v][2]]):y.push([h(x[v])]);m=y}else m=h(x);return typeof arguments[0]=="string"?m:(arguments[0].text=m,arguments[0])};e.events.push(["preProcessText",g])}(Pt.API),Pt.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Pt.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(m){c=m}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(m){u=m}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(m){d=m}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(m){f=m}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(m){p=m}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(m){h=m}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(m){g=m}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,h=0,g=0,m=0,x=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(b,S){return b.concat(x.splitTextToSize(S,y))},[])):c=Array.isArray(c)?c:[c];for(var v=0;v<c.length;v++)h<(m=this.getStringUnitWidth(c[v],{font:f})*d)&&(h=m);return h!==0&&(g=c.length),{w:h/=p,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/p,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,p=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,h&&p&&(this.printHeaderRow(c.lineNumber,!0),c.y+=p[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,p){if(n.call(this),!d)throw new Error("No data for PDF table.");var h,g,m,x,y=[],v=[],b=[],S={},_={},A=[],j=[],E=(p=p||{}).autoSize||!1,T=p.printHeaders!==!1,L=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,O=p.margins||Object.assign({width:this.getPageWidth()},t),I=typeof p.padding=="number"?p.padding:3,D=p.headerBackgroundColor||"#c8c8c8",z=p.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=O,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=z,this.setFontSize(L),f==null)v=y=Object.keys(d[0]),b=y.map(function(){return"left"});else if(Array.isArray(f)&&Br(f[0])==="object")for(y=f.map(function(we){return we.name}),v=f.map(function(we){return we.prompt||we.name||""}),b=f.map(function(we){return we.align||"left"}),h=0;h<f.length;h+=1)_[f[h].name]=.7499990551181103*f[h].width;else Array.isArray(f)&&typeof f[0]=="string"&&(v=y=f,b=y.map(function(){return"left"}));if(E||Array.isArray(f)&&typeof f[0]=="string")for(h=0;h<y.length;h+=1){for(S[x=y[h]]=d.map(function(we){return we[x]}),this.setFont(void 0,"bold"),A.push(this.getTextDimensions(v[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=S[x],this.setFont(void 0,"normal"),m=0;m<g.length;m+=1)A.push(this.getTextDimensions(g[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);_[x]=Math.max.apply(null,A)+I+I,A=[]}if(T){var Y={};for(h=0;h<y.length;h+=1)Y[y[h]]={},Y[y[h]].text=v[h],Y[y[h]].align=b[h];var se=o.call(this,Y,_);j=y.map(function(we){return new i(c,u,_[we],se,Y[we].text,void 0,Y[we].align)}),this.setTableHeaderRow(j),this.printHeaderRow(1,!1)}var ee=f.reduce(function(we,xe){return we[xe.name]=xe.align,we},{});for(h=0;h<d.length;h+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:h,data:d[h]},this);var J=o.call(this,d[h],_);for(m=0;m<y.length;m+=1){var oe=d[h][y[m]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:h,col:m,data:oe},this),s.call(this,new i(c,u,_[y[m]],J,oe,h+2,ee[y[m]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var o=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(c).map(function(h){var g=c[h];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[h]-d-d)},this).map(function(h){return this.getLineHeightFactor()*h.length*f/p+d+d},this).reduce(function(h,g){return Math.max(h,g)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){d=this.internal.__cell__.tableHeaderRow[h].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,p.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,d),this.setTextColor(g)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}}(Pt.API);var yB={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},bB=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Sj=xB(bB),wB=[100,200,300,400,500,600,700,800,900],n0e=xB(wB);function X5(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return yB[i=i||"normal"]?i:"normal"}(e.style),n=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(e.weight),a=function(i){return typeof Sj[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function F6(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var a0e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},$6={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function B6(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function U6(e){return e.trimLeft()}function i0e(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function s0e(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Lx,z6,q6,mh,Ix,H6,W6,V6,Y5=["times"];function G6(e,t,r,n,a){var i=4,s=X6;switch(a){case Pt.API.image_compression.FAST:i=1,s=K6;break;case Pt.API.image_compression.MEDIUM:i=6,s=Y6;break;case Pt.API.image_compression.SLOW:i=9,s=J6}e=function(c,u,d,f){for(var p,h=c.length/u,g=new Uint8Array(c.length+h),m=[o0e,K6,X6,Y6,J6],x=0;x<h;x+=1){var y=x*u,v=c.subarray(y,y+u);if(f)g.set(f(v,d,p),y+x);else{for(var b=m.length,S=[],_=0;_<b;_+=1)S[_]=m[_](v,d,p);var A=c0e(S.concat());g.set(S[A],y+x)}p=v}return g}(e,t,Math.ceil(r*n/8),s);var o=gj(e,{level:i});return Pt.API.__addimage__.arrayBufferToBinaryString(o)}function o0e(e){var t=Array.apply([],e);return t.unshift(0),t}function K6(e,t){var r=e.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var i=e[a-t]||0;n[a+1]=e[a]-i+256&255}return n}function X6(e,t,r){var n=e.length,a=[];a[0]=2;for(var i=0;i<n;i+=1){var s=r&&r[i]||0;a[i+1]=e[i]-s+256&255}return a}function Y6(e,t,r){var n=e.length,a=[];a[0]=3;for(var i=0;i<n;i+=1){var s=e[i-t]||0,o=r&&r[i]||0;a[i+1]=e[i]+256-(s+o>>>1)&255}return a}function J6(e,t,r){var n=e.length,a=[];a[0]=4;for(var i=0;i<n;i+=1){var s=l0e(e[i-t]||0,r&&r[i]||0,r&&r[i-t]||0);a[i+1]=e[i]-s+256&255}return a}function l0e(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),a=Math.abs(e-r),i=Math.abs(e+t-r-r);return n<=a&&n<=i?e:a<=i?t:r}function c0e(e){var t=e.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return t.indexOf(Math.min.apply(null,t))}function J5(e,t,r){var n=t*r,a=Math.floor(n/8),i=16-(n-8*a+r),s=(1<<r)-1;return _B(e,a)>>i&s}function Q6(e,t,r,n){var a=r*n,i=Math.floor(a/8),s=16-(a-8*i+n),o=(1<<n)-1,c=(t&o)<<s;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var p=f>>8&255;u.setUint8(d,p)}})(e,i,_B(e,i)&~(o<<s)&65535|c)}function _B(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function u0e(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,s=1<<1+(7&a);e[t++],e[t++];var o=null,c=null;i&&(o=t,c=s,t+=3*s);var u=!0,d=[],f=0,p=null,h=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((O=e[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var m=e[t++];f=e[t++]|e[t++]<<8,p=e[t++],1&m||(p=null),h=m>>2&7,t++;break;case 254:for(;;){if(!((O=e[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var x=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,S=e[t++],_=S>>6&1,A=1<<1+(7&S),j=o,E=c,T=!1;S>>7&&(T=!0,j=t,E=A,t+=3*A);var L=t;for(t++;;){var O;if(!((O=e[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}d.push({x,y,width:v,height:b,has_local_palette:T,palette_offset:j,palette_size:E,data_offset:L,data_length:t-L,transparent_index:p,interlaced:!!_,delay:f,disposal:h});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(I){if(I<0||I>=d.length)throw new Error("Frame index out of range.");return d[I]},this.decodeAndBlitFrameBGRA=function(I,D){var z=this.frameInfo(I),Y=z.width*z.height,se=new Uint8Array(Y);Z6(e,z.data_offset,se,Y);var ee=z.palette_offset,J=z.transparent_index;J===null&&(J=256);var oe=z.width,we=r-oe,xe=oe,k=4*(z.y*r+z.x),M=4*((z.y+z.height)*r+z.x),B=k,U=4*we;z.interlaced===!0&&(U+=4*r*7);for(var Z=8,pe=0,K=se.length;pe<K;++pe){var te=se[pe];if(xe===0&&(xe=oe,(B+=U)>=M&&(U=4*we+4*r*(Z-1),B=k+(oe+we)*(Z<<1),Z>>=1)),te===J)B+=4;else{var ae=e[ee+3*te],be=e[ee+3*te+1],ve=e[ee+3*te+2];D[B++]=ve,D[B++]=be,D[B++]=ae,D[B++]=255}--xe}},this.decodeAndBlitFrameRGBA=function(I,D){var z=this.frameInfo(I),Y=z.width*z.height,se=new Uint8Array(Y);Z6(e,z.data_offset,se,Y);var ee=z.palette_offset,J=z.transparent_index;J===null&&(J=256);var oe=z.width,we=r-oe,xe=oe,k=4*(z.y*r+z.x),M=4*((z.y+z.height)*r+z.x),B=k,U=4*we;z.interlaced===!0&&(U+=4*r*7);for(var Z=8,pe=0,K=se.length;pe<K;++pe){var te=se[pe];if(xe===0&&(xe=oe,(B+=U)>=M&&(U=4*we+4*r*(Z-1),B=k+(oe+we)*(Z<<1),Z>>=1)),te===J)B+=4;else{var ae=e[ee+3*te],be=e[ee+3*te+1],ve=e[ee+3*te+2];D[B++]=ae,D[B++]=be,D[B++]=ve,D[B++]=255}--xe}}}function Z6(e,t,r,n){for(var a=e[t++],i=1<<a,s=i+1,o=s+1,c=a+1,u=(1<<c)-1,d=0,f=0,p=0,h=e[t++],g=new Int32Array(4096),m=null;;){for(;d<16&&h!==0;)f|=e[t++]<<d,d+=8,h===1?h=e[t++]:--h;if(d<c)break;var x=f&u;if(f>>=c,d-=c,x!==i){if(x===s)break;for(var y=x<o?x:m,v=0,b=y;b>i;)b=g[b]>>8,++v;var S=b;if(p+v+(y!==x?1:0)>n)return void Qr.log("Warning, gif stream longer than expected.");r[p++]=S;var _=p+=v;for(y!==x&&(r[p++]=S),b=y;v--;)b=g[b],r[--_]=255&b,b>>=8;m!==null&&o<4096&&(g[o++]=m<<8|S,o>=u+1&&c<12&&(++c,u=u<<1|1)),m=x}else o=s+1,u=(1<<(c=a+1))-1,m=null}return p!==n&&Qr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Q5(e){var t,r,n,a,i,s=Math.floor,o=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),p=new Array(65535),h=new Array(64),g=new Array(64),m=[],x=0,y=7,v=new Array(64),b=new Array(64),S=new Array(64),_=new Array(256),A=new Array(2048),j=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],O=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Y=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function se(k,M){for(var B=0,U=0,Z=new Array,pe=1;pe<=16;pe++){for(var K=1;K<=k[pe];K++)Z[M[U]]=[],Z[M[U]][0]=B,Z[M[U]][1]=pe,U++,B++;B*=2}return Z}function ee(k){for(var M=k[0],B=k[1]-1;B>=0;)M&1<<B&&(x|=1<<y),B--,--y<0&&(x==255?(J(255),J(0)):J(x),y=7,x=0)}function J(k){m.push(k)}function oe(k){J(k>>8&255),J(255&k)}function we(k,M,B,U,Z){for(var pe,K=Z[0],te=Z[240],ae=function(Ue,pt){var st,dt,rt,Dt,ht,$t,tr,Tt,_t,qt,Nt=0;for(_t=0;_t<8;++_t){st=Ue[Nt],dt=Ue[Nt+1],rt=Ue[Nt+2],Dt=Ue[Nt+3],ht=Ue[Nt+4],$t=Ue[Nt+5],tr=Ue[Nt+6];var Xr=st+(Tt=Ue[Nt+7]),lr=st-Tt,Yt=dt+tr,Jt=dt-tr,Lr=rt+$t,kt=rt-$t,_r=Dt+ht,Rt=Dt-ht,Ge=Xr+_r,We=Xr-_r,yt=Yt+Lr,Lt=Yt-Lr;Ue[Nt]=Ge+yt,Ue[Nt+4]=Ge-yt;var gr=.707106781*(Lt+We);Ue[Nt+2]=We+gr,Ue[Nt+6]=We-gr;var co=.382683433*((Ge=Rt+kt)-(Lt=Jt+lr)),On=.5411961*Ge+co,Aa=1.306562965*Lt+co,xi=.707106781*(yt=kt+Jt),mt=lr+xi,uo=lr-xi;Ue[Nt+5]=uo+On,Ue[Nt+3]=uo-On,Ue[Nt+1]=mt+Aa,Ue[Nt+7]=mt-Aa,Nt+=8}for(Nt=0,_t=0;_t<8;++_t){st=Ue[Nt],dt=Ue[Nt+8],rt=Ue[Nt+16],Dt=Ue[Nt+24],ht=Ue[Nt+32],$t=Ue[Nt+40],tr=Ue[Nt+48];var fo=st+(Tt=Ue[Nt+56]),ni=st-Tt,zi=dt+tr,vn=dt-tr,Jn=rt+$t,W=rt-$t,ue=Dt+ht,re=Dt-ht,ie=fo+ue,de=fo-ue,he=zi+Jn,Te=zi-Jn;Ue[Nt]=ie+he,Ue[Nt+32]=ie-he;var De=.707106781*(Te+de);Ue[Nt+16]=de+De,Ue[Nt+48]=de-De;var Ce=.382683433*((ie=re+W)-(Te=vn+ni)),ke=.5411961*ie+Ce,Le=1.306562965*Te+Ce,Je=.707106781*(he=W+vn),at=ni+Je,ut=ni-Je;Ue[Nt+40]=ut+ke,Ue[Nt+24]=ut-ke,Ue[Nt+8]=at+Le,Ue[Nt+56]=at-Le,Nt++}for(_t=0;_t<64;++_t)qt=Ue[_t]*pt[_t],h[_t]=qt>0?qt+.5|0:qt-.5|0;return h}(k,M),be=0;be<64;++be)g[j[be]]=ae[be];var ve=g[0]-B;B=g[0],ve==0?ee(U[0]):(ee(U[p[pe=32767+ve]]),ee(f[pe]));for(var Fe=63;Fe>0&&g[Fe]==0;)Fe--;if(Fe==0)return ee(K),B;for(var Me,X=1;X<=Fe;){for(var Ie=X;g[X]==0&&X<=Fe;)++X;var Re=X-Ie;if(Re>=16){Me=Re>>4;for(var Qe=1;Qe<=Me;++Qe)ee(te);Re&=15}pe=32767+g[X],ee(Z[(Re<<4)+p[pe]]),ee(f[pe]),X++}return Fe!=63&&ee(K),B}function xe(k){k=Math.min(Math.max(k,1),100),i!=k&&(function(M){for(var B=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],U=0;U<64;U++){var Z=s((B[U]*M+50)/100);Z=Math.min(Math.max(Z,1),255),o[j[U]]=Z}for(var pe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],K=0;K<64;K++){var te=s((pe[K]*M+50)/100);te=Math.min(Math.max(te,1),255),c[j[K]]=te}for(var ae=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],be=0,ve=0;ve<8;ve++)for(var Fe=0;Fe<8;Fe++)u[be]=1/(o[j[be]]*ae[ve]*ae[Fe]*8),d[be]=1/(c[j[be]]*ae[ve]*ae[Fe]*8),be++}(k<50?Math.floor(5e3/k):Math.floor(200-2*k)),i=k)}this.encode=function(k,M){M&&xe(M),m=new Array,x=0,y=7,oe(65496),oe(65504),oe(16),J(74),J(70),J(73),J(70),J(0),J(1),J(1),J(0),oe(1),oe(1),J(0),J(0),function(){oe(65499),oe(132),J(0);for(var dt=0;dt<64;dt++)J(o[dt]);J(1);for(var rt=0;rt<64;rt++)J(c[rt])}(),function(dt,rt){oe(65472),oe(17),J(8),oe(rt),oe(dt),J(3),J(1),J(17),J(0),J(2),J(17),J(1),J(3),J(17),J(1)}(k.width,k.height),function(){oe(65476),oe(418),J(0);for(var dt=0;dt<16;dt++)J(E[dt+1]);for(var rt=0;rt<=11;rt++)J(T[rt]);J(16);for(var Dt=0;Dt<16;Dt++)J(L[Dt+1]);for(var ht=0;ht<=161;ht++)J(O[ht]);J(1);for(var $t=0;$t<16;$t++)J(I[$t+1]);for(var tr=0;tr<=11;tr++)J(D[tr]);J(17);for(var Tt=0;Tt<16;Tt++)J(z[Tt+1]);for(var _t=0;_t<=161;_t++)J(Y[_t])}(),oe(65498),oe(12),J(3),J(1),J(0),J(2),J(17),J(3),J(17),J(0),J(63),J(0);var B=0,U=0,Z=0;x=0,y=7,this.encode.displayName="_encode_";for(var pe,K,te,ae,be,ve,Fe,Me,X,Ie=k.data,Re=k.width,Qe=k.height,Ue=4*Re,pt=0;pt<Qe;){for(pe=0;pe<Ue;){for(be=Ue*pt+pe,Fe=-1,Me=0,X=0;X<64;X++)ve=be+(Me=X>>3)*Ue+(Fe=4*(7&X)),pt+Me>=Qe&&(ve-=Ue*(pt+1+Me-Qe)),pe+Fe>=Ue&&(ve-=pe+Fe-Ue+4),K=Ie[ve++],te=Ie[ve++],ae=Ie[ve++],v[X]=(A[K]+A[te+256|0]+A[ae+512|0]>>16)-128,b[X]=(A[K+768|0]+A[te+1024|0]+A[ae+1280|0]>>16)-128,S[X]=(A[K+1280|0]+A[te+1536|0]+A[ae+1792|0]>>16)-128;B=we(v,u,B,t,n),U=we(b,d,U,r,a),Z=we(S,d,Z,r,a),pe+=32}pt+=8}if(y>=0){var st=[];st[1]=y+1,st[0]=(1<<y+1)-1,ee(st)}return oe(65497),new Uint8Array(m)},e=e||50,function(){for(var k=String.fromCharCode,M=0;M<256;M++)_[M]=k(M)}(),t=se(E,T),r=se(I,D),n=se(L,O),a=se(z,Y),function(){for(var k=1,M=2,B=1;B<=15;B++){for(var U=k;U<M;U++)p[32767+U]=B,f[32767+U]=[],f[32767+U][1]=B,f[32767+U][0]=U;for(var Z=-(M-1);Z<=-k;Z++)p[32767+Z]=B,f[32767+Z]=[],f[32767+Z][1]=B,f[32767+Z][0]=M-1+Z;k<<=1,M<<=1}}(),function(){for(var k=0;k<256;k++)A[k]=19595*k,A[k+256|0]=38470*k,A[k+512|0]=7471*k+32768,A[k+768|0]=-11059*k,A[k+1024|0]=-21709*k,A[k+1280|0]=32768*k+8421375,A[k+1536|0]=-27439*k,A[k+1792|0]=-5329*k}(),xe(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function _o(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function eP(e){function t(T){if(!T)throw Error("assert :P")}function r(T,L,O){for(var I=0;4>I;I++)if(T[L+I]!=O.charCodeAt(I))return!0;return!1}function n(T,L,O,I,D){for(var z=0;z<D;z++)T[L+z]=O[I+z]}function a(T,L,O,I){for(var D=0;D<I;D++)T[L+D]=O}function i(T){return new Int32Array(T)}function s(T,L){for(var O=[],I=0;I<T;I++)O.push(new L);return O}function o(T,L){var O=[];return function I(D,z,Y){for(var se=Y[z],ee=0;ee<se&&(D.push(Y.length>z+1?[]:new L),!(Y.length<z+1));ee++)I(D[ee],z+1,Y)}(O,0,T),O}var c=function(){var T=this;function L(w,N){for(var P=1<<N-1>>>0;w&P;)P>>>=1;return P?(w&P-1)+P:w}function O(w,N,P,R,H){t(!(R%P));do w[N+(R-=P)]=H;while(0<R)}function I(w,N,P,R,H){if(t(2328>=H),512>=H)var V=i(512);else if((V=i(H))==null)return 0;return function(G,Q,ne,le,Se,Pe){var ce,Ne,Ae=Q,Be=1<<ne,Oe=i(16),qe=i(16);for(t(Se!=0),t(le!=null),t(G!=null),t(0<ne),Ne=0;Ne<Se;++Ne){if(15<le[Ne])return 0;++Oe[le[Ne]]}if(Oe[0]==Se)return 0;for(qe[1]=0,ce=1;15>ce;++ce){if(Oe[ce]>1<<ce)return 0;qe[ce+1]=qe[ce]+Oe[ce]}for(Ne=0;Ne<Se;++Ne)ce=le[Ne],0<le[Ne]&&(Pe[qe[ce]++]=Ne);if(qe[15]==1)return(le=new D).g=0,le.value=Pe[0],O(G,Ae,1,Be,le),Be;var Ve,Ze=-1,Ye=Be-1,Ot=0,bt=1,ar=1,jt=1<<ne;for(Ne=0,ce=1,Se=2;ce<=ne;++ce,Se<<=1){if(bt+=ar<<=1,0>(ar-=Oe[ce]))return 0;for(;0<Oe[ce];--Oe[ce])(le=new D).g=ce,le.value=Pe[Ne++],O(G,Ae+Ot,Se,jt,le),Ot=L(Ot,ce)}for(ce=ne+1,Se=2;15>=ce;++ce,Se<<=1){if(bt+=ar<<=1,0>(ar-=Oe[ce]))return 0;for(;0<Oe[ce];--Oe[ce]){if(le=new D,(Ot&Ye)!=Ze){for(Ae+=jt,Ve=1<<(Ze=ce)-ne;15>Ze&&!(0>=(Ve-=Oe[Ze]));)++Ze,Ve<<=1;Be+=jt=1<<(Ve=Ze-ne),G[Q+(Ze=Ot&Ye)].g=Ve+ne,G[Q+Ze].value=Ae-Q-Ze}le.g=ce-ne,le.value=Pe[Ne++],O(G,Ae+(Ot>>ne),Se,jt,le),Ot=L(Ot,ce)}}return bt!=2*qe[15]-1?0:Be}(w,N,P,R,H,V)}function D(){this.value=this.g=0}function z(){this.value=this.g=0}function Y(){this.G=s(5,D),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(gd,z)}function se(w,N,P,R){t(w!=null),t(N!=null),t(2147483648>R),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=N,w.pa=P,w.Jd=N,w.Yc=P+R,w.Zc=4<=R?P+R-4+1:P,K(w)}function ee(w,N){for(var P=0;0<N--;)P|=ae(w,128)<<N;return P}function J(w,N){var P=ee(w,N);return te(w)?-P:P}function oe(w,N,P,R){var H,V=0;for(t(w!=null),t(N!=null),t(4294967288>R),w.Sb=R,w.Ra=0,w.u=0,w.h=0,4<R&&(R=4),H=0;H<R;++H)V+=N[P+H]<<8*H;w.Ra=V,w.bb=R,w.oa=N,w.pa=P}function we(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Uc-8>>>0,++w.bb,w.u-=8;U(w)&&(w.h=1,w.u=0)}function xe(w,N){if(t(0<=N),!w.h&&N<=us){var P=B(w)&cs[N];return w.u+=N,we(w),P}return w.h=1,w.u=0}function k(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function B(w){return w.Ra>>>(w.u&Uc-1)>>>0}function U(w){return t(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Uc}function Z(w,N){w.u=N,w.h=U(w)}function pe(w){w.u>=Rl&&(t(w.u>=Rl),we(w))}function K(w){t(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(t(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function te(w){return ee(w,1)}function ae(w,N){var P=w.Ca;0>w.b&&K(w);var R=w.b,H=P*N>>>8,V=(w.I>>>R>H)+0;for(V?(P-=H,w.I-=H+1<<R>>>0):P=H+1,R=P,H=0;256<=R;)H+=8,R>>=8;return R=7^H+zc[R],w.b-=R,w.Ca=(P<<R)-1,V}function be(w,N,P){w[N+0]=P>>24&255,w[N+1]=P>>16&255,w[N+2]=P>>8&255,w[N+3]=255&P}function ve(w,N){return w[N+0]|w[N+1]<<8}function Fe(w,N){return ve(w,N)|w[N+2]<<16}function Me(w,N){return ve(w,N)|ve(w,N+2)<<16}function X(w,N){var P=1<<N;return t(w!=null),t(0<N),w.X=i(P),w.X==null?0:(w.Mb=32-N,w.Xa=N,1)}function Ie(w,N){t(w!=null),t(N!=null),t(w.Xa==N.Xa),n(N.X,0,w.X,0,1<<N.Xa)}function Re(){this.X=[],this.Xa=this.Mb=0}function Qe(w,N,P,R){t(P!=null),t(R!=null);var H=P[0],V=R[0];return H==0&&(H=(w*V+N/2)/N),V==0&&(V=(N*H+w/2)/w),0>=H||0>=V?0:(P[0]=H,R[0]=V,1)}function Ue(w,N){return w+(1<<N)-1>>>N}function pt(w,N){return((4278255360&w)+(4278255360&N)>>>0&4278255360)+((16711935&w)+(16711935&N)>>>0&16711935)>>>0}function st(w,N){T[N]=function(P,R,H,V,G,Q,ne){var le;for(le=0;le<G;++le){var Se=T[w](Q[ne+le-1],H,V+le);Q[ne+le]=pt(P[R+le],Se)}}}function dt(){this.ud=this.hd=this.jd=0}function rt(w,N){return((4278124286&(w^N))>>>1)+(w&N)>>>0}function Dt(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function ht(w,N){return Dt(w+(w-N+.5>>1))}function $t(w,N,P){return Math.abs(N-P)-Math.abs(w-P)}function tr(w,N,P,R,H,V,G){for(R=V[G-1],P=0;P<H;++P)V[G+P]=R=pt(w[N+P],R)}function Tt(w,N,P,R,H){var V;for(V=0;V<P;++V){var G=w[N+V],Q=G>>8&255,ne=16711935&(ne=(ne=16711935&G)+((Q<<16)+Q));R[H+V]=(4278255360&G)+ne>>>0}}function _t(w,N){N.jd=255&w,N.hd=w>>8&255,N.ud=w>>16&255}function qt(w,N,P,R,H,V){var G;for(G=0;G<R;++G){var Q=N[P+G],ne=Q>>>8,le=Q,Se=255&(Se=(Se=Q>>>16)+((w.jd<<24>>24)*(ne<<24>>24)>>>5));le=255&(le=(le+=(w.hd<<24>>24)*(ne<<24>>24)>>>5)+((w.ud<<24>>24)*(Se<<24>>24)>>>5)),H[V+G]=(4278255360&Q)+(Se<<16)+le}}function Nt(w,N,P,R,H){T[N]=function(V,G,Q,ne,le,Se,Pe,ce,Ne){for(ne=Pe;ne<ce;++ne)for(Pe=0;Pe<Ne;++Pe)le[Se++]=H(Q[R(V[G++])])},T[w]=function(V,G,Q,ne,le,Se,Pe){var ce=8>>V.b,Ne=V.Ea,Ae=V.K[0],Be=V.w;if(8>ce)for(V=(1<<V.b)-1,Be=(1<<ce)-1;G<Q;++G){var Oe,qe=0;for(Oe=0;Oe<Ne;++Oe)Oe&V||(qe=R(ne[le++])),Se[Pe++]=H(Ae[qe&Be]),qe>>=ce}else T["VP8LMapColor"+P](ne,le,Ae,Be,Se,Pe,G,Q,Ne)}}function Xr(w,N,P,R,H){for(P=N+P;N<P;){var V=w[N++];R[H++]=V>>16&255,R[H++]=V>>8&255,R[H++]=255&V}}function lr(w,N,P,R,H){for(P=N+P;N<P;){var V=w[N++];R[H++]=V>>16&255,R[H++]=V>>8&255,R[H++]=255&V,R[H++]=V>>24&255}}function Yt(w,N,P,R,H){for(P=N+P;N<P;){var V=(G=w[N++])>>16&240|G>>12&15,G=240&G|G>>28&15;R[H++]=V,R[H++]=G}}function Jt(w,N,P,R,H){for(P=N+P;N<P;){var V=(G=w[N++])>>16&248|G>>13&7,G=G>>5&224|G>>3&31;R[H++]=V,R[H++]=G}}function Lr(w,N,P,R,H){for(P=N+P;N<P;){var V=w[N++];R[H++]=255&V,R[H++]=V>>8&255,R[H++]=V>>16&255}}function kt(w,N,P,R,H,V){if(V==0)for(P=N+P;N<P;)be(R,((V=w[N++])[0]>>24|V[1]>>8&65280|V[2]<<8&16711680|V[3]<<24)>>>0),H+=32;else n(R,H,w,N,P)}function _r(w,N){T[N][0]=T[w+"0"],T[N][1]=T[w+"1"],T[N][2]=T[w+"2"],T[N][3]=T[w+"3"],T[N][4]=T[w+"4"],T[N][5]=T[w+"5"],T[N][6]=T[w+"6"],T[N][7]=T[w+"7"],T[N][8]=T[w+"8"],T[N][9]=T[w+"9"],T[N][10]=T[w+"10"],T[N][11]=T[w+"11"],T[N][12]=T[w+"12"],T[N][13]=T[w+"13"],T[N][14]=T[w+"0"],T[N][15]=T[w+"0"]}function Rt(w){return w==__||w==S_||w==k1||w==N_}function Ge(){this.eb=[],this.size=this.A=this.fb=0}function We(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function yt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ge,this.f.kb=new We,this.sd=null}function Lt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function gr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function co(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function On(w,N){var P=w.T,R=N.ba.f.RGBA,H=R.eb,V=R.fb+w.ka*R.A,G=Us[N.ba.S],Q=w.y,ne=w.O,le=w.f,Se=w.N,Pe=w.ea,ce=w.W,Ne=N.cc,Ae=N.dc,Be=N.Mc,Oe=N.Nc,qe=w.ka,Ve=w.ka+w.T,Ze=w.U,Ye=Ze+1>>1;for(qe==0?G(Q,ne,null,null,le,Se,Pe,ce,le,Se,Pe,ce,H,V,null,null,Ze):(G(N.ec,N.fc,Q,ne,Ne,Ae,Be,Oe,le,Se,Pe,ce,H,V-R.A,H,V,Ze),++P);qe+2<Ve;qe+=2)Ne=le,Ae=Se,Be=Pe,Oe=ce,Se+=w.Rc,ce+=w.Rc,V+=2*R.A,G(Q,(ne+=2*w.fa)-w.fa,Q,ne,Ne,Ae,Be,Oe,le,Se,Pe,ce,H,V-R.A,H,V,Ze);return ne+=w.fa,w.j+Ve<w.o?(n(N.ec,N.fc,Q,ne,Ze),n(N.cc,N.dc,le,Se,Ye),n(N.Mc,N.Nc,Pe,ce,Ye),P--):1&Ve||G(Q,ne,null,null,le,Se,Pe,ce,le,Se,Pe,ce,H,V+R.A,null,null,Ze),P}function Aa(w,N,P){var R=w.F,H=[w.J];if(R!=null){var V=w.U,G=N.ba.S,Q=G==C1||G==k1;N=N.ba.f.RGBA;var ne=[0],le=w.ka;ne[0]=w.T,w.Kb&&(le==0?--ne[0]:(--le,H[0]-=w.width),w.j+w.ka+w.T==w.o&&(ne[0]=w.o-w.j-le));var Se=N.eb;le=N.fb+le*N.A,w=fT(R,H[0],w.width,V,ne,Se,le+(Q?0:3),N.A),t(P==ne),w&&Rt(G)&&rm(Se,le,Q,V,ne,N.A)}return 0}function xi(w){var N=w.ma,P=N.ba.S,R=11>P,H=P==E1||P==T1||P==C1||P==w_||P==12||Rt(P);if(N.memory=null,N.Ib=null,N.Jb=null,N.Nd=null,!Kp(N.Oa,w,H?11:12))return 0;if(H&&Rt(P)&&Wp(),w.da)alert("todo:use_scaling");else{if(R){if(N.Ib=co,w.Kb){if(P=w.U+1>>1,N.memory=i(w.U+2*P),N.memory==null)return 0;N.ec=N.memory,N.fc=0,N.cc=N.ec,N.dc=N.fc+w.U,N.Mc=N.cc,N.Nc=N.dc+P,N.Ib=On,Wp()}}else alert("todo:EmitYUV");H&&(N.Jb=Aa,R&&mo())}if(R&&!TT){for(w=0;256>w;++w)rW[w]=89858*(w-128)+P1>>O1,iW[w]=-22014*(w-128)+P1,aW[w]=-45773*(w-128),nW[w]=113618*(w-128)+P1>>O1;for(w=am;w<E_;++w)N=76283*(w-16)+P1>>O1,sW[w-am]=Qn(N,255),oW[w-am]=Qn(N+8>>4,15);TT=1}return 1}function mt(w){var N=w.ma,P=w.U,R=w.T;return t(!(1&w.ka)),0>=P||0>=R?0:(P=N.Ib(w,N),N.Jb!=null&&N.Jb(w,N,P),N.Dc+=P,1)}function uo(w){w.ma.memory=null}function fo(w,N,P,R){return xe(w,8)!=47?0:(N[0]=xe(w,14)+1,P[0]=xe(w,14)+1,R[0]=xe(w,1),xe(w,3)!=0?0:!w.h)}function ni(w,N){if(4>w)return w+1;var P=w-2>>1;return(2+(1&w)<<P)+xe(N,P)+1}function zi(w,N){return 120<N?N-120:1<=(P=((P=zH[N-1])>>4)*w+(8-(15&P)))?P:1;var P}function vn(w,N,P){var R=B(P),H=w[N+=255&R].g-8;return 0<H&&(Z(P,P.u+8),R=B(P),N+=w[N].value,N+=R&(1<<H)-1),Z(P,P.u+w[N].g),w[N].value}function Jn(w,N,P){return P.g+=w.g,P.value+=w.value<<N>>>0,t(8>=P.g),w.g}function W(w,N,P){var R=w.xc;return t((N=R==0?0:w.vc[w.md*(P>>R)+(N>>R)])<w.Wb),w.Ya[N]}function ue(w,N,P,R){var H=w.ab,V=w.c*N,G=w.C;N=G+N;var Q=P,ne=R;for(R=w.Ta,P=w.Ua;0<H--;){var le=w.gc[H],Se=G,Pe=N,ce=Q,Ne=ne,Ae=(ne=R,Q=P,le.Ea);switch(t(Se<Pe),t(Pe<=le.nc),le.hc){case 2:zn(ce,Ne,(Pe-Se)*Ae,ne,Q);break;case 0:var Be=Se,Oe=Pe,qe=ne,Ve=Q,Ze=(jt=le).Ea;Be==0&&(Yp(ce,Ne,null,null,1,qe,Ve),tr(ce,Ne+1,0,0,Ze-1,qe,Ve+1),Ne+=Ze,Ve+=Ze,++Be);for(var Ye=1<<jt.b,Ot=Ye-1,bt=Ue(Ze,jt.b),ar=jt.K,jt=jt.w+(Be>>jt.b)*bt;Be<Oe;){var pr=ar,pa=jt,ir=1;for(rh(ce,Ne,qe,Ve-Ze,1,qe,Ve);ir<Ze;){var At=(ir&~Ot)+Ye;At>Ze&&(At=Ze),(0,Qp[pr[pa++]>>8&15])(ce,Ne+ +ir,qe,Ve+ir-Ze,At-ir,qe,Ve+ir),ir=At}Ne+=Ze,Ve+=Ze,++Be&Ot||(jt+=bt)}Pe!=le.nc&&n(ne,Q-Ae,ne,Q+(Pe-Se-1)*Ae,Ae);break;case 1:for(Ae=ce,Oe=Ne,Ze=(ce=le.Ea)-(Ve=ce&~(qe=(Ne=1<<le.b)-1)),Be=Ue(ce,le.b),Ye=le.K,le=le.w+(Se>>le.b)*Be;Se<Pe;){for(Ot=Ye,bt=le,ar=new dt,jt=Oe+Ve,pr=Oe+ce;Oe<jt;)_t(Ot[bt++],ar),Zp(ar,Ae,Oe,Ne,ne,Q),Oe+=Ne,Q+=Ne;Oe<pr&&(_t(Ot[bt++],ar),Zp(ar,Ae,Oe,Ze,ne,Q),Oe+=Ze,Q+=Ze),++Se&qe||(le+=Be)}break;case 3:if(ce==ne&&Ne==Q&&0<le.b){for(Oe=ne,ce=Ae=Q+(Pe-Se)*Ae-(Ve=(Pe-Se)*Ue(le.Ea,le.b)),Ne=ne,qe=Q,Be=[],Ve=(Ze=Ve)-1;0<=Ve;--Ve)Be[Ve]=Ne[qe+Ve];for(Ve=Ze-1;0<=Ve;--Ve)Oe[ce+Ve]=Be[Ve];S1(le,Se,Pe,ne,Ae,ne,Q)}else S1(le,Se,Pe,ce,Ne,ne,Q)}Q=R,ne=P}ne!=P&&n(R,P,Q,ne,V)}function re(w,N){var P=w.V,R=w.Ba+w.c*w.C,H=N-w.C;if(t(N<=w.l.o),t(16>=H),0<H){var V=w.l,G=w.Ta,Q=w.Ua,ne=V.width;if(ue(w,H,P,R),H=Q=[Q],t((P=w.C)<(R=N)),t(V.v<V.va),R>V.o&&(R=V.o),P<V.j){var le=V.j-P;P=V.j,H[0]+=le*ne}if(P>=R?P=0:(H[0]+=4*V.v,V.ka=P-V.j,V.U=V.va-V.v,V.T=R-P,P=1),P){if(Q=Q[0],11>(P=w.ca).S){var Se=P.f.RGBA,Pe=(R=P.S,H=V.U,V=V.T,le=Se.eb,Se.A),ce=V;for(Se=Se.fb+w.Ma*Se.A;0<ce--;){var Ne=G,Ae=Q,Be=H,Oe=le,qe=Se;switch(R){case A1:em(Ne,Ae,Be,Oe,qe);break;case E1:qc(Ne,Ae,Be,Oe,qe);break;case __:qc(Ne,Ae,Be,Oe,qe),rm(Oe,qe,0,Be,1,0);break;case yT:vd(Ne,Ae,Be,Oe,qe);break;case T1:kt(Ne,Ae,Be,Oe,qe,1);break;case S_:kt(Ne,Ae,Be,Oe,qe,1),rm(Oe,qe,0,Be,1,0);break;case C1:kt(Ne,Ae,Be,Oe,qe,0);break;case k1:kt(Ne,Ae,Be,Oe,qe,0),rm(Oe,qe,1,Be,1,0);break;case w_:Hc(Ne,Ae,Be,Oe,qe);break;case N_:Hc(Ne,Ae,Be,Oe,qe),dT(Oe,qe,Be,1,0);break;case bT:Wc(Ne,Ae,Be,Oe,qe);break;default:t(0)}Q+=ne,Se+=Pe}w.Ma+=V}else alert("todo:EmitRescaledRowsYUVA");t(w.Ma<=P.height)}}w.C=N,t(w.C<=w.i)}function ie(w){var N;if(0<w.ua)return 0;for(N=0;N<w.Wb;++N){var P=w.Ya[N].G,R=w.Ya[N].H;if(0<P[1][R[1]+0].g||0<P[2][R[2]+0].g||0<P[3][R[3]+0].g)return 0}return 1}function de(w,N,P,R,H,V){if(w.Z!=0){var G=w.qd,Q=w.rd;for(t(Kc[w.Z]!=null);N<P;++N)Kc[w.Z](G,Q,R,H,R,H,V),G=R,Q=H,H+=V;w.qd=G,w.rd=Q}}function he(w,N){var P=w.l.ma,R=P.Z==0||P.Z==1?w.l.j:w.C;if(R=w.C<R?R:w.C,t(N<=w.l.o),N>R){var H=w.l.width,V=P.ca,G=P.tb+H*R,Q=w.V,ne=w.Ba+w.c*R,le=w.gc;t(w.ab==1),t(le[0].hc==3),Qo(le[0],R,N,Q,ne,V,G),de(P,R,N,V,G,H)}w.C=w.Ma=N}function Te(w,N,P,R,H,V,G){var Q=w.$/R,ne=w.$%R,le=w.m,Se=w.s,Pe=P+w.$,ce=Pe;H=P+R*H;var Ne=P+R*V,Ae=280+Se.ua,Be=w.Pb?Q:16777216,Oe=0<Se.ua?Se.Wa:null,qe=Se.wc,Ve=Pe<Ne?W(Se,ne,Q):null;t(w.C<V),t(Ne<=H);var Ze=!1;e:for(;;){for(;Ze||Pe<Ne;){var Ye=0;if(Q>=Be){var Ot=Pe-P;t((Be=w).Pb),Be.wd=Be.m,Be.xd=Ot,0<Be.s.ua&&Ie(Be.s.Wa,Be.s.vb),Be=Q+HH}if(ne&qe||(Ve=W(Se,ne,Q)),t(Ve!=null),Ve.Qb&&(N[Pe]=Ve.qb,Ze=!0),!Ze)if(pe(le),Ve.jc){Ye=le,Ot=N;var bt=Pe,ar=Ve.pd[B(Ye)&gd-1];t(Ve.jc),256>ar.g?(Z(Ye,Ye.u+ar.g),Ot[bt]=ar.value,Ye=0):(Z(Ye,Ye.u+ar.g-256),t(256<=ar.value),Ye=ar.value),Ye==0&&(Ze=!0)}else Ye=vn(Ve.G[0],Ve.H[0],le);if(le.h)break;if(Ze||256>Ye){if(!Ze)if(Ve.nd)N[Pe]=(Ve.qb|Ye<<8)>>>0;else{if(pe(le),Ze=vn(Ve.G[1],Ve.H[1],le),pe(le),Ot=vn(Ve.G[2],Ve.H[2],le),bt=vn(Ve.G[3],Ve.H[3],le),le.h)break;N[Pe]=(bt<<24|Ze<<16|Ye<<8|Ot)>>>0}if(Ze=!1,++Pe,++ne>=R&&(ne=0,++Q,G!=null&&Q<=V&&!(Q%16)&&G(w,Q),Oe!=null))for(;ce<Pe;)Ye=N[ce++],Oe.X[(506832829*Ye&4294967295)>>>Oe.Mb]=Ye}else if(280>Ye){if(Ye=ni(Ye-256,le),Ot=vn(Ve.G[4],Ve.H[4],le),pe(le),Ot=zi(R,Ot=ni(Ot,le)),le.h)break;if(Pe-P<Ot||H-Pe<Ye)break e;for(bt=0;bt<Ye;++bt)N[Pe+bt]=N[Pe+bt-Ot];for(Pe+=Ye,ne+=Ye;ne>=R;)ne-=R,++Q,G!=null&&Q<=V&&!(Q%16)&&G(w,Q);if(t(Pe<=H),ne&qe&&(Ve=W(Se,ne,Q)),Oe!=null)for(;ce<Pe;)Ye=N[ce++],Oe.X[(506832829*Ye&4294967295)>>>Oe.Mb]=Ye}else{if(!(Ye<Ae))break e;for(Ze=Ye-280,t(Oe!=null);ce<Pe;)Ye=N[ce++],Oe.X[(506832829*Ye&4294967295)>>>Oe.Mb]=Ye;Ye=Pe,t(!(Ze>>>(Ot=Oe).Xa)),N[Ye]=Ot.X[Ze],Ze=!0}Ze||t(le.h==U(le))}if(w.Pb&&le.h&&Pe<H)t(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&Ie(w.s.vb,w.s.Wa);else{if(le.h)break e;G!=null&&G(w,Q>V?V:Q),w.a=0,w.$=Pe-P}return 1}return w.a=3,0}function De(w){t(w!=null),w.vc=null,w.yc=null,w.Ya=null;var N=w.Wa;N!=null&&(N.X=null),w.vb=null,t(w!=null)}function Ce(){var w=new Kt;return w==null?null:(w.a=0,w.xb=ST,_r("Predictor","VP8LPredictors"),_r("Predictor","VP8LPredictors_C"),_r("PredictorAdd","VP8LPredictorsAdd"),_r("PredictorAdd","VP8LPredictorsAdd_C"),zn=Tt,Zp=qt,em=Xr,qc=lr,Hc=Yt,Wc=Jt,vd=Lr,T.VP8LMapColor32b=Jo,T.VP8LMapColor8b=Jp,w)}function ke(w,N,P,R,H){var V=1,G=[w],Q=[N],ne=R.m,le=R.s,Se=null,Pe=0;e:for(;;){if(P)for(;V&&xe(ne,1);){var ce=G,Ne=Q,Ae=R,Be=1,Oe=Ae.m,qe=Ae.gc[Ae.ab],Ve=xe(Oe,2);if(Ae.Oc&1<<Ve)V=0;else{switch(Ae.Oc|=1<<Ve,qe.hc=Ve,qe.Ea=ce[0],qe.nc=Ne[0],qe.K=[null],++Ae.ab,t(4>=Ae.ab),Ve){case 0:case 1:qe.b=xe(Oe,3)+2,Be=ke(Ue(qe.Ea,qe.b),Ue(qe.nc,qe.b),0,Ae,qe.K),qe.K=qe.K[0];break;case 3:var Ze,Ye=xe(Oe,8)+1,Ot=16<Ye?0:4<Ye?1:2<Ye?2:3;if(ce[0]=Ue(qe.Ea,Ot),qe.b=Ot,Ze=Be=ke(Ye,1,0,Ae,qe.K)){var bt,ar=Ye,jt=qe,pr=1<<(8>>jt.b),pa=i(pr);if(pa==null)Ze=0;else{var ir=jt.K[0],At=jt.w;for(pa[0]=jt.K[0][0],bt=1;bt<1*ar;++bt)pa[bt]=pt(ir[At+bt],pa[bt-1]);for(;bt<4*pr;++bt)pa[bt]=0;jt.K[0]=null,jt.K[0]=pa,Ze=1}}Be=Ze;break;case 2:break;default:t(0)}V=Be}}if(G=G[0],Q=Q[0],V&&xe(ne,1)&&!(V=1<=(Pe=xe(ne,4))&&11>=Pe)){R.a=3;break e}var lt;if(lt=V)t:{var Hn,rr,vr,cn=R,za=G,bi=Q,Ln=Pe,ai=P,wi=cn.m,ma=cn.s,br=[null],Ir=1,In=0,Rr=qH[Ln];r:for(;;){if(ai&&xe(wi,1)){var qa=xe(wi,3)+2,vo=Ue(za,qa),Wn=Ue(bi,qa),qi=vo*Wn;if(!ke(vo,Wn,0,cn,br))break r;for(br=br[0],ma.xc=qa,Hn=0;Hn<qi;++Hn){var Jr=br[Hn]>>8&65535;br[Hn]=Jr,Jr>=Ir&&(Ir=Jr+1)}}if(wi.h)break r;for(rr=0;5>rr;++rr){var ga=wT[rr];!rr&&0<Ln&&(ga+=1<<Ln),In<ga&&(In=ga)}var fs=s(Ir*Rr,D),_i=Ir,hs=s(_i,Y);if(hs==null)var ps=null;else t(65536>=_i),ps=hs;var Hi=i(In);if(ps==null||Hi==null||fs==null){cn.a=1;break r}var ms=fs;for(Hn=vr=0;Hn<Ir;++Hn){var tn=ps[Hn],gs=tn.G,xo=tn.H,yd=0,Fl=1,Ha=0;for(rr=0;5>rr;++rr){ga=wT[rr],gs[rr]=ms,xo[rr]=vr,!rr&&0<Ln&&(ga+=1<<Ln);a:{var I1,T_=ga,R1=cn,im=Hi,uW=ms,dW=vr,C_=0,Xc=R1.m,fW=xe(Xc,1);if(a(im,0,0,T_),fW){var hW=xe(Xc,1)+1,pW=xe(Xc,1),OT=xe(Xc,pW==0?1:8);im[OT]=1,hW==2&&(im[OT=xe(Xc,8)]=1);var D1=1}else{var PT=i(19),LT=xe(Xc,4)+4;if(19<LT){R1.a=3;var M1=0;break a}for(I1=0;I1<LT;++I1)PT[UH[I1]]=xe(Xc,3);var k_=void 0,sm=void 0,IT=R1,mW=PT,F1=T_,RT=im,O_=0,Yc=IT.m,DT=8,MT=s(128,D);n:for(;I(MT,0,7,mW,19);){if(xe(Yc,1)){var gW=2+2*xe(Yc,3);if((k_=2+xe(Yc,gW))>F1)break n}else k_=F1;for(sm=0;sm<F1&&k_--;){pe(Yc);var FT=MT[0+(127&B(Yc))];Z(Yc,Yc.u+FT.g);var ah=FT.value;if(16>ah)RT[sm++]=ah,ah!=0&&(DT=ah);else{var vW=ah==16,$T=ah-16,xW=$H[$T],BT=xe(Yc,FH[$T])+xW;if(sm+BT>F1)break n;for(var yW=vW?DT:0;0<BT--;)RT[sm++]=yW}}O_=1;break n}O_||(IT.a=3),D1=O_}(D1=D1&&!Xc.h)&&(C_=I(uW,dW,8,im,T_)),D1&&C_!=0?M1=C_:(R1.a=3,M1=0)}if(M1==0)break r;if(Fl&&BH[rr]==1&&(Fl=ms[vr].g==0),yd+=ms[vr].g,vr+=M1,3>=rr){var om,P_=Hi[0];for(om=1;om<ga;++om)Hi[om]>P_&&(P_=Hi[om]);Ha+=P_}}if(tn.nd=Fl,tn.Qb=0,Fl&&(tn.qb=(gs[3][xo[3]+0].value<<24|gs[1][xo[1]+0].value<<16|gs[2][xo[2]+0].value)>>>0,yd==0&&256>gs[0][xo[0]+0].value&&(tn.Qb=1,tn.qb+=gs[0][xo[0]+0].value<<8)),tn.jc=!tn.Qb&&6>Ha,tn.jc){var $1,$l=tn;for($1=0;$1<gd;++$1){var Jc=$1,Qc=$l.pd[Jc],B1=$l.G[0][$l.H[0]+Jc];256<=B1.value?(Qc.g=B1.g+256,Qc.value=B1.value):(Qc.g=0,Qc.value=0,Jc>>=Jn(B1,8,Qc),Jc>>=Jn($l.G[1][$l.H[1]+Jc],16,Qc),Jc>>=Jn($l.G[2][$l.H[2]+Jc],0,Qc),Jn($l.G[3][$l.H[3]+Jc],24,Qc))}}}ma.vc=br,ma.Wb=Ir,ma.Ya=ps,ma.yc=fs,lt=1;break t}lt=0}if(!(V=lt)){R.a=3;break e}if(0<Pe){if(le.ua=1<<Pe,!X(le.Wa,Pe)){R.a=1,V=0;break e}}else le.ua=0;var L_=R,UT=G,bW=Q,I_=L_.s,R_=I_.xc;if(L_.c=UT,L_.i=bW,I_.md=Ue(UT,R_),I_.wc=R_==0?-1:(1<<R_)-1,P){R.xb=JH;break e}if((Se=i(G*Q))==null){R.a=1,V=0;break e}V=(V=Te(R,Se,0,G,Q,Q,null))&&!ne.h;break e}return V?(H!=null?H[0]=Se:(t(Se==null),t(P)),R.$=0,P||De(le)):De(le),V}function Le(w,N){var P=w.c*w.i,R=P+N+16*N;return t(w.c<=N),w.V=i(R),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+P+N,1)}function Je(w,N){var P=w.C,R=N-P,H=w.V,V=w.Ba+w.c*P;for(t(N<=w.l.o);0<R;){var G=16<R?16:R,Q=w.l.ma,ne=w.l.width,le=ne*G,Se=Q.ca,Pe=Q.tb+ne*P,ce=w.Ta,Ne=w.Ua;ue(w,G,H,V),hT(ce,Ne,Se,Pe,le),de(Q,P,P+G,Se,Pe,ne),R-=G,H+=G*w.c,P+=G}t(P==N),w.C=w.Ma=N}function at(){this.ub=this.yd=this.td=this.Rb=0}function ut(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function tt(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function ct(){this.Yb=function(){var w=[];return function N(P,R,H){for(var V=H[R],G=0;G<V&&(P.push(H.length>R+1?[]:0),!(H.length<R+1));G++)N(P[G],R+1,H)}(w,0,[3,11]),w}()}function Ht(){this.jb=i(3),this.Wc=o([4,8],ct),this.Xc=o([4,17],ct)}function Vr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function hr(){this.ld=this.La=this.dd=this.tc=0}function Pn(){this.Na=this.la=0}function Go(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ho(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ko(){this.uc=this.M=this.Nb=0,this.wa=Array(new hr),this.Y=0,this.ya=Array(new ho),this.aa=0,this.l=new Xf}function Ds(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Mc(){this.cb=this.a=0,this.sc="",this.m=new k,this.Od=new at,this.Kc=new ut,this.ed=new Vr,this.Qa=new tt,this.Ic=this.$c=this.Aa=0,this.D=new Ko,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,k),this.ia=0,this.pb=s(4,Go),this.Pa=new Ht,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ds),this.Hd=0,this.rb=Array(new Pn),this.sb=0,this.wa=Array(new hr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ho),this.L=this.aa=0,this.gd=o([4,2],hr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Qn(w,N){return 0>w?0:w>N?N:w}function Xf(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function i_(){var w=new Mc;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,nm||(nm=Yf)),w}function Zn(w,N,P){return w.a==0&&(w.a=N,w.sc=P,w.cb=0),0}function d1(w,N,P){return 3<=P&&w[N+0]==157&&w[N+1]==1&&w[N+2]==42}function Xo(w,N){if(w==null)return 0;if(w.a=0,w.sc="OK",N==null)return Zn(w,2,"null VP8Io passed to VP8GetHeaders()");var P=N.data,R=N.w,H=N.ha;if(4>H)return Zn(w,7,"Truncated header.");var V=P[R+0]|P[R+1]<<8|P[R+2]<<16,G=w.Od;if(G.Rb=!(1&V),G.td=V>>1&7,G.yd=V>>4&1,G.ub=V>>5,3<G.td)return Zn(w,3,"Incorrect keyframe parameters.");if(!G.yd)return Zn(w,4,"Frame not displayable.");R+=3,H-=3;var Q=w.Kc;if(G.Rb){if(7>H)return Zn(w,7,"cannot parse picture header");if(!d1(P,R,H))return Zn(w,3,"Bad code word");Q.c=16383&(P[R+4]<<8|P[R+3]),Q.Td=P[R+4]>>6,Q.i=16383&(P[R+6]<<8|P[R+5]),Q.Ud=P[R+6]>>6,R+=7,H-=7,w.za=Q.c+15>>4,w.Ub=Q.i+15>>4,N.width=Q.c,N.height=Q.i,N.Da=0,N.j=0,N.v=0,N.va=N.width,N.o=N.height,N.da=0,N.ib=N.width,N.hb=N.height,N.U=N.width,N.T=N.height,a((V=w.Pa).jb,0,255,V.jb.length),t((V=w.Qa)!=null),V.Cb=0,V.Bb=0,V.Fb=1,a(V.Zb,0,0,V.Zb.length),a(V.Lb,0,0,V.Lb)}if(G.ub>H)return Zn(w,7,"bad partition length");se(V=w.m,P,R,G.ub),R+=G.ub,H-=G.ub,G.Rb&&(Q.Ld=te(V),Q.Kd=te(V)),Q=w.Qa;var ne,le=w.Pa;if(t(V!=null),t(Q!=null),Q.Cb=te(V),Q.Cb){if(Q.Bb=te(V),te(V)){for(Q.Fb=te(V),ne=0;4>ne;++ne)Q.Zb[ne]=te(V)?J(V,7):0;for(ne=0;4>ne;++ne)Q.Lb[ne]=te(V)?J(V,6):0}if(Q.Bb)for(ne=0;3>ne;++ne)le.jb[ne]=te(V)?ee(V,8):255}else Q.Bb=0;if(V.Ka)return Zn(w,3,"cannot parse segment header");if((Q=w.ed).zd=te(V),Q.Tb=ee(V,6),Q.wb=ee(V,3),Q.Pc=te(V),Q.Pc&&te(V)){for(le=0;4>le;++le)te(V)&&(Q.vd[le]=J(V,6));for(le=0;4>le;++le)te(V)&&(Q.od[le]=J(V,6))}if(w.L=Q.Tb==0?0:Q.zd?1:2,V.Ka)return Zn(w,3,"cannot parse filter header");var Se=H;if(H=ne=R,R=ne+Se,Q=Se,w.Xb=(1<<ee(w.m,2))-1,Se<3*(le=w.Xb))P=7;else{for(ne+=3*le,Q-=3*le,Se=0;Se<le;++Se){var Pe=P[H+0]|P[H+1]<<8|P[H+2]<<16;Pe>Q&&(Pe=Q),se(w.Jc[+Se],P,ne,Pe),ne+=Pe,Q-=Pe,H+=3}se(w.Jc[+le],P,ne,Q),P=ne<R?0:5}if(P!=0)return Zn(w,P,"cannot parse partitions");for(P=ee(ne=w.m,7),H=te(ne)?J(ne,4):0,R=te(ne)?J(ne,4):0,Q=te(ne)?J(ne,4):0,le=te(ne)?J(ne,4):0,ne=te(ne)?J(ne,4):0,Se=w.Qa,Pe=0;4>Pe;++Pe){if(Se.Cb){var ce=Se.Zb[Pe];Se.Fb||(ce+=P)}else{if(0<Pe){w.pb[Pe]=w.pb[0];continue}ce=P}var Ne=w.pb[Pe];Ne.Sc[0]=j_[Qn(ce+H,127)],Ne.Sc[1]=A_[Qn(ce+0,127)],Ne.Eb[0]=2*j_[Qn(ce+R,127)],Ne.Eb[1]=101581*A_[Qn(ce+Q,127)]>>16,8>Ne.Eb[1]&&(Ne.Eb[1]=8),Ne.Qc[0]=j_[Qn(ce+le,117)],Ne.Qc[1]=A_[Qn(ce+ne,127)],Ne.lc=ce+ne}if(!G.Rb)return Zn(w,4,"Not a key frame.");for(te(V),G=w.Pa,P=0;4>P;++P){for(H=0;8>H;++H)for(R=0;3>R;++R)for(Q=0;11>Q;++Q)le=ae(V,XH[P][H][R][Q])?ee(V,8):GH[P][H][R][Q],G.Wc[P][H].Yb[R][Q]=le;for(H=0;17>H;++H)G.Xc[P][H]=G.Wc[P][YH[H]]}return w.kc=te(V),w.kc&&(w.Bd=ee(V,8)),w.cb=1}function Yf(w,N,P,R,H,V,G){var Q=N[H].Yb[P];for(P=0;16>H;++H){if(!ae(w,Q[P+0]))return H;for(;!ae(w,Q[P+1]);)if(Q=N[++H].Yb[0],P=0,H==16)return 16;var ne=N[H+1].Yb;if(ae(w,Q[P+2])){var le=w,Se=0;if(ae(le,(ce=Q)[(Pe=P)+3]))if(ae(le,ce[Pe+6])){for(Q=0,Pe=2*(Se=ae(le,ce[Pe+8]))+(ce=ae(le,ce[Pe+9+Se])),Se=0,ce=WH[Pe];ce[Q];++Q)Se+=Se+ae(le,ce[Q]);Se+=3+(8<<Pe)}else ae(le,ce[Pe+7])?(Se=7+2*ae(le,165),Se+=ae(le,145)):Se=5+ae(le,159);else Se=ae(le,ce[Pe+4])?3+ae(le,ce[Pe+5]):2;Q=ne[2]}else Se=1,Q=ne[1];ne=G+VH[H],0>(le=w).b&&K(le);var Pe,ce=le.b,Ne=(Pe=le.Ca>>1)-(le.I>>ce)>>31;--le.b,le.Ca+=Ne,le.Ca|=1,le.I-=(Pe+1&Ne)<<ce,V[ne]=((Se^Ne)-Ne)*R[(0<H)+0]}return 16}function f1(w){var N=w.rb[w.sb-1];N.la=0,N.Na=0,a(w.zc,0,0,w.zc.length),w.ja=0}function Ms(w,N,P,R,H){H=w[N+P+32*R]+(H>>3),w[N+P+32*R]=-256&H?0>H?0:255:H}function da(w,N,P,R,H,V){Ms(w,N,0,P,R+H),Ms(w,N,1,P,R+V),Ms(w,N,2,P,R-V),Ms(w,N,3,P,R-H)}function jl(w){return(20091*w>>16)+w}function h1(w,N,P,R){var H,V=0,G=i(16);for(H=0;4>H;++H){var Q=w[N+0]+w[N+8],ne=w[N+0]-w[N+8],le=(35468*w[N+4]>>16)-jl(w[N+12]),Se=jl(w[N+4])+(35468*w[N+12]>>16);G[V+0]=Q+Se,G[V+1]=ne+le,G[V+2]=ne-le,G[V+3]=Q-Se,V+=4,N++}for(H=V=0;4>H;++H)Q=(w=G[V+0]+4)+G[V+8],ne=w-G[V+8],le=(35468*G[V+4]>>16)-jl(G[V+12]),Ms(P,R,0,0,Q+(Se=jl(G[V+4])+(35468*G[V+12]>>16))),Ms(P,R,1,0,ne+le),Ms(P,R,2,0,ne-le),Ms(P,R,3,0,Q-Se),V++,R+=32}function s_(w,N,P,R){var H=w[N+0]+4,V=35468*w[N+4]>>16,G=jl(w[N+4]),Q=35468*w[N+1]>>16;da(P,R,0,H+G,w=jl(w[N+1]),Q),da(P,R,1,H+V,w,Q),da(P,R,2,H-V,w,Q),da(P,R,3,H-G,w,Q)}function o_(w,N,P,R,H){h1(w,N,P,R),H&&h1(w,N+16,P,R+4)}function Yo(w,N,P,R){xd(w,N+0,P,R,1),xd(w,N+32,P,R+128,1)}function p1(w,N,P,R){var H;for(w=w[N+0]+4,H=0;4>H;++H)for(N=0;4>N;++N)Ms(P,R,N,H,w)}function m1(w,N,P,R){w[N+0]&&Cr(w,N+0,P,R),w[N+16]&&Cr(w,N+16,P,R+4),w[N+32]&&Cr(w,N+32,P,R+128),w[N+48]&&Cr(w,N+48,P,R+128+4)}function Jf(w,N,P,R){var H,V=i(16);for(H=0;4>H;++H){var G=w[N+0+H]+w[N+12+H],Q=w[N+4+H]+w[N+8+H],ne=w[N+4+H]-w[N+8+H],le=w[N+0+H]-w[N+12+H];V[0+H]=G+Q,V[8+H]=G-Q,V[4+H]=le+ne,V[12+H]=le-ne}for(H=0;4>H;++H)G=(w=V[0+4*H]+3)+V[3+4*H],Q=V[1+4*H]+V[2+4*H],ne=V[1+4*H]-V[2+4*H],le=w-V[3+4*H],P[R+0]=G+Q>>3,P[R+16]=le+ne>>3,P[R+32]=G-Q>>3,P[R+48]=le-ne>>3,R+=64}function sd(w,N,P){var R,H=N-32,V=ds,G=255-w[H-1];for(R=0;R<P;++R){var Q,ne=V,le=G+w[N-1];for(Q=0;Q<P;++Q)w[N+Q]=ne[le+w[H+Q]];N+=32}}function l_(w,N){sd(w,N,4)}function c_(w,N){sd(w,N,8)}function u_(w,N){sd(w,N,16)}function Mp(w,N){var P;for(P=0;16>P;++P)n(w,N+32*P,w,N-32,16)}function g1(w,N){var P;for(P=16;0<P;--P)a(w,N,w[N-1],16),N+=32}function po(w,N,P){var R;for(R=0;16>R;++R)a(N,P+32*R,w,16)}function d_(w,N){var P,R=16;for(P=0;16>P;++P)R+=w[N-1+32*P]+w[N+P-32];po(R>>5,w,N)}function od(w,N){var P,R=8;for(P=0;16>P;++P)R+=w[N-1+32*P];po(R>>4,w,N)}function Fp(w,N){var P,R=8;for(P=0;16>P;++P)R+=w[N+P-32];po(R>>4,w,N)}function f_(w,N){po(128,w,N)}function Qt(w,N,P){return w+2*N+P+2>>2}function h_(w,N){var P,R=N-32;for(R=new Uint8Array([Qt(w[R-1],w[R+0],w[R+1]),Qt(w[R+0],w[R+1],w[R+2]),Qt(w[R+1],w[R+2],w[R+3]),Qt(w[R+2],w[R+3],w[R+4])]),P=0;4>P;++P)n(w,N+32*P,R,0,R.length)}function p_(w,N){var P=w[N-1],R=w[N-1+32],H=w[N-1+64],V=w[N-1+96];be(w,N+0,16843009*Qt(w[N-1-32],P,R)),be(w,N+32,16843009*Qt(P,R,H)),be(w,N+64,16843009*Qt(R,H,V)),be(w,N+96,16843009*Qt(H,V,V))}function m_(w,N){var P,R=4;for(P=0;4>P;++P)R+=w[N+P-32]+w[N-1+32*P];for(R>>=3,P=0;4>P;++P)a(w,N+32*P,R,4)}function Al(w,N){var P=w[N-1+0],R=w[N-1+32],H=w[N-1+64],V=w[N-1-32],G=w[N+0-32],Q=w[N+1-32],ne=w[N+2-32],le=w[N+3-32];w[N+0+96]=Qt(R,H,w[N-1+96]),w[N+1+96]=w[N+0+64]=Qt(P,R,H),w[N+2+96]=w[N+1+64]=w[N+0+32]=Qt(V,P,R),w[N+3+96]=w[N+2+64]=w[N+1+32]=w[N+0+0]=Qt(G,V,P),w[N+3+64]=w[N+2+32]=w[N+1+0]=Qt(Q,G,V),w[N+3+32]=w[N+2+0]=Qt(ne,Q,G),w[N+3+0]=Qt(le,ne,Q)}function El(w,N){var P=w[N+1-32],R=w[N+2-32],H=w[N+3-32],V=w[N+4-32],G=w[N+5-32],Q=w[N+6-32],ne=w[N+7-32];w[N+0+0]=Qt(w[N+0-32],P,R),w[N+1+0]=w[N+0+32]=Qt(P,R,H),w[N+2+0]=w[N+1+32]=w[N+0+64]=Qt(R,H,V),w[N+3+0]=w[N+2+32]=w[N+1+64]=w[N+0+96]=Qt(H,V,G),w[N+3+32]=w[N+2+64]=w[N+1+96]=Qt(V,G,Q),w[N+3+64]=w[N+2+96]=Qt(G,Q,ne),w[N+3+96]=Qt(Q,ne,ne)}function g_(w,N){var P=w[N-1+0],R=w[N-1+32],H=w[N-1+64],V=w[N-1-32],G=w[N+0-32],Q=w[N+1-32],ne=w[N+2-32],le=w[N+3-32];w[N+0+0]=w[N+1+64]=V+G+1>>1,w[N+1+0]=w[N+2+64]=G+Q+1>>1,w[N+2+0]=w[N+3+64]=Q+ne+1>>1,w[N+3+0]=ne+le+1>>1,w[N+0+96]=Qt(H,R,P),w[N+0+64]=Qt(R,P,V),w[N+0+32]=w[N+1+96]=Qt(P,V,G),w[N+1+32]=w[N+2+96]=Qt(V,G,Q),w[N+2+32]=w[N+3+96]=Qt(G,Q,ne),w[N+3+32]=Qt(Q,ne,le)}function v_(w,N){var P=w[N+0-32],R=w[N+1-32],H=w[N+2-32],V=w[N+3-32],G=w[N+4-32],Q=w[N+5-32],ne=w[N+6-32],le=w[N+7-32];w[N+0+0]=P+R+1>>1,w[N+1+0]=w[N+0+64]=R+H+1>>1,w[N+2+0]=w[N+1+64]=H+V+1>>1,w[N+3+0]=w[N+2+64]=V+G+1>>1,w[N+0+32]=Qt(P,R,H),w[N+1+32]=w[N+0+96]=Qt(R,H,V),w[N+2+32]=w[N+1+96]=Qt(H,V,G),w[N+3+32]=w[N+2+96]=Qt(V,G,Q),w[N+3+64]=Qt(G,Q,ne),w[N+3+96]=Qt(Q,ne,le)}function Qf(w,N){var P=w[N-1+0],R=w[N-1+32],H=w[N-1+64],V=w[N-1+96];w[N+0+0]=P+R+1>>1,w[N+2+0]=w[N+0+32]=R+H+1>>1,w[N+2+32]=w[N+0+64]=H+V+1>>1,w[N+1+0]=Qt(P,R,H),w[N+3+0]=w[N+1+32]=Qt(R,H,V),w[N+3+32]=w[N+1+64]=Qt(H,V,V),w[N+3+64]=w[N+2+64]=w[N+0+96]=w[N+1+96]=w[N+2+96]=w[N+3+96]=V}function $p(w,N){var P=w[N-1+0],R=w[N-1+32],H=w[N-1+64],V=w[N-1+96],G=w[N-1-32],Q=w[N+0-32],ne=w[N+1-32],le=w[N+2-32];w[N+0+0]=w[N+2+32]=P+G+1>>1,w[N+0+32]=w[N+2+64]=R+P+1>>1,w[N+0+64]=w[N+2+96]=H+R+1>>1,w[N+0+96]=V+H+1>>1,w[N+3+0]=Qt(Q,ne,le),w[N+2+0]=Qt(G,Q,ne),w[N+1+0]=w[N+3+32]=Qt(P,G,Q),w[N+1+32]=w[N+3+64]=Qt(R,P,G),w[N+1+64]=w[N+3+96]=Qt(H,R,P),w[N+1+96]=Qt(V,H,R)}function ld(w,N){var P;for(P=0;8>P;++P)n(w,N+32*P,w,N-32,8)}function x_(w,N){var P;for(P=0;8>P;++P)a(w,N,w[N-1],8),N+=32}function Tl(w,N,P){var R;for(R=0;8>R;++R)a(N,P+32*R,w,8)}function y_(w,N){var P,R=8;for(P=0;8>P;++P)R+=w[N+P-32]+w[N-1+32*P];Tl(R>>4,w,N)}function Bp(w,N){var P,R=4;for(P=0;8>P;++P)R+=w[N+P-32];Tl(R>>3,w,N)}function Up(w,N){var P,R=4;for(P=0;8>P;++P)R+=w[N-1+32*P];Tl(R>>3,w,N)}function v1(w,N){Tl(128,w,N)}function Cl(w,N,P){var R=w[N-P],H=w[N+0],V=3*(H-R)+b_[1020+w[N-2*P]-w[N+P]],G=j1[112+(V+4>>3)];w[N-P]=ds[255+R+j1[112+(V+3>>3)]],w[N+0]=ds[255+H-G]}function zp(w,N,P,R){var H=w[N+0],V=w[N+P];return Bs[255+w[N-2*P]-w[N-P]]>R||Bs[255+V-H]>R}function Zf(w,N,P,R){return 4*Bs[255+w[N-P]-w[N+0]]+Bs[255+w[N-2*P]-w[N+P]]<=R}function qp(w,N,P,R,H){var V=w[N-3*P],G=w[N-2*P],Q=w[N-P],ne=w[N+0],le=w[N+P],Se=w[N+2*P],Pe=w[N+3*P];return 4*Bs[255+Q-ne]+Bs[255+G-le]>R?0:Bs[255+w[N-4*P]-V]<=H&&Bs[255+V-G]<=H&&Bs[255+G-Q]<=H&&Bs[255+Pe-Se]<=H&&Bs[255+Se-le]<=H&&Bs[255+le-ne]<=H}function cd(w,N,P,R){var H=2*R+1;for(R=0;16>R;++R)Zf(w,N+R,P,H)&&Cl(w,N+R,P)}function Hp(w,N,P,R){var H=2*R+1;for(R=0;16>R;++R)Zf(w,N+R*P,1,H)&&Cl(w,N+R*P,1)}function x1(w,N,P,R){var H;for(H=3;0<H;--H)cd(w,N+=4*P,P,R)}function y1(w,N,P,R){var H;for(H=3;0<H;--H)Hp(w,N+=4,P,R)}function kl(w,N,P,R,H,V,G,Q){for(V=2*V+1;0<H--;){if(qp(w,N,P,V,G))if(zp(w,N,P,Q))Cl(w,N,P);else{var ne=w,le=N,Se=P,Pe=ne[le-2*Se],ce=ne[le-Se],Ne=ne[le+0],Ae=ne[le+Se],Be=ne[le+2*Se],Oe=27*(Ve=b_[1020+3*(Ne-ce)+b_[1020+Pe-Ae]])+63>>7,qe=18*Ve+63>>7,Ve=9*Ve+63>>7;ne[le-3*Se]=ds[255+ne[le-3*Se]+Ve],ne[le-2*Se]=ds[255+Pe+qe],ne[le-Se]=ds[255+ce+Oe],ne[le+0]=ds[255+Ne-Oe],ne[le+Se]=ds[255+Ae-qe],ne[le+2*Se]=ds[255+Be-Ve]}N+=R}}function Ol(w,N,P,R,H,V,G,Q){for(V=2*V+1;0<H--;){if(qp(w,N,P,V,G))if(zp(w,N,P,Q))Cl(w,N,P);else{var ne=w,le=N,Se=P,Pe=ne[le-Se],ce=ne[le+0],Ne=ne[le+Se],Ae=j1[112+(4+(Be=3*(ce-Pe))>>3)],Be=j1[112+(Be+3>>3)],Oe=Ae+1>>1;ne[le-2*Se]=ds[255+ne[le-2*Se]+Oe],ne[le-Se]=ds[255+Pe+Be],ne[le+0]=ds[255+ce-Ae],ne[le+Se]=ds[255+Ne-Oe]}N+=R}}function b1(w,N,P,R,H,V){kl(w,N,P,1,16,R,H,V)}function ud(w,N,P,R,H,V){kl(w,N,1,P,16,R,H,V)}function w1(w,N,P,R,H,V){var G;for(G=3;0<G;--G)Ol(w,N+=4*P,P,1,16,R,H,V)}function C(w,N,P,R,H,V){var G;for(G=3;0<G;--G)Ol(w,N+=4,1,P,16,R,H,V)}function q(w,N,P,R,H,V,G,Q){kl(w,N,H,1,8,V,G,Q),kl(P,R,H,1,8,V,G,Q)}function fe(w,N,P,R,H,V,G,Q){kl(w,N,1,H,8,V,G,Q),kl(P,R,1,H,8,V,G,Q)}function ye(w,N,P,R,H,V,G,Q){Ol(w,N+4*H,H,1,8,V,G,Q),Ol(P,R+4*H,H,1,8,V,G,Q)}function je(w,N,P,R,H,V,G,Q){Ol(w,N+4,1,H,8,V,G,Q),Ol(P,R+4,1,H,8,V,G,Q)}function He(){this.ba=new yt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new gr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Xe(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function St(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ct(){this.ua=0,this.Wa=new Re,this.vb=new Re,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Y,this.yc=new D}function Kt(){this.xb=this.a=0,this.l=new Xf,this.ca=new yt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ct,this.ab=0,this.gc=s(4,St),this.Oc=0}function nr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Xf,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function yr(w,N,P,R,H,V,G){for(w=w==null?0:w[N+0],N=0;N<G;++N)H[V+N]=w+P[R+N]&255,w=H[V+N]}function Sn(w,N,P,R,H,V,G){var Q;if(w==null)yr(null,null,P,R,H,V,G);else for(Q=0;Q<G;++Q)H[V+Q]=w[N+Q]+P[R+Q]&255}function ea(w,N,P,R,H,V,G){if(w==null)yr(null,null,P,R,H,V,G);else{var Q,ne=w[N+0],le=ne,Se=ne;for(Q=0;Q<G;++Q)le=Se+(ne=w[N+Q])-le,Se=P[R+Q]+(-256&le?0>le?0:255:le)&255,le=ne,H[V+Q]=Se}}function en(w,N,P,R){var H=N.width,V=N.o;if(t(w!=null&&N!=null),0>P||0>=R||P+R>V)return null;if(!w.Cc){if(w.ga==null){var G;if(w.ga=new nr,(G=w.ga==null)||(G=N.width*N.o,t(w.Gb.length==0),w.Gb=i(G),w.Uc=0,w.Gb==null?G=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,G=1),G=!G),!G){G=w.ga;var Q=w.Fa,ne=w.P,le=w.qc,Se=w.mb,Pe=w.nb,ce=ne+1,Ne=le-1,Ae=G.l;if(t(Q!=null&&Se!=null&&N!=null),Kc[0]=null,Kc[1]=yr,Kc[2]=Sn,Kc[3]=ea,G.ca=Se,G.tb=Pe,G.c=N.width,G.i=N.height,t(0<G.c&&0<G.i),1>=le)N=0;else if(G.$a=3&Q[ne+0],G.Z=Q[ne+0]>>2&3,G.Lc=Q[ne+0]>>4&3,ne=Q[ne+0]>>6&3,0>G.$a||1<G.$a||4<=G.Z||1<G.Lc||ne)N=0;else if(Ae.put=mt,Ae.ac=xi,Ae.bc=uo,Ae.ma=G,Ae.width=N.width,Ae.height=N.height,Ae.Da=N.Da,Ae.v=N.v,Ae.va=N.va,Ae.j=N.j,Ae.o=N.o,G.$a)e:{t(G.$a==1),N=Ce();t:for(;;){if(N==null){N=0;break e}if(t(G!=null),G.mc=N,N.c=G.c,N.i=G.i,N.l=G.l,N.l.ma=G,N.l.width=G.c,N.l.height=G.i,N.a=0,oe(N.m,Q,ce,Ne),!ke(G.c,G.i,1,N,null)||(N.ab==1&&N.gc[0].hc==3&&ie(N.s)?(G.ic=1,Q=N.c*N.i,N.Ta=null,N.Ua=0,N.V=i(Q),N.Ba=0,N.V==null?(N.a=1,N=0):N=1):(G.ic=0,N=Le(N,G.c)),!N))break t;N=1;break e}G.mc=null,N=0}else N=Ne>=G.c*G.i;G=!N}if(G)return null;w.ga.Lc!=1?w.Ga=0:R=V-P}t(w.ga!=null),t(P+R<=V);e:{if(N=(Q=w.ga).c,V=Q.l.o,Q.$a==0){if(ce=w.rc,Ne=w.Vc,Ae=w.Fa,ne=w.P+1+P*N,le=w.mb,Se=w.nb+P*N,t(ne<=w.P+w.qc),Q.Z!=0)for(t(Kc[Q.Z]!=null),G=0;G<R;++G)Kc[Q.Z](ce,Ne,Ae,ne,le,Se,N),ce=le,Ne=Se,Se+=N,ne+=N;else for(G=0;G<R;++G)n(le,Se,Ae,ne,N),ce=le,Ne=Se,Se+=N,ne+=N;w.rc=ce,w.Vc=Ne}else{if(t(Q.mc!=null),N=P+R,t((G=Q.mc)!=null),t(N<=G.i),G.C>=N)N=1;else if(Q.ic||mo(),Q.ic){Q=G.V,ce=G.Ba,Ne=G.c;var Be=G.i,Oe=(Ae=1,ne=G.$/Ne,le=G.$%Ne,Se=G.m,Pe=G.s,G.$),qe=Ne*Be,Ve=Ne*N,Ze=Pe.wc,Ye=Oe<Ve?W(Pe,le,ne):null;t(Oe<=qe),t(N<=Be),t(ie(Pe));t:for(;;){for(;!Se.h&&Oe<Ve;){if(le&Ze||(Ye=W(Pe,le,ne)),t(Ye!=null),pe(Se),256>(Be=vn(Ye.G[0],Ye.H[0],Se)))Q[ce+Oe]=Be,++Oe,++le>=Ne&&(le=0,++ne<=N&&!(ne%16)&&he(G,ne));else{if(!(280>Be)){Ae=0;break t}Be=ni(Be-256,Se);var Ot,bt=vn(Ye.G[4],Ye.H[4],Se);if(pe(Se),!(Oe>=(bt=zi(Ne,bt=ni(bt,Se)))&&qe-Oe>=Be)){Ae=0;break t}for(Ot=0;Ot<Be;++Ot)Q[ce+Oe+Ot]=Q[ce+Oe+Ot-bt];for(Oe+=Be,le+=Be;le>=Ne;)le-=Ne,++ne<=N&&!(ne%16)&&he(G,ne);Oe<Ve&&le&Ze&&(Ye=W(Pe,le,ne))}t(Se.h==U(Se))}he(G,ne>N?N:ne);break t}!Ae||Se.h&&Oe<qe?(Ae=0,G.a=Se.h?5:3):G.$=Oe,N=Ae}else N=Te(G,G.V,G.Ba,G.c,G.i,N,Je);if(!N){R=0;break e}}P+R>=V&&(w.Cc=1),R=1}if(!R)return null;if(w.Cc&&((R=w.ga)!=null&&(R.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+P*H}function fa(w,N,P,R,H,V){for(;0<H--;){var G,Q=w,ne=N+(P?1:0),le=w,Se=N+(P?0:3);for(G=0;G<R;++G){var Pe=le[Se+4*G];Pe!=255&&(Pe*=32897,Q[ne+4*G+0]=Q[ne+4*G+0]*Pe>>23,Q[ne+4*G+1]=Q[ne+4*G+1]*Pe>>23,Q[ne+4*G+2]=Q[ne+4*G+2]*Pe>>23)}N+=V}}function ta(w,N,P,R,H){for(;0<R--;){var V;for(V=0;V<P;++V){var G=w[N+2*V+0],Q=15&(le=w[N+2*V+1]),ne=4369*Q,le=(240&le|le>>4)*ne>>16;w[N+2*V+0]=(240&G|G>>4)*ne>>16&240|(15&G|G<<4)*ne>>16>>4&15,w[N+2*V+1]=240&le|Q}N+=H}}function Ba(w,N,P,R,H,V,G,Q){var ne,le,Se=255;for(le=0;le<H;++le){for(ne=0;ne<R;++ne){var Pe=w[N+ne];V[G+4*ne]=Pe,Se&=Pe}N+=P,G+=Q}return Se!=255}function Pl(w,N,P,R,H){var V;for(V=0;V<H;++V)P[R+V]=w[N+V]>>8}function mo(){rm=fa,dT=ta,fT=Ba,hT=Pl}function Ll(w,N,P){T[w]=function(R,H,V,G,Q,ne,le,Se,Pe,ce,Ne,Ae,Be,Oe,qe,Ve,Ze){var Ye,Ot=Ze-1>>1,bt=Q[ne+0]|le[Se+0]<<16,ar=Pe[ce+0]|Ne[Ae+0]<<16;t(R!=null);var jt=3*bt+ar+131074>>2;for(N(R[H+0],255&jt,jt>>16,Be,Oe),V!=null&&(jt=3*ar+bt+131074>>2,N(V[G+0],255&jt,jt>>16,qe,Ve)),Ye=1;Ye<=Ot;++Ye){var pr=Q[ne+Ye]|le[Se+Ye]<<16,pa=Pe[ce+Ye]|Ne[Ae+Ye]<<16,ir=bt+pr+ar+pa+524296,At=ir+2*(pr+ar)>>3;jt=At+bt>>1,bt=(ir=ir+2*(bt+pa)>>3)+pr>>1,N(R[H+2*Ye-1],255&jt,jt>>16,Be,Oe+(2*Ye-1)*P),N(R[H+2*Ye-0],255&bt,bt>>16,Be,Oe+(2*Ye-0)*P),V!=null&&(jt=ir+ar>>1,bt=At+pa>>1,N(V[G+2*Ye-1],255&jt,jt>>16,qe,Ve+(2*Ye-1)*P),N(V[G+2*Ye+0],255&bt,bt>>16,qe,Ve+(2*Ye+0)*P)),bt=pr,ar=pa}1&Ze||(jt=3*bt+ar+131074>>2,N(R[H+Ze-1],255&jt,jt>>16,Be,Oe+(Ze-1)*P),V!=null&&(jt=3*ar+bt+131074>>2,N(V[G+Ze-1],255&jt,jt>>16,qe,Ve+(Ze-1)*P)))}}function Wp(){Us[A1]=QH,Us[E1]=NT,Us[yT]=ZH,Us[T1]=jT,Us[C1]=AT,Us[w_]=ET,Us[bT]=eW,Us[__]=NT,Us[S_]=jT,Us[k1]=AT,Us[N_]=ET}function eh(w){return w&-16384?0>w?0:255:w>>tW}function Fc(w,N){return eh((19077*w>>8)+(26149*N>>8)-14234)}function dd(w,N,P){return eh((19077*w>>8)-(6419*N>>8)-(13320*P>>8)+8708)}function fd(w,N){return eh((19077*w>>8)+(33050*N>>8)-17685)}function $c(w,N,P,R,H){R[H+0]=Fc(w,P),R[H+1]=dd(w,N,P),R[H+2]=fd(w,N)}function Ua(w,N,P,R,H){R[H+0]=fd(w,N),R[H+1]=dd(w,N,P),R[H+2]=Fc(w,P)}function hd(w,N,P,R,H){var V=dd(w,N,P);N=V<<3&224|fd(w,N)>>3,R[H+0]=248&Fc(w,P)|V>>5,R[H+1]=N}function pd(w,N,P,R,H){var V=240&fd(w,N)|15;R[H+0]=240&Fc(w,P)|dd(w,N,P)>>4,R[H+1]=V}function Vp(w,N,P,R,H){R[H+0]=255,$c(w,N,P,R,H+1)}function Gp(w,N,P,R,H){Ua(w,N,P,R,H),R[H+3]=255}function yi(w,N,P,R,H){$c(w,N,P,R,H),R[H+3]=255}function Il(w,N,P){T[w]=function(R,H,V,G,Q,ne,le,Se,Pe){for(var ce=Se+(-2&Pe)*P;Se!=ce;)N(R[H+0],V[G+0],Q[ne+0],le,Se),N(R[H+1],V[G+0],Q[ne+0],le,Se+P),H+=2,++G,++ne,Se+=2*P;1&Pe&&N(R[H+0],V[G+0],Q[ne+0],le,Se)}}function th(w,N,P){return P==0?w==0?N==0?6:5:N==0?4:0:P}function _1(w,N,P,R,H){switch(w>>>30){case 3:xd(N,P,R,H,0);break;case 2:$s(N,P,R,H);break;case 1:Cr(N,P,R,H)}}function Fs(w,N){var P,R,H=N.M,V=N.Nb,G=w.oc,Q=w.pc+40,ne=w.oc,le=w.pc+584,Se=w.oc,Pe=w.pc+600;for(P=0;16>P;++P)G[Q+32*P-1]=129;for(P=0;8>P;++P)ne[le+32*P-1]=129,Se[Pe+32*P-1]=129;for(0<H?G[Q-1-32]=ne[le-1-32]=Se[Pe-1-32]=129:(a(G,Q-32-1,127,21),a(ne,le-32-1,127,9),a(Se,Pe-32-1,127,9)),R=0;R<w.za;++R){var ce=N.ya[N.aa+R];if(0<R){for(P=-1;16>P;++P)n(G,Q+32*P-4,G,Q+32*P+12,4);for(P=-1;8>P;++P)n(ne,le+32*P-4,ne,le+32*P+4,4),n(Se,Pe+32*P-4,Se,Pe+32*P+4,4)}var Ne=w.Gd,Ae=w.Hd+R,Be=ce.ad,Oe=ce.Hc;if(0<H&&(n(G,Q-32,Ne[Ae].y,0,16),n(ne,le-32,Ne[Ae].f,0,8),n(Se,Pe-32,Ne[Ae].ea,0,8)),ce.Za){var qe=G,Ve=Q-32+16;for(0<H&&(R>=w.za-1?a(qe,Ve,Ne[Ae].y[15],4):n(qe,Ve,Ne[Ae+1].y,0,4)),P=0;4>P;P++)qe[Ve+128+P]=qe[Ve+256+P]=qe[Ve+384+P]=qe[Ve+0+P];for(P=0;16>P;++P,Oe<<=2)qe=G,Ve=Q+CT[P],go[ce.Ob[P]](qe,Ve),_1(Oe,Be,16*+P,qe,Ve)}else if(qe=th(R,H,ce.Ob[0]),Gc[qe](G,Q),Oe!=0)for(P=0;16>P;++P,Oe<<=2)_1(Oe,Be,16*+P,G,Q+CT[P]);for(P=ce.Gc,qe=th(R,H,ce.Dd),Ml[qe](ne,le),Ml[qe](Se,Pe),Oe=Be,qe=ne,Ve=le,255&(ce=0|P)&&(170&ce?Zo(Oe,256,qe,Ve):Yr(Oe,256,qe,Ve)),ce=Se,Oe=Pe,255&(P>>=8)&&(170&P?Zo(Be,320,ce,Oe):Yr(Be,320,ce,Oe)),H<w.Ub-1&&(n(Ne[Ae].y,0,G,Q+480,16),n(Ne[Ae].f,0,ne,le+224,8),n(Ne[Ae].ea,0,Se,Pe+224,8)),P=8*V*w.B,Ne=w.sa,Ae=w.ta+16*R+16*V*w.R,Be=w.qa,ce=w.ra+8*R+P,Oe=w.Ha,qe=w.Ia+8*R+P,P=0;16>P;++P)n(Ne,Ae+P*w.R,G,Q+32*P,16);for(P=0;8>P;++P)n(Be,ce+P*w.B,ne,le+32*P,8),n(Oe,qe+P*w.B,Se,Pe+32*P,8)}}function md(w,N,P,R,H,V,G,Q,ne){var le=[0],Se=[0],Pe=0,ce=ne!=null?ne.kd:0,Ne=ne??new Xe;if(w==null||12>P)return 7;Ne.data=w,Ne.w=N,Ne.ha=P,N=[N],P=[P],Ne.gb=[Ne.gb];e:{var Ae=N,Be=P,Oe=Ne.gb;if(t(w!=null),t(Be!=null),t(Oe!=null),Oe[0]=0,12<=Be[0]&&!r(w,Ae[0],"RIFF")){if(r(w,Ae[0]+8,"WEBP")){Oe=3;break e}var qe=Me(w,Ae[0]+4);if(12>qe||4294967286<qe){Oe=3;break e}if(ce&&qe>Be[0]-8){Oe=7;break e}Oe[0]=qe,Ae[0]+=12,Be[0]-=12}Oe=0}if(Oe!=0)return Oe;for(qe=0<Ne.gb[0],P=P[0];;){e:{var Ve=w;Be=N,Oe=P;var Ze=le,Ye=Se,Ot=Ae=[0];if((jt=Pe=[Pe])[0]=0,8>Oe[0])Oe=7;else{if(!r(Ve,Be[0],"VP8X")){if(Me(Ve,Be[0]+4)!=10){Oe=3;break e}if(18>Oe[0]){Oe=7;break e}var bt=Me(Ve,Be[0]+8),ar=1+Fe(Ve,Be[0]+12);if(2147483648<=ar*(Ve=1+Fe(Ve,Be[0]+15))){Oe=3;break e}Ot!=null&&(Ot[0]=bt),Ze!=null&&(Ze[0]=ar),Ye!=null&&(Ye[0]=Ve),Be[0]+=18,Oe[0]-=18,jt[0]=1}Oe=0}}if(Pe=Pe[0],Ae=Ae[0],Oe!=0)return Oe;if(Be=!!(2&Ae),!qe&&Pe)return 3;if(V!=null&&(V[0]=!!(16&Ae)),G!=null&&(G[0]=Be),Q!=null&&(Q[0]=0),G=le[0],Ae=Se[0],Pe&&Be&&ne==null){Oe=0;break}if(4>P){Oe=7;break}if(qe&&Pe||!qe&&!Pe&&!r(w,N[0],"ALPH")){P=[P],Ne.na=[Ne.na],Ne.P=[Ne.P],Ne.Sa=[Ne.Sa];e:{bt=w,Oe=N,qe=P;var jt=Ne.gb;Ze=Ne.na,Ye=Ne.P,Ot=Ne.Sa,ar=22,t(bt!=null),t(qe!=null),Ve=Oe[0];var pr=qe[0];for(t(Ze!=null),t(Ot!=null),Ze[0]=null,Ye[0]=null,Ot[0]=0;;){if(Oe[0]=Ve,qe[0]=pr,8>pr){Oe=7;break e}var pa=Me(bt,Ve+4);if(4294967286<pa){Oe=3;break e}var ir=8+pa+1&-2;if(ar+=ir,0<jt&&ar>jt){Oe=3;break e}if(!r(bt,Ve,"VP8 ")||!r(bt,Ve,"VP8L")){Oe=0;break e}if(pr[0]<ir){Oe=7;break e}r(bt,Ve,"ALPH")||(Ze[0]=bt,Ye[0]=Ve+8,Ot[0]=pa),Ve+=ir,pr-=ir}}if(P=P[0],Ne.na=Ne.na[0],Ne.P=Ne.P[0],Ne.Sa=Ne.Sa[0],Oe!=0)break}P=[P],Ne.Ja=[Ne.Ja],Ne.xa=[Ne.xa];e:if(jt=w,Oe=N,qe=P,Ze=Ne.gb[0],Ye=Ne.Ja,Ot=Ne.xa,bt=Oe[0],Ve=!r(jt,bt,"VP8 "),ar=!r(jt,bt,"VP8L"),t(jt!=null),t(qe!=null),t(Ye!=null),t(Ot!=null),8>qe[0])Oe=7;else{if(Ve||ar){if(jt=Me(jt,bt+4),12<=Ze&&jt>Ze-12){Oe=3;break e}if(ce&&jt>qe[0]-8){Oe=7;break e}Ye[0]=jt,Oe[0]+=8,qe[0]-=8,Ot[0]=ar}else Ot[0]=5<=qe[0]&&jt[bt+0]==47&&!(jt[bt+4]>>5),Ye[0]=qe[0];Oe=0}if(P=P[0],Ne.Ja=Ne.Ja[0],Ne.xa=Ne.xa[0],N=N[0],Oe!=0)break;if(4294967286<Ne.Ja)return 3;if(Q==null||Be||(Q[0]=Ne.xa?2:1),G=[G],Ae=[Ae],Ne.xa){if(5>P){Oe=7;break}Q=G,ce=Ae,Be=V,w==null||5>P?w=0:5<=P&&w[N+0]==47&&!(w[N+4]>>5)?(qe=[0],jt=[0],Ze=[0],oe(Ye=new M,w,N,P),fo(Ye,qe,jt,Ze)?(Q!=null&&(Q[0]=qe[0]),ce!=null&&(ce[0]=jt[0]),Be!=null&&(Be[0]=Ze[0]),w=1):w=0):w=0}else{if(10>P){Oe=7;break}Q=Ae,w==null||10>P||!d1(w,N+3,P-3)?w=0:(ce=w[N+0]|w[N+1]<<8|w[N+2]<<16,Be=16383&(w[N+7]<<8|w[N+6]),w=16383&(w[N+9]<<8|w[N+8]),1&ce||3<(ce>>1&7)||!(ce>>4&1)||ce>>5>=Ne.Ja||!Be||!w?w=0:(G&&(G[0]=Be),Q&&(Q[0]=w),w=1))}if(!w||(G=G[0],Ae=Ae[0],Pe&&(le[0]!=G||Se[0]!=Ae)))return 3;ne!=null&&(ne[0]=Ne,ne.offset=N-ne.w,t(4294967286>N-ne.w),t(ne.offset==ne.ha-P));break}return Oe==0||Oe==7&&Pe&&ne==null?(V!=null&&(V[0]|=Ne.na!=null&&0<Ne.na.length),R!=null&&(R[0]=G),H!=null&&(H[0]=Ae),0):Oe}function Kp(w,N,P){var R=N.width,H=N.height,V=0,G=0,Q=R,ne=H;if(N.Da=w!=null&&0<w.Da,N.Da&&(Q=w.cd,ne=w.bd,V=w.v,G=w.j,11>P||(V&=-2,G&=-2),0>V||0>G||0>=Q||0>=ne||V+Q>R||G+ne>H))return 0;if(N.v=V,N.j=G,N.va=V+Q,N.o=G+ne,N.U=Q,N.T=ne,N.da=w!=null&&0<w.da,N.da){if(!Qe(Q,ne,P=[w.ib],V=[w.hb]))return 0;N.ib=P[0],N.hb=V[0]}return N.ob=w!=null&&w.ob,N.Kb=w==null||!w.Sd,N.da&&(N.ob=N.ib<3*R/4&&N.hb<3*H/4,N.Kb=0),1}function Xp(w){if(w==null)return 2;if(11>w.S){var N=w.f.RGBA;N.fb+=(w.height-1)*N.A,N.A=-N.A}else N=w.f.kb,w=w.height,N.O+=(w-1)*N.fa,N.fa=-N.fa,N.N+=(w-1>>1)*N.Ab,N.Ab=-N.Ab,N.W+=(w-1>>1)*N.Db,N.Db=-N.Db,N.F!=null&&(N.J+=(w-1)*N.lb,N.lb=-N.lb);return 0}function Bc(w,N,P,R){if(R==null||0>=w||0>=N)return 2;if(P!=null){if(P.Da){var H=P.cd,V=P.bd,G=-2&P.v,Q=-2&P.j;if(0>G||0>Q||0>=H||0>=V||G+H>w||Q+V>N)return 2;w=H,N=V}if(P.da){if(!Qe(w,N,H=[P.ib],V=[P.hb]))return 2;w=H[0],N=V[0]}}R.width=w,R.height=N;e:{var ne=R.width,le=R.height;if(w=R.S,0>=ne||0>=le||!(w>=A1&&13>w))w=2;else{if(0>=R.Rd&&R.sd==null){G=V=H=N=0;var Se=(Q=ne*kT[w])*le;if(11>w||(V=(le+1)/2*(N=(ne+1)/2),w==12&&(G=(H=ne)*le)),(le=i(Se+2*V+G))==null){w=1;break e}R.sd=le,11>w?((ne=R.f.RGBA).eb=le,ne.fb=0,ne.A=Q,ne.size=Se):((ne=R.f.kb).y=le,ne.O=0,ne.fa=Q,ne.Fd=Se,ne.f=le,ne.N=0+Se,ne.Ab=N,ne.Cd=V,ne.ea=le,ne.W=0+Se+V,ne.Db=N,ne.Ed=V,w==12&&(ne.F=le,ne.J=0+Se+2*V),ne.Tc=G,ne.lb=H)}if(N=1,H=R.S,V=R.width,G=R.height,H>=A1&&13>H)if(11>H)w=R.f.RGBA,N&=(Q=Math.abs(w.A))*(G-1)+V<=w.size,N&=Q>=V*kT[H],N&=w.eb!=null;else{w=R.f.kb,Q=(V+1)/2,Se=(G+1)/2,ne=Math.abs(w.fa),le=Math.abs(w.Ab);var Pe=Math.abs(w.Db),ce=Math.abs(w.lb),Ne=ce*(G-1)+V;N&=ne*(G-1)+V<=w.Fd,N&=le*(Se-1)+Q<=w.Cd,N=(N&=Pe*(Se-1)+Q<=w.Ed)&ne>=V&le>=Q&Pe>=Q,N&=w.y!=null,N&=w.f!=null,N&=w.ea!=null,H==12&&(N&=ce>=V,N&=Ne<=w.Tc,N&=w.F!=null)}else N=0;w=N?0:2}}return w!=0||P!=null&&P.fd&&(w=Xp(R)),w}var gd=64,cs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],us=24,Uc=32,Rl=8,zc=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];st("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(w){return w},T.Predictor2=function(w,N,P){return N[P+0]},T.Predictor3=function(w,N,P){return N[P+1]},T.Predictor4=function(w,N,P){return N[P-1]},T.Predictor5=function(w,N,P){return rt(rt(w,N[P+1]),N[P+0])},T.Predictor6=function(w,N,P){return rt(w,N[P-1])},T.Predictor7=function(w,N,P){return rt(w,N[P+0])},T.Predictor8=function(w,N,P){return rt(N[P-1],N[P+0])},T.Predictor9=function(w,N,P){return rt(N[P+0],N[P+1])},T.Predictor10=function(w,N,P){return rt(rt(w,N[P-1]),rt(N[P+0],N[P+1]))},T.Predictor11=function(w,N,P){var R=N[P+0];return 0>=$t(R>>24&255,w>>24&255,(N=N[P-1])>>24&255)+$t(R>>16&255,w>>16&255,N>>16&255)+$t(R>>8&255,w>>8&255,N>>8&255)+$t(255&R,255&w,255&N)?R:w},T.Predictor12=function(w,N,P){var R=N[P+0];return(Dt((w>>24&255)+(R>>24&255)-((N=N[P-1])>>24&255))<<24|Dt((w>>16&255)+(R>>16&255)-(N>>16&255))<<16|Dt((w>>8&255)+(R>>8&255)-(N>>8&255))<<8|Dt((255&w)+(255&R)-(255&N)))>>>0},T.Predictor13=function(w,N,P){var R=N[P-1];return(ht((w=rt(w,N[P+0]))>>24&255,R>>24&255)<<24|ht(w>>16&255,R>>16&255)<<16|ht(w>>8&255,R>>8&255)<<8|ht(255&w,255&R))>>>0};var Yp=T.PredictorAdd0;T.PredictorAdd1=tr,st("Predictor2","PredictorAdd2"),st("Predictor3","PredictorAdd3"),st("Predictor4","PredictorAdd4"),st("Predictor5","PredictorAdd5"),st("Predictor6","PredictorAdd6"),st("Predictor7","PredictorAdd7"),st("Predictor8","PredictorAdd8"),st("Predictor9","PredictorAdd9"),st("Predictor10","PredictorAdd10"),st("Predictor11","PredictorAdd11"),st("Predictor12","PredictorAdd12"),st("Predictor13","PredictorAdd13");var rh=T.PredictorAdd2;Nt("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),Nt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var zn,S1=T.ColorIndexInverseTransform,Jo=T.MapARGB,Qo=T.VP8LColorIndexInverseTransformAlpha,Jp=T.MapAlpha,Qp=T.VP8LPredictorsAdd=[];Qp.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var Zp,em,qc,Hc,Wc,vd,Vc,xd,$s,Zo,Cr,Yr,qn,ha,Dl,tm,nh,N1,iT,sT,oT,lT,cT,uT,rm,dT,fT,hT,pT=i(511),mT=i(2041),gT=i(225),vT=i(767),xT=0,b_=mT,j1=gT,ds=vT,Bs=pT,A1=0,E1=1,yT=2,T1=3,C1=4,w_=5,bT=6,__=7,S_=8,k1=9,N_=10,FH=[2,3,7],$H=[3,3,11],wT=[280,256,256,256,40],BH=[0,1,1,1,0],UH=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],zH=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],qH=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],HH=8,j_=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],A_=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],nm=null,WH=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],VH=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],_T=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],GH=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],KH=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],XH=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],YH=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Gc=[],go=[],Ml=[],JH=1,ST=2,Kc=[],Us=[];Ll("UpsampleRgbLinePair",$c,3),Ll("UpsampleBgrLinePair",Ua,3),Ll("UpsampleRgbaLinePair",yi,4),Ll("UpsampleBgraLinePair",Gp,4),Ll("UpsampleArgbLinePair",Vp,4),Ll("UpsampleRgba4444LinePair",pd,2),Ll("UpsampleRgb565LinePair",hd,2);var QH=T.UpsampleRgbLinePair,ZH=T.UpsampleBgrLinePair,NT=T.UpsampleRgbaLinePair,jT=T.UpsampleBgraLinePair,AT=T.UpsampleArgbLinePair,ET=T.UpsampleRgba4444LinePair,eW=T.UpsampleRgb565LinePair,O1=16,P1=1<<O1-1,am=-227,E_=482,tW=6,TT=0,rW=i(256),nW=i(256),aW=i(256),iW=i(256),sW=i(E_-am),oW=i(E_-am);Il("YuvToRgbRow",$c,3),Il("YuvToBgrRow",Ua,3),Il("YuvToRgbaRow",yi,4),Il("YuvToBgraRow",Gp,4),Il("YuvToArgbRow",Vp,4),Il("YuvToRgba4444Row",pd,2),Il("YuvToRgb565Row",hd,2);var CT=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],L1=[0,2,8],lW=[8,7,6,4,4,2,2,2,1,1,1,1],cW=1;this.WebPDecodeRGBA=function(w,N,P,R,H){var V=E1,G=new He,Q=new yt;G.ba=Q,Q.S=V,Q.width=[Q.width],Q.height=[Q.height];var ne=Q.width,le=Q.height,Se=new Lt;if(Se==null||w==null)var Pe=2;else t(Se!=null),Pe=md(w,N,P,Se.width,Se.height,Se.Pd,Se.Qd,Se.format,null);if(Pe!=0?ne=0:(ne!=null&&(ne[0]=Se.width[0]),le!=null&&(le[0]=Se.height[0]),ne=1),ne){Q.width=Q.width[0],Q.height=Q.height[0],R!=null&&(R[0]=Q.width),H!=null&&(H[0]=Q.height);e:{if(R=new Xf,(H=new Xe).data=w,H.w=N,H.ha=P,H.kd=1,N=[0],t(H!=null),((w=md(H.data,H.w,H.ha,null,null,null,N,null,H))==0||w==7)&&N[0]&&(w=4),(N=w)==0){if(t(G!=null),R.data=H.data,R.w=H.w+H.offset,R.ha=H.ha-H.offset,R.put=mt,R.ac=xi,R.bc=uo,R.ma=G,H.xa){if((w=Ce())==null){G=1;break e}if(function(ce,Ne){var Ae=[0],Be=[0],Oe=[0];t:for(;;){if(ce==null)return 0;if(Ne==null)return ce.a=2,0;if(ce.l=Ne,ce.a=0,oe(ce.m,Ne.data,Ne.w,Ne.ha),!fo(ce.m,Ae,Be,Oe)){ce.a=3;break t}if(ce.xb=ST,Ne.width=Ae[0],Ne.height=Be[0],!ke(Ae[0],Be[0],1,ce,null))break t;return 1}return t(ce.a!=0),0}(w,R)){if(R=(N=Bc(R.width,R.height,G.Oa,G.ba))==0){t:{R=w;r:for(;;){if(R==null){R=0;break t}if(t(R.s.yc!=null),t(R.s.Ya!=null),t(0<R.s.Wb),t((P=R.l)!=null),t((H=P.ma)!=null),R.xb!=0){if(R.ca=H.ba,R.tb=H.tb,t(R.ca!=null),!Kp(H.Oa,P,T1)){R.a=2;break r}if(!Le(R,P.width)||P.da)break r;if((P.da||Rt(R.ca.S))&&mo(),11>R.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),R.ca.f.kb.F!=null&&mo()),R.Pb&&0<R.s.ua&&R.s.vb.X==null&&!X(R.s.vb,R.s.Wa.Xa)){R.a=1;break r}R.xb=0}if(!Te(R,R.V,R.Ba,R.c,R.i,P.o,re))break r;H.Dc=R.Ma,R=1;break t}t(R.a!=0),R=0}R=!R}R&&(N=w.a)}else N=w.a}else{if((w=new i_)==null){G=1;break e}if(w.Fa=H.na,w.P=H.P,w.qc=H.Sa,Xo(w,R)){if((N=Bc(R.width,R.height,G.Oa,G.ba))==0){if(w.Aa=0,P=G.Oa,t((H=w)!=null),P!=null){if(0<(ne=0>(ne=P.Md)?0:100<ne?255:255*ne/100)){for(le=Se=0;4>le;++le)12>(Pe=H.pb[le]).lc&&(Pe.ia=ne*lW[0>Pe.lc?0:Pe.lc]>>3),Se|=Pe.ia;Se&&(alert("todo:VP8InitRandom"),H.ia=1)}H.Ga=P.Id,100<H.Ga?H.Ga=100:0>H.Ga&&(H.Ga=0)}(function(ce,Ne){if(ce==null)return 0;if(Ne==null)return Zn(ce,2,"NULL VP8Io parameter in VP8Decode().");if(!ce.cb&&!Xo(ce,Ne))return 0;if(t(ce.cb),Ne.ac==null||Ne.ac(Ne)){Ne.ob&&(ce.L=0);var Ae=L1[ce.L];if(ce.L==2?(ce.yb=0,ce.zb=0):(ce.yb=Ne.v-Ae>>4,ce.zb=Ne.j-Ae>>4,0>ce.yb&&(ce.yb=0),0>ce.zb&&(ce.zb=0)),ce.Va=Ne.o+15+Ae>>4,ce.Hb=Ne.va+15+Ae>>4,ce.Hb>ce.za&&(ce.Hb=ce.za),ce.Va>ce.Ub&&(ce.Va=ce.Ub),0<ce.L){var Be=ce.ed;for(Ae=0;4>Ae;++Ae){var Oe;if(ce.Qa.Cb){var qe=ce.Qa.Lb[Ae];ce.Qa.Fb||(qe+=Be.Tb)}else qe=Be.Tb;for(Oe=0;1>=Oe;++Oe){var Ve=ce.gd[Ae][Oe],Ze=qe;if(Be.Pc&&(Ze+=Be.vd[0],Oe&&(Ze+=Be.od[0])),0<(Ze=0>Ze?0:63<Ze?63:Ze)){var Ye=Ze;0<Be.wb&&(Ye=4<Be.wb?Ye>>2:Ye>>1)>9-Be.wb&&(Ye=9-Be.wb),1>Ye&&(Ye=1),Ve.dd=Ye,Ve.tc=2*Ze+Ye,Ve.ld=40<=Ze?2:15<=Ze?1:0}else Ve.tc=0;Ve.La=Oe}}}Ae=0}else Zn(ce,6,"Frame setup failed"),Ae=ce.a;if(Ae=Ae==0){if(Ae){ce.$c=0,0<ce.Aa||(ce.Ic=cW);t:{Ae=ce.Ic,Be=4*(Ye=ce.za);var Ot=32*Ye,bt=Ye+1,ar=0<ce.L?Ye*(0<ce.Aa?2:1):0,jt=(ce.Aa==2?2:1)*Ye;if((Ve=Be+832+(Oe=3*(16*Ae+L1[ce.L])/2*Ot)+(qe=ce.Fa!=null&&0<ce.Fa.length?ce.Kc.c*ce.Kc.i:0))!=Ve)Ae=0;else{if(Ve>ce.Vb){if(ce.Vb=0,ce.Ec=i(Ve),ce.Fc=0,ce.Ec==null){Ae=Zn(ce,1,"no memory during frame initialization.");break t}ce.Vb=Ve}Ve=ce.Ec,Ze=ce.Fc,ce.Ac=Ve,ce.Bc=Ze,Ze+=Be,ce.Gd=s(Ot,Ds),ce.Hd=0,ce.rb=s(bt+1,Pn),ce.sb=1,ce.wa=ar?s(ar,hr):null,ce.Y=0,ce.D.Nb=0,ce.D.wa=ce.wa,ce.D.Y=ce.Y,0<ce.Aa&&(ce.D.Y+=Ye),t(!0),ce.oc=Ve,ce.pc=Ze,Ze+=832,ce.ya=s(jt,ho),ce.aa=0,ce.D.ya=ce.ya,ce.D.aa=ce.aa,ce.Aa==2&&(ce.D.aa+=Ye),ce.R=16*Ye,ce.B=8*Ye,Ye=(Ot=L1[ce.L])*ce.R,Ot=Ot/2*ce.B,ce.sa=Ve,ce.ta=Ze+Ye,ce.qa=ce.sa,ce.ra=ce.ta+16*Ae*ce.R+Ot,ce.Ha=ce.qa,ce.Ia=ce.ra+8*Ae*ce.B+Ot,ce.$c=0,Ze+=Oe,ce.mb=qe?Ve:null,ce.nb=qe?Ze:null,t(Ze+qe<=ce.Fc+ce.Vb),f1(ce),a(ce.Ac,ce.Bc,0,Be),Ae=1}}if(Ae){if(Ne.ka=0,Ne.y=ce.sa,Ne.O=ce.ta,Ne.f=ce.qa,Ne.N=ce.ra,Ne.ea=ce.Ha,Ne.Vd=ce.Ia,Ne.fa=ce.R,Ne.Rc=ce.B,Ne.F=null,Ne.J=0,!xT){for(Ae=-255;255>=Ae;++Ae)pT[255+Ae]=0>Ae?-Ae:Ae;for(Ae=-1020;1020>=Ae;++Ae)mT[1020+Ae]=-128>Ae?-128:127<Ae?127:Ae;for(Ae=-112;112>=Ae;++Ae)gT[112+Ae]=-16>Ae?-16:15<Ae?15:Ae;for(Ae=-255;510>=Ae;++Ae)vT[255+Ae]=0>Ae?0:255<Ae?255:Ae;xT=1}Vc=Jf,xd=o_,Zo=Yo,Cr=p1,Yr=m1,$s=s_,qn=b1,ha=ud,Dl=q,tm=fe,nh=w1,N1=C,iT=ye,sT=je,oT=cd,lT=Hp,cT=x1,uT=y1,go[0]=m_,go[1]=l_,go[2]=h_,go[3]=p_,go[4]=Al,go[5]=g_,go[6]=El,go[7]=v_,go[8]=$p,go[9]=Qf,Gc[0]=d_,Gc[1]=u_,Gc[2]=Mp,Gc[3]=g1,Gc[4]=od,Gc[5]=Fp,Gc[6]=f_,Ml[0]=y_,Ml[1]=c_,Ml[2]=ld,Ml[3]=x_,Ml[4]=Up,Ml[5]=Bp,Ml[6]=v1,Ae=1}else Ae=0}Ae&&(Ae=function(pr,pa){for(pr.M=0;pr.M<pr.Va;++pr.M){var ir,At=pr.Jc[pr.M&pr.Xb],lt=pr.m,Hn=pr;for(ir=0;ir<Hn.za;++ir){var rr=lt,vr=Hn,cn=vr.Ac,za=vr.Bc+4*ir,bi=vr.zc,Ln=vr.ya[vr.aa+ir];if(vr.Qa.Bb?Ln.$b=ae(rr,vr.Pa.jb[0])?2+ae(rr,vr.Pa.jb[2]):ae(rr,vr.Pa.jb[1]):Ln.$b=0,vr.kc&&(Ln.Ad=ae(rr,vr.Bd)),Ln.Za=!ae(rr,145)+0,Ln.Za){var ai=Ln.Ob,wi=0;for(vr=0;4>vr;++vr){var ma,br=bi[0+vr];for(ma=0;4>ma;++ma){br=KH[cn[za+ma]][br];for(var Ir=_T[ae(rr,br[0])];0<Ir;)Ir=_T[2*Ir+ae(rr,br[Ir])];br=-Ir,cn[za+ma]=br}n(ai,wi,cn,za,4),wi+=4,bi[0+vr]=br}}else br=ae(rr,156)?ae(rr,128)?1:3:ae(rr,163)?2:0,Ln.Ob[0]=br,a(cn,za,br,4),a(bi,0,br,4);Ln.Dd=ae(rr,142)?ae(rr,114)?ae(rr,183)?1:3:2:0}if(Hn.m.Ka)return Zn(pr,7,"Premature end-of-partition0 encountered.");for(;pr.ja<pr.za;++pr.ja){if(Hn=At,rr=(lt=pr).rb[lt.sb-1],cn=lt.rb[lt.sb+lt.ja],ir=lt.ya[lt.aa+lt.ja],za=lt.kc?ir.Ad:0)rr.la=cn.la=0,ir.Za||(rr.Na=cn.Na=0),ir.Hc=0,ir.Gc=0,ir.ia=0;else{var In,Rr;if(rr=cn,cn=Hn,za=lt.Pa.Xc,bi=lt.ya[lt.aa+lt.ja],Ln=lt.pb[bi.$b],vr=bi.ad,ai=0,wi=lt.rb[lt.sb-1],br=ma=0,a(vr,ai,0,384),bi.Za)var qa=0,vo=za[3];else{Ir=i(16);var Wn=rr.Na+wi.Na;if(Wn=nm(cn,za[1],Wn,Ln.Eb,0,Ir,0),rr.Na=wi.Na=(0<Wn)+0,1<Wn)Vc(Ir,0,vr,ai);else{var qi=Ir[0]+3>>3;for(Ir=0;256>Ir;Ir+=16)vr[ai+Ir]=qi}qa=1,vo=za[0]}var Jr=15&rr.la,ga=15&wi.la;for(Ir=0;4>Ir;++Ir){var fs=1&ga;for(qi=Rr=0;4>qi;++qi)Jr=Jr>>1|(fs=(Wn=nm(cn,vo,Wn=fs+(1&Jr),Ln.Sc,qa,vr,ai))>qa)<<7,Rr=Rr<<2|(3<Wn?3:1<Wn?2:vr[ai+0]!=0),ai+=16;Jr>>=4,ga=ga>>1|fs<<7,ma=(ma<<8|Rr)>>>0}for(vo=Jr,qa=ga>>4,In=0;4>In;In+=2){for(Rr=0,Jr=rr.la>>4+In,ga=wi.la>>4+In,Ir=0;2>Ir;++Ir){for(fs=1&ga,qi=0;2>qi;++qi)Wn=fs+(1&Jr),Jr=Jr>>1|(fs=0<(Wn=nm(cn,za[2],Wn,Ln.Qc,0,vr,ai)))<<3,Rr=Rr<<2|(3<Wn?3:1<Wn?2:vr[ai+0]!=0),ai+=16;Jr>>=2,ga=ga>>1|fs<<5}br|=Rr<<4*In,vo|=Jr<<4<<In,qa|=(240&ga)<<In}rr.la=vo,wi.la=qa,bi.Hc=ma,bi.Gc=br,bi.ia=43690&br?0:Ln.ia,za=!(ma|br)}if(0<lt.L&&(lt.wa[lt.Y+lt.ja]=lt.gd[ir.$b][ir.Za],lt.wa[lt.Y+lt.ja].La|=!za),Hn.Ka)return Zn(pr,7,"Premature end-of-file encountered.")}if(f1(pr),lt=pa,Hn=1,ir=(At=pr).D,rr=0<At.L&&At.M>=At.zb&&At.M<=At.Va,At.Aa==0)t:{if(ir.M=At.M,ir.uc=rr,Fs(At,ir),Hn=1,ir=(Rr=At.D).Nb,rr=(br=L1[At.L])*At.R,cn=br/2*At.B,Ir=16*ir*At.R,qi=8*ir*At.B,za=At.sa,bi=At.ta-rr+Ir,Ln=At.qa,vr=At.ra-cn+qi,ai=At.Ha,wi=At.Ia-cn+qi,ga=(Jr=Rr.M)==0,ma=Jr>=At.Va-1,At.Aa==2&&Fs(At,Rr),Rr.uc)for(fs=(Wn=At).D.M,t(Wn.D.uc),Rr=Wn.yb;Rr<Wn.Hb;++Rr){qa=Rr,vo=fs;var _i=(hs=(Ha=Wn).D).Nb;In=Ha.R;var hs=hs.wa[hs.Y+qa],ps=Ha.sa,Hi=Ha.ta+16*_i*In+16*qa,ms=hs.dd,tn=hs.tc;if(tn!=0)if(t(3<=tn),Ha.L==1)0<qa&&lT(ps,Hi,In,tn+4),hs.La&&uT(ps,Hi,In,tn),0<vo&&oT(ps,Hi,In,tn+4),hs.La&&cT(ps,Hi,In,tn);else{var gs=Ha.B,xo=Ha.qa,yd=Ha.ra+8*_i*gs+8*qa,Fl=Ha.Ha,Ha=Ha.Ia+8*_i*gs+8*qa;_i=hs.ld,0<qa&&(ha(ps,Hi,In,tn+4,ms,_i),tm(xo,yd,Fl,Ha,gs,tn+4,ms,_i)),hs.La&&(N1(ps,Hi,In,tn,ms,_i),sT(xo,yd,Fl,Ha,gs,tn,ms,_i)),0<vo&&(qn(ps,Hi,In,tn+4,ms,_i),Dl(xo,yd,Fl,Ha,gs,tn+4,ms,_i)),hs.La&&(nh(ps,Hi,In,tn,ms,_i),iT(xo,yd,Fl,Ha,gs,tn,ms,_i))}}if(At.ia&&alert("todo:DitherRow"),lt.put!=null){if(Rr=16*Jr,Jr=16*(Jr+1),ga?(lt.y=At.sa,lt.O=At.ta+Ir,lt.f=At.qa,lt.N=At.ra+qi,lt.ea=At.Ha,lt.W=At.Ia+qi):(Rr-=br,lt.y=za,lt.O=bi,lt.f=Ln,lt.N=vr,lt.ea=ai,lt.W=wi),ma||(Jr-=br),Jr>lt.o&&(Jr=lt.o),lt.F=null,lt.J=null,At.Fa!=null&&0<At.Fa.length&&Rr<Jr&&(lt.J=en(At,lt,Rr,Jr-Rr),lt.F=At.mb,lt.F==null&&lt.F.length==0)){Hn=Zn(At,3,"Could not decode alpha data.");break t}Rr<lt.j&&(br=lt.j-Rr,Rr=lt.j,t(!(1&br)),lt.O+=At.R*br,lt.N+=At.B*(br>>1),lt.W+=At.B*(br>>1),lt.F!=null&&(lt.J+=lt.width*br)),Rr<Jr&&(lt.O+=lt.v,lt.N+=lt.v>>1,lt.W+=lt.v>>1,lt.F!=null&&(lt.J+=lt.v),lt.ka=Rr-lt.j,lt.U=lt.va-lt.v,lt.T=Jr-Rr,Hn=lt.put(lt))}ir+1!=At.Ic||ma||(n(At.sa,At.ta-rr,za,bi+16*At.R,rr),n(At.qa,At.ra-cn,Ln,vr+8*At.B,cn),n(At.Ha,At.Ia-cn,ai,wi+8*At.B,cn))}if(!Hn)return Zn(pr,6,"Output aborted.")}return 1}(ce,Ne)),Ne.bc!=null&&Ne.bc(Ne),Ae&=1}return Ae?(ce.cb=0,Ae):0})(w,R)||(N=w.a)}}else N=w.a}N==0&&G.Oa!=null&&G.Oa.fd&&(N=Xp(G.ba))}G=N}V=G!=0?null:11>V?Q.f.RGBA.eb:Q.f.kb.y}else V=null;return V};var kT=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(T,L){for(var O="",I=0;I<4;I++)O+=String.fromCharCode(T[L++]);return O}function d(T,L){return T[L+0]|T[L+1]<<8}function f(T,L){return(T[L+0]|T[L+1]<<8|T[L+2]<<16)>>>0}function p(T,L){return(T[L+0]|T[L+1]<<8|T[L+2]<<16|T[L+3]<<24)>>>0}new c;var h=[0],g=[0],m=[],x=new c,y=e,v=function(T,L){var O={},I=0,D=!1,z=0,Y=0;if(O.frames=[],!function(k,M){for(var B=0;B<4;B++)if(k[M+B]!="RIFF".charCodeAt(B))return!0;return!1}(T,L)){for(p(T,L+=4),L+=8;L<T.length;){var se=u(T,L),ee=p(T,L+=4);L+=4;var J=ee+(1&ee);switch(se){case"VP8 ":case"VP8L":O.frames[I]===void 0&&(O.frames[I]={}),(xe=O.frames[I]).src_off=D?Y:L-8,xe.src_size=z+ee+8,I++,D&&(D=!1,z=0,Y=0);break;case"VP8X":(xe=O.header={}).feature_flags=T[L];var oe=L+4;xe.canvas_width=1+f(T,oe),oe+=3,xe.canvas_height=1+f(T,oe),oe+=3;break;case"ALPH":D=!0,z=J+8,Y=L-8;break;case"ANIM":(xe=O.header).bgcolor=p(T,L),oe=L+4,xe.loop_count=d(T,oe),oe+=2;break;case"ANMF":var we,xe;(xe=O.frames[I]={}).offset_x=2*f(T,L),L+=3,xe.offset_y=2*f(T,L),L+=3,xe.width=1+f(T,L),L+=3,xe.height=1+f(T,L),L+=3,xe.duration=f(T,L),L+=3,we=T[L++],xe.dispose=1&we,xe.blend=we>>1&1}se!="ANMF"&&(L+=J)}return O}}(y,0);v.response=y,v.rgbaoutput=!0,v.dataurl=!1;var b=v.header?v.header:null,S=v.frames?v.frames:null;if(b){b.loop_counter=b.loop_count,h=[b.canvas_height],g=[b.canvas_width];for(var _=0;_<S.length&&S[_].blend!=0;_++);}var A=S[0],j=x.WebPDecodeRGBA(y,A.src_off,A.src_size,g,h);A.rgba=j,A.imgwidth=g[0],A.imgheight=h[0];for(var E=0;E<g[0]*h[0]*4;E++)m[E]=j[E];return this.width=g,this.height=h,this.data=m,this}(function(e){var t,r,n,a,i,s,o,c,u,d=function(k){return k=k||{},this.isStrokeTransparent=k.isStrokeTransparent||!1,this.strokeOpacity=k.strokeOpacity||1,this.strokeStyle=k.strokeStyle||"#000000",this.fillStyle=k.fillStyle||"#000000",this.isFillTransparent=k.isFillTransparent||!1,this.fillOpacity=k.fillOpacity||1,this.font=k.font||"10px sans-serif",this.textBaseline=k.textBaseline||"alphabetic",this.textAlign=k.textAlign||"left",this.lineWidth=k.lineWidth||1,this.lineJoin=k.lineJoin||"miter",this.lineCap=k.lineCap||"butt",this.path=k.path||[],this.transform=k.transform!==void 0?k.transform.clone():new c,this.globalCompositeOperation=k.globalCompositeOperation||"normal",this.globalAlpha=k.globalAlpha||1,this.clip_path=k.clip_path||[],this.currentPoint=k.currentPoint||new s,this.miterLimit=k.miterLimit||10,this.lastPoint=k.lastPoint||new s,this.lineDashOffset=k.lineDashOffset||0,this.lineDash=k.lineDash||[],this.margin=k.margin||[0,0,0,0],this.prevPageLastElemOffset=k.prevPageLastElemOffset||0,this.ignoreClearRect=typeof k.ignoreClearRect!="boolean"||k.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(k){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var M=k;Object.defineProperty(this,"pdf",{get:function(){return M}});var B=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return B},set:function(X){B=!!X}});var U=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return U},set:function(X){U=!!X}});var Z=0;Object.defineProperty(this,"posX",{get:function(){return Z},set:function(X){isNaN(X)||(Z=X)}});var pe=0;Object.defineProperty(this,"posY",{get:function(){return pe},set:function(X){isNaN(X)||(pe=X)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(X){var Ie;typeof X=="number"?Ie=[X,X,X,X]:((Ie=new Array(4))[0]=X[0],Ie[1]=X.length>=2?X[1]:Ie[0],Ie[2]=X.length>=3?X[2]:Ie[0],Ie[3]=X.length>=4?X[3]:Ie[1]),u.margin=Ie}});var K=!1;Object.defineProperty(this,"autoPaging",{get:function(){return K},set:function(X){K=X}});var te=0;Object.defineProperty(this,"lastBreak",{get:function(){return te},set:function(X){te=X}});var ae=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ae},set:function(X){ae=X}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(X){X instanceof d&&(u=X)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(X){u.path=X}});var be=[];Object.defineProperty(this,"ctxStack",{get:function(){return be},set:function(X){be=X}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(X){var Ie;Ie=p(X),this.ctx.fillStyle=Ie.style,this.ctx.isFillTransparent=Ie.a===0,this.ctx.fillOpacity=Ie.a,this.pdf.setFillColor(Ie.r,Ie.g,Ie.b,{a:Ie.a}),this.pdf.setTextColor(Ie.r,Ie.g,Ie.b,{a:Ie.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(X){var Ie=p(X);this.ctx.strokeStyle=Ie.style,this.ctx.isStrokeTransparent=Ie.a===0,this.ctx.strokeOpacity=Ie.a,Ie.a===0?this.pdf.setDrawColor(255,255,255):(Ie.a,this.pdf.setDrawColor(Ie.r,Ie.g,Ie.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(X){["butt","round","square"].indexOf(X)!==-1&&(this.ctx.lineCap=X,this.pdf.setLineCap(X))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(X){isNaN(X)||(this.ctx.lineWidth=X,this.pdf.setLineWidth(X))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(X){["bevel","round","miter"].indexOf(X)!==-1&&(this.ctx.lineJoin=X,this.pdf.setLineJoin(X))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(X){isNaN(X)||(this.ctx.miterLimit=X,this.pdf.setMiterLimit(X))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(X){this.ctx.textBaseline=X}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(X){["right","end","center","left","start"].indexOf(X)!==-1&&(this.ctx.textAlign=X)}});var ve=null,Fe=null,Me=null;Object.defineProperty(this,"fontFaces",{get:function(){return Me},set:function(X){ve=null,Fe=null,Me=X}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(X){var Ie;if(this.ctx.font=X,(Ie=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(X))!==null){var Re=Ie[1];Ie[2];var Qe=Ie[3],Ue=Ie[4];Ie[5];var pt=Ie[6],st=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ue)[2];Ue=Math.floor(st==="px"?parseFloat(Ue)*this.pdf.internal.scaleFactor:st==="em"?parseFloat(Ue)*this.pdf.getFontSize():parseFloat(Ue)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ue);var dt=function(Nt){var Xr,lr,Yt=[],Jt=Nt.trim();if(Jt==="")return Y5;if(Jt in $6)return[$6[Jt]];for(;Jt!=="";){switch(lr=null,Xr=(Jt=U6(Jt)).charAt(0)){case'"':case"'":lr=i0e(Jt.substring(1),Xr);break;default:lr=s0e(Jt)}if(lr===null||(Yt.push(lr[0]),(Jt=U6(lr[1]))!==""&&Jt.charAt(0)!==","))return Y5;Jt=Jt.replace(/^,/,"")}return Yt}(pt);if(this.fontFaces){var rt=function(Nt,Xr){var lr=Nt.getFontList(),Yt=JSON.stringify(lr);if(ve===null||Fe!==Yt){var Jt=function(Lr){var kt=[];return Object.keys(Lr).forEach(function(_r){Lr[_r].forEach(function(Rt){var Ge=null;switch(Rt){case"bold":Ge={family:_r,weight:"bold"};break;case"italic":Ge={family:_r,style:"italic"};break;case"bolditalic":Ge={family:_r,weight:"bold",style:"italic"};break;case"":case"normal":Ge={family:_r}}Ge!==null&&(Ge.ref={name:_r,style:Rt},kt.push(Ge))})}),kt}(lr);ve=function(Lr){for(var kt={},_r=0;_r<Lr.length;++_r){var Rt=X5(Lr[_r]),Ge=Rt.family,We=Rt.stretch,yt=Rt.style,Lt=Rt.weight;kt[Ge]=kt[Ge]||{},kt[Ge][We]=kt[Ge][We]||{},kt[Ge][We][yt]=kt[Ge][We][yt]||{},kt[Ge][We][yt][Lt]=Rt}return kt}(Jt.concat(Xr)),Fe=Yt}return ve}(this.pdf,this.fontFaces),Dt=dt.map(function(Nt){return{family:Nt,stretch:"normal",weight:Qe,style:Re}}),ht=function(Nt,Xr,lr){for(var Yt=(lr=lr||{}).defaultFontFamily||"times",Jt=Object.assign({},a0e,lr.genericFontFamilies||{}),Lr=null,kt=null,_r=0;_r<Xr.length;++_r)if(Jt[(Lr=X5(Xr[_r])).family]&&(Lr.family=Jt[Lr.family]),Nt.hasOwnProperty(Lr.family)){kt=Nt[Lr.family];break}if(!(kt=kt||Nt[Yt]))throw new Error("Could not find a font-family for the rule '"+B6(Lr)+"' and default family '"+Yt+"'.");if(kt=function(Rt,Ge){if(Ge[Rt])return Ge[Rt];var We=Sj[Rt],yt=We<=Sj.normal?-1:1,Lt=F6(Ge,bB,We,yt);if(!Lt)throw new Error("Could not find a matching font-stretch value for "+Rt);return Lt}(Lr.stretch,kt),kt=function(Rt,Ge){if(Ge[Rt])return Ge[Rt];for(var We=yB[Rt],yt=0;yt<We.length;++yt)if(Ge[We[yt]])return Ge[We[yt]];throw new Error("Could not find a matching font-style for "+Rt)}(Lr.style,kt),!(kt=function(Rt,Ge){if(Ge[Rt])return Ge[Rt];if(Rt===400&&Ge[500])return Ge[500];if(Rt===500&&Ge[400])return Ge[400];var We=n0e[Rt],yt=F6(Ge,wB,We,Rt<400?-1:1);if(!yt)throw new Error("Could not find a matching font-weight for value "+Rt);return yt}(Lr.weight,kt)))throw new Error("Failed to resolve a font for the rule '"+B6(Lr)+"'.");return kt}(rt,Dt);this.pdf.setFont(ht.ref.name,ht.ref.style)}else{var $t="";(Qe==="bold"||parseInt(Qe,10)>=700||Re==="bold")&&($t="bold"),Re==="italic"&&($t+="italic"),$t.length===0&&($t="normal");for(var tr="",Tt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},_t=0;_t<dt.length;_t++){if(this.pdf.internal.getFont(dt[_t],$t,{noFallback:!0,disableWarning:!0})!==void 0){tr=dt[_t];break}if($t==="bolditalic"&&this.pdf.internal.getFont(dt[_t],"bold",{noFallback:!0,disableWarning:!0})!==void 0)tr=dt[_t],$t="bold";else if(this.pdf.internal.getFont(dt[_t],"normal",{noFallback:!0,disableWarning:!0})!==void 0){tr=dt[_t],$t="normal";break}}if(tr===""){for(var qt=0;qt<dt.length;qt++)if(Tt[dt[qt]]){tr=Tt[dt[qt]];break}}tr=tr===""?"Times":tr,this.pdf.setFont(tr,$t)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(X){this.ctx.globalCompositeOperation=X}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(X){this.ctx.globalAlpha=X}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(X){this.ctx.lineDashOffset=X,xe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(X){this.ctx.lineDash=X,xe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(X){this.ctx.ignoreClearRect=!!X}})};f.prototype.setLineDash=function(k){this.lineDash=k},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){S.call(this,"fill",!1)},f.prototype.stroke=function(){S.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(k,M){if(isNaN(k)||isNaN(M))throw Qr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var B=this.ctx.transform.applyToPoint(new s(k,M));this.path.push({type:"mt",x:B.x,y:B.y}),this.ctx.lastPoint=new s(k,M)},f.prototype.closePath=function(){var k=new s(0,0),M=0;for(M=this.path.length-1;M!==-1;M--)if(this.path[M].type==="begin"&&Br(this.path[M+1])==="object"&&typeof this.path[M+1].x=="number"){k=new s(this.path[M+1].x,this.path[M+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(k.x,k.y)},f.prototype.lineTo=function(k,M){if(isNaN(k)||isNaN(M))throw Qr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var B=this.ctx.transform.applyToPoint(new s(k,M));this.path.push({type:"lt",x:B.x,y:B.y}),this.ctx.lastPoint=new s(B.x,B.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),S.call(this,null,!0)},f.prototype.quadraticCurveTo=function(k,M,B,U){if(isNaN(B)||isNaN(U)||isNaN(k)||isNaN(M))throw Qr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Z=this.ctx.transform.applyToPoint(new s(B,U)),pe=this.ctx.transform.applyToPoint(new s(k,M));this.path.push({type:"qct",x1:pe.x,y1:pe.y,x:Z.x,y:Z.y}),this.ctx.lastPoint=new s(Z.x,Z.y)},f.prototype.bezierCurveTo=function(k,M,B,U,Z,pe){if(isNaN(Z)||isNaN(pe)||isNaN(k)||isNaN(M)||isNaN(B)||isNaN(U))throw Qr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var K=this.ctx.transform.applyToPoint(new s(Z,pe)),te=this.ctx.transform.applyToPoint(new s(k,M)),ae=this.ctx.transform.applyToPoint(new s(B,U));this.path.push({type:"bct",x1:te.x,y1:te.y,x2:ae.x,y2:ae.y,x:K.x,y:K.y}),this.ctx.lastPoint=new s(K.x,K.y)},f.prototype.arc=function(k,M,B,U,Z,pe){if(isNaN(k)||isNaN(M)||isNaN(B)||isNaN(U)||isNaN(Z))throw Qr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(pe=!!pe,!this.ctx.transform.isIdentity){var K=this.ctx.transform.applyToPoint(new s(k,M));k=K.x,M=K.y;var te=this.ctx.transform.applyToPoint(new s(0,B)),ae=this.ctx.transform.applyToPoint(new s(0,0));B=Math.sqrt(Math.pow(te.x-ae.x,2)+Math.pow(te.y-ae.y,2))}Math.abs(Z-U)>=2*Math.PI&&(U=0,Z=2*Math.PI),this.path.push({type:"arc",x:k,y:M,radius:B,startAngle:U,endAngle:Z,counterclockwise:pe})},f.prototype.arcTo=function(k,M,B,U,Z){throw new Error("arcTo not implemented.")},f.prototype.rect=function(k,M,B,U){if(isNaN(k)||isNaN(M)||isNaN(B)||isNaN(U))throw Qr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(k,M),this.lineTo(k+B,M),this.lineTo(k+B,M+U),this.lineTo(k,M+U),this.lineTo(k,M),this.lineTo(k+B,M),this.lineTo(k,M)},f.prototype.fillRect=function(k,M,B,U){if(isNaN(k)||isNaN(M)||isNaN(B)||isNaN(U))throw Qr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var Z={};this.lineCap!=="butt"&&(Z.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Z.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(k,M,B,U),this.fill(),Z.hasOwnProperty("lineCap")&&(this.lineCap=Z.lineCap),Z.hasOwnProperty("lineJoin")&&(this.lineJoin=Z.lineJoin)}},f.prototype.strokeRect=function(k,M,B,U){if(isNaN(k)||isNaN(M)||isNaN(B)||isNaN(U))throw Qr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(k,M,B,U),this.stroke())},f.prototype.clearRect=function(k,M,B,U){if(isNaN(k)||isNaN(M)||isNaN(B)||isNaN(U))throw Qr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(k,M,B,U))},f.prototype.save=function(k){k=typeof k!="boolean"||k;for(var M=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("q");if(this.pdf.setPage(M),k){this.ctx.fontSize=this.pdf.internal.getFontSize();var U=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=U}},f.prototype.restore=function(k){k=typeof k!="boolean"||k;for(var M=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("Q");this.pdf.setPage(M),k&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(k){var M,B,U,Z;if(k.isCanvasGradient===!0&&(k=k.getColor()),!k)return{r:0,g:0,b:0,a:0,style:k};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(k))M=0,B=0,U=0,Z=0;else{var pe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(k);if(pe!==null)M=parseInt(pe[1]),B=parseInt(pe[2]),U=parseInt(pe[3]),Z=1;else if((pe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(k))!==null)M=parseInt(pe[1]),B=parseInt(pe[2]),U=parseInt(pe[3]),Z=parseFloat(pe[4]);else{if(Z=1,typeof k=="string"&&k.charAt(0)!=="#"){var K=new fB(k);k=K.ok?K.toHex():"#000000"}k.length===4?(M=k.substring(1,2),M+=M,B=k.substring(2,3),B+=B,U=k.substring(3,4),U+=U):(M=k.substring(1,3),B=k.substring(3,5),U=k.substring(5,7)),M=parseInt(M,16),B=parseInt(B,16),U=parseInt(U,16)}}return{r:M,g:B,b:U,a:Z,style:k}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(k,M,B,U){if(isNaN(M)||isNaN(B)||typeof k!="string")throw Qr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(U=isNaN(U)?void 0:U,!h.call(this)){var Z=J(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;I.call(this,{text:k,x:M,y:B,scale:pe,angle:Z,align:this.textAlign,maxWidth:U})}},f.prototype.strokeText=function(k,M,B,U){if(isNaN(M)||isNaN(B)||typeof k!="string")throw Qr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){U=isNaN(U)?void 0:U;var Z=J(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;I.call(this,{text:k,x:M,y:B,scale:pe,renderingMode:"stroke",angle:Z,align:this.textAlign,maxWidth:U})}},f.prototype.measureText=function(k){if(typeof k!="string")throw Qr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var M=this.pdf,B=this.pdf.internal.scaleFactor,U=M.internal.getFontSize(),Z=M.getStringUnitWidth(k)*U/M.internal.scaleFactor;return new function(pe){var K=(pe=pe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return K}}),this}({width:Z*=Math.round(96*B/72*1e4)/1e4})},f.prototype.scale=function(k,M){if(isNaN(k)||isNaN(M))throw Qr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var B=new c(k,0,0,M,0,0);this.ctx.transform=this.ctx.transform.multiply(B)},f.prototype.rotate=function(k){if(isNaN(k))throw Qr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var M=new c(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0);this.ctx.transform=this.ctx.transform.multiply(M)},f.prototype.translate=function(k,M){if(isNaN(k)||isNaN(M))throw Qr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var B=new c(1,0,0,1,k,M);this.ctx.transform=this.ctx.transform.multiply(B)},f.prototype.transform=function(k,M,B,U,Z,pe){if(isNaN(k)||isNaN(M)||isNaN(B)||isNaN(U)||isNaN(Z)||isNaN(pe))throw Qr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var K=new c(k,M,B,U,Z,pe);this.ctx.transform=this.ctx.transform.multiply(K)},f.prototype.setTransform=function(k,M,B,U,Z,pe){k=isNaN(k)?1:k,M=isNaN(M)?0:M,B=isNaN(B)?0:B,U=isNaN(U)?1:U,Z=isNaN(Z)?0:Z,pe=isNaN(pe)?0:pe,this.ctx.transform=new c(k,M,B,U,Z,pe)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(k,M,B,U,Z,pe,K,te,ae){var be=this.pdf.getImageProperties(k),ve=1,Fe=1,Me=1,X=1;U!==void 0&&te!==void 0&&(Me=te/U,X=ae/Z,ve=be.width/U*te/U,Fe=be.height/Z*ae/Z),pe===void 0&&(pe=M,K=B,M=0,B=0),U!==void 0&&te===void 0&&(te=U,ae=Z),U===void 0&&te===void 0&&(te=be.width,ae=be.height);var Ie=this.ctx.transform.decompose(),Re=J(Ie.rotate.shx),Qe=new c,Ue=(Qe=(Qe=(Qe=Qe.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale)).applyToRectangle(new o(pe-M*Me,K-B*X,U*ve,Z*Fe));if(this.autoPaging){for(var pt,st=x.call(this,Ue),dt=[],rt=0;rt<st.length;rt+=1)dt.indexOf(st[rt])===-1&&dt.push(st[rt]);b(dt);for(var Dt=dt[0],ht=dt[dt.length-1],$t=Dt;$t<ht+1;$t++){this.pdf.setPage($t);var tr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Tt=$t===1?this.posY+this.margin[0]:this.margin[0],_t=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Nt=$t===1?0:_t+($t-2)*qt;if(this.ctx.clip_path.length!==0){var Xr=this.path;pt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(pt,this.posX+this.margin[3],-Nt+Tt+this.ctx.prevPageLastElemOffset),_.call(this,"fill",!0),this.path=Xr}var lr=JSON.parse(JSON.stringify(Ue));lr=v([lr],this.posX+this.margin[3],-Nt+Tt+this.ctx.prevPageLastElemOffset)[0];var Yt=($t>Dt||$t<ht)&&m.call(this);Yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tr,qt,null).clip().discardPath()),this.pdf.addImage(k,"JPEG",lr.x,lr.y,lr.w,lr.h,null,null,Re),Yt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(k,"JPEG",Ue.x,Ue.y,Ue.w,Ue.h,null,null,Re)};var x=function(k,M,B){var U=[];M=M||this.pdf.internal.pageSize.width,B=B||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Z=this.posY+this.ctx.prevPageLastElemOffset;switch(k.type){default:case"mt":case"lt":U.push(Math.floor((k.y+Z)/B)+1);break;case"arc":U.push(Math.floor((k.y+Z-k.radius)/B)+1),U.push(Math.floor((k.y+Z+k.radius)/B)+1);break;case"qct":var pe=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x,k.y);U.push(Math.floor((pe.y+Z)/B)+1),U.push(Math.floor((pe.y+pe.h+Z)/B)+1);break;case"bct":var K=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x2,k.y2,k.x,k.y);U.push(Math.floor((K.y+Z)/B)+1),U.push(Math.floor((K.y+K.h+Z)/B)+1);break;case"rect":U.push(Math.floor((k.y+Z)/B)+1),U.push(Math.floor((k.y+k.h+Z)/B)+1)}for(var te=0;te<U.length;te+=1)for(;this.pdf.internal.getNumberOfPages()<U[te];)y.call(this);return U},y=function(){var k=this.fillStyle,M=this.strokeStyle,B=this.font,U=this.lineCap,Z=this.lineWidth,pe=this.lineJoin;this.pdf.addPage(),this.fillStyle=k,this.strokeStyle=M,this.font=B,this.lineCap=U,this.lineWidth=Z,this.lineJoin=pe},v=function(k,M,B){for(var U=0;U<k.length;U++)switch(k[U].type){case"bct":k[U].x2+=M,k[U].y2+=B;case"qct":k[U].x1+=M,k[U].y1+=B;default:k[U].x+=M,k[U].y+=B}return k},b=function(k){return k.sort(function(M,B){return M-B})},S=function(k,M){var B=this.fillStyle,U=this.strokeStyle,Z=this.lineCap,pe=this.lineWidth,K=Math.abs(pe*this.ctx.transform.scaleX),te=this.lineJoin;if(this.autoPaging){for(var ae,be,ve=JSON.parse(JSON.stringify(this.path)),Fe=JSON.parse(JSON.stringify(this.path)),Me=[],X=0;X<Fe.length;X++)if(Fe[X].x!==void 0)for(var Ie=x.call(this,Fe[X]),Re=0;Re<Ie.length;Re+=1)Me.indexOf(Ie[Re])===-1&&Me.push(Ie[Re]);for(var Qe=0;Qe<Me.length;Qe++)for(;this.pdf.internal.getNumberOfPages()<Me[Qe];)y.call(this);b(Me);for(var Ue=Me[0],pt=Me[Me.length-1],st=Ue;st<pt+1;st++){this.pdf.setPage(st),this.fillStyle=B,this.strokeStyle=U,this.lineCap=Z,this.lineWidth=K,this.lineJoin=te;var dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],rt=st===1?this.posY+this.margin[0]:this.margin[0],Dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$t=st===1?0:Dt+(st-2)*ht;if(this.ctx.clip_path.length!==0){var tr=this.path;ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(ae,this.posX+this.margin[3],-$t+rt+this.ctx.prevPageLastElemOffset),_.call(this,k,!0),this.path=tr}if(be=JSON.parse(JSON.stringify(ve)),this.path=v(be,this.posX+this.margin[3],-$t+rt+this.ctx.prevPageLastElemOffset),M===!1||st===0){var Tt=(st>Ue||st<pt)&&m.call(this);Tt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,ht,null).clip().discardPath()),_.call(this,k,M),Tt&&this.pdf.restoreGraphicsState()}this.lineWidth=pe}this.path=ve}else this.lineWidth=K,_.call(this,k,M),this.lineWidth=pe},_=function(k,M){if((k!=="stroke"||M||!g.call(this))&&(k==="stroke"||M||!h.call(this))){for(var B,U,Z=[],pe=this.path,K=0;K<pe.length;K++){var te=pe[K];switch(te.type){case"begin":Z.push({begin:!0});break;case"close":Z.push({close:!0});break;case"mt":Z.push({start:te,deltas:[],abs:[]});break;case"lt":var ae=Z.length;if(pe[K-1]&&!isNaN(pe[K-1].x)&&(B=[te.x-pe[K-1].x,te.y-pe[K-1].y],ae>0)){for(;ae>=0;ae--)if(Z[ae-1].close!==!0&&Z[ae-1].begin!==!0){Z[ae-1].deltas.push(B),Z[ae-1].abs.push(te);break}}break;case"bct":B=[te.x1-pe[K-1].x,te.y1-pe[K-1].y,te.x2-pe[K-1].x,te.y2-pe[K-1].y,te.x-pe[K-1].x,te.y-pe[K-1].y],Z[Z.length-1].deltas.push(B);break;case"qct":var be=pe[K-1].x+2/3*(te.x1-pe[K-1].x),ve=pe[K-1].y+2/3*(te.y1-pe[K-1].y),Fe=te.x+2/3*(te.x1-te.x),Me=te.y+2/3*(te.y1-te.y),X=te.x,Ie=te.y;B=[be-pe[K-1].x,ve-pe[K-1].y,Fe-pe[K-1].x,Me-pe[K-1].y,X-pe[K-1].x,Ie-pe[K-1].y],Z[Z.length-1].deltas.push(B);break;case"arc":Z.push({deltas:[],abs:[],arc:!0}),Array.isArray(Z[Z.length-1].abs)&&Z[Z.length-1].abs.push(te)}}U=M?null:k==="stroke"?"stroke":"fill";for(var Re=!1,Qe=0;Qe<Z.length;Qe++)if(Z[Qe].arc)for(var Ue=Z[Qe].abs,pt=0;pt<Ue.length;pt++){var st=Ue[pt];st.type==="arc"?E.call(this,st.x,st.y,st.radius,st.startAngle,st.endAngle,st.counterclockwise,void 0,M,!Re):D.call(this,st.x,st.y),Re=!0}else if(Z[Qe].close===!0)this.pdf.internal.out("h"),Re=!1;else if(Z[Qe].begin!==!0){var dt=Z[Qe].start.x,rt=Z[Qe].start.y;z.call(this,Z[Qe].deltas,dt,rt),Re=!0}U&&T.call(this,U),M&&L.call(this)}},A=function(k){var M=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,B=M*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return k-B;case"top":return k+M-B;case"hanging":return k+M-2*B;case"middle":return k+M/2-B;default:return k}},j=function(k){return k+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var k=function(){};return k.colorStops=[],k.addColorStop=function(M,B){this.colorStops.push([M,B])},k.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},k.isCanvasGradient=!0,k},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(k,M,B,U,Z,pe,K,te,ae){for(var be=se.call(this,B,U,Z,pe),ve=0;ve<be.length;ve++){var Fe=be[ve];ve===0&&(ae?O.call(this,Fe.x1+k,Fe.y1+M):D.call(this,Fe.x1+k,Fe.y1+M)),Y.call(this,k,M,Fe.x2,Fe.y2,Fe.x3,Fe.y3,Fe.x4,Fe.y4)}te?L.call(this):T.call(this,K)},T=function(k){switch(k){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},O=function(k,M){this.pdf.internal.out(r(k)+" "+n(M)+" m")},I=function(k){var M;switch(k.align){case"right":case"end":M="right";break;case"center":M="center";break;default:M="left"}var B,U,Z,pe=this.pdf.getTextDimensions(k.text),K=A.call(this,k.y),te=j.call(this,K)-pe.h,ae=this.ctx.transform.applyToPoint(new s(k.x,K));if(this.autoPaging){var be=this.ctx.transform.decompose(),ve=new c;ve=(ve=(ve=ve.multiply(be.translate)).multiply(be.skew)).multiply(be.scale);for(var Fe=this.ctx.transform.applyToRectangle(new o(k.x,K,pe.w,pe.h)),Me=ve.applyToRectangle(new o(k.x,te,pe.w,pe.h)),X=x.call(this,Me),Ie=[],Re=0;Re<X.length;Re+=1)Ie.indexOf(X[Re])===-1&&Ie.push(X[Re]);b(Ie);for(var Qe=Ie[0],Ue=Ie[Ie.length-1],pt=Qe;pt<Ue+1;pt++){this.pdf.setPage(pt);var st=pt===1?this.posY+this.margin[0]:this.margin[0],dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rt=this.pdf.internal.pageSize.height-this.margin[2],Dt=rt-this.margin[0],ht=this.pdf.internal.pageSize.width-this.margin[1],$t=ht-this.margin[3],tr=pt===1?0:dt+(pt-2)*Dt;if(this.ctx.clip_path.length!==0){var Tt=this.path;B=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(B,this.posX+this.margin[3],-1*tr+st),_.call(this,"fill",!0),this.path=Tt}var _t=v([JSON.parse(JSON.stringify(Me))],this.posX+this.margin[3],-tr+st+this.ctx.prevPageLastElemOffset)[0];k.scale>=.01&&(U=this.pdf.internal.getFontSize(),this.pdf.setFontSize(U*k.scale),Z=this.lineWidth,this.lineWidth=Z*k.scale);var qt=this.autoPaging!=="text";if(qt||_t.y+_t.h<=rt){if(qt||_t.y>=st&&_t.x<=ht){var Nt=qt?k.text:this.pdf.splitTextToSize(k.text,k.maxWidth||ht-_t.x)[0],Xr=v([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-tr+st+this.ctx.prevPageLastElemOffset)[0],lr=qt&&(pt>Qe||pt<Ue)&&m.call(this);lr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$t,Dt,null).clip().discardPath()),this.pdf.text(Nt,Xr.x,Xr.y,{angle:k.angle,align:M,renderingMode:k.renderingMode}),lr&&this.pdf.restoreGraphicsState()}}else _t.y<rt&&(this.ctx.prevPageLastElemOffset+=rt-_t.y);k.scale>=.01&&(this.pdf.setFontSize(U),this.lineWidth=Z)}}else k.scale>=.01&&(U=this.pdf.internal.getFontSize(),this.pdf.setFontSize(U*k.scale),Z=this.lineWidth,this.lineWidth=Z*k.scale),this.pdf.text(k.text,ae.x+this.posX,ae.y+this.posY,{angle:k.angle,align:M,renderingMode:k.renderingMode,maxWidth:k.maxWidth}),k.scale>=.01&&(this.pdf.setFontSize(U),this.lineWidth=Z)},D=function(k,M,B,U){B=B||0,U=U||0,this.pdf.internal.out(r(k+B)+" "+n(M+U)+" l")},z=function(k,M,B){return this.pdf.lines(k,M,B,null,null)},Y=function(k,M,B,U,Z,pe,K,te){this.pdf.internal.out([t(a(B+k)),t(i(U+M)),t(a(Z+k)),t(i(pe+M)),t(a(K+k)),t(i(te+M)),"c"].join(" "))},se=function(k,M,B,U){for(var Z=2*Math.PI,pe=Math.PI/2;M>B;)M-=Z;var K=Math.abs(B-M);K<Z&&U&&(K=Z-K);for(var te=[],ae=U?-1:1,be=M;K>1e-5;){var ve=be+ae*Math.min(K,pe);te.push(ee.call(this,k,be,ve)),K-=Math.abs(ve-be),be=ve}return te},ee=function(k,M,B){var U=(B-M)/2,Z=k*Math.cos(U),pe=k*Math.sin(U),K=Z,te=-pe,ae=K*K+te*te,be=ae+K*Z+te*pe,ve=4/3*(Math.sqrt(2*ae*be)-be)/(K*pe-te*Z),Fe=K-ve*te,Me=te+ve*K,X=Fe,Ie=-Me,Re=U+M,Qe=Math.cos(Re),Ue=Math.sin(Re);return{x1:k*Math.cos(M),y1:k*Math.sin(M),x2:Fe*Qe-Me*Ue,y2:Fe*Ue+Me*Qe,x3:X*Qe-Ie*Ue,y3:X*Ue+Ie*Qe,x4:k*Math.cos(B),y4:k*Math.sin(B)}},J=function(k){return 180*k/Math.PI},oe=function(k,M,B,U,Z,pe){var K=k+.5*(B-k),te=M+.5*(U-M),ae=Z+.5*(B-Z),be=pe+.5*(U-pe),ve=Math.min(k,Z,K,ae),Fe=Math.max(k,Z,K,ae),Me=Math.min(M,pe,te,be),X=Math.max(M,pe,te,be);return new o(ve,Me,Fe-ve,X-Me)},we=function(k,M,B,U,Z,pe,K,te){var ae,be,ve,Fe,Me,X,Ie,Re,Qe,Ue,pt,st,dt,rt,Dt=B-k,ht=U-M,$t=Z-B,tr=pe-U,Tt=K-Z,_t=te-pe;for(be=0;be<41;be++)Qe=(Ie=(ve=k+(ae=be/40)*Dt)+ae*((Me=B+ae*$t)-ve))+ae*(Me+ae*(Z+ae*Tt-Me)-Ie),Ue=(Re=(Fe=M+ae*ht)+ae*((X=U+ae*tr)-Fe))+ae*(X+ae*(pe+ae*_t-X)-Re),be==0?(pt=Qe,st=Ue,dt=Qe,rt=Ue):(pt=Math.min(pt,Qe),st=Math.min(st,Ue),dt=Math.max(dt,Qe),rt=Math.max(rt,Ue));return new o(Math.round(pt),Math.round(st),Math.round(dt-pt),Math.round(rt-st))},xe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var k,M,B=(k=this.ctx.lineDash,M=this.ctx.lineDashOffset,JSON.stringify({lineDash:k,lineDashOffset:M}));this.prevLineDash!==B&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=B)}}})(Pt.API),function(e){var t=function(s){var o,c,u,d,f,p,h,g,m,x;for(c=[],u=0,d=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;d>u;u+=4)(f=(s.charCodeAt(u)<<24)+(s.charCodeAt(u+1)<<16)+(s.charCodeAt(u+2)<<8)+s.charCodeAt(u+3))!==0?(p=(f=((f=((f=((f=(f-(x=f%85))/85)-(m=f%85))/85)-(g=f%85))/85)-(h=f%85))/85)%85,c.push(p+33,h+33,g+33,m+33,x+33)):c.push(122);return function(y,v){for(var b=v;b>0;b--)y.pop()}(c,o.length),String.fromCharCode.apply(String,c)+"~>"},r=function(s){var o,c,u,d,f,p=String,h="length",g=255,m="charCodeAt",x="slice",y="replace";for(s[x](-2),s=s[x](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),u=[],d=0,f=(s+=o="uuuuu"[x](s[h]%5||5))[h];f>d;d+=5)c=52200625*(s[m](d)-33)+614125*(s[m](d+1)-33)+7225*(s[m](d+2)-33)+85*(s[m](d+3)-33)+(s[m](d+4)-33),u.push(g&c>>24,g&c>>16,g&c>>8,g&c);return function(v,b){for(var S=b;S>0;S--)v.pop()}(u,o[h]),p.fromCharCode.apply(p,u)},n=function(s){return s.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var c="",u=0;u<s.length;u+=2)c+=String.fromCharCode("0x"+(s[u]+s[u+1]));return c},i=function(s){for(var o=new Uint8Array(s.length),c=s.length;c--;)o[c]=s.charCodeAt(c);return(o=gj(o)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};e.processDataByFilters=function(s,o){var c=0,u=s||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),c=0;c<o.length;c+=1)switch(o[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=t(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(Pt.API),function(e){e.loadFile=function(t,r,n){return function(a,i,s){i=i!==!1,s=typeof s=="function"?s:function(){};var o=void 0;try{o=function(c,u,d){var f=new XMLHttpRequest,p=0,h=function(g){var m=g.length,x=[],y=String.fromCharCode;for(p=0;p<m;p+=1)x.push(y(255&g.charCodeAt(p)));return x.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(h(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return h(f.responseText)}(a,i,s)}catch{}return o}(t,r,n)},e.loadImageFile=e.loadFile}(Pt.API),function(e){function t(){return(Gt.html2canvas?Promise.resolve(Gt.html2canvas):dy(()=>import("./html2canvas.esm-CBrSDip1.js"),[],import.meta.url)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Gt.DOMPurify?Promise.resolve(Gt.DOMPurify):dy(()=>import("./purify.es-B9ZVCkUG.js"),[],import.meta.url)).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var c=Br(o);return c==="undefined"?"undefined":c==="string"||o instanceof String?"string":c==="number"||o instanceof Number?"number":c==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(o,c){var u=document.createElement(o);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},i=function o(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(o(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},s=function o(c){var u=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),u);return(d=d.setProgress(1,o,1,[o])).set(c)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,c){return o.__proto__=c||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),c){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:o,dompurify:u})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var g=d[h],m=g.src.find(function(x){return x.format==="truetype"});m&&u.addFont(m.url,g.ref.name,g.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,u.context2d.save(!0),c(this.prop.container,p)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(o,c):this.outputPdf(o,c)},s.prototype.outputPdf=function(o,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,c)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(n(o)!=="object")return this;var c=Object.keys(o||{}).map(function(u){if(u in s.template.prop)return function(){this.prop[u]=o[u]};switch(u){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[u]=o[u]}}},this);return this.then(function(){return this.thenList(c)})},s.prototype.get=function(o,c){return this.then(function(){var u=o in s.template.prop?this.prop[o]:this.opt[o];return c?c(u):u})},s.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(o=o||Pt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:c(o.inner.width,o.k),height:c(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,c,u,d){return o!=null&&(this.progress.val=o),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,c,u,d){return this.setProgress(o?this.progress.val+o:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(o,c){var u=this;return this.thenCore(o,c,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(p){return u.updateProgress(null,d),p}).then(d,f).then(function(p){return u.updateProgress(1),p})})},s.prototype.thenCore=function(o,c,u){u=u||Promise.prototype.then;var d=this;o&&(o=o.bind(d)),c&&(c=c.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:s.convert(Object.assign({},d),Promise.prototype),p=u.call(f,o,c);return s.convert(p,d.__proto__)},s.prototype.thenExternal=function(o,c){return Promise.prototype.then.call(this,o,c)},s.prototype.thenList=function(o){var c=this;return o.forEach(function(u){c=c.thenCore(u)}),c},s.prototype.catch=function(o){o&&(o=o.bind(this));var c=Promise.prototype.catch.call(this,o);return s.convert(c,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Pt.getPageSize=function(o,c,u){if(Br(o)==="object"){var d=o;o=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",o=(""+(o||"P")).toLowerCase();var f,p=(""+u).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var g,m=0,x=0;if(h.hasOwnProperty(p))m=h[p][1]/f,x=h[p][0]/f;else try{m=u[1],x=u[0]}catch{throw new Error("Invalid format: "+u)}if(o==="p"||o==="portrait")o="p",x>m&&(g=x,x=m,m=g);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",m>x&&(g=x,x=m,m=g)}return{width:x,height:m,unit:c,k:f,orientation:o}},e.html=function(o,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(X5):null;var u=new s(c);return c.worker?u:u.from(o).doCallback()}}(Pt.API),Pt.API.addJS=function(e){return q6=e,this.internal.events.subscribe("postPutResources",function(){Lx=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Lx+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),z6=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+q6+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Lx!==void 0&&z6!==void 0&&this.internal.out("/Names <</JavaScript "+Lx+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var s=a[i],o=n.exec(s);if(o!=null){var c=o[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(s)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(i=0;i<u;i++){var f=r.internal.newObject();d.push(f);var p=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var h=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<d.length;i++)r.internal.write("(page_"+(i+1)+")"+d[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+h+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,i){var s={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(s),s},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var s=n.children[i];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var o=this.count=this.count_r({count:0},s);if(o>0&&this.line("/Count "+o),s.options&&s.options.pageNumber){var c=r.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])}(Pt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,i,s,o){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=s||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(f){for(var p,h=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,m={width:0,height:0,numcomponents:1},x=4;x<g;x+=2){if(x+=h,t.indexOf(f.charCodeAt(x+1))!==-1){p=256*f.charCodeAt(x+5)+f.charCodeAt(x+6),m={width:256*f.charCodeAt(x+7)+f.charCodeAt(x+8),height:p,numcomponents:f.charCodeAt(x+9)};break}h=256*f.charCodeAt(x+2)+f.charCodeAt(x+3)}return m}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(Pt.API),Pt.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var a,i=qhe(e,{checkCrc:!0}),s=i.width,o=i.height,c=i.channels,u=i.palette,d=i.depth;a=u&&c===1?function(E){for(var T=E.width,L=E.height,O=E.data,I=E.palette,D=E.depth,z=!1,Y=[],se=[],ee=void 0,J=!1,oe=0,we=0;we<I.length;we++){var xe=GO(I[we],4),k=xe[0],M=xe[1],B=xe[2],U=xe[3];Y.push(k,M,B),U!=null&&(U===0?(oe++,se.length<1&&se.push(we)):U<255&&(J=!0))}if(J||oe>1){z=!0,se=void 0;var Z=T*L;ee=new Uint8Array(Z);for(var pe=new DataView(O.buffer),K=0;K<Z;K++){var te=J5(pe,K,D),ae=GO(I[te],4)[3];ee[K]=ae}}else oe===0&&(se=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:z?8:void 0,colorBytes:O,alphaBytes:ee,needSMask:z,palette:Y,mask:se}}(i):c===2||c===4?function(E){for(var T=E.data,L=E.width,O=E.height,I=E.channels,D=E.depth,z=I===2?"DeviceGray":"DeviceRGB",Y=I-1,se=L*O,ee=Y,J=se*ee,oe=1*se,we=Math.ceil(J*D/8),xe=Math.ceil(oe*D/8),k=new Uint8Array(we),M=new Uint8Array(xe),B=new DataView(T.buffer),U=new DataView(k.buffer),Z=new DataView(M.buffer),pe=!1,K=0;K<se;K++){for(var te=K*I,ae=0;ae<ee;ae++)Q6(U,J5(B,te+ae,D),K*ee+ae,D);var be=J5(B,te+ee,D);be<(1<<D)-1&&(pe=!0),Q6(Z,be,1*K,D)}return{colorSpace:z,colorsPerPixel:Y,sMaskBitsPerComponent:pe?D:void 0,colorBytes:k,alphaBytes:M,needSMask:pe}}(i):function(E){var T=E.data,L=E.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:L,colorsPerPixel:L==="DeviceGray"?1:3,colorBytes:T instanceof Uint16Array?function(O){for(var I=O.length,D=new Uint8Array(2*I),z=new DataView(D.buffer,D.byteOffset,D.byteLength),Y=0;Y<I;Y++)z.setUint16(2*Y,O[Y],!1);return D}(T):T,needSMask:!1}}(i);var f,p,h,g=a,m=g.colorSpace,x=g.colorsPerPixel,y=g.sMaskBitsPerComponent,v=g.colorBytes,b=g.alphaBytes,S=g.needSMask,_=g.palette,A=g.mask,j=null;return n!==Pt.API.image_compression.NONE&&typeof gj=="function"?(j=function(E){var T;switch(E){case Pt.API.image_compression.FAST:T=11;break;case Pt.API.image_compression.MEDIUM:T=13;break;case Pt.API.image_compression.SLOW:T=14;break;default:T=12}return T}(n),f=this.decode.FLATE_DECODE,p="/Predictor ".concat(j," /Colors ").concat(x," /BitsPerComponent ").concat(d," /Columns ").concat(s),e=G6(v,Math.ceil(s*x*d/8),x,d,n),S&&(h=G6(b,Math.ceil(s*y/8),1,y,n))):(f=void 0,p=void 0,e=v,S&&(h=b)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:r,data:e,index:t,filter:f,decodeParameters:p,transparency:A,palette:_,sMask:h,predictor:j,width:s,height:o,bitsPerComponent:d,sMaskBitsPerComponent:y,colorSpace:m}}},function(e){e.processGIF89A=function(t,r,n,a){var i=new u0e(t),s=i.width,o=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:s,height:o},d=new Q5(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(Pt.API),_o.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},_o.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Qr.log("bit decode error:"+r)}},_o.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var c=this.palette[i>>7-o&1];this.data[s+4*o]=c.blue,this.data[s+4*o+1]=c.green,this.data[s+4*o+2]=c.red,this.data[s+4*o+3]=255}r!==0&&(this.pos+=4-r)}},_o.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+2*a*4,o=i>>4,c=15&i,u=this.palette[o];if(this.data[s]=u.blue,this.data[s+1]=u.green,this.data[s+2]=u.red,this.data[s+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[s+4]=u.blue,this.data[s+4+1]=u.green,this.data[s+4+2]=u.red,this.data[s+4+3]=255}t!==0&&(this.pos+=4-t)}},_o.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var s=this.palette[a];this.data[i]=s.red,this.data[i+1]=s.green,this.data[i+2]=s.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},_o.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(i&t)/t*255|0,o=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,u=i>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=o,this.data[d+2]=s,this.data[d+3]=u}this.pos+=e}},_o.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,c=(s>>5&r)/r*255|0,u=(s>>11)/t*255|0,d=a*this.width*4+4*i;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},_o.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;this.data[s]=i,this.data[s+1]=a,this.data[s+2]=n,this.data[s+3]=255}this.pos+=this.width%4}},_o.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=s}},_o.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var i=new _o(t,!1),s=i.width,o=i.height,c={data:i.getData(),width:s,height:o},u=new Q5(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(Pt.API),eP.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var i=new eP(t),s=i.width,o=i.height,c={data:i.getData(),width:s,height:o},u=new Q5(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(Pt.API),Pt.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,i=new Uint8Array(a/4*3),s=new Uint8Array(a/4),o=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],p=n[u+2],h=n[u+3];i[o++]=d,i[o++]=f,i[o++]=p,s[c++]=h}var g=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Pt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},mh=Pt.API,Ix=mh.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),s=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,c=o.fof?o.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,p=0,h=e.length,g=0,m=o[0]||c,x=[];for(r=0;r<h;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?x.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+s*(1e3/i)||0)/1e3):(p=f&&Br(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,x.push((o[n]||m)/c+p)),g=n;return x},H6=mh.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return mh.processArabic&&(e=mh.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:Ix.apply(this,arguments).reduce(function(i,s){return i+s},0)},W6=function(e,t,r,n){for(var a=[],i=0,s=e.length,o=0;i!==s&&o+t[i]<r;)o+=t[i],i++;a.push(e.slice(0,i));var c=i;for(o=0;i!==s;)o+t[i]>n&&(a.push(e.slice(c,i)),o=0,c=i),o+=t[i],i++;return c!==i&&a.push(e.slice(c,i)),a},V6=function(e,t,r){r||(r={});var n,a,i,s,o,c,u,d=[],f=[d],p=r.textIndent||0,h=0,g=0,m=e.split(" "),x=Ix.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?m[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),v=[];m.map(function(S){(S=S.split(/\s*\n/)).length>1?v=v.concat(S.map(function(_,A){return(A&&_.length?`
`:"")+_})):v.push(S[0])}),m=v,c=H6.apply(this,[y,r])}for(i=0,s=m.length;i<s;i++){var b=0;if(n=m[i],c&&n[0]==`
`&&(n=n.substr(1),b=1),p+h+(g=(a=Ix.apply(this,[n,r])).reduce(function(S,_){return S+_},0))>t||b){if(g>t){for(o=W6.apply(this,[n,a,t-(p+h),t]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);g=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(S,_){return S+_},0)}else d=[n];f.push(d),p=g+c,h=x}else d.push(n),p+=h+g,h=x}return u=c?function(S,_){return(_?y:"")+S.join(" ")}:function(S){return S.join(" ")},f.map(u)},mh.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),p="Unicode";return f.metadata[p]?{widths:f.metadata[p].widths||{0:1},kerning:f.metadata[p].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var s=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var o,c,u=[];for(o=0,c=n.length;o<c;o++)u=u.concat(V6.apply(this,[n[o],s,i]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},i=0;i<16;i++)n[r[i]]=t[i],a[t[i]]=r[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=e.__fontmetrics__.compress=function(p){var h,g,m,x,y=["{"];for(var v in p){if(h=p[v],isNaN(parseInt(v,10))?g="'"+v+"'":(v=parseInt(v,10),g=(g=s(v).slice(2)).slice(0,-1)+a[g.slice(-1)]),typeof h=="number")h<0?(m=s(h).slice(3),x="-"):(m=s(h).slice(2),x=""),m=x+m.slice(0,-1)+a[m.slice(-1)];else{if(Br(h)!=="object")throw new Error("Don't know what to do with value type "+Br(h)+".");m=o(h)}y.push(g+m)}return y.push("}"),y.join("")},c=e.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,g,m,x,y={},v=1,b=y,S=[],_="",A="",j=p.length-1,E=1;E<j;E+=1)(x=p[E])=="'"?h?(m=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(S.push([b,m]),b={},m=void 0):x=="}"?((g=S.pop())[0][g[1]]=b,m=void 0,b=g[0]):x=="-"?v=-1:m===void 0?n.hasOwnProperty(x)?(_+=n[x],m=parseInt(_,16)*v,v=1,_=""):_+=x:n.hasOwnProperty(x)?(A+=n[x],b[m]=parseInt(A,16)*v,v=1,m=void 0,A=""):A+=x;return y},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(p){var h=p.font,g=f.Unicode[h.postScriptName];g&&(h.metadata.Unicode={},h.metadata.Unicode.widths=g.widths,h.metadata.Unicode.kerning=g.kerning);var m=d.Unicode[h.postScriptName];m&&(h.metadata.Unicode.encoding=m,h.encoding=m.codePages[0])}])}(Pt.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=r.charCodeAt(i);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(s,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(hy(o)),s.metadata=e.API.TTFFont.open(o),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(a,n)}}])}(Pt),Pt.API.addSvgAsImage=function(e,t,r,n,a,i,s,o){if(isNaN(t)||isNaN(r))throw Qr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw Qr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(Gt.canvg?Promise.resolve(Gt.canvg):dy(()=>import("./index.es-DQmoDRv8.js"),[],import.meta.url)).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(u,e,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(d)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),t,r,n,a,s,o)})},Pt.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},Pt.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,i,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),c=[],u=0,d=0,f=0;function p(g,m){var x,y=!1;for(x=0;x<g.length;x+=1)g[x]===m&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var h=o.length;for(f=0;f<h;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(Br(e)==="object"){for(a in e)if(i=e[a],p(o,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&p(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(u=0;u<i.length;u+=1)if(n=!0,i[u].length===1&&typeof i[u][0]=="number")c.push(String(i[u]-1));else if(i[u].length>1){for(d=0;d<i[u].length;d+=1)typeof i[u][d]!="number"&&(n=!1);n===!0&&c.push([i[u][0]-1,i[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,m=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?m.push("/"+g+" /"+r[g].value):m.push("/"+g+" "+r[g].value));m.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+m.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+s.length+o.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+i+s+o+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Pt.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,s){for(var o,c=s.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,p=i.length;f<p;++f){if(o=s.metadata.characterToGlyph(i.charCodeAt(f)),s.metadata.glyIdsUsed.push(o),s.metadata.toUnicode[o]=i.charCodeAt(f),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(s.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},n=function(i){var s,o,c,u,d,f,p;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,p=(o=Object.keys(i).sort(function(h,g){return h-g})).length;f<p;f++)s=o[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[s]!==void 0&&i[s]!==null&&typeof i[s].toString=="function"&&(u=("0000"+i[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),c.push("<"+s+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(s){var o=s.font,c=s.out,u=s.newObject,d=s.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),h="",g=0;g<p.length;g++)h+=String.fromCharCode(p[g]);var m=u();d({data:h,addLength1:!0,objectId:m}),c("endobj");var x=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Sh(o.fontName)),c("/FontFile2 "+m+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var v=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Sh(o.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+x+" 0 R"),c("/BaseFont /"+Sh(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+v+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(s){var o=s.font,c=s.out,u=s.newObject,d=s.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,p="",h=0;h<f.length;h++)p+=String.fromCharCode(f[h]);var g=u();d({data:p,addLength1:!0,objectId:g}),c("endobj");var m=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:m}),c("endobj");var x=u();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+Sh(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=u();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+m+" 0 R/BaseFont/"+Sh(o.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(i)}]);var a=function(i){var s,o=i.text||"",c=i.x,u=i.y,d=i.options||{},f=i.mutex||{},p=f.pdfEscape,h=f.activeFontKey,g=f.fonts,m=h,x="",y=0,v="",b=g[m].encoding;if(g[m].encoding!=="Identity-H")return{text:o,x:c,y:u,options:d,mutex:f};for(v=o,m=h,Array.isArray(o)&&(v=o[0]),y=0;y<v.length;y+=1)g[m].metadata.hasOwnProperty("cmap")&&(s=g[m].metadata.cmap.unicode.codeMap[v[y].charCodeAt(0)]),s||v[y].charCodeAt(0)<256&&g[m].metadata.hasOwnProperty("Unicode")?x+=v[y]:x+="";var S="";return parseInt(m.slice(1))<14||b==="WinAnsiEncoding"?S=p(x,m).split("").map(function(_){return _.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(S=r(x,g[m])),f.isHex=!0,{text:S,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(i){var s=i.text||"",o=[],c={text:s,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(s)){var u=0;for(u=0;u<s.length;u+=1)Array.isArray(s[u])&&s[u].length===3?o.push([a(Object.assign({},c,{text:s[u][0]})).text,s[u][1],s[u][2]]):o.push(a(Object.assign({},c,{text:s[u]})).text);i.text=o}else i.text=a(Object.assign({},c,{text:s})).text}])}(Pt),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Pt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,i,s,o,c,u,d,f=t,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},m={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),v=!1,b=0;this.__bidiEngine__={};var S=function(O){var I=O.charCodeAt(),D=I>>8,z=m[D];return z!==void 0?f[256*z+(255&I)]:D===252||D===253?"AL":y.test(D)?"L":D===8?"R":"N"},_=function(O){for(var I,D=0;D<O.length;D++){if((I=S(O.charAt(D)))==="L")return!1;if(I==="R")return!0}return!1},A=function(O,I,D,z){var Y,se,ee,J,oe=I[z];switch(oe){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":v=!1;break;case"N":case"AN":break;case"EN":v&&(oe="AN");break;case"AL":v=!0,oe="R";break;case"WS":case"BN":oe="N";break;case"CS":z<1||z+1>=I.length||(Y=D[z-1])!=="EN"&&Y!=="AN"||(se=I[z+1])!=="EN"&&se!=="AN"?oe="N":v&&(se="AN"),oe=se===Y?se:"N";break;case"ES":oe=(Y=z>0?D[z-1]:"B")==="EN"&&z+1<I.length&&I[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&D[z-1]==="EN"){oe="EN";break}if(v){oe="N";break}for(ee=z+1,J=I.length;ee<J&&I[ee]==="ET";)ee++;oe=ee<J&&I[ee]==="EN"?"EN":"N";break;case"NSM":if(s&&!o){for(J=I.length,ee=z+1;ee<J&&I[ee]==="NSM";)ee++;if(ee<J){var we=O[z],xe=we>=1425&&we<=2303||we===64286;if(Y=I[ee],xe&&(Y==="R"||Y==="AL")){oe="R";break}}}oe=z<1||(Y=I[z-1])==="B"?"N":D[z-1];break;case"B":v=!1,a=!0,oe=b;break;case"S":i=!0,oe="N"}return oe},j=function(O,I,D){var z=O.split("");return D&&E(z,D,{hiLevel:b}),z.reverse(),I&&I.reverse(),z.join("")},E=function(O,I,D){var z,Y,se,ee,J,oe=-1,we=O.length,xe=0,k=[],M=b?h:p,B=[];for(v=!1,a=!1,i=!1,Y=0;Y<we;Y++)B[Y]=S(O[Y]);for(se=0;se<we;se++){if(J=xe,k[se]=A(O,B,k,se),z=240&(xe=M[J][g[k[se]]]),xe&=15,I[se]=ee=M[xe][5],z>0)if(z===16){for(Y=oe;Y<se;Y++)I[Y]=1;oe=-1}else oe=-1;if(M[xe][6])oe===-1&&(oe=se);else if(oe>-1){for(Y=oe;Y<se;Y++)I[Y]=ee;oe=-1}B[se]==="B"&&(I[se]=0),D.hiLevel|=ee}i&&function(U,Z,pe){for(var K=0;K<pe;K++)if(U[K]==="S"){Z[K]=b;for(var te=K-1;te>=0&&U[te]==="WS";te--)Z[te]=b}}(B,I,we)},T=function(O,I,D,z,Y){if(!(Y.hiLevel<O)){if(O===1&&b===1&&!a)return I.reverse(),void(D&&D.reverse());for(var se,ee,J,oe,we=I.length,xe=0;xe<we;){if(z[xe]>=O){for(J=xe+1;J<we&&z[J]>=O;)J++;for(oe=xe,ee=J-1;oe<ee;oe++,ee--)se=I[oe],I[oe]=I[ee],I[ee]=se,D&&(se=D[oe],D[oe]=D[ee],D[ee]=se);xe=J}xe++}}},L=function(O,I,D){var z=O.split(""),Y={hiLevel:b};return D||(D=[]),E(z,D,Y),function(se,ee,J){if(J.hiLevel!==0&&d)for(var oe,we=0;we<se.length;we++)ee[we]===1&&(oe=x.indexOf(se[we]))>=0&&(se[we]=x[oe+1])}(z,D,Y),T(2,z,I,D,Y),T(1,z,I,D,Y),z.join("")};return this.__bidiEngine__.doBidiReorder=function(O,I,D){if(function(Y,se){if(se)for(var ee=0;ee<Y.length;ee++)se[ee]=ee;o===void 0&&(o=_(Y)),u===void 0&&(u=_(Y))}(O,I),s||!c||u)if(s&&c&&o^u)b=o?1:0,O=j(O,I,D);else if(!s&&c&&u)b=o?1:0,O=L(O,I,D),O=j(O,I);else if(!s||o||c||u){if(s&&!c&&o^u)O=j(O,I),o?(b=0,O=L(O,I,D)):(b=1,O=L(O,I,D),O=j(O,I));else if(s&&o&&!c&&u)b=1,O=L(O,I,D),O=j(O,I);else if(!s&&!c&&o^u){var z=d;o?(b=1,O=L(O,I,D),b=0,d=!1,O=L(O,I,D),d=z):(b=0,O=L(O,I,D),O=j(O,I),b=1,d=!1,O=L(O,I,D),d=z,O=j(O,I))}}else b=0,O=L(O,I,D);else b=o?1:0,O=L(O,I,D);return O},this.__bidiEngine__.setOptions=function(O){O&&(s=O.isInputVisual,c=O.isOutputVisual,o=O.isInputRtl,u=O.isOutputRtl,d=O.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var s=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(s=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?s.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):s.push([r.doBidiReorder(a[o])]);n.text=s}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Pt),Pt.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Ku(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new j0e(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new d0e(this.contents),this.head=new h0e(this),this.name=new x0e(this),this.cmap=new SB(this),this.toUnicode={},this.hhea=new p0e(this),this.maxp=new y0e(this),this.hmtx=new b0e(this),this.post=new g0e(this),this.os2=new m0e(this),this.loca=new N0e(this),this.glyf=new w0e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,o,c,u;for(u=[],s=0,o=(c=this.bbox).length;s<o;s++)t=c[s],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,i,s,o;for(s=0,i=0,o=(t=""+t).length;0<=o?i<o:i>o;i=0<=o?++i:--i)a=t.charCodeAt(i),s+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return s*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Ho,Ku=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,i,s,o,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^s)+256*(255^o)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*i+65536*s+256*o+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,i;for(i=[],n=0,a=t.length;n<a;n++)r=t[n],i.push(this.writeByte(r));return i},e}(),d0e=function(){var e;function t(r){var n,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,i,s,o,c,u,d,f,p,h,g,m;for(m in h=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(h)/c),s=Math.floor(f/c),d=16*h-f,(a=new Ku).writeInt(this.scalarType),a.writeShort(h),a.writeShort(f),a.writeShort(s),a.writeShort(d),i=16*h,u=a.pos+i,o=null,g=[],r)for(p=r[m],a.writeString(m),a.writeInt(e(p)),a.writeInt(u),a.writeInt(p.length),g=g.concat(p),m==="head"&&(o=u),u+=p.length;u%4;)g.push(0),u++;return a.write(g),n=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(n),a.data},e=function(r){var n,a,i,s;for(r=NB.call(r);r.length%4;)r.push(0);for(i=new Ku(r),a=0,n=0,s=r.length;n<s;n=n+=4)a+=i.readUInt32();return 4294967295&a},t}(),f0e={}.hasOwnProperty,_l=function(e,t){for(var r in t)f0e.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Ho=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var h0e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return _l(e,Ho),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Ku).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),tP=function(){function e(t,r){var n,a,i,s,o,c,u,d,f,p,h,g,m,x,y,v,b;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(h=t.readUInt16(),p=h/2,t.pos+=6,i=function(){var S,_;for(_=[],c=S=0;0<=p?S<p:S>p;c=0<=p?++S:--S)_.push(t.readUInt16());return _}(),t.pos+=2,m=function(){var S,_;for(_=[],c=S=0;0<=p?S<p:S>p;c=0<=p?++S:--S)_.push(t.readUInt16());return _}(),u=function(){var S,_;for(_=[],c=S=0;0<=p?S<p:S>p;c=0<=p?++S:--S)_.push(t.readUInt16());return _}(),d=function(){var S,_;for(_=[],c=S=0;0<=p?S<p:S>p;c=0<=p?++S:--S)_.push(t.readUInt16());return _}(),a=(this.length-t.pos+this.offset)/2,o=function(){var S,_;for(_=[],c=S=0;0<=a?S<a:S>a;c=0<=a?++S:--S)_.push(t.readUInt16());return _}(),c=y=0,b=i.length;y<b;c=++y)for(x=i[c],n=v=g=m[c];g<=x?v<=x:v>=x;n=g<=x?++v:--v)d[c]===0?s=n+u[c]:(s=o[d[c]/2+(n-g)-(p-c)]||0)!==0&&(s+=u[c]),this.codeMap[n]=65535&s}t.pos=f}return e.encode=function(t,r){var n,a,i,s,o,c,u,d,f,p,h,g,m,x,y,v,b,S,_,A,j,E,T,L,O,I,D,z,Y,se,ee,J,oe,we,xe,k,M,B,U,Z,pe,K,te,ae,be,ve;switch(z=new Ku,s=Object.keys(t).sort(function(Fe,Me){return Fe-Me}),r){case"macroman":for(m=0,x=function(){var Fe=[];for(g=0;g<256;++g)Fe.push(0);return Fe}(),v={0:0},i={},Y=0,oe=s.length;Y<oe;Y++)v[te=t[a=s[Y]]]==null&&(v[te]=++m),i[a]={old:t[a],new:v[t[a]]},x[a]=v[t[a]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(x),{charMap:i,subtable:z.data,maxGlyphID:m+1};case"unicode":for(I=[],f=[],b=0,v={},n={},y=u=null,se=0,we=s.length;se<we;se++)v[_=t[a=s[se]]]==null&&(v[_]=++b),n[a]={old:_,new:v[_]},o=v[_]-a,y!=null&&o===u||(y&&f.push(y),I.push(a),u=o),y=a;for(y&&f.push(y),f.push(65535),I.push(65535),L=2*(T=I.length),E=2*Math.pow(Math.log(T)/Math.LN2,2),p=Math.log(E/2)/Math.LN2,j=2*T-E,c=[],A=[],h=[],g=ee=0,xe=I.length;ee<xe;g=++ee){if(O=I[g],d=f[g],O===65535){c.push(0),A.push(0);break}if(O-(D=n[O].new)>=32768)for(c.push(0),A.push(2*(h.length+T-g)),a=J=O;O<=d?J<=d:J>=d;a=O<=d?++J:--J)h.push(n[a].new);else c.push(D-O),A.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*T+2*h.length),z.writeUInt16(0),z.writeUInt16(L),z.writeUInt16(E),z.writeUInt16(p),z.writeUInt16(j),pe=0,k=f.length;pe<k;pe++)a=f[pe],z.writeUInt16(a);for(z.writeUInt16(0),K=0,M=I.length;K<M;K++)a=I[K],z.writeUInt16(a);for(ae=0,B=c.length;ae<B;ae++)o=c[ae],z.writeUInt16(o);for(be=0,U=A.length;be<U;be++)S=A[be],z.writeUInt16(S);for(ve=0,Z=h.length;ve<Z;ve++)m=h[ve],z.writeUInt16(m);return{charMap:n,subtable:z.data,maxGlyphID:b+1}}},e}(),SB=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return _l(e,Ho),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new tP(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,a;return r==null&&(r="macroman"),n=tP.encode(t,r),(a=new Ku).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},e}(),p0e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return _l(e,Ho),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),m0e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return _l(e,Ho),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),g0e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return _l(e,Ho),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var s,o,c;for(c=[],i=s=0,o=this.file.maxp.numGlyphs;0<=o?s<o:s>o;i=0<=o?++s:--s)c.push(t.readUInt32());return c}).call(this)}},e}(),v0e=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},x0e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return _l(e,Ho),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,a,i,s,o,c,u,d,f,p;for(t.pos=this.offset,t.readShort(),r=t.readShort(),o=t.readShort(),n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(c={},i=d=0,f=n.length;d<f;i=++d)a=n[i],t.pos=a.offset,u=t.readString(a.length),s=new v0e(u,a),c[p=a.nameID]==null&&(c[p]=[]),c[a.nameID].push(s);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),y0e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return _l(e,Ho),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),b0e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return _l(e,Ho),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,a,i,s,o,c;for(t.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)d.push(t.readInt16());return d}(),this.widths=(function(){var u,d,f,p;for(p=[],u=0,d=(f=this.metrics).length;u<d;u++)i=f[u],p.push(i.advance);return p}).call(this),n=this.widths[this.widths.length-1],c=[],r=s=0;0<=a?s<a:s>a;r=0<=a?++s:--s)c.push(this.widths.push(n));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),NB=[].slice,w0e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return _l(e,Ho),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,a,i,s,o,c,u,d,f;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,n=i.indexOf(t),(a=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,s=(o=new Ku(r.read(a))).readShort(),u=o.readShort(),f=o.readShort(),c=o.readShort(),d=o.readShort(),this.cache[t]=s===-1?new S0e(o,u,f,c,d):new _0e(o,s,u,f,c,d),this.cache[t]))},e.prototype.encode=function(t,r,n){var a,i,s,o,c;for(s=[],i=[],o=0,c=r.length;o<c;o++)a=t[r[o]],i.push(s.length),a&&(s=s.concat(a.encode(n)));return i.push(s.length),{table:s,offsets:i}},e}(),_0e=function(){function e(t,r,n,a,i,s){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=s,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),S0e=function(){function e(t,r,n,a,i){var s,o;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Ku(NB.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),N0e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return _l(e,Ho),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),a=0,i=0,s=0;s<n.length;++s)if(n[s]=a,i<r.length&&r[i]==s){++i,n[s]=a;var o=this.offsets[s],c=this.offsets[s+1]-o;c>0&&(a+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},e}(),j0e=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,i;for(r in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,i,s,o,c;for(a={},s=0,o=t.length;s<o;s++)a[i=t[s]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(n=a[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],a[i]=n;return a},e.prototype.encode=function(t,r){var n,a,i,s,o,c,u,d,f,p,h,g,m,x,y;for(a in n=SB.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(t),h={0:0},y=n.charMap)h[(c=y[a]).old]=c.new;for(g in p=n.maxGlyphID,s)g in h||(h[g]=p++);return d=function(v){var b,S;for(b in S={},v)S[v[b]]=b;return S}(h),f=Object.keys(d).sort(function(v,b){return v-b}),m=function(){var v,b,S;for(S=[],v=0,b=f.length;v<b;v++)o=f[v],S.push(d[o]);return S}(),i=this.font.glyf.encode(s,m,h),u=this.font.loca.encode(i.offsets,m),x={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},e}();Pt.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,i,s;if(Array.isArray(r))return"["+function(){var o,c,u;for(u=[],o=0,c=r.length;o<c;o++)n=r[o],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)s=r[a],i.push("/"+a+" "+t.convert(s));return i.push(">>"),i.join(`
`)}return""+r},t}();function jB(e,t,r,n,a){n=n||{};var i=1.15,s=a.internal.scaleFactor,o=a.internal.getFontSize()/s,c=a.getLineHeightFactor?a.getLineHeightFactor():i,u=o*c,d=/\r\n|\r|\n/g,f="",p=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,p=f.length||1),r+=o*(2-i),n.valign==="middle"?r-=p/2*u:n.valign==="bottom"&&(r-=p*u),n.halign==="center"||n.halign==="right"){var h=o;if(n.halign==="center"&&(h*=.5),f&&p>=1){for(var g=0;g<f.length;g++)a.text(f[g],t-a.getStringUnitWidth(f[g])*h,r),r+=u;return a}t-=a.getStringUnitWidth(e)*h}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var rP={},o0=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:rP=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,i;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var s=this.jsPDFDocument.internal.getFont(),o=s.fontStyle,c=s.fontName;if(t.font&&(c=t.font),t.fontStyle){o=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(c,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(i=this.jsPDFDocument).setDrawColor.apply(i,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,i){return this.jsPDFDocument.rect(t,r,n,a,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return rP||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),Nj=function(e,t){return Nj=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},Nj(e,t)};function AB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Nj(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var EB=function(e){AB(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function A0e(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function E0e(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function _b(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(i){return r.getTextWidth(i)}).reduce(function(i,s){return Math.max(i,s)},0);return a}function TB(e,t,r,n){var a=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:i});var s=CB(a,!1);s&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,s)}function CB(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function cw(e,t){var r,n,a,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function kB(e,t){var r=cw(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function T0e(e,t,r,n,a){var i={},s=1.3333333333333333,o=Z5(t,function(b){return a.getComputedStyle(b).backgroundColor});o!=null&&(i.fillColor=o);var c=Z5(t,function(b){return a.getComputedStyle(b).color});c!=null&&(i.textColor=c);var u=k0e(n,r);u&&(i.cellPadding=u);var d="borderTopColor",f=s*r,p=n.borderTopWidth;if(n.borderBottomWidth===p&&n.borderRightWidth===p&&n.borderLeftWidth===p){var h=(parseFloat(p)||0)/f;h&&(i.lineWidth=h)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},i.lineWidth.top||(i.lineWidth.right?d="borderRightColor":i.lineWidth.bottom?d="borderBottomColor":i.lineWidth.left&&(d="borderLeftColor"));var g=Z5(t,function(b){return a.getComputedStyle(b)[d]});g!=null&&(i.lineColor=g);var m=["left","right","center","justify"];m.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),m=["middle","bottom","top"],m.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var x=parseInt(n.fontSize||"");isNaN(x)||(i.fontSize=x/s);var y=C0e(n);y&&(i.fontStyle=y);var v=(n.fontFamily||"").toLowerCase();return e.indexOf(v)!==-1&&(i.font=v),i}function C0e(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function Z5(e,t){var r=OB(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function OB(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:OB(e.parentElement,t):r}function k0e(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(o){return parseInt(o||"0")/n}),s=cw(i,0);return a>s.top&&(s.top=a),a>s.bottom&&(s.bottom=a),s}function PB(e,t,r,n,a){var i,s;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof t=="string"?o=r.document.querySelector(t):o=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],p=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:p};for(var h=0;h<o.rows.length;h++){var g=o.rows[h],m=(s=(i=g==null?void 0:g.parentElement)===null||i===void 0?void 0:i.tagName)===null||s===void 0?void 0:s.toLowerCase(),x=O0e(c,u,r,g,n,a);x&&(m==="thead"?d.push(x):m==="tfoot"?p.push(x):f.push(x))}return{head:d,body:f,foot:p}}function O0e(e,t,r,n,a,i){for(var s=new EB(n),o=0;o<n.cells.length;o++){var c=n.cells[o],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;i&&(d=T0e(e,c,t,u,r)),s.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:P0e(c)})}}var f=r.getComputedStyle(n);if(s.length>0&&(a||f.display!=="none"))return s}function P0e(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function L0e(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var i=a[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function ec(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),s=1;s<arguments.length;s++){var o=arguments[s];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(i[c]=o[c])}return i}function LB(e,t){var r=new o0(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();L0e(a,n,t);var i=ec({},a,n,t),s;typeof window<"u"&&(s=window);var o=I0e(a,n,t),c=R0e(a,n,t),u=D0e(r,i),d=F0e(r,i,s);return{id:t.tableId,content:d,hooks:c,styles:o,settings:u}}function I0e(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=ec({},u,d,f)}else{var p=[e,t,r],h=p.map(function(g){return g[c]||{}});n[c]=ec({},h[0],h[1],h[2])}},i=0,s=Object.keys(n);i<s.length;i++){var o=s[i];a(o)}return n}function R0e(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,s=n;i<s.length;i++){var o=s[i];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function D0e(e,t){var r,n,a,i,s,o,c,u,d,f,p,h,g=cw(t.margin,40/e.scaleFactor()),m=(r=M0e(e,t.startY))!==null&&r!==void 0?r:g.top,x;t.showFoot===!0?x="everyPage":t.showFoot===!1?x="never":x=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var v=(i=t.useCss)!==null&&i!==void 0?i:!1,b=t.theme||(v?"plain":"striped"),S=!!t.horizontalPageBreak,_=(s=t.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:v,theme:b,startY:m,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:x,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(p=t.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:S,horizontalPageBreakRepeat:_,horizontalPageBreakBehaviour:(h=t.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function M0e(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),i=!1;if(r&&r.startPageNumber){var s=r.startPageNumber+r.pageNumber-1;i=s===a}return typeof t=="number"?t:(t==null||t===!1)&&i&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function F0e(e,t,r){var n=t.head||[],a=t.body||[],i=t.foot||[];if(t.html){var s=t.includeHiddenHtml;if(r){var o=PB(e,t.html,r,s,t.useCss)||{};n=o.head||n,a=o.body||n,i=o.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||$0e(n,a,i);return{columns:c,head:n,body:a,foot:i}}function $0e(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var s=1,o;Array.isArray(n)?o=n[parseInt(i)]:o=n[i],typeof o=="object"&&!Array.isArray(o)&&(s=(o==null?void 0:o.colSpan)||1);for(var c=0;c<s;c++){var u=void 0;Array.isArray(n)?u=a.length:u=i+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var jj=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),B0e=function(e){AB(t,e);function t(r,n,a,i,s,o){var c=e.call(this,r,n,o)||this;return c.cell=a,c.row=i,c.column=s,c.section=i.section,c}return t}(jj),U0e=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,i,s){for(var o=0,c=r;o<c.length;o++){var u=c[o],d=new B0e(t,this,n,a,i,s),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var i=a[n];i(new jj(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var i=a[n];i(new jj(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,i){return a+i.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),IB=function(){function e(t,r,n,a,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof EB&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var i;return Math.max(n,((i=r.cells[a.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,i){var s=n.cells[i.index];if(!s)return 0;var o=r.getLineHeight(s.styles.fontSize),c=s.padding("vertical"),u=c+o;return u>a?u:a},0)},e}(),RB=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var s=i!=null?""+i:"",o=/\r\n|\r|\n/g;this.text=s.split(o)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,i=n*a+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=cw(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),z0e=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var i=a[n],s=i.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(r=Math.max(r,s.styles.cellWidth))}return r},e}();function q0e(e,t){H0e(e,t);var r=[],n=0;t.columns.forEach(function(i){var s=i.getMaxCustomCellWidth(t);s?i.width=s:(i.width=i.wrappedWidth,r.push(i)),n+=i.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=Aj(r,a,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),a&&(a=Aj(r,a,function(i){return i.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),V0e(t),G0e(t,e),W0e(t)}function H0e(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=kB(e,t);t.allRows().forEach(function(i){for(var s=0,o=t.columns;s<o.length;s++){var c=o[s],u=i.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,i,c,null);var f=u.padding("horizontal");u.contentWidth=_b(u.text,u.styles,e)+f;var p=_b(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=p+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var h=10/r;u.minWidth=u.styles.minCellWidth||h,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(i){for(var s=0,o=t.columns;s<o.length;s++){var c=o[s],u=i.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function Aj(e,t,r){for(var n=t,a=e.reduce(function(h,g){return h+g.wrappedWidth},0),i=0;i<e.length;i++){var s=e[i],o=s.wrappedWidth/a,c=n*o,u=s.width+c,d=r(s),f=u<d?d:u;t-=f-s.width,s.width=f}if(t=Math.round(t*1e10)/1e10,t){var p=e.filter(function(h){return t<0?h.width>r(h):!0});p.length&&(t=Aj(p,t,r))}return t}function W0e(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var i=n[a],s=0,o=e.columns;s<o.length;s++){var c=o[s],u=t[c.index];if(r>1)r--,delete i.cells[c.index];else if(u)u.cell.height+=i.height,r=u.cell.colSpan,delete i.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=i.cells[c.index];if(!d)continue;if(d.height=i.height,d.rowSpan>1){var f=n.length-a,p=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:p,row:i}}}}}function V0e(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,i=0,s=0,o=0;o<e.columns.length;o++){var c=e.columns[o];if(s-=1,s>1&&e.columns[o+1])i+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+i}else{var u=n.cells[c.index];if(!u)continue;if(s=u.colSpan,i=0,u.colSpan>1){a=u,i+=c.width;continue}u.width=c.width+i}}}function G0e(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var i=a[n],s=0,o=e.columns;s<o.length;s++){var c=o[s],u=i.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=nP(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=nP(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var p=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<p*u.rowSpan?r={height:p,count:u.rowSpan}:r&&r.count>0&&r.height>p&&(p=r.height),p>i.height&&(i.height=p)}}r.count--}}function nP(e,t,r,n,a){return e.map(function(i){return K0e(i,t,r,n,a)})}function K0e(e,t,r,n,a){var i=1e4*n.scaleFactor();if(t=Math.ceil(t*i)/i,t>=_b(e,r,n))return e;for(;t<_b(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function DB(e,t){var r=new o0(e),n=X0e(t,r.scaleFactor()),a=new U0e(t,n);return q0e(r,a),r.applyStyles(r.userStyles),a}function X0e(e,t){var r=e.content,n=J0e(r.columns);if(r.head.length===0){var a=aP(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=aP(n,"foot");a&&r.foot.push(a)}var i=e.settings.theme,s=e.styles;return{columns:n,head:eS("head",r.head,n,s,i,t),body:eS("body",r.body,n,s,i,t),foot:eS("foot",r.foot,n,s,i,t)}}function eS(e,t,r,n,a,i){var s={},o=t.map(function(c,u){for(var d=0,f={},p=0,h=0,g=0,m=r;g<m.length;g++){var x=m[g];if(s[x.index]==null||s[x.index].left===0)if(h===0){var y=void 0;Array.isArray(c)?y=c[x.index-p-d]:y=c[x.dataKey];var v={};typeof y=="object"&&!Array.isArray(y)&&(v=(y==null?void 0:y.styles)||{});var b=Q0e(e,x,u,a,n,i,v),S=new RB(y,b,e);f[x.dataKey]=S,f[x.index]=S,h=S.colSpan-1,s[x.index]={left:S.rowSpan-1,times:h}}else h--,p++;else s[x.index].left--,h=s[x.index].times,d++}return new IB(c,u,e,f)});return o}function aP(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=Y0e(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function Y0e(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function J0e(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new z0e(a,t,r)})}function Q0e(e,t,r,n,a,i,s){var o=E0e(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var u=ec({},o.table,o[e],a.styles,c),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},p=e==="body"&&r%2===0?ec({},o.alternateRow,a.alternateRowStyles):{},h=A0e(i),g=ec({},h,u,p,f);return ec(g,s)}function Z0e(e,t,r){var n;r===void 0&&(r={});var a=kB(e,t),i=new Map,s=[],o=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(p){var h=t.columns.find(function(g){return g.dataKey===p||g.index===p});h&&!i.has(h.index)&&(i.set(h.index,!0),s.push(h.index),o.push(t.columns[h.index]),a-=h.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(i.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,s.push(d),o.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:s,columns:o,lastIndex:d-1}}function epe(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=Z0e(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function MB(e,t){var r=t.settings,n=r.startY,a=r.margin,i={x:a.left,y:n},s=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+a.bottom+s;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(p,h){return p+h.height},0);o+=u}var d=new o0(e);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&($B(d),i.y=a.top),t.callWillDrawPageHooks(d,i);var f=ec({},i);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?tpe(d,t,f,i):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(p){return yc(d,t,p,i,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(p,h){var g=h===t.body.length-1;Sb(d,t,p,g,f,i,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(p){return yc(d,t,p,i,t.columns)})),TB(d,t,f,i),t.callEndPageHooks(d,i),t.finalY=i.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function tpe(e,t,r,n){var a=epe(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?ig(e,t,r,n,u.columns,!0):iP(e,t,n,u.columns),rpe(e,t,r,n,u.columns),tS(e,t,n,u.columns)});else for(var s=-1,o=a[0],c=function(){var u=s;if(o){e.applyStyles(e.userStyles);var d=o.columns;s>=0?ig(e,t,r,n,d,!0):iP(e,t,n,d),u=sP(e,t,s+1,n,d),tS(e,t,n,d)}var f=u-s;a.slice(1).forEach(function(p){e.applyStyles(e.userStyles),ig(e,t,r,n,p.columns,!0),sP(e,t,s+1,n,p.columns,f),tS(e,t,n,p.columns)}),s=u};s<t.body.length-1;)c()}function iP(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(i){return yc(e,t,i,r,n)})}function rpe(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(i,s){var o=s===t.body.length-1;Sb(e,t,i,o,r,n,a)})}function sP(e,t,r,n,a,i){e.applyStyles(e.userStyles),i=i??t.body.length;var s=Math.min(r+i,t.body.length),o=-1;return t.body.slice(r,s).forEach(function(c,u){var d=r+u===t.body.length-1,f=FB(e,t,d,n);c.canEntireRowFit(f,a)&&(yc(e,t,c,n,a),o=r+u)}),o}function tS(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(i){return yc(e,t,i,r,n)})}function npe(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),i=Math.floor((t-a)/n);return Math.max(0,i)}function ape(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var i=0,s=0,o=r.columns;s<o.length;s++){var c=o[s],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new RB(u.raw,u.styles,u.section);d=ec(d,u),d.text=[];var f=npe(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var p=n.scaleFactor(),h=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(p,h),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(p,h),d.contentHeight>i&&(i=d.contentHeight),a[c.index]=d}}var g=new IB(e.raw,-1,e.section,a,!0);g.height=i;for(var m=0,x=r.columns;m<x.length;m++){var c=x[m],d=g.cells[c.index];d&&(d.height=g.height);var u=e.cells[c.index];u&&(u.height=e.height)}return g}function ipe(e,t,r,n){var a=e.pageSize().height,i=n.settings.margin,s=i.top+i.bottom,o=a-s;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>o)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>o;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function Sb(e,t,r,n,a,i,s){var o=FB(e,t,n,i);if(r.canEntireRowFit(o,s))yc(e,t,r,i,s);else if(ipe(e,r,o,t)){var c=ape(r,o,t,e);yc(e,t,r,i,s),ig(e,t,a,i,s),Sb(e,t,c,n,a,i,s)}else ig(e,t,a,i,s),Sb(e,t,r,n,a,i,s)}function yc(e,t,r,n,a){n.x=t.settings.margin.left;for(var i=0,s=a;i<s.length;i++){var o=s[i],c=r.cells[o.index];if(!c){n.x+=o.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,o,n);if(u===!1){n.x+=o.width;continue}spe(e,c,n);var d=c.getTextPos();jB(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,o,n),n.x+=o.width}n.y+=r.height}function spe(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=CB(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),ope(e,t,r,n.lineWidth))}function ope(e,t,r,n){var a,i,s,o;n.top&&(a=r.x,i=r.y,s=r.x+t.width,o=r.y,n.right&&(s+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,i,s,o)),n.bottom&&(a=r.x,i=r.y+t.height,s=r.x+t.width,o=r.y+t.height,n.right&&(s+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,i,s,o)),n.left&&(a=r.x,i=r.y,s=r.x,o=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.left,a,i,s,o)),n.right&&(a=r.x+t.width,i=r.y,s=r.x+t.width,o=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.right,a,i,s,o));function c(u,d,f,p,h){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,p,h,"S")}}function FB(e,t,r,n){var a=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function ig(e,t,r,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(o){return yc(e,t,o,n,a)}),t.callEndPageHooks(e,n);var s=t.settings.margin;TB(e,t,r,n),$B(e),t.pageNumber++,n.x=s.left,n.y=s.top,r.y=s.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return yc(e,t,o,n,a)}),e.applyStyles(e.userStyles))}function $B(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function lpe(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=LB(this,n),i=DB(this,a);return MB(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){jB(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return o0.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){o0.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new o0(this),i=PB(a,t,window,r,!1),s=i.head,o=i.body,c=((n=s[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:o,data:o}}}var rS;function cpe(e,t){var r=LB(e,t),n=DB(e,r);MB(e,n)}try{if(typeof window<"u"&&window){var oP=window,lP=oP.jsPDF||((rS=oP.jspdf)===null||rS===void 0?void 0:rS.jsPDF);lP&&lpe(lP)}}catch(e){console.error("Could not apply autoTable plugin",e)}const upe=({isOpen:e,onClose:t,staff:r,marks:n,licenses:a,permissions:i,vacations:s,incidences:o,year:c,month:u})=>{const[d,f]=F.useState(""),[p,h]=F.useState(u),[g,m]=F.useState(c),[x,y]=F.useState(!1),{data:v=[]}=q3(),b=F.useMemo(()=>{const j=new Map;for(const E of v)j.set(E.code,E);return j},[v]),S=r.find(j=>j.rut===d),_=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];if(!e)return null;const A=async()=>{if(S){y(!0);try{const j=new Pt({orientation:"landscape",unit:"mm",format:"letter"}),E=j.internal.pageSize.getWidth(),T=j.internal.pageSize.getHeight(),L=12,O={brand:[0,0,0],headerBg:[255,255,255],textMain:[0,0,0],textLight:[60,60,60],border:[0,0,0],bgOff:[230,230,230],bgLic:[255,255,255],bgVac:[255,255,255],bgPer:[255,255,255],bgNoMark:[40,40,40],bgNoCred:[180,180,180],bgDayChange:[255,255,255],bgReduced:[255,255,255]};j.setFillColor(...O.brand),j.rect(0,0,E,25,"F"),j.setTextColor(255,255,255),j.setFontSize(18),j.setFont("helvetica","bold"),j.text("ASISTENCIA MENSUAL",L,12),j.setFontSize(10),j.setFont("helvetica","normal"),j.text("REPORTE OFICIAL DE TURNOS Y ASISTENCIA",L,18),j.setFontSize(14),j.text(`${Ede(p).toUpperCase()} ${g}`,E-L,12,{align:"right"}),j.setFontSize(9),j.text("Ley 40 Horas (43 hrs/sem)",E-L,18,{align:"right"}),j.setDrawColor(...O.border),j.setLineWidth(.3),j.setFillColor(...O.headerBg),j.roundedRect(L,30,E-2*L,22,1,1,"S"),j.setTextColor(...O.textMain),j.setFontSize(12),j.setFont("helvetica","bold"),j.text(S.nombre.toUpperCase(),L+5,38),j.setFontSize(9),j.setFont("helvetica","normal"),j.text("RUT:",L+5,45),j.setFont("helvetica","bold"),j.text(S.rut,L+25,45),j.setFont("helvetica","normal"),j.text("CARGO:",L+70,45),j.setFont("helvetica","bold"),j.text(S.cargo,L+90,45),j.setFont("helvetica","normal"),j.text("TERMINAL:",L+140,45),j.setFont("helvetica","bold"),j.text(S.terminal_code,L+165,45),j.setFont("helvetica","normal");const I=S.shift?b.get(S.shift.shift_type_code):null;j.text("TURNOS:",L+5,50),j.setFont("helvetica","bold"),j.text((I==null?void 0:I.name)||"5x2 Base",L+25,50),j.setFont("helvetica","normal"),j.text("HORARIO BASE:",L+70,50),j.setFont("helvetica","bold"),j.text(S.horario||"Sin asignar",L+100,50),j.setFont("helvetica","normal");const D=Nde(g,p),z=[];let Y=[];const ee=new Date(D[0]+"T12:00:00").getDay(),J=ee===0?6:ee-1;for(let ae=0;ae<J;ae++)Y.push("");for(const ae of D)Y.push(ae),Y.length===7&&(z.push(Y),Y=[]);if(Y.length>0){for(;Y.length<7;)Y.push("");z.push(Y)}const oe=[],we={noMark:new Set(o.noMarcaciones.filter(ae=>ae.rut===S.rut).map(ae=>ae.date)),noCred:new Set(o.sinCredenciales.filter(ae=>ae.rut===S.rut).map(ae=>ae.date)),dayChange:new Map(o.cambiosDia.filter(ae=>ae.rut===S.rut).map(ae=>[ae.date,ae]))};for(const ae of z){const be=[],ve=ae.find(X=>X!=="")||"",Fe=ve?fj(ve):"",Me=Fe?L9(Fe):[];for(const X of ae){if(!X){be.push("");continue}const Ie=new Date(X+"T12:00:00"),Re=Ie.getDate(),Qe=we.dayChange.get(X);if(Qe){be.push(`${Re}
CAMBIO DE DA
(Por ${Qe.target_date})`);continue}if(a.some(rt=>rt.staff_id===S.id&&X>=rt.start_date&&X<=rt.end_date)){be.push(`${Re}
LICENCIA
MDICA`);continue}if(s.some(rt=>rt.staff_id===S.id&&X>=rt.start_date&&X<=rt.end_date)){be.push(`${Re}
VACACIONES`);continue}if(i.some(rt=>rt.staff_id===S.id&&X>=rt.start_date&&X<=rt.end_date)){be.push(`${Re}
PERMISO`);continue}if(we.noMark.has(X)){be.push(`${Re}
NO
MARCACIN`);continue}if(we.noCred.has(X)){be.push(`${Re}
SIN
CREDENCIAL`);continue}let dt=!1;if(S.shift){const rt=I==null?void 0:I.pattern_json;rt&&(dt=k9(X,S.shift.shift_type_code,S.shift.variant_code,rt))}else{const rt=Ie.getDay();dt=rt===0||rt===6}if(dt)be.push(`${Re}
LIBRE`);else{const rt=Me.includes(X);let Dt=S.horario||"10:00-20:00";rt&&(Dt=kde(Dt,!0));const ht=Dt.replace("-"," - ");be.push(`${Re}
${ht}${rt?"*":""}`)}}oe.push(be)}cpe(j,{startY:60,head:[["LUNES","MARTES","MIRCOLES","JUEVES","VIERNES","SBADO","DOMINGO"]],body:oe,theme:"grid",headStyles:{fillColor:[0,0,0],textColor:[255,255,255],fontSize:10,fontStyle:"bold",halign:"center",valign:"middle",cellPadding:4,lineWidth:.1,lineColor:[0,0,0]},styles:{fontSize:9,cellPadding:3,halign:"center",valign:"middle",minCellHeight:25,lineColor:[0,0,0],lineWidth:.2,textColor:[0,0,0],fontStyle:"normal"},columnStyles:{0:{cellWidth:36},1:{cellWidth:36},2:{cellWidth:36},3:{cellWidth:36},4:{cellWidth:36},5:{cellWidth:36},6:{cellWidth:36}},didParseCell:ae=>{const be=ae.cell.text.join(`
`).toUpperCase();ae.cell.styles.fillColor=[255,255,255],be.includes("LIBRE")?ae.cell.styles.fillColor=O.bgOff:be.includes("LICENCIA")||be.includes("VACACIONES")||be.includes("PERMISO")?ae.cell.styles.fontStyle="bold":be.includes("NO MARCACIN")||be.includes(`NO
MARCACIN`)?(ae.cell.styles.fillColor=[50,50,50],ae.cell.styles.textColor=[255,255,255],ae.cell.styles.fontStyle="bold"):be.includes("SIN CREDENCIAL")||be.includes(`SIN
CREDENCIAL`)?(ae.cell.styles.fillColor=[200,200,200],ae.cell.styles.fontStyle="bold"):be.includes("CAMBIO DE DA")||be.includes("CAMBIO")?ae.cell.styles.fontStyle="bold":be.includes("*")},margin:{left:L,right:L}});const xe=j.lastAutoTable.finalY+10;j.setDrawColor(0,0,0),j.setLineWidth(.3),j.rect(L,xe,E-2*L,20),j.setFontSize(8),j.setFont("helvetica","bold"),j.setTextColor(0,0,0),j.text("LEYENDA:",L+5,xe+6);const k=(ae,be,ve,Fe,Me)=>{j.setDrawColor(0,0,0),be?(ve?j.setFillColor(50,50,50):j.setFillColor(230,230,230),j.rect(Fe,Me-2,4,4,"FD")):j.rect(Fe,Me-2,4,4,"S"),j.setTextColor(0,0,0),j.setFont("helvetica","normal"),j.text(ae,Fe+6,Me+1)},M=xe+12,B=L+8,U=L+55,Z=L+110,pe=L+165;k("Da Libre (Gris)",!0,!1,B,M),k("No Marcacin (Fondo Oscuro)",!0,!0,U,M),k("Eventos en Negrita (Lic/Vac)",!1,!1,Z,M),k("* Da Reducido (Ley 40 Horas)",!1,!1,pe,M);const K=T-10;j.line(L,K-5,E-L,K-5),j.setFontSize(8),j.text(`Generado: ${new Date().toLocaleString("es-CL")}`,L,K),j.text("Documento oficial. Impresin B/N optimizada.",E-L,K,{align:"right"});const te=`Asistencia_${S.rut.replace(/\./g,"")}_${_[p]}_${g}.pdf`;j.save(te)}catch(j){console.error("Error generating PDF:",j),alert("Error al generar el PDF")}finally{y(!1)}}};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-slate-50",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Exportar PDF Mensual"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Generar reporte de asistencia para imprimir"})]}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-200 rounded-lg transition-colors text-slate-500",children:l.jsx(me,{name:"x",size:20})})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Trabajador"}),l.jsxs("select",{value:d,onChange:j=>f(j.target.value),className:"w-full px-4 py-2.5 bg-white border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-shadow",children:[l.jsx("option",{value:"",children:"-- Seleccionar Trabajador --"}),r.map(j=>l.jsx("option",{value:j.rut,children:j.nombre},j.rut))]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Mes"}),l.jsx("select",{value:p,onChange:j=>h(Number(j.target.value)),className:"w-full px-4 py-2.5 bg-white border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",children:_.map((j,E)=>l.jsx("option",{value:E,children:j},E))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ao"}),l.jsxs("select",{value:g,onChange:j=>m(Number(j.target.value)),className:"w-full px-4 py-2.5 bg-white border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:2025,children:"2025"}),l.jsx("option",{value:2026,children:"2026"}),l.jsx("option",{value:2027,children:"2027"})]})]})]}),S&&l.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-100 rounded-xl",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600",children:l.jsx(me,{name:"user",size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-blue-900",children:S.nombre}),l.jsx("div",{className:"text-xs text-blue-700",children:S.cargo})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mt-3 pt-3 border-t border-blue-100",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-blue-500 text-xs block",children:"Horario"}),l.jsx("span",{className:"text-blue-900 font-medium",children:S.horario||"N/A"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-blue-500 text-xs block",children:"Turno"}),l.jsx("span",{className:"text-blue-900 font-medium",children:S.turno})]})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t bg-slate-50",children:[l.jsx("button",{onClick:t,className:"px-5 py-2.5 text-sm font-medium text-slate-600 hover:text-slate-800 hover:bg-slate-200 rounded-lg transition-colors",children:"Cancelar"}),l.jsx("button",{onClick:A,disabled:!d||x,className:"px-5 py-2.5 text-sm font-bold text-white bg-blue-600 hover:bg-blue-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-blue-600/20 active:scale-95 transition-all flex items-center gap-2",children:x?l.jsxs(l.Fragment,{children:[l.jsx(me,{name:"loader",size:18,className:"animate-spin"}),"Generando..."]}):l.jsxs(l.Fragment,{children:[l.jsx(me,{name:"download",size:18}),"Generar Documento"]})})]})]})})},dpe=({isOpen:e,onClose:t,staff:r,onSubmit:n,isSubmitting:a=!1})=>{const[i,s]=F.useState("");if(!e||!r)return null;const o=c=>{c.preventDefault(),i.trim()&&n(i.trim())};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 transition-opacity",onClick:t}),l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[l.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[l.jsx(me,{name:"user-x",size:20}),l.jsx("h3",{className:"font-semibold",children:"Solicitar Desvinculacin"})]}),l.jsx("button",{onClick:t,className:"p-1 hover:bg-slate-100 rounded-lg transition-colors",children:l.jsx(me,{name:"x",size:20})})]}),l.jsxs("form",{onSubmit:o,className:"p-4 space-y-4",children:[l.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[l.jsx("p",{className:"font-medium text-slate-800",children:r.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:[r.rut," | ",r.cargo," | ",r.terminal_code]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Motivo de la desvinculacin *"}),l.jsx("textarea",{value:i,onChange:c=>s(c.target.value),placeholder:"Describa detalladamente el motivo de la solicitud...",className:"w-full p-3 border rounded-lg text-sm resize-none focus:ring-2 focus:ring-brand-500 focus:border-transparent",rows:4,required:!0,disabled:a})]}),l.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg text-sm text-amber-800 flex gap-2",children:[l.jsx(me,{name:"info",size:16,className:"shrink-0 mt-0.5"}),l.jsx("p",{children:"Esta solicitud ser enviada por correo al rea de RRHH para su evaluacin. El trabajador seguir activo hasta que se apruebe."})]}),l.jsxs("div",{className:"flex gap-2 pt-2",children:[l.jsx("button",{type:"button",onClick:t,disabled:a,className:`flex-1 py-2 rounded-lg font-medium ${uf.secondary}`,children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:!i.trim()||a,className:`flex-1 py-2 rounded-lg font-medium ${uf.danger} disabled:opacity-50`,children:a?l.jsxs(l.Fragment,{children:[l.jsx(me,{name:"loader",size:16,className:"inline animate-spin mr-1"}),"Enviando..."]}):"Enviar solicitud"})]})]})]})})]})},fpe=[{value:"PRINCIPAL",label:"Turno Normal"},{value:"CONTRATURNO",label:"Contraturno"}],hpe=[{id:"1",code:"5X2_FIJO",name:"5x2 Fijo",pattern_json:{type:"fixed",description:"Lunes a Viernes trabaja, Sbado y Domingo libre",offDays:[6,0]},created_at:""},{id:"2",code:"5X2_ROTATIVO",name:"5x2 Rotativo",pattern_json:{type:"rotating",description:"Semana 1: Mircoles+Domingo libre. Semana 2: Viernes+Sbado libre",cycle:2,weeks:[{offDays:[3,0]},{offDays:[5,6]}]},created_at:""},{id:"3",code:"5X2_SUPER",name:"5x2 Super",pattern_json:{type:"rotating",description:"Semana 1: Mircoles+Domingo libre. Semana 2: Jueves+Viernes libre",cycle:2,weeks:[{offDays:[3,0]},{offDays:[4,5]}]},created_at:""},{id:"4",code:"ESPECIAL",name:"Especial (Manual)",pattern_json:{type:"manual",description:"Plantilla de 28 das definida manualmente",cycleDays:28},created_at:""}],ppe=({isOpen:e,onClose:t,staff:r,onSuccess:n})=>{var E;const{data:a=[]}=q3(),{data:i}=Que((r==null?void 0:r.id)??null),{data:s}=Zue((r==null?void 0:r.id)??null),o=a.length>0?a:hpe,c=ode(),u=lde(),[d,f]=F.useState("5X2_FIJO"),[p,h]=F.useState("PRINCIPAL"),[g,m]=F.useState([]),[x,y]=F.useState(null),[v,b]=F.useState(!1);if(F.useEffect(()=>{i?(f(i.shift_type_code),h(i.variant_code)):(f("5X2_FIJO"),h("PRINCIPAL")),m(s?s.off_days_json:[]),y(null),b(!1)},[i,s,r==null?void 0:r.id]),!e||!r)return null;const S=async()=>{y(null),b(!1);try{console.log("Saving shift:",{staff_id:r.id,shift_type_code:d,variant_code:p}),await c.mutateAsync({staff_id:r.id,shift_type_code:d,variant_code:p,start_date:"2026-01-01"}),d==="ESPECIAL"&&g.length>0&&await u.mutateAsync({staffId:r.id,offDays:g}),b(!0),n&&n(),setTimeout(()=>{t()},1e3)}catch(T){console.error("Error saving shift:",T);const L=T instanceof Error?T.message:"Error desconocido al guardar";y(L)}},_=T=>{m(L=>L.includes(T)?L.filter(O=>O!==T):[...L,T])},A=c.isPending||u.isPending,j=o.find(T=>T.code===d);return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gradient-to-r from-brand-600 to-brand-500 text-white rounded-t-xl",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Configurar Turno"}),l.jsx("p",{className:"text-sm text-brand-100",children:r.nombre})]}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:l.jsx(me,{name:"x",size:20})})]}),x&&l.jsxs("div",{className:"mx-4 mt-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[l.jsx(me,{name:"alert-circle",size:18,className:"text-red-600 mt-0.5"}),l.jsx("div",{className:"text-sm text-red-700",children:x})]}),v&&l.jsxs("div",{className:"mx-4 mt-4 p-3 bg-emerald-50 border border-emerald-200 rounded-lg flex items-center gap-2",children:[l.jsx(me,{name:"check-circle",size:18,className:"text-emerald-600"}),l.jsx("div",{className:"text-sm text-emerald-700 font-medium",children:"Turno guardado correctamente!"})]}),l.jsxs("div",{className:"p-4 space-y-6",children:[i&&l.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[l.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Turno actual asignado:"}),l.jsxs("div",{className:"font-medium text-slate-800",children:[((E=o.find(T=>T.code===i.shift_type_code))==null?void 0:E.name)||i.shift_type_code," - ",i.variant_code]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Turno"}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:o.map(T=>{var L;return l.jsxs("button",{onClick:()=>f(T.code),className:`p-3 rounded-lg border text-left transition-all ${d===T.code?"border-brand-500 bg-brand-50 text-brand-700 ring-2 ring-brand-500/30":"border-slate-200 hover:border-slate-300 hover:bg-slate-50"}`,children:[l.jsx("div",{className:"font-medium text-sm",children:T.name}),l.jsx("div",{className:"text-xs text-slate-500 mt-1",children:((L=T.pattern_json)==null?void 0:L.description)||""})]},T.code)})})]}),(d==="5X2_ROTATIVO"||d==="5X2_SUPER")&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Variante (Semana de inicio)"}),l.jsx("div",{className:"flex gap-2",children:fpe.map(T=>l.jsx("button",{onClick:()=>h(T.value),className:`flex-1 px-4 py-2 rounded-lg border text-sm font-medium transition-all ${p===T.value?"border-brand-500 bg-brand-50 text-brand-700 ring-2 ring-brand-500/30":"border-slate-200 hover:border-slate-300"}`,children:T.label},T.value))})]}),j&&d!=="ESPECIAL"&&l.jsx("div",{className:"p-3 bg-amber-50 rounded-lg border border-amber-200",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(me,{name:"calendar",size:16,className:"text-amber-600 mt-0.5"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-amber-800",children:"Das Libres"}),l.jsx("div",{className:"text-xs text-amber-700",children:mpe(j,p)})]})]})}),d==="ESPECIAL"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Das Libres (ciclo 28 das)"}),l.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Haz clic en los das que sern libres en el ciclo de 4 semanas"}),l.jsx("div",{className:"space-y-2 p-3 bg-slate-50 rounded-lg",children:[0,1,2,3].map(T=>l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsxs("span",{className:"text-xs text-slate-500 w-16 font-medium",children:["Sem ",T+1,":"]}),l.jsx("div",{className:"flex gap-1 flex-1",children:[0,1,2,3,4,5,6].map(L=>{const O=T*7+L,I=g.includes(O),D=["L","M","X","J","V","S","D"][L];return l.jsx("button",{onClick:()=>_(O),className:`w-9 h-9 rounded text-xs font-bold transition-all ${I?"bg-slate-700 text-white shadow-sm":"bg-emerald-100 text-emerald-700 hover:bg-emerald-200"}`,children:D},O)})})]},T))}),l.jsxs("p",{className:"text-xs text-slate-600 mt-2 font-medium",children:[g.length," das libres seleccionados por ciclo"]})]})]}),l.jsxs("div",{className:"flex justify-between items-center gap-3 p-4 border-t bg-slate-50 rounded-b-xl",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Los cambios aplican para todo el ao 2026"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:t,disabled:A,className:"px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-200 rounded-lg transition-colors",children:"Cancelar"}),l.jsxs("button",{onClick:S,disabled:A||v,className:"px-5 py-2 text-sm font-medium text-white bg-brand-600 hover:bg-brand-700 rounded-lg disabled:opacity-50 flex items-center gap-2 transition-colors shadow-sm",children:[A&&l.jsx(me,{name:"loader",size:16,className:"animate-spin"}),v?"Guardado!":"Guardar Turno"]})]})]})]})})};function mpe(e,t){const r=e.pattern_json;if(!r)return"";const n=["Domingo","Lunes","Martes","Mircoles","Jueves","Viernes","Sbado"];if(r.type==="fixed"&&r.offDays)return`Libre: ${r.offDays.map(i=>n[i]).join(" y ")} (todas las semanas)`;if(r.type==="rotating"&&r.weeks){const a=[];return r.weeks.forEach((i,s)=>{const o=t==="CONTRATURNO"?(s+1)%r.weeks.length:s,c=i.offDays.map(u=>n[u]).join(" + ");a.push(`Semana ${o+1}: ${c}`)}),a.join(" | ")}return r.description||""}const gpe=[{value:"ALL",label:"Todos"},{value:"EL_ROBLE",label:"El Roble"},{value:"LA_REINA",label:"La Reina"},{value:"MARIA_ANGELICA",label:"Mara Anglica"},{value:"EL_DESCANSO",label:"El Descanso"}],vpe=[{value:"TODOS",label:"Todos"},{value:"DIA",label:"Da"},{value:"NOCHE",label:"Noche"}],xpe=()=>{const e=Vt(K=>K.context),t=jr(K=>K.session),r=new Date().toISOString().split("T")[0],[n,a]=F.useState(()=>fj(r)),i=F.useMemo(()=>H3(n),[n]),s=new Date(i[3]+"T12:00:00"),o=s.getMonth(),c=s.getFullYear(),[u,d]=F.useState({month:o,year:c,terminal:"ALL",turno:"TODOS",search:""}),[f,p]=F.useState(!1),[h,g]=F.useState(null),[m,x]=F.useState(null);pde();const{data:y=[],isLoading:v}=q3(),{data:b=[],isLoading:S}=Jue(e,u),_=F.useMemo(()=>b.map(K=>K.id),[b]),{data:A=[],isLoading:j}=rde(_,c,o),{data:E=[],isLoading:T}=nde(_,c,o),{data:L=[],isLoading:O}=ade(_,c,o),{data:I=[],isLoading:D}=ide(_,c,o),{data:z=[],isLoading:Y}=tde(_,c,o),{data:se,isLoading:ee}=sde(e,c,o),{data:J=[]}=ede(_),oe=fde(),we=v||S||j||T||O||D||Y||ee,xe=F.useMemo(()=>{const K={SUPERVISOR:0,INSPECTOR:0,CONDUCTOR:0,PLANILLERO:0,CLEANER:0};let te=0,ae=0,be=0,ve=0,Fe=0,Me=0,X=0;const Ie=new Date().toISOString().split("T")[0],Re=new Set;se&&(se.noMarcaciones.forEach(Qe=>Re.add(Qe.rut)),se.sinCredenciales.forEach(Qe=>Re.add(Qe.rut)),se.cambiosDia.forEach(Qe=>Re.add(Qe.rut)),se.autorizaciones.forEach(Qe=>Re.add(Qe.rut)));for(const Qe of b){const Ue=Qe.cargo.toUpperCase();Ue.includes("SUPERVISOR")?K.SUPERVISOR++:Ue.includes("INSPECTOR")?K.INSPECTOR++:Ue.includes("CONDUCTOR")?K.CONDUCTOR++:Ue.includes("PLANILLERO")?K.PLANILLERO++:K.CLEANER++,O9(Qe.horario)==="DIA"?te++:ae++;const st=E.some(ht=>ht.staff_id===Qe.id&&Ie>=ht.start_date&&Ie<=ht.end_date),dt=I.some(ht=>ht.staff_id===Qe.id&&Ie>=ht.start_date&&Ie<=ht.end_date),rt=L.some(ht=>ht.staff_id===Qe.id&&Ie>=ht.start_date&&Ie<=ht.end_date);st&&be++,dt&&ve++,rt&&Fe++,Re.has(Qe.rut)&&Me++;const Dt=A.filter(ht=>ht.staff_id===Qe.id);for(const ht of i){if(!Ade(ht))continue;const $t=Dt.some(Tt=>Tt.mark_date===ht),tr=E.some(Tt=>Tt.staff_id===Qe.id&&ht>=Tt.start_date&&ht<=Tt.end_date)||I.some(Tt=>Tt.staff_id===Qe.id&&ht>=Tt.start_date&&ht<=Tt.end_date)||L.some(Tt=>Tt.staff_id===Qe.id&&ht>=Tt.start_date&&ht<=Tt.end_date);if(!$t&&!tr){X++;break}}}return{byPosition:K,programmmedDay:te,programmedNight:ae,onLicense:be,onVacation:ve,onPermission:Fe,withIncidencies:Me,pendingMarks:X}},[b,A,E,L,I,se,i]),k=()=>a(Tde(n)),M=()=>a(Cde(n)),B=()=>a(fj(r)),U=K=>{d(te=>({...te,terminal:K}))},Z=()=>{var Xr,lr,Yt,Jt,Lr,kt,_r,Rt;const K=aa.book_new(),te=$O(n),ae=Ge=>{const We=new Date(Ge+"T12:00:00");return`${["Dom","Lun","Mar","Mi","Jue","Vie","Sb"][We.getDay()]} ${We.getDate()}/${We.getMonth()+1}`},be=(Ge,We)=>{const yt=A.find(mt=>mt.staff_id===Ge.id&&mt.mark_date===We),Lt=E.some(mt=>mt.staff_id===Ge.id&&We>=mt.start_date&&We<=mt.end_date),gr=I.some(mt=>mt.staff_id===Ge.id&&We>=mt.start_date&&We<=mt.end_date),co=L.some(mt=>mt.staff_id===Ge.id&&We>=mt.start_date&&We<=mt.end_date);if(Lt)return"LIC";if(gr)return"VAC";if(co)return"PER";if(yt)return yt.mark;const On=new Date(We+"T12:00:00").getDay(),Aa=Ge.shift?y.find(mt=>mt.code===Ge.shift.shift_type_code):null;let xi=On===0||On===6;return Aa!=null&&Aa.pattern_json&&Aa.pattern_json.type==="fixed"&&Aa.pattern_json.offDays&&(xi=Aa.pattern_json.offDays.includes(On)),xi?"L":"-"},ve=b.map(Ge=>{const We={RUT:Ge.rut,Nombre:Ge.nombre,Cargo:Ge.cargo,Terminal:Ge.terminal_code,Horario:Ge.horario||""};for(const yt of i)We[ae(yt)]=be(Ge,yt);return We}),Fe=aa.json_to_sheet(ve);Fe["!cols"]=[{wch:12},{wch:30},{wch:15},{wch:12},{wch:12},...i.map(()=>({wch:10}))],aa.book_append_sheet(K,Fe,"Asistencia Semanal");const Me=((lr=(Xr=se==null?void 0:se.sinCredenciales)==null?void 0:Xr.filter(Ge=>i.includes(Ge.date)))==null?void 0:lr.map(Ge=>{const We=b.find(yt=>yt.rut===Ge.rut);return{Fecha:Ge.date,RUT:Ge.rut,Nombre:(We==null?void 0:We.nombre)||"N/A",Cargo:(We==null?void 0:We.cargo)||"N/A",Terminal:(We==null?void 0:We.terminal_code)||"N/A"}}))||[],X=aa.json_to_sheet(Me.length>0?Me:[{Info:"Sin registros esta semana"}]);aa.book_append_sheet(K,X,"Sin Credencial");const Ie=((Jt=(Yt=se==null?void 0:se.noMarcaciones)==null?void 0:Yt.filter(Ge=>i.includes(Ge.date)))==null?void 0:Jt.map(Ge=>{const We=b.find(yt=>yt.rut===Ge.rut);return{Fecha:Ge.date,RUT:Ge.rut,Nombre:(We==null?void 0:We.nombre)||"N/A",Cargo:(We==null?void 0:We.cargo)||"N/A",Terminal:(We==null?void 0:We.terminal_code)||"N/A"}}))||[],Re=aa.json_to_sheet(Ie.length>0?Ie:[{Info:"Sin registros esta semana"}]);aa.book_append_sheet(K,Re,"No Marcacin");const Qe=((kt=(Lr=se==null?void 0:se.cambiosDia)==null?void 0:Lr.filter(Ge=>i.includes(Ge.date)))==null?void 0:kt.map(Ge=>{const We=b.find(yt=>yt.rut===Ge.rut);return{Fecha:Ge.date,RUT:Ge.rut,Nombre:(We==null?void 0:We.nombre)||"N/A",Cargo:(We==null?void 0:We.cargo)||"N/A",Terminal:(We==null?void 0:We.terminal_code)||"N/A"}}))||[],Ue=aa.json_to_sheet(Qe.length>0?Qe:[{Info:"Sin registros esta semana"}]);aa.book_append_sheet(K,Ue,"Cambios de Da");const pt=((Rt=(_r=se==null?void 0:se.autorizaciones)==null?void 0:_r.filter(Ge=>i.includes(Ge.date)))==null?void 0:Rt.map(Ge=>{const We=b.find(yt=>yt.rut===Ge.rut);return{Fecha:Ge.date,RUT:Ge.rut,Nombre:(We==null?void 0:We.nombre)||"N/A",Cargo:(We==null?void 0:We.cargo)||"N/A",Terminal:(We==null?void 0:We.terminal_code)||"N/A"}}))||[],st=aa.json_to_sheet(pt.length>0?pt:[{Info:"Sin registros esta semana"}]);aa.book_append_sheet(K,st,"Autorizaciones");const dt=I.filter(Ge=>i.some(We=>We>=Ge.start_date&&We<=Ge.end_date)).map(Ge=>{const We=b.find(yt=>yt.id===Ge.staff_id);return{RUT:(We==null?void 0:We.rut)||"N/A",Nombre:(We==null?void 0:We.nombre)||"N/A",Cargo:(We==null?void 0:We.cargo)||"N/A",Terminal:(We==null?void 0:We.terminal_code)||"N/A",Inicio:Ge.start_date,Fin:Ge.end_date}}),rt=aa.json_to_sheet(dt.length>0?dt:[{Info:"Sin vacaciones esta semana"}]);aa.book_append_sheet(K,rt,"Vacaciones");const Dt=E.filter(Ge=>i.some(We=>We>=Ge.start_date&&We<=Ge.end_date)).map(Ge=>{const We=b.find(yt=>yt.id===Ge.staff_id);return{RUT:(We==null?void 0:We.rut)||"N/A",Nombre:(We==null?void 0:We.nombre)||"N/A",Cargo:(We==null?void 0:We.cargo)||"N/A",Terminal:(We==null?void 0:We.terminal_code)||"N/A",Inicio:Ge.start_date,Fin:Ge.end_date,Nota:Ge.note||""}}),ht=aa.json_to_sheet(Dt.length>0?Dt:[{Info:"Sin licencias esta semana"}]);aa.book_append_sheet(K,ht,"Licencias");const $t=b.reduce((Ge,We)=>Ge+i.filter(yt=>be(We,yt)==="P").length,0),tr=b.reduce((Ge,We)=>Ge+i.filter(yt=>be(We,yt)==="A").length,0),Tt=b.reduce((Ge,We)=>Ge+i.filter(yt=>be(We,yt)==="-").length,0),_t=[{Concepto:"Semana",Valor:te},{Concepto:"Total Personal",Valor:b.length.toString()},{Concepto:"Marcas Presente",Valor:$t.toString()},{Concepto:"Marcas Ausente",Valor:tr.toString()},{Concepto:"Marcas Pendientes",Valor:Tt.toString()},{Concepto:"Vacaciones Activas",Valor:dt.length.toString()},{Concepto:"Licencias Activas",Valor:Dt.length.toString()},{Concepto:"Sin Credencial",Valor:Me.length.toString()},{Concepto:"No Marcacin",Valor:Ie.length.toString()},{Concepto:"Cambios de Da",Valor:Qe.length.toString()},{Concepto:"Autorizaciones",Valor:pt.length.toString()}],qt=aa.json_to_sheet(_t);qt["!cols"]=[{wch:20},{wch:30}],aa.book_append_sheet(K,qt,"Resumen");const Nt=`Asistencia_${te.replace(/\s/g,"_").replace(/\//g,"-")}.xlsx`;i9(K,Nt)},pe=async K=>{if(!(!h||!t))try{await oe.mutateAsync({values:{staff_id:h.id,staff_rut:h.rut,staff_name:h.nombre,terminal_code:h.terminal_code,reason:K},requestedBy:t.supervisorName}),await xl.sendEmail({audience:"manual",manualRecipients:["rrhh@empresa.cl"],subject:`Solicitud de Desvinculacin - ${h.nombre}`,body:`Se ha solicitado la desvinculacin del trabajador:

Nombre: ${h.nombre}
RUT: ${h.rut}
Cargo: ${h.cargo}
Terminal: ${h.terminal_code}

Motivo:
${K}

Solicitado por: ${t.supervisorName}
Fecha: ${new Date().toLocaleString("es-CL")}`,module:"asistencia"}),g(null)}catch(te){console.error("Error creating offboarding request:",te)}};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-white rounded-lg border p-4 space-y-4",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:k,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Semana anterior",children:l.jsx(me,{name:"chevron-left",size:20})}),l.jsx("div",{className:"text-center min-w-[180px]",children:l.jsx("div",{className:"font-semibold text-slate-800",children:$O(n)})}),l.jsx("button",{onClick:M,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Semana siguiente",children:l.jsx(me,{name:"chevron-right",size:20})}),l.jsx("button",{onClick:B,className:"px-3 py-1.5 text-xs font-medium bg-brand-100 text-brand-700 rounded-lg hover:bg-brand-200",children:"Hoy"})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:gpe.map(K=>l.jsx("button",{onClick:()=>U(K.value),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${u.terminal===K.value?mde[K.value]:"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:K.label},K.value))})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[l.jsx("div",{className:"flex gap-1 bg-slate-100 rounded-lg p-1",children:vpe.map(K=>l.jsx("button",{onClick:()=>d(te=>({...te,turno:K.value})),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${u.turno===K.value?"bg-white text-slate-800 shadow-sm":"text-slate-600 hover:text-slate-800"}`,children:K.label},K.value))}),l.jsxs("div",{className:"relative flex-1 max-w-xs",children:[l.jsx(me,{name:"search",size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),l.jsx("input",{type:"text",value:u.search,onChange:K=>d(te=>({...te,search:K.target.value})),placeholder:"Buscar RUT o nombre...",className:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-brand-500 focus:border-transparent"})]}),l.jsxs("div",{className:"flex gap-2 ml-auto",children:[l.jsxs("button",{onClick:()=>p(!0),className:`px-3 py-2 rounded-lg text-sm font-medium flex items-center gap-1 ${uf.secondary}`,children:[l.jsx(me,{name:"file-text",size:16}),l.jsx("span",{className:"hidden sm:inline",children:"PDF por RUT"})]}),l.jsxs("button",{onClick:Z,className:`px-3 py-2 rounded-lg text-sm font-medium flex items-center gap-1 ${uf.secondary}`,children:[l.jsx(me,{name:"download",size:16}),l.jsx("span",{className:"hidden sm:inline",children:"Exportar XLSX"})]})]})]}),l.jsx(Ide,{kpis:xe,isLoading:we})]}),l.jsx("div",{className:"bg-white rounded-lg border p-3",children:l.jsx(Rde,{})}),l.jsx(Lde,{staff:b,shiftTypes:y,marks:A,licenses:E,permissions:L,vacations:I,overrides:z,incidences:se||{noMarcaciones:[],sinCredenciales:[],cambiosDia:[],autorizaciones:[]},specialTemplates:J,weekDates:i,isLoading:we,onRequestOffboarding:K=>g(K),onOpenShiftConfig:K=>x(K)}),l.jsx(upe,{isOpen:f,onClose:()=>p(!1),staff:b,marks:A,licenses:E,permissions:L,vacations:I,incidences:se||{noMarcaciones:[],sinCredenciales:[],cambiosDia:[],autorizaciones:[]},year:c,month:o}),l.jsx(dpe,{isOpen:h!==null,onClose:()=>g(null),staff:h,onSubmit:pe,isSubmitting:oe.isPending}),l.jsx(ppe,{isOpen:m!==null,onClose:()=>x(null),staff:m})]})},cP="email_notifications",ype=({isOpen:e,onClose:t})=>{const[r,n]=F.useState({to:[],cc:[]}),[a,i]=F.useState(!0),[s,o]=F.useState(!1),[c,u]=F.useState(""),[d,f]=F.useState("");F.useEffect(()=>{e&&p()},[e]);const p=async()=>{i(!0);try{const v=await $3(cP);n(v||{to:["isaac.avila@transdev.cl"],cc:[]})}catch(v){console.error("Error loading config:",v),Pi("Error","No se pudo cargar la configuracin")}finally{i(!1)}},h=async()=>{o(!0);try{await Mce(cP,r,"Configuracin de destinatarios para notificaciones"),Fi("Configuracin guardada","Los correos se enviarn a los nuevos destinatarios"),t()}catch(v){console.error("Error saving config:",v),Pi("Error","No se pudo guardar la configuracin")}finally{o(!1)}},g=v=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v),m=v=>{const b=v==="to"?c:d,S=v==="to"?u:f,_=b.trim();if(_){if(!g(_)){Pi("Email invlido","Por favor ingresa un correo electrnico vlido");return}if(r[v].includes(_)){Pi("Email duplicado","Este correo ya est en la lista");return}n(A=>({...A,[v]:[...A[v],_]})),S("")}},x=(v,b)=>{n(S=>({...S,[v]:S[v].filter(_=>_!==b)}))},y=(v,b)=>{v.key==="Enter"&&(v.preventDefault(),m(b))};return e?l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),l.jsxs("div",{className:"relative w-full max-w-lg card p-6 animate-scale-in",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6 border-b pb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-brand-100 p-2 rounded-lg text-brand-600",children:l.jsx(me,{name:"settings",size:24})}),l.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Configuracin de Correos"})]}),l.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600",children:l.jsx(me,{name:"x",size:24})})]}),a?l.jsx("div",{className:"py-12 flex justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-600"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"label mb-2 flex justify-between",children:[l.jsx("span",{children:"Destinatarios Principales (Para)"}),l.jsx("span",{className:"text-xs font-normal text-slate-500",children:"Reciben el correo directamente"})]}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[l.jsx("input",{type:"email",className:"input flex-1",placeholder:"ejemplo@transdev.cl",value:c,onChange:v=>u(v.target.value),onKeyDown:v=>y(v,"to")}),l.jsx("button",{type:"button",onClick:()=>m("to"),className:"btn btn-secondary px-3",disabled:!c.trim(),children:l.jsx(me,{name:"plus",size:18})})]}),l.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 min-h-[60px] border border-slate-200 flex flex-wrap gap-2",children:[r.to.length===0&&l.jsx("span",{className:"text-sm text-slate-400 italic self-center w-full text-center",children:"Sin destinatarios"}),r.to.map(v=>l.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white border border-slate-200 rounded-full text-sm font-medium text-slate-700 shadow-sm",children:[v,l.jsx("button",{onClick:()=>x("to",v),className:"text-slate-400 hover:text-danger-500 ml-1",children:l.jsx(me,{name:"x",size:14})})]},v))]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"label mb-2 flex justify-between",children:[l.jsx("span",{children:"En Copia (CC)"}),l.jsx("span",{className:"text-xs font-normal text-slate-500",children:"Reciben una copia"})]}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[l.jsx("input",{type:"email",className:"input flex-1",placeholder:"jefe@transdev.cl",value:d,onChange:v=>f(v.target.value),onKeyDown:v=>y(v,"cc")}),l.jsx("button",{type:"button",onClick:()=>m("cc"),className:"btn btn-secondary px-3",disabled:!d.trim(),children:l.jsx(me,{name:"plus",size:18})})]}),l.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 min-h-[60px] border border-slate-200 flex flex-wrap gap-2",children:[r.cc.length===0&&l.jsx("span",{className:"text-sm text-slate-400 italic self-center w-full text-center",children:"Sin copias"}),r.cc.map(v=>l.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white border border-slate-200 rounded-full text-sm font-medium text-slate-700 shadow-sm",children:[v,l.jsx("button",{onClick:()=>x("cc",v),className:"text-slate-400 hover:text-danger-500 ml-1",children:l.jsx(me,{name:"x",size:14})})]},v))]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t mt-4",children:[l.jsx("button",{onClick:t,className:"btn btn-secondary",disabled:s,children:"Cancelar"}),l.jsx("button",{onClick:h,className:"btn btn-primary min-w-[120px]",disabled:s,children:s?"Guardando...":"Guardar Cambios"})]})]})]})]}):null},bpe=[{id:"asistencia-2026",label:"Asistencia 2026",icon:"calendar-range"},{id:"no-marcaciones",label:"No Marcaciones",icon:"clock"},{id:"sin-credenciales",label:"Sin Credenciales",icon:"key"},{id:"cambios-dia",label:"Cambios de Da",icon:"calendar"},{id:"autorizaciones",label:"Autorizaciones",icon:"check-circle"},{id:"vacaciones",label:"Vacaciones",icon:"sparkles"}],wpe=()=>{const[e,t]=F.useState("asistencia-2026"),[r,n]=F.useState(!1),a=()=>{switch(e){case"asistencia-2026":return l.jsx(xpe,{});case"no-marcaciones":return l.jsx(wue,{});case"sin-credenciales":return l.jsx(Sue,{});case"cambios-dia":return l.jsx(jue,{});case"autorizaciones":return l.jsx(Eue,{});case"vacaciones":return l.jsx(Oue,{});default:return null}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 border-b border-slate-200 pb-4",children:[l.jsx("div",{className:"flex flex-wrap gap-2",children:bpe.map(i=>l.jsxs("button",{onClick:()=>t(i.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${e===i.id?"bg-brand-600 text-white shadow-md":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[l.jsx(me,{name:i.icon,size:18}),l.jsx("span",{className:"hidden sm:inline",children:i.label})]},i.id))}),l.jsxs("button",{onClick:()=>n(!0),className:"btn btn-secondary text-sm flex items-center gap-2 shrink-0",children:[l.jsx(me,{name:"settings",size:16}),l.jsx("span",{children:"Configurar Correos"})]})]}),a(),l.jsx(ype,{isOpen:r,onClose:()=>n(!1)})]})},_pe=[{id:"ai-1",area:"interior",responsable:"Equipo Aseo 1",fecha:"2023-12-04T08:00:00Z",estado:"pendiente",observaciones:"Pendiente zona comedor",terminal:"EL_ROBLE"},{id:"ae-1",area:"exterior",responsable:"Equipo Aseo 2",fecha:"2023-12-03T15:00:00Z",estado:"completado",observaciones:"Patio listo",terminal:"LA_REINA"},{id:"ar-1",area:"rodillo",responsable:"Equipo Rodillo",fecha:"2023-12-02T17:00:00Z",estado:"pendiente",terminal:"EL_SALTO"}],Spe=e=>iw(_pe.filter(t=>t.area===e),(t,r)=>r!=null&&r.estado&&r.estado!=="todos"?t.estado===r.estado:!0),Y3=({area:e,title:t})=>{var p;const r=Vt(h=>h.context),n=Vt(h=>h.setContext),[a,i]=F.useState({estado:"todos"}),s=F.useMemo(()=>Spe(e),[e]),o=zt({queryKey:["aseo",e,r,a],queryFn:()=>s.list({terminalContext:r,filters:a,scope:"view"})}),c=F.useMemo(()=>[{key:"responsable",header:"Responsable"},{key:"fecha",header:"Fecha",render:h=>Ma(h.fecha),value:h=>Ma(h.fecha)},{key:"estado",header:"Estado",render:h=>l.jsx("span",{className:"badge capitalize",children:h.estado}),value:h=>h.estado},{key:"observaciones",header:"Observaciones",render:h=>h.observaciones??"",value:h=>h.observaciones??""},{key:"terminal",header:"Terminal",render:h=>ur(h.terminal),value:h=>ur(h.terminal)}],[]),u=c.map(h=>({key:h.key,header:h.header,value:g=>h.value?h.value(g):g[h.key]})),d=()=>{o.data&&xr({filename:`aseo_${e}_vista`,sheetName:`Aseo ${e}`,rows:o.data,columns:u})},f=async()=>{const h=await s.list({terminalContext:r,scope:"all"});xr({filename:`aseo_${e}_completo`,sheetName:`Aseo ${e}`,rows:h,columns:u})};return l.jsxs("div",{className:"space-y-4",children:[l.jsx(gn,{title:`Aseo - ${t}`,description:"Control de aseo por rea",actions:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"btn btn-primary",children:"Nuevo registro"}),l.jsx(Na,{onExportView:d,onExportAll:f})]})}),l.jsx(ss,{terminalContext:r,onTerminalChange:n,children:l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsxs("select",{className:"input",value:a.estado,onChange:h=>i({estado:h.target.value}),children:[l.jsx("option",{value:"todos",children:"Todos"}),l.jsx("option",{value:"pendiente",children:"Pendiente"}),l.jsx("option",{value:"completado",children:"Completado"})]})]})}),o.isLoading&&l.jsx(kn,{}),o.isError&&l.jsx(Fa,{onRetry:o.refetch}),!o.isLoading&&!o.isError&&l.jsxs(l.Fragment,{children:[!((p=o.data)!=null&&p.length)&&l.jsx(Pc,{description:"Sin registros"}),o.data&&o.data.length>0&&l.jsx(Oc,{columns:c,rows:o.data})]})]})},Npe=()=>l.jsx(Y3,{area:"interior",title:"Interior"}),jpe=()=>l.jsx(Y3,{area:"exterior",title:"Exterior"}),Ape=()=>l.jsx(Y3,{area:"rodillo",title:"Rodillo"});/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Epe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Tpe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),uP=e=>{const t=Tpe(e);return t.charAt(0).toUpperCase()+t.slice(1)},BB=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),Cpe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kpe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ope=F.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:s,...o},c)=>F.createElement("svg",{ref:c,...kpe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:BB("lucide",a),...!i&&!Cpe(o)&&{"aria-hidden":"true"},...o},[...s.map(([u,d])=>F.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=(e,t)=>{const r=F.forwardRef(({className:n,...a},i)=>F.createElement(Ope,{ref:i,iconNode:t,className:BB(`lucide-${Epe(uP(e))}`,`lucide-${e}`,n),...a}));return r.displayName=uP(e),r};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ppe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Lpe=_n("calendar",Ppe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ipe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Rpe=_n("circle-alert",Ipe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dpe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],UB=_n("clock",Dpe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mpe=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Wg=_n("credit-card",Mpe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fpe=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],zB=_n("dollar-sign",Fpe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $pe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Bpe=_n("download",$pe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Upe=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zpe=_n("eye",Upe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qpe=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Hpe=_n("file-text",qpe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wpe=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Vpe=_n("funnel",Wpe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gpe=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],qB=_n("mail",Gpe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kpe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],HB=_n("plus",Kpe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xpe=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Ype=_n("printer",Xpe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jpe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],WB=_n("rotate-ccw",Jpe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qpe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Zpe=_n("save",Qpe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eme=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],tme=_n("search",eme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rme=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],nme=_n("send",rme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ame=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ime=_n("settings",ame);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sme=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ome=_n("square-pen",sme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lme=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],cme=_n("trash-2",lme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ume=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],dme=_n("trending-up",ume);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fme=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],uw=_n("triangle-alert",fme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hme=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],pme=_n("upload",hme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mme=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],gme=_n("user",mme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vme=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],bc=_n("x",vme),Xu=["El Roble","La Reina","Maria Angelica"],VB=[{value:"PERDIDA",label:"Perdida"},{value:"DETERIORO",label:"Deterioro"}],xme=[{value:"ASIGNADA",label:"Asignada"},{value:"RECUPERADA",label:"Recuperada"},{value:"CERRADA",label:"Cerrada"},{value:"CANCELADA",label:"Cancelada"}],yme=[{value:"LIBRE",label:"Libre"},{value:"ASIGNADA",label:"Asignada"},{value:"INACTIVA",label:"Inactiva"}],ym=({title:e,value:t,subtitle:r,icon:n,colorClass:a="bg-slate-50 text-slate-600"})=>l.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:e}),l.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-1",children:t}),r&&l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:r})]}),l.jsx("div",{className:`p-2 rounded-lg ${a}`,children:n})]})}),bme=({kpis:e,isLoading:t})=>{if(t)return l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:Array.from({length:5}).map((a,i)=>l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm animate-pulse",children:[l.jsx("div",{className:"h-4 bg-slate-200 rounded w-24 mb-2"}),l.jsx("div",{className:"h-8 bg-slate-200 rounded w-16"})]},i))});const r=Xu.reduce((a,i)=>a+(e.availableByTerminal[i]||0),0),n=Xu.map(a=>`${a.split(" ")[0]}: ${e.availableByTerminal[a]||0}`).join(" | ");return l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[l.jsx(ym,{title:"Disponibles",value:r,subtitle:n,icon:l.jsx(Wg,{className:"w-5 h-5"}),colorClass:"bg-emerald-50 text-emerald-600"}),l.jsx(ym,{title:"Prestamos Activos",value:e.activeLoans,icon:l.jsx(UB,{className:"w-5 h-5"}),colorClass:"bg-blue-50 text-blue-600"}),l.jsx(ym,{title:"Atrasados (+7d)",value:e.overdueLoans,icon:l.jsx(uw,{className:"w-5 h-5"}),colorClass:e.overdueLoans>0?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-400"}),l.jsx(ym,{title:"Tiempo Promedio",value:`${e.avgReturnDays} dias`,subtitle:"Ultimos 30 dias",icon:l.jsx(dme,{className:"w-5 h-5"}),colorClass:"bg-indigo-50 text-indigo-600"}),l.jsx(ym,{title:"Descuentos",value:`$${e.totalDiscounts.toLocaleString("es-CL")}`,icon:l.jsx(zB,{className:"w-5 h-5"}),colorClass:"bg-violet-50 text-violet-600"})]})};function GB(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=GB(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function cr(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=GB(e))&&(n&&(n+=" "),n+=t);return n}var wme=Array.isArray,ls=wme,_me=typeof z1=="object"&&z1&&z1.Object===Object&&z1,KB=_me,Sme=KB,Nme=typeof self=="object"&&self&&self.Object===Object&&self,jme=Sme||Nme||Function("return this")(),Sl=jme,Ame=Sl,Eme=Ame.Symbol,e1=Eme,dP=e1,XB=Object.prototype,Tme=XB.hasOwnProperty,Cme=XB.toString,bm=dP?dP.toStringTag:void 0;function kme(e){var t=Tme.call(e,bm),r=e[bm];try{e[bm]=void 0;var n=!0}catch{}var a=Cme.call(e);return n&&(t?e[bm]=r:delete e[bm]),a}var Ome=kme,Pme=Object.prototype,Lme=Pme.toString;function Ime(e){return Lme.call(e)}var Rme=Ime,fP=e1,Dme=Ome,Mme=Rme,Fme="[object Null]",$me="[object Undefined]",hP=fP?fP.toStringTag:void 0;function Bme(e){return e==null?e===void 0?$me:Fme:hP&&hP in Object(e)?Dme(e):Mme(e)}var Lc=Bme;function Ume(e){return e!=null&&typeof e=="object"}var Ic=Ume,zme=Lc,qme=Ic,Hme="[object Symbol]";function Wme(e){return typeof e=="symbol"||qme(e)&&zme(e)==Hme}var Np=Wme,Vme=ls,Gme=Np,Kme=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xme=/^\w*$/;function Yme(e,t){if(Vme(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Gme(e)?!0:Xme.test(e)||!Kme.test(e)||t!=null&&e in Object(t)}var J3=Yme;function Jme(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var rd=Jme;const jp=Pr(rd);var Qme=Lc,Zme=rd,ege="[object AsyncFunction]",tge="[object Function]",rge="[object GeneratorFunction]",nge="[object Proxy]";function age(e){if(!Zme(e))return!1;var t=Qme(e);return t==tge||t==rge||t==ege||t==nge}var Q3=age;const Xt=Pr(Q3);var ige=Sl,sge=ige["__core-js_shared__"],oge=sge,nS=oge,pP=function(){var e=/[^.]+$/.exec(nS&&nS.keys&&nS.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function lge(e){return!!pP&&pP in e}var cge=lge,uge=Function.prototype,dge=uge.toString;function fge(e){if(e!=null){try{return dge.call(e)}catch{}try{return e+""}catch{}}return""}var YB=fge,hge=Q3,pge=cge,mge=rd,gge=YB,vge=/[\\^$.*+?()[\]{}|]/g,xge=/^\[object .+?Constructor\]$/,yge=Function.prototype,bge=Object.prototype,wge=yge.toString,_ge=bge.hasOwnProperty,Sge=RegExp("^"+wge.call(_ge).replace(vge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Nge(e){if(!mge(e)||pge(e))return!1;var t=hge(e)?Sge:xge;return t.test(gge(e))}var jge=Nge;function Age(e,t){return e==null?void 0:e[t]}var Ege=Age,Tge=jge,Cge=Ege;function kge(e,t){var r=Cge(e,t);return Tge(r)?r:void 0}var Wf=kge,Oge=Wf,Pge=Oge(Object,"create"),dw=Pge,mP=dw;function Lge(){this.__data__=mP?mP(null):{},this.size=0}var Ige=Lge;function Rge(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Dge=Rge,Mge=dw,Fge="__lodash_hash_undefined__",$ge=Object.prototype,Bge=$ge.hasOwnProperty;function Uge(e){var t=this.__data__;if(Mge){var r=t[e];return r===Fge?void 0:r}return Bge.call(t,e)?t[e]:void 0}var zge=Uge,qge=dw,Hge=Object.prototype,Wge=Hge.hasOwnProperty;function Vge(e){var t=this.__data__;return qge?t[e]!==void 0:Wge.call(t,e)}var Gge=Vge,Kge=dw,Xge="__lodash_hash_undefined__";function Yge(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Kge&&t===void 0?Xge:t,this}var Jge=Yge,Qge=Ige,Zge=Dge,eve=zge,tve=Gge,rve=Jge;function Ap(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ap.prototype.clear=Qge;Ap.prototype.delete=Zge;Ap.prototype.get=eve;Ap.prototype.has=tve;Ap.prototype.set=rve;var nve=Ap;function ave(){this.__data__=[],this.size=0}var ive=ave;function sve(e,t){return e===t||e!==e&&t!==t}var Z3=sve,ove=Z3;function lve(e,t){for(var r=e.length;r--;)if(ove(e[r][0],t))return r;return-1}var fw=lve,cve=fw,uve=Array.prototype,dve=uve.splice;function fve(e){var t=this.__data__,r=cve(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():dve.call(t,r,1),--this.size,!0}var hve=fve,pve=fw;function mve(e){var t=this.__data__,r=pve(t,e);return r<0?void 0:t[r][1]}var gve=mve,vve=fw;function xve(e){return vve(this.__data__,e)>-1}var yve=xve,bve=fw;function wve(e,t){var r=this.__data__,n=bve(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var _ve=wve,Sve=ive,Nve=hve,jve=gve,Ave=yve,Eve=_ve;function Ep(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ep.prototype.clear=Sve;Ep.prototype.delete=Nve;Ep.prototype.get=jve;Ep.prototype.has=Ave;Ep.prototype.set=Eve;var hw=Ep,Tve=Wf,Cve=Sl,kve=Tve(Cve,"Map"),eE=kve,gP=nve,Ove=hw,Pve=eE;function Lve(){this.size=0,this.__data__={hash:new gP,map:new(Pve||Ove),string:new gP}}var Ive=Lve;function Rve(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Dve=Rve,Mve=Dve;function Fve(e,t){var r=e.__data__;return Mve(t)?r[typeof t=="string"?"string":"hash"]:r.map}var pw=Fve,$ve=pw;function Bve(e){var t=$ve(this,e).delete(e);return this.size-=t?1:0,t}var Uve=Bve,zve=pw;function qve(e){return zve(this,e).get(e)}var Hve=qve,Wve=pw;function Vve(e){return Wve(this,e).has(e)}var Gve=Vve,Kve=pw;function Xve(e,t){var r=Kve(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Yve=Xve,Jve=Ive,Qve=Uve,Zve=Hve,e1e=Gve,t1e=Yve;function Tp(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Tp.prototype.clear=Jve;Tp.prototype.delete=Qve;Tp.prototype.get=Zve;Tp.prototype.has=e1e;Tp.prototype.set=t1e;var tE=Tp,JB=tE,r1e="Expected a function";function rE(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(r1e);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var s=e.apply(this,n);return r.cache=i.set(a,s)||i,s};return r.cache=new(rE.Cache||JB),r}rE.Cache=JB;var QB=rE;const n1e=Pr(QB);var a1e=QB,i1e=500;function s1e(e){var t=a1e(e,function(n){return r.size===i1e&&r.clear(),n}),r=t.cache;return t}var o1e=s1e,l1e=o1e,c1e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,u1e=/\\(\\)?/g,d1e=l1e(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(c1e,function(r,n,a,i){t.push(a?i.replace(u1e,"$1"):n||r)}),t}),f1e=d1e;function h1e(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var nE=h1e,vP=e1,p1e=nE,m1e=ls,g1e=Np,xP=vP?vP.prototype:void 0,yP=xP?xP.toString:void 0;function ZB(e){if(typeof e=="string")return e;if(m1e(e))return p1e(e,ZB)+"";if(g1e(e))return yP?yP.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var v1e=ZB,x1e=v1e;function y1e(e){return e==null?"":x1e(e)}var eU=y1e,b1e=ls,w1e=J3,_1e=f1e,S1e=eU;function N1e(e,t){return b1e(e)?e:w1e(e,t)?[e]:_1e(S1e(e))}var tU=N1e,j1e=Np;function A1e(e){if(typeof e=="string"||j1e(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var mw=A1e,E1e=tU,T1e=mw;function C1e(e,t){t=E1e(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[T1e(t[r++])];return r&&r==n?e:void 0}var aE=C1e,k1e=aE;function O1e(e,t,r){var n=e==null?void 0:k1e(e,t);return n===void 0?r:n}var rU=O1e;const Os=Pr(rU);function P1e(e){return e==null}var L1e=P1e;const dr=Pr(L1e);var I1e=Lc,R1e=ls,D1e=Ic,M1e="[object String]";function F1e(e){return typeof e=="string"||!R1e(e)&&D1e(e)&&I1e(e)==M1e}var $1e=F1e;const Af=Pr($1e);var nU={exports:{}},Wr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iE=Symbol.for("react.element"),sE=Symbol.for("react.portal"),gw=Symbol.for("react.fragment"),vw=Symbol.for("react.strict_mode"),xw=Symbol.for("react.profiler"),yw=Symbol.for("react.provider"),bw=Symbol.for("react.context"),B1e=Symbol.for("react.server_context"),ww=Symbol.for("react.forward_ref"),_w=Symbol.for("react.suspense"),Sw=Symbol.for("react.suspense_list"),Nw=Symbol.for("react.memo"),jw=Symbol.for("react.lazy"),U1e=Symbol.for("react.offscreen"),aU;aU=Symbol.for("react.module.reference");function oo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case iE:switch(e=e.type,e){case gw:case xw:case vw:case _w:case Sw:return e;default:switch(e=e&&e.$$typeof,e){case B1e:case bw:case ww:case jw:case Nw:case yw:return e;default:return t}}case sE:return t}}}Wr.ContextConsumer=bw;Wr.ContextProvider=yw;Wr.Element=iE;Wr.ForwardRef=ww;Wr.Fragment=gw;Wr.Lazy=jw;Wr.Memo=Nw;Wr.Portal=sE;Wr.Profiler=xw;Wr.StrictMode=vw;Wr.Suspense=_w;Wr.SuspenseList=Sw;Wr.isAsyncMode=function(){return!1};Wr.isConcurrentMode=function(){return!1};Wr.isContextConsumer=function(e){return oo(e)===bw};Wr.isContextProvider=function(e){return oo(e)===yw};Wr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===iE};Wr.isForwardRef=function(e){return oo(e)===ww};Wr.isFragment=function(e){return oo(e)===gw};Wr.isLazy=function(e){return oo(e)===jw};Wr.isMemo=function(e){return oo(e)===Nw};Wr.isPortal=function(e){return oo(e)===sE};Wr.isProfiler=function(e){return oo(e)===xw};Wr.isStrictMode=function(e){return oo(e)===vw};Wr.isSuspense=function(e){return oo(e)===_w};Wr.isSuspenseList=function(e){return oo(e)===Sw};Wr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===gw||e===xw||e===vw||e===_w||e===Sw||e===U1e||typeof e=="object"&&e!==null&&(e.$$typeof===jw||e.$$typeof===Nw||e.$$typeof===yw||e.$$typeof===bw||e.$$typeof===ww||e.$$typeof===aU||e.getModuleId!==void 0)};Wr.typeOf=oo;nU.exports=Wr;var z1e=nU.exports,q1e=Lc,H1e=Ic,W1e="[object Number]";function V1e(e){return typeof e=="number"||H1e(e)&&q1e(e)==W1e}var iU=V1e;const G1e=Pr(iU);var K1e=iU;function X1e(e){return K1e(e)&&e!=+e}var Y1e=X1e;const t1=Pr(Y1e);var Li=function(t){return t===0?0:t>0?1:-1},Gd=function(t){return Af(t)&&t.indexOf("%")===t.length-1},nt=function(t){return G1e(t)&&!t1(t)},J1e=function(t){return dr(t)},Sa=function(t){return nt(t)||Af(t)},Q1e=0,r1=function(t){var r=++Q1e;return"".concat(t||"").concat(r)},Ii=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!nt(t)&&!Af(t))return n;var i;if(Gd(t)){var s=t.indexOf("%");i=r*parseFloat(t.slice(0,s))/100}else i=+t;return t1(i)&&(i=n),a&&i>r&&(i=r),i},hu=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},Z1e=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},ou=function(t,r){return nt(t)&&nt(r)?function(n){return t+n*(r-t)}:function(){return r}};function Ej(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Os(n,t))===r})}var exe=function(t,r){return nt(t)&&nt(r)?t-r:Af(t)&&Af(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function l0(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Tj(e){"@babel/helpers - typeof";return Tj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tj(e)}var txe=["viewBox","children"],rxe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],bP=["points","pathLength"],aS={svg:txe,polygon:bP,polyline:bP},oE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Nb=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(F.isValidElement(t)&&(n=t.props),!jp(n))return null;var a={};return Object.keys(n).forEach(function(i){oE.includes(i)&&(a[i]=r||function(s){return n[i](n,s)})}),a},nxe=function(t,r,n){return function(a){return t(r,n,a),null}},Ef=function(t,r,n){if(!jp(t)||Tj(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var s=t[i];oE.includes(i)&&typeof s=="function"&&(a||(a={}),a[i]=nxe(s,r,n))}),a},axe=["children"],ixe=["children"];function wP(e,t){if(e==null)return{};var r=sxe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function sxe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var _P={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},lc=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},SP=null,iS=null,lE=function e(t){if(t===SP&&Array.isArray(iS))return iS;var r=[];return F.Children.forEach(t,function(n){dr(n)||(z1e.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),iS=r,SP=t,r};function to(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return lc(a)}):n=[lc(t)],lE(e).forEach(function(a){var i=Os(a,"type.displayName")||Os(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function ws(e,t){var r=to(e,t);return r&&r[0]}var NP=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!nt(n)||n<=0||!nt(a)||a<=0)},oxe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],lxe=function(t){return t&&t.type&&Af(t.type)&&oxe.indexOf(t.type)>=0},cxe=function(t,r,n,a){var i,s=(i=aS==null?void 0:aS[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Xt(t)&&(a&&s.includes(r)||rxe.includes(r))||n&&oE.includes(r)},Wt=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(F.isValidElement(t)&&(a=t.props),!jp(a))return null;var i={};return Object.keys(a).forEach(function(s){var o;cxe((o=a)===null||o===void 0?void 0:o[s],s,r,n)&&(i[s]=a[s])}),i},Cj=function e(t,r){if(t===r)return!0;var n=F.Children.count(t);if(n!==F.Children.count(r))return!1;if(n===0)return!0;if(n===1)return jP(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],s=r[a];if(Array.isArray(i)||Array.isArray(s)){if(!e(i,s))return!1}else if(!jP(i,s))return!1}return!0},jP=function(t,r){if(dr(t)&&dr(r))return!0;if(!dr(t)&&!dr(r)){var n=t.props||{},a=n.children,i=wP(n,axe),s=r.props||{},o=s.children,c=wP(s,ixe);return a&&o?l0(i,c)&&Cj(a,o):!a&&!o?l0(i,c):!1}return!1},AP=function(t,r){var n=[],a={};return lE(t).forEach(function(i,s){if(lxe(i))n.push(i);else if(i){var o=lc(i.type),c=r[o]||{},u=c.handler,d=c.once;if(u&&(!d||!a[o])){var f=u(i,o,s);n.push(f),a[o]=!0}}}),n},uxe=function(t){var r=t&&t.type;return r&&_P[r]?_P[r]:null},dxe=function(t,r){return lE(r).indexOf(t)},fxe=["children","width","height","viewBox","className","style","title","desc"];function kj(){return kj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kj.apply(this,arguments)}function hxe(e,t){if(e==null)return{};var r=pxe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pxe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Oj(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,s=e.style,o=e.title,c=e.desc,u=hxe(e,fxe),d=a||{width:r,height:n,x:0,y:0},f=cr("recharts-surface",i);return _e.createElement("svg",kj({},Wt(u,!0,"svg"),{className:f,width:r,height:n,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),_e.createElement("title",null,o),_e.createElement("desc",null,c),t)}var mxe=["children","className"];function Pj(){return Pj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pj.apply(this,arguments)}function gxe(e,t){if(e==null)return{};var r=vxe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vxe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Ur=_e.forwardRef(function(e,t){var r=e.children,n=e.className,a=gxe(e,mxe),i=cr("recharts-layer",n);return _e.createElement("g",Pj({className:i},Wt(a,!0),{ref:t}),r)}),Bo=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function xxe(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var yxe=xxe,bxe=yxe;function wxe(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:bxe(e,t,r)}var _xe=wxe,Sxe="\\ud800-\\udfff",Nxe="\\u0300-\\u036f",jxe="\\ufe20-\\ufe2f",Axe="\\u20d0-\\u20ff",Exe=Nxe+jxe+Axe,Txe="\\ufe0e\\ufe0f",Cxe="\\u200d",kxe=RegExp("["+Cxe+Sxe+Exe+Txe+"]");function Oxe(e){return kxe.test(e)}var sU=Oxe;function Pxe(e){return e.split("")}var Lxe=Pxe,oU="\\ud800-\\udfff",Ixe="\\u0300-\\u036f",Rxe="\\ufe20-\\ufe2f",Dxe="\\u20d0-\\u20ff",Mxe=Ixe+Rxe+Dxe,Fxe="\\ufe0e\\ufe0f",$xe="["+oU+"]",Lj="["+Mxe+"]",Ij="\\ud83c[\\udffb-\\udfff]",Bxe="(?:"+Lj+"|"+Ij+")",lU="[^"+oU+"]",cU="(?:\\ud83c[\\udde6-\\uddff]){2}",uU="[\\ud800-\\udbff][\\udc00-\\udfff]",Uxe="\\u200d",dU=Bxe+"?",fU="["+Fxe+"]?",zxe="(?:"+Uxe+"(?:"+[lU,cU,uU].join("|")+")"+fU+dU+")*",qxe=fU+dU+zxe,Hxe="(?:"+[lU+Lj+"?",Lj,cU,uU,$xe].join("|")+")",Wxe=RegExp(Ij+"(?="+Ij+")|"+Hxe+qxe,"g");function Vxe(e){return e.match(Wxe)||[]}var Gxe=Vxe,Kxe=Lxe,Xxe=sU,Yxe=Gxe;function Jxe(e){return Xxe(e)?Yxe(e):Kxe(e)}var Qxe=Jxe,Zxe=_xe,eye=sU,tye=Qxe,rye=eU;function nye(e){return function(t){t=rye(t);var r=eye(t)?tye(t):void 0,n=r?r[0]:t.charAt(0),a=r?Zxe(r,1).join(""):t.slice(1);return n[e]()+a}}var aye=nye,iye=aye,sye=iye("toUpperCase"),oye=sye;const Aw=Pr(oye);function an(e){return function(){return e}}const hU=Math.cos,jb=Math.sin,Wo=Math.sqrt,Ab=Math.PI,Ew=2*Ab,Rj=Math.PI,Dj=2*Rj,Ld=1e-6,lye=Dj-Ld;function pU(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function cye(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return pU;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class uye{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?pU:cye(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,s){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,o=this._y1,c=n-t,u=a-r,d=s-t,f=o-r,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>Ld)if(!(Math.abs(f*c-u*d)>Ld)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let h=n-s,g=a-o,m=c*c+u*u,x=h*h+g*g,y=Math.sqrt(m),v=Math.sqrt(p),b=i*Math.tan((Rj-Math.acos((m+p-x)/(2*y*v)))/2),S=b/v,_=b/y;Math.abs(S-1)>Ld&&this._append`L${t+S*d},${r+S*f}`,this._append`A${i},${i},0,0,${+(f*h>d*g)},${this._x1=t+_*c},${this._y1=r+_*u}`}}arc(t,r,n,a,i,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),c=n*Math.sin(a),u=t+o,d=r+c,f=1^s,p=s?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Ld||Math.abs(this._y1-d)>Ld)&&this._append`L${u},${d}`,n&&(p<0&&(p=p%Dj+Dj),p>lye?this._append`A${n},${n},0,1,${f},${t-o},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:p>Ld&&this._append`A${n},${n},0,${+(p>=Rj)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function cE(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new uye(t)}function uE(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function mU(e){this._context=e}mU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Tw(e){return new mU(e)}function gU(e){return e[0]}function vU(e){return e[1]}function xU(e,t){var r=an(!0),n=null,a=Tw,i=null,s=cE(o);e=typeof e=="function"?e:e===void 0?gU:an(e),t=typeof t=="function"?t:t===void 0?vU:an(t);function o(c){var u,d=(c=uE(c)).length,f,p=!1,h;for(n==null&&(i=a(h=s())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(f,u,c),+t(f,u,c));if(h)return i=null,h+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:an(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:an(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:an(!!c),o):r},o.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),o):a},o.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),o):n},o}function Rx(e,t,r){var n=null,a=an(!0),i=null,s=Tw,o=null,c=cE(u);e=typeof e=="function"?e:e===void 0?gU:an(+e),t=typeof t=="function"?t:an(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?vU:an(+r);function u(f){var p,h,g,m=(f=uE(f)).length,x,y=!1,v,b=new Array(m),S=new Array(m);for(i==null&&(o=s(v=c())),p=0;p<=m;++p){if(!(p<m&&a(x=f[p],p,f))===y)if(y=!y)h=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=p-1;g>=h;--g)o.point(b[g],S[g]);o.lineEnd(),o.areaEnd()}y&&(b[p]=+e(x,p,f),S[p]=+t(x,p,f),o.point(n?+n(x,p,f):b[p],r?+r(x,p,f):S[p]))}if(v)return o=null,v+""||null}function d(){return xU().defined(a).curve(s).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:an(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:an(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:an(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:an(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:an(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:an(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:an(!!f),u):a},u.curve=function(f){return arguments.length?(s=f,i!=null&&(o=s(i)),u):s},u.context=function(f){return arguments.length?(f==null?i=o=null:o=s(i=f),u):i},u}class yU{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function dye(e){return new yU(e,!0)}function fye(e){return new yU(e,!1)}const dE={draw(e,t){const r=Wo(t/Ab);e.moveTo(r,0),e.arc(0,0,r,0,Ew)}},hye={draw(e,t){const r=Wo(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},bU=Wo(1/3),pye=bU*2,mye={draw(e,t){const r=Wo(t/pye),n=r*bU;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},gye={draw(e,t){const r=Wo(t),n=-r/2;e.rect(n,n,r,r)}},vye=.8908130915292852,wU=jb(Ab/10)/jb(7*Ab/10),xye=jb(Ew/10)*wU,yye=-hU(Ew/10)*wU,bye={draw(e,t){const r=Wo(t*vye),n=xye*r,a=yye*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const s=Ew*i/5,o=hU(s),c=jb(s);e.lineTo(c*r,-o*r),e.lineTo(o*n-c*a,c*n+o*a)}e.closePath()}},sS=Wo(3),wye={draw(e,t){const r=-Wo(t/(sS*3));e.moveTo(0,r*2),e.lineTo(-sS*r,-r),e.lineTo(sS*r,-r),e.closePath()}},zs=-.5,qs=Wo(3)/2,Mj=1/Wo(12),_ye=(Mj/2+1)*3,Sye={draw(e,t){const r=Wo(t/_ye),n=r/2,a=r*Mj,i=n,s=r*Mj+r,o=-i,c=s;e.moveTo(n,a),e.lineTo(i,s),e.lineTo(o,c),e.lineTo(zs*n-qs*a,qs*n+zs*a),e.lineTo(zs*i-qs*s,qs*i+zs*s),e.lineTo(zs*o-qs*c,qs*o+zs*c),e.lineTo(zs*n+qs*a,zs*a-qs*n),e.lineTo(zs*i+qs*s,zs*s-qs*i),e.lineTo(zs*o+qs*c,zs*c-qs*o),e.closePath()}};function Nye(e,t){let r=null,n=cE(a);e=typeof e=="function"?e:an(e||dE),t=typeof t=="function"?t:an(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:an(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:an(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Eb(){}function Tb(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function _U(e){this._context=e}_U.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Tb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Tb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jye(e){return new _U(e)}function SU(e){this._context=e}SU.prototype={areaStart:Eb,areaEnd:Eb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Tb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Aye(e){return new SU(e)}function NU(e){this._context=e}NU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Tb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Eye(e){return new NU(e)}function jU(e){this._context=e}jU.prototype={areaStart:Eb,areaEnd:Eb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Tye(e){return new jU(e)}function EP(e){return e<0?-1:1}function TP(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),s=(r-e._y1)/(a||n<0&&-0),o=(i*a+s*n)/(n+a);return(EP(i)+EP(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(o))||0}function CP(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function oS(e,t,r){var n=e._x0,a=e._y0,i=e._x1,s=e._y1,o=(i-n)/3;e._context.bezierCurveTo(n+o,a+o*t,i-o,s-o*r,i,s)}function Cb(e){this._context=e}Cb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:oS(this,this._t0,CP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,oS(this,CP(this,r=TP(this,e,t)),r);break;default:oS(this,this._t0,r=TP(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function AU(e){this._context=new EU(e)}(AU.prototype=Object.create(Cb.prototype)).point=function(e,t){Cb.prototype.point.call(this,t,e)};function EU(e){this._context=e}EU.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function Cye(e){return new Cb(e)}function kye(e){return new AU(e)}function TU(e){this._context=e}TU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=kP(e),a=kP(t),i=0,s=1;s<r;++i,++s)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function kP(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),s=new Array(r);for(a[0]=0,i[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,s[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,s[t]-=n*s[t-1];for(a[r-1]=s[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(s[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Oye(e){return new TU(e)}function Cw(e,t){this._context=e,this._t=t}Cw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Pye(e){return new Cw(e,.5)}function Lye(e){return new Cw(e,0)}function Iye(e){return new Cw(e,1)}function $0(e,t){if((s=e.length)>1)for(var r=1,n,a,i=e[t[0]],s,o=i.length;r<s;++r)for(a=i,i=e[t[r]],n=0;n<o;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Fj(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Rye(e,t){return e[t]}function Dye(e){const t=[];return t.key=e,t}function Mye(){var e=an([]),t=Fj,r=$0,n=Rye;function a(i){var s=Array.from(e.apply(this,arguments),Dye),o,c=s.length,u=-1,d;for(const f of i)for(o=0,++u;o<c;++o)(s[o][u]=[0,+n(f,s[o].key,u,i)]).data=f;for(o=0,d=uE(t(s));o<c;++o)s[d[o]].index=o;return r(s,d),s}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:an(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:an(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?Fj:typeof i=="function"?i:an(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??$0,a):r},a}function Fye(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,s;a<i;++a){for(s=r=0;r<n;++r)s+=e[r][a][1]||0;if(s)for(r=0;r<n;++r)e[r][a][1]/=s}$0(e,t)}}function $ye(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var s=0,o=0;s<a;++s)o+=e[s][r][1]||0;n[r][1]+=n[r][0]=-o/2}$0(e,t)}}function Bye(e,t){if(!(!((s=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,s;n<i;++n){for(var o=0,c=0,u=0;o<s;++o){for(var d=e[t[o]],f=d[n][1]||0,p=d[n-1][1]||0,h=(f-p)/2,g=0;g<o;++g){var m=e[t[g]],x=m[n][1]||0,y=m[n-1][1]||0;h+=x-y}c+=f,u+=h*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,$0(e,t)}}function Vg(e){"@babel/helpers - typeof";return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vg(e)}var Uye=["type","size","sizeType"];function $j(){return $j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$j.apply(this,arguments)}function OP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function PP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OP(Object(r),!0).forEach(function(n){zye(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zye(e,t,r){return t=qye(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qye(e){var t=Hye(e,"string");return Vg(t)=="symbol"?t:t+""}function Hye(e,t){if(Vg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wye(e,t){if(e==null)return{};var r=Vye(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Vye(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var CU={symbolCircle:dE,symbolCross:hye,symbolDiamond:mye,symbolSquare:gye,symbolStar:bye,symbolTriangle:wye,symbolWye:Sye},Gye=Math.PI/180,Kye=function(t){var r="symbol".concat(Aw(t));return CU[r]||dE},Xye=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*Gye;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Yye=function(t,r){CU["symbol".concat(Aw(t))]=r},fE=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,s=t.sizeType,o=s===void 0?"area":s,c=Wye(t,Uye),u=PP(PP({},c),{},{type:n,size:i,sizeType:o}),d=function(){var x=Kye(n),y=Nye().type(x).size(Xye(i,o,n));return y()},f=u.className,p=u.cx,h=u.cy,g=Wt(u,!0);return p===+p&&h===+h&&i===+i?_e.createElement("path",$j({},g,{className:cr("recharts-symbols",f),transform:"translate(".concat(p,", ").concat(h,")"),d:d()})):null};fE.registerSymbol=Yye;function B0(e){"@babel/helpers - typeof";return B0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B0(e)}function Bj(){return Bj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bj.apply(this,arguments)}function LP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jye(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LP(Object(r),!0).forEach(function(n){Gg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,OU(n.key),n)}}function ebe(e,t,r){return t&&Zye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tbe(e,t,r){return t=kb(t),rbe(e,kU()?Reflect.construct(t,r||[],kb(e).constructor):t.apply(e,r))}function rbe(e,t){if(t&&(B0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nbe(e)}function nbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kU=function(){return!!e})()}function kb(e){return kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kb(e)}function abe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uj(e,t)}function Uj(e,t){return Uj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Uj(e,t)}function Gg(e,t,r){return t=OU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OU(e){var t=ibe(e,"string");return B0(t)=="symbol"?t:t+""}function ibe(e,t){if(B0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(B0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Hs=32,hE=function(e){function t(){return Qye(this,t),tbe(this,t,arguments)}return abe(t,e),ebe(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=Hs/2,s=Hs/6,o=Hs/3,c=n.inactive?a:n.color;if(n.type==="plainline")return _e.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Hs,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return _e.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(Hs,"M").concat(2*o,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return _e.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Hs/8,"h").concat(Hs,"v").concat(Hs*3/4,"h").concat(-Hs,"z"),className:"recharts-legend-icon"});if(_e.isValidElement(n.legendIcon)){var u=Jye({},n);return delete u.legendIcon,_e.cloneElement(n.legendIcon,u)}return _e.createElement(fE,{fill:c,cx:i,cy:i,size:Hs,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,s=a.iconSize,o=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:Hs,height:Hs},f={display:o==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(h,g){var m=h.formatter||c,x=cr(Gg(Gg({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",h.inactive));if(h.type==="none")return null;var y=Xt(h.value)?null:h.value;Bo(!Xt(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var v=h.inactive?u:h.color;return _e.createElement("li",Bj({className:x,style:f,key:"legend-item-".concat(g)},Ef(n.props,h,g)),_e.createElement(Oj,{width:s,height:s,viewBox:d,style:p},n.renderIcon(h)),_e.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},m?m(y,h,g):y))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,s=n.align;if(!a||!a.length)return null;var o={padding:0,margin:0,textAlign:i==="horizontal"?s:"left"};return _e.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(F.PureComponent);Gg(hE,"displayName","Legend");Gg(hE,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var sbe=hw;function obe(){this.__data__=new sbe,this.size=0}var lbe=obe;function cbe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var ube=cbe;function dbe(e){return this.__data__.get(e)}var fbe=dbe;function hbe(e){return this.__data__.has(e)}var pbe=hbe,mbe=hw,gbe=eE,vbe=tE,xbe=200;function ybe(e,t){var r=this.__data__;if(r instanceof mbe){var n=r.__data__;if(!gbe||n.length<xbe-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new vbe(n)}return r.set(e,t),this.size=r.size,this}var bbe=ybe,wbe=hw,_be=lbe,Sbe=ube,Nbe=fbe,jbe=pbe,Abe=bbe;function Cp(e){var t=this.__data__=new wbe(e);this.size=t.size}Cp.prototype.clear=_be;Cp.prototype.delete=Sbe;Cp.prototype.get=Nbe;Cp.prototype.has=jbe;Cp.prototype.set=Abe;var PU=Cp,Ebe="__lodash_hash_undefined__";function Tbe(e){return this.__data__.set(e,Ebe),this}var Cbe=Tbe;function kbe(e){return this.__data__.has(e)}var Obe=kbe,Pbe=tE,Lbe=Cbe,Ibe=Obe;function Ob(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Pbe;++t<r;)this.add(e[t])}Ob.prototype.add=Ob.prototype.push=Lbe;Ob.prototype.has=Ibe;var LU=Ob;function Rbe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var IU=Rbe;function Dbe(e,t){return e.has(t)}var RU=Dbe,Mbe=LU,Fbe=IU,$be=RU,Bbe=1,Ube=2;function zbe(e,t,r,n,a,i){var s=r&Bbe,o=e.length,c=t.length;if(o!=c&&!(s&&c>o))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var f=-1,p=!0,h=r&Ube?new Mbe:void 0;for(i.set(e,t),i.set(t,e);++f<o;){var g=e[f],m=t[f];if(n)var x=s?n(m,g,f,t,e,i):n(g,m,f,e,t,i);if(x!==void 0){if(x)continue;p=!1;break}if(h){if(!Fbe(t,function(y,v){if(!$be(h,v)&&(g===y||a(g,y,r,n,i)))return h.push(v)})){p=!1;break}}else if(!(g===m||a(g,m,r,n,i))){p=!1;break}}return i.delete(e),i.delete(t),p}var DU=zbe,qbe=Sl,Hbe=qbe.Uint8Array,Wbe=Hbe;function Vbe(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var Gbe=Vbe;function Kbe(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var pE=Kbe,IP=e1,RP=Wbe,Xbe=Z3,Ybe=DU,Jbe=Gbe,Qbe=pE,Zbe=1,e2e=2,t2e="[object Boolean]",r2e="[object Date]",n2e="[object Error]",a2e="[object Map]",i2e="[object Number]",s2e="[object RegExp]",o2e="[object Set]",l2e="[object String]",c2e="[object Symbol]",u2e="[object ArrayBuffer]",d2e="[object DataView]",DP=IP?IP.prototype:void 0,lS=DP?DP.valueOf:void 0;function f2e(e,t,r,n,a,i,s){switch(r){case d2e:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case u2e:return!(e.byteLength!=t.byteLength||!i(new RP(e),new RP(t)));case t2e:case r2e:case i2e:return Xbe(+e,+t);case n2e:return e.name==t.name&&e.message==t.message;case s2e:case l2e:return e==t+"";case a2e:var o=Jbe;case o2e:var c=n&Zbe;if(o||(o=Qbe),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;n|=e2e,s.set(e,t);var d=Ybe(o(e),o(t),n,a,i,s);return s.delete(e),d;case c2e:if(lS)return lS.call(e)==lS.call(t)}return!1}var h2e=f2e;function p2e(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var MU=p2e,m2e=MU,g2e=ls;function v2e(e,t,r){var n=t(e);return g2e(e)?n:m2e(n,r(e))}var x2e=v2e;function y2e(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[a++]=s)}return i}var b2e=y2e;function w2e(){return[]}var _2e=w2e,S2e=b2e,N2e=_2e,j2e=Object.prototype,A2e=j2e.propertyIsEnumerable,MP=Object.getOwnPropertySymbols,E2e=MP?function(e){return e==null?[]:(e=Object(e),S2e(MP(e),function(t){return A2e.call(e,t)}))}:N2e,T2e=E2e;function C2e(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var k2e=C2e,O2e=Lc,P2e=Ic,L2e="[object Arguments]";function I2e(e){return P2e(e)&&O2e(e)==L2e}var R2e=I2e,FP=R2e,D2e=Ic,FU=Object.prototype,M2e=FU.hasOwnProperty,F2e=FU.propertyIsEnumerable,$2e=FP(function(){return arguments}())?FP:function(e){return D2e(e)&&M2e.call(e,"callee")&&!F2e.call(e,"callee")},mE=$2e,Pb={exports:{}};function B2e(){return!1}var U2e=B2e;Pb.exports;(function(e,t){var r=Sl,n=U2e,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===a,o=s?r.Buffer:void 0,c=o?o.isBuffer:void 0,u=c||n;e.exports=u})(Pb,Pb.exports);var $U=Pb.exports,z2e=9007199254740991,q2e=/^(?:0|[1-9]\d*)$/;function H2e(e,t){var r=typeof e;return t=t??z2e,!!t&&(r=="number"||r!="symbol"&&q2e.test(e))&&e>-1&&e%1==0&&e<t}var gE=H2e,W2e=9007199254740991;function V2e(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=W2e}var vE=V2e,G2e=Lc,K2e=vE,X2e=Ic,Y2e="[object Arguments]",J2e="[object Array]",Q2e="[object Boolean]",Z2e="[object Date]",ewe="[object Error]",twe="[object Function]",rwe="[object Map]",nwe="[object Number]",awe="[object Object]",iwe="[object RegExp]",swe="[object Set]",owe="[object String]",lwe="[object WeakMap]",cwe="[object ArrayBuffer]",uwe="[object DataView]",dwe="[object Float32Array]",fwe="[object Float64Array]",hwe="[object Int8Array]",pwe="[object Int16Array]",mwe="[object Int32Array]",gwe="[object Uint8Array]",vwe="[object Uint8ClampedArray]",xwe="[object Uint16Array]",ywe="[object Uint32Array]",dn={};dn[dwe]=dn[fwe]=dn[hwe]=dn[pwe]=dn[mwe]=dn[gwe]=dn[vwe]=dn[xwe]=dn[ywe]=!0;dn[Y2e]=dn[J2e]=dn[cwe]=dn[Q2e]=dn[uwe]=dn[Z2e]=dn[ewe]=dn[twe]=dn[rwe]=dn[nwe]=dn[awe]=dn[iwe]=dn[swe]=dn[owe]=dn[lwe]=!1;function bwe(e){return X2e(e)&&K2e(e.length)&&!!dn[G2e(e)]}var wwe=bwe;function _we(e){return function(t){return e(t)}}var BU=_we,Lb={exports:{}};Lb.exports;(function(e,t){var r=KB,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,s=i&&r.process,o=function(){try{var c=a&&a.require&&a.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();e.exports=o})(Lb,Lb.exports);var Swe=Lb.exports,Nwe=wwe,jwe=BU,$P=Swe,BP=$P&&$P.isTypedArray,Awe=BP?jwe(BP):Nwe,UU=Awe,Ewe=k2e,Twe=mE,Cwe=ls,kwe=$U,Owe=gE,Pwe=UU,Lwe=Object.prototype,Iwe=Lwe.hasOwnProperty;function Rwe(e,t){var r=Cwe(e),n=!r&&Twe(e),a=!r&&!n&&kwe(e),i=!r&&!n&&!a&&Pwe(e),s=r||n||a||i,o=s?Ewe(e.length,String):[],c=o.length;for(var u in e)(t||Iwe.call(e,u))&&!(s&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Owe(u,c)))&&o.push(u);return o}var Dwe=Rwe,Mwe=Object.prototype;function Fwe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Mwe;return e===r}var $we=Fwe;function Bwe(e,t){return function(r){return e(t(r))}}var zU=Bwe,Uwe=zU,zwe=Uwe(Object.keys,Object),qwe=zwe,Hwe=$we,Wwe=qwe,Vwe=Object.prototype,Gwe=Vwe.hasOwnProperty;function Kwe(e){if(!Hwe(e))return Wwe(e);var t=[];for(var r in Object(e))Gwe.call(e,r)&&r!="constructor"&&t.push(r);return t}var Xwe=Kwe,Ywe=Q3,Jwe=vE;function Qwe(e){return e!=null&&Jwe(e.length)&&!Ywe(e)}var n1=Qwe,Zwe=Dwe,e_e=Xwe,t_e=n1;function r_e(e){return t_e(e)?Zwe(e):e_e(e)}var kw=r_e,n_e=x2e,a_e=T2e,i_e=kw;function s_e(e){return n_e(e,i_e,a_e)}var o_e=s_e,UP=o_e,l_e=1,c_e=Object.prototype,u_e=c_e.hasOwnProperty;function d_e(e,t,r,n,a,i){var s=r&l_e,o=UP(e),c=o.length,u=UP(t),d=u.length;if(c!=d&&!s)return!1;for(var f=c;f--;){var p=o[f];if(!(s?p in t:u_e.call(t,p)))return!1}var h=i.get(e),g=i.get(t);if(h&&g)return h==t&&g==e;var m=!0;i.set(e,t),i.set(t,e);for(var x=s;++f<c;){p=o[f];var y=e[p],v=t[p];if(n)var b=s?n(v,y,p,t,e,i):n(y,v,p,e,t,i);if(!(b===void 0?y===v||a(y,v,r,n,i):b)){m=!1;break}x||(x=p=="constructor")}if(m&&!x){var S=e.constructor,_=t.constructor;S!=_&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof _=="function"&&_ instanceof _)&&(m=!1)}return i.delete(e),i.delete(t),m}var f_e=d_e,h_e=Wf,p_e=Sl,m_e=h_e(p_e,"DataView"),g_e=m_e,v_e=Wf,x_e=Sl,y_e=v_e(x_e,"Promise"),b_e=y_e,w_e=Wf,__e=Sl,S_e=w_e(__e,"Set"),qU=S_e,N_e=Wf,j_e=Sl,A_e=N_e(j_e,"WeakMap"),E_e=A_e,zj=g_e,qj=eE,Hj=b_e,Wj=qU,Vj=E_e,HU=Lc,kp=YB,zP="[object Map]",T_e="[object Object]",qP="[object Promise]",HP="[object Set]",WP="[object WeakMap]",VP="[object DataView]",C_e=kp(zj),k_e=kp(qj),O_e=kp(Hj),P_e=kp(Wj),L_e=kp(Vj),Id=HU;(zj&&Id(new zj(new ArrayBuffer(1)))!=VP||qj&&Id(new qj)!=zP||Hj&&Id(Hj.resolve())!=qP||Wj&&Id(new Wj)!=HP||Vj&&Id(new Vj)!=WP)&&(Id=function(e){var t=HU(e),r=t==T_e?e.constructor:void 0,n=r?kp(r):"";if(n)switch(n){case C_e:return VP;case k_e:return zP;case O_e:return qP;case P_e:return HP;case L_e:return WP}return t});var I_e=Id,cS=PU,R_e=DU,D_e=h2e,M_e=f_e,GP=I_e,KP=ls,XP=$U,F_e=UU,$_e=1,YP="[object Arguments]",JP="[object Array]",Dx="[object Object]",B_e=Object.prototype,QP=B_e.hasOwnProperty;function U_e(e,t,r,n,a,i){var s=KP(e),o=KP(t),c=s?JP:GP(e),u=o?JP:GP(t);c=c==YP?Dx:c,u=u==YP?Dx:u;var d=c==Dx,f=u==Dx,p=c==u;if(p&&XP(e)){if(!XP(t))return!1;s=!0,d=!1}if(p&&!d)return i||(i=new cS),s||F_e(e)?R_e(e,t,r,n,a,i):D_e(e,t,c,r,n,a,i);if(!(r&$_e)){var h=d&&QP.call(e,"__wrapped__"),g=f&&QP.call(t,"__wrapped__");if(h||g){var m=h?e.value():e,x=g?t.value():t;return i||(i=new cS),a(m,x,r,n,i)}}return p?(i||(i=new cS),M_e(e,t,r,n,a,i)):!1}var z_e=U_e,q_e=z_e,ZP=Ic;function WU(e,t,r,n,a){return e===t?!0:e==null||t==null||!ZP(e)&&!ZP(t)?e!==e&&t!==t:q_e(e,t,r,n,WU,a)}var xE=WU,H_e=PU,W_e=xE,V_e=1,G_e=2;function K_e(e,t,r,n){var a=r.length,i=a,s=!n;if(e==null)return!i;for(e=Object(e);a--;){var o=r[a];if(s&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++a<i;){o=r[a];var c=o[0],u=e[c],d=o[1];if(s&&o[2]){if(u===void 0&&!(c in e))return!1}else{var f=new H_e;if(n)var p=n(u,d,c,e,t,f);if(!(p===void 0?W_e(d,u,V_e|G_e,n,f):p))return!1}}return!0}var X_e=K_e,Y_e=rd;function J_e(e){return e===e&&!Y_e(e)}var VU=J_e,Q_e=VU,Z_e=kw;function e5e(e){for(var t=Z_e(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,Q_e(a)]}return t}var t5e=e5e;function r5e(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var GU=r5e,n5e=X_e,a5e=t5e,i5e=GU;function s5e(e){var t=a5e(e);return t.length==1&&t[0][2]?i5e(t[0][0],t[0][1]):function(r){return r===e||n5e(r,e,t)}}var o5e=s5e;function l5e(e,t){return e!=null&&t in Object(e)}var c5e=l5e,u5e=tU,d5e=mE,f5e=ls,h5e=gE,p5e=vE,m5e=mw;function g5e(e,t,r){t=u5e(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var s=m5e(t[n]);if(!(i=e!=null&&r(e,s)))break;e=e[s]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&p5e(a)&&h5e(s,a)&&(f5e(e)||d5e(e)))}var v5e=g5e,x5e=c5e,y5e=v5e;function b5e(e,t){return e!=null&&y5e(e,t,x5e)}var w5e=b5e,_5e=xE,S5e=rU,N5e=w5e,j5e=J3,A5e=VU,E5e=GU,T5e=mw,C5e=1,k5e=2;function O5e(e,t){return j5e(e)&&A5e(t)?E5e(T5e(e),t):function(r){var n=S5e(r,e);return n===void 0&&n===t?N5e(r,e):_5e(t,n,C5e|k5e)}}var P5e=O5e;function L5e(e){return e}var Op=L5e;function I5e(e){return function(t){return t==null?void 0:t[e]}}var R5e=I5e,D5e=aE;function M5e(e){return function(t){return D5e(t,e)}}var F5e=M5e,$5e=R5e,B5e=F5e,U5e=J3,z5e=mw;function q5e(e){return U5e(e)?$5e(z5e(e)):B5e(e)}var H5e=q5e,W5e=o5e,V5e=P5e,G5e=Op,K5e=ls,X5e=H5e;function Y5e(e){return typeof e=="function"?e:e==null?G5e:typeof e=="object"?K5e(e)?V5e(e[0],e[1]):W5e(e):X5e(e)}var Nl=Y5e;function J5e(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var KU=J5e;function Q5e(e){return e!==e}var Z5e=Q5e;function eSe(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var tSe=eSe,rSe=KU,nSe=Z5e,aSe=tSe;function iSe(e,t,r){return t===t?aSe(e,t,r):rSe(e,nSe,r)}var sSe=iSe,oSe=sSe;function lSe(e,t){var r=e==null?0:e.length;return!!r&&oSe(e,t,0)>-1}var cSe=lSe;function uSe(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var dSe=uSe;function fSe(){}var hSe=fSe,uS=qU,pSe=hSe,mSe=pE,gSe=1/0,vSe=uS&&1/mSe(new uS([,-0]))[1]==gSe?function(e){return new uS(e)}:pSe,xSe=vSe,ySe=LU,bSe=cSe,wSe=dSe,_Se=RU,SSe=xSe,NSe=pE,jSe=200;function ASe(e,t,r){var n=-1,a=bSe,i=e.length,s=!0,o=[],c=o;if(r)s=!1,a=wSe;else if(i>=jSe){var u=t?null:SSe(e);if(u)return NSe(u);s=!1,a=_Se,c=new ySe}else c=t?[]:o;e:for(;++n<i;){var d=e[n],f=t?t(d):d;if(d=r||d!==0?d:0,s&&f===f){for(var p=c.length;p--;)if(c[p]===f)continue e;t&&c.push(f),o.push(d)}else a(c,f,r)||(c!==o&&c.push(f),o.push(d))}return o}var ESe=ASe,TSe=Nl,CSe=ESe;function kSe(e,t){return e&&e.length?CSe(e,TSe(t)):[]}var OSe=kSe;const e8=Pr(OSe);function XU(e,t,r){return t===!0?e8(e,r):Xt(t)?e8(e,t):e}function U0(e){"@babel/helpers - typeof";return U0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U0(e)}var PSe=["ref"];function t8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t8(Object(r),!0).forEach(function(n){Ow(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JU(n.key),n)}}function ISe(e,t,r){return t&&r8(e.prototype,t),r&&r8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function RSe(e,t,r){return t=Ib(t),DSe(e,YU()?Reflect.construct(t,r||[],Ib(e).constructor):t.apply(e,r))}function DSe(e,t){if(t&&(U0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MSe(e)}function MSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YU=function(){return!!e})()}function Ib(e){return Ib=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ib(e)}function FSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gj(e,t)}function Gj(e,t){return Gj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Gj(e,t)}function Ow(e,t,r){return t=JU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JU(e){var t=$Se(e,"string");return U0(t)=="symbol"?t:t+""}function $Se(e,t){if(U0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(U0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function BSe(e,t){if(e==null)return{};var r=USe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function USe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function zSe(e){return e.value}function qSe(e,t){if(_e.isValidElement(e))return _e.cloneElement(e,t);if(typeof e=="function")return _e.createElement(e,t);t.ref;var r=BSe(t,PSe);return _e.createElement(hE,r)}var n8=1,cc=function(e){function t(){var r;LSe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=RSe(this,t,[].concat(a)),Ow(r,"lastBoundingBox",{width:-1,height:-1}),r}return FSe(t,e),ISe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>n8||Math.abs(a.height-this.lastBoundingBox.height)>n8)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?zl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,s=a.align,o=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,p;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(s==="center"&&i==="vertical"){var h=this.getBBoxSnapshot();f={left:((u||0)-h.width)/2}}else f=s==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(o==="middle"){var g=this.getBBoxSnapshot();p={top:((d||0)-g.height)/2}}else p=o==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return zl(zl({},f),p)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,s=a.width,o=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=zl(zl({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(c)),c);return _e.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(h){n.wrapperNode=h}},qSe(i,zl(zl({},this.props),{},{payload:XU(d,u,zSe)})))}}],[{key:"getWithHeight",value:function(n,a){var i=zl(zl({},this.defaultProps),n.props),s=i.layout;return s==="vertical"&&nt(n.props.height)?{height:n.props.height}:s==="horizontal"?{width:n.props.width||a}:null}}])}(F.PureComponent);Ow(cc,"displayName","Legend");Ow(cc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var a8=e1,HSe=mE,WSe=ls,i8=a8?a8.isConcatSpreadable:void 0;function VSe(e){return WSe(e)||HSe(e)||!!(i8&&e&&e[i8])}var GSe=VSe,KSe=MU,XSe=GSe;function QU(e,t,r,n,a){var i=-1,s=e.length;for(r||(r=XSe),a||(a=[]);++i<s;){var o=e[i];t>0&&r(o)?t>1?QU(o,t-1,r,n,a):KSe(a,o):n||(a[a.length]=o)}return a}var ZU=QU;function YSe(e){return function(t,r,n){for(var a=-1,i=Object(t),s=n(t),o=s.length;o--;){var c=s[e?o:++a];if(r(i[c],c,i)===!1)break}return t}}var JSe=YSe,QSe=JSe,ZSe=QSe(),eNe=ZSe,tNe=eNe,rNe=kw;function nNe(e,t){return e&&tNe(e,t,rNe)}var ez=nNe,aNe=n1;function iNe(e,t){return function(r,n){if(r==null)return r;if(!aNe(r))return e(r,n);for(var a=r.length,i=t?a:-1,s=Object(r);(t?i--:++i<a)&&n(s[i],i,s)!==!1;);return r}}var sNe=iNe,oNe=ez,lNe=sNe,cNe=lNe(oNe),yE=cNe,uNe=yE,dNe=n1;function fNe(e,t){var r=-1,n=dNe(e)?Array(e.length):[];return uNe(e,function(a,i,s){n[++r]=t(a,i,s)}),n}var tz=fNe;function hNe(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var pNe=hNe,s8=Np;function mNe(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=s8(e),s=t!==void 0,o=t===null,c=t===t,u=s8(t);if(!o&&!u&&!i&&e>t||i&&s&&c&&!o&&!u||n&&s&&c||!r&&c||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||o&&r&&a||!s&&a||!c)return-1}return 0}var gNe=mNe,vNe=gNe;function xNe(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,s=a.length,o=r.length;++n<s;){var c=vNe(a[n],i[n]);if(c){if(n>=o)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var yNe=xNe,dS=nE,bNe=aE,wNe=Nl,_Ne=tz,SNe=pNe,NNe=BU,jNe=yNe,ANe=Op,ENe=ls;function TNe(e,t,r){t.length?t=dS(t,function(i){return ENe(i)?function(s){return bNe(s,i.length===1?i[0]:i)}:i}):t=[ANe];var n=-1;t=dS(t,NNe(wNe));var a=_Ne(e,function(i,s,o){var c=dS(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return SNe(a,function(i,s){return jNe(i,s,r)})}var CNe=TNe;function kNe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var ONe=kNe,PNe=ONe,o8=Math.max;function LNe(e,t,r){return t=o8(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=o8(n.length-t,0),s=Array(i);++a<i;)s[a]=n[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=n[a];return o[t]=r(s),PNe(e,this,o)}}var INe=LNe;function RNe(e){return function(){return e}}var DNe=RNe,MNe=Wf,FNe=function(){try{var e=MNe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),rz=FNe,$Ne=DNe,l8=rz,BNe=Op,UNe=l8?function(e,t){return l8(e,"toString",{configurable:!0,enumerable:!1,value:$Ne(t),writable:!0})}:BNe,zNe=UNe,qNe=800,HNe=16,WNe=Date.now;function VNe(e){var t=0,r=0;return function(){var n=WNe(),a=HNe-(n-r);if(r=n,a>0){if(++t>=qNe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var GNe=VNe,KNe=zNe,XNe=GNe,YNe=XNe(KNe),JNe=YNe,QNe=Op,ZNe=INe,eje=JNe;function tje(e,t){return eje(ZNe(e,t,QNe),e+"")}var rje=tje,nje=Z3,aje=n1,ije=gE,sje=rd;function oje(e,t,r){if(!sje(r))return!1;var n=typeof t;return(n=="number"?aje(r)&&ije(t,r.length):n=="string"&&t in r)?nje(r[t],e):!1}var Pw=oje,lje=ZU,cje=CNe,uje=rje,c8=Pw,dje=uje(function(e,t){if(e==null)return[];var r=t.length;return r>1&&c8(e,t[0],t[1])?t=[]:r>2&&c8(t[0],t[1],t[2])&&(t=[t[0]]),cje(e,lje(t,1),[])}),fje=dje;const bE=Pr(fje);function Kg(e){"@babel/helpers - typeof";return Kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kg(e)}function Kj(){return Kj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kj.apply(this,arguments)}function hje(e,t){return vje(e)||gje(e,t)||mje(e,t)||pje()}function pje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mje(e,t){if(e){if(typeof e=="string")return u8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u8(e,t)}}function u8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gje(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function vje(e){if(Array.isArray(e))return e}function d8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d8(Object(r),!0).forEach(function(n){xje(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xje(e,t,r){return t=yje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yje(e){var t=bje(e,"string");return Kg(t)=="symbol"?t:t+""}function bje(e,t){if(Kg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Kg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wje(e){return Array.isArray(e)&&Sa(e[0])&&Sa(e[1])?e.join(" ~ "):e}var _je=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,s=t.itemStyle,o=s===void 0?{}:s,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,p=t.itemSorter,h=t.wrapperClassName,g=t.labelClassName,m=t.label,x=t.labelFormatter,y=t.accessibilityLayer,v=y===void 0?!1:y,b=function(){if(d&&d.length){var I={padding:0,margin:0},D=(p?bE(d,p):d).map(function(z,Y){if(z.type==="none")return null;var se=fS({display:"block",paddingTop:4,paddingBottom:4,color:z.color||"#000"},o),ee=z.formatter||f||wje,J=z.value,oe=z.name,we=J,xe=oe;if(ee&&we!=null&&xe!=null){var k=ee(J,oe,z,Y,d);if(Array.isArray(k)){var M=hje(k,2);we=M[0],xe=M[1]}else we=k}return _e.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Y),style:se},Sa(xe)?_e.createElement("span",{className:"recharts-tooltip-item-name"},xe):null,Sa(xe)?_e.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,_e.createElement("span",{className:"recharts-tooltip-item-value"},we),_e.createElement("span",{className:"recharts-tooltip-item-unit"},z.unit||""))});return _e.createElement("ul",{className:"recharts-tooltip-item-list",style:I},D)}return null},S=fS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),_=fS({margin:0},u),A=!dr(m),j=A?m:"",E=cr("recharts-default-tooltip",h),T=cr("recharts-tooltip-label",g);A&&x&&d!==void 0&&d!==null&&(j=x(m,d));var L=v?{role:"status","aria-live":"assertive"}:{};return _e.createElement("div",Kj({className:E,style:S},L),_e.createElement("p",{className:T,style:_},_e.isValidElement(j)?j:"".concat(j)),b())};function Xg(e){"@babel/helpers - typeof";return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xg(e)}function Mx(e,t,r){return t=Sje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sje(e){var t=Nje(e,"string");return Xg(t)=="symbol"?t:t+""}function Nje(e,t){if(Xg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wm="recharts-tooltip-wrapper",jje={visibility:"hidden"};function Aje(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return cr(wm,Mx(Mx(Mx(Mx({},"".concat(wm,"-right"),nt(r)&&t&&nt(t.x)&&r>=t.x),"".concat(wm,"-left"),nt(r)&&t&&nt(t.x)&&r<t.x),"".concat(wm,"-bottom"),nt(n)&&t&&nt(t.y)&&n>=t.y),"".concat(wm,"-top"),nt(n)&&t&&nt(t.y)&&n<t.y))}function f8(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,s=e.reverseDirection,o=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&nt(i[n]))return i[n];var d=r[n]-o-a,f=r[n]+a;if(t[n])return s[n]?d:f;if(s[n]){var p=d,h=c[n];return p<h?Math.max(f,c[n]):Math.max(d,c[n])}var g=f+o,m=c[n]+u;return g>m?Math.max(d,c[n]):Math.max(f,c[n])}function Eje(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Tje(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,s=e.tooltipBox,o=e.useTranslate3d,c=e.viewBox,u,d,f;return s.height>0&&s.width>0&&r?(d=f8({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),f=f8({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=Eje({translateX:d,translateY:f,useTranslate3d:o})):u=jje,{cssProperties:u,cssClasses:Aje({translateX:d,translateY:f,coordinate:r})}}function z0(e){"@babel/helpers - typeof";return z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z0(e)}function h8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function p8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h8(Object(r),!0).forEach(function(n){Yj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kje(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,az(n.key),n)}}function Oje(e,t,r){return t&&kje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pje(e,t,r){return t=Rb(t),Lje(e,nz()?Reflect.construct(t,r||[],Rb(e).constructor):t.apply(e,r))}function Lje(e,t){if(t&&(z0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ije(e)}function Ije(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nz=function(){return!!e})()}function Rb(e){return Rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rb(e)}function Rje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xj(e,t)}function Xj(e,t){return Xj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Xj(e,t)}function Yj(e,t,r){return t=az(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function az(e){var t=Dje(e,"string");return z0(t)=="symbol"?t:t+""}function Dje(e,t){if(z0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(z0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var m8=1,Mje=function(e){function t(){var r;Cje(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Pje(this,t,[].concat(a)),Yj(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Yj(r,"handleKeyDown",function(s){if(s.key==="Escape"){var o,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&o!==void 0?o:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return Rje(t,e),Oje(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>m8||Math.abs(n.height-this.state.lastBoundingBox.height)>m8)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,p=a.isAnimationActive,h=a.offset,g=a.position,m=a.reverseDirection,x=a.useTranslate3d,y=a.viewBox,v=a.wrapperStyle,b=Tje({allowEscapeViewBox:s,coordinate:d,offsetTopLeft:h,position:g,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:y}),S=b.cssClasses,_=b.cssProperties,A=p8(p8({transition:p&&i?"transform ".concat(o,"ms ").concat(c):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},v);return _e.createElement("div",{tabIndex:-1,className:S,style:A,ref:function(E){n.wrapperNode=E}},u)}}])}(F.PureComponent),Fje=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Pp={isSsr:Fje()};function q0(e){"@babel/helpers - typeof";return q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q0(e)}function g8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function v8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g8(Object(r),!0).forEach(function(n){wE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bje(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sz(n.key),n)}}function Uje(e,t,r){return t&&Bje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zje(e,t,r){return t=Db(t),qje(e,iz()?Reflect.construct(t,r||[],Db(e).constructor):t.apply(e,r))}function qje(e,t){if(t&&(q0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hje(e)}function Hje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iz=function(){return!!e})()}function Db(e){return Db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Db(e)}function Wje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jj(e,t)}function Jj(e,t){return Jj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Jj(e,t)}function wE(e,t,r){return t=sz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sz(e){var t=Vje(e,"string");return q0(t)=="symbol"?t:t+""}function Vje(e,t){if(q0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(q0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Gje(e){return e.dataKey}function Kje(e,t){return _e.isValidElement(e)?_e.cloneElement(e,t):typeof e=="function"?_e.createElement(e,t):_e.createElement(_je,t)}var Oa=function(e){function t(){return $je(this,t),zje(this,t,arguments)}return Wje(t,e),Uje(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,p=a.isAnimationActive,h=a.offset,g=a.payload,m=a.payloadUniqBy,x=a.position,y=a.reverseDirection,v=a.useTranslate3d,b=a.viewBox,S=a.wrapperStyle,_=g??[];f&&_.length&&(_=XU(g.filter(function(j){return j.value!=null&&(j.hide!==!0||n.props.includeHidden)}),m,Gje));var A=_.length>0;return _e.createElement(Mje,{allowEscapeViewBox:s,animationDuration:o,animationEasing:c,isAnimationActive:p,active:i,coordinate:d,hasPayload:A,offset:h,position:x,reverseDirection:y,useTranslate3d:v,viewBox:b,wrapperStyle:S},Kje(u,v8(v8({},this.props),{},{payload:_})))}}])}(F.PureComponent);wE(Oa,"displayName","Tooltip");wE(Oa,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Pp.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Xje=Sl,Yje=function(){return Xje.Date.now()},Jje=Yje,Qje=/\s/;function Zje(e){for(var t=e.length;t--&&Qje.test(e.charAt(t)););return t}var e4e=Zje,t4e=e4e,r4e=/^\s+/;function n4e(e){return e&&e.slice(0,t4e(e)+1).replace(r4e,"")}var a4e=n4e,i4e=a4e,x8=rd,s4e=Np,y8=NaN,o4e=/^[-+]0x[0-9a-f]+$/i,l4e=/^0b[01]+$/i,c4e=/^0o[0-7]+$/i,u4e=parseInt;function d4e(e){if(typeof e=="number")return e;if(s4e(e))return y8;if(x8(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=x8(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=i4e(e);var r=l4e.test(e);return r||c4e.test(e)?u4e(e.slice(2),r?2:8):o4e.test(e)?y8:+e}var oz=d4e,f4e=rd,hS=Jje,b8=oz,h4e="Expected a function",p4e=Math.max,m4e=Math.min;function g4e(e,t,r){var n,a,i,s,o,c,u=0,d=!1,f=!1,p=!0;if(typeof e!="function")throw new TypeError(h4e);t=b8(t)||0,f4e(r)&&(d=!!r.leading,f="maxWait"in r,i=f?p4e(b8(r.maxWait)||0,t):i,p="trailing"in r?!!r.trailing:p);function h(A){var j=n,E=a;return n=a=void 0,u=A,s=e.apply(E,j),s}function g(A){return u=A,o=setTimeout(y,t),d?h(A):s}function m(A){var j=A-c,E=A-u,T=t-j;return f?m4e(T,i-E):T}function x(A){var j=A-c,E=A-u;return c===void 0||j>=t||j<0||f&&E>=i}function y(){var A=hS();if(x(A))return v(A);o=setTimeout(y,m(A))}function v(A){return o=void 0,p&&n?h(A):(n=a=void 0,s)}function b(){o!==void 0&&clearTimeout(o),u=0,n=c=a=o=void 0}function S(){return o===void 0?s:v(hS())}function _(){var A=hS(),j=x(A);if(n=arguments,a=this,c=A,j){if(o===void 0)return g(c);if(f)return clearTimeout(o),o=setTimeout(y,t),h(c)}return o===void 0&&(o=setTimeout(y,t)),s}return _.cancel=b,_.flush=S,_}var v4e=g4e,x4e=v4e,y4e=rd,b4e="Expected a function";function w4e(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(b4e);return y4e(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),x4e(e,t,{leading:n,maxWait:t,trailing:a})}var _4e=w4e;const lz=Pr(_4e);function Yg(e){"@babel/helpers - typeof";return Yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yg(e)}function w8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w8(Object(r),!0).forEach(function(n){S4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S4e(e,t,r){return t=N4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N4e(e){var t=j4e(e,"string");return Yg(t)=="symbol"?t:t+""}function j4e(e,t){if(Yg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A4e(e,t){return k4e(e)||C4e(e,t)||T4e(e,t)||E4e()}function E4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T4e(e,t){if(e){if(typeof e=="string")return _8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _8(e,t)}}function _8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C4e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function k4e(e){if(Array.isArray(e))return e}var uc=F.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,s=i===void 0?"100%":i,o=e.height,c=o===void 0?"100%":o,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,p=e.maxHeight,h=e.children,g=e.debounce,m=g===void 0?0:g,x=e.id,y=e.className,v=e.onResize,b=e.style,S=b===void 0?{}:b,_=F.useRef(null),A=F.useRef();A.current=v,F.useImperativeHandle(t,function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})});var j=F.useState({containerWidth:a.width,containerHeight:a.height}),E=A4e(j,2),T=E[0],L=E[1],O=F.useCallback(function(D,z){L(function(Y){var se=Math.round(D),ee=Math.round(z);return Y.containerWidth===se&&Y.containerHeight===ee?Y:{containerWidth:se,containerHeight:ee}})},[]);F.useEffect(function(){var D=function(oe){var we,xe=oe[0].contentRect,k=xe.width,M=xe.height;O(k,M),(we=A.current)===null||we===void 0||we.call(A,k,M)};m>0&&(D=lz(D,m,{trailing:!0,leading:!1}));var z=new ResizeObserver(D),Y=_.current.getBoundingClientRect(),se=Y.width,ee=Y.height;return O(se,ee),z.observe(_.current),function(){z.disconnect()}},[O,m]);var I=F.useMemo(function(){var D=T.containerWidth,z=T.containerHeight;if(D<0||z<0)return null;Bo(Gd(s)||Gd(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,c),Bo(!r||r>0,"The aspect(%s) must be greater than zero.",r);var Y=Gd(s)?D:s,se=Gd(c)?z:c;r&&r>0&&(Y?se=Y/r:se&&(Y=se*r),p&&se>p&&(se=p)),Bo(Y>0||se>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Y,se,s,c,d,f,r);var ee=!Array.isArray(h)&&lc(h.type).endsWith("Chart");return _e.Children.map(h,function(J){return _e.isValidElement(J)?F.cloneElement(J,Fx({width:Y,height:se},ee?{style:Fx({height:"100%",width:"100%",maxHeight:se,maxWidth:Y},J.props.style)}:{})):J})},[r,h,c,p,f,d,T,s]);return _e.createElement("div",{id:x?"".concat(x):void 0,className:cr("recharts-responsive-container",y),style:Fx(Fx({},S),{},{width:s,height:c,minWidth:d,minHeight:f,maxHeight:p}),ref:_},I)}),Rc=function(t){return null};Rc.displayName="Cell";function Jg(e){"@babel/helpers - typeof";return Jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jg(e)}function S8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S8(Object(r),!0).forEach(function(n){O4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O4e(e,t,r){return t=P4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P4e(e){var t=L4e(e,"string");return Jg(t)=="symbol"?t:t+""}function L4e(e,t){if(Jg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Jg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gh={widthCache:{},cacheCount:0},I4e=2e3,R4e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},N8="recharts_measurement_span";function D4e(e){var t=Qj({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var sg=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Pp.isSsr)return{width:0,height:0};var n=D4e(r),a=JSON.stringify({text:t,copyStyle:n});if(gh.widthCache[a])return gh.widthCache[a];try{var i=document.getElementById(N8);i||(i=document.createElement("span"),i.setAttribute("id",N8),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var s=Qj(Qj({},R4e),n);Object.assign(i.style,s),i.textContent="".concat(t);var o=i.getBoundingClientRect(),c={width:o.width,height:o.height};return gh.widthCache[a]=c,++gh.cacheCount>I4e&&(gh.cacheCount=0,gh.widthCache={}),c}catch{return{width:0,height:0}}},M4e=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Qg(e){"@babel/helpers - typeof";return Qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qg(e)}function Mb(e,t){return U4e(e)||B4e(e,t)||$4e(e,t)||F4e()}function F4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $4e(e,t){if(e){if(typeof e=="string")return j8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j8(e,t)}}function j8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function B4e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function U4e(e){if(Array.isArray(e))return e}function z4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,H4e(n.key),n)}}function q4e(e,t,r){return t&&A8(e.prototype,t),r&&A8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function H4e(e){var t=W4e(e,"string");return Qg(t)=="symbol"?t:t+""}function W4e(e,t){if(Qg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var E8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,T8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,V4e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,G4e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,cz={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},K4e=Object.keys(cz),$h="NaN";function X4e(e,t){return e*cz[t]}var $x=function(){function e(t,r){z4e(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!V4e.test(r)&&(this.num=NaN,this.unit=""),K4e.includes(r)&&(this.num=X4e(t,r),this.unit="px")}return q4e(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=G4e.exec(r))!==null&&n!==void 0?n:[],i=Mb(a,3),s=i[1],o=i[2];return new e(parseFloat(s),o??"")}}])}();function uz(e){if(e.includes($h))return $h;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=E8.exec(t))!==null&&r!==void 0?r:[],a=Mb(n,4),i=a[1],s=a[2],o=a[3],c=$x.parse(i??""),u=$x.parse(o??""),d=s==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return $h;t=t.replace(E8,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,p=(f=T8.exec(t))!==null&&f!==void 0?f:[],h=Mb(p,4),g=h[1],m=h[2],x=h[3],y=$x.parse(g??""),v=$x.parse(x??""),b=m==="+"?y.add(v):y.subtract(v);if(b.isNaN())return $h;t=t.replace(T8,b.toString())}return t}var C8=/\(([^()]*)\)/;function Y4e(e){for(var t=e;t.includes("(");){var r=C8.exec(t),n=Mb(r,2),a=n[1];t=t.replace(C8,uz(a))}return t}function J4e(e){var t=e.replace(/\s+/g,"");return t=Y4e(t),t=uz(t),t}function Q4e(e){try{return J4e(e)}catch{return $h}}function pS(e){var t=Q4e(e.slice(5,-1));return t===$h?"":t}var Z4e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],eAe=["dx","dy","angle","className","breakAll"];function Zj(){return Zj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zj.apply(this,arguments)}function k8(e,t){if(e==null)return{};var r=tAe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function tAe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function O8(e,t){return iAe(e)||aAe(e,t)||nAe(e,t)||rAe()}function rAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nAe(e,t){if(e){if(typeof e=="string")return P8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P8(e,t)}}function P8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function aAe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function iAe(e){if(Array.isArray(e))return e}var dz=/[ \f\n\r\t\v\u2028\u2029]+/,fz=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];dr(r)||(n?i=r.toString().split(""):i=r.toString().split(dz));var s=i.map(function(c){return{word:c,width:sg(c,a).width}}),o=n?0:sg("",a).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},sAe=function(t,r,n,a,i){var s=t.maxLines,o=t.children,c=t.style,u=t.breakAll,d=nt(s),f=o,p=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y.reduce(function(se,ee){var J=ee.word,oe=ee.width,we=se[se.length-1];if(we&&(a==null||i||we.width+oe+n<Number(a)))we.words.push(J),we.width+=oe+n;else{var xe={words:[J],width:oe};se.push(xe)}return se},[])},h=p(r),g=function(Y){return Y.reduce(function(se,ee){return se.width>ee.width?se:ee})};if(!d)return h;for(var m="",x=function(Y){var se=f.slice(0,Y),ee=fz({breakAll:u,style:c,children:se+m}).wordsWithComputedWidth,J=p(ee),oe=J.length>s||g(J).width>Number(a);return[oe,J]},y=0,v=f.length-1,b=0,S;y<=v&&b<=f.length-1;){var _=Math.floor((y+v)/2),A=_-1,j=x(A),E=O8(j,2),T=E[0],L=E[1],O=x(_),I=O8(O,1),D=I[0];if(!T&&!D&&(y=_+1),T&&D&&(v=_-1),!T&&D){S=L;break}b++}return S||h},L8=function(t){var r=dr(t)?[]:t.toString().split(dz);return[{words:r}]},oAe=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,s=t.breakAll,o=t.maxLines;if((r||n)&&!Pp.isSsr){var c,u,d=fz({breakAll:s,children:a,style:i});if(d){var f=d.wordsWithComputedWidth,p=d.spaceWidth;c=f,u=p}else return L8(a);return sAe({breakAll:s,children:a,maxLines:o,style:i},c,u,r,n)}return L8(a)},I8="#808080",Tf=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,s=t.lineHeight,o=s===void 0?"1em":s,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,p=t.textAnchor,h=p===void 0?"start":p,g=t.verticalAnchor,m=g===void 0?"end":g,x=t.fill,y=x===void 0?I8:x,v=k8(t,Z4e),b=F.useMemo(function(){return oAe({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:f,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,f,v.style,v.width]),S=v.dx,_=v.dy,A=v.angle,j=v.className,E=v.breakAll,T=k8(v,eAe);if(!Sa(n)||!Sa(i))return null;var L=n+(nt(S)?S:0),O=i+(nt(_)?_:0),I;switch(m){case"start":I=pS("calc(".concat(u,")"));break;case"middle":I=pS("calc(".concat((b.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:I=pS("calc(".concat(b.length-1," * -").concat(o,")"));break}var D=[];if(f){var z=b[0].width,Y=v.width;D.push("scale(".concat((nt(Y)?Y/z:1)/z,")"))}return A&&D.push("rotate(".concat(A,", ").concat(L,", ").concat(O,")")),D.length&&(T.transform=D.join(" ")),_e.createElement("text",Zj({},Wt(T,!0),{x:L,y:O,className:cr("recharts-text",j),textAnchor:h,fill:y.includes("url")?I8:y}),b.map(function(se,ee){var J=se.words.join(E?"":" ");return _e.createElement("tspan",{x:L,dy:ee===0?I:o,key:"".concat(J,"-").concat(ee)},J)}))};function Bu(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function lAe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function _E(e){let t,r,n;e.length!==2?(t=Bu,r=(o,c)=>Bu(e(o),c),n=(o,c)=>e(o)-c):(t=e===Bu||e===lAe?e:cAe,r=e,n=e);function a(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function s(o,c,u=0,d=o.length){const f=a(o,c,u,d-1);return f>u&&n(o[f-1],c)>-n(o[f],c)?f-1:f}return{left:a,center:s,right:i}}function cAe(){return 0}function hz(e){return e===null?NaN:+e}function*uAe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const dAe=_E(Bu),a1=dAe.right;_E(hz).center;class R8 extends Map{constructor(t,r=pAe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(D8(this,t))}has(t){return super.has(D8(this,t))}set(t,r){return super.set(fAe(this,t),r)}delete(t){return super.delete(hAe(this,t))}}function D8({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function fAe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function hAe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function pAe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function mAe(e=Bu){if(e===Bu)return pz;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function pz(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const gAe=Math.sqrt(50),vAe=Math.sqrt(10),xAe=Math.sqrt(2);function Fb(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),s=i>=gAe?10:i>=vAe?5:i>=xAe?2:1;let o,c,u;return a<0?(u=Math.pow(10,-a)/s,o=Math.round(e*u),c=Math.round(t*u),o/u<e&&++o,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*s,o=Math.round(e/u),c=Math.round(t/u),o*u<e&&++o,c*u>t&&--c),c<o&&.5<=r&&r<2?Fb(e,t,r*2):[o,c,u]}function e4(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,s]=n?Fb(t,e,r):Fb(e,t,r);if(!(i>=a))return[];const o=i-a+1,c=new Array(o);if(n)if(s<0)for(let u=0;u<o;++u)c[u]=(i-u)/-s;else for(let u=0;u<o;++u)c[u]=(i-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(a+u)/-s;else for(let u=0;u<o;++u)c[u]=(a+u)*s;return c}function t4(e,t,r){return t=+t,e=+e,r=+r,Fb(e,t,r)[2]}function r4(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?t4(t,e,r):t4(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function M8(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function F8(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function mz(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?pz:mAe(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),h=Math.max(r,Math.floor(t-u*f/c+p)),g=Math.min(n,Math.floor(t+(c-u)*f/c+p));mz(e,t,h,g,a)}const i=e[t];let s=r,o=n;for(_m(e,r,t),a(e[n],i)>0&&_m(e,r,n);s<o;){for(_m(e,s,o),++s,--o;a(e[s],i)<0;)++s;for(;a(e[o],i)>0;)--o}a(e[r],i)===0?_m(e,r,o):(++o,_m(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function _m(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function yAe(e,t,r){if(e=Float64Array.from(uAe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return F8(e);if(t>=1)return M8(e);var n,a=(n-1)*t,i=Math.floor(a),s=M8(mz(e,i).subarray(0,i+1)),o=F8(e.subarray(i+1));return s+(o-s)*(a-i)}}function bAe(e,t,r=hz){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),s=+r(e[i],i,e),o=+r(e[i+1],i+1,e);return s+(o-s)*(a-i)}}function wAe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function lo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Dc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const n4=Symbol("implicit");function SE(){var e=new R8,t=[],r=[],n=n4;function a(i){let s=e.get(i);if(s===void 0){if(n!==n4)return n;e.set(i,s=t.push(i)-1)}return r[s%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new R8;for(const s of i)e.has(s)||e.set(s,t.push(s)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return SE(t,r).unknown(n)},lo.apply(a,arguments),a}function Zg(){var e=SE().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,s,o=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var p=t().length,h=a<n,g=h?a:n,m=h?n:a;i=(m-g)/Math.max(1,p-c+u*2),o&&(i=Math.floor(i)),g+=(m-g-i*(p-c))*d,s=i*(1-c),o&&(g=Math.round(g),s=Math.round(s));var x=wAe(p).map(function(y){return g+i*y});return r(h?x.reverse():x)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([n,a]=p,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(p){return[n,a]=p,n=+n,a=+a,o=!0,f()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(p){return arguments.length?(o=!!p,f()):o},e.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),f()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),f()):c},e.paddingOuter=function(p){return arguments.length?(u=+p,f()):u},e.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},e.copy=function(){return Zg(t(),[n,a]).round(o).paddingInner(c).paddingOuter(u).align(d)},lo.apply(f(),arguments)}function gz(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return gz(t())},e}function og(){return gz(Zg.apply(null,arguments).paddingInner(1))}function NE(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function vz(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function i1(){}var ev=.7,$b=1/ev,c0="\\s*([+-]?\\d+)\\s*",tv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ml="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_Ae=/^#([0-9a-f]{3,8})$/,SAe=new RegExp(`^rgb\\(${c0},${c0},${c0}\\)$`),NAe=new RegExp(`^rgb\\(${ml},${ml},${ml}\\)$`),jAe=new RegExp(`^rgba\\(${c0},${c0},${c0},${tv}\\)$`),AAe=new RegExp(`^rgba\\(${ml},${ml},${ml},${tv}\\)$`),EAe=new RegExp(`^hsl\\(${tv},${ml},${ml}\\)$`),TAe=new RegExp(`^hsla\\(${tv},${ml},${ml},${tv}\\)$`),$8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};NE(i1,rv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:B8,formatHex:B8,formatHex8:CAe,formatHsl:kAe,formatRgb:U8,toString:U8});function B8(){return this.rgb().formatHex()}function CAe(){return this.rgb().formatHex8()}function kAe(){return xz(this).formatHsl()}function U8(){return this.rgb().formatRgb()}function rv(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=_Ae.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?z8(t):r===3?new Ji(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Bx(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Bx(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=SAe.exec(e))?new Ji(t[1],t[2],t[3],1):(t=NAe.exec(e))?new Ji(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=jAe.exec(e))?Bx(t[1],t[2],t[3],t[4]):(t=AAe.exec(e))?Bx(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=EAe.exec(e))?W8(t[1],t[2]/100,t[3]/100,1):(t=TAe.exec(e))?W8(t[1],t[2]/100,t[3]/100,t[4]):$8.hasOwnProperty(e)?z8($8[e]):e==="transparent"?new Ji(NaN,NaN,NaN,0):null}function z8(e){return new Ji(e>>16&255,e>>8&255,e&255,1)}function Bx(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ji(e,t,r,n)}function OAe(e){return e instanceof i1||(e=rv(e)),e?(e=e.rgb(),new Ji(e.r,e.g,e.b,e.opacity)):new Ji}function a4(e,t,r,n){return arguments.length===1?OAe(e):new Ji(e,t,r,n??1)}function Ji(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}NE(Ji,a4,vz(i1,{brighter(e){return e=e==null?$b:Math.pow($b,e),new Ji(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ev:Math.pow(ev,e),new Ji(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ji(ff(this.r),ff(this.g),ff(this.b),Bb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:q8,formatHex:q8,formatHex8:PAe,formatRgb:H8,toString:H8}));function q8(){return`#${Kd(this.r)}${Kd(this.g)}${Kd(this.b)}`}function PAe(){return`#${Kd(this.r)}${Kd(this.g)}${Kd(this.b)}${Kd((isNaN(this.opacity)?1:this.opacity)*255)}`}function H8(){const e=Bb(this.opacity);return`${e===1?"rgb(":"rgba("}${ff(this.r)}, ${ff(this.g)}, ${ff(this.b)}${e===1?")":`, ${e})`}`}function Bb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ff(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Kd(e){return e=ff(e),(e<16?"0":"")+e.toString(16)}function W8(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ro(e,t,r,n)}function xz(e){if(e instanceof Ro)return new Ro(e.h,e.s,e.l,e.opacity);if(e instanceof i1||(e=rv(e)),!e)return new Ro;if(e instanceof Ro)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),s=NaN,o=i-a,c=(i+a)/2;return o?(t===i?s=(r-n)/o+(r<n)*6:r===i?s=(n-t)/o+2:s=(t-r)/o+4,o/=c<.5?i+a:2-i-a,s*=60):o=c>0&&c<1?0:s,new Ro(s,o,c,e.opacity)}function LAe(e,t,r,n){return arguments.length===1?xz(e):new Ro(e,t,r,n??1)}function Ro(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}NE(Ro,LAe,vz(i1,{brighter(e){return e=e==null?$b:Math.pow($b,e),new Ro(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ev:Math.pow(ev,e),new Ro(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Ji(mS(e>=240?e-240:e+120,a,n),mS(e,a,n),mS(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Ro(V8(this.h),Ux(this.s),Ux(this.l),Bb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Bb(this.opacity);return`${e===1?"hsl(":"hsla("}${V8(this.h)}, ${Ux(this.s)*100}%, ${Ux(this.l)*100}%${e===1?")":`, ${e})`}`}}));function V8(e){return e=(e||0)%360,e<0?e+360:e}function Ux(e){return Math.max(0,Math.min(1,e||0))}function mS(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const jE=e=>()=>e;function IAe(e,t){return function(r){return e+r*t}}function RAe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function DAe(e){return(e=+e)==1?yz:function(t,r){return r-t?RAe(t,r,e):jE(isNaN(t)?r:t)}}function yz(e,t){var r=t-e;return r?IAe(e,r):jE(isNaN(e)?t:e)}const G8=function e(t){var r=DAe(t);function n(a,i){var s=r((a=a4(a)).r,(i=a4(i)).r),o=r(a.g,i.g),c=r(a.b,i.b),u=yz(a.opacity,i.opacity);return function(d){return a.r=s(d),a.g=o(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function MAe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function FAe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function $Ae(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),s;for(s=0;s<n;++s)a[s]=Lp(e[s],t[s]);for(;s<r;++s)i[s]=t[s];return function(o){for(s=0;s<n;++s)i[s]=a[s](o);return i}}function BAe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Ub(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function UAe(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Lp(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var i4=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gS=new RegExp(i4.source,"g");function zAe(e){return function(){return e}}function qAe(e){return function(t){return e(t)+""}}function HAe(e,t){var r=i4.lastIndex=gS.lastIndex=0,n,a,i,s=-1,o=[],c=[];for(e=e+"",t=t+"";(n=i4.exec(e))&&(a=gS.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),o[s]?o[s]+=i:o[++s]=i),(n=n[0])===(a=a[0])?o[s]?o[s]+=a:o[++s]=a:(o[++s]=null,c.push({i:s,x:Ub(n,a)})),r=gS.lastIndex;return r<t.length&&(i=t.slice(r),o[s]?o[s]+=i:o[++s]=i),o.length<2?c[0]?qAe(c[0].x):zAe(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function Lp(e,t){var r=typeof t,n;return t==null||r==="boolean"?jE(t):(r==="number"?Ub:r==="string"?(n=rv(t))?(t=n,G8):HAe:t instanceof rv?G8:t instanceof Date?BAe:FAe(t)?MAe:Array.isArray(t)?$Ae:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?UAe:Ub)(e,t)}function AE(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function WAe(e,t){t===void 0&&(t=e,e=Lp);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return i[o](s-o)}}function VAe(e){return function(){return e}}function zb(e){return+e}var K8=[0,1];function Ri(e){return e}function s4(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:VAe(isNaN(t)?NaN:.5)}function GAe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function KAe(e,t,r){var n=e[0],a=e[1],i=t[0],s=t[1];return a<n?(n=s4(a,n),i=r(s,i)):(n=s4(n,a),i=r(i,s)),function(o){return i(n(o))}}function XAe(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)a[s]=s4(e[s],e[s+1]),i[s]=r(t[s],t[s+1]);return function(o){var c=a1(e,o,1,n)-1;return i[c](a[c](o))}}function s1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Lw(){var e=K8,t=K8,r=Lp,n,a,i,s=Ri,o,c,u;function d(){var p=Math.min(e.length,t.length);return s!==Ri&&(s=GAe(e[0],e[p-1])),o=p>2?XAe:KAe,c=u=null,f}function f(p){return p==null||isNaN(p=+p)?i:(c||(c=o(e.map(n),t,r)))(n(s(p)))}return f.invert=function(p){return s(a((u||(u=o(t,e.map(n),Ub)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,zb),d()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),r=AE,d()},f.clamp=function(p){return arguments.length?(s=p?!0:Ri,d()):s!==Ri},f.interpolate=function(p){return arguments.length?(r=p,d()):r},f.unknown=function(p){return arguments.length?(i=p,f):i},function(p,h){return n=p,a=h,d()}}function EE(){return Lw()(Ri,Ri)}function YAe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function qb(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function H0(e){return e=qb(Math.abs(e)),e?e[1]:NaN}function JAe(e,t){return function(r,n){for(var a=r.length,i=[],s=0,o=e[0],c=0;a>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),i.push(r.substring(a-=o,a+o)),!((c+=o+1)>n));)o=e[s=(s+1)%e.length];return i.reverse().join(t)}}function QAe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var ZAe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nv(e){if(!(t=ZAe.exec(e)))throw new Error("invalid format: "+e);var t;return new TE({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}nv.prototype=TE.prototype;function TE(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}TE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function e3e(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var bz;function t3e(e,t){var r=qb(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(bz=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=n.length;return i===s?n:i>s?n+new Array(i-s+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+qb(e,Math.max(0,t+i-1))[0]}function X8(e,t){var r=qb(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const Y8={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:YAe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>X8(e*100,t),r:X8,s:t3e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function J8(e){return e}var Q8=Array.prototype.map,Z8=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function r3e(e){var t=e.grouping===void 0||e.thousands===void 0?J8:JAe(Q8.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?J8:QAe(Q8.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=nv(f);var p=f.fill,h=f.align,g=f.sign,m=f.symbol,x=f.zero,y=f.width,v=f.comma,b=f.precision,S=f.trim,_=f.type;_==="n"?(v=!0,_="g"):Y8[_]||(b===void 0&&(b=12),S=!0,_="g"),(x||p==="0"&&h==="=")&&(x=!0,p="0",h="=");var A=m==="$"?r:m==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",j=m==="$"?n:/[%p]/.test(_)?s:"",E=Y8[_],T=/[defgprs%]/.test(_);b=b===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function L(O){var I=A,D=j,z,Y,se;if(_==="c")D=E(O)+D,O="";else{O=+O;var ee=O<0||1/O<0;if(O=isNaN(O)?c:E(Math.abs(O),b),S&&(O=e3e(O)),ee&&+O==0&&g!=="+"&&(ee=!1),I=(ee?g==="("?g:o:g==="-"||g==="("?"":g)+I,D=(_==="s"?Z8[8+bz/3]:"")+D+(ee&&g==="("?")":""),T){for(z=-1,Y=O.length;++z<Y;)if(se=O.charCodeAt(z),48>se||se>57){D=(se===46?a+O.slice(z+1):O.slice(z))+D,O=O.slice(0,z);break}}}v&&!x&&(O=t(O,1/0));var J=I.length+O.length+D.length,oe=J<y?new Array(y-J+1).join(p):"";switch(v&&x&&(O=t(oe+O,oe.length?y-D.length:1/0),oe=""),h){case"<":O=I+O+D+oe;break;case"=":O=I+oe+O+D;break;case"^":O=oe.slice(0,J=oe.length>>1)+I+O+D+oe.slice(J);break;default:O=oe+I+O+D;break}return i(O)}return L.toString=function(){return f+""},L}function d(f,p){var h=u((f=nv(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(H0(p)/3)))*3,m=Math.pow(10,-g),x=Z8[8+g/3];return function(y){return h(m*y)+x}}return{format:u,formatPrefix:d}}var zx,CE,wz;n3e({thousands:",",grouping:[3],currency:["$",""]});function n3e(e){return zx=r3e(e),CE=zx.format,wz=zx.formatPrefix,zx}function a3e(e){return Math.max(0,-H0(Math.abs(e)))}function i3e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(H0(t)/3)))*3-H0(Math.abs(e)))}function s3e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,H0(t)-H0(e))+1}function _z(e,t,r,n){var a=r4(e,t,r),i;switch(n=nv(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=i3e(a,s))&&(n.precision=i),wz(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=s3e(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=a3e(a))&&(n.precision=i-(n.type==="%")*2);break}}return CE(n)}function nd(e){var t=e.domain;return e.ticks=function(r){var n=t();return e4(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return _z(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,s=n[a],o=n[i],c,u,d=10;for(o<s&&(u=s,s=o,o=u,u=a,a=i,i=u);d-- >0;){if(u=t4(s,o,r),u===c)return n[a]=s,n[i]=o,t(n);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return e},e}function Hb(){var e=EE();return e.copy=function(){return s1(e,Hb())},lo.apply(e,arguments),nd(e)}function Sz(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,zb),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return Sz(e).unknown(t)},e=arguments.length?Array.from(e,zb):[0,1],nd(r)}function Nz(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],s;return i<a&&(s=r,r=n,n=s,s=a,a=i,i=s),e[r]=t.floor(a),e[n]=t.ceil(i),e}function eL(e){return Math.log(e)}function tL(e){return Math.exp(e)}function o3e(e){return-Math.log(-e)}function l3e(e){return-Math.exp(-e)}function c3e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function u3e(e){return e===10?c3e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function d3e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function rL(e){return(t,r)=>-e(-t,r)}function kE(e){const t=e(eL,tL),r=t.domain;let n=10,a,i;function s(){return a=d3e(n),i=u3e(n),r()[0]<0?(a=rL(a),i=rL(i),e(o3e,l3e)):e(eL,tL),t}return t.base=function(o){return arguments.length?(n=+o,s()):n},t.domain=function(o){return arguments.length?(r(o),s()):r()},t.ticks=o=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let p=a(u),h=a(d),g,m;const x=o==null?10:+o;let y=[];if(!(n%1)&&h-p<x){if(p=Math.floor(p),h=Math.ceil(h),u>0){for(;p<=h;++p)for(g=1;g<n;++g)if(m=p<0?g/i(-p):g*i(p),!(m<u)){if(m>d)break;y.push(m)}}else for(;p<=h;++p)for(g=n-1;g>=1;--g)if(m=p>0?g/i(-p):g*i(p),!(m<u)){if(m>d)break;y.push(m)}y.length*2<x&&(y=e4(u,d,x))}else y=e4(p,h,Math.min(h-p,x)).map(i);return f?y.reverse():y},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=nv(c)).precision==null&&(c.trim=!0),c=CE(c)),o===1/0)return c;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(Nz(r(),{floor:o=>i(Math.floor(a(o))),ceil:o=>i(Math.ceil(a(o)))})),t}function jz(){const e=kE(Lw()).domain([1,10]);return e.copy=()=>s1(e,jz()).base(e.base()),lo.apply(e,arguments),e}function nL(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function aL(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function OE(e){var t=1,r=e(nL(t),aL(t));return r.constant=function(n){return arguments.length?e(nL(t=+n),aL(t)):t},nd(r)}function Az(){var e=OE(Lw());return e.copy=function(){return s1(e,Az()).constant(e.constant())},lo.apply(e,arguments)}function iL(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function f3e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function h3e(e){return e<0?-e*e:e*e}function PE(e){var t=e(Ri,Ri),r=1;function n(){return r===1?e(Ri,Ri):r===.5?e(f3e,h3e):e(iL(r),iL(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},nd(t)}function LE(){var e=PE(Lw());return e.copy=function(){return s1(e,LE()).exponent(e.exponent())},lo.apply(e,arguments),e}function p3e(){return LE.apply(null,arguments).exponent(.5)}function sL(e){return Math.sign(e)*e*e}function m3e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Ez(){var e=EE(),t=[0,1],r=!1,n;function a(i){var s=m3e(e(i));return isNaN(s)?n:r?Math.round(s):s}return a.invert=function(i){return e.invert(sL(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,zb)).map(sL)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return Ez(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},lo.apply(a,arguments),nd(a)}function Tz(){var e=[],t=[],r=[],n;function a(){var s=0,o=Math.max(1,t.length);for(r=new Array(o-1);++s<o;)r[s-1]=bAe(e,s/o);return i}function i(s){return s==null||isNaN(s=+s)?n:t[a1(r,s)]}return i.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},i.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Bu),a()},i.range=function(s){return arguments.length?(t=Array.from(s),a()):t.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return Tz().domain(e).range(t).unknown(n)},lo.apply(i,arguments)}function Cz(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function s(c){return c!=null&&c<=c?a[a1(n,c,0,r)]:i}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},s.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,o()):a.slice()},s.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},s.unknown=function(c){return arguments.length&&(i=c),s},s.thresholds=function(){return n.slice()},s.copy=function(){return Cz().domain([e,t]).range(a).unknown(i)},lo.apply(nd(s),arguments)}function kz(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[a1(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var s=t.indexOf(i);return[e[s-1],e[s]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return kz().domain(e).range(t).unknown(r)},lo.apply(a,arguments)}const vS=new Date,xS=new Date;function ja(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const s=a(i),o=a.ceil(i);return i-s<o-i?s:o},a.offset=(i,s)=>(t(i=new Date(+i),s==null?1:Math.floor(s)),i),a.range=(i,s,o)=>{const c=[];if(i=a.ceil(i),o=o==null?1:Math.floor(o),!(i<s)||!(o>0))return c;let u;do c.push(u=new Date(+i)),t(i,o),e(i);while(u<i&&i<s);return c},a.filter=i=>ja(s=>{if(s>=s)for(;e(s),!i(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!i(s););else for(;--o>=0;)for(;t(s,1),!i(s););}),r&&(a.count=(i,s)=>(vS.setTime(+i),xS.setTime(+s),e(vS),e(xS),Math.floor(r(vS,xS))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?s=>n(s)%i===0:s=>a.count(0,s)%i===0):a)),a}const Wb=ja(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Wb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ja(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Wb);Wb.range;const tc=1e3,Zs=tc*60,rc=Zs*60,wc=rc*24,IE=wc*7,oL=wc*30,yS=wc*365,Xd=ja(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*tc)},(e,t)=>(t-e)/tc,e=>e.getUTCSeconds());Xd.range;const RE=ja(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*tc)},(e,t)=>{e.setTime(+e+t*Zs)},(e,t)=>(t-e)/Zs,e=>e.getMinutes());RE.range;const DE=ja(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Zs)},(e,t)=>(t-e)/Zs,e=>e.getUTCMinutes());DE.range;const ME=ja(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*tc-e.getMinutes()*Zs)},(e,t)=>{e.setTime(+e+t*rc)},(e,t)=>(t-e)/rc,e=>e.getHours());ME.range;const FE=ja(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*rc)},(e,t)=>(t-e)/rc,e=>e.getUTCHours());FE.range;const o1=ja(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Zs)/wc,e=>e.getDate()-1);o1.range;const Iw=ja(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/wc,e=>e.getUTCDate()-1);Iw.range;const Oz=ja(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/wc,e=>Math.floor(e/wc));Oz.range;function Vf(e){return ja(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Zs)/IE)}const Rw=Vf(0),Vb=Vf(1),g3e=Vf(2),v3e=Vf(3),W0=Vf(4),x3e=Vf(5),y3e=Vf(6);Rw.range;Vb.range;g3e.range;v3e.range;W0.range;x3e.range;y3e.range;function Gf(e){return ja(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/IE)}const Dw=Gf(0),Gb=Gf(1),b3e=Gf(2),w3e=Gf(3),V0=Gf(4),_3e=Gf(5),S3e=Gf(6);Dw.range;Gb.range;b3e.range;w3e.range;V0.range;_3e.range;S3e.range;const $E=ja(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());$E.range;const BE=ja(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());BE.range;const _c=ja(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());_c.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ja(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});_c.range;const Sc=ja(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Sc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ja(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Sc.range;function Pz(e,t,r,n,a,i){const s=[[Xd,1,tc],[Xd,5,5*tc],[Xd,15,15*tc],[Xd,30,30*tc],[i,1,Zs],[i,5,5*Zs],[i,15,15*Zs],[i,30,30*Zs],[a,1,rc],[a,3,3*rc],[a,6,6*rc],[a,12,12*rc],[n,1,wc],[n,2,2*wc],[r,1,IE],[t,1,oL],[t,3,3*oL],[e,1,yS]];function o(u,d,f){const p=d<u;p&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:c(u,d,f),g=h?h.range(u,+d+1):[];return p?g.reverse():g}function c(u,d,f){const p=Math.abs(d-u)/f,h=_E(([,,x])=>x).right(s,p);if(h===s.length)return e.every(r4(u/yS,d/yS,f));if(h===0)return Wb.every(Math.max(r4(u,d,f),1));const[g,m]=s[p/s[h-1][2]<s[h][2]/p?h-1:h];return g.every(m)}return[o,c]}const[N3e,j3e]=Pz(Sc,BE,Dw,Oz,FE,DE),[A3e,E3e]=Pz(_c,$E,Rw,o1,ME,RE);function bS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function wS(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Sm(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function T3e(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,s=e.shortDays,o=e.months,c=e.shortMonths,u=Nm(a),d=jm(a),f=Nm(i),p=jm(i),h=Nm(s),g=jm(s),m=Nm(o),x=jm(o),y=Nm(c),v=jm(c),b={a:ee,A:J,b:oe,B:we,c:null,d:hL,e:hL,f:J3e,g:oEe,G:cEe,H:K3e,I:X3e,j:Y3e,L:Lz,m:Q3e,M:Z3e,p:xe,q:k,Q:gL,s:vL,S:eEe,u:tEe,U:rEe,V:nEe,w:aEe,W:iEe,x:null,X:null,y:sEe,Y:lEe,Z:uEe,"%":mL},S={a:M,A:B,b:U,B:Z,c:null,d:pL,e:pL,f:pEe,g:NEe,G:AEe,H:dEe,I:fEe,j:hEe,L:Rz,m:mEe,M:gEe,p:pe,q:K,Q:gL,s:vL,S:vEe,u:xEe,U:yEe,V:bEe,w:wEe,W:_Ee,x:null,X:null,y:SEe,Y:jEe,Z:EEe,"%":mL},_={a:L,A:O,b:I,B:D,c:z,d:dL,e:dL,f:H3e,g:uL,G:cL,H:fL,I:fL,j:B3e,L:q3e,m:$3e,M:U3e,p:T,q:F3e,Q:V3e,s:G3e,S:z3e,u:L3e,U:I3e,V:R3e,w:P3e,W:D3e,x:Y,X:se,y:uL,Y:cL,Z:M3e,"%":W3e};b.x=A(r,b),b.X=A(n,b),b.c=A(t,b),S.x=A(r,S),S.X=A(n,S),S.c=A(t,S);function A(te,ae){return function(be){var ve=[],Fe=-1,Me=0,X=te.length,Ie,Re,Qe;for(be instanceof Date||(be=new Date(+be));++Fe<X;)te.charCodeAt(Fe)===37&&(ve.push(te.slice(Me,Fe)),(Re=lL[Ie=te.charAt(++Fe)])!=null?Ie=te.charAt(++Fe):Re=Ie==="e"?" ":"0",(Qe=ae[Ie])&&(Ie=Qe(be,Re)),ve.push(Ie),Me=Fe+1);return ve.push(te.slice(Me,Fe)),ve.join("")}}function j(te,ae){return function(be){var ve=Sm(1900,void 0,1),Fe=E(ve,te,be+="",0),Me,X;if(Fe!=be.length)return null;if("Q"in ve)return new Date(ve.Q);if("s"in ve)return new Date(ve.s*1e3+("L"in ve?ve.L:0));if(ae&&!("Z"in ve)&&(ve.Z=0),"p"in ve&&(ve.H=ve.H%12+ve.p*12),ve.m===void 0&&(ve.m="q"in ve?ve.q:0),"V"in ve){if(ve.V<1||ve.V>53)return null;"w"in ve||(ve.w=1),"Z"in ve?(Me=wS(Sm(ve.y,0,1)),X=Me.getUTCDay(),Me=X>4||X===0?Gb.ceil(Me):Gb(Me),Me=Iw.offset(Me,(ve.V-1)*7),ve.y=Me.getUTCFullYear(),ve.m=Me.getUTCMonth(),ve.d=Me.getUTCDate()+(ve.w+6)%7):(Me=bS(Sm(ve.y,0,1)),X=Me.getDay(),Me=X>4||X===0?Vb.ceil(Me):Vb(Me),Me=o1.offset(Me,(ve.V-1)*7),ve.y=Me.getFullYear(),ve.m=Me.getMonth(),ve.d=Me.getDate()+(ve.w+6)%7)}else("W"in ve||"U"in ve)&&("w"in ve||(ve.w="u"in ve?ve.u%7:"W"in ve?1:0),X="Z"in ve?wS(Sm(ve.y,0,1)).getUTCDay():bS(Sm(ve.y,0,1)).getDay(),ve.m=0,ve.d="W"in ve?(ve.w+6)%7+ve.W*7-(X+5)%7:ve.w+ve.U*7-(X+6)%7);return"Z"in ve?(ve.H+=ve.Z/100|0,ve.M+=ve.Z%100,wS(ve)):bS(ve)}}function E(te,ae,be,ve){for(var Fe=0,Me=ae.length,X=be.length,Ie,Re;Fe<Me;){if(ve>=X)return-1;if(Ie=ae.charCodeAt(Fe++),Ie===37){if(Ie=ae.charAt(Fe++),Re=_[Ie in lL?ae.charAt(Fe++):Ie],!Re||(ve=Re(te,be,ve))<0)return-1}else if(Ie!=be.charCodeAt(ve++))return-1}return ve}function T(te,ae,be){var ve=u.exec(ae.slice(be));return ve?(te.p=d.get(ve[0].toLowerCase()),be+ve[0].length):-1}function L(te,ae,be){var ve=h.exec(ae.slice(be));return ve?(te.w=g.get(ve[0].toLowerCase()),be+ve[0].length):-1}function O(te,ae,be){var ve=f.exec(ae.slice(be));return ve?(te.w=p.get(ve[0].toLowerCase()),be+ve[0].length):-1}function I(te,ae,be){var ve=y.exec(ae.slice(be));return ve?(te.m=v.get(ve[0].toLowerCase()),be+ve[0].length):-1}function D(te,ae,be){var ve=m.exec(ae.slice(be));return ve?(te.m=x.get(ve[0].toLowerCase()),be+ve[0].length):-1}function z(te,ae,be){return E(te,t,ae,be)}function Y(te,ae,be){return E(te,r,ae,be)}function se(te,ae,be){return E(te,n,ae,be)}function ee(te){return s[te.getDay()]}function J(te){return i[te.getDay()]}function oe(te){return c[te.getMonth()]}function we(te){return o[te.getMonth()]}function xe(te){return a[+(te.getHours()>=12)]}function k(te){return 1+~~(te.getMonth()/3)}function M(te){return s[te.getUTCDay()]}function B(te){return i[te.getUTCDay()]}function U(te){return c[te.getUTCMonth()]}function Z(te){return o[te.getUTCMonth()]}function pe(te){return a[+(te.getUTCHours()>=12)]}function K(te){return 1+~~(te.getUTCMonth()/3)}return{format:function(te){var ae=A(te+="",b);return ae.toString=function(){return te},ae},parse:function(te){var ae=j(te+="",!1);return ae.toString=function(){return te},ae},utcFormat:function(te){var ae=A(te+="",S);return ae.toString=function(){return te},ae},utcParse:function(te){var ae=j(te+="",!0);return ae.toString=function(){return te},ae}}}var lL={"-":"",_:" ",0:"0"},$a=/^\s*\d+/,C3e=/^%/,k3e=/[\\^$*+?|[\]().{}]/g;function Ar(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function O3e(e){return e.replace(k3e,"\\$&")}function Nm(e){return new RegExp("^(?:"+e.map(O3e).join("|")+")","i")}function jm(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function P3e(e,t,r){var n=$a.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function L3e(e,t,r){var n=$a.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function I3e(e,t,r){var n=$a.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function R3e(e,t,r){var n=$a.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function D3e(e,t,r){var n=$a.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function cL(e,t,r){var n=$a.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function uL(e,t,r){var n=$a.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function M3e(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function F3e(e,t,r){var n=$a.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function $3e(e,t,r){var n=$a.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function dL(e,t,r){var n=$a.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function B3e(e,t,r){var n=$a.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function fL(e,t,r){var n=$a.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function U3e(e,t,r){var n=$a.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function z3e(e,t,r){var n=$a.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function q3e(e,t,r){var n=$a.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function H3e(e,t,r){var n=$a.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function W3e(e,t,r){var n=C3e.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function V3e(e,t,r){var n=$a.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function G3e(e,t,r){var n=$a.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function hL(e,t){return Ar(e.getDate(),t,2)}function K3e(e,t){return Ar(e.getHours(),t,2)}function X3e(e,t){return Ar(e.getHours()%12||12,t,2)}function Y3e(e,t){return Ar(1+o1.count(_c(e),e),t,3)}function Lz(e,t){return Ar(e.getMilliseconds(),t,3)}function J3e(e,t){return Lz(e,t)+"000"}function Q3e(e,t){return Ar(e.getMonth()+1,t,2)}function Z3e(e,t){return Ar(e.getMinutes(),t,2)}function eEe(e,t){return Ar(e.getSeconds(),t,2)}function tEe(e){var t=e.getDay();return t===0?7:t}function rEe(e,t){return Ar(Rw.count(_c(e)-1,e),t,2)}function Iz(e){var t=e.getDay();return t>=4||t===0?W0(e):W0.ceil(e)}function nEe(e,t){return e=Iz(e),Ar(W0.count(_c(e),e)+(_c(e).getDay()===4),t,2)}function aEe(e){return e.getDay()}function iEe(e,t){return Ar(Vb.count(_c(e)-1,e),t,2)}function sEe(e,t){return Ar(e.getFullYear()%100,t,2)}function oEe(e,t){return e=Iz(e),Ar(e.getFullYear()%100,t,2)}function lEe(e,t){return Ar(e.getFullYear()%1e4,t,4)}function cEe(e,t){var r=e.getDay();return e=r>=4||r===0?W0(e):W0.ceil(e),Ar(e.getFullYear()%1e4,t,4)}function uEe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ar(t/60|0,"0",2)+Ar(t%60,"0",2)}function pL(e,t){return Ar(e.getUTCDate(),t,2)}function dEe(e,t){return Ar(e.getUTCHours(),t,2)}function fEe(e,t){return Ar(e.getUTCHours()%12||12,t,2)}function hEe(e,t){return Ar(1+Iw.count(Sc(e),e),t,3)}function Rz(e,t){return Ar(e.getUTCMilliseconds(),t,3)}function pEe(e,t){return Rz(e,t)+"000"}function mEe(e,t){return Ar(e.getUTCMonth()+1,t,2)}function gEe(e,t){return Ar(e.getUTCMinutes(),t,2)}function vEe(e,t){return Ar(e.getUTCSeconds(),t,2)}function xEe(e){var t=e.getUTCDay();return t===0?7:t}function yEe(e,t){return Ar(Dw.count(Sc(e)-1,e),t,2)}function Dz(e){var t=e.getUTCDay();return t>=4||t===0?V0(e):V0.ceil(e)}function bEe(e,t){return e=Dz(e),Ar(V0.count(Sc(e),e)+(Sc(e).getUTCDay()===4),t,2)}function wEe(e){return e.getUTCDay()}function _Ee(e,t){return Ar(Gb.count(Sc(e)-1,e),t,2)}function SEe(e,t){return Ar(e.getUTCFullYear()%100,t,2)}function NEe(e,t){return e=Dz(e),Ar(e.getUTCFullYear()%100,t,2)}function jEe(e,t){return Ar(e.getUTCFullYear()%1e4,t,4)}function AEe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?V0(e):V0.ceil(e),Ar(e.getUTCFullYear()%1e4,t,4)}function EEe(){return"+0000"}function mL(){return"%"}function gL(e){return+e}function vL(e){return Math.floor(+e/1e3)}var vh,Mz,Fz;TEe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function TEe(e){return vh=T3e(e),Mz=vh.format,vh.parse,Fz=vh.utcFormat,vh.utcParse,vh}function CEe(e){return new Date(e)}function kEe(e){return e instanceof Date?+e:+new Date(+e)}function UE(e,t,r,n,a,i,s,o,c,u){var d=EE(),f=d.invert,p=d.domain,h=u(".%L"),g=u(":%S"),m=u("%I:%M"),x=u("%I %p"),y=u("%a %d"),v=u("%b %d"),b=u("%B"),S=u("%Y");function _(A){return(c(A)<A?h:o(A)<A?g:s(A)<A?m:i(A)<A?x:n(A)<A?a(A)<A?y:v:r(A)<A?b:S)(A)}return d.invert=function(A){return new Date(f(A))},d.domain=function(A){return arguments.length?p(Array.from(A,kEe)):p().map(CEe)},d.ticks=function(A){var j=p();return e(j[0],j[j.length-1],A??10)},d.tickFormat=function(A,j){return j==null?_:u(j)},d.nice=function(A){var j=p();return(!A||typeof A.range!="function")&&(A=t(j[0],j[j.length-1],A??10)),A?p(Nz(j,A)):d},d.copy=function(){return s1(d,UE(e,t,r,n,a,i,s,o,c,u))},d}function OEe(){return lo.apply(UE(A3e,E3e,_c,$E,Rw,o1,ME,RE,Xd,Mz).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function PEe(){return lo.apply(UE(N3e,j3e,Sc,BE,Dw,Iw,FE,DE,Xd,Fz).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Mw(){var e=0,t=1,r,n,a,i,s=Ri,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:s(a===0?.5:(f=(i(f)-r)*a,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(p){var h,g;return arguments.length?([h,g]=p,s=f(h,g),u):[s(0),s(1)]}}return u.range=d(Lp),u.rangeRound=d(AE),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function ad(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function $z(){var e=nd(Mw()(Ri));return e.copy=function(){return ad(e,$z())},Dc.apply(e,arguments)}function Bz(){var e=kE(Mw()).domain([1,10]);return e.copy=function(){return ad(e,Bz()).base(e.base())},Dc.apply(e,arguments)}function Uz(){var e=OE(Mw());return e.copy=function(){return ad(e,Uz()).constant(e.constant())},Dc.apply(e,arguments)}function zE(){var e=PE(Mw());return e.copy=function(){return ad(e,zE()).exponent(e.exponent())},Dc.apply(e,arguments)}function LEe(){return zE.apply(null,arguments).exponent(.5)}function zz(){var e=[],t=Ri;function r(n){if(n!=null&&!isNaN(n=+n))return t((a1(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Bu),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>yAe(e,i/n))},r.copy=function(){return zz(t).domain(e)},Dc.apply(r,arguments)}function Fw(){var e=0,t=.5,r=1,n=1,a,i,s,o,c,u=Ri,d,f=!1,p;function h(m){return isNaN(m=+m)?p:(m=.5+((m=+d(m))-i)*(n*m<n*i?o:c),u(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,r]=m,a=d(e=+e),i=d(t=+t),s=d(r=+r),o=a===i?0:.5/(i-a),c=i===s?0:.5/(s-i),n=i<a?-1:1,h):[e,t,r]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(u=m,h):u};function g(m){return function(x){var y,v,b;return arguments.length?([y,v,b]=x,u=WAe(m,[y,v,b]),h):[u(0),u(.5),u(1)]}}return h.range=g(Lp),h.rangeRound=g(AE),h.unknown=function(m){return arguments.length?(p=m,h):p},function(m){return d=m,a=m(e),i=m(t),s=m(r),o=a===i?0:.5/(i-a),c=i===s?0:.5/(s-i),n=i<a?-1:1,h}}function qz(){var e=nd(Fw()(Ri));return e.copy=function(){return ad(e,qz())},Dc.apply(e,arguments)}function Hz(){var e=kE(Fw()).domain([.1,1,10]);return e.copy=function(){return ad(e,Hz()).base(e.base())},Dc.apply(e,arguments)}function Wz(){var e=OE(Fw());return e.copy=function(){return ad(e,Wz()).constant(e.constant())},Dc.apply(e,arguments)}function qE(){var e=PE(Fw());return e.copy=function(){return ad(e,qE()).exponent(e.exponent())},Dc.apply(e,arguments)}function IEe(){return qE.apply(null,arguments).exponent(.5)}const xL=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Zg,scaleDiverging:qz,scaleDivergingLog:Hz,scaleDivergingPow:qE,scaleDivergingSqrt:IEe,scaleDivergingSymlog:Wz,scaleIdentity:Sz,scaleImplicit:n4,scaleLinear:Hb,scaleLog:jz,scaleOrdinal:SE,scalePoint:og,scalePow:LE,scaleQuantile:Tz,scaleQuantize:Cz,scaleRadial:Ez,scaleSequential:$z,scaleSequentialLog:Bz,scaleSequentialPow:zE,scaleSequentialQuantile:zz,scaleSequentialSqrt:LEe,scaleSequentialSymlog:Uz,scaleSqrt:p3e,scaleSymlog:Az,scaleThreshold:kz,scaleTime:OEe,scaleUtc:PEe,tickFormat:_z},Symbol.toStringTag,{value:"Module"}));var REe=Np;function DEe(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],s=t(i);if(s!=null&&(o===void 0?s===s&&!REe(s):r(s,o)))var o=s,c=i}return c}var $w=DEe;function MEe(e,t){return e>t}var Vz=MEe,FEe=$w,$Ee=Vz,BEe=Op;function UEe(e){return e&&e.length?FEe(e,BEe,$Ee):void 0}var zEe=UEe;const Bw=Pr(zEe);function qEe(e,t){return e<t}var Gz=qEe,HEe=$w,WEe=Gz,VEe=Op;function GEe(e){return e&&e.length?HEe(e,VEe,WEe):void 0}var KEe=GEe;const Uw=Pr(KEe);var XEe=nE,YEe=Nl,JEe=tz,QEe=ls;function ZEe(e,t){var r=QEe(e)?XEe:JEe;return r(e,YEe(t))}var eTe=ZEe,tTe=ZU,rTe=eTe;function nTe(e,t){return tTe(rTe(e,t),1)}var aTe=nTe;const iTe=Pr(aTe);var sTe=xE;function oTe(e,t){return sTe(e,t)}var lTe=oTe;const zw=Pr(lTe);var Ip=1e9,cTe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},WE,wn=!0,io="[DecimalError] ",hf=io+"Invalid argument: ",HE=io+"Exponent out of range: ",Rp=Math.floor,Rd=Math.pow,uTe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Es,Ta=1e7,fn=7,Kz=9007199254740991,Kb=Rp(Kz/fn),xt={};xt.absoluteValue=xt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};xt.comparedTo=xt.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};xt.decimalPlaces=xt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*fn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};xt.dividedBy=xt.div=function(e){return dc(this,new this.constructor(e))};xt.dividedToIntegerBy=xt.idiv=function(e){var t=this,r=t.constructor;return Zr(dc(t,new r(e),0,1),r.precision)};xt.equals=xt.eq=function(e){return!this.cmp(e)};xt.exponent=function(){return ca(this)};xt.greaterThan=xt.gt=function(e){return this.cmp(e)>0};xt.greaterThanOrEqualTo=xt.gte=function(e){return this.cmp(e)>=0};xt.isInteger=xt.isint=function(){return this.e>this.d.length-2};xt.isNegative=xt.isneg=function(){return this.s<0};xt.isPositive=xt.ispos=function(){return this.s>0};xt.isZero=function(){return this.s===0};xt.lessThan=xt.lt=function(e){return this.cmp(e)<0};xt.lessThanOrEqualTo=xt.lte=function(e){return this.cmp(e)<1};xt.logarithm=xt.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Es))throw Error(io+"NaN");if(r.s<1)throw Error(io+(r.s?"NaN":"-Infinity"));return r.eq(Es)?new n(0):(wn=!1,t=dc(av(r,i),av(e,i),i),wn=!0,Zr(t,a))};xt.minus=xt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Jz(t,e):Xz(t,(e.s=-e.s,e))};xt.modulo=xt.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(io+"NaN");return r.s?(wn=!1,t=dc(r,e,0,1).times(e),wn=!0,r.minus(t)):Zr(new n(r),a)};xt.naturalExponential=xt.exp=function(){return Yz(this)};xt.naturalLogarithm=xt.ln=function(){return av(this)};xt.negated=xt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};xt.plus=xt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Xz(t,e):Jz(t,(e.s=-e.s,e))};xt.precision=xt.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(hf+e);if(t=ca(a)+1,n=a.d.length-1,r=n*fn+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};xt.squareRoot=xt.sqrt=function(){var e,t,r,n,a,i,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(io+"NaN")}for(e=ca(o),wn=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=fl(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Rp((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=s=r+3;;)if(i=n,n=i.plus(dc(o,i,s+2)).times(.5),fl(i.d).slice(0,s)===(t=fl(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),a==s&&t=="4999"){if(Zr(i,r+1,0),i.times(i).eq(o)){n=i;break}}else if(t!="9999")break;s+=4}return wn=!0,Zr(n,r)};xt.times=xt.mul=function(e){var t,r,n,a,i,s,o,c,u,d=this,f=d.constructor,p=d.d,h=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=p.length,u=h.length,c<u&&(i=p,p=h,h=i,s=c,c=u,u=s),i=[],s=c+u,n=s;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)o=i[a]+h[n]*p[a-n-1]+t,i[a--]=o%Ta|0,t=o/Ta|0;i[a]=(i[a]+t)%Ta|0}for(;!i[--s];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,wn?Zr(e,f.precision):e};xt.toDecimalPlaces=xt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(bl(e,0,Ip),t===void 0?t=n.rounding:bl(t,0,8),Zr(r,e+ca(r)+1,t))};xt.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Cf(n,!0):(bl(e,0,Ip),t===void 0?t=a.rounding:bl(t,0,8),n=Zr(new a(n),e+1,t),r=Cf(n,!0,e+1)),r};xt.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?Cf(a):(bl(e,0,Ip),t===void 0?t=i.rounding:bl(t,0,8),n=Zr(new i(a),e+ca(a)+1,t),r=Cf(n.abs(),!1,e+ca(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};xt.toInteger=xt.toint=function(){var e=this,t=e.constructor;return Zr(new t(e),ca(e)+1,t.rounding)};xt.toNumber=function(){return+this};xt.toPower=xt.pow=function(e){var t,r,n,a,i,s,o=this,c=o.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Es);if(o=new c(o),!o.s){if(e.s<1)throw Error(io+"Infinity");return o}if(o.eq(Es))return o;if(n=c.precision,e.eq(Es))return Zr(o,n);if(t=e.e,r=e.d.length-1,s=t>=r,i=o.s,s){if((r=d<0?-d:d)<=Kz){for(a=new c(Es),t=Math.ceil(n/fn+4),wn=!1;r%2&&(a=a.times(o),bL(a.d,t)),r=Rp(r/2),r!==0;)o=o.times(o),bL(o.d,t);return wn=!0,e.s<0?new c(Es).div(a):Zr(a,n)}}else if(i<0)throw Error(io+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,wn=!1,a=e.times(av(o,n+u)),wn=!0,a=Yz(a),a.s=i,a};xt.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=ca(a),n=Cf(a,r<=i.toExpNeg||r>=i.toExpPos)):(bl(e,1,Ip),t===void 0?t=i.rounding:bl(t,0,8),a=Zr(new i(a),e,t),r=ca(a),n=Cf(a,e<=r||r<=i.toExpNeg,e)),n};xt.toSignificantDigits=xt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(bl(e,1,Ip),t===void 0?t=n.rounding:bl(t,0,8)),Zr(new n(r),e,t)};xt.toString=xt.valueOf=xt.val=xt.toJSON=xt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ca(e),r=e.constructor;return Cf(e,t<=r.toExpNeg||t>=r.toExpPos)};function Xz(e,t){var r,n,a,i,s,o,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),wn?Zr(t,f):t;if(c=e.d,u=t.d,s=e.e,a=t.e,c=c.slice(),i=s-a,i){for(i<0?(n=c,i=-i,o=u.length):(n=u,a=s,o=c.length),s=Math.ceil(f/fn),o=s>o?s+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=c.length,i=u.length,o-i<0&&(i=o,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/Ta|0,c[i]%=Ta;for(r&&(c.unshift(r),++a),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=a,wn?Zr(t,f):t}function bl(e,t,r){if(e!==~~e||e<t||e>r)throw Error(hf+e)}function fl(e){var t,r,n,a=e.length-1,i="",s=e[0];if(a>0){for(i+=s,t=1;t<a;t++)n=e[t]+"",r=fn-n.length,r&&(i+=lu(r)),i+=n;s=e[t],n=s+"",r=fn-n.length,r&&(i+=lu(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}var dc=function(){function e(n,a){var i,s=0,o=n.length;for(n=n.slice();o--;)i=n[o]*a+s,n[o]=i%Ta|0,s=i/Ta|0;return s&&n.unshift(s),n}function t(n,a,i,s){var o,c;if(i!=s)c=i>s?1:-1;else for(o=c=0;o<i;o++)if(n[o]!=a[o]){c=n[o]>a[o]?1:-1;break}return c}function r(n,a,i){for(var s=0;i--;)n[i]-=s,s=n[i]<a[i]?1:0,n[i]=s*Ta+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,s){var o,c,u,d,f,p,h,g,m,x,y,v,b,S,_,A,j,E,T=n.constructor,L=n.s==a.s?1:-1,O=n.d,I=a.d;if(!n.s)return new T(n);if(!a.s)throw Error(io+"Division by zero");for(c=n.e-a.e,j=I.length,_=O.length,h=new T(L),g=h.d=[],u=0;I[u]==(O[u]||0);)++u;if(I[u]>(O[u]||0)&&--c,i==null?v=i=T.precision:s?v=i+(ca(n)-ca(a))+1:v=i,v<0)return new T(0);if(v=v/fn+2|0,u=0,j==1)for(d=0,I=I[0],v++;(u<_||d)&&v--;u++)b=d*Ta+(O[u]||0),g[u]=b/I|0,d=b%I|0;else{for(d=Ta/(I[0]+1)|0,d>1&&(I=e(I,d),O=e(O,d),j=I.length,_=O.length),S=j,m=O.slice(0,j),x=m.length;x<j;)m[x++]=0;E=I.slice(),E.unshift(0),A=I[0],I[1]>=Ta/2&&++A;do d=0,o=t(I,m,j,x),o<0?(y=m[0],j!=x&&(y=y*Ta+(m[1]||0)),d=y/A|0,d>1?(d>=Ta&&(d=Ta-1),f=e(I,d),p=f.length,x=m.length,o=t(f,m,p,x),o==1&&(d--,r(f,j<p?E:I,p))):(d==0&&(o=d=1),f=I.slice()),p=f.length,p<x&&f.unshift(0),r(m,f,x),o==-1&&(x=m.length,o=t(I,m,j,x),o<1&&(d++,r(m,j<x?E:I,x))),x=m.length):o===0&&(d++,m=[0]),g[u++]=d,o&&m[0]?m[x++]=O[S]||0:(m=[O[S]],x=1);while((S++<_||m[0]!==void 0)&&v--)}return g[0]||g.shift(),h.e=c,Zr(h,s?i+ca(h)+1:i)}}();function Yz(e,t){var r,n,a,i,s,o,c=0,u=0,d=e.constructor,f=d.precision;if(ca(e)>16)throw Error(HE+ca(e));if(!e.s)return new d(Es);for(wn=!1,o=f,s=new d(.03125);e.abs().gte(.1);)e=e.times(s),u+=5;for(n=Math.log(Rd(2,u))/Math.LN10*2+5|0,o+=n,r=a=i=new d(Es),d.precision=o;;){if(a=Zr(a.times(e),o),r=r.times(++c),s=i.plus(dc(a,r,o)),fl(s.d).slice(0,o)===fl(i.d).slice(0,o)){for(;u--;)i=Zr(i.times(i),o);return d.precision=f,t==null?(wn=!0,Zr(i,f)):i}i=s}}function ca(e){for(var t=e.e*fn,r=e.d[0];r>=10;r/=10)t++;return t}function _S(e,t,r){if(t>e.LN10.sd())throw wn=!0,r&&(e.precision=r),Error(io+"LN10 precision limit exceeded");return Zr(new e(e.LN10),t)}function lu(e){for(var t="";e--;)t+="0";return t}function av(e,t){var r,n,a,i,s,o,c,u,d,f=1,p=10,h=e,g=h.d,m=h.constructor,x=m.precision;if(h.s<1)throw Error(io+(h.s?"NaN":"-Infinity"));if(h.eq(Es))return new m(0);if(t==null?(wn=!1,u=x):u=t,h.eq(10))return t==null&&(wn=!0),_S(m,u);if(u+=p,m.precision=u,r=fl(g),n=r.charAt(0),i=ca(h),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(e),r=fl(h.d),n=r.charAt(0),f++;i=ca(h),n>1?(h=new m("0."+r),i++):h=new m(n+"."+r.slice(1))}else return c=_S(m,u+2,x).times(i+""),h=av(new m(n+"."+r.slice(1)),u-p).plus(c),m.precision=x,t==null?(wn=!0,Zr(h,x)):h;for(o=s=h=dc(h.minus(Es),h.plus(Es),u),d=Zr(h.times(h),u),a=3;;){if(s=Zr(s.times(d),u),c=o.plus(dc(s,new m(a),u)),fl(c.d).slice(0,u)===fl(o.d).slice(0,u))return o=o.times(2),i!==0&&(o=o.plus(_S(m,u+2,x).times(i+""))),o=dc(o,new m(f),u),m.precision=x,t==null?(wn=!0,Zr(o,x)):o;o=c,a+=2}}function yL(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Rp(r/fn),e.d=[],n=(r+1)%fn,r<0&&(n+=fn),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=fn;n<a;)e.d.push(+t.slice(n,n+=fn));t=t.slice(n),n=fn-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),wn&&(e.e>Kb||e.e<-Kb))throw Error(HE+r)}else e.s=0,e.e=0,e.d=[0];return e}function Zr(e,t,r){var n,a,i,s,o,c,u,d,f=e.d;for(s=1,i=f[0];i>=10;i/=10)s++;if(n=t-s,n<0)n+=fn,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/fn),i=f.length,d>=i)return e;for(u=i=f[d],s=1;i>=10;i/=10)s++;n%=fn,a=n-fn+s}if(r!==void 0&&(i=Rd(10,s-a-1),o=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?a>0?u/Rd(10,s-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=ca(e),f.length=1,t=t-i-1,f[0]=Rd(10,(fn-t%fn)%fn),e.e=Rp(-t/fn)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=Rd(10,fn-n),f[d]=a>0?(u/Rd(10,s-a)%Rd(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==Ta&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=Ta)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(wn&&(e.e>Kb||e.e<-Kb))throw Error(HE+ca(e));return e}function Jz(e,t){var r,n,a,i,s,o,c,u,d,f,p=e.constructor,h=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),wn?Zr(t,h):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),s=u-n,s){for(d=s<0,d?(r=c,s=-s,o=f.length):(r=f,n=u,o=c.length),a=Math.max(Math.ceil(h/fn),o)+2,s>a&&(s=a,r.length=1),r.reverse(),a=s;a--;)r.push(0);r.reverse()}else{for(a=c.length,o=f.length,d=a<o,d&&(o=a),a=0;a<o;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}s=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),o=c.length,a=f.length-o;a>0;--a)c[o++]=0;for(a=f.length;a>s;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=Ta-1;--c[i],c[a]+=Ta}c[a]-=f[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,wn?Zr(t,h):t):new p(0)}function Cf(e,t,r){var n,a=ca(e),i=fl(e.d),s=i.length;return t?(r&&(n=r-s)>0?i=i.charAt(0)+"."+i.slice(1)+lu(n):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+lu(-a-1)+i,r&&(n=r-s)>0&&(i+=lu(n))):a>=s?(i+=lu(a+1-s),r&&(n=r-a-1)>0&&(i=i+"."+lu(n))):((n=a+1)<s&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-s)>0&&(a+1===s&&(i+="."),i+=lu(n))),e.s<0?"-"+i:i}function bL(e,t){if(e.length>t)return e.length=t,!0}function Qz(e){var t,r,n;function a(i){var s=this;if(!(s instanceof a))return new a(i);if(s.constructor=a,i instanceof a){s.s=i.s,s.e=i.e,s.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(hf+i);if(i>0)s.s=1;else if(i<0)i=-i,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(i===~~i&&i<1e7){s.e=0,s.d=[i];return}return yL(s,i.toString())}else if(typeof i!="string")throw Error(hf+i);if(i.charCodeAt(0)===45?(i=i.slice(1),s.s=-1):s.s=1,uTe.test(i))yL(s,i);else throw Error(hf+i)}if(a.prototype=xt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=Qz,a.config=a.set=dTe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function dTe(e){if(!e||typeof e!="object")throw Error(io+"Object expected");var t,r,n,a=["precision",1,Ip,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Rp(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(hf+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(hf+r+": "+n);return this}var WE=Qz(cTe);Es=new WE(1);const Kr=WE;function fTe(e){return gTe(e)||mTe(e)||pTe(e)||hTe()}function hTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pTe(e,t){if(e){if(typeof e=="string")return o4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o4(e,t)}}function mTe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function gTe(e){if(Array.isArray(e))return o4(e)}function o4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var vTe=function(t){return t},Zz={},eq=function(t){return t===Zz},wL=function(t){return function r(){return arguments.length===0||arguments.length===1&&eq(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},xTe=function e(t,r){return t===1?r:wL(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=a.filter(function(o){return o!==Zz}).length;return s>=t?r.apply(void 0,a):e(t-s,wL(function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];var d=a.map(function(f){return eq(f)?c.shift():f});return r.apply(void 0,fTe(d).concat(c))}))})},qw=function(t){return xTe(t.length,t)},l4=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},yTe=qw(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),bTe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return vTe;var a=r.reverse(),i=a[0],s=a.slice(1);return function(){return s.reduce(function(o,c){return c(o)},i.apply(void 0,arguments))}},c4=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},tq=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r&&i.every(function(o,c){return o===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function wTe(e){var t;return e===0?t=1:t=Math.floor(new Kr(e).abs().log(10).toNumber())+1,t}function _Te(e,t,r){for(var n=new Kr(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var STe=qw(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),NTe=qw(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),jTe=qw(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const Hw={rangeStep:_Te,getDigitCount:wTe,interpolateNumber:STe,uninterpolateNumber:NTe,uninterpolateTruncation:jTe};function u4(e){return TTe(e)||ETe(e)||rq(e)||ATe()}function ATe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ETe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function TTe(e){if(Array.isArray(e))return d4(e)}function iv(e,t){return OTe(e)||kTe(e,t)||rq(e,t)||CTe()}function CTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rq(e,t){if(e){if(typeof e=="string")return d4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d4(e,t)}}function d4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kTe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var s=e[Symbol.iterator](),o;!(n=(o=s.next()).done)&&(r.push(o.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&s.return!=null&&s.return()}finally{if(a)throw i}}return r}}function OTe(e){if(Array.isArray(e))return e}function nq(e){var t=iv(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function aq(e,t,r){if(e.lte(0))return new Kr(0);var n=Hw.getDigitCount(e.toNumber()),a=new Kr(10).pow(n),i=e.div(a),s=n!==1?.05:.1,o=new Kr(Math.ceil(i.div(s).toNumber())).add(r).mul(s),c=o.mul(a);return t?c:new Kr(Math.ceil(c))}function PTe(e,t,r){var n=1,a=new Kr(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Kr(10).pow(Hw.getDigitCount(e)-1),a=new Kr(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Kr(Math.floor(e)))}else e===0?a=new Kr(Math.floor((t-1)/2)):r||(a=new Kr(Math.floor(e)));var s=Math.floor((t-1)/2),o=bTe(yTe(function(c){return a.add(new Kr(c-s).mul(n)).toNumber()}),l4);return o(0,t)}function iq(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Kr(0),tickMin:new Kr(0),tickMax:new Kr(0)};var i=aq(new Kr(t).sub(e).div(r-1),n,a),s;e<=0&&t>=0?s=new Kr(0):(s=new Kr(e).add(t).div(2),s=s.sub(new Kr(s).mod(i)));var o=Math.ceil(s.sub(e).div(i).toNumber()),c=Math.ceil(new Kr(t).sub(s).div(i).toNumber()),u=o+c+1;return u>r?iq(e,t,r,n,a+1):(u<r&&(c=t>0?c+(r-u):c,o=t>0?o:o+(r-u)),{step:i,tickMin:s.sub(new Kr(o).mul(i)),tickMax:s.add(new Kr(c).mul(i))})}function LTe(e){var t=iv(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(a,2),o=nq([r,n]),c=iv(o,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(u4(l4(0,a-1).map(function(){return 1/0}))):[].concat(u4(l4(0,a-1).map(function(){return-1/0})),[d]);return r>n?c4(f):f}if(u===d)return PTe(u,a,i);var p=iq(u,d,s,i),h=p.step,g=p.tickMin,m=p.tickMax,x=Hw.rangeStep(g,m.add(new Kr(.1).mul(h)),h);return r>n?c4(x):x}function ITe(e,t){var r=iv(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=nq([n,a]),o=iv(s,2),c=o[0],u=o[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var d=Math.max(t,2),f=aq(new Kr(u).sub(c).div(d-1),i,0),p=[].concat(u4(Hw.rangeStep(new Kr(c),new Kr(u).sub(new Kr(.99).mul(f)),f)),[u]);return n>a?c4(p):p}var RTe=tq(LTe),DTe=tq(ITe),MTe="Invariant failed";function kf(e,t){throw new Error(MTe)}var FTe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function G0(e){"@babel/helpers - typeof";return G0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G0(e)}function Xb(){return Xb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xb.apply(this,arguments)}function $Te(e,t){return qTe(e)||zTe(e,t)||UTe(e,t)||BTe()}function BTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UTe(e,t){if(e){if(typeof e=="string")return _L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _L(e,t)}}function _L(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zTe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function qTe(e){if(Array.isArray(e))return e}function HTe(e,t){if(e==null)return{};var r=WTe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function WTe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function VTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GTe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lq(n.key),n)}}function KTe(e,t,r){return t&&GTe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function XTe(e,t,r){return t=Yb(t),YTe(e,sq()?Reflect.construct(t,r||[],Yb(e).constructor):t.apply(e,r))}function YTe(e,t){if(t&&(G0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JTe(e)}function JTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sq=function(){return!!e})()}function Yb(e){return Yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yb(e)}function QTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f4(e,t)}function f4(e,t){return f4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},f4(e,t)}function oq(e,t,r){return t=lq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lq(e){var t=ZTe(e,"string");return G0(t)=="symbol"?t:t+""}function ZTe(e,t){if(G0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(G0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ww=function(e){function t(){return VTe(this,t),XTe(this,t,arguments)}return QTe(t,e),KTe(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,s=n.width,o=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,p=HTe(n,FTe),h=Wt(p,!1);this.props.direction==="x"&&d.type!=="number"&&kf();var g=c.map(function(m){var x=u(m,o),y=x.x,v=x.y,b=x.value,S=x.errorVal;if(!S)return null;var _=[],A,j;if(Array.isArray(S)){var E=$Te(S,2);A=E[0],j=E[1]}else A=j=S;if(i==="vertical"){var T=d.scale,L=v+a,O=L+s,I=L-s,D=T(b-A),z=T(b+j);_.push({x1:z,y1:O,x2:z,y2:I}),_.push({x1:D,y1:L,x2:z,y2:L}),_.push({x1:D,y1:O,x2:D,y2:I})}else if(i==="horizontal"){var Y=f.scale,se=y+a,ee=se-s,J=se+s,oe=Y(b-A),we=Y(b+j);_.push({x1:ee,y1:we,x2:J,y2:we}),_.push({x1:se,y1:oe,x2:se,y2:we}),_.push({x1:ee,y1:oe,x2:J,y2:oe})}return _e.createElement(Ur,Xb({className:"recharts-errorBar",key:"bar-".concat(_.map(function(xe){return"".concat(xe.x1,"-").concat(xe.x2,"-").concat(xe.y1,"-").concat(xe.y2)}))},h),_.map(function(xe){return _e.createElement("line",Xb({},xe,{key:"line-".concat(xe.x1,"-").concat(xe.x2,"-").concat(xe.y1,"-").concat(xe.y2)}))}))});return _e.createElement(Ur,{className:"recharts-errorBars"},g)}}])}(_e.Component);oq(Ww,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});oq(Ww,"displayName","ErrorBar");function sv(e){"@babel/helpers - typeof";return sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sv(e)}function SL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SL(Object(r),!0).forEach(function(n){eCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eCe(e,t,r){return t=tCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tCe(e){var t=rCe(e,"string");return sv(t)=="symbol"?t:t+""}function rCe(e,t){if(sv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cq=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,s=ws(r,cc);if(!s)return null;var o=cc.defaultProps,c=o!==void 0?Nd(Nd({},o),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:i==="children"?u=(n||[]).reduce(function(d,f){var p=f.item,h=f.props,g=h.sectors||h.data||[];return d.concat(g.map(function(m){return{type:s.props.iconType||p.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):u=(n||[]).map(function(d){var f=d.item,p=f.type.defaultProps,h=p!==void 0?Nd(Nd({},p),f.props):{},g=h.dataKey,m=h.name,x=h.legendType,y=h.hide;return{inactive:y,dataKey:g,type:c.iconType||x||"square",color:VE(f),value:m||g,payload:h}}),Nd(Nd(Nd({},c),cc.getWithHeight(s,a)),{},{payload:u,item:s})};function ov(e){"@babel/helpers - typeof";return ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ov(e)}function NL(e){return sCe(e)||iCe(e)||aCe(e)||nCe()}function nCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aCe(e,t){if(e){if(typeof e=="string")return h4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h4(e,t)}}function iCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sCe(e){if(Array.isArray(e))return h4(e)}function h4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Bn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jL(Object(r),!0).forEach(function(n){u0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function u0(e,t,r){return t=oCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oCe(e){var t=lCe(e,"string");return ov(t)=="symbol"?t:t+""}function lCe(e,t){if(ov(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ov(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pi(e,t,r){return dr(e)||dr(t)?r:Sa(t)?Os(e,t,r):Xt(t)?t(e):r}function lg(e,t,r,n){var a=iTe(e,function(o){return pi(o,t)});if(r==="number"){var i=a.filter(function(o){return nt(o)||parseFloat(o)});return i.length?[Uw(i),Bw(i)]:[1/0,-1/0]}var s=n?a.filter(function(o){return!dr(o)}):a;return s.map(function(o){return Sa(o)||o instanceof Date?o:""})}var cCe=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=-1,o=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(o<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<o;u++){var d=u>0?a[u-1].coordinate:a[o-1].coordinate,f=a[u].coordinate,p=u>=o-1?a[0].coordinate:a[u+1].coordinate,h=void 0;if(Li(f-d)!==Li(p-f)){var g=[];if(Li(p-f)===Li(c[1]-c[0])){h=p;var m=f+c[1]-c[0];g[0]=Math.min(m,(m+d)/2),g[1]=Math.max(m,(m+d)/2)}else{h=d;var x=p+c[1]-c[0];g[0]=Math.min(f,(x+f)/2),g[1]=Math.max(f,(x+f)/2)}var y=[Math.min(f,(h+f)/2),Math.max(f,(h+f)/2)];if(t>y[0]&&t<=y[1]||t>=g[0]&&t<=g[1]){s=a[u].index;break}}else{var v=Math.min(d,p),b=Math.max(d,p);if(t>(v+f)/2&&t<=(b+f)/2){s=a[u].index;break}}}else for(var S=0;S<o;S++)if(S===0&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<o-1&&t>(n[S].coordinate+n[S-1].coordinate)/2&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S===o-1&&t>(n[S].coordinate+n[S-1].coordinate)/2){s=n[S].index;break}return s},VE=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Bn(Bn({},t.type.defaultProps),t.props):t.props,s=i.stroke,o=i.fill,c;switch(a){case"Line":c=s;break;case"Area":case"Radar":c=s&&s!=="none"?s:o;break;default:c=o;break}return c},uCe=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var s={},o=Object.keys(i),c=0,u=o.length;c<u;c++)for(var d=i[o[c]].stackGroups,f=Object.keys(d),p=0,h=f.length;p<h;p++){var g=d[f[p]],m=g.items,x=g.cateAxisId,y=m.filter(function(j){return lc(j.type).indexOf("Bar")>=0});if(y&&y.length){var v=y[0].type.defaultProps,b=v!==void 0?Bn(Bn({},v),y[0].props):y[0].props,S=b.barSize,_=b[x];s[_]||(s[_]=[]);var A=dr(S)?r:S;s[_].push({item:y[0],stackList:y.slice(1),barSize:dr(A)?void 0:Ii(A,n,0)})}}return s},dCe=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,s=i===void 0?[]:i,o=t.maxBarSize,c=s.length;if(c<1)return null;var u=Ii(r,a,0,!0),d,f=[];if(s[0].barSize===+s[0].barSize){var p=!1,h=a/c,g=s.reduce(function(S,_){return S+_.barSize||0},0);g+=(c-1)*u,g>=a&&(g-=(c-1)*u,u=0),g>=a&&h>0&&(p=!0,h*=.9,g=c*h);var m=(a-g)/2>>0,x={offset:m-u,size:0};d=s.reduce(function(S,_){var A={item:_.item,position:{offset:x.offset+x.size+u,size:p?h:_.barSize}},j=[].concat(NL(S),[A]);return x=j[j.length-1].position,_.stackList&&_.stackList.length&&_.stackList.forEach(function(E){j.push({item:E,position:x})}),j},f)}else{var y=Ii(n,a,0,!0);a-2*y-(c-1)*u<=0&&(u=0);var v=(a-2*y-(c-1)*u)/c;v>1&&(v>>=0);var b=o===+o?Math.min(v,o):v;d=s.reduce(function(S,_,A){var j=[].concat(NL(S),[{item:_.item,position:{offset:y+(v+u)*A+(v-b)/2,size:b}}]);return _.stackList&&_.stackList.length&&_.stackList.forEach(function(E){j.push({item:E,position:j[j.length-1].position})}),j},f)}return d},fCe=function(t,r,n,a){var i=n.children,s=n.width,o=n.margin,c=s-(o.left||0)-(o.right||0),u=cq({children:i,legendWidth:c});if(u){var d=a||{},f=d.width,p=d.height,h=u.align,g=u.verticalAlign,m=u.layout;if((m==="vertical"||m==="horizontal"&&g==="middle")&&h!=="center"&&nt(t[h]))return Bn(Bn({},t),{},u0({},h,t[h]+(f||0)));if((m==="horizontal"||m==="vertical"&&h==="center")&&g!=="middle"&&nt(t[g]))return Bn(Bn({},t),{},u0({},g,t[g]+(p||0)))}return t},hCe=function(t,r,n){return dr(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},uq=function(t,r,n,a,i){var s=r.props.children,o=to(s,Ww).filter(function(u){return hCe(a,i,u.props.direction)});if(o&&o.length){var c=o.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=pi(d,n);if(dr(f))return u;var p=Array.isArray(f)?[Uw(f),Bw(f)]:[f,f],h=c.reduce(function(g,m){var x=pi(d,m,0),y=p[0]-Math.abs(Array.isArray(x)?x[0]:x),v=p[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(y,g[0]),Math.max(v,g[1])]},[1/0,-1/0]);return[Math.min(h[0],u[0]),Math.max(h[1],u[1])]},[1/0,-1/0])}return null},pCe=function(t,r,n,a,i){var s=r.map(function(o){return uq(t,o,n,i,a)}).filter(function(o){return!dr(o)});return s&&s.length?s.reduce(function(o,c){return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]},[1/0,-1/0]):null},dq=function(t,r,n,a,i){var s=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&uq(t,c,u,a)||lg(t,u,n,i)});if(n==="number")return s.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var o={};return s.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)o[u[d]]||(o[u[d]]=!0,c.push(u[d]));return c},[])},fq=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},hq=function(t,r,n,a){if(a)return t.map(function(c){return c.coordinate});var i,s,o=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(s=!0),c.coordinate});return i||o.push(r),s||o.push(n),o},nc=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,s=t.type,o=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&s==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?Li(o[0]-o[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var p=i?i.indexOf(f):f;return{coordinate:a(p)+u,value:f,offset:u}});return d.filter(function(f){return!t1(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,p){return{coordinate:a(f)+u,value:f,index:p,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,p){return{coordinate:a(f)+u,value:i?i[f]:f,index:p,offset:u}})},SS=new WeakMap,qx=function(t,r){if(typeof r!="function")return t;SS.has(t)||SS.set(t,new WeakMap);var n=SS.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},pq=function(t,r,n){var a=t.scale,i=t.type,s=t.layout,o=t.axisType;if(a==="auto")return s==="radial"&&o==="radiusAxis"?{scale:Zg(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:Hb(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:og(),realScaleType:"point"}:i==="category"?{scale:Zg(),realScaleType:"band"}:{scale:Hb(),realScaleType:"linear"};if(Af(a)){var c="scale".concat(Aw(a));return{scale:(xL[c]||og)(),realScaleType:xL[c]?c:"point"}}return Xt(a)?{scale:a}:{scale:og(),realScaleType:"point"}},AL=1e-4,mq=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-AL,s=Math.max(a[0],a[1])+AL,o=t(r[0]),c=t(r[n-1]);(o<i||o>s||c<i||c>s)&&t.domain([r[0],r[n-1]])}},mCe=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},gCe=function(t,r){if(!r||r.length!==2||!nt(r[0])||!nt(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!nt(t[0])||t[0]<n)&&(i[0]=n),(!nt(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},vCe=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,s=0,o=0;o<r;++o){var c=t1(t[o][n][1])?t[o][n][0]:t[o][n][1];c>=0?(t[o][n][0]=i,t[o][n][1]=i+c,i=t[o][n][1]):(t[o][n][0]=s,t[o][n][1]=s+c,s=t[o][n][1])}},xCe=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,s=0;s<r;++s){var o=t1(t[s][n][1])?t[s][n][0]:t[s][n][1];o>=0?(t[s][n][0]=i,t[s][n][1]=i+o,i=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},yCe={sign:vCe,expand:Fye,none:$0,silhouette:$ye,wiggle:Bye,positive:xCe},bCe=function(t,r,n){var a=r.map(function(o){return o.props.dataKey}),i=yCe[n],s=Mye().keys(a).value(function(o,c){return+pi(o,c,0)}).order(Fj).offset(i);return s(t)},wCe=function(t,r,n,a,i,s){if(!t)return null;var o=s?r.reverse():r,c={},u=o.reduce(function(f,p){var h,g=(h=p.type)!==null&&h!==void 0&&h.defaultProps?Bn(Bn({},p.type.defaultProps),p.props):p.props,m=g.stackId,x=g.hide;if(x)return f;var y=g[n],v=f[y]||{hasStack:!1,stackGroups:{}};if(Sa(m)){var b=v.stackGroups[m]||{numericAxisId:n,cateAxisId:a,items:[]};b.items.push(p),v.hasStack=!0,v.stackGroups[m]=b}else v.stackGroups[r1("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[p]};return Bn(Bn({},f),{},u0({},y,v))},c),d={};return Object.keys(u).reduce(function(f,p){var h=u[p];if(h.hasStack){var g={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(m,x){var y=h.stackGroups[x];return Bn(Bn({},m),{},u0({},x,{numericAxisId:n,cateAxisId:a,items:y.items,stackedData:bCe(t,y.items,i)}))},g)}return Bn(Bn({},f),{},u0({},p,h))},d)},gq=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,s=r.originalDomain,o=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=RTe(u,i,o);return t.domain([Uw(d),Bw(d)]),{niceTicks:d}}if(i&&a==="number"){var f=t.domain(),p=DTe(f,i,o);return{niceTicks:p}}return null},EL=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,s=t.entry,o=t.index;if(r.type==="category")return n[o]?n[o].coordinate+a:null;var c=pi(s,r.dataKey,r.domain[o]);return dr(c)?null:r.scale(c)-i/2+a},_Ce=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},SCe=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Bn(Bn({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(Sa(i)){var s=r[i];if(s){var o=s.items.indexOf(t);return o>=0?s.stackedData[o]:null}}return null},NCe=function(t){return t.reduce(function(r,n){return[Uw(n.concat([r[0]]).filter(nt)),Bw(n.concat([r[1]]).filter(nt))]},[1/0,-1/0])},vq=function(t,r,n){return Object.keys(t).reduce(function(a,i){var s=t[i],o=s.stackedData,c=o.reduce(function(u,d){var f=NCe(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},TL=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,CL=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,p4=function(t,r,n){if(Xt(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(nt(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(TL.test(t[0])){var i=+TL.exec(t[0])[1];a[0]=r[0]-i}else Xt(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(nt(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(CL.test(t[1])){var s=+CL.exec(t[1])[1];a[1]=r[1]+s}else Xt(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},Jb=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=bE(r,function(f){return f.coordinate}),s=1/0,o=1,c=i.length;o<c;o++){var u=i[o],d=i[o-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},kL=function(t,r,n){return!t||!t.length||zw(t,Os(n,"type.defaultProps.domain"))?r:t},xq=function(t,r){var n=t.type.defaultProps?Bn(Bn({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,s=n.unit,o=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return Bn(Bn({},Wt(t,!1)),{},{dataKey:a,unit:s,formatter:o,name:i||a,color:VE(t),value:pi(r,a),type:c,payload:r,chartType:u,hide:d})};function lv(e){"@babel/helpers - typeof";return lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lv(e)}function OL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OL(Object(r),!0).forEach(function(n){yq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yq(e,t,r){return t=jCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jCe(e){var t=ACe(e,"string");return lv(t)=="symbol"?t:t+""}function ACe(e,t){if(lv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(lv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ECe(e,t){return OCe(e)||kCe(e,t)||CCe(e,t)||TCe()}function TCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CCe(e,t){if(e){if(typeof e=="string")return PL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PL(e,t)}}function PL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kCe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function OCe(e){if(Array.isArray(e))return e}var Qb=Math.PI/180,PCe=function(t){return t*180/Math.PI},ln=function(t,r,n,a){return{x:t+Math.cos(-Qb*a)*n,y:r+Math.sin(-Qb*a)*n}},bq=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},LCe=function(t,r,n,a,i){var s=t.width,o=t.height,c=t.startAngle,u=t.endAngle,d=Ii(t.cx,s,s/2),f=Ii(t.cy,o,o/2),p=bq(s,o,n),h=Ii(t.innerRadius,p,0),g=Ii(t.outerRadius,p,p*.8),m=Object.keys(r);return m.reduce(function(x,y){var v=r[y],b=v.domain,S=v.reversed,_;if(dr(v.range))a==="angleAxis"?_=[c,u]:a==="radiusAxis"&&(_=[h,g]),S&&(_=[_[1],_[0]]);else{_=v.range;var A=_,j=ECe(A,2);c=j[0],u=j[1]}var E=pq(v,i),T=E.realScaleType,L=E.scale;L.domain(b).range(_),mq(L);var O=gq(L,Wl(Wl({},v),{},{realScaleType:T})),I=Wl(Wl(Wl({},v),O),{},{range:_,radius:g,realScaleType:T,scale:L,cx:d,cy:f,innerRadius:h,outerRadius:g,startAngle:c,endAngle:u});return Wl(Wl({},x),{},yq({},y,I))},{})},ICe=function(t,r){var n=t.x,a=t.y,i=r.x,s=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-s,2))},RCe=function(t,r){var n=t.x,a=t.y,i=r.cx,s=r.cy,o=ICe({x:n,y:a},{x:i,y:s});if(o<=0)return{radius:o};var c=(n-i)/o,u=Math.acos(c);return a>s&&(u=2*Math.PI-u),{radius:o,angle:PCe(u),angleInRadian:u}},DCe=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),s=Math.min(a,i);return{startAngle:r-s*360,endAngle:n-s*360}},MCe=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),s=Math.floor(a/360),o=Math.min(i,s);return t+o*360},LL=function(t,r){var n=t.x,a=t.y,i=RCe({x:n,y:a},r),s=i.radius,o=i.angle,c=r.innerRadius,u=r.outerRadius;if(s<c||s>u)return!1;if(s===0)return!0;var d=DCe(r),f=d.startAngle,p=d.endAngle,h=o,g;if(f<=p){for(;h>p;)h-=360;for(;h<f;)h+=360;g=h>=f&&h<=p}else{for(;h>f;)h-=360;for(;h<p;)h+=360;g=h>=p&&h<=f}return g?Wl(Wl({},r),{},{radius:s,angle:MCe(h,r)}):null},wq=function(t){return!F.isValidElement(t)&&!Xt(t)&&typeof t!="boolean"?t.className:""};function cv(e){"@babel/helpers - typeof";return cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cv(e)}var FCe=["offset"];function $Ce(e){return qCe(e)||zCe(e)||UCe(e)||BCe()}function BCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UCe(e,t){if(e){if(typeof e=="string")return m4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m4(e,t)}}function zCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qCe(e){if(Array.isArray(e))return m4(e)}function m4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function HCe(e,t){if(e==null)return{};var r=WCe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function WCe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function IL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IL(Object(r),!0).forEach(function(n){VCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VCe(e,t,r){return t=GCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GCe(e){var t=KCe(e,"string");return cv(t)=="symbol"?t:t+""}function KCe(e,t){if(cv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uv(){return uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uv.apply(this,arguments)}var XCe=function(t){var r=t.value,n=t.formatter,a=dr(t.children)?r:t.children;return Xt(n)?n(a):a},YCe=function(t,r){var n=Li(r-t),a=Math.min(Math.abs(r-t),360);return n*a},JCe=function(t,r,n){var a=t.position,i=t.viewBox,s=t.offset,o=t.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,p=c.outerRadius,h=c.startAngle,g=c.endAngle,m=c.clockWise,x=(f+p)/2,y=YCe(h,g),v=y>=0?1:-1,b,S;a==="insideStart"?(b=h+v*s,S=m):a==="insideEnd"?(b=g-v*s,S=!m):a==="end"&&(b=g+v*s,S=m),S=y<=0?S:!S;var _=ln(u,d,x,b),A=ln(u,d,x,b+(S?1:-1)*359),j="M".concat(_.x,",").concat(_.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(S?0:1,`,
    `).concat(A.x,",").concat(A.y),E=dr(t.id)?r1("recharts-radial-line-"):t.id;return _e.createElement("text",uv({},n,{dominantBaseline:"central",className:cr("recharts-radial-bar-label",o)}),_e.createElement("defs",null,_e.createElement("path",{id:E,d:j})),_e.createElement("textPath",{xlinkHref:"#".concat(E)},r))},QCe=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,s=i.cx,o=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,p=(d+f)/2;if(a==="outside"){var h=ln(s,o,u+n,p),g=h.x,m=h.y;return{x:g,y:m,textAnchor:g>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var x=(c+u)/2,y=ln(s,o,x,p),v=y.x,b=y.y;return{x:v,y:b,textAnchor:"middle",verticalAnchor:"middle"}},ZCe=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,s=r,o=s.x,c=s.y,u=s.width,d=s.height,f=d>=0?1:-1,p=f*a,h=f>0?"end":"start",g=f>0?"start":"end",m=u>=0?1:-1,x=m*a,y=m>0?"end":"start",v=m>0?"start":"end";if(i==="top"){var b={x:o+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:h};return xa(xa({},b),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var S={x:o+u/2,y:c+d+p,textAnchor:"middle",verticalAnchor:g};return xa(xa({},S),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(i==="left"){var _={x:o-x,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return xa(xa({},_),n?{width:Math.max(_.x-n.x,0),height:d}:{})}if(i==="right"){var A={x:o+u+x,y:c+d/2,textAnchor:v,verticalAnchor:"middle"};return xa(xa({},A),n?{width:Math.max(n.x+n.width-A.x,0),height:d}:{})}var j=n?{width:u,height:d}:{};return i==="insideLeft"?xa({x:o+x,y:c+d/2,textAnchor:v,verticalAnchor:"middle"},j):i==="insideRight"?xa({x:o+u-x,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},j):i==="insideTop"?xa({x:o+u/2,y:c+p,textAnchor:"middle",verticalAnchor:g},j):i==="insideBottom"?xa({x:o+u/2,y:c+d-p,textAnchor:"middle",verticalAnchor:h},j):i==="insideTopLeft"?xa({x:o+x,y:c+p,textAnchor:v,verticalAnchor:g},j):i==="insideTopRight"?xa({x:o+u-x,y:c+p,textAnchor:y,verticalAnchor:g},j):i==="insideBottomLeft"?xa({x:o+x,y:c+d-p,textAnchor:v,verticalAnchor:h},j):i==="insideBottomRight"?xa({x:o+u-x,y:c+d-p,textAnchor:y,verticalAnchor:h},j):jp(i)&&(nt(i.x)||Gd(i.x))&&(nt(i.y)||Gd(i.y))?xa({x:o+Ii(i.x,u),y:c+Ii(i.y,d),textAnchor:"end",verticalAnchor:"end"},j):xa({x:o+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},j)},eke=function(t){return"cx"in t&&nt(t.cx)};function Pa(e){var t=e.offset,r=t===void 0?5:t,n=HCe(e,FCe),a=xa({offset:r},n),i=a.viewBox,s=a.position,o=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,p=a.textBreakAll;if(!i||dr(o)&&dr(c)&&!F.isValidElement(u)&&!Xt(u))return null;if(F.isValidElement(u))return F.cloneElement(u,a);var h;if(Xt(u)){if(h=F.createElement(u,a),F.isValidElement(h))return h}else h=XCe(a);var g=eke(i),m=Wt(a,!0);if(g&&(s==="insideStart"||s==="insideEnd"||s==="end"))return JCe(a,h,m);var x=g?QCe(a):ZCe(a);return _e.createElement(Tf,uv({className:cr("recharts-label",f)},m,x,{breakAll:p}),h)}Pa.displayName="Label";var _q=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,s=t.endAngle,o=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,p=t.y,h=t.top,g=t.left,m=t.width,x=t.height,y=t.clockWise,v=t.labelViewBox;if(v)return v;if(nt(m)&&nt(x)){if(nt(f)&&nt(p))return{x:f,y:p,width:m,height:x};if(nt(h)&&nt(g))return{x:h,y:g,width:m,height:x}}return nt(f)&&nt(p)?{x:f,y:p,width:0,height:0}:nt(r)&&nt(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:s||a||0,innerRadius:u||0,outerRadius:d||c||o||0,clockWise:y}:t.viewBox?t.viewBox:{}},tke=function(t,r){return t?t===!0?_e.createElement(Pa,{key:"label-implicit",viewBox:r}):Sa(t)?_e.createElement(Pa,{key:"label-implicit",viewBox:r,value:t}):F.isValidElement(t)?t.type===Pa?F.cloneElement(t,{key:"label-implicit",viewBox:r}):_e.createElement(Pa,{key:"label-implicit",content:t,viewBox:r}):Xt(t)?_e.createElement(Pa,{key:"label-implicit",content:t,viewBox:r}):jp(t)?_e.createElement(Pa,uv({viewBox:r},t,{key:"label-implicit"})):null:null},rke=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=_q(t),s=to(a,Pa).map(function(c,u){return F.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return s;var o=tke(t.label,r||i);return[o].concat($Ce(s))};Pa.parseViewBox=_q;Pa.renderCallByParent=rke;function nke(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var ake=nke;const ike=Pr(ake);function dv(e){"@babel/helpers - typeof";return dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dv(e)}var ske=["valueAccessor"],oke=["data","dataKey","clockWise","id","textBreakAll"];function lke(e){return fke(e)||dke(e)||uke(e)||cke()}function cke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uke(e,t){if(e){if(typeof e=="string")return g4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g4(e,t)}}function dke(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fke(e){if(Array.isArray(e))return g4(e)}function g4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zb(){return Zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zb.apply(this,arguments)}function RL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function DL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RL(Object(r),!0).forEach(function(n){hke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hke(e,t,r){return t=pke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pke(e){var t=mke(e,"string");return dv(t)=="symbol"?t:t+""}function mke(e,t){if(dv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ML(e,t){if(e==null)return{};var r=gke(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function gke(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var vke=function(t){return Array.isArray(t.value)?ike(t.value):t.value};function Uu(e){var t=e.valueAccessor,r=t===void 0?vke:t,n=ML(e,ske),a=n.data,i=n.dataKey,s=n.clockWise,o=n.id,c=n.textBreakAll,u=ML(n,oke);return!a||!a.length?null:_e.createElement(Ur,{className:"recharts-label-list"},a.map(function(d,f){var p=dr(i)?r(d,f):pi(d&&d.payload,i),h=dr(o)?{}:{id:"".concat(o,"-").concat(f)};return _e.createElement(Pa,Zb({},Wt(d,!0),u,h,{parentViewBox:d.parentViewBox,value:p,textBreakAll:c,viewBox:Pa.parseViewBox(dr(s)?d:DL(DL({},d),{},{clockWise:s})),key:"label-".concat(f),index:f}))}))}Uu.displayName="LabelList";function xke(e,t){return e?e===!0?_e.createElement(Uu,{key:"labelList-implicit",data:t}):_e.isValidElement(e)||Xt(e)?_e.createElement(Uu,{key:"labelList-implicit",data:t,content:e}):jp(e)?_e.createElement(Uu,Zb({data:t},e,{key:"labelList-implicit"})):null:null}function yke(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=to(n,Uu).map(function(s,o){return F.cloneElement(s,{data:t,key:"labelList-".concat(o)})});if(!r)return a;var i=xke(e.label,t);return[i].concat(lke(a))}Uu.renderCallByParent=yke;function fv(e){"@babel/helpers - typeof";return fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fv(e)}function v4(){return v4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v4.apply(this,arguments)}function FL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $L(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FL(Object(r),!0).forEach(function(n){bke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bke(e,t,r){return t=wke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wke(e){var t=_ke(e,"string");return fv(t)=="symbol"?t:t+""}function _ke(e,t){if(fv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ske=function(t,r){var n=Li(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},Hx=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,s=t.sign,o=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(o?1:-1)+a,f=Math.asin(c/d)/Qb,p=u?i:i+s*f,h=ln(r,n,d,p),g=ln(r,n,a,p),m=u?i-s*f:i,x=ln(r,n,d*Math.cos(f*Qb),m);return{center:h,circleTangency:g,lineTangency:x,theta:f}},Sq=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,s=t.startAngle,o=t.endAngle,c=Ske(s,o),u=s+c,d=ln(r,n,i,s),f=ln(r,n,i,u),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(s>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var h=ln(r,n,a,s),g=ln(r,n,a,u);p+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(s<=u),`,
            `).concat(h.x,",").concat(h.y," Z")}else p+="L ".concat(r,",").concat(n," Z");return p},Nke=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,s=t.cornerRadius,o=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=Li(d-u),p=Hx({cx:r,cy:n,radius:i,angle:u,sign:f,cornerRadius:s,cornerIsExternal:c}),h=p.circleTangency,g=p.lineTangency,m=p.theta,x=Hx({cx:r,cy:n,radius:i,angle:d,sign:-f,cornerRadius:s,cornerIsExternal:c}),y=x.circleTangency,v=x.lineTangency,b=x.theta,S=c?Math.abs(u-d):Math.abs(u-d)-m-b;if(S<0)return o?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):Sq({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var _="M ".concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
  `);if(a>0){var A=Hx({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),j=A.circleTangency,E=A.lineTangency,T=A.theta,L=Hx({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),O=L.circleTangency,I=L.lineTangency,D=L.theta,z=c?Math.abs(u-d):Math.abs(u-d)-T-D;if(z<0&&s===0)return"".concat(_,"L").concat(r,",").concat(n,"Z");_+="L".concat(I.x,",").concat(I.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(z>180),",").concat(+(f>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(E.x,",").concat(E.y,"Z")}else _+="L".concat(r,",").concat(n,"Z");return _},jke={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Nq=function(t){var r=$L($L({},jke),t),n=r.cx,a=r.cy,i=r.innerRadius,s=r.outerRadius,o=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,p=r.className;if(s<i||d===f)return null;var h=cr("recharts-sector",p),g=s-i,m=Ii(o,g,0,!0),x;return m>0&&Math.abs(d-f)<360?x=Nke({cx:n,cy:a,innerRadius:i,outerRadius:s,cornerRadius:Math.min(m,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):x=Sq({cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:d,endAngle:f}),_e.createElement("path",v4({},Wt(r,!0),{className:h,d:x,role:"img"}))};function hv(e){"@babel/helpers - typeof";return hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hv(e)}function x4(){return x4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x4.apply(this,arguments)}function BL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function UL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BL(Object(r),!0).forEach(function(n){Ake(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ake(e,t,r){return t=Eke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Eke(e){var t=Tke(e,"string");return hv(t)=="symbol"?t:t+""}function Tke(e,t){if(hv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zL={curveBasisClosed:Aye,curveBasisOpen:Eye,curveBasis:jye,curveBumpX:dye,curveBumpY:fye,curveLinearClosed:Tye,curveLinear:Tw,curveMonotoneX:Cye,curveMonotoneY:kye,curveNatural:Oye,curveStep:Pye,curveStepAfter:Iye,curveStepBefore:Lye},Wx=function(t){return t.x===+t.x&&t.y===+t.y},Am=function(t){return t.x},Em=function(t){return t.y},Cke=function(t,r){if(Xt(t))return t;var n="curve".concat(Aw(t));return(n==="curveMonotone"||n==="curveBump")&&r?zL["".concat(n).concat(r==="vertical"?"Y":"X")]:zL[n]||Tw},kke=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,s=t.baseLine,o=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=Cke(n,o),f=u?i.filter(function(m){return Wx(m)}):i,p;if(Array.isArray(s)){var h=u?s.filter(function(m){return Wx(m)}):s,g=f.map(function(m,x){return UL(UL({},m),{},{base:h[x]})});return o==="vertical"?p=Rx().y(Em).x1(Am).x0(function(m){return m.base.x}):p=Rx().x(Am).y1(Em).y0(function(m){return m.base.y}),p.defined(Wx).curve(d),p(g)}return o==="vertical"&&nt(s)?p=Rx().y(Em).x1(Am).x0(s):nt(s)?p=Rx().x(Am).y1(Em).y0(s):p=xU().x(Am).y(Em),p.defined(Wx).curve(d),p(f)},y4=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var s=n&&n.length?kke(t):a;return F.createElement("path",x4({},Wt(t,!1),Nb(t),{className:cr("recharts-curve",r),d:s,ref:i}))},jq={exports:{}},Oke="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Pke=Oke,Lke=Pke;function Aq(){}function Eq(){}Eq.resetWarningCache=Aq;var Ike=function(){function e(n,a,i,s,o,c){if(c!==Lke){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Eq,resetWarningCache:Aq};return r.PropTypes=r,r};jq.exports=Ike();var Rke=jq.exports;const kr=Pr(Rke),{getOwnPropertyNames:Dke,getOwnPropertySymbols:Mke}=Object,{hasOwnProperty:Fke}=Object.prototype;function NS(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function Vx(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);const{cache:i}=a,s=i.get(r),o=i.get(n);if(s&&o)return s===n&&o===r;i.set(r,n),i.set(n,r);const c=e(r,n,a);return i.delete(r),i.delete(n),c}}function $ke(e){return e!=null?e[Symbol.toStringTag]:void 0}function qL(e){return Dke(e).concat(Mke(e))}const Bke=Object.hasOwn||((e,t)=>Fke.call(e,t));function Kf(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const Uke="__v",zke="__o",qke="_owner",{getOwnPropertyDescriptor:HL,keys:WL}=Object;function Hke(e,t){return e.byteLength===t.byteLength&&e2(new Uint8Array(e),new Uint8Array(t))}function Wke(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function Vke(e,t){return e.byteLength===t.byteLength&&e2(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function Gke(e,t){return Kf(e.getTime(),t.getTime())}function Kke(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Xke(e,t){return e===t}function VL(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.entries();let s,o,c=0;for(;(s=i.next())&&!s.done;){const u=t.entries();let d=!1,f=0;for(;(o=u.next())&&!o.done;){if(a[f]){f++;continue}const p=s.value,h=o.value;if(r.equals(p[0],h[0],c,f,e,t,r)&&r.equals(p[1],h[1],p[0],h[0],e,t,r)){d=a[f]=!0;break}f++}if(!d)return!1;c++}return!0}const Yke=Kf;function Jke(e,t,r){const n=WL(e);let a=n.length;if(WL(t).length!==a)return!1;for(;a-- >0;)if(!Tq(e,t,r,n[a]))return!1;return!0}function Tm(e,t,r){const n=qL(e);let a=n.length;if(qL(t).length!==a)return!1;let i,s,o;for(;a-- >0;)if(i=n[a],!Tq(e,t,r,i)||(s=HL(e,i),o=HL(t,i),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function Qke(e,t){return Kf(e.valueOf(),t.valueOf())}function Zke(e,t){return e.source===t.source&&e.flags===t.flags}function GL(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.values();let s,o;for(;(s=i.next())&&!s.done;){const c=t.values();let u=!1,d=0;for(;(o=c.next())&&!o.done;){if(!a[d]&&r.equals(s.value,o.value,s.value,o.value,e,t,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function e2(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function eOe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function Tq(e,t,r,n){return(n===qke||n===zke||n===Uke)&&(e.$$typeof||t.$$typeof)?!0:Bke(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const tOe="[object ArrayBuffer]",rOe="[object Arguments]",nOe="[object Boolean]",aOe="[object DataView]",iOe="[object Date]",sOe="[object Error]",oOe="[object Map]",lOe="[object Number]",cOe="[object Object]",uOe="[object RegExp]",dOe="[object Set]",fOe="[object String]",hOe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},pOe="[object URL]",mOe=Object.prototype.toString;function gOe({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:s,areNumbersEqual:o,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:d,areSetsEqual:f,areTypedArraysEqual:p,areUrlsEqual:h,unknownTagComparators:g}){return function(x,y,v){if(x===y)return!0;if(x==null||y==null)return!1;const b=typeof x;if(b!==typeof y)return!1;if(b!=="object")return b==="number"?o(x,y,v):b==="function"?i(x,y,v):!1;const S=x.constructor;if(S!==y.constructor)return!1;if(S===Object)return c(x,y,v);if(Array.isArray(x))return t(x,y,v);if(S===Date)return n(x,y,v);if(S===RegExp)return d(x,y,v);if(S===Map)return s(x,y,v);if(S===Set)return f(x,y,v);const _=mOe.call(x);if(_===iOe)return n(x,y,v);if(_===uOe)return d(x,y,v);if(_===oOe)return s(x,y,v);if(_===dOe)return f(x,y,v);if(_===cOe)return typeof x.then!="function"&&typeof y.then!="function"&&c(x,y,v);if(_===pOe)return h(x,y,v);if(_===sOe)return a(x,y,v);if(_===rOe)return c(x,y,v);if(hOe[_])return p(x,y,v);if(_===tOe)return e(x,y,v);if(_===aOe)return r(x,y,v);if(_===nOe||_===lOe||_===fOe)return u(x,y,v);if(g){let A=g[_];if(!A){const j=$ke(x);j&&(A=g[j])}if(A)return A(x,y,v)}return!1}}function vOe({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:Hke,areArraysEqual:r?Tm:Wke,areDataViewsEqual:Vke,areDatesEqual:Gke,areErrorsEqual:Kke,areFunctionsEqual:Xke,areMapsEqual:r?NS(VL,Tm):VL,areNumbersEqual:Yke,areObjectsEqual:r?Tm:Jke,arePrimitiveWrappersEqual:Qke,areRegExpsEqual:Zke,areSetsEqual:r?NS(GL,Tm):GL,areTypedArraysEqual:r?NS(e2,Tm):e2,areUrlsEqual:eOe,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const a=Vx(n.areArraysEqual),i=Vx(n.areMapsEqual),s=Vx(n.areObjectsEqual),o=Vx(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:o})}return n}function xOe(e){return function(t,r,n,a,i,s,o){return e(t,r,o)}}function yOe({circular:e,comparator:t,createState:r,equals:n,strict:a}){if(r)return function(o,c){const{cache:u=e?new WeakMap:void 0,meta:d}=r();return t(o,c,{cache:u,equals:n,meta:d,strict:a})};if(e)return function(o,c){return t(o,c,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(o,c){return t(o,c,i)}}const bOe=id();id({strict:!0});id({circular:!0});id({circular:!0,strict:!0});id({createInternalComparator:()=>Kf});id({strict:!0,createInternalComparator:()=>Kf});id({circular:!0,createInternalComparator:()=>Kf});id({circular:!0,createInternalComparator:()=>Kf,strict:!0});function id(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:a=!1}=e,i=vOe(e),s=gOe(i),o=r?r(s):xOe(s);return yOe({circular:t,comparator:s,createState:n,equals:o,strict:a})}function wOe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function KL(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):wOe(a)};requestAnimationFrame(n)}function b4(e){"@babel/helpers - typeof";return b4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b4(e)}function _Oe(e){return AOe(e)||jOe(e)||NOe(e)||SOe()}function SOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NOe(e,t){if(e){if(typeof e=="string")return XL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XL(e,t)}}function XL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function AOe(e){if(Array.isArray(e))return e}function EOe(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var s=i,o=_Oe(s),c=o[0],u=o.slice(1);if(typeof c=="number"){KL(a.bind(null,u),c);return}a(c),KL(a.bind(null,u));return}b4(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function pv(e){"@babel/helpers - typeof";return pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pv(e)}function YL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function JL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YL(Object(r),!0).forEach(function(n){Cq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cq(e,t,r){return t=TOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TOe(e){var t=COe(e,"string");return pv(t)==="symbol"?t:String(t)}function COe(e,t){if(pv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kOe=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},OOe=function(t){return t},POe=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},cg=function(t,r){return Object.keys(r).reduce(function(n,a){return JL(JL({},n),{},Cq({},a,t(a,r[a])))},{})},QL=function(t,r,n){return t.map(function(a){return"".concat(POe(a)," ").concat(r,"ms ").concat(n)}).join(",")};function LOe(e,t){return DOe(e)||ROe(e,t)||kq(e,t)||IOe()}function IOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ROe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function DOe(e){if(Array.isArray(e))return e}function MOe(e){return BOe(e)||$Oe(e)||kq(e)||FOe()}function FOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kq(e,t){if(e){if(typeof e=="string")return w4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w4(e,t)}}function $Oe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function BOe(e){if(Array.isArray(e))return w4(e)}function w4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var t2=1e-4,Oq=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},Pq=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},ZL=function(t,r){return function(n){var a=Oq(t,r);return Pq(a,n)}},UOe=function(t,r){return function(n){var a=Oq(t,r),i=[].concat(MOe(a.map(function(s,o){return s*o}).slice(1)),[0]);return Pq(i,n)}},eI=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],s=r[2],o=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,s=1,o=1;break;case"ease":a=.25,i=.1,s=.25,o=1;break;case"ease-in":a=.42,i=0,s=1,o=1;break;case"ease-out":a=.42,i=0,s=.58,o=1;break;case"ease-in-out":a=0,i=0,s=.58,o=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),d=LOe(u,4);a=d[0],i=d[1],s=d[2],o=d[3]}}}var f=ZL(a,s),p=ZL(i,o),h=UOe(a,s),g=function(y){return y>1?1:y<0?0:y},m=function(y){for(var v=y>1?1:y,b=v,S=0;S<8;++S){var _=f(b)-v,A=h(b);if(Math.abs(_-v)<t2||A<t2)return p(b);b=g(b-_/A)}return p(b)};return m.isStepper=!1,m},zOe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,s=t.dt,o=s===void 0?17:s,c=function(d,f,p){var h=-(d-f)*n,g=p*i,m=p+(h-g)*o/1e3,x=p*o/1e3+d;return Math.abs(x-f)<t2&&Math.abs(m)<t2?[f,0]:[x,m]};return c.isStepper=!0,c.dt=o,c},qOe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return eI(a);case"spring":return zOe();default:if(a.split("(")[0]==="cubic-bezier")return eI(a)}return typeof a=="function"?a:null};function mv(e){"@babel/helpers - typeof";return mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mv(e)}function tI(e){return VOe(e)||WOe(e)||Lq(e)||HOe()}function HOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function VOe(e){if(Array.isArray(e))return S4(e)}function rI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ka(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rI(Object(r),!0).forEach(function(n){_4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _4(e,t,r){return t=GOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GOe(e){var t=KOe(e,"string");return mv(t)==="symbol"?t:String(t)}function KOe(e,t){if(mv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(mv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XOe(e,t){return QOe(e)||JOe(e,t)||Lq(e,t)||YOe()}function YOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lq(e,t){if(e){if(typeof e=="string")return S4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S4(e,t)}}function S4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function JOe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function QOe(e){if(Array.isArray(e))return e}var r2=function(t,r,n){return t+(r-t)*n},N4=function(t){var r=t.from,n=t.to;return r!==n},ZOe=function e(t,r,n){var a=cg(function(i,s){if(N4(s)){var o=t(s.from,s.to,s.velocity),c=XOe(o,2),u=c[0],d=c[1];return Ka(Ka({},s),{},{from:u,velocity:d})}return s},r);return n<1?cg(function(i,s){return N4(s)?Ka(Ka({},s),{},{velocity:r2(s.velocity,a[i].velocity,n),from:r2(s.from,a[i].from,n)}):s},r):e(t,a,n-1)};const e6e=function(e,t,r,n,a){var i=kOe(e,t),s=i.reduce(function(x,y){return Ka(Ka({},x),{},_4({},y,[e[y],t[y]]))},{}),o=i.reduce(function(x,y){return Ka(Ka({},x),{},_4({},y,{from:e[y],velocity:0,to:t[y]}))},{}),c=-1,u,d,f=function(){return null},p=function(){return cg(function(y,v){return v.from},o)},h=function(){return!Object.values(o).filter(N4).length},g=function(y){u||(u=y);var v=y-u,b=v/r.dt;o=ZOe(r,o,b),a(Ka(Ka(Ka({},e),t),p())),u=y,h()||(c=requestAnimationFrame(f))},m=function(y){d||(d=y);var v=(y-d)/n,b=cg(function(_,A){return r2.apply(void 0,tI(A).concat([r(v)]))},s);if(a(Ka(Ka(Ka({},e),t),b)),v<1)c=requestAnimationFrame(f);else{var S=cg(function(_,A){return r2.apply(void 0,tI(A).concat([r(1)]))},s);a(Ka(Ka(Ka({},e),t),S))}};return f=r.isStepper?g:m,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function K0(e){"@babel/helpers - typeof";return K0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K0(e)}var t6e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function r6e(e,t){if(e==null)return{};var r=n6e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function n6e(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function jS(e){return o6e(e)||s6e(e)||i6e(e)||a6e()}function a6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i6e(e,t){if(e){if(typeof e=="string")return j4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j4(e,t)}}function s6e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function o6e(e){if(Array.isArray(e))return j4(e)}function j4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function So(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nI(Object(r),!0).forEach(function(n){Um(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Um(e,t,r){return t=Iq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c6e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Iq(n.key),n)}}function u6e(e,t,r){return t&&c6e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Iq(e){var t=d6e(e,"string");return K0(t)==="symbol"?t:String(t)}function d6e(e,t){if(K0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(K0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A4(e,t)}function A4(e,t){return A4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},A4(e,t)}function h6e(e){var t=p6e();return function(){var n=n2(e),a;if(t){var i=n2(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return E4(this,a)}}function E4(e,t){if(t&&(K0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T4(e)}function T4(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p6e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function n2(e){return n2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},n2(e)}var Nc=function(e){f6e(r,e);var t=h6e(r);function r(n,a){var i;l6e(this,r),i=t.call(this,n,a);var s=i.props,o=s.isActive,c=s.attributeName,u=s.from,d=s.to,f=s.steps,p=s.children,h=s.duration;if(i.handleStyleChange=i.handleStyleChange.bind(T4(i)),i.changeStyle=i.changeStyle.bind(T4(i)),!o||h<=0)return i.state={style:{}},typeof p=="function"&&(i.state={style:d}),E4(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof p=="function")return i.state={style:u},E4(i);i.state={style:c?Um({},c,u):u}}else i.state={style:{}};return i}return u6e(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,s=a.canBegin;this.mounted=!0,!(!i||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,s=i.isActive,o=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,p=this.state.style;if(o){if(!s){var h={style:c?Um({},c,d):d};this.state&&p&&(c&&p[c]!==d||!c&&p!==d)&&this.setState(h);return}if(!(bOe(a.to,d)&&a.canBegin&&a.isActive)){var g=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=g||u?f:a.to;if(this.state&&p){var x={style:c?Um({},c,m):m};(c&&p[c]!==m||!c&&p!==m)&&this.setState(x)}this.runAnimation(So(So({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,s=a.from,o=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,p=a.onAnimationStart,h=e6e(s,o,qOe(u),c,this.changeStyle),g=function(){i.stopJSAnimation=h()};this.manager.start([p,d,g,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,s=a.steps,o=a.begin,c=a.onAnimationStart,u=s[0],d=u.style,f=u.duration,p=f===void 0?0:f,h=function(m,x,y){if(y===0)return m;var v=x.duration,b=x.easing,S=b===void 0?"ease":b,_=x.style,A=x.properties,j=x.onAnimationEnd,E=y>0?s[y-1]:x,T=A||Object.keys(_);if(typeof S=="function"||S==="spring")return[].concat(jS(m),[i.runJSAnimation.bind(i,{from:E.style,to:_,duration:v,easing:S}),v]);var L=QL(T,v,S),O=So(So(So({},E.style),_),{},{transition:L});return[].concat(jS(m),[O,v,j]).filter(OOe)};return this.manager.start([c].concat(jS(s.reduce(h,[d,Math.max(p,o)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=EOe());var i=a.begin,s=a.duration,o=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,p=a.steps,h=a.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof h=="function"||u==="spring"){this.runJSAnimation(a);return}if(p.length>1){this.runStepAnimation(a);return}var m=o?Um({},o,c):c,x=QL(Object.keys(m),s,u);g.start([d,i,So(So({},m),{},{transition:x}),s,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var s=a.duration;a.attributeName,a.easing;var o=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=r6e(a,t6e),u=F.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!o||u===0||s<=0)return i;var f=function(h){var g=h.props,m=g.style,x=m===void 0?{}:m,y=g.className,v=F.cloneElement(h,So(So({},c),{},{style:So(So({},x),d),className:y}));return v};return u===1?f(F.Children.only(i)):_e.createElement("div",null,F.Children.map(i,function(p){return f(p)}))}}]),r}(F.PureComponent);Nc.displayName="Animate";Nc.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Nc.propTypes={from:kr.oneOfType([kr.object,kr.string]),to:kr.oneOfType([kr.object,kr.string]),attributeName:kr.string,duration:kr.number,begin:kr.number,easing:kr.oneOfType([kr.string,kr.func]),steps:kr.arrayOf(kr.shape({duration:kr.number.isRequired,style:kr.object.isRequired,easing:kr.oneOfType([kr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),kr.func]),properties:kr.arrayOf("string"),onAnimationEnd:kr.func})),children:kr.oneOfType([kr.node,kr.func]),isActive:kr.bool,canBegin:kr.bool,onAnimationEnd:kr.func,shouldReAnimate:kr.bool,onAnimationStart:kr.func,onAnimationReStart:kr.func};function gv(e){"@babel/helpers - typeof";return gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gv(e)}function a2(){return a2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a2.apply(this,arguments)}function m6e(e,t){return y6e(e)||x6e(e,t)||v6e(e,t)||g6e()}function g6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v6e(e,t){if(e){if(typeof e=="string")return aI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aI(e,t)}}function aI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function x6e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function y6e(e){if(Array.isArray(e))return e}function iI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iI(Object(r),!0).forEach(function(n){b6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function b6e(e,t,r){return t=w6e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w6e(e){var t=_6e(e,"string");return gv(t)=="symbol"?t:t+""}function _6e(e,t){if(gv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oI=function(t,r,n,a,i){var s=Math.min(Math.abs(n)/2,Math.abs(a)/2),o=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(s>0&&i instanceof Array){for(var f=[0,0,0,0],p=0,h=4;p<h;p++)f[p]=i[p]>s?s:i[p];d="M".concat(t,",").concat(r+o*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+o*f[1])),d+="L ".concat(t+n,",").concat(r+a-o*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-c*f[2],",").concat(r+a)),d+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-o*f[3])),d+="Z"}else if(s>0&&i===+i&&i>0){var g=Math.min(s,i);d="M ".concat(t,",").concat(r+o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+c*g,",").concat(r,`
            L `).concat(t+n-c*g,",").concat(r,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+n,",").concat(r+o*g,`
            L `).concat(t+n,",").concat(r+a-o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+n-c*g,",").concat(r+a,`
            L `).concat(t+c*g,",").concat(r+a,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(r+a-o*g," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},S6e=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,s=r.y,o=r.width,c=r.height;if(Math.abs(o)>0&&Math.abs(c)>0){var u=Math.min(i,i+o),d=Math.max(i,i+o),f=Math.min(s,s+c),p=Math.max(s,s+c);return n>=u&&n<=d&&a>=f&&a<=p}return!1},N6e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},GE=function(t){var r=sI(sI({},N6e),t),n=F.useRef(),a=F.useState(-1),i=m6e(a,2),s=i[0],o=i[1];F.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&o(S)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,p=r.radius,h=r.className,g=r.animationEasing,m=r.animationDuration,x=r.animationBegin,y=r.isAnimationActive,v=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var b=cr("recharts-rectangle",h);return v?_e.createElement(Nc,{canBegin:s>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:m,animationEasing:g,isActive:v},function(S){var _=S.width,A=S.height,j=S.x,E=S.y;return _e.createElement(Nc,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:m,isActive:y,easing:g},_e.createElement("path",a2({},Wt(r,!0),{className:b,d:oI(j,E,_,A,p),ref:n})))}):_e.createElement("path",a2({},Wt(r,!0),{className:b,d:oI(c,u,d,f,p)}))},j6e=["points","className","baseLinePoints","connectNulls"];function Bh(){return Bh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bh.apply(this,arguments)}function A6e(e,t){if(e==null)return{};var r=E6e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function E6e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function lI(e){return O6e(e)||k6e(e)||C6e(e)||T6e()}function T6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C6e(e,t){if(e){if(typeof e=="string")return C4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C4(e,t)}}function k6e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function O6e(e){if(Array.isArray(e))return C4(e)}function C4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var cI=function(t){return t&&t.x===+t.x&&t.y===+t.y},P6e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){cI(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),cI(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},ug=function(t,r){var n=P6e(t);r&&(n=[n.reduce(function(i,s){return[].concat(lI(i),lI(s))},[])]);var a=n.map(function(i){return i.reduce(function(s,o,c){return"".concat(s).concat(c===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},L6e=function(t,r,n){var a=ug(t,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(ug(r.reverse(),n).slice(1))},I6e=function(t){var r=t.points,n=t.className,a=t.baseLinePoints,i=t.connectNulls,s=A6e(t,j6e);if(!r||!r.length)return null;var o=cr("recharts-polygon",n);if(a&&a.length){var c=s.stroke&&s.stroke!=="none",u=L6e(r,a,i);return _e.createElement("g",{className:o},_e.createElement("path",Bh({},Wt(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),c?_e.createElement("path",Bh({},Wt(s,!0),{fill:"none",d:ug(r,i)})):null,c?_e.createElement("path",Bh({},Wt(s,!0),{fill:"none",d:ug(a,i)})):null)}var d=ug(r,i);return _e.createElement("path",Bh({},Wt(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",className:o,d}))};function k4(){return k4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k4.apply(this,arguments)}var KE=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,s=cr("recharts-dot",i);return r===+r&&n===+n&&a===+a?F.createElement("circle",k4({},Wt(t,!1),Nb(t),{className:s,cx:r,cy:n,r:a})):null};function vv(e){"@babel/helpers - typeof";return vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vv(e)}var R6e=["x","y","top","left","width","height","className"];function O4(){return O4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O4.apply(this,arguments)}function uI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function D6e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uI(Object(r),!0).forEach(function(n){M6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M6e(e,t,r){return t=F6e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F6e(e){var t=$6e(e,"string");return vv(t)=="symbol"?t:t+""}function $6e(e,t){if(vv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B6e(e,t){if(e==null)return{};var r=U6e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function U6e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var z6e=function(t,r,n,a,i,s){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(s,",").concat(r,"h").concat(n)},q6e=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,s=t.top,o=s===void 0?0:s,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,p=t.height,h=p===void 0?0:p,g=t.className,m=B6e(t,R6e),x=D6e({x:n,y:i,top:o,left:u,width:f,height:h},m);return!nt(n)||!nt(i)||!nt(f)||!nt(h)||!nt(o)||!nt(u)?null:_e.createElement("path",O4({},Wt(x,!0),{className:cr("recharts-cross",g),d:z6e(n,i,f,h,o,u)}))},H6e=$w,W6e=Vz,V6e=Nl;function G6e(e,t){return e&&e.length?H6e(e,V6e(t),W6e):void 0}var K6e=G6e;const X6e=Pr(K6e);var Y6e=$w,J6e=Nl,Q6e=Gz;function Z6e(e,t){return e&&e.length?Y6e(e,J6e(t),Q6e):void 0}var ePe=Z6e;const tPe=Pr(ePe);var rPe=["cx","cy","angle","ticks","axisLine"],nPe=["ticks","tick","angle","tickFormatter","stroke"];function X0(e){"@babel/helpers - typeof";return X0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X0(e)}function dg(){return dg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dg.apply(this,arguments)}function dI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dI(Object(r),!0).forEach(function(n){Vw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fI(e,t){if(e==null)return{};var r=aPe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function aPe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function iPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Dq(n.key),n)}}function sPe(e,t,r){return t&&hI(e.prototype,t),r&&hI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oPe(e,t,r){return t=i2(t),lPe(e,Rq()?Reflect.construct(t,r||[],i2(e).constructor):t.apply(e,r))}function lPe(e,t){if(t&&(X0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cPe(e)}function cPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rq=function(){return!!e})()}function i2(e){return i2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},i2(e)}function uPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P4(e,t)}function P4(e,t){return P4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},P4(e,t)}function Vw(e,t,r){return t=Dq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dq(e){var t=dPe(e,"string");return X0(t)=="symbol"?t:t+""}function dPe(e,t){if(X0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(X0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Gw=function(e){function t(){return iPe(this,t),oPe(this,t,arguments)}return uPe(t,e),sPe(t,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,s=i.angle,o=i.cx,c=i.cy;return ln(o,c,a,s)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.angle,o=n.ticks,c=X6e(o,function(d){return d.coordinate||0}),u=tPe(o,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.angle,o=n.ticks,c=n.axisLine,u=fI(n,rPe),d=o.reduce(function(g,m){return[Math.min(g[0],m.coordinate),Math.max(g[1],m.coordinate)]},[1/0,-1/0]),f=ln(a,i,d[0],s),p=ln(a,i,d[1],s),h=jd(jd(jd({},Wt(u,!1)),{},{fill:"none"},Wt(c,!1)),{},{x1:f.x,y1:f.y,x2:p.x,y2:p.y});return _e.createElement("line",dg({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,s=a.tick,o=a.angle,c=a.tickFormatter,u=a.stroke,d=fI(a,nPe),f=this.getTickTextAnchor(),p=Wt(d,!1),h=Wt(s,!1),g=i.map(function(m,x){var y=n.getTickValueCoord(m),v=jd(jd(jd(jd({textAnchor:f,transform:"rotate(".concat(90-o,", ").concat(y.x,", ").concat(y.y,")")},p),{},{stroke:"none",fill:u},h),{},{index:x},y),{},{payload:m});return _e.createElement(Ur,dg({className:cr("recharts-polar-radius-axis-tick",wq(s)),key:"tick-".concat(m.coordinate)},Ef(n.props,m,x)),t.renderTickItem(s,v,c?c(m.value,x):m.value))});return _e.createElement(Ur,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,s=n.tick;return!a||!a.length?null:_e.createElement(Ur,{className:cr("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),s&&this.renderTicks(),Pa.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var s;return _e.isValidElement(n)?s=_e.cloneElement(n,a):Xt(n)?s=n(a):s=_e.createElement(Tf,dg({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),s}}])}(F.PureComponent);Vw(Gw,"displayName","PolarRadiusAxis");Vw(Gw,"axisType","radiusAxis");Vw(Gw,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Y0(e){"@babel/helpers - typeof";return Y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y0(e)}function Bd(){return Bd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bd.apply(this,arguments)}function pI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ad(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pI(Object(r),!0).forEach(function(n){Kw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fq(n.key),n)}}function hPe(e,t,r){return t&&mI(e.prototype,t),r&&mI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pPe(e,t,r){return t=s2(t),mPe(e,Mq()?Reflect.construct(t,r||[],s2(e).constructor):t.apply(e,r))}function mPe(e,t){if(t&&(Y0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gPe(e)}function gPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mq=function(){return!!e})()}function s2(e){return s2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},s2(e)}function vPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L4(e,t)}function L4(e,t){return L4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},L4(e,t)}function Kw(e,t,r){return t=Fq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fq(e){var t=xPe(e,"string");return Y0(t)=="symbol"?t:t+""}function xPe(e,t){if(Y0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Y0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var yPe=Math.PI/180,gI=1e-5,Xw=function(e){function t(){return fPe(this,t),pPe(this,t,arguments)}return vPe(t,e),hPe(t,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,s=a.cy,o=a.radius,c=a.orientation,u=a.tickSize,d=u||8,f=ln(i,s,o,n.coordinate),p=ln(i,s,o+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:p.x,y2:p.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*yPe),s;return i>gI?s=a==="outer"?"start":"end":i<-gI?s=a==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.radius,o=n.axisLine,c=n.axisLineType,u=Ad(Ad({},Wt(this.props,!1)),{},{fill:"none"},Wt(o,!1));if(c==="circle")return _e.createElement(KE,Bd({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:s}));var d=this.props.ticks,f=d.map(function(p){return ln(a,i,s,p.coordinate)});return _e.createElement(I6e,Bd({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,s=a.tick,o=a.tickLine,c=a.tickFormatter,u=a.stroke,d=Wt(this.props,!1),f=Wt(s,!1),p=Ad(Ad({},d),{},{fill:"none"},Wt(o,!1)),h=i.map(function(g,m){var x=n.getTickLineCoord(g),y=n.getTickTextAnchor(g),v=Ad(Ad(Ad({textAnchor:y},d),{},{stroke:"none",fill:u},f),{},{index:m,payload:g,x:x.x2,y:x.y2});return _e.createElement(Ur,Bd({className:cr("recharts-polar-angle-axis-tick",wq(s)),key:"tick-".concat(g.coordinate)},Ef(n.props,g,m)),o&&_e.createElement("line",Bd({className:"recharts-polar-angle-axis-tick-line"},p,x)),s&&t.renderTickItem(s,v,c?c(g.value,m):g.value))});return _e.createElement(Ur,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,s=n.axisLine;return i<=0||!a||!a.length?null:_e.createElement(Ur,{className:cr("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var s;return _e.isValidElement(n)?s=_e.cloneElement(n,a):Xt(n)?s=n(a):s=_e.createElement(Tf,Bd({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),s}}])}(F.PureComponent);Kw(Xw,"displayName","PolarAngleAxis");Kw(Xw,"axisType","angleAxis");Kw(Xw,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var bPe=zU,wPe=bPe(Object.getPrototypeOf,Object),_Pe=wPe,SPe=Lc,NPe=_Pe,jPe=Ic,APe="[object Object]",EPe=Function.prototype,TPe=Object.prototype,$q=EPe.toString,CPe=TPe.hasOwnProperty,kPe=$q.call(Object);function OPe(e){if(!jPe(e)||SPe(e)!=APe)return!1;var t=NPe(e);if(t===null)return!0;var r=CPe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&$q.call(r)==kPe}var PPe=OPe;const LPe=Pr(PPe);var IPe=Lc,RPe=Ic,DPe="[object Boolean]";function MPe(e){return e===!0||e===!1||RPe(e)&&IPe(e)==DPe}var FPe=MPe;const $Pe=Pr(FPe);function xv(e){"@babel/helpers - typeof";return xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xv(e)}function o2(){return o2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o2.apply(this,arguments)}function BPe(e,t){return HPe(e)||qPe(e,t)||zPe(e,t)||UPe()}function UPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zPe(e,t){if(e){if(typeof e=="string")return vI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vI(e,t)}}function vI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qPe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function HPe(e){if(Array.isArray(e))return e}function xI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xI(Object(r),!0).forEach(function(n){WPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WPe(e,t,r){return t=VPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VPe(e){var t=GPe(e,"string");return xv(t)=="symbol"?t:t+""}function GPe(e,t){if(xv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bI=function(t,r,n,a,i){var s=n-a,o;return o="M ".concat(t,",").concat(r),o+="L ".concat(t+n,",").concat(r),o+="L ".concat(t+n-s/2,",").concat(r+i),o+="L ".concat(t+n-s/2-a,",").concat(r+i),o+="L ".concat(t,",").concat(r," Z"),o},KPe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},XPe=function(t){var r=yI(yI({},KPe),t),n=F.useRef(),a=F.useState(-1),i=BPe(a,2),s=i[0],o=i[1];F.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var b=n.current.getTotalLength();b&&o(b)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,p=r.height,h=r.className,g=r.animationEasing,m=r.animationDuration,x=r.animationBegin,y=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||p!==+p||d===0&&f===0||p===0)return null;var v=cr("recharts-trapezoid",h);return y?_e.createElement(Nc,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:p,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:p,x:c,y:u},duration:m,animationEasing:g,isActive:y},function(b){var S=b.upperWidth,_=b.lowerWidth,A=b.height,j=b.x,E=b.y;return _e.createElement(Nc,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:m,easing:g},_e.createElement("path",o2({},Wt(r,!0),{className:v,d:bI(j,E,S,_,A),ref:n})))}):_e.createElement("g",null,_e.createElement("path",o2({},Wt(r,!0),{className:v,d:bI(c,u,d,f,p)})))},YPe=["option","shapeType","propTransformer","activeClassName","isActive"];function yv(e){"@babel/helpers - typeof";return yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yv(e)}function JPe(e,t){if(e==null)return{};var r=QPe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function QPe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function wI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function l2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wI(Object(r),!0).forEach(function(n){ZPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZPe(e,t,r){return t=e8e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e8e(e){var t=t8e(e,"string");return yv(t)=="symbol"?t:t+""}function t8e(e,t){if(yv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function r8e(e,t){return l2(l2({},t),e)}function n8e(e,t){return e==="symbols"}function _I(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return _e.createElement(GE,r);case"trapezoid":return _e.createElement(XPe,r);case"sector":return _e.createElement(Nq,r);case"symbols":if(n8e(t))return _e.createElement(fE,r);break;default:return null}}function a8e(e){return F.isValidElement(e)?e.props:e}function Bq(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?r8e:n,i=e.activeClassName,s=i===void 0?"recharts-active-shape":i,o=e.isActive,c=JPe(e,YPe),u;if(F.isValidElement(t))u=F.cloneElement(t,l2(l2({},c),a8e(t)));else if(Xt(t))u=t(c);else if(LPe(t)&&!$Pe(t)){var d=a(t,c);u=_e.createElement(_I,{shapeType:r,elementProps:d})}else{var f=c;u=_e.createElement(_I,{shapeType:r,elementProps:f})}return o?_e.createElement(Ur,{className:s},u):u}function Yw(e,t){return t!=null&&"trapezoids"in e.props}function Jw(e,t){return t!=null&&"sectors"in e.props}function bv(e,t){return t!=null&&"points"in e.props}function i8e(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function s8e(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function o8e(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function l8e(e,t){var r;return Yw(e,t)?r=i8e:Jw(e,t)?r=s8e:bv(e,t)&&(r=o8e),r}function c8e(e,t){var r;return Yw(e,t)?r="trapezoids":Jw(e,t)?r="sectors":bv(e,t)&&(r="points"),r}function u8e(e,t){if(Yw(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Jw(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return bv(e,t)?t.payload:{}}function d8e(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=c8e(r,t),i=u8e(r,t),s=n.filter(function(c,u){var d=zw(i,c),f=r.props[a].filter(function(g){var m=l8e(r,t);return m(g,t)}),p=r.props[a].indexOf(f[f.length-1]),h=u===p;return d&&h}),o=n.indexOf(s[s.length-1]);return o}var xy;function J0(e){"@babel/helpers - typeof";return J0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J0(e)}function Uh(){return Uh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uh.apply(this,arguments)}function SI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SI(Object(r),!0).forEach(function(n){Js(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zq(n.key),n)}}function h8e(e,t,r){return t&&NI(e.prototype,t),r&&NI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function p8e(e,t,r){return t=c2(t),m8e(e,Uq()?Reflect.construct(t,r||[],c2(e).constructor):t.apply(e,r))}function m8e(e,t){if(t&&(J0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g8e(e)}function g8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Uq=function(){return!!e})()}function c2(e){return c2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},c2(e)}function v8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I4(e,t)}function I4(e,t){return I4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},I4(e,t)}function Js(e,t,r){return t=zq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zq(e){var t=x8e(e,"string");return J0(t)=="symbol"?t:t+""}function x8e(e,t){if(J0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(J0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Vo=function(e){function t(r){var n;return f8e(this,t),n=p8e(this,t,[r]),Js(n,"pieRef",null),Js(n,"sectorRefs",[]),Js(n,"id",r1("recharts-pie-")),Js(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Xt(a)&&a()}),Js(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Xt(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return v8e(t,e),h8e(t,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.label,o=i.labelLine,c=i.dataKey,u=i.valueKey,d=Wt(this.props,!1),f=Wt(s,!1),p=Wt(o,!1),h=s&&s.offsetRadius||20,g=n.map(function(m,x){var y=(m.startAngle+m.endAngle)/2,v=ln(m.cx,m.cy,m.outerRadius+h,y),b=nn(nn(nn(nn({},d),m),{},{stroke:"none"},f),{},{index:x,textAnchor:t.getTextAnchor(v.x,m.cx)},v),S=nn(nn(nn(nn({},d),m),{},{fill:"none",stroke:m.fill},p),{},{index:x,points:[ln(m.cx,m.cy,m.outerRadius,y),v]}),_=c;return dr(c)&&dr(u)?_="value":dr(c)&&(_=u),_e.createElement(Ur,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(x)},o&&t.renderLabelLineItem(o,S,"line"),t.renderLabelItem(s,b,pi(m,_)))});return _e.createElement(Ur,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,s=i.activeShape,o=i.blendStroke,c=i.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=a.isActiveIndex(d),p=c&&a.hasActiveIndex()?c:null,h=f?s:p,g=nn(nn({},u),{},{stroke:o?u.fill:u.stroke,tabIndex:-1});return _e.createElement(Ur,Uh({ref:function(x){x&&!a.sectorRefs.includes(x)&&a.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},Ef(a.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),_e.createElement(Bq,Uh({option:h,isActive:f,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,s=a.isAnimationActive,o=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state,p=f.prevSectors,h=f.prevIsAnimationActive;return _e.createElement(Nc,{begin:o,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var m=g.t,x=[],y=i&&i[0],v=y.startAngle;return i.forEach(function(b,S){var _=p&&p[S],A=S>0?Os(b,"paddingAngle",0):0;if(_){var j=ou(_.endAngle-_.startAngle,b.endAngle-b.startAngle),E=nn(nn({},b),{},{startAngle:v+A,endAngle:v+j(m)+A});x.push(E),v=E.endAngle}else{var T=b.endAngle,L=b.startAngle,O=ou(0,T-L),I=O(m),D=nn(nn({},b),{},{startAngle:v+A,endAngle:v+I+A});x.push(D),v=D.endAngle}}),_e.createElement(Ur,null,n.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var s=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[s].focus(),a.setState({sectorToFocus:s});break}case"ArrowRight":{var o=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,s=this.state.prevSectors;return i&&a&&a.length&&(!s||!zw(s,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,s=a.sectors,o=a.className,c=a.label,u=a.cx,d=a.cy,f=a.innerRadius,p=a.outerRadius,h=a.isAnimationActive,g=this.state.isAnimationFinished;if(i||!s||!s.length||!nt(u)||!nt(d)||!nt(f)||!nt(p))return null;var m=cr("recharts-pie",o);return _e.createElement(Ur,{tabIndex:this.props.rootTabIndex,className:m,ref:function(y){n.pieRef=y}},this.renderSectors(),c&&this.renderLabels(s),Pa.renderCallByParent(this.props,null,!1),(!h||g)&&Uu.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(_e.isValidElement(n))return _e.cloneElement(n,a);if(Xt(n))return n(a);var s=cr("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return _e.createElement(y4,Uh({},a,{key:i,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(n,a,i){if(_e.isValidElement(n))return _e.cloneElement(n,a);var s=i;if(Xt(n)&&(s=n(a),_e.isValidElement(s)))return s;var o=cr("recharts-pie-label-text",typeof n!="boolean"&&!Xt(n)?n.className:"");return _e.createElement(Tf,Uh({},a,{alignmentBaseline:"middle",className:o}),s)}}])}(F.PureComponent);xy=Vo;Js(Vo,"displayName","Pie");Js(Vo,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Pp.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Js(Vo,"parseDeltaAngle",function(e,t){var r=Li(t-e),n=Math.min(Math.abs(t-e),360);return r*n});Js(Vo,"getRealPieData",function(e){var t=e.data,r=e.children,n=Wt(e,!1),a=to(r,Rc);return t&&t.length?t.map(function(i,s){return nn(nn(nn({payload:i},n),i),a&&a[s]&&a[s].props)}):a&&a.length?a.map(function(i){return nn(nn({},n),i.props)}):[]});Js(Vo,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,i=t.height,s=bq(a,i),o=n+Ii(e.cx,a,a/2),c=r+Ii(e.cy,i,i/2),u=Ii(e.innerRadius,s,0),d=Ii(e.outerRadius,s,s*.8),f=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:o,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});Js(Vo,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?nn(nn({},t.type.defaultProps),t.props):t.props,a=xy.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,s=n.startAngle,o=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,p=n.tooltipType,h=Math.abs(n.minAngle),g=xy.parseCoordinateOfPie(n,r),m=xy.parseDeltaAngle(s,o),x=Math.abs(m),y=u;dr(u)&&dr(f)?(Bo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y="value"):dr(u)&&(Bo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y=f);var v=a.filter(function(E){return pi(E,y,0)!==0}).length,b=(x>=360?v:v-1)*c,S=x-v*h-b,_=a.reduce(function(E,T){var L=pi(T,y,0);return E+(nt(L)?L:0)},0),A;if(_>0){var j;A=a.map(function(E,T){var L=pi(E,y,0),O=pi(E,d,T),I=(nt(L)?L:0)/_,D;T?D=j.endAngle+Li(m)*c*(L!==0?1:0):D=s;var z=D+Li(m)*((L!==0?h:0)+I*S),Y=(D+z)/2,se=(g.innerRadius+g.outerRadius)/2,ee=[{name:O,value:L,payload:E,dataKey:y,type:p}],J=ln(g.cx,g.cy,se,Y);return j=nn(nn(nn({percent:I,cornerRadius:i,name:O,tooltipPayload:ee,midAngle:Y,middleRadius:se,tooltipPosition:J},E),g),{},{value:pi(E,y),startAngle:D,endAngle:z,payload:E,paddingAngle:Li(m)*c}),j})}return nn(nn({},g),{},{sectors:A,data:a})});var y8e=Math.ceil,b8e=Math.max;function w8e(e,t,r,n){for(var a=-1,i=b8e(y8e((t-e)/(r||1)),0),s=Array(i);i--;)s[n?i:++a]=e,e+=r;return s}var _8e=w8e,S8e=oz,jI=1/0,N8e=17976931348623157e292;function j8e(e){if(!e)return e===0?e:0;if(e=S8e(e),e===jI||e===-jI){var t=e<0?-1:1;return t*N8e}return e===e?e:0}var qq=j8e,A8e=_8e,E8e=Pw,AS=qq;function T8e(e){return function(t,r,n){return n&&typeof n!="number"&&E8e(t,r,n)&&(r=n=void 0),t=AS(t),r===void 0?(r=t,t=0):r=AS(r),n=n===void 0?t<r?1:-1:AS(n),A8e(t,r,n,e)}}var C8e=T8e,k8e=C8e,O8e=k8e(),P8e=O8e;const u2=Pr(P8e);function wv(e){"@babel/helpers - typeof";return wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wv(e)}function AI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function EI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AI(Object(r),!0).forEach(function(n){Hq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hq(e,t,r){return t=L8e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L8e(e){var t=I8e(e,"string");return wv(t)=="symbol"?t:t+""}function I8e(e,t){if(wv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R8e=["Webkit","Moz","O","ms"],D8e=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=R8e.reduce(function(i,s){return EI(EI({},i),{},Hq({},s+n,r))},{});return a[t]=r,a};function Q0(e){"@babel/helpers - typeof";return Q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q0(e)}function d2(){return d2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d2.apply(this,arguments)}function TI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ES(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TI(Object(r),!0).forEach(function(n){xs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vq(n.key),n)}}function F8e(e,t,r){return t&&CI(e.prototype,t),r&&CI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $8e(e,t,r){return t=f2(t),B8e(e,Wq()?Reflect.construct(t,r||[],f2(e).constructor):t.apply(e,r))}function B8e(e,t){if(t&&(Q0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U8e(e)}function U8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wq=function(){return!!e})()}function f2(e){return f2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},f2(e)}function z8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R4(e,t)}function R4(e,t){return R4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},R4(e,t)}function xs(e,t,r){return t=Vq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vq(e){var t=q8e(e,"string");return Q0(t)=="symbol"?t:t+""}function q8e(e,t){if(Q0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Q0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var H8e=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,s=t.width,o=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=og().domain(u2(0,c)).range([i,i+s-o]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},kI=function(t){return t.changedTouches&&!!t.changedTouches.length},Z0=function(e){function t(r){var n;return M8e(this,t),n=$8e(this,t,[r]),xs(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),xs(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),xs(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,s=a.onDragEnd,o=a.startIndex;s==null||s({endIndex:i,startIndex:o})}),n.detachDragEndListener()}),xs(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),xs(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),xs(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),xs(n,"handleSlideDragStart",function(a){var i=kI(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return z8e(t,e),F8e(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,s=this.state.scaleValues,o=this.props,c=o.gap,u=o.data,d=u.length-1,f=Math.min(a,i),p=Math.max(a,i),h=t.getIndexInRange(s,f),g=t.getIndexInRange(s,p);return{startIndex:h-h%c,endIndex:g===d?d:g-g%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,s=a.tickFormatter,o=a.dataKey,c=pi(i[n],o,n);return Xt(s)?s(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,s=a.startX,o=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,p=c.startIndex,h=c.endIndex,g=c.onChange,m=n.pageX-i;m>0?m=Math.min(m,u+d-f-o,u+d-f-s):m<0&&(m=Math.max(m,u-s,u-o));var x=this.getIndex({startX:s+m,endX:o+m});(x.startIndex!==p||x.endIndex!==h)&&g&&g(x),this.setState({startX:s+m,endX:o+m,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=kI(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,s=a.movingTravellerId,o=a.endX,c=a.startX,u=this.state[s],d=this.props,f=d.x,p=d.width,h=d.travellerWidth,g=d.onChange,m=d.gap,x=d.data,y={startX:this.state.startX,endX:this.state.endX},v=n.pageX-i;v>0?v=Math.min(v,f+p-h-u):v<0&&(v=Math.max(v,f-u)),y[s]=u+v;var b=this.getIndex(y),S=b.startIndex,_=b.endIndex,A=function(){var E=x.length-1;return s==="startX"&&(o>c?S%m===0:_%m===0)||o<c&&_===E||s==="endX"&&(o>c?_%m===0:S%m===0)||o>c&&_===E};this.setState(xs(xs({},s,u+v),"brushMoveStartX",n.pageX),function(){g&&A()&&g(b)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,s=this.state,o=s.scaleValues,c=s.startX,u=s.endX,d=this.state[a],f=o.indexOf(d);if(f!==-1){var p=f+n;if(!(p===-1||p>=o.length)){var h=o[p];a==="startX"&&h>=u||a==="endX"&&h<=c||this.setState(xs({},a,h),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,o=n.height,c=n.fill,u=n.stroke;return _e.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:s,height:o})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,o=n.height,c=n.data,u=n.children,d=n.padding,f=F.Children.only(u);return f?_e.cloneElement(f,{x:a,y:i,width:s,height:o,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,s,o=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,p=c.traveller,h=c.ariaLabel,g=c.data,m=c.startIndex,x=c.endIndex,y=Math.max(n,this.props.x),v=ES(ES({},Wt(this.props,!1)),{},{x:y,y:u,width:d,height:f}),b=h||"Min value: ".concat((i=g[m])===null||i===void 0?void 0:i.name,", Max value: ").concat((s=g[x])===null||s===void 0?void 0:s.name);return _e.createElement(Ur,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(_){["ArrowLeft","ArrowRight"].includes(_.key)&&(_.preventDefault(),_.stopPropagation(),o.handleTravellerMoveKeyboard(_.key==="ArrowRight"?1:-1,a))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(p,v))}},{key:"renderSlide",value:function(n,a){var i=this.props,s=i.y,o=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return _e.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:s,width:f,height:o})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,s=n.y,o=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,p=d.endX,h=5,g={pointerEvents:"none",fill:u};return _e.createElement(Ur,{className:"recharts-brush-texts"},_e.createElement(Tf,d2({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,p)-h,y:s+o/2},g),this.getTextOfTick(a)),_e.createElement(Tf,d2({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,p)+c+h,y:s+o/2},g),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,s=n.children,o=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,p=this.state,h=p.startX,g=p.endX,m=p.isTextActive,x=p.isSlideMoving,y=p.isTravellerMoving,v=p.isTravellerFocused;if(!a||!a.length||!nt(o)||!nt(c)||!nt(u)||!nt(d)||u<=0||d<=0)return null;var b=cr("recharts-brush",i),S=_e.Children.count(s)===1,_=D8e("userSelect","none");return _e.createElement(Ur,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:_},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(h,g),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(g,"endX"),(m||x||y||v||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,s=n.width,o=n.height,c=n.stroke,u=Math.floor(i+o/2)-1;return _e.createElement(_e.Fragment,null,_e.createElement("rect",{x:a,y:i,width:s,height:o,fill:c,stroke:"none"}),_e.createElement("line",{x1:a+1,y1:u,x2:a+s-1,y2:u,fill:"none",stroke:"#fff"}),_e.createElement("line",{x1:a+1,y1:u+2,x2:a+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return _e.isValidElement(n)?i=_e.cloneElement(n,a):Xt(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,s=n.width,o=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return ES({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:s},i&&i.length?H8e({data:i,width:s,x:o,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(s!==a.prevWidth||o!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([o,o+s-c]);var p=a.scale.domain().map(function(h){return a.scale(h)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:s,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,s=0,o=i-1;o-s>1;){var c=Math.floor((s+o)/2);n[c]>a?o=c:s=c}return a>=n[o]?o:s}}])}(F.PureComponent);xs(Z0,"displayName","Brush");xs(Z0,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var W8e=yE;function V8e(e,t){var r;return W8e(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var G8e=V8e,K8e=IU,X8e=Nl,Y8e=G8e,J8e=ls,Q8e=Pw;function Z8e(e,t,r){var n=J8e(e)?K8e:Y8e;return r&&Q8e(e,t,r)&&(t=void 0),n(e,X8e(t))}var eLe=Z8e;const tLe=Pr(eLe);var gl=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},OI=rz;function rLe(e,t,r){t=="__proto__"&&OI?OI(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var nLe=rLe,aLe=nLe,iLe=ez,sLe=Nl;function oLe(e,t){var r={};return t=sLe(t),iLe(e,function(n,a,i){aLe(r,a,t(n,a,i))}),r}var lLe=oLe;const cLe=Pr(lLe);function uLe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var dLe=uLe,fLe=yE;function hLe(e,t){var r=!0;return fLe(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var pLe=hLe,mLe=dLe,gLe=pLe,vLe=Nl,xLe=ls,yLe=Pw;function bLe(e,t,r){var n=xLe(e)?mLe:gLe;return r&&yLe(e,t,r)&&(t=void 0),n(e,vLe(t))}var wLe=bLe;const Gq=Pr(wLe);var _Le=["x","y"];function _v(e){"@babel/helpers - typeof";return _v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_v(e)}function D4(){return D4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D4.apply(this,arguments)}function PI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PI(Object(r),!0).forEach(function(n){SLe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SLe(e,t,r){return t=NLe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NLe(e){var t=jLe(e,"string");return _v(t)=="symbol"?t:t+""}function jLe(e,t){if(_v(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_v(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ALe(e,t){if(e==null)return{};var r=ELe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ELe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function TLe(e,t){var r=e.x,n=e.y,a=ALe(e,_Le),i="".concat(r),s=parseInt(i,10),o="".concat(n),c=parseInt(o,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),p=parseInt(f,10);return Cm(Cm(Cm(Cm(Cm({},t),a),s?{x:s}:{}),c?{y:c}:{}),{},{height:d,width:p,name:t.name,radius:t.radius})}function LI(e){return _e.createElement(Bq,D4({shapeType:"rectangle",propTransformer:TLe,activeClassName:"recharts-active-bar"},e))}var CLe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=nt(n)||J1e(n);return i?t(n,a):(i||kf(),r)}},kLe=["value","background"],Kq;function ep(e){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ep(e)}function OLe(e,t){if(e==null)return{};var r=PLe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function PLe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function h2(){return h2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h2.apply(this,arguments)}function II(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ia(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?II(Object(r),!0).forEach(function(n){Cu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):II(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yq(n.key),n)}}function ILe(e,t,r){return t&&RI(e.prototype,t),r&&RI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function RLe(e,t,r){return t=p2(t),DLe(e,Xq()?Reflect.construct(t,r||[],p2(e).constructor):t.apply(e,r))}function DLe(e,t){if(t&&(ep(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MLe(e)}function MLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xq=function(){return!!e})()}function p2(e){return p2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},p2(e)}function FLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M4(e,t)}function M4(e,t){return M4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},M4(e,t)}function Cu(e,t,r){return t=Yq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yq(e){var t=$Le(e,"string");return ep(t)=="symbol"?t:t+""}function $Le(e,t){if(ep(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ep(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Qi=function(e){function t(){var r;LLe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=RLe(this,t,[].concat(a)),Cu(r,"state",{isAnimationFinished:!1}),Cu(r,"id",r1("recharts-bar-")),Cu(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),s&&s()}),Cu(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),s&&s()}),r}return FLe(t,e),ILe(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,s=i.shape,o=i.dataKey,c=i.activeIndex,u=i.activeBar,d=Wt(this.props,!1);return n&&n.map(function(f,p){var h=p===c,g=h?u:s,m=ia(ia(ia({},d),f),{},{isActive:h,option:g,index:p,dataKey:o,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return _e.createElement(Ur,h2({className:"recharts-bar-rectangle"},Ef(a.props,f,p),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(p)}),_e.createElement(LI,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,s=a.layout,o=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,p=this.state.prevData;return _e.createElement(Nc,{begin:c,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var g=h.t,m=i.map(function(x,y){var v=p&&p[y];if(v){var b=ou(v.x,x.x),S=ou(v.y,x.y),_=ou(v.width,x.width),A=ou(v.height,x.height);return ia(ia({},x),{},{x:b(g),y:S(g),width:_(g),height:A(g)})}if(s==="horizontal"){var j=ou(0,x.height),E=j(g);return ia(ia({},x),{},{y:x.y+x.height-E,height:E})}var T=ou(0,x.width),L=T(g);return ia(ia({},x),{},{width:L})});return _e.createElement(Ur,null,n.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,s=this.state.prevData;return i&&a&&a.length&&(!s||!zw(s,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,s=a.dataKey,o=a.activeIndex,c=Wt(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,p=OLe(u,kLe);if(!f)return null;var h=ia(ia(ia(ia(ia({},p),{},{fill:"#eee"},f),c),Ef(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:s,index:d,className:"recharts-bar-background-rectangle"});return _e.createElement(LI,h2({key:"background-bar-".concat(d),option:n.props.background,isActive:d===o},h))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.data,o=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=to(d,Ww);if(!f)return null;var p=u==="vertical"?s[0].height/2:s[0].width/2,h=function(x,y){var v=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:v,errorVal:pi(x,y)}},g={clipPath:n?"url(#clipPath-".concat(a,")"):null};return _e.createElement(Ur,g,f.map(function(m){return _e.cloneElement(m,{key:"error-bar-".concat(a,"-").concat(m.props.dataKey),data:s,xAxis:o,yAxis:c,layout:u,offset:p,dataPointFormatter:h})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,s=n.className,o=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,p=n.height,h=n.isAnimationActive,g=n.background,m=n.id;if(a||!i||!i.length)return null;var x=this.state.isAnimationFinished,y=cr("recharts-bar",s),v=o&&o.allowDataOverflow,b=c&&c.allowDataOverflow,S=v||b,_=dr(m)?this.id:m;return _e.createElement(Ur,{className:y},v||b?_e.createElement("defs",null,_e.createElement("clipPath",{id:"clipPath-".concat(_)},_e.createElement("rect",{x:v?u:u-f/2,y:b?d:d-p/2,width:v?f:f*2,height:b?p:p*2}))):null,_e.createElement(Ur,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(_,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,_),(!h||x)&&Uu.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(F.PureComponent);Kq=Qi;Cu(Qi,"displayName","Bar");Cu(Qi,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Pp.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Cu(Qi,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,s=e.yAxis,o=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,p=e.offset,h=mCe(n,r);if(!h)return null;var g=t.layout,m=r.type.defaultProps,x=m!==void 0?ia(ia({},m),r.props):r.props,y=x.dataKey,v=x.children,b=x.minPointSize,S=g==="horizontal"?s:i,_=u?S.scale.domain():null,A=_Ce({numericAxis:S}),j=to(v,Rc),E=f.map(function(T,L){var O,I,D,z,Y,se;u?O=gCe(u[d+L],_):(O=pi(T,y),Array.isArray(O)||(O=[A,O]));var ee=CLe(b,Kq.defaultProps.minPointSize)(O[1],L);if(g==="horizontal"){var J,oe=[s.scale(O[0]),s.scale(O[1])],we=oe[0],xe=oe[1];I=EL({axis:i,ticks:o,bandSize:a,offset:h.offset,entry:T,index:L}),D=(J=xe??we)!==null&&J!==void 0?J:void 0,z=h.size;var k=we-xe;if(Y=Number.isNaN(k)?0:k,se={x:I,y:s.y,width:z,height:s.height},Math.abs(ee)>0&&Math.abs(Y)<Math.abs(ee)){var M=Li(Y||ee)*(Math.abs(ee)-Math.abs(Y));D-=M,Y+=M}}else{var B=[i.scale(O[0]),i.scale(O[1])],U=B[0],Z=B[1];if(I=U,D=EL({axis:s,ticks:c,bandSize:a,offset:h.offset,entry:T,index:L}),z=Z-U,Y=h.size,se={x:i.x,y:D,width:i.width,height:Y},Math.abs(ee)>0&&Math.abs(z)<Math.abs(ee)){var pe=Li(z||ee)*(Math.abs(ee)-Math.abs(z));z+=pe}}return ia(ia(ia({},T),{},{x:I,y:D,width:z,height:Y,value:u?O:O[1],payload:T,background:se},j&&j[L]&&j[L].props),{},{tooltipPayload:[xq(r,T)],tooltipPosition:{x:I+z/2,y:D+Y/2}})});return ia({data:E,layout:g},p)});function Sv(e){"@babel/helpers - typeof";return Sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sv(e)}function BLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Jq(n.key),n)}}function ULe(e,t,r){return t&&DI(e.prototype,t),r&&DI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function MI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Oo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MI(Object(r),!0).forEach(function(n){Qw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qw(e,t,r){return t=Jq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jq(e){var t=zLe(e,"string");return Sv(t)=="symbol"?t:t+""}function zLe(e,t){if(Sv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qLe=function(t,r,n,a,i){var s=t.width,o=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:o-n.bottom,bottomMirror:o-n.bottom},p=!!ws(u,Qi);return d.reduce(function(h,g){var m=r[g],x=m.orientation,y=m.domain,v=m.padding,b=v===void 0?{}:v,S=m.mirror,_=m.reversed,A="".concat(x).concat(S?"Mirror":""),j,E,T,L,O;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var I=y[1]-y[0],D=1/0,z=m.categoricalDomain.sort(exe);if(z.forEach(function(B,U){U>0&&(D=Math.min((B||0)-(z[U-1]||0),D))}),Number.isFinite(D)){var Y=D/I,se=m.layout==="vertical"?n.height:n.width;if(m.padding==="gap"&&(j=Y*se/2),m.padding==="no-gap"){var ee=Ii(t.barCategoryGap,Y*se),J=Y*se/2;j=J-ee-(J-ee)/se*ee}}}a==="xAxis"?E=[n.left+(b.left||0)+(j||0),n.left+n.width-(b.right||0)-(j||0)]:a==="yAxis"?E=c==="horizontal"?[n.top+n.height-(b.bottom||0),n.top+(b.top||0)]:[n.top+(b.top||0)+(j||0),n.top+n.height-(b.bottom||0)-(j||0)]:E=m.range,_&&(E=[E[1],E[0]]);var oe=pq(m,i,p),we=oe.scale,xe=oe.realScaleType;we.domain(y).range(E),mq(we);var k=gq(we,Oo(Oo({},m),{},{realScaleType:xe}));a==="xAxis"?(O=x==="top"&&!S||x==="bottom"&&S,T=n.left,L=f[A]-O*m.height):a==="yAxis"&&(O=x==="left"&&!S||x==="right"&&S,T=f[A]-O*m.width,L=n.top);var M=Oo(Oo(Oo({},m),k),{},{realScaleType:xe,x:T,y:L,scale:we,width:a==="xAxis"?n.width:m.width,height:a==="yAxis"?n.height:m.height});return M.bandSize=Jb(M,k),!m.hide&&a==="xAxis"?f[A]+=(O?-1:1)*M.height:m.hide||(f[A]+=(O?-1:1)*M.width),Oo(Oo({},h),{},Qw({},g,M))},{})},Qq=function(t,r){var n=t.x,a=t.y,i=r.x,s=r.y;return{x:Math.min(n,i),y:Math.min(a,s),width:Math.abs(i-n),height:Math.abs(s-a)}},HLe=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return Qq({x:r,y:n},{x:a,y:i})},Zq=function(){function e(t){BLe(this,e),this.scale=t}return ULe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(r)+o}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();Qw(Zq,"EPS",1e-4);var XE=function(t){var r=Object.keys(t).reduce(function(n,a){return Oo(Oo({},n),{},Qw({},a,Zq.create(t[a])))},{});return Oo(Oo({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.bandAware,o=i.position;return cLe(a,function(c,u){return r[u].apply(c,{bandAware:s,position:o})})},isInRange:function(a){return Gq(a,function(i,s){return r[s].isInRange(i)})}})};function WLe(e){return(e%180+180)%180}var VLe=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=WLe(a),s=i*Math.PI/180,o=Math.atan(n/r),c=s>o&&s<Math.PI-o?n/Math.sin(s):r/Math.cos(s);return Math.abs(c)},GLe=Nl,KLe=n1,XLe=kw;function YLe(e){return function(t,r,n){var a=Object(t);if(!KLe(t)){var i=GLe(r);t=XLe(t),r=function(o){return i(a[o],o,a)}}var s=e(t,r,n);return s>-1?a[i?t[s]:s]:void 0}}var JLe=YLe,QLe=qq;function ZLe(e){var t=QLe(e),r=t%1;return t===t?r?t-r:t:0}var eIe=ZLe,tIe=KU,rIe=Nl,nIe=eIe,aIe=Math.max;function iIe(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:nIe(r);return a<0&&(a=aIe(n+a,0)),tIe(e,rIe(t),a)}var sIe=iIe,oIe=JLe,lIe=sIe,cIe=oIe(lIe),uIe=cIe;const dIe=Pr(uIe);var fIe=n1e(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),YE=F.createContext(void 0),JE=F.createContext(void 0),eH=F.createContext(void 0),tH=F.createContext({}),rH=F.createContext(void 0),nH=F.createContext(0),aH=F.createContext(0),FI=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,s=t.clipPathId,o=t.children,c=t.width,u=t.height,d=fIe(i);return _e.createElement(YE.Provider,{value:n},_e.createElement(JE.Provider,{value:a},_e.createElement(tH.Provider,{value:i},_e.createElement(eH.Provider,{value:d},_e.createElement(rH.Provider,{value:s},_e.createElement(nH.Provider,{value:u},_e.createElement(aH.Provider,{value:c},o)))))))},hIe=function(){return F.useContext(rH)},iH=function(t){var r=F.useContext(YE);r==null&&kf();var n=r[t];return n==null&&kf(),n},pIe=function(){var t=F.useContext(YE);return hu(t)},mIe=function(){var t=F.useContext(JE),r=dIe(t,function(n){return Gq(n.domain,Number.isFinite)});return r||hu(t)},sH=function(t){var r=F.useContext(JE);r==null&&kf();var n=r[t];return n==null&&kf(),n},gIe=function(){var t=F.useContext(eH);return t},vIe=function(){return F.useContext(tH)},QE=function(){return F.useContext(aH)},ZE=function(){return F.useContext(nH)};function tp(e){"@babel/helpers - typeof";return tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tp(e)}function xIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yIe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lH(n.key),n)}}function bIe(e,t,r){return t&&yIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wIe(e,t,r){return t=m2(t),_Ie(e,oH()?Reflect.construct(t,r||[],m2(e).constructor):t.apply(e,r))}function _Ie(e,t){if(t&&(tp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SIe(e)}function SIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oH=function(){return!!e})()}function m2(e){return m2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},m2(e)}function NIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F4(e,t)}function F4(e,t){return F4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},F4(e,t)}function $I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function BI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$I(Object(r),!0).forEach(function(n){eT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$I(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eT(e,t,r){return t=lH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lH(e){var t=jIe(e,"string");return tp(t)=="symbol"?t:t+""}function jIe(e,t){if(tp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(tp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function AIe(e,t){return kIe(e)||CIe(e,t)||TIe(e,t)||EIe()}function EIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TIe(e,t){if(e){if(typeof e=="string")return UI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UI(e,t)}}function UI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function CIe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function kIe(e){if(Array.isArray(e))return e}function $4(){return $4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$4.apply(this,arguments)}var OIe=function(t,r){var n;return _e.isValidElement(t)?n=_e.cloneElement(t,r):Xt(t)?n=t(r):n=_e.createElement("line",$4({},r,{className:"recharts-reference-line-line"})),n},PIe=function(t,r,n,a,i,s,o,c,u){var d=i.x,f=i.y,p=i.width,h=i.height;if(n){var g=u.y,m=t.y.apply(g,{position:s});if(gl(u,"discard")&&!t.y.isInRange(m))return null;var x=[{x:d+p,y:m},{x:d,y:m}];return c==="left"?x.reverse():x}if(r){var y=u.x,v=t.x.apply(y,{position:s});if(gl(u,"discard")&&!t.x.isInRange(v))return null;var b=[{x:v,y:f+h},{x:v,y:f}];return o==="top"?b.reverse():b}if(a){var S=u.segment,_=S.map(function(A){return t.apply(A,{position:s})});return gl(u,"discard")&&tLe(_,function(A){return!t.isInRange(A)})?null:_}return null};function LIe(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,s=e.shape,o=e.className,c=e.alwaysShow,u=hIe(),d=iH(a),f=sH(i),p=gIe();if(!u||!p)return null;Bo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=XE({x:d.scale,y:f.scale}),g=Sa(t),m=Sa(r),x=n&&n.length===2,y=PIe(h,g,m,x,p,e.position,d.orientation,f.orientation,e);if(!y)return null;var v=AIe(y,2),b=v[0],S=b.x,_=b.y,A=v[1],j=A.x,E=A.y,T=gl(e,"hidden")?"url(#".concat(u,")"):void 0,L=BI(BI({clipPath:T},Wt(e,!0)),{},{x1:S,y1:_,x2:j,y2:E});return _e.createElement(Ur,{className:cr("recharts-reference-line",o)},OIe(s,L),Pa.renderCallByParent(e,HLe({x1:S,y1:_,x2:j,y2:E})))}var tT=function(e){function t(){return xIe(this,t),wIe(this,t,arguments)}return NIe(t,e),bIe(t,[{key:"render",value:function(){return _e.createElement(LIe,this.props)}}])}(_e.Component);eT(tT,"displayName","ReferenceLine");eT(tT,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function B4(){return B4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B4.apply(this,arguments)}function rp(e){"@babel/helpers - typeof";return rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rp(e)}function zI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zI(Object(r),!0).forEach(function(n){Zw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RIe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uH(n.key),n)}}function DIe(e,t,r){return t&&RIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function MIe(e,t,r){return t=g2(t),FIe(e,cH()?Reflect.construct(t,r||[],g2(e).constructor):t.apply(e,r))}function FIe(e,t){if(t&&(rp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Ie(e)}function $Ie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cH=function(){return!!e})()}function g2(e){return g2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},g2(e)}function BIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U4(e,t)}function U4(e,t){return U4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},U4(e,t)}function Zw(e,t,r){return t=uH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uH(e){var t=UIe(e,"string");return rp(t)=="symbol"?t:t+""}function UIe(e,t){if(rp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zIe=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,s=XE({x:a.scale,y:i.scale}),o=s.apply({x:r,y:n},{bandAware:!0});return gl(t,"discard")&&!s.isInRange(o)?null:o},e_=function(e){function t(){return IIe(this,t),MIe(this,t,arguments)}return BIe(t,e),DIe(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,s=n.r,o=n.alwaysShow,c=n.clipPathId,u=Sa(a),d=Sa(i);if(Bo(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=zIe(this.props);if(!f)return null;var p=f.x,h=f.y,g=this.props,m=g.shape,x=g.className,y=gl(this.props,"hidden")?"url(#".concat(c,")"):void 0,v=qI(qI({clipPath:y},Wt(this.props,!0)),{},{cx:p,cy:h});return _e.createElement(Ur,{className:cr("recharts-reference-dot",x)},t.renderDot(m,v),Pa.renderCallByParent(this.props,{x:p-s,y:h-s,width:2*s,height:2*s}))}}])}(_e.Component);Zw(e_,"displayName","ReferenceDot");Zw(e_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Zw(e_,"renderDot",function(e,t){var r;return _e.isValidElement(e)?r=_e.cloneElement(e,t):Xt(e)?r=e(t):r=_e.createElement(KE,B4({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function z4(){return z4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z4.apply(this,arguments)}function np(e){"@babel/helpers - typeof";return np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},np(e)}function HI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function WI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HI(Object(r),!0).forEach(function(n){t_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HIe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fH(n.key),n)}}function WIe(e,t,r){return t&&HIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function VIe(e,t,r){return t=v2(t),GIe(e,dH()?Reflect.construct(t,r||[],v2(e).constructor):t.apply(e,r))}function GIe(e,t){if(t&&(np(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KIe(e)}function KIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dH=function(){return!!e})()}function v2(e){return v2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},v2(e)}function XIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q4(e,t)}function q4(e,t){return q4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},q4(e,t)}function t_(e,t,r){return t=fH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fH(e){var t=YIe(e,"string");return np(t)=="symbol"?t:t+""}function YIe(e,t){if(np(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(np(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var JIe=function(t,r,n,a,i){var s=i.x1,o=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var p=XE({x:d.scale,y:f.scale}),h={x:t?p.x.apply(s,{position:"start"}):p.x.rangeMin,y:n?p.y.apply(c,{position:"start"}):p.y.rangeMin},g={x:r?p.x.apply(o,{position:"end"}):p.x.rangeMax,y:a?p.y.apply(u,{position:"end"}):p.y.rangeMax};return gl(i,"discard")&&(!p.isInRange(h)||!p.isInRange(g))?null:Qq(h,g)},r_=function(e){function t(){return qIe(this,t),VIe(this,t,arguments)}return XIe(t,e),WIe(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,s=n.y1,o=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;Bo(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Sa(a),p=Sa(i),h=Sa(s),g=Sa(o),m=this.props.shape;if(!f&&!p&&!h&&!g&&!m)return null;var x=JIe(f,p,h,g,this.props);if(!x&&!m)return null;var y=gl(this.props,"hidden")?"url(#".concat(d,")"):void 0;return _e.createElement(Ur,{className:cr("recharts-reference-area",c)},t.renderRect(m,WI(WI({clipPath:y},Wt(this.props,!0)),x)),Pa.renderCallByParent(this.props,x))}}])}(_e.Component);t_(r_,"displayName","ReferenceArea");t_(r_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});t_(r_,"renderRect",function(e,t){var r;return _e.isValidElement(e)?r=_e.cloneElement(e,t):Xt(e)?r=e(t):r=_e.createElement(GE,z4({},t,{className:"recharts-reference-area-rect"})),r});function hH(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function QIe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return VLe(n,r)}function ZIe(e,t,r){var n=r==="width",a=e.x,i=e.y,s=e.width,o=e.height;return t===1?{start:n?a:i,end:n?a+s:i+o}:{start:n?a+s:i+o,end:n?a:i}}function x2(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function eRe(e,t){return hH(e,t+1)}function tRe(e,t,r,n,a){for(var i=(n||[]).slice(),s=t.start,o=t.end,c=0,u=1,d=s,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:hH(n,u)};var m=c,x,y=function(){return x===void 0&&(x=r(g,m)),x},v=g.coordinate,b=c===0||x2(e,v,y,d,o);b||(c=0,d=s,u+=1),b&&(d=v+e*(y()/2+a),c+=u)},p;u<=i.length;)if(p=f(),p)return p.v;return[]}function Nv(e){"@babel/helpers - typeof";return Nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nv(e)}function VI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function di(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VI(Object(r),!0).forEach(function(n){rRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rRe(e,t,r){return t=nRe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nRe(e){var t=aRe(e,"string");return Nv(t)=="symbol"?t:t+""}function aRe(e,t){if(Nv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iRe(e,t,r,n,a){for(var i=(n||[]).slice(),s=i.length,o=t.start,c=t.end,u=function(p){var h=i[p],g,m=function(){return g===void 0&&(g=r(h,p)),g};if(p===s-1){var x=e*(h.coordinate+e*m()/2-c);i[p]=h=di(di({},h),{},{tickCoord:x>0?h.coordinate-x*e:h.coordinate})}else i[p]=h=di(di({},h),{},{tickCoord:h.coordinate});var y=x2(e,h.tickCoord,m,o,c);y&&(c=h.tickCoord-e*(m()/2+a),i[p]=di(di({},h),{},{isShow:!0}))},d=s-1;d>=0;d--)u(d);return i}function sRe(e,t,r,n,a,i){var s=(n||[]).slice(),o=s.length,c=t.start,u=t.end;if(i){var d=n[o-1],f=r(d,o-1),p=e*(d.coordinate+e*f/2-u);s[o-1]=d=di(di({},d),{},{tickCoord:p>0?d.coordinate-p*e:d.coordinate});var h=x2(e,d.tickCoord,function(){return f},c,u);h&&(u=d.tickCoord-e*(f/2+a),s[o-1]=di(di({},d),{},{isShow:!0}))}for(var g=i?o-1:o,m=function(v){var b=s[v],S,_=function(){return S===void 0&&(S=r(b,v)),S};if(v===0){var A=e*(b.coordinate-e*_()/2-c);s[v]=b=di(di({},b),{},{tickCoord:A<0?b.coordinate-A*e:b.coordinate})}else s[v]=b=di(di({},b),{},{tickCoord:b.coordinate});var j=x2(e,b.tickCoord,_,c,u);j&&(c=b.tickCoord+e*(_()/2+a),s[v]=di(di({},b),{},{isShow:!0}))},x=0;x<g;x++)m(x);return s}function rT(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,s=e.minTickGap,o=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!a||!a.length||!n)return[];if(nt(c)||Pp.isSsr)return eRe(a,typeof c=="number"&&nt(c)?c:0);var p=[],h=o==="top"||o==="bottom"?"width":"height",g=d&&h==="width"?sg(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},m=function(b,S){var _=Xt(u)?u(b.value,S):b.value;return h==="width"?QIe(sg(_,{fontSize:t,letterSpacing:r}),g,f):sg(_,{fontSize:t,letterSpacing:r})[h]},x=a.length>=2?Li(a[1].coordinate-a[0].coordinate):1,y=ZIe(i,x,h);return c==="equidistantPreserveStart"?tRe(x,y,m,a,s):(c==="preserveStart"||c==="preserveStartEnd"?p=sRe(x,y,m,a,s,c==="preserveStartEnd"):p=iRe(x,y,m,a,s),p.filter(function(v){return v.isShow}))}var oRe=["viewBox"],lRe=["viewBox"],cRe=["ticks"];function ap(e){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ap(e)}function zh(){return zh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zh.apply(this,arguments)}function GI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function va(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GI(Object(r),!0).forEach(function(n){nT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TS(e,t){if(e==null)return{};var r=uRe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function uRe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function dRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mH(n.key),n)}}function fRe(e,t,r){return t&&KI(e.prototype,t),r&&KI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function hRe(e,t,r){return t=y2(t),pRe(e,pH()?Reflect.construct(t,r||[],y2(e).constructor):t.apply(e,r))}function pRe(e,t){if(t&&(ap(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mRe(e)}function mRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pH=function(){return!!e})()}function y2(e){return y2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},y2(e)}function gRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H4(e,t)}function H4(e,t){return H4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},H4(e,t)}function nT(e,t,r){return t=mH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mH(e){var t=vRe(e,"string");return ap(t)=="symbol"?t:t+""}function vRe(e,t){if(ap(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Dp=function(e){function t(r){var n;return dRe(this,t),n=hRe(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return gRe(t,e),fRe(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,s=TS(n,oRe),o=this.props,c=o.viewBox,u=TS(o,lRe);return!l0(i,c)||!l0(s,u)||!l0(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,s=a.y,o=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,p=a.tickMargin,h,g,m,x,y,v,b=f?-1:1,S=n.tickSize||d,_=nt(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":h=g=n.coordinate,x=s+ +!f*c,m=x-b*S,v=m-b*p,y=_;break;case"left":m=x=n.coordinate,g=i+ +!f*o,h=g-b*S,y=h-b*p,v=_;break;case"right":m=x=n.coordinate,g=i+ +f*o,h=g+b*S,y=h+b*p,v=_;break;default:h=g=n.coordinate,x=s+ +f*c,m=x+b*S,v=m+b*p,y=_;break}return{line:{x1:h,y1:m,x2:g,y2:x},tick:{x:y,y:v}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s;switch(a){case"left":s=i?"start":"end";break;case"right":s=i?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s="end";switch(a){case"left":case"right":s="middle";break;case"top":s=i?"start":"end";break;default:s=i?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,o=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=va(va(va({},Wt(this.props,!1)),Wt(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!u||c==="bottom"&&u);f=va(va({},f),{},{x1:a,y1:i+p*o,x2:a+s,y2:i+p*o})}else{var h=+(c==="left"&&!u||c==="right"&&u);f=va(va({},f),{},{x1:a+h*s,y1:i,x2:a+h*s,y2:i+o})}return _e.createElement("line",zh({},f,{className:cr("recharts-cartesian-axis-line",Os(d,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var s=this,o=this.props,c=o.tickLine,u=o.stroke,d=o.tick,f=o.tickFormatter,p=o.unit,h=rT(va(va({},this.props),{},{ticks:n}),a,i),g=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),x=Wt(this.props,!1),y=Wt(d,!1),v=va(va({},x),{},{fill:"none"},Wt(c,!1)),b=h.map(function(S,_){var A=s.getTickLineCoord(S),j=A.line,E=A.tick,T=va(va(va(va({textAnchor:g,verticalAnchor:m},x),{},{stroke:"none",fill:u},y),E),{},{index:_,payload:S,visibleTicksCount:h.length,tickFormatter:f});return _e.createElement(Ur,zh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},Ef(s.props,S,_)),c&&_e.createElement("line",zh({},v,j,{className:cr("recharts-cartesian-axis-tick-line",Os(c,"className"))})),d&&t.renderTickItem(d,T,"".concat(Xt(f)?f(S.value,_):S.value).concat(p||"")))});return _e.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,s=a.width,o=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,p=f.ticks,h=TS(f,cRe),g=p;return Xt(c)&&(g=p&&p.length>0?c(this.props):c(h)),s<=0||o<=0||!g||!g.length?null:_e.createElement(Ur,{className:cr("recharts-cartesian-axis",u),ref:function(x){n.layerReference=x}},i&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),Pa.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var s,o=cr(a.className,"recharts-cartesian-axis-tick-value");return _e.isValidElement(n)?s=_e.cloneElement(n,va(va({},a),{},{className:o})):Xt(n)?s=n(va(va({},a),{},{className:o})):s=_e.createElement(Tf,zh({},a,{className:"recharts-cartesian-axis-tick-value"}),i),s}}])}(F.Component);nT(Dp,"displayName","CartesianAxis");nT(Dp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var xRe=["x1","y1","x2","y2","key"],yRe=["offset"];function Of(e){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Of(e)}function XI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XI(Object(r),!0).forEach(function(n){bRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bRe(e,t,r){return t=wRe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wRe(e){var t=_Re(e,"string");return Of(t)=="symbol"?t:t+""}function _Re(e,t){if(Of(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yd(){return Yd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yd.apply(this,arguments)}function YI(e,t){if(e==null)return{};var r=SRe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function SRe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var NRe=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,s=t.width,o=t.height,c=t.ry;return _e.createElement("rect",{x:a,y:i,ry:c,width:s,height:o,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function gH(e,t){var r;if(_e.isValidElement(e))r=_e.cloneElement(e,t);else if(Xt(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,s=t.y2,o=t.key,c=YI(t,xRe),u=Wt(c,!1);u.offset;var d=YI(u,yRe);r=_e.createElement("line",Yd({},d,{x1:n,y1:a,x2:i,y2:s,fill:"none",key:o}))}return r}function jRe(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(o,c){var u=hi(hi({},e),{},{x1:t,y1:o,x2:t+r,y2:o,key:"line-".concat(c),index:c});return gH(a,u)});return _e.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function ARe(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(o,c){var u=hi(hi({},e),{},{x1:o,y1:t,x2:o,y2:t+r,key:"line-".concat(c),index:c});return gH(a,u)});return _e.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function ERe(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,s=e.height,o=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=o.map(function(p){return Math.round(p+a-a)}).sort(function(p,h){return p-h});a!==d[0]&&d.unshift(0);var f=d.map(function(p,h){var g=!d[h+1],m=g?a+s-p:d[h+1]-p;if(m<=0)return null;var x=h%t.length;return _e.createElement("rect",{key:"react-".concat(h),y:p,x:n,height:m,width:i,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return _e.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function TRe(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,s=e.y,o=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(p){return Math.round(p+i-i)}).sort(function(p,h){return p-h});i!==d[0]&&d.unshift(0);var f=d.map(function(p,h){var g=!d[h+1],m=g?i+o-p:d[h+1]-p;if(m<=0)return null;var x=h%n.length;return _e.createElement("rect",{key:"react-".concat(h),x:p,y:s,width:m,height:c,stroke:"none",fill:n[x],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return _e.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var CRe=function(t,r){var n=t.xAxis,a=t.width,i=t.height,s=t.offset;return hq(rT(hi(hi(hi({},Dp.defaultProps),n),{},{ticks:nc(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.left,s.left+s.width,r)},kRe=function(t,r){var n=t.yAxis,a=t.width,i=t.height,s=t.offset;return hq(rT(hi(hi(hi({},Dp.defaultProps),n),{},{ticks:nc(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.top,s.top+s.height,r)},xh={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Pf(e){var t,r,n,a,i,s,o=QE(),c=ZE(),u=vIe(),d=hi(hi({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:xh.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:xh.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:xh.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:xh.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:xh.vertical,verticalFill:(s=e.verticalFill)!==null&&s!==void 0?s:xh.verticalFill,x:nt(e.x)?e.x:u.left,y:nt(e.y)?e.y:u.top,width:nt(e.width)?e.width:u.width,height:nt(e.height)?e.height:u.height}),f=d.x,p=d.y,h=d.width,g=d.height,m=d.syncWithTicks,x=d.horizontalValues,y=d.verticalValues,v=pIe(),b=mIe();if(!nt(h)||h<=0||!nt(g)||g<=0||!nt(f)||f!==+f||!nt(p)||p!==+p)return null;var S=d.verticalCoordinatesGenerator||CRe,_=d.horizontalCoordinatesGenerator||kRe,A=d.horizontalPoints,j=d.verticalPoints;if((!A||!A.length)&&Xt(_)){var E=x&&x.length,T=_({yAxis:b?hi(hi({},b),{},{ticks:E?x:b.ticks}):void 0,width:o,height:c,offset:u},E?!0:m);Bo(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Of(T),"]")),Array.isArray(T)&&(A=T)}if((!j||!j.length)&&Xt(S)){var L=y&&y.length,O=S({xAxis:v?hi(hi({},v),{},{ticks:L?y:v.ticks}):void 0,width:o,height:c,offset:u},L?!0:m);Bo(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Of(O),"]")),Array.isArray(O)&&(j=O)}return _e.createElement("g",{className:"recharts-cartesian-grid"},_e.createElement(NRe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),_e.createElement(jRe,Yd({},d,{offset:u,horizontalPoints:A,xAxis:v,yAxis:b})),_e.createElement(ARe,Yd({},d,{offset:u,verticalPoints:j,xAxis:v,yAxis:b})),_e.createElement(ERe,Yd({},d,{horizontalPoints:A})),_e.createElement(TRe,Yd({},d,{verticalPoints:j})))}Pf.displayName="CartesianGrid";function ip(e){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ip(e)}function ORe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PRe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yH(n.key),n)}}function LRe(e,t,r){return t&&PRe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function IRe(e,t,r){return t=b2(t),RRe(e,vH()?Reflect.construct(t,r||[],b2(e).constructor):t.apply(e,r))}function RRe(e,t){if(t&&(ip(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DRe(e)}function DRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vH=function(){return!!e})()}function b2(e){return b2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},b2(e)}function MRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W4(e,t)}function W4(e,t){return W4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},W4(e,t)}function xH(e,t,r){return t=yH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yH(e){var t=FRe(e,"string");return ip(t)=="symbol"?t:t+""}function FRe(e,t){if(ip(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ip(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function V4(){return V4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V4.apply(this,arguments)}function $Re(e){var t=e.xAxisId,r=QE(),n=ZE(),a=iH(t);return a==null?null:F.createElement(Dp,V4({},a,{className:cr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(s){return nc(s,!0)}}))}var jc=function(e){function t(){return ORe(this,t),IRe(this,t,arguments)}return MRe(t,e),LRe(t,[{key:"render",value:function(){return F.createElement($Re,this.props)}}])}(F.Component);xH(jc,"displayName","XAxis");xH(jc,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function sp(e){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sp(e)}function BRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function URe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_H(n.key),n)}}function zRe(e,t,r){return t&&URe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function qRe(e,t,r){return t=w2(t),HRe(e,bH()?Reflect.construct(t,r||[],w2(e).constructor):t.apply(e,r))}function HRe(e,t){if(t&&(sp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WRe(e)}function WRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bH=function(){return!!e})()}function w2(e){return w2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},w2(e)}function VRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G4(e,t)}function G4(e,t){return G4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},G4(e,t)}function wH(e,t,r){return t=_H(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _H(e){var t=GRe(e,"string");return sp(t)=="symbol"?t:t+""}function GRe(e,t){if(sp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function K4(){return K4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K4.apply(this,arguments)}var KRe=function(t){var r=t.yAxisId,n=QE(),a=ZE(),i=sH(r);return i==null?null:F.createElement(Dp,K4({},i,{className:cr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(o){return nc(o,!0)}}))},Ac=function(e){function t(){return BRe(this,t),qRe(this,t,arguments)}return VRe(t,e),zRe(t,[{key:"render",value:function(){return F.createElement(KRe,this.props)}}])}(F.Component);wH(Ac,"displayName","YAxis");wH(Ac,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function JI(e){return QRe(e)||JRe(e)||YRe(e)||XRe()}function XRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YRe(e,t){if(e){if(typeof e=="string")return X4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X4(e,t)}}function JRe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function QRe(e){if(Array.isArray(e))return X4(e)}function X4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Y4=function(t,r,n,a,i){var s=to(t,tT),o=to(t,e_),c=[].concat(JI(s),JI(o)),u=to(t,r_),d="".concat(a,"Id"),f=a[0],p=r;if(c.length&&(p=c.reduce(function(m,x){if(x.props[d]===n&&gl(x.props,"extendDomain")&&nt(x.props[f])){var y=x.props[f];return[Math.min(m[0],y),Math.max(m[1],y)]}return m},p)),u.length){var h="".concat(f,"1"),g="".concat(f,"2");p=u.reduce(function(m,x){if(x.props[d]===n&&gl(x.props,"extendDomain")&&nt(x.props[h])&&nt(x.props[g])){var y=x.props[h],v=x.props[g];return[Math.min(m[0],y,v),Math.max(m[1],y,v)]}return m},p)}return i&&i.length&&(p=i.reduce(function(m,x){return nt(x)?[Math.min(m[0],x),Math.max(m[1],x)]:m},p)),p},SH={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new a(d,f||c,p),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],h]:c._events[g].push(h):(c._events[g]=h,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,h=f.length,g=new Array(h);p<h;p++)g[p]=f[p].fn;return g},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,p,h,g){var m=r?r+u:u;if(!this._events[m])return!1;var x=this._events[m],y=arguments.length,v,b;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),y){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,p),!0;case 5:return x.fn.call(x.context,d,f,p,h),!0;case 6:return x.fn.call(x.context,d,f,p,h,g),!0}for(b=1,v=new Array(y-1);b<y;b++)v[b-1]=arguments[b];x.fn.apply(x.context,v)}else{var S=x.length,_;for(b=0;b<S;b++)switch(x[b].once&&this.removeListener(u,x[b].fn,void 0,!0),y){case 1:x[b].fn.call(x[b].context);break;case 2:x[b].fn.call(x[b].context,d);break;case 3:x[b].fn.call(x[b].context,d,f);break;case 4:x[b].fn.call(x[b].context,d,f,p);break;default:if(!v)for(_=1,v=new Array(y-1);_<y;_++)v[_-1]=arguments[_];x[b].fn.apply(x[b].context,v)}}return!0},o.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,p){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return s(this,h),this;var g=this._events[h];if(g.fn)g.fn===d&&(!p||g.once)&&(!f||g.context===f)&&s(this,h);else{for(var m=0,x=[],y=g.length;m<y;m++)(g[m].fn!==d||p&&!g[m].once||f&&g[m].context!==f)&&x.push(g[m]);x.length?this._events[h]=x.length===1?x[0]:x:s(this,h)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&s(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(SH);var ZRe=SH.exports;const eDe=Pr(ZRe);var CS=new eDe,kS="recharts.syncMouseEvents";function jv(e){"@babel/helpers - typeof";return jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jv(e)}function tDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rDe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,NH(n.key),n)}}function nDe(e,t,r){return t&&rDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function OS(e,t,r){return t=NH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NH(e){var t=aDe(e,"string");return jv(t)=="symbol"?t:t+""}function aDe(e,t){if(jv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var iDe=function(){function e(){tDe(this,e),OS(this,"activeIndex",0),OS(this,"coordinateList",[]),OS(this,"layout","horizontal")}return nDe(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,s=r.container,o=s===void 0?null:s,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,p=r.mouseHandlerCallback,h=p===void 0?null:p;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,s=a.y,o=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+c+u,p=s+this.offset.top+o/2+d;this.mouseHandlerCallback({pageX:f,pageY:p})}}}])}();function sDe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&nt(n)&&nt(a))return!0}return!1}function oDe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function jH(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,s=ln(t,r,n,a),o=ln(t,r,n,i);return{points:[s,o],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function lDe(e,t,r){var n,a,i,s;if(e==="horizontal")n=t.x,i=n,a=r.top,s=r.top+r.height;else if(e==="vertical")a=t.y,s=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var o=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,p=ln(o,c,u,f),h=ln(o,c,d,f);n=p.x,a=p.y,i=h.x,s=h.y}else return jH(t);return[{x:n,y:a},{x:i,y:s}]}function Av(e){"@babel/helpers - typeof";return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Av(e)}function QI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QI(Object(r),!0).forEach(function(n){cDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cDe(e,t,r){return t=uDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uDe(e){var t=dDe(e,"string");return Av(t)=="symbol"?t:t+""}function dDe(e,t){if(Av(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Av(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fDe(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,s=e.activeCoordinate,o=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,p=e.chartName,h=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!h||!i||!s||p!=="ScatterChart"&&a!=="axis")return null;var g,m=y4;if(p==="ScatterChart")g=s,m=q6e;else if(p==="BarChart")g=oDe(f,s,c,d),m=GE;else if(f==="radial"){var x=jH(s),y=x.cx,v=x.cy,b=x.radius,S=x.startAngle,_=x.endAngle;g={cx:y,cy:v,startAngle:S,endAngle:_,innerRadius:b,outerRadius:b},m=Nq}else g={points:lDe(f,s,c)},m=y4;var A=Gx(Gx(Gx(Gx({stroke:"#ccc",pointerEvents:"none"},c),g),Wt(h,!1)),{},{payload:o,payloadIndex:u,className:cr("recharts-tooltip-cursor",h.className)});return F.isValidElement(h)?F.cloneElement(h,A):F.createElement(m,A)}var hDe=["item"],pDe=["children","className","width","height","style","compact","title","desc"];function op(e){"@babel/helpers - typeof";return op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},op(e)}function qh(){return qh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qh.apply(this,arguments)}function ZI(e,t){return vDe(e)||gDe(e,t)||EH(e,t)||mDe()}function mDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gDe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function vDe(e){if(Array.isArray(e))return e}function eR(e,t){if(e==null)return{};var r=xDe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function xDe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function yDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bDe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TH(n.key),n)}}function wDe(e,t,r){return t&&bDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _De(e,t,r){return t=_2(t),SDe(e,AH()?Reflect.construct(t,r||[],_2(e).constructor):t.apply(e,r))}function SDe(e,t){if(t&&(op(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NDe(e)}function NDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AH=function(){return!!e})()}function _2(e){return _2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_2(e)}function jDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J4(e,t)}function J4(e,t){return J4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},J4(e,t)}function lp(e){return TDe(e)||EDe(e)||EH(e)||ADe()}function ADe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EH(e,t){if(e){if(typeof e=="string")return Q4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q4(e,t)}}function EDe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function TDe(e){if(Array.isArray(e))return Q4(e)}function Q4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ze(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tR(Object(r),!0).forEach(function(n){Bt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bt(e,t,r){return t=TH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TH(e){var t=CDe(e,"string");return op(t)=="symbol"?t:t+""}function CDe(e,t){if(op(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(op(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kDe={xAxis:["bottom","top"],yAxis:["left","right"]},ODe={width:"100%",height:"100%"},CH={x:0,y:0};function Kx(e){return e}var PDe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},LDe=function(t,r,n,a){var i=r.find(function(d){return d&&d.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var s=i.coordinate,o=a.radius;return ze(ze(ze({},a),ln(a.cx,a.cy,o,s)),{},{angle:s,radius:o})}var c=i.coordinate,u=a.angle;return ze(ze(ze({},a),ln(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return CH},n_=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,s=(n??[]).reduce(function(o,c){var u=c.props.data;return u&&u.length?[].concat(lp(o),lp(u)):o},[]);return s.length>0?s:t&&t.length&&nt(a)&&nt(i)?t.slice(a,i+1):[]};function kH(e){return e==="number"?[0,"auto"]:void 0}var Z4=function(t,r,n,a){var i=t.graphicalItems,s=t.tooltipAxis,o=n_(r,t);return n<0||!i||!i.length||n>=o.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var p;if(s.dataKey&&!s.allowDuplicatedCategory){var h=f===void 0?o:f;p=Ej(h,s.dataKey,a)}else p=f&&f[n]||o[n];return p?[].concat(lp(c),[xq(u,p)]):c},[])},rR=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},s=PDe(i,n),o=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=cCe(s,o,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,p=Z4(t,r,d,f),h=LDe(n,o,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:p,activeCoordinate:h}}return null},IDe=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,s=r.axisIdKey,o=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,p=t.stackOffset,h=fq(d,i);return n.reduce(function(g,m){var x,y=m.type.defaultProps!==void 0?ze(ze({},m.type.defaultProps),m.props):m.props,v=y.type,b=y.dataKey,S=y.allowDataOverflow,_=y.allowDuplicatedCategory,A=y.scale,j=y.ticks,E=y.includeHidden,T=y[s];if(g[T])return g;var L=n_(t.data,{graphicalItems:a.filter(function(k){var M,B=s in k.props?k.props[s]:(M=k.type.defaultProps)===null||M===void 0?void 0:M[s];return B===T}),dataStartIndex:c,dataEndIndex:u}),O=L.length,I,D,z;sDe(y.domain,S,v)&&(I=p4(y.domain,null,S),h&&(v==="number"||A!=="auto")&&(z=lg(L,b,"category")));var Y=kH(v);if(!I||I.length===0){var se,ee=(se=y.domain)!==null&&se!==void 0?se:Y;if(b){if(I=lg(L,b,v),v==="category"&&h){var J=Z1e(I);_&&J?(D=I,I=u2(0,O)):_||(I=kL(ee,I,m).reduce(function(k,M){return k.indexOf(M)>=0?k:[].concat(lp(k),[M])},[]))}else if(v==="category")_?I=I.filter(function(k){return k!==""&&!dr(k)}):I=kL(ee,I,m).reduce(function(k,M){return k.indexOf(M)>=0||M===""||dr(M)?k:[].concat(lp(k),[M])},[]);else if(v==="number"){var oe=pCe(L,a.filter(function(k){var M,B,U=s in k.props?k.props[s]:(M=k.type.defaultProps)===null||M===void 0?void 0:M[s],Z="hide"in k.props?k.props.hide:(B=k.type.defaultProps)===null||B===void 0?void 0:B.hide;return U===T&&(E||!Z)}),b,i,d);oe&&(I=oe)}h&&(v==="number"||A!=="auto")&&(z=lg(L,b,"category"))}else h?I=u2(0,O):o&&o[T]&&o[T].hasStack&&v==="number"?I=p==="expand"?[0,1]:vq(o[T].stackGroups,c,u):I=dq(L,a.filter(function(k){var M=s in k.props?k.props[s]:k.type.defaultProps[s],B="hide"in k.props?k.props.hide:k.type.defaultProps.hide;return M===T&&(E||!B)}),v,d,!0);if(v==="number")I=Y4(f,I,T,i,j),ee&&(I=p4(ee,I,S));else if(v==="category"&&ee){var we=ee,xe=I.every(function(k){return we.indexOf(k)>=0});xe&&(I=we)}}return ze(ze({},g),{},Bt({},T,ze(ze({},y),{},{axisType:i,domain:I,categoricalDomain:z,duplicateDomain:D,originalDomain:(x=y.domain)!==null&&x!==void 0?x:Y,isCategorical:h,layout:d})))},{})},RDe=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,s=r.axisIdKey,o=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,p=n_(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),h=p.length,g=fq(d,i),m=-1;return n.reduce(function(x,y){var v=y.type.defaultProps!==void 0?ze(ze({},y.type.defaultProps),y.props):y.props,b=v[s],S=kH("number");if(!x[b]){m++;var _;return g?_=u2(0,h):o&&o[b]&&o[b].hasStack?(_=vq(o[b].stackGroups,c,u),_=Y4(f,_,b,i)):(_=p4(S,dq(p,n.filter(function(A){var j,E,T=s in A.props?A.props[s]:(j=A.type.defaultProps)===null||j===void 0?void 0:j[s],L="hide"in A.props?A.props.hide:(E=A.type.defaultProps)===null||E===void 0?void 0:E.hide;return T===b&&!L}),"number",d),a.defaultProps.allowDataOverflow),_=Y4(f,_,b,i)),ze(ze({},x),{},Bt({},b,ze(ze({axisType:i},a.defaultProps),{},{hide:!0,orientation:Os(kDe,"".concat(i,".").concat(m%2),null),domain:_,originalDomain:S,isCategorical:g,layout:d})))}return x},{})},DDe=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,s=r.graphicalItems,o=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(a,"Id"),p=to(d,i),h={};return p&&p.length?h=IDe(t,{axes:p,graphicalItems:s,axisType:a,axisIdKey:f,stackGroups:o,dataStartIndex:c,dataEndIndex:u}):s&&s.length&&(h=RDe(t,{Axis:i,graphicalItems:s,axisType:a,axisIdKey:f,stackGroups:o,dataStartIndex:c,dataEndIndex:u})),h},MDe=function(t){var r=hu(t),n=nc(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:bE(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Jb(r,n)}},nR=function(t){var r=t.children,n=t.defaultShowTooltip,a=ws(r,Z0),i=0,s=0;return t.data&&t.data.length!==0&&(s=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(s=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},FDe=function(t){return!t||!t.length?!1:t.some(function(r){var n=lc(r&&r.type);return n&&n.indexOf("Bar")>=0})},aR=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},$De=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,s=i===void 0?{}:i,o=t.yAxisMap,c=o===void 0?{}:o,u=n.width,d=n.height,f=n.children,p=n.margin||{},h=ws(f,Z0),g=ws(f,cc),m=Object.keys(c).reduce(function(_,A){var j=c[A],E=j.orientation;return!j.mirror&&!j.hide?ze(ze({},_),{},Bt({},E,_[E]+j.width)):_},{left:p.left||0,right:p.right||0}),x=Object.keys(s).reduce(function(_,A){var j=s[A],E=j.orientation;return!j.mirror&&!j.hide?ze(ze({},_),{},Bt({},E,Os(_,"".concat(E))+j.height)):_},{top:p.top||0,bottom:p.bottom||0}),y=ze(ze({},x),m),v=y.bottom;h&&(y.bottom+=h.props.height||Z0.defaultProps.height),g&&r&&(y=fCe(y,a,n,r));var b=u-y.left-y.right,S=d-y.top-y.bottom;return ze(ze({brushBottom:v},y),{},{width:Math.max(b,0),height:Math.max(S,0)})},BDe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},OH=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,s=t.validateTooltipEventTypes,o=s===void 0?["axis"]:s,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,p=function(y,v){var b=v.graphicalItems,S=v.stackGroups,_=v.offset,A=v.updateId,j=v.dataStartIndex,E=v.dataEndIndex,T=y.barSize,L=y.layout,O=y.barGap,I=y.barCategoryGap,D=y.maxBarSize,z=aR(L),Y=z.numericAxisName,se=z.cateAxisName,ee=FDe(b),J=[];return b.forEach(function(oe,we){var xe=n_(y.data,{graphicalItems:[oe],dataStartIndex:j,dataEndIndex:E}),k=oe.type.defaultProps!==void 0?ze(ze({},oe.type.defaultProps),oe.props):oe.props,M=k.dataKey,B=k.maxBarSize,U=k["".concat(Y,"Id")],Z=k["".concat(se,"Id")],pe={},K=c.reduce(function(st,dt){var rt=v["".concat(dt.axisType,"Map")],Dt=k["".concat(dt.axisType,"Id")];rt&&rt[Dt]||dt.axisType==="zAxis"||kf();var ht=rt[Dt];return ze(ze({},st),{},Bt(Bt({},dt.axisType,ht),"".concat(dt.axisType,"Ticks"),nc(ht)))},pe),te=K[se],ae=K["".concat(se,"Ticks")],be=S&&S[U]&&S[U].hasStack&&SCe(oe,S[U].stackGroups),ve=lc(oe.type).indexOf("Bar")>=0,Fe=Jb(te,ae),Me=[],X=ee&&uCe({barSize:T,stackGroups:S,totalSize:BDe(K,se)});if(ve){var Ie,Re,Qe=dr(B)?D:B,Ue=(Ie=(Re=Jb(te,ae,!0))!==null&&Re!==void 0?Re:Qe)!==null&&Ie!==void 0?Ie:0;Me=dCe({barGap:O,barCategoryGap:I,bandSize:Ue!==Fe?Ue:Fe,sizeList:X[Z],maxBarSize:Qe}),Ue!==Fe&&(Me=Me.map(function(st){return ze(ze({},st),{},{position:ze(ze({},st.position),{},{offset:st.position.offset-Ue/2})})}))}var pt=oe&&oe.type&&oe.type.getComposedData;pt&&J.push({props:ze(ze({},pt(ze(ze({},K),{},{displayedData:xe,props:y,dataKey:M,item:oe,bandSize:Fe,barPosition:Me,offset:_,stackedData:be,layout:L,dataStartIndex:j,dataEndIndex:E}))),{},Bt(Bt(Bt({key:oe.key||"item-".concat(we)},Y,K[Y]),se,K[se]),"animationId",A)),childIndex:dxe(oe,y.children),item:oe})}),J},h=function(y,v){var b=y.props,S=y.dataStartIndex,_=y.dataEndIndex,A=y.updateId;if(!NP({props:b}))return null;var j=b.children,E=b.layout,T=b.stackOffset,L=b.data,O=b.reverseStackOrder,I=aR(E),D=I.numericAxisName,z=I.cateAxisName,Y=to(j,n),se=wCe(L,Y,"".concat(D,"Id"),"".concat(z,"Id"),T,O),ee=c.reduce(function(k,M){var B="".concat(M.axisType,"Map");return ze(ze({},k),{},Bt({},B,DDe(b,ze(ze({},M),{},{graphicalItems:Y,stackGroups:M.axisType===D&&se,dataStartIndex:S,dataEndIndex:_}))))},{}),J=$De(ze(ze({},ee),{},{props:b,graphicalItems:Y}),v==null?void 0:v.legendBBox);Object.keys(ee).forEach(function(k){ee[k]=d(b,ee[k],J,k.replace("Map",""),r)});var oe=ee["".concat(z,"Map")],we=MDe(oe),xe=p(b,ze(ze({},ee),{},{dataStartIndex:S,dataEndIndex:_,updateId:A,graphicalItems:Y,stackGroups:se,offset:J}));return ze(ze({formattedGraphicalItems:xe,graphicalItems:Y,offset:J,stackGroups:se},we),ee)},g=function(x){function y(v){var b,S,_;return yDe(this,y),_=_De(this,y,[v]),Bt(_,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Bt(_,"accessibilityManager",new iDe),Bt(_,"handleLegendBBoxUpdate",function(A){if(A){var j=_.state,E=j.dataStartIndex,T=j.dataEndIndex,L=j.updateId;_.setState(ze({legendBBox:A},h({props:_.props,dataStartIndex:E,dataEndIndex:T,updateId:L},ze(ze({},_.state),{},{legendBBox:A}))))}}),Bt(_,"handleReceiveSyncEvent",function(A,j,E){if(_.props.syncId===A){if(E===_.eventEmitterSymbol&&typeof _.props.syncMethod!="function")return;_.applySyncEvent(j)}}),Bt(_,"handleBrushChange",function(A){var j=A.startIndex,E=A.endIndex;if(j!==_.state.dataStartIndex||E!==_.state.dataEndIndex){var T=_.state.updateId;_.setState(function(){return ze({dataStartIndex:j,dataEndIndex:E},h({props:_.props,dataStartIndex:j,dataEndIndex:E,updateId:T},_.state))}),_.triggerSyncEvent({dataStartIndex:j,dataEndIndex:E})}}),Bt(_,"handleMouseEnter",function(A){var j=_.getMouseInfo(A);if(j){var E=ze(ze({},j),{},{isTooltipActive:!0});_.setState(E),_.triggerSyncEvent(E);var T=_.props.onMouseEnter;Xt(T)&&T(E,A)}}),Bt(_,"triggeredAfterMouseMove",function(A){var j=_.getMouseInfo(A),E=j?ze(ze({},j),{},{isTooltipActive:!0}):{isTooltipActive:!1};_.setState(E),_.triggerSyncEvent(E);var T=_.props.onMouseMove;Xt(T)&&T(E,A)}),Bt(_,"handleItemMouseEnter",function(A){_.setState(function(){return{isTooltipActive:!0,activeItem:A,activePayload:A.tooltipPayload,activeCoordinate:A.tooltipPosition||{x:A.cx,y:A.cy}}})}),Bt(_,"handleItemMouseLeave",function(){_.setState(function(){return{isTooltipActive:!1}})}),Bt(_,"handleMouseMove",function(A){A.persist(),_.throttleTriggeredAfterMouseMove(A)}),Bt(_,"handleMouseLeave",function(A){_.throttleTriggeredAfterMouseMove.cancel();var j={isTooltipActive:!1};_.setState(j),_.triggerSyncEvent(j);var E=_.props.onMouseLeave;Xt(E)&&E(j,A)}),Bt(_,"handleOuterEvent",function(A){var j=uxe(A),E=Os(_.props,"".concat(j));if(j&&Xt(E)){var T,L;/.*touch.*/i.test(j)?L=_.getMouseInfo(A.changedTouches[0]):L=_.getMouseInfo(A),E((T=L)!==null&&T!==void 0?T:{},A)}}),Bt(_,"handleClick",function(A){var j=_.getMouseInfo(A);if(j){var E=ze(ze({},j),{},{isTooltipActive:!0});_.setState(E),_.triggerSyncEvent(E);var T=_.props.onClick;Xt(T)&&T(E,A)}}),Bt(_,"handleMouseDown",function(A){var j=_.props.onMouseDown;if(Xt(j)){var E=_.getMouseInfo(A);j(E,A)}}),Bt(_,"handleMouseUp",function(A){var j=_.props.onMouseUp;if(Xt(j)){var E=_.getMouseInfo(A);j(E,A)}}),Bt(_,"handleTouchMove",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&_.throttleTriggeredAfterMouseMove(A.changedTouches[0])}),Bt(_,"handleTouchStart",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&_.handleMouseDown(A.changedTouches[0])}),Bt(_,"handleTouchEnd",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&_.handleMouseUp(A.changedTouches[0])}),Bt(_,"handleDoubleClick",function(A){var j=_.props.onDoubleClick;if(Xt(j)){var E=_.getMouseInfo(A);j(E,A)}}),Bt(_,"handleContextMenu",function(A){var j=_.props.onContextMenu;if(Xt(j)){var E=_.getMouseInfo(A);j(E,A)}}),Bt(_,"triggerSyncEvent",function(A){_.props.syncId!==void 0&&CS.emit(kS,_.props.syncId,A,_.eventEmitterSymbol)}),Bt(_,"applySyncEvent",function(A){var j=_.props,E=j.layout,T=j.syncMethod,L=_.state.updateId,O=A.dataStartIndex,I=A.dataEndIndex;if(A.dataStartIndex!==void 0||A.dataEndIndex!==void 0)_.setState(ze({dataStartIndex:O,dataEndIndex:I},h({props:_.props,dataStartIndex:O,dataEndIndex:I,updateId:L},_.state)));else if(A.activeTooltipIndex!==void 0){var D=A.chartX,z=A.chartY,Y=A.activeTooltipIndex,se=_.state,ee=se.offset,J=se.tooltipTicks;if(!ee)return;if(typeof T=="function")Y=T(J,A);else if(T==="value"){Y=-1;for(var oe=0;oe<J.length;oe++)if(J[oe].value===A.activeLabel){Y=oe;break}}var we=ze(ze({},ee),{},{x:ee.left,y:ee.top}),xe=Math.min(D,we.x+we.width),k=Math.min(z,we.y+we.height),M=J[Y]&&J[Y].value,B=Z4(_.state,_.props.data,Y),U=J[Y]?{x:E==="horizontal"?J[Y].coordinate:xe,y:E==="horizontal"?k:J[Y].coordinate}:CH;_.setState(ze(ze({},A),{},{activeLabel:M,activeCoordinate:U,activePayload:B,activeTooltipIndex:Y}))}else _.setState(A)}),Bt(_,"renderCursor",function(A){var j,E=_.state,T=E.isTooltipActive,L=E.activeCoordinate,O=E.activePayload,I=E.offset,D=E.activeTooltipIndex,z=E.tooltipAxisBandSize,Y=_.getTooltipEventType(),se=(j=A.props.active)!==null&&j!==void 0?j:T,ee=_.props.layout,J=A.key||"_recharts-cursor";return _e.createElement(fDe,{key:J,activeCoordinate:L,activePayload:O,activeTooltipIndex:D,chartName:r,element:A,isActive:se,layout:ee,offset:I,tooltipAxisBandSize:z,tooltipEventType:Y})}),Bt(_,"renderPolarAxis",function(A,j,E){var T=Os(A,"type.axisType"),L=Os(_.state,"".concat(T,"Map")),O=A.type.defaultProps,I=O!==void 0?ze(ze({},O),A.props):A.props,D=L&&L[I["".concat(T,"Id")]];return F.cloneElement(A,ze(ze({},D),{},{className:cr(T,D.className),key:A.key||"".concat(j,"-").concat(E),ticks:nc(D,!0)}))}),Bt(_,"renderPolarGrid",function(A){var j=A.props,E=j.radialLines,T=j.polarAngles,L=j.polarRadius,O=_.state,I=O.radiusAxisMap,D=O.angleAxisMap,z=hu(I),Y=hu(D),se=Y.cx,ee=Y.cy,J=Y.innerRadius,oe=Y.outerRadius;return F.cloneElement(A,{polarAngles:Array.isArray(T)?T:nc(Y,!0).map(function(we){return we.coordinate}),polarRadius:Array.isArray(L)?L:nc(z,!0).map(function(we){return we.coordinate}),cx:se,cy:ee,innerRadius:J,outerRadius:oe,key:A.key||"polar-grid",radialLines:E})}),Bt(_,"renderLegend",function(){var A=_.state.formattedGraphicalItems,j=_.props,E=j.children,T=j.width,L=j.height,O=_.props.margin||{},I=T-(O.left||0)-(O.right||0),D=cq({children:E,formattedGraphicalItems:A,legendWidth:I,legendContent:u});if(!D)return null;var z=D.item,Y=eR(D,hDe);return F.cloneElement(z,ze(ze({},Y),{},{chartWidth:T,chartHeight:L,margin:O,onBBoxUpdate:_.handleLegendBBoxUpdate}))}),Bt(_,"renderTooltip",function(){var A,j=_.props,E=j.children,T=j.accessibilityLayer,L=ws(E,Oa);if(!L)return null;var O=_.state,I=O.isTooltipActive,D=O.activeCoordinate,z=O.activePayload,Y=O.activeLabel,se=O.offset,ee=(A=L.props.active)!==null&&A!==void 0?A:I;return F.cloneElement(L,{viewBox:ze(ze({},se),{},{x:se.left,y:se.top}),active:ee,label:Y,payload:ee?z:[],coordinate:D,accessibilityLayer:T})}),Bt(_,"renderBrush",function(A){var j=_.props,E=j.margin,T=j.data,L=_.state,O=L.offset,I=L.dataStartIndex,D=L.dataEndIndex,z=L.updateId;return F.cloneElement(A,{key:A.key||"_recharts-brush",onChange:qx(_.handleBrushChange,A.props.onChange),data:T,x:nt(A.props.x)?A.props.x:O.left,y:nt(A.props.y)?A.props.y:O.top+O.height+O.brushBottom-(E.bottom||0),width:nt(A.props.width)?A.props.width:O.width,startIndex:I,endIndex:D,updateId:"brush-".concat(z)})}),Bt(_,"renderReferenceElement",function(A,j,E){if(!A)return null;var T=_,L=T.clipPathId,O=_.state,I=O.xAxisMap,D=O.yAxisMap,z=O.offset,Y=A.type.defaultProps||{},se=A.props,ee=se.xAxisId,J=ee===void 0?Y.xAxisId:ee,oe=se.yAxisId,we=oe===void 0?Y.yAxisId:oe;return F.cloneElement(A,{key:A.key||"".concat(j,"-").concat(E),xAxis:I[J],yAxis:D[we],viewBox:{x:z.left,y:z.top,width:z.width,height:z.height},clipPathId:L})}),Bt(_,"renderActivePoints",function(A){var j=A.item,E=A.activePoint,T=A.basePoint,L=A.childIndex,O=A.isRange,I=[],D=j.props.key,z=j.item.type.defaultProps!==void 0?ze(ze({},j.item.type.defaultProps),j.item.props):j.item.props,Y=z.activeDot,se=z.dataKey,ee=ze(ze({index:L,dataKey:se,cx:E.x,cy:E.y,r:4,fill:VE(j.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},Wt(Y,!1)),Nb(Y));return I.push(y.renderActiveDot(Y,ee,"".concat(D,"-activePoint-").concat(L))),T?I.push(y.renderActiveDot(Y,ze(ze({},ee),{},{cx:T.x,cy:T.y}),"".concat(D,"-basePoint-").concat(L))):O&&I.push(null),I}),Bt(_,"renderGraphicChild",function(A,j,E){var T=_.filterFormatItem(A,j,E);if(!T)return null;var L=_.getTooltipEventType(),O=_.state,I=O.isTooltipActive,D=O.tooltipAxis,z=O.activeTooltipIndex,Y=O.activeLabel,se=_.props.children,ee=ws(se,Oa),J=T.props,oe=J.points,we=J.isRange,xe=J.baseLine,k=T.item.type.defaultProps!==void 0?ze(ze({},T.item.type.defaultProps),T.item.props):T.item.props,M=k.activeDot,B=k.hide,U=k.activeBar,Z=k.activeShape,pe=!!(!B&&I&&ee&&(M||U||Z)),K={};L!=="axis"&&ee&&ee.props.trigger==="click"?K={onClick:qx(_.handleItemMouseEnter,A.props.onClick)}:L!=="axis"&&(K={onMouseLeave:qx(_.handleItemMouseLeave,A.props.onMouseLeave),onMouseEnter:qx(_.handleItemMouseEnter,A.props.onMouseEnter)});var te=F.cloneElement(A,ze(ze({},T.props),K));function ae(dt){return typeof D.dataKey=="function"?D.dataKey(dt.payload):null}if(pe)if(z>=0){var be,ve;if(D.dataKey&&!D.allowDuplicatedCategory){var Fe=typeof D.dataKey=="function"?ae:"payload.".concat(D.dataKey.toString());be=Ej(oe,Fe,Y),ve=we&&xe&&Ej(xe,Fe,Y)}else be=oe==null?void 0:oe[z],ve=we&&xe&&xe[z];if(Z||U){var Me=A.props.activeIndex!==void 0?A.props.activeIndex:z;return[F.cloneElement(A,ze(ze(ze({},T.props),K),{},{activeIndex:Me})),null,null]}if(!dr(be))return[te].concat(lp(_.renderActivePoints({item:T,activePoint:be,basePoint:ve,childIndex:z,isRange:we})))}else{var X,Ie=(X=_.getItemByXY(_.state.activeCoordinate))!==null&&X!==void 0?X:{graphicalItem:te},Re=Ie.graphicalItem,Qe=Re.item,Ue=Qe===void 0?A:Qe,pt=Re.childIndex,st=ze(ze(ze({},T.props),K),{},{activeIndex:pt});return[F.cloneElement(Ue,st),null,null]}return we?[te,null,null]:[te,null]}),Bt(_,"renderCustomized",function(A,j,E){return F.cloneElement(A,ze(ze({key:"recharts-customized-".concat(E)},_.props),_.state))}),Bt(_,"renderMap",{CartesianGrid:{handler:Kx,once:!0},ReferenceArea:{handler:_.renderReferenceElement},ReferenceLine:{handler:Kx},ReferenceDot:{handler:_.renderReferenceElement},XAxis:{handler:Kx},YAxis:{handler:Kx},Brush:{handler:_.renderBrush,once:!0},Bar:{handler:_.renderGraphicChild},Line:{handler:_.renderGraphicChild},Area:{handler:_.renderGraphicChild},Radar:{handler:_.renderGraphicChild},RadialBar:{handler:_.renderGraphicChild},Scatter:{handler:_.renderGraphicChild},Pie:{handler:_.renderGraphicChild},Funnel:{handler:_.renderGraphicChild},Tooltip:{handler:_.renderCursor,once:!0},PolarGrid:{handler:_.renderPolarGrid,once:!0},PolarAngleAxis:{handler:_.renderPolarAxis},PolarRadiusAxis:{handler:_.renderPolarAxis},Customized:{handler:_.renderCustomized}}),_.clipPathId="".concat((b=v.id)!==null&&b!==void 0?b:r1("recharts"),"-clip"),_.throttleTriggeredAfterMouseMove=lz(_.triggeredAfterMouseMove,(S=v.throttleDelay)!==null&&S!==void 0?S:1e3/60),_.state={},_}return jDe(y,x),wDe(y,[{key:"componentDidMount",value:function(){var b,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,S=b.children,_=b.data,A=b.height,j=b.layout,E=ws(S,Oa);if(E){var T=E.props.defaultIndex;if(!(typeof T!="number"||T<0||T>this.state.tooltipTicks.length-1)){var L=this.state.tooltipTicks[T]&&this.state.tooltipTicks[T].value,O=Z4(this.state,_,T,L),I=this.state.tooltipTicks[T].coordinate,D=(this.state.offset.top+A)/2,z=j==="horizontal",Y=z?{x:I,y:D}:{y:I,x:D},se=this.state.formattedGraphicalItems.find(function(J){var oe=J.item;return oe.type.name==="Scatter"});se&&(Y=ze(ze({},Y),se.props.points[T].tooltipPosition),O=se.props.points[T].tooltipPayload);var ee={activeTooltipIndex:T,isTooltipActive:!0,activeLabel:L,activePayload:O,activeCoordinate:Y};this.setState(ee),this.renderCursor(E),this.accessibilityManager.setIndex(T)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var _,A;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0}})}return null}},{key:"componentDidUpdate",value:function(b){Cj([ws(b.children,Oa)],[ws(this.props.children,Oa)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=ws(this.props.children,Oa);if(b&&typeof b.props.shared=="boolean"){var S=b.props.shared?"axis":"item";return o.indexOf(S)>=0?S:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var S=this.container,_=S.getBoundingClientRect(),A=M4e(_),j={chartX:Math.round(b.pageX-A.left),chartY:Math.round(b.pageY-A.top)},E=_.width/S.offsetWidth||1,T=this.inRange(j.chartX,j.chartY,E);if(!T)return null;var L=this.state,O=L.xAxisMap,I=L.yAxisMap,D=this.getTooltipEventType(),z=rR(this.state,this.props.data,this.props.layout,T);if(D!=="axis"&&O&&I){var Y=hu(O).scale,se=hu(I).scale,ee=Y&&Y.invert?Y.invert(j.chartX):null,J=se&&se.invert?se.invert(j.chartY):null;return ze(ze({},j),{},{xValue:ee,yValue:J},z)}return z?ze(ze({},j),z):null}},{key:"inRange",value:function(b,S){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,A=this.props.layout,j=b/_,E=S/_;if(A==="horizontal"||A==="vertical"){var T=this.state.offset,L=j>=T.left&&j<=T.left+T.width&&E>=T.top&&E<=T.top+T.height;return L?{x:j,y:E}:null}var O=this.state,I=O.angleAxisMap,D=O.radiusAxisMap;if(I&&D){var z=hu(I);return LL({x:j,y:E},z)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,S=this.getTooltipEventType(),_=ws(b,Oa),A={};_&&S==="axis"&&(_.props.trigger==="click"?A={onClick:this.handleClick}:A={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var j=Nb(this.props,this.handleOuterEvent);return ze(ze({},j),A)}},{key:"addListener",value:function(){CS.on(kS,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){CS.removeListener(kS,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,S,_){for(var A=this.state.formattedGraphicalItems,j=0,E=A.length;j<E;j++){var T=A[j];if(T.item===b||T.props.key===b.key||S===lc(T.item.type)&&_===T.childIndex)return T}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,S=this.state.offset,_=S.left,A=S.top,j=S.height,E=S.width;return _e.createElement("defs",null,_e.createElement("clipPath",{id:b},_e.createElement("rect",{x:_,y:A,height:j,width:E})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(S,_){var A=ZI(_,2),j=A[0],E=A[1];return ze(ze({},S),{},Bt({},j,E.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(S,_){var A=ZI(_,2),j=A[0],E=A[1];return ze(ze({},S),{},Bt({},j,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[b])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(b){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[b])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(b){var S=this.state,_=S.formattedGraphicalItems,A=S.activeItem;if(_&&_.length)for(var j=0,E=_.length;j<E;j++){var T=_[j],L=T.props,O=T.item,I=O.type.defaultProps!==void 0?ze(ze({},O.type.defaultProps),O.props):O.props,D=lc(O.type);if(D==="Bar"){var z=(L.data||[]).find(function(J){return S6e(b,J)});if(z)return{graphicalItem:T,payload:z}}else if(D==="RadialBar"){var Y=(L.data||[]).find(function(J){return LL(b,J)});if(Y)return{graphicalItem:T,payload:Y}}else if(Yw(T,A)||Jw(T,A)||bv(T,A)){var se=d8e({graphicalItem:T,activeTooltipItem:A,itemData:I.data}),ee=I.activeIndex===void 0?se:I.activeIndex;return{graphicalItem:ze(ze({},T),{},{childIndex:ee}),payload:bv(T,A)?I.data[se]:T.props.data[se]}}}return null}},{key:"render",value:function(){var b=this;if(!NP(this))return null;var S=this.props,_=S.children,A=S.className,j=S.width,E=S.height,T=S.style,L=S.compact,O=S.title,I=S.desc,D=eR(S,pDe),z=Wt(D,!1);if(L)return _e.createElement(FI,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},_e.createElement(Oj,qh({},z,{width:j,height:E,title:O,desc:I}),this.renderClipPath(),AP(_,this.renderMap)));if(this.props.accessibilityLayer){var Y,se;z.tabIndex=(Y=this.props.tabIndex)!==null&&Y!==void 0?Y:0,z.role=(se=this.props.role)!==null&&se!==void 0?se:"application",z.onKeyDown=function(J){b.accessibilityManager.keyboardEvent(J)},z.onFocus=function(){b.accessibilityManager.focus()}}var ee=this.parseEventsOfWrapper();return _e.createElement(FI,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},_e.createElement("div",qh({className:cr("recharts-wrapper",A),style:ze({position:"relative",cursor:"default",width:j,height:E},T)},ee,{ref:function(oe){b.container=oe}}),_e.createElement(Oj,qh({},z,{width:j,height:E,title:O,desc:I,style:ODe}),this.renderClipPath(),AP(_,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(F.Component);Bt(g,"displayName",r),Bt(g,"defaultProps",ze({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Bt(g,"getDerivedStateFromProps",function(x,y){var v=x.dataKey,b=x.data,S=x.children,_=x.width,A=x.height,j=x.layout,E=x.stackOffset,T=x.margin,L=y.dataStartIndex,O=y.dataEndIndex;if(y.updateId===void 0){var I=nR(x);return ze(ze(ze({},I),{},{updateId:0},h(ze(ze({props:x},I),{},{updateId:0}),y)),{},{prevDataKey:v,prevData:b,prevWidth:_,prevHeight:A,prevLayout:j,prevStackOffset:E,prevMargin:T,prevChildren:S})}if(v!==y.prevDataKey||b!==y.prevData||_!==y.prevWidth||A!==y.prevHeight||j!==y.prevLayout||E!==y.prevStackOffset||!l0(T,y.prevMargin)){var D=nR(x),z={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},Y=ze(ze({},rR(y,b,j)),{},{updateId:y.updateId+1}),se=ze(ze(ze({},D),z),Y);return ze(ze(ze({},se),h(ze({props:x},se),y)),{},{prevDataKey:v,prevData:b,prevWidth:_,prevHeight:A,prevLayout:j,prevStackOffset:E,prevMargin:T,prevChildren:S})}if(!Cj(S,y.prevChildren)){var ee,J,oe,we,xe=ws(S,Z0),k=xe&&(ee=(J=xe.props)===null||J===void 0?void 0:J.startIndex)!==null&&ee!==void 0?ee:L,M=xe&&(oe=(we=xe.props)===null||we===void 0?void 0:we.endIndex)!==null&&oe!==void 0?oe:O,B=k!==L||M!==O,U=!dr(b),Z=U&&!B?y.updateId:y.updateId+1;return ze(ze({updateId:Z},h(ze(ze({props:x},y),{},{updateId:Z,dataStartIndex:k,dataEndIndex:M}),y)),{},{prevChildren:S,dataStartIndex:k,dataEndIndex:M})}return null}),Bt(g,"renderActiveDot",function(x,y,v){var b;return F.isValidElement(x)?b=F.cloneElement(x,y):Xt(x)?b=x(y):b=_e.createElement(KE,y),_e.createElement(Ur,{className:"recharts-active-dot",key:v},b)});var m=F.forwardRef(function(y,v){return _e.createElement(g,qh({},y,{ref:v}))});return m.displayName=g.displayName,m},cp=OH({chartName:"BarChart",GraphicalChild:Qi,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:jc},{axisType:"yAxis",AxisComp:Ac}],formatAxisMap:qLe}),aT=OH({chartName:"PieChart",GraphicalChild:Vo,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Xw},{axisType:"radiusAxis",AxisComp:Gw}],formatAxisMap:LCe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const km={ASIGNADA:"#3b82f6",RECUPERADA:"#8b5cf6",CERRADA:"#6b7280",PERDIDA:"#ef4444",DETERIORO:"#f97316"},UDe=({loans:e})=>{const t=F.useMemo(()=>{const a={},i=new Date;for(let s=7;s>=0;s--){const o=new Date(i);o.setDate(o.getDate()-s*7);const c=`S${8-s}`;a[c]=0}return e.forEach(s=>{const o=new Date(s.issued_at),c=Math.floor((i.getTime()-o.getTime())/(1e3*60*60*24*7));if(c>=0&&c<8){const u=`S${8-c}`;a[u]!==void 0&&a[u]++}}),Object.entries(a).map(([s,o])=>({week:s,count:o}))},[e]),r=F.useMemo(()=>{const a=e.filter(s=>s.reason==="PERDIDA").length,i=e.filter(s=>s.reason==="DETERIORO").length;return[{name:"Perdida",value:a,color:km.PERDIDA},{name:"Deterioro",value:i,color:km.DETERIORO}].filter(s=>s.value>0)},[e]),n=F.useMemo(()=>Xu.map(a=>{const i=e.filter(s=>{var o;return((o=s.backup_cards)==null?void 0:o.inventory_terminal)===a});return{terminal:a.split(" ")[0],ASIGNADA:i.filter(s=>s.status==="ASIGNADA").length,RECUPERADA:i.filter(s=>s.status==="RECUPERADA").length,CERRADA:i.filter(s=>s.status==="CERRADA").length}}),[e]);return l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Prestamos por Semana"}),l.jsx("div",{className:"h-48",children:l.jsx(uc,{width:"100%",height:"100%",children:l.jsxs(cp,{data:t,children:[l.jsx(Pf,{strokeDasharray:"3 3",vertical:!1}),l.jsx(jc,{dataKey:"week",tick:{fontSize:11}}),l.jsx(Ac,{tick:{fontSize:11},allowDecimals:!1}),l.jsx(Oa,{}),l.jsx(Qi,{dataKey:"count",name:"Prestamos",fill:"#3b82f6",radius:[4,4,0,0]})]})})})]}),l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Motivo de Solicitud"}),l.jsx("div",{className:"h-48",children:r.length>0?l.jsx(uc,{width:"100%",height:"100%",children:l.jsxs(aT,{children:[l.jsx(Vo,{data:r,cx:"50%",cy:"50%",innerRadius:40,outerRadius:70,paddingAngle:2,dataKey:"value",label:({name:a,percent:i})=>`${a} ${(i*100).toFixed(0)}%`,labelLine:!1,children:r.map((a,i)=>l.jsx(Rc,{fill:a.color},`cell-${i}`))}),l.jsx(Oa,{})]})}):l.jsx("div",{className:"h-full flex items-center justify-center text-slate-400 text-sm",children:"Sin datos"})})]}),l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Estado por Terminal"}),l.jsx("div",{className:"h-48",children:l.jsx(uc,{width:"100%",height:"100%",children:l.jsxs(cp,{data:n,layout:"vertical",children:[l.jsx(Pf,{strokeDasharray:"3 3",horizontal:!1}),l.jsx(jc,{type:"number",tick:{fontSize:11},allowDecimals:!1}),l.jsx(Ac,{type:"category",dataKey:"terminal",tick:{fontSize:11},width:60}),l.jsx(Oa,{}),l.jsx(cc,{wrapperStyle:{fontSize:10}}),l.jsx(Qi,{dataKey:"ASIGNADA",name:"Asignada",stackId:"a",fill:km.ASIGNADA}),l.jsx(Qi,{dataKey:"RECUPERADA",name:"Recuperada",stackId:"a",fill:km.RECUPERADA}),l.jsx(Qi,{dataKey:"CERRADA",name:"Cerrada",stackId:"a",fill:km.CERRADA})]})})})]})]})},S2=e=>e.replace(/[.\-\s]/g,"").toUpperCase(),Lf=e=>{const t=S2(e);if(t.length<2)return t;const r=t.slice(0,-1),n=t.slice(-1);return`${r.replace(/\B(?=(\d{3})+(?!\d))/g,".")}-${n}`},iR=e=>{const t=S2(e);if(t.length<8||t.length>9)return!1;const r=t.slice(0,-1),n=t.slice(-1);if(!/^\d+$/.test(r))return!1;let a=0,i=2;for(let c=r.length-1;c>=0;c--)a+=parseInt(r[c])*i,i=i===7?2:i+1;const s=a%11,o=s===0?"0":s===1?"K":String(11-s);return n===o},zDe=({status:e,isOverdue:t})=>{const r="inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded-full";if(t&&e==="ASIGNADA")return l.jsxs("span",{className:`${r} bg-amber-100 text-amber-800`,children:[l.jsx(uw,{className:"w-3 h-3"}),"ATRASADA"]});const n={ASIGNADA:"bg-blue-100 text-blue-800",RECUPERADA:"bg-emerald-100 text-emerald-800",CERRADA:"bg-slate-100 text-slate-700",CANCELADA:"bg-red-100 text-red-800"};return l.jsx("span",{className:`${r} ${n[e]||"bg-slate-100 text-slate-700"}`,children:e})},qDe=({reason:e})=>{const t={PERDIDA:"bg-red-50 text-red-700",DETERIORO:"bg-orange-50 text-orange-700"};return l.jsx("span",{className:`inline-block px-2 py-0.5 text-xs font-medium rounded ${t[e]||""}`,children:e==="PERDIDA"?"Perdida":"Deterioro"})},HDe=({loans:e,onView:t,onEdit:r,onRecover:n,onCancel:a,onResendEmails:i})=>{const s=F.useMemo(()=>{const o=new Date;return e.map(c=>{const u=new Date(c.issued_at),d=Math.floor((o.getTime()-u.getTime())/(1e3*60*60*24));return{...c,daysPassed:d,isOverdue:c.status==="ASIGNADA"&&d>c.alert_after_days}})},[e]);return e.length===0?l.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:l.jsx("p",{className:"text-slate-500",children:"No se encontraron prestamos con los filtros seleccionados."})}):l.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[l.jsx("thead",{className:"bg-slate-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Trabajador"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"RUT"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Terminal"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Tarjeta"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Motivo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Entrega"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Dias"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Acciones"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:s.map(o=>{var c,u;return l.jsxs("tr",{className:`hover:bg-slate-50 ${o.isOverdue?"bg-amber-50/50":""}`,children:[l.jsxs("td",{className:"px-4 py-3 whitespace-nowrap",children:[l.jsx("p",{className:"text-sm font-medium text-slate-900",children:o.person_name}),l.jsx("p",{className:"text-xs text-slate-500",children:o.person_cargo||"-"})]}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-700",children:Lf(o.person_rut)}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-700",children:o.person_terminal}),l.jsxs("td",{className:"px-4 py-3 whitespace-nowrap",children:[l.jsx("p",{className:"text-sm font-mono text-slate-900",children:((c=o.backup_cards)==null?void 0:c.card_number)||"-"}),l.jsx("p",{className:"text-xs text-slate-500",children:(u=o.backup_cards)==null?void 0:u.inventory_terminal})]}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:l.jsx(qDe,{reason:o.reason})}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-700",children:new Date(o.issued_at).toLocaleDateString("es-CL")}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:l.jsxs("span",{className:`text-sm font-medium ${o.isOverdue?"text-amber-600":"text-slate-700"}`,children:[o.daysPassed,"d"]})}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:l.jsx(zDe,{status:o.status,isOverdue:o.isOverdue})}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[l.jsx("button",{onClick:()=>t(o),className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded",title:"Ver detalle",children:l.jsx(zpe,{className:"w-4 h-4"})}),o.status==="ASIGNADA"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>r(o),className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded",title:"Editar",children:l.jsx(ome,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>n(o),className:"p-1.5 text-slate-400 hover:text-emerald-600 hover:bg-emerald-50 rounded",title:"Marcar recuperada",children:l.jsx(WB,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>a(o),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Cancelar",children:l.jsx(bc,{className:"w-4 h-4"})})]}),l.jsx("button",{onClick:()=>i(o),className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded",title:"Reenviar correos",children:l.jsx(qB,{className:"w-4 h-4"})})]})})]},o.id)})})]})})})},WDe=async(e,t)=>{let r=Ee.from("backup_cards").select("*").order("card_number",{ascending:!0});e&&e!=="TODAS"&&(r=r.eq("status",e)),t&&(r=r.eq("inventory_terminal",t));const{data:n,error:a}=await r;if(a)throw a;return n},VDe=async e=>{let t=Ee.from("backup_cards").select("*").eq("status","LIBRE").order("card_number");e&&(t=t.eq("inventory_terminal",e));const{data:r,error:n}=await t;if(n)throw n;return r},GDe=async e=>{const{data:t,error:r}=await Ee.from("backup_cards").insert({card_number:e.card_number,inventory_terminal:e.inventory_terminal,notes:e.notes||null,status:"LIBRE"}).select().single();if(r)throw r;return t},KDe=async e=>{const{error:t}=await Ee.from("backup_cards").update({status:"INACTIVA"}).eq("id",e);if(t)throw t},XDe=async e=>{let t=Ee.from("backup_loans").select("*, backup_cards(*)").order("issued_at",{ascending:!1});e&&(e.search&&(t=t.or(`person_rut.ilike.%${e.search}%,person_name.ilike.%${e.search}%`)),e.terminal&&(t=t.eq("person_terminal",e.terminal)),e.status&&e.status!=="TODAS"&&(t=t.eq("status",e.status)),e.reason&&e.reason!=="TODAS"&&(t=t.eq("reason",e.reason)),e.dateFrom&&(t=t.gte("issued_at",e.dateFrom)),e.dateTo&&(t=t.lte("issued_at",e.dateTo+"T23:59:59")));const{data:r,error:n}=await t;if(n)throw n;return r},YDe=async e=>{const{data:t,error:r}=await Ee.from("backup_loans").insert({card_id:e.card_id,person_rut:e.person_rut,person_name:e.person_name,person_cargo:e.person_cargo||null,person_terminal:e.person_terminal,person_turno:e.person_turno||null,person_horario:e.person_horario||null,person_contacto:e.person_contacto||null,boss_email:e.worker_email||null,reason:e.reason,requested_at:e.requested_at,discount_amount:e.discount_amount,discount_applied:e.discount_applied,created_by_supervisor:e.created_by_supervisor,status:"ASIGNADA"}).select("*, backup_cards(*)").single();if(r)throw r;const{error:n}=await Ee.from("backup_cards").update({status:"ASIGNADA"}).eq("id",e.card_id);if(n)throw n;return t},JDe=async(e,t,r)=>{const{data:n,error:a}=await Ee.from("backup_loans").select("card_id").eq("id",e).single();if(a)throw a;const{error:i}=await Ee.from("backup_loans").update({status:"CERRADA",recovered_at:t,closed_at:new Date().toISOString()}).eq("id",e);if(i)throw i;const{error:s}=await Ee.from("backup_cards").update({status:"LIBRE"}).eq("id",n.card_id);if(s)throw s},QDe=async(e,t)=>{const{data:r,error:n}=await Ee.from("backup_loans").select("card_id").eq("id",e).single();if(n)throw n;const{error:a}=await Ee.from("backup_loans").update({status:"CANCELADA",cancel_reason:t,closed_at:new Date().toISOString()}).eq("id",e);if(a)throw a;const{error:i}=await Ee.from("backup_cards").update({status:"LIBRE"}).eq("id",r.card_id);if(i)throw i},ZDe=async e=>{const{error:t}=await Ee.from("backup_loans").update({emails_sent_at:new Date().toISOString()}).eq("id",e);if(t)throw t},PH=async()=>{const{data:e,error:t}=await Ee.from("backup_email_settings").select("*").order("scope_type",{ascending:!1});if(t)throw t;return e},e7e=async e=>{const{data:t,error:r}=await Ee.from("backup_email_settings").upsert(e,{onConflict:"scope_type,scope_code"}).select().single();if(r)throw r;return t},t7e=async()=>{const{data:e,error:t}=await Ee.from("backup_cards").select("inventory_terminal, status");if(t)throw t;const r={"El Roble":0,"La Reina":0,"Maria Angelica":0};e==null||e.forEach(h=>{if(h.status==="LIBRE"){const g=h.inventory_terminal;Xu.includes(g)&&r[g]++}});const{data:n,error:a}=await Ee.from("backup_loans").select("id, issued_at, alert_after_days, discount_amount, discount_applied").eq("status","ASIGNADA");if(a)throw a;const i=new Date;let s=0,o=0;n==null||n.forEach(h=>{const g=new Date(h.issued_at);Math.floor((i.getTime()-g.getTime())/(1e3*60*60*24))>h.alert_after_days&&s++,h.discount_applied&&(o+=h.discount_amount)});const c=new Date;c.setDate(c.getDate()-30);const{data:u,error:d}=await Ee.from("backup_loans").select("issued_at, recovered_at, discount_amount, discount_applied").in("status",["RECUPERADA","CERRADA"]).gte("closed_at",c.toISOString());if(d)throw d;let f=0,p=0;return u==null||u.forEach(h=>{if(h.recovered_at){const g=new Date(h.issued_at),m=new Date(h.recovered_at),x=Math.floor((m.getTime()-g.getTime())/(1e3*60*60*24));f+=x,p++}h.discount_applied&&(o+=h.discount_amount)}),{availableByTerminal:r,activeLoans:(n==null?void 0:n.length)||0,overdueLoans:s,avgReturnDays:p>0?Math.round(f/p):0,totalDiscounts:o}},Si={user:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="9" cy="5" r="3.5" stroke="#64748b" stroke-width="1.5"/>
        <path d="M2 16C2 12.686 5.13401 10 9 10C12.866 10 16 12.686 16 16" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,id:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="1.5" y="3.5" width="15" height="11" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <circle cx="6" cy="8" r="1.5" stroke="#64748b" stroke-width="1"/>
        <path d="M4 12C4 10.8954 4.89543 10 6 10C7.10457 10 8 10.8954 8 12" stroke="#64748b" stroke-width="1"/>
        <path d="M10.5 7.5H14.5M10.5 10H13" stroke="#64748b" stroke-width="1.2" stroke-linecap="round"/>
    </svg>`,building:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M2 16V3.5C2 3.22386 2.22386 3 2.5 3H9.5C9.77614 3 10 3.22386 10 3.5V16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M10 7H14.5C14.7761 7 15 7.22386 15 7.5V16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M5 6H7M5 9H7M5 12H7M12 10H13M12 13H13" stroke="#64748b" stroke-width="1.2" stroke-linecap="round"/>
        <path d="M1 16H17" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,calendar:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="2" y="3.5" width="14" height="12" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <path d="M2 7H16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M5.5 1.5V4.5M12.5 1.5V4.5" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,card:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="1" y="3" width="16" height="12" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <path d="M1 7H17" stroke="#64748b" stroke-width="1.5"/>
        <path d="M4 11H8" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,warning:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M9 6V10M9 12.5V13" stroke="#f59e0b" stroke-width="1.5" stroke-linecap="round"/>
        <path d="M3 15L9 3L15 15H3Z" stroke="#f59e0b" stroke-width="1.5" stroke-linejoin="round"/>
    </svg>`,money:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="9" cy="9" r="7" stroke="#64748b" stroke-width="1.5"/>
        <path d="M9 5V13M11 7H7.5C6.67157 7 6 7.67157 6 8.5C6 9.32843 6.67157 10 7.5 10H10.5C11.3284 10 12 10.6716 12 11.5C12 12.3284 11.3284 13 10.5 13H6" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,supervisor:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="9" cy="6" r="3" stroke="#64748b" stroke-width="1.5"/>
        <path d="M3 16C3 13.2386 5.68629 11 9 11C12.3137 11 15 13.2386 15 16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M9 3L10 1.5L11 3" stroke="#f59e0b" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`},Ni=(e,t,r,n=!1)=>`
    <tr>
        <td style="padding: 14px 16px; border-bottom: 1px solid #e2e8f0; width: 40%; vertical-align: middle;">
            <table role="presentation" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="padding-right: 12px; vertical-align: middle;">${e}</td>
                    <td style="font-size: 11px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">${t}</td>
                </tr>
            </table>
        </td>
        <td style="padding: 14px 16px; border-bottom: 1px solid #e2e8f0; font-size: 14px; font-weight: ${n?"700":"500"}; color: ${n?"#0f172a":"#334155"}; text-align: right;">${r}</td>
    </tr>
`,r7e=e=>new Date(e).toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),n7e=async(e,t,r,n)=>{var f;const a=((f=e.backup_cards)==null?void 0:f.card_number)||"N/A",i=e.person_terminal,s=e.reason==="PERDIDA"?"Prdida de Credencial":"Deterioro de Credencial",o=r7e(e.issued_at),c=n?[n]:void 0,u=e.reason==="PERDIDA"?"#ef4444":"#f59e0b",d=e.reason==="PERDIDA"?"#fef2f2":"#fffbeb";try{const p=`Solicitud Nueva Credencial - ${e.person_name}`,h=`
            <!-- Status Banner -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td style="background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 12px; padding: 24px; text-align: center;">
                        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                            <tr>
                                <td align="center" style="padding-bottom: 8px;">
                                    <svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="28" cy="28" r="26" fill="#dbeafe" stroke="#3b82f6" stroke-width="3"/>
                                        <rect x="18" y="20" width="20" height="16" rx="2" stroke="#2563eb" stroke-width="2.5"/>
                                        <circle cx="24" cy="27" r="3" stroke="#2563eb" stroke-width="2"/>
                                        <path d="M20 33C20 31 21.5 29 24 29C26.5 29 28 31 28 33" stroke="#2563eb" stroke-width="2"/>
                                        <path d="M31 25H35M31 29H34" stroke="#2563eb" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                </td>
                            </tr>
                            <tr>
                                <td align="center">
                                    <span style="font-size: 11px; font-weight: 700; color: #1e40af; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 4px;">Accin Requerida</span>
                                    <span style="font-size: 20px; font-weight: 800; color: #1d4ed8; letter-spacing: -0.5px;">SOLICITUD DE NUEVA CREDENCIAL</span>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
            
            <!-- Reason Badge -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td align="center">
                        <span style="display: inline-block; padding: 8px 20px; background: ${d}; border: 1px solid ${u}; border-radius: 100px; color: ${u}; font-size: 12px; font-weight: 700; letter-spacing: 0.5px; text-transform: uppercase;">${s}</span>
                    </td>
                </tr>
            </table>
            
            <!-- Worker Data Section -->
            <p style="margin: 0 0 12px 0; font-size: 12px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">Datos del Trabajador</p>
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate; margin-bottom: 24px;">
                ${Ni(Si.user,"Nombre",e.person_name,!0)}
                ${Ni(Si.id,"RUT",e.person_rut)}
                ${Ni(Si.building,"Terminal",i)}
                ${Ni(Si.id,"Cargo",e.person_cargo||"No especificado")}
            </table>
            
            <!-- Backup Info Section -->
            <p style="margin: 0 0 12px 0; font-size: 12px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">Informacin del Respaldo</p>
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate; margin-bottom: 24px;">
                ${Ni(Si.card,"Tarjeta Asignada",`N ${a}`,!0)}
                ${Ni(Si.calendar,"Fecha Solicitud",e.requested_at)}
                ${Ni(Si.supervisor,"Supervisor Entrega",e.created_by_supervisor)}
            </table>
            
            <!-- Action Message -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 16px;">
                <tr>
                    <td style="padding: 20px; background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 12px;">
                        <p style="margin: 0; font-size: 14px; color: #166534; font-weight: 600; text-align: center;">
                             Por favor proceder con la emisin de una nueva credencial para este trabajador.
                        </p>
                    </td>
                </tr>
            </table>
            
            ${n?`
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="padding: 12px 16px; background: #fef3c7; border: 1px solid #fde68a; border-radius: 8px;">
                        <p style="margin: 0; font-size: 13px; color: #92400e; font-weight: 500;">
                             <strong>Documento adjunto:</strong> Autorizacin de descuento firmada
                        </p>
                    </td>
                </tr>
            </table>
            `:""}
        `.trim();await xl.sendEmail({audience:"manual",manualRecipients:[t],cc:r?r.split(",").map(x=>x.trim()).filter(Boolean):void 0,subject:p,body:h,attachments:c,module:"credenciales"});const g=`Notificacin Credencial Respaldo - ${e.person_name}`,m=`
            <!-- Status Banner -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td style="background: #fef3c7; border: 1px solid #fde68a; border-radius: 12px; padding: 24px; text-align: center;">
                        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                            <tr>
                                <td align="center" style="padding-bottom: 8px;">
                                    <svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="28" cy="28" r="26" fill="#fef9c3" stroke="#eab308" stroke-width="3"/>
                                        <path d="M28 18V32M28 36V38" stroke="#ca8a04" stroke-width="4" stroke-linecap="round"/>
                                    </svg>
                                </td>
                            </tr>
                            <tr>
                                <td align="center">
                                    <span style="font-size: 11px; font-weight: 700; color: #92400e; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 4px;">Notificacin Importante</span>
                                    <span style="font-size: 18px; font-weight: 800; color: #b45309; letter-spacing: -0.5px;">CREDENCIAL DE RESPALDO ASIGNADA</span>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
            
            <!-- Intro Message -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td style="padding: 16px 20px; background: #f8fafc; border-radius: 12px;">
                        <p style="margin: 0; font-size: 14px; color: #475569; line-height: 1.6;">
                            Se le informa que el trabajador a su cargo <strong style="color: #0f172a;">${e.person_name}</strong> utilizar una tarjeta de respaldo mientras se gestiona una nueva credencial.
                        </p>
                    </td>
                </tr>
            </table>
            
            <!-- Worker Data Section -->
            <p style="margin: 0 0 12px 0; font-size: 12px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">Datos del Trabajador</p>
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate; margin-bottom: 24px;">
                ${Ni(Si.user,"Nombre",e.person_name,!0)}
                ${Ni(Si.id,"RUT",e.person_rut)}
                ${Ni(Si.building,"Terminal",i)}
                ${Ni(Si.id,"Cargo",e.person_cargo||"No especificado")}
            </table>
            
            <!-- Backup Info Section -->
            <p style="margin: 0 0 12px 0; font-size: 12px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">Informacin del Respaldo</p>
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate; margin-bottom: 24px;">
                ${Ni(Si.card,"Tarjeta Asignada",`N ${a}`,!0)}
                ${Ni(Si.warning,"Motivo",s)}
                ${Ni(Si.calendar,"Fecha de Entrega",o)}
                ${e.discount_applied?Ni(Si.money,"Descuento Aplicado",`$${e.discount_amount.toLocaleString("es-CL")} (1 cuota)`,!0):""}
            </table>
            
            <!-- Important Notice -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 16px;">
                <tr>
                    <td style="padding: 20px; background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 12px;">
                        <p style="margin: 0; font-size: 14px; color: #1e40af; font-weight: 500; text-align: center;">
                             Una vez que el trabajador reciba su nueva credencial, deber devolver la tarjeta de respaldo.
                        </p>
                    </td>
                </tr>
            </table>
            
            ${n?`
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td style="padding: 12px 16px; background: #fef3c7; border: 1px solid #fde68a; border-radius: 8px;">
                        <p style="margin: 0; font-size: 13px; color: #92400e; font-weight: 500;">
                             <strong>Documento adjunto:</strong> Autorizacin de descuento firmada
                        </p>
                    </td>
                </tr>
            </table>
            `:""}
            
            <!-- Signature -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="padding-top: 16px; border-top: 1px solid #e2e8f0;">
                        <p style="margin: 0; font-size: 14px; color: #64748b;">Saludos cordiales,</p>
                        <p style="margin: 4px 0 0 0; font-size: 14px; font-weight: 700; color: #0f172a;">Gestin de Personal</p>
                    </td>
                </tr>
            </table>
        `.trim();return e.boss_email&&await xl.sendEmail({audience:"manual",manualRecipients:[e.boss_email],subject:g,body:m,module:"credenciales"}),await ZDe(e.id),{success:!0}}catch(p){return console.error("Error sending backup emails:",p),{success:!1,error:p instanceof Error?p.message:"Error desconocido al enviar correos"}}},a7e=({isOpen:e,onClose:t,onSubmit:r,isLoading:n,supervisorName:a})=>{const i=F.useRef(null),[s,o]=F.useState({person_rut:"",person_name:"",person_cargo:"",person_terminal:"EL_ROBLE",person_turno:"",person_horario:"",person_contacto:"",worker_email:"",reason:"PERDIDA",requested_at:new Date().toISOString().split("T")[0],card_id:"",discount_applied:!0,discount_amount:5e3,send_emails:!0,created_by_supervisor:a}),[c,u]=F.useState(""),[d,f]=F.useState(""),{data:p=[]}=zt({queryKey:["backup-cards-available",c],queryFn:()=>VDe(c||void 0),enabled:e}),h=async()=>{const x=S2(s.person_rut);if(!x)return;if(!iR(x)){f("RUT invalido");return}f("");const{data:y}=await Ee.from("staff").select("nombre, cargo, terminal_code, turno, horario, contacto").eq("rut",x).single();o(y?v=>({...v,person_rut:Lf(x),person_name:y.nombre,person_cargo:y.cargo||"",person_terminal:y.terminal_code||"EL_ROBLE",person_turno:y.turno||"",person_horario:y.horario||"",person_contacto:y.contacto||""}):v=>({...v,person_rut:Lf(x)}))},g=async x=>{if(x.preventDefault(),!iR(S2(s.person_rut))){f("RUT invalido");return}await r(s,m)},m=()=>{const x=window.open("","_blank");if(x){const y=new Date().toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"});x.document.write(`
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autorizacin de Descuento - ${s.person_name||"RBU"}</title>
    <style>
        @page { size: letter; margin: 15mm 20mm; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: Arial, Helvetica, sans-serif;
            background-color: white;
            padding: 0;
            color: #000;
            font-size: 12px;
            line-height: 1.4;
        }

        .page {
            width: 100%;
            max-width: 210mm;
            margin: 0 auto;
        }

        /* Header Styles */
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 5px;
            padding-bottom: 5px;
            border-bottom: 3px solid black;
        }

        /* Logo RBU con camion CSS */
        .logo-container {
            position: relative;
            width: 150px;
            height: 50px;
        }
        .truck-body {
            border: 4px solid #003399;
            border-radius: 8px;
            width: 120px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            top: 0;
            left: 0;
            background: white;
            z-index: 2;
        }
        .truck-cab {
            position: absolute;
            top: 5px;
            right: 15px;
            width: 25px;
            height: 35px;
            border-top: 4px solid #003399;
            border-right: 4px solid #003399;
            border-radius: 0 5px 0 0;
        }
        .logo-text {
            color: #cc0000;
            font-weight: 900;
            font-size: 32px;
            font-family: 'Arial Black', Arial, sans-serif;
            letter-spacing: -2px;
        }
        .wheel {
            width: 12px;
            height: 12px;
            border: 4px solid #003399;
            border-radius: 50%;
            position: absolute;
            bottom: -5px;
            background: white;
            z-index: 3;
        }
        .w1 { left: 20px; }
        .w2 { left: 90px; }

        .rbu-santiago {
            color: #cc0000;
            font-weight: bold;
            font-size: 14px;
        }

        .title-bar {
            background-color: black;
            color: white;
            text-align: center;
            padding: 8px 0;
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 25px;
        }

        /* Form Fields */
        .field-row {
            display: flex;
            margin-bottom: 20px;
            align-items: flex-end;
        }
        
        .field-label {
            font-weight: bold;
            font-size: 11px;
            white-space: nowrap;
            margin-right: 10px;
        }

        .field-line {
            border-bottom: 2px solid black;
            flex-grow: 1;
            min-height: 18px;
            padding-left: 5px;
            font-size: 12px;
        }

        .rut-row {
            display: flex;
            justify-content: space-between;
        }
        
        .rut-container {
            display: flex;
            width: 38%;
            align-items: flex-end;
        }
        
        .cargo-container {
            display: flex;
            width: 55%;
            align-items: flex-end;
        }

        /* Authorization Text */
        .auth-text {
            text-align: center;
            font-weight: bold;
            margin: 25px 0;
            font-size: 13px;
            letter-spacing: 0.5px;
        }

        .amount-row {
            display: flex;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 12px;
            gap: 20px;
        }

        .concept-row {
            margin-left: 30px;
            margin-bottom: 5px;
            font-size: 13px;
        }
        .desc-small {
            font-size: 10px;
            margin-left: 30px;
            margin-bottom: 18px;
            color: #555;
        }

        /* Right aligned details */
        .details-right {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            margin-right: 20px;
        }
        
        .detail-item {
            display: flex;
            align-items: flex-end;
            margin-bottom: 8px;
            width: 280px;
            justify-content: flex-end;
        }
        
        .detail-item label {
            font-size: 11px;
            margin-right: 10px;
        }
        
        .detail-value {
            border-bottom: 2px solid black;
            width: 110px;
            text-align: right;
            font-weight: bold;
            font-size: 14px;
            padding-bottom: 2px;
            padding-right: 5px;
        }

        /* Signature & Date */
        .sig-date-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-top: 30px;
            margin-bottom: 10px;
            font-style: italic;
            font-size: 11px;
            font-weight: bold;
        }
        .date-val {
            font-size: 12px;
            font-style: normal;
        }

        .signature-line {
            border-bottom: 2px solid black;
            width: 200px;
            margin-top: 40px;
        }

        .legal-text {
            font-size: 9px;
            text-align: justify;
            line-height: 1.3;
            margin: 15px 0;
            padding-top: 10px;
            border-top: 1px solid #ccc;
        }

        /* Observations Box */
        .obs-header {
            background-color: #333;
            color: white;
            font-weight: bold;
            text-align: center;
            font-size: 11px;
            padding: 4px;
            border: 2px solid black;
            border-bottom: none;
        }
        .obs-box {
            border: 2px solid black;
            height: 50px;
            margin-bottom: 30px;
        }

        /* Footer */
        .footer-line {
            border-top: 3px solid black;
            padding-top: 8px;
            text-align: center;
            font-size: 10px;
            font-weight: bold;
            margin-top: 20px;
        }
        .company-name {
            text-align: right;
            font-weight: bold;
            margin-top: 15px;
            font-size: 11px;
            border-bottom: 2px solid black;
            display: inline-block;
            float: right;
            padding-bottom: 2px;
            text-decoration: underline;
        }

        /* Bottom Detail Section */
        .bottom-detail-title {
            text-align: center;
            font-style: italic;
            font-weight: bold;
            font-size: 14px;
            margin-top: 30px;
            margin-bottom: 10px;
            clear: both;
        }
        
        .bottom-table {
            width: 100%;
            font-size: 11px;
            overflow: hidden;
        }
        .bt-left { 
            float: left; 
            font-weight: bold;
        }
        .bt-right { 
            float: right; 
            text-align: center;
        }
        .costo-header {
            font-weight: bold;
            font-size: 10px;
            margin-bottom: 3px;
            color: #555;
        }

        @media print {
            body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
        }
    </style>
</head>
<body>

    <div class="page">
        <div class="header-top">
            <div class="logo-container">
                <div class="truck-cab"></div>
                <div class="truck-body">
                    <span class="logo-text">RBU</span>
                </div>
                <div class="wheel w1"></div>
                <div class="wheel w2"></div>
            </div>
            <div class="rbu-santiago">RBU Santiago.</div>
        </div>

        <div class="title-bar">
            Autorizacin de Descuento
        </div>

        <div class="field-row">
            <span class="field-label">NOMBRE DEL<br>TRABAJADOR:</span>
            <div class="field-line">${s.person_name||""}</div>
        </div>

        <div class="field-row rut-row">
            <div class="rut-container">
                <span class="field-label">RUT :</span>
                <div class="field-line">${s.person_rut||""}</div>
            </div>
            <div class="cargo-container">
                <span class="field-label">Cargo desempeado:</span>
                <div class="field-line">${s.person_cargo||""}</div>
            </div>
        </div>

        <div class="auth-text">
            EL TRABAJADOR INDIVIDUALIZADO AUTORIZA EN ESTE ACTO
        </div>

        <div class="amount-row">
            <span>EL DESCUENTO DE:</span>
            <span>$</span>
            <span>${s.discount_amount.toLocaleString("es-CL")}</span>
        </div>

        <div class="concept-row">
            <strong>POR CONCEPTO DE:</strong> &nbsp; ${s.reason==="PERDIDA"?"Prdida Credencial":"Deterioro Credencial"}
        </div>
        <div class="desc-small">Descripcin : Tarjeta de acceso vehicular</div>

        <div class="details-right">
            <div class="detail-item">
                <label>A descontar en:</label>
                <div class="detail-value">1 Cuota</div>
            </div>
            <div class="detail-item">
                <label>A contar de:</label>
                <div class="detail-value" style="font-style: italic; font-size: 12px;">Mes en curso</div>
            </div>
            <div class="detail-item">
                <label>Valor de cada cuota:</label>
                <div class="detail-value">$ ${s.discount_amount.toLocaleString("es-CL")}</div>
            </div>
        </div>

        <div class="sig-date-row">
            <div>
                <span>Firma y Rut del trabajador</span>
                <div class="signature-line"></div>
            </div>
            <span>Fecha : &nbsp; <span class="date-val"><strong>${y}</strong></span></span>
        </div>

        <div class="legal-text">
            El trabajador, mediante el presente instrumento, otorga mandato expreso a REDBUS URBANO S.A. para que descuente de sus remuneraciones en las cuotas y plazos indicados la suma indicada en este acto. Asimismo faculta expresamente a REDBUS URBANO S.A., para que en el evento de que por cualquier causa se pusiese trmino al contrato de trabajo, descuente el total del saldo adeudado de las indemnizaciones a que tenga derecho y/o otros emolumentos que pudiere tener derecho al trmino de la relacin laboral.
        </div>

        <div class="obs-header">Observaciones</div>
        <div class="obs-box"></div>

        <div class="footer-line">
            Av. El Salto 4651, Huechuraba, Santiago.<br>
            Fono: (56 2) 4881800 &nbsp;&nbsp; Fax: (56 2) 4881818
        </div>

        <div style="overflow: hidden; margin-top: 15px;">
            <div class="company-name">REDBUS URBANO S.A.</div>
        </div>

        <div class="bottom-detail-title">Detalle Descuento</div>
        
        <div class="bottom-table">
            <span class="bt-left">${s.reason==="PERDIDA"?"Prdida Credencial":"Deterioro Credencial"}</span>
            <div class="bt-right">
                <div class="costo-header">COSTO</div>
                <div><strong>$${s.discount_amount.toLocaleString("es-CL")}</strong></div>
            </div>
        </div>

    </div>

</body>
</html>
            `),x.document.close(),setTimeout(()=>x.print(),300)}};return F.useEffect(()=>{e&&(o({person_rut:"",person_name:"",person_cargo:"",person_terminal:"EL_ROBLE",person_turno:"",person_horario:"",person_contacto:"",worker_email:"",reason:"PERDIDA",requested_at:new Date().toISOString().split("T")[0],card_id:"",discount_applied:!0,discount_amount:5e3,send_emails:!0,created_by_supervisor:a}),f(""),u(""))},[e,a]),e?l.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[l.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:t}),l.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:l.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between z-10",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Nuevo Prestamo de Respaldo"}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg",children:l.jsx(bc,{className:"w-5 h-5 text-slate-500"})})]}),l.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Datos del Trabajador"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"RUT"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",className:`input pr-10 ${d?"border-red-500":""}`,value:s.person_rut,onChange:x=>o(y=>({...y,person_rut:x.target.value})),onBlur:h,placeholder:"12.345.678-9",required:!0}),l.jsx(tme,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"})]}),d&&l.jsx("p",{className:"text-xs text-red-500 mt-1",children:d})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nombre"}),l.jsx("input",{type:"text",className:"input",value:s.person_name,onChange:x=>o(y=>({...y,person_name:x.target.value})),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Cargo"}),l.jsx("input",{type:"text",className:"input",value:s.person_cargo,onChange:x=>o(y=>({...y,person_cargo:x.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Terminal"}),l.jsx("select",{className:"input",value:s.person_terminal,onChange:x=>o(y=>({...y,person_terminal:x.target.value})),required:!0,children:ns.map(x=>l.jsx("option",{value:x.value,children:x.label},x.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Turno"}),l.jsx("input",{type:"text",className:"input",value:s.person_turno,onChange:x=>o(y=>({...y,person_turno:x.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Horario"}),l.jsx("input",{type:"text",className:"input",value:s.person_horario,onChange:x=>o(y=>({...y,person_horario:x.target.value})),placeholder:"08:00-18:00"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contacto"}),l.jsx("input",{type:"text",className:"input",value:s.person_contacto,onChange:x=>o(y=>({...y,person_contacto:x.target.value}))})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:["Correo ",l.jsx("span",{className:"text-slate-400 font-normal",children:"(opcional)"})]}),l.jsx("input",{type:"email",className:"input",value:s.worker_email,onChange:x=>o(y=>({...y,worker_email:x.target.value})),placeholder:"Para notificar cuando llegue su credencial"})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Solicitud"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Motivo"}),l.jsx("select",{className:"input",value:s.reason,onChange:x=>o(y=>({...y,reason:x.target.value})),required:!0,children:VB.map(x=>l.jsx("option",{value:x.value,children:x.label},x.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Fecha Solicitud"}),l.jsx("input",{type:"date",className:"input",value:s.requested_at,onChange:x=>o(y=>({...y,requested_at:x.target.value})),required:!0})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Tarjeta de Respaldo"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Terminal de Inventario"}),l.jsxs("select",{className:"input",value:c,onChange:x=>{u(x.target.value),o(y=>({...y,card_id:""}))},children:[l.jsx("option",{value:"",children:"Todos"}),Xu.map(x=>l.jsx("option",{value:x,children:x},x))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Tarjeta Disponible"}),l.jsxs("select",{className:"input",value:s.card_id,onChange:x=>o(y=>({...y,card_id:x.target.value})),required:!0,children:[l.jsx("option",{value:"",children:"Seleccionar tarjeta..."}),p.map(x=>l.jsxs("option",{value:x.id,children:[x.card_number," (",x.inventory_terminal,")"]},x.id))]}),p.length===0&&l.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"No hay tarjetas disponibles"})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Descuento"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:s.discount_applied,onChange:x=>o(y=>({...y,discount_applied:x.target.checked})),className:"w-4 h-4 rounded border-slate-300"}),l.jsxs("span",{className:"text-sm text-slate-700",children:["Aplicar descuento de $",s.discount_amount.toLocaleString("es-CL")," (1 cuota)"]})]}),s.discount_applied&&l.jsxs("span",{className:"text-xs text-slate-500 italic flex items-center gap-1",children:[l.jsx(Ype,{className:"w-3 h-3"}),"Se imprimir automticamente al crear"]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Notificaciones"}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:s.send_emails,onChange:x=>o(y=>({...y,send_emails:x.target.checked})),className:"w-4 h-4 rounded border-slate-300"}),l.jsx("span",{className:"text-sm text-slate-700",children:"Enviar correos al crear"})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[l.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n||!s.card_id,children:n?"Guardando...":"Crear Prestamo"})]})]}),l.jsx("div",{ref:i,className:"hidden"})]})})]}):null},i7e=({isOpen:e,loan:t,onClose:r})=>{var i,s;if(!e||!t)return null;const n=o=>o?new Date(o).toLocaleDateString("es-CL",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",a=Math.floor((new Date().getTime()-new Date(t.issued_at).getTime())/(1e3*60*60*24));return l.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[l.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:r}),l.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:l.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between z-10",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Detalle del Prestamo"}),l.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg",children:l.jsx(bc,{className:"w-5 h-5 text-slate-500"})})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[l.jsx(gme,{className:"w-4 h-4"}),"Trabajador"]}),l.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Nombre:"}),l.jsx("span",{className:"text-sm font-medium text-slate-900",children:t.person_name})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"RUT:"}),l.jsx("span",{className:"text-sm font-medium text-slate-900",children:Lf(t.person_rut)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Cargo:"}),l.jsx("span",{className:"text-sm text-slate-900",children:t.person_cargo||"-"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Terminal:"}),l.jsx("span",{className:"text-sm text-slate-900",children:t.person_terminal})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Turno:"}),l.jsx("span",{className:"text-sm text-slate-900",children:t.person_turno||"-"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Horario:"}),l.jsx("span",{className:"text-sm text-slate-900",children:t.person_horario||"-"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Contacto:"}),l.jsx("span",{className:"text-sm text-slate-900",children:t.person_contacto||"-"})]})]})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[l.jsx(Wg,{className:"w-4 h-4"}),"Tarjeta de Respaldo"]}),l.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Numero:"}),l.jsx("span",{className:"text-sm font-mono font-medium text-slate-900",children:((i=t.backup_cards)==null?void 0:i.card_number)||"-"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Terminal Inventario:"}),l.jsx("span",{className:"text-sm text-slate-900",children:((s=t.backup_cards)==null?void 0:s.inventory_terminal)||"-"})]})]})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[l.jsx(Lpe,{className:"w-4 h-4"}),"Solicitud"]}),l.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Motivo:"}),l.jsx("span",{className:`text-sm font-medium px-2 py-0.5 rounded ${t.reason==="PERDIDA"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:t.reason==="PERDIDA"?"Perdida":"Deterioro"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Fecha Solicitud:"}),l.jsx("span",{className:"text-sm text-slate-900",children:t.requested_at})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Fecha Entrega:"}),l.jsx("span",{className:"text-sm text-slate-900",children:n(t.issued_at)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Dias Transcurridos:"}),l.jsxs("span",{className:`text-sm font-medium ${a>t.alert_after_days?"text-amber-600":"text-slate-900"}`,children:[a," dias"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Estado:"}),l.jsx("span",{className:`text-sm font-medium px-2 py-0.5 rounded ${t.status==="ASIGNADA"?"bg-blue-100 text-blue-700":t.status==="CERRADA"?"bg-slate-100 text-slate-700":t.status==="CANCELADA"?"bg-red-100 text-red-700":"bg-emerald-100 text-emerald-700"}`,children:t.status})]}),t.recovered_at&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Recuperada:"}),l.jsx("span",{className:"text-sm text-slate-900",children:n(t.recovered_at)})]}),t.cancel_reason&&l.jsxs("div",{className:"pt-2 border-t border-slate-200",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Motivo Cancelacion:"}),l.jsx("p",{className:"text-sm text-slate-900 mt-1",children:t.cancel_reason})]})]})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[l.jsx(zB,{className:"w-4 h-4"}),"Descuento"]}),l.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Aplicado:"}),l.jsx("span",{className:`text-sm font-medium ${t.discount_applied?"text-emerald-600":"text-slate-500"}`,children:t.discount_applied?"Si":"No"})]}),t.discount_applied&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Monto:"}),l.jsxs("span",{className:"text-sm font-medium text-slate-900",children:["$",t.discount_amount.toLocaleString("es-CL")]})]})]})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[l.jsx(UB,{className:"w-4 h-4"}),"Auditoria"]}),l.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Creado por:"}),l.jsx("span",{className:"text-sm text-slate-900",children:t.created_by_supervisor})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Creado:"}),l.jsx("span",{className:"text-sm text-slate-900",children:n(t.created_at)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Correo Trabajador:"}),l.jsx("span",{className:"text-sm text-slate-900",children:t.boss_email||"-"})]}),t.emails_sent_at&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Emails Enviados:"}),l.jsx("span",{className:"text-sm text-slate-900",children:n(t.emails_sent_at)})]})]})]})]}),l.jsx("div",{className:"border-t border-slate-200 px-6 py-4 flex justify-end",children:l.jsx("button",{onClick:r,className:"btn btn-secondary",children:"Cerrar"})})]})})]})},s7e=({isOpen:e,loan:t,onClose:r,onSubmit:n,isLoading:a})=>{var d;const[i,s]=F.useState(new Date().toISOString().split("T")[0]),[o,c]=F.useState(""),u=async f=>{f.preventDefault(),t&&(await n(t.id,i,o),c(""))};return!e||!t?null:l.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[l.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:r}),l.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:l.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-md",children:[l.jsxs("div",{className:"border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(WB,{className:"w-5 h-5 text-emerald-600"}),l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Marcar como Recuperada"})]}),l.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg",children:l.jsx(bc,{className:"w-5 h-5 text-slate-500"})})]}),l.jsxs("form",{onSubmit:u,className:"p-6 space-y-4",children:[l.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[l.jsxs("p",{className:"text-sm text-slate-600",children:[l.jsx("span",{className:"font-medium",children:"Trabajador:"})," ",t.person_name]}),l.jsxs("p",{className:"text-sm text-slate-600",children:[l.jsx("span",{className:"font-medium",children:"RUT:"})," ",Lf(t.person_rut)]}),l.jsxs("p",{className:"text-sm text-slate-600",children:[l.jsx("span",{className:"font-medium",children:"Tarjeta:"})," ",(d=t.backup_cards)==null?void 0:d.card_number]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Fecha de Devolucion"}),l.jsx("input",{type:"date",className:"input",value:i,onChange:f=>s(f.target.value),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Observacion (opcional)"}),l.jsx("textarea",{className:"input min-h-[80px]",value:o,onChange:f=>c(f.target.value),placeholder:"Notas adicionales..."})]}),l.jsx("p",{className:"text-sm text-slate-500",children:"Al confirmar, la tarjeta sera liberada y quedara disponible para nuevos prestamos."}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[l.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:a,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary bg-emerald-600 hover:bg-emerald-700",disabled:a,children:a?"Procesando...":"Confirmar Devolucion"})]})]})]})})]})},o7e=({isOpen:e,loan:t,onClose:r,onSubmit:n,isLoading:a})=>{var c;const[i,s]=F.useState(""),o=async u=>{u.preventDefault(),!(!t||!i.trim())&&(await n(t.id,i.trim()),s(""))};return!e||!t?null:l.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[l.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:r}),l.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:l.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-md",children:[l.jsxs("div",{className:"border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(uw,{className:"w-5 h-5 text-red-600"}),l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Cancelar Prestamo"})]}),l.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg",children:l.jsx(bc,{className:"w-5 h-5 text-slate-500"})})]}),l.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[l.jsx("p",{className:"text-sm text-red-800 font-medium mb-2",children:"Esta accion no se puede deshacer."}),l.jsxs("p",{className:"text-sm text-red-700",children:["El prestamo a ",t.person_name," (tarjeta ",(c=t.backup_cards)==null?void 0:c.card_number,") sera cancelado y la tarjeta sera liberada."]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Motivo de cancelacion (obligatorio)"}),l.jsx("textarea",{className:"input min-h-[100px]",value:i,onChange:u=>s(u.target.value),placeholder:"Explique por que se cancela este prestamo...",required:!0})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[l.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:a,children:"Volver"}),l.jsx("button",{type:"submit",className:"btn btn-primary bg-red-600 hover:bg-red-700",disabled:a||!i.trim(),children:a?"Cancelando...":"Confirmar Cancelacion"})]})]})]})})]})},l7e=({isOpen:e,onClose:t})=>{const r=Mt(),[n,a]=F.useState(!1),[i,s]=F.useState(""),[o,c]=F.useState(""),[u,d]=F.useState({card_number:"",inventory_terminal:"El Roble",notes:""}),{data:f=[],isLoading:p}=zt({queryKey:["backup-cards",i,o],queryFn:()=>WDe(o||void 0,i||void 0),enabled:e}),h=Ft({mutationFn:GDe,onSuccess:()=>{r.invalidateQueries({queryKey:["backup-cards"]}),a(!1),d({card_number:"",inventory_terminal:"El Roble",notes:""})}}),g=Ft({mutationFn:KDe,onSuccess:()=>{r.invalidateQueries({queryKey:["backup-cards"]})}}),m=v=>{v.preventDefault(),h.mutate(u)},x=v=>{confirm(`Desactivar tarjeta ${v.card_number}?`)&&g.mutate(v.id)};if(!e)return null;const y={LIBRE:"bg-emerald-100 text-emerald-800",ASIGNADA:"bg-blue-100 text-blue-800",INACTIVA:"bg-slate-100 text-slate-600"};return l.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[l.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:t}),l.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:l.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[85vh] flex flex-col",children:[l.jsxs("div",{className:"border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Wg,{className:"w-5 h-5 text-slate-600"}),l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Inventario de Tarjetas"})]}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg",children:l.jsx(bc,{className:"w-5 h-5 text-slate-500"})})]}),l.jsxs("div",{className:"p-4 border-b border-slate-100 flex flex-wrap items-center gap-3",children:[l.jsxs("select",{className:"input w-auto",value:i,onChange:v=>s(v.target.value),children:[l.jsx("option",{value:"",children:"Todos los terminales"}),Xu.map(v=>l.jsx("option",{value:v,children:v},v))]}),l.jsxs("select",{className:"input w-auto",value:o,onChange:v=>c(v.target.value),children:[l.jsx("option",{value:"",children:"Todos los estados"}),yme.map(v=>l.jsx("option",{value:v.value,children:v.label},v.value))]}),l.jsx("div",{className:"flex-1"}),l.jsxs("button",{onClick:()=>a(!n),className:"btn btn-primary flex items-center gap-2",children:[l.jsx(HB,{className:"w-4 h-4"}),"Agregar Tarjeta"]})]}),n&&l.jsxs("form",{onSubmit:m,className:"p-4 bg-slate-50 border-b border-slate-100",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Numero de Tarjeta"}),l.jsx("input",{type:"text",className:"input",value:u.card_number,onChange:v=>d(b=>({...b,card_number:v.target.value})),placeholder:"Ej: TR-001",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Terminal"}),l.jsx("select",{className:"input",value:u.inventory_terminal,onChange:v=>d(b=>({...b,inventory_terminal:v.target.value})),children:Xu.map(v=>l.jsx("option",{value:v,children:v},v))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Notas (opcional)"}),l.jsx("input",{type:"text",className:"input",value:u.notes,onChange:v=>d(b=>({...b,notes:v.target.value}))})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[l.jsx("button",{type:"button",onClick:()=>a(!1),className:"btn btn-secondary text-sm",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary text-sm",disabled:h.isPending,children:h.isPending?"Guardando...":"Guardar"})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:p?l.jsx("div",{className:"flex items-center justify-center py-8",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):f.length===0?l.jsx("div",{className:"text-center py-8 text-slate-500",children:"No hay tarjetas registradas"}):l.jsx("div",{className:"space-y-2",children:f.map(v=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Wg,{className:"w-5 h-5 text-slate-400"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-slate-900",children:v.card_number}),l.jsx("p",{className:"text-xs text-slate-500",children:v.inventory_terminal})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${y[v.status]||""}`,children:v.status}),v.status!=="INACTIVA"&&v.status!=="ASIGNADA"&&l.jsx("button",{onClick:()=>x(v),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Desactivar",children:l.jsx(cme,{className:"w-4 h-4"})})]})]},v.id))})}),l.jsx("div",{className:"border-t border-slate-200 px-6 py-4 flex justify-end",children:l.jsx("button",{onClick:t,className:"btn btn-secondary",children:"Cerrar"})})]})})]})},c7e=({isOpen:e,onClose:t})=>{const r=Mt(),[n,a]=F.useState("GLOBAL"),[i,s]=F.useState({manager_email:"",cc_emails:"",subject_manager:"Solicitud de Nueva Credencial",subject_boss:"Notificacion de Credencial de Respaldo",enabled:!0}),{data:o=[],isLoading:c}=zt({queryKey:["backup-email-settings"],queryFn:PH,enabled:e}),u=Ft({mutationFn:e7e,onSuccess:()=>{r.invalidateQueries({queryKey:["backup-email-settings"]})}});F.useEffect(()=>{const f=o.find(p=>n==="GLOBAL"?p.scope_type==="GLOBAL":p.scope_code===n);s(f?{manager_email:f.manager_email,cc_emails:f.cc_emails||"",subject_manager:f.subject_manager,subject_boss:f.subject_boss,enabled:f.enabled}:{manager_email:"",cc_emails:"",subject_manager:"Solicitud de Nueva Credencial",subject_boss:"Notificacion de Credencial de Respaldo",enabled:!0})},[n,o]);const d=f=>{f.preventDefault(),u.mutate({scope_type:n==="GLOBAL"?"GLOBAL":"TERMINAL",scope_code:n,...i})};return e?l.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[l.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:t}),l.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:l.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-lg",children:[l.jsxs("div",{className:"border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(qB,{className:"w-5 h-5 text-slate-600"}),l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Configuracion de Correos"})]}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg",children:l.jsx(bc,{className:"w-5 h-5 text-slate-500"})})]}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Configurar para:"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{type:"button",onClick:()=>a("GLOBAL"),className:`px-3 py-1.5 text-sm rounded-lg border ${n==="GLOBAL"?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:"Global"}),Xu.map(f=>l.jsx("button",{type:"button",onClick:()=>a(f),className:`px-3 py-1.5 text-sm rounded-lg border ${n===f?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:f},f))]})]}),c?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):l.jsxs("form",{onSubmit:d,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Email del Gestor (crear credencial)"}),l.jsx("input",{type:"email",className:"input",value:i.manager_email,onChange:f=>s(p=>({...p,manager_email:f.target.value})),placeholder:"gestor@empresa.cl",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"CC (opcional, separar por coma)"}),l.jsx("input",{type:"text",className:"input",value:i.cc_emails,onChange:f=>s(p=>({...p,cc_emails:f.target.value})),placeholder:"copia1@empresa.cl, copia2@empresa.cl"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asunto para Gestor"}),l.jsx("input",{type:"text",className:"input",value:i.subject_manager,onChange:f=>s(p=>({...p,subject_manager:f.target.value})),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asunto para Jefatura"}),l.jsx("input",{type:"text",className:"input",value:i.subject_boss,onChange:f=>s(p=>({...p,subject_boss:f.target.value})),required:!0})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:i.enabled,onChange:f=>s(p=>({...p,enabled:f.target.checked})),className:"w-4 h-4 rounded border-slate-300"}),l.jsx("span",{className:"text-sm text-slate-700",children:"Envio habilitado"})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[l.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",children:"Cerrar"}),l.jsxs("button",{type:"submit",className:"btn btn-primary flex items-center gap-2",disabled:u.isPending,children:[l.jsx(Zpe,{className:"w-4 h-4"}),u.isPending?"Guardando...":"Guardar"]})]}),u.isSuccess&&l.jsx("p",{className:"text-sm text-emerald-600 text-center",children:"Configuracion guardada correctamente"})]})]})]})})]}):null},u7e=({isOpen:e,loan:t,managerEmail:r,workerEmail:n,cc:a,onClose:i,onSubmit:s,isLoading:o})=>{const c=F.useRef(null),[u,d]=F.useState(null),[f,p]=F.useState(null),[h,g]=F.useState(""),m=S=>{var j;const _=(j=S.target.files)==null?void 0:j[0];if(!_)return;if(!["application/pdf","image/png","image/jpeg"].includes(_.type)){g("Solo se permiten archivos PDF, PNG o JPG");return}if(_.size>5*1024*1024){g("El archivo no puede superar 5MB");return}if(g(""),d(_),_.type.startsWith("image/")){const E=new FileReader;E.onload=T=>{var L;return p((L=T.target)==null?void 0:L.result)},E.readAsDataURL(_)}else p(null)},x=async()=>{if(!u){g("Debe adjuntar el documento firmado");return}const S=new FileReader;S.onload=async _=>{var j;const A=((j=_.target)==null?void 0:j.result).split(",")[1];await s({filename:`autorizacion_descuento_${(t==null?void 0:t.person_rut)||"firmado"}.${u.name.split(".").pop()}`,content:A})},S.readAsDataURL(u)},y=async()=>{await s(null)},v=()=>{d(null),p(null),g("")},b=()=>{v(),i()};return!e||!t?null:l.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[l.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:b}),l.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:l.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-lg",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Adjuntar Documento Firmado"}),l.jsx("button",{onClick:b,className:"p-2 hover:bg-slate-100 rounded-lg",children:l.jsx(bc,{className:"w-5 h-5 text-slate-500"})})]}),l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[l.jsxs("p",{className:"text-sm text-blue-800",children:[l.jsx("strong",{children:"Trabajador:"})," ",t.person_name," (",Lf(t.person_rut),")"]}),l.jsx("p",{className:"text-sm text-blue-800 mt-1",children:l.jsx("strong",{children:"Se enviar correo a:"})}),l.jsxs("ul",{className:"text-xs text-blue-700 mt-1 list-disc list-inside",children:[l.jsxs("li",{children:["Gestor de credenciales: ",r," ",l.jsx("span",{className:"text-blue-500",children:"(con adjunto)"})]}),n&&l.jsxs("li",{children:["Notificacin trabajador: ",n]}),a&&l.jsxs("li",{children:["CC: ",a]})]})]}),l.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[l.jsx(Rpe,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-amber-800",children:"Importante"}),l.jsx("p",{className:"text-xs text-amber-700",children:"Adjunte el documento de autorizacin de descuento firmado por el trabajador. Este se enviar SOLO al gestor de credenciales."})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Documento Firmado (PDF, PNG, JPG)"}),l.jsx("input",{type:"file",ref:c,onChange:m,accept:".pdf,.png,.jpg,.jpeg",className:"hidden"}),u?l.jsx("div",{className:"border border-slate-200 rounded-lg p-3",children:l.jsxs("div",{className:"flex items-center gap-3",children:[f?l.jsx("img",{src:f,alt:"Preview",className:"w-16 h-16 object-cover rounded"}):l.jsx("div",{className:"w-16 h-16 bg-red-50 rounded flex items-center justify-center",children:l.jsx(Hpe,{className:"w-8 h-8 text-red-500"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:u.name}),l.jsxs("p",{className:"text-xs text-slate-500",children:[(u.size/1024).toFixed(1)," KB"]})]}),l.jsx("button",{type:"button",onClick:()=>{d(null),p(null)},className:"p-1 hover:bg-slate-100 rounded",children:l.jsx(bc,{className:"w-4 h-4 text-slate-500"})})]})}):l.jsxs("button",{type:"button",onClick:()=>{var S;return(S=c.current)==null?void 0:S.click()},className:"w-full border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:border-blue-400 hover:bg-blue-50/50 transition-colors",children:[l.jsx(pme,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Haga clic para seleccionar archivo"}),l.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Max 5MB"})]}),h&&l.jsx("p",{className:"text-xs text-red-500 mt-2",children:h})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-slate-200 bg-slate-50 rounded-b-xl",children:[l.jsx("button",{type:"button",onClick:y,className:"text-sm text-slate-500 hover:text-slate-700",disabled:o,children:"Enviar sin adjunto"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:b,className:"btn btn-secondary",disabled:o,children:"Cancelar"}),l.jsx("button",{type:"button",onClick:x,className:"btn btn-primary flex items-center gap-2",disabled:o||!u,children:o?"Enviando...":l.jsxs(l.Fragment,{children:[l.jsx(nme,{className:"w-4 h-4"}),"Enviar Correos"]})})]})]})]})})]})},d7e=()=>{var B,U,Z,pe;const e=Mt(),t=Vt(K=>K.context),r=Vt(K=>K.setContext),n=jr(K=>K.session),[a,i]=F.useState({status:"TODAS",reason:"TODAS",alertsOnly:!1}),[s,o]=F.useState(!1),[c,u]=F.useState(!1),[d,f]=F.useState(!1),[p,h]=F.useState(null),[g,m]=F.useState(!1),[x,y]=F.useState(!1),[v,b]=F.useState(!1),[S,_]=F.useState(!1),[A,j]=F.useState(null),[E,T]=F.useState(!1),L=zt({queryKey:["backup-loans",a],queryFn:()=>XDe(a)}),O=zt({queryKey:["backup-kpis"],queryFn:t7e}),I=zt({queryKey:["backup-email-settings"],queryFn:PH}),D=Ft({mutationFn:async K=>({loan:await YDe(K),sendEmails:K.send_emails}),onSuccess:({loan:K,sendEmails:te})=>{e.invalidateQueries({queryKey:["backup-loans"]}),e.invalidateQueries({queryKey:["backup-kpis"]}),e.invalidateQueries({queryKey:["backup-cards"]}),o(!1),te&&(j(K),_(!0))}}),z=Ft({mutationFn:({id:K,recoveredAt:te,observation:ae})=>JDe(K,te),onSuccess:()=>{e.invalidateQueries({queryKey:["backup-loans"]}),e.invalidateQueries({queryKey:["backup-kpis"]}),e.invalidateQueries({queryKey:["backup-cards"]}),y(!1),h(null)}}),Y=Ft({mutationFn:({id:K,reason:te})=>QDe(K,te),onSuccess:()=>{e.invalidateQueries({queryKey:["backup-loans"]}),e.invalidateQueries({queryKey:["backup-kpis"]}),e.invalidateQueries({queryKey:["backup-cards"]}),b(!1),h(null)}}),se=F.useMemo(()=>{var te;let K=L.data||[];if(t.mode!=="ALL"&&t.value){const ae=(te=ns.find(be=>be.value===t.value))==null?void 0:te.label;ae&&(K=K.filter(be=>be.person_terminal===t.value||be.person_terminal===ae))}if(a.alertsOnly){const ae=new Date;K=K.filter(be=>{if(be.status!=="ASIGNADA")return!1;const ve=new Date(be.issued_at);return Math.floor((ae.getTime()-ve.getTime())/(1e3*60*60*24))>be.alert_after_days})}return K},[L.data,t,a.alertsOnly]),ee=K=>{h(K),m(!0)},J=K=>{ee(K)},oe=K=>{h(K),y(!0)},we=K=>{h(K),b(!0)},xe=K=>{j(K),_(!0)},k=async K=>{var be;if(!A)return;const te=(be=I.data)==null?void 0:be.find(ve=>ve.scope_code===A.person_terminal||ve.scope_type==="GLOBAL");if(!te){iX("Configuracin requerida",'Configure los correos primero en el botn "Correos"'),_(!1),j(null);return}T(!0);const ae=await n7e(A,te.manager_email,te.cc_emails||void 0,K);T(!1),ae.success?(Fi("Correos enviados","Los correos de notificacin fueron enviados correctamente",A.person_name),e.invalidateQueries({queryKey:["backup-loans"]})):Pi("Error al enviar correos",ae.error||"Error desconocido"),_(!1),j(null)},M=()=>{if(!se.length)return;const K=new Date,te=se.map(ae=>{var Fe;const be=new Date(ae.issued_at),ve=Math.floor((K.getTime()-be.getTime())/(1e3*60*60*24));return{rut:Lf(ae.person_rut),nombre:ae.person_name,cargo:ae.person_cargo||"",terminal:ae.person_terminal,tarjeta:((Fe=ae.backup_cards)==null?void 0:Fe.card_number)||"",motivo:ae.reason==="PERDIDA"?"Perdida":"Deterioro",fecha_entrega:new Date(ae.issued_at).toLocaleDateString("es-CL"),dias:ve,estado:ae.status,descuento:ae.discount_applied?ae.discount_amount:0,correo_trabajador:ae.boss_email||"",creado_por:ae.created_by_supervisor}});xr({filename:`prestamos_respaldo_${new Date().toISOString().split("T")[0]}`,sheetName:"Prestamos",rows:te,columns:[{key:"rut",header:"RUT"},{key:"nombre",header:"Nombre"},{key:"cargo",header:"Cargo"},{key:"terminal",header:"Terminal"},{key:"tarjeta",header:"Tarjeta"},{key:"motivo",header:"Motivo"},{key:"fecha_entrega",header:"Fecha Entrega"},{key:"dias",header:"Dias"},{key:"estado",header:"Estado"},{key:"descuento",header:"Descuento"},{key:"email_jefatura",header:"Email Jefatura"},{key:"creado_por",header:"Creado Por"}]})};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(gn,{title:"Credenciales de Respaldo",description:"Control de prestamo de tarjetas de respaldo",actions:l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("button",{onClick:()=>f(!0),className:"btn btn-secondary flex items-center gap-2",children:[l.jsx(ime,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Correos"})]}),l.jsxs("button",{onClick:()=>u(!0),className:"btn btn-secondary flex items-center gap-2",children:[l.jsx(Wg,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Tarjetas"})]}),l.jsxs("button",{onClick:M,className:"btn btn-secondary flex items-center gap-2",children:[l.jsx(Bpe,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"XLSX"})]}),l.jsxs("button",{onClick:()=>o(!0),className:"btn btn-primary flex items-center gap-2",children:[l.jsx(HB,{className:"w-4 h-4"}),"Nuevo Prestamo"]})]})}),l.jsx(bme,{kpis:O.data||{availableByTerminal:{"El Roble":0,"La Reina":0,"Maria Angelica":0},activeLoans:0,overdueLoans:0,avgReturnDays:0,totalDiscounts:0},isLoading:O.isLoading}),!L.isLoading&&L.data&&L.data.length>0&&l.jsx(UDe,{loans:L.data}),l.jsxs("div",{className:"bg-white px-3 py-2 rounded-lg border border-slate-200 shadow-sm flex flex-wrap items-center gap-2",children:[l.jsx(Vpe,{className:"w-4 h-4 text-slate-400 flex-shrink-0"}),l.jsx("input",{type:"text",className:"h-8 px-2 text-sm border border-slate-200 rounded-md w-32 focus:outline-none focus:ring-1 focus:ring-blue-400",placeholder:"RUT/Nombre...",value:a.search||"",onChange:K=>i(te=>({...te,search:K.target.value}))}),l.jsxs("select",{className:"h-8 px-2 text-sm border border-slate-200 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-400",value:t.value||"",onChange:K=>{K.target.value?r({mode:"TERMINAL",value:K.target.value}):r({mode:"ALL"})},children:[l.jsx("option",{value:"",children:"Terminal"}),ns.map(K=>l.jsx("option",{value:K.value,children:K.label},K.value))]}),l.jsxs("select",{className:"h-8 px-2 text-sm border border-slate-200 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-400",value:a.status||"TODAS",onChange:K=>i(te=>({...te,status:K.target.value})),children:[l.jsx("option",{value:"TODAS",children:"Estado"}),xme.map(K=>l.jsx("option",{value:K.value,children:K.label},K.value))]}),l.jsxs("select",{className:"h-8 px-2 text-sm border border-slate-200 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-400",value:a.reason||"TODAS",onChange:K=>i(te=>({...te,reason:K.target.value})),children:[l.jsx("option",{value:"TODAS",children:"Motivo"}),VB.map(K=>l.jsx("option",{value:K.value,children:K.label},K.value))]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer text-xs text-slate-600 whitespace-nowrap",children:[l.jsx("input",{type:"checkbox",checked:a.alertsOnly||!1,onChange:K=>i(te=>({...te,alertsOnly:K.target.checked})),className:"w-3.5 h-3.5 rounded border-slate-300"}),l.jsx(uw,{className:"w-3.5 h-3.5 text-amber-500"}),"Atrasados"]}),l.jsx("div",{className:"h-4 w-px bg-slate-200 hidden sm:block"}),l.jsx("input",{type:"date",className:"h-8 px-2 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400",value:a.dateFrom||"",onChange:K=>i(te=>({...te,dateFrom:K.target.value})),title:"Desde"}),l.jsx("span",{className:"text-slate-400 text-xs",children:"-"}),l.jsx("input",{type:"date",className:"h-8 px-2 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400",value:a.dateTo||"",onChange:K=>i(te=>({...te,dateTo:K.target.value})),title:"Hasta"})]}),L.isLoading&&l.jsx(kn,{label:"Cargando prestamos..."}),L.isError&&l.jsx(Fa,{message:"Error al cargar prestamos",onRetry:L.refetch}),!L.isLoading&&!L.isError&&l.jsx(HDe,{loans:se,onView:ee,onEdit:J,onRecover:oe,onCancel:we,onResendEmails:xe}),l.jsx(a7e,{isOpen:s,onClose:()=>o(!1),onSubmit:async(K,te)=>{await D.mutateAsync(K),K.discount_applied&&te()},isLoading:D.isPending,supervisorName:(n==null?void 0:n.supervisorName)||"Supervisor"}),l.jsx(i7e,{isOpen:g,loan:p,onClose:()=>{m(!1),h(null)}}),l.jsx(s7e,{isOpen:x,loan:p,onClose:()=>{y(!1),h(null)},onSubmit:async(K,te,ae)=>{await z.mutateAsync({id:K,recoveredAt:te,observation:ae})},isLoading:z.isPending}),l.jsx(o7e,{isOpen:v,loan:p,onClose:()=>{b(!1),h(null)},onSubmit:async(K,te)=>{await Y.mutateAsync({id:K,reason:te})},isLoading:Y.isPending}),l.jsx(l7e,{isOpen:c,onClose:()=>u(!1)}),l.jsx(c7e,{isOpen:d,onClose:()=>f(!1)}),l.jsx(u7e,{isOpen:S,loan:A,managerEmail:((U=(B=I.data)==null?void 0:B.find(K=>K.scope_code===(A==null?void 0:A.person_terminal)||K.scope_type==="GLOBAL"))==null?void 0:U.manager_email)||"",workerEmail:(A==null?void 0:A.boss_email)||"",cc:((pe=(Z=I.data)==null?void 0:Z.find(K=>K.scope_code===(A==null?void 0:A.person_terminal)||K.scope_type==="GLOBAL"))==null?void 0:pe.cc_emails)||void 0,onClose:()=>{_(!1),j(null)},onSubmit:k,isLoading:E})]})},f7e=[{id:"s-1",solicitante:"Ana Prez",tipo:"Materiales",fecha:"2023-12-04",estado:"abierta",terminal:"EL_ROBLE"},{id:"s-2",solicitante:"Carlos Vega",tipo:"Personal",fecha:"2023-12-03",estado:"en_proceso",terminal:"LA_REINA"},{id:"s-3",solicitante:"Laura Soto",tipo:"Tecnologa",fecha:"2023-12-02",estado:"cerrada",terminal:"EL_SALTO"}],sR=iw(f7e,(e,t)=>t!=null&&t.estado&&t.estado!=="todas"?e.estado===t.estado:!0),h7e=()=>{const e=Vt(y=>y.context),t=Vt(y=>y.setContext),[r,n]=F.useState({estado:"todas"}),[a,i]=F.useState(""),[s,o]=F.useState(""),[c,u]=F.useState([]),d=zt({queryKey:["solicitudes",e,r],queryFn:()=>sR.list({terminalContext:e,filters:r,scope:"view"})}),f=F.useMemo(()=>[...d.data??[],...c],[d.data,c]),p=F.useMemo(()=>[{key:"tipo",header:"Tipo"},{key:"solicitante",header:"Solicitante"},{key:"estado",header:"Estado",render:y=>l.jsx("span",{className:"badge capitalize",children:y.estado}),value:y=>y.estado},{key:"fecha",header:"Fecha"},{key:"terminal",header:"Terminal",render:y=>ur(y.terminal),value:y=>ur(y.terminal)}],[]),h=p.map(y=>({key:y.key,header:y.header,value:v=>y.value?y.value(v):v[y.key]})),g=()=>{xr({filename:"solicitudes_vista",sheetName:"Solicitudes",rows:f,columns:h})},m=async()=>{const y=await sR.list({terminalContext:e,scope:"all"});xr({filename:"solicitudes_completo",sheetName:"Solicitudes",rows:y,columns:h})},x=()=>{const y={id:`local-${Date.now()}`,solicitante:s,tipo:a,estado:"abierta",fecha:new Date().toISOString().slice(0,10),terminal:e.value??"EL_ROBLE"};u(v=>[y,...v]),o(""),i("")};return l.jsxs("div",{className:"space-y-4",children:[l.jsx(gn,{title:"Solicitudes",description:"Formulario universal para requerimientos",actions:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"btn btn-primary",onClick:()=>{var y;return(y=document.getElementById("solicitud-form"))==null?void 0:y.scrollIntoView({behavior:"smooth"})},children:"Nueva solicitud"}),l.jsx(Na,{onExportView:g,onExportAll:m})]})}),l.jsx(ss,{terminalContext:e,onTerminalChange:t,children:l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsxs("select",{className:"input",value:r.estado,onChange:y=>n({estado:y.target.value}),children:[l.jsx("option",{value:"todas",children:"Todas"}),l.jsx("option",{value:"abierta",children:"Abierta"}),l.jsx("option",{value:"en_proceso",children:"En proceso"}),l.jsx("option",{value:"cerrada",children:"Cerrada"})]})]})}),l.jsxs("div",{className:"card p-4",id:"solicitud-form",children:[l.jsx("p",{className:"mb-3 text-sm font-semibold text-slate-900",children:"Crear nueva solicitud"}),l.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"label",children:"Solicitante"}),l.jsx("input",{className:"input",value:s,onChange:y=>o(y.target.value)})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"label",children:"Tipo"}),l.jsx("input",{className:"input",value:a,onChange:y=>i(y.target.value),placeholder:"Ej: Materiales"})]}),l.jsx("div",{className:"flex items-end justify-end",children:l.jsx("button",{className:"btn btn-primary",onClick:x,disabled:!s||!a,children:"Registrar (mock)"})})]})]}),d.isLoading&&l.jsx(kn,{}),d.isError&&l.jsx(Fa,{onRetry:d.refetch}),!d.isLoading&&!d.isError&&l.jsxs(l.Fragment,{children:[!f.length&&l.jsx(Pc,{description:"Sin solicitudes"}),f.length>0&&l.jsx(Oc,{columns:p,rows:f})]})]})},l1=({terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:o,children:c})=>l.jsxs(ss,{terminalContext:e,onTerminalChange:t,children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Buscar PPU"}),l.jsx("input",{type:"text",className:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700 outline-none focus:border-brand-500 focus:ring-1 focus:ring-brand-500 w-32 lg:w-40",placeholder:"PPU...",value:r,onChange:u=>n(u.target.value)})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Desde"}),l.jsx("input",{type:"date",className:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700 outline-none focus:border-brand-500 w-full",value:a,onChange:u=>i(u.target.value)})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Hasta"}),l.jsx("input",{type:"date",className:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700 outline-none focus:border-brand-500 w-full",value:s,onChange:u=>o(u.target.value)})]}),c]}),c1=({items:e})=>l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:e.map((t,r)=>l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:t.label}),l.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:t.value}),t.subtext&&l.jsx("p",{className:"text-xs text-slate-400 mt-1 font-medium",children:t.subtext})]}),t.icon&&l.jsx("div",{className:`p-2 rounded-lg ${t.colorClass||"bg-slate-100 text-slate-600"}`,children:l.jsx(me,{name:t.icon,size:20})})]},r))}),p7e="https://wvcplgwemvqhvtstlqmt.supabase.co",LH="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind2Y3BsZ3dlbXZxaHZ0c3RscW10Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAzNjIyMDUsImV4cCI6MjA3NTkzODIwNX0.K1YOv5lRn9fOous3AyG2gPxsQBzqOXRfYHgrCmO5zxk",m7e=jF(p7e,LH,{auth:{persistSession:!1,autoRefreshToken:!1},realtime:{params:{eventsPerSecond:10}}}),g7e=()=>!!LH,u1=async(e,t)=>{if(!g7e())return[];let r=m7e.from(e).select("*");if(t.terminalContext&&t.terminalContext.mode!=="ALL"){const c=Ui(t.terminalContext).map(u=>Hu[u]).filter(Boolean);c.length>0&&(r=r.in("terminal",c))}t.search&&(r=r.ilike("bus_ppu",`%${t.search}%`)),t.dateFrom&&(r=r.gte("created_at",t.dateFrom)),t.dateTo&&(r=r.lte("created_at",t.dateTo));const n=t.sortBy||"updated_at",a=t.sortOrder||"desc";r=r.order(n,{ascending:a==="asc"});const{data:i,error:s}=await r;if(s)throw console.error(`Error fetching ${e}:`,s),s;return i},v7e=e=>u1("extintores",e),x7e=e=>u1("tags",e),y7e=e=>u1("mobileye",e),b7e=e=>u1("odometro",e),w7e=e=>u1("publicidad",e),_7e=e=>zt({queryKey:["minicheck","extintores",e],queryFn:()=>v7e(e)}),S7e=e=>zt({queryKey:["minicheck","tags",e],queryFn:()=>x7e(e)}),N7e=e=>zt({queryKey:["minicheck","mobileye",e],queryFn:()=>y7e(e)}),j7e=e=>zt({queryKey:["minicheck","odometros",e],queryFn:()=>b7e(e)}),A7e=e=>zt({queryKey:["minicheck","publicidad",e],queryFn:()=>w7e(e)}),E7e=()=>{const e=Vt(v=>v.context),t=Vt(v=>v.setContext),[r,n]=F.useState(""),[a,i]=F.useState(""),[s,o]=F.useState(""),c=F.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:p}=_7e(c),h=F.useMemo(()=>{if(!u)return[];const v=u.length,b=u.filter(A=>A.certificacion==="VENCIDA").length,S=u.filter(A=>!A.tiene).length,_=u.filter(A=>A.presion==="BAJA_CARGA").length;return[{label:"Total Registros",value:v,icon:"clipboard"},{label:"Vencidos",value:b,icon:"alert-triangle",colorClass:"bg-red-50 text-red-600"},{label:"Sin Extintor",value:S,icon:"x",colorClass:"bg-orange-50 text-orange-600"},{label:"Presin Baja",value:_,icon:"activity",colorClass:"bg-yellow-50 text-yellow-600"}]},[u]),g=F.useMemo(()=>{if(!u)return[];const v=u.filter(S=>S.certificacion==="VIGENTE").length,b=u.filter(S=>S.certificacion==="VENCIDA").length;return[{name:"VIGENTE",value:v,color:"#10b981"},{name:"VENCIDA",value:b,color:"#ef4444"}]},[u]),m=[{key:"bus_ppu",header:"PPU",value:v=>v.bus_ppu},{key:"terminal",header:"Terminal",render:v=>ur(v.terminal),value:v=>v.terminal},{key:"tiene",header:"Tiene",render:v=>l.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${v.tiene?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.tiene?"S":"NO"}),value:v=>v.tiene?"SI":"NO"},{key:"certificacion",header:"Certificacin",render:v=>l.jsx("span",{className:`text-xs font-bold ${v.certificacion==="VIGENTE"?"text-green-600":"text-red-600"}`,children:v.certificacion||"-"}),value:v=>v.certificacion||"-"},{key:"vencimiento_mes",header:"Vencimiento",render:v=>v.vencimiento_mes&&v.vencimiento_anio?`${v.vencimiento_mes}/${v.vencimiento_anio}`:"-",value:v=>`${v.vencimiento_mes}/${v.vencimiento_anio}`},{key:"presion",header:"Presin",value:v=>v.presion||"-"},{key:"cilindro",header:"Cilindro OK",render:v=>v.cilindro?"S":"No",value:v=>v.cilindro?"S":"No"},{key:"updated_at",header:"Actualizado",render:v=>Ma(v.updated_at),value:v=>Ma(v.updated_at)}],x=m.map(v=>({header:v.header,key:v.key,value:v.value})),y=()=>{u&&xr({filename:`minicheck_extintor_${new Date().toISOString().split("T")[0]}`,sheetName:"Extintores",rows:u,columns:x})};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(gn,{title:"Control de Extintores",description:"Validacin de estado y vencimiento de extintores",actions:l.jsx("div",{className:"flex gap-2",children:l.jsx(Na,{onExportView:y,onExportAll:y})})}),l.jsx(l1,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:o}),d&&l.jsx(kn,{label:"Cargando extintores..."}),f&&l.jsx(Fa,{message:"No se pudieron obtener los registros de extintores.",onRetry:p}),!d&&!f&&l.jsxs(l.Fragment,{children:[l.jsx(c1,{items:h}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80",children:[l.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-4",children:"Estado Certificacin"}),l.jsx(uc,{width:"100%",height:"100%",children:l.jsxs(cp,{data:g,children:[l.jsx(Pf,{strokeDasharray:"3 3",vertical:!1}),l.jsx(jc,{dataKey:"name",tick:{fontSize:10}}),l.jsx(Ac,{tick:{fontSize:10}}),l.jsx(Oa,{}),l.jsx(Qi,{dataKey:"value",name:"Cantidad",radius:[4,4,0,0],children:g.map((v,b)=>l.jsx(Rc,{fill:v.color},`cell-${b}`))})]})})]}),l.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?l.jsx(Oc,{columns:m,rows:u}):l.jsx(Pc,{label:"Sin registros",description:"No se encontraron extintores con los filtros seleccionados."})})]})]})]})},T7e=()=>{const e=Vt(v=>v.context),t=Vt(v=>v.setContext),[r,n]=F.useState(""),[a,i]=F.useState(""),[s,o]=F.useState(""),c=F.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:p}=S7e(c),h=F.useMemo(()=>{if(!u)return[];const v=u.length,b=u.filter(_=>!_.tiene).length,S=u.filter(_=>_.serie&&_.serie.trim().length>0).length;return[{label:"Total Registros",value:v,icon:"clipboard"},{label:"Sin TAG",value:b,icon:"alert-circle",colorClass:"bg-red-50 text-red-600"},{label:"Serie Informada",value:S,icon:"check",colorClass:"bg-blue-50 text-blue-600"}]},[u]),g=F.useMemo(()=>{if(!u)return[];const v=u.filter(S=>S.tiene).length,b=u.filter(S=>!S.tiene).length;return[{name:"Con TAG",value:v,color:"#10b981"},{name:"Sin TAG",value:b,color:"#ef4444"}]},[u]),m=[{key:"bus_ppu",header:"PPU",value:v=>v.bus_ppu},{key:"terminal",header:"Terminal",render:v=>ur(v.terminal),value:v=>v.terminal},{key:"tiene",header:"Tiene TAG",render:v=>l.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${v.tiene?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.tiene?"S":"NO"}),value:v=>v.tiene?"SI":"NO"},{key:"serie",header:"N Serie",value:v=>v.serie||"-"},{key:"observacion",header:"Observacin",value:v=>v.observacion||""},{key:"updated_at",header:"Actualizado",render:v=>Ma(v.updated_at),value:v=>Ma(v.updated_at)}],x=m.map(v=>({header:v.header,key:v.key,value:v.value})),y=()=>{u&&xr({filename:`minicheck_tag_${new Date().toISOString().split("T")[0]}`,sheetName:"Tags",rows:u,columns:x})};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(gn,{title:"Control de TAG",description:"Verificacin de dispositivos TAG",actions:l.jsx("div",{className:"flex gap-2",children:l.jsx(Na,{onExportView:y,onExportAll:y})})}),l.jsx(l1,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:o}),d&&l.jsx(kn,{label:"Cargando tags..."}),f&&l.jsx(Fa,{message:"No se pudieron cargar los datos.",onRetry:p}),!d&&!f&&l.jsxs(l.Fragment,{children:[l.jsx(c1,{items:h}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80 flex flex-col items-center justify-center",children:[l.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-2 w-full text-left",children:"Distribucin"}),l.jsx(uc,{width:"100%",height:"100%",children:l.jsxs(aT,{children:[l.jsx(Vo,{data:g,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:g.map((v,b)=>l.jsx(Rc,{fill:v.color},`cell-${b}`))}),l.jsx(Oa,{}),l.jsx(cc,{})]})})]}),l.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?l.jsx(Oc,{columns:m,rows:u}):l.jsx(Pc,{label:"Sin registros",description:"No se encontraron datos."})})]})]})]})},C7e=()=>{const e=Vt(b=>b.context),t=Vt(b=>b.setContext),[r,n]=F.useState(""),[a,i]=F.useState(""),[s,o]=F.useState(""),c=F.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:p}=N7e(c),h=b=>b.consola&&b.sensor_frontal&&b.sensor_izq&&b.sensor_der,g=F.useMemo(()=>{if(!u)return[];const b=u.length,S=u.filter(A=>!h(A)).length,_=u.filter(A=>A.alerta_izq||A.alerta_der).length;return[{label:"Total Registros",value:b,icon:"clipboard"},{label:"Falla Sensores",value:S,icon:"alert-triangle",colorClass:"bg-red-50 text-red-600"},{label:"Alertas Activas",value:_,icon:"bell",colorClass:"bg-yellow-50 text-yellow-600"}]},[u]),m=F.useMemo(()=>{if(!u)return[];const b=u.filter(_=>h(_)).length,S=u.filter(_=>!h(_)).length;return[{name:"Sensores OK",value:b,color:"#10b981"},{name:"Falla",value:S,color:"#ef4444"}]},[u]),x=[{key:"bus_ppu",header:"PPU",value:b=>b.bus_ppu},{key:"terminal",header:"Terminal",render:b=>ur(b.terminal),value:b=>b.terminal},{key:"bus_marca",header:"Marca",value:b=>b.bus_marca||"-"},{key:"consola",header:"Consola",render:b=>b.consola?l.jsx(me,{name:"check",size:16,className:"text-green-500"}):l.jsx(me,{name:"x",size:16,className:"text-red-500"}),value:b=>b.consola?"OK":"Falla"},{key:"id",header:"Sensores OK?",render:b=>{const S=h(b);return l.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${S?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:S?"S":"NO"})},value:b=>h(b)?"S":"NO"},{key:"id",header:"Alertas",render:b=>{const S=[];return b.alerta_izq&&S.push("IZQ"),b.alerta_der&&S.push("DER"),S.length>0?l.jsx("span",{className:"text-red-600 font-bold text-xs",children:S.join(", ")}):"-"},value:b=>{const S=[];return b.alerta_izq&&S.push("IZQ"),b.alerta_der&&S.push("DER"),S.join(", ")}},{key:"updated_at",header:"Actualizado",render:b=>Ma(b.updated_at),value:b=>Ma(b.updated_at)}],y=x.map(b=>({header:b.header,key:b.key,value:b.value})),v=()=>{u&&xr({filename:`minicheck_mobileye_${new Date().toISOString().split("T")[0]}`,sheetName:"Mobileye",rows:u,columns:y})};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(gn,{title:"Control Mobileye",description:"Estado de sensores y cmaras Mobileye",actions:l.jsx("div",{className:"flex gap-2",children:l.jsx(Na,{onExportView:v,onExportAll:v})})}),l.jsx(l1,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:o}),d&&l.jsx(kn,{label:"Cargando Mobileye..."}),f&&l.jsx(Fa,{message:"No se pudieron cargar los datos.",onRetry:p}),!d&&!f&&l.jsxs(l.Fragment,{children:[l.jsx(c1,{items:g}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80",children:[l.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-4",children:"Estado General Sensores"}),l.jsx(uc,{width:"100%",height:"100%",children:l.jsxs(cp,{data:m,children:[l.jsx(Pf,{strokeDasharray:"3 3",vertical:!1}),l.jsx(jc,{dataKey:"name",tick:{fontSize:10}}),l.jsx(Ac,{tick:{fontSize:10}}),l.jsx(Oa,{}),l.jsx(Qi,{dataKey:"value",name:"Cantidad",radius:[4,4,0,0],children:m.map((b,S)=>l.jsx(Rc,{fill:b.color},`cell-${S}`))})]})})]}),l.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?l.jsx(Oc,{columns:x,rows:u}):l.jsx(Pc,{label:"Sin registros",description:"No se encontraron datos."})})]})]})]})},k7e=()=>{const e=Vt(v=>v.context),t=Vt(v=>v.setContext),[r,n]=F.useState(""),[a,i]=F.useState(""),[s,o]=F.useState(""),c=F.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:p}=j7e(c),h=F.useMemo(()=>{if(!u)return[];const v=u.length,b=u.filter(_=>_.estado==="INCONSISTENTE").length,S=u.filter(_=>_.estado==="NO_FUNCIONA").length;return[{label:"Total Registros",value:v,icon:"clipboard"},{label:"Inconsistentes",value:b,icon:"alert-triangle",colorClass:"bg-yellow-50 text-yellow-600"},{label:"No Funciona",value:S,icon:"x-circle",colorClass:"bg-red-50 text-red-600"}]},[u]),g=F.useMemo(()=>{if(!u)return[];const v=u.filter(_=>_.estado==="OK").length,b=u.filter(_=>_.estado==="INCONSISTENTE").length,S=u.filter(_=>_.estado==="NO_FUNCIONA").length;return[{name:"OK",value:v,color:"#10b981"},{name:"INCONSISTENTE",value:b,color:"#f59e0b"},{name:"NO FUNCIONA",value:S,color:"#ef4444"}].filter(_=>_.value>0)},[u]),m=[{key:"bus_ppu",header:"PPU",value:v=>v.bus_ppu},{key:"terminal",header:"Terminal",render:v=>ur(v.terminal),value:v=>v.terminal},{key:"lectura",header:"Lectura",value:v=>v.lectura.toLocaleString("es-CL")},{key:"estado",header:"Estado",render:v=>{let b="bg-gray-100 text-gray-800";return v.estado==="OK"&&(b="bg-green-100 text-green-800"),v.estado==="INCONSISTENTE"&&(b="bg-yellow-100 text-yellow-800"),v.estado==="NO_FUNCIONA"&&(b="bg-red-100 text-red-800"),l.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${b}`,children:v.estado})},value:v=>v.estado},{key:"observacion",header:"Observacin",value:v=>v.observacion||""},{key:"updated_at",header:"Actualizado",render:v=>Ma(v.updated_at),value:v=>Ma(v.updated_at)}],x=m.map(v=>({header:v.header,key:v.key,value:v.value})),y=()=>{u&&xr({filename:`minicheck_odometro_${new Date().toISOString().split("T")[0]}`,sheetName:"Odometros",rows:u,columns:x})};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(gn,{title:"Control Odmetro",description:"Lecturas y estado de odmetros",actions:l.jsx("div",{className:"flex gap-2",children:l.jsx(Na,{onExportView:y,onExportAll:y})})}),l.jsx(l1,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:o}),d&&l.jsx(kn,{label:"Cargando Odmetros..."}),f&&l.jsx(Fa,{message:"No se pudieron cargar los datos.",onRetry:p}),!d&&!f&&l.jsxs(l.Fragment,{children:[l.jsx(c1,{items:h}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80 flex flex-col items-center justify-center",children:[l.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-2 w-full text-left",children:"Distribucin Estados"}),l.jsx(uc,{width:"100%",height:"100%",children:l.jsxs(aT,{children:[l.jsx(Vo,{data:g,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:g.map((v,b)=>l.jsx(Rc,{fill:v.color},`cell-${b}`))}),l.jsx(Oa,{}),l.jsx(cc,{})]})})]}),l.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?l.jsx(Oc,{columns:m,rows:u}):l.jsx(Pc,{label:"Sin registros",description:"No se encontraron datos."})})]})]})]})},O7e=()=>{const e=Vt(v=>v.context),t=Vt(v=>v.setContext),[r,n]=F.useState(""),[a,i]=F.useState(""),[s,o]=F.useState(""),c=F.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:p}=A7e(c),h=F.useMemo(()=>{if(!u)return[];const v=u.length,b=u.filter(A=>A.danio).length,S=u.filter(A=>A.residuos).length,_=u.filter(A=>!A.tiene).length;return[{label:"Total Registros",value:v,icon:"clipboard"},{label:"Con Dao",value:b,icon:"alert-triangle",colorClass:"bg-red-50 text-red-600"},{label:"Con Residuos",value:S,icon:"trash",colorClass:"bg-orange-50 text-orange-600"},{label:"Sin Publicidad",value:_,icon:"x-circle",colorClass:"bg-gray-50 text-gray-600"}]},[u]),g=F.useMemo(()=>{if(!u)return[];const v=u.filter(_=>_.danio).length,b=u.filter(_=>_.residuos).length,S=u.filter(_=>!_.tiene).length;return[{name:"Con Dao",value:v,color:"#ef4444"},{name:"Con Residuos",value:b,color:"#f97316"},{name:"Sin Pub.",value:S,color:"#64748b"}]},[u]),m=[{key:"bus_ppu",header:"PPU",value:v=>v.bus_ppu},{key:"terminal",header:"Terminal",render:v=>ur(v.terminal),value:v=>v.terminal},{key:"tiene",header:"Tiene",render:v=>v.tiene?l.jsx("span",{className:"text-green-600 font-bold",children:"S"}):l.jsx("span",{className:"text-gray-400",children:"NO"}),value:v=>v.tiene?"SI":"NO"},{key:"danio",header:"Dao",render:v=>v.danio?l.jsx("span",{className:"px-2 py-0.5 rounded bg-red-100 text-red-800 text-xs font-bold",children:"S"}):l.jsx("span",{className:"text-gray-400",children:"-"}),value:v=>v.danio?"SI":"NO"},{key:"residuos",header:"Residuos",render:v=>v.residuos?l.jsx("span",{className:"px-2 py-0.5 rounded bg-orange-100 text-orange-800 text-xs font-bold",children:"S"}):l.jsx("span",{className:"text-gray-400",children:"-"}),value:v=>v.residuos?"SI":"NO"},{key:"nombre_publicidad",header:"Nombre",value:v=>v.nombre_publicidad||"-"},{key:"updated_at",header:"Actualizado",render:v=>Ma(v.updated_at),value:v=>Ma(v.updated_at)}],x=m.map(v=>({header:v.header,key:v.key,value:v.value})),y=()=>{u&&xr({filename:`minicheck_publicidad_${new Date().toISOString().split("T")[0]}`,sheetName:"Publicidad",rows:u,columns:x})};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(gn,{title:"Control Publicidad",description:"Estado de publicidad en buses",actions:l.jsx("div",{className:"flex gap-2",children:l.jsx(Na,{onExportView:y,onExportAll:y})})}),l.jsx(l1,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:o}),d&&l.jsx(kn,{label:"Cargando publicidad..."}),f&&l.jsx(Fa,{message:"No se pudieron cargar los datos.",onRetry:p}),!d&&!f&&l.jsxs(l.Fragment,{children:[l.jsx(c1,{items:h}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80",children:[l.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-4",children:"Problemas Detectados"}),l.jsx(uc,{width:"100%",height:"100%",children:l.jsxs(cp,{data:g,children:[l.jsx(Pf,{strokeDasharray:"3 3",vertical:!1}),l.jsx(jc,{dataKey:"name",tick:{fontSize:10}}),l.jsx(Ac,{tick:{fontSize:10}}),l.jsx(Oa,{}),l.jsx(Qi,{dataKey:"value",name:"Cantidad",radius:[4,4,0,0],children:g.map((v,b)=>l.jsx(Rc,{fill:v.color},`cell-${b}`))})]})})]}),l.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?l.jsx(Oc,{columns:m,rows:u}):l.jsx(Pc,{label:"Sin registros",description:"No se encontraron datos."})})]})]})]})},P7e=[{ppu:"ABCD12",modelo:"Camin 3/4",estado:"operativo",odometro:123400,proximaMantencion:"2024-01-15",terminal:"EL_ROBLE"},{ppu:"EFGH34",modelo:"Furgn",estado:"en_taller",odometro:88400,proximaMantencion:"2024-02-01",terminal:"LA_REINA"},{ppu:"IJKL56",modelo:"Tracto",estado:"fuera_servicio",odometro:23e4,proximaMantencion:"2024-01-30",terminal:"EL_SALTO"}],oR=iw(P7e,(e,t)=>t!=null&&t.estado&&t.estado!=="todos"?e.estado===t.estado:!0),L7e=()=>{const e=Vt(g=>g.context),t=Vt(g=>g.setContext),[r,n]=F.useState({estado:"todos"}),[a,i]=F.useState(""),s=zt({queryKey:["flota",e,r],queryFn:()=>oR.list({terminalContext:e,filters:r,scope:"view"})}),o=s.data??[],c=F.useMemo(()=>[{key:"ppu",header:"PPU"},{key:"modelo",header:"Modelo"},{key:"estado",header:"Estado",render:g=>l.jsx("span",{className:"badge capitalize",children:g.estado}),value:g=>g.estado},{key:"odometro",header:"Odmetro"},{key:"proximaMantencion",header:"Mantencin",render:g=>Ma(g.proximaMantencion),value:g=>Ma(g.proximaMantencion)},{key:"terminal",header:"Terminal",render:g=>ur(g.terminal),value:g=>ur(g.terminal)}],[]),u=c.map(g=>({key:g.key,header:g.header,value:m=>g.value?g.value(m):m[g.key]})),d=()=>{xr({filename:"flota_vista",sheetName:"Flota",rows:o,columns:u})},f=async()=>{const g=await oR.list({terminalContext:e,scope:"all"});xr({filename:"flota_completo",sheetName:"Flota",rows:g,columns:u})},p=F.useMemo(()=>{const g={};return o.forEach(m=>{g[m.estado]=(g[m.estado]??0)+1}),Object.entries(g).map(([m,x])=>({estado:m,count:x}))},[o]),h=o.find(g=>g.ppu===a)??o[0];return l.jsxs("div",{className:"space-y-4",children:[l.jsx(gn,{title:"Estado de Flota",description:"Vista por PPU con ficha y grficas",actions:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"btn btn-primary",children:"Agregar unidad"}),l.jsx(Na,{onExportView:d,onExportAll:f})]})}),l.jsx(ss,{terminalContext:e,onTerminalChange:t,children:l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"label",children:"Estado"}),l.jsxs("select",{className:"input",value:r.estado,onChange:g=>n({estado:g.target.value}),children:[l.jsx("option",{value:"todos",children:"Todos"}),l.jsx("option",{value:"operativo",children:"Operativo"}),l.jsx("option",{value:"en_taller",children:"En taller"}),l.jsx("option",{value:"fuera_servicio",children:"Fuera de servicio"})]})]})}),s.isLoading&&l.jsx(kn,{}),s.isError&&l.jsx(Fa,{onRetry:s.refetch}),!s.isLoading&&!s.isError&&o.length===0&&l.jsx(Pc,{description:"Sin unidades"}),!s.isLoading&&!s.isError&&o.length>0&&l.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[l.jsx("div",{className:"md:col-span-2 space-y-3",children:l.jsx(Oc,{columns:c,rows:o})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"card p-4",children:[l.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Resumen por estado"}),l.jsx("div",{className:"mt-2 h-48",children:l.jsx(uc,{width:"100%",height:"100%",children:l.jsxs(cp,{data:p,children:[l.jsx(Pf,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),l.jsx(jc,{dataKey:"estado",tick:{fontSize:12}}),l.jsx(Ac,{allowDecimals:!1}),l.jsx(Oa,{}),l.jsx(Qi,{dataKey:"count",fill:"#3c5eff",radius:[6,6,0,0]})]})})})]}),h&&l.jsxs("div",{className:"card p-4",children:[l.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[l.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Ficha rpida"}),l.jsx("select",{className:"input w-32",value:h.ppu,onChange:g=>i(g.target.value),children:o.map(g=>l.jsx("option",{value:g.ppu,children:g.ppu},g.ppu))})]}),l.jsxs("dl",{className:"space-y-2 text-sm text-slate-700",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("dt",{className:"font-semibold",children:"Modelo"}),l.jsx("dd",{children:h.modelo})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("dt",{className:"font-semibold",children:"Estado"}),l.jsx("dd",{className:"badge capitalize",children:h.estado})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("dt",{className:"font-semibold",children:"Odmetro"}),l.jsx("dd",{children:h.odometro.toLocaleString("es-CL")})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("dt",{className:"font-semibold",children:"Prxima mantencin"}),l.jsx("dd",{children:Ma(h.proximaMantencion)})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("dt",{className:"font-semibold",children:"Terminal"}),l.jsx("dd",{children:ur(h.terminal)})]})]})]})]})]})]})},up={TERMINAL:["El Roble"],CABEZAL:["El Descanso","Aeropuerto","Intermodal La Cisterna"]},d0=e=>{const t={};return e.forEach(r=>{t[r.supply_id]=(t[r.supply_id]||0)+r.quantity}),t},f0=(e,t,r,n)=>e.filter(a=>a.location_type===t&&a.location_name===r&&n.includes(a.period)),I7e=(e,t)=>{const r={},n=f0(e,"TERMINAL","El Roble",["DAY"]),a=d0(n);Object.entries(a).forEach(([o,c])=>{r[o]=(r[o]||0)+c*5});const i=f0(e,"TERMINAL","El Roble",["NIGHT"]),s=d0(i);return Object.entries(s).forEach(([o,c])=>{r[o]=(r[o]||0)+c*4}),up.CABEZAL.forEach(o=>{const c=f0(e,"CABEZAL",o,["DAY"]),u=d0(c);Object.entries(u).forEach(([d,f])=>{r[d]=(r[d]||0)+f*5})}),IH(r,t)},R7e=(e,t)=>{const r={},n=f0(e,"TERMINAL","El Roble",["DAY"]),a=d0(n);Object.entries(a).forEach(([o,c])=>{r[o]=(r[o]||0)+c*2});const i=f0(e,"TERMINAL","El Roble",["NIGHT"]),s=d0(i);return Object.entries(s).forEach(([o,c])=>{r[o]=(r[o]||0)+c*3}),up.CABEZAL.forEach(o=>{const c=f0(e,"CABEZAL",o,["WEEKEND"]),u=d0(c);Object.entries(u).forEach(([d,f])=>{r[d]=(r[d]||0)+f*2})}),IH(r,t)},IH=(e,t)=>{const r=new Map(t.map(n=>[n.id,n]));return Object.entries(e).filter(([,n])=>n>0).map(([n,a])=>{var i;return{supply_id:n,supply_name:((i=r.get(n))==null?void 0:i.name)||"Desconocido",quantity:a}}).sort((n,a)=>n.supply_name.localeCompare(a.supply_name))},D7e=()=>{const e=new Date().getDay();return e===1?"SEMANA":e===5?"FIN_SEMANA":"EXTRA"},M7e=(e,t)=>{if(!t)return null;const r=new Date(e);return r.setDate(r.getDate()+t),r},eA=(e,t=3)=>{if(!e)return!1;const r=new Date(e),n=new Date;return Math.ceil((r.getTime()-n.getTime())/(1e3*60*60*24))<=t},tA=e=>({SEMANA:"Semana",FIN_SEMANA:"Fin de Semana",EXTRA:"Extra"})[e]||e,lR=e=>e==="PENDIENTE"?"Pendiente":"Retirado",a_=async()=>{if(!Zt())return[];const{data:e,error:t}=await Ee.from("supplies").select("*").order("name");if(t)throw console.error("Error fetching supplies:",t),t;return e||[]},F7e=async e=>{const{data:t,error:r}=await Ee.from("supplies").insert(e).select().single();if(r)throw console.error("Error creating supply:",r),r;return t},$7e=async(e,t)=>{const{data:r,error:n}=await Ee.from("supplies").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating supply:",n),n;return r},B7e=async e=>{const{error:t}=await Ee.from("supplies").delete().eq("id",e);if(t)throw console.error("Error deleting supply:",t),t},RH=async()=>{if(!Zt())return[];const{data:e,error:t}=await Ee.from("supply_consumption_profiles").select("*").order("location_type").order("location_name").order("period");if(t)throw console.error("Error fetching consumption profiles:",t),t;return e||[]},U7e=async e=>{const{data:t,error:r}=await Ee.from("supply_consumption_profiles").upsert(e,{onConflict:"location_type,location_name,period,supply_id"}).select().single();if(r)throw console.error("Error upserting consumption profile:",r),r;return t},DH=async e=>{if(!Zt())return[];let t=Ee.from("supply_requests").select("*").order("requested_at",{ascending:!1});e!=null&&e.status&&(t=t.eq("status",e.status)),e!=null&&e.terminal&&(t=t.eq("terminal",e.terminal));const{data:r,error:n}=await t;if(n)throw console.error("Error fetching supply requests:",n),n;return r||[]},z7e=async e=>{if(!Zt())return null;const{data:t,error:r}=await Ee.from("supply_requests").select("*").eq("id",e).single();if(r)throw console.error("Error fetching supply request:",r),r;const{data:n,error:a}=await Ee.from("supply_request_items").select("*, supply:supplies(*)").eq("request_id",e);if(a)throw console.error("Error fetching request items:",a),a;return{...t,items:n||[]}},q7e=async(e,t,r)=>{const{data:n,error:a}=await Ee.from("supply_requests").insert({terminal:e.terminal,request_type:e.request_type,created_by:t,consumption_snapshot:r}).select().single();if(a)throw console.error("Error creating supply request:",a),a;const i=e.items.filter(s=>s.quantity>0).map(s=>({request_id:n.id,supply_id:s.supply_id,quantity:s.quantity,is_extra:s.is_extra}));if(i.length>0){const{error:s}=await Ee.from("supply_request_items").insert(i);if(s)throw console.error("Error creating request items:",s),s}try{await H7e(n,r||{})}catch(s){console.error("Error sending request email:",s)}return n},H7e=async(e,t)=>{let r;e.request_type==="SEMANA"?r="MONDAY":e.request_type==="FIN_SEMANA"?r="FRIDAY":r="MANUAL";const{data:n,error:a}=await Ee.from("supply_email_settings").select("*").eq("trigger",r).eq("enabled",!0).single();if(a||!n){console.log(`No enabled email settings found for trigger: ${r}`);return}if(!n.recipients){console.log(`No recipients configured for trigger: ${r}`);return}const i=Object.entries(t).map(([u,d])=>`<tr><td style="padding: 8px; border-bottom: 1px solid #e2e8f0;">${u}</td><td style="padding: 8px; border-bottom: 1px solid #e2e8f0; text-align: center;">${d}</td></tr>`).join(""),s=Object.values(t).reduce((u,d)=>u+d,0),o=`
        <p><strong>Terminal:</strong> ${e.terminal}</p>
        <p><strong>Tipo:</strong> ${e.request_type==="SEMANA"?"Semanal":e.request_type==="FIN_SEMANA"?"Fin de Semana":"Extra"}</p>
        <p><strong>Solicitado por:</strong> ${e.created_by}</p>
        <p><strong>Fecha:</strong> ${new Date(e.requested_at).toLocaleString("es-CL")}</p>
        
        <table style="width: 100%; border-collapse: collapse; margin-top: 16px;">
            <thead>
                <tr style="background-color: #f8fafc;">
                    <th style="padding: 10px; text-align: left; border-bottom: 2px solid #e2e8f0;">Insumo</th>
                    <th style="padding: 10px; text-align: center; border-bottom: 2px solid #e2e8f0;">Cantidad</th>
                </tr>
            </thead>
            <tbody>
                ${i}
            </tbody>
            <tfoot>
                <tr style="background-color: #f8fafc; font-weight: bold;">
                    <td style="padding: 10px;">TOTAL</td>
                    <td style="padding: 10px; text-align: center;">${s} unidades</td>
                </tr>
            </tfoot>
        </table>
        
        ${n.body?`<div style="margin-top: 24px;">${n.body}</div>`:""}
    `,{emailService:c}=await dy(async()=>{const{emailService:u}=await Promise.resolve().then(()=>Koe);return{emailService:u}},void 0,import.meta.url);await c.sendEmail({audience:"manual",manualRecipients:n.recipients.split(",").map(u=>u.trim()),subject:n.subject,body:o,module:"informativos"})},W7e=async e=>{const{data:t,error:r}=await Ee.from("supply_requests").update({status:"RETIRADO",retrieved_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw console.error("Error marking request as retrieved:",r),r;return t},V7e=async e=>{const{error:t}=await Ee.from("supply_requests").delete().eq("id",e);if(t)throw console.error("Error deleting supply request:",t),t},G7e=async(e,t)=>{const r=t.name.split(".").pop(),a=`receipts/${`${e}_${Date.now()}.${r}`}`,{error:i}=await Ee.storage.from("supply-receipts").upload(a,t);if(i)throw console.error("Error uploading receipt:",i),i;const{error:s}=await Ee.from("supply_requests").update({receipt_path:a}).eq("id",e);if(s)throw console.error("Error updating receipt path:",s),s;return a},K7e=async e=>{const{data:t}=await Ee.storage.from("supply-receipts").createSignedUrl(e,3600);return(t==null?void 0:t.signedUrl)||""},X7e=async()=>{if(!Zt())return[];const{data:e,error:t}=await Ee.from("supply_deliveries").select("*, supply:supplies(*)").order("delivered_at",{ascending:!1});if(t)throw console.error("Error fetching deliveries with supplies:",t),t;return e||[]},Y7e=async(e,t,r)=>{const n=new Date,a=M7e(n,r),{data:i,error:s}=await Ee.from("supply_deliveries").insert({...e,created_by:t,delivered_at:n.toISOString(),next_delivery_at:(a==null?void 0:a.toISOString())||null}).select().single();if(s)throw console.error("Error creating delivery:",s),s;return i},MH=async()=>{if(!Zt())return[];const{data:e,error:t}=await Ee.from("supply_email_settings").select("*").order("trigger");if(t)throw console.error("Error fetching email settings:",t),t;return e||[]},cR=async(e,t)=>{const{data:r,error:n}=await Ee.from("supply_email_settings").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating email settings:",n),n;return r},J7e=async(e,t)=>{const{data:r,error:n}=await Ee.from("supply_email_settings").insert({trigger:e,...t}).select().single();if(n)throw console.error("Error creating email settings:",n),n;return r},Q7e=async()=>{const e=await MH();if(e.length>0)return e;const t=[{trigger:"MONDAY",recipients:"",subject:"Solicitud Semanal de Insumos",body:"",enabled:!0},{trigger:"FRIDAY",recipients:"",subject:"Solicitud Fin de Semana - Insumos",body:"",enabled:!0},{trigger:"MANUAL",recipients:"",subject:"Solicitud Manual de Insumos",body:"",enabled:!0}],r=[];for(const n of t)try{const a=await J7e(n.trigger,{recipients:n.recipients,subject:n.subject,body:n.body,enabled:n.enabled});r.push(a)}catch(a){console.error(`Error creating default email setting for ${n.trigger}:`,a)}return r},Z7e=async()=>{if(!Zt())return{pending:0,retrieved:0};const{data:e,error:t}=await Ee.from("supply_requests").select("status");if(t)throw console.error("Error fetching request stats:",t),t;const r=(e==null?void 0:e.filter(a=>a.status==="PENDIENTE").length)||0,n=(e==null?void 0:e.filter(a=>a.status==="RETIRADO").length)||0;return{pending:r,retrieved:n}},eMe=async(e=7)=>{if(!Zt())return[];const t=new Date;t.setDate(t.getDate()+e);const{data:r,error:n}=await Ee.from("supply_deliveries").select("*, supply:supplies(*)").not("next_delivery_at","is",null).lte("next_delivery_at",t.toISOString()).order("next_delivery_at");if(n)throw console.error("Error fetching upcoming deliveries:",n),n;return r||[]},tMe=()=>{const[e,t]=F.useState({supplies:[],requestStats:{pending:0,retrieved:0},upcomingDeliveries:[],recentRequests:[]}),[r,n]=F.useState(!0);F.useEffect(()=>{(async()=>{try{const[s,o,c,u]=await Promise.all([a_(),Z7e(),eMe(7),DH()]);t({supplies:s,requestStats:o,upcomingDeliveries:c,recentRequests:u.slice(0,5)})}catch(s){console.error("Error loading dashboard stats:",s)}finally{n(!1)}})()},[]),e.supplies.filter(i=>i.min_stock>0&&i.min_stock>0);const a=e.upcomingDeliveries.filter(i=>eA(i.next_delivery_at,3));return r?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[l.jsx("div",{className:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-brand-100 text-brand-600",children:l.jsx(me,{name:"package",size:22})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Insumos"}),l.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.supplies.length})]})]})}),l.jsx("div",{className:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-warning-100 text-warning-600",children:l.jsx(me,{name:"clock",size:22})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Pendientes"}),l.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.requestStats.pending})]})]})}),l.jsx("div",{className:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-success-100 text-success-600",children:l.jsx(me,{name:"check-circle",size:22})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Retiradas"}),l.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.requestStats.retrieved})]})]})}),l.jsx("div",{className:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`flex h-11 w-11 items-center justify-center rounded-xl ${a.length>0?"bg-danger-100 text-danger-600":"bg-slate-100 text-slate-500"}`,children:l.jsx(me,{name:"alert-triangle",size:22})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Alertas"}),l.jsx("p",{className:"text-2xl font-bold text-slate-800",children:a.length})]})]})})]}),l.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[l.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-4",children:[l.jsx("h3",{className:"font-semibold text-slate-800",children:"Solicitudes Recientes"}),l.jsx(me,{name:"file-text",size:18,className:"text-slate-400"})]}),l.jsx("div",{className:"divide-y divide-slate-100",children:e.recentRequests.length===0?l.jsx("div",{className:"px-5 py-8 text-center text-sm text-slate-500",children:"No hay solicitudes registradas"}):e.recentRequests.map(i=>l.jsxs("div",{className:"flex items-center gap-4 px-5 py-3.5",children:[l.jsx("div",{className:`flex h-9 w-9 items-center justify-center rounded-lg ${i.status==="PENDIENTE"?"bg-warning-100 text-warning-600":"bg-success-100 text-success-600"}`,children:l.jsx(me,{name:i.status==="PENDIENTE"?"clock":"check",size:16})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("p",{className:"text-sm font-medium text-slate-800 truncate",children:[tA(i.request_type)," - ",i.terminal]}),l.jsx("p",{className:"text-xs text-slate-500",children:new Date(i.requested_at).toLocaleDateString("es-CL")})]}),l.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${i.status==="PENDIENTE"?"bg-warning-100 text-warning-700":"bg-success-100 text-success-700"}`,children:i.status==="PENDIENTE"?"Pendiente":"Retirado"})]},i.id))})]}),l.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-4",children:[l.jsx("h3",{className:"font-semibold text-slate-800",children:"Entregas Proximas"}),l.jsx(me,{name:"calendar",size:18,className:"text-slate-400"})]}),l.jsx("div",{className:"divide-y divide-slate-100",children:e.upcomingDeliveries.length===0?l.jsx("div",{className:"px-5 py-8 text-center text-sm text-slate-500",children:"No hay entregas programadas"}):e.upcomingDeliveries.slice(0,5).map(i=>{const s=eA(i.next_delivery_at,3);return l.jsxs("div",{className:"flex items-center gap-4 px-5 py-3.5",children:[l.jsx("div",{className:`flex h-9 w-9 items-center justify-center rounded-lg ${s?"bg-danger-100 text-danger-600":"bg-slate-100 text-slate-600"}`,children:l.jsx(me,{name:"user",size:16})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium text-slate-800 truncate",children:i.staff_name}),l.jsx("p",{className:"text-xs text-slate-500",children:i.next_delivery_at?new Date(i.next_delivery_at).toLocaleDateString("es-CL"):"Sin fecha"})]}),s&&l.jsx("span",{className:"inline-flex items-center rounded-full bg-danger-100 px-2.5 py-0.5 text-xs font-medium text-danger-700",children:"Vencida"})]},i.id)})})]})]}),l.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-4",children:[l.jsx("h3",{className:"font-semibold text-slate-800",children:"Catalogo de Insumos"}),l.jsxs("span",{className:"text-sm text-slate-500",children:[e.supplies.length," insumos"]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[l.jsx("th",{className:"px-5 py-3",children:"Nombre"}),l.jsx("th",{className:"px-5 py-3",children:"Unidad"}),l.jsx("th",{className:"px-5 py-3 text-center",children:"Vida Util"}),l.jsx("th",{className:"px-5 py-3 text-center",children:"Stock Min"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:e.supplies.map(i=>l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"px-5 py-3 text-sm font-medium text-slate-800",children:i.name}),l.jsx("td",{className:"px-5 py-3 text-sm text-slate-600",children:i.unit}),l.jsx("td",{className:"px-5 py-3 text-center text-sm text-slate-600",children:i.life_days?`${i.life_days} dias`:"-"}),l.jsx("td",{className:"px-5 py-3 text-center text-sm text-slate-600",children:i.min_stock>0?i.min_stock:"-"})]},i.id))})]})})]})]})},rMe=({onSuccess:e,onCancel:t})=>{const r=jr(j=>j.session),[n,a]=F.useState([]),[i,s]=F.useState([]),[o,c]=F.useState(!0),[u,d]=F.useState(!1),[f,p]=F.useState(up.TERMINAL[0]),[h,g]=F.useState(D7e()),[m,x]=F.useState([]),[y,v]=F.useState({supply_id:"",quantity:0});F.useEffect(()=>{(async()=>{try{const[E,T]=await Promise.all([a_(),RH()]);a(E),s(T)}catch(E){console.error("Error loading form data:",E)}finally{c(!1)}})()},[]),F.useEffect(()=>{if(n.length===0||i.length===0)return;let j;h==="SEMANA"?j=I7e(i,n):h==="FIN_SEMANA"?j=R7e(i,n):j=[],x(j.map(E=>({...E,is_extra:!1})))},[h,n,i]);const b=(j,E)=>{x(T=>T.map(L=>L.supply_id===j?{...L,quantity:Math.max(0,E)}:L))},S=()=>{if(!y.supply_id||y.quantity<=0)return;const j=n.find(T=>T.id===y.supply_id);if(!j)return;const E=m.find(T=>T.supply_id===y.supply_id);x(E?T=>T.map(L=>L.supply_id===y.supply_id?{...L,quantity:L.quantity+y.quantity}:L):T=>[...T,{supply_id:y.supply_id,supply_name:j.name,quantity:y.quantity,is_extra:!0}]),v({supply_id:"",quantity:0})},_=j=>{x(E=>E.filter(T=>T.supply_id!==j))},A=async()=>{const j=m.filter(E=>E.quantity>0);if(j.length===0){alert("Debe agregar al menos un insumo");return}d(!0);try{const E={};j.forEach(T=>{E[T.supply_name]=T.quantity}),await q7e({terminal:f,request_type:h,items:j.map(T=>({supply_id:T.supply_id,quantity:T.quantity,is_extra:T.is_extra}))},(r==null?void 0:r.supervisorName)||"Usuario",E),e()}catch(E){console.error("Error creating request:",E),alert("Error al crear la solicitud")}finally{d(!1)}};return o?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):l.jsxs("div",{className:"space-y-5",children:[l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Terminal"}),l.jsx("select",{value:f,onChange:j=>p(j.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:up.TERMINAL.map(j=>l.jsx("option",{value:j,children:j},j))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Tipo de Solicitud"}),l.jsxs("select",{value:h,onChange:j=>g(j.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:[l.jsx("option",{value:"SEMANA",children:"Semana (Lun-Vie)"}),l.jsx("option",{value:"FIN_SEMANA",children:"Fin de Semana"}),l.jsx("option",{value:"EXTRA",children:"Extra"})]})]})]}),h!=="EXTRA"&&l.jsx("div",{className:"rounded-lg bg-brand-50 p-3 text-sm text-brand-700",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(me,{name:"info",size:18,className:"mt-0.5 flex-shrink-0"}),l.jsx("p",{children:h==="SEMANA"?"Calculo automatico para Lunes a Viernes incluyendo noches de lunes a jueves.":"Calculo automatico para Viernes noche, Sabado y Domingo completos."})]})}),l.jsx("div",{className:"rounded-lg border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-50 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[l.jsx("th",{className:"px-4 py-2",children:"Insumo"}),l.jsx("th",{className:"px-4 py-2 text-right w-24",children:"Cantidad"}),l.jsx("th",{className:"px-4 py-2 w-12"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:m.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-4 py-6 text-center text-slate-500",children:"No hay insumos. Agregue items extra."})}):m.map(j=>l.jsxs("tr",{children:[l.jsxs("td",{className:"px-4 py-2 text-slate-800",children:[j.supply_name,j.is_extra&&l.jsx("span",{className:"ml-2 text-xs text-brand-500",children:"(extra)"})]}),l.jsx("td",{className:"px-4 py-2",children:l.jsx("input",{type:"number",min:"0",value:j.quantity,onChange:E=>b(j.supply_id,parseInt(E.target.value)||0),className:"w-full rounded border border-slate-300 px-2 py-1 text-right text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})}),l.jsx("td",{className:"px-4 py-2 text-center",children:l.jsx("button",{onClick:()=>_(j.supply_id),className:"rounded p-1 text-slate-400 hover:bg-danger-100 hover:text-danger-600",children:l.jsx(me,{name:"x",size:16})})})]},j.supply_id))})]})}),l.jsxs("div",{className:"rounded-lg border border-dashed border-slate-300 p-4",children:[l.jsx("p",{className:"mb-3 text-sm font-medium text-slate-700",children:"Agregar insumo extra"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("select",{value:y.supply_id,onChange:j=>v(E=>({...E,supply_id:j.target.value})),className:"flex-1 rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:[l.jsx("option",{value:"",children:"Seleccionar insumo..."}),n.filter(j=>!m.some(E=>E.supply_id===j.id)).map(j=>l.jsx("option",{value:j.id,children:j.name},j.id))]}),l.jsx("input",{type:"number",min:"1",placeholder:"Cant.",value:y.quantity||"",onChange:j=>v(E=>({...E,quantity:parseInt(j.target.value)||0})),className:"w-20 rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"}),l.jsx("button",{onClick:S,disabled:!y.supply_id||y.quantity<=0,className:"rounded-lg bg-slate-100 px-3 py-2 text-slate-600 hover:bg-slate-200 disabled:opacity-50",children:l.jsx(me,{name:"plus",size:18})})]})]}),l.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-slate-50 px-4 py-3",children:[l.jsxs("span",{className:"text-sm font-medium text-slate-600",children:["Total items: ",m.filter(j=>j.quantity>0).length]}),l.jsxs("span",{className:"text-sm font-bold text-slate-800",children:[m.reduce((j,E)=>j+E.quantity,0)," unidades"]})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:t,className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),l.jsxs("button",{onClick:A,disabled:u||m.filter(j=>j.quantity>0).length===0,className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[u&&l.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Crear Solicitud"]})]})]})},nMe=({onRefresh:e})=>{const[t,r]=F.useState([]),[n,a]=F.useState(!0),[i,s]=F.useState(!1),[o,c]=F.useState(null),[u,d]=F.useState(!1),[f,p]=F.useState("ALL"),[h,g]=F.useState(null),[m,x]=F.useState(null),[y,v]=F.useState(!1),[b,S]=F.useState(null),_=async()=>{try{a(!0);const D=await DH(f!=="ALL"?{status:f}:void 0);r(D)}catch(D){console.error("Error loading requests:",D)}finally{a(!1)}};F.useEffect(()=>{_()},[f]);const A=async D=>{try{const z=await z7e(D);c(z),d(!0)}catch(z){console.error("Error loading request detail:",z)}},j=D=>{g(D),x(null),S(null)},E=async()=>{if(!(!h||!m)){v(!0),S(null);try{await G7e(h,m),await W7e(h),g(null),x(null),await _(),e==null||e()}catch(D){console.error("Error closing request:",D);const z=D instanceof Error?D.message:"Error desconocido";z.includes("Bucket not found")||z.includes("not found")?S('El bucket de almacenamiento no existe. Contacte al administrador para crear el bucket "supply-receipts" en Supabase Storage.'):z.includes("security")||z.includes("policy")?S("Error de permisos. Verifique las polticas del bucket en Supabase."):S(`Error al cerrar solicitud: ${z}`)}finally{v(!1)}}},T=D=>{var Y;const z=(Y=D.target.files)==null?void 0:Y[0];if(z){if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(z.type)){S("Tipo de archivo no vlido. Use PDF, JPG o PNG.");return}if(z.size>5*1024*1024){S("El archivo excede 5MB.");return}x(z),S(null)}},L=async D=>{if(confirm("Eliminar esta solicitud?"))try{await V7e(D),await _(),e==null||e()}catch(z){console.error("Error deleting request:",z)}},O=async D=>{try{const z=await K7e(D);window.open(z,"_blank")}catch(z){console.error("Error getting receipt URL:",z)}},I=()=>{s(!1),_(),e==null||e()};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>p("ALL"),className:`rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${f==="ALL"?"bg-brand-500 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Todas"}),l.jsx("button",{onClick:()=>p("PENDIENTE"),className:`rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${f==="PENDIENTE"?"bg-warning-500 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Pendientes"}),l.jsx("button",{onClick:()=>p("RETIRADO"),className:`rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${f==="RETIRADO"?"bg-success-500 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Retiradas"})]}),l.jsxs("button",{onClick:()=>s(!0),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 transition-colors",children:[l.jsx(me,{name:"plus",size:18}),l.jsx("span",{children:"Nueva Solicitud"})]})]}),l.jsx("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:n?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):t.length===0?l.jsxs("div",{className:"px-5 py-12 text-center",children:[l.jsx(me,{name:"inbox",size:40,className:"mx-auto text-slate-300 mb-3"}),l.jsx("p",{className:"text-sm text-slate-500",children:"No hay solicitudes registradas"})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[l.jsx("th",{className:"px-4 py-3",children:"Fecha"}),l.jsx("th",{className:"px-4 py-3",children:"Tipo"}),l.jsx("th",{className:"px-4 py-3",children:"Terminal"}),l.jsx("th",{className:"px-4 py-3",children:"Estado"}),l.jsx("th",{className:"px-4 py-3",children:"Creado por"}),l.jsx("th",{className:"px-4 py-3 text-right",children:"Acciones"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:t.map(D=>l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:new Date(D.requested_at).toLocaleDateString("es-CL")}),l.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:tA(D.request_type)}),l.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:D.terminal}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${D.status==="PENDIENTE"?"bg-warning-100 text-warning-700":"bg-success-100 text-success-700"}`,children:lR(D.status)})}),l.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:D.created_by}),l.jsx("td",{className:"px-4 py-3",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[l.jsx("button",{onClick:()=>A(D.id),className:"rounded-lg p-1.5 text-slate-500 hover:bg-slate-100 hover:text-brand-600",title:"Ver detalle",children:l.jsx(me,{name:"eye",size:16})}),D.status==="PENDIENTE"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>j(D.id),className:"rounded-lg p-1.5 text-slate-500 hover:bg-success-100 hover:text-success-600",title:"Cerrar solicitud (requiere boleta)",children:l.jsx(me,{name:"check",size:16})}),l.jsx("button",{onClick:()=>L(D.id),className:"rounded-lg p-1.5 text-slate-500 hover:bg-danger-100 hover:text-danger-600",title:"Eliminar",children:l.jsx(me,{name:"trash",size:16})})]}),D.receipt_path&&l.jsx("button",{onClick:()=>O(D.receipt_path),className:"rounded-lg p-1.5 text-slate-500 hover:bg-slate-100 hover:text-brand-600",title:"Ver boleta",children:l.jsx(me,{name:"file",size:16})})]})})]},D.id))})]})})}),i&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/60 p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"relative mt-8 w-full max-w-2xl rounded-2xl bg-white p-6 shadow-xl",children:[l.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Nueva Solicitud"}),l.jsx("button",{onClick:()=>s(!1),className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:l.jsx(me,{name:"x",size:20})})]}),l.jsx(rMe,{onSuccess:I,onCancel:()=>s(!1)})]})}),u&&o&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/60 p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"relative mt-8 w-full max-w-lg rounded-2xl bg-white p-6 shadow-xl",children:[l.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Detalle Solicitud"}),l.jsx("button",{onClick:()=>{d(!1),c(null)},className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:l.jsx(me,{name:"x",size:20})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Tipo:"}),l.jsx("span",{className:"ml-2 font-medium text-slate-800",children:tA(o.request_type)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Estado:"}),l.jsx("span",{className:`ml-2 font-medium ${o.status==="PENDIENTE"?"text-warning-600":"text-success-600"}`,children:lR(o.status)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Terminal:"}),l.jsx("span",{className:"ml-2 font-medium text-slate-800",children:o.terminal})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Fecha:"}),l.jsx("span",{className:"ml-2 font-medium text-slate-800",children:new Date(o.requested_at).toLocaleDateString("es-CL")})]})]}),l.jsx("div",{className:"rounded-lg border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-50 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[l.jsx("th",{className:"px-4 py-2",children:"Insumo"}),l.jsx("th",{className:"px-4 py-2 text-right",children:"Cantidad"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:o.items.map(D=>{var z;return l.jsxs("tr",{children:[l.jsxs("td",{className:"px-4 py-2 text-slate-800",children:[((z=D.supply)==null?void 0:z.name)||"Desconocido",D.is_extra&&l.jsx("span",{className:"ml-2 text-xs text-brand-500",children:"(extra)"})]}),l.jsx("td",{className:"px-4 py-2 text-right font-medium text-slate-800",children:D.quantity})]},D.id)})})]})})]})]})}),h&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/60 p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"relative mt-8 w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[l.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Cerrar Solicitud"}),l.jsx("button",{onClick:()=>g(null),className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:l.jsx(me,{name:"x",size:20})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"rounded-lg bg-warning-50 p-4 text-sm text-warning-800",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(me,{name:"alert-triangle",size:18,className:"mt-0.5 flex-shrink-0"}),l.jsxs("p",{children:[l.jsx("strong",{children:"Obligatorio:"})," Debe adjuntar la boleta o comprobante para cerrar esta solicitud."]})]})}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700",children:"Boleta o Comprobante (PDF, JPG, PNG - max 5MB) *"}),l.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:T,className:"block w-full text-sm text-slate-500 file:mr-4 file:rounded-lg file:border-0 file:bg-brand-50 file:px-4 file:py-2 file:text-sm file:font-medium file:text-brand-700 hover:file:bg-brand-100"}),m&&l.jsxs("p",{className:"mt-2 flex items-center gap-2 text-sm text-success-600",children:[l.jsx(me,{name:"check",size:16}),m.name]})]}),b&&l.jsx("div",{className:"rounded-lg bg-danger-50 p-3 text-sm text-danger-700",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(me,{name:"alert-triangle",size:16,className:"mt-0.5 flex-shrink-0"}),l.jsx("p",{children:b})]})}),l.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[l.jsx("button",{onClick:()=>g(null),className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),l.jsxs("button",{onClick:E,disabled:!m||y,className:"inline-flex items-center gap-2 rounded-lg bg-success-500 px-4 py-2 text-sm font-medium text-white hover:bg-success-600 disabled:opacity-50",children:[y&&l.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Cerrar Solicitud"]})]})]})]})})]})},aMe=()=>{const e=jr(v=>v.session),[t,r]=F.useState([]),[n,a]=F.useState([]),[i,s]=F.useState([]),[o,c]=F.useState(!0),[u,d]=F.useState(!1),[f,p]=F.useState(!1),[h,g]=F.useState({supply_id:"",staff_rut:"",staff_name:"",quantity:1,notes:""}),m=async()=>{try{const[v,b,S]=await Promise.all([a_(),X7e(),c9({mode:"ALL"},{cargo:"cleaner",status:"ACTIVO"})]);r(v),a(b),s(S)}catch(v){console.error("Error loading deliveries data:",v)}finally{c(!1)}};F.useEffect(()=>{m()},[]);const x=v=>{const b=i.find(S=>S.rut===v);g(S=>({...S,staff_rut:v,staff_name:(b==null?void 0:b.nombre)||""}))},y=async()=>{if(!h.supply_id||!h.staff_rut||h.quantity<=0){alert("Complete todos los campos requeridos");return}p(!0);try{const v=t.find(b=>b.id===h.supply_id);await Y7e(h,(e==null?void 0:e.supervisorName)||"Usuario",(v==null?void 0:v.life_days)||null),d(!1),g({supply_id:"",staff_rut:"",staff_name:"",quantity:1,notes:""}),await m()}catch(v){console.error("Error creating delivery:",v),alert("Error al registrar la entrega")}finally{p(!1)}};return o?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Registro de entregas de insumos a personal de limpieza"}),l.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600",children:[l.jsx(me,{name:"plus",size:18}),l.jsx("span",{children:"Nueva Entrega"})]})]}),l.jsx("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:n.length===0?l.jsxs("div",{className:"px-5 py-12 text-center",children:[l.jsx(me,{name:"package",size:40,className:"mx-auto text-slate-300 mb-3"}),l.jsx("p",{className:"text-sm text-slate-500",children:"No hay entregas registradas"})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[l.jsx("th",{className:"px-4 py-3",children:"Fecha"}),l.jsx("th",{className:"px-4 py-3",children:"Personal"}),l.jsx("th",{className:"px-4 py-3",children:"Insumo"}),l.jsx("th",{className:"px-4 py-3 text-center",children:"Cantidad"}),l.jsx("th",{className:"px-4 py-3",children:"Proxima Entrega"}),l.jsx("th",{className:"px-4 py-3",children:"Notas"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:n.map(v=>{var S;const b=eA(v.next_delivery_at,3);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:new Date(v.delivered_at).toLocaleDateString("es-CL")}),l.jsx("td",{className:"px-4 py-3",children:l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-slate-800",children:v.staff_name}),l.jsx("p",{className:"text-xs text-slate-500",children:v.staff_rut})]})}),l.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:((S=v.supply)==null?void 0:S.name)||"Desconocido"}),l.jsx("td",{className:"px-4 py-3 text-center text-sm font-medium text-slate-800",children:v.quantity}),l.jsx("td",{className:"px-4 py-3",children:v.next_delivery_at?l.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${b?"bg-danger-100 text-danger-700":"bg-slate-100 text-slate-600"}`,children:new Date(v.next_delivery_at).toLocaleDateString("es-CL")}):l.jsx("span",{className:"text-sm text-slate-400",children:"-"})}),l.jsx("td",{className:"px-4 py-3 text-sm text-slate-500",children:v.notes||"-"})]},v.id)})})]})})}),u&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/60 p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"relative mt-8 w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[l.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Nueva Entrega"}),l.jsx("button",{onClick:()=>d(!1),className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:l.jsx(me,{name:"x",size:20})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Personal (Cleaner)"}),l.jsxs("select",{value:h.staff_rut,onChange:v=>x(v.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:[l.jsx("option",{value:"",children:"Seleccionar cleaner..."}),i.map(v=>l.jsxs("option",{value:v.rut,children:[v.nombre," (",v.rut,")"]},v.rut))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Insumo"}),l.jsxs("select",{value:h.supply_id,onChange:v=>g(b=>({...b,supply_id:v.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:[l.jsx("option",{value:"",children:"Seleccionar insumo..."}),t.map(v=>l.jsxs("option",{value:v.id,children:[v.name," (",v.unit,")",v.life_days&&` - ${v.life_days} dias vida util`]},v.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Cantidad"}),l.jsx("input",{type:"number",min:"1",value:h.quantity,onChange:v=>g(b=>({...b,quantity:parseInt(v.target.value)||1})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Notas (opcional)"}),l.jsx("textarea",{value:h.notes||"",onChange:v=>g(b=>({...b,notes:v.target.value})),rows:2,className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",placeholder:"Observaciones..."})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[l.jsx("button",{onClick:()=>d(!1),className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),l.jsxs("button",{onClick:y,disabled:f||!h.supply_id||!h.staff_rut,className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[f&&l.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Registrar Entrega"]})]})]})]})})]})},iMe=["rollo","bolsa","unidad","litro","kit"],sMe=()=>{const[e,t]=F.useState("consumption"),[r,n]=F.useState("TERMINAL"),[a,i]=F.useState([]),[s,o]=F.useState([]),[c,u]=F.useState(!0),[d,f]=F.useState(!1),[p,h]=F.useState(!1),[g,m]=F.useState({name:"",unit:"unidad",life_days:null,min_stock:0}),x=async()=>{try{const[E,T]=await Promise.all([a_(),RH()]);i(E),o(T)}catch(E){console.error("Error loading config data:",E)}finally{u(!1)}};F.useEffect(()=>{x()},[]);const y=(E,T,L,O)=>{const I=s.find(D=>D.location_type===E&&D.location_name===T&&D.period===L&&D.supply_id===O);return(I==null?void 0:I.quantity)||0},v=async(E,T,L,O,I)=>{f(!0);try{await U7e({location_type:E,location_name:T,period:L,supply_id:O,quantity:Math.max(0,I)}),await x()}catch(D){console.error("Error updating profile:",D)}finally{f(!1)}},b=async(E,T,L)=>{f(!0);try{await $7e(E,{[T]:L}),await x()}catch(O){console.error("Error updating supply:",O)}finally{f(!1)}},S=async()=>{if(!g.name.trim()){alert("Ingrese el nombre del insumo");return}f(!0);try{await F7e({name:g.name.trim(),unit:g.unit,life_days:g.life_days,min_stock:g.min_stock}),m({name:"",unit:"unidad",life_days:null,min_stock:0}),h(!1),await x()}catch(E){console.error("Error creating supply:",E),alert("Error al crear el insumo")}finally{f(!1)}},_=async(E,T)=>{if(confirm(`Eliminar insumo "${T}"? Esta accion no se puede deshacer.`)){f(!0);try{await B7e(E),await x()}catch(L){console.error("Error deleting supply:",L),alert("Error al eliminar. Puede que tenga datos asociados.")}finally{f(!1)}}};if(c)return l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})});const A=r==="TERMINAL"?[{key:"DAY",label:"Dia"},{key:"NIGHT",label:"Noche"}]:[{key:"DAY",label:"Dia (L-V)"},{key:"WEEKEND",label:"Fin de Semana"}],j=r==="TERMINAL"?up.TERMINAL:up.CABEZAL;return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-2 border-b border-slate-200 pb-2",children:[l.jsx("button",{onClick:()=>t("consumption"),className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${e==="consumption"?"bg-brand-500 text-white":"text-slate-600 hover:bg-slate-100"}`,children:"Consumos"}),l.jsx("button",{onClick:()=>t("supplies"),className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${e==="supplies"?"bg-brand-500 text-white":"text-slate-600 hover:bg-slate-100"}`,children:"Insumos"})]}),e==="consumption"&&l.jsxs("div",{className:"space-y-4",children:[a.length===0&&l.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 p-8 text-center",children:[l.jsx(me,{name:"package",size:40,className:"mx-auto text-slate-300 mb-3"}),l.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"No hay insumos configurados. Agregue insumos primero."}),l.jsxs("button",{onClick:()=>t("supplies"),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600",children:[l.jsx(me,{name:"plus",size:18}),"Agregar Insumos"]})]}),a.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>n("TERMINAL"),className:`flex-1 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors ${r==="TERMINAL"?"bg-slate-800 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Terminal"}),l.jsx("button",{onClick:()=>n("CABEZAL"),className:`flex-1 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors ${r==="CABEZAL"?"bg-slate-800 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Cabezales"})]}),d&&l.jsxs("div",{className:"flex items-center gap-2 text-sm text-brand-600",children:[l.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-brand-500 border-t-transparent"}),"Guardando..."]}),j.map(E=>l.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:[l.jsx("div",{className:"border-b border-slate-100 px-4 py-3 bg-slate-50",children:l.jsx("h3",{className:"font-medium text-slate-800",children:E})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[l.jsx("th",{className:"px-4 py-2",children:"Insumo"}),A.map(T=>l.jsx("th",{className:"px-4 py-2 text-center w-28",children:T.label},T.key))]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:a.map(T=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-2 text-slate-800",children:T.name}),A.map(L=>l.jsx("td",{className:"px-4 py-2 text-center",children:l.jsx("input",{type:"number",min:"0",value:y(r,E,L.key,T.id),onChange:O=>v(r,E,L.key,T.id,parseInt(O.target.value)||0),className:"w-16 rounded border border-slate-300 px-2 py-1 text-center text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})},L.key))]},T.id))})]})})]},E))]})]}),e==="supplies"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600",children:[l.jsx(me,{name:"plus",size:18}),"Agregar Insumo"]})}),p&&l.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-brand-200 p-4",children:[l.jsx("h4",{className:"font-medium text-slate-800 mb-3",children:"Nuevo Insumo"}),l.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 md:grid-cols-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Nombre *"}),l.jsx("input",{type:"text",value:g.name,onChange:E=>m(T=>({...T,name:E.target.value})),placeholder:"Ej: Nova",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Unidad *"}),l.jsx("select",{value:g.unit,onChange:E=>m(T=>({...T,unit:E.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:iMe.map(E=>l.jsx("option",{value:E,children:E},E))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Vida Util (dias)"}),l.jsx("input",{type:"number",min:"0",value:g.life_days||"",placeholder:"Opcional",onChange:E=>m(T=>({...T,life_days:E.target.value?parseInt(E.target.value):null})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Stock Minimo"}),l.jsx("input",{type:"number",min:"0",value:g.min_stock,onChange:E=>m(T=>({...T,min_stock:parseInt(E.target.value)||0})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[l.jsx("button",{onClick:()=>{h(!1),m({name:"",unit:"unidad",life_days:null,min_stock:0})},className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),l.jsxs("button",{onClick:S,disabled:d||!g.name.trim(),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[d&&l.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Guardar"]})]})]}),a.length===0&&!p?l.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 p-8 text-center",children:[l.jsx(me,{name:"package",size:40,className:"mx-auto text-slate-300 mb-3"}),l.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"No hay insumos configurados"}),l.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600",children:[l.jsx(me,{name:"plus",size:18}),"Agregar Primer Insumo"]})]}):a.length>0&&l.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:[l.jsx("div",{className:"border-b border-slate-100 px-4 py-3 bg-slate-50",children:l.jsx("h3",{className:"font-medium text-slate-800",children:"Configuracion de Insumos"})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[l.jsx("th",{className:"px-4 py-2",children:"Insumo"}),l.jsx("th",{className:"px-4 py-2",children:"Unidad"}),l.jsx("th",{className:"px-4 py-2 text-center w-28",children:"Vida Util (dias)"}),l.jsx("th",{className:"px-4 py-2 text-center w-28",children:"Stock Minimo"}),l.jsx("th",{className:"px-4 py-2 w-16"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:a.map(E=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-2 font-medium text-slate-800",children:E.name}),l.jsx("td",{className:"px-4 py-2 text-slate-600",children:E.unit}),l.jsx("td",{className:"px-4 py-2 text-center",children:l.jsx("input",{type:"number",min:"0",value:E.life_days||"",placeholder:"-",onChange:T=>b(E.id,"life_days",T.target.value?parseInt(T.target.value):null),className:"w-16 rounded border border-slate-300 px-2 py-1 text-center text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})}),l.jsx("td",{className:"px-4 py-2 text-center",children:l.jsx("input",{type:"number",min:"0",value:E.min_stock||"",placeholder:"-",onChange:T=>b(E.id,"min_stock",parseInt(T.target.value)||0),className:"w-16 rounded border border-slate-300 px-2 py-1 text-center text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})}),l.jsx("td",{className:"px-4 py-2 text-center",children:l.jsx("button",{onClick:()=>_(E.id,E.name),className:"rounded p-1 text-slate-400 hover:bg-danger-100 hover:text-danger-600",children:l.jsx(me,{name:"trash",size:16})})})]},E.id))})]})})]})]})]})},oMe={MONDAY:"Lunes (Solicitud Semanal)",FRIDAY:"Viernes (Fin de Semana)",MANUAL:"Manual"},lMe=()=>{const[e,t]=F.useState([]),[r,n]=F.useState(!0),[a,i]=F.useState(!1),[s,o]=F.useState(null),[c,u]=F.useState(null),[d,f]=F.useState(null),[p,h]=F.useState({recipients:"",subject:"",body:"",enabled:!0}),g=async()=>{try{const _=await MH();return t(_),_}catch(_){return console.error("Error loading email settings:",_),[]}finally{n(!1)}},m=async()=>{i(!0);try{const _=await Q7e();t(_)}catch(_){console.error("Error creating default settings:",_),alert("Error al crear configuraciones. Verifique que las tablas existan en Supabase.")}finally{i(!1)}};F.useEffect(()=>{g()},[]);const x=_=>{f(_.id),h({recipients:_.recipients,subject:_.subject,body:_.body,enabled:_.enabled})},y=()=>{f(null),h({recipients:"",subject:"",body:"",enabled:!0})},v=async _=>{o(_);try{await cR(_,p),await g(),f(null)}catch(A){console.error("Error saving email settings:",A),alert("Error al guardar la configuracion")}finally{o(null)}},b=async _=>{o(_.id);try{await cR(_.id,{enabled:!_.enabled}),await g()}catch(A){console.error("Error toggling email setting:",A)}finally{o(null)}},S=async _=>{if(!_.recipients){alert("Configure los destinatarios primero");return}u(_.id);try{await xl.sendEmail({audience:"manual",manualRecipients:_.recipients.split(",").map(A=>A.trim()),subject:`[TEST] ${_.subject}`,body:`<p>Este es un correo de prueba.</p><hr/>${_.body}`,module:"informativos"}),alert("Correo de prueba enviado")}catch(A){console.error("Error sending test email:",A),alert("Error al enviar el correo de prueba")}finally{u(null)}};return r?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):e.length===0?l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 p-8 text-center",children:[l.jsx(me,{name:"send",size:40,className:"mx-auto text-slate-300 mb-3"}),l.jsx("h3",{className:"font-medium text-slate-800 mb-2",children:"Configurar Correos Automaticos"}),l.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Cree las configuraciones de correo para las solicitudes automaticas de Lunes, Viernes y Manual."}),l.jsxs("button",{onClick:m,disabled:a,className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[a?l.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}):l.jsx(me,{name:"plus",size:18}),"Crear Configuraciones"]})]})}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"rounded-lg bg-slate-50 p-4 text-sm text-slate-600",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(me,{name:"info",size:18,className:"mt-0.5 flex-shrink-0 text-slate-500"}),l.jsx("p",{children:"Configure los destinatarios y plantillas de correo para las solicitudes automaticas. Los correos se envian automaticamente los dias configurados."})]})}),l.jsx("div",{className:"space-y-4",children:e.map(_=>{const A=d===_.id,j=s===_.id,E=c===_.id;return l.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-4 py-3 bg-slate-50",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:`h-2 w-2 rounded-full ${_.enabled?"bg-success-500":"bg-slate-400"}`}),l.jsx("h3",{className:"font-medium text-slate-800",children:oMe[_.trigger]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("button",{onClick:()=>b(_),disabled:j,className:`rounded-lg px-3 py-1 text-xs font-medium transition-colors ${_.enabled?"bg-success-100 text-success-700 hover:bg-success-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:_.enabled?"Activo":"Inactivo"})})]}),l.jsx("div",{className:"p-4",children:A?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Destinatarios (separados por coma)"}),l.jsx("input",{type:"text",value:p.recipients,onChange:T=>h(L=>({...L,recipients:T.target.value})),placeholder:"correo1@ejemplo.com, correo2@ejemplo.com",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Asunto"}),l.jsx("input",{type:"text",value:p.subject,onChange:T=>h(L=>({...L,subject:T.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Cuerpo del mensaje (HTML permitido)"}),l.jsx("textarea",{value:p.body,onChange:T=>h(L=>({...L,body:T.target.value})),rows:4,placeholder:"Ejemplo: <p>Estimados,</p><p>Se adjunta la solicitud de insumos.</p>",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{onClick:y,className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),l.jsxs("button",{onClick:()=>v(_.id),disabled:j,className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[j&&l.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Guardar"]})]})]}):l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Destinatarios"}),l.jsx("p",{className:"mt-1 text-sm text-slate-800",children:_.recipients||l.jsx("span",{className:"text-slate-400 italic",children:"No configurado"})})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Asunto"}),l.jsx("p",{className:"mt-1 text-sm text-slate-800",children:_.subject})]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Mensaje"}),l.jsx("p",{className:"mt-1 text-sm text-slate-600 line-clamp-2",children:_.body||l.jsx("span",{className:"text-slate-400 italic",children:"Sin mensaje"})})]}),l.jsxs("div",{className:"flex gap-2 pt-2",children:[l.jsxs("button",{onClick:()=>x(_),className:"inline-flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-sm font-medium text-slate-600 hover:bg-slate-100",children:[l.jsx(me,{name:"edit",size:14}),"Editar"]}),l.jsxs("button",{onClick:()=>S(_),disabled:E||!_.recipients,className:"inline-flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-sm font-medium text-brand-600 hover:bg-brand-50 disabled:opacity-50",children:[E?l.jsx("div",{className:"h-3.5 w-3.5 animate-spin rounded-full border-2 border-brand-500 border-t-transparent"}):l.jsx(me,{name:"send",size:14}),"Enviar Prueba"]})]})]})})]},_.id)})})]})},cMe=[{key:"dashboard",label:"Dashboard",icon:"bar-chart"},{key:"solicitudes",label:"Solicitudes",icon:"file-text"},{key:"entregas",label:"Entregas",icon:"package"},{key:"config",label:"Configuracion",icon:"settings"}],uMe=()=>{const[e,t]=F.useState("dashboard"),[r,n]=F.useState("consumption"),[a,i]=F.useState(0),s=()=>i(o=>o+1);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Solicitudes de Insumos"}),l.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Gestion inteligente de insumos, solicitudes y entregas a personal"})]}),l.jsx("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 pb-3",children:cMe.map(o=>l.jsxs("button",{onClick:()=>t(o.key),className:`inline-flex items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium transition-all ${e===o.key?"bg-brand-500 text-white shadow-brand":"text-slate-600 hover:bg-slate-100"}`,children:[l.jsx(me,{name:o.icon,size:18}),l.jsx("span",{className:"hidden sm:inline",children:o.label})]},o.key))}),l.jsxs("div",{children:[e==="dashboard"&&l.jsx(tMe,{}),e==="solicitudes"&&l.jsx(nMe,{onRefresh:s}),e==="entregas"&&l.jsx(aMe,{}),e==="config"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>n("consumption"),className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${r==="consumption"?"bg-slate-800 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Consumos e Insumos"}),l.jsx("button",{onClick:()=>n("emails"),className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${r==="emails"?"bg-slate-800 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Correos"})]}),r==="consumption"&&l.jsx(sMe,{}),r==="emails"&&l.jsx(lMe,{})]})]},a)]})},dMe=()=>{const e=jr(a=>a.session),t=jr(a=>a.hydrateSession),[r,n]=F.useState(!0);return F.useEffect(()=>{t().finally(()=>n(!1))},[t]),r?l.jsx(kn,{label:"Validando sesin"}):e?l.jsx(oM,{}):l.jsx(sM,{to:"/",replace:!0})},fMe=()=>l.jsx(cY,{children:l.jsxs(tY,{children:[l.jsx(Rn,{path:"/",element:l.jsx(bY,{})}),l.jsx(Rn,{element:l.jsx(dMe,{}),children:l.jsxs(Rn,{element:l.jsx(kZ,{}),children:[l.jsx(Rn,{path:"/personal",element:l.jsx(Voe,{})}),l.jsx(Rn,{path:"/reuniones",element:l.jsx(Ble,{})}),l.jsx(Rn,{path:"/tareas",element:l.jsx(kce,{})}),l.jsx(Rn,{path:"/informativos",element:l.jsx(Pce,{})}),l.jsx(Rn,{path:"/asistencia",element:l.jsx(wpe,{})}),l.jsx(Rn,{path:"/aseo/interior",element:l.jsx(Npe,{})}),l.jsx(Rn,{path:"/aseo/exterior",element:l.jsx(jpe,{})}),l.jsx(Rn,{path:"/aseo/rodillo",element:l.jsx(Ape,{})}),l.jsx(Rn,{path:"/credenciales",element:l.jsx(d7e,{})}),l.jsx(Rn,{path:"/solicitudes",element:l.jsx(h7e,{})}),l.jsx(Rn,{path:"/minicheck/extintor",element:l.jsx(E7e,{})}),l.jsx(Rn,{path:"/minicheck/tag",element:l.jsx(T7e,{})}),l.jsx(Rn,{path:"/minicheck/mobileye",element:l.jsx(C7e,{})}),l.jsx(Rn,{path:"/minicheck/odometro",element:l.jsx(k7e,{})}),l.jsx(Rn,{path:"/minicheck/publicidad",element:l.jsx(O7e,{})}),l.jsx(Rn,{path:"/estado-flota",element:l.jsx(L7e,{})}),l.jsx(Rn,{path:"/insumos",element:l.jsx(uMe,{})})]})}),l.jsx(Rn,{path:"*",element:l.jsx(sM,{to:"/",replace:!0})})]})});PS.createRoot(document.getElementById("root")).render(l.jsx(_e.StrictMode,{children:l.jsx(cX,{children:l.jsx(fMe,{})})}));export{Br as _,z1 as c,Pr as g};
