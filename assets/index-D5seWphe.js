var gS=e=>{throw TypeError(e)};var Bv=(e,t,r)=>t.has(e)||gS("Cannot "+r);var B=(e,t,r)=>(Bv(e,t,"read from private field"),r?r.call(e):t.get(e)),Pe=(e,t,r)=>t.has(e)?gS("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),je=(e,t,r,n)=>(Bv(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Ue=(e,t,r)=>(Bv(e,t,"access private method"),r);var Vh=(e,t,r,n)=>({set _(a){je(e,t,a,r)},get _(){return B(e,t,n)}});function SC(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function it(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function $8(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var jC={exports:{}},sg={},EC={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fh=Symbol.for("react.element"),F8=Symbol.for("react.portal"),B8=Symbol.for("react.fragment"),U8=Symbol.for("react.strict_mode"),z8=Symbol.for("react.profiler"),q8=Symbol.for("react.provider"),W8=Symbol.for("react.context"),H8=Symbol.for("react.forward_ref"),V8=Symbol.for("react.suspense"),K8=Symbol.for("react.memo"),G8=Symbol.for("react.lazy"),vS=Symbol.iterator;function X8(e){return e===null||typeof e!="object"?null:(e=vS&&e[vS]||e["@@iterator"],typeof e=="function"?e:null)}var NC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},TC=Object.assign,AC={};function Su(e,t,r){this.props=e,this.context=t,this.refs=AC,this.updater=r||NC}Su.prototype.isReactComponent={};Su.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Su.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function OC(){}OC.prototype=Su.prototype;function gw(e,t,r){this.props=e,this.context=t,this.refs=AC,this.updater=r||NC}var vw=gw.prototype=new OC;vw.constructor=gw;TC(vw,Su.prototype);vw.isPureReactComponent=!0;var xS=Array.isArray,CC=Object.prototype.hasOwnProperty,xw={current:null},kC={key:!0,ref:!0,__self:!0,__source:!0};function PC(e,t,r){var n,a={},i=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)CC.call(t,n)&&!kC.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:fh,type:e,key:i,ref:s,props:a,_owner:xw.current}}function Y8(e,t){return{$$typeof:fh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function yw(e){return typeof e=="object"&&e!==null&&e.$$typeof===fh}function Q8(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var yS=/\/+/g;function Uv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Q8(""+e.key):t.toString(36)}function V0(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case fh:case F8:s=!0}}if(s)return s=e,a=a(s),e=n===""?"."+Uv(s,0):n,xS(a)?(r="",e!=null&&(r=e.replace(yS,"$&/")+"/"),V0(a,t,r,"",function(u){return u})):a!=null&&(yw(a)&&(a=Y8(a,r+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(yS,"$&/")+"/")+e)),t.push(a)),1;if(s=0,n=n===""?".":n+":",xS(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Uv(i,l);s+=V0(i,t,r,c,a)}else if(c=X8(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Uv(i,l++),s+=V0(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Gh(e,t,r){if(e==null)return e;var n=[],a=0;return V0(e,n,"","",function(i){return t.call(r,i,a++)}),n}function J8(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var dn={current:null},K0={transition:null},Z8={ReactCurrentDispatcher:dn,ReactCurrentBatchConfig:K0,ReactCurrentOwner:xw};function RC(){throw Error("act(...) is not supported in production builds of React.")}Ve.Children={map:Gh,forEach:function(e,t,r){Gh(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Gh(e,function(){t++}),t},toArray:function(e){return Gh(e,function(t){return t})||[]},only:function(e){if(!yw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ve.Component=Su;Ve.Fragment=B8;Ve.Profiler=z8;Ve.PureComponent=gw;Ve.StrictMode=U8;Ve.Suspense=V8;Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z8;Ve.act=RC;Ve.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=TC({},e.props),a=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=xw.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)CC.call(t,c)&&!kC.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:fh,type:e.type,key:a,ref:i,props:n,_owner:s}};Ve.createContext=function(e){return e={$$typeof:W8,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:q8,_context:e},e.Consumer=e};Ve.createElement=PC;Ve.createFactory=function(e){var t=PC.bind(null,e);return t.type=e,t};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(e){return{$$typeof:H8,render:e}};Ve.isValidElement=yw;Ve.lazy=function(e){return{$$typeof:G8,_payload:{_status:-1,_result:e},_init:J8}};Ve.memo=function(e,t){return{$$typeof:K8,type:e,compare:t===void 0?null:t}};Ve.startTransition=function(e){var t=K0.transition;K0.transition={};try{e()}finally{K0.transition=t}};Ve.unstable_act=RC;Ve.useCallback=function(e,t){return dn.current.useCallback(e,t)};Ve.useContext=function(e){return dn.current.useContext(e)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(e){return dn.current.useDeferredValue(e)};Ve.useEffect=function(e,t){return dn.current.useEffect(e,t)};Ve.useId=function(){return dn.current.useId()};Ve.useImperativeHandle=function(e,t,r){return dn.current.useImperativeHandle(e,t,r)};Ve.useInsertionEffect=function(e,t){return dn.current.useInsertionEffect(e,t)};Ve.useLayoutEffect=function(e,t){return dn.current.useLayoutEffect(e,t)};Ve.useMemo=function(e,t){return dn.current.useMemo(e,t)};Ve.useReducer=function(e,t,r){return dn.current.useReducer(e,t,r)};Ve.useRef=function(e){return dn.current.useRef(e)};Ve.useState=function(e){return dn.current.useState(e)};Ve.useSyncExternalStore=function(e,t,r){return dn.current.useSyncExternalStore(e,t,r)};Ve.useTransition=function(){return dn.current.useTransition()};Ve.version="18.3.1";EC.exports=Ve;var T=EC.exports;const z=it(T),eM=SC({__proto__:null,default:z},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tM=T,rM=Symbol.for("react.element"),nM=Symbol.for("react.fragment"),aM=Object.prototype.hasOwnProperty,iM=tM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sM={key:!0,ref:!0,__self:!0,__source:!0};function IC(e,t,r){var n,a={},i=null,s=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)aM.call(t,n)&&!sM.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:rM,type:e,key:i,ref:s,props:a,_owner:iM.current}}sg.Fragment=nM;sg.jsx=IC;sg.jsxs=IC;jC.exports=sg;var o=jC.exports,ly={},DC={exports:{}},Xn={},MC={exports:{}},LC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(X,re){var ue=X.length;X.push(re);e:for(;0<ue;){var me=ue-1>>>1,R=X[me];if(0<a(R,re))X[me]=re,X[ue]=R,ue=me;else break e}}function r(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var re=X[0],ue=X.pop();if(ue!==re){X[0]=ue;e:for(var me=0,R=X.length,W=R>>>1;me<W;){var U=2*(me+1)-1,q=X[U],ie=U+1,Se=X[ie];if(0>a(q,ue))ie<R&&0>a(Se,q)?(X[me]=Se,X[ie]=ue,me=ie):(X[me]=q,X[U]=ue,me=U);else if(ie<R&&0>a(Se,ue))X[me]=Se,X[ie]=ue,me=ie;else break e}}return re}function a(X,re){var ue=X.sortIndex-re.sortIndex;return ue!==0?ue:X.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,v=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(X){for(var re=r(u);re!==null;){if(re.callback===null)n(u);else if(re.startTime<=X)n(u),re.sortIndex=re.expirationTime,t(c,re);else break;re=r(u)}}function _(X){if(g=!1,y(X),!v)if(r(c)!==null)v=!0,ae(w);else{var re=r(u);re!==null&&oe(_,re.startTime-X)}}function w(X,re){v=!1,g&&(g=!1,b(E),E=-1),p=!0;var ue=h;try{for(y(re),f=r(c);f!==null&&(!(f.expirationTime>re)||X&&!C());){var me=f.callback;if(typeof me=="function"){f.callback=null,h=f.priorityLevel;var R=me(f.expirationTime<=re);re=e.unstable_now(),typeof R=="function"?f.callback=R:f===r(c)&&n(c),y(re)}else n(c);f=r(c)}if(f!==null)var W=!0;else{var U=r(u);U!==null&&oe(_,U.startTime-re),W=!1}return W}finally{f=null,h=ue,p=!1}}var S=!1,j=null,E=-1,N=5,A=-1;function C(){return!(e.unstable_now()-A<N)}function D(){if(j!==null){var X=e.unstable_now();A=X;var re=!0;try{re=j(!0,X)}finally{re?P():(S=!1,j=null)}}else S=!1}var P;if(typeof m=="function")P=function(){m(D)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,V=H.port2;H.port1.onmessage=D,P=function(){V.postMessage(null)}}else P=function(){x(D,0)};function ae(X){j=X,S||(S=!0,P())}function oe(X,re){E=x(function(){X(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_continueExecution=function(){v||p||(v=!0,ae(w))},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(X){switch(h){case 1:case 2:case 3:var re=3;break;default:re=h}var ue=h;h=re;try{return X()}finally{h=ue}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(X,re){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ue=h;h=X;try{return re()}finally{h=ue}},e.unstable_scheduleCallback=function(X,re,ue){var me=e.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?me+ue:me):ue=me,X){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=ue+R,X={id:d++,callback:re,priorityLevel:X,startTime:ue,expirationTime:R,sortIndex:-1},ue>me?(X.sortIndex=ue,t(u,X),r(c)===null&&X===r(u)&&(g?(b(E),E=-1):g=!0,oe(_,ue-me))):(X.sortIndex=R,t(c,X),v||p||(v=!0,ae(w))),X},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(X){var re=h;return function(){var ue=h;h=re;try{return X.apply(this,arguments)}finally{h=ue}}}})(LC);MC.exports=LC;var oM=MC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lM=T,Hn=oM;function pe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $C=new Set,Xd={};function gl(e,t){Lc(e,t),Lc(e+"Capture",t)}function Lc(e,t){for(Xd[e]=t,e=0;e<t.length;e++)$C.add(t[e])}var Mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cy=Object.prototype.hasOwnProperty,cM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bS={},wS={};function uM(e){return cy.call(wS,e)?!0:cy.call(bS,e)?!1:cM.test(e)?wS[e]=!0:(bS[e]=!0,!1)}function dM(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function fM(e,t,r,n){if(t===null||typeof t>"u"||dM(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function fn(e,t,r,n,a,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var Mr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Mr[e]=new fn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Mr[t]=new fn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Mr[e]=new fn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Mr[e]=new fn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Mr[e]=new fn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Mr[e]=new fn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Mr[e]=new fn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Mr[e]=new fn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Mr[e]=new fn(e,5,!1,e.toLowerCase(),null,!1,!1)});var bw=/[\-:]([a-z])/g;function ww(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(bw,ww);Mr[t]=new fn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(bw,ww);Mr[t]=new fn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(bw,ww);Mr[t]=new fn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Mr[e]=new fn(e,1,!1,e.toLowerCase(),null,!1,!1)});Mr.xlinkHref=new fn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Mr[e]=new fn(e,1,!1,e.toLowerCase(),null,!0,!0)});function _w(e,t,r,n){var a=Mr.hasOwnProperty(t)?Mr[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(fM(t,r,a,n)&&(r=null),n||a===null?uM(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Xi=lM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xh=Symbol.for("react.element"),ql=Symbol.for("react.portal"),Wl=Symbol.for("react.fragment"),Sw=Symbol.for("react.strict_mode"),uy=Symbol.for("react.profiler"),FC=Symbol.for("react.provider"),BC=Symbol.for("react.context"),jw=Symbol.for("react.forward_ref"),dy=Symbol.for("react.suspense"),fy=Symbol.for("react.suspense_list"),Ew=Symbol.for("react.memo"),ss=Symbol.for("react.lazy"),UC=Symbol.for("react.offscreen"),_S=Symbol.iterator;function Qu(e){return e===null||typeof e!="object"?null:(e=_S&&e[_S]||e["@@iterator"],typeof e=="function"?e:null)}var $t=Object.assign,zv;function xd(e){if(zv===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);zv=t&&t[1]||""}return`
`+zv+e}var qv=!1;function Wv(e,t){if(!e||qv)return"";qv=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),s=a.length-1,l=i.length-1;1<=s&&0<=l&&a[s]!==i[l];)l--;for(;1<=s&&0<=l;s--,l--)if(a[s]!==i[l]){if(s!==1||l!==1)do if(s--,l--,0>l||a[s]!==i[l]){var c=`
`+a[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=l);break}}}finally{qv=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?xd(e):""}function hM(e){switch(e.tag){case 5:return xd(e.type);case 16:return xd("Lazy");case 13:return xd("Suspense");case 19:return xd("SuspenseList");case 0:case 2:case 15:return e=Wv(e.type,!1),e;case 11:return e=Wv(e.type.render,!1),e;case 1:return e=Wv(e.type,!0),e;default:return""}}function hy(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Wl:return"Fragment";case ql:return"Portal";case uy:return"Profiler";case Sw:return"StrictMode";case dy:return"Suspense";case fy:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case BC:return(e.displayName||"Context")+".Consumer";case FC:return(e._context.displayName||"Context")+".Provider";case jw:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ew:return t=e.displayName||null,t!==null?t:hy(e.type)||"Memo";case ss:t=e._payload,e=e._init;try{return hy(e(t))}catch{}}return null}function pM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hy(t);case 8:return t===Sw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function zs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zC(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function mM(e){var t=zC(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(s){n=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Yh(e){e._valueTracker||(e._valueTracker=mM(e))}function qC(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=zC(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function lp(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function py(e,t){var r=t.checked;return $t({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function SS(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=zs(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function WC(e,t){t=t.checked,t!=null&&_w(e,"checked",t,!1)}function my(e,t){WC(e,t);var r=zs(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?gy(e,t.type,r):t.hasOwnProperty("defaultValue")&&gy(e,t.type,zs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function jS(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function gy(e,t,r){(t!=="number"||lp(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var yd=Array.isArray;function oc(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+zs(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function vy(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(pe(91));return $t({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ES(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(pe(92));if(yd(r)){if(1<r.length)throw Error(pe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:zs(r)}}function HC(e,t){var r=zs(t.value),n=zs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function NS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function VC(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xy(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?VC(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Qh,KC=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Qh=Qh||document.createElement("div"),Qh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Qh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Yd(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ad={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gM=["Webkit","ms","Moz","O"];Object.keys(Ad).forEach(function(e){gM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ad[t]=Ad[e]})});function GC(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ad.hasOwnProperty(e)&&Ad[e]?(""+t).trim():t+"px"}function XC(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=GC(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var vM=$t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yy(e,t){if(t){if(vM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(pe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(pe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(pe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(pe(62))}}function by(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wy=null;function Nw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _y=null,lc=null,cc=null;function TS(e){if(e=mh(e)){if(typeof _y!="function")throw Error(pe(280));var t=e.stateNode;t&&(t=dg(t),_y(e.stateNode,e.type,t))}}function YC(e){lc?cc?cc.push(e):cc=[e]:lc=e}function QC(){if(lc){var e=lc,t=cc;if(cc=lc=null,TS(e),t)for(e=0;e<t.length;e++)TS(t[e])}}function JC(e,t){return e(t)}function ZC(){}var Hv=!1;function ek(e,t,r){if(Hv)return e(t,r);Hv=!0;try{return JC(e,t,r)}finally{Hv=!1,(lc!==null||cc!==null)&&(ZC(),QC())}}function Qd(e,t){var r=e.stateNode;if(r===null)return null;var n=dg(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(pe(231,t,typeof r));return r}var Sy=!1;if(Mi)try{var Ju={};Object.defineProperty(Ju,"passive",{get:function(){Sy=!0}}),window.addEventListener("test",Ju,Ju),window.removeEventListener("test",Ju,Ju)}catch{Sy=!1}function xM(e,t,r,n,a,i,s,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Od=!1,cp=null,up=!1,jy=null,yM={onError:function(e){Od=!0,cp=e}};function bM(e,t,r,n,a,i,s,l,c){Od=!1,cp=null,xM.apply(yM,arguments)}function wM(e,t,r,n,a,i,s,l,c){if(bM.apply(this,arguments),Od){if(Od){var u=cp;Od=!1,cp=null}else throw Error(pe(198));up||(up=!0,jy=u)}}function vl(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function tk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function AS(e){if(vl(e)!==e)throw Error(pe(188))}function _M(e){var t=e.alternate;if(!t){if(t=vl(e),t===null)throw Error(pe(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return AS(a),e;if(i===n)return AS(a),t;i=i.sibling}throw Error(pe(188))}if(r.return!==n.return)r=a,n=i;else{for(var s=!1,l=a.child;l;){if(l===r){s=!0,r=a,n=i;break}if(l===n){s=!0,n=a,r=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===r){s=!0,r=i,n=a;break}if(l===n){s=!0,n=i,r=a;break}l=l.sibling}if(!s)throw Error(pe(189))}}if(r.alternate!==n)throw Error(pe(190))}if(r.tag!==3)throw Error(pe(188));return r.stateNode.current===r?e:t}function rk(e){return e=_M(e),e!==null?nk(e):null}function nk(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nk(e);if(t!==null)return t;e=e.sibling}return null}var ak=Hn.unstable_scheduleCallback,OS=Hn.unstable_cancelCallback,SM=Hn.unstable_shouldYield,jM=Hn.unstable_requestPaint,Vt=Hn.unstable_now,EM=Hn.unstable_getCurrentPriorityLevel,Tw=Hn.unstable_ImmediatePriority,ik=Hn.unstable_UserBlockingPriority,dp=Hn.unstable_NormalPriority,NM=Hn.unstable_LowPriority,sk=Hn.unstable_IdlePriority,og=null,ei=null;function TM(e){if(ei&&typeof ei.onCommitFiberRoot=="function")try{ei.onCommitFiberRoot(og,e,void 0,(e.current.flags&128)===128)}catch{}}var Da=Math.clz32?Math.clz32:CM,AM=Math.log,OM=Math.LN2;function CM(e){return e>>>=0,e===0?32:31-(AM(e)/OM|0)|0}var Jh=64,Zh=4194304;function bd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fp(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,s=r&268435455;if(s!==0){var l=s&~a;l!==0?n=bd(l):(i&=s,i!==0&&(n=bd(i)))}else s=r&~a,s!==0?n=bd(s):i!==0&&(n=bd(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Da(t),a=1<<r,n|=e[r],t&=~a;return n}function kM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PM(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-Da(i),l=1<<s,c=a[s];c===-1?(!(l&r)||l&n)&&(a[s]=kM(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Ey(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ok(){var e=Jh;return Jh<<=1,!(Jh&4194240)&&(Jh=64),e}function Vv(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function hh(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Da(t),e[t]=r}function RM(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Da(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Aw(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Da(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var dt=0;function lk(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ck,Ow,uk,dk,fk,Ny=!1,e0=[],Cs=null,ks=null,Ps=null,Jd=new Map,Zd=new Map,us=[],IM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function CS(e,t){switch(e){case"focusin":case"focusout":Cs=null;break;case"dragenter":case"dragleave":ks=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":Jd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zd.delete(t.pointerId)}}function Zu(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=mh(t),t!==null&&Ow(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function DM(e,t,r,n,a){switch(t){case"focusin":return Cs=Zu(Cs,e,t,r,n,a),!0;case"dragenter":return ks=Zu(ks,e,t,r,n,a),!0;case"mouseover":return Ps=Zu(Ps,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Jd.set(i,Zu(Jd.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Zd.set(i,Zu(Zd.get(i)||null,e,t,r,n,a)),!0}return!1}function hk(e){var t=Ao(e.target);if(t!==null){var r=vl(t);if(r!==null){if(t=r.tag,t===13){if(t=tk(r),t!==null){e.blockedOn=t,fk(e.priority,function(){uk(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function G0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Ty(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);wy=n,r.target.dispatchEvent(n),wy=null}else return t=mh(r),t!==null&&Ow(t),e.blockedOn=r,!1;t.shift()}return!0}function kS(e,t,r){G0(e)&&r.delete(t)}function MM(){Ny=!1,Cs!==null&&G0(Cs)&&(Cs=null),ks!==null&&G0(ks)&&(ks=null),Ps!==null&&G0(Ps)&&(Ps=null),Jd.forEach(kS),Zd.forEach(kS)}function ed(e,t){e.blockedOn===t&&(e.blockedOn=null,Ny||(Ny=!0,Hn.unstable_scheduleCallback(Hn.unstable_NormalPriority,MM)))}function ef(e){function t(a){return ed(a,e)}if(0<e0.length){ed(e0[0],e);for(var r=1;r<e0.length;r++){var n=e0[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Cs!==null&&ed(Cs,e),ks!==null&&ed(ks,e),Ps!==null&&ed(Ps,e),Jd.forEach(t),Zd.forEach(t),r=0;r<us.length;r++)n=us[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<us.length&&(r=us[0],r.blockedOn===null);)hk(r),r.blockedOn===null&&us.shift()}var uc=Xi.ReactCurrentBatchConfig,hp=!0;function LM(e,t,r,n){var a=dt,i=uc.transition;uc.transition=null;try{dt=1,Cw(e,t,r,n)}finally{dt=a,uc.transition=i}}function $M(e,t,r,n){var a=dt,i=uc.transition;uc.transition=null;try{dt=4,Cw(e,t,r,n)}finally{dt=a,uc.transition=i}}function Cw(e,t,r,n){if(hp){var a=Ty(e,t,r,n);if(a===null)rx(e,t,n,pp,r),CS(e,n);else if(DM(a,e,t,r,n))n.stopPropagation();else if(CS(e,n),t&4&&-1<IM.indexOf(e)){for(;a!==null;){var i=mh(a);if(i!==null&&ck(i),i=Ty(e,t,r,n),i===null&&rx(e,t,n,pp,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else rx(e,t,n,null,r)}}var pp=null;function Ty(e,t,r,n){if(pp=null,e=Nw(n),e=Ao(e),e!==null)if(t=vl(e),t===null)e=null;else if(r=t.tag,r===13){if(e=tk(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return pp=e,null}function pk(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(EM()){case Tw:return 1;case ik:return 4;case dp:case NM:return 16;case sk:return 536870912;default:return 16}default:return 16}}var js=null,kw=null,X0=null;function mk(){if(X0)return X0;var e,t=kw,r=t.length,n,a="value"in js?js.value:js.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===a[i-n];n++);return X0=a.slice(e,1<n?1-n:void 0)}function Y0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function t0(){return!0}function PS(){return!1}function Yn(e){function t(r,n,a,i,s){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?t0:PS,this.isPropagationStopped=PS,this}return $t(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=t0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=t0)},persist:function(){},isPersistent:t0}),t}var ju={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pw=Yn(ju),ph=$t({},ju,{view:0,detail:0}),FM=Yn(ph),Kv,Gv,td,lg=$t({},ph,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==td&&(td&&e.type==="mousemove"?(Kv=e.screenX-td.screenX,Gv=e.screenY-td.screenY):Gv=Kv=0,td=e),Kv)},movementY:function(e){return"movementY"in e?e.movementY:Gv}}),RS=Yn(lg),BM=$t({},lg,{dataTransfer:0}),UM=Yn(BM),zM=$t({},ph,{relatedTarget:0}),Xv=Yn(zM),qM=$t({},ju,{animationName:0,elapsedTime:0,pseudoElement:0}),WM=Yn(qM),HM=$t({},ju,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),VM=Yn(HM),KM=$t({},ju,{data:0}),IS=Yn(KM),GM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=YM[e])?!!t[e]:!1}function Rw(){return QM}var JM=$t({},ph,{key:function(e){if(e.key){var t=GM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Y0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?XM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rw,charCode:function(e){return e.type==="keypress"?Y0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Y0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ZM=Yn(JM),eL=$t({},lg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),DS=Yn(eL),tL=$t({},ph,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rw}),rL=Yn(tL),nL=$t({},ju,{propertyName:0,elapsedTime:0,pseudoElement:0}),aL=Yn(nL),iL=$t({},lg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sL=Yn(iL),oL=[9,13,27,32],Iw=Mi&&"CompositionEvent"in window,Cd=null;Mi&&"documentMode"in document&&(Cd=document.documentMode);var lL=Mi&&"TextEvent"in window&&!Cd,gk=Mi&&(!Iw||Cd&&8<Cd&&11>=Cd),MS=" ",LS=!1;function vk(e,t){switch(e){case"keyup":return oL.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xk(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hl=!1;function cL(e,t){switch(e){case"compositionend":return xk(t);case"keypress":return t.which!==32?null:(LS=!0,MS);case"textInput":return e=t.data,e===MS&&LS?null:e;default:return null}}function uL(e,t){if(Hl)return e==="compositionend"||!Iw&&vk(e,t)?(e=mk(),X0=kw=js=null,Hl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gk&&t.locale!=="ko"?null:t.data;default:return null}}var dL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $S(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!dL[e.type]:t==="textarea"}function yk(e,t,r,n){YC(n),t=mp(t,"onChange"),0<t.length&&(r=new Pw("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var kd=null,tf=null;function fL(e){Ck(e,0)}function cg(e){var t=Gl(e);if(qC(t))return e}function hL(e,t){if(e==="change")return t}var bk=!1;if(Mi){var Yv;if(Mi){var Qv="oninput"in document;if(!Qv){var FS=document.createElement("div");FS.setAttribute("oninput","return;"),Qv=typeof FS.oninput=="function"}Yv=Qv}else Yv=!1;bk=Yv&&(!document.documentMode||9<document.documentMode)}function BS(){kd&&(kd.detachEvent("onpropertychange",wk),tf=kd=null)}function wk(e){if(e.propertyName==="value"&&cg(tf)){var t=[];yk(t,tf,e,Nw(e)),ek(fL,t)}}function pL(e,t,r){e==="focusin"?(BS(),kd=t,tf=r,kd.attachEvent("onpropertychange",wk)):e==="focusout"&&BS()}function mL(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return cg(tf)}function gL(e,t){if(e==="click")return cg(t)}function vL(e,t){if(e==="input"||e==="change")return cg(t)}function xL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fa=typeof Object.is=="function"?Object.is:xL;function rf(e,t){if(Fa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!cy.call(t,a)||!Fa(e[a],t[a]))return!1}return!0}function US(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zS(e,t){var r=US(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=US(r)}}function _k(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?_k(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Sk(){for(var e=window,t=lp();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=lp(e.document)}return t}function Dw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function yL(e){var t=Sk(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&_k(r.ownerDocument.documentElement,r)){if(n!==null&&Dw(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=zS(r,i);var s=zS(r,n);a&&s&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var bL=Mi&&"documentMode"in document&&11>=document.documentMode,Vl=null,Ay=null,Pd=null,Oy=!1;function qS(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Oy||Vl==null||Vl!==lp(n)||(n=Vl,"selectionStart"in n&&Dw(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Pd&&rf(Pd,n)||(Pd=n,n=mp(Ay,"onSelect"),0<n.length&&(t=new Pw("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Vl)))}function r0(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Kl={animationend:r0("Animation","AnimationEnd"),animationiteration:r0("Animation","AnimationIteration"),animationstart:r0("Animation","AnimationStart"),transitionend:r0("Transition","TransitionEnd")},Jv={},jk={};Mi&&(jk=document.createElement("div").style,"AnimationEvent"in window||(delete Kl.animationend.animation,delete Kl.animationiteration.animation,delete Kl.animationstart.animation),"TransitionEvent"in window||delete Kl.transitionend.transition);function ug(e){if(Jv[e])return Jv[e];if(!Kl[e])return e;var t=Kl[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in jk)return Jv[e]=t[r];return e}var Ek=ug("animationend"),Nk=ug("animationiteration"),Tk=ug("animationstart"),Ak=ug("transitionend"),Ok=new Map,WS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ys(e,t){Ok.set(e,t),gl(t,[e])}for(var Zv=0;Zv<WS.length;Zv++){var ex=WS[Zv],wL=ex.toLowerCase(),_L=ex[0].toUpperCase()+ex.slice(1);Ys(wL,"on"+_L)}Ys(Ek,"onAnimationEnd");Ys(Nk,"onAnimationIteration");Ys(Tk,"onAnimationStart");Ys("dblclick","onDoubleClick");Ys("focusin","onFocus");Ys("focusout","onBlur");Ys(Ak,"onTransitionEnd");Lc("onMouseEnter",["mouseout","mouseover"]);Lc("onMouseLeave",["mouseout","mouseover"]);Lc("onPointerEnter",["pointerout","pointerover"]);Lc("onPointerLeave",["pointerout","pointerover"]);gl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gl("onBeforeInput",["compositionend","keypress","textInput","paste"]);gl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SL=new Set("cancel close invalid load scroll toggle".split(" ").concat(wd));function HS(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,wM(n,t,void 0,e),e.currentTarget=null}function Ck(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var s=n.length-1;0<=s;s--){var l=n[s],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;HS(a,l,u),i=c}else for(s=0;s<n.length;s++){if(l=n[s],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;HS(a,l,u),i=c}}}if(up)throw e=jy,up=!1,jy=null,e}function St(e,t){var r=t[Iy];r===void 0&&(r=t[Iy]=new Set);var n=e+"__bubble";r.has(n)||(kk(t,e,2,!1),r.add(n))}function tx(e,t,r){var n=0;t&&(n|=4),kk(r,e,n,t)}var n0="_reactListening"+Math.random().toString(36).slice(2);function nf(e){if(!e[n0]){e[n0]=!0,$C.forEach(function(r){r!=="selectionchange"&&(SL.has(r)||tx(r,!1,e),tx(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[n0]||(t[n0]=!0,tx("selectionchange",!1,t))}}function kk(e,t,r,n){switch(pk(t)){case 1:var a=LM;break;case 4:a=$M;break;default:a=Cw}r=a.bind(null,t,r,e),a=void 0,!Sy||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function rx(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(s===4)for(s=n.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;s=s.return}for(;l!==null;){if(s=Ao(l),s===null)return;if(c=s.tag,c===5||c===6){n=i=s;continue e}l=l.parentNode}}n=n.return}ek(function(){var u=i,d=Nw(r),f=[];e:{var h=Ok.get(e);if(h!==void 0){var p=Pw,v=e;switch(e){case"keypress":if(Y0(r)===0)break e;case"keydown":case"keyup":p=ZM;break;case"focusin":v="focus",p=Xv;break;case"focusout":v="blur",p=Xv;break;case"beforeblur":case"afterblur":p=Xv;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=RS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=UM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=rL;break;case Ek:case Nk:case Tk:p=WM;break;case Ak:p=aL;break;case"scroll":p=FM;break;case"wheel":p=sL;break;case"copy":case"cut":case"paste":p=VM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=DS}var g=(t&4)!==0,x=!g&&e==="scroll",b=g?h!==null?h+"Capture":null:h;g=[];for(var m=u,y;m!==null;){y=m;var _=y.stateNode;if(y.tag===5&&_!==null&&(y=_,b!==null&&(_=Qd(m,b),_!=null&&g.push(af(m,_,y)))),x)break;m=m.return}0<g.length&&(h=new p(h,v,null,r,d),f.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==wy&&(v=r.relatedTarget||r.fromElement)&&(Ao(v)||v[Li]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(v=r.relatedTarget||r.toElement,p=u,v=v?Ao(v):null,v!==null&&(x=vl(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(g=RS,_="onMouseLeave",b="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(g=DS,_="onPointerLeave",b="onPointerEnter",m="pointer"),x=p==null?h:Gl(p),y=v==null?h:Gl(v),h=new g(_,m+"leave",p,r,d),h.target=x,h.relatedTarget=y,_=null,Ao(d)===u&&(g=new g(b,m+"enter",v,r,d),g.target=y,g.relatedTarget=x,_=g),x=_,p&&v)t:{for(g=p,b=v,m=0,y=g;y;y=Ol(y))m++;for(y=0,_=b;_;_=Ol(_))y++;for(;0<m-y;)g=Ol(g),m--;for(;0<y-m;)b=Ol(b),y--;for(;m--;){if(g===b||b!==null&&g===b.alternate)break t;g=Ol(g),b=Ol(b)}g=null}else g=null;p!==null&&VS(f,h,p,g,!1),v!==null&&x!==null&&VS(f,x,v,g,!0)}}e:{if(h=u?Gl(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var w=hL;else if($S(h))if(bk)w=vL;else{w=mL;var S=pL}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=gL);if(w&&(w=w(e,u))){yk(f,w,r,d);break e}S&&S(e,h,u),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&gy(h,"number",h.value)}switch(S=u?Gl(u):window,e){case"focusin":($S(S)||S.contentEditable==="true")&&(Vl=S,Ay=u,Pd=null);break;case"focusout":Pd=Ay=Vl=null;break;case"mousedown":Oy=!0;break;case"contextmenu":case"mouseup":case"dragend":Oy=!1,qS(f,r,d);break;case"selectionchange":if(bL)break;case"keydown":case"keyup":qS(f,r,d)}var j;if(Iw)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Hl?vk(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(gk&&r.locale!=="ko"&&(Hl||E!=="onCompositionStart"?E==="onCompositionEnd"&&Hl&&(j=mk()):(js=d,kw="value"in js?js.value:js.textContent,Hl=!0)),S=mp(u,E),0<S.length&&(E=new IS(E,e,null,r,d),f.push({event:E,listeners:S}),j?E.data=j:(j=xk(r),j!==null&&(E.data=j)))),(j=lL?cL(e,r):uL(e,r))&&(u=mp(u,"onBeforeInput"),0<u.length&&(d=new IS("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=j))}Ck(f,t)})}function af(e,t,r){return{instance:e,listener:t,currentTarget:r}}function mp(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Qd(e,r),i!=null&&n.unshift(af(e,i,a)),i=Qd(e,t),i!=null&&n.push(af(e,i,a))),e=e.return}return n}function Ol(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function VS(e,t,r,n,a){for(var i=t._reactName,s=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=Qd(r,i),c!=null&&s.unshift(af(r,c,l))):a||(c=Qd(r,i),c!=null&&s.push(af(r,c,l)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var jL=/\r\n?/g,EL=/\u0000|\uFFFD/g;function KS(e){return(typeof e=="string"?e:""+e).replace(jL,`
`).replace(EL,"")}function a0(e,t,r){if(t=KS(t),KS(e)!==t&&r)throw Error(pe(425))}function gp(){}var Cy=null,ky=null;function Py(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ry=typeof setTimeout=="function"?setTimeout:void 0,NL=typeof clearTimeout=="function"?clearTimeout:void 0,GS=typeof Promise=="function"?Promise:void 0,TL=typeof queueMicrotask=="function"?queueMicrotask:typeof GS<"u"?function(e){return GS.resolve(null).then(e).catch(AL)}:Ry;function AL(e){setTimeout(function(){throw e})}function nx(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),ef(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);ef(t)}function Rs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function XS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Eu=Math.random().toString(36).slice(2),Ja="__reactFiber$"+Eu,sf="__reactProps$"+Eu,Li="__reactContainer$"+Eu,Iy="__reactEvents$"+Eu,OL="__reactListeners$"+Eu,CL="__reactHandles$"+Eu;function Ao(e){var t=e[Ja];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Li]||r[Ja]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=XS(e);e!==null;){if(r=e[Ja])return r;e=XS(e)}return t}e=r,r=e.parentNode}return null}function mh(e){return e=e[Ja]||e[Li],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Gl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(pe(33))}function dg(e){return e[sf]||null}var Dy=[],Xl=-1;function Qs(e){return{current:e}}function Nt(e){0>Xl||(e.current=Dy[Xl],Dy[Xl]=null,Xl--)}function wt(e,t){Xl++,Dy[Xl]=e.current,e.current=t}var qs={},Gr=Qs(qs),_n=Qs(!1),Jo=qs;function $c(e,t){var r=e.type.contextTypes;if(!r)return qs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Sn(e){return e=e.childContextTypes,e!=null}function vp(){Nt(_n),Nt(Gr)}function YS(e,t,r){if(Gr.current!==qs)throw Error(pe(168));wt(Gr,t),wt(_n,r)}function Pk(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(pe(108,pM(e)||"Unknown",a));return $t({},r,n)}function xp(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||qs,Jo=Gr.current,wt(Gr,e),wt(_n,_n.current),!0}function QS(e,t,r){var n=e.stateNode;if(!n)throw Error(pe(169));r?(e=Pk(e,t,Jo),n.__reactInternalMemoizedMergedChildContext=e,Nt(_n),Nt(Gr),wt(Gr,e)):Nt(_n),wt(_n,r)}var vi=null,fg=!1,ax=!1;function Rk(e){vi===null?vi=[e]:vi.push(e)}function kL(e){fg=!0,Rk(e)}function Js(){if(!ax&&vi!==null){ax=!0;var e=0,t=dt;try{var r=vi;for(dt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}vi=null,fg=!1}catch(a){throw vi!==null&&(vi=vi.slice(e+1)),ak(Tw,Js),a}finally{dt=t,ax=!1}}return null}var Yl=[],Ql=0,yp=null,bp=0,ia=[],sa=0,Zo=null,_i=1,Si="";function go(e,t){Yl[Ql++]=bp,Yl[Ql++]=yp,yp=e,bp=t}function Ik(e,t,r){ia[sa++]=_i,ia[sa++]=Si,ia[sa++]=Zo,Zo=e;var n=_i;e=Si;var a=32-Da(n)-1;n&=~(1<<a),r+=1;var i=32-Da(t)+a;if(30<i){var s=a-a%5;i=(n&(1<<s)-1).toString(32),n>>=s,a-=s,_i=1<<32-Da(t)+a|r<<a|n,Si=i+e}else _i=1<<i|r<<a|n,Si=e}function Mw(e){e.return!==null&&(go(e,1),Ik(e,1,0))}function Lw(e){for(;e===yp;)yp=Yl[--Ql],Yl[Ql]=null,bp=Yl[--Ql],Yl[Ql]=null;for(;e===Zo;)Zo=ia[--sa],ia[sa]=null,Si=ia[--sa],ia[sa]=null,_i=ia[--sa],ia[sa]=null}var qn=null,Un=null,Ot=!1,Ca=null;function Dk(e,t){var r=la(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function JS(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qn=e,Un=Rs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qn=e,Un=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Zo!==null?{id:_i,overflow:Si}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=la(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,qn=e,Un=null,!0):!1;default:return!1}}function My(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ly(e){if(Ot){var t=Un;if(t){var r=t;if(!JS(e,t)){if(My(e))throw Error(pe(418));t=Rs(r.nextSibling);var n=qn;t&&JS(e,t)?Dk(n,r):(e.flags=e.flags&-4097|2,Ot=!1,qn=e)}}else{if(My(e))throw Error(pe(418));e.flags=e.flags&-4097|2,Ot=!1,qn=e}}}function ZS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qn=e}function i0(e){if(e!==qn)return!1;if(!Ot)return ZS(e),Ot=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Py(e.type,e.memoizedProps)),t&&(t=Un)){if(My(e))throw Mk(),Error(pe(418));for(;t;)Dk(e,t),t=Rs(t.nextSibling)}if(ZS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(pe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Un=Rs(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Un=null}}else Un=qn?Rs(e.stateNode.nextSibling):null;return!0}function Mk(){for(var e=Un;e;)e=Rs(e.nextSibling)}function Fc(){Un=qn=null,Ot=!1}function $w(e){Ca===null?Ca=[e]:Ca.push(e)}var PL=Xi.ReactCurrentBatchConfig;function rd(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(pe(309));var n=r.stateNode}if(!n)throw Error(pe(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var l=a.refs;s===null?delete l[i]:l[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(pe(284));if(!r._owner)throw Error(pe(290,e))}return e}function s0(e,t){throw e=Object.prototype.toString.call(t),Error(pe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ej(e){var t=e._init;return t(e._payload)}function Lk(e){function t(b,m){if(e){var y=b.deletions;y===null?(b.deletions=[m],b.flags|=16):y.push(m)}}function r(b,m){if(!e)return null;for(;m!==null;)t(b,m),m=m.sibling;return null}function n(b,m){for(b=new Map;m!==null;)m.key!==null?b.set(m.key,m):b.set(m.index,m),m=m.sibling;return b}function a(b,m){return b=Ls(b,m),b.index=0,b.sibling=null,b}function i(b,m,y){return b.index=y,e?(y=b.alternate,y!==null?(y=y.index,y<m?(b.flags|=2,m):y):(b.flags|=2,m)):(b.flags|=1048576,m)}function s(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,m,y,_){return m===null||m.tag!==6?(m=dx(y,b.mode,_),m.return=b,m):(m=a(m,y),m.return=b,m)}function c(b,m,y,_){var w=y.type;return w===Wl?d(b,m,y.props.children,_,y.key):m!==null&&(m.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ss&&ej(w)===m.type)?(_=a(m,y.props),_.ref=rd(b,m,y),_.return=b,_):(_=np(y.type,y.key,y.props,null,b.mode,_),_.ref=rd(b,m,y),_.return=b,_)}function u(b,m,y,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=fx(y,b.mode,_),m.return=b,m):(m=a(m,y.children||[]),m.return=b,m)}function d(b,m,y,_,w){return m===null||m.tag!==7?(m=Go(y,b.mode,_,w),m.return=b,m):(m=a(m,y),m.return=b,m)}function f(b,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=dx(""+m,b.mode,y),m.return=b,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Xh:return y=np(m.type,m.key,m.props,null,b.mode,y),y.ref=rd(b,null,m),y.return=b,y;case ql:return m=fx(m,b.mode,y),m.return=b,m;case ss:var _=m._init;return f(b,_(m._payload),y)}if(yd(m)||Qu(m))return m=Go(m,b.mode,y,null),m.return=b,m;s0(b,m)}return null}function h(b,m,y,_){var w=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return w!==null?null:l(b,m,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Xh:return y.key===w?c(b,m,y,_):null;case ql:return y.key===w?u(b,m,y,_):null;case ss:return w=y._init,h(b,m,w(y._payload),_)}if(yd(y)||Qu(y))return w!==null?null:d(b,m,y,_,null);s0(b,y)}return null}function p(b,m,y,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return b=b.get(y)||null,l(m,b,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Xh:return b=b.get(_.key===null?y:_.key)||null,c(m,b,_,w);case ql:return b=b.get(_.key===null?y:_.key)||null,u(m,b,_,w);case ss:var S=_._init;return p(b,m,y,S(_._payload),w)}if(yd(_)||Qu(_))return b=b.get(y)||null,d(m,b,_,w,null);s0(m,_)}return null}function v(b,m,y,_){for(var w=null,S=null,j=m,E=m=0,N=null;j!==null&&E<y.length;E++){j.index>E?(N=j,j=null):N=j.sibling;var A=h(b,j,y[E],_);if(A===null){j===null&&(j=N);break}e&&j&&A.alternate===null&&t(b,j),m=i(A,m,E),S===null?w=A:S.sibling=A,S=A,j=N}if(E===y.length)return r(b,j),Ot&&go(b,E),w;if(j===null){for(;E<y.length;E++)j=f(b,y[E],_),j!==null&&(m=i(j,m,E),S===null?w=j:S.sibling=j,S=j);return Ot&&go(b,E),w}for(j=n(b,j);E<y.length;E++)N=p(j,b,E,y[E],_),N!==null&&(e&&N.alternate!==null&&j.delete(N.key===null?E:N.key),m=i(N,m,E),S===null?w=N:S.sibling=N,S=N);return e&&j.forEach(function(C){return t(b,C)}),Ot&&go(b,E),w}function g(b,m,y,_){var w=Qu(y);if(typeof w!="function")throw Error(pe(150));if(y=w.call(y),y==null)throw Error(pe(151));for(var S=w=null,j=m,E=m=0,N=null,A=y.next();j!==null&&!A.done;E++,A=y.next()){j.index>E?(N=j,j=null):N=j.sibling;var C=h(b,j,A.value,_);if(C===null){j===null&&(j=N);break}e&&j&&C.alternate===null&&t(b,j),m=i(C,m,E),S===null?w=C:S.sibling=C,S=C,j=N}if(A.done)return r(b,j),Ot&&go(b,E),w;if(j===null){for(;!A.done;E++,A=y.next())A=f(b,A.value,_),A!==null&&(m=i(A,m,E),S===null?w=A:S.sibling=A,S=A);return Ot&&go(b,E),w}for(j=n(b,j);!A.done;E++,A=y.next())A=p(j,b,E,A.value,_),A!==null&&(e&&A.alternate!==null&&j.delete(A.key===null?E:A.key),m=i(A,m,E),S===null?w=A:S.sibling=A,S=A);return e&&j.forEach(function(D){return t(b,D)}),Ot&&go(b,E),w}function x(b,m,y,_){if(typeof y=="object"&&y!==null&&y.type===Wl&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Xh:e:{for(var w=y.key,S=m;S!==null;){if(S.key===w){if(w=y.type,w===Wl){if(S.tag===7){r(b,S.sibling),m=a(S,y.props.children),m.return=b,b=m;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ss&&ej(w)===S.type){r(b,S.sibling),m=a(S,y.props),m.ref=rd(b,S,y),m.return=b,b=m;break e}r(b,S);break}else t(b,S);S=S.sibling}y.type===Wl?(m=Go(y.props.children,b.mode,_,y.key),m.return=b,b=m):(_=np(y.type,y.key,y.props,null,b.mode,_),_.ref=rd(b,m,y),_.return=b,b=_)}return s(b);case ql:e:{for(S=y.key;m!==null;){if(m.key===S)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){r(b,m.sibling),m=a(m,y.children||[]),m.return=b,b=m;break e}else{r(b,m);break}else t(b,m);m=m.sibling}m=fx(y,b.mode,_),m.return=b,b=m}return s(b);case ss:return S=y._init,x(b,m,S(y._payload),_)}if(yd(y))return v(b,m,y,_);if(Qu(y))return g(b,m,y,_);s0(b,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(r(b,m.sibling),m=a(m,y),m.return=b,b=m):(r(b,m),m=dx(y,b.mode,_),m.return=b,b=m),s(b)):r(b,m)}return x}var Bc=Lk(!0),$k=Lk(!1),wp=Qs(null),_p=null,Jl=null,Fw=null;function Bw(){Fw=Jl=_p=null}function Uw(e){var t=wp.current;Nt(wp),e._currentValue=t}function $y(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function dc(e,t){_p=e,Fw=Jl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yn=!0),e.firstContext=null)}function fa(e){var t=e._currentValue;if(Fw!==e)if(e={context:e,memoizedValue:t,next:null},Jl===null){if(_p===null)throw Error(pe(308));Jl=e,_p.dependencies={lanes:0,firstContext:e}}else Jl=Jl.next=e;return t}var Oo=null;function zw(e){Oo===null?Oo=[e]:Oo.push(e)}function Fk(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,zw(t)):(r.next=a.next,a.next=r),t.interleaved=r,$i(e,n)}function $i(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var os=!1;function qw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ti(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Is(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ye&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,$i(e,r)}return a=n.interleaved,a===null?(t.next=t,zw(n)):(t.next=a.next,a.next=t),n.interleaved=t,$i(e,r)}function Q0(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Aw(e,r)}}function tj(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=s:i=i.next=s,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Sp(e,t,r,n){var a=e.updateQueue;os=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,s===null?i=u:s.next=u,s=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==s&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;s=0,d=u=c=null,l=i;do{var h=l.lane,p=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,g=l;switch(h=t,p=r,g.tag){case 1:if(v=g.payload,typeof v=="function"){f=v.call(p,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,h=typeof v=="function"?v.call(p,f,h):v,h==null)break e;f=$t({},f,h);break e;case 2:os=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,s|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do s|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);tl|=s,e.lanes=s,e.memoizedState=f}}function rj(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(pe(191,a));a.call(n)}}}var gh={},ti=Qs(gh),of=Qs(gh),lf=Qs(gh);function Co(e){if(e===gh)throw Error(pe(174));return e}function Ww(e,t){switch(wt(lf,t),wt(of,e),wt(ti,gh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:xy(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=xy(t,e)}Nt(ti),wt(ti,t)}function Uc(){Nt(ti),Nt(of),Nt(lf)}function Uk(e){Co(lf.current);var t=Co(ti.current),r=xy(t,e.type);t!==r&&(wt(of,e),wt(ti,r))}function Hw(e){of.current===e&&(Nt(ti),Nt(of))}var Dt=Qs(0);function jp(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ix=[];function Vw(){for(var e=0;e<ix.length;e++)ix[e]._workInProgressVersionPrimary=null;ix.length=0}var J0=Xi.ReactCurrentDispatcher,sx=Xi.ReactCurrentBatchConfig,el=0,Mt=null,lr=null,gr=null,Ep=!1,Rd=!1,cf=0,RL=0;function Br(){throw Error(pe(321))}function Kw(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Fa(e[r],t[r]))return!1;return!0}function Gw(e,t,r,n,a,i){if(el=i,Mt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,J0.current=e===null||e.memoizedState===null?LL:$L,e=r(n,a),Rd){i=0;do{if(Rd=!1,cf=0,25<=i)throw Error(pe(301));i+=1,gr=lr=null,t.updateQueue=null,J0.current=FL,e=r(n,a)}while(Rd)}if(J0.current=Np,t=lr!==null&&lr.next!==null,el=0,gr=lr=Mt=null,Ep=!1,t)throw Error(pe(300));return e}function Xw(){var e=cf!==0;return cf=0,e}function Ka(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gr===null?Mt.memoizedState=gr=e:gr=gr.next=e,gr}function ha(){if(lr===null){var e=Mt.alternate;e=e!==null?e.memoizedState:null}else e=lr.next;var t=gr===null?Mt.memoizedState:gr.next;if(t!==null)gr=t,lr=e;else{if(e===null)throw Error(pe(310));lr=e,e={memoizedState:lr.memoizedState,baseState:lr.baseState,baseQueue:lr.baseQueue,queue:lr.queue,next:null},gr===null?Mt.memoizedState=gr=e:gr=gr.next=e}return gr}function uf(e,t){return typeof t=="function"?t(e):t}function ox(e){var t=ha(),r=t.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=e;var n=lr,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var s=a.next;a.next=i.next,i.next=s}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=s=null,c=null,u=i;do{var d=u.lane;if((el&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,s=n):c=c.next=f,Mt.lanes|=d,tl|=d}u=u.next}while(u!==null&&u!==i);c===null?s=n:c.next=l,Fa(n,t.memoizedState)||(yn=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Mt.lanes|=i,tl|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function lx(e){var t=ha(),r=t.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var s=a=a.next;do i=e(i,s.action),s=s.next;while(s!==a);Fa(i,t.memoizedState)||(yn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function zk(){}function qk(e,t){var r=Mt,n=ha(),a=t(),i=!Fa(n.memoizedState,a);if(i&&(n.memoizedState=a,yn=!0),n=n.queue,Yw(Vk.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||gr!==null&&gr.memoizedState.tag&1){if(r.flags|=2048,df(9,Hk.bind(null,r,n,a,t),void 0,null),_r===null)throw Error(pe(349));el&30||Wk(r,t,a)}return a}function Wk(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Mt.updateQueue,t===null?(t={lastEffect:null,stores:null},Mt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Hk(e,t,r,n){t.value=r,t.getSnapshot=n,Kk(t)&&Gk(e)}function Vk(e,t,r){return r(function(){Kk(t)&&Gk(e)})}function Kk(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Fa(e,r)}catch{return!0}}function Gk(e){var t=$i(e,1);t!==null&&Ma(t,e,1,-1)}function nj(e){var t=Ka();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uf,lastRenderedState:e},t.queue=e,e=e.dispatch=ML.bind(null,Mt,e),[t.memoizedState,e]}function df(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Mt.updateQueue,t===null?(t={lastEffect:null,stores:null},Mt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Xk(){return ha().memoizedState}function Z0(e,t,r,n){var a=Ka();Mt.flags|=e,a.memoizedState=df(1|t,r,void 0,n===void 0?null:n)}function hg(e,t,r,n){var a=ha();n=n===void 0?null:n;var i=void 0;if(lr!==null){var s=lr.memoizedState;if(i=s.destroy,n!==null&&Kw(n,s.deps)){a.memoizedState=df(t,r,i,n);return}}Mt.flags|=e,a.memoizedState=df(1|t,r,i,n)}function aj(e,t){return Z0(8390656,8,e,t)}function Yw(e,t){return hg(2048,8,e,t)}function Yk(e,t){return hg(4,2,e,t)}function Qk(e,t){return hg(4,4,e,t)}function Jk(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Zk(e,t,r){return r=r!=null?r.concat([e]):null,hg(4,4,Jk.bind(null,t,e),r)}function Qw(){}function e4(e,t){var r=ha();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Kw(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function t4(e,t){var r=ha();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Kw(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function r4(e,t,r){return el&21?(Fa(r,t)||(r=ok(),Mt.lanes|=r,tl|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yn=!0),e.memoizedState=r)}function IL(e,t){var r=dt;dt=r!==0&&4>r?r:4,e(!0);var n=sx.transition;sx.transition={};try{e(!1),t()}finally{dt=r,sx.transition=n}}function n4(){return ha().memoizedState}function DL(e,t,r){var n=Ms(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},a4(e))i4(t,r);else if(r=Fk(e,t,r,n),r!==null){var a=cn();Ma(r,e,n,a),s4(r,t,n)}}function ML(e,t,r){var n=Ms(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(a4(e))i4(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,l=i(s,r);if(a.hasEagerState=!0,a.eagerState=l,Fa(l,s)){var c=t.interleaved;c===null?(a.next=a,zw(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=Fk(e,t,a,n),r!==null&&(a=cn(),Ma(r,e,n,a),s4(r,t,n))}}function a4(e){var t=e.alternate;return e===Mt||t!==null&&t===Mt}function i4(e,t){Rd=Ep=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function s4(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Aw(e,r)}}var Np={readContext:fa,useCallback:Br,useContext:Br,useEffect:Br,useImperativeHandle:Br,useInsertionEffect:Br,useLayoutEffect:Br,useMemo:Br,useReducer:Br,useRef:Br,useState:Br,useDebugValue:Br,useDeferredValue:Br,useTransition:Br,useMutableSource:Br,useSyncExternalStore:Br,useId:Br,unstable_isNewReconciler:!1},LL={readContext:fa,useCallback:function(e,t){return Ka().memoizedState=[e,t===void 0?null:t],e},useContext:fa,useEffect:aj,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Z0(4194308,4,Jk.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Z0(4194308,4,e,t)},useInsertionEffect:function(e,t){return Z0(4,2,e,t)},useMemo:function(e,t){var r=Ka();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ka();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=DL.bind(null,Mt,e),[n.memoizedState,e]},useRef:function(e){var t=Ka();return e={current:e},t.memoizedState=e},useState:nj,useDebugValue:Qw,useDeferredValue:function(e){return Ka().memoizedState=e},useTransition:function(){var e=nj(!1),t=e[0];return e=IL.bind(null,e[1]),Ka().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Mt,a=Ka();if(Ot){if(r===void 0)throw Error(pe(407));r=r()}else{if(r=t(),_r===null)throw Error(pe(349));el&30||Wk(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,aj(Vk.bind(null,n,i,e),[e]),n.flags|=2048,df(9,Hk.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Ka(),t=_r.identifierPrefix;if(Ot){var r=Si,n=_i;r=(n&~(1<<32-Da(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=cf++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=RL++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$L={readContext:fa,useCallback:e4,useContext:fa,useEffect:Yw,useImperativeHandle:Zk,useInsertionEffect:Yk,useLayoutEffect:Qk,useMemo:t4,useReducer:ox,useRef:Xk,useState:function(){return ox(uf)},useDebugValue:Qw,useDeferredValue:function(e){var t=ha();return r4(t,lr.memoizedState,e)},useTransition:function(){var e=ox(uf)[0],t=ha().memoizedState;return[e,t]},useMutableSource:zk,useSyncExternalStore:qk,useId:n4,unstable_isNewReconciler:!1},FL={readContext:fa,useCallback:e4,useContext:fa,useEffect:Yw,useImperativeHandle:Zk,useInsertionEffect:Yk,useLayoutEffect:Qk,useMemo:t4,useReducer:lx,useRef:Xk,useState:function(){return lx(uf)},useDebugValue:Qw,useDeferredValue:function(e){var t=ha();return lr===null?t.memoizedState=e:r4(t,lr.memoizedState,e)},useTransition:function(){var e=lx(uf)[0],t=ha().memoizedState;return[e,t]},useMutableSource:zk,useSyncExternalStore:qk,useId:n4,unstable_isNewReconciler:!1};function Sa(e,t){if(e&&e.defaultProps){t=$t({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Fy(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:$t({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var pg={isMounted:function(e){return(e=e._reactInternals)?vl(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=cn(),a=Ms(e),i=Ti(n,a);i.payload=t,r!=null&&(i.callback=r),t=Is(e,i,a),t!==null&&(Ma(t,e,a,n),Q0(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=cn(),a=Ms(e),i=Ti(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Is(e,i,a),t!==null&&(Ma(t,e,a,n),Q0(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=cn(),n=Ms(e),a=Ti(r,n);a.tag=2,t!=null&&(a.callback=t),t=Is(e,a,n),t!==null&&(Ma(t,e,n,r),Q0(t,e,n))}};function ij(e,t,r,n,a,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,s):t.prototype&&t.prototype.isPureReactComponent?!rf(r,n)||!rf(a,i):!0}function o4(e,t,r){var n=!1,a=qs,i=t.contextType;return typeof i=="object"&&i!==null?i=fa(i):(a=Sn(t)?Jo:Gr.current,n=t.contextTypes,i=(n=n!=null)?$c(e,a):qs),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=pg,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function sj(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&pg.enqueueReplaceState(t,t.state,null)}function By(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},qw(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=fa(i):(i=Sn(t)?Jo:Gr.current,a.context=$c(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Fy(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&pg.enqueueReplaceState(a,a.state,null),Sp(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function zc(e,t){try{var r="",n=t;do r+=hM(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function cx(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Uy(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var BL=typeof WeakMap=="function"?WeakMap:Map;function l4(e,t,r){r=Ti(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ap||(Ap=!0,Qy=n),Uy(e,t)},r}function c4(e,t,r){r=Ti(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Uy(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Uy(e,t),typeof n!="function"&&(Ds===null?Ds=new Set([this]):Ds.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function oj(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new BL;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=e$.bind(null,e,t,r),t.then(e,e))}function lj(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function cj(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ti(-1,1),t.tag=2,Is(r,t,1))),r.lanes|=1),e)}var UL=Xi.ReactCurrentOwner,yn=!1;function en(e,t,r,n){t.child=e===null?$k(t,null,r,n):Bc(t,e.child,r,n)}function uj(e,t,r,n,a){r=r.render;var i=t.ref;return dc(t,a),n=Gw(e,t,r,n,i,a),r=Xw(),e!==null&&!yn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Fi(e,t,a)):(Ot&&r&&Mw(t),t.flags|=1,en(e,t,n,a),t.child)}function dj(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!i_(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,u4(e,t,i,n,a)):(e=np(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var s=i.memoizedProps;if(r=r.compare,r=r!==null?r:rf,r(s,n)&&e.ref===t.ref)return Fi(e,t,a)}return t.flags|=1,e=Ls(i,n),e.ref=t.ref,e.return=t,t.child=e}function u4(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(rf(i,n)&&e.ref===t.ref)if(yn=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(yn=!0);else return t.lanes=e.lanes,Fi(e,t,a)}return zy(e,t,r,n,a)}function d4(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(ec,Rn),Rn|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,wt(ec,Rn),Rn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,wt(ec,Rn),Rn|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,wt(ec,Rn),Rn|=n;return en(e,t,a,r),t.child}function f4(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function zy(e,t,r,n,a){var i=Sn(r)?Jo:Gr.current;return i=$c(t,i),dc(t,a),r=Gw(e,t,r,n,i,a),n=Xw(),e!==null&&!yn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Fi(e,t,a)):(Ot&&n&&Mw(t),t.flags|=1,en(e,t,r,a),t.child)}function fj(e,t,r,n,a){if(Sn(r)){var i=!0;xp(t)}else i=!1;if(dc(t,a),t.stateNode===null)ep(e,t),o4(t,r,n),By(t,r,n,a),n=!0;else if(e===null){var s=t.stateNode,l=t.memoizedProps;s.props=l;var c=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=fa(u):(u=Sn(r)?Jo:Gr.current,u=$c(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==n||c!==u)&&sj(t,s,n,u),os=!1;var h=t.memoizedState;s.state=h,Sp(t,n,s,a),c=t.memoizedState,l!==n||h!==c||_n.current||os?(typeof d=="function"&&(Fy(t,r,d,n),c=t.memoizedState),(l=os||ij(t,r,l,n,h,c,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),s.props=n,s.state=c,s.context=u,n=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,Bk(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Sa(t.type,l),s.props=u,f=t.pendingProps,h=s.context,c=r.contextType,typeof c=="object"&&c!==null?c=fa(c):(c=Sn(r)?Jo:Gr.current,c=$c(t,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==f||h!==c)&&sj(t,s,n,c),os=!1,h=t.memoizedState,s.state=h,Sp(t,n,s,a);var v=t.memoizedState;l!==f||h!==v||_n.current||os?(typeof p=="function"&&(Fy(t,r,p,n),v=t.memoizedState),(u=os||ij(t,r,u,n,h,v,c)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,v,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,v,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),s.props=n,s.state=v,s.context=c,n=u):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return qy(e,t,r,n,i,a)}function qy(e,t,r,n,a,i){f4(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return a&&QS(t,r,!1),Fi(e,t,i);n=t.stateNode,UL.current=t;var l=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=Bc(t,e.child,null,i),t.child=Bc(t,null,l,i)):en(e,t,l,i),t.memoizedState=n.state,a&&QS(t,r,!0),t.child}function h4(e){var t=e.stateNode;t.pendingContext?YS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&YS(e,t.context,!1),Ww(e,t.containerInfo)}function hj(e,t,r,n,a){return Fc(),$w(a),t.flags|=256,en(e,t,r,n),t.child}var Wy={dehydrated:null,treeContext:null,retryLane:0};function Hy(e){return{baseLanes:e,cachePool:null,transitions:null}}function p4(e,t,r){var n=t.pendingProps,a=Dt.current,i=!1,s=(t.flags&128)!==0,l;if((l=s)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),wt(Dt,a&1),e===null)return Ly(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,i?(n=t.mode,i=t.child,s={mode:"hidden",children:s},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=vg(s,n,0,null),e=Go(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Hy(r),t.memoizedState=Wy,e):Jw(t,s));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return zL(e,t,s,n,l,a,r);if(i){i=n.fallback,s=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(s&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Ls(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Ls(l,i):(i=Go(i,s,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,s=e.child.memoizedState,s=s===null?Hy(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~r,t.memoizedState=Wy,n}return i=e.child,e=i.sibling,n=Ls(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Jw(e,t){return t=vg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function o0(e,t,r,n){return n!==null&&$w(n),Bc(t,e.child,null,r),e=Jw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zL(e,t,r,n,a,i,s){if(r)return t.flags&256?(t.flags&=-257,n=cx(Error(pe(422))),o0(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=vg({mode:"visible",children:n.children},a,0,null),i=Go(i,a,s,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Bc(t,e.child,null,s),t.child.memoizedState=Hy(s),t.memoizedState=Wy,i);if(!(t.mode&1))return o0(e,t,s,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(pe(419)),n=cx(i,n,void 0),o0(e,t,s,n)}if(l=(s&e.childLanes)!==0,yn||l){if(n=_r,n!==null){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|s)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,$i(e,a),Ma(n,e,a,-1))}return a_(),n=cx(Error(pe(421))),o0(e,t,s,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=t$.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Un=Rs(a.nextSibling),qn=t,Ot=!0,Ca=null,e!==null&&(ia[sa++]=_i,ia[sa++]=Si,ia[sa++]=Zo,_i=e.id,Si=e.overflow,Zo=t),t=Jw(t,n.children),t.flags|=4096,t)}function pj(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),$y(e.return,t,r)}function ux(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function m4(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(en(e,t,n.children,r),n=Dt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pj(e,r,t);else if(e.tag===19)pj(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(wt(Dt,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&jp(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),ux(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&jp(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}ux(t,!0,r,null,i);break;case"together":ux(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ep(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Fi(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),tl|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(pe(153));if(t.child!==null){for(e=t.child,r=Ls(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ls(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function qL(e,t,r){switch(t.tag){case 3:h4(t),Fc();break;case 5:Uk(t);break;case 1:Sn(t.type)&&xp(t);break;case 4:Ww(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;wt(wp,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(wt(Dt,Dt.current&1),t.flags|=128,null):r&t.child.childLanes?p4(e,t,r):(wt(Dt,Dt.current&1),e=Fi(e,t,r),e!==null?e.sibling:null);wt(Dt,Dt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return m4(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),wt(Dt,Dt.current),n)break;return null;case 22:case 23:return t.lanes=0,d4(e,t,r)}return Fi(e,t,r)}var g4,Vy,v4,x4;g4=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Vy=function(){};v4=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Co(ti.current);var i=null;switch(r){case"input":a=py(e,a),n=py(e,n),i=[];break;case"select":a=$t({},a,{value:void 0}),n=$t({},n,{value:void 0}),i=[];break;case"textarea":a=vy(e,a),n=vy(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=gp)}yy(r,n);var s;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Xd.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Xd.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&St("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};x4=function(e,t,r,n){r!==n&&(t.flags|=4)};function nd(e,t){if(!Ot)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ur(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function WL(e,t,r){var n=t.pendingProps;switch(Lw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ur(t),null;case 1:return Sn(t.type)&&vp(),Ur(t),null;case 3:return n=t.stateNode,Uc(),Nt(_n),Nt(Gr),Vw(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(i0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ca!==null&&(e1(Ca),Ca=null))),Vy(e,t),Ur(t),null;case 5:Hw(t);var a=Co(lf.current);if(r=t.type,e!==null&&t.stateNode!=null)v4(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(pe(166));return Ur(t),null}if(e=Co(ti.current),i0(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Ja]=t,n[sf]=i,e=(t.mode&1)!==0,r){case"dialog":St("cancel",n),St("close",n);break;case"iframe":case"object":case"embed":St("load",n);break;case"video":case"audio":for(a=0;a<wd.length;a++)St(wd[a],n);break;case"source":St("error",n);break;case"img":case"image":case"link":St("error",n),St("load",n);break;case"details":St("toggle",n);break;case"input":SS(n,i),St("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},St("invalid",n);break;case"textarea":ES(n,i),St("invalid",n)}yy(r,i),a=null;for(var s in i)if(i.hasOwnProperty(s)){var l=i[s];s==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&a0(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&a0(n.textContent,l,e),a=["children",""+l]):Xd.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&St("scroll",n)}switch(r){case"input":Yh(n),jS(n,i,!0);break;case"textarea":Yh(n),NS(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=gp)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=VC(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[Ja]=t,e[sf]=n,g4(e,t,!1,!1),t.stateNode=e;e:{switch(s=by(r,n),r){case"dialog":St("cancel",e),St("close",e),a=n;break;case"iframe":case"object":case"embed":St("load",e),a=n;break;case"video":case"audio":for(a=0;a<wd.length;a++)St(wd[a],e);a=n;break;case"source":St("error",e),a=n;break;case"img":case"image":case"link":St("error",e),St("load",e),a=n;break;case"details":St("toggle",e),a=n;break;case"input":SS(e,n),a=py(e,n),St("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=$t({},n,{value:void 0}),St("invalid",e);break;case"textarea":ES(e,n),a=vy(e,n),St("invalid",e);break;default:a=n}yy(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?XC(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&KC(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Yd(e,c):typeof c=="number"&&Yd(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Xd.hasOwnProperty(i)?c!=null&&i==="onScroll"&&St("scroll",e):c!=null&&_w(e,i,c,s))}switch(r){case"input":Yh(e),jS(e,n,!1);break;case"textarea":Yh(e),NS(e);break;case"option":n.value!=null&&e.setAttribute("value",""+zs(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?oc(e,!!n.multiple,i,!1):n.defaultValue!=null&&oc(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=gp)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ur(t),null;case 6:if(e&&t.stateNode!=null)x4(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(pe(166));if(r=Co(lf.current),Co(ti.current),i0(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ja]=t,(i=n.nodeValue!==r)&&(e=qn,e!==null))switch(e.tag){case 3:a0(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&a0(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ja]=t,t.stateNode=n}return Ur(t),null;case 13:if(Nt(Dt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ot&&Un!==null&&t.mode&1&&!(t.flags&128))Mk(),Fc(),t.flags|=98560,i=!1;else if(i=i0(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(pe(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(pe(317));i[Ja]=t}else Fc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ur(t),i=!1}else Ca!==null&&(e1(Ca),Ca=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Dt.current&1?ur===0&&(ur=3):a_())),t.updateQueue!==null&&(t.flags|=4),Ur(t),null);case 4:return Uc(),Vy(e,t),e===null&&nf(t.stateNode.containerInfo),Ur(t),null;case 10:return Uw(t.type._context),Ur(t),null;case 17:return Sn(t.type)&&vp(),Ur(t),null;case 19:if(Nt(Dt),i=t.memoizedState,i===null)return Ur(t),null;if(n=(t.flags&128)!==0,s=i.rendering,s===null)if(n)nd(i,!1);else{if(ur!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=jp(e),s!==null){for(t.flags|=128,nd(i,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return wt(Dt,Dt.current&1|2),t.child}e=e.sibling}i.tail!==null&&Vt()>qc&&(t.flags|=128,n=!0,nd(i,!1),t.lanes=4194304)}else{if(!n)if(e=jp(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),nd(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!Ot)return Ur(t),null}else 2*Vt()-i.renderingStartTime>qc&&r!==1073741824&&(t.flags|=128,n=!0,nd(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(r=i.last,r!==null?r.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Vt(),t.sibling=null,r=Dt.current,wt(Dt,n?r&1|2:r&1),t):(Ur(t),null);case 22:case 23:return n_(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Rn&1073741824&&(Ur(t),t.subtreeFlags&6&&(t.flags|=8192)):Ur(t),null;case 24:return null;case 25:return null}throw Error(pe(156,t.tag))}function HL(e,t){switch(Lw(t),t.tag){case 1:return Sn(t.type)&&vp(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Uc(),Nt(_n),Nt(Gr),Vw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Hw(t),null;case 13:if(Nt(Dt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(pe(340));Fc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Nt(Dt),null;case 4:return Uc(),null;case 10:return Uw(t.type._context),null;case 22:case 23:return n_(),null;case 24:return null;default:return null}}var l0=!1,qr=!1,VL=typeof WeakSet=="function"?WeakSet:Set,Te=null;function Zl(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ut(e,t,n)}else r.current=null}function Ky(e,t,r){try{r()}catch(n){Ut(e,t,n)}}var mj=!1;function KL(e,t){if(Cy=hp,e=Sk(),Dw(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var s=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==r||a!==0&&f.nodeType!==3||(l=s+a),f!==i||n!==0&&f.nodeType!==3||(c=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===r&&++u===a&&(l=s),h===i&&++d===n&&(c=s),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ky={focusedElem:e,selectionRange:r},hp=!1,Te=t;Te!==null;)if(t=Te,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Te=e;else for(;Te!==null;){t=Te;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,x=v.memoizedState,b=t.stateNode,m=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:Sa(t.type,g),x);b.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pe(163))}}catch(_){Ut(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Te=e;break}Te=t.return}return v=mj,mj=!1,v}function Id(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Ky(t,r,i)}a=a.next}while(a!==n)}}function mg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Gy(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function y4(e){var t=e.alternate;t!==null&&(e.alternate=null,y4(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ja],delete t[sf],delete t[Iy],delete t[OL],delete t[CL])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function b4(e){return e.tag===5||e.tag===3||e.tag===4}function gj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||b4(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xy(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=gp));else if(n!==4&&(e=e.child,e!==null))for(Xy(e,t,r),e=e.sibling;e!==null;)Xy(e,t,r),e=e.sibling}function Yy(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Yy(e,t,r),e=e.sibling;e!==null;)Yy(e,t,r),e=e.sibling}var Cr=null,Ta=!1;function ns(e,t,r){for(r=r.child;r!==null;)w4(e,t,r),r=r.sibling}function w4(e,t,r){if(ei&&typeof ei.onCommitFiberUnmount=="function")try{ei.onCommitFiberUnmount(og,r)}catch{}switch(r.tag){case 5:qr||Zl(r,t);case 6:var n=Cr,a=Ta;Cr=null,ns(e,t,r),Cr=n,Ta=a,Cr!==null&&(Ta?(e=Cr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Cr.removeChild(r.stateNode));break;case 18:Cr!==null&&(Ta?(e=Cr,r=r.stateNode,e.nodeType===8?nx(e.parentNode,r):e.nodeType===1&&nx(e,r),ef(e)):nx(Cr,r.stateNode));break;case 4:n=Cr,a=Ta,Cr=r.stateNode.containerInfo,Ta=!0,ns(e,t,r),Cr=n,Ta=a;break;case 0:case 11:case 14:case 15:if(!qr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Ky(r,t,s),a=a.next}while(a!==n)}ns(e,t,r);break;case 1:if(!qr&&(Zl(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ut(r,t,l)}ns(e,t,r);break;case 21:ns(e,t,r);break;case 22:r.mode&1?(qr=(n=qr)||r.memoizedState!==null,ns(e,t,r),qr=n):ns(e,t,r);break;default:ns(e,t,r)}}function vj(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new VL),t.forEach(function(n){var a=r$.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function xa(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,s=t,l=s;e:for(;l!==null;){switch(l.tag){case 5:Cr=l.stateNode,Ta=!1;break e;case 3:Cr=l.stateNode.containerInfo,Ta=!0;break e;case 4:Cr=l.stateNode.containerInfo,Ta=!0;break e}l=l.return}if(Cr===null)throw Error(pe(160));w4(i,s,a),Cr=null,Ta=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Ut(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)_4(t,e),t=t.sibling}function _4(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xa(t,e),Wa(e),n&4){try{Id(3,e,e.return),mg(3,e)}catch(g){Ut(e,e.return,g)}try{Id(5,e,e.return)}catch(g){Ut(e,e.return,g)}}break;case 1:xa(t,e),Wa(e),n&512&&r!==null&&Zl(r,r.return);break;case 5:if(xa(t,e),Wa(e),n&512&&r!==null&&Zl(r,r.return),e.flags&32){var a=e.stateNode;try{Yd(a,"")}catch(g){Ut(e,e.return,g)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,s=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&WC(a,i),by(l,s);var u=by(l,i);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];d==="style"?XC(a,f):d==="dangerouslySetInnerHTML"?KC(a,f):d==="children"?Yd(a,f):_w(a,d,f,u)}switch(l){case"input":my(a,i);break;case"textarea":HC(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?oc(a,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?oc(a,!!i.multiple,i.defaultValue,!0):oc(a,!!i.multiple,i.multiple?[]:"",!1))}a[sf]=i}catch(g){Ut(e,e.return,g)}}break;case 6:if(xa(t,e),Wa(e),n&4){if(e.stateNode===null)throw Error(pe(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Ut(e,e.return,g)}}break;case 3:if(xa(t,e),Wa(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ef(t.containerInfo)}catch(g){Ut(e,e.return,g)}break;case 4:xa(t,e),Wa(e);break;case 13:xa(t,e),Wa(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(t_=Vt())),n&4&&vj(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(qr=(u=qr)||d,xa(t,e),qr=u):xa(t,e),Wa(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Te=e,d=e.child;d!==null;){for(f=Te=d;Te!==null;){switch(h=Te,p=h.child,h.tag){case 0:case 11:case 14:case 15:Id(4,h,h.return);break;case 1:Zl(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(g){Ut(n,r,g)}}break;case 5:Zl(h,h.return);break;case 22:if(h.memoizedState!==null){yj(f);continue}}p!==null?(p.return=h,Te=p):yj(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=GC("display",s))}catch(g){Ut(e,e.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Ut(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:xa(t,e),Wa(e),n&4&&vj(e);break;case 21:break;default:xa(t,e),Wa(e)}}function Wa(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(b4(r)){var n=r;break e}r=r.return}throw Error(pe(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Yd(a,""),n.flags&=-33);var i=gj(e);Yy(e,i,a);break;case 3:case 4:var s=n.stateNode.containerInfo,l=gj(e);Xy(e,l,s);break;default:throw Error(pe(161))}}catch(c){Ut(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function GL(e,t,r){Te=e,S4(e)}function S4(e,t,r){for(var n=(e.mode&1)!==0;Te!==null;){var a=Te,i=a.child;if(a.tag===22&&n){var s=a.memoizedState!==null||l0;if(!s){var l=a.alternate,c=l!==null&&l.memoizedState!==null||qr;l=l0;var u=qr;if(l0=s,(qr=c)&&!u)for(Te=a;Te!==null;)s=Te,c=s.child,s.tag===22&&s.memoizedState!==null?bj(a):c!==null?(c.return=s,Te=c):bj(a);for(;i!==null;)Te=i,S4(i),i=i.sibling;Te=a,l0=l,qr=u}xj(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Te=i):xj(e)}}function xj(e){for(;Te!==null;){var t=Te;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qr||mg(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!qr)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Sa(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&rj(t,i,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}rj(t,s,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&ef(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pe(163))}qr||t.flags&512&&Gy(t)}catch(h){Ut(t,t.return,h)}}if(t===e){Te=null;break}if(r=t.sibling,r!==null){r.return=t.return,Te=r;break}Te=t.return}}function yj(e){for(;Te!==null;){var t=Te;if(t===e){Te=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Te=r;break}Te=t.return}}function bj(e){for(;Te!==null;){var t=Te;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{mg(4,t)}catch(c){Ut(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Ut(t,a,c)}}var i=t.return;try{Gy(t)}catch(c){Ut(t,i,c)}break;case 5:var s=t.return;try{Gy(t)}catch(c){Ut(t,s,c)}}}catch(c){Ut(t,t.return,c)}if(t===e){Te=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Te=l;break}Te=t.return}}var XL=Math.ceil,Tp=Xi.ReactCurrentDispatcher,Zw=Xi.ReactCurrentOwner,ua=Xi.ReactCurrentBatchConfig,Ye=0,_r=null,er=null,Ir=0,Rn=0,ec=Qs(0),ur=0,ff=null,tl=0,gg=0,e_=0,Dd=null,xn=null,t_=0,qc=1/0,mi=null,Ap=!1,Qy=null,Ds=null,c0=!1,Es=null,Op=0,Md=0,Jy=null,tp=-1,rp=0;function cn(){return Ye&6?Vt():tp!==-1?tp:tp=Vt()}function Ms(e){return e.mode&1?Ye&2&&Ir!==0?Ir&-Ir:PL.transition!==null?(rp===0&&(rp=ok()),rp):(e=dt,e!==0||(e=window.event,e=e===void 0?16:pk(e.type)),e):1}function Ma(e,t,r,n){if(50<Md)throw Md=0,Jy=null,Error(pe(185));hh(e,r,n),(!(Ye&2)||e!==_r)&&(e===_r&&(!(Ye&2)&&(gg|=r),ur===4&&ds(e,Ir)),jn(e,n),r===1&&Ye===0&&!(t.mode&1)&&(qc=Vt()+500,fg&&Js()))}function jn(e,t){var r=e.callbackNode;PM(e,t);var n=fp(e,e===_r?Ir:0);if(n===0)r!==null&&OS(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&OS(r),t===1)e.tag===0?kL(wj.bind(null,e)):Rk(wj.bind(null,e)),TL(function(){!(Ye&6)&&Js()}),r=null;else{switch(lk(n)){case 1:r=Tw;break;case 4:r=ik;break;case 16:r=dp;break;case 536870912:r=sk;break;default:r=dp}r=k4(r,j4.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function j4(e,t){if(tp=-1,rp=0,Ye&6)throw Error(pe(327));var r=e.callbackNode;if(fc()&&e.callbackNode!==r)return null;var n=fp(e,e===_r?Ir:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Cp(e,n);else{t=n;var a=Ye;Ye|=2;var i=N4();(_r!==e||Ir!==t)&&(mi=null,qc=Vt()+500,Ko(e,t));do try{JL();break}catch(l){E4(e,l)}while(!0);Bw(),Tp.current=i,Ye=a,er!==null?t=0:(_r=null,Ir=0,t=ur)}if(t!==0){if(t===2&&(a=Ey(e),a!==0&&(n=a,t=Zy(e,a))),t===1)throw r=ff,Ko(e,0),ds(e,n),jn(e,Vt()),r;if(t===6)ds(e,n);else{if(a=e.current.alternate,!(n&30)&&!YL(a)&&(t=Cp(e,n),t===2&&(i=Ey(e),i!==0&&(n=i,t=Zy(e,i))),t===1))throw r=ff,Ko(e,0),ds(e,n),jn(e,Vt()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(pe(345));case 2:vo(e,xn,mi);break;case 3:if(ds(e,n),(n&130023424)===n&&(t=t_+500-Vt(),10<t)){if(fp(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){cn(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Ry(vo.bind(null,e,xn,mi),t);break}vo(e,xn,mi);break;case 4:if(ds(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var s=31-Da(n);i=1<<s,s=t[s],s>a&&(a=s),n&=~i}if(n=a,n=Vt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*XL(n/1960))-n,10<n){e.timeoutHandle=Ry(vo.bind(null,e,xn,mi),n);break}vo(e,xn,mi);break;case 5:vo(e,xn,mi);break;default:throw Error(pe(329))}}}return jn(e,Vt()),e.callbackNode===r?j4.bind(null,e):null}function Zy(e,t){var r=Dd;return e.current.memoizedState.isDehydrated&&(Ko(e,t).flags|=256),e=Cp(e,t),e!==2&&(t=xn,xn=r,t!==null&&e1(t)),e}function e1(e){xn===null?xn=e:xn.push.apply(xn,e)}function YL(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Fa(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ds(e,t){for(t&=~e_,t&=~gg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Da(t),n=1<<r;e[r]=-1,t&=~n}}function wj(e){if(Ye&6)throw Error(pe(327));fc();var t=fp(e,0);if(!(t&1))return jn(e,Vt()),null;var r=Cp(e,t);if(e.tag!==0&&r===2){var n=Ey(e);n!==0&&(t=n,r=Zy(e,n))}if(r===1)throw r=ff,Ko(e,0),ds(e,t),jn(e,Vt()),r;if(r===6)throw Error(pe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vo(e,xn,mi),jn(e,Vt()),null}function r_(e,t){var r=Ye;Ye|=1;try{return e(t)}finally{Ye=r,Ye===0&&(qc=Vt()+500,fg&&Js())}}function rl(e){Es!==null&&Es.tag===0&&!(Ye&6)&&fc();var t=Ye;Ye|=1;var r=ua.transition,n=dt;try{if(ua.transition=null,dt=1,e)return e()}finally{dt=n,ua.transition=r,Ye=t,!(Ye&6)&&Js()}}function n_(){Rn=ec.current,Nt(ec)}function Ko(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,NL(r)),er!==null)for(r=er.return;r!==null;){var n=r;switch(Lw(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&vp();break;case 3:Uc(),Nt(_n),Nt(Gr),Vw();break;case 5:Hw(n);break;case 4:Uc();break;case 13:Nt(Dt);break;case 19:Nt(Dt);break;case 10:Uw(n.type._context);break;case 22:case 23:n_()}r=r.return}if(_r=e,er=e=Ls(e.current,null),Ir=Rn=t,ur=0,ff=null,e_=gg=tl=0,xn=Dd=null,Oo!==null){for(t=0;t<Oo.length;t++)if(r=Oo[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var s=i.next;i.next=a,n.next=s}r.pending=n}Oo=null}return e}function E4(e,t){do{var r=er;try{if(Bw(),J0.current=Np,Ep){for(var n=Mt.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Ep=!1}if(el=0,gr=lr=Mt=null,Rd=!1,cf=0,Zw.current=null,r===null||r.return===null){ur=1,ff=t,er=null;break}e:{var i=e,s=r.return,l=r,c=t;if(t=Ir,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=lj(s);if(p!==null){p.flags&=-257,cj(p,s,l,i,t),p.mode&1&&oj(i,u,t),t=p,c=u;var v=t.updateQueue;if(v===null){var g=new Set;g.add(c),t.updateQueue=g}else v.add(c);break e}else{if(!(t&1)){oj(i,u,t),a_();break e}c=Error(pe(426))}}else if(Ot&&l.mode&1){var x=lj(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),cj(x,s,l,i,t),$w(zc(c,l));break e}}i=c=zc(c,l),ur!==4&&(ur=2),Dd===null?Dd=[i]:Dd.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=l4(i,c,t);tj(i,b);break e;case 1:l=c;var m=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ds===null||!Ds.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=c4(i,l,t);tj(i,_);break e}}i=i.return}while(i!==null)}A4(r)}catch(w){t=w,er===r&&r!==null&&(er=r=r.return);continue}break}while(!0)}function N4(){var e=Tp.current;return Tp.current=Np,e===null?Np:e}function a_(){(ur===0||ur===3||ur===2)&&(ur=4),_r===null||!(tl&268435455)&&!(gg&268435455)||ds(_r,Ir)}function Cp(e,t){var r=Ye;Ye|=2;var n=N4();(_r!==e||Ir!==t)&&(mi=null,Ko(e,t));do try{QL();break}catch(a){E4(e,a)}while(!0);if(Bw(),Ye=r,Tp.current=n,er!==null)throw Error(pe(261));return _r=null,Ir=0,ur}function QL(){for(;er!==null;)T4(er)}function JL(){for(;er!==null&&!SM();)T4(er)}function T4(e){var t=C4(e.alternate,e,Rn);e.memoizedProps=e.pendingProps,t===null?A4(e):er=t,Zw.current=null}function A4(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=HL(r,t),r!==null){r.flags&=32767,er=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ur=6,er=null;return}}else if(r=WL(r,t,Rn),r!==null){er=r;return}if(t=t.sibling,t!==null){er=t;return}er=t=e}while(t!==null);ur===0&&(ur=5)}function vo(e,t,r){var n=dt,a=ua.transition;try{ua.transition=null,dt=1,ZL(e,t,r,n)}finally{ua.transition=a,dt=n}return null}function ZL(e,t,r,n){do fc();while(Es!==null);if(Ye&6)throw Error(pe(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(pe(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(RM(e,i),e===_r&&(er=_r=null,Ir=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||c0||(c0=!0,k4(dp,function(){return fc(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ua.transition,ua.transition=null;var s=dt;dt=1;var l=Ye;Ye|=4,Zw.current=null,KL(e,r),_4(r,e),yL(ky),hp=!!Cy,ky=Cy=null,e.current=r,GL(r),jM(),Ye=l,dt=s,ua.transition=i}else e.current=r;if(c0&&(c0=!1,Es=e,Op=a),i=e.pendingLanes,i===0&&(Ds=null),TM(r.stateNode),jn(e,Vt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Ap)throw Ap=!1,e=Qy,Qy=null,e;return Op&1&&e.tag!==0&&fc(),i=e.pendingLanes,i&1?e===Jy?Md++:(Md=0,Jy=e):Md=0,Js(),null}function fc(){if(Es!==null){var e=lk(Op),t=ua.transition,r=dt;try{if(ua.transition=null,dt=16>e?16:e,Es===null)var n=!1;else{if(e=Es,Es=null,Op=0,Ye&6)throw Error(pe(331));var a=Ye;for(Ye|=4,Te=e.current;Te!==null;){var i=Te,s=i.child;if(Te.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Te=u;Te!==null;){var d=Te;switch(d.tag){case 0:case 11:case 15:Id(8,d,i)}var f=d.child;if(f!==null)f.return=d,Te=f;else for(;Te!==null;){d=Te;var h=d.sibling,p=d.return;if(y4(d),d===u){Te=null;break}if(h!==null){h.return=p,Te=h;break}Te=p}}}var v=i.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}Te=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,Te=s;else e:for(;Te!==null;){if(i=Te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Id(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,Te=b;break e}Te=i.return}}var m=e.current;for(Te=m;Te!==null;){s=Te;var y=s.child;if(s.subtreeFlags&2064&&y!==null)y.return=s,Te=y;else e:for(s=m;Te!==null;){if(l=Te,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:mg(9,l)}}catch(w){Ut(l,l.return,w)}if(l===s){Te=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,Te=_;break e}Te=l.return}}if(Ye=a,Js(),ei&&typeof ei.onPostCommitFiberRoot=="function")try{ei.onPostCommitFiberRoot(og,e)}catch{}n=!0}return n}finally{dt=r,ua.transition=t}}return!1}function _j(e,t,r){t=zc(r,t),t=l4(e,t,1),e=Is(e,t,1),t=cn(),e!==null&&(hh(e,1,t),jn(e,t))}function Ut(e,t,r){if(e.tag===3)_j(e,e,r);else for(;t!==null;){if(t.tag===3){_j(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ds===null||!Ds.has(n))){e=zc(r,e),e=c4(t,e,1),t=Is(t,e,1),e=cn(),t!==null&&(hh(t,1,e),jn(t,e));break}}t=t.return}}function e$(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=cn(),e.pingedLanes|=e.suspendedLanes&r,_r===e&&(Ir&r)===r&&(ur===4||ur===3&&(Ir&130023424)===Ir&&500>Vt()-t_?Ko(e,0):e_|=r),jn(e,t)}function O4(e,t){t===0&&(e.mode&1?(t=Zh,Zh<<=1,!(Zh&130023424)&&(Zh=4194304)):t=1);var r=cn();e=$i(e,t),e!==null&&(hh(e,t,r),jn(e,r))}function t$(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),O4(e,r)}function r$(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(pe(314))}n!==null&&n.delete(t),O4(e,r)}var C4;C4=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||_n.current)yn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return yn=!1,qL(e,t,r);yn=!!(e.flags&131072)}else yn=!1,Ot&&t.flags&1048576&&Ik(t,bp,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ep(e,t),e=t.pendingProps;var a=$c(t,Gr.current);dc(t,r),a=Gw(null,t,n,e,a,r);var i=Xw();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Sn(n)?(i=!0,xp(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,qw(t),a.updater=pg,t.stateNode=a,a._reactInternals=t,By(t,n,e,r),t=qy(null,t,n,!0,i,r)):(t.tag=0,Ot&&i&&Mw(t),en(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ep(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=a$(n),e=Sa(n,e),a){case 0:t=zy(null,t,n,e,r);break e;case 1:t=fj(null,t,n,e,r);break e;case 11:t=uj(null,t,n,e,r);break e;case 14:t=dj(null,t,n,Sa(n.type,e),r);break e}throw Error(pe(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Sa(n,a),zy(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Sa(n,a),fj(e,t,n,a,r);case 3:e:{if(h4(t),e===null)throw Error(pe(387));n=t.pendingProps,i=t.memoizedState,a=i.element,Bk(e,t),Sp(t,n,null,r);var s=t.memoizedState;if(n=s.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=zc(Error(pe(423)),t),t=hj(e,t,n,r,a);break e}else if(n!==a){a=zc(Error(pe(424)),t),t=hj(e,t,n,r,a);break e}else for(Un=Rs(t.stateNode.containerInfo.firstChild),qn=t,Ot=!0,Ca=null,r=$k(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Fc(),n===a){t=Fi(e,t,r);break e}en(e,t,n,r)}t=t.child}return t;case 5:return Uk(t),e===null&&Ly(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,s=a.children,Py(n,a)?s=null:i!==null&&Py(n,i)&&(t.flags|=32),f4(e,t),en(e,t,s,r),t.child;case 6:return e===null&&Ly(t),null;case 13:return p4(e,t,r);case 4:return Ww(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Bc(t,null,n,r):en(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Sa(n,a),uj(e,t,n,a,r);case 7:return en(e,t,t.pendingProps,r),t.child;case 8:return en(e,t,t.pendingProps.children,r),t.child;case 12:return en(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,s=a.value,wt(wp,n._currentValue),n._currentValue=s,i!==null)if(Fa(i.value,s)){if(i.children===a.children&&!_n.current){t=Fi(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){s=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Ti(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),$y(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(pe(341));s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),$y(s,r,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}en(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,dc(t,r),a=fa(a),n=n(a),t.flags|=1,en(e,t,n,r),t.child;case 14:return n=t.type,a=Sa(n,t.pendingProps),a=Sa(n.type,a),dj(e,t,n,a,r);case 15:return u4(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Sa(n,a),ep(e,t),t.tag=1,Sn(n)?(e=!0,xp(t)):e=!1,dc(t,r),o4(t,n,a),By(t,n,a,r),qy(null,t,n,!0,e,r);case 19:return m4(e,t,r);case 22:return d4(e,t,r)}throw Error(pe(156,t.tag))};function k4(e,t){return ak(e,t)}function n$(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function la(e,t,r,n){return new n$(e,t,r,n)}function i_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function a$(e){if(typeof e=="function")return i_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===jw)return 11;if(e===Ew)return 14}return 2}function Ls(e,t){var r=e.alternate;return r===null?(r=la(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function np(e,t,r,n,a,i){var s=2;if(n=e,typeof e=="function")i_(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Wl:return Go(r.children,a,i,t);case Sw:s=8,a|=8;break;case uy:return e=la(12,r,t,a|2),e.elementType=uy,e.lanes=i,e;case dy:return e=la(13,r,t,a),e.elementType=dy,e.lanes=i,e;case fy:return e=la(19,r,t,a),e.elementType=fy,e.lanes=i,e;case UC:return vg(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case FC:s=10;break e;case BC:s=9;break e;case jw:s=11;break e;case Ew:s=14;break e;case ss:s=16,n=null;break e}throw Error(pe(130,e==null?e:typeof e,""))}return t=la(s,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Go(e,t,r,n){return e=la(7,e,n,t),e.lanes=r,e}function vg(e,t,r,n){return e=la(22,e,n,t),e.elementType=UC,e.lanes=r,e.stateNode={isHidden:!1},e}function dx(e,t,r){return e=la(6,e,null,t),e.lanes=r,e}function fx(e,t,r){return t=la(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function i$(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vv(0),this.expirationTimes=Vv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vv(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function s_(e,t,r,n,a,i,s,l,c){return e=new i$(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=la(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},qw(i),e}function s$(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ql,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function P4(e){if(!e)return qs;e=e._reactInternals;e:{if(vl(e)!==e||e.tag!==1)throw Error(pe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Sn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(pe(171))}if(e.tag===1){var r=e.type;if(Sn(r))return Pk(e,r,t)}return t}function R4(e,t,r,n,a,i,s,l,c){return e=s_(r,n,!0,e,a,i,s,l,c),e.context=P4(null),r=e.current,n=cn(),a=Ms(r),i=Ti(n,a),i.callback=t??null,Is(r,i,a),e.current.lanes=a,hh(e,a,n),jn(e,n),e}function xg(e,t,r,n){var a=t.current,i=cn(),s=Ms(a);return r=P4(r),t.context===null?t.context=r:t.pendingContext=r,t=Ti(i,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Is(a,t,s),e!==null&&(Ma(e,a,s,i),Q0(e,a,s)),s}function kp(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Sj(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function o_(e,t){Sj(e,t),(e=e.alternate)&&Sj(e,t)}function o$(){return null}var I4=typeof reportError=="function"?reportError:function(e){console.error(e)};function l_(e){this._internalRoot=e}yg.prototype.render=l_.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(pe(409));xg(e,t,null,null)};yg.prototype.unmount=l_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rl(function(){xg(null,e,null,null)}),t[Li]=null}};function yg(e){this._internalRoot=e}yg.prototype.unstable_scheduleHydration=function(e){if(e){var t=dk();e={blockedOn:null,target:e,priority:t};for(var r=0;r<us.length&&t!==0&&t<us[r].priority;r++);us.splice(r,0,e),r===0&&hk(e)}};function c_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function jj(){}function l$(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=kp(s);i.call(u)}}var s=R4(t,n,e,0,null,!1,!1,"",jj);return e._reactRootContainer=s,e[Li]=s.current,nf(e.nodeType===8?e.parentNode:e),rl(),s}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=kp(c);l.call(u)}}var c=s_(e,0,!1,null,null,!1,!1,"",jj);return e._reactRootContainer=c,e[Li]=c.current,nf(e.nodeType===8?e.parentNode:e),rl(function(){xg(t,c,r,n)}),c}function wg(e,t,r,n,a){var i=r._reactRootContainer;if(i){var s=i;if(typeof a=="function"){var l=a;a=function(){var c=kp(s);l.call(c)}}xg(t,s,e,a)}else s=l$(r,t,e,a,n);return kp(s)}ck=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=bd(t.pendingLanes);r!==0&&(Aw(t,r|1),jn(t,Vt()),!(Ye&6)&&(qc=Vt()+500,Js()))}break;case 13:rl(function(){var n=$i(e,1);if(n!==null){var a=cn();Ma(n,e,1,a)}}),o_(e,1)}};Ow=function(e){if(e.tag===13){var t=$i(e,134217728);if(t!==null){var r=cn();Ma(t,e,134217728,r)}o_(e,134217728)}};uk=function(e){if(e.tag===13){var t=Ms(e),r=$i(e,t);if(r!==null){var n=cn();Ma(r,e,t,n)}o_(e,t)}};dk=function(){return dt};fk=function(e,t){var r=dt;try{return dt=e,t()}finally{dt=r}};_y=function(e,t,r){switch(t){case"input":if(my(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=dg(n);if(!a)throw Error(pe(90));qC(n),my(n,a)}}}break;case"textarea":HC(e,r);break;case"select":t=r.value,t!=null&&oc(e,!!r.multiple,t,!1)}};JC=r_;ZC=rl;var c$={usingClientEntryPoint:!1,Events:[mh,Gl,dg,YC,QC,r_]},ad={findFiberByHostInstance:Ao,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},u$={bundleType:ad.bundleType,version:ad.version,rendererPackageName:ad.rendererPackageName,rendererConfig:ad.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=rk(e),e===null?null:e.stateNode},findFiberByHostInstance:ad.findFiberByHostInstance||o$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var u0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!u0.isDisabled&&u0.supportsFiber)try{og=u0.inject(u$),ei=u0}catch{}}Xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c$;Xn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c_(t))throw Error(pe(200));return s$(e,t,null,r)};Xn.createRoot=function(e,t){if(!c_(e))throw Error(pe(299));var r=!1,n="",a=I4;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=s_(e,1,!1,null,null,r,!1,n,a),e[Li]=t.current,nf(e.nodeType===8?e.parentNode:e),new l_(t)};Xn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(pe(188)):(e=Object.keys(e).join(","),Error(pe(268,e)));return e=rk(t),e=e===null?null:e.stateNode,e};Xn.flushSync=function(e){return rl(e)};Xn.hydrate=function(e,t,r){if(!bg(t))throw Error(pe(200));return wg(null,e,t,!0,r)};Xn.hydrateRoot=function(e,t,r){if(!c_(e))throw Error(pe(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",s=I4;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=R4(t,null,e,1,r??null,a,!1,i,s),e[Li]=t.current,nf(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new yg(t)};Xn.render=function(e,t,r){if(!bg(t))throw Error(pe(200));return wg(null,e,t,!1,r)};Xn.unmountComponentAtNode=function(e){if(!bg(e))throw Error(pe(40));return e._reactRootContainer?(rl(function(){wg(null,null,e,!1,function(){e._reactRootContainer=null,e[Li]=null})}),!0):!1};Xn.unstable_batchedUpdates=r_;Xn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!bg(r))throw Error(pe(200));if(e==null||e._reactInternals===void 0)throw Error(pe(38));return wg(e,t,r,!1,n)};Xn.version="18.3.1-next-f1338f8080-20240426";function D4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D4)}catch(e){console.error(e)}}D4(),DC.exports=Xn;var d$=DC.exports,Ej=d$;ly.createRoot=Ej.createRoot,ly.hydrateRoot=Ej.hydrateRoot;var Nu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},f$={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},ms,mw,fC,h$=(fC=class{constructor(){Pe(this,ms,f$);Pe(this,mw,!1)}setTimeoutProvider(e){je(this,ms,e)}setTimeout(e,t){return B(this,ms).setTimeout(e,t)}clearTimeout(e){B(this,ms).clearTimeout(e)}setInterval(e,t){return B(this,ms).setInterval(e,t)}clearInterval(e){B(this,ms).clearInterval(e)}},ms=new WeakMap,mw=new WeakMap,fC),ko=new h$;function p$(e){setTimeout(e,0)}var nl=typeof window>"u"||"Deno"in globalThis;function tn(){}function m$(e,t){return typeof e=="function"?e(t):e}function t1(e){return typeof e=="number"&&e>=0&&e!==1/0}function M4(e,t){return Math.max(e+(t||0)-Date.now(),0)}function $s(e,t){return typeof e=="function"?e(t):e}function aa(e,t){return typeof e=="function"?e(t):e}function Nj(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:s,stale:l}=e;if(s){if(n){if(t.queryHash!==u_(s,t.options))return!1}else if(!hf(t.queryKey,s))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function Tj(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(al(t.options.mutationKey)!==al(i))return!1}else if(!hf(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function u_(e,t){return((t==null?void 0:t.queryKeyHashFn)||al)(e)}function al(e){return JSON.stringify(e,(t,r)=>r1(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function hf(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>hf(e[r],t[r])):!1}var g$=Object.prototype.hasOwnProperty;function L4(e,t){if(e===t)return e;const r=Aj(e)&&Aj(t);if(!r&&!(r1(e)&&r1(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),s=i.length,l=r?new Array(s):{};let c=0;for(let u=0;u<s;u++){const d=r?u:i[u],f=e[d],h=t[d];if(f===h){l[d]=f,(r?u<a:g$.call(e,d))&&c++;continue}if(f===null||h===null||typeof f!="object"||typeof h!="object"){l[d]=h;continue}const p=L4(f,h);l[d]=p,p===f&&c++}return a===s&&c===a?e:l}function Pp(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Aj(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function r1(e){if(!Oj(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Oj(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Oj(e){return Object.prototype.toString.call(e)==="[object Object]"}function v$(e){return new Promise(t=>{ko.setTimeout(t,e)})}function n1(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?L4(e,t):t}function x$(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function y$(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var d_=Symbol();function $4(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===d_?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function F4(e,t){return typeof e=="function"?e(...t):!!e}var $o,gs,Ec,hC,b$=(hC=class extends Nu{constructor(){super();Pe(this,$o);Pe(this,gs);Pe(this,Ec);je(this,Ec,t=>{if(!nl&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){B(this,gs)||this.setEventListener(B(this,Ec))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,gs))==null||t.call(this),je(this,gs,void 0))}setEventListener(t){var r;je(this,Ec,t),(r=B(this,gs))==null||r.call(this),je(this,gs,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){B(this,$o)!==t&&(je(this,$o,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof B(this,$o)=="boolean"?B(this,$o):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},$o=new WeakMap,gs=new WeakMap,Ec=new WeakMap,hC),f_=new b$;function a1(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var w$=p$;function _$(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=w$;const i=l=>{t?e.push(l):a(()=>{r(l)})},s=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||s()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var cr=_$(),Nc,vs,Tc,pC,S$=(pC=class extends Nu{constructor(){super();Pe(this,Nc,!0);Pe(this,vs);Pe(this,Tc);je(this,Tc,t=>{if(!nl&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){B(this,vs)||this.setEventListener(B(this,Tc))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,vs))==null||t.call(this),je(this,vs,void 0))}setEventListener(t){var r;je(this,Tc,t),(r=B(this,vs))==null||r.call(this),je(this,vs,t(this.setOnline.bind(this)))}setOnline(t){B(this,Nc)!==t&&(je(this,Nc,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return B(this,Nc)}},Nc=new WeakMap,vs=new WeakMap,Tc=new WeakMap,pC),Rp=new S$;function j$(e){return Math.min(1e3*2**e,3e4)}function B4(e){return(e??"online")==="online"?Rp.isOnline():!0}var i1=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function U4(e){let t=!1,r=0,n;const a=a1(),i=()=>a.status!=="pending",s=g=>{var x;if(!i()){const b=new i1(g);h(b),(x=e.onCancel)==null||x.call(e,b)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>f_.isFocused()&&(e.networkMode==="always"||Rp.isOnline())&&e.canRun(),d=()=>B4(e.networkMode)&&e.canRun(),f=g=>{i()||(n==null||n(),a.resolve(g))},h=g=>{i()||(n==null||n(),a.reject(g))},p=()=>new Promise(g=>{var x;n=b=>{(i()||u())&&g(b)},(x=e.onPause)==null||x.call(e)}).then(()=>{var g;n=void 0,i()||(g=e.onContinue)==null||g.call(e)}),v=()=>{if(i())return;let g;const x=r===0?e.initialPromise:void 0;try{g=x??e.fn()}catch(b){g=Promise.reject(b)}Promise.resolve(g).then(f).catch(b=>{var S;if(i())return;const m=e.retry??(nl?0:3),y=e.retryDelay??j$,_=typeof y=="function"?y(r,b):y,w=m===!0||typeof m=="number"&&r<m||typeof m=="function"&&m(r,b);if(t||!w){h(b);return}r++,(S=e.onFail)==null||S.call(e,r,b),v$(_).then(()=>u()?void 0:p()).then(()=>{t?h(b):v()})})};return{promise:a,status:()=>a.status,cancel:s,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?v():p().then(v),a)}}var Fo,mC,z4=(mC=class{constructor(){Pe(this,Fo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),t1(this.gcTime)&&je(this,Fo,ko.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(nl?1/0:5*60*1e3))}clearGcTimeout(){B(this,Fo)&&(ko.clearTimeout(B(this,Fo)),je(this,Fo,void 0))}},Fo=new WeakMap,mC),Bo,Ac,ra,Uo,pr,oh,zo,Ea,pi,gC,E$=(gC=class extends z4{constructor(t){super();Pe(this,Ea);Pe(this,Bo);Pe(this,Ac);Pe(this,ra);Pe(this,Uo);Pe(this,pr);Pe(this,oh);Pe(this,zo);je(this,zo,!1),je(this,oh,t.defaultOptions),this.setOptions(t.options),this.observers=[],je(this,Uo,t.client),je(this,ra,B(this,Uo).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,je(this,Bo,kj(this.options)),this.state=t.state??B(this,Bo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=B(this,pr))==null?void 0:t.promise}setOptions(t){if(this.options={...B(this,oh),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=kj(this.options);r.data!==void 0&&(this.setState(Cj(r.data,r.dataUpdatedAt)),je(this,Bo,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&B(this,ra).remove(this)}setData(t,r){const n=n1(this.state.data,t,this.options);return Ue(this,Ea,pi).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Ue(this,Ea,pi).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=B(this,pr))==null?void 0:n.promise;return(a=B(this,pr))==null||a.cancel(t),r?r.then(tn).catch(tn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(B(this,Bo))}isActive(){return this.observers.some(t=>aa(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===d_||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>$s(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!M4(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=B(this,pr))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=B(this,pr))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),B(this,ra).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(B(this,pr)&&(B(this,zo)?B(this,pr).cancel({revert:!0}):B(this,pr).cancelRetry()),this.scheduleGc()),B(this,ra).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ue(this,Ea,pi).call(this,{type:"invalidate"})}async fetch(t,r){var c,u,d,f,h,p,v,g,x,b,m,y;if(this.state.fetchStatus!=="idle"&&((c=B(this,pr))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(B(this,pr))return B(this,pr).continueRetry(),B(this,pr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const _=this.observers.find(w=>w.options.queryFn);_&&this.setOptions(_.options)}const n=new AbortController,a=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(je(this,zo,!0),n.signal)})},i=()=>{const _=$4(this.options,r),S=(()=>{const j={client:B(this,Uo),queryKey:this.queryKey,meta:this.meta};return a(j),j})();return je(this,zo,!1),this.options.persister?this.options.persister(_,S,this):_(S)},l=(()=>{const _={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:B(this,Uo),state:this.state,fetchFn:i};return a(_),_})();(u=this.options.behavior)==null||u.onFetch(l,this),je(this,Ac,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Ue(this,Ea,pi).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),je(this,pr,U4({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:_=>{_ instanceof i1&&_.revert&&this.setState({...B(this,Ac),fetchStatus:"idle"}),n.abort()},onFail:(_,w)=>{Ue(this,Ea,pi).call(this,{type:"failed",failureCount:_,error:w})},onPause:()=>{Ue(this,Ea,pi).call(this,{type:"pause"})},onContinue:()=>{Ue(this,Ea,pi).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const _=await B(this,pr).start();if(_===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(_),(p=(h=B(this,ra).config).onSuccess)==null||p.call(h,_,this),(g=(v=B(this,ra).config).onSettled)==null||g.call(v,_,this.state.error,this),_}catch(_){if(_ instanceof i1){if(_.silent)return B(this,pr).promise;if(_.revert){if(this.state.data===void 0)throw _;return this.state.data}}throw Ue(this,Ea,pi).call(this,{type:"error",error:_}),(b=(x=B(this,ra).config).onError)==null||b.call(x,_,this),(y=(m=B(this,ra).config).onSettled)==null||y.call(m,this.state.data,_,this),_}finally{this.scheduleGc()}}},Bo=new WeakMap,Ac=new WeakMap,ra=new WeakMap,Uo=new WeakMap,pr=new WeakMap,oh=new WeakMap,zo=new WeakMap,Ea=new WeakSet,pi=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...q4(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...Cj(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return je(this,Ac,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),cr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),B(this,ra).notify({query:this,type:"updated",action:t})})},gC);function q4(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:B4(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Cj(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function kj(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var mn,Ke,lh,Jr,qo,Oc,xi,xs,ch,Cc,kc,Wo,Ho,ys,Pc,at,_d,s1,o1,l1,c1,u1,d1,f1,W4,vC,N$=(vC=class extends Nu{constructor(t,r){super();Pe(this,at);Pe(this,mn);Pe(this,Ke);Pe(this,lh);Pe(this,Jr);Pe(this,qo);Pe(this,Oc);Pe(this,xi);Pe(this,xs);Pe(this,ch);Pe(this,Cc);Pe(this,kc);Pe(this,Wo);Pe(this,Ho);Pe(this,ys);Pe(this,Pc,new Set);this.options=r,je(this,mn,t),je(this,xs,null),je(this,xi,a1()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(B(this,Ke).addObserver(this),Pj(B(this,Ke),this.options)?Ue(this,at,_d).call(this):this.updateResult(),Ue(this,at,c1).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return h1(B(this,Ke),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return h1(B(this,Ke),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ue(this,at,u1).call(this),Ue(this,at,d1).call(this),B(this,Ke).removeObserver(this)}setOptions(t){const r=this.options,n=B(this,Ke);if(this.options=B(this,mn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof aa(this.options.enabled,B(this,Ke))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ue(this,at,f1).call(this),B(this,Ke).setOptions(this.options),r._defaulted&&!Pp(this.options,r)&&B(this,mn).getQueryCache().notify({type:"observerOptionsUpdated",query:B(this,Ke),observer:this});const a=this.hasListeners();a&&Rj(B(this,Ke),n,this.options,r)&&Ue(this,at,_d).call(this),this.updateResult(),a&&(B(this,Ke)!==n||aa(this.options.enabled,B(this,Ke))!==aa(r.enabled,B(this,Ke))||$s(this.options.staleTime,B(this,Ke))!==$s(r.staleTime,B(this,Ke)))&&Ue(this,at,s1).call(this);const i=Ue(this,at,o1).call(this);a&&(B(this,Ke)!==n||aa(this.options.enabled,B(this,Ke))!==aa(r.enabled,B(this,Ke))||i!==B(this,ys))&&Ue(this,at,l1).call(this,i)}getOptimisticResult(t){const r=B(this,mn).getQueryCache().build(B(this,mn),t),n=this.createResult(r,t);return A$(this,n)&&(je(this,Jr,n),je(this,Oc,this.options),je(this,qo,B(this,Ke).state)),n}getCurrentResult(){return B(this,Jr)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&B(this,xi).status==="pending"&&B(this,xi).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){B(this,Pc).add(t)}getCurrentQuery(){return B(this,Ke)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=B(this,mn).defaultQueryOptions(t),n=B(this,mn).getQueryCache().build(B(this,mn),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return Ue(this,at,_d).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),B(this,Jr)))}createResult(t,r){var N;const n=B(this,Ke),a=this.options,i=B(this,Jr),s=B(this,qo),l=B(this,Oc),u=t!==n?t.state:B(this,lh),{state:d}=t;let f={...d},h=!1,p;if(r._optimisticResults){const A=this.hasListeners(),C=!A&&Pj(t,r),D=A&&Rj(t,n,r,a);(C||D)&&(f={...f,...q4(d.data,t.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:v,errorUpdatedAt:g,status:x}=f;p=f.data;let b=!1;if(r.placeholderData!==void 0&&p===void 0&&x==="pending"){let A;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(A=i.data,b=!0):A=typeof r.placeholderData=="function"?r.placeholderData((N=B(this,kc))==null?void 0:N.state.data,B(this,kc)):r.placeholderData,A!==void 0&&(x="success",p=n1(i==null?void 0:i.data,A,r),h=!0)}if(r.select&&p!==void 0&&!b)if(i&&p===(s==null?void 0:s.data)&&r.select===B(this,ch))p=B(this,Cc);else try{je(this,ch,r.select),p=r.select(p),p=n1(i==null?void 0:i.data,p,r),je(this,Cc,p),je(this,xs,null)}catch(A){je(this,xs,A)}B(this,xs)&&(v=B(this,xs),p=B(this,Cc),g=Date.now(),x="error");const m=f.fetchStatus==="fetching",y=x==="pending",_=x==="error",w=y&&m,S=p!==void 0,E={status:x,fetchStatus:f.fetchStatus,isPending:y,isSuccess:x==="success",isError:_,isInitialLoading:w,isLoading:w,data:p,dataUpdatedAt:f.dataUpdatedAt,error:v,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:m,isRefetching:m&&!y,isLoadingError:_&&!S,isPaused:f.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:_&&S,isStale:h_(t,r),refetch:this.refetch,promise:B(this,xi),isEnabled:aa(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const A=P=>{E.status==="error"?P.reject(E.error):E.data!==void 0&&P.resolve(E.data)},C=()=>{const P=je(this,xi,E.promise=a1());A(P)},D=B(this,xi);switch(D.status){case"pending":t.queryHash===n.queryHash&&A(D);break;case"fulfilled":(E.status==="error"||E.data!==D.value)&&C();break;case"rejected":(E.status!=="error"||E.error!==D.reason)&&C();break}}return E}updateResult(){const t=B(this,Jr),r=this.createResult(B(this,Ke),this.options);if(je(this,qo,B(this,Ke).state),je(this,Oc,this.options),B(this,qo).data!==void 0&&je(this,kc,B(this,Ke)),Pp(r,t))return;je(this,Jr,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!B(this,Pc).size)return!0;const s=new Set(i??B(this,Pc));return this.options.throwOnError&&s.add("error"),Object.keys(B(this,Jr)).some(l=>{const c=l;return B(this,Jr)[c]!==t[c]&&s.has(c)})};Ue(this,at,W4).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ue(this,at,c1).call(this)}},mn=new WeakMap,Ke=new WeakMap,lh=new WeakMap,Jr=new WeakMap,qo=new WeakMap,Oc=new WeakMap,xi=new WeakMap,xs=new WeakMap,ch=new WeakMap,Cc=new WeakMap,kc=new WeakMap,Wo=new WeakMap,Ho=new WeakMap,ys=new WeakMap,Pc=new WeakMap,at=new WeakSet,_d=function(t){Ue(this,at,f1).call(this);let r=B(this,Ke).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(tn)),r},s1=function(){Ue(this,at,u1).call(this);const t=$s(this.options.staleTime,B(this,Ke));if(nl||B(this,Jr).isStale||!t1(t))return;const n=M4(B(this,Jr).dataUpdatedAt,t)+1;je(this,Wo,ko.setTimeout(()=>{B(this,Jr).isStale||this.updateResult()},n))},o1=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(B(this,Ke)):this.options.refetchInterval)??!1},l1=function(t){Ue(this,at,d1).call(this),je(this,ys,t),!(nl||aa(this.options.enabled,B(this,Ke))===!1||!t1(B(this,ys))||B(this,ys)===0)&&je(this,Ho,ko.setInterval(()=>{(this.options.refetchIntervalInBackground||f_.isFocused())&&Ue(this,at,_d).call(this)},B(this,ys)))},c1=function(){Ue(this,at,s1).call(this),Ue(this,at,l1).call(this,Ue(this,at,o1).call(this))},u1=function(){B(this,Wo)&&(ko.clearTimeout(B(this,Wo)),je(this,Wo,void 0))},d1=function(){B(this,Ho)&&(ko.clearInterval(B(this,Ho)),je(this,Ho,void 0))},f1=function(){const t=B(this,mn).getQueryCache().build(B(this,mn),this.options);if(t===B(this,Ke))return;const r=B(this,Ke);je(this,Ke,t),je(this,lh,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},W4=function(t){cr.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(B(this,Jr))}),B(this,mn).getQueryCache().notify({query:B(this,Ke),type:"observerResultsUpdated"})})},vC);function T$(e,t){return aa(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Pj(e,t){return T$(e,t)||e.state.data!==void 0&&h1(e,t,t.refetchOnMount)}function h1(e,t,r){if(aa(t.enabled,e)!==!1&&$s(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&h_(e,t)}return!1}function Rj(e,t,r,n){return(e!==t||aa(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&h_(e,r)}function h_(e,t){return aa(t.enabled,e)!==!1&&e.isStaleByTime($s(t.staleTime,e))}function A$(e,t){return!Pp(e.getCurrentResult(),t)}function Ij(e){return{onFetch:(t,r)=>{var d,f,h,p,v;const n=t.options,a=(h=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],s=((v=t.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const x=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},b=$4(t.options,t.fetchOptions),m=async(y,_,w)=>{if(g)return Promise.reject();if(_==null&&y.pages.length)return Promise.resolve(y);const j=(()=>{const C={client:t.client,queryKey:t.queryKey,pageParam:_,direction:w?"backward":"forward",meta:t.options.meta};return x(C),C})(),E=await b(j),{maxPages:N}=t.options,A=w?y$:x$;return{pages:A(y.pages,E,N),pageParams:A(y.pageParams,_,N)}};if(a&&i.length){const y=a==="backward",_=y?O$:Dj,w={pages:i,pageParams:s},S=_(n,w);l=await m(w,S,y)}else{const y=e??i.length;do{const _=c===0?s[0]??n.initialPageParam:Dj(n,l);if(c>0&&_==null)break;l=await m(l,_),c++}while(c<y)}return l};t.options.persister?t.fetchFn=()=>{var g,x;return(x=(g=t.options).persister)==null?void 0:x.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function Dj(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function O$(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var uh,Xa,Zr,Vo,Ya,is,xC,C$=(xC=class extends z4{constructor(t){super();Pe(this,Ya);Pe(this,uh);Pe(this,Xa);Pe(this,Zr);Pe(this,Vo);je(this,uh,t.client),this.mutationId=t.mutationId,je(this,Zr,t.mutationCache),je(this,Xa,[]),this.state=t.state||H4(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){B(this,Xa).includes(t)||(B(this,Xa).push(t),this.clearGcTimeout(),B(this,Zr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){je(this,Xa,B(this,Xa).filter(r=>r!==t)),this.scheduleGc(),B(this,Zr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){B(this,Xa).length||(this.state.status==="pending"?this.scheduleGc():B(this,Zr).remove(this))}continue(){var t;return((t=B(this,Vo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,l,c,u,d,f,h,p,v,g,x,b,m,y,_,w,S,j,E,N;const r=()=>{Ue(this,Ya,is).call(this,{type:"continue"})},n={client:B(this,uh),meta:this.options.meta,mutationKey:this.options.mutationKey};je(this,Vo,U4({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(A,C)=>{Ue(this,Ya,is).call(this,{type:"failed",failureCount:A,error:C})},onPause:()=>{Ue(this,Ya,is).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>B(this,Zr).canRun(this)}));const a=this.state.status==="pending",i=!B(this,Vo).canStart();try{if(a)r();else{Ue(this,Ya,is).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(s=B(this,Zr).config).onMutate)==null?void 0:l.call(s,t,this,n));const C=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,n));C!==this.state.context&&Ue(this,Ya,is).call(this,{type:"pending",context:C,variables:t,isPaused:i})}const A=await B(this,Vo).start();return await((f=(d=B(this,Zr).config).onSuccess)==null?void 0:f.call(d,A,t,this.state.context,this,n)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,A,t,this.state.context,n)),await((g=(v=B(this,Zr).config).onSettled)==null?void 0:g.call(v,A,null,this.state.variables,this.state.context,this,n)),await((b=(x=this.options).onSettled)==null?void 0:b.call(x,A,null,t,this.state.context,n)),Ue(this,Ya,is).call(this,{type:"success",data:A}),A}catch(A){try{throw await((y=(m=B(this,Zr).config).onError)==null?void 0:y.call(m,A,t,this.state.context,this,n)),await((w=(_=this.options).onError)==null?void 0:w.call(_,A,t,this.state.context,n)),await((j=(S=B(this,Zr).config).onSettled)==null?void 0:j.call(S,void 0,A,this.state.variables,this.state.context,this,n)),await((N=(E=this.options).onSettled)==null?void 0:N.call(E,void 0,A,t,this.state.context,n)),A}finally{Ue(this,Ya,is).call(this,{type:"error",error:A})}}finally{B(this,Zr).runNext(this)}}},uh=new WeakMap,Xa=new WeakMap,Zr=new WeakMap,Vo=new WeakMap,Ya=new WeakSet,is=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),cr.batch(()=>{B(this,Xa).forEach(n=>{n.onMutationUpdate(t)}),B(this,Zr).notify({mutation:this,type:"updated",action:t})})},xC);function H4(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var yi,Na,dh,yC,k$=(yC=class extends Nu{constructor(t={}){super();Pe(this,yi);Pe(this,Na);Pe(this,dh);this.config=t,je(this,yi,new Set),je(this,Na,new Map),je(this,dh,0)}build(t,r,n){const a=new C$({client:t,mutationCache:this,mutationId:++Vh(this,dh)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){B(this,yi).add(t);const r=d0(t);if(typeof r=="string"){const n=B(this,Na).get(r);n?n.push(t):B(this,Na).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(B(this,yi).delete(t)){const r=d0(t);if(typeof r=="string"){const n=B(this,Na).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&B(this,Na).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=d0(t);if(typeof r=="string"){const n=B(this,Na).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=d0(t);if(typeof r=="string"){const a=(n=B(this,Na).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){cr.batch(()=>{B(this,yi).forEach(t=>{this.notify({type:"removed",mutation:t})}),B(this,yi).clear(),B(this,Na).clear()})}getAll(){return Array.from(B(this,yi))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Tj(r,n))}findAll(t={}){return this.getAll().filter(r=>Tj(t,r))}notify(t){cr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return cr.batch(()=>Promise.all(t.map(r=>r.continue().catch(tn))))}},yi=new WeakMap,Na=new WeakMap,dh=new WeakMap,yC);function d0(e){var t;return(t=e.options.scope)==null?void 0:t.id}var bi,bs,gn,wi,Di,ap,p1,bC,P$=(bC=class extends Nu{constructor(r,n){super();Pe(this,Di);Pe(this,bi);Pe(this,bs);Pe(this,gn);Pe(this,wi);je(this,bi,r),this.setOptions(n),this.bindMethods(),Ue(this,Di,ap).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=B(this,bi).defaultMutationOptions(r),Pp(this.options,n)||B(this,bi).getMutationCache().notify({type:"observerOptionsUpdated",mutation:B(this,gn),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&al(n.mutationKey)!==al(this.options.mutationKey)?this.reset():((a=B(this,gn))==null?void 0:a.state.status)==="pending"&&B(this,gn).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=B(this,gn))==null||r.removeObserver(this)}onMutationUpdate(r){Ue(this,Di,ap).call(this),Ue(this,Di,p1).call(this,r)}getCurrentResult(){return B(this,bs)}reset(){var r;(r=B(this,gn))==null||r.removeObserver(this),je(this,gn,void 0),Ue(this,Di,ap).call(this),Ue(this,Di,p1).call(this)}mutate(r,n){var a;return je(this,wi,n),(a=B(this,gn))==null||a.removeObserver(this),je(this,gn,B(this,bi).getMutationCache().build(B(this,bi),this.options)),B(this,gn).addObserver(this),B(this,gn).execute(r)}},bi=new WeakMap,bs=new WeakMap,gn=new WeakMap,wi=new WeakMap,Di=new WeakSet,ap=function(){var n;const r=((n=B(this,gn))==null?void 0:n.state)??H4();je(this,bs,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},p1=function(r){cr.batch(()=>{var n,a,i,s,l,c,u,d;if(B(this,wi)&&this.hasListeners()){const f=B(this,bs).variables,h=B(this,bs).context,p={client:B(this,bi),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(n=B(this,wi)).onSuccess)==null||a.call(n,r.data,f,h,p),(s=(i=B(this,wi)).onSettled)==null||s.call(i,r.data,null,f,h,p)):(r==null?void 0:r.type)==="error"&&((c=(l=B(this,wi)).onError)==null||c.call(l,r.error,f,h,p),(d=(u=B(this,wi)).onSettled)==null||d.call(u,void 0,r.error,f,h,p))}this.listeners.forEach(f=>{f(B(this,bs))})})},bC),Qa,wC,R$=(wC=class extends Nu{constructor(t={}){super();Pe(this,Qa);this.config=t,je(this,Qa,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??u_(a,r);let s=this.get(i);return s||(s=new E$({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(s)),s}add(t){B(this,Qa).has(t.queryHash)||(B(this,Qa).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=B(this,Qa).get(t.queryHash);r&&(t.destroy(),r===t&&B(this,Qa).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){cr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return B(this,Qa).get(t)}getAll(){return[...B(this,Qa).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Nj(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>Nj(t,n)):r}notify(t){cr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){cr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){cr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Qa=new WeakMap,wC),Bt,ws,_s,Rc,Ic,Ss,Dc,Mc,_C,I$=(_C=class{constructor(e={}){Pe(this,Bt);Pe(this,ws);Pe(this,_s);Pe(this,Rc);Pe(this,Ic);Pe(this,Ss);Pe(this,Dc);Pe(this,Mc);je(this,Bt,e.queryCache||new R$),je(this,ws,e.mutationCache||new k$),je(this,_s,e.defaultOptions||{}),je(this,Rc,new Map),je(this,Ic,new Map),je(this,Ss,0)}mount(){Vh(this,Ss)._++,B(this,Ss)===1&&(je(this,Dc,f_.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,Bt).onFocus())})),je(this,Mc,Rp.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,Bt).onOnline())})))}unmount(){var e,t;Vh(this,Ss)._--,B(this,Ss)===0&&((e=B(this,Dc))==null||e.call(this),je(this,Dc,void 0),(t=B(this,Mc))==null||t.call(this),je(this,Mc,void 0))}isFetching(e){return B(this,Bt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return B(this,ws).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=B(this,Bt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=B(this,Bt).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime($s(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return B(this,Bt).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=B(this,Bt).get(n.queryHash),i=a==null?void 0:a.state.data,s=m$(t,i);if(s!==void 0)return B(this,Bt).build(this,n).setData(s,{...r,manual:!0})}setQueriesData(e,t,r){return cr.batch(()=>B(this,Bt).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=B(this,Bt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=B(this,Bt);cr.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=B(this,Bt);return cr.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=cr.batch(()=>B(this,Bt).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(tn).catch(tn)}invalidateQueries(e,t={}){return cr.batch(()=>(B(this,Bt).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=cr.batch(()=>B(this,Bt).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(tn)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(tn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=B(this,Bt).build(this,t);return r.isStaleByTime($s(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(tn).catch(tn)}fetchInfiniteQuery(e){return e.behavior=Ij(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(tn).catch(tn)}ensureInfiniteQueryData(e){return e.behavior=Ij(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Rp.isOnline()?B(this,ws).resumePausedMutations():Promise.resolve()}getQueryCache(){return B(this,Bt)}getMutationCache(){return B(this,ws)}getDefaultOptions(){return B(this,_s)}setDefaultOptions(e){je(this,_s,e)}setQueryDefaults(e,t){B(this,Rc).set(al(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...B(this,Rc).values()],r={};return t.forEach(n=>{hf(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){B(this,Ic).set(al(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...B(this,Ic).values()],r={};return t.forEach(n=>{hf(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...B(this,_s).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=u_(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===d_&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...B(this,_s).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){B(this,Bt).clear(),B(this,ws).clear()}},Bt=new WeakMap,ws=new WeakMap,_s=new WeakMap,Rc=new WeakMap,Ic=new WeakMap,Ss=new WeakMap,Dc=new WeakMap,Mc=new WeakMap,_C),V4=T.createContext(void 0),Ge=e=>{const t=T.useContext(V4);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},D$=({client:e,children:t})=>(T.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(V4.Provider,{value:e,children:t})),K4=T.createContext(!1),M$=()=>T.useContext(K4);K4.Provider;function L$(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var $$=T.createContext(L$()),F$=()=>T.useContext($$),B$=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},U$=e=>{T.useEffect(()=>{e.clearReset()},[e])},z$=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||F4(r,[e.error,n])),q$=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},W$=(e,t)=>e.isLoading&&e.isFetching&&!t,H$=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Mj=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function V$(e,t,r){var f,h,p,v,g;const n=M$(),a=F$(),i=Ge(),s=i.defaultQueryOptions(e);(h=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||h.call(f,s),s._optimisticResults=n?"isRestoring":"optimistic",q$(s),B$(s,a),U$(a);const l=!i.getQueryCache().get(s.queryHash),[c]=T.useState(()=>new t(i,s)),u=c.getOptimisticResult(s),d=!n&&e.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(x=>{const b=d?c.subscribe(cr.batchCalls(x)):tn;return c.updateResult(),b},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),T.useEffect(()=>{c.setOptions(s)},[s,c]),H$(s,u))throw Mj(s,c,a);if(z$({result:u,errorResetBoundary:a,throwOnError:s.throwOnError,query:i.getQueryCache().get(s.queryHash),suspense:s.suspense}))throw u.error;if((v=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||v.call(p,s,u),s.experimental_prefetchInRender&&!nl&&W$(u,n)){const x=l?Mj(s,c,a):(g=i.getQueryCache().get(s.queryHash))==null?void 0:g.promise;x==null||x.catch(tn).finally(()=>{c.updateResult()})}return s.notifyOnChangeProps?u:c.trackResult(u)}function rt(e,t){return V$(e,N$)}function Xe(e,t){const r=Ge(),[n]=T.useState(()=>new P$(r,e));T.useEffect(()=>{n.setOptions(e)},[n,e]);const a=T.useSyncExternalStore(T.useCallback(s=>n.subscribe(cr.batchCalls(s)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=T.useCallback((s,l)=>{n.mutate(s,l).catch(tn)},[n]);if(a.error&&F4(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const K$={},Lj=e=>{let t;const r=new Set,n=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const p=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(v=>v(t,p))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(K$?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,c);return c},G$=e=>e?Lj(e):Lj;var G4={exports:{}},X4={},Y4={exports:{}},Q4={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wc=T;function X$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Y$=typeof Object.is=="function"?Object.is:X$,Q$=Wc.useState,J$=Wc.useEffect,Z$=Wc.useLayoutEffect,eF=Wc.useDebugValue;function tF(e,t){var r=t(),n=Q$({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return Z$(function(){a.value=r,a.getSnapshot=t,hx(a)&&i({inst:a})},[e,r,t]),J$(function(){return hx(a)&&i({inst:a}),e(function(){hx(a)&&i({inst:a})})},[e]),eF(r),r}function hx(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Y$(e,r)}catch{return!0}}function rF(e,t){return t()}var nF=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?rF:tF;Q4.useSyncExternalStore=Wc.useSyncExternalStore!==void 0?Wc.useSyncExternalStore:nF;Y4.exports=Q4;var aF=Y4.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _g=T,iF=aF;function sF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var oF=typeof Object.is=="function"?Object.is:sF,lF=iF.useSyncExternalStore,cF=_g.useRef,uF=_g.useEffect,dF=_g.useMemo,fF=_g.useDebugValue;X4.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=cF(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=dF(function(){function c(p){if(!u){if(u=!0,d=p,p=n(p),a!==void 0&&s.hasValue){var v=s.value;if(a(v,p))return f=v}return f=p}if(v=f,oF(d,p))return v;var g=n(p);return a!==void 0&&a(v,g)?(d=p,v):(d=p,f=g)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,r,n,a]);var l=lF(e,i[0],i[1]);return uF(function(){s.hasValue=!0,s.value=l},[l]),fF(l),l};G4.exports=X4;var hF=G4.exports;const pF=it(hF),J4={},{useDebugValue:mF}=z,{useSyncExternalStoreWithSelector:gF}=pF;let $j=!1;const vF=e=>e;function xF(e,t=vF,r){(J4?"production":void 0)!=="production"&&r&&!$j&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),$j=!0);const n=gF(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return mF(n),n}const Fj=e=>{(J4?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?G$(e):e,r=(n,a)=>xF(t,n,a);return Object.assign(r,t),r},Sg=e=>e?Fj(e):Fj,yF=e=>{try{const t=window.AudioContext||window.webkitAudioContext;if(!t)return;const r=new t,n=r.createOscillator(),a=r.createGain();switch(n.connect(a),a.connect(r.destination),e){case"success":n.frequency.setValueAtTime(880,r.currentTime),n.frequency.setValueAtTime(1108.73,r.currentTime+.1),a.gain.setValueAtTime(.3,r.currentTime),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.3),n.start(r.currentTime),n.stop(r.currentTime+.3);break;case"error":n.frequency.setValueAtTime(220,r.currentTime),n.frequency.setValueAtTime(196,r.currentTime+.15),a.gain.setValueAtTime(.3,r.currentTime),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.4),n.start(r.currentTime),n.stop(r.currentTime+.4);break;case"warning":n.frequency.setValueAtTime(440,r.currentTime),a.gain.setValueAtTime(.2,r.currentTime),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.2),n.start(r.currentTime),n.stop(r.currentTime+.2);break;case"info":n.frequency.setValueAtTime(523.25,r.currentTime),a.gain.setValueAtTime(.15,r.currentTime),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.15),n.start(r.currentTime),n.stop(r.currentTime+.15);break}}catch{}},vh=Sg(e=>({toasts:[],addToast:t=>{const r=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,n={...t,id:r,duration:t.duration??5e3};yF(t.type),e(a=>({toasts:[...a.toasts,n]})),setTimeout(()=>{e(a=>({toasts:a.toasts.filter(i=>i.id!==r)}))},n.duration)},removeToast:t=>e(r=>({toasts:r.toasts.filter(n=>n.id!==t)})),clearAll:()=>e({toasts:[]})})),Vn=(e,t,r)=>{vh.getState().addToast({type:"success",title:e,message:t,createdBy:r})},zn=(e,t)=>{vh.getState().addToast({type:"error",title:e,message:t,duration:8e3})},bF=(e,t)=>{vh.getState().addToast({type:"warning",title:e,message:t})},wF={users:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"}),calendar:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"}),clipboard:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25z"}),megaphone:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 110-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 01-1.44-4.282m3.102.069a18.03 18.03 0 01-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 018.835 2.535M10.34 6.66a23.847 23.847 0 008.835-2.535m0 0A23.74 23.74 0 0018.795 3m.38 1.125a23.91 23.91 0 011.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 001.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 010 3.46"}),clock:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}),key:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"}),inbox:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 13.5h3.86a2.25 2.25 0 012.012 1.244l.256.512a2.25 2.25 0 002.013 1.244h3.218a2.25 2.25 0 002.013-1.244l.256-.512a2.25 2.25 0 012.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 00-2.15-1.588H6.911a2.25 2.25 0 00-2.15 1.588L2.35 13.177a2.25 2.25 0 00-.1.661z"}),sparkles:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"}),truck:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}),"check-circle":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),tag:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),eye:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),gauge:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6l4 2m6-2a10 10 0 11-20 0 10 10 0 0120 0z"}),image:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"}),home:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}),"chevron-down":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}),"chevron-right":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}),menu:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}),x:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}),search:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"}),bell:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"}),logout:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}),settings:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),building:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}),layers:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.429 9.75L2.25 12l4.179 2.25m0-4.5l5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-4.179 2.25m0 0L21.75 12l-4.179 2.25m0 0l4.179 2.25L12 21.75 2.25 16.5l4.179-2.25m11.142 0l-5.571 3-5.571-3"}),droplet:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3.75c-3.314 0-6 4.03-6 9a6 6 0 1012 0c0-4.97-2.686-9-6-9z"}),spray:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23.693L5 15.5m14.8-.2a2.251 2.251 0 01.45 2.574l-.788 1.576a2.25 2.25 0 01-2.45 1.186l-6.09-1.218a5.227 5.227 0 01-2.842-1.61l-.91-1.014a2.25 2.25 0 01-.218-2.692l1.55-2.58"}),brush:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}),info:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}),"alert-circle":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}),"alert-triangle":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"}),check:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}),"x-circle":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),trash:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}),activity:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"}),user:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"}),plus:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}),package:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"}),"file-text":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}),"bar-chart":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"}),edit:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}),send:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}),upload:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}),file:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})},G=({name:e,className:t="",size:r=24})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:r,height:r,className:t,children:wF[e]}),_F=({toast:e})=>{const{removeToast:t}=vh(),r={success:"bg-gradient-to-r from-success-500 to-success-600",error:"bg-gradient-to-r from-danger-500 to-danger-600",warning:"bg-gradient-to-r from-warning-500 to-warning-600",info:"bg-gradient-to-r from-brand-500 to-brand-600"},n={success:"check-circle",error:"alert-circle",warning:"alert-triangle",info:"info"};return o.jsxs("div",{className:`${r[e.type]} text-white rounded-xl shadow-2xl p-4 min-w-[320px] max-w-[420px] animate-slide-in-right flex items-start gap-3`,style:{animation:"slideInRight 0.3s ease-out"},children:[o.jsx("div",{className:"flex-shrink-0 mt-0.5",children:o.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:o.jsx(G,{name:n[e.type],size:22,className:"text-white"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"flex items-center gap-2 mb-1",children:o.jsx("h4",{className:"font-bold text-base",children:e.title})}),o.jsx("p",{className:"text-sm text-white/90 leading-relaxed",children:e.message}),e.createdBy&&o.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-white/80",children:[o.jsx(G,{name:"user",size:14}),o.jsxs("span",{children:["Registrado por: ",o.jsx("strong",{className:"text-white",children:e.createdBy})]})]})]}),o.jsx("button",{onClick:()=>t(e.id),className:"flex-shrink-0 p-1 hover:bg-white/20 rounded-lg transition-colors",children:o.jsx(G,{name:"x",size:18,className:"text-white/80"})})]})},SF=()=>{const{toasts:e}=vh();return e.length===0?null:o.jsxs(o.Fragment,{children:[o.jsx("style",{children:`
        @keyframes slideInRight {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
      `}),o.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3",children:e.map(t=>o.jsx(_F,{toast:t},t.id))})]})},jF=({children:e})=>{const[t]=T.useState(()=>new I$({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:6e4}}}));return o.jsxs(D$,{client:t,children:[e,o.jsx(SF,{})]})};/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pf(){return pf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pf.apply(this,arguments)}var Ns;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ns||(Ns={}));const Bj="popstate";function EF(e){e===void 0&&(e={});function t(a,i){let{pathname:s="/",search:l="",hash:c=""}=xl(a.location.hash.substr(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),m1("",{pathname:s,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){let s=a.document.querySelector("base"),l="";if(s&&s.getAttribute("href")){let c=a.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof i=="string"?i:Ip(i))}function n(a,i){jg(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return TF(t,r,n,e)}function Lt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function jg(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function NF(){return Math.random().toString(36).substr(2,8)}function Uj(e,t){return{usr:e.state,key:e.key,idx:t}}function m1(e,t,r,n){return r===void 0&&(r=null),pf({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?xl(t):t,{state:r,key:t&&t.key||n||NF()})}function Ip(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function xl(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function TF(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,s=a.history,l=Ns.Pop,c=null,u=d();u==null&&(u=0,s.replaceState(pf({},s.state,{idx:u}),""));function d(){return(s.state||{idx:null}).idx}function f(){l=Ns.Pop;let x=d(),b=x==null?null:x-u;u=x,c&&c({action:l,location:g.location,delta:b})}function h(x,b){l=Ns.Push;let m=m1(g.location,x,b);r&&r(m,x),u=d()+1;let y=Uj(m,u),_=g.createHref(m);try{s.pushState(y,"",_)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;a.location.assign(_)}i&&c&&c({action:l,location:g.location,delta:1})}function p(x,b){l=Ns.Replace;let m=m1(g.location,x,b);r&&r(m,x),u=d();let y=Uj(m,u),_=g.createHref(m);s.replaceState(y,"",_),i&&c&&c({action:l,location:g.location,delta:0})}function v(x){let b=a.location.origin!=="null"?a.location.origin:a.location.href,m=typeof x=="string"?x:Ip(x);return m=m.replace(/ $/,"%20"),Lt(b,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,b)}let g={get action(){return l},get location(){return e(a,s)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Bj,f),c=x,()=>{a.removeEventListener(Bj,f),c=null}},createHref(x){return t(a,x)},createURL:v,encodeLocation(x){let b=v(x);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:p,go(x){return s.go(x)}};return g}var zj;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(zj||(zj={}));function AF(e,t,r){return r===void 0&&(r="/"),OF(e,t,r)}function OF(e,t,r,n){let a=typeof t=="string"?xl(t):t,i=Hc(a.pathname||"/",r);if(i==null)return null;let s=Z4(e);CF(s);let l=null;for(let c=0;l==null&&c<s.length;++c){let u=UF(i);l=FF(s[c],u)}return l}function Z4(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,s,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};c.relativePath.startsWith("/")&&(Lt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Fs([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Lt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Z4(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:LF(u,i.index),routesMeta:d})};return e.forEach((i,s)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,s);else for(let c of eP(i.path))a(i,s,c)}),t}function eP(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let s=eP(n.join("/")),l=[];return l.push(...s.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...s),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function CF(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:$F(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const kF=/^:[\w-]+$/,PF=3,RF=2,IF=1,DF=10,MF=-2,qj=e=>e==="*";function LF(e,t){let r=e.split("/"),n=r.length;return r.some(qj)&&(n+=MF),t&&(n+=RF),r.filter(a=>!qj(a)).reduce((a,i)=>a+(kF.test(i)?PF:i===""?IF:DF),n)}function $F(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function FF(e,t,r){let{routesMeta:n}=e,a={},i="/",s=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=g1({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f)return null;Object.assign(a,f.params),s.push({params:a,pathname:Fs([i,f.pathname]),pathnameBase:VF(Fs([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=Fs([i,f.pathnameBase]))}return s}function g1(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=BF(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:p}=d;if(h==="*"){let g=l[f]||"";s=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const v=l[f];return p&&!v?u[h]=void 0:u[h]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:s,pattern:e}}function BF(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),jg(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function UF(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return jg(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Hc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const zF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qF=e=>zF.test(e);function WF(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?xl(e):e,i;if(r)if(qF(r))i=r;else{if(r.includes("//")){let s=r;r=r.replace(/\/\/+/g,"/"),jg(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+r))}r.startsWith("/")?i=Wj(r.substring(1),"/"):i=Wj(r,t)}else i=t;return{pathname:i,search:KF(n),hash:GF(a)}}function Wj(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function px(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function HF(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function p_(e,t){let r=HF(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function m_(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=xl(e):(a=pf({},e),Lt(!a.pathname||!a.pathname.includes("?"),px("?","pathname","search",a)),Lt(!a.pathname||!a.pathname.includes("#"),px("#","pathname","hash",a)),Lt(!a.search||!a.search.includes("#"),px("#","search","hash",a)));let i=e===""||a.pathname==="",s=i?"/":a.pathname,l;if(s==null)l=r;else{let f=t.length-1;if(!n&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=WF(a,l),u=s&&s!=="/"&&s.endsWith("/"),d=(i||s===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Fs=e=>e.join("/").replace(/\/\/+/g,"/"),VF=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),KF=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,GF=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function XF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const tP=["post","put","patch","delete"];new Set(tP);const YF=["get",...tP];new Set(YF);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mf(){return mf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mf.apply(this,arguments)}const Eg=T.createContext(null),rP=T.createContext(null),Yi=T.createContext(null),Ng=T.createContext(null),Qi=T.createContext({outlet:null,matches:[],isDataRoute:!1}),nP=T.createContext(null);function QF(e,t){let{relative:r}=t===void 0?{}:t;Tu()||Lt(!1);let{basename:n,navigator:a}=T.useContext(Yi),{hash:i,pathname:s,search:l}=Tg(e,{relative:r}),c=s;return n!=="/"&&(c=s==="/"?n:Fs([n,s])),a.createHref({pathname:c,search:l,hash:i})}function Tu(){return T.useContext(Ng)!=null}function yl(){return Tu()||Lt(!1),T.useContext(Ng).location}function aP(e){T.useContext(Yi).static||T.useLayoutEffect(e)}function g_(){let{isDataRoute:e}=T.useContext(Qi);return e?f7():JF()}function JF(){Tu()||Lt(!1);let e=T.useContext(Eg),{basename:t,future:r,navigator:n}=T.useContext(Yi),{matches:a}=T.useContext(Qi),{pathname:i}=yl(),s=JSON.stringify(p_(a,r.v7_relativeSplatPath)),l=T.useRef(!1);return aP(()=>{l.current=!0}),T.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=m_(u,JSON.parse(s),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Fs([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,s,i,e])}const ZF=T.createContext(null);function e7(e){let t=T.useContext(Qi).outlet;return t&&T.createElement(ZF.Provider,{value:e},t)}function Tg(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=T.useContext(Yi),{matches:a}=T.useContext(Qi),{pathname:i}=yl(),s=JSON.stringify(p_(a,n.v7_relativeSplatPath));return T.useMemo(()=>m_(e,JSON.parse(s),i,r==="path"),[e,s,i,r])}function t7(e,t){return r7(e,t)}function r7(e,t,r,n){Tu()||Lt(!1);let{navigator:a}=T.useContext(Yi),{matches:i}=T.useContext(Qi),s=i[i.length-1],l=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let u=yl(),d;if(t){var f;let x=typeof t=="string"?xl(t):t;c==="/"||(f=x.pathname)!=null&&f.startsWith(c)||Lt(!1),d=x}else d=u;let h=d.pathname||"/",p=h;if(c!=="/"){let x=c.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(x.length).join("/")}let v=AF(e,{pathname:p}),g=o7(v&&v.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Fs([c,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:Fs([c,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,r,n);return t&&g?T.createElement(Ng.Provider,{value:{location:mf({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ns.Pop}},g):g}function n7(){let e=d7(),t=XF(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),r?T.createElement("pre",{style:a},r):null,null)}const a7=T.createElement(n7,null);class i7 extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?T.createElement(Qi.Provider,{value:this.props.routeContext},T.createElement(nP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function s7(e){let{routeContext:t,match:r,children:n}=e,a=T.useContext(Eg);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),T.createElement(Qi.Provider,{value:t},n)}function o7(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=s.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Lt(!1),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:p}=r,v=f.route.loader&&h[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||v){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,h)=>{let p,v=!1,g=null,x=null;r&&(p=l&&f.route.id?l[f.route.id]:void 0,g=f.route.errorElement||a7,c&&(u<0&&h===0?(h7("route-fallback"),v=!0,x=null):u===h&&(v=!0,x=f.route.hydrateFallbackElement||null)));let b=t.concat(s.slice(0,h+1)),m=()=>{let y;return p?y=g:v?y=x:f.route.Component?y=T.createElement(f.route.Component,null):f.route.element?y=f.route.element:y=d,T.createElement(s7,{match:f,routeContext:{outlet:d,matches:b,isDataRoute:r!=null},children:y})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?T.createElement(i7,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:m(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):m()},null)}var iP=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(iP||{}),sP=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(sP||{});function l7(e){let t=T.useContext(Eg);return t||Lt(!1),t}function c7(e){let t=T.useContext(rP);return t||Lt(!1),t}function u7(e){let t=T.useContext(Qi);return t||Lt(!1),t}function oP(e){let t=u7(),r=t.matches[t.matches.length-1];return r.route.id||Lt(!1),r.route.id}function d7(){var e;let t=T.useContext(nP),r=c7(),n=oP();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function f7(){let{router:e}=l7(iP.UseNavigateStable),t=oP(sP.UseNavigateStable),r=T.useRef(!1);return aP(()=>{r.current=!0}),T.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,mf({fromRouteId:t},i)))},[e,t])}const Hj={};function h7(e,t,r){Hj[e]||(Hj[e]=!0)}function p7(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function lP(e){let{to:t,replace:r,state:n,relative:a}=e;Tu()||Lt(!1);let{future:i,static:s}=T.useContext(Yi),{matches:l}=T.useContext(Qi),{pathname:c}=yl(),u=g_(),d=m_(t,p_(l,i.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(d);return T.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:a}),[u,f,a,r,n]),null}function cP(e){return e7(e.context)}function Ft(e){Lt(!1)}function m7(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Ns.Pop,navigator:i,static:s=!1,future:l}=e;Tu()&&Lt(!1);let c=t.replace(/^\/*/,"/"),u=T.useMemo(()=>({basename:c,navigator:i,static:s,future:mf({v7_relativeSplatPath:!1},l)}),[c,l,i,s]);typeof n=="string"&&(n=xl(n));let{pathname:d="/",search:f="",hash:h="",state:p=null,key:v="default"}=n,g=T.useMemo(()=>{let x=Hc(d,c);return x==null?null:{location:{pathname:x,search:f,hash:h,state:p,key:v},navigationType:a}},[c,d,f,h,p,v,a]);return g==null?null:T.createElement(Yi.Provider,{value:u},T.createElement(Ng.Provider,{children:r,value:g}))}function g7(e){let{children:t,location:r}=e;return t7(v1(t),r)}new Promise(()=>{});function v1(e,t){t===void 0&&(t=[]);let r=[];return T.Children.forEach(e,(n,a)=>{if(!T.isValidElement(n))return;let i=[...t,a];if(n.type===T.Fragment){r.push.apply(r,v1(n.props.children,i));return}n.type!==Ft&&Lt(!1),!n.props.index||!n.props.children||Lt(!1);let s={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=v1(n.props.children,i)),r.push(s)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dp(){return Dp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dp.apply(this,arguments)}function uP(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function v7(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function x7(e,t){return e.button===0&&(!t||t==="_self")&&!v7(e)}const y7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],b7=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],w7="6";try{window.__reactRouterVersion=w7}catch{}const _7=T.createContext({isTransitioning:!1}),S7="startTransition",Vj=eM[S7];function j7(e){let{basename:t,children:r,future:n,window:a}=e,i=T.useRef();i.current==null&&(i.current=EF({window:a,v5Compat:!0}));let s=i.current,[l,c]=T.useState({action:s.action,location:s.location}),{v7_startTransition:u}=n||{},d=T.useCallback(f=>{u&&Vj?Vj(()=>c(f)):c(f)},[c,u]);return T.useLayoutEffect(()=>s.listen(d),[s,d]),T.useEffect(()=>p7(n),[n]),T.createElement(m7,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:s,future:n})}const E7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",N7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,T7=T.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:s,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=uP(t,y7),{basename:p}=T.useContext(Yi),v,g=!1;if(typeof u=="string"&&N7.test(u)&&(v=u,E7))try{let y=new URL(window.location.href),_=u.startsWith("//")?new URL(y.protocol+u):new URL(u),w=Hc(_.pathname,p);_.origin===y.origin&&w!=null?u=w+_.search+_.hash:g=!0}catch{}let x=QF(u,{relative:a}),b=C7(u,{replace:s,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function m(y){n&&n(y),y.defaultPrevented||b(y)}return T.createElement("a",Dp({},h,{href:v||x,onClick:g||i?n:m,ref:r,target:c}))}),A7=T.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:a=!1,className:i="",end:s=!1,style:l,to:c,viewTransition:u,children:d}=t,f=uP(t,b7),h=Tg(c,{relative:f.relative}),p=yl(),v=T.useContext(rP),{navigator:g,basename:x}=T.useContext(Yi),b=v!=null&&k7(h)&&u===!0,m=g.encodeLocation?g.encodeLocation(h).pathname:h.pathname,y=p.pathname,_=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;a||(y=y.toLowerCase(),_=_?_.toLowerCase():null,m=m.toLowerCase()),_&&x&&(_=Hc(_,x)||_);const w=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let S=y===m||!s&&y.startsWith(m)&&y.charAt(w)==="/",j=_!=null&&(_===m||!s&&_.startsWith(m)&&_.charAt(m.length)==="/"),E={isActive:S,isPending:j,isTransitioning:b},N=S?n:void 0,A;typeof i=="function"?A=i(E):A=[i,S?"active":null,j?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let C=typeof l=="function"?l(E):l;return T.createElement(T7,Dp({},f,{"aria-current":N,className:A,ref:r,style:C,to:c,viewTransition:u}),typeof d=="function"?d(E):d)});var x1;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(x1||(x1={}));var Kj;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Kj||(Kj={}));function O7(e){let t=T.useContext(Eg);return t||Lt(!1),t}function C7(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:s,viewTransition:l}=t===void 0?{}:t,c=g_(),u=yl(),d=Tg(e,{relative:s});return T.useCallback(f=>{if(x7(f,r)){f.preventDefault();let h=n!==void 0?n:Ip(u)===Ip(d);c(e,{replace:h,state:a,preventScrollReset:i,relative:s,viewTransition:l})}},[u,c,d,n,a,r,e,i,s,l])}function k7(e,t){t===void 0&&(t={});let r=T.useContext(_7);r==null&&Lt(!1);let{basename:n}=O7(x1.useViewTransitionState),a=Tg(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=Hc(r.currentLocation.pathname,n)||r.currentLocation.pathname,s=Hc(r.nextLocation.pathname,n)||r.nextLocation.pathname;return g1(a.pathname,s)!=null||g1(a.pathname,i)!=null}let f0=null;const P7=(e,t)=>({supervisorName:e,terminalCode:t,startedAt:new Date().toISOString()}),Mp={startSession:async(e,t)=>(f0=P7(e,t),f0),getSession:async()=>f0,logout:async()=>{f0=null}},fr=Sg(e=>({session:null,setSession:t=>e({session:t}),clearSession:()=>e({session:null}),hydrateSession:async()=>{const t=await Mp.getSession();e({session:t})}})),Ws={EL_ROBLE:"El Roble",LA_REINA:"La Reina",EL_SALTO:"El Salto",LO_ECHEVERS:"Lo Echevers",COLO_COLO:"Colo Colo"},v_=[{code:"ROBLE_Y_REINA",name:"El Roble + La Reina",members:["EL_ROBLE","LA_REINA"]}],Kn=Object.entries(Ws).map(([e,t])=>({value:e,label:t})),R7=v_.map(e=>({value:e.code,label:e.name})),dP={mode:"ALL"},Ba=e=>{if(e.mode==="ALL"||!e.value)return Object.keys(Ws);if(e.mode==="TERMINAL")return[e.value];const t=v_.find(r=>r.code===e.value);return t?t.members:Object.keys(Ws)},I7=(e,t)=>{const r=Ba(t);return e.filter(n=>r.includes(n.terminal))},He=e=>{if(Ws[e])return Ws[e];const t=v_.find(r=>r.code===e);return(t==null?void 0:t.name)??String(e)},$e=Sg(e=>({context:dP,setContext:t=>e({context:t})})),D7=()=>{const e=g_(),t=fr(f=>f.setSession),r=fr(f=>f.session),n=$e(f=>f.setContext),[a,i]=T.useState(""),[s,l]=T.useState("EL_ROBLE"),[c,u]=T.useState(!1);T.useEffect(()=>{r&&e("/personal")},[r,e]);const d=async f=>{f.preventDefault(),u(!0);const h=await Mp.startSession(a,s);t(h),n({mode:"TERMINAL",value:s}),e("/personal")};return o.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-dark-900 via-dark-800 to-brand-900",children:[o.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-brand-500/30 rounded-full blur-3xl animate-float"}),o.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent-500/20 rounded-full blur-3xl animate-float",style:{animationDelay:"1s"}}),o.jsx("div",{className:"absolute top-1/2 right-1/3 w-64 h-64 bg-brand-600/20 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),o.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})]}),o.jsxs("div",{className:"relative z-10 w-full max-w-lg px-4 animate-slide-up",children:[o.jsx("div",{className:"flex justify-center mb-8",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br from-brand-500 to-brand-700 shadow-brand-lg",children:o.jsx("span",{className:"text-3xl font-bold text-white",children:"A"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-2xl font-bold text-white",children:"Asiss"}),o.jsx("span",{className:"text-sm text-slate-400",children:"Dashboard de Logstica"})]})]})}),o.jsxs("div",{className:"card-glass p-8 md:p-10",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Bienvenido"}),o.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Ingresa tus datos para acceder al panel de control"})]}),o.jsxs("form",{onSubmit:d,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nombre del Supervisor"}),o.jsxs("div",{className:"relative",children:[o.jsx(G,{name:"users",size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"}),o.jsx("input",{type:"text",className:"input pl-10",value:a,onChange:f=>i(f.target.value),placeholder:"Ej: Ana Prez",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsxs("div",{className:"relative",children:[o.jsx(G,{name:"building",size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none z-10"}),o.jsx("select",{className:"input pl-10 appearance-none cursor-pointer",value:s,onChange:f=>l(f.target.value),style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2394a3b8'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px",paddingRight:"40px"},children:Kn.map(f=>o.jsx("option",{value:f.value,children:f.label},f.value))})]})]}),o.jsx("button",{type:"submit",disabled:c||!a,className:"btn btn-primary w-full py-3.5 text-base",children:c?o.jsxs("span",{className:"flex items-center justify-center gap-2",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Iniciando sesin..."]}):o.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Entrar al Dashboard",o.jsx(G,{name:"chevron-right",size:18})]})})]}),o.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200",children:o.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-slate-500",children:[o.jsx(G,{name:"check-circle",size:14,className:"text-success-500"}),o.jsx("span",{children:"Conexin segura  Datos protegidos"})]})})]}),o.jsx("p",{className:"mt-6 text-center text-xs text-slate-500",children:"Versin 2.0   2024 Asiss"})]})]})},Gj=[{label:"Operacin",icon:"building",items:[{label:"Personal",to:"/personal",icon:"users"},{label:"Reuniones",to:"/reuniones",icon:"calendar"},{label:"Tareas",to:"/tareas",icon:"clipboard"},{label:"Informativos",to:"/informativos",icon:"megaphone"},{label:"Asistencia",to:"/asistencia",icon:"clock"},{label:"Credenciales",to:"/credenciales",icon:"key"},{label:"Solicitudes",to:"/solicitudes",icon:"inbox"}]},{label:"Aseo",icon:"sparkles",items:[{label:"Interior",to:"/aseo/interior",icon:"droplet"},{label:"Exterior",to:"/aseo/exterior",icon:"spray"},{label:"Rodillo",to:"/aseo/rodillo",icon:"brush"}]},{label:"Insumos",icon:"package",items:[{label:"Solicitudes",to:"/insumos",icon:"file-text"}]},{label:"MiniCheck",icon:"check-circle",items:[{label:"Extintor",to:"/minicheck/extintor",icon:"check-circle"},{label:"Tag",to:"/minicheck/tag",icon:"tag"},{label:"Mobileye",to:"/minicheck/mobileye",icon:"eye"},{label:"Odmetro",to:"/minicheck/odometro",icon:"gauge"},{label:"Publicidad",to:"/minicheck/publicidad",icon:"image"}]},{label:"Flota",icon:"truck",items:[{label:"Estado de Flota",to:"/estado-flota",icon:"truck"}]}],M7=({isOpen:e,onClose:t})=>{const r=yl(),[n,a]=T.useState(()=>{const l=Gj.find(c=>c.items.some(u=>r.pathname.startsWith(u.to)));return l?[l.label]:["Operacin"]}),i=l=>{a(c=>c.includes(l)?c.filter(u=>u!==l):[...c,l])},s=l=>l.items.some(c=>r.pathname.startsWith(c.to));return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`${e?"fixed":"hidden"} inset-0 z-40 bg-black/60 backdrop-blur-sm md:hidden`,onClick:t}),o.jsx("aside",{className:`${e?"translate-x-0":"-translate-x-full"} fixed inset-y-0 left-0 z-50 w-72 transform transition-transform duration-300 ease-out md:translate-x-0`,children:o.jsxs("div",{className:"flex h-full flex-col bg-gradient-to-b from-dark-800 to-dark-900",children:[o.jsxs("div",{className:"flex items-center gap-3 px-6 py-5 border-b border-white/10",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-brand-500 to-brand-700 shadow-brand",children:o.jsx("span",{className:"text-lg font-bold text-white",children:"A"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-sm font-bold text-white",children:"Asiss"}),o.jsx("span",{className:"text-xs text-slate-400",children:"Dashboard Logstica"})]}),o.jsx("button",{onClick:t,className:"ml-auto rounded-lg p-1.5 text-slate-400 hover:bg-white/10 hover:text-white md:hidden",children:o.jsx(G,{name:"x",size:20})})]}),o.jsx("nav",{className:"flex-1 overflow-y-auto custom-scrollbar px-3 py-4 space-y-1",children:Gj.map(l=>{const c=n.includes(l.label),u=s(l);return o.jsxs("div",{className:"mb-1",children:[o.jsxs("button",{onClick:()=>i(l.label),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 group ${u?"bg-white/10 text-white":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[o.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-lg transition-all duration-200 ${u?"bg-gradient-to-br from-brand-500 to-brand-600 text-white shadow-brand":"bg-white/5 text-slate-400 group-hover:bg-white/10 group-hover:text-slate-200"}`,children:o.jsx(G,{name:l.icon,size:18})}),o.jsx("span",{className:"flex-1 text-left text-sm font-semibold",children:l.label}),o.jsx(G,{name:"chevron-down",size:16,className:`transition-transform duration-200 ${c?"rotate-0":"-rotate-90"}`})]}),o.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-out ${c?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:o.jsx("div",{className:"mt-1 ml-4 pl-4 border-l border-white/10 space-y-0.5",children:l.items.map(d=>o.jsxs(A7,{to:d.to,onClick:t,className:({isActive:f})=>`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-all duration-200 ${f?"bg-brand-500/20 text-brand-300 font-medium":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[o.jsx(G,{name:d.icon,size:16}),o.jsx("span",{children:d.label})]},d.to))})})]},l.label)})}),o.jsx("div",{className:"border-t border-white/10 px-4 py-4",children:o.jsxs("div",{className:"flex items-center gap-3 px-2",children:[o.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-gradient-to-br from-accent-400 to-accent-600 text-white text-sm font-bold",children:"S"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-white truncate",children:"Supervisor"}),o.jsx("p",{className:"text-xs text-slate-400",children:"Terminal Activo"})]})]})})]})})]})},mx=new Set;let h0=[];const L7=()=>crypto.randomUUID(),Xj={subscribeNotifications:e=>(mx.add(e),()=>mx.delete(e)),publishNotification:e=>{const t={id:e.id??L7(),createdAt:e.createdAt??new Date().toISOString(),...e};return h0=[t,...h0].slice(0,50),mx.forEach(r=>r(t)),t},getNotifications:()=>h0,clear:()=>{h0=[]}},$7=Sg(e=>({items:[],last:void 0,addNotification:t=>e(r=>({items:[t,...r.items],last:t})),setAll:t=>e({items:t}),clear:()=>e({items:[],last:void 0})})),tr=e=>(typeof e=="string"?new Date(e):e).toLocaleDateString("es-CL",{year:"numeric",month:"short",day:"numeric"}),F7=()=>{const{items:e,addNotification:t,setAll:r,last:n}=$7(),[a,i]=T.useState(!1),[s,l]=T.useState(!1);return T.useEffect(()=>{r(Xj.getNotifications());const c=Xj.subscribeNotifications(u=>{t(u),l(!0),setTimeout(()=>l(!1),3500)});return()=>c()},[t,r]),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{type:"button",className:"btn btn-secondary h-10",onClick:()=>i(c=>!c),children:[o.jsxs("span",{className:"relative inline-flex items-center",children:[o.jsx("svg",{className:"h-5 w-5 text-slate-600",fill:"none",stroke:"currentColor",strokeWidth:"1.8",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14 17h5l-1.405-1.405A2.032 2.032 0 0117 14.158V11a5.002 5.002 0 00-3-4.584V6a2 2 0 10-4 0v.416A5.002 5.002 0 007 11v3.159c0 .538-.214 1.055-.595 1.436L5 17h5m4 0v1a3 3 0 11-6 0v-1m6 0H8"})}),e.length>0&&o.jsx("span",{className:"absolute -right-2 -top-2 flex h-5 min-w-[20px] items-center justify-center rounded-full bg-brand-500 px-1 text-xs font-bold text-white",children:e.length})]}),o.jsx("span",{className:"hidden text-sm font-semibold text-slate-700 sm:inline",children:"Alertas"})]}),a&&o.jsxs("div",{className:"absolute right-0 z-30 mt-2 w-80 rounded-lg border border-slate-200 bg-white shadow-lg",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[o.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Notificaciones"}),o.jsx("button",{className:"text-xs text-brand-600 hover:underline",onClick:()=>i(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"max-h-80 space-y-2 overflow-y-auto px-4 pb-4",children:[e.length===0&&o.jsx("p",{className:"text-sm text-slate-500",children:"Sin notificaciones por ahora."}),e.map(c=>o.jsxs("div",{className:"rounded-md border border-slate-100 bg-slate-50 p-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[o.jsx("span",{className:"font-semibold capitalize",children:c.level}),o.jsx("span",{children:tr(c.createdAt)})]}),o.jsx("p",{className:"text-sm font-semibold text-slate-800",children:c.title}),o.jsx("p",{className:"text-sm text-slate-600",children:c.message})]},c.id))]})]}),s&&n&&o.jsxs("div",{className:"fixed bottom-4 right-4 z-40 max-w-sm rounded-md border border-slate-200 bg-white px-4 py-3 shadow-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-xs font-semibold uppercase text-brand-700",children:n.level}),o.jsx("button",{onClick:()=>l(!1),className:"text-xs text-slate-500 hover:text-slate-700",children:"Cerrar"})]}),o.jsx("p",{className:"text-sm font-semibold text-slate-900",children:n.title}),o.jsx("p",{className:"text-sm text-slate-700",children:n.message})]})]})},B7=({onMenuToggle:e})=>{var i;const t=$e(s=>s.context),r=fr(s=>s.session),n=fr(s=>s.clearSession),a=()=>t.mode==="ALL"?"Todos los terminales":t.mode==="TERMINAL"&&t.value?He(t.value):"Terminal";return o.jsx("header",{className:"header px-4 md:px-6",children:o.jsxs("div",{className:"flex w-full items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:e,className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-100 text-slate-600 transition-all hover:bg-slate-200 md:hidden","aria-label":"Abrir men",children:o.jsx(G,{name:"menu",size:20})}),o.jsxs("div",{className:"hidden md:block",children:[o.jsx("h1",{className:"text-lg font-bold text-slate-900",children:"Dashboard"}),o.jsx("p",{className:"text-xs text-slate-500",children:a()})]})]}),o.jsx("div",{className:"hidden lg:flex flex-1 max-w-md mx-8",children:o.jsxs("div",{className:"relative w-full",children:[o.jsx(G,{name:"search",size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),o.jsx("input",{type:"search",placeholder:"Buscar en el dashboard...",className:"w-full rounded-xl border border-slate-200 bg-slate-50 py-2.5 pl-10 pr-4 text-sm transition-all placeholder:text-slate-400 focus:border-brand-500 focus:bg-white focus:outline-none focus:ring-2 focus:ring-brand-500/20"})]})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"md:hidden",children:o.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-brand-50 px-3 py-1.5",children:[o.jsx(G,{name:"building",size:14,className:"text-brand-600"}),o.jsx("span",{className:"text-xs font-semibold text-brand-700",children:t.mode==="ALL"?"Todos":(i=t.value)==null?void 0:i.split("_").pop()})]})}),o.jsx(F7,{}),r&&o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"hidden sm:flex items-center gap-3 rounded-xl border border-slate-200 bg-white px-3 py-2 shadow-sm",children:[o.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-brand-500 to-brand-600 text-white text-sm font-bold",children:r.supervisorName.charAt(0).toUpperCase()}),o.jsxs("div",{className:"hidden md:flex flex-col leading-tight",children:[o.jsx("span",{className:"text-sm font-semibold text-slate-900",children:r.supervisorName}),o.jsx("span",{className:"text-xs text-slate-500",children:He(r.terminalCode)})]}),o.jsx("button",{onClick:()=>{n(),Mp.logout()},className:"ml-1 rounded-lg p-1.5 text-slate-400 transition-colors hover:bg-slate-100 hover:text-danger-600",title:"Cerrar sesin",children:o.jsx(G,{name:"logout",size:18})})]}),o.jsx("button",{onClick:()=>{n(),Mp.logout()},className:"sm:hidden flex h-10 w-10 items-center justify-center rounded-xl bg-slate-100 text-slate-600 transition-all hover:bg-danger-100 hover:text-danger-600",title:"Cerrar sesin",children:o.jsx(G,{name:"logout",size:20})})]})]})]})})},U7=()=>{const[e,t]=T.useState(!1);return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-slate-100 to-slate-50",children:o.jsxs("div",{className:"flex",children:[o.jsx(M7,{isOpen:e,onClose:()=>t(!1)}),o.jsxs("div",{className:"flex min-h-screen flex-1 flex-col md:ml-72",children:[o.jsx(B7,{onMenuToggle:()=>t(r=>!r)}),o.jsx("main",{className:"flex-1 px-4 pb-8 pt-6 md:px-8",children:o.jsx("div",{className:"animate-fade-in",children:o.jsx(cP,{})})}),o.jsx("footer",{className:"border-t border-slate-200 bg-white/50 px-4 py-4 md:px-8",children:o.jsxs("div",{className:"flex flex-col items-center justify-between gap-2 text-xs text-slate-500 sm:flex-row",children:[o.jsx("p",{children:" 2024 Asiss  Dashboard de Operaciones y Logstica"}),o.jsxs("p",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-success-500 animate-pulse"}),"Sistema operativo"]})]})})]})]})})},Gt=({label:e="Cargando..."})=>o.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"h-12 w-12 rounded-full border-[3px] border-slate-200"}),o.jsx("div",{className:"absolute inset-0 h-12 w-12 rounded-full border-[3px] border-transparent border-t-brand-500 animate-spin"})]}),o.jsx("p",{className:"mt-4 text-sm font-medium text-slate-600",children:e})]}),Xt=({title:e,description:t,actions:r})=>o.jsxs("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 md:text-3xl",children:e}),t&&o.jsx("p",{className:"mt-1 text-sm text-slate-500",children:t})]}),r&&o.jsx("div",{className:"flex flex-wrap items-center gap-3",children:r})]}),z7=({value:e,onChange:t,label:r="Terminal actual"})=>{const n=e.mode==="ALL"?"ALL":e.mode==="GROUP"?`GROUP:${e.value}`:`TERMINAL:${e.value}`,a=i=>{const s=i.target.value;if(s==="ALL"){t(dP);return}if(s.startsWith("GROUP:")){const c=s.replace("GROUP:","");t({mode:"GROUP",value:c});return}const l=s.replace("TERMINAL:","");t({mode:"TERMINAL",value:l})};return o.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-600",children:[o.jsx("span",{className:"mb-1",children:r}),o.jsxs("select",{value:n,onChange:a,className:"input min-w-[200px]","aria-label":"Selector de terminal",children:[o.jsx("option",{value:"ALL",children:"Todos"}),o.jsx("optgroup",{label:"Terminales",children:Kn.map(i=>o.jsx("option",{value:`TERMINAL:${i.value}`,children:i.label},i.value))}),o.jsx("optgroup",{label:"Grupos",children:R7.map(i=>o.jsx("option",{value:`GROUP:${i.value}`,children:i.label},i.value))})]})]})},An=({terminalContext:e,onTerminalChange:t,children:r})=>o.jsx("div",{className:"card p-4 mb-6",children:o.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(z7,{value:e,onChange:t})}),r&&o.jsx("div",{className:"flex flex-wrap items-end gap-3 border-t border-slate-100 pt-4 lg:border-0 lg:pt-0",children:r})]})}),Sr=({message:e="Ha ocurrido un error",onRetry:t})=>o.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border border-danger-200 bg-danger-50/50 px-6 py-12 text-center",children:[o.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-danger-100 mb-4",children:o.jsx("svg",{className:"h-7 w-7 text-danger-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})})}),o.jsx("p",{className:"text-sm font-semibold text-danger-700",children:e}),o.jsx("p",{className:"mt-1 text-xs text-danger-600 max-w-xs",children:"Por favor intenta de nuevo o contacta soporte si el problema persiste."}),t&&o.jsxs("button",{onClick:t,className:"mt-4 btn btn-secondary text-danger-700 border-danger-300 hover:bg-danger-100",children:[o.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reintentar"]})]}),jr=({onExportView:e,onExportAll:t})=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:e,className:"btn btn-secondary text-sm",children:[o.jsx(G,{name:"clipboard",size:16}),o.jsx("span",{className:"hidden sm:inline",children:"Exportar Vista"}),o.jsx("span",{className:"sm:hidden",children:"Vista"})]}),o.jsxs("button",{onClick:t,className:"btn btn-primary text-sm",children:[o.jsx(G,{name:"layers",size:16}),o.jsx("span",{className:"hidden sm:inline",children:"Exportar Todo"}),o.jsx("span",{className:"sm:hidden",children:"Todo"})]})]});/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Lp={};Lp.version="0.18.5";var fP=1252,q7=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],hP=function(e){q7.indexOf(e)!=-1&&(fP=e)};function W7(){hP(1252)}var gf=function(e){hP(e)};function H7(){gf(1200),W7()}var p0=function(t){return String.fromCharCode(t)},Yj=function(t){return String.fromCharCode(t)},$p,Ts="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function vf(e){for(var t="",r=0,n=0,a=0,i=0,s=0,l=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),i=r>>2,n=e.charCodeAt(u++),s=(r&3)<<4|n>>4,a=e.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),t+=Ts.charAt(i)+Ts.charAt(s)+Ts.charAt(l)+Ts.charAt(c);return t}function Bi(e){var t="",r=0,n=0,a=0,i=0,s=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)i=Ts.indexOf(e.charAt(u++)),s=Ts.indexOf(e.charAt(u++)),r=i<<2|s>>4,t+=String.fromCharCode(r),l=Ts.indexOf(e.charAt(u++)),n=(s&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=Ts.indexOf(e.charAt(u++)),a=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var et=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Ji=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function il(e){return et?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function Qj(e){return et?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Pa=function(t){return et?Ji(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function Ag(e){if(typeof ArrayBuffer>"u")return Pa(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function xh(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function V7(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}var Pr=et?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Ji(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function K7(e){for(var t=[],r=0,n=e.length+250,a=il(e.length+255),i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s<128)a[r++]=s;else if(s<2048)a[r++]=192|s>>6&31,a[r++]=128|s&63;else if(s>=55296&&s<57344){s=(s&1023)+64;var l=e.charCodeAt(++i)&1023;a[r++]=240|s>>8&7,a[r++]=128|s>>2&63,a[r++]=128|l>>6&15|(s&3)<<4,a[r++]=128|l&63}else a[r++]=224|s>>12&15,a[r++]=128|s>>6&63,a[r++]=128|s&63;r>n&&(t.push(a.slice(0,r)),r=0,a=il(65535),n=65530)}return t.push(a.slice(0,r)),Pr(t)}var Ld=/\u0000/g,m0=/[\u0001-\u0006]/g;function hc(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Ia(e,t){var r=""+e;return r.length>=t?r:zt("0",t-r.length)+r}function x_(e,t){var r=""+e;return r.length>=t?r:zt(" ",t-r.length)+r}function Fp(e,t){var r=""+e;return r.length>=t?r:r+zt(" ",t-r.length)}function G7(e,t){var r=""+Math.round(e);return r.length>=t?r:zt("0",t-r.length)+r}function X7(e,t){var r=""+e;return r.length>=t?r:zt("0",t-r.length)+r}var Jj=Math.pow(2,32);function Cl(e,t){if(e>Jj||e<-Jj)return G7(e,t);var r=Math.round(e);return X7(r,t)}function Bp(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var Zj=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],gx=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Y7(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Wt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},eE={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Q7={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Up(e,t,r){for(var n=e<0?-1:1,a=e*n,i=0,s=1,l=0,c=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),l=f*s+i,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),i=s,s=l,c=u,u=d;if(d>t&&(u>t?(d=c,l=i):(d=u,l=s)),!r)return[0,n*l,d];var h=Math.floor(n*l/d);return[h,n*l-h*d,d]}function g0(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),i=0,s=[],l={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)s=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)s=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),s=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),n<60&&(i=(i+6)%7),r&&(i=aB(c,s))}return l.y=s[0],l.m=s[1],l.d=s[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=i,l}var pP=new Date(1899,11,31,0,0,0),J7=pP.getTime(),Z7=new Date(1900,2,1,0,0,0);function mP(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Z7&&(r+=24*60*60*1e3),(r-(J7+(e.getTimezoneOffset()-pP.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function y_(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function eB(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function tB(e){var t=e<0?12:11,r=y_(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function rB(e){var t=y_(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function nB(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=tB(e):t===10?r=e.toFixed(10).substr(0,12):r=rB(e),y_(eB(r.toUpperCase()))}function y1(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):nB(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Hs(14,mP(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function aB(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function iB(e,t,r,n){var a="",i=0,s=0,l=r.y,c,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return gx[r.m-1][1];case 5:return gx[r.m-1][0];default:return gx[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return Zj[r.q][0];default:return Zj[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Ia(r.S,t.length):(n>=2?s=n===3?1e3:100:s=n===1?10:1,i=Math.round(s*(r.S+r.u)),i>=60*s&&(i=0),t==="s"?i===0?"0":""+i/s:(a=Ia(i,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?Ia(c,u):"";return d}function As(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var gP=/%/g;function sB(e,t,r){var n=t.replace(gP,""),a=t.length-n.length;return Ai(e,n,r*Math.pow(10,2*a))+zt("%",a)}function oB(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Ai(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function vP(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+vP(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),r.indexOf("e")===-1){var s=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+i):r+="E+"+(s-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+i)%a)+"."+d.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var xP=/# (\?+)( ?)\/( ?)(\d+)/;function lB(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),i=Math.floor(a/n),s=a-i*n,l=n;return r+(i===0?"":""+i)+" "+(s===0?zt(" ",e[1].length+1+e[4].length):x_(s,e[1].length)+e[2]+"/"+e[3]+Ia(l,e[4].length))}function cB(e,t,r){return r+(t===0?"":""+t)+zt(" ",e[1].length+2+e[4].length)}var yP=/^#*0*\.([0#]+)/,bP=/\).*[0#]/,wP=/\(###\) ###\\?-####/;function rn(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function tE(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function rE(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function uB(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function dB(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function ta(e,t,r){if(e.charCodeAt(0)===40&&!t.match(bP)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ta("n",n,r):"("+ta("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return oB(e,t,r);if(t.indexOf("%")!==-1)return sB(e,t,r);if(t.indexOf("E")!==-1)return vP(t,r);if(t.charCodeAt(0)===36)return"$"+ta(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,s,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Cl(c,t.length);if(t.match(/^[#?]+$/))return a=Cl(r,0),a==="0"&&(a=""),a.length>t.length?a:rn(t.substr(0,t.length-a.length))+a;if(i=t.match(xP))return lB(i,c,u);if(t.match(/^#+0+$/))return u+Cl(c,t.length-t.indexOf("0"));if(i=t.match(yP))return a=tE(r,i[1].length).replace(/^([^\.]+)$/,"$1."+rn(i[1])).replace(/\.$/,"."+rn(i[1])).replace(/\.(\d*)$/,function(v,g){return"."+g+zt("0",rn(i[1]).length-g.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+tE(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+As(Cl(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ta(e,t,-r):As(""+(Math.floor(r)+uB(r,i[1].length)))+"."+Ia(rE(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return ta(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=hc(ta(e,t.replace(/[\\-]/g,""),r)),s=0,hc(hc(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return s<a.length?a.charAt(s++):v==="0"?"0":""}));if(t.match(wP))return a=ta(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(i[4].length,7),l=Up(c,Math.pow(10,s)-1,!1),a=""+u,d=Ai("n",i[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+i[2]+"/"+i[3],d=Fp(l[2],s),d.length<i[4].length&&(d=rn(i[4].substr(i[4].length-d.length))+d),a+=d,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(i[1].length,i[4].length),7),l=Up(c,Math.pow(10,s)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?x_(l[1],s)+i[2]+"/"+i[3]+Fp(l[2],s):zt(" ",2*s+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=Cl(r,0),t.length<=a.length?a:rn(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),s=a.indexOf(".");var f=t.indexOf(".")-s,h=t.length-a.length-f;return rn(t.substr(0,f)+a+t.substr(t.length-h))}if(i=t.match(/^00,000\.([#0]*0)$/))return s=rE(r,i[1].length),r<0?"-"+ta(e,t,-r):As(dB(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Ia(0,3-v.length):"")+v})+"."+Ia(s,i[1].length);switch(t){case"###,##0.00":return ta(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=As(Cl(c,0));return p!=="0"?u+p:"";case"###,###.00":return ta(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return ta(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function fB(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Ai(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function hB(e,t,r){var n=t.replace(gP,""),a=t.length-n.length;return Ai(e,n,r*Math.pow(10,2*a))+zt("%",a)}function _P(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+_P(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),!r.match(/[Ee]/)){var s=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+i):r+="E+"+(s-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+i)%a)+"."+d.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Ha(e,t,r){if(e.charCodeAt(0)===40&&!t.match(bP)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Ha("n",n,r):"("+Ha("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return fB(e,t,r);if(t.indexOf("%")!==-1)return hB(e,t,r);if(t.indexOf("E")!==-1)return _P(t,r);if(t.charCodeAt(0)===36)return"$"+Ha(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,s,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Ia(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:rn(t.substr(0,t.length-a.length))+a;if(i=t.match(xP))return cB(i,c,u);if(t.match(/^#+0+$/))return u+Ia(c,t.length-t.indexOf("0"));if(i=t.match(yP))return a=(""+r).replace(/^([^\.]+)$/,"$1."+rn(i[1])).replace(/\.$/,"."+rn(i[1])),a=a.replace(/\.(\d*)$/,function(v,g){return"."+g+zt("0",rn(i[1]).length-g.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+As(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Ha(e,t,-r):As(""+r)+"."+zt("0",i[1].length);if(i=t.match(/^#,#*,#0/))return Ha(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=hc(Ha(e,t.replace(/[\\-]/g,""),r)),s=0,hc(hc(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return s<a.length?a.charAt(s++):v==="0"?"0":""}));if(t.match(wP))return a=Ha(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(i[4].length,7),l=Up(c,Math.pow(10,s)-1,!1),a=""+u,d=Ai("n",i[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+i[2]+"/"+i[3],d=Fp(l[2],s),d.length<i[4].length&&(d=rn(i[4].substr(i[4].length-d.length))+d),a+=d,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(i[1].length,i[4].length),7),l=Up(c,Math.pow(10,s)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?x_(l[1],s)+i[2]+"/"+i[3]+Fp(l[2],s):zt(" ",2*s+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:rn(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),s=a.indexOf(".");var f=t.indexOf(".")-s,h=t.length-a.length-f;return rn(t.substr(0,f)+a+t.substr(t.length-h))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Ha(e,t,-r):As(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Ia(0,3-v.length):"")+v})+"."+Ia(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=As(""+c);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return Ha(e,t.slice(0,t.lastIndexOf(".")),r)+rn(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Ai(e,t,r){return(r|0)===r?Ha(e,t,r):ta(e,t,r)}function pB(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var SP=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function jP(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":Bp(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(SP))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function mB(e,t,r,n){for(var a=[],i="",s=0,l="",c="t",u,d,f,h="H";s<e.length;)switch(l=e.charAt(s)){case"G":if(!Bp(e,s))throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"G",v:"General"},s+=7;break;case'"':for(i="";(f=e.charCodeAt(++s))!==34&&s<e.length;)i+=String.fromCharCode(f);a[a.length]={t:"t",v:i},++s;break;case"\\":var p=e.charAt(++s),v=p==="("||p===")"?p:"t";a[a.length]={t:v,v:p},++s;break;case"_":a[a.length]={t:"t",v:" "},s+=2;break;case"@":a[a.length]={t:"T",v:t},++s;break;case"B":case"b":if(e.charAt(s+1)==="1"||e.charAt(s+1)==="2"){if(u==null&&(u=g0(t,r,e.charAt(s+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(s,2)},c=l,s+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=g0(t,r),u==null))return"";for(i=l;++s<e.length&&e.charAt(s).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=h),a[a.length]={t:l,v:i},c=l;break;case"A":case"a":case"":var g={t:l,v:l};if(u==null&&(u=g0(t,r)),e.substr(s,3).toUpperCase()==="A/P"?(u!=null&&(g.v=u.H>=12?"P":"A"),g.t="T",h="h",s+=3):e.substr(s,5).toUpperCase()==="AM/PM"?(u!=null&&(g.v=u.H>=12?"PM":"AM"),g.t="T",s+=5,h="h"):e.substr(s,5).toUpperCase()==="/"?(u!=null&&(g.v=u.H>=12?"":""),g.t="T",s+=5,h="h"):(g.t="t",++s),u==null&&g.t==="T")return"";a[a.length]=g,c=l;break;case"[":for(i=l;e.charAt(s++)!=="]"&&s<e.length;)i+=e.charAt(s);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(SP)){if(u==null&&(u=g0(t,r),u==null))return"";a[a.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",jP(e)||(a[a.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=l;++s<e.length&&(l=e.charAt(s))==="0";)i+=l;a[a.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++s<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(s))>-1;)i+=l;a[a.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++s)===l;)i+=l;a[a.length]={t:l,v:i},c=l;break;case"*":++s,(e.charAt(s)==" "||e.charAt(s)=="*")&&++s;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;s<e.length&&"0123456789".indexOf(e.charAt(++s))>-1;)i+=e.charAt(s);a[a.length]={t:"D",v:i};break;case" ":a[a.length]={t:l,v:l},++s;break;case"$":a[a.length]={t:"t",v:"$"},++s;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"t",v:l},++s;break}var x=0,b=0,m;for(s=a.length-1,c="t";s>=0;--s)switch(a[s].t){case"h":case"H":a[s].t=h,c="h",x<1&&(x=1);break;case"s":(m=a[s].v.match(/\.0+$/))&&(b=Math.max(b,m[0].length-1)),x<3&&(x=3);case"d":case"y":case"M":case"e":c=a[s].t;break;case"m":c==="s"&&(a[s].t="M",x<2&&(x=2));break;case"X":break;case"Z":x<1&&a[s].v.match(/[Hh]/)&&(x=1),x<2&&a[s].v.match(/[Mm]/)&&(x=2),x<3&&a[s].v.match(/[Ss]/)&&(x=3)}switch(x){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var y="",_;for(s=0;s<a.length;++s)switch(a[s].t){case"t":case"T":case" ":case"D":break;case"X":a[s].v="",a[s].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[s].v=iB(a[s].t.charCodeAt(0),a[s].v,u,b),a[s].t="t";break;case"n":case"?":for(_=s+1;a[_]!=null&&((l=a[_].t)==="?"||l==="D"||(l===" "||l==="t")&&a[_+1]!=null&&(a[_+1].t==="?"||a[_+1].t==="t"&&a[_+1].v==="/")||a[s].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[_].v==="/"||a[_].v===" "&&a[_+1]!=null&&a[_+1].t=="?"));)a[s].v+=a[_].v,a[_]={v:"",t:";"},++_;y+=a[s].v,s=_-1;break;case"G":a[s].t="t",a[s].v=y1(t,r);break}var w="",S,j;if(y.length>0){y.charCodeAt(0)==40?(S=t<0&&y.charCodeAt(0)===45?-t:t,j=Ai("n",y,S)):(S=t<0&&n>1?-t:t,j=Ai("n",y,S),S<0&&a[0]&&a[0].t=="t"&&(j=j.substr(1),a[0].v="-"+a[0].v)),_=j.length-1;var E=a.length;for(s=0;s<a.length;++s)if(a[s]!=null&&a[s].t!="t"&&a[s].v.indexOf(".")>-1){E=s;break}var N=a.length;if(E===a.length&&j.indexOf("E")===-1){for(s=a.length-1;s>=0;--s)a[s]==null||"n?".indexOf(a[s].t)===-1||(_>=a[s].v.length-1?(_-=a[s].v.length,a[s].v=j.substr(_+1,a[s].v.length)):_<0?a[s].v="":(a[s].v=j.substr(0,_+1),_=-1),a[s].t="t",N=s);_>=0&&N<a.length&&(a[N].v=j.substr(0,_+1)+a[N].v)}else if(E!==a.length&&j.indexOf("E")===-1){for(_=j.indexOf(".")-1,s=E;s>=0;--s)if(!(a[s]==null||"n?".indexOf(a[s].t)===-1)){for(d=a[s].v.indexOf(".")>-1&&s===E?a[s].v.indexOf(".")-1:a[s].v.length-1,w=a[s].v.substr(d+1);d>=0;--d)_>=0&&(a[s].v.charAt(d)==="0"||a[s].v.charAt(d)==="#")&&(w=j.charAt(_--)+w);a[s].v=w,a[s].t="t",N=s}for(_>=0&&N<a.length&&(a[N].v=j.substr(0,_+1)+a[N].v),_=j.indexOf(".")+1,s=E;s<a.length;++s)if(!(a[s]==null||"n?(".indexOf(a[s].t)===-1&&s!==E)){for(d=a[s].v.indexOf(".")>-1&&s===E?a[s].v.indexOf(".")+1:0,w=a[s].v.substr(0,d);d<a[s].v.length;++d)_<j.length&&(w+=j.charAt(_++));a[s].v=w,a[s].t="t",N=s}}}for(s=0;s<a.length;++s)a[s]!=null&&"n?".indexOf(a[s].t)>-1&&(S=n>1&&t<0&&s>0&&a[s-1].v==="-"?-t:t,a[s].v=Ai(a[s].t,a[s].v,S),a[s].t="t");var A="";for(s=0;s!==a.length;++s)a[s]!=null&&(A+=a[s].v);return A}var nE=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function aE(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function gB(e,t){var r=pB(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var s=r[0].match(nE),l=r[1].match(nE);return aE(t,s)?[n,r[0]]:aE(t,l)?[n,r[1]]:[n,r[s!=null&&l!=null?2:1]]}return[n,i]}function Hs(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Wt)[e],n==null&&(n=r.table&&r.table[eE[e]]||Wt[eE[e]]),n==null&&(n=Q7[e]||"General");break}if(Bp(n,0))return y1(t,r);t instanceof Date&&(t=mP(t,r.date1904));var a=gB(n,t);if(Bp(a[1]))return y1(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return mB(a[1],t,r,a[0])}function EP(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Wt[r]==null){t<0&&(t=r);continue}if(Wt[r]==e){t=r;break}}t<0&&(t=391)}return Wt[t]=e,t}function Og(e){for(var t=0;t!=392;++t)e[t]!==void 0&&EP(e[t],t)}function Cg(){Wt=Y7()}var NP=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function vB(e){var t=typeof e=="number"?Wt[e]:e;return t=t.replace(NP,"(\\d+)"),new RegExp("^"+t+"$")}function xB(e,t,r){var n=-1,a=-1,i=-1,s=-1,l=-1,c=-1;(t.match(NP)||[]).forEach(function(f,h){var p=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=p;break;case"d":i=p;break;case"h":s=p;break;case"s":c=p;break;case"m":s>=0?l=p:a=p;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return s==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&i==-1?d:u+"T"+d}var yB=function(){var e={};e.version="1.2.0";function t(){for(var j=0,E=new Array(256),N=0;N!=256;++N)j=N,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,E[N]=j;return typeof Int32Array<"u"?new Int32Array(E):E}var r=t();function n(j){var E=0,N=0,A=0,C=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(A=0;A!=256;++A)C[A]=j[A];for(A=0;A!=256;++A)for(N=j[A],E=256+A;E<4096;E+=256)N=C[E]=N>>>8^j[N&255];var D=[];for(A=1;A!=16;++A)D[A-1]=typeof Int32Array<"u"?C.subarray(A*256,A*256+256):C.slice(A*256,A*256+256);return D}var a=n(r),i=a[0],s=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=a[6],h=a[7],p=a[8],v=a[9],g=a[10],x=a[11],b=a[12],m=a[13],y=a[14];function _(j,E){for(var N=E^-1,A=0,C=j.length;A<C;)N=N>>>8^r[(N^j.charCodeAt(A++))&255];return~N}function w(j,E){for(var N=E^-1,A=j.length-15,C=0;C<A;)N=y[j[C++]^N&255]^m[j[C++]^N>>8&255]^b[j[C++]^N>>16&255]^x[j[C++]^N>>>24]^g[j[C++]]^v[j[C++]]^p[j[C++]]^h[j[C++]]^f[j[C++]]^d[j[C++]]^u[j[C++]]^c[j[C++]]^l[j[C++]]^s[j[C++]]^i[j[C++]]^r[j[C++]];for(A+=15;C<A;)N=N>>>8^r[(N^j[C++])&255];return~N}function S(j,E){for(var N=E^-1,A=0,C=j.length,D=0,P=0;A<C;)D=j.charCodeAt(A++),D<128?N=N>>>8^r[(N^D)&255]:D<2048?(N=N>>>8^r[(N^(192|D>>6&31))&255],N=N>>>8^r[(N^(128|D&63))&255]):D>=55296&&D<57344?(D=(D&1023)+64,P=j.charCodeAt(A++)&1023,N=N>>>8^r[(N^(240|D>>8&7))&255],N=N>>>8^r[(N^(128|D>>2&63))&255],N=N>>>8^r[(N^(128|P>>6&15|(D&3)<<4))&255],N=N>>>8^r[(N^(128|P&63))&255]):(N=N>>>8^r[(N^(224|D>>12&15))&255],N=N>>>8^r[(N^(128|D>>6&63))&255],N=N>>>8^r[(N^(128|D&63))&255]);return~N}return e.table=r,e.bstr=_,e.buf=w,e.str=S,e}(),pt=function(){var t={};t.version="1.2.1";function r(O,M){for(var k=O.split("/"),I=M.split("/"),L=0,F=0,Q=Math.min(k.length,I.length);L<Q;++L){if(F=k[L].length-I[L].length)return F;if(k[L]!=I[L])return k[L]<I[L]?-1:1}return k.length-I.length}function n(O){if(O.charAt(O.length-1)=="/")return O.slice(0,-1).indexOf("/")===-1?O:n(O.slice(0,-1));var M=O.lastIndexOf("/");return M===-1?O:O.slice(0,M+1)}function a(O){if(O.charAt(O.length-1)=="/")return a(O.slice(0,-1));var M=O.lastIndexOf("/");return M===-1?O:O.slice(M+1)}function i(O,M){typeof M=="string"&&(M=new Date(M));var k=M.getHours();k=k<<6|M.getMinutes(),k=k<<5|M.getSeconds()>>>1,O.write_shift(2,k);var I=M.getFullYear()-1980;I=I<<4|M.getMonth()+1,I=I<<5|M.getDate(),O.write_shift(2,I)}function s(O){var M=O.read_shift(2)&65535,k=O.read_shift(2)&65535,I=new Date,L=k&31;k>>>=5;var F=k&15;k>>>=4,I.setMilliseconds(0),I.setFullYear(k+1980),I.setMonth(F-1),I.setDate(L);var Q=M&31;M>>>=5;var ce=M&63;return M>>>=6,I.setHours(M),I.setMinutes(ce),I.setSeconds(Q<<1),I}function l(O){Dn(O,0);for(var M={},k=0;O.l<=O.length-4;){var I=O.read_shift(2),L=O.read_shift(2),F=O.l+L,Q={};switch(I){case 21589:k=O.read_shift(1),k&1&&(Q.mtime=O.read_shift(4)),L>5&&(k&2&&(Q.atime=O.read_shift(4)),k&4&&(Q.ctime=O.read_shift(4))),Q.mtime&&(Q.mt=new Date(Q.mtime*1e3));break}O.l=F,M[I]=Q}return M}var c;function u(){return c||(c={})}function d(O,M){if(O[0]==80&&O[1]==75)return mS(O,M);if((O[0]|32)==109&&(O[1]|32)==105)return P8(O,M);if(O.length<512)throw new Error("CFB file size "+O.length+" < 512");var k=3,I=512,L=0,F=0,Q=0,ce=0,Y=0,J=[],ee=O.slice(0,512);Dn(ee,0);var he=f(ee);switch(k=he[0],k){case 3:I=512;break;case 4:I=4096;break;case 0:if(he[1]==0)return mS(O,M);default:throw new Error("Major Version: Expected 3 or 4 saw "+k)}I!==512&&(ee=O.slice(0,I),Dn(ee,28));var _e=O.slice(0,I);h(ee,k);var Ne=ee.read_shift(4,"i");if(k===3&&Ne!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ne);ee.l+=4,Q=ee.read_shift(4,"i"),ee.l+=4,ee.chk("00100000","Mini Stream Cutoff Size: "),ce=ee.read_shift(4,"i"),L=ee.read_shift(4,"i"),Y=ee.read_shift(4,"i"),F=ee.read_shift(4,"i");for(var ge=-1,Ee=0;Ee<109&&(ge=ee.read_shift(4,"i"),!(ge<0));++Ee)J[Ee]=ge;var Le=p(O,I);x(Y,F,Le,I,J);var Pt=m(Le,Q,J,I);Pt[Q].name="!Directory",L>0&&ce!==P&&(Pt[ce].name="!MiniFAT"),Pt[J[0]].name="!FAT",Pt.fat_addrs=J,Pt.ssz=I;var Rt={},Fr=[],Gu=[],Xu=[];y(Q,Pt,Le,Fr,L,Rt,Gu,ce),v(Gu,Xu,Fr),Fr.shift();var Yu={FileIndex:Gu,FullPaths:Xu};return M&&M.raw&&(Yu.raw={header:_e,sectors:Le}),Yu}function f(O){if(O[O.l]==80&&O[O.l+1]==75)return[0,0];O.chk(H,"Header Signature: "),O.l+=16;var M=O.read_shift(2,"u");return[O.read_shift(2,"u"),M]}function h(O,M){var k=9;switch(O.l+=2,k=O.read_shift(2)){case 9:if(M!=3)throw new Error("Sector Shift: Expected 9 saw "+k);break;case 12:if(M!=4)throw new Error("Sector Shift: Expected 12 saw "+k);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+k)}O.chk("0600","Mini Sector Shift: "),O.chk("000000000000","Reserved: ")}function p(O,M){for(var k=Math.ceil(O.length/M)-1,I=[],L=1;L<k;++L)I[L-1]=O.slice(L*M,(L+1)*M);return I[k-1]=O.slice(k*M),I}function v(O,M,k){for(var I=0,L=0,F=0,Q=0,ce=0,Y=k.length,J=[],ee=[];I<Y;++I)J[I]=ee[I]=I,M[I]=k[I];for(;ce<ee.length;++ce)I=ee[ce],L=O[I].L,F=O[I].R,Q=O[I].C,J[I]===I&&(L!==-1&&J[L]!==L&&(J[I]=J[L]),F!==-1&&J[F]!==F&&(J[I]=J[F])),Q!==-1&&(J[Q]=I),L!==-1&&I!=J[I]&&(J[L]=J[I],ee.lastIndexOf(L)<ce&&ee.push(L)),F!==-1&&I!=J[I]&&(J[F]=J[I],ee.lastIndexOf(F)<ce&&ee.push(F));for(I=1;I<Y;++I)J[I]===I&&(F!==-1&&J[F]!==F?J[I]=J[F]:L!==-1&&J[L]!==L&&(J[I]=J[L]));for(I=1;I<Y;++I)if(O[I].type!==0){if(ce=I,ce!=J[ce])do ce=J[ce],M[I]=M[ce]+"/"+M[I];while(ce!==0&&J[ce]!==-1&&ce!=J[ce]);J[I]=-1}for(M[0]+="/",I=1;I<Y;++I)O[I].type!==2&&(M[I]+="/")}function g(O,M,k){for(var I=O.start,L=O.size,F=[],Q=I;k&&L>0&&Q>=0;)F.push(M.slice(Q*D,Q*D+D)),L-=D,Q=jo(k,Q*4);return F.length===0?se(0):Pr(F).slice(0,O.size)}function x(O,M,k,I,L){var F=P;if(O===P){if(M!==0)throw new Error("DIFAT chain shorter than expected")}else if(O!==-1){var Q=k[O],ce=(I>>>2)-1;if(!Q)return;for(var Y=0;Y<ce&&(F=jo(Q,Y*4))!==P;++Y)L.push(F);x(jo(Q,I-4),M-1,k,I,L)}}function b(O,M,k,I,L){var F=[],Q=[];L||(L=[]);var ce=I-1,Y=0,J=0;for(Y=M;Y>=0;){L[Y]=!0,F[F.length]=Y,Q.push(O[Y]);var ee=k[Math.floor(Y*4/I)];if(J=Y*4&ce,I<4+J)throw new Error("FAT boundary crossed: "+Y+" 4 "+I);if(!O[ee])break;Y=jo(O[ee],J)}return{nodes:F,data:fE([Q])}}function m(O,M,k,I){var L=O.length,F=[],Q=[],ce=[],Y=[],J=I-1,ee=0,he=0,_e=0,Ne=0;for(ee=0;ee<L;++ee)if(ce=[],_e=ee+M,_e>=L&&(_e-=L),!Q[_e]){Y=[];var ge=[];for(he=_e;he>=0;){ge[he]=!0,Q[he]=!0,ce[ce.length]=he,Y.push(O[he]);var Ee=k[Math.floor(he*4/I)];if(Ne=he*4&J,I<4+Ne)throw new Error("FAT boundary crossed: "+he+" 4 "+I);if(!O[Ee]||(he=jo(O[Ee],Ne),ge[he]))break}F[_e]={nodes:ce,data:fE([Y])}}return F}function y(O,M,k,I,L,F,Q,ce){for(var Y=0,J=I.length?2:0,ee=M[O].data,he=0,_e=0,Ne;he<ee.length;he+=128){var ge=ee.slice(he,he+128);Dn(ge,64),_e=ge.read_shift(2),Ne=j_(ge,0,_e-J),I.push(Ne);var Ee={name:Ne,type:ge.read_shift(1),color:ge.read_shift(1),L:ge.read_shift(4,"i"),R:ge.read_shift(4,"i"),C:ge.read_shift(4,"i"),clsid:ge.read_shift(16),state:ge.read_shift(4,"i"),start:0,size:0},Le=ge.read_shift(2)+ge.read_shift(2)+ge.read_shift(2)+ge.read_shift(2);Le!==0&&(Ee.ct=_(ge,ge.l-8));var Pt=ge.read_shift(2)+ge.read_shift(2)+ge.read_shift(2)+ge.read_shift(2);Pt!==0&&(Ee.mt=_(ge,ge.l-8)),Ee.start=ge.read_shift(4,"i"),Ee.size=ge.read_shift(4,"i"),Ee.size<0&&Ee.start<0&&(Ee.size=Ee.type=0,Ee.start=P,Ee.name=""),Ee.type===5?(Y=Ee.start,L>0&&Y!==P&&(M[Y].name="!StreamData")):Ee.size>=4096?(Ee.storage="fat",M[Ee.start]===void 0&&(M[Ee.start]=b(k,Ee.start,M.fat_addrs,M.ssz)),M[Ee.start].name=Ee.name,Ee.content=M[Ee.start].data.slice(0,Ee.size)):(Ee.storage="minifat",Ee.size<0?Ee.size=0:Y!==P&&Ee.start!==P&&M[Y]&&(Ee.content=g(Ee,M[Y].data,(M[ce]||{}).data))),Ee.content&&Dn(Ee.content,0),F[Ne]=Ee,Q.push(Ee)}}function _(O,M){return new Date((Ln(O,M+4)/1e7*Math.pow(2,32)+Ln(O,M)/1e7-11644473600)*1e3)}function w(O,M){return u(),d(c.readFileSync(O),M)}function S(O,M){var k=M&&M.type;switch(k||et&&Buffer.isBuffer(O)&&(k="buffer"),k||"base64"){case"file":return w(O,M);case"base64":return d(Pa(Bi(O)),M);case"binary":return d(Pa(O),M)}return d(O,M)}function j(O,M){var k=M||{},I=k.root||"Root Entry";if(O.FullPaths||(O.FullPaths=[]),O.FileIndex||(O.FileIndex=[]),O.FullPaths.length!==O.FileIndex.length)throw new Error("inconsistent CFB structure");O.FullPaths.length===0&&(O.FullPaths[0]=I+"/",O.FileIndex[0]={name:I,type:5}),k.CLSID&&(O.FileIndex[0].clsid=k.CLSID),E(O)}function E(O){var M="Sh33tJ5";if(!pt.find(O,"/"+M)){var k=se(4);k[0]=55,k[1]=k[3]=50,k[2]=54,O.FileIndex.push({name:M,type:2,content:k,size:4,L:69,R:69,C:69}),O.FullPaths.push(O.FullPaths[0]+M),N(O)}}function N(O,M){j(O);for(var k=!1,I=!1,L=O.FullPaths.length-1;L>=0;--L){var F=O.FileIndex[L];switch(F.type){case 0:I?k=!0:(O.FileIndex.pop(),O.FullPaths.pop());break;case 1:case 2:case 5:I=!0,isNaN(F.R*F.L*F.C)&&(k=!0),F.R>-1&&F.L>-1&&F.R==F.L&&(k=!0);break;default:k=!0;break}}if(!(!k&&!M)){var Q=new Date(1987,1,19),ce=0,Y=Object.create?Object.create(null):{},J=[];for(L=0;L<O.FullPaths.length;++L)Y[O.FullPaths[L]]=!0,O.FileIndex[L].type!==0&&J.push([O.FullPaths[L],O.FileIndex[L]]);for(L=0;L<J.length;++L){var ee=n(J[L][0]);I=Y[ee],I||(J.push([ee,{name:a(ee).replace("/",""),type:1,clsid:ae,ct:Q,mt:Q,content:null}]),Y[ee]=!0)}for(J.sort(function(Ne,ge){return r(Ne[0],ge[0])}),O.FullPaths=[],O.FileIndex=[],L=0;L<J.length;++L)O.FullPaths[L]=J[L][0],O.FileIndex[L]=J[L][1];for(L=0;L<J.length;++L){var he=O.FileIndex[L],_e=O.FullPaths[L];if(he.name=a(_e).replace("/",""),he.L=he.R=he.C=-(he.color=1),he.size=he.content?he.content.length:0,he.start=0,he.clsid=he.clsid||ae,L===0)he.C=J.length>1?1:-1,he.size=0,he.type=5;else if(_e.slice(-1)=="/"){for(ce=L+1;ce<J.length&&n(O.FullPaths[ce])!=_e;++ce);for(he.C=ce>=J.length?-1:ce,ce=L+1;ce<J.length&&n(O.FullPaths[ce])!=n(_e);++ce);he.R=ce>=J.length?-1:ce,he.type=1}else n(O.FullPaths[L+1]||"")==n(_e)&&(he.R=L+1),he.type=2}}}function A(O,M){var k=M||{};if(k.fileType=="mad")return R8(O,k);switch(N(O),k.fileType){case"zip":return N8(O,k)}var I=function(Ne){for(var ge=0,Ee=0,Le=0;Le<Ne.FileIndex.length;++Le){var Pt=Ne.FileIndex[Le];if(Pt.content){var Rt=Pt.content.length;Rt>0&&(Rt<4096?ge+=Rt+63>>6:Ee+=Rt+511>>9)}}for(var Fr=Ne.FullPaths.length+3>>2,Gu=ge+7>>3,Xu=ge+127>>7,Yu=Gu+Ee+Fr+Xu,co=Yu+127>>7,Fv=co<=109?0:Math.ceil((co-109)/127);Yu+co+Fv+127>>7>co;)Fv=++co<=109?0:Math.ceil((co-109)/127);var fi=[1,Fv,co,Xu,Fr,Ee,ge,0];return Ne.FileIndex[0].size=ge<<6,fi[7]=(Ne.FileIndex[0].start=fi[0]+fi[1]+fi[2]+fi[3]+fi[4]+fi[5])+(fi[6]+7>>3),fi}(O),L=se(I[7]<<9),F=0,Q=0;{for(F=0;F<8;++F)L.write_shift(1,V[F]);for(F=0;F<8;++F)L.write_shift(2,0);for(L.write_shift(2,62),L.write_shift(2,3),L.write_shift(2,65534),L.write_shift(2,9),L.write_shift(2,6),F=0;F<3;++F)L.write_shift(2,0);for(L.write_shift(4,0),L.write_shift(4,I[2]),L.write_shift(4,I[0]+I[1]+I[2]+I[3]-1),L.write_shift(4,0),L.write_shift(4,4096),L.write_shift(4,I[3]?I[0]+I[1]+I[2]-1:P),L.write_shift(4,I[3]),L.write_shift(-4,I[1]?I[0]-1:P),L.write_shift(4,I[1]),F=0;F<109;++F)L.write_shift(-4,F<I[2]?I[1]+F:-1)}if(I[1])for(Q=0;Q<I[1];++Q){for(;F<236+Q*127;++F)L.write_shift(-4,F<I[2]?I[1]+F:-1);L.write_shift(-4,Q===I[1]-1?P:Q+1)}var ce=function(Ne){for(Q+=Ne;F<Q-1;++F)L.write_shift(-4,F+1);Ne&&(++F,L.write_shift(-4,P))};for(Q=F=0,Q+=I[1];F<Q;++F)L.write_shift(-4,oe.DIFSECT);for(Q+=I[2];F<Q;++F)L.write_shift(-4,oe.FATSECT);ce(I[3]),ce(I[4]);for(var Y=0,J=0,ee=O.FileIndex[0];Y<O.FileIndex.length;++Y)ee=O.FileIndex[Y],ee.content&&(J=ee.content.length,!(J<4096)&&(ee.start=Q,ce(J+511>>9)));for(ce(I[6]+7>>3);L.l&511;)L.write_shift(-4,oe.ENDOFCHAIN);for(Q=F=0,Y=0;Y<O.FileIndex.length;++Y)ee=O.FileIndex[Y],ee.content&&(J=ee.content.length,!(!J||J>=4096)&&(ee.start=Q,ce(J+63>>6)));for(;L.l&511;)L.write_shift(-4,oe.ENDOFCHAIN);for(F=0;F<I[4]<<2;++F){var he=O.FullPaths[F];if(!he||he.length===0){for(Y=0;Y<17;++Y)L.write_shift(4,0);for(Y=0;Y<3;++Y)L.write_shift(4,-1);for(Y=0;Y<12;++Y)L.write_shift(4,0);continue}ee=O.FileIndex[F],F===0&&(ee.start=ee.size?ee.start-1:P);var _e=F===0&&k.root||ee.name;if(J=2*(_e.length+1),L.write_shift(64,_e,"utf16le"),L.write_shift(2,J),L.write_shift(1,ee.type),L.write_shift(1,ee.color),L.write_shift(-4,ee.L),L.write_shift(-4,ee.R),L.write_shift(-4,ee.C),ee.clsid)L.write_shift(16,ee.clsid,"hex");else for(Y=0;Y<4;++Y)L.write_shift(4,0);L.write_shift(4,ee.state||0),L.write_shift(4,0),L.write_shift(4,0),L.write_shift(4,0),L.write_shift(4,0),L.write_shift(4,ee.start),L.write_shift(4,ee.size),L.write_shift(4,0)}for(F=1;F<O.FileIndex.length;++F)if(ee=O.FileIndex[F],ee.size>=4096)if(L.l=ee.start+1<<9,et&&Buffer.isBuffer(ee.content))ee.content.copy(L,L.l,0,ee.size),L.l+=ee.size+511&-512;else{for(Y=0;Y<ee.size;++Y)L.write_shift(1,ee.content[Y]);for(;Y&511;++Y)L.write_shift(1,0)}for(F=1;F<O.FileIndex.length;++F)if(ee=O.FileIndex[F],ee.size>0&&ee.size<4096)if(et&&Buffer.isBuffer(ee.content))ee.content.copy(L,L.l,0,ee.size),L.l+=ee.size+63&-64;else{for(Y=0;Y<ee.size;++Y)L.write_shift(1,ee.content[Y]);for(;Y&63;++Y)L.write_shift(1,0)}if(et)L.l=L.length;else for(;L.l<L.length;)L.write_shift(1,0);return L}function C(O,M){var k=O.FullPaths.map(function(Y){return Y.toUpperCase()}),I=k.map(function(Y){var J=Y.split("/");return J[J.length-(Y.slice(-1)=="/"?2:1)]}),L=!1;M.charCodeAt(0)===47?(L=!0,M=k[0].slice(0,-1)+M):L=M.indexOf("/")!==-1;var F=M.toUpperCase(),Q=L===!0?k.indexOf(F):I.indexOf(F);if(Q!==-1)return O.FileIndex[Q];var ce=!F.match(m0);for(F=F.replace(Ld,""),ce&&(F=F.replace(m0,"!")),Q=0;Q<k.length;++Q)if((ce?k[Q].replace(m0,"!"):k[Q]).replace(Ld,"")==F||(ce?I[Q].replace(m0,"!"):I[Q]).replace(Ld,"")==F)return O.FileIndex[Q];return null}var D=64,P=-2,H="d0cf11e0a1b11ae1",V=[208,207,17,224,161,177,26,225],ae="00000000000000000000000000000000",oe={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:P,FREESECT:-1,HEADER_SIGNATURE:H,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ae,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function X(O,M,k){u();var I=A(O,k);c.writeFileSync(M,I)}function re(O){for(var M=new Array(O.length),k=0;k<O.length;++k)M[k]=String.fromCharCode(O[k]);return M.join("")}function ue(O,M){var k=A(O,M);switch(M&&M.type||"buffer"){case"file":return u(),c.writeFileSync(M.filename,k),k;case"binary":return typeof k=="string"?k:re(k);case"base64":return vf(typeof k=="string"?k:re(k));case"buffer":if(et)return Buffer.isBuffer(k)?k:Ji(k);case"array":return typeof k=="string"?Pa(k):k}return k}var me;function R(O){try{var M=O.InflateRaw,k=new M;if(k._processChunk(new Uint8Array([3,0]),k._finishFlushFlag),k.bytesRead)me=O;else throw new Error("zlib does not expose bytesRead")}catch(I){console.error("cannot use native zlib: "+(I.message||I))}}function W(O,M){if(!me)return hS(O,M);var k=me.InflateRaw,I=new k,L=I._processChunk(O.slice(O.l),I._finishFlushFlag);return O.l+=I.bytesRead,L}function U(O){return me?me.deflateRawSync(O):oS(O)}var q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Se=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Z(O){var M=(O<<1|O<<11)&139536|(O<<5|O<<15)&558144;return(M>>16|M>>8|M)&255}for(var K=typeof Uint8Array<"u",te=K?new Uint8Array(256):[],be=0;be<256;++be)te[be]=Z(be);function ne(O,M){var k=te[O&255];return M<=8?k>>>8-M:(k=k<<8|te[O>>8&255],M<=16?k>>>16-M:(k=k<<8|te[O>>16&255],k>>>24-M))}function Fe(O,M){var k=M&7,I=M>>>3;return(O[I]|(k<=6?0:O[I+1]<<8))>>>k&3}function Ce(O,M){var k=M&7,I=M>>>3;return(O[I]|(k<=5?0:O[I+1]<<8))>>>k&7}function st(O,M){var k=M&7,I=M>>>3;return(O[I]|(k<=4?0:O[I+1]<<8))>>>k&15}function Be(O,M){var k=M&7,I=M>>>3;return(O[I]|(k<=3?0:O[I+1]<<8))>>>k&31}function we(O,M){var k=M&7,I=M>>>3;return(O[I]|(k<=1?0:O[I+1]<<8))>>>k&127}function Ht(O,M,k){var I=M&7,L=M>>>3,F=(1<<k)-1,Q=O[L]>>>I;return k<8-I||(Q|=O[L+1]<<8-I,k<16-I)||(Q|=O[L+2]<<16-I,k<24-I)||(Q|=O[L+3]<<24-I),Q&F}function $r(O,M,k){var I=M&7,L=M>>>3;return I<=5?O[L]|=(k&7)<<I:(O[L]|=k<<I&255,O[L+1]=(k&7)>>8-I),M+3}function Qn(O,M,k){var I=M&7,L=M>>>3;return k=(k&1)<<I,O[L]|=k,M+1}function hn(O,M,k){var I=M&7,L=M>>>3;return k<<=I,O[L]|=k&255,k>>>=8,O[L+1]=k,M+8}function qa(O,M,k){var I=M&7,L=M>>>3;return k<<=I,O[L]|=k&255,k>>>=8,O[L+1]=k&255,O[L+2]=k>>>8,M+16}function so(O,M){var k=O.length,I=2*k>M?2*k:M+5,L=0;if(k>=M)return O;if(et){var F=Qj(I);if(O.copy)O.copy(F);else for(;L<O.length;++L)F[L]=O[L];return F}else if(K){var Q=new Uint8Array(I);if(Q.set)Q.set(O);else for(;L<k;++L)Q[L]=O[L];return Q}return O.length=I,O}function Cn(O){for(var M=new Array(O),k=0;k<O;++k)M[k]=0;return M}function oo(O,M,k){var I=1,L=0,F=0,Q=0,ce=0,Y=O.length,J=K?new Uint16Array(32):Cn(32);for(F=0;F<32;++F)J[F]=0;for(F=Y;F<k;++F)O[F]=0;Y=O.length;var ee=K?new Uint16Array(Y):Cn(Y);for(F=0;F<Y;++F)J[L=O[F]]++,I<L&&(I=L),ee[F]=0;for(J[0]=0,F=1;F<=I;++F)J[F+16]=ce=ce+J[F-1]<<1;for(F=0;F<Y;++F)ce=O[F],ce!=0&&(ee[F]=J[ce+16]++);var he=0;for(F=0;F<Y;++F)if(he=O[F],he!=0)for(ce=ne(ee[F],I)>>I-he,Q=(1<<I+4-he)-1;Q>=0;--Q)M[ce|Q<<he]=he&15|F<<4;return I}var Mv=K?new Uint16Array(512):Cn(512),Lv=K?new Uint16Array(32):Cn(32);if(!K){for(var lo=0;lo<512;++lo)Mv[lo]=0;for(lo=0;lo<32;++lo)Lv[lo]=0}(function(){for(var O=[],M=0;M<32;M++)O.push(5);oo(O,Lv,32);var k=[];for(M=0;M<=143;M++)k.push(8);for(;M<=255;M++)k.push(9);for(;M<=279;M++)k.push(7);for(;M<=287;M++)k.push(8);oo(k,Mv,288)})();var _8=function(){for(var M=K?new Uint8Array(32768):[],k=0,I=0;k<Se.length-1;++k)for(;I<Se[k+1];++I)M[I]=k;for(;I<32768;++I)M[I]=29;var L=K?new Uint8Array(259):[];for(k=0,I=0;k<ie.length-1;++k)for(;I<ie[k+1];++I)L[I]=k;function F(ce,Y){for(var J=0;J<ce.length;){var ee=Math.min(65535,ce.length-J),he=J+ee==ce.length;for(Y.write_shift(1,+he),Y.write_shift(2,ee),Y.write_shift(2,~ee&65535);ee-- >0;)Y[Y.l++]=ce[J++]}return Y.l}function Q(ce,Y){for(var J=0,ee=0,he=K?new Uint16Array(32768):[];ee<ce.length;){var _e=Math.min(65535,ce.length-ee);if(_e<10){for(J=$r(Y,J,+(ee+_e==ce.length)),J&7&&(J+=8-(J&7)),Y.l=J/8|0,Y.write_shift(2,_e),Y.write_shift(2,~_e&65535);_e-- >0;)Y[Y.l++]=ce[ee++];J=Y.l*8;continue}J=$r(Y,J,+(ee+_e==ce.length)+2);for(var Ne=0;_e-- >0;){var ge=ce[ee];Ne=(Ne<<5^ge)&32767;var Ee=-1,Le=0;if((Ee=he[Ne])&&(Ee|=ee&-32768,Ee>ee&&(Ee-=32768),Ee<ee))for(;ce[Ee+Le]==ce[ee+Le]&&Le<250;)++Le;if(Le>2){ge=L[Le],ge<=22?J=hn(Y,J,te[ge+1]>>1)-1:(hn(Y,J,3),J+=5,hn(Y,J,te[ge-23]>>5),J+=3);var Pt=ge<8?0:ge-4>>2;Pt>0&&(qa(Y,J,Le-ie[ge]),J+=Pt),ge=M[ee-Ee],J=hn(Y,J,te[ge]>>3),J-=3;var Rt=ge<4?0:ge-2>>1;Rt>0&&(qa(Y,J,ee-Ee-Se[ge]),J+=Rt);for(var Fr=0;Fr<Le;++Fr)he[Ne]=ee&32767,Ne=(Ne<<5^ce[ee])&32767,++ee;_e-=Le-1}else ge<=143?ge=ge+48:J=Qn(Y,J,1),J=hn(Y,J,te[ge]),he[Ne]=ee&32767,++ee}J=hn(Y,J,0)-1}return Y.l=(J+7)/8|0,Y.l}return function(Y,J){return Y.length<8?F(Y,J):Q(Y,J)}}();function oS(O){var M=se(50+Math.floor(O.length*1.1)),k=_8(O,M);return M.slice(0,k)}var lS=K?new Uint16Array(32768):Cn(32768),cS=K?new Uint16Array(32768):Cn(32768),uS=K?new Uint16Array(128):Cn(128),dS=1,fS=1;function S8(O,M){var k=Be(O,M)+257;M+=5;var I=Be(O,M)+1;M+=5;var L=st(O,M)+4;M+=4;for(var F=0,Q=K?new Uint8Array(19):Cn(19),ce=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Y=1,J=K?new Uint8Array(8):Cn(8),ee=K?new Uint8Array(8):Cn(8),he=Q.length,_e=0;_e<L;++_e)Q[q[_e]]=F=Ce(O,M),Y<F&&(Y=F),J[F]++,M+=3;var Ne=0;for(J[0]=0,_e=1;_e<=Y;++_e)ee[_e]=Ne=Ne+J[_e-1]<<1;for(_e=0;_e<he;++_e)(Ne=Q[_e])!=0&&(ce[_e]=ee[Ne]++);var ge=0;for(_e=0;_e<he;++_e)if(ge=Q[_e],ge!=0){Ne=te[ce[_e]]>>8-ge;for(var Ee=(1<<7-ge)-1;Ee>=0;--Ee)uS[Ne|Ee<<ge]=ge&7|_e<<3}var Le=[];for(Y=1;Le.length<k+I;)switch(Ne=uS[we(O,M)],M+=Ne&7,Ne>>>=3){case 16:for(F=3+Fe(O,M),M+=2,Ne=Le[Le.length-1];F-- >0;)Le.push(Ne);break;case 17:for(F=3+Ce(O,M),M+=3;F-- >0;)Le.push(0);break;case 18:for(F=11+we(O,M),M+=7;F-- >0;)Le.push(0);break;default:Le.push(Ne),Y<Ne&&(Y=Ne);break}var Pt=Le.slice(0,k),Rt=Le.slice(k);for(_e=k;_e<286;++_e)Pt[_e]=0;for(_e=I;_e<30;++_e)Rt[_e]=0;return dS=oo(Pt,lS,286),fS=oo(Rt,cS,30),M}function j8(O,M){if(O[0]==3&&!(O[1]&3))return[il(M),2];for(var k=0,I=0,L=Qj(M||1<<18),F=0,Q=L.length>>>0,ce=0,Y=0;!(I&1);){if(I=Ce(O,k),k+=3,I>>>1)I>>1==1?(ce=9,Y=5):(k=S8(O,k),ce=dS,Y=fS);else{k&7&&(k+=8-(k&7));var J=O[k>>>3]|O[(k>>>3)+1]<<8;if(k+=32,J>0)for(!M&&Q<F+J&&(L=so(L,F+J),Q=L.length);J-- >0;)L[F++]=O[k>>>3],k+=8;continue}for(;;){!M&&Q<F+32767&&(L=so(L,F+32767),Q=L.length);var ee=Ht(O,k,ce),he=I>>>1==1?Mv[ee]:lS[ee];if(k+=he&15,he>>>=4,!(he>>>8&255))L[F++]=he;else{if(he==256)break;he-=257;var _e=he<8?0:he-4>>2;_e>5&&(_e=0);var Ne=F+ie[he];_e>0&&(Ne+=Ht(O,k,_e),k+=_e),ee=Ht(O,k,Y),he=I>>>1==1?Lv[ee]:cS[ee],k+=he&15,he>>>=4;var ge=he<4?0:he-2>>1,Ee=Se[he];for(ge>0&&(Ee+=Ht(O,k,ge),k+=ge),!M&&Q<Ne&&(L=so(L,Ne+100),Q=L.length);F<Ne;)L[F]=L[F-Ee],++F}}}return M?[L,k+7>>>3]:[L.slice(0,F),k+7>>>3]}function hS(O,M){var k=O.slice(O.l||0),I=j8(k,M);return O.l+=I[1],I[0]}function pS(O,M){if(O)typeof console<"u"&&console.error(M);else throw new Error(M)}function mS(O,M){var k=O;Dn(k,0);var I=[],L=[],F={FileIndex:I,FullPaths:L};j(F,{root:M.root});for(var Q=k.length-4;(k[Q]!=80||k[Q+1]!=75||k[Q+2]!=5||k[Q+3]!=6)&&Q>=0;)--Q;k.l=Q+4,k.l+=4;var ce=k.read_shift(2);k.l+=6;var Y=k.read_shift(4);for(k.l=Y,Q=0;Q<ce;++Q){k.l+=20;var J=k.read_shift(4),ee=k.read_shift(4),he=k.read_shift(2),_e=k.read_shift(2),Ne=k.read_shift(2);k.l+=8;var ge=k.read_shift(4),Ee=l(k.slice(k.l+he,k.l+he+_e));k.l+=he+_e+Ne;var Le=k.l;k.l=ge+4,E8(k,J,ee,F,Ee),k.l=Le}return F}function E8(O,M,k,I,L){O.l+=2;var F=O.read_shift(2),Q=O.read_shift(2),ce=s(O);if(F&8257)throw new Error("Unsupported ZIP encryption");for(var Y=O.read_shift(4),J=O.read_shift(4),ee=O.read_shift(4),he=O.read_shift(2),_e=O.read_shift(2),Ne="",ge=0;ge<he;++ge)Ne+=String.fromCharCode(O[O.l++]);if(_e){var Ee=l(O.slice(O.l,O.l+_e));(Ee[21589]||{}).mt&&(ce=Ee[21589].mt),((L||{})[21589]||{}).mt&&(ce=L[21589].mt)}O.l+=_e;var Le=O.slice(O.l,O.l+J);switch(Q){case 8:Le=W(O,ee);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Q)}var Pt=!1;F&8&&(Y=O.read_shift(4),Y==134695760&&(Y=O.read_shift(4),Pt=!0),J=O.read_shift(4),ee=O.read_shift(4)),J!=M&&pS(Pt,"Bad compressed size: "+M+" != "+J),ee!=k&&pS(Pt,"Bad uncompressed size: "+k+" != "+ee),$v(I,Ne,Le,{unsafe:!0,mt:ce})}function N8(O,M){var k=M||{},I=[],L=[],F=se(1),Q=k.compression?8:0,ce=0,Y=0,J=0,ee=0,he=0,_e=O.FullPaths[0],Ne=_e,ge=O.FileIndex[0],Ee=[],Le=0;for(Y=1;Y<O.FullPaths.length;++Y)if(Ne=O.FullPaths[Y].slice(_e.length),ge=O.FileIndex[Y],!(!ge.size||!ge.content||Ne=="Sh33tJ5")){var Pt=ee,Rt=se(Ne.length);for(J=0;J<Ne.length;++J)Rt.write_shift(1,Ne.charCodeAt(J)&127);Rt=Rt.slice(0,Rt.l),Ee[he]=yB.buf(ge.content,0);var Fr=ge.content;Q==8&&(Fr=U(Fr)),F=se(30),F.write_shift(4,67324752),F.write_shift(2,20),F.write_shift(2,ce),F.write_shift(2,Q),ge.mt?i(F,ge.mt):F.write_shift(4,0),F.write_shift(-4,Ee[he]),F.write_shift(4,Fr.length),F.write_shift(4,ge.content.length),F.write_shift(2,Rt.length),F.write_shift(2,0),ee+=F.length,I.push(F),ee+=Rt.length,I.push(Rt),ee+=Fr.length,I.push(Fr),F=se(46),F.write_shift(4,33639248),F.write_shift(2,0),F.write_shift(2,20),F.write_shift(2,ce),F.write_shift(2,Q),F.write_shift(4,0),F.write_shift(-4,Ee[he]),F.write_shift(4,Fr.length),F.write_shift(4,ge.content.length),F.write_shift(2,Rt.length),F.write_shift(2,0),F.write_shift(2,0),F.write_shift(2,0),F.write_shift(2,0),F.write_shift(4,0),F.write_shift(4,Pt),Le+=F.l,L.push(F),Le+=Rt.length,L.push(Rt),++he}return F=se(22),F.write_shift(4,101010256),F.write_shift(2,0),F.write_shift(2,0),F.write_shift(2,he),F.write_shift(2,he),F.write_shift(4,Le),F.write_shift(4,ee),F.write_shift(2,0),Pr([Pr(I),Pr(L),F])}var Hh={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function T8(O,M){if(O.ctype)return O.ctype;var k=O.name||"",I=k.match(/\.([^\.]+)$/);return I&&Hh[I[1]]||M&&(I=(k=M).match(/[\.\\]([^\.\\])+$/),I&&Hh[I[1]])?Hh[I[1]]:"application/octet-stream"}function A8(O){for(var M=vf(O),k=[],I=0;I<M.length;I+=76)k.push(M.slice(I,I+76));return k.join(`\r
`)+`\r
`}function O8(O){var M=O.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(J){var ee=J.charCodeAt(0).toString(16).toUpperCase();return"="+(ee.length==1?"0"+ee:ee)});M=M.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),M.charAt(0)==`
`&&(M="=0D"+M.slice(1)),M=M.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var k=[],I=M.split(`\r
`),L=0;L<I.length;++L){var F=I[L];if(F.length==0){k.push("");continue}for(var Q=0;Q<F.length;){var ce=76,Y=F.slice(Q,Q+ce);Y.charAt(ce-1)=="="?ce--:Y.charAt(ce-2)=="="?ce-=2:Y.charAt(ce-3)=="="&&(ce-=3),Y=F.slice(Q,Q+ce),Q+=ce,Q<F.length&&(Y+="="),k.push(Y)}}return k.join(`\r
`)}function C8(O){for(var M=[],k=0;k<O.length;++k){for(var I=O[k];k<=O.length&&I.charAt(I.length-1)=="=";)I=I.slice(0,I.length-1)+O[++k];M.push(I)}for(var L=0;L<M.length;++L)M[L]=M[L].replace(/[=][0-9A-Fa-f]{2}/g,function(F){return String.fromCharCode(parseInt(F.slice(1),16))});return Pa(M.join(`\r
`))}function k8(O,M,k){for(var I="",L="",F="",Q,ce=0;ce<10;++ce){var Y=M[ce];if(!Y||Y.match(/^\s*$/))break;var J=Y.match(/^(.*?):\s*([^\s].*)$/);if(J)switch(J[1].toLowerCase()){case"content-location":I=J[2].trim();break;case"content-type":F=J[2].trim();break;case"content-transfer-encoding":L=J[2].trim();break}}switch(++ce,L.toLowerCase()){case"base64":Q=Pa(Bi(M.slice(ce).join("")));break;case"quoted-printable":Q=C8(M.slice(ce));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+L)}var ee=$v(O,I.slice(k.length),Q,{unsafe:!0});F&&(ee.ctype=F)}function P8(O,M){if(re(O.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var k=M&&M.root||"",I=(et&&Buffer.isBuffer(O)?O.toString("binary"):re(O)).split(`\r
`),L=0,F="";for(L=0;L<I.length;++L)if(F=I[L],!!/^Content-Location:/i.test(F)&&(F=F.slice(F.indexOf("file")),k||(k=F.slice(0,F.lastIndexOf("/")+1)),F.slice(0,k.length)!=k))for(;k.length>0&&(k=k.slice(0,k.length-1),k=k.slice(0,k.lastIndexOf("/")+1),F.slice(0,k.length)!=k););var Q=(I[1]||"").match(/boundary="(.*?)"/);if(!Q)throw new Error("MAD cannot find boundary");var ce="--"+(Q[1]||""),Y=[],J=[],ee={FileIndex:Y,FullPaths:J};j(ee);var he,_e=0;for(L=0;L<I.length;++L){var Ne=I[L];Ne!==ce&&Ne!==ce+"--"||(_e++&&k8(ee,I.slice(he,L),k),he=L)}return ee}function R8(O,M){var k=M||{},I=k.boundary||"SheetJS";I="------="+I;for(var L=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+I.slice(2)+'"',"","",""],F=O.FullPaths[0],Q=F,ce=O.FileIndex[0],Y=1;Y<O.FullPaths.length;++Y)if(Q=O.FullPaths[Y].slice(F.length),ce=O.FileIndex[Y],!(!ce.size||!ce.content||Q=="Sh33tJ5")){Q=Q.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Le){return"_x"+Le.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Le){return"_u"+Le.charCodeAt(0).toString(16)+"_"});for(var J=ce.content,ee=et&&Buffer.isBuffer(J)?J.toString("binary"):re(J),he=0,_e=Math.min(1024,ee.length),Ne=0,ge=0;ge<=_e;++ge)(Ne=ee.charCodeAt(ge))>=32&&Ne<128&&++he;var Ee=he>=_e*4/5;L.push(I),L.push("Content-Location: "+(k.root||"file:///C:/SheetJS/")+Q),L.push("Content-Transfer-Encoding: "+(Ee?"quoted-printable":"base64")),L.push("Content-Type: "+T8(ce,Q)),L.push(""),L.push(Ee?O8(ee):A8(ee))}return L.push(I+`--\r
`),L.join(`\r
`)}function I8(O){var M={};return j(M,O),M}function $v(O,M,k,I){var L=I&&I.unsafe;L||j(O);var F=!L&&pt.find(O,M);if(!F){var Q=O.FullPaths[0];M.slice(0,Q.length)==Q?Q=M:(Q.slice(-1)!="/"&&(Q+="/"),Q=(Q+M).replace("//","/")),F={name:a(M),type:2},O.FileIndex.push(F),O.FullPaths.push(Q),L||pt.utils.cfb_gc(O)}return F.content=k,F.size=k?k.length:0,I&&(I.CLSID&&(F.clsid=I.CLSID),I.mt&&(F.mt=I.mt),I.ct&&(F.ct=I.ct)),F}function D8(O,M){j(O);var k=pt.find(O,M);if(k){for(var I=0;I<O.FileIndex.length;++I)if(O.FileIndex[I]==k)return O.FileIndex.splice(I,1),O.FullPaths.splice(I,1),!0}return!1}function M8(O,M,k){j(O);var I=pt.find(O,M);if(I){for(var L=0;L<O.FileIndex.length;++L)if(O.FileIndex[L]==I)return O.FileIndex[L].name=a(k),O.FullPaths[L]=k,!0}return!1}function L8(O){N(O,!0)}return t.find=C,t.read=S,t.parse=d,t.write=ue,t.writeFile=X,t.utils={cfb_new:I8,cfb_add:$v,cfb_del:D8,cfb_mov:M8,cfb_gc:L8,ReadShift:Fd,CheckField:WP,prep_blob:Dn,bconcat:Pr,use_zlib:R,_deflateRaw:oS,_inflateRaw:hS,consts:oe},t}();function bB(e){return typeof e=="string"?Ag(e):Array.isArray(e)?V7(e):e}function yh(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=Ag(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?yf(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([bB(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var s=document.createElement("a");if(s.download!=null)return s.download=e,s.href=i,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=xh(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function Lr(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function iE(e,t){for(var r=[],n=Lr(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function b_(e){for(var t=[],r=Lr(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function kg(e){for(var t=[],r=Lr(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function wB(e){for(var t=[],r=Lr(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var zp=new Date(1899,11,30,0,0,0);function Nn(e,t){var r=e.getTime(),n=zp.getTime()+(e.getTimezoneOffset()-zp.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var TP=new Date,_B=zp.getTime()+(TP.getTimezoneOffset()-zp.getTimezoneOffset())*6e4,sE=TP.getTimezoneOffset();function AP(e){var t=new Date;return t.setTime(e*24*60*60*1e3+_B),t.getTimezoneOffset()!==sE&&t.setTime(t.getTime()+(t.getTimezoneOffset()-sE)*6e4),t}var oE=new Date("2017-02-19T19:06:09.000Z"),OP=isNaN(oE.getFullYear())?new Date("2/19/17"):oE,SB=OP.getFullYear()==2017;function un(e,t){var r=new Date(e);if(SB)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(OP.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Pg(e,t){if(et&&Buffer.isBuffer(e))return e.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function Tn(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Tn(e[r]));return t}function zt(e,t){for(var r="";r.length<t;)r+=e;return r}function Oi(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var jB=["january","february","march","april","may","june","july","august","september","october","november","december"];function xf(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var s=e.toLowerCase();if(s.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(s=s.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),s.length>3&&jB.indexOf(s)==-1)return r}else if(s.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}function ze(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return et?n=Ji(r):n=K7(r),pt.utils.cfb_add(e,t,n)}pt.utils.cfb_add(e,t,r)}else e.file(t,r)}function w_(){return pt.utils.cfb_new()}var ar=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,EB={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},__=b_(EB),S_=/[&<>'"]/g,NB=/[\u0000-\u0008\u000b-\u001f]/g;function ut(e){var t=e+"";return t.replace(S_,function(r){return __[r]}).replace(NB,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function lE(e){return ut(e).replace(/ /g,"_x0020_")}var CP=/[\u0000-\u001f]/g;function TB(e){var t=e+"";return t.replace(S_,function(r){return __[r]}).replace(/\n/g,"<br/>").replace(CP,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function AB(e){var t=e+"";return t.replace(S_,function(r){return __[r]}).replace(CP,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function OB(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function CB(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function vx(e){for(var t="",r=0,n=0,a=0,i=0,s=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){s=(n&31)<<6,s|=a&63,t+=String.fromCharCode(s);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|i&63);continue}s=e.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(i&63)<<6|s&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function cE(e){var t=il(2*e.length),r,n,a=1,i=0,s=0,l;for(n=0;n<e.length;n+=a)a=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,s=55296+(r>>>10&1023),r=56320+(r&1023)),s!==0&&(t[i++]=s&255,t[i++]=s>>>8,s=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function uE(e){return Ji(e,"binary").toString("utf8")}var v0="foo bar baz",$d=et&&(uE(v0)==vx(v0)&&uE||cE(v0)==vx(v0)&&cE)||vx,yf=et?function(e){return Ji(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},kB=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),kP=/(^\s|\s$|\n)/;function Rr(e,t){return"<"+e+(t.match(kP)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function bf(e){return Lr(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function xe(e,t,r){return"<"+e+(r!=null?bf(r):"")+(t!=null?(t.match(kP)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function b1(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function PB(e,t){switch(typeof e){case"string":var r=xe("vt:lpwstr",ut(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return xe((e|0)==e?"vt:i4":"vt:r8",ut(String(e)));case"boolean":return xe("vt:bool",e?"true":"false")}if(e instanceof Date)return xe("vt:filetime",b1(e));throw new Error("Unable to serialize "+e)}var yr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Au=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Mn={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function RB(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,i=5;i>=0;--i)a=a*256+e[t+i];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function IB(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,i=0,s=n?-t:t;isFinite(s)?s==0?a=i=0:(a=Math.floor(Math.log(s)/Math.LN2),i=s*Math.pow(2,52-a),a<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?a=-1022:(i-=Math.pow(2,52),a+=1023)):(a=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(a&15)<<4|i&15,e[r+7]=a>>4|n}var dE=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,i=e[0][n].length;a<i;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},fE=et?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Ji(t)})):dE(e)}:dE,hE=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(Sd(e,a)));return n.join("").replace(Ld,"")},j_=et?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Ld,""):hE(e,t,r)}:hE,pE=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},PP=et?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):pE(e,t,r)}:pE,mE=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(Bl(e,a)));return n.join("")},bh=et?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):mE(t,r,n)}:mE,RP=function(e,t){var r=Ln(e,t);return r>0?bh(e,t+4,t+4+r-1):""},IP=RP,DP=function(e,t){var r=Ln(e,t);return r>0?bh(e,t+4,t+4+r-1):""},MP=DP,LP=function(e,t){var r=2*Ln(e,t);return r>0?bh(e,t+4,t+4+r-1):""},$P=LP,FP=function(t,r){var n=Ln(t,r);return n>0?j_(t,r+4,r+4+n):""},BP=FP,UP=function(e,t){var r=Ln(e,t);return r>0?bh(e,t+4,t+4+r):""},zP=UP,qP=function(e,t){return RB(e,t)},qp=qP,E_=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};et&&(IP=function(t,r){if(!Buffer.isBuffer(t))return RP(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},MP=function(t,r){if(!Buffer.isBuffer(t))return DP(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},$P=function(t,r){if(!Buffer.isBuffer(t))return LP(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},BP=function(t,r){if(!Buffer.isBuffer(t))return FP(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},zP=function(t,r){if(!Buffer.isBuffer(t))return UP(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},qp=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):qP(t,r)},E_=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Bl=function(e,t){return e[t]},Sd=function(e,t){return e[t+1]*256+e[t]},DB=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Ln=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},jo=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},MB=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Fd(e,t){var r="",n,a,i=[],s,l,c,u;switch(t){case"dbcs":if(u=this.l,et&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(Sd(this,u)),u+=2;e*=2;break;case"utf8":r=bh(this,this.l,this.l+e);break;case"utf16le":e*=2,r=j_(this,this.l,this.l+e);break;case"wstr":return Fd.call(this,e,"dbcs");case"lpstr-ansi":r=IP(this,this.l),e=4+Ln(this,this.l);break;case"lpstr-cp":r=MP(this,this.l),e=4+Ln(this,this.l);break;case"lpwstr":r=$P(this,this.l),e=4+2*Ln(this,this.l);break;case"lpp4":e=4+Ln(this,this.l),r=BP(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Ln(this,this.l),r=zP(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(s=Bl(this,this.l+e++))!==0;)i.push(p0(s));r=i.join("");break;case"_wstr":for(e=0,r="";(s=Sd(this,this.l+e))!==0;)i.push(p0(s)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return s=Bl(this,u),this.l=u+1,l=Fd.call(this,e-c,s?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(p0(Sd(this,u))),u+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return s=Bl(this,u),this.l=u+1,l=Fd.call(this,e-c,s?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(p0(Bl(this,u))),u+=1}r=i.join("");break;default:switch(e){case 1:return n=Bl(this,this.l),this.l++,n;case 2:return n=(t==="i"?DB:Sd)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(n=(e>0?jo:MB)(this,this.l),this.l+=4,n):(a=Ln(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=qp(this,this.l):a=qp([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=PP(this,this.l,e);break}}return this.l+=e,r}var LB=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},$B=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},FB=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function BB(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)FB(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var s=t.charCodeAt(a);this[this.l++]=s&255,this[this.l++]=s>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,LB(this,t,this.l);break;case 8:if(n=8,r==="f"){IB(this,t,this.l);break}case 16:break;case-4:n=4,$B(this,t,this.l);break}return this.l+=n,this}function WP(e,t){var r=PP(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Dn(e,t){e.l=t,e.read_shift=Fd,e.chk=WP,e.write_shift=BB}function ai(e,t){e.l+=t}function se(e){var t=il(e);return Dn(t,0),t}function En(){var e=[],t=et?256:2048,r=function(u){var d=se(u);return Dn(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},s=function(){return a(),Pr(e)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:l,end:s,_bufs:e}}function de(e,t,r,n){var a=+t,i;if(!isNaN(a)){n||(n=RH[a].p||(r||[]).length||0),i=1+(a>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var s=e.next(i);a<=127?s.write_shift(1,a):(s.write_shift(1,(a&127)+128),s.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)s.write_shift(1,(n&127)+128),n>>=7;else{s.write_shift(1,n);break}n>0&&E_(r)&&e.push(r)}}function Bd(e,t,r){var n=Tn(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function gE(e,t,r){var n=Tn(e);return n.s=Bd(n.s,t.s,r),n.e=Bd(n.e,t.s,r),n}function Ud(e,t){if(e.cRel&&e.c<0)for(e=Tn(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Tn(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=ft(e);return!e.cRel&&e.cRel!=null&&(r=qB(r)),!e.rRel&&e.rRel!=null&&(r=UB(r)),r}function xx(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Vr(e.s.c)+":"+(e.e.cRel?"":"$")+Vr(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Dr(e.s.r)+":"+(e.e.rRel?"":"$")+Dr(e.e.r):Ud(e.s,t.biff)+":"+Ud(e.e,t.biff)}function N_(e){return parseInt(zB(e),10)-1}function Dr(e){return""+(e+1)}function UB(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function zB(e){return e.replace(/\$(\d+)$/,"$1")}function T_(e){for(var t=WB(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function Vr(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function qB(e){return e.replace(/^([A-Z])/,"$$$1")}function WB(e){return e.replace(/^\$([A-Z])/,"$1")}function HB(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function br(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function ft(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Gn(e){var t=e.indexOf(":");return t==-1?{s:br(e),e:br(e)}:{s:br(e.slice(0,t)),e:br(e.slice(t+1))}}function rr(e,t){return typeof t>"u"||typeof t=="number"?rr(e.s,e.e):(typeof e!="string"&&(e=ft(e)),typeof t!="string"&&(t=ft(t)),e==t?e:e+":"+t)}function Tt(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,i=e.length;for(r=0;n<i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===i||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function vE(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Hs(e.z,r?Nn(t):t)}catch{}try{return e.w=Hs((e.XF||{}).numFmtId||(r?14:0),r?Nn(t):t)}catch{return""+t}}function Ui(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?wh[e.v]||e.v:t==null?vE(e,e.v):vE(e,t))}function bl(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function HP(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,i=e||(a?[]:{}),s=0,l=0;if(i&&n.origin!=null){if(typeof n.origin=="number")s=n.origin;else{var c=typeof n.origin=="string"?br(n.origin):n.origin;s=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var d=Tt(i["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),s==-1&&(u.e.r=s=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var p={v:t[f][h]},v=s+f,g=l+h;if(u.s.r>v&&(u.s.r=v),u.s.c>g&&(u.s.c=g),u.e.r<v&&(u.e.r=v),u.e.c<g&&(u.e.c=g),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))p=t[f][h];else if(Array.isArray(p.v)&&(p.f=t[f][h][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Wt[14],n.cellDates?(p.t="d",p.w=Hs(p.z,Nn(p.v))):(p.t="n",p.v=Nn(p.v),p.w=Hs(p.z,p.v))):p.t="s";if(a)i[v]||(i[v]=[]),i[v][g]&&i[v][g].z&&(p.z=i[v][g].z),i[v][g]=p;else{var x=ft({c:g,r:v});i[x]&&i[x].z&&(p.z=i[x].z),i[x]=p}}}return u.s.c<1e7&&(i["!ref"]=rr(u)),i}function Ou(e,t){return HP(null,e,t)}function VB(e){return e.read_shift(4,"i")}function La(e,t){return t||(t=se(4)),t.write_shift(4,e),t}function Kr(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function wr(e,t){var r=!1;return t==null&&(r=!0,t=se(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function KB(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function GB(e,t){return t||(t=se(4)),t.write_shift(2,0),t.write_shift(2,0),t}function A_(e,t){var r=e.l,n=e.read_shift(1),a=Kr(e),i=[],s={t:a,h:a};if(n&1){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(KB(e));s.r=i}else s.r=[{ich:0,ifnt:0}];return e.l=r+t,s}function XB(e,t){var r=!1;return t==null&&(r=!0,t=se(15+4*e.t.length)),t.write_shift(1,0),wr(e.t,t),r?t.slice(0,t.l):t}var YB=A_;function QB(e,t){var r=!1;return t==null&&(r=!0,t=se(23+4*e.t.length)),t.write_shift(1,1),wr(e.t,t),t.write_shift(4,1),GB({},t),r?t.slice(0,t.l):t}function ma(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function wl(e,t){return t==null&&(t=se(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function _l(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Sl(e,t){return t==null&&(t=se(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var JB=Kr,VP=wr;function O_(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function Wp(e,t){var r=!1;return t==null&&(r=!0,t=se(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var ZB=Kr,w1=O_,C_=Wp;function KP(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?qp([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):jo(t,0)>>2;return r?a/100:a}function GP(e,t){t==null&&(t=se(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function XP(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function e9(e,t){return t||(t=se(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var jl=XP,Cu=e9;function ku(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function sl(e,t){return(t||se(8)).write_shift(8,e,"f")}function t9(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),i=e.read_shift(2,"i"),s=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=u9[a];u&&(t.rgb=AE(u));break;case 2:t.rgb=AE([s,l,c]);break;case 3:t.theme=a;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function Hp(e,t){if(t||(t=se(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function r9(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function n9(e,t){t||(t=se(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}var YP=2,Pn=3,x0=11,Vp=19,y0=64,a9=65,i9=71,s9=4108,o9=4126,kr=80,xE={1:{n:"CodePage",t:YP},2:{n:"Category",t:kr},3:{n:"PresentationFormat",t:kr},4:{n:"ByteCount",t:Pn},5:{n:"LineCount",t:Pn},6:{n:"ParagraphCount",t:Pn},7:{n:"SlideCount",t:Pn},8:{n:"NoteCount",t:Pn},9:{n:"HiddenCount",t:Pn},10:{n:"MultimediaClipCount",t:Pn},11:{n:"ScaleCrop",t:x0},12:{n:"HeadingPairs",t:s9},13:{n:"TitlesOfParts",t:o9},14:{n:"Manager",t:kr},15:{n:"Company",t:kr},16:{n:"LinksUpToDate",t:x0},17:{n:"CharacterCount",t:Pn},19:{n:"SharedDoc",t:x0},22:{n:"HyperlinksChanged",t:x0},23:{n:"AppVersion",t:Pn,p:"version"},24:{n:"DigSig",t:a9},26:{n:"ContentType",t:kr},27:{n:"ContentStatus",t:kr},28:{n:"Language",t:kr},29:{n:"Version",t:kr},255:{},2147483648:{n:"Locale",t:Vp},2147483651:{n:"Behavior",t:Vp},1919054434:{}},yE={1:{n:"CodePage",t:YP},2:{n:"Title",t:kr},3:{n:"Subject",t:kr},4:{n:"Author",t:kr},5:{n:"Keywords",t:kr},6:{n:"Comments",t:kr},7:{n:"Template",t:kr},8:{n:"LastAuthor",t:kr},9:{n:"RevNumber",t:kr},10:{n:"EditTime",t:y0},11:{n:"LastPrinted",t:y0},12:{n:"CreatedDate",t:y0},13:{n:"ModifiedDate",t:y0},14:{n:"PageCount",t:Pn},15:{n:"WordCount",t:Pn},16:{n:"CharCount",t:Pn},17:{n:"Thumbnail",t:i9},18:{n:"Application",t:kr},19:{n:"DocSecurity",t:Pn},255:{},2147483648:{n:"Locale",t:Vp},2147483651:{n:"Behavior",t:Vp},1919054434:{}};function l9(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var c9=l9([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),u9=Tn(c9),wh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},d9={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},b0={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function QP(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function JP(e,t){var r=wB(d9),n=[],a;n[n.length]=ar,n[n.length]=xe("Types",null,{xmlns:yr.CT,"xmlns:xsd":yr.xsd,"xmlns:xsi":yr.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return xe("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=xe("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:b0[c][t.bookType]||b0[c].xlsx}))},s=function(c){(e[c]||[]).forEach(function(u){n[n.length]=xe("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:b0[c][t.bookType]||b0[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(u){n[n.length]=xe("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return i("workbooks"),s("sheets"),s("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),s("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Qe={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function ZP(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function pc(e){var t=[ar,xe("Relationships",null,{xmlns:yr.RELS})];return Lr(e["!id"]).forEach(function(r){t[t.length]=xe("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function lt(e,t,r,n,a,i){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[Qe.HLINK,Qe.XPATH,Qe.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}function f9(e){var t=[ar];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function bE(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function h9(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function p9(e){var t=[ar];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(bE(e[r][0],e[r][1])),t.push(h9("",e[r][0]));return t.push(bE("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function e5(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Lp.version+"</meta:generator></office:meta></office:document-meta>"}var Xo=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function yx(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=ut(t),n[n.length]=r?xe(e,t,r):Rr(e,t))}function t5(e,t){var r=t||{},n=[ar,xe("cp:coreProperties",null,{"xmlns:cp":yr.CORE_PROPS,"xmlns:dc":yr.dc,"xmlns:dcterms":yr.dcterms,"xmlns:dcmitype":yr.dcmitype,"xmlns:xsi":yr.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&yx("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:b1(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&yx("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:b1(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var i=0;i!=Xo.length;++i){var s=Xo[i],l=r.Props&&r.Props[s[1]]!=null?r.Props[s[1]]:e?e[s[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&yx(s[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var mc=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],r5=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function n5(e){var t=[],r=xe;return e||(e={}),e.Application="SheetJS",t[t.length]=ar,t[t.length]=xe("Properties",null,{xmlns:yr.EXT_PROPS,"xmlns:vt":yr.vt}),mc.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=ut(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+ut(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function a5(e){var t=[ar,xe("Properties",null,{xmlns:yr.CUST_PROPS,"xmlns:vt":yr.vt})];if(!e)return t.join("");var r=1;return Lr(e).forEach(function(a){++r,t[t.length]=xe("property",PB(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ut(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var wE={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function m9(e,t){var r=[];return Lr(wE).map(function(n){for(var a=0;a<Xo.length;++a)if(Xo[a][1]==n)return Xo[a];for(a=0;a<mc.length;++a)if(mc[a][1]==n)return mc[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(Rr(wE[n[1]]||n[1],a))}}),xe("DocumentProperties",r.join(""),{xmlns:Mn.o})}function g9(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Lr(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var s=0;s<Xo.length;++s)if(i==Xo[s][1])return;for(s=0;s<mc.length;++s)if(i==mc[s][1])return;for(s=0;s<r.length;++s)if(i==r[s])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(xe(lE(i),l,{"dt:dt":c}))}}),t&&Lr(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var s=t[i],l="string";typeof s=="number"?(l="float",s=String(s)):s===!0||s===!1?(l="boolean",s=s?"1":"0"):s instanceof Date?(l="dateTime.tz",s=s.toISOString()):s=String(s),a.push(xe(lE(i),s,{"dt:dt":l}))}}),"<"+n+' xmlns="'+Mn.o+'">'+a.join("")+"</"+n+">"}function v9(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),a+=i);var s=se(8);return s.write_shift(4,n),s.write_shift(4,a),s}function _E(e,t){var r=se(4),n=se(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=se(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=v9(t);break;case 31:case 80:for(n=se(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Pr([r,n])}var i5=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function x9(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function SE(e,t,r){var n=se(8),a=[],i=[],s=8,l=0,c=se(8),u=se(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),i.push(c),a.push(u),s+=8+c.length,!t){u=se(8),u.write_shift(4,0),a.unshift(u);var d=[se(4)];for(d[0].write_shift(4,e.length),l=0;l<e.length;++l){var f=e[l][0];for(c=se(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Pr(d),i.unshift(c),s+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(i5.indexOf(e[l][0])>-1||r5.indexOf(e[l][0])>-1)&&e[l][1]!=null){var h=e[l][1],p=0;if(t){p=+t[e[l][0]];var v=r[p];if(v.p=="version"&&typeof h=="string"){var g=h.split(".");h=(+g[0]<<16)+(+g[1]||0)}c=_E(v.t,h)}else{var x=x9(h);x==-1&&(x=31,h=String(h)),c=_E(x,h)}i.push(c),u=se(8),u.write_shift(4,t?p:2+l),a.push(u),s+=8+c.length}var b=8*(i.length+1);for(l=0;l<i.length;++l)a[l].write_shift(4,b),b+=i[l].length;return n.write_shift(4,s),n.write_shift(4,i.length),Pr([n].concat(a).concat(i))}function jE(e,t,r,n,a,i){var s=se(a?68:48),l=[s];s.write_shift(2,65534),s.write_shift(2,0),s.write_shift(4,842412599),s.write_shift(16,pt.utils.consts.HEADER_CLSID,"hex"),s.write_shift(4,a?2:1),s.write_shift(16,t,"hex"),s.write_shift(4,a?68:48);var c=SE(e,r,n);if(l.push(c),a){var u=SE(a,null,null);s.write_shift(16,i,"hex"),s.write_shift(4,68+c.length),l.push(u)}return Pr(l)}function y9(e,t){t||(t=se(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function b9(e,t){return e.read_shift(t)===1}function nn(e,t){return t||(t=se(2)),t.write_shift(2,+!!e),t}function s5(e){return e.read_shift(2,"u")}function na(e,t){return t||(t=se(2)),t.write_shift(2,e),t}function o5(e,t,r){return r||(r=se(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function l5(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var s=n?e.read_shift(n,a):"";return s}function w9(e){var t=e.t||"",r=se(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=se(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return Pr(a)}function _9(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function S9(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):_9(e,n,r)}function j9(e,t,r){if(r.biff>5)return S9(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function c5(e,t,r){return r||(r=se(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function EE(e,t){t||(t=se(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function E9(e){var t=se(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),i=a>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var s=[8,6815827,6619237,4849780,83];for(r=0;r<s.length;++r)t.write_shift(4,s[r]);if(i==28)n=n.slice(1),EE(n,t);else if(i&2){for(s="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));var l=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&EE(a>-1?n.slice(a+1):"",t)}else{for(s="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function ol(e,t,r,n){return n||(n=se(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function N9(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),i=e.read_shift(n,"i"),s=e.read_shift(n,"i");return[a,i,s]}function T9(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function u5(e,t){return t||(t=se(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function k_(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=se(a);return i.write_shift(2,n),i.write_shift(2,t),a>4&&i.write_shift(2,29282),a>6&&i.write_shift(2,1997),a>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function A9(e,t){var r=!t||t.biff==8,n=se(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function O9(e,t){var r=!t||t.biff>=8?2:1,n=se(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function C9(e,t){var r=se(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=w9(e[a]);var i=Pr([r].concat(n));return i.parts=[r.length].concat(n.map(function(s){return s.length})),i}function k9(){var e=se(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function P9(e){var t=se(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function R9(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,i=se(a);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function I9(e,t,r,n){var a=se(10);return ol(e,t,n,a),a.write_shift(4,r),a}function D9(e,t,r,n,a){var i=!a||a.biff==8,s=se(8+ +i+(1+i)*r.length);return ol(e,t,n,s),s.write_shift(2,r.length),i&&s.write_shift(1,1),s.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),s}function M9(e,t,r,n){var a=r&&r.biff==5;n||(n=se(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}function L9(e,t){var r=t.biff==8||!t.biff?4:2,n=se(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function NE(e,t,r,n){var a=r&&r.biff==5;n||(n=se(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&a&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function $9(e){var t=se(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function F9(e,t,r,n,a,i){var s=se(8);return ol(e,t,n,s),o5(r,i,s),s}function B9(e,t,r,n){var a=se(14);return ol(e,t,n,a),sl(r,a),a}function U9(e,t,r){if(r.biff<8)return z9(e,t,r);for(var n=[],a=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(N9(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function z9(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=l5(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function q9(e){var t=se(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)u5(e[r],t);return t}function W9(e){var t=se(24),r=br(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Pr([t,E9(e[1])])}function H9(e){var t=e[1].Tooltip,r=se(10+2*(t.length+1));r.write_shift(2,2048);var n=br(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function V9(e){return e||(e=se(4)),e.write_shift(2,1),e.write_shift(2,1),e}function K9(e,t,r){if(!r.cellStyles)return ai(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),i=e.read_shift(n),s=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:i,w:s,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function G9(e,t){var r=se(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function X9(e){for(var t=se(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}function Y9(e,t,r){var n=se(15);return Sh(n,e,t),n.write_shift(8,r,"f"),n}function Q9(e,t,r){var n=se(9);return Sh(n,e,t),n.write_shift(2,r),n}var J9=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=b_({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=il(1);switch(c.type){case"base64":d=Pa(Bi(l));break;case"binary":d=Pa(l);break;case"buffer":case"array":d=l;break}Dn(d,0);var f=d.read_shift(1),h=!!(f&136),p=!1,v=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,h=!0;break;case 49:p=!0,h=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var g=0,x=521;f==2&&(g=d.read_shift(2)),d.l+=3,f!=2&&(g=d.read_shift(4)),g>1048576&&(g=1e6),f!=2&&(x=d.read_shift(2));var b=d.read_shift(2),m=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(m=e[d[d.l]]),d.l+=1,d.l+=2),v&&(d.l+=36);for(var y=[],_={},w=Math.min(d.length,f==2?521:x-10-(p?264:0)),S=v?32:11;d.l<w&&d[d.l]!=13;)switch(_={},_.name=$p.utils.decode(m,d.slice(d.l,d.l+S)).replace(/[\u0000\r\n].*$/g,""),d.l+=S,_.type=String.fromCharCode(d.read_shift(1)),f!=2&&!v&&(_.offset=d.read_shift(4)),_.len=d.read_shift(1),f==2&&(_.offset=d.read_shift(2)),_.dec=d.read_shift(1),_.name.length&&y.push(_),f!=2&&(d.l+=v?13:14),_.type){case"B":(!p||_.len!=8)&&c.WTF&&console.log("Skipping "+_.name+":"+_.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+_.name+":"+_.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+_.type)}if(d[d.l]!==13&&(d.l=x-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=x;var j=0,E=0;for(u[0]=[],E=0;E!=y.length;++E)u[0][E]=y[E].name;for(;g-- >0;){if(d[d.l]===42){d.l+=b;continue}for(++d.l,u[++j]=[],E=0,E=0;E!=y.length;++E){var N=d.slice(d.l,d.l+y[E].len);d.l+=y[E].len,Dn(N,0);var A=$p.utils.decode(m,N);switch(y[E].type){case"C":A.trim().length&&(u[j][E]=A.replace(/\s+$/,""));break;case"D":A.length===8?u[j][E]=new Date(+A.slice(0,4),+A.slice(4,6)-1,+A.slice(6,8)):u[j][E]=A;break;case"F":u[j][E]=parseFloat(A.trim());break;case"+":case"I":u[j][E]=v?N.read_shift(-4,"i")^2147483648:N.read_shift(4,"i");break;case"L":switch(A.trim().toUpperCase()){case"Y":case"T":u[j][E]=!0;break;case"N":case"F":u[j][E]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+A+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[j][E]="##MEMO##"+(v?parseInt(A.trim(),10):N.read_shift(4));break;case"N":A=A.replace(/\u0000/g,"").trim(),A&&A!="."&&(u[j][E]=+A||0);break;case"@":u[j][E]=new Date(N.read_shift(-8,"f")-621356832e5);break;case"T":u[j][E]=new Date((N.read_shift(4)-2440588)*864e5+N.read_shift(4));break;case"Y":u[j][E]=N.read_shift(4,"i")/1e4+N.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[j][E]=-N.read_shift(-8,"f");break;case"B":if(p&&y[E].len==8){u[j][E]=N.read_shift(8,"f");break}case"G":case"P":N.l+=y[E].len;break;case"0":if(y[E].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+y[E].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=y,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=Ou(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(l,c){try{return bl(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function s(l,c){var u=c||{};if(+u.codepage>=0&&gf(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=En(),f=Qp(l,{header:1,raw:!0,cellDates:!0}),h=f[0],p=f.slice(1),v=l["!cols"]||[],g=0,x=0,b=0,m=1;for(g=0;g<h.length;++g){if(((v[g]||{}).DBF||{}).name){h[g]=v[g].DBF.name,++b;continue}if(h[g]!=null){if(++b,typeof h[g]=="number"&&(h[g]=h[g].toString(10)),typeof h[g]!="string")throw new Error("DBF Invalid column name "+h[g]+" |"+typeof h[g]+"|");if(h.indexOf(h[g])!==g){for(x=0;x<1024;++x)if(h.indexOf(h[g]+"_"+x)==-1){h[g]+="_"+x;break}}}}var y=Tt(l["!ref"]),_=[],w=[],S=[];for(g=0;g<=y.e.c-y.s.c;++g){var j="",E="",N=0,A=[];for(x=0;x<p.length;++x)p[x][g]!=null&&A.push(p[x][g]);if(A.length==0||h[g]==null){_[g]="?";continue}for(x=0;x<A.length;++x){switch(typeof A[x]){case"number":E="B";break;case"string":E="C";break;case"boolean":E="L";break;case"object":E=A[x]instanceof Date?"D":"C";break;default:E="C"}N=Math.max(N,String(A[x]).length),j=j&&j!=E?"C":E}N>250&&(N=250),E=((v[g]||{}).DBF||{}).type,E=="C"&&v[g].DBF.len>N&&(N=v[g].DBF.len),j=="B"&&E=="N"&&(j="N",S[g]=v[g].DBF.dec,N=v[g].DBF.len),w[g]=j=="C"||E=="N"?N:i[j]||0,m+=w[g],_[g]=j}var C=d.next(32);for(C.write_shift(4,318902576),C.write_shift(4,p.length),C.write_shift(2,296+32*b),C.write_shift(2,m),g=0;g<4;++g)C.write_shift(4,0);for(C.write_shift(4,0|(+t[fP]||3)<<8),g=0,x=0;g<h.length;++g)if(h[g]!=null){var D=d.next(32),P=(h[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);D.write_shift(1,P,"sbcs"),D.write_shift(1,_[g]=="?"?"C":_[g],"sbcs"),D.write_shift(4,x),D.write_shift(1,w[g]||i[_[g]]||0),D.write_shift(1,S[g]||0),D.write_shift(1,2),D.write_shift(4,0),D.write_shift(1,0),D.write_shift(4,0),D.write_shift(4,0),x+=w[g]||i[_[g]]||0}var H=d.next(264);for(H.write_shift(4,13),g=0;g<65;++g)H.write_shift(4,0);for(g=0;g<p.length;++g){var V=d.next(m);for(V.write_shift(1,0),x=0;x<h.length;++x)if(h[x]!=null)switch(_[x]){case"L":V.write_shift(1,p[g][x]==null?63:p[g][x]?84:70);break;case"B":V.write_shift(8,p[g][x]||0,"f");break;case"N":var ae="0";for(typeof p[g][x]=="number"&&(ae=p[g][x].toFixed(S[x]||0)),b=0;b<w[x]-ae.length;++b)V.write_shift(1,32);V.write_shift(1,ae,"sbcs");break;case"D":p[g][x]?(V.write_shift(4,("0000"+p[g][x].getFullYear()).slice(-4),"sbcs"),V.write_shift(2,("00"+(p[g][x].getMonth()+1)).slice(-2),"sbcs"),V.write_shift(2,("00"+p[g][x].getDate()).slice(-2),"sbcs")):V.write_shift(8,"00000000","sbcs");break;case"C":var oe=String(p[g][x]!=null?p[g][x]:"").slice(0,w[x]);for(V.write_shift(1,oe,"sbcs"),b=0;b<w[x]-oe.length;++b)V.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:s}}(),Z9=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Lr(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,p){var v=e[p];return typeof v=="number"?Yj(v):v},n=function(h,p,v){var g=p.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return g==59?h:Yj(g)};e["|"]=254;function a(h,p){switch(p.type){case"base64":return i(Bi(h),p);case"binary":return i(h,p);case"buffer":return i(et&&Buffer.isBuffer(h)?h.toString("binary"):xh(h),p);case"array":return i(Pg(h),p)}throw new Error("Unrecognized type "+p.type)}function i(h,p){var v=h.split(/[\n\r]+/),g=-1,x=-1,b=0,m=0,y=[],_=[],w=null,S={},j=[],E=[],N=[],A=0,C;for(+p.codepage>=0&&gf(+p.codepage);b!==v.length;++b){A=0;var D=v[b].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),P=D.replace(/;;/g,"\0").split(";").map(function(q){return q.replace(/\u0000/g,";")}),H=P[0],V;if(D.length>0)switch(H){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":P[1].charAt(0)=="P"&&_.push(D.slice(3).replace(/;;/g,";"));break;case"C":var ae=!1,oe=!1,X=!1,re=!1,ue=-1,me=-1;for(m=1;m<P.length;++m)switch(P[m].charAt(0)){case"A":break;case"X":x=parseInt(P[m].slice(1))-1,oe=!0;break;case"Y":for(g=parseInt(P[m].slice(1))-1,oe||(x=0),C=y.length;C<=g;++C)y[C]=[];break;case"K":V=P[m].slice(1),V.charAt(0)==='"'?V=V.slice(1,V.length-1):V==="TRUE"?V=!0:V==="FALSE"?V=!1:isNaN(Oi(V))?isNaN(xf(V).getDate())||(V=un(V)):(V=Oi(V),w!==null&&jP(w)&&(V=AP(V))),ae=!0;break;case"E":re=!0;var R=QU(P[m].slice(1),{r:g,c:x});y[g][x]=[y[g][x],R];break;case"S":X=!0,y[g][x]=[y[g][x],"S5S"];break;case"G":break;case"R":ue=parseInt(P[m].slice(1))-1;break;case"C":me=parseInt(P[m].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+D)}if(ae&&(y[g][x]&&y[g][x].length==2?y[g][x][0]=V:y[g][x]=V,w=null),X){if(re)throw new Error("SYLK shared formula cannot have own formula");var W=ue>-1&&y[ue][me];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");y[g][x][1]=JU(W[1],{r:g-ue,c:x-me})}break;case"F":var U=0;for(m=1;m<P.length;++m)switch(P[m].charAt(0)){case"X":x=parseInt(P[m].slice(1))-1,++U;break;case"Y":for(g=parseInt(P[m].slice(1))-1,C=y.length;C<=g;++C)y[C]=[];break;case"M":A=parseInt(P[m].slice(1))/20;break;case"F":break;case"G":break;case"P":w=_[parseInt(P[m].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(N=P[m].slice(1).split(" "),C=parseInt(N[0],10);C<=parseInt(N[1],10);++C)A=parseInt(N[2],10),E[C-1]=A===0?{hidden:!0}:{wch:A},P_(E[C-1]);break;case"C":x=parseInt(P[m].slice(1))-1,E[x]||(E[x]={});break;case"R":g=parseInt(P[m].slice(1))-1,j[g]||(j[g]={}),A>0?(j[g].hpt=A,j[g].hpx=m5(A)):A===0&&(j[g].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+D)}U<1&&(w=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+D)}}return j.length>0&&(S["!rows"]=j),E.length>0&&(S["!cols"]=E),p&&p.sheetRows&&(y=y.slice(0,p.sheetRows)),[y,S]}function s(h,p){var v=a(h,p),g=v[0],x=v[1],b=Ou(g,p);return Lr(x).forEach(function(m){b[m]=x[m]}),b}function l(h,p){return bl(s(h,p),p)}function c(h,p,v,g){var x="C;Y"+(v+1)+";X"+(g+1)+";K";switch(h.t){case"n":x+=h.v||0,h.f&&!h.F&&(x+=";E"+I_(h.f,{r:v,c:g}));break;case"b":x+=h.v?"TRUE":"FALSE";break;case"e":x+=h.w||h.v;break;case"d":x+='"'+(h.w||h.v)+'"';break;case"s":x+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return x}function u(h,p){p.forEach(function(v,g){var x="F;W"+(g+1)+" "+(g+1)+" ";v.hidden?x+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=Kp(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=Gp(v.wpx)),typeof v.wch=="number"&&(x+=Math.round(v.wch))),x.charAt(x.length-1)!=" "&&h.push(x)})}function d(h,p){p.forEach(function(v,g){var x="F;";v.hidden?x+="M0;":v.hpt?x+="M"+20*v.hpt+";":v.hpx&&(x+="M"+20*Xp(v.hpx)+";"),x.length>2&&h.push(x+"R"+(g+1))})}function f(h,p){var v=["ID;PWXL;N;E"],g=[],x=Tt(h["!ref"]),b,m=Array.isArray(h),y=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),h["!cols"]&&u(v,h["!cols"]),h["!rows"]&&d(v,h["!rows"]),v.push("B;Y"+(x.e.r-x.s.r+1)+";X"+(x.e.c-x.s.c+1)+";D"+[x.s.c,x.s.r,x.e.c,x.e.r].join(" "));for(var _=x.s.r;_<=x.e.r;++_)for(var w=x.s.c;w<=x.e.c;++w){var S=ft({r:_,c:w});b=m?(h[_]||[])[w]:h[S],!(!b||b.v==null&&(!b.f||b.F))&&g.push(c(b,h,_,w))}return v.join(y)+y+g.join(y)+y+"E"+y}return{to_workbook:l,to_sheet:s,from_sheet:f}}(),eU=function(){function e(i,s){switch(s.type){case"base64":return t(Bi(i),s);case"binary":return t(i,s);case"buffer":return t(et&&Buffer.isBuffer(i)?i.toString("binary"):xh(i),s);case"array":return t(Pg(i),s)}throw new Error("Unrecognized type "+s.type)}function t(i,s){for(var l=i.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=l[d].trim().split(","),p=h[0],v=h[1];++d;for(var g=l[d]||"";(g.match(/["]/g)||[]).length&1&&d<l.length-1;)g+=`
`+l[++d];switch(g=g.trim(),+p){case-1:if(g==="BOT"){f[++c]=[],u=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?f[c][u]=!0:g==="FALSE"?f[c][u]=!1:isNaN(Oi(v))?isNaN(xf(v).getDate())?f[c][u]=v:f[c][u]=un(v):f[c][u]=Oi(v),++u;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),f[c][u++]=g!==""?g:null;break}if(g==="EOD")break}}return s&&s.sheetRows&&(f=f.slice(0,s.sheetRows)),f}function r(i,s){return Ou(e(i,s),s)}function n(i,s){return bl(r(i,s),s)}var a=function(){var i=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},s=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Tt(c["!ref"]),f,h=Array.isArray(c);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,d.e.r-d.s.r+1,""),i(u,"TUPLES",0,d.e.c-d.s.c+1,""),i(u,"DATA",0,0,"");for(var p=d.s.r;p<=d.e.r;++p){s(u,-1,0,"BOT");for(var v=d.s.c;v<=d.e.c;++v){var g=ft({r:p,c:v});if(f=h?(c[p]||[])[v]:c[g],!f){s(u,1,0,"");continue}switch(f.t){case"n":var x=f.w;!x&&f.v!=null&&(x=f.v),x==null?f.f&&!f.F?s(u,1,0,"="+f.f):s(u,1,0,""):s(u,0,x,"V");break;case"b":s(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":s(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Hs(f.z||Wt[14],Nn(un(f.v)))),s(u,0,f.w,"V");break;default:s(u,1,0,"")}}}s(u,-1,0,"EOD");var b=`\r
`,m=u.join(b);return m}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),d5=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var p=f.split(`
`),v=-1,g=-1,x=0,b=[];x!==p.length;++x){var m=p[x].trim().split(":");if(m[0]==="cell"){var y=br(m[1]);if(b.length<=y.r)for(v=b.length;v<=y.r;++v)b[v]||(b[v]=[]);switch(v=y.r,g=y.c,m[2]){case"t":b[v][g]=e(m[3]);break;case"v":b[v][g]=+m[3];break;case"vtf":var _=m[m.length-1];case"vtc":switch(m[3]){case"nl":b[v][g]=!!+m[4];break;default:b[v][g]=+m[4];break}m[2]=="vtf"&&(b[v][g]=[b[v][g],_])}}}return h&&h.sheetRows&&(b=b.slice(0,h.sheetRows)),b}function n(f,h){return Ou(r(f,h),h)}function a(f,h){return bl(n(f,h),h)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),s=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],p=[],v,g="",x=Gn(f["!ref"]),b=Array.isArray(f),m=x.s.r;m<=x.e.r;++m)for(var y=x.s.c;y<=x.e.c;++y)if(g=ft({r:m,c:y}),v=b?(f[m]||[])[y]:f[g],!(!v||v.v==null||v.t==="z")){switch(p=["cell",g,"t"],v.t){case"s":case"str":p.push(t(v.v));break;case"n":v.f?(p[2]="vtf",p[3]="n",p[4]=v.v,p[5]=t(v.f)):(p[2]="v",p[3]=v.v);break;case"b":p[2]="vt"+(v.f?"f":"c"),p[3]="nl",p[4]=v.v?"1":"0",p[5]=t(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var _=Nn(un(v.v));p[2]="vtc",p[3]="nd",p[4]=""+_,p[5]=v.w||Hs(v.z||Wt[14],_);break;case"e":continue}h.push(p.join(":"))}return h.push("sheet:c:"+(x.e.c-x.s.c+1)+":r:"+(x.e.r-x.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[i,s,l,s,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),tU=function(){function e(d,f,h,p,v){v.raw?f[h][p]=d:d===""||(d==="TRUE"?f[h][p]=!0:d==="FALSE"?f[h][p]=!1:isNaN(Oi(d))?isNaN(xf(d).getDate())?f[h][p]=d:f[h][p]=un(d):f[h][p]=Oi(d))}function t(d,f){var h=f||{},p=[];if(!d||d.length===0)return p;for(var v=d.split(/[\r\n]/),g=v.length-1;g>=0&&v[g].length===0;)--g;for(var x=10,b=0,m=0;m<=g;++m)b=v[m].indexOf(" "),b==-1?b=v[m].length:b++,x=Math.max(x,b);for(m=0;m<=g;++m){p[m]=[];var y=0;for(e(v[m].slice(0,x).trim(),p,m,y,h),y=1;y<=(v[m].length-x)/10+1;++y)e(v[m].slice(x+(y-1)*10,x+y*10).trim(),p,m,y,h)}return h.sheetRows&&(p=p.slice(0,h.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,p=0,v=0;p<d.length;++p)(v=d.charCodeAt(p))==34?h=!h:!h&&v in r&&(f[v]=(f[v]||0)+1);v=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&v.push([f[p],p]);if(!v.length){f=n;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&v.push([f[p],p])}return v.sort(function(g,x){return g[0]-x[0]||n[g[1]]-n[x[1]]}),r[v.pop()[1]]||44}function i(d,f){var h=f||{},p="",v=h.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(p=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(p=d.charAt(4),d=d.slice(6)):p=a(d.slice(0,1024)):h&&h.FS?p=h.FS:p=a(d.slice(0,1024));var x=0,b=0,m=0,y=0,_=0,w=p.charCodeAt(0),S=!1,j=0,E=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var N=h.dateNF!=null?vB(h.dateNF):null;function A(){var C=d.slice(y,_),D={};if(C.charAt(0)=='"'&&C.charAt(C.length-1)=='"'&&(C=C.slice(1,-1).replace(/""/g,'"')),C.length===0)D.t="z";else if(h.raw)D.t="s",D.v=C;else if(C.trim().length===0)D.t="s",D.v=C;else if(C.charCodeAt(0)==61)C.charCodeAt(1)==34&&C.charCodeAt(C.length-1)==34?(D.t="s",D.v=C.slice(2,-1).replace(/""/g,'"')):ZU(C)?(D.t="n",D.f=C.slice(1)):(D.t="s",D.v=C);else if(C=="TRUE")D.t="b",D.v=!0;else if(C=="FALSE")D.t="b",D.v=!1;else if(!isNaN(m=Oi(C)))D.t="n",h.cellText!==!1&&(D.w=C),D.v=m;else if(!isNaN(xf(C).getDate())||N&&C.match(N)){D.z=h.dateNF||Wt[14];var P=0;N&&C.match(N)&&(C=xB(C,h.dateNF,C.match(N)||[]),P=1),h.cellDates?(D.t="d",D.v=un(C,P)):(D.t="n",D.v=Nn(un(C,P))),h.cellText!==!1&&(D.w=Hs(D.z,D.v instanceof Date?Nn(D.v):D.v)),h.cellNF||delete D.z}else D.t="s",D.v=C;if(D.t=="z"||(h.dense?(v[x]||(v[x]=[]),v[x][b]=D):v[ft({c:b,r:x})]=D),y=_+1,E=d.charCodeAt(y),g.e.c<b&&(g.e.c=b),g.e.r<x&&(g.e.r=x),j==w)++b;else if(b=0,++x,h.sheetRows&&h.sheetRows<=x)return!0}e:for(;_<d.length;++_)switch(j=d.charCodeAt(_)){case 34:E===34&&(S=!S);break;case w:case 10:case 13:if(!S&&A())break e;break}return _-y>0&&A(),v["!ref"]=rr(g),v}function s(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?i(d,f):Ou(t(d,f),f)}function l(d,f){var h="",p=f.type=="string"?[0,0,0,0]:hV(d,f);switch(f.type){case"base64":h=Bi(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof $p<"u"||(h=et&&Buffer.isBuffer(d)?d.toString("binary"):xh(d));break;case"array":h=Pg(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?h=$d(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=$d(h):f.type=="binary"&&typeof $p<"u",h.slice(0,19)=="socialcalc:version:"?d5.to_sheet(f.type=="string"?h:$d(h),f):s(h,f)}function c(d,f){return bl(l(d,f),f)}function u(d){for(var f=[],h=Tt(d["!ref"]),p,v=Array.isArray(d),g=h.s.r;g<=h.e.r;++g){for(var x=[],b=h.s.c;b<=h.e.c;++b){var m=ft({r:g,c:b});if(p=v?(d[g]||[])[b]:d[m],!p||p.v==null){x.push("          ");continue}for(var y=(p.w||(Ui(p),p.w)||"").slice(0,10);y.length<10;)y+=" ";x.push(y+(b===0?" ":""))}f.push(x.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}(),TE=function(){function e(R,W,U){if(R){Dn(R,R.l||0);for(var q=U.Enum||ue;R.l<R.length;){var ie=R.read_shift(2),Se=q[ie]||q[65535],Z=R.read_shift(2),K=R.l+Z,te=Se.f&&Se.f(R,Z,U);if(R.l=K,W(te,Se,ie))return}}}function t(R,W){switch(W.type){case"base64":return r(Pa(Bi(R)),W);case"binary":return r(Pa(R),W);case"buffer":case"array":return r(R,W)}throw"Unsupported type "+W.type}function r(R,W){if(!R)return R;var U=W||{},q=U.dense?[]:{},ie="Sheet1",Se="",Z=0,K={},te=[],be=[],ne={s:{r:0,c:0},e:{r:0,c:0}},Fe=U.sheetRows||0;if(R[2]==0&&(R[3]==8||R[3]==9)&&R.length>=16&&R[14]==5&&R[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(R[2]==2)U.Enum=ue,e(R,function(we,Ht,$r){switch($r){case 0:U.vers=we,we>=4096&&(U.qpro=!0);break;case 6:ne=we;break;case 204:we&&(Se=we);break;case 222:Se=we;break;case 15:case 51:U.qpro||(we[1].v=we[1].v.slice(1));case 13:case 14:case 16:$r==14&&(we[2]&112)==112&&(we[2]&15)>1&&(we[2]&15)<15&&(we[1].z=U.dateNF||Wt[14],U.cellDates&&(we[1].t="d",we[1].v=AP(we[1].v))),U.qpro&&we[3]>Z&&(q["!ref"]=rr(ne),K[ie]=q,te.push(ie),q=U.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},Z=we[3],ie=Se||"Sheet"+(Z+1),Se="");var Qn=U.dense?(q[we[0].r]||[])[we[0].c]:q[ft(we[0])];if(Qn){Qn.t=we[1].t,Qn.v=we[1].v,we[1].z!=null&&(Qn.z=we[1].z),we[1].f!=null&&(Qn.f=we[1].f);break}U.dense?(q[we[0].r]||(q[we[0].r]=[]),q[we[0].r][we[0].c]=we[1]):q[ft(we[0])]=we[1];break}},U);else if(R[2]==26||R[2]==14)U.Enum=me,R[2]==14&&(U.qpro=!0,R.l=0),e(R,function(we,Ht,$r){switch($r){case 204:ie=we;break;case 22:we[1].v=we[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(we[3]>Z&&(q["!ref"]=rr(ne),K[ie]=q,te.push(ie),q=U.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},Z=we[3],ie="Sheet"+(Z+1)),Fe>0&&we[0].r>=Fe)break;U.dense?(q[we[0].r]||(q[we[0].r]=[]),q[we[0].r][we[0].c]=we[1]):q[ft(we[0])]=we[1],ne.e.c<we[0].c&&(ne.e.c=we[0].c),ne.e.r<we[0].r&&(ne.e.r=we[0].r);break;case 27:we[14e3]&&(be[we[14e3][0]]=we[14e3][1]);break;case 1537:be[we[0]]=we[1],we[0]==Z&&(ie=we[1]);break}},U);else throw new Error("Unrecognized LOTUS BOF "+R[2]);if(q["!ref"]=rr(ne),K[Se||ie]=q,te.push(Se||ie),!be.length)return{SheetNames:te,Sheets:K};for(var Ce={},st=[],Be=0;Be<be.length;++Be)K[te[Be]]?(st.push(be[Be]||te[Be]),Ce[be[Be]]=K[be[Be]]||K[te[Be]]):(st.push(be[Be]),Ce[be[Be]]={"!ref":"A1"});return{SheetNames:st,Sheets:Ce}}function n(R,W){var U=W||{};if(+U.codepage>=0&&gf(+U.codepage),U.type=="string")throw new Error("Cannot write WK1 to JS string");var q=En(),ie=Tt(R["!ref"]),Se=Array.isArray(R),Z=[];ye(q,0,i(1030)),ye(q,6,c(ie));for(var K=Math.min(ie.e.r,8191),te=ie.s.r;te<=K;++te)for(var be=Dr(te),ne=ie.s.c;ne<=ie.e.c;++ne){te===ie.s.r&&(Z[ne]=Vr(ne));var Fe=Z[ne]+be,Ce=Se?(R[te]||[])[ne]:R[Fe];if(!(!Ce||Ce.t=="z"))if(Ce.t=="n")(Ce.v|0)==Ce.v&&Ce.v>=-32768&&Ce.v<=32767?ye(q,13,p(te,ne,Ce.v)):ye(q,14,g(te,ne,Ce.v));else{var st=Ui(Ce);ye(q,15,f(te,ne,st.slice(0,239)))}}return ye(q,1),q.end()}function a(R,W){var U=W||{};if(+U.codepage>=0&&gf(+U.codepage),U.type=="string")throw new Error("Cannot write WK3 to JS string");var q=En();ye(q,0,s(R));for(var ie=0,Se=0;ie<R.SheetNames.length;++ie)(R.Sheets[R.SheetNames[ie]]||{})["!ref"]&&ye(q,27,re(R.SheetNames[ie],Se++));var Z=0;for(ie=0;ie<R.SheetNames.length;++ie){var K=R.Sheets[R.SheetNames[ie]];if(!(!K||!K["!ref"])){for(var te=Tt(K["!ref"]),be=Array.isArray(K),ne=[],Fe=Math.min(te.e.r,8191),Ce=te.s.r;Ce<=Fe;++Ce)for(var st=Dr(Ce),Be=te.s.c;Be<=te.e.c;++Be){Ce===te.s.r&&(ne[Be]=Vr(Be));var we=ne[Be]+st,Ht=be?(K[Ce]||[])[Be]:K[we];if(!(!Ht||Ht.t=="z"))if(Ht.t=="n")ye(q,23,A(Ce,Be,Z,Ht.v));else{var $r=Ui(Ht);ye(q,22,j(Ce,Be,Z,$r.slice(0,239)))}}++Z}}return ye(q,1),q.end()}function i(R){var W=se(2);return W.write_shift(2,R),W}function s(R){var W=se(26);W.write_shift(2,4096),W.write_shift(2,4),W.write_shift(4,0);for(var U=0,q=0,ie=0,Se=0;Se<R.SheetNames.length;++Se){var Z=R.SheetNames[Se],K=R.Sheets[Z];if(!(!K||!K["!ref"])){++ie;var te=Gn(K["!ref"]);U<te.e.r&&(U=te.e.r),q<te.e.c&&(q=te.e.c)}}return U>8191&&(U=8191),W.write_shift(2,U),W.write_shift(1,ie),W.write_shift(1,q),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(1,1),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(4,0),W}function l(R,W,U){var q={s:{c:0,r:0},e:{c:0,r:0}};return W==8&&U.qpro?(q.s.c=R.read_shift(1),R.l++,q.s.r=R.read_shift(2),q.e.c=R.read_shift(1),R.l++,q.e.r=R.read_shift(2),q):(q.s.c=R.read_shift(2),q.s.r=R.read_shift(2),W==12&&U.qpro&&(R.l+=2),q.e.c=R.read_shift(2),q.e.r=R.read_shift(2),W==12&&U.qpro&&(R.l+=2),q.s.c==65535&&(q.s.c=q.e.c=q.s.r=q.e.r=0),q)}function c(R){var W=se(8);return W.write_shift(2,R.s.c),W.write_shift(2,R.s.r),W.write_shift(2,R.e.c),W.write_shift(2,R.e.r),W}function u(R,W,U){var q=[{c:0,r:0},{t:"n",v:0},0,0];return U.qpro&&U.vers!=20768?(q[0].c=R.read_shift(1),q[3]=R.read_shift(1),q[0].r=R.read_shift(2),R.l+=2):(q[2]=R.read_shift(1),q[0].c=R.read_shift(2),q[0].r=R.read_shift(2)),q}function d(R,W,U){var q=R.l+W,ie=u(R,W,U);if(ie[1].t="s",U.vers==20768){R.l++;var Se=R.read_shift(1);return ie[1].v=R.read_shift(Se,"utf8"),ie}return U.qpro&&R.l++,ie[1].v=R.read_shift(q-R.l,"cstr"),ie}function f(R,W,U){var q=se(7+U.length);q.write_shift(1,255),q.write_shift(2,W),q.write_shift(2,R),q.write_shift(1,39);for(var ie=0;ie<q.length;++ie){var Se=U.charCodeAt(ie);q.write_shift(1,Se>=128?95:Se)}return q.write_shift(1,0),q}function h(R,W,U){var q=u(R,W,U);return q[1].v=R.read_shift(2,"i"),q}function p(R,W,U){var q=se(7);return q.write_shift(1,255),q.write_shift(2,W),q.write_shift(2,R),q.write_shift(2,U,"i"),q}function v(R,W,U){var q=u(R,W,U);return q[1].v=R.read_shift(8,"f"),q}function g(R,W,U){var q=se(13);return q.write_shift(1,255),q.write_shift(2,W),q.write_shift(2,R),q.write_shift(8,U,"f"),q}function x(R,W,U){var q=R.l+W,ie=u(R,W,U);if(ie[1].v=R.read_shift(8,"f"),U.qpro)R.l=q;else{var Se=R.read_shift(2);_(R.slice(R.l,R.l+Se),ie),R.l+=Se}return ie}function b(R,W,U){var q=W&32768;return W&=-32769,W=(q?R:0)+(W>=8192?W-16384:W),(q?"":"$")+(U?Vr(W):Dr(W))}var m={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},y=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function _(R,W){Dn(R,0);for(var U=[],q=0,ie="",Se="",Z="",K="";R.l<R.length;){var te=R[R.l++];switch(te){case 0:U.push(R.read_shift(8,"f"));break;case 1:Se=b(W[0].c,R.read_shift(2),!0),ie=b(W[0].r,R.read_shift(2),!1),U.push(Se+ie);break;case 2:{var be=b(W[0].c,R.read_shift(2),!0),ne=b(W[0].r,R.read_shift(2),!1);Se=b(W[0].c,R.read_shift(2),!0),ie=b(W[0].r,R.read_shift(2),!1),U.push(be+ne+":"+Se+ie)}break;case 3:if(R.l<R.length){console.error("WK1 premature formula end");return}break;case 4:U.push("("+U.pop()+")");break;case 5:U.push(R.read_shift(2));break;case 6:{for(var Fe="";te=R[R.l++];)Fe+=String.fromCharCode(te);U.push('"'+Fe.replace(/"/g,'""')+'"')}break;case 8:U.push("-"+U.pop());break;case 23:U.push("+"+U.pop());break;case 22:U.push("NOT("+U.pop()+")");break;case 20:case 21:K=U.pop(),Z=U.pop(),U.push(["AND","OR"][te-20]+"("+Z+","+K+")");break;default:if(te<32&&y[te])K=U.pop(),Z=U.pop(),U.push(Z+y[te]+K);else if(m[te]){if(q=m[te][1],q==69&&(q=R[R.l++]),q>U.length){console.error("WK1 bad formula parse 0x"+te.toString(16)+":|"+U.join("|")+"|");return}var Ce=U.slice(-q);U.length-=q,U.push(m[te][0]+"("+Ce.join(",")+")")}else return te<=7?console.error("WK1 invalid opcode "+te.toString(16)):te<=24?console.error("WK1 unsupported op "+te.toString(16)):te<=30?console.error("WK1 invalid opcode "+te.toString(16)):te<=115?console.error("WK1 unsupported function opcode "+te.toString(16)):console.error("WK1 unrecognized opcode "+te.toString(16))}}U.length==1?W[1].f=""+U[0]:console.error("WK1 bad formula parse |"+U.join("|")+"|")}function w(R){var W=[{c:0,r:0},{t:"n",v:0},0];return W[0].r=R.read_shift(2),W[3]=R[R.l++],W[0].c=R[R.l++],W}function S(R,W){var U=w(R);return U[1].t="s",U[1].v=R.read_shift(W-4,"cstr"),U}function j(R,W,U,q){var ie=se(6+q.length);ie.write_shift(2,R),ie.write_shift(1,U),ie.write_shift(1,W),ie.write_shift(1,39);for(var Se=0;Se<q.length;++Se){var Z=q.charCodeAt(Se);ie.write_shift(1,Z>=128?95:Z)}return ie.write_shift(1,0),ie}function E(R,W){var U=w(R);U[1].v=R.read_shift(2);var q=U[1].v>>1;if(U[1].v&1)switch(q&7){case 0:q=(q>>3)*5e3;break;case 1:q=(q>>3)*500;break;case 2:q=(q>>3)/20;break;case 3:q=(q>>3)/200;break;case 4:q=(q>>3)/2e3;break;case 5:q=(q>>3)/2e4;break;case 6:q=(q>>3)/16;break;case 7:q=(q>>3)/64;break}return U[1].v=q,U}function N(R,W){var U=w(R),q=R.read_shift(4),ie=R.read_shift(4),Se=R.read_shift(2);if(Se==65535)return q===0&&ie===3221225472?(U[1].t="e",U[1].v=15):q===0&&ie===3489660928?(U[1].t="e",U[1].v=42):U[1].v=0,U;var Z=Se&32768;return Se=(Se&32767)-16446,U[1].v=(1-Z*2)*(ie*Math.pow(2,Se+32)+q*Math.pow(2,Se)),U}function A(R,W,U,q){var ie=se(14);if(ie.write_shift(2,R),ie.write_shift(1,U),ie.write_shift(1,W),q==0)return ie.write_shift(4,0),ie.write_shift(4,0),ie.write_shift(2,65535),ie;var Se=0,Z=0,K=0,te=0;return q<0&&(Se=1,q=-q),Z=Math.log2(q)|0,q/=Math.pow(2,Z-31),te=q>>>0,te&2147483648||(q/=2,++Z,te=q>>>0),q-=te,te|=2147483648,te>>>=0,q*=Math.pow(2,32),K=q>>>0,ie.write_shift(4,K),ie.write_shift(4,te),Z+=16383+(Se?32768:0),ie.write_shift(2,Z),ie}function C(R,W){var U=N(R);return R.l+=W-14,U}function D(R,W){var U=w(R),q=R.read_shift(4);return U[1].v=q>>6,U}function P(R,W){var U=w(R),q=R.read_shift(8,"f");return U[1].v=q,U}function H(R,W){var U=P(R);return R.l+=W-10,U}function V(R,W){return R[R.l+W-1]==0?R.read_shift(W,"cstr"):""}function ae(R,W){var U=R[R.l++];U>W-1&&(U=W-1);for(var q="";q.length<U;)q+=String.fromCharCode(R[R.l++]);return q}function oe(R,W,U){if(!(!U.qpro||W<21)){var q=R.read_shift(1);R.l+=17,R.l+=1,R.l+=2;var ie=R.read_shift(W-21,"cstr");return[q,ie]}}function X(R,W){for(var U={},q=R.l+W;R.l<q;){var ie=R.read_shift(2);if(ie==14e3){for(U[ie]=[0,""],U[ie][0]=R.read_shift(2);R[R.l];)U[ie][1]+=String.fromCharCode(R[R.l]),R.l++;R.l++}}return U}function re(R,W){var U=se(5+R.length);U.write_shift(2,14e3),U.write_shift(2,W);for(var q=0;q<R.length;++q){var ie=R.charCodeAt(q);U[U.l++]=ie>127?95:ie}return U[U.l++]=0,U}var ue={0:{n:"BOF",f:s5},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:x},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:V},222:{n:"SHEETNAMELP",f:ae},65535:{n:""}},me={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:S},23:{n:"NUMBER17",f:N},24:{n:"NUMBER18",f:E},25:{n:"FORMULA19",f:C},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:X},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:D},38:{n:"??"},39:{n:"NUMBER27",f:P},40:{n:"FORMULA28",f:H},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:V},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:oe},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}(),rU=/^\s|\s$|[\t\n\r]/;function f5(e,t){if(!t.bookSST)return"";var r=[ar];r[r.length]=xe("sst",null,{xmlns:Au[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],i="<si>";a.r?i+=a.r:(i+="<t",a.t||(a.t=""),a.t.match(rU)&&(i+=' xml:space="preserve"'),i+=">"+ut(a.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function nU(e){return[e.read_shift(4),e.read_shift(4)]}function aU(e,t){return t||(t=se(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var iU=XB;function sU(e){var t=En();de(t,159,aU(e));for(var r=0;r<e.length;++r)de(t,19,iU(e[r]));return de(t,160),t.end()}function oU(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function h5(e){var t=0,r,n=oU(e),a=n.length+1,i,s,l,c,u;for(r=il(a),r[0]=n.length,i=1;i!=a;++i)r[i]=n[i-1];for(i=a-1;i>=0;--i)s=r[i],l=t&16384?1:0,c=t<<1&32767,u=l|c,t=u^s;return t^52811}var lU=function(){function e(a,i){switch(i.type){case"base64":return t(Bi(a),i);case"binary":return t(a,i);case"buffer":return t(et&&Buffer.isBuffer(a)?a.toString("binary"):xh(a),i);case"array":return t(Pg(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){var s=i||{},l=s.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var h=/\\\w+\b/g,p=0,v,g=-1;v=h.exec(d);){switch(v[0]){case"\\cell":var x=d.slice(p,h.lastIndex-v[0].length);if(x[0]==" "&&(x=x.slice(1)),++g,x.length){var b={v:x,t:"s"};Array.isArray(l)?l[f][g]=b:l[ft({r:f,c:g})]=b}break}p=h.lastIndex}g>u.e.c&&(u.e.c=g)}),l["!ref"]=rr(u),l}function r(a,i){return bl(e(a,i),i)}function n(a){for(var i=["{\\rtf1\\ansi"],s=Tt(a["!ref"]),l,c=Array.isArray(a),u=s.s.r;u<=s.e.r;++u){i.push("\\trowd\\trautofit1");for(var d=s.s.c;d<=s.e.c;++d)i.push("\\cellx"+(d+1));for(i.push("\\pard\\intbl"),d=s.s.c;d<=s.e.c;++d){var f=ft({r:u,c:d});l=c?(a[u]||[])[d]:a[f],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(Ui(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function AE(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}var cU=6,Ci=cU;function Kp(e){return Math.floor((e+Math.round(128/Ci)/256)*Ci)}function Gp(e){return Math.floor((e-5)/Ci*100+.5)/100}function _1(e){return Math.round((e*Ci+5)/Ci*256)/256}function P_(e){e.width?(e.wpx=Kp(e.width),e.wch=Gp(e.wpx),e.MDW=Ci):e.wpx?(e.wch=Gp(e.wpx),e.width=_1(e.wch),e.MDW=Ci):typeof e.wch=="number"&&(e.width=_1(e.wch),e.wpx=Kp(e.width),e.MDW=Ci),e.customWidth&&delete e.customWidth}var uU=96,p5=uU;function Xp(e){return e*96/p5}function m5(e){return e*p5/96}function dU(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=xe("numFmt",null,{numFmtId:n,formatCode:ut(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=xe("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function fU(e){var t=[];return t[t.length]=xe("cellXfs",null),e.forEach(function(r){t[t.length]=xe("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=xe("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function g5(e,t){var r=[ar,xe("styleSheet",null,{xmlns:Au[0],"xmlns:vt":yr.vt})],n;return e.SSF&&(n=dU(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=fU(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function hU(e,t){var r=e.read_shift(2),n=Kr(e);return[r,n]}function pU(e,t,r){r||(r=se(6+4*t.length)),r.write_shift(2,e),wr(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function mU(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=r9(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var s=e.read_shift(1);s!=0&&(n.underline=s);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=t9(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Kr(e),n}function gU(e,t){t||(t=se(25+4*32)),t.write_shift(2,e.sz*20),n9(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Hp(e.color,t);var n=0;return n=2,t.write_shift(1,n),wr(e.name,t),t.length>t.l?t.slice(0,t.l):t}var vU=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],bx,xU=ai;function OE(e,t){t||(t=se(4*3+8*7+16*1)),bx||(bx=b_(vU));var r=bx[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(Hp({auto:1},t),Hp({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function yU(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function v5(e,t,r){r||(r=se(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function id(e,t){return t||(t=se(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var bU=ai;function wU(e,t){return t||(t=se(51)),t.write_shift(1,0),id(null,t),id(null,t),id(null,t),id(null,t),id(null,t),t.length>t.l?t.slice(0,t.l):t}function _U(e,t){return t||(t=se(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),Wp(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function SU(e,t,r){var n=se(2052);return n.write_shift(4,e),Wp(t,n),Wp(r,n),n.length>n.l?n.slice(0,n.l):n}function jU(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(de(e,615,La(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&de(e,44,pU(a,t[a]))}),de(e,616))}}function EU(e){var t=1;de(e,611,La(t)),de(e,43,gU({sz:12,color:{theme:1},name:"Calibri",family:2})),de(e,612)}function NU(e){var t=2;de(e,603,La(t)),de(e,45,OE({patternType:"none"})),de(e,45,OE({patternType:"gray125"})),de(e,604)}function TU(e){var t=1;de(e,613,La(t)),de(e,46,wU()),de(e,614)}function AU(e){var t=1;de(e,626,La(t)),de(e,47,v5({numFmtId:0},65535)),de(e,627)}function OU(e,t){de(e,617,La(t.length)),t.forEach(function(r){de(e,47,v5(r,0))}),de(e,618)}function CU(e){var t=1;de(e,619,La(t)),de(e,48,_U({xfId:0,name:"Normal"})),de(e,620)}function kU(e){var t=0;de(e,505,La(t)),de(e,506)}function PU(e){var t=0;de(e,508,SU(t,"TableStyleMedium9","PivotStyleMedium4")),de(e,509)}function RU(e,t){var r=En();return de(r,278),jU(r,e.SSF),EU(r),NU(r),TU(r),AU(r),OU(r,t.cellXfs),CU(r),kU(r),PU(r),de(r,279),r.end()}function x5(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[ar];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function IU(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Kr(e)}}function DU(e){var t=se(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),wr(e.name,t),t.slice(0,t.l)}function MU(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function LU(e){var t=se(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function $U(e,t){var r=se(8+2*t.length);return r.write_shift(4,e),wr(t,r),r.slice(0,r.l)}function FU(e){return e.l+=4,e.read_shift(4)!=0}function BU(e,t){var r=se(8);return r.write_shift(4,e),r.write_shift(4,1),r}function UU(){var e=En();return de(e,332),de(e,334,La(1)),de(e,335,DU({name:"XLDAPR",version:12e4,flags:3496657072})),de(e,336),de(e,339,$U(1,"XLDAPR")),de(e,52),de(e,35,La(514)),de(e,4096,La(0)),de(e,4097,na(1)),de(e,36),de(e,53),de(e,340),de(e,337,BU(1)),de(e,51,LU([[1,0]])),de(e,338),de(e,333),e.end()}function y5(){var e=[ar];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function zU(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=ft(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}var tc=1024;function b5(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[xe("xml",null,{"xmlns:v":Mn.v,"xmlns:o":Mn.o,"xmlns:x":Mn.x,"xmlns:mv":Mn.mv}).replace(/\/>/,">"),xe("o:shapelayout",xe("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),xe("v:shapetype",[xe("v:stroke",null,{joinstyle:"miter"}),xe("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];tc<e*1e3;)tc+=1e3;return t.forEach(function(i){var s=br(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?xe("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=xe("v:fill",c,l),d={on:"t",obscured:"t"};++tc,a=a.concat(["<v:shape"+bf({id:"_x0000_s"+tc,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,xe("v:shadow",null,d),xe("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Rr("x:Anchor",[s.c+1,0,s.r+1,0,s.c+3,20,s.r+5,20].join(",")),Rr("x:AutoFill","False"),Rr("x:Row",String(s.r)),Rr("x:Column",String(s.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function w5(e){var t=[ar,xe("comments",null,{xmlns:Au[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var i=ut(a.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(ut(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),i.length<=1)t.push(Rr("t",ut(i[0]||"")));else{for(var s=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)s+=`Reply:
    `+i[l]+`
`;t.push(Rr("t",ut(s)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function qU(e,t,r){var n=[ar,xe("ThreadedComments",null,{xmlns:yr.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var i="";(a[1]||[]).forEach(function(s,l){if(!s.T){delete s.ID;return}s.a&&t.indexOf(s.a)==-1&&t.push(s.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,s.ID=c.id,s.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),n.push(xe("threadedComment",Rr("text",s.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function WU(e){var t=[ar,xe("personList",null,{xmlns:yr.TCMNT,"xmlns:x":Au[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(xe("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function HU(e){var t={};t.iauthor=e.read_shift(4);var r=jl(e);return t.rfx=r.s,t.ref=ft(r.s),e.l+=16,t}function VU(e,t){return t==null&&(t=se(36)),t.write_shift(4,e[1].iauthor),Cu(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var KU=Kr;function GU(e){return wr(e.slice(0,54))}function XU(e){var t=En(),r=[];return de(t,628),de(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),de(t,632,GU(a.a)))})}),de(t,631),de(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var i={s:br(n[0]),e:br(n[0])};de(t,635,VU([i,a])),a.t&&a.t.length>0&&de(t,637,QB(a)),de(t,636),delete a.iauthor})}),de(t,634),de(t,629),t.end()}function YU(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&pt.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var _5=["xlsb","xlsm","xlam","biff8","xla"],QU=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,i,s){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,d=s.length>0?parseInt(s,10)|0:0;return l?d+=t.c:--d,c?u+=t.r:--u,a+(l?"":"$")+Vr(d)+(c?"":"$")+Dr(u)}return function(a,i){return t=i,a.replace(e,r)}}(),R_=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,I_=function(){return function(t,r){return t.replace(R_,function(n,a,i,s,l,c){var u=T_(s)-(i?0:r.c),d=N_(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",h=u==0?"":i?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function JU(e,t){return e.replace(R_,function(r,n,a,i,s,l){return n+(a=="$"?a+i:Vr(T_(i)+t.c))+(s=="$"?s+l:Dr(N_(l)+t.r))})}function ZU(e){return e.length!=1}function Yt(e){e.l+=1}function Vs(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function S5(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return j5(e);r.biff==12&&(n=4)}var a=e.read_shift(n),i=e.read_shift(n),s=Vs(e),l=Vs(e);return{s:{r:a,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function j5(e){var t=Vs(e),r=Vs(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function ez(e,t,r){if(r.biff<8)return j5(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),i=Vs(e),s=Vs(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:s[0],cRel:s[1],rRel:s[2]}}}function E5(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return tz(e);var n=e.read_shift(r&&r.biff==12?4:2),a=Vs(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function tz(e){var t=Vs(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function rz(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function nz(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return az(e);var a=e.read_shift(n>=12?4:2),i=e.read_shift(2),s=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;a>524287;)a-=1048576;if(s==1)for(;i>8191;)i=i-16384;return{r:a,c:i,cRel:s,rRel:l}}function az(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function iz(e,t,r){var n=(e[e.l++]&96)>>5,a=S5(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function sz(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var s=S5(e,i,r);return[n,a,s]}function oz(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function lz(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,a]}function cz(e,t,r){var n=(e[e.l++]&96)>>5,a=ez(e,t-1,r);return[n,a]}function uz(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function CE(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function dz(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],i=0;i<=n;++i)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function fz(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function hz(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function pz(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function mz(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function N5(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function gz(e){return e.read_shift(2),N5(e)}function vz(e){return e.read_shift(2),N5(e)}function xz(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=E5(e,0,r);return[n,a]}function yz(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=nz(e,0,r);return[n,a]}function bz(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=E5(e,0,r);return[n,a,i]}function wz(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[wq[a],O5[a],n]}function _z(e,t,r){var n=e[e.l++],a=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:Sz(e);return[a,(i[0]===0?O5:bq)[i[1]]]}function Sz(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function jz(e,t,r){e.l+=r&&r.biff==2?3:4}function Ez(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function Nz(e){return e.l++,wh[e.read_shift(1)]}function Tz(e){return e.l++,e.read_shift(2)}function Az(e){return e.l++,e.read_shift(1)!==0}function Oz(e){return e.l++,ku(e)}function Cz(e,t,r){return e.l++,l5(e,t-1,r)}function kz(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=b9(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=wh[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=ku(e);break;case 2:r[1]=j9(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Pz(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],i=0;i!=n;++i)a.push((r.biff==12?jl:T9)(e));return a}function Rz(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var i=0,s=[];i!=n&&(s[i]=[]);++i)for(var l=0;l!=a;++l)s[i][l]=kz(e,r.biff);return s}function Iz(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,i=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function Dz(e,t,r){if(r.biff==5)return Mz(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),i=e.read_shift(4);return[n,a,i]}function Mz(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function Lz(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function $z(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function Fz(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function Bz(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,a]}var Uz=ai,zz=ai,qz=ai;function _h(e,t,r){return e.l+=2,[rz(e)]}function D_(e){return e.l+=6,[]}var Wz=_h,Hz=D_,Vz=D_,Kz=_h;function T5(e){return e.l+=2,[s5(e),e.read_shift(2)&1]}var Gz=_h,Xz=T5,Yz=D_,Qz=_h,Jz=_h,Zz=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function eq(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),i=e.read_shift(2),s=Zz[r>>2&31];return{ixti:t,coltype:r&3,rt:s,idx:n,c:a,C:i}}function tq(e){return e.l+=2,[e.read_shift(4)]}function rq(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function nq(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function aq(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function iq(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function sq(e){return e.l+=4,[0,0]}var kE={1:{n:"PtgExp",f:Ez},2:{n:"PtgTbl",f:qz},3:{n:"PtgAdd",f:Yt},4:{n:"PtgSub",f:Yt},5:{n:"PtgMul",f:Yt},6:{n:"PtgDiv",f:Yt},7:{n:"PtgPower",f:Yt},8:{n:"PtgConcat",f:Yt},9:{n:"PtgLt",f:Yt},10:{n:"PtgLe",f:Yt},11:{n:"PtgEq",f:Yt},12:{n:"PtgGe",f:Yt},13:{n:"PtgGt",f:Yt},14:{n:"PtgNe",f:Yt},15:{n:"PtgIsect",f:Yt},16:{n:"PtgUnion",f:Yt},17:{n:"PtgRange",f:Yt},18:{n:"PtgUplus",f:Yt},19:{n:"PtgUminus",f:Yt},20:{n:"PtgPercent",f:Yt},21:{n:"PtgParen",f:Yt},22:{n:"PtgMissArg",f:Yt},23:{n:"PtgStr",f:Cz},26:{n:"PtgSheet",f:rq},27:{n:"PtgEndSheet",f:nq},28:{n:"PtgErr",f:Nz},29:{n:"PtgBool",f:Az},30:{n:"PtgInt",f:Tz},31:{n:"PtgNum",f:Oz},32:{n:"PtgArray",f:uz},33:{n:"PtgFunc",f:wz},34:{n:"PtgFuncVar",f:_z},35:{n:"PtgName",f:Iz},36:{n:"PtgRef",f:xz},37:{n:"PtgArea",f:iz},38:{n:"PtgMemArea",f:Lz},39:{n:"PtgMemErr",f:Uz},40:{n:"PtgMemNoMem",f:zz},41:{n:"PtgMemFunc",f:$z},42:{n:"PtgRefErr",f:Fz},43:{n:"PtgAreaErr",f:oz},44:{n:"PtgRefN",f:yz},45:{n:"PtgAreaN",f:cz},46:{n:"PtgMemAreaN",f:aq},47:{n:"PtgMemNoMemN",f:iq},57:{n:"PtgNameX",f:Dz},58:{n:"PtgRef3d",f:bz},59:{n:"PtgArea3d",f:sz},60:{n:"PtgRefErr3d",f:Bz},61:{n:"PtgAreaErr3d",f:lz},255:{}},oq={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},lq={1:{n:"PtgElfLel",f:T5},2:{n:"PtgElfRw",f:Qz},3:{n:"PtgElfCol",f:Wz},6:{n:"PtgElfRwV",f:Jz},7:{n:"PtgElfColV",f:Kz},10:{n:"PtgElfRadical",f:Gz},11:{n:"PtgElfRadicalS",f:Yz},13:{n:"PtgElfColS",f:Hz},15:{n:"PtgElfColSV",f:Vz},16:{n:"PtgElfRadicalLel",f:Xz},25:{n:"PtgList",f:eq},29:{n:"PtgSxName",f:tq},255:{}},cq={0:{n:"PtgAttrNoop",f:sq},1:{n:"PtgAttrSemi",f:mz},2:{n:"PtgAttrIf",f:hz},4:{n:"PtgAttrChoose",f:dz},8:{n:"PtgAttrGoto",f:fz},16:{n:"PtgAttrSum",f:jz},32:{n:"PtgAttrBaxcel",f:CE},33:{n:"PtgAttrBaxcel",f:CE},64:{n:"PtgAttrSpace",f:gz},65:{n:"PtgAttrSpaceSemi",f:vz},128:{n:"PtgAttrIfError",f:pz},255:{}};function uq(e,t,r,n){if(n.biff<8)return ai(e,t);for(var a=e.l+t,i=[],s=0;s!==r.length;++s)switch(r[s][0]){case"PtgArray":r[s][1]=Rz(e,0,n),i.push(r[s][1]);break;case"PtgMemArea":r[s][2]=Pz(e,r[s][1],n),i.push(r[s][2]);break;case"PtgExp":n&&n.biff==12&&(r[s][1][1]=e.read_shift(4),i.push(r[s][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[s][0]}return t=a-e.l,t!==0&&i.push(ai(e,t)),i}function dq(e,t,r){for(var n=e.l+t,a,i,s=[];n!=e.l;)t=n-e.l,i=e[e.l],a=kE[i]||kE[oq[i]],(i===24||i===25)&&(a=(i===24?lq:cq)[e[e.l+1]]),!a||!a.f?ai(e,t):s.push([a.n,a.f(e,t,r)]);return s}function fq(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],i=0;i<n.length;++i){var s=n[i];if(s)switch(s[0]){case 2:a.push('"'+s[1].replace(/"/g,'""')+'"');break;default:a.push(s[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var hq={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function pq(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function A5(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function PE(e,t,r){var n=A5(e,t,r);return n=="#REF"?n:pq(n,r)}function Vc(e,t,r,n,a){var i=a&&a.biff||8,s={s:{c:0,r:0}},l=[],c,u,d,f=0,h=0,p,v="";if(!e[0]||!e[0][0])return"";for(var g=-1,x="",b=0,m=e[0].length;b<m;++b){var y=e[0][b];switch(y[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),g>=0){switch(e[0][g][1][0]){case 0:x=zt(" ",e[0][g][1][1]);break;case 1:x=zt("\r",e[0][g][1][1]);break;default:if(x="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}u=u+x,g=-1}l.push(u+hq[y[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Bd(y[1][1],s,a),l.push(Ud(d,i));break;case"PtgRefN":d=r?Bd(y[1][1],r,a):y[1][1],l.push(Ud(d,i));break;case"PtgRef3d":f=y[1][1],d=Bd(y[1][2],s,a),v=PE(n,f,a),l.push(v+"!"+Ud(d,i));break;case"PtgFunc":case"PtgFuncVar":var _=y[1][0],w=y[1][1];_||(_=0),_&=127;var S=_==0?[]:l.slice(-_);l.length-=_,w==="User"&&(w=S.shift()),l.push(w+"("+S.join(",")+")");break;case"PtgBool":l.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(y[1]);break;case"PtgNum":l.push(String(y[1]));break;case"PtgStr":l.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(y[1]);break;case"PtgAreaN":p=gE(y[1][1],r?{s:r}:s,a),l.push(xx(p,a));break;case"PtgArea":p=gE(y[1][1],s,a),l.push(xx(p,a));break;case"PtgArea3d":f=y[1][1],p=y[1][2],v=PE(n,f,a),l.push(v+"!"+xx(p,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=y[1][2];var j=(n.names||[])[h-1]||(n[0]||[])[h],E=j?j.Name:"SH33TJSNAME"+String(h);E&&E.slice(0,6)=="_xlfn."&&!a.xlfn&&(E=E.slice(6)),l.push(E);break;case"PtgNameX":var N=y[1][1];h=y[1][2];var A;if(a.biff<=5)N<0&&(N=-N),n[N]&&(A=n[N][h]);else{var C="";if(((n[N]||[])[0]||[])[0]==14849||(((n[N]||[])[0]||[])[0]==1025?n[N][h]&&n[N][h].itab>0&&(C=n.SheetNames[n[N][h].itab-1]+"!"):C=n.SheetNames[h-1]+"!"),n[N]&&n[N][h])C+=n[N][h].Name;else if(n[0]&&n[0][h])C+=n[0][h].Name;else{var D=(A5(n,N,a)||"").split(";;");D[h-1]?C=D[h-1]:C+="SH33TJSERRX"}l.push(C);break}A||(A={Name:"SH33TJSERRY"}),l.push(A.Name);break;case"PtgParen":var P="(",H=")";if(g>=0){switch(x="",e[0][g][1][0]){case 2:P=zt(" ",e[0][g][1][1])+P;break;case 3:P=zt("\r",e[0][g][1][1])+P;break;case 4:H=zt(" ",e[0][g][1][1])+H;break;case 5:H=zt("\r",e[0][g][1][1])+H;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}g=-1}l.push(P+l.pop()+H);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:y[1][1],r:y[1][0]};var V={c:r.c,r:r.r};if(n.sharedf[ft(d)]){var ae=n.sharedf[ft(d)];l.push(Vc(ae,s,V,n,a))}else{var oe=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(Vc(u[1],s,V,n,a)),oe=!0;break}oe||l.push(y[1])}break;case"PtgArray":l.push("{"+fq(y[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=b;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(y));default:throw new Error("Unrecognized Formula Token: "+String(y))}var X=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&g>=0&&X.indexOf(e[0][b][0])==-1){y=e[0][g];var re=!0;switch(y[1][0]){case 4:re=!1;case 0:x=zt(" ",y[1][1]);break;case 5:re=!1;case 1:x=zt("\r",y[1][1]);break;default:if(x="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}l.push((re?x:"")+l.pop()+(re?"":x)),g=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function mq(e){if(e==null){var t=se(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return sl(e);return sl(0)}function gq(e,t,r,n,a){var i=ol(t,r,a),s=mq(e.v),l=se(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=se(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Pr([i,s,l,u]);return f}function Rg(e,t,r){var n=e.read_shift(4),a=dq(e,n,r),i=e.read_shift(4),s=i>0?uq(e,i,a,r):null;return[a,s]}var vq=Rg,Ig=Rg,xq=Rg,yq=Rg,bq={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},O5={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},wq={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function _q(e){var t="of:="+e.replace(R_,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function Sq(e){return e.replace(/\./,"!")}var zd=typeof Map<"u";function M_(e,t,r){var n=0,a=e.length;if(r){if(zd?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=zd?r.get(t):r[t];n<i.length;++n)if(e[i[n]].t===t)return e.Count++,i[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(zd?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function Dg(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(Ci=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=Gp(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=_1(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function C5(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Zs(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,i=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){EP(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=i;++a)if(e[a].numFmtId===n)return a;return e[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function jq(e,t,r){if(e&&e["!ref"]){var n=Tt(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function Eq(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+rr(e[r])+'"/>';return t+"</mergeCells>"}function Nq(e,t,r,n,a){var i=!1,s={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,s.codeName=yf(ut(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),l=(l||"")+xe("outlinePr",null,u)}!i&&!l||(a[a.length]=xe("sheetPr",l,s))}var Tq=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Aq=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Oq(e){var t={sheet:1};return Tq.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),Aq.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=h5(e.password).toString(16).toUpperCase()),xe("sheetProtection",null,t)}function Cq(e){return C5(e),xe("pageMargins",null,e)}function kq(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=xe("col",null,Dg(a,n)));return r[r.length]="</cols>",r.join("")}function Pq(e,t,r,n){var a=typeof e.ref=="string"?e.ref:rr(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,s=Gn(a);s.s.r==s.e.r&&(s.e.r=Gn(t["!ref"]).e.r,a=rr(s));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),xe("autoFilter",null,{ref:a})}function Rq(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),xe("sheetViews",xe("sheetView",null,a),{})}function Iq(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",i=e.t,s=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=wh[e.v];break;case"d":n&&n.cellDates?a=un(e.v,-1).toISOString():(e=Tn(e),e.t="n",a=""+(e.v=Nn(un(e.v)))),typeof e.z>"u"&&(e.z=Wt[14]);break;default:a=e.v;break}var l=Rr("v",ut(a)),c={r:t},u=Zs(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Rr("v",""+M_(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=s),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=xe("f",ut(e.f),d)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),xe("c",l,c)}function Dq(e,t,r,n){var a=[],i=[],s=Tt(e["!ref"]),l="",c,u="",d=[],f=0,h=0,p=e["!rows"],v=Array.isArray(e),g={r:u},x,b=-1;for(h=s.s.c;h<=s.e.c;++h)d[h]=Vr(h);for(f=s.s.r;f<=s.e.r;++f){for(i=[],u=Dr(f),h=s.s.c;h<=s.e.c;++h){c=d[h]+u;var m=v?(e[f]||[])[h]:e[c];m!==void 0&&(l=Iq(m,c,e,t))!=null&&i.push(l)}(i.length>0||p&&p[f])&&(g={r:u},p&&p[f]&&(x=p[f],x.hidden&&(g.hidden=1),b=-1,x.hpx?b=Xp(x.hpx):x.hpt&&(b=x.hpt),b>-1&&(g.ht=b,g.customHeight=1),x.level&&(g.outlineLevel=x.level)),a[a.length]=xe("row",i.join(""),g))}if(p)for(;f<p.length;++f)p&&p[f]&&(g={r:f+1},x=p[f],x.hidden&&(g.hidden=1),b=-1,x.hpx?b=Xp(x.hpx):x.hpt&&(b=x.hpt),b>-1&&(g.ht=b,g.customHeight=1),x.level&&(g.outlineLevel=x.level),a[a.length]=xe("row","",g));return a.join("")}function k5(e,t,r,n){var a=[ar,xe("worksheet",null,{xmlns:Au[0],"xmlns:r":yr.r})],i=r.SheetNames[e],s=0,l="",c=r.Sheets[i];c==null&&(c={});var u=c["!ref"]||"A1",d=Tt(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=rr(d)}n||(n={}),c["!comments"]=[];var f=[];Nq(c,r,e,t,a),a[a.length]=xe("dimension",null,{ref:u}),a[a.length]=Rq(c,t,e,r),t.sheetFormat&&(a[a.length]=xe("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=kq(c,c["!cols"])),a[s=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=Dq(c,t),l.length>0&&(a[a.length]=l)),a.length>s+1&&(a[a.length]="</sheetData>",a[s]=a[s].replace("/>",">")),c["!protect"]&&(a[a.length]=Oq(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=Pq(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=Eq(c["!merges"]));var h=-1,p,v=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(g){g[1].Target&&(p={ref:g[0]},g[1].Target.charAt(0)!="#"&&(v=lt(n,-1,ut(g[1].Target).replace(/#.*$/,""),Qe.HLINK),p["r:id"]="rId"+v),(h=g[1].Target.indexOf("#"))>-1&&(p.location=ut(g[1].Target.slice(h+1))),g[1].Tooltip&&(p.tooltip=ut(g[1].Tooltip)),a[a.length]=xe("hyperlink",null,p))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=Cq(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=Rr("ignoredErrors",xe("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(v=lt(n,-1,"../drawings/drawing"+(e+1)+".xml",Qe.DRAW),a[a.length]=xe("drawing",null,{"r:id":"rId"+v}),c["!drawing"]=f),c["!comments"].length>0&&(v=lt(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Qe.VML),a[a.length]=xe("legacyDrawing",null,{"r:id":"rId"+v}),c["!legacy"]=v),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function Mq(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=a/20),r}function Lq(e,t,r){var n=se(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var i=320;a.hpx?i=Xp(a.hpx)*20:a.hpt&&(i=a.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var s=0;a.level&&(s|=a.level),a.hidden&&(s|=16),(a.hpx||a.hpt)&&(s|=32),n.write_shift(1,s),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,p=d<<10;p<d+1<<10;++p){u.c=p;var v=Array.isArray(r)?(r[u.r]||[])[u.c]:r[ft(u)];v&&(f<0&&(f=p),h=p)}f<0||(++l,n.write_shift(4,f),n.write_shift(4,h))}var g=n.l;return n.l=c,n.write_shift(4,l),n.l=g,n.length>n.l?n.slice(0,n.l):n}function $q(e,t,r,n){var a=Lq(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&de(e,0,a)}var Fq=jl,Bq=Cu;function Uq(){}function zq(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=JB(e),r}function qq(e,t,r){r==null&&(r=se(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return Hp({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),VP(e,r),r.slice(0,r.l)}function Wq(e){var t=ma(e);return[t]}function Hq(e,t,r){return r==null&&(r=se(8)),wl(t,r)}function Vq(e){var t=_l(e);return[t]}function Kq(e,t,r){return r==null&&(r=se(4)),Sl(t,r)}function Gq(e){var t=ma(e),r=e.read_shift(1);return[t,r,"b"]}function Xq(e,t,r){return r==null&&(r=se(9)),wl(t,r),r.write_shift(1,e.v?1:0),r}function Yq(e){var t=_l(e),r=e.read_shift(1);return[t,r,"b"]}function Qq(e,t,r){return r==null&&(r=se(5)),Sl(t,r),r.write_shift(1,e.v?1:0),r}function Jq(e){var t=ma(e),r=e.read_shift(1);return[t,r,"e"]}function Zq(e,t,r){return r==null&&(r=se(9)),wl(t,r),r.write_shift(1,e.v),r}function eW(e){var t=_l(e),r=e.read_shift(1);return[t,r,"e"]}function tW(e,t,r){return r==null&&(r=se(8)),Sl(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function rW(e){var t=ma(e),r=e.read_shift(4);return[t,r,"s"]}function nW(e,t,r){return r==null&&(r=se(12)),wl(t,r),r.write_shift(4,t.v),r}function aW(e){var t=_l(e),r=e.read_shift(4);return[t,r,"s"]}function iW(e,t,r){return r==null&&(r=se(8)),Sl(t,r),r.write_shift(4,t.v),r}function sW(e){var t=ma(e),r=ku(e);return[t,r,"n"]}function oW(e,t,r){return r==null&&(r=se(16)),wl(t,r),sl(e.v,r),r}function lW(e){var t=_l(e),r=ku(e);return[t,r,"n"]}function cW(e,t,r){return r==null&&(r=se(12)),Sl(t,r),sl(e.v,r),r}function uW(e){var t=ma(e),r=KP(e);return[t,r,"n"]}function dW(e,t,r){return r==null&&(r=se(12)),wl(t,r),GP(e.v,r),r}function fW(e){var t=_l(e),r=KP(e);return[t,r,"n"]}function hW(e,t,r){return r==null&&(r=se(8)),Sl(t,r),GP(e.v,r),r}function pW(e){var t=ma(e),r=A_(e);return[t,r,"is"]}function mW(e){var t=ma(e),r=Kr(e);return[t,r,"str"]}function gW(e,t,r){return r==null&&(r=se(12+4*e.v.length)),wl(t,r),wr(e.v,r),r.length>r.l?r.slice(0,r.l):r}function vW(e){var t=_l(e),r=Kr(e);return[t,r,"str"]}function xW(e,t,r){return r==null&&(r=se(8+4*e.v.length)),Sl(t,r),wr(e.v,r),r.length>r.l?r.slice(0,r.l):r}function yW(e,t,r){var n=e.l+t,a=ma(e);a.r=r["!row"];var i=e.read_shift(1),s=[a,i,"b"];if(r.cellFormula){e.l+=2;var l=Ig(e,n-e.l,r);s[3]=Vc(l,null,a,r.supbooks,r)}else e.l=n;return s}function bW(e,t,r){var n=e.l+t,a=ma(e);a.r=r["!row"];var i=e.read_shift(1),s=[a,i,"e"];if(r.cellFormula){e.l+=2;var l=Ig(e,n-e.l,r);s[3]=Vc(l,null,a,r.supbooks,r)}else e.l=n;return s}function wW(e,t,r){var n=e.l+t,a=ma(e);a.r=r["!row"];var i=ku(e),s=[a,i,"n"];if(r.cellFormula){e.l+=2;var l=Ig(e,n-e.l,r);s[3]=Vc(l,null,a,r.supbooks,r)}else e.l=n;return s}function _W(e,t,r){var n=e.l+t,a=ma(e);a.r=r["!row"];var i=Kr(e),s=[a,i,"str"];if(r.cellFormula){e.l+=2;var l=Ig(e,n-e.l,r);s[3]=Vc(l,null,a,r.supbooks,r)}else e.l=n;return s}var SW=jl,jW=Cu;function EW(e,t){return t==null&&(t=se(4)),t.write_shift(4,e),t}function NW(e,t){var r=e.l+t,n=jl(e),a=O_(e),i=Kr(e),s=Kr(e),l=Kr(e);e.l=r;var c={rfx:n,relId:a,loc:i,display:l};return s&&(c.Tooltip=s),c}function TW(e,t){var r=se(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Cu({s:br(e[0]),e:br(e[0])},r),C_("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return wr(a||"",r),wr(e[1].Tooltip||"",r),wr("",r),r.slice(0,r.l)}function AW(){}function OW(e,t,r){var n=e.l+t,a=XP(e),i=e.read_shift(1),s=[a];if(s[2]=i,r.cellFormula){var l=vq(e,n-e.l,r);s[1]=l}else e.l=n;return s}function CW(e,t,r){var n=e.l+t,a=jl(e),i=[a];if(r.cellFormula){var s=yq(e,n-e.l,r);i[1]=s,e.l=n}else e.l=n;return i}function kW(e,t,r){r==null&&(r=se(18));var n=Dg(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var P5=["left","right","top","bottom","header","footer"];function PW(e){var t={};return P5.forEach(function(r){t[r]=ku(e)}),t}function RW(e,t){return t==null&&(t=se(6*8)),C5(e),P5.forEach(function(r){sl(e[r],t)}),t}function IW(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function DW(e,t,r){r==null&&(r=se(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function MW(e){var t=se(24);return t.write_shift(4,4),t.write_shift(4,1),Cu(e,t),t}function LW(e,t){return t==null&&(t=se(16*4+2)),t.write_shift(2,e.password?h5(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function $W(){}function FW(){}function BW(e,t,r,n,a,i,s){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=Tn(t),t.z=t.z||Wt[14],t.v=Nn(un(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:n};switch(c.s=Zs(a.cellXfs,t,a),t.l&&i["!links"].push([ft(c),t.l]),t.c&&i["!comments"].push([ft(c),t.c]),t.t){case"s":case"str":return a.bookSST?(l=M_(a.Strings,t.v,a.revStrings),c.t="s",c.v=l,s?de(e,18,iW(t,c)):de(e,7,nW(t,c))):(c.t="str",s?de(e,17,xW(t,c)):de(e,6,gW(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?s?de(e,13,hW(t,c)):de(e,2,dW(t,c)):s?de(e,16,cW(t,c)):de(e,5,oW(t,c)),!0;case"b":return c.t="b",s?de(e,15,Qq(t,c)):de(e,4,Xq(t,c)),!0;case"e":return c.t="e",s?de(e,14,tW(t,c)):de(e,3,Zq(t,c)),!0}return s?de(e,12,Kq(t,c)):de(e,1,Hq(t,c)),!0}function UW(e,t,r,n){var a=Tt(t["!ref"]||"A1"),i,s="",l=[];de(e,145);var c=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){s=Dr(d),$q(e,t,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(l[h]=Vr(h)),i=l[h]+s;var p=c?(t[d]||[])[h]:t[i];if(!p){f=!1;continue}f=BW(e,p,d,h,n,t,f)}}de(e,146)}function zW(e,t){!t||!t["!merges"]||(de(e,177,EW(t["!merges"].length)),t["!merges"].forEach(function(r){de(e,176,jW(r))}),de(e,178))}function qW(e,t){!t||!t["!cols"]||(de(e,390),t["!cols"].forEach(function(r,n){r&&de(e,60,kW(n,r))}),de(e,391))}function WW(e,t){!t||!t["!ref"]||(de(e,648),de(e,649,MW(Tt(t["!ref"]))),de(e,650))}function HW(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=lt(r,-1,n[1].Target.replace(/#.*$/,""),Qe.HLINK);de(e,494,TW(n,a))}}),delete t["!links"]}function VW(e,t,r,n){if(t["!comments"].length>0){var a=lt(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Qe.VML);de(e,551,C_("rId"+a)),t["!legacy"]=a}}function KW(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],i=typeof a.ref=="string"?a.ref:rr(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,l=Gn(i);l.s.r==l.e.r&&(l.e.r=Gn(t["!ref"]).e.r,i=rr(l));for(var c=0;c<s.length;++c){var u=s[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+i;break}}c==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),de(e,161,Cu(Tt(i))),de(e,162)}}function GW(e,t,r){de(e,133),de(e,137,DW(t,r)),de(e,138),de(e,134)}function XW(e,t){t["!protect"]&&de(e,535,LW(t["!protect"]))}function YW(e,t,r,n){var a=En(),i=r.SheetNames[e],s=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=Tt(s["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return s["!links"]=[],s["!comments"]=[],de(a,129),(r.vbaraw||s["!outline"])&&de(a,147,qq(l,s["!outline"])),de(a,148,Bq(c)),GW(a,s,r.Workbook),qW(a,s),UW(a,s,e,t),XW(a,s),KW(a,s,r,e),zW(a,s),HW(a,s,n),s["!margins"]&&de(a,476,RW(s["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&WW(a,s),VW(a,s,e,n),de(a,130),a.end()}function QW(e,t){e.l+=10;var r=Kr(e);return{name:r}}var JW=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function ZW(e){return!e.Workbook||!e.Workbook.WBProps?"false":CB(e.Workbook.WBProps.date1904)?"true":"false"}var eH="][*?/\\".split("");function R5(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return eH.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function tH(e,t,r){e.forEach(function(n,a){R5(n);for(var i=0;i<a;++i)if(n==e[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var s=t&&t[a]&&t[a].CodeName||n;if(s.charCodeAt(0)==95&&s.length>22)throw new Error("Bad Code Name: Worksheet"+s)}})}function rH(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];tH(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)jq(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}function I5(e){var t=[ar];t[t.length]=xe("workbook",null,{xmlns:Au[0],"xmlns:r":yr.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(JW.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=xe("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],i=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!a[i]||!a[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var s={name:ut(e.SheetNames[i].slice(0,31))};if(s.sheetId=""+(i+1),s["r:id"]="rId"+(i+1),a[i])switch(a[i].Hidden){case 1:s.state="hidden";break;case 2:s.state="veryHidden";break}t[t.length]=xe("sheet",null,s)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=xe("definedName",ut(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function nH(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=w1(e),r.name=Kr(e),r}function aH(e,t){return t||(t=se(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),C_(e.strRelID,t),wr(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function iH(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?Kr(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function sH(e,t){t||(t=se(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),VP(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function oH(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),i=ZB(e),s=xq(e,0,r),l=O_(e);e.l=n;var c={Name:i,Ptg:s};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function lH(e,t){de(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};de(e,156,aH(a))}de(e,144)}function cH(e,t){t||(t=se(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return wr("SheetJS",t),wr(Lp.version,t),wr(Lp.version,t),wr("7262",t),t.length>t.l?t.slice(0,t.l):t}function uH(e,t){t||(t=se(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function dH(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&i==-1&&(i=n);i>a||(de(e,135),de(e,158,uH(a)),de(e,136))}}function fH(e,t){var r=En();return de(r,131),de(r,128,cH()),de(r,153,sH(e.Workbook&&e.Workbook.WBProps||null)),dH(r,e),lH(r,e),de(r,132),r.end()}function hH(e,t,r){return(t.slice(-4)===".bin"?fH:I5)(e)}function pH(e,t,r,n,a){return(t.slice(-4)===".bin"?YW:k5)(e,r,n,a)}function mH(e,t,r){return(t.slice(-4)===".bin"?RU:g5)(e,r)}function gH(e,t,r){return(t.slice(-4)===".bin"?sU:f5)(e,r)}function vH(e,t,r){return(t.slice(-4)===".bin"?XU:w5)(e)}function xH(e){return(e.slice(-4)===".bin"?UU:y5)()}function yH(e,t){var r=[];return e.Props&&r.push(m9(e.Props,t)),e.Custprops&&r.push(g9(e.Props,e.Custprops)),r.join("")}function bH(){return""}function wH(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var i=[];i.push(xe("NumberFormat",null,{"ss:Format":ut(Wt[n.numFmtId])}));var s={"ss:ID":"s"+(21+a)};r.push(xe("Style",i.join(""),s))}),xe("Styles",r.join(""))}function D5(e){return xe("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+I_(e.Ref,{r:0,c:0})})}function _H(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(D5(a)))}return xe("Names",r.join(""))}function SH(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,i=[],s=0;s<a.length;++s){var l=a[s];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(D5(l)))}return i.join("")}function jH(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(xe("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(xe("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(xe("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(xe("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(Rr("ProtectContents","True")),e["!protect"].objects&&a.push(Rr("ProtectObjects","True")),e["!protect"].scenarios&&a.push(Rr("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(Rr("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(Rr("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(s){e["!protect"][s[0]]&&a.push("<"+s[1]+"/>")})),a.length==0?"":xe("WorksheetOptions",a.join(""),{xmlns:Mn.x})}function EH(e){return e.map(function(t){var r=OB(t.t||""),n=xe("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return xe("Comment",n,{"ss:Author":t.a})}).join("")}function NH(e,t,r,n,a,i,s){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+ut(I_(e.f,s))),e.F&&e.F.slice(0,t.length)==t){var c=br(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==s.r?"":"["+(c.r-s.r)+"]")+"C"+(c.c==s.c?"":"["+(c.c-s.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=ut(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=ut(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=s.c||u[d].s.r!=s.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=wh[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Wt[14]);break;case"s":f="String",h=AB(e.v||"");break}var p=Zs(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+p),l["ss:Index"]=s.c+1;var v=e.v!=null?h:"",g=e.t=="z"?"":'<Data ss:Type="'+f+'">'+v+"</Data>";return(e.c||[]).length>0&&(g+=EH(e.c)),xe("Cell",g,l)}function TH(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=m5(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function AH(e,t,r,n){if(!e["!ref"])return"";var a=Tt(e["!ref"]),i=e["!merges"]||[],s=0,l=[];e["!cols"]&&e["!cols"].forEach(function(x,b){P_(x);var m=!!x.width,y=Dg(b,x),_={"ss:Index":b+1};m&&(_["ss:Width"]=Kp(y.width)),x.hidden&&(_["ss:Hidden"]="1"),l.push(xe("Column",null,_))});for(var c=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[TH(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(s=0;s!=i.length;++s)if(!(i[s].s.c>f)&&!(i[s].s.r>u)&&!(i[s].e.c<f)&&!(i[s].e.r<u)){(i[s].s.c!=f||i[s].s.r!=u)&&(h=!0);break}if(!h){var p={r:u,c:f},v=ft(p),g=c?(e[u]||[])[f]:e[v];d.push(NH(g,v,e,t,r,n,p))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function OH(e,t,r){var n=[],a=r.SheetNames[e],i=r.Sheets[a],s=i?SH(i,t,e,r):"";return s.length>0&&n.push("<Names>"+s+"</Names>"),s=i?AH(i,t,e,r):"",s.length>0&&n.push("<Table>"+s+"</Table>"),n.push(jH(i,t,e,r)),n.join("")}function CH(e,t){t||(t={}),e.SSF||(e.SSF=Tn(Wt)),e.SSF&&(Cg(),Og(e.SSF),t.revssf=kg(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Zs(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(yH(e,t)),r.push(bH()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(xe("Worksheet",OH(n,t,e),{"ss:Name":ut(e.SheetNames[n])}));return r[2]=wH(e,t),r[3]=_H(e),ar+xe("Workbook",r.join(""),{xmlns:Mn.ss,"xmlns:o":Mn.o,"xmlns:x":Mn.x,"xmlns:ss":Mn.ss,"xmlns:dt":Mn.dt,"xmlns:html":Mn.html})}var wx={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function kH(e,t){var r=[],n=[],a=[],i=0,s,l=iE(xE,"n"),c=iE(yE,"n");if(e.Props)for(s=Lr(e.Props),i=0;i<s.length;++i)(Object.prototype.hasOwnProperty.call(l,s[i])?r:Object.prototype.hasOwnProperty.call(c,s[i])?n:a).push([s[i],e.Props[s[i]]]);if(e.Custprops)for(s=Lr(e.Custprops),i=0;i<s.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},s[i])||(Object.prototype.hasOwnProperty.call(l,s[i])?r:Object.prototype.hasOwnProperty.call(c,s[i])?n:a).push([s[i],e.Custprops[s[i]]]);var u=[];for(i=0;i<a.length;++i)i5.indexOf(a[i][0])>-1||r5.indexOf(a[i][0])>-1||a[i][1]!=null&&u.push(a[i]);n.length&&pt.utils.cfb_add(t,"/SummaryInformation",jE(n,wx.SI,c,yE)),(r.length||u.length)&&pt.utils.cfb_add(t,"/DocumentSummaryInformation",jE(r,wx.DSI,l,xE,u.length?u:null,wx.UDI))}function PH(e,t){var r=t||{},n=pt.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return pt.utils.cfb_add(n,a,M5(e,r)),r.biff==8&&(e.Props||e.Custprops)&&kH(e,n),r.biff==8&&e.vbaraw&&YU(n,pt.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var RH={0:{f:Mq},1:{f:Wq},2:{f:uW},3:{f:Jq},4:{f:Gq},5:{f:sW},6:{f:mW},7:{f:rW},8:{f:_W},9:{f:wW},10:{f:yW},11:{f:bW},12:{f:Vq},13:{f:fW},14:{f:eW},15:{f:Yq},16:{f:lW},17:{f:vW},18:{f:aW},19:{f:A_},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:oH},40:{},42:{},43:{f:mU},44:{f:hU},45:{f:xU},46:{f:bU},47:{f:yU},48:{},49:{f:VB},50:{},51:{f:MU},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:K9},62:{f:pW},63:{f:zU},64:{f:$W},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ai,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:IW},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:zq},148:{f:Fq,p:16},151:{f:AW},152:{},153:{f:iH},154:{},155:{},156:{f:nH},157:{},158:{},159:{T:1,f:nU},160:{T:-1},161:{T:1,f:jl},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:SW},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:IU},336:{T:-1},337:{f:FU,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:w1},357:{},358:{},359:{},360:{T:1},361:{},362:{f:U9},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:OW},427:{f:CW},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:PW},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Uq},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:NW},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:w1},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:KU},633:{T:1},634:{T:-1},635:{T:1,f:HU},636:{T:-1},637:{f:YB},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:QW},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:FW},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function ye(e,t,r,n){var a=t;if(!isNaN(a)){var i=n||(r||[]).length||0,s=e.next(4);s.write_shift(2,a),s.write_shift(2,i),i>0&&E_(r)&&e.push(r)}}function IH(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return ye(e,t,r,a);var i=t;if(!isNaN(i)){for(var s=r.parts||[],l=0,c=0,u=0;u+(s[l]||8224)<=8224;)u+=s[l]||8224,l++;var d=e.next(4);for(d.write_shift(2,i),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(s[l]||8224)<=8224;)u+=s[l]||8224,l++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function Sh(e,t,r){return e||(e=se(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function DH(e,t,r,n){var a=se(9);return Sh(a,e,t),o5(r,n||"b",a),a}function MH(e,t,r){var n=se(8+2*r.length);return Sh(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function LH(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?Nn(un(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?ye(e,2,Q9(r,n,a)):ye(e,3,Y9(r,n,a));return;case"b":case"e":ye(e,5,DH(r,n,t.v,t.t));return;case"s":case"str":ye(e,4,MH(r,n,(t.v||"").slice(0,255)));return}ye(e,1,Sh(null,r,n))}function $H(e,t,r,n){var a=Array.isArray(t),i=Tt(t["!ref"]||"A1"),s,l="",c=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),s=rr(i)}for(var u=i.s.r;u<=i.e.r;++u){l=Dr(u);for(var d=i.s.c;d<=i.e.c;++d){u===i.s.r&&(c[d]=Vr(d)),s=c[d]+l;var f=a?(t[u]||[])[d]:t[s];f&&LH(e,f,u,d)}}}function FH(e,t){for(var r=t||{},n=En(),a=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(a=i);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return ye(n,r.biff==4?1033:r.biff==3?521:9,k_(e,16,r)),$H(n,e.Sheets[e.SheetNames[a]],a,r),ye(n,10),n.end()}function BH(e,t,r){ye(e,49,R9({sz:12,name:"Arial"},r))}function UH(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&ye(e,1054,M9(a,t[a],r))})}function zH(e,t){var r=se(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),ye(e,2151,r),r=se(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),u5(Tt(t["!ref"]||"A1"),r),r.write_shift(4,4),ye(e,2152,r)}function qH(e,t){for(var r=0;r<16;++r)ye(e,224,NE({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){ye(e,224,NE(n,0,t))})}function WH(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];ye(e,440,W9(n)),n[1].Tooltip&&ye(e,2048,H9(n))}delete t["!links"]}function HH(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&ye(e,125,G9(Dg(a,n),a))})}}function VH(e,t,r,n,a){var i=16+Zs(a.cellXfs,t,a);if(t.v==null&&!t.bf){ye(e,513,ol(r,n,i));return}if(t.bf)ye(e,6,gq(t,r,n,a,i));else switch(t.t){case"d":case"n":var s=t.t=="d"?Nn(un(t.v)):t.v;ye(e,515,B9(r,n,s,i));break;case"b":case"e":ye(e,517,F9(r,n,t.v,i,a,t.t));break;case"s":case"str":if(a.bookSST){var l=M_(a.Strings,t.v,a.revStrings);ye(e,253,I9(r,n,l,i))}else ye(e,516,D9(r,n,(t.v||"").slice(0,255),i,a));break;default:ye(e,513,ol(r,n,i))}}function KH(e,t,r){var n=En(),a=r.SheetNames[e],i=r.Sheets[a]||{},s=(r||{}).Workbook||{},l=(s.Sheets||[])[e]||{},c=Array.isArray(i),u=t.biff==8,d,f="",h=[],p=Tt(i["!ref"]||"A1"),v=u?65536:16384;if(p.e.c>255||p.e.r>=v){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,v-1)}ye(n,2057,k_(r,16,t)),ye(n,13,na(1)),ye(n,12,na(100)),ye(n,15,nn(!0)),ye(n,17,nn(!1)),ye(n,16,sl(.001)),ye(n,95,nn(!0)),ye(n,42,nn(!1)),ye(n,43,nn(!1)),ye(n,130,na(1)),ye(n,128,$9()),ye(n,131,nn(!1)),ye(n,132,nn(!1)),u&&HH(n,i["!cols"]),ye(n,512,L9(p,t)),u&&(i["!links"]=[]);for(var g=p.s.r;g<=p.e.r;++g){f=Dr(g);for(var x=p.s.c;x<=p.e.c;++x){g===p.s.r&&(h[x]=Vr(x)),d=h[x]+f;var b=c?(i[g]||[])[x]:i[d];b&&(VH(n,b,g,x,t),u&&b.l&&i["!links"].push([d,b.l]))}}var m=l.CodeName||l.name||a;return u&&ye(n,574,P9((s.Views||[])[0])),u&&(i["!merges"]||[]).length&&ye(n,229,q9(i["!merges"])),u&&WH(n,i),ye(n,442,c5(m)),u&&zH(n,i),ye(n,10),n.end()}function GH(e,t,r){var n=En(),a=(e||{}).Workbook||{},i=a.Sheets||[],s=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(ye(n,2057,k_(e,5,r)),r.bookType=="xla"&&ye(n,135),ye(n,225,l?na(1200):null),ye(n,193,y9(2)),c&&ye(n,191),c&&ye(n,192),ye(n,226),ye(n,92,A9("SheetJS",r)),ye(n,66,na(l?1200:1252)),l&&ye(n,353,na(0)),l&&ye(n,448),ye(n,317,X9(e.SheetNames.length)),l&&e.vbaraw&&ye(n,211),l&&e.vbaraw){var u=s.CodeName||"ThisWorkbook";ye(n,442,c5(u))}ye(n,156,na(17)),ye(n,25,nn(!1)),ye(n,18,nn(!1)),ye(n,19,na(0)),l&&ye(n,431,nn(!1)),l&&ye(n,444,na(0)),ye(n,61,k9()),ye(n,64,nn(!1)),ye(n,141,na(0)),ye(n,34,nn(ZW(e)=="true")),ye(n,14,nn(!0)),l&&ye(n,439,nn(!1)),ye(n,218,na(0)),BH(n,e,r),UH(n,e.SSF,r),qH(n,r),l&&ye(n,352,nn(!1));var d=n.end(),f=En();l&&ye(f,140,V9()),l&&r.Strings&&IH(f,252,C9(r.Strings)),ye(f,10);var h=f.end(),p=En(),v=0,g=0;for(g=0;g<e.SheetNames.length;++g)v+=(l?12:11)+(l?2:1)*e.SheetNames[g].length;var x=d.length+v+h.length;for(g=0;g<e.SheetNames.length;++g){var b=i[g]||{};ye(p,133,O9({pos:x,hs:b.Hidden||0,dt:0,name:e.SheetNames[g]},r)),x+=t[g].length}var m=p.end();if(v!=m.length)throw new Error("BS8 "+v+" != "+m.length);var y=[];return d.length&&y.push(d),m.length&&y.push(m),h.length&&y.push(h),Pr(y)}function XH(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Tn(Wt)),e&&e.SSF&&(Cg(),Og(e.SSF),r.revssf=kg(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,L_(r),r.cellXfs=[],Zs(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=KH(a,r,e);return n.unshift(GH(e,n,r)),Pr(n)}function M5(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Gn(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return XH(e,t);case 4:case 3:case 2:return FH(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function YH(e,t,r,n){for(var a=e["!merges"]||[],i=[],s=t.s.c;s<=t.e.c;++s){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>s)&&!(a[u].e.r<r||a[u].e.c<s)){if(a[u].s.r<r||a[u].s.c<s){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=ft({r,c:s}),f=n.dense?(e[r]||[])[s]:e[d],h=f&&f.v!=null&&(f.h||TB(f.w||(Ui(f),f.w)||""))||"",p={};l>1&&(p.rowspan=l),c>1&&(p.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),p.id=(n.id||"sjs")+"-"+d,i.push(xe("td",h,p))}}var v="<tr>";return v+i.join("")+"</tr>"}var QH='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',JH="</body></html>";function ZH(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function L5(e,t){var r=t||{},n=r.header!=null?r.header:QH,a=r.footer!=null?r.footer:JH,i=[n],s=Gn(e["!ref"]);r.dense=Array.isArray(e),i.push(ZH(e,s,r));for(var l=s.s.r;l<=s.e.r;++l)i.push(YH(e,s,l,r));return i.push("</table>"+a),i.join("")}function $5(e,t,r){var n=r||{},a=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var s=typeof n.origin=="string"?br(n.origin):n.origin;a=s.r,i=s.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:i}};if(e["!ref"]){var d=Gn(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,p=e["!rows"]||(e["!rows"]=[]),v=0,g=0,x=0,b=0,m=0,y=0;for(e["!cols"]||(e["!cols"]=[]);v<l.length&&g<c;++v){var _=l[v];if(RE(_)){if(n.display)continue;p[g]={hidden:!0}}var w=_.children;for(x=b=0;x<w.length;++x){var S=w[x];if(!(n.display&&RE(S))){var j=S.hasAttribute("data-v")?S.getAttribute("data-v"):S.hasAttribute("v")?S.getAttribute("v"):kB(S.innerHTML),E=S.getAttribute("data-z")||S.getAttribute("z");for(h=0;h<f.length;++h){var N=f[h];N.s.c==b+i&&N.s.r<g+a&&g+a<=N.e.r&&(b=N.e.c+1-i,h=-1)}y=+S.getAttribute("colspan")||1,((m=+S.getAttribute("rowspan")||1)>1||y>1)&&f.push({s:{r:g+a,c:b+i},e:{r:g+a+(m||1)-1,c:b+i+(y||1)-1}});var A={t:"s",v:j},C=S.getAttribute("data-t")||S.getAttribute("t")||"";j!=null&&(j.length==0?A.t=C||"z":n.raw||j.trim().length==0||C=="s"||(j==="TRUE"?A={t:"b",v:!0}:j==="FALSE"?A={t:"b",v:!1}:isNaN(Oi(j))?isNaN(xf(j).getDate())||(A={t:"d",v:un(j)},n.cellDates||(A={t:"n",v:Nn(A.v)}),A.z=n.dateNF||Wt[14]):A={t:"n",v:Oi(j)})),A.z===void 0&&E!=null&&(A.z=E);var D="",P=S.getElementsByTagName("A");if(P&&P.length)for(var H=0;H<P.length&&!(P[H].hasAttribute("href")&&(D=P[H].getAttribute("href"),D.charAt(0)!="#"));++H);D&&D.charAt(0)!="#"&&(A.l={Target:D}),n.dense?(e[g+a]||(e[g+a]=[]),e[g+a][b+i]=A):e[ft({c:b+i,r:g+a})]=A,u.e.c<b+i&&(u.e.c=b+i),b+=y}}++g}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,g-1+a),e["!ref"]=rr(u),g>=c&&(e["!fullref"]=rr((u.e.r=l.length-v+g-1+a,u))),e}function F5(e,t){var r=t||{},n=r.dense?[]:{};return $5(n,e,t)}function eV(e,t){return bl(F5(e,t),t)}function RE(e){var t="",r=tV(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function tV(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var rV=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+bf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return ar+t}}(),IE=function(){var e=function(i){return ut(i).replace(/  +/g,function(s){return'<text:s text:c="'+s.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,s,l){var c=[];c.push('      <table:table table:name="'+ut(s.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=Gn(i["!ref"]||"A1"),h=i["!merges"]||[],p=0,v=Array.isArray(i);if(i["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(i["!cols"][d]?' table:style-name="co'+i["!cols"][d].ods+'"':"")+`></table:table-column>
`);var g="",x=i["!rows"]||[];for(u=0;u<f.s.r;++u)g=x[u]?' table:style-name="ro'+x[u].ods+'"':"",c.push("        <table:table-row"+g+`></table:table-row>
`);for(;u<=f.e.r;++u){for(g=x[u]?' table:style-name="ro'+x[u].ods+'"':"",c.push("        <table:table-row"+g+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var b=!1,m={},y="";for(p=0;p!=h.length;++p)if(!(h[p].s.c>d)&&!(h[p].s.r>u)&&!(h[p].e.c<d)&&!(h[p].e.r<u)){(h[p].s.c!=d||h[p].s.r!=u)&&(b=!0),m["table:number-columns-spanned"]=h[p].e.c-h[p].s.c+1,m["table:number-rows-spanned"]=h[p].e.r-h[p].s.r+1;break}if(b){c.push(r);continue}var _=ft({r:u,c:d}),w=v?(i[u]||[])[d]:i[_];if(w&&w.f&&(m["table:formula"]=ut(_q(w.f)),w.F&&w.F.slice(0,_.length)==_)){var S=Gn(w.F);m["table:number-matrix-columns-spanned"]=S.e.c-S.s.c+1,m["table:number-matrix-rows-spanned"]=S.e.r-S.s.r+1}if(!w){c.push(t);continue}switch(w.t){case"b":y=w.v?"TRUE":"FALSE",m["office:value-type"]="boolean",m["office:boolean-value"]=w.v?"true":"false";break;case"n":y=w.w||String(w.v||0),m["office:value-type"]="float",m["office:value"]=w.v||0;break;case"s":case"str":y=w.v==null?"":w.v,m["office:value-type"]="string";break;case"d":y=w.w||un(w.v).toISOString(),m["office:value-type"]="date",m["office:date-value"]=un(w.v).toISOString(),m["table:style-name"]="ce1";break;default:c.push(t);continue}var j=e(y);if(w.l&&w.l.Target){var E=w.l.Target;E=E.charAt(0)=="#"?"#"+Sq(E.slice(1)):E,E.charAt(0)!="#"&&!E.match(/^\w+:/)&&(E="../"+E),j=xe("text:a",j,{"xlink:href":E.replace(/&/g,"&amp;")})}c.push("          "+xe("table:table-cell",xe("text:p",j,{}),m)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(i,s){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;s.SheetNames.map(function(u){return s.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;P_(f),f.ods=l;var h=u["!cols"][d].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;s.SheetNames.map(function(u){return s.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(s,l){var c=[ar],u=bf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=bf({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(e5().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,s),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=s.SheetNames.length;++f)c.push(n(s.Sheets[s.SheetNames[f]],s,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function B5(e,t){if(t.bookType=="fods")return IE(e,t);var r=w_(),n="",a=[],i=[];return n="mimetype",ze(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",ze(r,n,IE(e,t)),a.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",ze(r,n,rV(e,t)),a.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",ze(r,n,ar+e5()),a.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",ze(r,n,p9(i)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",ze(r,n,f9(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Yp(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function nV(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Pa(yf(e))}function aV(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Ks(e){var t=e.reduce(function(a,i){return a+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function iV(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var i=0;a>=1;++i,a/=256)e[t+i]=a&255;e[t+15]|=r>=0?0:128}function wf(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function ot(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function gc(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function or(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=wf(e,r),i=a&7;a=Math.floor(a/8);var s=0,l;if(a==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:s=4,l=e.slice(r[0],r[0]+s),r[0]+=s;break;case 1:s=8,l=e.slice(r[0],r[0]+s),r[0]+=s;break;case 2:s=wf(e,r),l=e.slice(r[0],r[0]+s),r[0]+=s;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:i};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function Tr(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(ot(n*8+a.type)),a.type==2&&t.push(ot(a.data.length)),t.push(a.data))})}),Ks(t)}function ya(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=wf(e,n),i=or(e.slice(n[0],n[0]+a));n[0]+=a;var s={id:gc(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=or(l.data),u=gc(c[3][0].data);s.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=i[3])!=null&&t[0]&&(s.merge=gc(i[3][0].data)>>>0>0),r.push(s)}return r}function kl(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:ot(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:ot(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(s){a.push(s.data),s.meta[3]=[{type:0,data:ot(s.data.length)}],n[2].push({data:Tr(s.meta),type:2})});var i=Tr(n);t.push(ot(i.length)),t.push(i),a.forEach(function(s){return t.push(s)})}),Ks(t)}function sV(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=wf(t,r),a=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var s=t[r[0]++]>>2;if(s<60)++s;else{var l=s-59;s=t[r[0]],l>1&&(s|=t[r[0]+1]<<8),l>2&&(s|=t[r[0]+2]<<16),l>3&&(s|=t[r[0]+3]<<24),s>>>=0,s++,r[0]+=l}a.push(t.slice(r[0],r[0]+s)),r[0]+=s;continue}else{var c=0,u=0;if(i==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Ks(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=Ks(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function ba(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(sV(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Ks(t)}function Pl(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var i=ot(n),s=i.length;t.push(i),n<=60?(s++,t.push(new Uint8Array([n-1<<2]))):n<=256?(s+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(s+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(s+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(s+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),s+=n,a[0]=0,a[1]=s&255,a[2]=s>>8&255,a[3]=s>>16&255,r+=n}return Ks(t)}function _x(e,t){var r=new Uint8Array(32),n=Yp(r),a=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,iV(r,a,e.v),i|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),i|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,i,!0),r.slice(0,a)}function Sx(e,t){var r=new Uint8Array(32),n=Yp(r),a=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),i|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),i|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,i,!0),r.slice(0,a)}function as(e){var t=or(e);return wf(t[1][0].data)}function oV(e,t,r){var n,a,i,s;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((s=(i=e[8])==null?void 0:i[0])==null?void 0:s.data)&&gc(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=Yp(e[7][0].data),d=0,f=[],h=Yp(e[4][0].data),p=0,v=[],g=0;g<t.length;++g){if(t[g]==null){u.setUint16(g*2,65535,!0),h.setUint16(g*2,65535);continue}u.setUint16(g*2,d,!0),h.setUint16(g*2,p,!0);var x,b;switch(typeof t[g]){case"string":x=_x({t:"s",v:t[g]},r),b=Sx({t:"s",v:t[g]},r);break;case"number":x=_x({t:"n",v:t[g]},r),b=Sx({t:"n",v:t[g]},r);break;case"boolean":x=_x({t:"b",v:t[g]},r),b=Sx({t:"b",v:t[g]},r);break;default:throw new Error("Unsupported value "+t[g])}f.push(x),d+=x.length,v.push(b),p+=b.length,++c}for(e[2][0].data=ot(c);g<e[7][0].data.length/2;++g)u.setUint16(g*2,65535,!0),h.setUint16(g*2,65535,!0);return e[6][0].data=Ks(f),e[3][0].data=Ks(v),c}function lV(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Gn(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(rr(n)));var i=Qp(r,{range:n,header:1}),s=["~Sh33tJ5~"];i.forEach(function(W){return W.forEach(function(U){typeof U=="string"&&s.push(U)})});var l={},c=[],u=pt.read(t.numbers,{type:"base64"});u.FileIndex.map(function(W,U){return[W,u.FullPaths[U]]}).forEach(function(W){var U=W[0],q=W[1];if(U.type==2&&U.name.match(/\.iwa/)){var ie=U.content,Se=ba(ie),Z=ya(Se);Z.forEach(function(K){c.push(K.id),l[K.id]={deps:[],location:q,type:gc(K.messages[0].meta[1][0].data)}})}}),c.sort(function(W,U){return W-U});var d=c.filter(function(W){return W>1}).map(function(W){return[W,ot(W)]});u.FileIndex.map(function(W,U){return[W,u.FullPaths[U]]}).forEach(function(W){var U=W[0];if(W[1],!!U.name.match(/\.iwa/)){var q=ya(ba(U.content));q.forEach(function(ie){ie.messages.forEach(function(Se){d.forEach(function(Z){ie.messages.some(function(K){return gc(K.meta[1][0].data)!=11006&&aV(K.data,Z[1])})&&l[Z[0]].deps.push(ie.id)})})})}});for(var f=pt.find(u,l[1].location),h=ya(ba(f.content)),p,v=0;v<h.length;++v){var g=h[v];g.id==1&&(p=g)}var x=as(or(p.messages[0].data)[1][0].data);for(f=pt.find(u,l[x].location),h=ya(ba(f.content)),v=0;v<h.length;++v)g=h[v],g.id==x&&(p=g);for(x=as(or(p.messages[0].data)[2][0].data),f=pt.find(u,l[x].location),h=ya(ba(f.content)),v=0;v<h.length;++v)g=h[v],g.id==x&&(p=g);for(x=as(or(p.messages[0].data)[2][0].data),f=pt.find(u,l[x].location),h=ya(ba(f.content)),v=0;v<h.length;++v)g=h[v],g.id==x&&(p=g);var b=or(p.messages[0].data);{b[6][0].data=ot(n.e.r+1),b[7][0].data=ot(n.e.c+1);var m=as(b[46][0].data),y=pt.find(u,l[m].location),_=ya(ba(y.content));{for(var w=0;w<_.length&&_[w].id!=m;++w);if(_[w].id!=m)throw"Bad ColumnRowUIDMapArchive";var S=or(_[w].messages[0].data);S[1]=[],S[2]=[],S[3]=[];for(var j=0;j<=n.e.c;++j){var E=[];E[1]=E[2]=[{type:0,data:ot(j+420690)}],S[1].push({type:2,data:Tr(E)}),S[2].push({type:0,data:ot(j)}),S[3].push({type:0,data:ot(j)})}S[4]=[],S[5]=[],S[6]=[];for(var N=0;N<=n.e.r;++N)E=[],E[1]=E[2]=[{type:0,data:ot(N+726270)}],S[4].push({type:2,data:Tr(E)}),S[5].push({type:0,data:ot(N)}),S[6].push({type:0,data:ot(N)});_[w].messages[0].data=Tr(S)}y.content=Pl(kl(_)),y.size=y.content.length,delete b[46];var A=or(b[4][0].data);{A[7][0].data=ot(n.e.r+1);var C=or(A[1][0].data),D=as(C[2][0].data);y=pt.find(u,l[D].location),_=ya(ba(y.content));{if(_[0].id!=D)throw"Bad HeaderStorageBucket";var P=or(_[0].messages[0].data);for(N=0;N<i.length;++N){var H=or(P[2][0].data);H[1][0].data=ot(N),H[4][0].data=ot(i[N].length),P[2][N]={type:P[2][0].type,data:Tr(H)}}_[0].messages[0].data=Tr(P)}y.content=Pl(kl(_)),y.size=y.content.length;var V=as(A[2][0].data);y=pt.find(u,l[V].location),_=ya(ba(y.content));{if(_[0].id!=V)throw"Bad HeaderStorageBucket";for(P=or(_[0].messages[0].data),j=0;j<=n.e.c;++j)H=or(P[2][0].data),H[1][0].data=ot(j),H[4][0].data=ot(n.e.r+1),P[2][j]={type:P[2][0].type,data:Tr(H)};_[0].messages[0].data=Tr(P)}y.content=Pl(kl(_)),y.size=y.content.length;var ae=as(A[4][0].data);(function(){for(var W=pt.find(u,l[ae].location),U=ya(ba(W.content)),q,ie=0;ie<U.length;++ie){var Se=U[ie];Se.id==ae&&(q=Se)}var Z=or(q.messages[0].data);{Z[3]=[];var K=[];s.forEach(function(ne,Fe){K[1]=[{type:0,data:ot(Fe)}],K[2]=[{type:0,data:ot(1)}],K[3]=[{type:2,data:nV(ne)}],Z[3].push({type:2,data:Tr(K)})})}q.messages[0].data=Tr(Z);var te=kl(U),be=Pl(te);W.content=be,W.size=W.content.length})();var oe=or(A[3][0].data);{var X=oe[1][0];delete oe[2];var re=or(X.data);{var ue=as(re[2][0].data);(function(){for(var W=pt.find(u,l[ue].location),U=ya(ba(W.content)),q,ie=0;ie<U.length;++ie){var Se=U[ie];Se.id==ue&&(q=Se)}var Z=or(q.messages[0].data);{delete Z[6],delete oe[7];var K=new Uint8Array(Z[5][0].data);Z[5]=[];for(var te=0,be=0;be<=n.e.r;++be){var ne=or(K);te+=oV(ne,i[be],s),ne[1][0].data=ot(be),Z[5].push({data:Tr(ne),type:2})}Z[1]=[{type:0,data:ot(n.e.c+1)}],Z[2]=[{type:0,data:ot(n.e.r+1)}],Z[3]=[{type:0,data:ot(te)}],Z[4]=[{type:0,data:ot(n.e.r+1)}]}q.messages[0].data=Tr(Z);var Fe=kl(U),Ce=Pl(Fe);W.content=Ce,W.size=W.content.length})()}X.data=Tr(re)}A[3][0].data=Tr(oe)}b[4][0].data=Tr(A)}p.messages[0].data=Tr(b);var me=kl(h),R=Pl(me);return f.content=R,f.size=f.content.length,u}function cV(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function L_(e){cV([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function uV(e,t){return t.bookType=="ods"?B5(e,t):t.bookType=="numbers"?lV(e,t):t.bookType=="xlsb"?dV(e,t):fV(e,t)}function dV(e,t){tc=1024,e&&!e.SSF&&(e.SSF=Tn(Wt)),e&&e.SSF&&(Cg(),Og(e.SSF),t.revssf=kg(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,zd?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=_5.indexOf(t.bookType)>-1,a=QP();L_(t=t||{});var i=w_(),s="",l=0;if(t.cellXfs=[],Zs(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),s="docProps/core.xml",ze(i,s,t5(e.Props,t)),a.coreprops.push(s),lt(t.rels,2,s,Qe.CORE_PROPS),s="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,ze(i,s,n5(e.Props)),a.extprops.push(s),lt(t.rels,3,s,Qe.EXT_PROPS),e.Custprops!==e.Props&&Lr(e.Custprops||{}).length>0&&(s="docProps/custom.xml",ze(i,s,a5(e.Custprops)),a.custprops.push(s),lt(t.rels,4,s,Qe.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var d={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:s="xl/worksheets/sheet"+l+"."+r,ze(i,s,pH(l-1,s,t,e,d)),a.sheets.push(s),lt(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Qe.WS[0])}if(f){var p=f["!comments"],v=!1,g="";p&&p.length>0&&(g="xl/comments"+l+"."+r,ze(i,g,vH(p,g)),a.comments.push(g),lt(d,-1,"../comments"+l+"."+r,Qe.CMNT),v=!0),f["!legacy"]&&v&&ze(i,"xl/drawings/vmlDrawing"+l+".vml",b5(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&ze(i,ZP(s),pc(d))}return t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+r,ze(i,s,gH(t.Strings,s,t)),a.strs.push(s),lt(t.wbrels,-1,"sharedStrings."+r,Qe.SST)),s="xl/workbook."+r,ze(i,s,hH(e,s)),a.workbooks.push(s),lt(t.rels,1,s,Qe.WB),s="xl/theme/theme1.xml",ze(i,s,x5(e.Themes,t)),a.themes.push(s),lt(t.wbrels,-1,"theme/theme1.xml",Qe.THEME),s="xl/styles."+r,ze(i,s,mH(e,s,t)),a.styles.push(s),lt(t.wbrels,-1,"styles."+r,Qe.STY),e.vbaraw&&n&&(s="xl/vbaProject.bin",ze(i,s,e.vbaraw),a.vba.push(s),lt(t.wbrels,-1,"vbaProject.bin",Qe.VBA)),s="xl/metadata."+r,ze(i,s,xH(s)),a.metadata.push(s),lt(t.wbrels,-1,"metadata."+r,Qe.XLMETA),ze(i,"[Content_Types].xml",JP(a,t)),ze(i,"_rels/.rels",pc(t.rels)),ze(i,"xl/_rels/workbook."+r+".rels",pc(t.wbrels)),delete t.revssf,delete t.ssf,i}function fV(e,t){tc=1024,e&&!e.SSF&&(e.SSF=Tn(Wt)),e&&e.SSF&&(Cg(),Og(e.SSF),t.revssf=kg(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,zd?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=_5.indexOf(t.bookType)>-1,a=QP();L_(t=t||{});var i=w_(),s="",l=0;if(t.cellXfs=[],Zs(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),s="docProps/core.xml",ze(i,s,t5(e.Props,t)),a.coreprops.push(s),lt(t.rels,2,s,Qe.CORE_PROPS),s="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,ze(i,s,n5(e.Props)),a.extprops.push(s),lt(t.rels,3,s,Qe.EXT_PROPS),e.Custprops!==e.Props&&Lr(e.Custprops||{}).length>0&&(s="docProps/custom.xml",ze(i,s,a5(e.Custprops)),a.custprops.push(s),lt(t.rels,4,s,Qe.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},h=e.Sheets[e.SheetNames[l-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:s="xl/worksheets/sheet"+l+"."+r,ze(i,s,k5(l-1,t,e,f)),a.sheets.push(s),lt(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Qe.WS[0])}if(h){var v=h["!comments"],g=!1,x="";if(v&&v.length>0){var b=!1;v.forEach(function(m){m[1].forEach(function(y){y.T==!0&&(b=!0)})}),b&&(x="xl/threadedComments/threadedComment"+l+"."+r,ze(i,x,qU(v,d,t)),a.threadedcomments.push(x),lt(f,-1,"../threadedComments/threadedComment"+l+"."+r,Qe.TCMNT)),x="xl/comments"+l+"."+r,ze(i,x,w5(v)),a.comments.push(x),lt(f,-1,"../comments"+l+"."+r,Qe.CMNT),g=!0}h["!legacy"]&&g&&ze(i,"xl/drawings/vmlDrawing"+l+".vml",b5(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&ze(i,ZP(s),pc(f))}return t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+r,ze(i,s,f5(t.Strings,t)),a.strs.push(s),lt(t.wbrels,-1,"sharedStrings."+r,Qe.SST)),s="xl/workbook."+r,ze(i,s,I5(e)),a.workbooks.push(s),lt(t.rels,1,s,Qe.WB),s="xl/theme/theme1.xml",ze(i,s,x5(e.Themes,t)),a.themes.push(s),lt(t.wbrels,-1,"theme/theme1.xml",Qe.THEME),s="xl/styles."+r,ze(i,s,g5(e,t)),a.styles.push(s),lt(t.wbrels,-1,"styles."+r,Qe.STY),e.vbaraw&&n&&(s="xl/vbaProject.bin",ze(i,s,e.vbaraw),a.vba.push(s),lt(t.wbrels,-1,"vbaProject.bin",Qe.VBA)),s="xl/metadata."+r,ze(i,s,y5()),a.metadata.push(s),lt(t.wbrels,-1,"metadata."+r,Qe.XLMETA),d.length>1&&(s="xl/persons/person.xml",ze(i,s,WU(d)),a.people.push(s),lt(t.wbrels,-1,"persons/person.xml",Qe.PEOPLE)),ze(i,"[Content_Types].xml",JP(a,t)),ze(i,"_rels/.rels",pc(t.rels)),ze(i,"xl/_rels/workbook."+r+".rels",pc(t.wbrels)),delete t.revssf,delete t.ssf,i}function hV(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Bi(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function U5(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return yh(t.file,pt.write(e,{type:et?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return pt.write(e,t)}function pV(e,t){var r=Tn(t||{}),n=uV(e,r);return mV(n,r)}function mV(e,t){var r={},n=et?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?pt.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(Ag(a))}return t.password&&typeof encrypt_agile<"u"?U5(encrypt_agile(a,t.password),t):t.type==="file"?yh(t.file,a):t.type=="string"?$d(a):a}function gV(e,t){var r=t||{},n=PH(e,r);return U5(n,r)}function Va(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return vf(yf(n));case"binary":return yf(n);case"string":return e;case"file":return yh(t.file,n,"utf8");case"buffer":return et?Ji(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Va(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function vV(e,t){switch(t.type){case"base64":return vf(e);case"binary":return e;case"string":return e;case"file":return yh(t.file,e,"binary");case"buffer":return et?Ji(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function w0(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?vf(r):t.type=="string"?$d(r):r;case"file":return yh(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function z5(e,t){H7(),rH(e);var r=Tn(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=z5(e,r);return r.type="array",Ag(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Va(CH(e,r),r);case"slk":case"sylk":return Va(Z9.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return Va(L5(e.Sheets[e.SheetNames[a]],r),r);case"txt":return vV(q5(e.Sheets[e.SheetNames[a]],r),r);case"csv":return Va($_(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return Va(eU.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return w0(J9.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return Va(tU.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return Va(lU.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return Va(d5.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return Va(B5(e,r),r);case"wk1":return w0(TE.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return w0(TE.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),w0(M5(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),gV(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return pV(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function xV(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function yV(e,t,r){var n={};return n.type="file",n.file=t,xV(n),z5(e,n)}function bV(e,t,r,n,a,i,s,l){var c=Dr(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!s||e[r])for(var p=t.s.c;p<=t.e.c;++p){var v=s?e[r][p]:e[n[p]+c];if(v===void 0||v.t===void 0){if(u===void 0)continue;i[p]!=null&&(h[i[p]]=u);continue}var g=v.v;switch(v.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(i[p]!=null){if(g==null)if(v.t=="e"&&g===null)h[i[p]]=null;else if(u!==void 0)h[i[p]]=u;else if(d&&g===null)h[i[p]]=null;else continue;else h[i[p]]=d&&(v.t!=="n"||v.t==="n"&&l.rawNumbers!==!1)?g:Ui(v,g,l);g!=null&&(f=!1)}}return{row:h,isempty:f}}function Qp(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,i=[],s=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Tt(d);break;case"number":c=Tt(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=Dr(c.s.r),h=[],p=[],v=0,g=0,x=Array.isArray(e),b=c.s.r,m=0,y={};x&&!e[b]&&(e[b]=[]);var _=u.skipHidden&&e["!cols"]||[],w=u.skipHidden&&e["!rows"]||[];for(m=c.s.c;m<=c.e.c;++m)if(!(_[m]||{}).hidden)switch(h[m]=Vr(m),r=x?e[b][m]:e[h[m]+f],n){case 1:i[m]=m-c.s.c;break;case 2:i[m]=h[m];break;case 3:i[m]=u.header[m-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=s=Ui(r,null,u),g=y[s]||0,!g)y[s]=1;else{do l=s+"_"+g++;while(y[l]);y[s]=g,y[l]=1}i[m]=l}for(b=c.s.r+a;b<=c.e.r;++b)if(!(w[b]||{}).hidden){var S=bV(e,c,b,h,n,i,x,u);(S.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(p[v++]=S.row)}return p.length=v,p}var DE=/"/g;function wV(e,t,r,n,a,i,s,l){for(var c=!0,u=[],d="",f=Dr(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var p=l.dense?(e[r]||[])[h]:e[n[h]+f];if(p==null)d="";else if(p.v!=null){c=!1,d=""+(l.rawNumbers&&p.t=="n"?p.v:Ui(p,null,l));for(var v=0,g=0;v!==d.length;++v)if((g=d.charCodeAt(v))===a||g===i||g===34||l.forceQuotes){d='"'+d.replace(DE,'""')+'"';break}d=="ID"&&(d='"ID"')}else p.f!=null&&!p.F?(c=!1,d="="+p.f,d.indexOf(",")>=0&&(d='"'+d.replace(DE,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(s)}function $_(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Tt(e["!ref"]),i=n.FS!==void 0?n.FS:",",s=i.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],v=a.s.c;v<=a.e.c;++v)(h[v]||{}).hidden||(f[v]=Vr(v));for(var g=0,x=a.s.r;x<=a.e.r;++x)(p[x]||{}).hidden||(d=wV(e,a,x,f,s,c,i,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((g++?l:"")+d)));return delete n.dense,r.join("")}function q5(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=$_(e,t);return r}function _V(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Tt(e["!ref"]),i="",s=[],l,c=[],u=Array.isArray(e);for(l=a.s.c;l<=a.e.c;++l)s[l]=Vr(l);for(var d=a.s.r;d<=a.e.r;++d)for(i=Dr(d),l=a.s.c;l<=a.e.c;++l)if(t=s[l]+i,r=u?(e[d]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function W5(e,t,r){var n=r||{},a=+!n.skipHeader,i=e||{},s=0,l=0;if(i&&n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var c=typeof n.origin=="string"?br(n.origin):n.origin;s=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:s+t.length-1+a}};if(i["!ref"]){var f=Tt(i["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),s==-1&&(s=f.e.r+1,d.e.r=s+t.length-1+a)}else s==-1&&(s=0,d.e.r=t.length-1+a);var h=n.header||[],p=0;t.forEach(function(g,x){Lr(g).forEach(function(b){(p=h.indexOf(b))==-1&&(h[p=h.length]=b);var m=g[b],y="z",_="",w=ft({c:l+p,r:s+x+a});u=_f(i,w),m&&typeof m=="object"&&!(m instanceof Date)?i[w]=m:(typeof m=="number"?y="n":typeof m=="boolean"?y="b":typeof m=="string"?y="s":m instanceof Date?(y="d",n.cellDates||(y="n",m=Nn(m)),_=n.dateNF||Wt[14]):m===null&&n.nullError&&(y="e",m=0),u?(u.t=y,u.v=m,delete u.w,delete u.R,_&&(u.z=_)):i[w]=u={t:y,v:m},_&&(u.z=_))})}),d.e.c=Math.max(d.e.c,l+h.length-1);var v=Dr(s);if(a)for(p=0;p<h.length;++p)i[Vr(p+l)+v]={t:"s",v:h[p]};return i["!ref"]=rr(d),i}function SV(e,t){return W5(null,e,t)}function _f(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=br(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?_f(e,ft(t)):_f(e,ft({r:t,c:r||0}))}function jV(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function EV(){return{SheetNames:[],Sheets:{}}}function NV(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);a=i&&+i[2]||0;var s=i&&i[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=s+a)!=-1;++a);}if(R5(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function TV(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=jV(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function AV(e,t){return e.z=t,e}function H5(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function OV(e,t,r){return H5(e,"#"+t,r)}function CV(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function kV(e,t,r,n){for(var a=typeof t!="string"?t:Tt(t),i=typeof t=="string"?t:rr(t),s=a.s.r;s<=a.e.r;++s)for(var l=a.s.c;l<=a.e.c;++l){var c=_f(e,s,l);c.t="n",c.F=i,delete c.v,s==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var jx={encode_col:Vr,encode_row:Dr,encode_cell:ft,encode_range:rr,decode_col:T_,decode_row:N_,split_cell:HB,decode_cell:br,decode_range:Gn,format_cell:Ui,sheet_add_aoa:HP,sheet_add_json:W5,sheet_add_dom:$5,aoa_to_sheet:Ou,json_to_sheet:SV,table_to_sheet:F5,table_to_book:eV,sheet_to_csv:$_,sheet_to_txt:q5,sheet_to_json:Qp,sheet_to_html:L5,sheet_to_formulae:_V,sheet_to_row_object_array:Qp,sheet_get_cell:_f,book_new:EV,book_append_sheet:NV,book_set_sheet_visibility:TV,cell_set_number_format:AV,cell_set_hyperlink:H5,cell_set_internal_link:OV,cell_add_comment:CV,sheet_set_array_formula:kV,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Je=({filename:e,sheetName:t,rows:r,columns:n})=>{const a=e.endsWith(".xlsx")?e:`${e}.xlsx`,i=n.map(u=>u.header),s=r.map(u=>n.map(d=>(d.value?d.value(u):u[d.key])??"")),l=jx.aoa_to_sheet([i,...s]),c=jx.book_new();jx.book_append_sheet(c,l,t),yV(c,a)},eo=e=>e.replace(/[.\-\s]/g,"").toUpperCase(),Kt=e=>{const t=eo(e);if(t.length<2)return t;const r=t.slice(0,-1),n=t.slice(-1);return`${r.replace(/\B(?=(\d{3})+(?!\d))/g,".")}-${n}`},PV=e=>{const t=e.replace(/\D/g,"");let r=0,n=2;for(let i=t.length-1;i>=0;i--)r+=parseInt(t[i],10)*n,n=n===7?2:n+1;const a=11-r%11;return a===11?"0":a===10?"K":String(a)},S1=e=>{if(!e||e.trim()==="")return{valid:!1,error:"RUT es requerido"};const t=eo(e);if(!/^\d{7,9}[0-9K]$/i.test(t))return{valid:!1,error:"Formato de RUT invlido"};const r=t.slice(0,-1),n=t.slice(-1).toUpperCase(),a=PV(r);return n!==a?{valid:!1,error:"Dgito verificador invlido"}:{valid:!0}};var j1=function(e,t){return j1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},j1(e,t)};function V5(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");j1(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Jp=function(){return Jp=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Jp.apply(this,arguments)};function Pu(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function K5(e,t,r,n){var a=arguments.length,i=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(i=(a<3?s(i):a>3?s(t,r,i):s(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function G5(e,t){return function(r,n){t(r,n,e)}}function X5(e,t,r,n,a,i){function s(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f,h=!1,p=r.length-1;p>=0;p--){var v={};for(var g in n)v[g]=g==="access"?{}:n[g];for(var g in n.access)v.access[g]=n.access[g];v.addInitializer=function(b){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(b||null))};var x=(0,r[p])(l==="accessor"?{get:d.get,set:d.set}:d[c],v);if(l==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(f=s(x.get))&&(d.get=f),(f=s(x.set))&&(d.set=f),(f=s(x.init))&&a.unshift(f)}else(f=s(x))&&(l==="field"?a.unshift(f):d[c]=f)}u&&Object.defineProperty(u,n.name,d),h=!0}function Y5(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function Q5(e){return typeof e=="symbol"?e:"".concat(e)}function J5(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function Z5(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ae(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function e3(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=l(0),s.throw=l(1),s.return=l(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Mg=Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function t3(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Mg(t,e,r)}function Zp(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function F_(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(l){s={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function r3(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(F_(arguments[t]));return e}function n3(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var i=arguments[t],s=0,l=i.length;s<l;s++,a++)n[a]=i[s];return n}function a3(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Kc(e){return this instanceof Kc?(this.v=e,this):new Kc(e)}function i3(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),a[Symbol.asyncIterator]=function(){return this},a;function s(p){return function(v){return Promise.resolve(v).then(p,f)}}function l(p,v){n[p]&&(a[p]=function(g){return new Promise(function(x,b){i.push([p,g,x,b])>1||c(p,g)})},v&&(a[p]=v(a[p])))}function c(p,v){try{u(n[p](v))}catch(g){h(i[0][3],g)}}function u(p){p.value instanceof Kc?Promise.resolve(p.value.v).then(d,f):h(i[0][2],p)}function d(p){c("next",p)}function f(p){c("throw",p)}function h(p,v){p(v),i.shift(),i.length&&c(i[0][0],i[0][1])}}function s3(e){var t,r;return t={},n("next"),n("throw",function(a){throw a}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(a,i){t[a]=e[a]?function(s){return(r=!r)?{value:Kc(e[a](s)),done:!1}:i?i(s):s}:i}}function o3(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Zp=="function"?Zp(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(s){return new Promise(function(l,c){s=e[i](s),a(l,c,s.done,s.value)})}}function a(i,s,l,c){Promise.resolve(c).then(function(u){i({value:u,done:l})},s)}}function l3(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var RV=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},E1=function(e){return E1=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},E1(e)};function c3(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=E1(e),n=0;n<r.length;n++)r[n]!=="default"&&Mg(t,e,r[n]);return RV(t,e),t}function u3(e){return e&&e.__esModule?e:{default:e}}function d3(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function f3(e,t,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}function h3(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function p3(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var IV=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function m3(e){function t(i){e.error=e.hasError?new IV(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;function a(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(a,function(s){return t(s),a()})}else n|=1}catch(s){t(s)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function g3(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,a,i,s){return n?t?".jsx":".js":a&&(!i||!s)?r:a+i+"."+s.toLowerCase()+"js"}):e}const DV={__extends:V5,__assign:Jp,__rest:Pu,__decorate:K5,__param:G5,__esDecorate:X5,__runInitializers:Y5,__propKey:Q5,__setFunctionName:J5,__metadata:Z5,__awaiter:Ae,__generator:e3,__createBinding:Mg,__exportStar:t3,__values:Zp,__read:F_,__spread:r3,__spreadArrays:n3,__spreadArray:a3,__await:Kc,__asyncGenerator:i3,__asyncDelegator:s3,__asyncValues:o3,__makeTemplateObject:l3,__importStar:c3,__importDefault:u3,__classPrivateFieldGet:d3,__classPrivateFieldSet:f3,__classPrivateFieldIn:h3,__addDisposableResource:p3,__disposeResources:m3,__rewriteRelativeImportExtension:g3},MV=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:p3,get __assign(){return Jp},__asyncDelegator:s3,__asyncGenerator:i3,__asyncValues:o3,__await:Kc,__awaiter:Ae,__classPrivateFieldGet:d3,__classPrivateFieldIn:h3,__classPrivateFieldSet:f3,__createBinding:Mg,__decorate:K5,__disposeResources:m3,__esDecorate:X5,__exportStar:t3,__extends:V5,__generator:e3,__importDefault:u3,__importStar:c3,__makeTemplateObject:l3,__metadata:Z5,__param:G5,__propKey:Q5,__read:F_,__rest:Pu,__rewriteRelativeImportExtension:g3,__runInitializers:Y5,__setFunctionName:J5,__spread:r3,__spreadArray:a3,__spreadArrays:n3,__values:Zp,default:DV},Symbol.toStringTag,{value:"Module"})),LV=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Lg extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class v3 extends Lg{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class N1 extends Lg{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class T1 extends Lg{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var em;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(em||(em={}));class $V{constructor(t,{headers:r={},customFetch:n,region:a=em.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=LV(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ae(this,arguments,void 0,function*(r,n={}){var a;let i,s;try{const{headers:l,method:c,body:u,signal:d,timeout:f}=n;let h={},{region:p}=n;p||(p=this.region);const v=new URL(`${this.url}/${r}`);p&&p!=="any"&&(h["x-region"]=p,v.searchParams.set("forceFunctionRegion",p));let g;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(h["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(h["Content-Type"]="application/json",g=JSON.stringify(u)):g=u;let x=d;f&&(s=new AbortController,i=setTimeout(()=>s.abort(),f),d?(x=s.signal,d.addEventListener("abort",()=>s.abort())):x=s.signal);const b=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),l),body:g,signal:x}).catch(w=>{throw new v3(w)}),m=b.headers.get("x-relay-error");if(m&&m==="true")throw new N1(b);if(!b.ok)throw new T1(b);let y=((a=b.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),_;return y==="application/json"?_=yield b.json():y==="application/octet-stream"||y==="application/pdf"?_=yield b.blob():y==="text/event-stream"?_=b:y==="multipart/form-data"?_=yield b.formData():_=yield b.text(),{data:_,error:null,response:b}}catch(l){return{data:null,error:l,response:l instanceof T1||l instanceof N1?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var an={};const Ru=$8(MV);var _0={},S0={},j0={},E0={},N0={},T0={},ME;function x3(){if(ME)return T0;ME=1,Object.defineProperty(T0,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return T0.default=e,T0}var LE;function y3(){if(LE)return N0;LE=1,Object.defineProperty(N0,"__esModule",{value:!0});const t=Ru.__importDefault(x3());class r{constructor(a){var i,s;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(i=a.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=a.signal,this.isMaybeSingle=(s=a.isMaybeSingle)!==null&&s!==void 0?s:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=new Headers(this.headers),this.headers.set(a,i),this}then(a,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let l=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,f,h;let p=null,v=null,g=null,x=c.status,b=c.statusText;if(c.ok){if(this.method!=="HEAD"){const w=await c.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?v=w:v=JSON.parse(w))}const y=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),_=(f=c.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");y&&_&&_.length>1&&(g=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(p={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,g=null,x=406,b="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const y=await c.text();try{p=JSON.parse(y),Array.isArray(p)&&c.status===404&&(v=[],p=null,x=200,b="OK")}catch{c.status===404&&y===""?(x=204,b="No Content"):p={message:y}}if(p&&this.isMaybeSingle&&(!((h=p==null?void 0:p.details)===null||h===void 0)&&h.includes("0 rows"))&&(p=null,x=200,b="OK"),p&&this.shouldThrowOnError)throw new t.default(p)}return{error:p,data:v,count:g,status:x,statusText:b}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,f,h,p,v;let g="";const x=c==null?void 0:c.cause;if(x){const b=(u=x==null?void 0:x.message)!==null&&u!==void 0?u:"",m=(d=x==null?void 0:x.code)!==null&&d!==void 0?d:"";g=`${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"FetchError"}: ${c==null?void 0:c.message}`,g+=`

Caused by: ${(h=x==null?void 0:x.name)!==null&&h!==void 0?h:"Error"}: ${b}`,m&&(g+=` (${m})`),x!=null&&x.stack&&(g+=`
${x.stack}`)}else g=(p=c==null?void 0:c.stack)!==null&&p!==void 0?p:"";return{error:{message:`${(v=c==null?void 0:c.name)!==null&&v!==void 0?v:"FetchError"}: ${c==null?void 0:c.message}`,details:g,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(a,i)}returns(){return this}overrideTypes(){return this}}return N0.default=r,N0}var $E;function b3(){if($E)return E0;$E=1,Object.defineProperty(E0,"__esModule",{value:!0});const t=Ru.__importDefault(y3());class r extends t.default{select(a){let i=!1;const s=(a??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:i=!0,nullsFirst:s,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${a}.${i?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:s=i}={}){const l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,i,{foreignTable:s,referencedTable:l=s}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(u,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:i=!1,settings:s=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var d;const f=[a?"analyze":null,i?"verbose":null,s?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),h=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${h}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return E0.default=r,E0}var FE;function B_(){if(FE)return j0;FE=1,Object.defineProperty(j0,"__esModule",{value:!0});const t=Ru.__importDefault(b3()),r=new RegExp("[,()]");class n extends t.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}regexMatch(i,s){return this.url.searchParams.append(i,`match.${s}`),this}regexIMatch(i,s){return this.url.searchParams.append(i,`imatch.${s}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}isDistinct(i,s){return this.url.searchParams.append(i,`isdistinct.${s}`),this}in(i,s){const l=Array.from(new Set(s)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${u}fts${d}.${s}`),this}match(i){return Object.entries(i).forEach(([s,l])=>{this.url.searchParams.append(s,`eq.${l}`)}),this}not(i,s,l){return this.url.searchParams.append(i,`not.${s}.${l}`),this}or(i,{foreignTable:s,referencedTable:l=s}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,s,l){return this.url.searchParams.append(i,`${s}.${l}`),this}}return j0.default=n,j0}var BE;function w3(){if(BE)return S0;BE=1,Object.defineProperty(S0,"__esModule",{value:!0});const t=Ru.__importDefault(B_());class r{constructor(a,{headers:i={},schema:s,fetch:l}){this.url=a,this.headers=new Headers(i),this.schema=s,this.fetch=l}select(a,i){const{head:s=!1,count:l}=i??{},c=s?"HEAD":"GET";let u=!1;const d=(a??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:s=!0}={}){var l;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const u=a.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:s=!1,count:l,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const f=a.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(f.length>0){const h=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(a,{count:i}={}){var s;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:a}={}){var i;const s="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return S0.default=r,S0}var UE;function FV(){if(UE)return _0;UE=1,Object.defineProperty(_0,"__esModule",{value:!0});const e=Ru,t=e.__importDefault(w3()),r=e.__importDefault(B_());class n{constructor(i,{headers:s={},schema:l,fetch:c}={}){this.url=i,this.headers=new Headers(s),this.schemaName=l,this.fetch=c}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const s=new URL(`${this.url}/${i}`);return new t.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,s={},{head:l=!1,get:c=!1,count:u}={}){var d;let f;const h=new URL(`${this.url}/rpc/${i}`);let p;l||c?(f=l?"HEAD":"GET",Object.entries(s).filter(([g,x])=>x!==void 0).map(([g,x])=>[g,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([g,x])=>{h.searchParams.append(g,x)})):(f="POST",p=s);const v=new Headers(this.headers);return u&&v.set("Prefer",`count=${u}`),new r.default({method:f,url:h,headers:v,schema:this.schemaName,body:p,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return _0.default=n,_0}Object.defineProperty(an,"__esModule",{value:!0});var _3=an.PostgrestError=P3=an.PostgrestBuilder=C3=an.PostgrestTransformBuilder=A3=an.PostgrestFilterBuilder=N3=an.PostgrestQueryBuilder=j3=an.PostgrestClient=void 0;const Iu=Ru,S3=Iu.__importDefault(FV());var j3=an.PostgrestClient=S3.default;const E3=Iu.__importDefault(w3());var N3=an.PostgrestQueryBuilder=E3.default;const T3=Iu.__importDefault(B_());var A3=an.PostgrestFilterBuilder=T3.default;const O3=Iu.__importDefault(b3());var C3=an.PostgrestTransformBuilder=O3.default;const k3=Iu.__importDefault(y3());var P3=an.PostgrestBuilder=k3.default;const R3=Iu.__importDefault(x3());_3=an.PostgrestError=R3.default;var I3=an.default={PostgrestClient:S3.default,PostgrestQueryBuilder:E3.default,PostgrestFilterBuilder:T3.default,PostgrestTransformBuilder:O3.default,PostgrestBuilder:k3.default,PostgrestError:R3.default};const BV=SC({__proto__:null,get PostgrestBuilder(){return P3},get PostgrestClient(){return j3},get PostgrestError(){return _3},get PostgrestFilterBuilder(){return A3},get PostgrestQueryBuilder(){return N3},get PostgrestTransformBuilder(){return C3},default:I3},[an]),{PostgrestClient:UV,PostgrestQueryBuilder:SEe,PostgrestFilterBuilder:jEe,PostgrestTransformBuilder:EEe,PostgrestBuilder:NEe,PostgrestError:zV}=I3||BV;class D3{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const qV="2.87.3",WV=`realtime-js/${qV}`,M3="1.0.0",HV="2.0.0",zE=M3,A1=1e4,VV=1e3,KV=100;var Eo;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Eo||(Eo={}));var Qt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Qt||(Qt={}));var Aa;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Aa||(Aa={}));var O1;(function(e){e.websocket="websocket"})(O1||(O1={}));var No;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(No||(No={}));class GV{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},s=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(t,r,n){var a,i;const s=t.topic,l=(a=t.ref)!==null&&a!==void 0?a:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+s.length+u.length+f.length,p=new ArrayBuffer(this.HEADER_LENGTH+h);let v=new DataView(p),g=0;v.setUint8(g++,this.KINDS.userBroadcastPush),v.setUint8(g++,c.length),v.setUint8(g++,l.length),v.setUint8(g++,s.length),v.setUint8(g++,u.length),v.setUint8(g++,f.length),v.setUint8(g++,r),Array.from(c,b=>v.setUint8(g++,b.charCodeAt(0))),Array.from(l,b=>v.setUint8(g++,b.charCodeAt(0))),Array.from(s,b=>v.setUint8(g++,b.charCodeAt(0))),Array.from(u,b=>v.setUint8(g++,b.charCodeAt(0))),Array.from(f,b=>v.setUint8(g++,b.charCodeAt(0)));var x=new Uint8Array(p.byteLength+n.byteLength);return x.set(new Uint8Array(p),0),x.set(new Uint8Array(n),p.byteLength),x.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,i,s,l,c]=n;return r({join_ref:a,ref:i,topic:s,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),s=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+a));c=c+a;const d=n.decode(t.slice(c,c+i));c=c+i;const f=n.decode(t.slice(c,c+s));c=c+s;const h=t.slice(c,t.byteLength),p=l===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,v={type:this.BROADCAST_EVENT,event:d,payload:p};return s>0&&(v.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class L3{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var vt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(vt||(vt={}));const qE=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,s)=>(i[s]=XV(s,e,t,a),i),{}):{}},XV=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,s=r[e];return i&&!n.includes(i)?$3(i,s):C1(s)},$3=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return ZV(t,r)}switch(e){case vt.bool:return YV(t);case vt.float4:case vt.float8:case vt.int2:case vt.int4:case vt.int8:case vt.numeric:case vt.oid:return QV(t);case vt.json:case vt.jsonb:return JV(t);case vt.timestamp:return eK(t);case vt.abstime:case vt.date:case vt.daterange:case vt.int4range:case vt.int8range:case vt.money:case vt.reltime:case vt.text:case vt.time:case vt.timestamptz:case vt.timetz:case vt.tsrange:case vt.tstzrange:return C1(t);default:return C1(t)}},C1=e=>e,YV=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},QV=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},JV=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ZV=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const s=e.slice(1,r);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(l=>$3(t,l))}return e},eK=e=>typeof e=="string"?e.replace(" ","T"):e,F3=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Ex{constructor(t,r,n={},a=A1){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var k1;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(k1||(k1={}));class vc{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:s,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=vc.syncState(this.state,a,i,s),this.pendingDiffs.forEach(c=>{this.state=vc.syncDiff(this.state,c,i,s)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:s,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=vc.syncDiff(this.state,a,i,s),l())}),this.onJoin((a,i,s)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:s})}),this.onLeave((a,i,s)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),s=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{s[u]||(c[u]=d)}),this.map(s,(u,d)=>{const f=i[u];if(f){const h=d.map(x=>x.presence_ref),p=f.map(x=>x.presence_ref),v=d.filter(x=>p.indexOf(x.presence_ref)<0),g=f.filter(x=>h.indexOf(x.presence_ref)<0);v.length>0&&(l[u]=v),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:s}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(p=>p.presence_ref),h=d.filter(p=>f.indexOf(p.presence_ref)<0);t[l].unshift(...h)}n(l,d,c)}),this.map(s,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var P1;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(P1||(P1={}));var xc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(xc||(xc={}));var Ga;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ga||(Ga={}));const tK=Qt;class Po{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Qt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ex(this,Aa.join,this.params,this.timeout),this.rejoinTimer=new L3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Qt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Qt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Qt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Aa.reply,{},(s,l)=>{this._trigger(this._replyEventName(l),s)}),this.presence=new vc(this),this.broadcastEndpointURL=F3(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Qt.closed){const{config:{broadcast:s,presence:l,private:c}}=this.params,u=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[xc.PRESENCE]&&this.bindings[xc.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},h={broadcast:s,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Ga.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Ga.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){t==null||t(Ga.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,x=(v=g==null?void 0:g.length)!==null&&v!==void 0?v:0,b=[];for(let m=0;m<x;m++){const y=g[m],{filter:{event:_,schema:w,table:S,filter:j}}=y,E=p&&p[m];if(E&&E.event===_&&Po.isFilterValueEqual(E.schema,w)&&Po.isFilterValueEqual(E.table,S)&&Po.isFilterValueEqual(E.filter,j))b.push(Object.assign(Object.assign({},y),{id:E.id}));else{this.unsubscribe(),this.state=Qt.errored,t==null||t(Ga.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(Ga.SUBSCRIBED);return}}).receive("error",p=>{this.state=Qt.errored,t==null||t(Ga.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ga.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Qt.joined&&t===xc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:s}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var s,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(s=this.params)===null||s===void 0?void 0:s.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Qt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Aa.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new Ex(this,Aa.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Qt.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),s=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),s}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Ex(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>KV){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const s=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Aa;if(n&&[l,c,u,d].indexOf(s)>=0&&n!==this._joinRef())return;let h=this._onMessage(s,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var v,g,x;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((x=(g=p.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===s}).map(p=>p.callback(h,n)):(i=this.bindings[s])===null||i===void 0||i.filter(p=>{var v,g,x,b,m,y;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in p){const _=p.id,w=(v=p.filter)===null||v===void 0?void 0:v.event;return _&&((g=r.ids)===null||g===void 0?void 0:g.includes(_))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const _=(m=(b=p==null?void 0:p.filter)===null||b===void 0?void 0:b.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return _==="*"||_===((y=r==null?void 0:r.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===s}).map(p=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:g,table:x,commit_timestamp:b,type:m,errors:y}=v;h=Object.assign(Object.assign({},{schema:g,table:x,commit_timestamp:b,eventType:m,new:{},old:{},errors:y}),this._getPayloadRecords(v))}p.callback(h,n)})}_isClosed(){return this.state===Qt.closed}_isJoined(){return this.state===Qt.joined}_isJoining(){return this.state===Qt.joining}_isLeaving(){return this.state===Qt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Po.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Aa.close,{},t)}_onError(t){this._on(Aa.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Qt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=qE(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=qE(t.columns,t.old_record)),r}}const Nx=()=>{},A0={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},rK=[1e3,2e3,5e3,1e4],nK=1e4,aK=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class B3{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=A1,this.transport=null,this.heartbeatIntervalMs=A0.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Nx,this.ref=0,this.reconnectTimer=null,this.vsn=zE,this.logger=Nx,this.conn=null,this.sendBuffer=[],this.serializer=new GV,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${O1.websocket}`,this.httpEndpoint=F3(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=D3.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Eo.connecting:return No.Connecting;case Eo.open:return No.Open;case Eo.closing:return No.Closing;default:return No.Closed}}isConnected(){return this.connectionState()===No.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new Po(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,s=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(VV,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},A0.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:s}=r,l=s?`(${s})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,s)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Eo.open||this.conn.readyState===Eo.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Aa.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([aK],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:WV};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(Aa.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new L3(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},A0.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,s,l,c,u,d,f,h,p;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:A1,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:A0.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Nx,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:zE,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:v=>rK[v-1]||nK,this.vsn){case M3:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(v,g)=>g(JSON.stringify(v)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(v,g)=>g(JSON.parse(v));break;case HV:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class $g extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function It(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class iK extends $g{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class R1 extends $g{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const U_=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),sK=()=>Response,I1=e=>{if(Array.isArray(e))return e.map(r=>I1(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=I1(n)}),t},oK=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},lK=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),Tx=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},cK=(e,t,r)=>Ae(void 0,void 0,void 0,function*(){const n=yield sK();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const i=e.status||500,s=(a==null?void 0:a.statusCode)||i+"";t(new iK(Tx(a),i,s))}).catch(a=>{t(new R1(Tx(a),a))}):t(new R1(Tx(e),e))}),uK=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(oK(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function jh(e,t,r,n,a,i){return Ae(this,void 0,void 0,function*(){return new Promise((s,l)=>{e(r,uK(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>cK(c,l,n))})})}function Sf(e,t,r,n){return Ae(this,void 0,void 0,function*(){return jh(e,"GET",t,r,n)})}function ja(e,t,r,n,a){return Ae(this,void 0,void 0,function*(){return jh(e,"POST",t,n,a,r)})}function D1(e,t,r,n,a){return Ae(this,void 0,void 0,function*(){return jh(e,"PUT",t,n,a,r)})}function dK(e,t,r,n){return Ae(this,void 0,void 0,function*(){return jh(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function z_(e,t,r,n,a){return Ae(this,void 0,void 0,function*(){return jh(e,"DELETE",t,n,a,r)})}class fK{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return Ae(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(It(t))return{data:null,error:t};throw t}})}}var U3;class hK{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[U3]="BlobDownloadBuilder",this.promise=null}asStream(){return new fK(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ae(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(It(t))return{data:null,error:t};throw t}})}}U3=Symbol.toStringTag;const pK={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},WE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class mK{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=U_(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return Ae(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},WE),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",s.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${s.cacheControl}`,l["content-type"]=s.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!s.duplex&&(s.duplex="half")),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(t=="PUT"?D1:ja)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(It(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return Ae(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),s=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${s}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:WE.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield D1(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(It(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Ae(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield ja(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),s=new URL(this.url+i.url),l=s.searchParams.get("token");if(!l)throw new $g("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}update(t,r,n){return Ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Ae(this,void 0,void 0,function*(){try{return{data:yield ja(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(It(a))return{data:null,error:a};throw a}})}copy(t,r,n){return Ae(this,void 0,void 0,function*(){try{return{data:{path:(yield ja(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(It(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return Ae(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield ja(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(It(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return Ae(this,void 0,void 0,function*(){try{const a=yield ja(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(It(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),s=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>Sf(this.fetch,`${this.url}/${a}/${l}${s}`,{headers:this.headers,noResolveJson:!0});return new hK(c,this.shouldThrowOnError)}info(t){return Ae(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Sf(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:I1(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}exists(t){return Ae(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield dK(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n)&&n instanceof R1){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield z_(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(It(r))return{data:null,error:r};throw r}})}list(t,r,n){return Ae(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},pK),r),{prefix:t||""});return{data:yield ja(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(It(a))return{data:null,error:a};throw a}})}listV2(t,r){return Ae(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield ja(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const z3="2.87.3",q3={"X-Client-Info":`storage-js/${z3}`};class gK{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},q3),r),this.fetch=U_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Ae(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield Sf(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(It(r))return{data:null,error:r};throw r}})}getBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield Sf(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(It(r))return{data:null,error:r};throw r}})}createBucket(t){return Ae(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield ja(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(It(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return Ae(this,void 0,void 0,function*(){try{return{data:yield D1(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield ja(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(It(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield z_(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(It(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var jf=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function vK(e,t,r){const n=new URL(t,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&n.searchParams.set(a,i);return n.toString()}async function xK(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function yK(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:a,body:i,headers:s}){const l=vK(e.baseUrl,n,a),c=await xK(e.auth),u=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...s},body:i?JSON.stringify(i):void 0}),d=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),h=f&&d?JSON.parse(d):d;if(!u.ok){const p=f?h:void 0,v=p==null?void 0:p.error;throw new jf((v==null?void 0:v.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:p})}return{status:u.status,headers:u.headers,data:h}}}}function O0(e){return e.join("")}var bK=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:O0(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${O0(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${O0(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${O0(e.namespace)}`}),!0}catch(t){if(t instanceof jf&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof jf&&r.status===409)return;throw r}}};function Rl(e){return e.join("")}var wK=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Rl(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Rl(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Rl(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Rl(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Rl(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Rl(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof jf&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof jf&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},_K=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=yK({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new bK(this.client,t),this.tableOps=new wK(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class SK{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},q3),r),this.fetch=U_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield ja(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(It(r))return{data:null,error:r};throw r}})}listBuckets(t){return Ae(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Sf(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(It(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield z_(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(It(r))return{data:null,error:r};throw r}})}from(t){if(!lK(t))throw new $g("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new _K({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>Ae(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(i,s){const l=i[s];return typeof l!="function"?l:(...c)=>Ae(this,void 0,void 0,function*(){try{return{data:yield l.apply(i,c),error:null}}catch(u){if(n)throw u;return{data:null,error:u}}})}})}}const q_={"X-Client-Info":`storage-js/${z3}`,"Content-Type":"application/json"};class W3 extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function $n(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Ax extends W3{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class jK extends W3{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var HE;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(HE||(HE={}));const W_=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),EK=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},VE=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),NK=(e,t,r)=>Ae(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e.status||500,i=e;if(typeof i.json=="function")i.json().then(s=>{const l=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||a+"";t(new Ax(VE(s),a,l))}).catch(()=>{const s=a+"",l=i.statusText||`HTTP ${a} error`;t(new Ax(l,a,s))});else{const s=a+"",l=i.statusText||`HTTP ${a} error`;t(new Ax(l,a,s))}}else t(new jK(VE(e),e))}),TK=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(EK(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function AK(e,t,r,n,a,i){return Ae(this,void 0,void 0,function*(){return new Promise((s,l)=>{e(r,TK(t,n,a,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>s(c)).catch(c=>NK(c,l,n))})})}function Fn(e,t,r,n,a){return Ae(this,void 0,void 0,function*(){return AK(e,"POST",t,n,a,r)})}class OK{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},q_),r),this.fetch=W_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Ae(this,void 0,void 0,function*(){try{return{data:(yield Fn(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}getIndex(t,r){return Ae(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}listIndexes(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return Ae(this,void 0,void 0,function*(){try{return{data:(yield Fn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}}class CK{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},q_),r),this.fetch=W_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Ae(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Fn(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}getVectors(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}listVectors(t){return Ae(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Fn(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}queryVectors(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}deleteVectors(t){return Ae(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Fn(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}}class kK{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},q_),r),this.fetch=W_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:(yield Fn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}getBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}listBuckets(){return Ae(this,arguments,void 0,function*(t={}){try{return{data:yield Fn(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:(yield Fn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}}class PK extends kK{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new RK(this.url,this.headers,t,this.fetch)}createBucket(t){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Ae(this,void 0,void 0,function*(){return r.createBucket.call(this,t)})}getBucket(t){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Ae(this,void 0,void 0,function*(){return r.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Ae(this,arguments,void 0,function*(r={}){return t.listBuckets.call(this,r)})}deleteBucket(t){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Ae(this,void 0,void 0,function*(){return r.deleteBucket.call(this,t)})}}class RK extends OK{constructor(t,r,n,a){super(t,r,a),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ae(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ae(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ae(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ae(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new IK(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class IK extends CK{constructor(t,r,n,a,i){super(t,r,i),this.vectorBucketName=n,this.indexName=a}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ae(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ae(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ae(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ae(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ae(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class DK extends gK{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new mK(this.url,this.headers,t,this.fetch)}get vectors(){return new PK(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new SK(this.url+"/iceberg",this.headers,this.fetch)}}const MK="2.87.3";let jd="";typeof Deno<"u"?jd="deno":typeof document<"u"?jd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?jd="react-native":jd="node";const LK={"X-Client-Info":`supabase-js-${jd}/${MK}`},$K={headers:LK},FK={schema:"public"},BK={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},UK={},zK=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),qK=()=>Headers,WK=(e,t,r)=>{const n=zK(r),a=qK();return async(i,s)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new a(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},s),{headers:u}))}};function HK(e){return e.endsWith("/")?e:e+"/"}function VK(e,t){var r,n;const{db:a,auth:i,realtime:s,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),s),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function KK(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(HK(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const H3="2.87.3",Ul=30*1e3,M1=3,Ox=M1*Ul,GK="http://localhost:9999",XK="supabase.auth.token",YK={"X-Client-Info":`gotrue-js/${H3}`},L1="X-Supabase-Api-Version",V3={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},QK=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,JK=10*60*1e3;class Gc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ke(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class K3 extends Gc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function G3(e){return ke(e)&&e.name==="AuthApiError"}class fs extends Gc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class oi extends Gc{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class pn extends oi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function X3(e){return ke(e)&&e.name==="AuthSessionMissingError"}class xo extends oi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ed extends oi{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Nd extends oi{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Y3(e){return ke(e)&&e.name==="AuthImplicitGrantRedirectError"}class $1 extends oi{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Q3 extends oi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}function ZK(e){return ke(e)&&e.name==="AuthPKCECodeVerifierMissingError"}class tm extends oi{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function ip(e){return ke(e)&&e.name==="AuthRetryableFetchError"}class F1 extends oi{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}function eG(e){return ke(e)&&e.name==="AuthWeakPasswordError"}class rm extends oi{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const nm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),KE=` 	
\r=`.split(""),tG=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<KE.length;t+=1)e[KE[t].charCodeAt(0)]=-2;for(let t=0;t<nm.length;t+=1)e[nm[t].charCodeAt(0)]=t;return e})();function GE(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(nm[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(nm[n]),t.queuedBits-=6}}function J3(e,t,r){const n=tG[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function XE(e){const t=[],r=s=>{t.push(String.fromCodePoint(s))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=s=>{aG(s,n,r)};for(let s=0;s<e.length;s+=1)J3(e.charCodeAt(s),a,i);return t.join("")}function rG(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function nG(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}rG(n,t)}}function aG(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function yc(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)J3(e.charCodeAt(a),r,n);return new Uint8Array(t)}function iG(e){const t=[];return nG(e,r=>t.push(r)),new Uint8Array(t)}function Ro(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>GE(a,r,n)),GE(null,r,n),t.join("")}function sG(e){return Math.round(Date.now()/1e3)+e}function oG(){return Symbol("auth-callback")}const Ar=()=>typeof window<"u"&&typeof document<"u",uo={tested:!1,writable:!1},Z3=()=>{if(!Ar())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(uo.tested)return uo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),uo.tested=!0,uo.writable=!0}catch{uo.tested=!0,uo.writable=!1}return uo.writable};function lG(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const eR=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),cG=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",zl=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},fo=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Nr=async(e,t)=>{await e.removeItem(t)};class Fg{constructor(){this.promise=new Fg.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Fg.promiseConstructor=Promise;function Cx(e){const t=e.split(".");if(t.length!==3)throw new rm("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!QK.test(t[n]))throw new rm("JWT not in base64url format");return{header:JSON.parse(XE(t[0])),payload:JSON.parse(XE(t[1])),signature:yc(t[2]),raw:{header:t[0],payload:t[1]}}}async function uG(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function dG(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const s=await e(i);if(!t(i,null,s)){n(s);return}}catch(s){if(!t(i,s)){a(s);return}}})()})}function fG(e){return("0"+e.toString(16)).substr(-2)}function hG(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,fG).join("")}async function pG(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function mG(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await pG(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Il(e,t,r=!1){const n=hG();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await zl(e,`${t}-code-verifier`,a);const i=await mG(n);return[i,n===i?"plain":"s256"]}const gG=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function vG(e){const t=e.headers.get(L1);if(!t||!t.match(gG))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function xG(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function yG(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const bG=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Dl(e){if(!bG.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function kx(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function wG(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function YE(e){return JSON.parse(JSON.stringify(e))}const yo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),_G=[502,503,504];async function QE(e){var t;if(!cG(e))throw new tm(yo(e),0);if(_G.includes(e.status))throw new tm(yo(e),e.status);let r;try{r=await e.json()}catch(i){throw new fs(yo(i),i)}let n;const a=vG(e);if(a&&a.getTime()>=V3["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new F1(yo(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new pn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0))throw new F1(yo(r),e.status,r.weak_password.reasons);throw new K3(yo(r),e.status||500,n)}const SG=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Ie(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[L1]||(i[L1]=V3["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const s=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(s.redirect_to=n.redirectTo);const l=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await jG(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function jG(e,t,r,n,a,i){const s=SG(t,n,a,i);let l;try{l=await e(r,Object.assign({},s))}catch(c){throw console.error(c),new tm(yo(c),0)}if(l.ok||await QE(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await QE(c)}}function _a(e){var t;let r=null;TG(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=sG(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function JE(e){const t=_a(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function hs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function EG(e){return{data:e,error:null}}function NG(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,s=Pu(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},s);return{data:{properties:l,user:c},error:null}}function ZE(e){return e}function TG(e){return e.access_token&&e.refresh_token&&e.expires_in}const sp=["global","local","others"];class H_{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=eR(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=sp[0]){if(sp.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${sp.join(", ")}`);try{return await Ie(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Ie(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:hs})}catch(n){if(ke(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Pu(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Ie(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:NG,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ke(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Ie(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:hs})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,s,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Ie(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:ZE});if(d.error)throw d.error;const f=await d.json(),h=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);u[`${x}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(ke(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Dl(t);try{return await Ie(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:hs})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Dl(t);try{return await Ie(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:hs})}catch(n){if(ke(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Dl(t);try{return await Ie(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:hs})}catch(n){if(ke(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Dl(t.userId);try{const{data:r,error:n}=await Ie(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(ke(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Dl(t.userId),Dl(t.id);try{return{data:await Ie(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,s,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Ie(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:ZE});if(d.error)throw d.error;const f=await d.json(),h=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);u[`${x}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(ke(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Ie(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ke(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Ie(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ke(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Ie(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Ie(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Ie(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ke(r))return{data:null,error:r};throw r}}}function eN(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const bo={debug:!!(globalThis&&Z3()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class V_ extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class tR extends V_{}class AG extends V_{}async function rR(e,t,r){bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),bo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new tR(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(bo.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const tN={};async function OG(e,t,r){var n;const a=(n=tN[e])!==null&&n!==void 0?n:Promise.resolve(),i=Promise.race([a.catch(()=>null),t>=0?new Promise((s,l)=>{setTimeout(()=>{l(new AG(`Acquiring process lock with name "${e}" timed out`))},t)}):null].filter(s=>s)).catch(s=>{if(s&&s.isAcquireTimeout)throw s;return null}).then(async()=>await r());return tN[e]=i.catch(async s=>{if(s&&s.isAcquireTimeout)return await a,null;throw s}),await i}function CG(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function nR(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function kG(e){return parseInt(e,16)}function PG(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function RG(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:s,notBefore:l,requestId:c,resources:u,scheme:d,uri:f,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=nR(e.address),v=d?`${d}://${n}`:n,g=e.statement?`${e.statement}
`:"",x=`${v} wants you to sign in with your Ethereum account:
${p}

${g}`;let b=`URI: ${f}
Version: ${h}
Chain ID: ${r}${s?`
Nonce: ${s}`:""}
Issued At: ${i.toISOString()}`;if(a&&(b+=`
Expiration Time: ${a.toISOString()}`),l&&(b+=`
Not Before: ${l.toISOString()}`),c&&(b+=`
Request ID: ${c}`),u){let m=`
Resources:`;for(const y of u){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);m+=`
- ${y}`}b+=m}return`${x}
${b}`}class Zt extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class am extends Zt{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function IG({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Zt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Zt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Zt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Zt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Zt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Zt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Zt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Zt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(aR(s)){if(i.rp.id!==s)return new Zt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Zt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Zt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Zt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Zt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function DG({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Zt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Zt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(aR(n)){if(r.rpId!==n)return new Zt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Zt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Zt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Zt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class MG{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const LG=new MG;function $G(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=Pu(e,["challenge","user","excludeCredentials"]),i=yc(t).buffer,s=Object.assign(Object.assign({},r),{id:yc(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:s});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:yc(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function FG(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Pu(e,["challenge","allowCredentials"]),a=yc(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let s=0;s<r.length;s++){const l=r[s];i.allowCredentials[s]=Object.assign(Object.assign({},l),{id:yc(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function BG(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Ro(new Uint8Array(e.response.attestationObject)),clientDataJSON:Ro(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function UG(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Ro(new Uint8Array(a.authenticatorData)),clientDataJSON:Ro(new Uint8Array(a.clientDataJSON)),signature:Ro(new Uint8Array(a.signature)),userHandle:a.userHandle?Ro(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function aR(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function rN(){var e,t;return!!(Ar()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function zG(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new am("Browser returned unexpected credential type",t)}:{data:null,error:new am("Empty credential response",t)}}catch(t){return{data:null,error:IG({error:t,options:e})}}}async function qG(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new am("Browser returned unexpected credential type",t)}:{data:null,error:new am("Empty credential response",t)}}catch(t){return{data:null,error:DG({error:t,options:e})}}}const WG={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},HG={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function im(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const s=a[i];if(s!==void 0)if(Array.isArray(s))n[i]=s;else if(r(s))n[i]=s;else if(t(s)){const l=n[i];t(l)?n[i]=im(l,s):n[i]=im(s)}else n[i]=s}return n}function VG(e,t){return im(WG,e,t||{})}function KG(e,t){return im(HG,e,t||{})}class GG{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){try{const{data:s,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!s)return{data:null,error:l};const c=a??LG.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=VG(s.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:f}=await zG({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=KG(s.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:f}=await qG(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(s){return ke(s)?{data:null,error:s}:{data:null,error:new fs("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new Gc("rpId is required for WebAuthn authentication")};try{if(!rN())return{data:null,error:new fs("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!s)return{data:null,error:l};const{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(s){return ke(s)?{data:null,error:s}:{data:null,error:new fs("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new Gc("rpId is required for WebAuthn registration")};try{if(!rN())return{data:null,error:new fs("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(s){return ke(s)?{data:null,error:s}:{data:null,error:new fs("Unexpected error in register",s)}}}}CG();const XG={url:GK,storageKey:XK,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:YK,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function nN(e,t,r){return await r()}const Ml={};class Xc{get jwks(){var t,r;return(r=(t=Ml[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ml[this.storageKey]=Object.assign(Object.assign({},Ml[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ml[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ml[this.storageKey]=Object.assign(Object.assign({},Ml[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},XG),t);if(this.storageKey=i.storageKey,this.instanceID=(r=Xc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Xc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Ar()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new H_({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=eR(i.fetch),this.lock=i.lock||nN,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Ar()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=rR:this.lock=nN,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new GG(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Z3()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=eN(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=eN(this.memoryStorage)),Ar()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${H3}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Ar()&&(r=lG(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Ar()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Y3(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:s,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",s,"redirect type",l),await this._saveSession(s),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ke(r)?this._returnResult({error:r}):this._returnResult({error:new fs("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:_a}),{data:s,error:l}=i;if(l||!s)return this._returnResult({data:{user:null,session:null},error:l});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(ke(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Il(this.storage,this.storageKey)),i=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:v},xform:_a})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:_a})}else throw new Ed("You must provide either an email or phone number and a password");const{data:s,error:l}=i;if(l||!s)return await Nr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await Nr(this.storage,`${this.storageKey}-code-verifier`),ke(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:s,options:l}=t;r=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:JE})}else if("phone"in t){const{phone:i,password:s,options:l}=t;r=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:JE})}else throw new Ed("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new xo;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(ke(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,s,l,c,u,d,f,h;let p,v;if("message"in t)p=t.message,v=t.signature;else{const{chain:g,wallet:x,statement:b,options:m}=t;let y;if(Ar())if(typeof x=="object")y=x;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")y=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=x}const _=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href),w=await y.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!w||w.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=nR(w[0]);let j=(n=m==null?void 0:m.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!j){const N=await y.request({method:"eth_chainId"});j=kG(N)}const E={domain:_.host,address:S,statement:b,uri:_.href,version:"1",chainId:j,nonce:(a=m==null?void 0:m.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(s=(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(l=m==null?void 0:m.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=m==null?void 0:m.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=m==null?void 0:m.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=RG(E),v=await y.request({method:"personal_sign",params:[PG(p),S]})}try{const{data:g,error:x}=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:v},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:_a});if(x)throw x;if(!g||!g.session||!g.user){const b=new xo;return this._returnResult({data:{user:null,session:null},error:b})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:x})}catch(g){if(ke(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var r,n,a,i,s,l,c,u,d,f,h,p;let v,g;if("message"in t)v=t.message,g=t.signature;else{const{chain:x,wallet:b,statement:m,options:y}=t;let _;if(Ar())if(typeof b=="object")_=b;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=b}const w=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),m?{statement:m}:null));let j;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")j=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)j=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)v=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),g=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${w.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(a=(n=y==null?void 0:y.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((s=y==null?void 0:y.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((f=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...y.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(v),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=S}}try{const{data:x,error:b}=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Ro(g)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:_a});if(b)throw b;if(!x||!x.session||!x.user){const m=new xo;return this._returnResult({data:{user:null,session:null},error:m})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:b})}catch(x){if(ke(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(t){const r=await fo(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new Q3;const{data:i,error:s}=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:_a});if(await Nr(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!i||!i.session||!i.user){const l=new xo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:s})}catch(i){if(await Nr(this.storage,`${this.storageKey}-code-verifier`),ke(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:s}=t,l=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:_a}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new xo;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(ke(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,i,s;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Il(this.storage,this.storageKey));const{error:f}=await Ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await Ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(s=c==null?void 0:c.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Ed("You must provide either an email or phone number.")}catch(l){if(await Nr(this.storage,`${this.storageKey}-code-verifier`),ke(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:s,error:l}=await Ie(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:_a});if(l)throw l;if(!s)throw new Error("An error occurred on token verification.");const c=s.session,u=s.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(ke(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,i,s;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Il(this.storage,this.storageKey));const u=await Ie(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:EG});return!((i=u.data)===null||i===void 0)&&i.url&&Ar()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await Nr(this.storage,`${this.storageKey}-code-verifier`),ke(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new pn;const{error:a}=await Ie(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(ke(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:s}=await Ie(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:s,error:l}=await Ie(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:l})}throw new Ed("You must provide either an email or phone number and a type")}catch(r){if(ke(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await fo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Ox:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const s=await fo(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=kx()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};t.user=wG(t.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:hs}):await this._useSession(async r=>{var n,a,i;const{data:s,error:l}=r;if(l)throw l;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new pn}:await Ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:hs})})}catch(r){if(ke(r))return X3(r)&&(await this._removeSession(),await Nr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new pn;const s=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Il(this.storage,this.storageKey));const{data:u,error:d}=await Ie(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:s.access_token,xform:hs});if(d)throw d;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(n){if(await Nr(this.storage,`${this.storageKey}-code-verifier`),ke(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new pn;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:s}=Cx(t.access_token);if(s.exp&&(n=s.exp,a=n<=r),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(ke(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:s,error:l}=r;if(l)throw l;t=(n=s.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new pn;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(ke(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Ar())throw new Nd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Nd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new $1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Nd("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new $1("No code detected.");const{data:m,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:s,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!s||!u)throw new Nd("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const p=h-d;p*1e3<=Ul&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const v=h-f;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,h,d);const{data:g,error:x}=await this._getUser(i);if(x)throw x;const b={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:s,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:b,redirectType:t.type},error:null})}catch(n){if(ke(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await fo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const s=(n=a.session)===null||n===void 0?void 0:n.access_token;if(s){const{error:l}=await this.admin.signOut(s,t);if(l&&!(G3(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Nr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=oG(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:s}=r;if(s)throw s;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Il(this.storage,this.storageKey,!0));try{return await Ie(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Nr(this.storage,`${this.storageKey}-code-verifier`),ke(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var s,l,c,u,d;const{data:f,error:h}=i;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ie(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return Ar()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(ke(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:s,provider:l,token:c,access_token:u,nonce:d}=t,f=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:_a}),{data:h,error:p}=f;return p?this._returnResult({data:{user:null,session:null},error:p}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new xo}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:p}))}catch(a){if(await Nr(this.storage,`${this.storageKey}-code-verifier`),ke(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)throw s;return await Ie(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await dG(async a=>(a>0&&await uG(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Ie(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:_a})),(a,i)=>{const s=200*Math.pow(2,a);return i&&ip(i)&&Date.now()+s-n<Ul})}catch(n){if(this._debug(r,"error",n),ke(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ar()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await fo(this.storage,this.storageKey);if(a&&this.userStorage){let s=await fo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:a.user},await zl(this.userStorage,this.storageKey+"-user",s)),a.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:kx()}else if(a&&!a.user&&!a.user){const s=await fo(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(a.user=s.user,await Nr(this.storage,this.storageKey+"-user"),await zl(this.storage,this.storageKey,a)):a.user=kx()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ox;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Ox}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:s}=await this._callRefreshToken(a.refresh_token);s&&(console.error(s),ip(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:l}=await this._getUser(a.access_token);!l&&(s!=null&&s.user)?(a.user=s.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new pn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Fg;const{data:i,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!i.session)throw new pn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),ke(i)){const s={data:null,error:i};return ip(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],s=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(s),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Nr(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await zl(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=YE(a);await zl(this.storage,this.storageKey,i)}else{const a=YE(r);await zl(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Nr(this.storage,this.storageKey),await Nr(this.storage,this.storageKey+"-code-verifier"),await Nr(this.storage,this.storageKey+"-user"),this.userStorage&&await Nr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ar()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ul);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Ul);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ul}ms, refresh threshold is ${M1} ticks`),a<=M1&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof V_)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ar()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,s]=await Il(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(s)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await Ie(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await Ie(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?BG(t.webauthn.credential_response):UG(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await Ie(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const s=await Ie(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(s.error)return s;const{data:l}=s;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:$G(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:FG(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Cx(n.access_token);let s=null;i.aal&&(s=i.aal);let l=s;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:s,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Ie(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new pn})})}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new pn});const s=await Ie(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&Ar()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new pn});const s=await Ie(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&Ar()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Ie(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new pn})})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(await Ie(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new pn})})}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+JK>a)return n;const{data:i,error:s}=await Ie(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:v}=await this.getSession();if(v||!p.session)return this._returnResult({data:null,error:v});n=p.session.access_token}const{header:a,payload:i,signature:s,raw:{header:l,payload:c}}=Cx(n);r!=null&&r.allowExpired||xG(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:a,signature:s},error:null}}const d=yG(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,s,iG(`${l}.${c}`)))throw new rm("Invalid JWT signature");return{data:{claims:i,header:a,signature:s},error:null}}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}}Xc.nextInstanceID={};const YG=H_,iR=Xc;class QG extends iR{constructor(t){super(t)}}class sR{constructor(t,r,n){var a,i,s;this.supabaseUrl=t,this.supabaseKey=r;const l=KK(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:FK,realtime:UK,auth:Object.assign(Object.assign({},BK),{storageKey:c}),global:$K},d=VK(n??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=d.auth)!==null&&s!==void 0?s:{},this.headers,d.global.fetch),this.fetch=WK(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new UV(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new DK(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new $V(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:s,flowType:l,lock:c,debug:u,throwOnError:d},f,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new QG({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),f),storageKey:s,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:l,lock:c,debug:u,throwOnError:d,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new B3(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const JG=(e,t,r)=>new sR(e,t,r);function ZG(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}ZG()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const eX=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:YG,AuthApiError:K3,AuthClient:iR,AuthError:Gc,AuthImplicitGrantRedirectError:Nd,AuthInvalidCredentialsError:Ed,AuthInvalidJwtError:rm,AuthInvalidTokenResponseError:xo,AuthPKCECodeVerifierMissingError:Q3,AuthPKCEGrantCodeExchangeError:$1,AuthRetryableFetchError:tm,AuthSessionMissingError:pn,AuthUnknownError:fs,AuthWeakPasswordError:F1,CustomAuthError:oi,get FunctionRegion(){return em},FunctionsError:Lg,FunctionsFetchError:v3,FunctionsHttpError:T1,FunctionsRelayError:N1,GoTrueAdminApi:H_,GoTrueClient:Xc,NavigatorLockAcquireTimeoutError:tR,PostgrestError:zV,REALTIME_CHANNEL_STATES:tK,get REALTIME_LISTEN_TYPES(){return xc},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return P1},get REALTIME_PRESENCE_LISTEN_EVENTS(){return k1},get REALTIME_SUBSCRIBE_STATES(){return Ga},RealtimeChannel:Po,RealtimeClient:B3,RealtimePresence:vc,SIGN_OUT_SCOPES:sp,SupabaseClient:sR,WebSocketFactory:D3,createClient:JG,isAuthApiError:G3,isAuthError:ke,isAuthImplicitGrantRedirectError:Y3,isAuthPKCECodeVerifierMissingError:ZK,isAuthRetryableFetchError:ip,isAuthSessionMissingError:X3,isAuthWeakPasswordError:eG,lockInternals:bo,navigatorLock:rR,processLock:OG},Symbol.toStringTag,{value:"Module"})),{createClient:oR}=eX,tX="https://kzslhhctjfxsdvcrqvvs.supabase.co",lR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt6c2xoaGN0amZ4c2R2Y3JxdnZzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4NDAzODQsImV4cCI6MjA4MTQxNjM4NH0.NQ1maFD5Nl8y-5TxJFjeSdhOSzOi-6Hd8o4VcrmLUKo",fe=oR(tX,lR,{auth:{persistSession:!1,autoRefreshToken:!1},realtime:{params:{eventsPerSecond:10}}}),Xr=()=>!!lR,Yc=[{value:"conductor",label:"Conductor"},{value:"inspector_patio",label:"Inspector Patio"},{value:"cleaner",label:"Cleaner"},{value:"planillero",label:"Planillero"},{value:"supervisor",label:"Supervisor"}],rX=[{value:"todos",label:"Todos"},{value:"ACTIVO",label:"Activo"},{value:"DESVINCULADO",label:"Desvinculado"}],cR=async(e,t)=>{if(!Xr())return console.warn("Supabase not configured, returning empty array"),[];const r=Ba(e);let n=fe.from("staff").select(`
      *,
      staff_admonitions(count)
    `).in("terminal_code",r).order("nombre",{ascending:!0});if(t!=null&&t.status&&t.status!=="todos"&&(n=n.eq("status",t.status)),t!=null&&t.cargo&&t.cargo!=="todos"&&(n=n.eq("cargo",t.cargo)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}const{data:a,error:i}=await n;if(i)throw console.error("Error fetching staff:",i),i;return(a||[]).map(s=>{var l,c;return{...s,admonition_count:((c=(l=s.staff_admonitions)==null?void 0:l[0])==null?void 0:c.count)??0}})},nX=async e=>{const t=eo(e),{data:r,error:n}=await fe.from("staff").select("*").eq("rut",t).single();if(n){if(n.code==="PGRST116")return null;throw n}return r},aX=async e=>{var n,a,i,s,l,c;const{data:t,error:r}=await fe.from("staff").insert({rut:eo(e.rut),nombre:e.nombre.trim(),cargo:e.cargo,terminal_code:e.terminal_code,turno:e.turno.trim(),horario:e.horario.trim(),contacto:e.contacto.trim(),email:((n=e.email)==null?void 0:n.trim())||null,talla_polera:((a=e.talla_polera)==null?void 0:a.trim())||null,talla_chaqueta:((i=e.talla_chaqueta)==null?void 0:i.trim())||null,talla_pantalon:((s=e.talla_pantalon)==null?void 0:s.trim())||null,talla_zapato_seguridad:((l=e.talla_zapato_seguridad)==null?void 0:l.trim())||null,talla_chaleco_reflectante:((c=e.talla_chaleco_reflectante)==null?void 0:c.trim())||null}).select().single();if(r)throw r.code==="23505"?new Error("Ya existe un trabajador con ese RUT"):r;return t},iX=async(e,t)=>{var i,s,l,c,u,d;const r={};t.rut!==void 0&&(r.rut=eo(t.rut)),t.nombre!==void 0&&(r.nombre=t.nombre.trim()),t.cargo!==void 0&&(r.cargo=t.cargo),t.terminal_code!==void 0&&(r.terminal_code=t.terminal_code),t.turno!==void 0&&(r.turno=t.turno.trim()),t.horario!==void 0&&(r.horario=t.horario.trim()),t.contacto!==void 0&&(r.contacto=t.contacto.trim()),t.email!==void 0&&(r.email=((i=t.email)==null?void 0:i.trim())||null),t.talla_polera!==void 0&&(r.talla_polera=((s=t.talla_polera)==null?void 0:s.trim())||null),t.talla_chaqueta!==void 0&&(r.talla_chaqueta=((l=t.talla_chaqueta)==null?void 0:l.trim())||null),t.talla_pantalon!==void 0&&(r.talla_pantalon=((c=t.talla_pantalon)==null?void 0:c.trim())||null),t.talla_zapato_seguridad!==void 0&&(r.talla_zapato_seguridad=((u=t.talla_zapato_seguridad)==null?void 0:u.trim())||null),t.talla_chaleco_reflectante!==void 0&&(r.talla_chaleco_reflectante=((d=t.talla_chaleco_reflectante)==null?void 0:d.trim())||null);const{data:n,error:a}=await fe.from("staff").update(r).eq("id",e).select().single();if(a)throw a;return n},sX=async(e,t)=>{const{data:r,error:n}=await fe.from("staff").update({status:"DESVINCULADO",terminated_at:new Date().toISOString(),termination_comment:t.trim()}).eq("id",e).select().single();if(n)throw n;return r},oX=async e=>{const t=Ba(e),{data:r,error:n}=await fe.from("staff").select("cargo, terminal_code").eq("status","ACTIVO").in("terminal_code",t);if(n)throw n;const{data:a}=await fe.from("staff_caps").select("*").eq("scope_code","ER_LR"),i=new Map;(a||[]).forEach(d=>{i.set(d.cargo,d.max_q)});const s=new Map;Yc.forEach(d=>s.set(d.value,0)),(r||[]).forEach(d=>{const f=s.get(d.cargo)||0;s.set(d.cargo,f+1)});const l=Yc.map(d=>({cargo:d.value,count:s.get(d.value)||0,max_q:i.get(d.value)??null})),c=new Map;t.forEach(d=>c.set(d,0)),(r||[]).forEach(d=>{const f=c.get(d.terminal_code)||0;c.set(d.terminal_code,f+1)});const u=t.map(d=>({terminal_code:d,count:c.get(d)||0}));return{byCargo:l,byTerminal:u,total:(r==null?void 0:r.length)||0}},lX=async(e,t,r,n)=>{const a=n.name.split(".").pop(),i=`staff/${e}/admonitions/${Date.now()}.${a}`,{error:s}=await fe.storage.from("staff-docs").upload(i,n);if(s)throw console.error("Upload error:",s),new Error("Error al subir el documento");const{data:l,error:c}=await fe.from("staff_admonitions").insert({staff_id:e,reason:t.trim(),admonition_date:r,document_path:i}).select().single();if(c)throw c;return l},cX=(e,t)=>{const r=fe.channel("staff-changes").on("postgres_changes",{event:"*",schema:"public",table:"staff"},n=>{e({eventType:n.eventType,new:n.new,old:n.old})}).on("postgres_changes",{event:"INSERT",schema:"public",table:"staff_admonitions"},n=>{t({eventType:n.eventType,new:n.new})}).subscribe();return()=>{fe.removeChannel(r)}},At={all:["staff"],lists:()=>[...At.all,"list"],list:(e,t)=>[...At.lists(),e,t],details:()=>[...At.all,"detail"],detail:e=>[...At.details(),e],counts:e=>[...At.all,"counts",e],caps:()=>[...At.all,"caps"],admonitions:e=>[...At.all,"admonitions",e]},uR=(e,t)=>rt({queryKey:At.list(e,t),queryFn:()=>cR(e,t)}),uX=e=>rt({queryKey:At.counts(e),queryFn:()=>oX(e)}),dX=()=>{const e=Ge();return Xe({mutationFn:t=>aX(t),onSuccess:()=>{e.invalidateQueries({queryKey:At.lists()}),e.invalidateQueries({queryKey:At.counts({})})}})},fX=()=>{const e=Ge();return Xe({mutationFn:({id:t,values:r})=>iX(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:At.lists()}),e.invalidateQueries({queryKey:At.detail(t.id)}),e.invalidateQueries({queryKey:At.counts({})})}})},hX=()=>{const e=Ge();return Xe({mutationFn:({id:t,comment:r})=>sX(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:At.lists()}),e.invalidateQueries({queryKey:At.detail(t.id)}),e.invalidateQueries({queryKey:At.counts({})})}})},pX=()=>{const e=Ge();return Xe({mutationFn:({staffId:t,reason:r,admonitionDate:n,file:a})=>lX(t,r,n,a),onSuccess:t=>{e.invalidateQueries({queryKey:At.admonitions(t.staff_id)}),e.invalidateQueries({queryKey:At.lists()})}})},mX=e=>{const t=Ge();T.useEffect(()=>cX(n=>{console.log("Staff change:",n.eventType),t.invalidateQueries({queryKey:At.lists()}),t.invalidateQueries({queryKey:At.counts(e)}),n.new&&t.invalidateQueries({queryKey:At.detail(n.new.id)})},n=>{console.log("Admonition change:",n.eventType),n.new&&(t.invalidateQueries({queryKey:At.admonitions(n.new.staff_id)}),t.invalidateQueries({queryKey:At.lists()}))}),[t,e])},gX=e=>({conductor:"calendar",inspector_patio:"clipboard",cleaner:"check-circle",planillero:"layers",supervisor:"users"})[e]||"users",vX=e=>{var t;return((t=Yc.find(r=>r.value===e))==null?void 0:t.label)||e},xX=({terminalContext:e})=>{const{data:t,isLoading:r}=uX(e);if(r)return o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6",children:[...Array(5)].map((a,i)=>o.jsxs("div",{className:"card p-4 animate-pulse",children:[o.jsx("div",{className:"h-4 bg-slate-200 rounded w-20 mb-2"}),o.jsx("div",{className:"h-8 bg-slate-200 rounded w-16"})]},i))});if(!t)return null;const n=e.mode==="ALL"||e.mode==="TERMINAL"&&(e.value==="EL_ROBLE"||e.value==="LA_REINA");return o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide mb-3",children:["Personal por Cargo ",n&&"(ER-LR)"]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:t.byCargo.map(a=>{const i=a.max_q?a.count/a.max_q*100:0,s=a.max_q&&a.count>a.max_q,l=a.max_q&&i>=80&&!s;return o.jsxs("div",{className:`card p-4 transition-all ${s?"border-danger-300 bg-danger-50":l?"border-warning-300 bg-warning-50":""}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-slate-100",children:o.jsx(G,{name:gX(a.cargo),size:18,className:"text-slate-600"})}),o.jsx("span",{className:"text-xs font-semibold text-slate-600 uppercase",children:vX(a.cargo)})]}),o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("span",{className:`text-2xl font-bold ${s?"text-danger-600":l?"text-warning-600":"text-slate-900"}`,children:a.count}),a.max_q&&o.jsxs("span",{className:"text-sm text-slate-500",children:["/ ",a.max_q]})]}),a.max_q&&o.jsx("div",{className:"mt-2 h-1.5 bg-slate-200 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full transition-all ${s?"bg-danger-500":l?"bg-warning-500":"bg-brand-500"}`,style:{width:`${Math.min(i,100)}%`}})})]},a.cargo)})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide mb-3",children:"Personal por Terminal"}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.byTerminal.map(a=>o.jsxs("div",{className:"card px-4 py-3 flex items-center gap-3",children:[o.jsx(G,{name:"building",size:18,className:"text-slate-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-slate-500",children:He(a.terminal_code)}),o.jsx("p",{className:"text-lg font-bold text-slate-900",children:a.count})]})]},a.terminal_code)),o.jsxs("div",{className:"card px-4 py-3 flex items-center gap-3 bg-brand-50 border-brand-200",children:[o.jsx(G,{name:"users",size:18,className:"text-brand-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-brand-600 font-semibold",children:"Total"}),o.jsx("p",{className:"text-lg font-bold text-brand-700",children:t.total})]})]})]})]})]})},yX=e=>{var t;return((t=Yc.find(r=>r.value===e))==null?void 0:t.label)||e},bX=({staff:e,onEdit:t,onOffboard:r,onAdmonish:n})=>e.length?o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"table-header-cell",children:"RUT"}),o.jsx("th",{scope:"col",className:"table-header-cell",children:"Nombre"}),o.jsx("th",{scope:"col",className:"table-header-cell",children:"Cargo"}),o.jsx("th",{scope:"col",className:"table-header-cell",children:"Terminal"}),o.jsx("th",{scope:"col",className:"table-header-cell",children:"Turno"}),o.jsx("th",{scope:"col",className:"table-header-cell",children:"Horario"}),o.jsx("th",{scope:"col",className:"table-header-cell",children:"Contacto"}),o.jsx("th",{scope:"col",className:"table-header-cell",children:"Estado"}),o.jsx("th",{scope:"col",className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:e.map(a=>{const i=a.status==="DESVINCULADO";return o.jsxs("tr",{className:`table-row ${i?"bg-danger-50 hover:bg-danger-100":""}`,children:[o.jsx("td",{className:"table-cell font-mono text-sm",children:Kt(a.rut)}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium text-slate-900",children:a.nombre}),a.admonition_count>0&&o.jsxs("span",{className:"badge badge-warning text-xs",title:`${a.admonition_count} amonestacin(es)`,children:[" ",a.admonition_count]})]})}),o.jsx("td",{className:"table-cell",children:yX(a.cargo)}),o.jsx("td",{className:"table-cell",children:He(a.terminal_code)}),o.jsx("td",{className:"table-cell",children:a.turno}),o.jsx("td",{className:"table-cell font-mono text-xs",children:a.horario}),o.jsx("td",{className:"table-cell text-sm",children:a.contacto}),o.jsx("td",{className:"table-cell",children:o.jsx("span",{className:`badge ${i?"badge-danger":"badge-success"}`,children:a.status})}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[!i&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>t(a),className:"btn btn-ghost btn-icon text-slate-600 hover:text-brand-600",title:"Modificar",children:o.jsx(G,{name:"clipboard",size:16})}),o.jsx("button",{onClick:()=>n(a),className:"btn btn-ghost btn-icon text-slate-600 hover:text-warning-600",title:"Amonestar",children:o.jsx(G,{name:"megaphone",size:16})}),o.jsx("button",{onClick:()=>r(a),className:"btn btn-ghost btn-icon text-slate-600 hover:text-danger-600",title:"Desvincular",children:o.jsx(G,{name:"logout",size:16})})]}),i&&o.jsx("span",{className:"text-xs text-danger-600",children:a.terminated_at?new Date(a.terminated_at).toLocaleDateString("es-CL"):"Desvinculado"})]})})]},a.id)})})]})}):o.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50/50 px-6 py-12 text-center",children:[o.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-slate-100 mb-4",children:o.jsx(G,{name:"users",size:28,className:"text-slate-400"})}),o.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"No hay personal registrado"}),o.jsx("p",{className:"mt-1 text-xs text-slate-500 max-w-xs",children:'Comienza agregando trabajadores con el botn "Nuevo Trabajador"'})]}),wX=["Maana","Tarde","Noche","Rotativo"],C0=["XS","S","M","L","XL","XXL","XXXL"],_X=["35","36","37","38","39","40","41","42","43","44","45","46"],aN=e=>e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e):!0,SX=({initialData:e,onSubmit:t,onCancel:r,isLoading:n})=>{const[a,i]=T.useState({rut:"",nombre:"",cargo:"conductor",terminal_code:"EL_ROBLE",turno:"Maana",horario:"08:00-18:00",contacto:"",email:"",talla_polera:"",talla_chaqueta:"",talla_pantalon:"",talla_zapato_seguridad:"",talla_chaleco_reflectante:""}),[s,l]=T.useState(null),[c,u]=T.useState(null),[d,f]=T.useState(""),[h,p]=T.useState(!1);T.useEffect(()=>{if(e){i({rut:e.rut,nombre:e.nombre,cargo:e.cargo,terminal_code:e.terminal_code,turno:e.turno,horario:e.horario,contacto:e.contacto,email:e.email||"",talla_polera:e.talla_polera||"",talla_chaqueta:e.talla_chaqueta||"",talla_pantalon:e.talla_pantalon||"",talla_zapato_seguridad:e.talla_zapato_seguridad||"",talla_chaleco_reflectante:e.talla_chaleco_reflectante||""}),f(Kt(e.rut));const _=e.email||e.talla_polera||e.talla_chaqueta||e.talla_pantalon||e.talla_zapato_seguridad||e.talla_chaleco_reflectante;p(!!_)}},[e]);const v=_=>{f(_);const w=S1(_);w.valid?(l(null),i(S=>({...S,rut:eo(_)}))):l(w.error||null)},g=()=>{a.rut&&f(Kt(a.rut))},x=_=>{i(w=>({...w,email:_})),_&&!aN(_)?u("Formato de correo invlido"):u(null)},b=_=>{_.preventDefault();const w=S1(a.rut);if(!w.valid){l(w.error||"RUT invlido");return}if(a.email&&!aN(a.email)){u("Formato de correo invlido");return}t(a)},m=!!e,y=(_,w,S)=>o.jsxs("div",{children:[o.jsx("label",{className:"label",children:_}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",className:"input",list:`${w}-options`,value:a[w]||"",onChange:j=>i(E=>({...E,[w]:j.target.value})),placeholder:"Seleccionar o escribir..."}),o.jsx("datalist",{id:`${w}-options`,children:S.map(j=>o.jsx("option",{value:j},j))})]})]});return o.jsxs("form",{onSubmit:b,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"RUT"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",className:`input ${s?"border-danger-500 focus:ring-danger-500":""}`,value:d,onChange:_=>v(_.target.value),onBlur:g,placeholder:"12.345.678-9",disabled:m,required:!0}),m&&o.jsx(G,{name:"key",size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"})]}),s&&o.jsx("p",{className:"mt-1 text-xs text-danger-600",children:s}),m&&o.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"El RUT no puede modificarse"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nombre Completo"}),o.jsx("input",{type:"text",className:"input",value:a.nombre,onChange:_=>i(w=>({...w,nombre:_.target.value})),placeholder:"Juan Prez Gonzlez",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cargo"}),o.jsx("select",{className:"input",value:a.cargo,onChange:_=>i(w=>({...w,cargo:_.target.value})),required:!0,children:Yc.map(_=>o.jsx("option",{value:_.value,children:_.label},_.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsx("select",{className:"input",value:a.terminal_code,onChange:_=>i(w=>({...w,terminal_code:_.target.value})),required:!0,children:Kn.map(_=>o.jsx("option",{value:_.value,children:_.label},_.value))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Turno"}),o.jsx("select",{className:"input",value:a.turno,onChange:_=>i(w=>({...w,turno:_.target.value})),required:!0,children:wX.map(_=>o.jsx("option",{value:_,children:_},_))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Horario"}),o.jsx("input",{type:"text",className:"input",value:a.horario,onChange:_=>i(w=>({...w,horario:_.target.value})),placeholder:"08:00-18:00",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Contacto"}),o.jsx("input",{type:"text",className:"input",value:a.contacto,onChange:_=>i(w=>({...w,contacto:_.target.value})),placeholder:"Telfono o email",required:!0})]}),o.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[o.jsxs("button",{type:"button",onClick:()=>p(!h),className:"w-full flex items-center justify-between px-4 py-3 bg-slate-50 hover:bg-slate-100 transition-colors",children:[o.jsxs("span",{className:"font-medium text-slate-700 flex items-center gap-2",children:[o.jsx(G,{name:"tag",size:18}),"Tallas y Correo"]}),o.jsx(G,{name:"chevron-down",size:18,className:`text-slate-500 transition-transform ${h?"rotate-180":""}`})]}),h&&o.jsxs("div",{className:"p-4 space-y-4 bg-white",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Correo Electrnico"}),o.jsx("input",{type:"email",className:`input ${c?"border-danger-500 focus:ring-danger-500":""}`,value:a.email||"",onChange:_=>x(_.target.value),placeholder:"trabajador@ejemplo.com"}),c&&o.jsx("p",{className:"mt-1 text-xs text-danger-600",children:c})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[y("Talla Polera","talla_polera",C0),y("Talla Chaqueta","talla_chaqueta",C0),y("Talla Pantaln","talla_pantalon",C0),y("Talla Zapato de Seguridad","talla_zapato_seguridad",_X),y("Talla Chaleco Reflectante","talla_chaleco_reflectante",C0)]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n||!!s||!!c,children:n?o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Guardando..."]}):m?"Guardar Cambios":"Crear Trabajador"})]})]})},jX=({staffName:e,onConfirm:t,onCancel:r,isLoading:n})=>{const[a,i]=T.useState(""),s=l=>{l.preventDefault(),a.trim()&&t(a.trim())};return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),o.jsxs("div",{className:"relative w-full max-w-md card p-6 animate-scale-in",children:[o.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[o.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-danger-100",children:o.jsx(G,{name:"logout",size:24,className:"text-danger-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Desvincular Trabajador"}),o.jsxs("p",{className:"text-sm text-slate-600",children:["Ests seguro que deseas desvincular a ",o.jsx("strong",{children:e}),"?"]})]})]}),o.jsx("div",{className:"mb-4 p-3 rounded-lg bg-warning-50 border border-warning-200",children:o.jsxs("p",{className:"text-sm text-warning-800",children:[o.jsx("strong",{children:" Esta accin es irreversible."})," El trabajador quedar marcado como desvinculado y no podr ser eliminado del sistema."]})}),o.jsxs("form",{onSubmit:s,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"label",children:"Motivo de Desvinculacin *"}),o.jsx("textarea",{className:"input min-h-[100px]",value:a,onChange:l=>i(l.target.value),placeholder:"Describe el motivo de la desvinculacin...",required:!0})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-danger",disabled:n||!a.trim(),children:n?o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Procesando..."]}):"Confirmar Desvinculacin"})]})]})]})]})},EX=({staffName:e,onConfirm:t,onCancel:r,isLoading:n})=>{const[a,i]=T.useState(""),[s,l]=T.useState(new Date().toISOString().split("T")[0]),[c,u]=T.useState(null),[d,f]=T.useState(!1),h=T.useRef(null),p=m=>{m.preventDefault(),a.trim()&&s&&c&&t(a.trim(),s,c)},v=m=>{m.preventDefault(),m.stopPropagation(),m.type==="dragenter"||m.type==="dragover"?f(!0):m.type==="dragleave"&&f(!1)},g=m=>{m.preventDefault(),m.stopPropagation(),f(!1),m.dataTransfer.files&&m.dataTransfer.files[0]&&u(m.dataTransfer.files[0])},x=m=>{m.target.files&&m.target.files[0]&&u(m.target.files[0])},b=()=>{u(null),h.current&&(h.current.value="")};return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),o.jsxs("div",{className:"relative w-full max-w-lg card p-6 animate-scale-in",children:[o.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[o.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-warning-100",children:o.jsx(G,{name:"megaphone",size:24,className:"text-warning-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Registrar Amonestacin"}),o.jsxs("p",{className:"text-sm text-slate-600",children:["Amonestacin para ",o.jsx("strong",{children:e})]})]})]}),o.jsxs("form",{onSubmit:p,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Motivo de la Amonestacin *"}),o.jsx("textarea",{className:"input min-h-[80px]",value:a,onChange:m=>i(m.target.value),placeholder:"Describe el motivo de la amonestacin...",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha de Amonestacin *"}),o.jsx("input",{type:"date",className:"input",value:s,onChange:m=>l(m.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Documento Adjunto *"}),o.jsxs("div",{className:`border-2 border-dashed rounded-xl p-6 text-center transition-all ${d?"border-brand-500 bg-brand-50":c?"border-success-300 bg-success-50":"border-slate-300 hover:border-slate-400"}`,onDragEnter:v,onDragLeave:v,onDragOver:v,onDrop:g,children:[o.jsx("input",{ref:h,type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:x,className:"hidden",id:"admonition-file"}),c?o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsx(G,{name:"check-circle",size:24,className:"text-success-600"}),o.jsxs("div",{className:"text-left",children:[o.jsx("p",{className:"text-sm font-medium text-slate-900",children:c.name}),o.jsxs("p",{className:"text-xs text-slate-500",children:[(c.size/1024).toFixed(1)," KB"]})]}),o.jsx("button",{type:"button",onClick:b,className:"ml-4 text-danger-600 hover:text-danger-700",children:o.jsx(G,{name:"x",size:20})})]}):o.jsxs("label",{htmlFor:"admonition-file",className:"cursor-pointer flex flex-col items-center gap-2",children:[o.jsx(G,{name:"image",size:32,className:"text-slate-400"}),o.jsxs("p",{className:"text-sm text-slate-600",children:[o.jsx("span",{className:"font-semibold text-brand-600",children:"Haz clic para subir"})," ","o arrastra el archivo aqu"]}),o.jsx("p",{className:"text-xs text-slate-400",children:"PDF, JPG, PNG (mx. 10MB)"})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n||!a.trim()||!s||!c,children:n?o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Guardando..."]}):"Registrar Amonestacin"})]})]})]})]})},NX=()=>{const e=$e(y=>y.context),t=$e(y=>y.setContext),[r,n]=T.useState({status:"todos",cargo:"todos"}),[a,i]=T.useState({type:"none"}),s=uR(e,r),l=dX(),c=fX(),u=hX(),d=pX();mX(e);const f=[{key:"rut",header:"RUT",value:y=>Kt(y.rut)},{key:"nombre",header:"NOMBRE",value:y=>y.nombre},{key:"cargo",header:"CARGO",value:y=>y.cargo},{key:"terminal_code",header:"TERMINAL",value:y=>He(y.terminal_code)},{key:"turno",header:"TURNO",value:y=>y.turno},{key:"horario",header:"HORARIO",value:y=>y.horario},{key:"contacto",header:"CONTACTO",value:y=>y.contacto},{key:"email",header:"CORREO",value:y=>y.email||""},{key:"talla_polera",header:"TALLA_POLERA",value:y=>y.talla_polera||""},{key:"talla_chaqueta",header:"TALLA_CHAQUETA",value:y=>y.talla_chaqueta||""},{key:"talla_pantalon",header:"TALLA_PANTALON",value:y=>y.talla_pantalon||""},{key:"talla_zapato_seguridad",header:"TALLA_ZAPATO_SEGURIDAD",value:y=>y.talla_zapato_seguridad||""},{key:"talla_chaleco_reflectante",header:"TALLA_CHALECO_REFLECTANTE",value:y=>y.talla_chaleco_reflectante||""},{key:"status",header:"ESTADO",value:y=>y.status},{key:"terminated_at",header:"FECHA_DESVINCULACION",value:y=>y.terminated_at?new Date(y.terminated_at).toLocaleDateString("es-CL"):""},{key:"termination_comment",header:"COMENTARIO_DESVINCULACION",value:y=>y.termination_comment||""}],h=()=>{s.data&&Je({filename:"personal_vista",sheetName:"Personal",rows:s.data,columns:f})},p=()=>{s.data&&Je({filename:"personal_completo",sheetName:"Personal",rows:s.data,columns:f})},v=async y=>{try{await l.mutateAsync(y),i({type:"none"})}catch(_){console.error("Error creating staff:",_),alert(_ instanceof Error?_.message:"Error al crear trabajador")}},g=async y=>{if(a.type==="edit")try{await c.mutateAsync({id:a.staff.id,values:y}),i({type:"none"})}catch(_){console.error("Error updating staff:",_),alert(_ instanceof Error?_.message:"Error al actualizar trabajador")}},x=async y=>{if(a.type==="offboard")try{await u.mutateAsync({id:a.staff.id,comment:y}),i({type:"none"})}catch(_){console.error("Error offboarding staff:",_),alert(_ instanceof Error?_.message:"Error al desvincular trabajador")}},b=async(y,_,w)=>{if(a.type==="admonish")try{await d.mutateAsync({staffId:a.staff.id,reason:y,admonitionDate:_,file:w}),i({type:"none"})}catch(S){console.error("Error creating admonition:",S),alert(S instanceof Error?S.message:"Error al registrar amonestacin")}},m=()=>i({type:"none"});return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Xt,{title:"Personal",description:"Gestin del equipo operativo por terminal.",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary",onClick:()=>i({type:"create"}),children:[o.jsx(G,{name:"users",size:18}),"Nuevo Trabajador"]}),o.jsx(jr,{onExportView:h,onExportAll:p})]})}),o.jsx(xX,{terminalContext:e}),o.jsxs(An,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:r.status,onChange:y=>n(_=>({..._,status:y.target.value})),children:rX.map(y=>o.jsx("option",{value:y.value,children:y.label},y.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Cargo"}),o.jsxs("select",{className:"input",value:r.cargo||"todos",onChange:y=>n(_=>({..._,cargo:y.target.value})),children:[o.jsx("option",{value:"todos",children:"Todos"}),Yc.map(y=>o.jsx("option",{value:y.value,children:y.label},y.value))]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"RUT o nombre",value:r.search??"",onChange:y=>n(_=>({..._,search:y.target.value}))})]})]}),s.isLoading&&o.jsx(Gt,{label:"Cargando personal..."}),s.isError&&o.jsx(Sr,{onRetry:()=>s.refetch()}),!s.isLoading&&!s.isError&&o.jsx(bX,{staff:s.data||[],onEdit:y=>i({type:"edit",staff:y}),onOffboard:y=>i({type:"offboard",staff:y}),onAdmonish:y=>i({type:"admonish",staff:y})}),(a.type==="create"||a.type==="edit")&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:m}),o.jsxs("div",{className:"relative w-full max-w-2xl card p-6 animate-scale-in max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-xl font-bold text-slate-900",children:a.type==="create"?"Nuevo Trabajador":"Editar Trabajador"}),o.jsx("button",{onClick:m,className:"text-slate-400 hover:text-slate-600",children:o.jsx(G,{name:"x",size:24})})]}),o.jsx(SX,{initialData:a.type==="edit"?a.staff:null,onSubmit:a.type==="create"?v:g,onCancel:m,isLoading:l.isPending||c.isPending})]})]}),a.type==="offboard"&&o.jsx(jX,{staffName:a.staff.nombre,onConfirm:x,onCancel:m,isLoading:u.isPending}),a.type==="admonish"&&o.jsx(EX,{staffName:a.staff.nombre,onConfirm:b,onCancel:m,isLoading:d.isPending})]})},TX="https://kzslhhctjfxsdvcrqvvs.supabase.co/functions/v1/send-email",iN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt6c2xoaGN0amZ4c2R2Y3JxdnZzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4NDAzODQsImV4cCI6MjA4MTQxNjM4NH0.NQ1maFD5Nl8y-5TxJFjeSdhOSzOi-6Hd8o4VcrmLUKo",Gs={sendEmail:async e=>{const t=await fetch(TX,{method:"POST",headers:{"Content-Type":"application/json",apikey:iN,Authorization:`Bearer ${iN}`},body:JSON.stringify(e)});if(!t.ok){const n=await t.text();throw new Error(`Email send failed: ${t.status} ${n}`)}const r=await t.json();return{accepted:r.accepted??!0,messageId:r.messageId??"pending"}}},AX=Object.freeze(Object.defineProperty({__proto__:null,emailService:Gs},Symbol.toStringTag,{value:"Module"})),OX=async(e,t)=>{if(!Xr())return[];const r=Ba(e);let n=fe.from("meetings").select(`
            *,
            meeting_invitees(count),
            meeting_files(count),
            meeting_actions(count)
        `).in("terminal_code",r).order("starts_at",{ascending:!1});if(t!=null&&t.status&&t.status!=="todos"&&(n=n.eq("status",t.status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.ilike("title",s)}t!=null&&t.date_from&&(n=n.gte("starts_at",t.date_from)),t!=null&&t.date_to&&(n=n.lte("starts_at",t.date_to+"T23:59:59"));const{data:a,error:i}=await n;if(i)throw i;return(a||[]).map(s=>{var l,c,u,d,f,h;return{...s,invitees_count:((c=(l=s.meeting_invitees)==null?void 0:l[0])==null?void 0:c.count)||0,files_count:((d=(u=s.meeting_files)==null?void 0:u[0])==null?void 0:d.count)||0,actions_count:((h=(f=s.meeting_actions)==null?void 0:f[0])==null?void 0:h.count)||0}})},dR=async e=>{const{data:t,error:r}=await fe.from("meetings").select("*").eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t},CX=async(e,t)=>{const{data:r,error:n}=await fe.from("meetings").insert({title:e.title,terminal_code:e.terminal_code,starts_at:e.starts_at,duration_minutes:e.duration_minutes,location:e.location||null,meeting_link:e.meeting_link||null,agenda_json:e.agenda_json||[],created_by_supervisor:t}).select().single();if(n)throw zn("Error al crear reunin","No se pudo guardar la reunin"),n;return e.invitees.length>0&&await hR(r.id,e.invitees),Vn("Reunin creada",`"${e.title}" programada correctamente`,t),r},kX=async(e,t)=>{const r={};t.title!==void 0&&(r.title=t.title),t.terminal_code!==void 0&&(r.terminal_code=t.terminal_code),t.starts_at!==void 0&&(r.starts_at=t.starts_at),t.duration_minutes!==void 0&&(r.duration_minutes=t.duration_minutes),t.location!==void 0&&(r.location=t.location||null),t.meeting_link!==void 0&&(r.meeting_link=t.meeting_link||null),t.agenda_json!==void 0&&(r.agenda_json=t.agenda_json);const{data:n,error:a}=await fe.from("meetings").update(r).eq("id",e).select().single();if(a)throw a;return n},PX=async(e,t,r)=>{const n={status:t};r&&(n.cancel_reason=r);const{error:a}=await fe.from("meetings").update(n).eq("id",e);if(a)throw a},RX=async(e,t)=>{const{error:r}=await fe.from("meetings").update({minutes_text:t}).eq("id",e);if(r)throw r},fR=async e=>{const{data:t,error:r}=await fe.from("meeting_invitees").select("*").eq("meeting_id",e).order("invitee_name");if(r)throw r;return t||[]},hR=async(e,t)=>{const r=t.map(a=>({meeting_id:e,staff_id:a.staff_id||null,invitee_name:a.invitee_name,invitee_email:a.invitee_email||null})),{error:n}=await fe.from("meeting_invitees").insert(r);if(n)throw n},sN=async(e,t)=>{const{error:r}=await fe.from("meeting_invitees").update({notification_status:t,notified_at:t==="ENVIADO"?new Date().toISOString():null}).eq("id",e);if(r)throw r},IX=async e=>{const{data:t,error:r}=await fe.from("meeting_files").select("*").eq("meeting_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},DX=async(e,t,r)=>{const n=t.name.split(".").pop(),a=`meetings/${e}/${Date.now()}.${n}`,{error:i}=await fe.storage.from("meeting-files").upload(a,t);if(i)throw zn("Error al subir archivo",i.message),i;const{data:s,error:l}=await fe.from("meeting_files").insert({meeting_id:e,storage_path:a,file_name:t.name,mime_type:t.type,size_bytes:t.size,uploaded_by:r}).select().single();if(l)throw l;return s},MX=async(e,t)=>{await fe.storage.from("meeting-files").remove([t]);const{error:r}=await fe.from("meeting_files").delete().eq("id",e);if(r)throw r},LX=async e=>{const{data:t,error:r}=await fe.storage.from("meeting-files").createSignedUrl(e,3600);if(r)throw r;return t.signedUrl},$X=async e=>{const{data:t,error:r}=await fe.from("meeting_actions").select("*").eq("meeting_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},FX=async(e,t)=>{const{data:r,error:n}=await fe.from("meeting_actions").insert({meeting_id:e,description:t.description,responsible_staff_id:t.responsible_staff_id||null,responsible_name:t.responsible_name||null,due_date:t.due_date||null}).select().single();if(n)throw n;return r},BX=async(e,t)=>{const{data:r,error:n}=await fe.from("meeting_actions").update(t).eq("id",e).select().single();if(n)throw n;return r},UX=async e=>{const{error:t}=await fe.from("meeting_actions").delete().eq("id",e);if(t)throw t},pR=async(e,t)=>{const{data:r,error:n}=await fe.from("meeting_email_settings").select("*").eq("scope_type",e).eq("scope_code",t).single();if(n){if(n.code==="PGRST116")return null;throw n}return r},zX=async e=>{const{error:t}=await fe.from("meeting_email_settings").upsert(e,{onConflict:"scope_type,scope_code"});if(t)throw t},qX=async(e,t,r)=>{var c;const n=await pR("GLOBAL","ALL");if(!(n!=null&&n.enabled))return;const a=new Date(e.starts_at),i=a.toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),s=a.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"}),l=e.agenda_json.map((u,d)=>`${d+1}. ${u.text}`).join(`
`)||"Sin agenda definida";for(const u of t)if(u.invitee_email)try{const d=n.subject_template.replace("{{title}}",e.title),f=n.body_template.replace("{{invitee_name}}",u.invitee_name).replace("{{title}}",e.title).replace("{{date}}",i).replace("{{time}}",s).replace("{{duration}}",e.duration_minutes.toString()).replace("{{location}}",e.location||e.meeting_link||"Por confirmar").replace("{{agenda}}",l).replace("{{organizer}}",r);await Gs.sendEmail({audience:"manual",manualRecipients:[u.invitee_email],cc:((c=n.cc_emails)==null?void 0:c.split(",").map(h=>h.trim()).filter(Boolean))||[],subject:d,body:f.replace(/\n/g,"<br>")}),await sN(u.id,"ENVIADO")}catch(d){console.error("Error sending invitation:",d),await sN(u.id,"ERROR")}},WX=async()=>{const{data:e,error:t}=await fe.from("staff").select("id, nombre, email, terminal_code").eq("cargo","Supervisor").eq("status","ACTIVO").order("nombre");if(t)throw t;return e||[]},tt={all:["meetings"],list:(e,t)=>[...tt.all,"list",e,t],detail:e=>[...tt.all,"detail",e],invitees:e=>[...tt.all,"invitees",e],files:e=>[...tt.all,"files",e],actions:e=>[...tt.all,"actions",e],supervisors:["supervisors"],emailSettings:e=>[...tt.all,"emailSettings",e]},K_=e=>{const t=$e(n=>n.context),r=t.mode==="ALL"?"ALL":t.value||"ALL";return rt({queryKey:tt.list(r,e),queryFn:()=>OX(t,e)})},HX=e=>rt({queryKey:tt.detail(e||""),queryFn:()=>dR(e),enabled:!!e}),mR=()=>{const e=Ge(),t=fr(r=>r.session);return Xe({mutationFn:r=>CX(r,(t==null?void 0:t.supervisorName)||""),onSuccess:()=>{e.invalidateQueries({queryKey:tt.all})}})},VX=()=>{const e=Ge();return Xe({mutationFn:({id:t,values:r})=>kX(t,r),onSuccess:(t,{id:r})=>{e.invalidateQueries({queryKey:tt.all}),e.invalidateQueries({queryKey:tt.detail(r)})}})},KX=()=>{const e=Ge();return Xe({mutationFn:({id:t,status:r,reason:n})=>PX(t,r,n),onSuccess:()=>{e.invalidateQueries({queryKey:tt.all})}})},GX=()=>{const e=Ge();return Xe({mutationFn:({id:t,minutes:r})=>RX(t,r),onSuccess:(t,{id:r})=>{e.invalidateQueries({queryKey:tt.detail(r)})}})},gR=e=>rt({queryKey:tt.invitees(e||""),queryFn:()=>fR(e),enabled:!!e}),XX=()=>{const e=Ge();return Xe({mutationFn:({meetingId:t,invitees:r})=>hR(t,r),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:tt.invitees(r)}),e.invalidateQueries({queryKey:tt.all})}})},YX=e=>rt({queryKey:tt.files(e||""),queryFn:()=>IX(e),enabled:!!e}),QX=()=>{const e=Ge(),t=fr(r=>r.session);return Xe({mutationFn:({meetingId:r,file:n})=>DX(r,n,(t==null?void 0:t.supervisorName)||""),onSuccess:(r,{meetingId:n})=>{e.invalidateQueries({queryKey:tt.files(n)}),e.invalidateQueries({queryKey:tt.all})}})},JX=()=>{const e=Ge();return Xe({mutationFn:({id:t,storagePath:r,meetingId:n})=>MX(t,r),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:tt.files(r)}),e.invalidateQueries({queryKey:tt.all})}})},ZX=e=>rt({queryKey:tt.actions(e||""),queryFn:()=>$X(e),enabled:!!e}),eY=()=>{const e=Ge();return Xe({mutationFn:({meetingId:t,values:r})=>FX(t,r),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:tt.actions(r)}),e.invalidateQueries({queryKey:tt.all})}})},tY=()=>{const e=Ge();return Xe({mutationFn:({id:t,meetingId:r,values:n})=>BX(t,n),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:tt.actions(r)})}})},rY=()=>{const e=Ge();return Xe({mutationFn:({id:t,meetingId:r})=>UX(t),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:tt.actions(r)}),e.invalidateQueries({queryKey:tt.all})}})},nY=()=>rt({queryKey:tt.supervisors,queryFn:WX,staleTime:5*60*1e3}),aY=(e,t)=>rt({queryKey:tt.emailSettings(`${e}-${t}`),queryFn:()=>pR(e,t)}),iY=()=>{const e=Ge();return Xe({mutationFn:t=>zX(t),onSuccess:()=>{e.invalidateQueries({queryKey:tt.all})}})},sY=()=>{const e=Ge(),t=fr(r=>r.session);return Xe({mutationFn:async({meetingId:r})=>{const n=await dR(r),a=await fR(r);n&&a.length>0&&await qX(n,a,(t==null?void 0:t.supervisorName)||"")},onSuccess:(r,{meetingId:n})=>{e.invalidateQueries({queryKey:tt.invitees(n)})}})},oY=["ISAAC AVILA","CLAUDIO ARRIAGADA","CRISTIAN LURASCHI"],k0=e=>e.toUpperCase().trim().replace(/\s+/g," "),vR=e=>{const t=k0(e);return oY.some(r=>k0(r)===t||t.includes(k0(r))||k0(r).includes(t))},lY=[{value:"todos",label:"Todos"},{value:"PROGRAMADA",label:"Programada"},{value:"REALIZADA",label:"Realizada"},{value:"CANCELADA",label:"Cancelada"}],cY=({value:e,onChange:t,existingInvitees:r=[]})=>{const n=nY(),[a,i]=T.useState(""),[s,l]=T.useState(!1),[c,u]=T.useState(""),[d,f]=T.useState(""),h=new Set([...r.map(b=>b.staff_id).filter(Boolean),...e.map(b=>b.staff_id).filter(Boolean)]),p=T.useMemo(()=>{if(!n.data)return[];const b=a.toLowerCase();return n.data.filter(m=>!h.has(m.id)).filter(m=>m.nombre.toLowerCase().includes(b)||(m.email||"").toLowerCase().includes(b)).slice(0,8)},[n.data,a,h]),v=b=>{t([...e,{staff_id:b.id,invitee_name:b.nombre,invitee_email:b.email||void 0}]),i(""),l(!1)},g=()=>{d.trim()&&(t([...e,{invitee_name:d.trim(),invitee_email:c.trim()||void 0}]),f(""),u(""))},x=b=>{t(e.filter((m,y)=>y!==b))};return o.jsxs("div",{className:"space-y-3",children:[r.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Ya invitados:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(b=>o.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1 bg-slate-100 rounded-full text-sm",children:[o.jsx(G,{name:"user",size:14,className:"text-slate-400"}),o.jsx("span",{children:b.invitee_name})]},b.id))})]}),e.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:e.map((b,m)=>o.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1 bg-brand-100 text-brand-800 rounded-full text-sm",children:[o.jsx(G,{name:"user",size:14}),o.jsx("span",{children:b.invitee_name}),o.jsx("button",{type:"button",onClick:()=>x(m),className:"ml-1 hover:text-brand-600",children:o.jsx(G,{name:"x",size:14})})]},m))}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",className:"input",value:a,onChange:b=>{i(b.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Buscar supervisor por nombre o correo..."}),s&&p.length>0&&o.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:p.map(b=>o.jsxs("button",{type:"button",onClick:()=>v(b),className:"w-full px-4 py-2 text-left hover:bg-slate-50 border-b last:border-b-0 border-slate-100",children:[o.jsx("div",{className:"font-medium text-slate-800",children:b.nombre}),b.email&&o.jsx("div",{className:"text-sm text-slate-500",children:b.email})]},b.id))})]}),o.jsxs("div",{className:"border-t pt-3",children:[o.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Agregar invitado externo:"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-2",children:[o.jsx("input",{type:"text",className:"input flex-1",value:d,onChange:b=>f(b.target.value),placeholder:"Nombre"}),o.jsx("input",{type:"email",className:"input flex-1",value:c,onChange:b=>u(b.target.value),placeholder:"Correo (opcional)"}),o.jsx("button",{type:"button",onClick:g,className:"btn btn-secondary shrink-0",disabled:!d.trim(),children:o.jsx(G,{name:"plus",size:18})})]})]})]})},oN=({meeting:e,onClose:t,onSuccess:r})=>{const n=$e(m=>m.context),a=mR(),i=VX(),s=gR((e==null?void 0:e.id)||null),l=XX(),[c,u]=T.useState({title:"",terminal_code:n.mode==="TERMINAL"?n.value:"EL_ROBLE",starts_at:"",duration_minutes:60,location:"",meeting_link:"",agenda_json:[],invitees:[]}),[d,f]=T.useState("");T.useEffect(()=>{e&&u({title:e.title,terminal_code:e.terminal_code,starts_at:e.starts_at.slice(0,16),duration_minutes:e.duration_minutes,location:e.location||"",meeting_link:e.meeting_link||"",agenda_json:e.agenda_json||[],invitees:[]})},[e]);const h=()=>{if(!d.trim())return;const m={id:crypto.randomUUID(),text:d.trim()};u(y=>({...y,agenda_json:[...y.agenda_json,m]})),f("")},p=m=>{u(y=>({...y,agenda_json:y.agenda_json.filter(_=>_.id!==m)}))},v=m=>{u(y=>({...y,invitees:m}))},g=async m=>{m.preventDefault();try{e?(await i.mutateAsync({id:e.id,values:c}),c.invitees.length>0&&await l.mutateAsync({meetingId:e.id,invitees:c.invitees})):await a.mutateAsync(c),r()}catch(y){console.error("Error saving meeting:",y)}},x=c.title&&c.starts_at&&c.terminal_code,b=a.isPending||i.isPending;return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),o.jsxs("div",{className:"relative w-full max-w-2xl bg-white rounded-2xl shadow-2xl max-h-[90vh] overflow-hidden",children:[o.jsx("div",{className:"bg-brand-600 text-white p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-xl font-bold",children:e?"Editar Reunin":"Nueva Reunin"}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg",children:o.jsx(G,{name:"x",size:24})})]})}),o.jsxs("form",{onSubmit:g,className:"p-6 overflow-y-auto max-h-[calc(90vh-180px)]",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Ttulo de la reunin"}),o.jsx("input",{type:"text",className:"input",value:c.title,onChange:m=>u(y=>({...y,title:m.target.value})),placeholder:"Ej: Reunin de coordinacin semanal",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsx("select",{className:"input",value:c.terminal_code,onChange:m=>u(y=>({...y,terminal_code:m.target.value})),required:!0,children:Kn.map(m=>o.jsx("option",{value:m.value,children:m.label},m.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha y hora"}),o.jsx("input",{type:"datetime-local",className:"input",value:c.starts_at,onChange:m=>u(y=>({...y,starts_at:m.target.value})),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Duracin (minutos)"}),o.jsxs("select",{className:"input",value:c.duration_minutes,onChange:m=>u(y=>({...y,duration_minutes:Number(m.target.value)})),children:[o.jsx("option",{value:30,children:"30 minutos"}),o.jsx("option",{value:60,children:"1 hora"}),o.jsx("option",{value:90,children:"1.5 horas"}),o.jsx("option",{value:120,children:"2 horas"}),o.jsx("option",{value:180,children:"3 horas"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Lugar / Sala"}),o.jsx("input",{type:"text",className:"input",value:c.location,onChange:m=>u(y=>({...y,location:m.target.value})),placeholder:"Ej: Sala de reuniones"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Link de videollamada (opcional)"}),o.jsx("input",{type:"url",className:"input",value:c.meeting_link,onChange:m=>u(y=>({...y,meeting_link:m.target.value})),placeholder:"https://meet.google.com/..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Agenda"}),o.jsxs("div",{className:"space-y-2",children:[c.agenda_json.map((m,y)=>o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-2 rounded-lg",children:[o.jsxs("span",{className:"font-medium text-slate-500",children:[y+1,"."]}),o.jsx("span",{className:"flex-1",children:m.text}),o.jsx("button",{type:"button",onClick:()=>p(m.id),className:"text-red-500 hover:text-red-700",children:o.jsx(G,{name:"x",size:16})})]},m.id)),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",className:"input flex-1",value:d,onChange:m=>f(m.target.value),placeholder:"Agregar punto a la agenda",onKeyDown:m=>m.key==="Enter"&&(m.preventDefault(),h())}),o.jsx("button",{type:"button",onClick:h,className:"btn btn-secondary",children:o.jsx(G,{name:"plus",size:18})})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Invitados (supervisores)"}),o.jsx(cY,{value:c.invitees,onChange:v,existingInvitees:s.data||[]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-6 mt-6 border-t",children:[o.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:!x||b,className:"btn btn-primary",children:b?"Guardando...":e?"Actualizar":"Crear Reunin"})]})]})]})]})},uY=({meetingTitle:e,onConfirm:t,onCancel:r,isLoading:n})=>{const[a,i]=T.useState("");return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),o.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 animate-scale-in",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:o.jsx(G,{name:"alert-triangle",size:24,className:"text-red-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Cancelar Reunin"}),o.jsx("p",{className:"text-sm text-slate-500",children:e})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"label",children:"Motivo de cancelacin"}),o.jsx("textarea",{className:"input min-h-[100px] resize-none",value:a,onChange:s=>i(s.target.value),placeholder:"Indique el motivo por el cual se cancela esta reunin...",required:!0})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Volver"}),o.jsx("button",{onClick:()=>t(a),disabled:!a.trim()||n,className:"btn bg-red-600 hover:bg-red-700 text-white",children:n?"Cancelando...":"Confirmar Cancelacin"})]})]})]})},dY=({onOpenMeeting:e})=>{const t=$e(w=>w.context),r=$e(w=>w.setContext),n=fr(w=>w.session),a=(n==null?void 0:n.supervisorName)??"",i=vR(a),[s,l]=T.useState({status:"todos"}),[c,u]=T.useState(!1),[d,f]=T.useState(null),[h,p]=T.useState(null),v=K_(s);mR();const g=KX(),x=[{key:"starts_at",header:"Fecha/Hora",value:w=>b(w.starts_at)},{key:"title",header:"Ttulo",value:w=>w.title},{key:"terminal",header:"Terminal",value:w=>He(w.terminal_code)},{key:"status",header:"Estado",value:w=>w.status},{key:"duration",header:"Duracin (min)",value:w=>w.duration_minutes.toString()},{key:"invitees",header:"Invitados",value:w=>w.invitees_count.toString()},{key:"location",header:"Lugar",value:w=>w.location||w.meeting_link||""}],b=w=>{const S=new Date(w);return S.toLocaleDateString("es-CL",{day:"2-digit",month:"short",year:"numeric"})+" "+S.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})},m=w=>{switch(w){case"REALIZADA":return o.jsx("span",{className:"badge badge-success",children:w});case"CANCELADA":return o.jsx("span",{className:"badge badge-danger",children:w});default:return o.jsx("span",{className:"badge badge-warning",children:w})}},y=async w=>{h&&(await g.mutateAsync({id:h.id,status:"CANCELADA",reason:w}),p(null))},_=async w=>{await g.mutateAsync({id:w.id,status:"REALIZADA"})};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Xt,{title:"Reuniones",description:"Gestin de reuniones y seguimiento de acuerdos",actions:o.jsxs("div",{className:"flex gap-2",children:[i&&o.jsxs("button",{className:"btn btn-primary",onClick:()=>u(!0),children:[o.jsx(G,{name:"plus",size:18})," Nueva Reunin"]}),o.jsx(jr,{onExportView:()=>Je({filename:"reuniones",sheetName:"Reuniones",rows:v.data||[],columns:x}),onExportAll:()=>Je({filename:"reuniones_all",sheetName:"Reuniones",rows:v.data||[],columns:x})})]})}),o.jsxs(An,{terminalContext:t,onTerminalChange:r,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:s.status,onChange:w=>l(S=>({...S,status:w.target.value})),children:lY.map(w=>o.jsx("option",{value:w.value,children:w.label},w.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"Ttulo de reunin",value:s.search??"",onChange:w=>l(S=>({...S,search:w.target.value}))})]})]}),v.isLoading&&o.jsx(Gt,{label:"Cargando reuniones..."}),v.isError&&o.jsx(Sr,{onRetry:()=>v.refetch()}),!v.isLoading&&!v.isError&&o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{className:"table-header-cell",children:"Fecha/Hora"}),o.jsx("th",{className:"table-header-cell",children:"Ttulo"}),o.jsx("th",{className:"table-header-cell",children:"Terminal"}),o.jsx("th",{className:"table-header-cell",children:"Estado"}),o.jsx("th",{className:"table-header-cell text-center",children:"Inv."}),o.jsx("th",{className:"table-header-cell text-center",children:"Tareas"}),o.jsx("th",{className:"table-header-cell text-center",children:"Adj."}),o.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:(v.data||[]).length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"table-cell text-center text-slate-500 py-8",children:"No hay reuniones registradas"})}):(v.data||[]).map(w=>o.jsxs("tr",{className:"table-row cursor-pointer hover:bg-slate-50",onClick:()=>e(w.id),children:[o.jsx("td",{className:"table-cell text-sm",children:b(w.starts_at)}),o.jsx("td",{className:"table-cell font-medium",children:w.title}),o.jsx("td",{className:"table-cell text-sm",children:He(w.terminal_code)}),o.jsx("td",{className:"table-cell",children:m(w.status)}),o.jsx("td",{className:"table-cell text-center",children:o.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-sm font-medium",children:w.invitees_count})}),o.jsx("td",{className:"table-cell text-center",children:o.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-sm font-medium",children:w.actions_count})}),o.jsx("td",{className:"table-cell text-center",children:o.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-sm font-medium",children:w.files_count})}),o.jsx("td",{className:"table-cell",onClick:S=>S.stopPropagation(),children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[o.jsx("button",{onClick:()=>e(w.id),className:"btn btn-ghost btn-icon",title:"Ver detalle",children:o.jsx(G,{name:"eye",size:16})}),i&&w.status==="PROGRAMADA"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>f(w),className:"btn btn-ghost btn-icon",title:"Editar",children:o.jsx(G,{name:"edit",size:16})}),o.jsx("button",{onClick:()=>_(w),className:"btn btn-ghost btn-icon text-success-600",title:"Marcar realizada",children:o.jsx(G,{name:"check-circle",size:16})}),o.jsx("button",{onClick:()=>p(w),className:"btn btn-ghost btn-icon text-danger-600",title:"Cancelar",children:o.jsx(G,{name:"x-circle",size:16})})]})]})})]},w.id))})]})}),c&&o.jsx(oN,{onClose:()=>u(!1),onSuccess:()=>u(!1)}),d&&o.jsx(oN,{meeting:d,onClose:()=>f(null),onSuccess:()=>f(null)}),h&&o.jsx(uY,{meetingTitle:h.title,onConfirm:y,onCancel:()=>p(null),isLoading:g.isPending})]})},fY=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],hY=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],pY=({onOpenMeeting:e})=>{const t=new Date,[r,n]=T.useState(t.getFullYear()),[a,i]=T.useState(t.getMonth()),[s,l]=T.useState(null),c=K_({status:"todos"}),u=T.useMemo(()=>{const b=new Date(r,a,1),y=new Date(r,a+1,0).getDate();let _=b.getDay();const w=[];for(let S=0;S<_;S++)w.push(null);for(let S=1;S<=y;S++)w.push(S);return w},[r,a]),d=b=>{if(!c.data)return[];const m=`${r}-${String(a+1).padStart(2,"0")}-${String(b).padStart(2,"0")}`;return c.data.filter(y=>y.starts_at.startsWith(m))},f=T.useMemo(()=>{if(!c.data)return[];const b=new Date().toISOString();return c.data.filter(m=>m.status==="PROGRAMADA"&&m.starts_at>=b).sort((m,y)=>m.starts_at.localeCompare(y.starts_at)).slice(0,5)},[c.data]),h=s?d(parseInt(s.split("-")[2])):[],p=()=>{a===0?(i(11),n(r-1)):i(a-1)},v=()=>{a===11?(i(0),n(r+1)):i(a+1)},g=b=>new Date(b).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"}),x=b=>{switch(b){case"REALIZADA":return"bg-green-500";case"CANCELADA":return"bg-red-500";default:return"bg-brand-500"}};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(Xt,{title:"Agenda",description:"Vista de calendario de reuniones"}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 card p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("button",{onClick:p,className:"btn btn-ghost btn-icon",children:o.jsx(G,{name:"chevron-right",size:20,className:"rotate-180"})}),o.jsxs("h3",{className:"text-lg font-bold text-slate-800",children:[fY[a]," ",r]}),o.jsx("button",{onClick:v,className:"btn btn-ghost btn-icon",children:o.jsx(G,{name:"chevron-right",size:20})})]}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:hY.map(b=>o.jsx("div",{className:"text-center text-xs font-semibold text-slate-500 py-2",children:b},b))}),o.jsx("div",{className:"grid grid-cols-7 gap-1",children:u.map((b,m)=>{if(b===null)return o.jsx("div",{className:"h-16"},`e-${m}`);const y=d(b),_=`${r}-${String(a+1).padStart(2,"0")}-${String(b).padStart(2,"0")}`,w=b===t.getDate()&&a===t.getMonth()&&r===t.getFullYear(),S=s===_;return o.jsxs("button",{onClick:()=>l(_),className:`h-16 rounded-lg border text-left p-1 transition-all ${S?"border-brand-500 bg-brand-50":"border-transparent hover:bg-slate-50"} ${w?"ring-2 ring-brand-400":""}`,children:[o.jsx("span",{className:`text-sm font-medium ${w?"text-brand-600":"text-slate-700"}`,children:b}),o.jsxs("div",{className:"mt-1 space-y-0.5",children:[y.slice(0,2).map(j=>o.jsx("div",{className:`h-1 rounded ${x(j.status)}`},j.id)),y.length>2&&o.jsxs("span",{className:"text-[10px] text-slate-500",children:["+",y.length-2]})]})]},b)})}),s&&o.jsxs("div",{className:"mt-4 pt-4 border-t",children:[o.jsxs("h4",{className:"font-semibold text-slate-700 mb-2",children:["Reuniones del ",new Date(s+"T12:00:00").toLocaleDateString("es-CL",{day:"numeric",month:"long"})]}),h.length===0?o.jsx("p",{className:"text-sm text-slate-500",children:"Sin reuniones programadas"}):o.jsx("div",{className:"space-y-2",children:h.map(b=>o.jsx("button",{onClick:()=>e(b.id),className:"w-full text-left p-3 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`w-2 h-2 rounded-full ${x(b.status)}`}),o.jsx("span",{className:"font-medium",children:b.title}),o.jsx("span",{className:"text-sm text-slate-500 ml-auto",children:g(b.starts_at)})]})},b.id))})]})]}),o.jsxs("div",{className:"card p-6",children:[o.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[o.jsx(G,{name:"clock",size:18})," Prximas reuniones"]}),f.length===0?o.jsx("p",{className:"text-sm text-slate-500",children:"Sin reuniones prximas"}):o.jsx("div",{className:"space-y-3",children:f.map(b=>o.jsxs("button",{onClick:()=>e(b.id),className:"w-full text-left p-3 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors",children:[o.jsx("div",{className:"font-medium text-slate-800",children:b.title}),o.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:[new Date(b.starts_at).toLocaleDateString("es-CL",{day:"numeric",month:"short"})," - ",g(b.starts_at)]}),o.jsx("div",{className:"text-xs text-slate-400 mt-1",children:He(b.terminal_code)})]},b.id))})]})]})]})},mY=({onOpenMeeting:e})=>{const t=$e(c=>c.context),r=$e(c=>c.setContext),[n,a]=T.useState({status:"REALIZADA"}),i=K_(n),s=(i.data||[]).filter(c=>c.minutes_text),l=[{key:"date",header:"Fecha",value:c=>new Date(c.starts_at).toLocaleDateString("es-CL")},{key:"title",header:"Ttulo",value:c=>c.title},{key:"terminal",header:"Terminal",value:c=>He(c.terminal_code)},{key:"minutes",header:"Minuta",value:c=>c.minutes_text||""}];return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Xt,{title:"Minutas y Reportes",description:"Registro de minutas de reuniones realizadas",actions:o.jsx(jr,{onExportView:()=>Je({filename:"minutas",sheetName:"Minutas",rows:s,columns:l}),onExportAll:()=>Je({filename:"minutas_all",sheetName:"Minutas",rows:s,columns:l})})}),o.jsx(An,{terminalContext:t,onTerminalChange:r,children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"Ttulo de reunin",value:n.search??"",onChange:c=>a(u=>({...u,search:c.target.value}))})]})}),i.isLoading&&o.jsx(Gt,{label:"Cargando minutas..."}),!i.isLoading&&s.length===0&&o.jsxs("div",{className:"card p-8 text-center text-slate-500",children:[o.jsx(G,{name:"file-text",size:48,className:"mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"No hay minutas registradas"})]}),o.jsx("div",{className:"grid gap-4",children:s.map(c=>o.jsxs("div",{className:"card p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>e(c.id),children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-slate-800",children:c.title}),o.jsxs("div",{className:"text-sm text-slate-500",children:[new Date(c.starts_at).toLocaleDateString("es-CL",{day:"numeric",month:"long",year:"numeric"})," - ",He(c.terminal_code)]})]}),o.jsx("span",{className:"badge badge-success",children:c.status})]}),o.jsx("div",{className:"text-sm text-slate-600 line-clamp-3 bg-slate-50 p-3 rounded-lg",children:c.minutes_text})]},c.id))})]})},gY=()=>{const e=aY("GLOBAL","ALL"),t=iY(),[r,n]=T.useState(!0),[a,i]=T.useState(""),[s,l]=T.useState(""),[c,u]=T.useState("");T.useEffect(()=>{e.data&&(n(e.data.enabled),i(e.data.cc_emails||""),l(e.data.subject_template),u(e.data.body_template))},[e.data]);const d=async()=>{await t.mutateAsync({scope_type:"GLOBAL",scope_code:"ALL",enabled:r,cc_emails:a||null,subject_template:s,body_template:c})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(Xt,{title:"Configuracin",description:"Ajustes de correo y notificaciones para reuniones"}),o.jsxs("div",{className:"card p-6 max-w-2xl",children:[o.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[o.jsx(G,{name:"send",size:18})," Configuracin de Correos"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-slate-800",children:"Notificaciones por correo"}),o.jsx("div",{className:"text-sm text-slate-500",children:"Enviar invitaciones automticas al crear reuniones"})]}),o.jsx("button",{onClick:()=>n(!r),className:`relative w-12 h-6 rounded-full transition-colors ${r?"bg-brand-600":"bg-slate-300"}`,children:o.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${r?"left-7":"left-1"}`})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Correos en copia (CC)"}),o.jsx("input",{type:"text",className:"input",value:a,onChange:f=>i(f.target.value),placeholder:"correo1@ejemplo.cl, correo2@ejemplo.cl"}),o.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Separar mltiples correos con coma"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Plantilla de asunto"}),o.jsx("input",{type:"text",className:"input",value:s,onChange:f=>l(f.target.value)}),o.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Variables: ","{{title}}"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Plantilla de cuerpo"}),o.jsx("textarea",{className:"input min-h-[200px] font-mono text-sm",value:c,onChange:f=>u(f.target.value)}),o.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Variables: ","{{invitee_name}}, {{title}}, {{date}}, {{time}}, {{duration}}, {{location}}, {{agenda}}, {{organizer}}"]})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t",children:o.jsx("button",{onClick:d,disabled:t.isPending,className:"btn btn-primary",children:t.isPending?"Guardando...":"Guardar Configuracin"})})]})]})]})},vY=({meetingId:e,onClose:t})=>{const r=fr(P=>P.session),n=(r==null?void 0:r.supervisorName)??"",a=vR(n),[i,s]=T.useState("info"),[l,c]=T.useState(""),[u,d]=T.useState(!0),f=HX(e),h=gR(e),p=YX(e),v=ZX(e),g=GX(),x=sY(),b=QX(),m=JX(),y=eY(),_=tY(),w=rY(),S=f.data;T.useState(()=>{S!=null&&S.minutes_text&&c(S.minutes_text)});const j=async()=>{await g.mutateAsync({id:e,minutes:l}),d(!0)},E=async P=>{var V;const H=(V=P.target.files)==null?void 0:V[0];H&&(await b.mutateAsync({meetingId:e,file:H}),P.target.value="")},N=async(P,H)=>{const V=await LX(P);window.open(V,"_blank")},A=P=>{const H=new Date(P);return H.toLocaleDateString("es-CL",{weekday:"long",day:"numeric",month:"long",year:"numeric"})+" a las "+H.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})},C=P=>{switch(P){case"REALIZADA":return o.jsx("span",{className:"badge badge-success",children:P});case"CANCELADA":return o.jsx("span",{className:"badge badge-danger",children:P});default:return o.jsx("span",{className:"badge badge-warning",children:P})}};if(f.isLoading)return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:o.jsx(Gt,{label:"Cargando reunin..."})});if(!S)return null;const D=[{id:"info",label:"Info",icon:"info"},{id:"agenda",label:"Agenda",icon:"clipboard"},{id:"invitees",label:"Invitados",icon:"users"},{id:"minutes",label:"Minuta",icon:"file-text"},{id:"actions",label:"Acuerdos",icon:"check-circle"},{id:"files",label:"Archivos",icon:"file"}];return o.jsx("div",{className:"fixed inset-0 z-50 flex bg-black/50 backdrop-blur-sm",children:o.jsxs("div",{className:"w-full h-full bg-white flex flex-col lg:flex-row animate-scale-in",children:[o.jsxs("div",{className:"lg:w-64 bg-slate-50 border-b lg:border-b-0 lg:border-r border-slate-200 p-4 flex lg:flex-col gap-2 overflow-x-auto lg:overflow-visible shrink-0",children:[D.map(P=>o.jsxs("button",{onClick:()=>s(P.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all whitespace-nowrap ${i===P.id?"bg-brand-600 text-white":"text-slate-600 hover:bg-slate-200"}`,children:[o.jsx(G,{name:P.icon,size:18}),o.jsx("span",{className:"hidden lg:inline",children:P.label})]},P.id)),o.jsxs("button",{onClick:t,className:"mt-auto flex items-center gap-2 px-4 py-2 rounded-lg text-slate-600 hover:bg-slate-200",children:[o.jsx(G,{name:"x",size:18})," ",o.jsx("span",{className:"hidden lg:inline",children:"Cerrar"})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[o.jsx("div",{className:"mb-6 pb-4 border-b",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:S.title}),o.jsx("p",{className:"text-slate-500 mt-1",children:A(S.starts_at)})]}),C(S.status)]})}),i==="info"&&o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Terminal"}),o.jsx("div",{className:"font-medium",children:He(S.terminal_code)})]}),o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Duracin"}),o.jsxs("div",{className:"font-medium",children:[S.duration_minutes," minutos"]})]}),o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Lugar"}),o.jsx("div",{className:"font-medium",children:S.location||"No especificado"})]}),o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Link"}),S.meeting_link?o.jsx("a",{href:S.meeting_link,target:"_blank",rel:"noopener noreferrer",className:"text-brand-600 hover:underline",children:"Unirse a la reunin"}):o.jsx("div",{className:"font-medium",children:"No disponible"})]}),o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg md:col-span-2",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Organizado por"}),o.jsx("div",{className:"font-medium",children:S.created_by_supervisor})]})]}),i==="agenda"&&o.jsx("div",{className:"space-y-2",children:S.agenda_json.length===0?o.jsx("p",{className:"text-slate-500",children:"Sin agenda definida"}):S.agenda_json.map((P,H)=>o.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 p-3 rounded-lg",children:[o.jsx("span",{className:"w-6 h-6 rounded-full bg-brand-100 text-brand-600 flex items-center justify-center text-sm font-bold",children:H+1}),o.jsx("span",{className:"flex-1",children:P.text})]},P.id))}),i==="invitees"&&o.jsxs("div",{className:"space-y-4",children:[a&&o.jsxs("button",{onClick:()=>x.mutate({meetingId:e}),disabled:x.isPending,className:"btn btn-secondary",children:[o.jsx(G,{name:"send",size:16})," ",x.isPending?"Enviando...":"Reenviar invitaciones"]}),o.jsx("div",{className:"space-y-2",children:(h.data||[]).map(P=>o.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:P.invitee_name}),P.invitee_email&&o.jsx("div",{className:"text-sm text-slate-500",children:P.invitee_email})]}),o.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${P.notification_status==="ENVIADO"?"bg-green-100 text-green-700":P.notification_status==="ERROR"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:P.notification_status})]},P.id))})]}),i==="minutes"&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("textarea",{className:"input min-h-[300px] font-mono",value:l,onChange:P=>{c(P.target.value),d(!1)},placeholder:"Escriba la minuta de la reunin aqu...",disabled:!a}),a&&o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:j,disabled:u||g.isPending,className:"btn btn-primary",children:g.isPending?"Guardando...":"Guardar Minuta"}),u&&o.jsx("span",{className:"text-sm text-green-600",children:"Guardado"})]})]}),i==="actions"&&o.jsx(xY,{actions:v.data||[],meetingId:e,canManage:a,onCreate:P=>y.mutate({meetingId:e,values:P}),onUpdate:(P,H)=>_.mutate({id:P,meetingId:e,values:H}),onDelete:P=>w.mutate({id:P,meetingId:e})}),i==="files"&&o.jsxs("div",{className:"space-y-4",children:[a&&o.jsxs("label",{className:"btn btn-secondary cursor-pointer inline-flex items-center gap-2",children:[o.jsx(G,{name:"upload",size:16})," Subir archivo",o.jsx("input",{type:"file",className:"hidden",accept:".pdf,.png,.jpg,.jpeg,.doc,.docx",onChange:E})]}),o.jsx("div",{className:"space-y-2",children:(p.data||[]).map(P=>o.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(G,{name:"file",size:20,className:"text-slate-400"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:P.file_name}),o.jsxs("div",{className:"text-xs text-slate-500",children:[(P.size_bytes/1024).toFixed(1)," KB"]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>N(P.storage_path,P.file_name),className:"btn btn-ghost btn-icon",children:o.jsx(G,{name:"eye",size:16})}),a&&o.jsx("button",{onClick:()=>m.mutate({id:P.id,storagePath:P.storage_path,meetingId:e}),className:"btn btn-ghost btn-icon text-red-500",children:o.jsx(G,{name:"trash",size:16})})]})]},P.id))})]})]})]})})},xY=({actions:e,canManage:t,onCreate:r,onUpdate:n,onDelete:a})=>{const[i,s]=T.useState(""),[l,c]=T.useState(""),[u,d]=T.useState(""),f=()=>{i.trim()&&(r({description:i,responsible_name:l||void 0,due_date:u||void 0}),s(""),c(""),d(""))};return o.jsxs("div",{className:"space-y-4",children:[t&&o.jsxs("div",{className:"space-y-2 bg-slate-50 p-4 rounded-lg",children:[o.jsx("input",{className:"input",value:i,onChange:h=>s(h.target.value),placeholder:"Descripcin del acuerdo"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("input",{className:"input",value:l,onChange:h=>c(h.target.value),placeholder:"Responsable"}),o.jsx("input",{type:"date",className:"input",value:u,onChange:h=>d(h.target.value)})]}),o.jsxs("button",{onClick:f,className:"btn btn-primary",disabled:!i.trim(),children:[o.jsx(G,{name:"plus",size:16})," Agregar Acuerdo"]})]}),o.jsx("div",{className:"space-y-2",children:e.map(h=>o.jsxs("div",{className:"flex items-start gap-3 bg-slate-50 p-3 rounded-lg",children:[o.jsx("button",{onClick:()=>n(h.id,{status:h.status==="CUMPLIDO"?"PENDIENTE":"CUMPLIDO"}),className:`mt-0.5 w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 ${h.status==="CUMPLIDO"?"bg-green-500 border-green-500 text-white":"border-slate-300"}`,disabled:!t,children:h.status==="CUMPLIDO"&&o.jsx(G,{name:"check",size:12})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:h.status==="CUMPLIDO"?"line-through text-slate-400":"",children:h.description}),o.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:[h.responsible_name&&o.jsx("span",{children:h.responsible_name}),h.due_date&&o.jsx("span",{className:"ml-2",children:new Date(h.due_date).toLocaleDateString("es-CL")})]})]}),t&&o.jsx("button",{onClick:()=>a(h.id),className:"text-red-500 hover:text-red-700",children:o.jsx(G,{name:"trash",size:16})})]},h.id))})]})},yY=[{id:"agenda",label:"Agenda",icon:"calendar"},{id:"reuniones",label:"Reuniones",icon:"users"},{id:"minutas",label:"Minutas",icon:"file-text"},{id:"config",label:"Configuracin",icon:"settings"}],bY=()=>{const[e,t]=T.useState("reuniones"),[r,n]=T.useState(null),a=l=>{n(l)},i=()=>{n(null)},s=()=>{switch(e){case"agenda":return o.jsx(pY,{onOpenMeeting:a});case"reuniones":return o.jsx(dY,{onOpenMeeting:a});case"minutas":return o.jsx(mY,{onOpenMeeting:a});case"config":return o.jsx(gY,{});default:return null}};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 border-b border-slate-200 pb-4",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:yY.map(l=>o.jsxs("button",{onClick:()=>t(l.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${e===l.id?"bg-brand-600 text-white shadow-md":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[o.jsx(G,{name:l.icon,size:18}),o.jsx("span",{className:"hidden sm:inline",children:l.label})]},l.id))})}),s(),r&&o.jsx(vY,{meetingId:r,onClose:i})]})},li=({columns:e,rows:t,emptyMessage:r="Sin resultados"})=>t.length?o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsx("tr",{children:e.map(n=>o.jsx("th",{scope:"col",className:"table-header-cell",children:n.header},n.key))})}),o.jsx("tbody",{className:"table-body",children:t.map((n,a)=>o.jsx("tr",{className:"table-row",children:e.map(i=>o.jsx("td",{className:"table-cell",children:i.render?i.render(n):n[i.key]},i.key))},a))})]})}):o.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50/50 px-6 py-12 text-center",children:[o.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-slate-100 mb-3",children:o.jsx("svg",{className:"h-6 w-6 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),o.jsx("p",{className:"text-sm font-medium text-slate-600",children:r}),o.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"No hay datos para mostrar en este momento"})]}),ci=({label:e="Sin datos",description:t})=>o.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50/50 px-6 py-12 text-center",children:[o.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-slate-100 mb-4",children:o.jsx("svg",{className:"h-7 w-7 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),o.jsx("p",{className:"text-sm font-semibold text-slate-700",children:e}),t&&o.jsx("p",{className:"mt-1 text-xs text-slate-500 max-w-xs",children:t})]}),Eh=(e,t)=>({list:async({terminalContext:r,filters:n,scope:a})=>{const i=I7(e,r);return a==="all"?i:t?i.filter(s=>t(s,n)):i}}),wY=[{id:"t-1",titulo:"Inventario patio",responsable:"Ana Prez",prioridad:"alta",estado:"pendiente",vencimiento:"2023-12-06",terminal:"EL_ROBLE"},{id:"t-2",titulo:"Actualizar checklists",responsable:"Carlos Vega",prioridad:"media",estado:"en_progreso",vencimiento:"2023-12-07",terminal:"EL_SALTO"},{id:"t-3",titulo:"Control de EPIs",responsable:"Laura Soto",prioridad:"baja",estado:"completada",vencimiento:"2023-11-30",terminal:"COLO_COLO"}],lN=Eh(wY,(e,t)=>{const r=t!=null&&t.estado&&t.estado!=="todas"?e.estado===t.estado:!0,n=t!=null&&t.prioridad&&t.prioridad!=="todas"?e.prioridad===t.prioridad:!0;return r&&n}),_Y=()=>{var u;const e=$e(d=>d.context),t=$e(d=>d.setContext),[r,n]=T.useState({estado:"todas",prioridad:"todas"}),a=rt({queryKey:["tareas",e,r],queryFn:()=>lN.list({terminalContext:e,filters:r,scope:"view"})}),i=T.useMemo(()=>[{key:"titulo",header:"Tarea"},{key:"responsable",header:"Responsable"},{key:"prioridad",header:"Prioridad",render:d=>o.jsx("span",{className:"badge capitalize",children:d.prioridad}),value:d=>d.prioridad},{key:"estado",header:"Estado",render:d=>o.jsx("span",{className:"badge capitalize",children:d.estado}),value:d=>d.estado},{key:"vencimiento",header:"Vencimiento",render:d=>tr(d.vencimiento),value:d=>tr(d.vencimiento)},{key:"terminal",header:"Terminal",render:d=>He(d.terminal),value:d=>He(d.terminal)}],[]),s=i.map(d=>({key:d.key,header:d.header,value:f=>d.value?d.value(f):f[d.key]})),l=()=>{a.data&&Je({filename:"tareas_vista",sheetName:"Tareas",rows:a.data,columns:s})},c=async()=>{const d=await lN.list({terminalContext:e,scope:"all"});Je({filename:"tareas_completo",sheetName:"Tareas",rows:d,columns:s})};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Xt,{title:"Tareas",description:"Seguimiento de pendientes y compromisos.",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"btn btn-primary",children:"Nueva tarea"}),o.jsx(jr,{onExportView:l,onExportAll:c})]})}),o.jsxs(An,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsxs("select",{className:"input",value:r.estado,onChange:d=>n(f=>({...f,estado:d.target.value})),children:[o.jsx("option",{value:"todas",children:"Todas"}),o.jsx("option",{value:"pendiente",children:"Pendiente"}),o.jsx("option",{value:"en_progreso",children:"En progreso"}),o.jsx("option",{value:"completada",children:"Completada"})]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Prioridad"}),o.jsxs("select",{className:"input",value:r.prioridad,onChange:d=>n(f=>({...f,prioridad:d.target.value})),children:[o.jsx("option",{value:"todas",children:"Todas"}),o.jsx("option",{value:"alta",children:"Alta"}),o.jsx("option",{value:"media",children:"Media"}),o.jsx("option",{value:"baja",children:"Baja"})]})]})]}),a.isLoading&&o.jsx(Gt,{}),a.isError&&o.jsx(Sr,{onRetry:a.refetch}),!a.isLoading&&!a.isError&&o.jsxs(o.Fragment,{children:[!((u=a.data)!=null&&u.length)&&o.jsx(ci,{description:"No hay tareas para mostrar."}),a.data&&a.data.length>0&&o.jsx(li,{columns:i,rows:a.data})]})]})},SY=[{id:"i-1",titulo:"Actualizacin de protocolos",fecha:"2023-12-02",enviadoPor:"Equipo Seguridad",alcance:"todos",terminal:"EL_ROBLE"},{id:"i-2",titulo:"Corte programado",fecha:"2023-12-03",enviadoPor:"Operaciones",alcance:"terminal",terminal:"LA_REINA"},{id:"i-3",titulo:"Campaa de seguridad",fecha:"2023-12-01",enviadoPor:"Prevencin",alcance:"segmentado",terminal:"EL_SALTO"}],cN=Eh(SY,(e,t)=>t!=null&&t.alcance&&t.alcance!=="todos"?e.alcance===t.alcance:!0),jY=()=>{var A;const e=$e(C=>C.context),t=$e(C=>C.setContext),[r,n]=T.useState({alcance:"todos"}),[a,i]=T.useState("todos"),[s,l]=T.useState("EL_ROBLE"),[c,u]=T.useState(""),[d,f]=T.useState(""),[h,p]=T.useState(""),[v,g]=T.useState(!1),[x,b]=T.useState(""),[m,y]=T.useState(""),_=rt({queryKey:["informativos",e,r],queryFn:()=>cN.list({terminalContext:e,filters:r,scope:"view"})}),w=T.useMemo(()=>[{key:"titulo",header:"Ttulo"},{key:"enviadoPor",header:"Enviado por"},{key:"alcance",header:"Alcance",render:C=>o.jsx("span",{className:"badge",children:C.alcance}),value:C=>C.alcance},{key:"fecha",header:"Fecha",render:C=>tr(C.fecha),value:C=>tr(C.fecha)},{key:"terminal",header:"Terminal",render:C=>He(C.terminal),value:C=>He(C.terminal)}],[]),S=w.map(C=>({key:C.key,header:C.header,value:D=>C.value?C.value(D):D[C.key]})),j=()=>{_.data&&Je({filename:"informativos_vista",sheetName:"Informativos",rows:_.data,columns:S})},E=async()=>{const C=await cN.list({terminalContext:e,scope:"all"});Je({filename:"informativos_completo",sheetName:"Informativos",rows:C,columns:S})},N=async()=>{y(""),g(!0);try{const C=await Gs.sendEmail({audience:a,terminalCodes:a==="por_terminal"?[s]:void 0,manualRecipients:a==="manual"?c.split(",").map(D=>D.trim()).filter(Boolean):void 0,subject:d,body:h});b(`Correo enviado (${C.messageId})`),f(""),p(""),u("")}catch(C){y(C.message)}finally{g(!1)}};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Xt,{title:"Informativos",description:"Comunicaciones internas con opciones de envo por terminal.",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"btn btn-primary",children:"Nuevo informativo"}),o.jsx(jr,{onExportView:j,onExportAll:E})]})}),o.jsx(An,{terminalContext:e,onTerminalChange:t,children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Alcance"}),o.jsxs("select",{className:"input",value:r.alcance,onChange:C=>n({alcance:C.target.value}),children:[o.jsx("option",{value:"todos",children:"Todos"}),o.jsx("option",{value:"terminal",children:"Por terminal"}),o.jsx("option",{value:"segmentado",children:"Segmentado"})]})]})}),_.isLoading&&o.jsx(Gt,{}),_.isError&&o.jsx(Sr,{onRetry:_.refetch}),!_.isLoading&&!_.isError&&o.jsxs(o.Fragment,{children:[!((A=_.data)!=null&&A.length)&&o.jsx(ci,{description:"No hay informativos con los filtros actuales."}),_.data&&_.data.length>0&&o.jsx(li,{columns:w,rows:_.data})]}),o.jsxs("div",{className:"card p-4",children:[o.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-base font-semibold text-slate-900",children:"Enviar correo interno"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Mdulo preparado para conectar a Edge Function."})]}),o.jsxs("div",{className:"flex flex-col items-end gap-1 text-right",children:[x&&o.jsx("span",{className:"badge",children:x}),m&&o.jsx("span",{className:"text-xs font-semibold text-red-600",children:m})]})]}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"label",children:"Destinatarios"}),o.jsxs("select",{className:"input",value:a,onChange:C=>i(C.target.value),children:[o.jsx("option",{value:"todos",children:"Todos"}),o.jsx("option",{value:"por_terminal",children:"Por terminal"}),o.jsx("option",{value:"manual",children:"Lista manual"})]})]}),a==="por_terminal"&&o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"label",children:"Terminal objetivo"}),o.jsx("select",{className:"input",value:s,onChange:C=>l(C.target.value),children:Kn.map(C=>o.jsx("option",{value:C.value,children:C.label},C.value))})]}),a==="manual"&&o.jsxs("div",{className:"space-y-1 md:col-span-2",children:[o.jsx("label",{className:"label",children:"Correos (separados por coma)"}),o.jsx("input",{className:"input",value:c,onChange:C=>u(C.target.value),placeholder:"correo1@dominio.com, correo2@dominio.com"})]}),o.jsxs("div",{className:"md:col-span-3 grid gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"label",children:"Asunto"}),o.jsx("input",{className:"input",value:d,onChange:C=>f(C.target.value)})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"label",children:"Mensaje"}),o.jsx("textarea",{className:"input min-h-[120px]",value:h,onChange:C=>p(C.target.value),placeholder:"Contenido del correo"})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{className:"btn btn-primary",onClick:N,disabled:v||!d||!h,children:v?"Enviando...":"Enviar (mock)"})})]})]})]})]})},EY=["ISAAC AVILA","CLAUDIO ARRIAGADA","CRISTIAN LURASCHI"],NY={EL_ROBLE:"CRISTIAN LURASCHI",LA_REINA:"CRISTIAN LURASCHI"},to=e=>e.trim().replace(/\s+/g," ").toUpperCase(),Nh=e=>{const t=to(e);return EY.includes(t)},TY=e=>NY[e]??"",Th=({data:e,isLoading:t})=>{if(t)return o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[...Array(4)].map((n,a)=>o.jsxs("div",{className:"card p-4 animate-pulse",children:[o.jsx("div",{className:"h-4 bg-slate-200 rounded w-24 mb-2"}),o.jsx("div",{className:"h-8 bg-slate-200 rounded w-12"})]},a))});if(!e)return null;const r=[{label:"Pendientes Hoy",value:e.pendingToday,icon:"clock",bgClass:"bg-warning-50 border-warning-200",textClass:"text-warning-700",iconClass:"text-warning-500"},{label:"Pendientes Total",value:e.pendingTotal,icon:"inbox",bgClass:"bg-orange-50 border-orange-200",textClass:"text-orange-700",iconClass:"text-orange-500"},{label:"Autorizados (30d)",value:e.authorizedRange,icon:"check-circle",bgClass:"bg-success-50 border-success-200",textClass:"text-success-700",iconClass:"text-success-500"},{label:"Rechazados (30d)",value:e.rejectedRange,icon:"x",bgClass:"bg-danger-50 border-danger-200",textClass:"text-danger-700",iconClass:"text-danger-500"}];return o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:r.map(n=>o.jsxs("div",{className:`card p-4 ${n.bgClass}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(G,{name:n.icon,size:18,className:n.iconClass}),o.jsx("span",{className:"text-xs font-semibold text-slate-600 uppercase",children:n.label})]}),o.jsx("p",{className:`text-2xl font-bold ${n.textClass}`,children:n.value})]},n.label))})},ii=({mode:e,itemName:t,onConfirm:r,onCancel:n,isLoading:a})=>{const[i,s]=T.useState(""),l=u=>{u.preventDefault(),!(e==="reject"&&!i.trim())&&r(i.trim()||void 0)},c=e==="authorize";return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:n}),o.jsxs("div",{className:"relative w-full max-w-md card p-6 animate-scale-in",children:[o.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[o.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-full ${c?"bg-success-100":"bg-danger-100"}`,children:o.jsx(G,{name:c?"check-circle":"x",size:24,className:c?"text-success-600":"text-danger-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:c?"Autorizar Registro":"Rechazar Registro"}),o.jsx("p",{className:"text-sm text-slate-600",children:c?`Confirmas la autorizacin de "${t}"?`:`Confirmas el rechazo de "${t}"?`})]})]}),o.jsxs("form",{onSubmit:l,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"label",children:c?"Comentario (opcional)":"Motivo del rechazo *"}),o.jsx("textarea",{className:"input min-h-[80px]",value:i,onChange:u=>s(u.target.value),placeholder:c?"Agregar comentario...":"Describe el motivo del rechazo...",required:!c})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",disabled:a,children:"Cancelar"}),o.jsx("button",{type:"submit",className:`btn ${c?"btn-success":"btn-danger"}`,disabled:a||!c&&!i.trim(),children:a?o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Procesando..."]}):c?"Autorizar":"Rechazar"})]})]})]})]})},Bg=({value:e,onChange:t,onStaffFound:r,disabled:n})=>{const[a,i]=T.useState(""),[s,l]=T.useState(!1),[c,u]=T.useState(null),[d,f]=T.useState(!1);T.useEffect(()=>{e&&i(Kt(e))},[e]);const h=g=>{if(i(g),u(null),f(!1),S1(g).valid){const b=eo(g);t(b),p(b)}else t(""),r(null)},p=async g=>{l(!0);try{const x=await nX(g);x?(f(!0),r(x)):(u("RUT no encontrado en Personal"),r(null))}catch{u("Error al buscar RUT"),r(null)}finally{l(!1)}},v=()=>{e&&i(Kt(e))};return o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"RUT"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",className:`input pr-10 ${c?"border-danger-500":d?"border-success-500":""}`,value:a,onChange:g=>h(g.target.value),onBlur:v,placeholder:"12.345.678-9",disabled:n}),o.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:s?o.jsxs("svg",{className:"animate-spin h-4 w-4 text-slate-400",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):d?o.jsx(G,{name:"check-circle",size:18,className:"text-success-500"}):c?o.jsx(G,{name:"x",size:18,className:"text-danger-500"}):o.jsx(G,{name:"search",size:18,className:"text-slate-400"})})]}),c&&o.jsx("p",{className:"mt-1 text-xs text-danger-600",children:c}),d&&o.jsx("p",{className:"mt-1 text-xs text-success-600",children:"Datos cargados desde Personal"})]})},AY=({initialData:e,supervisorName:t,onSubmit:r,onCancel:n,isLoading:a})=>{const[i,s]=T.useState({rut:"",nombre:"",area:"Logstica",cargo:"",jefe_terminal:"",terminal_code:"EL_ROBLE",cabezal:"",incident_state:"",schedule_in_out:"",date:new Date().toISOString().split("T")[0],time_range:"",observations:"",informed_by:t,...e});T.useEffect(()=>{const u=TY(i.terminal_code);u&&s(d=>({...d,jefe_terminal:u}))},[i.terminal_code]);const l=u=>{u&&s(d=>({...d,nombre:u.nombre,cargo:u.cargo,terminal_code:u.terminal_code}))},c=u=>{u.preventDefault(),r(i)};return o.jsxs("form",{onSubmit:c,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(Bg,{value:i.rut,onChange:u=>s(d=>({...d,rut:u})),onStaffFound:l,disabled:!!(e!=null&&e.rut)}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nombre"}),o.jsx("input",{type:"text",className:"input",value:i.nombre,onChange:u=>s(d=>({...d,nombre:u.target.value})),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"rea"}),o.jsx("input",{type:"text",className:"input",value:i.area,onChange:u=>s(d=>({...d,area:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cargo"}),o.jsx("input",{type:"text",className:"input",value:i.cargo,onChange:u=>s(d=>({...d,cargo:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsx("select",{className:"input",value:i.terminal_code,onChange:u=>s(d=>({...d,terminal_code:u.target.value})),required:!0,children:Kn.map(u=>o.jsx("option",{value:u.value,children:u.label},u.value))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Jefe de Terminal"}),o.jsx("input",{type:"text",className:"input",value:i.jefe_terminal,onChange:u=>s(d=>({...d,jefe_terminal:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cabezal"}),o.jsx("input",{type:"text",className:"input",value:i.cabezal,onChange:u=>s(d=>({...d,cabezal:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Estado (Incidente)"}),o.jsx("input",{type:"text",className:"input",value:i.incident_state,onChange:u=>s(d=>({...d,incident_state:u.target.value}))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Horario Entrada/Salida"}),o.jsx("input",{type:"text",className:"input",value:i.schedule_in_out,onChange:u=>s(d=>({...d,schedule_in_out:u.target.value})),placeholder:"08:00-18:00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha"}),o.jsx("input",{type:"date",className:"input",value:i.date,onChange:u=>s(d=>({...d,date:u.target.value})),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Horario (Rango)"}),o.jsx("input",{type:"text",className:"input",value:i.time_range,onChange:u=>s(d=>({...d,time_range:u.target.value})),placeholder:"10:00-14:00"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Observaciones"}),o.jsx("textarea",{className:"input min-h-[80px]",value:i.observations,onChange:u=>s(d=>({...d,observations:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Informado Por"}),o.jsx("input",{type:"text",className:"input",value:i.informed_by,onChange:u=>s(d=>({...d,informed_by:u.target.value}))})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[o.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",disabled:a,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?"Guardando...":e?"Guardar Cambios":"Crear Registro"})]})]})},G_=async e=>{const{data:t,error:r}=await fe.from("app_configuration").select("value").eq("key",e).single();return r?(r.code==="PGRST116"||console.error(`Error fetching config ${e}:`,r),null):t.value},OY=async(e,t,r)=>{const{error:n}=await fe.from("app_configuration").upsert({key:e,value:t,description:r},{onConflict:"key"});if(n)throw console.error(`Error updating config ${e}:`,n),n},CY=async(e,t)=>{if(!Xr())return[];const r=Ba(e);let n=fe.from("attendance_no_marcaciones").select("*").in("terminal_code",r).order("date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}t!=null&&t.date_from&&(n=n.gte("date",t.date_from)),t!=null&&t.date_to&&(n=n.lte("date",t.date_to));const{data:a,error:i}=await n;if(i)throw i;return a||[]},kY=async(e,t)=>{const{data:r,error:n}=await fe.from("attendance_no_marcaciones").insert({...e,created_by_supervisor:to(t)}).select().single();if(n)throw zn("Error al crear registro","No se pudo guardar el registro de No Marcacin"),n;try{await Ah("No Marcaciones",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.date,createdBy:t,details:{rea:e.area||"",Cargo:e.cargo||"","Jefe Terminal":e.jefe_terminal||"",Observaciones:e.observations||""}}),Vn("Registro creado exitosamente",`No Marcacin para ${e.nombre} guardado y correo enviado`,t)}catch{Vn("Registro creado",`No Marcacin para ${e.nombre} guardado (correo no enviado)`,t)}return r},PY=async(e,t)=>{const{data:r,error:n}=await fe.from("attendance_no_marcaciones").update(t).eq("id",e).select().single();if(n)throw n;return r},RY=async(e,t)=>{if(!Xr())return[];const r=Ba(e);let n=fe.from("attendance_sin_credenciales").select("*").in("terminal_code",r).order("date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}const{data:a,error:i}=await n;if(i)throw i;return a||[]},IY=async(e,t)=>{const{data:r,error:n}=await fe.from("attendance_sin_credenciales").insert({...e,created_by_supervisor:to(t)}).select().single();if(n)throw zn("Error al crear registro","No se pudo guardar el registro de Sin Credenciales"),n;try{await Ah("Sin Credenciales",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.date,createdBy:t,details:{Cabezal:e.cabezal||"",Horario:`${e.start_time||""} - ${e.end_time||""}`,Cargo:e.cargo||"","Supervisor Autoriza":e.supervisor_autoriza||""}}),Vn("Registro creado exitosamente",`Sin Credenciales para ${e.nombre} guardado y correo enviado`,t)}catch{Vn("Registro creado",`Sin Credenciales para ${e.nombre} guardado (correo no enviado)`,t)}return r},DY=async(e,t)=>{const{data:r,error:n}=await fe.from("attendance_sin_credenciales").update(t).eq("id",e).select().single();if(n)throw n;return r},MY=async(e,t)=>{if(!Xr())return[];const r=Ba(e);let n=fe.from("attendance_cambios_dia").select("*").in("terminal_code",r).order("date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}const{data:a,error:i}=await n;if(i)throw i;return a||[]},LY=async(e,t)=>{let r=null;if(e.document){const u=e.document.name.split(".").pop(),d=`cambios-dia/${Date.now()}.${u}`,{error:f}=await fe.storage.from("attendance-docs").upload(d,e.document);if(f)throw console.error("Storage Upload Error Detail:",f),zn("Error al subir documento","Verifica que el archivo sea imagen o PDF y menor a 5MB"),new Error(`Error al subir documento: ${f.message}`);r=d}const{document:n,...a}=e,i={...a,document_path:r,created_by_supervisor:to(t)};["day_off_date","day_on_date","prog_start","prog_end","reprogram_start","reprogram_end","day_off_start","day_off_end","day_on_start","day_on_end"].forEach(u=>{i[u]===""&&(i[u]=null)});const{data:l,error:c}=await fe.from("attendance_cambios_dia").insert(i).select().single();if(c)throw zn("Error al crear registro","No se pudo guardar el registro de Cambio de Da"),c;try{let u="No adjunto";if(r){const{data:d}=fe.storage.from("attendance-docs").getPublicUrl(r);u=`<a href="${d.publicUrl}" target="_blank" style="color: #2563eb; text-decoration: underline; font-weight: 700;">Ver Documento Adjunto</a>`}await Ah("Cambios de Da",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.date,createdBy:t,details:{"Jornada Programada":`${e.prog_start||""} - ${e.prog_end||""}`,"Da No Trabaja":e.day_off_date||"","Da Trabaja":e.day_on_date||"",Documento:u}}),Vn("Registro creado exitosamente",`Cambio de Da para ${e.nombre} guardado y correo enviado`,t)}catch{Vn("Registro creado",`Cambio de Da para ${e.nombre} guardado (correo no enviado)`,t)}return l},$Y=async(e,t)=>{const{document:r,...n}=t,a={...n};["day_off_date","day_on_date","prog_start","prog_end","reprogram_start","reprogram_end","day_off_start","day_off_end","day_on_start","day_on_end"].forEach(c=>{a[c]===""&&(a[c]=null)});const{data:s,error:l}=await fe.from("attendance_cambios_dia").update(a).eq("id",e).select().single();if(l)throw l;return s},FY=async e=>{const{data:t,error:r}=await fe.storage.from("attendance-docs").createSignedUrl(e,3600);if(r)throw r;return t.signedUrl},BY=async(e,t)=>{if(!Xr())return[];const r=Ba(e);let n=fe.from("attendance_autorizaciones").select("*").in("terminal_code",r).order("authorization_date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}const{data:a,error:i}=await n;if(i)throw i;return a||[]},UY=async(e,t)=>{const{data:r,error:n}=await fe.from("attendance_autorizaciones").insert({...e,created_by_supervisor:to(t)}).select().single();if(n)throw zn("Error al crear registro","No se pudo guardar la autorizacin"),n;try{await Ah("Autorizaciones",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.authorization_date,createdBy:t,details:{Tipo:e.entry_or_exit==="ENTRADA"?"Llegada Tarda":"Retiro Anticipado",Horario:e.horario||"",Turno:e.turno||"",Motivo:e.motivo||""}}),Vn("Registro creado exitosamente",`Autorizacin para ${e.nombre} guardada y correo enviado`,t)}catch{Vn("Registro creado",`Autorizacin para ${e.nombre} guardada (correo no enviado)`,t)}return r},zY=async(e,t)=>{const{data:r,error:n}=await fe.from("attendance_autorizaciones").update(t).eq("id",e).select().single();if(n)throw n;return r},qY=async(e,t,r)=>{const{error:n}=await fe.from(e).update({auth_status:"AUTORIZADO",authorized_by:to(r),authorized_at:new Date().toISOString()}).eq("id",t);if(n)throw n},WY=async(e,t,r,n)=>{const{error:a}=await fe.from(e).update({auth_status:"RECHAZADO",authorized_by:to(r),authorized_at:new Date().toISOString(),rejection_reason:n}).eq("id",t);if(a)throw a},HY=async(e,t,r="date")=>{if(!Xr())return{pendingToday:0,pendingTotal:0,authorizedRange:0,rejectedRange:0};const n=Ba(t),a=new Date().toISOString().split("T")[0],{count:i}=await fe.from(e).select("*",{count:"exact",head:!0}).in("terminal_code",n).eq("auth_status","PENDIENTE").eq(r,a),{count:s}=await fe.from(e).select("*",{count:"exact",head:!0}).in("terminal_code",n).eq("auth_status","PENDIENTE"),l=new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],{count:c}=await fe.from(e).select("*",{count:"exact",head:!0}).in("terminal_code",n).eq("auth_status","AUTORIZADO").gte(r,l),{count:u}=await fe.from(e).select("*",{count:"exact",head:!0}).in("terminal_code",n).eq("auth_status","RECHAZADO").gte(r,l);return{pendingToday:i??0,pendingTotal:s??0,authorizedRange:c??0,rejectedRange:u??0}},VY=(e,t)=>{const r=fe.channel("attendance-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_no_marcaciones"},()=>e("attendance_no_marcaciones")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_no_marcaciones"},()=>t("attendance_no_marcaciones")).on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_sin_credenciales"},()=>e("attendance_sin_credenciales")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_sin_credenciales"},()=>t("attendance_sin_credenciales")).on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_cambios_dia"},()=>e("attendance_cambios_dia")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_cambios_dia"},()=>t("attendance_cambios_dia")).on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_autorizaciones"},()=>e("attendance_autorizaciones")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_autorizaciones"},()=>t("attendance_autorizaciones")).on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_vacaciones"},()=>e("attendance_vacaciones")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_vacaciones"},()=>t("attendance_vacaciones")).subscribe();return()=>{fe.removeChannel(r)}},X_=(e,t)=>{const r=new Date(e+"T12:00:00"),n=new Date(t+"T12:00:00");let a=0;const i=new Date(r);for(;i<=n;){const s=i.getDay();s!==0&&s!==6&&a++,i.setDate(i.getDate()+1)}return a},Y_=(e,t)=>{const r=new Date(e+"T12:00:00"),n=new Date(t+"T12:00:00"),a=Math.abs(n.getTime()-r.getTime());return Math.ceil(a/(1e3*60*60*24))+1},KY=async(e,t,r)=>{const{count:n,error:a}=await fe.from("staff").select("*",{count:"exact",head:!0}).eq("cargo",e).eq("terminal_code",t).eq("turno",r).eq("status","ACTIVO");if(a)throw a;return n??0},xR=async(e,t,r,n,a,i)=>{let s=fe.from("attendance_vacaciones").select("*").eq("cargo",e).eq("terminal_code",t).eq("turno",r).in("auth_status",["PENDIENTE","AUTORIZADO"]).lte("start_date",a).gte("end_date",n);i&&(s=s.neq("rut",i));const{data:l,error:c}=await s;if(c)throw c;const u=await KY(e,t,r),d=new Set((l==null?void 0:l.map(p=>p.rut))||[]).size,f=u-d-1;let h=0;if(l&&l.length>0){const p=new Date(n),v=new Date(a);for(const g of l){const x=new Date(g.start_date),b=new Date(g.end_date),m=new Date(Math.max(p.getTime(),x.getTime())),y=new Date(Math.min(v.getTime(),b.getTime())),_=Math.ceil((y.getTime()-m.getTime())/(1e3*60*60*24))+1;_>h&&(h=_)}}return{hasConflict:((l==null?void 0:l.length)??0)>0,conflictingVacations:(l||[]).map(p=>({nombre:p.nombre,cargo:p.cargo,turno:p.turno,start_date:p.start_date,end_date:p.end_date})),totalStaffCount:u,availableStaffCount:Math.max(0,f),overlappingDays:h}},GY=async(e,t)=>{if(!Xr())return[];const r=Ba(e);let n=fe.from("attendance_vacaciones").select("*").in("terminal_code",r).order("start_date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}t!=null&&t.date_from&&(n=n.gte("start_date",t.date_from)),t!=null&&t.date_to&&(n=n.lte("end_date",t.date_to));const{data:a,error:i}=await n;if(i)throw i;return a||[]},XY=async(e,t)=>{const r=Y_(e.start_date,e.end_date),n=X_(e.start_date,e.end_date),a=await xR(e.cargo,e.terminal_code,e.turno,e.start_date,e.end_date),i=a.hasConflict?`${a.conflictingVacations.length} persona(s) en misma posicin en vacaciones. Disponibles: ${a.availableStaffCount}/${a.totalStaffCount}`:null,{data:s,error:l}=await fe.from("attendance_vacaciones").insert({rut:e.rut,nombre:e.nombre,cargo:e.cargo,terminal_code:e.terminal_code,turno:e.turno,start_date:e.start_date,end_date:e.end_date,return_date:e.return_date,calendar_days:r,business_days:n,has_conflict:a.hasConflict,conflict_authorized:e.conflict_authorized,conflict_details:i,created_by_supervisor:to(t)}).select().single();if(l)throw zn("Error al crear registro","No se pudo guardar la solicitud de vacaciones"),l;try{const c=a.hasConflict?`<strong style="color: #dc2626;">ADVERTENCIA:</strong> ${i}`:"Sin conflictos detectados";await Ah("Vacaciones",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.start_date,createdBy:t,details:{"Fecha Inicio":e.start_date,"Fecha Trmino":e.end_date,"Fecha Vuelta":e.return_date,"Das Calendario":r.toString(),"Das a Descontar":n.toString(),Conflictos:c}}),Vn("Solicitud de vacaciones creada",`Vacaciones para ${e.nombre} (${n} das hbiles) registradas`,t)}catch{Vn("Solicitud creada",`Vacaciones para ${e.nombre} registradas (correo no enviado)`,t)}return s},YY=async(e,t)=>{const r={...t};t.start_date&&t.end_date&&(r.calendar_days=Y_(t.start_date,t.end_date),r.business_days=X_(t.start_date,t.end_date));const{data:n,error:a}=await fe.from("attendance_vacaciones").update(r).eq("id",e).select().single();if(a)throw a;return n},yR="isaac.avila@transdev.cl",vn={check:`<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="28" cy="28" r="26" fill="#dcfce7" stroke="#22c55e" stroke-width="3"/>
        <path d="M18 28L24 34L38 20" stroke="#16a34a" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,x:`<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="28" cy="28" r="26" fill="#fee2e2" stroke="#ef4444" stroke-width="3"/>
        <path d="M20 20L36 36M36 20L20 36" stroke="#dc2626" stroke-width="4" stroke-linecap="round"/>
    </svg>`,clock:`<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="28" cy="28" r="26" fill="#fef3c7" stroke="#f59e0b" stroke-width="3"/>
        <circle cx="28" cy="28" r="3" fill="#d97706"/>
        <path d="M28 16V28L36 33" stroke="#d97706" stroke-width="3" stroke-linecap="round"/>
    </svg>`,user:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="9" cy="5" r="3.5" stroke="#64748b" stroke-width="1.5"/>
        <path d="M2 16C2 12.686 5.13401 10 9 10C12.866 10 16 12.686 16 16" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,id:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="1.5" y="3.5" width="15" height="11" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <circle cx="6" cy="8" r="1.5" stroke="#64748b" stroke-width="1"/>
        <path d="M4 12C4 10.8954 4.89543 10 6 10C7.10457 10 8 10.8954 8 12" stroke="#64748b" stroke-width="1"/>
        <path d="M10.5 7.5H14.5M10.5 10H13" stroke="#64748b" stroke-width="1.2" stroke-linecap="round"/>
    </svg>`,building:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M2 16V3.5C2 3.22386 2.22386 3 2.5 3H9.5C9.77614 3 10 3.22386 10 3.5V16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M10 7H14.5C14.7761 7 15 7.22386 15 7.5V16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M5 6H7M5 9H7M5 12H7M12 10H13M12 13H13" stroke="#64748b" stroke-width="1.2" stroke-linecap="round"/>
        <path d="M1 16H17" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,calendar:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="2" y="3.5" width="14" height="12" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <path d="M2 7H16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M5.5 1.5V4.5M12.5 1.5V4.5" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`},bR=e=>new Date(e+"T12:00:00").toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),ka=(e,t,r,n=!1)=>`
    <tr>
        <td style="padding: 12px 16px; border-bottom: 1px solid #e2e8f0; width: 40%; vertical-align: middle;">
            <table role="presentation" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="padding-right: 12px; vertical-align: middle;">${e}</td>
                    <td style="font-size: 11px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">${t}</td>
                </tr>
            </table>
        </td>
        <td style="padding: 12px 16px; border-bottom: 1px solid #e2e8f0; font-size: 14px; font-weight: ${n?"700":"500"}; color: ${n?"#0f172a":"#334155"}; text-align: right;">${r}</td>
    </tr>
`,wR=async(e,t,r,n,a,i,s)=>{const l=e==="AUTORIZADO",c=l?"#16a34a":"#dc2626",u=l?"#f0fdf4":"#fef2f2",d=l?"#bbf7d0":"#fecaca",f=l?vn.check:vn.x,h=`${t} ${e} - ${n}`,p=`
        <!-- Status Banner -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
            <tr>
                <td style="background: ${u}; border: 1px solid ${d}; border-radius: 12px; padding: 24px; text-align: center;">
                    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                        <tr>
                            <td align="center" style="padding-bottom: 8px;">
                                ${f}
                            </td>
                        </tr>
                        <tr>
                            <td align="center">
                                <span style="font-size: 11px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 4px;">Estado del Registro</span>
                                <span style="font-size: 20px; font-weight: 800; color: ${c}; letter-spacing: -0.5px;">${e}</span>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
        
        <!-- Data Table -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate;">
            ${ka(vn.id,"Subseccin",t,!0)}
            ${ka(vn.id,"RUT",Kt(r))}
            ${ka(vn.user,"Trabajador",n)}
            ${ka(vn.building,"Terminal",He(a))}
            ${ka(vn.calendar,"Fecha",bR(i))}
            ${s?ka(vn.id,"Motivo",s,!0):""}
        </table>
    `.trim(),v=await G_("email_notifications"),g=v!=null&&v.to&&v.to.length>0?v.to:[yR],x=(v==null?void 0:v.cc)||[];try{await Gs.sendEmail({audience:"manual",manualRecipients:g,cc:x,subject:h,body:p})}catch(b){console.error("Error sending authorization email:",b)}},Ah=async(e,t)=>{const r=t.details?Object.entries(t.details).filter(([c,u])=>u&&u.trim()).map(([c,u])=>ka(vn.id,c,u)).join(""):"",n=`Nuevo Registro: ${e}`,a=`
        <!-- Worker Name Header -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
            <tr>
                <td align="center">
                    <h2 style="margin: 0; font-size: 24px; font-weight: 800; color: #0f172a;">${t.nombre}</h2>
                </td>
            </tr>
        </table>
        
        <!-- Status Banner -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
            <tr>
                <td style="background: #fffbeb; border: 1px solid #fde68a; border-radius: 12px; padding: 24px; text-align: center;">
                    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                        <tr>
                            <td align="center" style="padding-bottom: 8px;">
                                ${vn.clock}
                            </td>
                        </tr>
                        <tr>
                            <td align="center">
                                <span style="font-size: 11px; font-weight: 700; color: #92400e; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 4px;">Estado del Registro</span>
                                <span style="font-size: 18px; font-weight: 800; color: #b45309; letter-spacing: -0.5px;">PENDIENTE DE AUTORIZACIN</span>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
        
        <!-- Subsection Badge -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
            <tr>
                <td align="center">
                    <span style="display: inline-block; padding: 8px 20px; background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 100px; color: #2563eb; font-size: 12px; font-weight: 700; letter-spacing: 0.5px; text-transform: uppercase;">${e}</span>
                </td>
            </tr>
        </table>
        
        <!-- Data Table -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate;">
            ${ka(vn.id,"RUT",Kt(t.rut))}
            ${ka(vn.user,"Trabajador",t.nombre,!0)}
            ${ka(vn.building,"Terminal",He(t.terminal))}
            ${ka(vn.calendar,"Fecha",bR(t.date))}
            ${r}
        </table>
        
        <!-- Registered By -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-top: 24px;">
            <tr>
                <td style="padding: 16px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px;">
                    <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
                        <tr>
                            <td width="40" style="padding-right: 12px; vertical-align: middle;">
                                <div style="width: 40px; height: 40px; background: #2563eb; border-radius: 50%; text-align: center; line-height: 40px; color: white; font-weight: 700; font-size: 16px;">${t.createdBy.charAt(0)}</div>
                            </td>
                            <td style="vertical-align: middle;">
                                <span style="display: block; font-size: 10px; color: #64748b; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 2px;">Registrado por</span>
                                <span style="display: block; font-size: 14px; font-weight: 700; color: #0f172a;">${t.createdBy}</span>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    `.trim(),i=await G_("email_notifications"),s=i!=null&&i.to&&i.to.length>0?i.to:[yR],l=(i==null?void 0:i.cc)||[];try{await Gs.sendEmail({audience:"manual",manualRecipients:s,cc:l,subject:n,body:a})}catch(c){console.error("Error sending record created email:",c)}},Oh=[{value:"todos",label:"Todos"},{value:"PENDIENTE",label:"Pendiente"},{value:"AUTORIZADO",label:"Autorizado"},{value:"RECHAZADO",label:"Rechazado"}],_R=[{value:"ENTRADA",label:"Llegada Tarda"},{value:"SALIDA",label:"Retiro Anticipado"}],SR={"no-marcaciones":"No Marcaciones","sin-credenciales":"Sin Credenciales","cambios-dia":"Cambios de Da",autorizaciones:"Autorizaciones",vacaciones:"Vacaciones"},bt={all:["attendance"],noMarcaciones:(e,t)=>[...bt.all,"no-marcaciones",e,t],sinCredenciales:(e,t)=>[...bt.all,"sin-credenciales",e,t],cambiosDia:(e,t)=>[...bt.all,"cambios-dia",e,t],autorizaciones:(e,t)=>[...bt.all,"autorizaciones",e,t],vacaciones:(e,t)=>[...bt.all,"vacaciones",e,t],kpis:(e,t)=>[...bt.all,"kpis",e,t]},QY=(e,t)=>rt({queryKey:bt.noMarcaciones(e,t),queryFn:()=>CY(e,t)}),JY=(e,t)=>rt({queryKey:bt.sinCredenciales(e,t),queryFn:()=>RY(e,t)}),ZY=(e,t)=>rt({queryKey:bt.cambiosDia(e,t),queryFn:()=>MY(e,t)}),eQ=(e,t)=>rt({queryKey:bt.autorizaciones(e,t),queryFn:()=>BY(e,t)}),tQ=(e,t)=>rt({queryKey:bt.vacaciones(e,t),queryFn:()=>GY(e,t)}),Q_={"no-marcaciones":"attendance_no_marcaciones","sin-credenciales":"attendance_sin_credenciales","cambios-dia":"attendance_cambios_dia",autorizaciones:"attendance_autorizaciones",vacaciones:"attendance_vacaciones"},rQ={"no-marcaciones":"date","sin-credenciales":"date","cambios-dia":"date",autorizaciones:"authorization_date",vacaciones:"start_date"},Ch=(e,t)=>rt({queryKey:bt.kpis(e,t),queryFn:()=>HY(Q_[e],t,rQ[e])}),nQ=()=>{const e=Ge();return Xe({mutationFn:({values:t,createdBy:r})=>kY(t,r),onSuccess:()=>e.invalidateQueries({queryKey:bt.all})})},aQ=()=>{const e=Ge();return Xe({mutationFn:({values:t,createdBy:r})=>IY(t,r),onSuccess:()=>e.invalidateQueries({queryKey:bt.all})})},iQ=()=>{const e=Ge();return Xe({mutationFn:({values:t,createdBy:r})=>LY(t,r),onSuccess:()=>e.invalidateQueries({queryKey:bt.all})})},sQ=()=>{const e=Ge();return Xe({mutationFn:({values:t,createdBy:r})=>UY(t,r),onSuccess:()=>e.invalidateQueries({queryKey:bt.all})})},oQ=()=>{const e=Ge();return Xe({mutationFn:({values:t,createdBy:r})=>XY(t,r),onSuccess:()=>e.invalidateQueries({queryKey:bt.all})})},lQ=()=>{const e=Ge();return Xe({mutationFn:({id:t,values:r})=>PY(t,r),onSuccess:()=>e.invalidateQueries({queryKey:bt.all})})},cQ=()=>{const e=Ge();return Xe({mutationFn:({id:t,values:r})=>DY(t,r),onSuccess:()=>e.invalidateQueries({queryKey:bt.all})})},uQ=()=>{const e=Ge();return Xe({mutationFn:({id:t,values:r})=>$Y(t,r),onSuccess:()=>e.invalidateQueries({queryKey:bt.all})})},dQ=()=>{const e=Ge();return Xe({mutationFn:({id:t,values:r})=>zY(t,r),onSuccess:()=>e.invalidateQueries({queryKey:bt.all})})},fQ=()=>{const e=Ge();return Xe({mutationFn:({id:t,values:r})=>YY(t,r),onSuccess:()=>e.invalidateQueries({queryKey:bt.all})})},kh=()=>{const e=Ge();return Xe({mutationFn:async({subsection:t,id:r,authorizedBy:n,rut:a,nombre:i,terminal:s,date:l})=>{await qY(Q_[t],r,n),await wR("AUTORIZADO",SR[t],a,i,s,l)},onSuccess:()=>e.invalidateQueries({queryKey:bt.all})})},Ph=()=>{const e=Ge();return Xe({mutationFn:async({subsection:t,id:r,authorizedBy:n,reason:a,rut:i,nombre:s,terminal:l,date:c})=>{await WY(Q_[t],r,n,a),await wR("RECHAZADO",SR[t],i,s,l,c,a)},onSuccess:()=>e.invalidateQueries({queryKey:bt.all})})},Rh=()=>{const e=Ge();T.useEffect(()=>{const t=VY(()=>e.invalidateQueries({queryKey:bt.all}),()=>e.invalidateQueries({queryKey:bt.all}));return()=>{t()}},[e])},hQ=()=>{const e=$e(w=>w.context),t=$e(w=>w.setContext),r=fr(w=>w.session),n=(r==null?void 0:r.supervisorName)??"",a=Nh(n),[i,s]=T.useState({auth_status:"todos"}),[l,c]=T.useState({type:"none"}),u=QY(e,i),d=Ch("no-marcaciones",e),f=nQ(),h=lQ(),p=kh(),v=Ph();Rh();const g=[{key:"rut",header:"RUT",value:w=>Kt(w.rut)},{key:"nombre",header:"Nombre",value:w=>w.nombre},{key:"area",header:"rea",value:w=>w.area},{key:"cargo",header:"Cargo",value:w=>w.cargo},{key:"jefe_terminal",header:"Jefe Terminal",value:w=>w.jefe_terminal},{key:"terminal",header:"Terminal",value:w=>He(w.terminal_code)},{key:"cabezal",header:"Cabezal",value:w=>w.cabezal},{key:"incident_state",header:"Estado",value:w=>w.incident_state},{key:"date",header:"Fecha",value:w=>w.date},{key:"auth_status",header:"Autorizacin",value:w=>w.auth_status}],x=async w=>{await f.mutateAsync({values:w,createdBy:n}),c({type:"none"})},b=async w=>{l.type==="edit"&&(await h.mutateAsync({id:l.record.id,values:w}),c({type:"none"}))},m=async()=>{if(l.type!=="authorize")return;const w=l.record;await p.mutateAsync({subsection:"no-marcaciones",id:w.id,authorizedBy:n,rut:w.rut,nombre:w.nombre,terminal:w.terminal_code,date:w.date}),c({type:"none"})},y=async w=>{if(l.type!=="reject"||!w)return;const S=l.record;await v.mutateAsync({subsection:"no-marcaciones",id:S.id,authorizedBy:n,reason:w,rut:S.rut,nombre:S.nombre,terminal:S.terminal_code,date:S.date}),c({type:"none"})},_=w=>{switch(w){case"AUTORIZADO":return o.jsx("span",{className:"badge badge-success",children:w});case"RECHAZADO":return o.jsx("span",{className:"badge badge-danger",children:w});default:return o.jsx("span",{className:"badge badge-warning",children:w})}};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Xt,{title:"No Marcaciones",description:"Registros de no marcacin de personal",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[o.jsx(G,{name:"clipboard",size:18})," Nuevo Registro"]}),o.jsx(jr,{onExportView:()=>Je({filename:"no_marcaciones",sheetName:"Datos",rows:u.data||[],columns:g}),onExportAll:()=>Je({filename:"no_marcaciones_all",sheetName:"Datos",rows:u.data||[],columns:g})})]})}),o.jsx(Th,{data:d.data,isLoading:d.isLoading}),o.jsxs(An,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:i.auth_status,onChange:w=>s(S=>({...S,auth_status:w.target.value})),children:Oh.map(w=>o.jsx("option",{value:w.value,children:w.label},w.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:w=>s(S=>({...S,search:w.target.value}))})]})]}),u.isLoading&&o.jsx(Gt,{label:"Cargando registros..."}),u.isError&&o.jsx(Sr,{onRetry:()=>u.refetch()}),!u.isLoading&&!u.isError&&o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{className:"table-header-cell",children:"RUT"}),o.jsx("th",{className:"table-header-cell",children:"Nombre"}),o.jsx("th",{className:"table-header-cell",children:"Terminal"}),o.jsx("th",{className:"table-header-cell",children:"Fecha"}),o.jsx("th",{className:"table-header-cell",children:"Estado"}),o.jsx("th",{className:"table-header-cell",children:"Autorizacin"}),o.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:(u.data||[]).map(w=>o.jsxs("tr",{className:"table-row",children:[o.jsx("td",{className:"table-cell font-mono text-sm",children:Kt(w.rut)}),o.jsx("td",{className:"table-cell font-medium",children:w.nombre}),o.jsx("td",{className:"table-cell",children:He(w.terminal_code)}),o.jsx("td",{className:"table-cell",children:w.date}),o.jsx("td",{className:"table-cell",children:w.incident_state||"-"}),o.jsx("td",{className:"table-cell",children:_(w.auth_status)}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[w.auth_status==="PENDIENTE"&&o.jsx("button",{onClick:()=>c({type:"edit",record:w}),className:"btn btn-ghost btn-icon",title:"Editar",children:o.jsx(G,{name:"clipboard",size:16})}),a&&w.auth_status==="PENDIENTE"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>c({type:"authorize",record:w}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:o.jsx(G,{name:"check-circle",size:16})}),o.jsx("button",{onClick:()=>c({type:"reject",record:w}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:o.jsx(G,{name:"x",size:16})})]})]})})]},w.id))})]})}),(l.type==="create"||l.type==="edit")&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),o.jsxs("div",{className:"relative w-full max-w-3xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-xl font-bold",children:l.type==="create"?"Nuevo Registro":"Editar Registro"}),o.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:o.jsx(G,{name:"x",size:24})})]}),o.jsx(AY,{initialData:l.type==="edit"?{...l.record,area:l.record.area??"Logstica",cargo:l.record.cargo??"",jefe_terminal:l.record.jefe_terminal??"",cabezal:l.record.cabezal??"",incident_state:l.record.incident_state??"",schedule_in_out:l.record.schedule_in_out??"",time_range:l.record.time_range??"",observations:l.record.observations??"",informed_by:l.record.informed_by??n}:void 0,supervisorName:n,onSubmit:l.type==="create"?x:b,onCancel:()=>c({type:"none"}),isLoading:f.isPending||h.isPending})]})]}),l.type==="authorize"&&o.jsx(ii,{mode:"authorize",itemName:l.record.nombre,onConfirm:m,onCancel:()=>c({type:"none"}),isLoading:p.isPending}),l.type==="reject"&&o.jsx(ii,{mode:"reject",itemName:l.record.nombre,onConfirm:y,onCancel:()=>c({type:"none"}),isLoading:v.isPending})]})},pQ=({initialData:e,supervisorName:t,onSubmit:r,onCancel:n,isLoading:a})=>{const[i,s]=T.useState({rut:"",nombre:"",terminal_code:"EL_ROBLE",cabezal:"",date:new Date().toISOString().split("T")[0],start_time:"",end_time:"",cargo:"",supervisor_autoriza:t,area:"Logstica",responsable:"",observacion:"",...e}),l=u=>{if(u){const[d,f]=(u.horario||"").split("-"),h=(d==null?void 0:d.trim())||"",p=(f==null?void 0:f.trim())||"";s(v=>({...v,nombre:u.nombre,cargo:u.cargo,terminal_code:u.terminal_code,start_time:h,end_time:p}))}},c=u=>{u.preventDefault(),r(i)};return o.jsxs("form",{onSubmit:c,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(Bg,{value:i.rut,onChange:u=>s(d=>({...d,rut:u})),onStaffFound:l,disabled:!!(e!=null&&e.rut)}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nombre"}),o.jsx("input",{type:"text",className:"input",value:i.nombre,onChange:u=>s(d=>({...d,nombre:u.target.value})),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsx("select",{className:"input",value:i.terminal_code,onChange:u=>s(d=>({...d,terminal_code:u.target.value})),required:!0,children:Kn.map(u=>o.jsx("option",{value:u.value,children:u.label},u.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cabezal"}),o.jsx("input",{type:"text",className:"input",value:i.cabezal,onChange:u=>s(d=>({...d,cabezal:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha"}),o.jsx("input",{type:"date",className:"input",value:i.date,onChange:u=>s(d=>({...d,date:u.target.value})),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Hora Inicio"}),o.jsx("input",{type:"time",className:"input",value:i.start_time,onChange:u=>s(d=>({...d,start_time:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Hora Fin"}),o.jsx("input",{type:"time",className:"input",value:i.end_time,onChange:u=>s(d=>({...d,end_time:u.target.value}))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cargo"}),o.jsx("input",{type:"text",className:"input",value:i.cargo,onChange:u=>s(d=>({...d,cargo:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Supervisor Autoriza"}),o.jsx("input",{type:"text",className:"input",value:i.supervisor_autoriza,onChange:u=>s(d=>({...d,supervisor_autoriza:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"rea"}),o.jsx("input",{type:"text",className:"input",value:i.area,onChange:u=>s(d=>({...d,area:u.target.value}))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Responsable"}),o.jsx("input",{type:"text",className:"input",value:i.responsable,onChange:u=>s(d=>({...d,responsable:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Observacin"}),o.jsx("textarea",{className:"input min-h-[80px]",value:i.observacion,onChange:u=>s(d=>({...d,observacion:u.target.value}))})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[o.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",disabled:a,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?"Guardando...":e?"Guardar Cambios":"Crear Registro"})]})]})},mQ=()=>{const e=$e(w=>w.context),t=$e(w=>w.setContext),r=fr(w=>w.session),n=(r==null?void 0:r.supervisorName)??"",a=Nh(n),[i,s]=T.useState({auth_status:"todos"}),[l,c]=T.useState({type:"none"}),u=JY(e,i),d=Ch("sin-credenciales",e),f=aQ(),h=cQ(),p=kh(),v=Ph();Rh();const g=[{key:"rut",header:"RUT",value:w=>Kt(w.rut)},{key:"nombre",header:"Nombre",value:w=>w.nombre},{key:"terminal",header:"Terminal",value:w=>He(w.terminal_code)},{key:"cabezal",header:"Cabezal",value:w=>w.cabezal},{key:"date",header:"Fecha",value:w=>w.date},{key:"start_time",header:"Hora Inicio",value:w=>w.start_time},{key:"end_time",header:"Hora Fin",value:w=>w.end_time},{key:"cargo",header:"Cargo",value:w=>w.cargo},{key:"supervisor_autoriza",header:"Supervisor Autoriza",value:w=>w.supervisor_autoriza},{key:"auth_status",header:"Autorizacin",value:w=>w.auth_status}],x=async w=>{await f.mutateAsync({values:w,createdBy:n}),c({type:"none"})},b=async w=>{l.type==="edit"&&(await h.mutateAsync({id:l.record.id,values:w}),c({type:"none"}))},m=async()=>{if(l.type!=="authorize")return;const w=l.record;await p.mutateAsync({subsection:"sin-credenciales",id:w.id,authorizedBy:n,rut:w.rut,nombre:w.nombre,terminal:w.terminal_code,date:w.date}),c({type:"none"})},y=async w=>{if(l.type!=="reject"||!w)return;const S=l.record;await v.mutateAsync({subsection:"sin-credenciales",id:S.id,authorizedBy:n,reason:w,rut:S.rut,nombre:S.nombre,terminal:S.terminal_code,date:S.date}),c({type:"none"})},_=w=>{switch(w){case"AUTORIZADO":return o.jsx("span",{className:"badge badge-success",children:w});case"RECHAZADO":return o.jsx("span",{className:"badge badge-danger",children:w});default:return o.jsx("span",{className:"badge badge-warning",children:w})}};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Xt,{title:"Sin Credenciales",description:"Registros de personal sin credencial",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[o.jsx(G,{name:"key",size:18})," Nuevo Registro"]}),o.jsx(jr,{onExportView:()=>Je({filename:"sin_credenciales",sheetName:"Datos",rows:u.data||[],columns:g}),onExportAll:()=>Je({filename:"sin_credenciales_all",sheetName:"Datos",rows:u.data||[],columns:g})})]})}),o.jsx(Th,{data:d.data,isLoading:d.isLoading}),o.jsxs(An,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:i.auth_status,onChange:w=>s(S=>({...S,auth_status:w.target.value})),children:Oh.map(w=>o.jsx("option",{value:w.value,children:w.label},w.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:w=>s(S=>({...S,search:w.target.value}))})]})]}),u.isLoading&&o.jsx(Gt,{label:"Cargando registros..."}),u.isError&&o.jsx(Sr,{onRetry:()=>u.refetch()}),!u.isLoading&&!u.isError&&o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{className:"table-header-cell",children:"RUT"}),o.jsx("th",{className:"table-header-cell",children:"Nombre"}),o.jsx("th",{className:"table-header-cell",children:"Terminal"}),o.jsx("th",{className:"table-header-cell",children:"Cabezal"}),o.jsx("th",{className:"table-header-cell",children:"Fecha"}),o.jsx("th",{className:"table-header-cell",children:"Hora"}),o.jsx("th",{className:"table-header-cell",children:"Autorizacin"}),o.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:(u.data||[]).map(w=>o.jsxs("tr",{className:"table-row",children:[o.jsx("td",{className:"table-cell font-mono text-sm",children:Kt(w.rut)}),o.jsx("td",{className:"table-cell font-medium",children:w.nombre}),o.jsx("td",{className:"table-cell",children:He(w.terminal_code)}),o.jsx("td",{className:"table-cell",children:w.cabezal||"-"}),o.jsx("td",{className:"table-cell",children:w.date}),o.jsxs("td",{className:"table-cell",children:[w.start_time," - ",w.end_time]}),o.jsx("td",{className:"table-cell",children:_(w.auth_status)}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[w.auth_status==="PENDIENTE"&&o.jsx("button",{onClick:()=>c({type:"edit",record:w}),className:"btn btn-ghost btn-icon",title:"Editar",children:o.jsx(G,{name:"clipboard",size:16})}),a&&w.auth_status==="PENDIENTE"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>c({type:"authorize",record:w}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:o.jsx(G,{name:"check-circle",size:16})}),o.jsx("button",{onClick:()=>c({type:"reject",record:w}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:o.jsx(G,{name:"x",size:16})})]})]})})]},w.id))})]})}),(l.type==="create"||l.type==="edit")&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),o.jsxs("div",{className:"relative w-full max-w-3xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-xl font-bold",children:l.type==="create"?"Nuevo Registro":"Editar Registro"}),o.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:o.jsx(G,{name:"x",size:24})})]}),o.jsx(pQ,{initialData:l.type==="edit"?{...l.record,cabezal:l.record.cabezal??"",start_time:l.record.start_time??"",end_time:l.record.end_time??"",cargo:l.record.cargo??"",supervisor_autoriza:l.record.supervisor_autoriza??"",area:l.record.area??"",responsable:l.record.responsable??"",observacion:l.record.observacion??""}:void 0,supervisorName:n,onSubmit:l.type==="create"?x:b,onCancel:()=>c({type:"none"}),isLoading:f.isPending||h.isPending})]})]}),l.type==="authorize"&&o.jsx(ii,{mode:"authorize",itemName:l.record.nombre,onConfirm:m,onCancel:()=>c({type:"none"}),isLoading:p.isPending}),l.type==="reject"&&o.jsx(ii,{mode:"reject",itemName:l.record.nombre,onConfirm:y,onCancel:()=>c({type:"none"}),isLoading:v.isPending})]})},gQ=({initialData:e,onSubmit:t,onCancel:r,isLoading:n})=>{const a=T.useRef(null),[i,s]=T.useState({rut:"",nombre:"",terminal_code:"EL_ROBLE",cabezal:"",date:new Date().toISOString().split("T")[0],prog_start:"",prog_end:"",reprogram_start:"",reprogram_end:"",day_off_date:"",day_off_start:"",day_off_end:"",day_on_date:"",day_on_start:"",day_on_end:"",document:null,...e}),l=u=>{if(u){const[d,f]=(u.horario||"").split("-"),h=(d==null?void 0:d.trim())||"",p=(f==null?void 0:f.trim())||"";s(v=>({...v,nombre:u.nombre,terminal_code:u.terminal_code,prog_start:h,prog_end:p,day_off_start:h,day_off_end:p,day_on_start:h,day_on_end:p}))}},c=u=>{u.preventDefault(),t(i)};return o.jsxs("form",{onSubmit:c,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(Bg,{value:i.rut,onChange:u=>s(d=>({...d,rut:u})),onStaffFound:l,disabled:!!(e!=null&&e.rut)}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nombre"}),o.jsx("input",{type:"text",className:"input",value:i.nombre,onChange:u=>s(d=>({...d,nombre:u.target.value})),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsx("select",{className:"input",value:i.terminal_code,onChange:u=>s(d=>({...d,terminal_code:u.target.value})),required:!0,children:Kn.map(u=>o.jsx("option",{value:u.value,children:u.label},u.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cabezal"}),o.jsx("input",{type:"text",className:"input",value:i.cabezal,onChange:u=>s(d=>({...d,cabezal:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha Registro"}),o.jsx("input",{type:"date",className:"input",value:i.date,onChange:u=>s(d=>({...d,date:u.target.value})),required:!0})]})]}),o.jsxs("div",{className:"card p-4 bg-brand-50 border-brand-200",children:[o.jsx("h4",{className:"font-semibold text-brand-800 mb-3",children:"Jornada Programada (desde Personal)"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Entrada"}),o.jsx("input",{type:"text",className:"input bg-brand-100 font-medium",value:i.prog_start,onChange:u=>s(d=>({...d,prog_start:u.target.value})),placeholder:"--:--",readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Salida"}),o.jsx("input",{type:"text",className:"input bg-brand-100 font-medium",value:i.prog_end,onChange:u=>s(d=>({...d,prog_end:u.target.value})),placeholder:"--:--",readOnly:!0})]})]})]}),o.jsxs("div",{className:"card p-4 bg-slate-50",children:[o.jsx("h4",{className:"font-semibold text-slate-700 mb-3",children:"Da Programado (No Trabaja)"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha"}),o.jsx("input",{type:"date",className:"input",value:i.day_off_date,onChange:u=>s(d=>({...d,day_off_date:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Inicio"}),o.jsx("input",{type:"text",className:"input font-medium",value:i.day_off_start,onChange:u=>s(d=>({...d,day_off_start:u.target.value})),placeholder:"--:--"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Trmino"}),o.jsx("input",{type:"text",className:"input font-medium",value:i.day_off_end,onChange:u=>s(d=>({...d,day_off_end:u.target.value})),placeholder:"--:--"})]})]})]}),o.jsxs("div",{className:"card p-4 bg-success-50 border-success-200",children:[o.jsx("h4",{className:"font-semibold text-success-800 mb-3",children:"Da ReProgramado (Trabaja)"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha"}),o.jsx("input",{type:"date",className:"input",value:i.day_on_date,onChange:u=>s(d=>({...d,day_on_date:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Inicio"}),o.jsx("input",{type:"text",className:"input font-medium",value:i.day_on_start,onChange:u=>s(d=>({...d,day_on_start:u.target.value})),placeholder:"--:--"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Trmino"}),o.jsx("input",{type:"text",className:"input font-medium",value:i.day_on_end,onChange:u=>s(d=>({...d,day_on_end:u.target.value})),placeholder:"--:--"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Documento Adjunto (opcional)"}),o.jsxs("div",{className:"border-2 border-dashed rounded-xl p-4 text-center",children:[o.jsx("input",{ref:a,type:"file",accept:".pdf,.jpg,.jpeg,.png",className:"hidden",onChange:u=>s(d=>{var f;return{...d,document:((f=u.target.files)==null?void 0:f[0])||null}})}),i.document?o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsx(G,{name:"check-circle",size:20,className:"text-success-600"}),o.jsx("span",{className:"text-sm",children:i.document.name}),o.jsx("button",{type:"button",onClick:()=>{s(u=>({...u,document:null})),a.current&&(a.current.value="")},className:"text-danger-600",children:o.jsx(G,{name:"x",size:18})})]}):o.jsxs("button",{type:"button",onClick:()=>{var u;return(u=a.current)==null?void 0:u.click()},className:"btn btn-secondary",children:[o.jsx(G,{name:"image",size:18})," Seleccionar Archivo"]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Guardando...":e?"Guardar Cambios":"Crear Registro"})]})]})},vQ=()=>{const e=$e(S=>S.context),t=$e(S=>S.setContext),r=fr(S=>S.session),n=(r==null?void 0:r.supervisorName)??"",a=Nh(n),[i,s]=T.useState({auth_status:"todos"}),[l,c]=T.useState({type:"none"}),u=ZY(e,i),d=Ch("cambios-dia",e),f=iQ(),h=uQ(),p=kh(),v=Ph();Rh();const g=[{key:"rut",header:"RUT",value:S=>Kt(S.rut)},{key:"nombre",header:"Nombre",value:S=>S.nombre},{key:"terminal",header:"Terminal",value:S=>He(S.terminal_code)},{key:"cabezal",header:"Cabezal",value:S=>S.cabezal},{key:"date",header:"Fecha",value:S=>S.date},{key:"prog_start",header:"Prog. Inicio",value:S=>S.prog_start},{key:"prog_end",header:"Prog. Fin",value:S=>S.prog_end},{key:"reprogram_start",header:"Reprog. Inicio",value:S=>S.reprogram_start},{key:"reprogram_end",header:"Reprog. Fin",value:S=>S.reprogram_end},{key:"auth_status",header:"Autorizacin",value:S=>S.auth_status}],x=async S=>{await f.mutateAsync({values:S,createdBy:n}),c({type:"none"})},b=async S=>{l.type==="edit"&&(await h.mutateAsync({id:l.record.id,values:S}),c({type:"none"}))},m=async()=>{if(l.type!=="authorize")return;const S=l.record;await p.mutateAsync({subsection:"cambios-dia",id:S.id,authorizedBy:n,rut:S.rut,nombre:S.nombre,terminal:S.terminal_code,date:S.date}),c({type:"none"})},y=async S=>{if(l.type!=="reject"||!S)return;const j=l.record;await v.mutateAsync({subsection:"cambios-dia",id:j.id,authorizedBy:n,reason:S,rut:j.rut,nombre:j.nombre,terminal:j.terminal_code,date:j.date}),c({type:"none"})},_=async S=>{try{const j=await FY(S);window.open(j,"_blank")}catch(j){console.error("Error getting document URL:",j)}},w=S=>{switch(S){case"AUTORIZADO":return o.jsx("span",{className:"badge badge-success",children:S});case"RECHAZADO":return o.jsx("span",{className:"badge badge-danger",children:S});default:return o.jsx("span",{className:"badge badge-warning",children:S})}};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Xt,{title:"Cambios de Da",description:"Reprogramaciones de jornada laboral",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[o.jsx(G,{name:"calendar",size:18})," Nuevo Registro"]}),o.jsx(jr,{onExportView:()=>Je({filename:"cambios_dia",sheetName:"Datos",rows:u.data||[],columns:g}),onExportAll:()=>Je({filename:"cambios_dia_all",sheetName:"Datos",rows:u.data||[],columns:g})})]})}),o.jsx(Th,{data:d.data,isLoading:d.isLoading}),o.jsxs(An,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:i.auth_status,onChange:S=>s(j=>({...j,auth_status:S.target.value})),children:Oh.map(S=>o.jsx("option",{value:S.value,children:S.label},S.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:S=>s(j=>({...j,search:S.target.value}))})]})]}),u.isLoading&&o.jsx(Gt,{label:"Cargando registros..."}),u.isError&&o.jsx(Sr,{onRetry:()=>u.refetch()}),!u.isLoading&&!u.isError&&o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{className:"table-header-cell",children:"RUT"}),o.jsx("th",{className:"table-header-cell",children:"Nombre"}),o.jsx("th",{className:"table-header-cell",children:"Terminal"}),o.jsx("th",{className:"table-header-cell",children:"Fecha"}),o.jsx("th",{className:"table-header-cell",children:"Jornada Prog."}),o.jsx("th",{className:"table-header-cell",children:"Jornada Reprog."}),o.jsx("th",{className:"table-header-cell",children:"Doc"}),o.jsx("th",{className:"table-header-cell",children:"Autorizacin"}),o.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:(u.data||[]).map(S=>o.jsxs("tr",{className:"table-row",children:[o.jsx("td",{className:"table-cell font-mono text-sm",children:Kt(S.rut)}),o.jsx("td",{className:"table-cell font-medium",children:S.nombre}),o.jsx("td",{className:"table-cell",children:He(S.terminal_code)}),o.jsx("td",{className:"table-cell",children:S.date}),o.jsxs("td",{className:"table-cell text-xs",children:[S.prog_start," - ",S.prog_end]}),o.jsxs("td",{className:"table-cell text-xs",children:[S.reprogram_start," - ",S.reprogram_end]}),o.jsx("td",{className:"table-cell",children:S.document_path?o.jsx("button",{onClick:()=>_(S.document_path),className:"text-brand-600 hover:underline",children:o.jsx(G,{name:"image",size:16})}):"-"}),o.jsx("td",{className:"table-cell",children:w(S.auth_status)}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[S.auth_status==="PENDIENTE"&&o.jsx("button",{onClick:()=>c({type:"edit",record:S}),className:"btn btn-ghost btn-icon",title:"Editar",children:o.jsx(G,{name:"clipboard",size:16})}),a&&S.auth_status==="PENDIENTE"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>c({type:"authorize",record:S}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:o.jsx(G,{name:"check-circle",size:16})}),o.jsx("button",{onClick:()=>c({type:"reject",record:S}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:o.jsx(G,{name:"x",size:16})})]})]})})]},S.id))})]})}),(l.type==="create"||l.type==="edit")&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),o.jsxs("div",{className:"relative w-full max-w-4xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-xl font-bold",children:l.type==="create"?"Nuevo Registro":"Editar Registro"}),o.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:o.jsx(G,{name:"x",size:24})})]}),o.jsx(gQ,{initialData:l.type==="edit"?{...l.record,cabezal:l.record.cabezal??"",prog_start:l.record.prog_start??"",prog_end:l.record.prog_end??"",reprogram_start:l.record.reprogram_start??"",reprogram_end:l.record.reprogram_end??"",day_off_date:l.record.day_off_date??"",day_off_start:l.record.day_off_start??"",day_off_end:l.record.day_off_end??"",day_on_date:l.record.day_on_date??"",day_on_start:l.record.day_on_start??"",day_on_end:l.record.day_on_end??"",document:null}:void 0,onSubmit:l.type==="create"?x:b,onCancel:()=>c({type:"none"}),isLoading:f.isPending||h.isPending})]})]}),l.type==="authorize"&&o.jsx(ii,{mode:"authorize",itemName:l.record.nombre,onConfirm:m,onCancel:()=>c({type:"none"}),isLoading:p.isPending}),l.type==="reject"&&o.jsx(ii,{mode:"reject",itemName:l.record.nombre,onConfirm:y,onCancel:()=>c({type:"none"}),isLoading:v.isPending})]})},xQ=({initialData:e,onSubmit:t,onCancel:r,isLoading:n})=>{const[a,i]=T.useState({rut:"",nombre:"",cargo:"",terminal_code:"EL_ROBLE",turno:"",horario:"",authorization_date:new Date().toISOString().split("T")[0],entry_or_exit:"ENTRADA",motivo:"",...e}),s=c=>{c&&i(u=>({...u,nombre:c.nombre,cargo:c.cargo,terminal_code:c.terminal_code,turno:c.turno,horario:c.horario}))},l=c=>{c.preventDefault(),t(a)};return o.jsxs("form",{onSubmit:l,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(Bg,{value:a.rut,onChange:c=>i(u=>({...u,rut:c})),onStaffFound:s,disabled:!!(e!=null&&e.rut)}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nombre"}),o.jsx("input",{type:"text",className:"input",value:a.nombre,onChange:c=>i(u=>({...u,nombre:c.target.value})),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cargo"}),o.jsx("input",{type:"text",className:"input",value:a.cargo,onChange:c=>i(u=>({...u,cargo:c.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsx("select",{className:"input",value:a.terminal_code,onChange:c=>i(u=>({...u,terminal_code:c.target.value})),required:!0,children:Kn.map(c=>o.jsx("option",{value:c.value,children:c.label},c.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Turno"}),o.jsx("input",{type:"text",className:"input",value:a.turno,onChange:c=>i(u=>({...u,turno:c.target.value}))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Horario"}),o.jsx("input",{type:"text",className:"input",value:a.horario,onChange:c=>i(u=>({...u,horario:c.target.value})),placeholder:"08:00-18:00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha de Autorizacin"}),o.jsx("input",{type:"date",className:"input",value:a.authorization_date,onChange:c=>i(u=>({...u,authorization_date:c.target.value})),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Tipo"}),o.jsx("select",{className:"input",value:a.entry_or_exit,onChange:c=>i(u=>({...u,entry_or_exit:c.target.value})),required:!0,children:_R.map(c=>o.jsx("option",{value:c.value,children:c.label},c.value))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Motivo"}),o.jsx("textarea",{className:"input min-h-[80px]",value:a.motivo,onChange:c=>i(u=>({...u,motivo:c.target.value})),placeholder:"Describe el motivo de la autorizacin...",required:!0})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Guardando...":e?"Guardar Cambios":"Crear Registro"})]})]})},yQ=()=>{const e=$e(j=>j.context),t=$e(j=>j.setContext),r=fr(j=>j.session),n=(r==null?void 0:r.supervisorName)??"",a=Nh(n),[i,s]=T.useState({auth_status:"todos"}),[l,c]=T.useState({type:"none"}),u=eQ(e,i),d=Ch("autorizaciones",e),f=sQ(),h=dQ(),p=kh(),v=Ph();Rh();const g=j=>{var E;return((E=_R.find(N=>N.value===j))==null?void 0:E.label)||j},x=[{key:"rut",header:"RUT",value:j=>Kt(j.rut)},{key:"nombre",header:"Nombre",value:j=>j.nombre},{key:"cargo",header:"Cargo",value:j=>j.cargo},{key:"terminal",header:"Terminal",value:j=>He(j.terminal_code)},{key:"turno",header:"Turno",value:j=>j.turno},{key:"horario",header:"Horario",value:j=>j.horario},{key:"authorization_date",header:"Fecha",value:j=>j.authorization_date},{key:"entry_or_exit",header:"Tipo",value:j=>g(j.entry_or_exit)},{key:"motivo",header:"Motivo",value:j=>j.motivo},{key:"auth_status",header:"Autorizacin",value:j=>j.auth_status}],b=async j=>{await f.mutateAsync({values:j,createdBy:n}),c({type:"none"})},m=async j=>{l.type==="edit"&&(await h.mutateAsync({id:l.record.id,values:j}),c({type:"none"}))},y=async()=>{if(l.type!=="authorize")return;const j=l.record;await p.mutateAsync({subsection:"autorizaciones",id:j.id,authorizedBy:n,rut:j.rut,nombre:j.nombre,terminal:j.terminal_code,date:j.authorization_date}),c({type:"none"})},_=async j=>{if(l.type!=="reject"||!j)return;const E=l.record;await v.mutateAsync({subsection:"autorizaciones",id:E.id,authorizedBy:n,reason:j,rut:E.rut,nombre:E.nombre,terminal:E.terminal_code,date:E.authorization_date}),c({type:"none"})},w=j=>{switch(j){case"AUTORIZADO":return o.jsx("span",{className:"badge badge-success",children:j});case"RECHAZADO":return o.jsx("span",{className:"badge badge-danger",children:j});default:return o.jsx("span",{className:"badge badge-warning",children:j})}},S=j=>j==="ENTRADA"?o.jsx("span",{className:"badge bg-blue-100 text-blue-700",children:"Llegada Tarda"}):o.jsx("span",{className:"badge bg-purple-100 text-purple-700",children:"Retiro Anticipado"});return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Xt,{title:"Autorizaciones",description:"Retiros anticipados y llegadas tardas",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[o.jsx(G,{name:"check-circle",size:18})," Nueva Solicitud"]}),o.jsx(jr,{onExportView:()=>Je({filename:"autorizaciones",sheetName:"Datos",rows:u.data||[],columns:x}),onExportAll:()=>Je({filename:"autorizaciones_all",sheetName:"Datos",rows:u.data||[],columns:x})})]})}),o.jsx(Th,{data:d.data,isLoading:d.isLoading}),o.jsxs(An,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:i.auth_status,onChange:j=>s(E=>({...E,auth_status:j.target.value})),children:Oh.map(j=>o.jsx("option",{value:j.value,children:j.label},j.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:j=>s(E=>({...E,search:j.target.value}))})]})]}),u.isLoading&&o.jsx(Gt,{label:"Cargando registros..."}),u.isError&&o.jsx(Sr,{onRetry:()=>u.refetch()}),!u.isLoading&&!u.isError&&o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{className:"table-header-cell",children:"RUT"}),o.jsx("th",{className:"table-header-cell",children:"Nombre"}),o.jsx("th",{className:"table-header-cell",children:"Terminal"}),o.jsx("th",{className:"table-header-cell",children:"Fecha"}),o.jsx("th",{className:"table-header-cell",children:"Tipo"}),o.jsx("th",{className:"table-header-cell",children:"Motivo"}),o.jsx("th",{className:"table-header-cell",children:"Autorizacin"}),o.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:(u.data||[]).map(j=>o.jsxs("tr",{className:"table-row",children:[o.jsx("td",{className:"table-cell font-mono text-sm",children:Kt(j.rut)}),o.jsx("td",{className:"table-cell font-medium",children:j.nombre}),o.jsx("td",{className:"table-cell",children:He(j.terminal_code)}),o.jsx("td",{className:"table-cell",children:j.authorization_date}),o.jsx("td",{className:"table-cell",children:S(j.entry_or_exit)}),o.jsx("td",{className:"table-cell max-w-[200px] truncate",title:j.motivo,children:j.motivo}),o.jsx("td",{className:"table-cell",children:w(j.auth_status)}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[j.auth_status==="PENDIENTE"&&o.jsx("button",{onClick:()=>c({type:"edit",record:j}),className:"btn btn-ghost btn-icon",title:"Editar",children:o.jsx(G,{name:"clipboard",size:16})}),a&&j.auth_status==="PENDIENTE"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>c({type:"authorize",record:j}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:o.jsx(G,{name:"check-circle",size:16})}),o.jsx("button",{onClick:()=>c({type:"reject",record:j}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:o.jsx(G,{name:"x",size:16})})]})]})})]},j.id))})]})}),(l.type==="create"||l.type==="edit")&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),o.jsxs("div",{className:"relative w-full max-w-3xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-xl font-bold",children:l.type==="create"?"Nueva Solicitud":"Editar Solicitud"}),o.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:o.jsx(G,{name:"x",size:24})})]}),o.jsx(xQ,{initialData:l.type==="edit"?{...l.record,cargo:l.record.cargo??"",turno:l.record.turno??"",horario:l.record.horario??""}:void 0,onSubmit:l.type==="create"?b:m,onCancel:()=>c({type:"none"}),isLoading:f.isPending||h.isPending})]})]}),l.type==="authorize"&&o.jsx(ii,{mode:"authorize",itemName:l.record.nombre,onConfirm:y,onCancel:()=>c({type:"none"}),isLoading:p.isPending}),l.type==="reject"&&o.jsx(ii,{mode:"reject",itemName:l.record.nombre,onConfirm:_,onCancel:()=>c({type:"none"}),isLoading:v.isPending})]})},Px=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],bQ=["Lun","Mar","Mi","Jue","Vie","Sb","Dom"],wQ=({isOpen:e,onClose:t,vacaciones:r})=>{const n=new Date,[a,i]=T.useState(n.getFullYear()),[s,l]=T.useState(n.getMonth()),[c,u]=T.useState(null),[d,f]=T.useState("todos"),[h,p]=T.useState("todos"),v=T.useMemo(()=>{const E=new Set;return r.forEach(N=>E.add(N.cargo)),Array.from(E).sort()},[r]),g=T.useMemo(()=>r.filter(E=>!(d!=="todos"&&E.terminal_code!==d||h!=="todos"&&E.cargo!==h)),[r,d,h]),x=T.useMemo(()=>{const E=new Date(a,s,1),A=new Date(a,s+1,0).getDate();let C=E.getDay()-1;C<0&&(C=6);const D=[];for(let P=0;P<C;P++)D.push(null);for(let P=1;P<=A;P++)D.push(P);return D},[a,s]),b=E=>{const N=`${a}-${String(s+1).padStart(2,"0")}-${String(E).padStart(2,"0")}`;return g.filter(A=>N>=A.start_date&&N<=A.end_date)},m=c?b(c):[],y=()=>{s===0?(l(11),i(a-1)):l(s-1),u(null)},_=()=>{s===11?(l(0),i(a+1)):l(s+1),u(null)},w=()=>{i(n.getFullYear()),l(n.getMonth()),u(n.getDate())};if(!e)return null;const S=E=>E===n.getDate()&&s===n.getMonth()&&a===n.getFullYear(),j=E=>E%7===5||E%7===6;return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),o.jsxs("div",{className:"relative w-full max-w-5xl bg-white rounded-2xl shadow-2xl max-h-[90vh] overflow-hidden animate-scale-in",children:[o.jsxs("div",{className:"bg-gradient-to-r from-brand-600 to-brand-700 text-white p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-3",children:[o.jsx(G,{name:"calendar",size:28}),"Calendario de Vacaciones"]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:o.jsx(G,{name:"x",size:24})})]}),o.jsxs("div",{className:"flex flex-wrap gap-4",children:[o.jsxs("div",{className:"flex-1 min-w-[180px]",children:[o.jsx("label",{className:"text-white/70 text-xs font-medium block mb-1",children:"Terminal"}),o.jsxs("select",{className:"w-full px-3 py-2 rounded-lg bg-white/20 text-white border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50",value:d,onChange:E=>f(E.target.value),children:[o.jsx("option",{value:"todos",className:"text-slate-800",children:"Todos los terminales"}),Kn.map(E=>o.jsx("option",{value:E.value,className:"text-slate-800",children:E.label},E.value))]})]}),o.jsxs("div",{className:"flex-1 min-w-[180px]",children:[o.jsx("label",{className:"text-white/70 text-xs font-medium block mb-1",children:"Cargo"}),o.jsxs("select",{className:"w-full px-3 py-2 rounded-lg bg-white/20 text-white border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50",value:h,onChange:E=>p(E.target.value),children:[o.jsx("option",{value:"todos",className:"text-slate-800",children:"Todos los cargos"}),v.map(E=>o.jsx("option",{value:E,className:"text-slate-800",children:E},E))]})]})]})]}),o.jsxs("div",{className:"flex flex-col lg:flex-row",children:[o.jsxs("div",{className:"flex-1 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("button",{onClick:y,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsx(G,{name:"chevron-right",size:24,className:"rotate-180"})}),o.jsxs("div",{className:"text-center",children:[o.jsxs("h3",{className:"text-xl font-bold text-slate-800",children:[Px[s]," ",a]}),o.jsx("button",{onClick:w,className:"text-sm text-brand-600 hover:text-brand-700 font-medium mt-1",children:"Ir a hoy"})]}),o.jsx("button",{onClick:_,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsx(G,{name:"chevron-right",size:24})})]}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:bQ.map((E,N)=>o.jsx("div",{className:`text-center text-sm font-semibold py-2 ${N>=5?"text-slate-400":"text-slate-600"}`,children:E},E))}),o.jsx("div",{className:"grid grid-cols-7 gap-1",children:x.map((E,N)=>{if(E===null)return o.jsx("div",{className:"h-16"},`empty-${N}`);const A=b(E),C=A.length>0,D=c===E,P=S(E),H=j(N);return o.jsxs("button",{onClick:()=>u(E),className:`
                                            h-16 rounded-lg border-2 transition-all text-left p-1 relative
                                            ${D?"border-brand-500 bg-brand-50 shadow-md":"border-transparent"}
                                            ${P?"ring-2 ring-brand-400 ring-offset-1":""}
                                            ${H?"bg-slate-50":"bg-white"}
                                            ${C?"hover:border-brand-300":"hover:bg-slate-50"}
                                        `,children:[o.jsx("span",{className:`
                                            text-sm font-semibold
                                            ${P?"text-brand-600":H?"text-slate-400":"text-slate-700"}
                                        `,children:E}),C&&o.jsxs("div",{className:"mt-1 space-y-0.5",children:[A.slice(0,2).map((V,ae)=>o.jsx("div",{className:"text-[10px] bg-amber-100 text-amber-800 rounded px-1 truncate font-medium",title:`${V.nombre} - ${V.cargo}`,children:V.nombre.split(" ")[0]},ae)),A.length>2&&o.jsxs("div",{className:"text-[10px] text-amber-600 font-medium px-1",children:["+",A.length-2," ms"]})]})]},E)})}),o.jsxs("div",{className:"flex items-center gap-6 mt-6 text-sm text-slate-600",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 bg-amber-100 rounded border border-amber-200"}),o.jsx("span",{children:"Con vacaciones"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 bg-slate-50 rounded border border-slate-200"}),o.jsx("span",{children:"Fin de semana"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 rounded ring-2 ring-brand-400 ring-offset-1"}),o.jsx("span",{children:"Hoy"})]})]})]}),o.jsxs("div",{className:"lg:w-80 border-t lg:border-t-0 lg:border-l border-slate-200 bg-slate-50 p-6",children:[o.jsxs("h4",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[o.jsx(G,{name:"users",size:18}),c?o.jsxs(o.Fragment,{children:["Vacaciones: ",c," ",Px[s]]}):o.jsx(o.Fragment,{children:"Selecciona un da"})]}),c===null?o.jsxs("div",{className:"text-center py-8 text-slate-400",children:[o.jsx(G,{name:"calendar",size:48,className:"mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"Haz clic en un da para ver quin est de vacaciones"})]}):m.length===0?o.jsxs("div",{className:"text-center py-8 text-slate-400",children:[o.jsx(G,{name:"check-circle",size:48,className:"mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"Sin vacaciones registradas para este da"})]}):o.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:m.map((E,N)=>o.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200 shadow-sm",children:[o.jsx("div",{className:"font-semibold text-slate-800",children:E.nombre}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(G,{name:"tag",size:14,className:"text-slate-400"}),E.cargo]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(G,{name:"building",size:14,className:"text-slate-400"}),Ws[E.terminal_code]||E.terminal_code]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(G,{name:"clock",size:14,className:"text-slate-400"}),E.turno]})]}),o.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-100 text-xs text-slate-500",children:[E.start_date,"  ",E.end_date,o.jsxs("span",{className:"ml-2 font-medium text-brand-600",children:["(",E.business_days," das hbiles)"]})]})]},N))}),g.length>0&&o.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-200",children:[o.jsxs("div",{className:"text-xs text-slate-500 uppercase font-semibold mb-2",children:["Resumen ",Px[s]]}),o.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[o.jsx("div",{className:"text-2xl font-bold text-brand-600",children:g.filter(E=>{const N=`${a}-${String(s+1).padStart(2,"0")}-01`,A=`${a}-${String(s+1).padStart(2,"0")}-31`;return E.end_date>=N&&E.start_date<=A}).length}),o.jsx("div",{className:"text-sm text-slate-600",children:"personas con vacaciones"})]})]})]})]})]})]})},_Q=({initialData:e,onSubmit:t,onCancel:r,isLoading:n})=>{const a=$e(E=>E.context),i=uR(a),[s,l]=T.useState(""),[c,u]=T.useState(null),[d,f]=T.useState(!1),[h,p]=T.useState({rut:"",nombre:"",cargo:"",terminal_code:"",turno:"",start_date:"",end_date:"",return_date:"",conflict_authorized:!1}),[v,g]=T.useState(null),[x,b]=T.useState(!1),m=T.useMemo(()=>!h.start_date||!h.end_date?0:Y_(h.start_date,h.end_date),[h.start_date,h.end_date]),y=T.useMemo(()=>!h.start_date||!h.end_date?0:X_(h.start_date,h.end_date),[h.start_date,h.end_date]);T.useEffect(()=>{e&&(p({rut:e.rut,nombre:e.nombre,cargo:e.cargo,terminal_code:e.terminal_code,turno:e.turno,start_date:e.start_date,end_date:e.end_date,return_date:e.return_date,conflict_authorized:e.conflict_authorized}),l(Kt(e.rut)))},[e]);const _=T.useMemo(()=>{if(!s||!i.data)return[];const E=eo(s).toLowerCase();return i.data.filter(N=>N.status==="ACTIVO").filter(N=>N.rut.toLowerCase().includes(E)||N.nombre.toLowerCase().includes(E)).slice(0,8)},[s,i.data]);T.useEffect(()=>{(async()=>{if(!h.cargo||!h.terminal_code||!h.turno||!h.start_date||!h.end_date){g(null);return}b(!0);try{const N=await xR(h.cargo,h.terminal_code,h.turno,h.start_date,h.end_date,e==null?void 0:e.rut);g(N)}catch(N){console.error("Error checking conflicts:",N)}finally{b(!1)}})()},[h.cargo,h.terminal_code,h.turno,h.start_date,h.end_date,e==null?void 0:e.rut]),T.useEffect(()=>{if(h.end_date){const E=new Date(h.end_date+"T12:00:00");for(E.setDate(E.getDate()+1);E.getDay()===0||E.getDay()===6;)E.setDate(E.getDate()+1);p(N=>({...N,return_date:E.toISOString().split("T")[0]}))}},[h.end_date]);const w=E=>{u(E),l(Kt(E.rut)),p(N=>({...N,rut:E.rut,nombre:E.nombre,cargo:E.cargo,terminal_code:E.terminal_code,turno:E.turno})),f(!1)},S=async E=>{E.preventDefault(),await t(h)},j=h.rut&&h.start_date&&h.end_date&&h.return_date&&(!(v!=null&&v.hasConflict)||h.conflict_authorized);return o.jsxs("form",{onSubmit:S,className:"space-y-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx("label",{className:"label",children:"Buscar Trabajador por RUT"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",className:"input pr-10",placeholder:"Ingrese RUT o nombre...",value:s,onChange:E=>{l(E.target.value),f(!0)},onFocus:()=>f(!0)}),o.jsx(G,{name:"search",size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"})]}),d&&_.length>0&&o.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:_.map(E=>o.jsx("button",{type:"button",onClick:()=>w(E),className:"w-full px-4 py-3 text-left hover:bg-slate-50 border-b last:border-b-0 border-slate-100",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-slate-800",children:E.nombre}),o.jsx("div",{className:"text-sm text-slate-500 font-mono",children:Kt(E.rut)})]}),o.jsxs("div",{className:"text-right text-sm text-slate-500",children:[o.jsx("div",{children:E.cargo}),o.jsx("div",{children:E.turno})]})]})},E.id))}),d&&s&&_.length===0&&i.data&&o.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg p-4 text-slate-500 text-sm",children:"No se encontraron trabajadores activos"})]}),c&&o.jsx("div",{className:"bg-brand-50 border border-brand-200 rounded-lg p-4",children:o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500 block",children:"Nombre"}),o.jsx("span",{className:"font-semibold text-slate-800",children:c.nombre})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500 block",children:"Cargo"}),o.jsx("span",{className:"font-semibold text-slate-800",children:c.cargo})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500 block",children:"Terminal"}),o.jsx("span",{className:"font-semibold text-slate-800",children:Ws[c.terminal_code]||c.terminal_code})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500 block",children:"Turno"}),o.jsx("span",{className:"font-semibold text-slate-800",children:c.turno})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha Inicio"}),o.jsx("input",{type:"date",className:"input",value:h.start_date,onChange:E=>p(N=>({...N,start_date:E.target.value})),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha Trmino"}),o.jsx("input",{type:"date",className:"input",value:h.end_date,min:h.start_date,onChange:E=>p(N=>({...N,end_date:E.target.value})),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha Vuelta"}),o.jsx("input",{type:"date",className:"input",value:h.return_date,min:h.end_date,onChange:E=>p(N=>({...N,return_date:E.target.value})),required:!0})]})]}),h.start_date&&h.end_date&&o.jsx("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-slate-700",children:m}),o.jsx("div",{className:"text-sm text-slate-500",children:"Das calendario"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-brand-600",children:y}),o.jsx("div",{className:"text-sm text-slate-500",children:"Das a descontar"}),o.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"(sin sbados ni domingos)"})]})]})}),x&&o.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4 text-center text-slate-500",children:[o.jsx(G,{name:"clock",size:20,className:"inline-block mr-2 animate-spin"}),"Verificando disponibilidad..."]}),(v==null?void 0:v.hasConflict)&&!x&&o.jsx("div",{className:"bg-amber-50 border border-amber-300 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(G,{name:"alert-triangle",size:24,className:"text-amber-600 shrink-0 mt-0.5"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-semibold text-amber-800 mb-2",children:"Conflicto de Personal Detectado"}),o.jsxs("p",{className:"text-sm text-amber-700 mb-3",children:["Hay ",v.conflictingVacations.length," persona(s) del mismo cargo, terminal y turno con vacaciones en fechas solapadas."]}),o.jsx("div",{className:"bg-white/50 rounded p-3 mb-3",children:o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-amber-700",children:"Personal total:"}),o.jsx("span",{className:"font-bold ml-2",children:v.totalStaffCount})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-amber-700",children:"Disponibles:"}),o.jsx("span",{className:"font-bold ml-2 text-amber-800",children:v.availableStaffCount})]})]})}),o.jsxs("div",{className:"text-sm text-amber-700 mb-3",children:[o.jsx("strong",{children:"En vacaciones:"}),o.jsx("ul",{className:"mt-1 space-y-1",children:v.conflictingVacations.map((E,N)=>o.jsxs("li",{children:[" ",E.nombre," (",E.start_date," al ",E.end_date,")"]},N))})]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:h.conflict_authorized,onChange:E=>p(N=>({...N,conflict_authorized:E.target.checked})),className:"w-4 h-4 text-amber-600 border-amber-300 rounded focus:ring-amber-500"}),o.jsx("span",{className:"text-sm font-medium text-amber-800",children:"Autorizo esta solicitud a pesar del conflicto"})]})]})]})}),v&&!v.hasConflict&&!x&&h.start_date&&h.end_date&&o.jsxs("div",{className:"bg-green-50 border border-green-300 rounded-lg p-4 flex items-center gap-3",children:[o.jsx(G,{name:"check-circle",size:24,className:"text-green-600"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-green-800",children:"Sin conflictos"}),o.jsxs("span",{className:"text-green-700 text-sm ml-2",children:["(",v.availableStaffCount+1," de ",v.totalStaffCount," disponibles despus de esta solicitud)"]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:!j||n,className:"btn btn-primary",children:n?"Guardando...":e?"Actualizar":"Solicitar Vacaciones"})]})]})},SQ=()=>{const e=$e(E=>E.context),t=$e(E=>E.setContext),r=fr(E=>E.session),n=(r==null?void 0:r.supervisorName)??"",a=Nh(n),[i,s]=T.useState({auth_status:"todos"}),[l,c]=T.useState({type:"none"}),[u,d]=T.useState(!1),f=tQ(e,i),h=Ch("vacaciones",e),p=oQ(),v=fQ(),g=kh(),x=Ph();Rh();const b=[{key:"rut",header:"RUT",value:E=>Kt(E.rut)},{key:"nombre",header:"Nombre",value:E=>E.nombre},{key:"cargo",header:"Cargo",value:E=>E.cargo},{key:"terminal",header:"Terminal",value:E=>He(E.terminal_code)},{key:"turno",header:"Turno",value:E=>E.turno},{key:"start_date",header:"Fecha Inicio",value:E=>E.start_date},{key:"end_date",header:"Fecha Trmino",value:E=>E.end_date},{key:"return_date",header:"Fecha Vuelta",value:E=>E.return_date},{key:"calendar_days",header:"Das Calendario",value:E=>E.calendar_days.toString()},{key:"business_days",header:"Das Hbiles",value:E=>E.business_days.toString()},{key:"has_conflict",header:"Conflicto",value:E=>E.has_conflict?"S":"No"},{key:"auth_status",header:"Estado",value:E=>E.auth_status}],m=async E=>{await p.mutateAsync({values:E,createdBy:n}),c({type:"none"})},y=async E=>{l.type==="edit"&&(await v.mutateAsync({id:l.record.id,values:E}),c({type:"none"}))},_=async()=>{if(l.type!=="authorize")return;const E=l.record;await g.mutateAsync({subsection:"vacaciones",id:E.id,authorizedBy:n,rut:E.rut,nombre:E.nombre,terminal:E.terminal_code,date:E.start_date}),c({type:"none"})},w=async E=>{if(l.type!=="reject"||!E)return;const N=l.record;await x.mutateAsync({subsection:"vacaciones",id:N.id,authorizedBy:n,reason:E,rut:N.rut,nombre:N.nombre,terminal:N.terminal_code,date:N.start_date}),c({type:"none"})},S=E=>{switch(E){case"AUTORIZADO":return o.jsx("span",{className:"badge badge-success",children:E});case"RECHAZADO":return o.jsx("span",{className:"badge badge-danger",children:E});default:return o.jsx("span",{className:"badge badge-warning",children:E})}},j=E=>new Date(E+"T12:00:00").toLocaleDateString("es-CL",{day:"2-digit",month:"short"});return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Xt,{title:"Vacaciones",description:"Gestin inteligente de vacaciones con deteccin de conflictos",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{className:"btn btn-secondary",onClick:()=>d(!0),children:[o.jsx(G,{name:"calendar",size:18})," Calendario"]}),o.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[o.jsx(G,{name:"plus",size:18})," Nueva Solicitud"]}),o.jsx(jr,{onExportView:()=>Je({filename:"vacaciones",sheetName:"Datos",rows:f.data||[],columns:b}),onExportAll:()=>Je({filename:"vacaciones_all",sheetName:"Datos",rows:f.data||[],columns:b})})]})}),o.jsx(Th,{data:h.data,isLoading:h.isLoading}),o.jsxs(An,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:i.auth_status,onChange:E=>s(N=>({...N,auth_status:E.target.value})),children:Oh.map(E=>o.jsx("option",{value:E.value,children:E.label},E.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:E=>s(N=>({...N,search:E.target.value}))})]})]}),f.isLoading&&o.jsx(Gt,{label:"Cargando vacaciones..."}),f.isError&&o.jsx(Sr,{onRetry:()=>f.refetch()}),!f.isLoading&&!f.isError&&o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{className:"table-header-cell",children:"RUT"}),o.jsx("th",{className:"table-header-cell",children:"Nombre"}),o.jsx("th",{className:"table-header-cell",children:"Cargo/Turno"}),o.jsx("th",{className:"table-header-cell",children:"Perodo"}),o.jsx("th",{className:"table-header-cell text-center",children:"Das"}),o.jsx("th",{className:"table-header-cell",children:"Conflicto"}),o.jsx("th",{className:"table-header-cell",children:"Estado"}),o.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:(f.data||[]).length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"table-cell text-center text-slate-500 py-8",children:"No hay solicitudes de vacaciones registradas"})}):(f.data||[]).map(E=>o.jsxs("tr",{className:"table-row",children:[o.jsx("td",{className:"table-cell font-mono text-sm",children:Kt(E.rut)}),o.jsx("td",{className:"table-cell font-medium",children:E.nombre}),o.jsxs("td",{className:"table-cell",children:[o.jsx("div",{className:"text-sm",children:E.cargo}),o.jsx("div",{className:"text-xs text-slate-500",children:E.turno})]}),o.jsxs("td",{className:"table-cell",children:[o.jsxs("div",{className:"text-sm",children:[j(E.start_date)," - ",j(E.end_date)]}),o.jsxs("div",{className:"text-xs text-slate-500",children:["Vuelta: ",j(E.return_date)]})]}),o.jsxs("td",{className:"table-cell text-center",children:[o.jsx("div",{className:"text-lg font-bold text-brand-600",children:E.business_days}),o.jsxs("div",{className:"text-xs text-slate-500",children:[E.calendar_days," cal"]})]}),o.jsx("td",{className:"table-cell",children:E.has_conflict?o.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium ${E.conflict_authorized?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:[o.jsx(G,{name:"alert-triangle",size:12}),E.conflict_authorized?"Autorizado":"Sin autorizar"]}):o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-700",children:[o.jsx(G,{name:"check-circle",size:12}),"Sin conflicto"]})}),o.jsx("td",{className:"table-cell",children:S(E.auth_status)}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[E.auth_status==="PENDIENTE"&&o.jsx("button",{onClick:()=>c({type:"edit",record:E}),className:"btn btn-ghost btn-icon",title:"Editar",children:o.jsx(G,{name:"clipboard",size:16})}),a&&E.auth_status==="PENDIENTE"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>c({type:"authorize",record:E}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:o.jsx(G,{name:"check-circle",size:16})}),o.jsx("button",{onClick:()=>c({type:"reject",record:E}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:o.jsx(G,{name:"x",size:16})})]})]})})]},E.id))})]})}),(l.type==="create"||l.type==="edit")&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),o.jsxs("div",{className:"relative w-full max-w-3xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-xl font-bold",children:l.type==="create"?"Nueva Solicitud de Vacaciones":"Editar Solicitud"}),o.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:o.jsx(G,{name:"x",size:24})})]}),o.jsx(_Q,{initialData:l.type==="edit"?l.record:void 0,onSubmit:l.type==="create"?m:y,onCancel:()=>c({type:"none"}),isLoading:p.isPending||v.isPending})]})]}),l.type==="authorize"&&o.jsx(ii,{mode:"authorize",itemName:l.record.nombre,onConfirm:_,onCancel:()=>c({type:"none"}),isLoading:g.isPending}),l.type==="reject"&&o.jsx(ii,{mode:"reject",itemName:l.record.nombre,onConfirm:w,onCancel:()=>c({type:"none"}),isLoading:x.isPending}),o.jsx(wQ,{isOpen:u,onClose:()=>d(!1),vacaciones:f.data||[]})]})},uN="email_notifications",jQ=({isOpen:e,onClose:t})=>{const[r,n]=T.useState({to:[],cc:[]}),[a,i]=T.useState(!0),[s,l]=T.useState(!1),[c,u]=T.useState(""),[d,f]=T.useState("");T.useEffect(()=>{e&&h()},[e]);const h=async()=>{i(!0);try{const m=await G_(uN);n(m||{to:["isaac.avila@transdev.cl"],cc:[]})}catch(m){console.error("Error loading config:",m),zn("Error","No se pudo cargar la configuracin")}finally{i(!1)}},p=async()=>{l(!0);try{await OY(uN,r,"Configuracin de destinatarios para notificaciones"),Vn("Configuracin guardada","Los correos se enviarn a los nuevos destinatarios"),t()}catch(m){console.error("Error saving config:",m),zn("Error","No se pudo guardar la configuracin")}finally{l(!1)}},v=m=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m),g=m=>{const y=m==="to"?c:d,_=m==="to"?u:f,w=y.trim();if(w){if(!v(w)){zn("Email invlido","Por favor ingresa un correo electrnico vlido");return}if(r[m].includes(w)){zn("Email duplicado","Este correo ya est en la lista");return}n(S=>({...S,[m]:[...S[m],w]})),_("")}},x=(m,y)=>{n(_=>({..._,[m]:_[m].filter(w=>w!==y)}))},b=(m,y)=>{m.key==="Enter"&&(m.preventDefault(),g(y))};return e?o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),o.jsxs("div",{className:"relative w-full max-w-lg card p-6 animate-scale-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6 border-b pb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-brand-100 p-2 rounded-lg text-brand-600",children:o.jsx(G,{name:"settings",size:24})}),o.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Configuracin de Correos"})]}),o.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600",children:o.jsx(G,{name:"x",size:24})})]}),a?o.jsx("div",{className:"py-12 flex justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"label mb-2 flex justify-between",children:[o.jsx("span",{children:"Destinatarios Principales (Para)"}),o.jsx("span",{className:"text-xs font-normal text-slate-500",children:"Reciben el correo directamente"})]}),o.jsxs("div",{className:"flex gap-2 mb-3",children:[o.jsx("input",{type:"email",className:"input flex-1",placeholder:"ejemplo@transdev.cl",value:c,onChange:m=>u(m.target.value),onKeyDown:m=>b(m,"to")}),o.jsx("button",{type:"button",onClick:()=>g("to"),className:"btn btn-secondary px-3",disabled:!c.trim(),children:o.jsx(G,{name:"plus",size:18})})]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 min-h-[60px] border border-slate-200 flex flex-wrap gap-2",children:[r.to.length===0&&o.jsx("span",{className:"text-sm text-slate-400 italic self-center w-full text-center",children:"Sin destinatarios"}),r.to.map(m=>o.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white border border-slate-200 rounded-full text-sm font-medium text-slate-700 shadow-sm",children:[m,o.jsx("button",{onClick:()=>x("to",m),className:"text-slate-400 hover:text-danger-500 ml-1",children:o.jsx(G,{name:"x",size:14})})]},m))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"label mb-2 flex justify-between",children:[o.jsx("span",{children:"En Copia (CC)"}),o.jsx("span",{className:"text-xs font-normal text-slate-500",children:"Reciben una copia"})]}),o.jsxs("div",{className:"flex gap-2 mb-3",children:[o.jsx("input",{type:"email",className:"input flex-1",placeholder:"jefe@transdev.cl",value:d,onChange:m=>f(m.target.value),onKeyDown:m=>b(m,"cc")}),o.jsx("button",{type:"button",onClick:()=>g("cc"),className:"btn btn-secondary px-3",disabled:!d.trim(),children:o.jsx(G,{name:"plus",size:18})})]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 min-h-[60px] border border-slate-200 flex flex-wrap gap-2",children:[r.cc.length===0&&o.jsx("span",{className:"text-sm text-slate-400 italic self-center w-full text-center",children:"Sin copias"}),r.cc.map(m=>o.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white border border-slate-200 rounded-full text-sm font-medium text-slate-700 shadow-sm",children:[m,o.jsx("button",{onClick:()=>x("cc",m),className:"text-slate-400 hover:text-danger-500 ml-1",children:o.jsx(G,{name:"x",size:14})})]},m))]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t mt-4",children:[o.jsx("button",{onClick:t,className:"btn btn-secondary",disabled:s,children:"Cancelar"}),o.jsx("button",{onClick:p,className:"btn btn-primary min-w-[120px]",disabled:s,children:s?"Guardando...":"Guardar Cambios"})]})]})]})]}):null},EQ=[{id:"no-marcaciones",label:"No Marcaciones",icon:"clock"},{id:"sin-credenciales",label:"Sin Credenciales",icon:"key"},{id:"cambios-dia",label:"Cambios de Da",icon:"calendar"},{id:"autorizaciones",label:"Autorizaciones",icon:"check-circle"},{id:"vacaciones",label:"Vacaciones",icon:"sparkles"}],NQ=()=>{const[e,t]=T.useState("no-marcaciones"),[r,n]=T.useState(!1),a=()=>{switch(e){case"no-marcaciones":return o.jsx(hQ,{});case"sin-credenciales":return o.jsx(mQ,{});case"cambios-dia":return o.jsx(vQ,{});case"autorizaciones":return o.jsx(yQ,{});case"vacaciones":return o.jsx(SQ,{});default:return null}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 border-b border-slate-200 pb-4",children:[o.jsx("div",{className:"flex flex-wrap gap-2",children:EQ.map(i=>o.jsxs("button",{onClick:()=>t(i.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${e===i.id?"bg-brand-600 text-white shadow-md":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[o.jsx(G,{name:i.icon,size:18}),o.jsx("span",{className:"hidden sm:inline",children:i.label})]},i.id))}),o.jsxs("button",{onClick:()=>n(!0),className:"btn btn-secondary text-sm flex items-center gap-2 shrink-0",children:[o.jsx(G,{name:"settings",size:16}),o.jsx("span",{children:"Configurar Correos"})]})]}),a(),o.jsx(jQ,{isOpen:r,onClose:()=>n(!1)})]})},TQ=[{id:"ai-1",area:"interior",responsable:"Equipo Aseo 1",fecha:"2023-12-04T08:00:00Z",estado:"pendiente",observaciones:"Pendiente zona comedor",terminal:"EL_ROBLE"},{id:"ae-1",area:"exterior",responsable:"Equipo Aseo 2",fecha:"2023-12-03T15:00:00Z",estado:"completado",observaciones:"Patio listo",terminal:"LA_REINA"},{id:"ar-1",area:"rodillo",responsable:"Equipo Rodillo",fecha:"2023-12-02T17:00:00Z",estado:"pendiente",terminal:"EL_SALTO"}],AQ=e=>Eh(TQ.filter(t=>t.area===e),(t,r)=>r!=null&&r.estado&&r.estado!=="todos"?t.estado===r.estado:!0),J_=({area:e,title:t})=>{var h;const r=$e(p=>p.context),n=$e(p=>p.setContext),[a,i]=T.useState({estado:"todos"}),s=T.useMemo(()=>AQ(e),[e]),l=rt({queryKey:["aseo",e,r,a],queryFn:()=>s.list({terminalContext:r,filters:a,scope:"view"})}),c=T.useMemo(()=>[{key:"responsable",header:"Responsable"},{key:"fecha",header:"Fecha",render:p=>tr(p.fecha),value:p=>tr(p.fecha)},{key:"estado",header:"Estado",render:p=>o.jsx("span",{className:"badge capitalize",children:p.estado}),value:p=>p.estado},{key:"observaciones",header:"Observaciones",render:p=>p.observaciones??"",value:p=>p.observaciones??""},{key:"terminal",header:"Terminal",render:p=>He(p.terminal),value:p=>He(p.terminal)}],[]),u=c.map(p=>({key:p.key,header:p.header,value:v=>p.value?p.value(v):v[p.key]})),d=()=>{l.data&&Je({filename:`aseo_${e}_vista`,sheetName:`Aseo ${e}`,rows:l.data,columns:u})},f=async()=>{const p=await s.list({terminalContext:r,scope:"all"});Je({filename:`aseo_${e}_completo`,sheetName:`Aseo ${e}`,rows:p,columns:u})};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Xt,{title:`Aseo - ${t}`,description:"Control de aseo por rea",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"btn btn-primary",children:"Nuevo registro"}),o.jsx(jr,{onExportView:d,onExportAll:f})]})}),o.jsx(An,{terminalContext:r,onTerminalChange:n,children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsxs("select",{className:"input",value:a.estado,onChange:p=>i({estado:p.target.value}),children:[o.jsx("option",{value:"todos",children:"Todos"}),o.jsx("option",{value:"pendiente",children:"Pendiente"}),o.jsx("option",{value:"completado",children:"Completado"})]})]})}),l.isLoading&&o.jsx(Gt,{}),l.isError&&o.jsx(Sr,{onRetry:l.refetch}),!l.isLoading&&!l.isError&&o.jsxs(o.Fragment,{children:[!((h=l.data)!=null&&h.length)&&o.jsx(ci,{description:"Sin registros"}),l.data&&l.data.length>0&&o.jsx(li,{columns:c,rows:l.data})]})]})},OQ=()=>o.jsx(J_,{area:"interior",title:"Interior"}),CQ=()=>o.jsx(J_,{area:"exterior",title:"Exterior"}),kQ=()=>o.jsx(J_,{area:"rodillo",title:"Rodillo"});/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PQ=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),RQ=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),dN=e=>{const t=RQ(e);return t.charAt(0).toUpperCase()+t.slice(1)},jR=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),IQ=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DQ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MQ=T.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:s,...l},c)=>T.createElement("svg",{ref:c,...DQ,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:jR("lucide",a),...!i&&!IQ(l)&&{"aria-hidden":"true"},...l},[...s.map(([u,d])=>T.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=(e,t)=>{const r=T.forwardRef(({className:n,...a},i)=>T.createElement(MQ,{ref:i,iconNode:t,className:jR(`lucide-${PQ(dN(e))}`,`lucide-${e}`,n),...a}));return r.displayName=dN(e),r};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LQ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],$Q=kt("calendar",LQ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],BQ=kt("circle-alert",FQ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UQ=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ER=kt("clock",UQ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zQ=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Ef=kt("credit-card",zQ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qQ=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],NR=kt("dollar-sign",qQ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WQ=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],HQ=kt("download",WQ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VQ=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],KQ=kt("eye",VQ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GQ=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],XQ=kt("file-text",GQ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YQ=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],QQ=kt("funnel",YQ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JQ=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],TR=kt("mail",JQ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZQ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],AR=kt("plus",ZQ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eJ=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],tJ=kt("printer",eJ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rJ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],OR=kt("rotate-ccw",rJ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nJ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],aJ=kt("save",nJ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iJ=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],sJ=kt("search",iJ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oJ=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],lJ=kt("send",oJ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cJ=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],uJ=kt("settings",cJ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dJ=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],fJ=kt("square-pen",dJ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hJ=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],pJ=kt("trash-2",hJ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mJ=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],gJ=kt("trending-up",mJ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vJ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ug=kt("triangle-alert",vJ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xJ=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],yJ=kt("upload",xJ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bJ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],wJ=kt("user",bJ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _J=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],zi=kt("x",_J),Xs=["El Roble","La Reina","Maria Angelica"],CR=[{value:"PERDIDA",label:"Perdida"},{value:"DETERIORO",label:"Deterioro"}],SJ=[{value:"ASIGNADA",label:"Asignada"},{value:"RECUPERADA",label:"Recuperada"},{value:"CERRADA",label:"Cerrada"},{value:"CANCELADA",label:"Cancelada"}],jJ=[{value:"LIBRE",label:"Libre"},{value:"ASIGNADA",label:"Asignada"},{value:"INACTIVA",label:"Inactiva"}],sd=({title:e,value:t,subtitle:r,icon:n,colorClass:a="bg-slate-50 text-slate-600"})=>o.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:e}),o.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-1",children:t}),r&&o.jsx("p",{className:"text-xs text-slate-500 mt-1",children:r})]}),o.jsx("div",{className:`p-2 rounded-lg ${a}`,children:n})]})}),EJ=({kpis:e,isLoading:t})=>{if(t)return o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:Array.from({length:5}).map((a,i)=>o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm animate-pulse",children:[o.jsx("div",{className:"h-4 bg-slate-200 rounded w-24 mb-2"}),o.jsx("div",{className:"h-8 bg-slate-200 rounded w-16"})]},i))});const r=Xs.reduce((a,i)=>a+(e.availableByTerminal[i]||0),0),n=Xs.map(a=>`${a.split(" ")[0]}: ${e.availableByTerminal[a]||0}`).join(" | ");return o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[o.jsx(sd,{title:"Disponibles",value:r,subtitle:n,icon:o.jsx(Ef,{className:"w-5 h-5"}),colorClass:"bg-emerald-50 text-emerald-600"}),o.jsx(sd,{title:"Prestamos Activos",value:e.activeLoans,icon:o.jsx(ER,{className:"w-5 h-5"}),colorClass:"bg-blue-50 text-blue-600"}),o.jsx(sd,{title:"Atrasados (+7d)",value:e.overdueLoans,icon:o.jsx(Ug,{className:"w-5 h-5"}),colorClass:e.overdueLoans>0?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-400"}),o.jsx(sd,{title:"Tiempo Promedio",value:`${e.avgReturnDays} dias`,subtitle:"Ultimos 30 dias",icon:o.jsx(gJ,{className:"w-5 h-5"}),colorClass:"bg-indigo-50 text-indigo-600"}),o.jsx(sd,{title:"Descuentos",value:`$${e.totalDiscounts.toLocaleString("es-CL")}`,icon:o.jsx(NR,{className:"w-5 h-5"}),colorClass:"bg-violet-50 text-violet-600"})]})};function kR(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=kR(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function qe(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=kR(e))&&(n&&(n+=" "),n+=t);return n}var NJ=Array.isArray,On=NJ,TJ=typeof Kh=="object"&&Kh&&Kh.Object===Object&&Kh,PR=TJ,AJ=PR,OJ=typeof self=="object"&&self&&self.Object===Object&&self,CJ=AJ||OJ||Function("return this")(),ui=CJ,kJ=ui,PJ=kJ.Symbol,Ih=PJ,fN=Ih,RR=Object.prototype,RJ=RR.hasOwnProperty,IJ=RR.toString,od=fN?fN.toStringTag:void 0;function DJ(e){var t=RJ.call(e,od),r=e[od];try{e[od]=void 0;var n=!0}catch{}var a=IJ.call(e);return n&&(t?e[od]=r:delete e[od]),a}var MJ=DJ,LJ=Object.prototype,$J=LJ.toString;function FJ(e){return $J.call(e)}var BJ=FJ,hN=Ih,UJ=MJ,zJ=BJ,qJ="[object Null]",WJ="[object Undefined]",pN=hN?hN.toStringTag:void 0;function HJ(e){return e==null?e===void 0?WJ:qJ:pN&&pN in Object(e)?UJ(e):zJ(e)}var Zi=HJ;function VJ(e){return e!=null&&typeof e=="object"}var es=VJ,KJ=Zi,GJ=es,XJ="[object Symbol]";function YJ(e){return typeof e=="symbol"||GJ(e)&&KJ(e)==XJ}var Du=YJ,QJ=On,JJ=Du,ZJ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,eZ=/^\w*$/;function tZ(e,t){if(QJ(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||JJ(e)?!0:eZ.test(e)||!ZJ.test(e)||t!=null&&e in Object(t)}var Z_=tZ;function rZ(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ro=rZ;const Mu=it(ro);var nZ=Zi,aZ=ro,iZ="[object AsyncFunction]",sZ="[object Function]",oZ="[object GeneratorFunction]",lZ="[object Proxy]";function cZ(e){if(!aZ(e))return!1;var t=nZ(e);return t==sZ||t==oZ||t==iZ||t==lZ}var e2=cZ;const Me=it(e2);var uZ=ui,dZ=uZ["__core-js_shared__"],fZ=dZ,Rx=fZ,mN=function(){var e=/[^.]+$/.exec(Rx&&Rx.keys&&Rx.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function hZ(e){return!!mN&&mN in e}var pZ=hZ,mZ=Function.prototype,gZ=mZ.toString;function vZ(e){if(e!=null){try{return gZ.call(e)}catch{}try{return e+""}catch{}}return""}var IR=vZ,xZ=e2,yZ=pZ,bZ=ro,wZ=IR,_Z=/[\\^$.*+?()[\]{}|]/g,SZ=/^\[object .+?Constructor\]$/,jZ=Function.prototype,EZ=Object.prototype,NZ=jZ.toString,TZ=EZ.hasOwnProperty,AZ=RegExp("^"+NZ.call(TZ).replace(_Z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function OZ(e){if(!bZ(e)||yZ(e))return!1;var t=xZ(e)?AZ:SZ;return t.test(wZ(e))}var CZ=OZ;function kZ(e,t){return e==null?void 0:e[t]}var PZ=kZ,RZ=CZ,IZ=PZ;function DZ(e,t){var r=IZ(e,t);return RZ(r)?r:void 0}var El=DZ,MZ=El,LZ=MZ(Object,"create"),zg=LZ,gN=zg;function $Z(){this.__data__=gN?gN(null):{},this.size=0}var FZ=$Z;function BZ(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var UZ=BZ,zZ=zg,qZ="__lodash_hash_undefined__",WZ=Object.prototype,HZ=WZ.hasOwnProperty;function VZ(e){var t=this.__data__;if(zZ){var r=t[e];return r===qZ?void 0:r}return HZ.call(t,e)?t[e]:void 0}var KZ=VZ,GZ=zg,XZ=Object.prototype,YZ=XZ.hasOwnProperty;function QZ(e){var t=this.__data__;return GZ?t[e]!==void 0:YZ.call(t,e)}var JZ=QZ,ZZ=zg,eee="__lodash_hash_undefined__";function tee(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ZZ&&t===void 0?eee:t,this}var ree=tee,nee=FZ,aee=UZ,iee=KZ,see=JZ,oee=ree;function Lu(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Lu.prototype.clear=nee;Lu.prototype.delete=aee;Lu.prototype.get=iee;Lu.prototype.has=see;Lu.prototype.set=oee;var lee=Lu;function cee(){this.__data__=[],this.size=0}var uee=cee;function dee(e,t){return e===t||e!==e&&t!==t}var t2=dee,fee=t2;function hee(e,t){for(var r=e.length;r--;)if(fee(e[r][0],t))return r;return-1}var qg=hee,pee=qg,mee=Array.prototype,gee=mee.splice;function vee(e){var t=this.__data__,r=pee(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():gee.call(t,r,1),--this.size,!0}var xee=vee,yee=qg;function bee(e){var t=this.__data__,r=yee(t,e);return r<0?void 0:t[r][1]}var wee=bee,_ee=qg;function See(e){return _ee(this.__data__,e)>-1}var jee=See,Eee=qg;function Nee(e,t){var r=this.__data__,n=Eee(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Tee=Nee,Aee=uee,Oee=xee,Cee=wee,kee=jee,Pee=Tee;function $u(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}$u.prototype.clear=Aee;$u.prototype.delete=Oee;$u.prototype.get=Cee;$u.prototype.has=kee;$u.prototype.set=Pee;var Wg=$u,Ree=El,Iee=ui,Dee=Ree(Iee,"Map"),r2=Dee,vN=lee,Mee=Wg,Lee=r2;function $ee(){this.size=0,this.__data__={hash:new vN,map:new(Lee||Mee),string:new vN}}var Fee=$ee;function Bee(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Uee=Bee,zee=Uee;function qee(e,t){var r=e.__data__;return zee(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Hg=qee,Wee=Hg;function Hee(e){var t=Wee(this,e).delete(e);return this.size-=t?1:0,t}var Vee=Hee,Kee=Hg;function Gee(e){return Kee(this,e).get(e)}var Xee=Gee,Yee=Hg;function Qee(e){return Yee(this,e).has(e)}var Jee=Qee,Zee=Hg;function ete(e,t){var r=Zee(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var tte=ete,rte=Fee,nte=Vee,ate=Xee,ite=Jee,ste=tte;function Fu(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Fu.prototype.clear=rte;Fu.prototype.delete=nte;Fu.prototype.get=ate;Fu.prototype.has=ite;Fu.prototype.set=ste;var n2=Fu,DR=n2,ote="Expected a function";function a2(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(ote);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var s=e.apply(this,n);return r.cache=i.set(a,s)||i,s};return r.cache=new(a2.Cache||DR),r}a2.Cache=DR;var MR=a2;const lte=it(MR);var cte=MR,ute=500;function dte(e){var t=cte(e,function(n){return r.size===ute&&r.clear(),n}),r=t.cache;return t}var fte=dte,hte=fte,pte=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mte=/\\(\\)?/g,gte=hte(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(pte,function(r,n,a,i){t.push(a?i.replace(mte,"$1"):n||r)}),t}),vte=gte;function xte(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var i2=xte,xN=Ih,yte=i2,bte=On,wte=Du,yN=xN?xN.prototype:void 0,bN=yN?yN.toString:void 0;function LR(e){if(typeof e=="string")return e;if(bte(e))return yte(e,LR)+"";if(wte(e))return bN?bN.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var _te=LR,Ste=_te;function jte(e){return e==null?"":Ste(e)}var $R=jte,Ete=On,Nte=Z_,Tte=vte,Ate=$R;function Ote(e,t){return Ete(e)?e:Nte(e,t)?[e]:Tte(Ate(e))}var FR=Ote,Cte=Du;function kte(e){if(typeof e=="string"||Cte(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Vg=kte,Pte=FR,Rte=Vg;function Ite(e,t){t=Pte(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Rte(t[r++])];return r&&r==n?e:void 0}var s2=Ite,Dte=s2;function Mte(e,t,r){var n=e==null?void 0:Dte(e,t);return n===void 0?r:n}var BR=Mte;const Wn=it(BR);function Lte(e){return e==null}var $te=Lte;const We=it($te);var Fte=Zi,Bte=On,Ute=es,zte="[object String]";function qte(e){return typeof e=="string"||!Bte(e)&&Ute(e)&&Fte(e)==zte}var Wte=qte;const ll=it(Wte);var UR={exports:{}},ht={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o2=Symbol.for("react.element"),l2=Symbol.for("react.portal"),Kg=Symbol.for("react.fragment"),Gg=Symbol.for("react.strict_mode"),Xg=Symbol.for("react.profiler"),Yg=Symbol.for("react.provider"),Qg=Symbol.for("react.context"),Hte=Symbol.for("react.server_context"),Jg=Symbol.for("react.forward_ref"),Zg=Symbol.for("react.suspense"),ev=Symbol.for("react.suspense_list"),tv=Symbol.for("react.memo"),rv=Symbol.for("react.lazy"),Vte=Symbol.for("react.offscreen"),zR;zR=Symbol.for("react.module.reference");function ga(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case o2:switch(e=e.type,e){case Kg:case Xg:case Gg:case Zg:case ev:return e;default:switch(e=e&&e.$$typeof,e){case Hte:case Qg:case Jg:case rv:case tv:case Yg:return e;default:return t}}case l2:return t}}}ht.ContextConsumer=Qg;ht.ContextProvider=Yg;ht.Element=o2;ht.ForwardRef=Jg;ht.Fragment=Kg;ht.Lazy=rv;ht.Memo=tv;ht.Portal=l2;ht.Profiler=Xg;ht.StrictMode=Gg;ht.Suspense=Zg;ht.SuspenseList=ev;ht.isAsyncMode=function(){return!1};ht.isConcurrentMode=function(){return!1};ht.isContextConsumer=function(e){return ga(e)===Qg};ht.isContextProvider=function(e){return ga(e)===Yg};ht.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===o2};ht.isForwardRef=function(e){return ga(e)===Jg};ht.isFragment=function(e){return ga(e)===Kg};ht.isLazy=function(e){return ga(e)===rv};ht.isMemo=function(e){return ga(e)===tv};ht.isPortal=function(e){return ga(e)===l2};ht.isProfiler=function(e){return ga(e)===Xg};ht.isStrictMode=function(e){return ga(e)===Gg};ht.isSuspense=function(e){return ga(e)===Zg};ht.isSuspenseList=function(e){return ga(e)===ev};ht.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Kg||e===Xg||e===Gg||e===Zg||e===ev||e===Vte||typeof e=="object"&&e!==null&&(e.$$typeof===rv||e.$$typeof===tv||e.$$typeof===Yg||e.$$typeof===Qg||e.$$typeof===Jg||e.$$typeof===zR||e.getModuleId!==void 0)};ht.typeOf=ga;UR.exports=ht;var Kte=UR.exports,Gte=Zi,Xte=es,Yte="[object Number]";function Qte(e){return typeof e=="number"||Xte(e)&&Gte(e)==Yte}var qR=Qte;const Jte=it(qR);var Zte=qR;function ere(e){return Zte(e)&&e!=+e}var tre=ere;const Dh=it(tre);var sn=function(t){return t===0?0:t>0?1:-1},Io=function(t){return ll(t)&&t.indexOf("%")===t.length-1},ve=function(t){return Jte(t)&&!Dh(t)},rre=function(t){return We(t)},dr=function(t){return ve(t)||ll(t)},nre=0,Mh=function(t){var r=++nre;return"".concat(t||"").concat(r)},on=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ve(t)&&!ll(t))return n;var i;if(Io(t)){var s=t.indexOf("%");i=r*parseFloat(t.slice(0,s))/100}else i=+t;return Dh(i)&&(i=n),a&&i>r&&(i=r),i},ps=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},are=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},ls=function(t,r){return ve(t)&&ve(r)?function(n){return t+n*(r-t)}:function(){return r}};function B1(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Wn(n,t))===r})}var ire=function(t,r){return ve(t)&&ve(r)?t-r:ll(t)&&ll(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function bc(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function U1(e){"@babel/helpers - typeof";return U1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U1(e)}var sre=["viewBox","children"],ore=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],wN=["points","pathLength"],Ix={svg:sre,polygon:wN,polyline:wN},c2=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],sm=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(T.isValidElement(t)&&(n=t.props),!Mu(n))return null;var a={};return Object.keys(n).forEach(function(i){c2.includes(i)&&(a[i]=r||function(s){return n[i](n,s)})}),a},lre=function(t,r,n){return function(a){return t(r,n,a),null}},cl=function(t,r,n){if(!Mu(t)||U1(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var s=t[i];c2.includes(i)&&typeof s=="function"&&(a||(a={}),a[i]=lre(s,r,n))}),a},cre=["children"],ure=["children"];function _N(e,t){if(e==null)return{};var r=dre(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dre(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var SN={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ki=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},jN=null,Dx=null,u2=function e(t){if(t===jN&&Array.isArray(Dx))return Dx;var r=[];return T.Children.forEach(t,function(n){We(n)||(Kte.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),Dx=r,jN=t,r};function da(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return ki(a)}):n=[ki(t)],u2(e).forEach(function(a){var i=Wn(a,"type.displayName")||Wn(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function In(e,t){var r=da(e,t);return r&&r[0]}var EN=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!ve(n)||n<=0||!ve(a)||a<=0)},fre=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],hre=function(t){return t&&t.type&&ll(t.type)&&fre.indexOf(t.type)>=0},pre=function(t,r,n,a){var i,s=(i=Ix==null?void 0:Ix[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Me(t)&&(a&&s.includes(r)||ore.includes(r))||n&&c2.includes(r)},De=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(T.isValidElement(t)&&(a=t.props),!Mu(a))return null;var i={};return Object.keys(a).forEach(function(s){var l;pre((l=a)===null||l===void 0?void 0:l[s],s,r,n)&&(i[s]=a[s])}),i},z1=function e(t,r){if(t===r)return!0;var n=T.Children.count(t);if(n!==T.Children.count(r))return!1;if(n===0)return!0;if(n===1)return NN(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],s=r[a];if(Array.isArray(i)||Array.isArray(s)){if(!e(i,s))return!1}else if(!NN(i,s))return!1}return!0},NN=function(t,r){if(We(t)&&We(r))return!0;if(!We(t)&&!We(r)){var n=t.props||{},a=n.children,i=_N(n,cre),s=r.props||{},l=s.children,c=_N(s,ure);return a&&l?bc(i,c)&&z1(a,l):!a&&!l?bc(i,c):!1}return!1},TN=function(t,r){var n=[],a={};return u2(t).forEach(function(i,s){if(hre(i))n.push(i);else if(i){var l=ki(i.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var f=u(i,l,s);n.push(f),a[l]=!0}}}),n},mre=function(t){var r=t&&t.type;return r&&SN[r]?SN[r]:null},gre=function(t,r){return u2(r).indexOf(t)},vre=["children","width","height","viewBox","className","style","title","desc"];function q1(){return q1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q1.apply(this,arguments)}function xre(e,t){if(e==null)return{};var r=yre(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function yre(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function W1(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,s=e.style,l=e.title,c=e.desc,u=xre(e,vre),d=a||{width:r,height:n,x:0,y:0},f=qe("recharts-surface",i);return z.createElement("svg",q1({},De(u,!0,"svg"),{className:f,width:r,height:n,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),z.createElement("title",null,l),z.createElement("desc",null,c),t)}var bre=["children","className"];function H1(){return H1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H1.apply(this,arguments)}function wre(e,t){if(e==null)return{};var r=_re(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _re(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var ct=z.forwardRef(function(e,t){var r=e.children,n=e.className,a=wre(e,bre),i=qe("recharts-layer",n);return z.createElement("g",H1({className:i},De(a,!0),{ref:t}),r)}),$a=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function Sre(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var jre=Sre,Ere=jre;function Nre(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:Ere(e,t,r)}var Tre=Nre,Are="\\ud800-\\udfff",Ore="\\u0300-\\u036f",Cre="\\ufe20-\\ufe2f",kre="\\u20d0-\\u20ff",Pre=Ore+Cre+kre,Rre="\\ufe0e\\ufe0f",Ire="\\u200d",Dre=RegExp("["+Ire+Are+Pre+Rre+"]");function Mre(e){return Dre.test(e)}var WR=Mre;function Lre(e){return e.split("")}var $re=Lre,HR="\\ud800-\\udfff",Fre="\\u0300-\\u036f",Bre="\\ufe20-\\ufe2f",Ure="\\u20d0-\\u20ff",zre=Fre+Bre+Ure,qre="\\ufe0e\\ufe0f",Wre="["+HR+"]",V1="["+zre+"]",K1="\\ud83c[\\udffb-\\udfff]",Hre="(?:"+V1+"|"+K1+")",VR="[^"+HR+"]",KR="(?:\\ud83c[\\udde6-\\uddff]){2}",GR="[\\ud800-\\udbff][\\udc00-\\udfff]",Vre="\\u200d",XR=Hre+"?",YR="["+qre+"]?",Kre="(?:"+Vre+"(?:"+[VR,KR,GR].join("|")+")"+YR+XR+")*",Gre=YR+XR+Kre,Xre="(?:"+[VR+V1+"?",V1,KR,GR,Wre].join("|")+")",Yre=RegExp(K1+"(?="+K1+")|"+Xre+Gre,"g");function Qre(e){return e.match(Yre)||[]}var Jre=Qre,Zre=$re,ene=WR,tne=Jre;function rne(e){return ene(e)?tne(e):Zre(e)}var nne=rne,ane=Tre,ine=WR,sne=nne,one=$R;function lne(e){return function(t){t=one(t);var r=ine(t)?sne(t):void 0,n=r?r[0]:t.charAt(0),a=r?ane(r,1).join(""):t.slice(1);return n[e]()+a}}var cne=lne,une=cne,dne=une("toUpperCase"),fne=dne;const nv=it(fne);function yt(e){return function(){return e}}const QR=Math.cos,om=Math.sin,Ua=Math.sqrt,lm=Math.PI,av=2*lm,G1=Math.PI,X1=2*G1,wo=1e-6,hne=X1-wo;function JR(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function pne(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return JR;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class mne{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?JR:pne(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,s){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,l=this._y1,c=n-t,u=a-r,d=s-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>wo)if(!(Math.abs(f*c-u*d)>wo)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-s,v=a-l,g=c*c+u*u,x=p*p+v*v,b=Math.sqrt(g),m=Math.sqrt(h),y=i*Math.tan((G1-Math.acos((g+h-x)/(2*b*m)))/2),_=y/m,w=y/b;Math.abs(_-1)>wo&&this._append`L${t+_*d},${r+_*f}`,this._append`A${i},${i},0,0,${+(f*p>d*v)},${this._x1=t+w*c},${this._y1=r+w*u}`}}arc(t,r,n,a,i,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^s,h=s?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>wo||Math.abs(this._y1-d)>wo)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%X1+X1),h>hne?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>wo&&this._append`A${n},${n},0,${+(h>=G1)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function d2(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new mne(t)}function f2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ZR(e){this._context=e}ZR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function iv(e){return new ZR(e)}function eI(e){return e[0]}function tI(e){return e[1]}function rI(e,t){var r=yt(!0),n=null,a=iv,i=null,s=d2(l);e=typeof e=="function"?e:e===void 0?eI:yt(e),t=typeof t=="function"?t:t===void 0?tI:yt(t);function l(c){var u,d=(c=f2(c)).length,f,h=!1,p;for(n==null&&(i=a(p=s())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,c),+t(f,u,c));if(p)return i=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:yt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:yt(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:yt(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function P0(e,t,r){var n=null,a=yt(!0),i=null,s=iv,l=null,c=d2(u);e=typeof e=="function"?e:e===void 0?eI:yt(+e),t=typeof t=="function"?t:yt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?tI:yt(+r);function u(f){var h,p,v,g=(f=f2(f)).length,x,b=!1,m,y=new Array(g),_=new Array(g);for(i==null&&(l=s(m=c())),h=0;h<=g;++h){if(!(h<g&&a(x=f[h],h,f))===b)if(b=!b)p=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=h-1;v>=p;--v)l.point(y[v],_[v]);l.lineEnd(),l.areaEnd()}b&&(y[h]=+e(x,h,f),_[h]=+t(x,h,f),l.point(n?+n(x,h,f):y[h],r?+r(x,h,f):_[h]))}if(m)return l=null,m+""||null}function d(){return rI().defined(a).curve(s).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:yt(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:yt(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:yt(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:yt(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:yt(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:yt(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:yt(!!f),u):a},u.curve=function(f){return arguments.length?(s=f,i!=null&&(l=s(i)),u):s},u.context=function(f){return arguments.length?(f==null?i=l=null:l=s(i=f),u):i},u}class nI{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function gne(e){return new nI(e,!0)}function vne(e){return new nI(e,!1)}const h2={draw(e,t){const r=Ua(t/lm);e.moveTo(r,0),e.arc(0,0,r,0,av)}},xne={draw(e,t){const r=Ua(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},aI=Ua(1/3),yne=aI*2,bne={draw(e,t){const r=Ua(t/yne),n=r*aI;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},wne={draw(e,t){const r=Ua(t),n=-r/2;e.rect(n,n,r,r)}},_ne=.8908130915292852,iI=om(lm/10)/om(7*lm/10),Sne=om(av/10)*iI,jne=-QR(av/10)*iI,Ene={draw(e,t){const r=Ua(t*_ne),n=Sne*r,a=jne*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const s=av*i/5,l=QR(s),c=om(s);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},Mx=Ua(3),Nne={draw(e,t){const r=-Ua(t/(Mx*3));e.moveTo(0,r*2),e.lineTo(-Mx*r,-r),e.lineTo(Mx*r,-r),e.closePath()}},Jn=-.5,Zn=Ua(3)/2,Y1=1/Ua(12),Tne=(Y1/2+1)*3,Ane={draw(e,t){const r=Ua(t/Tne),n=r/2,a=r*Y1,i=n,s=r*Y1+r,l=-i,c=s;e.moveTo(n,a),e.lineTo(i,s),e.lineTo(l,c),e.lineTo(Jn*n-Zn*a,Zn*n+Jn*a),e.lineTo(Jn*i-Zn*s,Zn*i+Jn*s),e.lineTo(Jn*l-Zn*c,Zn*l+Jn*c),e.lineTo(Jn*n+Zn*a,Jn*a-Zn*n),e.lineTo(Jn*i+Zn*s,Jn*s-Zn*i),e.lineTo(Jn*l+Zn*c,Jn*c-Zn*l),e.closePath()}};function One(e,t){let r=null,n=d2(a);e=typeof e=="function"?e:yt(e||h2),t=typeof t=="function"?t:yt(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:yt(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:yt(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function cm(){}function um(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function sI(e){this._context=e}sI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:um(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:um(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Cne(e){return new sI(e)}function oI(e){this._context=e}oI.prototype={areaStart:cm,areaEnd:cm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:um(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kne(e){return new oI(e)}function lI(e){this._context=e}lI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:um(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Pne(e){return new lI(e)}function cI(e){this._context=e}cI.prototype={areaStart:cm,areaEnd:cm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Rne(e){return new cI(e)}function AN(e){return e<0?-1:1}function ON(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),s=(r-e._y1)/(a||n<0&&-0),l=(i*a+s*n)/(n+a);return(AN(i)+AN(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(l))||0}function CN(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Lx(e,t,r){var n=e._x0,a=e._y0,i=e._x1,s=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,s-l*r,i,s)}function dm(e){this._context=e}dm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Lx(this,this._t0,CN(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Lx(this,CN(this,r=ON(this,e,t)),r);break;default:Lx(this,this._t0,r=ON(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function uI(e){this._context=new dI(e)}(uI.prototype=Object.create(dm.prototype)).point=function(e,t){dm.prototype.point.call(this,t,e)};function dI(e){this._context=e}dI.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function Ine(e){return new dm(e)}function Dne(e){return new uI(e)}function fI(e){this._context=e}fI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=kN(e),a=kN(t),i=0,s=1;s<r;++i,++s)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function kN(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),s=new Array(r);for(a[0]=0,i[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,s[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,s[t]-=n*s[t-1];for(a[r-1]=s[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(s[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Mne(e){return new fI(e)}function sv(e,t){this._context=e,this._t=t}sv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Lne(e){return new sv(e,.5)}function $ne(e){return new sv(e,0)}function Fne(e){return new sv(e,1)}function Qc(e,t){if((s=e.length)>1)for(var r=1,n,a,i=e[t[0]],s,l=i.length;r<s;++r)for(a=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Q1(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Bne(e,t){return e[t]}function Une(e){const t=[];return t.key=e,t}function zne(){var e=yt([]),t=Q1,r=Qc,n=Bne;function a(i){var s=Array.from(e.apply(this,arguments),Une),l,c=s.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(s[l][u]=[0,+n(f,s[l].key,u,i)]).data=f;for(l=0,d=f2(t(s));l<c;++l)s[d[l]].index=l;return r(s,d),s}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:yt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:yt(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?Q1:typeof i=="function"?i:yt(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Qc,a):r},a}function qne(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,s;a<i;++a){for(s=r=0;r<n;++r)s+=e[r][a][1]||0;if(s)for(r=0;r<n;++r)e[r][a][1]/=s}Qc(e,t)}}function Wne(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var s=0,l=0;s<a;++s)l+=e[s][r][1]||0;n[r][1]+=n[r][0]=-l/2}Qc(e,t)}}function Hne(e,t){if(!(!((s=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,s;n<i;++n){for(var l=0,c=0,u=0;l<s;++l){for(var d=e[t[l]],f=d[n][1]||0,h=d[n-1][1]||0,p=(f-h)/2,v=0;v<l;++v){var g=e[t[v]],x=g[n][1]||0,b=g[n-1][1]||0;p+=x-b}c+=f,u+=p*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Qc(e,t)}}function Nf(e){"@babel/helpers - typeof";return Nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nf(e)}var Vne=["type","size","sizeType"];function J1(){return J1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J1.apply(this,arguments)}function PN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function RN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PN(Object(r),!0).forEach(function(n){Kne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kne(e,t,r){return t=Gne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gne(e){var t=Xne(e,"string");return Nf(t)=="symbol"?t:t+""}function Xne(e,t){if(Nf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yne(e,t){if(e==null)return{};var r=Qne(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Qne(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var hI={symbolCircle:h2,symbolCross:xne,symbolDiamond:bne,symbolSquare:wne,symbolStar:Ene,symbolTriangle:Nne,symbolWye:Ane},Jne=Math.PI/180,Zne=function(t){var r="symbol".concat(nv(t));return hI[r]||h2},eae=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*Jne;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},tae=function(t,r){hI["symbol".concat(nv(t))]=r},p2=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,s=t.sizeType,l=s===void 0?"area":s,c=Yne(t,Vne),u=RN(RN({},c),{},{type:n,size:i,sizeType:l}),d=function(){var x=Zne(n),b=One().type(x).size(eae(i,l,n));return b()},f=u.className,h=u.cx,p=u.cy,v=De(u,!0);return h===+h&&p===+p&&i===+i?z.createElement("path",J1({},v,{className:qe("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:d()})):null};p2.registerSymbol=tae;function Jc(e){"@babel/helpers - typeof";return Jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jc(e)}function Z1(){return Z1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z1.apply(this,arguments)}function IN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IN(Object(r),!0).forEach(function(n){Tf(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mI(n.key),n)}}function iae(e,t,r){return t&&aae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sae(e,t,r){return t=fm(t),oae(e,pI()?Reflect.construct(t,r||[],fm(e).constructor):t.apply(e,r))}function oae(e,t){if(t&&(Jc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lae(e)}function lae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pI=function(){return!!e})()}function fm(e){return fm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fm(e)}function cae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eb(e,t)}function eb(e,t){return eb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},eb(e,t)}function Tf(e,t,r){return t=mI(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mI(e){var t=uae(e,"string");return Jc(t)=="symbol"?t:t+""}function uae(e,t){if(Jc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Jc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ea=32,m2=function(e){function t(){return nae(this,t),sae(this,t,arguments)}return cae(t,e),iae(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=ea/2,s=ea/6,l=ea/3,c=n.inactive?a:n.color;if(n.type==="plainline")return z.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:ea,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return z.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(ea,"M").concat(2*l,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return z.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(ea/8,"h").concat(ea,"v").concat(ea*3/4,"h").concat(-ea,"z"),className:"recharts-legend-icon"});if(z.isValidElement(n.legendIcon)){var u=rae({},n);return delete u.legendIcon,z.cloneElement(n.legendIcon,u)}return z.createElement(p2,{fill:c,cx:i,cy:i,size:ea,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,s=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:ea,height:ea},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,v){var g=p.formatter||c,x=qe(Tf(Tf({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",p.inactive));if(p.type==="none")return null;var b=Me(p.value)?null:p.value;$a(!Me(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var m=p.inactive?u:p.color;return z.createElement("li",Z1({className:x,style:f,key:"legend-item-".concat(v)},cl(n.props,p,v)),z.createElement(W1,{width:s,height:s,viewBox:d,style:h},n.renderIcon(p)),z.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},g?g(b,p,v):b))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,s=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?s:"left"};return z.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(T.PureComponent);Tf(m2,"displayName","Legend");Tf(m2,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var dae=Wg;function fae(){this.__data__=new dae,this.size=0}var hae=fae;function pae(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var mae=pae;function gae(e){return this.__data__.get(e)}var vae=gae;function xae(e){return this.__data__.has(e)}var yae=xae,bae=Wg,wae=r2,_ae=n2,Sae=200;function jae(e,t){var r=this.__data__;if(r instanceof bae){var n=r.__data__;if(!wae||n.length<Sae-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new _ae(n)}return r.set(e,t),this.size=r.size,this}var Eae=jae,Nae=Wg,Tae=hae,Aae=mae,Oae=vae,Cae=yae,kae=Eae;function Bu(e){var t=this.__data__=new Nae(e);this.size=t.size}Bu.prototype.clear=Tae;Bu.prototype.delete=Aae;Bu.prototype.get=Oae;Bu.prototype.has=Cae;Bu.prototype.set=kae;var gI=Bu,Pae="__lodash_hash_undefined__";function Rae(e){return this.__data__.set(e,Pae),this}var Iae=Rae;function Dae(e){return this.__data__.has(e)}var Mae=Dae,Lae=n2,$ae=Iae,Fae=Mae;function hm(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Lae;++t<r;)this.add(e[t])}hm.prototype.add=hm.prototype.push=$ae;hm.prototype.has=Fae;var vI=hm;function Bae(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var xI=Bae;function Uae(e,t){return e.has(t)}var yI=Uae,zae=vI,qae=xI,Wae=yI,Hae=1,Vae=2;function Kae(e,t,r,n,a,i){var s=r&Hae,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var f=-1,h=!0,p=r&Vae?new zae:void 0;for(i.set(e,t),i.set(t,e);++f<l;){var v=e[f],g=t[f];if(n)var x=s?n(g,v,f,t,e,i):n(v,g,f,e,t,i);if(x!==void 0){if(x)continue;h=!1;break}if(p){if(!qae(t,function(b,m){if(!Wae(p,m)&&(v===b||a(v,b,r,n,i)))return p.push(m)})){h=!1;break}}else if(!(v===g||a(v,g,r,n,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var bI=Kae,Gae=ui,Xae=Gae.Uint8Array,Yae=Xae;function Qae(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var Jae=Qae;function Zae(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var g2=Zae,DN=Ih,MN=Yae,eie=t2,tie=bI,rie=Jae,nie=g2,aie=1,iie=2,sie="[object Boolean]",oie="[object Date]",lie="[object Error]",cie="[object Map]",uie="[object Number]",die="[object RegExp]",fie="[object Set]",hie="[object String]",pie="[object Symbol]",mie="[object ArrayBuffer]",gie="[object DataView]",LN=DN?DN.prototype:void 0,$x=LN?LN.valueOf:void 0;function vie(e,t,r,n,a,i,s){switch(r){case gie:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case mie:return!(e.byteLength!=t.byteLength||!i(new MN(e),new MN(t)));case sie:case oie:case uie:return eie(+e,+t);case lie:return e.name==t.name&&e.message==t.message;case die:case hie:return e==t+"";case cie:var l=rie;case fie:var c=n&aie;if(l||(l=nie),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;n|=iie,s.set(e,t);var d=tie(l(e),l(t),n,a,i,s);return s.delete(e),d;case pie:if($x)return $x.call(e)==$x.call(t)}return!1}var xie=vie;function yie(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var wI=yie,bie=wI,wie=On;function _ie(e,t,r){var n=t(e);return wie(e)?n:bie(n,r(e))}var Sie=_ie;function jie(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[a++]=s)}return i}var Eie=jie;function Nie(){return[]}var Tie=Nie,Aie=Eie,Oie=Tie,Cie=Object.prototype,kie=Cie.propertyIsEnumerable,$N=Object.getOwnPropertySymbols,Pie=$N?function(e){return e==null?[]:(e=Object(e),Aie($N(e),function(t){return kie.call(e,t)}))}:Oie,Rie=Pie;function Iie(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Die=Iie,Mie=Zi,Lie=es,$ie="[object Arguments]";function Fie(e){return Lie(e)&&Mie(e)==$ie}var Bie=Fie,FN=Bie,Uie=es,_I=Object.prototype,zie=_I.hasOwnProperty,qie=_I.propertyIsEnumerable,Wie=FN(function(){return arguments}())?FN:function(e){return Uie(e)&&zie.call(e,"callee")&&!qie.call(e,"callee")},v2=Wie,pm={exports:{}};function Hie(){return!1}var Vie=Hie;pm.exports;(function(e,t){var r=ui,n=Vie,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===a,l=s?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(pm,pm.exports);var SI=pm.exports,Kie=9007199254740991,Gie=/^(?:0|[1-9]\d*)$/;function Xie(e,t){var r=typeof e;return t=t??Kie,!!t&&(r=="number"||r!="symbol"&&Gie.test(e))&&e>-1&&e%1==0&&e<t}var x2=Xie,Yie=9007199254740991;function Qie(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Yie}var y2=Qie,Jie=Zi,Zie=y2,ese=es,tse="[object Arguments]",rse="[object Array]",nse="[object Boolean]",ase="[object Date]",ise="[object Error]",sse="[object Function]",ose="[object Map]",lse="[object Number]",cse="[object Object]",use="[object RegExp]",dse="[object Set]",fse="[object String]",hse="[object WeakMap]",pse="[object ArrayBuffer]",mse="[object DataView]",gse="[object Float32Array]",vse="[object Float64Array]",xse="[object Int8Array]",yse="[object Int16Array]",bse="[object Int32Array]",wse="[object Uint8Array]",_se="[object Uint8ClampedArray]",Sse="[object Uint16Array]",jse="[object Uint32Array]",jt={};jt[gse]=jt[vse]=jt[xse]=jt[yse]=jt[bse]=jt[wse]=jt[_se]=jt[Sse]=jt[jse]=!0;jt[tse]=jt[rse]=jt[pse]=jt[nse]=jt[mse]=jt[ase]=jt[ise]=jt[sse]=jt[ose]=jt[lse]=jt[cse]=jt[use]=jt[dse]=jt[fse]=jt[hse]=!1;function Ese(e){return ese(e)&&Zie(e.length)&&!!jt[Jie(e)]}var Nse=Ese;function Tse(e){return function(t){return e(t)}}var jI=Tse,mm={exports:{}};mm.exports;(function(e,t){var r=PR,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,s=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();e.exports=l})(mm,mm.exports);var Ase=mm.exports,Ose=Nse,Cse=jI,BN=Ase,UN=BN&&BN.isTypedArray,kse=UN?Cse(UN):Ose,EI=kse,Pse=Die,Rse=v2,Ise=On,Dse=SI,Mse=x2,Lse=EI,$se=Object.prototype,Fse=$se.hasOwnProperty;function Bse(e,t){var r=Ise(e),n=!r&&Rse(e),a=!r&&!n&&Dse(e),i=!r&&!n&&!a&&Lse(e),s=r||n||a||i,l=s?Pse(e.length,String):[],c=l.length;for(var u in e)(t||Fse.call(e,u))&&!(s&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Mse(u,c)))&&l.push(u);return l}var Use=Bse,zse=Object.prototype;function qse(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||zse;return e===r}var Wse=qse;function Hse(e,t){return function(r){return e(t(r))}}var NI=Hse,Vse=NI,Kse=Vse(Object.keys,Object),Gse=Kse,Xse=Wse,Yse=Gse,Qse=Object.prototype,Jse=Qse.hasOwnProperty;function Zse(e){if(!Xse(e))return Yse(e);var t=[];for(var r in Object(e))Jse.call(e,r)&&r!="constructor"&&t.push(r);return t}var eoe=Zse,toe=e2,roe=y2;function noe(e){return e!=null&&roe(e.length)&&!toe(e)}var Lh=noe,aoe=Use,ioe=eoe,soe=Lh;function ooe(e){return soe(e)?aoe(e):ioe(e)}var ov=ooe,loe=Sie,coe=Rie,uoe=ov;function doe(e){return loe(e,uoe,coe)}var foe=doe,zN=foe,hoe=1,poe=Object.prototype,moe=poe.hasOwnProperty;function goe(e,t,r,n,a,i){var s=r&hoe,l=zN(e),c=l.length,u=zN(t),d=u.length;if(c!=d&&!s)return!1;for(var f=c;f--;){var h=l[f];if(!(s?h in t:moe.call(t,h)))return!1}var p=i.get(e),v=i.get(t);if(p&&v)return p==t&&v==e;var g=!0;i.set(e,t),i.set(t,e);for(var x=s;++f<c;){h=l[f];var b=e[h],m=t[h];if(n)var y=s?n(m,b,h,t,e,i):n(b,m,h,e,t,i);if(!(y===void 0?b===m||a(b,m,r,n,i):y)){g=!1;break}x||(x=h=="constructor")}if(g&&!x){var _=e.constructor,w=t.constructor;_!=w&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof w=="function"&&w instanceof w)&&(g=!1)}return i.delete(e),i.delete(t),g}var voe=goe,xoe=El,yoe=ui,boe=xoe(yoe,"DataView"),woe=boe,_oe=El,Soe=ui,joe=_oe(Soe,"Promise"),Eoe=joe,Noe=El,Toe=ui,Aoe=Noe(Toe,"Set"),TI=Aoe,Ooe=El,Coe=ui,koe=Ooe(Coe,"WeakMap"),Poe=koe,tb=woe,rb=r2,nb=Eoe,ab=TI,ib=Poe,AI=Zi,Uu=IR,qN="[object Map]",Roe="[object Object]",WN="[object Promise]",HN="[object Set]",VN="[object WeakMap]",KN="[object DataView]",Ioe=Uu(tb),Doe=Uu(rb),Moe=Uu(nb),Loe=Uu(ab),$oe=Uu(ib),_o=AI;(tb&&_o(new tb(new ArrayBuffer(1)))!=KN||rb&&_o(new rb)!=qN||nb&&_o(nb.resolve())!=WN||ab&&_o(new ab)!=HN||ib&&_o(new ib)!=VN)&&(_o=function(e){var t=AI(e),r=t==Roe?e.constructor:void 0,n=r?Uu(r):"";if(n)switch(n){case Ioe:return KN;case Doe:return qN;case Moe:return WN;case Loe:return HN;case $oe:return VN}return t});var Foe=_o,Fx=gI,Boe=bI,Uoe=xie,zoe=voe,GN=Foe,XN=On,YN=SI,qoe=EI,Woe=1,QN="[object Arguments]",JN="[object Array]",R0="[object Object]",Hoe=Object.prototype,ZN=Hoe.hasOwnProperty;function Voe(e,t,r,n,a,i){var s=XN(e),l=XN(t),c=s?JN:GN(e),u=l?JN:GN(t);c=c==QN?R0:c,u=u==QN?R0:u;var d=c==R0,f=u==R0,h=c==u;if(h&&YN(e)){if(!YN(t))return!1;s=!0,d=!1}if(h&&!d)return i||(i=new Fx),s||qoe(e)?Boe(e,t,r,n,a,i):Uoe(e,t,c,r,n,a,i);if(!(r&Woe)){var p=d&&ZN.call(e,"__wrapped__"),v=f&&ZN.call(t,"__wrapped__");if(p||v){var g=p?e.value():e,x=v?t.value():t;return i||(i=new Fx),a(g,x,r,n,i)}}return h?(i||(i=new Fx),zoe(e,t,r,n,a,i)):!1}var Koe=Voe,Goe=Koe,eT=es;function OI(e,t,r,n,a){return e===t?!0:e==null||t==null||!eT(e)&&!eT(t)?e!==e&&t!==t:Goe(e,t,r,n,OI,a)}var b2=OI,Xoe=gI,Yoe=b2,Qoe=1,Joe=2;function Zoe(e,t,r,n){var a=r.length,i=a,s=!n;if(e==null)return!i;for(e=Object(e);a--;){var l=r[a];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=r[a];var c=l[0],u=e[c],d=l[1];if(s&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new Xoe;if(n)var h=n(u,d,c,e,t,f);if(!(h===void 0?Yoe(d,u,Qoe|Joe,n,f):h))return!1}}return!0}var ele=Zoe,tle=ro;function rle(e){return e===e&&!tle(e)}var CI=rle,nle=CI,ale=ov;function ile(e){for(var t=ale(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,nle(a)]}return t}var sle=ile;function ole(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var kI=ole,lle=ele,cle=sle,ule=kI;function dle(e){var t=cle(e);return t.length==1&&t[0][2]?ule(t[0][0],t[0][1]):function(r){return r===e||lle(r,e,t)}}var fle=dle;function hle(e,t){return e!=null&&t in Object(e)}var ple=hle,mle=FR,gle=v2,vle=On,xle=x2,yle=y2,ble=Vg;function wle(e,t,r){t=mle(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var s=ble(t[n]);if(!(i=e!=null&&r(e,s)))break;e=e[s]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&yle(a)&&xle(s,a)&&(vle(e)||gle(e)))}var _le=wle,Sle=ple,jle=_le;function Ele(e,t){return e!=null&&jle(e,t,Sle)}var Nle=Ele,Tle=b2,Ale=BR,Ole=Nle,Cle=Z_,kle=CI,Ple=kI,Rle=Vg,Ile=1,Dle=2;function Mle(e,t){return Cle(e)&&kle(t)?Ple(Rle(e),t):function(r){var n=Ale(r,e);return n===void 0&&n===t?Ole(r,e):Tle(t,n,Ile|Dle)}}var Lle=Mle;function $le(e){return e}var zu=$le;function Fle(e){return function(t){return t==null?void 0:t[e]}}var Ble=Fle,Ule=s2;function zle(e){return function(t){return Ule(t,e)}}var qle=zle,Wle=Ble,Hle=qle,Vle=Z_,Kle=Vg;function Gle(e){return Vle(e)?Wle(Kle(e)):Hle(e)}var Xle=Gle,Yle=fle,Qle=Lle,Jle=zu,Zle=On,ece=Xle;function tce(e){return typeof e=="function"?e:e==null?Jle:typeof e=="object"?Zle(e)?Qle(e[0],e[1]):Yle(e):ece(e)}var di=tce;function rce(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var PI=rce;function nce(e){return e!==e}var ace=nce;function ice(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var sce=ice,oce=PI,lce=ace,cce=sce;function uce(e,t,r){return t===t?cce(e,t,r):oce(e,lce,r)}var dce=uce,fce=dce;function hce(e,t){var r=e==null?0:e.length;return!!r&&fce(e,t,0)>-1}var pce=hce;function mce(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var gce=mce;function vce(){}var xce=vce,Bx=TI,yce=xce,bce=g2,wce=1/0,_ce=Bx&&1/bce(new Bx([,-0]))[1]==wce?function(e){return new Bx(e)}:yce,Sce=_ce,jce=vI,Ece=pce,Nce=gce,Tce=yI,Ace=Sce,Oce=g2,Cce=200;function kce(e,t,r){var n=-1,a=Ece,i=e.length,s=!0,l=[],c=l;if(r)s=!1,a=Nce;else if(i>=Cce){var u=t?null:Ace(e);if(u)return Oce(u);s=!1,a=Tce,c=new jce}else c=t?[]:l;e:for(;++n<i;){var d=e[n],f=t?t(d):d;if(d=r||d!==0?d:0,s&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),l.push(d)}else a(c,f,r)||(c!==l&&c.push(f),l.push(d))}return l}var Pce=kce,Rce=di,Ice=Pce;function Dce(e,t){return e&&e.length?Ice(e,Rce(t)):[]}var Mce=Dce;const tT=it(Mce);function RI(e,t,r){return t===!0?tT(e,r):Me(t)?tT(e,t):e}function Zc(e){"@babel/helpers - typeof";return Zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zc(e)}var Lce=["ref"];function rT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rT(Object(r),!0).forEach(function(n){lv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DI(n.key),n)}}function Fce(e,t,r){return t&&nT(e.prototype,t),r&&nT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bce(e,t,r){return t=gm(t),Uce(e,II()?Reflect.construct(t,r||[],gm(e).constructor):t.apply(e,r))}function Uce(e,t){if(t&&(Zc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zce(e)}function zce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function II(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(II=function(){return!!e})()}function gm(e){return gm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gm(e)}function qce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sb(e,t)}function sb(e,t){return sb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},sb(e,t)}function lv(e,t,r){return t=DI(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DI(e){var t=Wce(e,"string");return Zc(t)=="symbol"?t:t+""}function Wce(e,t){if(Zc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Hce(e,t){if(e==null)return{};var r=Vce(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Vce(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Kce(e){return e.value}function Gce(e,t){if(z.isValidElement(e))return z.cloneElement(e,t);if(typeof e=="function")return z.createElement(e,t);t.ref;var r=Hce(t,Lce);return z.createElement(m2,r)}var aT=1,Pi=function(e){function t(){var r;$ce(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Bce(this,t,[].concat(a)),lv(r,"lastBoundingBox",{width:-1,height:-1}),r}return qce(t,e),Fce(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>aT||Math.abs(a.height-this.lastBoundingBox.height)>aT)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?hi({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,s=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(s==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();f={left:((u||0)-p.width)/2}}else f=s==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();h={top:((d||0)-v.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return hi(hi({},f),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,s=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=hi(hi({position:"absolute",width:s||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return z.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){n.wrapperNode=p}},Gce(i,hi(hi({},this.props),{},{payload:RI(d,u,Kce)})))}}],[{key:"getWithHeight",value:function(n,a){var i=hi(hi({},this.defaultProps),n.props),s=i.layout;return s==="vertical"&&ve(n.props.height)?{height:n.props.height}:s==="horizontal"?{width:n.props.width||a}:null}}])}(T.PureComponent);lv(Pi,"displayName","Legend");lv(Pi,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var iT=Ih,Xce=v2,Yce=On,sT=iT?iT.isConcatSpreadable:void 0;function Qce(e){return Yce(e)||Xce(e)||!!(sT&&e&&e[sT])}var Jce=Qce,Zce=wI,eue=Jce;function MI(e,t,r,n,a){var i=-1,s=e.length;for(r||(r=eue),a||(a=[]);++i<s;){var l=e[i];t>0&&r(l)?t>1?MI(l,t-1,r,n,a):Zce(a,l):n||(a[a.length]=l)}return a}var LI=MI;function tue(e){return function(t,r,n){for(var a=-1,i=Object(t),s=n(t),l=s.length;l--;){var c=s[e?l:++a];if(r(i[c],c,i)===!1)break}return t}}var rue=tue,nue=rue,aue=nue(),iue=aue,sue=iue,oue=ov;function lue(e,t){return e&&sue(e,t,oue)}var $I=lue,cue=Lh;function uue(e,t){return function(r,n){if(r==null)return r;if(!cue(r))return e(r,n);for(var a=r.length,i=t?a:-1,s=Object(r);(t?i--:++i<a)&&n(s[i],i,s)!==!1;);return r}}var due=uue,fue=$I,hue=due,pue=hue(fue),w2=pue,mue=w2,gue=Lh;function vue(e,t){var r=-1,n=gue(e)?Array(e.length):[];return mue(e,function(a,i,s){n[++r]=t(a,i,s)}),n}var FI=vue;function xue(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var yue=xue,oT=Du;function bue(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=oT(e),s=t!==void 0,l=t===null,c=t===t,u=oT(t);if(!l&&!u&&!i&&e>t||i&&s&&c&&!l&&!u||n&&s&&c||!r&&c||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||l&&r&&a||!s&&a||!c)return-1}return 0}var wue=bue,_ue=wue;function Sue(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,s=a.length,l=r.length;++n<s;){var c=_ue(a[n],i[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var jue=Sue,Ux=i2,Eue=s2,Nue=di,Tue=FI,Aue=yue,Oue=jI,Cue=jue,kue=zu,Pue=On;function Rue(e,t,r){t.length?t=Ux(t,function(i){return Pue(i)?function(s){return Eue(s,i.length===1?i[0]:i)}:i}):t=[kue];var n=-1;t=Ux(t,Oue(Nue));var a=Tue(e,function(i,s,l){var c=Ux(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return Aue(a,function(i,s){return Cue(i,s,r)})}var Iue=Rue;function Due(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Mue=Due,Lue=Mue,lT=Math.max;function $ue(e,t,r){return t=lT(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=lT(n.length-t,0),s=Array(i);++a<i;)s[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(s),Lue(e,this,l)}}var Fue=$ue;function Bue(e){return function(){return e}}var Uue=Bue,zue=El,que=function(){try{var e=zue(Object,"defineProperty");return e({},"",{}),e}catch{}}(),BI=que,Wue=Uue,cT=BI,Hue=zu,Vue=cT?function(e,t){return cT(e,"toString",{configurable:!0,enumerable:!1,value:Wue(t),writable:!0})}:Hue,Kue=Vue,Gue=800,Xue=16,Yue=Date.now;function Que(e){var t=0,r=0;return function(){var n=Yue(),a=Xue-(n-r);if(r=n,a>0){if(++t>=Gue)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Jue=Que,Zue=Kue,ede=Jue,tde=ede(Zue),rde=tde,nde=zu,ade=Fue,ide=rde;function sde(e,t){return ide(ade(e,t,nde),e+"")}var ode=sde,lde=t2,cde=Lh,ude=x2,dde=ro;function fde(e,t,r){if(!dde(r))return!1;var n=typeof t;return(n=="number"?cde(r)&&ude(t,r.length):n=="string"&&t in r)?lde(r[t],e):!1}var cv=fde,hde=LI,pde=Iue,mde=ode,uT=cv,gde=mde(function(e,t){if(e==null)return[];var r=t.length;return r>1&&uT(e,t[0],t[1])?t=[]:r>2&&uT(t[0],t[1],t[2])&&(t=[t[0]]),pde(e,hde(t,1),[])}),vde=gde;const _2=it(vde);function Af(e){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Af(e)}function ob(){return ob=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ob.apply(this,arguments)}function xde(e,t){return _de(e)||wde(e,t)||bde(e,t)||yde()}function yde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bde(e,t){if(e){if(typeof e=="string")return dT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dT(e,t)}}function dT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wde(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function _de(e){if(Array.isArray(e))return e}function fT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fT(Object(r),!0).forEach(function(n){Sde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sde(e,t,r){return t=jde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jde(e){var t=Ede(e,"string");return Af(t)=="symbol"?t:t+""}function Ede(e,t){if(Af(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nde(e){return Array.isArray(e)&&dr(e[0])&&dr(e[1])?e.join(" ~ "):e}var Tde=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,s=t.itemStyle,l=s===void 0?{}:s,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,h=t.itemSorter,p=t.wrapperClassName,v=t.labelClassName,g=t.label,x=t.labelFormatter,b=t.accessibilityLayer,m=b===void 0?!1:b,y=function(){if(d&&d.length){var D={padding:0,margin:0},P=(h?_2(d,h):d).map(function(H,V){if(H.type==="none")return null;var ae=zx({display:"block",paddingTop:4,paddingBottom:4,color:H.color||"#000"},l),oe=H.formatter||f||Nde,X=H.value,re=H.name,ue=X,me=re;if(oe&&ue!=null&&me!=null){var R=oe(X,re,H,V,d);if(Array.isArray(R)){var W=xde(R,2);ue=W[0],me=W[1]}else ue=R}return z.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(V),style:ae},dr(me)?z.createElement("span",{className:"recharts-tooltip-item-name"},me):null,dr(me)?z.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,z.createElement("span",{className:"recharts-tooltip-item-value"},ue),z.createElement("span",{className:"recharts-tooltip-item-unit"},H.unit||""))});return z.createElement("ul",{className:"recharts-tooltip-item-list",style:D},P)}return null},_=zx({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),w=zx({margin:0},u),S=!We(g),j=S?g:"",E=qe("recharts-default-tooltip",p),N=qe("recharts-tooltip-label",v);S&&x&&d!==void 0&&d!==null&&(j=x(g,d));var A=m?{role:"status","aria-live":"assertive"}:{};return z.createElement("div",ob({className:E,style:_},A),z.createElement("p",{className:N,style:w},z.isValidElement(j)?j:"".concat(j)),y())};function Of(e){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Of(e)}function I0(e,t,r){return t=Ade(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ade(e){var t=Ode(e,"string");return Of(t)=="symbol"?t:t+""}function Ode(e,t){if(Of(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ld="recharts-tooltip-wrapper",Cde={visibility:"hidden"};function kde(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return qe(ld,I0(I0(I0(I0({},"".concat(ld,"-right"),ve(r)&&t&&ve(t.x)&&r>=t.x),"".concat(ld,"-left"),ve(r)&&t&&ve(t.x)&&r<t.x),"".concat(ld,"-bottom"),ve(n)&&t&&ve(t.y)&&n>=t.y),"".concat(ld,"-top"),ve(n)&&t&&ve(t.y)&&n<t.y))}function hT(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,s=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&ve(i[n]))return i[n];var d=r[n]-l-a,f=r[n]+a;if(t[n])return s[n]?d:f;if(s[n]){var h=d,p=c[n];return h<p?Math.max(f,c[n]):Math.max(d,c[n])}var v=f+l,g=c[n]+u;return v>g?Math.max(d,c[n]):Math.max(f,c[n])}function Pde(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Rde(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,s=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return s.height>0&&s.width>0&&r?(d=hT({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),f=hT({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=Pde({translateX:d,translateY:f,useTranslate3d:l})):u=Cde,{cssProperties:u,cssClasses:kde({translateX:d,translateY:f,coordinate:r})}}function eu(e){"@babel/helpers - typeof";return eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eu(e)}function pT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pT(Object(r),!0).forEach(function(n){cb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ide(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dde(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zI(n.key),n)}}function Mde(e,t,r){return t&&Dde(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lde(e,t,r){return t=vm(t),$de(e,UI()?Reflect.construct(t,r||[],vm(e).constructor):t.apply(e,r))}function $de(e,t){if(t&&(eu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fde(e)}function Fde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UI=function(){return!!e})()}function vm(e){return vm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vm(e)}function Bde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lb(e,t)}function lb(e,t){return lb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},lb(e,t)}function cb(e,t,r){return t=zI(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zI(e){var t=Ude(e,"string");return eu(t)=="symbol"?t:t+""}function Ude(e,t){if(eu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(eu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var gT=1,zde=function(e){function t(){var r;Ide(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Lde(this,t,[].concat(a)),cb(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),cb(r,"handleKeyDown",function(s){if(s.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return Bde(t,e),Mde(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>gT||Math.abs(n.height-this.state.lastBoundingBox.height)>gT)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,h=a.isAnimationActive,p=a.offset,v=a.position,g=a.reverseDirection,x=a.useTranslate3d,b=a.viewBox,m=a.wrapperStyle,y=Rde({allowEscapeViewBox:s,coordinate:d,offsetTopLeft:p,position:v,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:b}),_=y.cssClasses,w=y.cssProperties,S=mT(mT({transition:h&&i?"transform ".concat(l,"ms ").concat(c):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},m);return z.createElement("div",{tabIndex:-1,className:_,style:S,ref:function(E){n.wrapperNode=E}},u)}}])}(T.PureComponent),qde=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},qu={isSsr:qde()};function tu(e){"@babel/helpers - typeof";return tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tu(e)}function vT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vT(Object(r),!0).forEach(function(n){S2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hde(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WI(n.key),n)}}function Vde(e,t,r){return t&&Hde(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kde(e,t,r){return t=xm(t),Gde(e,qI()?Reflect.construct(t,r||[],xm(e).constructor):t.apply(e,r))}function Gde(e,t){if(t&&(tu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xde(e)}function Xde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qI=function(){return!!e})()}function xm(e){return xm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xm(e)}function Yde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ub(e,t)}function ub(e,t){return ub=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ub(e,t)}function S2(e,t,r){return t=WI(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WI(e){var t=Qde(e,"string");return tu(t)=="symbol"?t:t+""}function Qde(e,t){if(tu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(tu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Jde(e){return e.dataKey}function Zde(e,t){return z.isValidElement(e)?z.cloneElement(e,t):typeof e=="function"?z.createElement(e,t):z.createElement(Tde,t)}var vr=function(e){function t(){return Wde(this,t),Kde(this,t,arguments)}return Yde(t,e),Vde(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,h=a.isAnimationActive,p=a.offset,v=a.payload,g=a.payloadUniqBy,x=a.position,b=a.reverseDirection,m=a.useTranslate3d,y=a.viewBox,_=a.wrapperStyle,w=v??[];f&&w.length&&(w=RI(v.filter(function(j){return j.value!=null&&(j.hide!==!0||n.props.includeHidden)}),g,Jde));var S=w.length>0;return z.createElement(zde,{allowEscapeViewBox:s,animationDuration:l,animationEasing:c,isAnimationActive:h,active:i,coordinate:d,hasPayload:S,offset:p,position:x,reverseDirection:b,useTranslate3d:m,viewBox:y,wrapperStyle:_},Zde(u,xT(xT({},this.props),{},{payload:w})))}}])}(T.PureComponent);S2(vr,"displayName","Tooltip");S2(vr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!qu.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var efe=ui,tfe=function(){return efe.Date.now()},rfe=tfe,nfe=/\s/;function afe(e){for(var t=e.length;t--&&nfe.test(e.charAt(t)););return t}var ife=afe,sfe=ife,ofe=/^\s+/;function lfe(e){return e&&e.slice(0,sfe(e)+1).replace(ofe,"")}var cfe=lfe,ufe=cfe,yT=ro,dfe=Du,bT=NaN,ffe=/^[-+]0x[0-9a-f]+$/i,hfe=/^0b[01]+$/i,pfe=/^0o[0-7]+$/i,mfe=parseInt;function gfe(e){if(typeof e=="number")return e;if(dfe(e))return bT;if(yT(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=yT(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ufe(e);var r=hfe.test(e);return r||pfe.test(e)?mfe(e.slice(2),r?2:8):ffe.test(e)?bT:+e}var HI=gfe,vfe=ro,qx=rfe,wT=HI,xfe="Expected a function",yfe=Math.max,bfe=Math.min;function wfe(e,t,r){var n,a,i,s,l,c,u=0,d=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(xfe);t=wT(t)||0,vfe(r)&&(d=!!r.leading,f="maxWait"in r,i=f?yfe(wT(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h);function p(S){var j=n,E=a;return n=a=void 0,u=S,s=e.apply(E,j),s}function v(S){return u=S,l=setTimeout(b,t),d?p(S):s}function g(S){var j=S-c,E=S-u,N=t-j;return f?bfe(N,i-E):N}function x(S){var j=S-c,E=S-u;return c===void 0||j>=t||j<0||f&&E>=i}function b(){var S=qx();if(x(S))return m(S);l=setTimeout(b,g(S))}function m(S){return l=void 0,h&&n?p(S):(n=a=void 0,s)}function y(){l!==void 0&&clearTimeout(l),u=0,n=c=a=l=void 0}function _(){return l===void 0?s:m(qx())}function w(){var S=qx(),j=x(S);if(n=arguments,a=this,c=S,j){if(l===void 0)return v(c);if(f)return clearTimeout(l),l=setTimeout(b,t),p(c)}return l===void 0&&(l=setTimeout(b,t)),s}return w.cancel=y,w.flush=_,w}var _fe=wfe,Sfe=_fe,jfe=ro,Efe="Expected a function";function Nfe(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(Efe);return jfe(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),Sfe(e,t,{leading:n,maxWait:t,trailing:a})}var Tfe=Nfe;const VI=it(Tfe);function Cf(e){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cf(e)}function _T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function D0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_T(Object(r),!0).forEach(function(n){Afe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_T(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Afe(e,t,r){return t=Ofe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ofe(e){var t=Cfe(e,"string");return Cf(t)=="symbol"?t:t+""}function Cfe(e,t){if(Cf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kfe(e,t){return Dfe(e)||Ife(e,t)||Rfe(e,t)||Pfe()}function Pfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rfe(e,t){if(e){if(typeof e=="string")return ST(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ST(e,t)}}function ST(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ife(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function Dfe(e){if(Array.isArray(e))return e}var Ri=T.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,s=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,h=e.maxHeight,p=e.children,v=e.debounce,g=v===void 0?0:v,x=e.id,b=e.className,m=e.onResize,y=e.style,_=y===void 0?{}:y,w=T.useRef(null),S=T.useRef();S.current=m,T.useImperativeHandle(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var j=T.useState({containerWidth:a.width,containerHeight:a.height}),E=kfe(j,2),N=E[0],A=E[1],C=T.useCallback(function(P,H){A(function(V){var ae=Math.round(P),oe=Math.round(H);return V.containerWidth===ae&&V.containerHeight===oe?V:{containerWidth:ae,containerHeight:oe}})},[]);T.useEffect(function(){var P=function(re){var ue,me=re[0].contentRect,R=me.width,W=me.height;C(R,W),(ue=S.current)===null||ue===void 0||ue.call(S,R,W)};g>0&&(P=VI(P,g,{trailing:!0,leading:!1}));var H=new ResizeObserver(P),V=w.current.getBoundingClientRect(),ae=V.width,oe=V.height;return C(ae,oe),H.observe(w.current),function(){H.disconnect()}},[C,g]);var D=T.useMemo(function(){var P=N.containerWidth,H=N.containerHeight;if(P<0||H<0)return null;$a(Io(s)||Io(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,c),$a(!r||r>0,"The aspect(%s) must be greater than zero.",r);var V=Io(s)?P:s,ae=Io(c)?H:c;r&&r>0&&(V?ae=V/r:ae&&(V=ae*r),h&&ae>h&&(ae=h)),$a(V>0||ae>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,V,ae,s,c,d,f,r);var oe=!Array.isArray(p)&&ki(p.type).endsWith("Chart");return z.Children.map(p,function(X){return z.isValidElement(X)?T.cloneElement(X,D0({width:V,height:ae},oe?{style:D0({height:"100%",width:"100%",maxHeight:ae,maxWidth:V},X.props.style)}:{})):X})},[r,p,c,h,f,d,N,s]);return z.createElement("div",{id:x?"".concat(x):void 0,className:qe("recharts-responsive-container",b),style:D0(D0({},_),{},{width:s,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:w},D)}),ts=function(t){return null};ts.displayName="Cell";function kf(e){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kf(e)}function jT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function db(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jT(Object(r),!0).forEach(function(n){Mfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mfe(e,t,r){return t=Lfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lfe(e){var t=$fe(e,"string");return kf(t)=="symbol"?t:t+""}function $fe(e,t){if(kf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ll={widthCache:{},cacheCount:0},Ffe=2e3,Bfe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ET="recharts_measurement_span";function Ufe(e){var t=db({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var qd=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||qu.isSsr)return{width:0,height:0};var n=Ufe(r),a=JSON.stringify({text:t,copyStyle:n});if(Ll.widthCache[a])return Ll.widthCache[a];try{var i=document.getElementById(ET);i||(i=document.createElement("span"),i.setAttribute("id",ET),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var s=db(db({},Bfe),n);Object.assign(i.style,s),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Ll.widthCache[a]=c,++Ll.cacheCount>Ffe&&(Ll.cacheCount=0,Ll.widthCache={}),c}catch{return{width:0,height:0}}},zfe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Pf(e){"@babel/helpers - typeof";return Pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pf(e)}function ym(e,t){return Vfe(e)||Hfe(e,t)||Wfe(e,t)||qfe()}function qfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wfe(e,t){if(e){if(typeof e=="string")return NT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NT(e,t)}}function NT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Hfe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function Vfe(e){if(Array.isArray(e))return e}function Kfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xfe(n.key),n)}}function Gfe(e,t,r){return t&&TT(e.prototype,t),r&&TT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xfe(e){var t=Yfe(e,"string");return Pf(t)=="symbol"?t:t+""}function Yfe(e,t){if(Pf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var AT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,OT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Qfe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Jfe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,KI={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Zfe=Object.keys(KI),rc="NaN";function ehe(e,t){return e*KI[t]}var M0=function(){function e(t,r){Kfe(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!Qfe.test(r)&&(this.num=NaN,this.unit=""),Zfe.includes(r)&&(this.num=ehe(t,r),this.unit="px")}return Gfe(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=Jfe.exec(r))!==null&&n!==void 0?n:[],i=ym(a,3),s=i[1],l=i[2];return new e(parseFloat(s),l??"")}}])}();function GI(e){if(e.includes(rc))return rc;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=AT.exec(t))!==null&&r!==void 0?r:[],a=ym(n,4),i=a[1],s=a[2],l=a[3],c=M0.parse(i??""),u=M0.parse(l??""),d=s==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return rc;t=t.replace(AT,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=OT.exec(t))!==null&&f!==void 0?f:[],p=ym(h,4),v=p[1],g=p[2],x=p[3],b=M0.parse(v??""),m=M0.parse(x??""),y=g==="+"?b.add(m):b.subtract(m);if(y.isNaN())return rc;t=t.replace(OT,y.toString())}return t}var CT=/\(([^()]*)\)/;function the(e){for(var t=e;t.includes("(");){var r=CT.exec(t),n=ym(r,2),a=n[1];t=t.replace(CT,GI(a))}return t}function rhe(e){var t=e.replace(/\s+/g,"");return t=the(t),t=GI(t),t}function nhe(e){try{return rhe(e)}catch{return rc}}function Wx(e){var t=nhe(e.slice(5,-1));return t===rc?"":t}var ahe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],ihe=["dx","dy","angle","className","breakAll"];function fb(){return fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fb.apply(this,arguments)}function kT(e,t){if(e==null)return{};var r=she(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function she(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function PT(e,t){return uhe(e)||che(e,t)||lhe(e,t)||ohe()}function ohe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lhe(e,t){if(e){if(typeof e=="string")return RT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RT(e,t)}}function RT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function che(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function uhe(e){if(Array.isArray(e))return e}var XI=/[ \f\n\r\t\v\u2028\u2029]+/,YI=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];We(r)||(n?i=r.toString().split(""):i=r.toString().split(XI));var s=i.map(function(c){return{word:c,width:qd(c,a).width}}),l=n?0:qd("",a).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},dhe=function(t,r,n,a,i){var s=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=ve(s),f=l,h=function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return V.reduce(function(ae,oe){var X=oe.word,re=oe.width,ue=ae[ae.length-1];if(ue&&(a==null||i||ue.width+re+n<Number(a)))ue.words.push(X),ue.width+=re+n;else{var me={words:[X],width:re};ae.push(me)}return ae},[])},p=h(r),v=function(V){return V.reduce(function(ae,oe){return ae.width>oe.width?ae:oe})};if(!d)return p;for(var g="",x=function(V){var ae=f.slice(0,V),oe=YI({breakAll:u,style:c,children:ae+g}).wordsWithComputedWidth,X=h(oe),re=X.length>s||v(X).width>Number(a);return[re,X]},b=0,m=f.length-1,y=0,_;b<=m&&y<=f.length-1;){var w=Math.floor((b+m)/2),S=w-1,j=x(S),E=PT(j,2),N=E[0],A=E[1],C=x(w),D=PT(C,1),P=D[0];if(!N&&!P&&(b=w+1),N&&P&&(m=w-1),!N&&P){_=A;break}y++}return _||p},IT=function(t){var r=We(t)?[]:t.toString().split(XI);return[{words:r}]},fhe=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,s=t.breakAll,l=t.maxLines;if((r||n)&&!qu.isSsr){var c,u,d=YI({breakAll:s,children:a,style:i});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return IT(a);return dhe({breakAll:s,children:a,maxLines:l,style:i},c,u,r,n)}return IT(a)},DT="#808080",ul=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,s=t.lineHeight,l=s===void 0?"1em":s,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,h=t.textAnchor,p=h===void 0?"start":h,v=t.verticalAnchor,g=v===void 0?"end":v,x=t.fill,b=x===void 0?DT:x,m=kT(t,ahe),y=T.useMemo(function(){return fhe({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:f,style:m.style,width:m.width})},[m.breakAll,m.children,m.maxLines,f,m.style,m.width]),_=m.dx,w=m.dy,S=m.angle,j=m.className,E=m.breakAll,N=kT(m,ihe);if(!dr(n)||!dr(i))return null;var A=n+(ve(_)?_:0),C=i+(ve(w)?w:0),D;switch(g){case"start":D=Wx("calc(".concat(u,")"));break;case"middle":D=Wx("calc(".concat((y.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:D=Wx("calc(".concat(y.length-1," * -").concat(l,")"));break}var P=[];if(f){var H=y[0].width,V=m.width;P.push("scale(".concat((ve(V)?V/H:1)/H,")"))}return S&&P.push("rotate(".concat(S,", ").concat(A,", ").concat(C,")")),P.length&&(N.transform=P.join(" ")),z.createElement("text",fb({},De(N,!0),{x:A,y:C,className:qe("recharts-text",j),textAnchor:p,fill:b.includes("url")?DT:b}),y.map(function(ae,oe){var X=ae.words.join(E?"":" ");return z.createElement("tspan",{x:A,dy:oe===0?D:l,key:"".concat(X,"-").concat(oe)},X)}))};function Bs(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function hhe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function j2(e){let t,r,n;e.length!==2?(t=Bs,r=(l,c)=>Bs(e(l),c),n=(l,c)=>e(l)-c):(t=e===Bs||e===hhe?e:phe,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:s,right:i}}function phe(){return 0}function QI(e){return e===null?NaN:+e}function*mhe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const ghe=j2(Bs),$h=ghe.right;j2(QI).center;class MT extends Map{constructor(t,r=yhe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(LT(this,t))}has(t){return super.has(LT(this,t))}set(t,r){return super.set(vhe(this,t),r)}delete(t){return super.delete(xhe(this,t))}}function LT({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function vhe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function xhe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function yhe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function bhe(e=Bs){if(e===Bs)return JI;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function JI(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const whe=Math.sqrt(50),_he=Math.sqrt(10),She=Math.sqrt(2);function bm(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),s=i>=whe?10:i>=_he?5:i>=She?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/s,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*s,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?bm(e,t,r*2):[l,c,u]}function hb(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,s]=n?bm(t,e,r):bm(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(s<0)for(let u=0;u<l;++u)c[u]=(i-u)/-s;else for(let u=0;u<l;++u)c[u]=(i-u)*s;else if(s<0)for(let u=0;u<l;++u)c[u]=(a+u)/-s;else for(let u=0;u<l;++u)c[u]=(a+u)*s;return c}function pb(e,t,r){return t=+t,e=+e,r=+r,bm(e,t,r)[2]}function mb(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?pb(t,e,r):pb(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function $T(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function FT(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function ZI(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?JI:bhe(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/c+h)),v=Math.min(n,Math.floor(t+(c-u)*f/c+h));ZI(e,t,p,v,a)}const i=e[t];let s=r,l=n;for(cd(e,r,t),a(e[n],i)>0&&cd(e,r,n);s<l;){for(cd(e,s,l),++s,--l;a(e[s],i)<0;)++s;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?cd(e,r,l):(++l,cd(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function cd(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function jhe(e,t,r){if(e=Float64Array.from(mhe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return FT(e);if(t>=1)return $T(e);var n,a=(n-1)*t,i=Math.floor(a),s=$T(ZI(e,i).subarray(0,i+1)),l=FT(e.subarray(i+1));return s+(l-s)*(a-i)}}function Ehe(e,t,r=QI){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),s=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return s+(l-s)*(a-i)}}function Nhe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function va(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function rs(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const gb=Symbol("implicit");function E2(){var e=new MT,t=[],r=[],n=gb;function a(i){let s=e.get(i);if(s===void 0){if(n!==gb)return n;e.set(i,s=t.push(i)-1)}return r[s%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new MT;for(const s of i)e.has(s)||e.set(s,t.push(s)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return E2(t,r).unknown(n)},va.apply(a,arguments),a}function Rf(){var e=E2().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,s,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,p=a<n,v=p?a:n,g=p?n:a;i=(g-v)/Math.max(1,h-c+u*2),l&&(i=Math.floor(i)),v+=(g-v-i*(h-c))*d,s=i*(1-c),l&&(v=Math.round(v),s=Math.round(s));var x=Nhe(h).map(function(b){return v+i*b});return r(p?x.reverse():x)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return Rf(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},va.apply(f(),arguments)}function e6(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return e6(t())},e}function Wd(){return e6(Rf.apply(null,arguments).paddingInner(1))}function N2(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function t6(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Fh(){}var If=.7,wm=1/If,wc="\\s*([+-]?\\d+)\\s*",Df="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ri="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",The=/^#([0-9a-f]{3,8})$/,Ahe=new RegExp(`^rgb\\(${wc},${wc},${wc}\\)$`),Ohe=new RegExp(`^rgb\\(${ri},${ri},${ri}\\)$`),Che=new RegExp(`^rgba\\(${wc},${wc},${wc},${Df}\\)$`),khe=new RegExp(`^rgba\\(${ri},${ri},${ri},${Df}\\)$`),Phe=new RegExp(`^hsl\\(${Df},${ri},${ri}\\)$`),Rhe=new RegExp(`^hsla\\(${Df},${ri},${ri},${Df}\\)$`),BT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};N2(Fh,Mf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:UT,formatHex:UT,formatHex8:Ihe,formatHsl:Dhe,formatRgb:zT,toString:zT});function UT(){return this.rgb().formatHex()}function Ihe(){return this.rgb().formatHex8()}function Dhe(){return r6(this).formatHsl()}function zT(){return this.rgb().formatRgb()}function Mf(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=The.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?qT(t):r===3?new bn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?L0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?L0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ahe.exec(e))?new bn(t[1],t[2],t[3],1):(t=Ohe.exec(e))?new bn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Che.exec(e))?L0(t[1],t[2],t[3],t[4]):(t=khe.exec(e))?L0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Phe.exec(e))?VT(t[1],t[2]/100,t[3]/100,1):(t=Rhe.exec(e))?VT(t[1],t[2]/100,t[3]/100,t[4]):BT.hasOwnProperty(e)?qT(BT[e]):e==="transparent"?new bn(NaN,NaN,NaN,0):null}function qT(e){return new bn(e>>16&255,e>>8&255,e&255,1)}function L0(e,t,r,n){return n<=0&&(e=t=r=NaN),new bn(e,t,r,n)}function Mhe(e){return e instanceof Fh||(e=Mf(e)),e?(e=e.rgb(),new bn(e.r,e.g,e.b,e.opacity)):new bn}function vb(e,t,r,n){return arguments.length===1?Mhe(e):new bn(e,t,r,n??1)}function bn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}N2(bn,vb,t6(Fh,{brighter(e){return e=e==null?wm:Math.pow(wm,e),new bn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?If:Math.pow(If,e),new bn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new bn(Yo(this.r),Yo(this.g),Yo(this.b),_m(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:WT,formatHex:WT,formatHex8:Lhe,formatRgb:HT,toString:HT}));function WT(){return`#${Do(this.r)}${Do(this.g)}${Do(this.b)}`}function Lhe(){return`#${Do(this.r)}${Do(this.g)}${Do(this.b)}${Do((isNaN(this.opacity)?1:this.opacity)*255)}`}function HT(){const e=_m(this.opacity);return`${e===1?"rgb(":"rgba("}${Yo(this.r)}, ${Yo(this.g)}, ${Yo(this.b)}${e===1?")":`, ${e})`}`}function _m(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Yo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Do(e){return e=Yo(e),(e<16?"0":"")+e.toString(16)}function VT(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ra(e,t,r,n)}function r6(e){if(e instanceof Ra)return new Ra(e.h,e.s,e.l,e.opacity);if(e instanceof Fh||(e=Mf(e)),!e)return new Ra;if(e instanceof Ra)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),s=NaN,l=i-a,c=(i+a)/2;return l?(t===i?s=(r-n)/l+(r<n)*6:r===i?s=(n-t)/l+2:s=(t-r)/l+4,l/=c<.5?i+a:2-i-a,s*=60):l=c>0&&c<1?0:s,new Ra(s,l,c,e.opacity)}function $he(e,t,r,n){return arguments.length===1?r6(e):new Ra(e,t,r,n??1)}function Ra(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}N2(Ra,$he,t6(Fh,{brighter(e){return e=e==null?wm:Math.pow(wm,e),new Ra(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?If:Math.pow(If,e),new Ra(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new bn(Hx(e>=240?e-240:e+120,a,n),Hx(e,a,n),Hx(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Ra(KT(this.h),$0(this.s),$0(this.l),_m(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=_m(this.opacity);return`${e===1?"hsl(":"hsla("}${KT(this.h)}, ${$0(this.s)*100}%, ${$0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function KT(e){return e=(e||0)%360,e<0?e+360:e}function $0(e){return Math.max(0,Math.min(1,e||0))}function Hx(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const T2=e=>()=>e;function Fhe(e,t){return function(r){return e+r*t}}function Bhe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Uhe(e){return(e=+e)==1?n6:function(t,r){return r-t?Bhe(t,r,e):T2(isNaN(t)?r:t)}}function n6(e,t){var r=t-e;return r?Fhe(e,r):T2(isNaN(e)?t:e)}const GT=function e(t){var r=Uhe(t);function n(a,i){var s=r((a=vb(a)).r,(i=vb(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),u=n6(a.opacity,i.opacity);return function(d){return a.r=s(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function zhe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function qhe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Whe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),s;for(s=0;s<n;++s)a[s]=Wu(e[s],t[s]);for(;s<r;++s)i[s]=t[s];return function(l){for(s=0;s<n;++s)i[s]=a[s](l);return i}}function Hhe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Sm(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Vhe(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Wu(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var xb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vx=new RegExp(xb.source,"g");function Khe(e){return function(){return e}}function Ghe(e){return function(t){return e(t)+""}}function Xhe(e,t){var r=xb.lastIndex=Vx.lastIndex=0,n,a,i,s=-1,l=[],c=[];for(e=e+"",t=t+"";(n=xb.exec(e))&&(a=Vx.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[s]?l[s]+=i:l[++s]=i),(n=n[0])===(a=a[0])?l[s]?l[s]+=a:l[++s]=a:(l[++s]=null,c.push({i:s,x:Sm(n,a)})),r=Vx.lastIndex;return r<t.length&&(i=t.slice(r),l[s]?l[s]+=i:l[++s]=i),l.length<2?c[0]?Ghe(c[0].x):Khe(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Wu(e,t){var r=typeof t,n;return t==null||r==="boolean"?T2(t):(r==="number"?Sm:r==="string"?(n=Mf(t))?(t=n,GT):Xhe:t instanceof Mf?GT:t instanceof Date?Hhe:qhe(t)?zhe:Array.isArray(t)?Whe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Vhe:Sm)(e,t)}function A2(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Yhe(e,t){t===void 0&&(t=e,e=Wu);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(s){var l=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return i[l](s-l)}}function Qhe(e){return function(){return e}}function jm(e){return+e}var XT=[0,1];function ln(e){return e}function yb(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Qhe(isNaN(t)?NaN:.5)}function Jhe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Zhe(e,t,r){var n=e[0],a=e[1],i=t[0],s=t[1];return a<n?(n=yb(a,n),i=r(s,i)):(n=yb(n,a),i=r(i,s)),function(l){return i(n(l))}}function e0e(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)a[s]=yb(e[s],e[s+1]),i[s]=r(t[s],t[s+1]);return function(l){var c=$h(e,l,1,n)-1;return i[c](a[c](l))}}function Bh(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function uv(){var e=XT,t=XT,r=Wu,n,a,i,s=ln,l,c,u;function d(){var h=Math.min(e.length,t.length);return s!==ln&&(s=Jhe(e[0],e[h-1])),l=h>2?e0e:Zhe,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=l(e.map(n),t,r)))(n(s(h)))}return f.invert=function(h){return s(a((u||(u=l(t,e.map(n),Sm)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,jm),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=A2,d()},f.clamp=function(h){return arguments.length?(s=h?!0:ln,d()):s!==ln},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,p){return n=h,a=p,d()}}function O2(){return uv()(ln,ln)}function t0e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Em(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function ru(e){return e=Em(Math.abs(e)),e?e[1]:NaN}function r0e(e,t){return function(r,n){for(var a=r.length,i=[],s=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[s=(s+1)%e.length];return i.reverse().join(t)}}function n0e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var a0e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Lf(e){if(!(t=a0e.exec(e)))throw new Error("invalid format: "+e);var t;return new C2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Lf.prototype=C2.prototype;function C2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}C2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function i0e(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var a6;function s0e(e,t){var r=Em(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(a6=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=n.length;return i===s?n:i>s?n+new Array(i-s+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Em(e,Math.max(0,t+i-1))[0]}function YT(e,t){var r=Em(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const QT={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:t0e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>YT(e*100,t),r:YT,s:s0e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function JT(e){return e}var ZT=Array.prototype.map,eA=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function o0e(e){var t=e.grouping===void 0||e.thousands===void 0?JT:r0e(ZT.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?JT:n0e(ZT.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Lf(f);var h=f.fill,p=f.align,v=f.sign,g=f.symbol,x=f.zero,b=f.width,m=f.comma,y=f.precision,_=f.trim,w=f.type;w==="n"?(m=!0,w="g"):QT[w]||(y===void 0&&(y=12),_=!0,w="g"),(x||h==="0"&&p==="=")&&(x=!0,h="0",p="=");var S=g==="$"?r:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",j=g==="$"?n:/[%p]/.test(w)?s:"",E=QT[w],N=/[defgprs%]/.test(w);y=y===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function A(C){var D=S,P=j,H,V,ae;if(w==="c")P=E(C)+P,C="";else{C=+C;var oe=C<0||1/C<0;if(C=isNaN(C)?c:E(Math.abs(C),y),_&&(C=i0e(C)),oe&&+C==0&&v!=="+"&&(oe=!1),D=(oe?v==="("?v:l:v==="-"||v==="("?"":v)+D,P=(w==="s"?eA[8+a6/3]:"")+P+(oe&&v==="("?")":""),N){for(H=-1,V=C.length;++H<V;)if(ae=C.charCodeAt(H),48>ae||ae>57){P=(ae===46?a+C.slice(H+1):C.slice(H))+P,C=C.slice(0,H);break}}}m&&!x&&(C=t(C,1/0));var X=D.length+C.length+P.length,re=X<b?new Array(b-X+1).join(h):"";switch(m&&x&&(C=t(re+C,re.length?b-P.length:1/0),re=""),p){case"<":C=D+C+P+re;break;case"=":C=D+re+C+P;break;case"^":C=re.slice(0,X=re.length>>1)+D+C+P+re.slice(X);break;default:C=re+D+C+P;break}return i(C)}return A.toString=function(){return f+""},A}function d(f,h){var p=u((f=Lf(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(ru(h)/3)))*3,g=Math.pow(10,-v),x=eA[8+v/3];return function(b){return p(g*b)+x}}return{format:u,formatPrefix:d}}var F0,k2,i6;l0e({thousands:",",grouping:[3],currency:["$",""]});function l0e(e){return F0=o0e(e),k2=F0.format,i6=F0.formatPrefix,F0}function c0e(e){return Math.max(0,-ru(Math.abs(e)))}function u0e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ru(t)/3)))*3-ru(Math.abs(e)))}function d0e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ru(t)-ru(e))+1}function s6(e,t,r,n){var a=mb(e,t,r),i;switch(n=Lf(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=u0e(a,s))&&(n.precision=i),i6(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=d0e(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=c0e(a))&&(n.precision=i-(n.type==="%")*2);break}}return k2(n)}function no(e){var t=e.domain;return e.ticks=function(r){var n=t();return hb(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return s6(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,s=n[a],l=n[i],c,u,d=10;for(l<s&&(u=s,s=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=pb(s,l,r),u===c)return n[a]=s,n[i]=l,t(n);if(u>0)s=Math.floor(s/u)*u,l=Math.ceil(l/u)*u;else if(u<0)s=Math.ceil(s*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Nm(){var e=O2();return e.copy=function(){return Bh(e,Nm())},va.apply(e,arguments),no(e)}function o6(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,jm),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return o6(e).unknown(t)},e=arguments.length?Array.from(e,jm):[0,1],no(r)}function l6(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],s;return i<a&&(s=r,r=n,n=s,s=a,a=i,i=s),e[r]=t.floor(a),e[n]=t.ceil(i),e}function tA(e){return Math.log(e)}function rA(e){return Math.exp(e)}function f0e(e){return-Math.log(-e)}function h0e(e){return-Math.exp(-e)}function p0e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function m0e(e){return e===10?p0e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function g0e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function nA(e){return(t,r)=>-e(-t,r)}function P2(e){const t=e(tA,rA),r=t.domain;let n=10,a,i;function s(){return a=g0e(n),i=m0e(n),r()[0]<0?(a=nA(a),i=nA(i),e(f0e,h0e)):e(tA,rA),t}return t.base=function(l){return arguments.length?(n=+l,s()):n},t.domain=function(l){return arguments.length?(r(l),s()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),p=a(d),v,g;const x=l==null?10:+l;let b=[];if(!(n%1)&&p-h<x){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(v=1;v<n;++v)if(g=h<0?v/i(-h):v*i(h),!(g<u)){if(g>d)break;b.push(g)}}else for(;h<=p;++h)for(v=n-1;v>=1;--v)if(g=h>0?v/i(-h):v*i(h),!(g<u)){if(g>d)break;b.push(g)}b.length*2<x&&(b=hb(u,d,x))}else b=hb(h,p,Math.min(p-h,x)).map(i);return f?b.reverse():b},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Lf(c)).precision==null&&(c.trim=!0),c=k2(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(l6(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function c6(){const e=P2(uv()).domain([1,10]);return e.copy=()=>Bh(e,c6()).base(e.base()),va.apply(e,arguments),e}function aA(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function iA(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function R2(e){var t=1,r=e(aA(t),iA(t));return r.constant=function(n){return arguments.length?e(aA(t=+n),iA(t)):t},no(r)}function u6(){var e=R2(uv());return e.copy=function(){return Bh(e,u6()).constant(e.constant())},va.apply(e,arguments)}function sA(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function v0e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function x0e(e){return e<0?-e*e:e*e}function I2(e){var t=e(ln,ln),r=1;function n(){return r===1?e(ln,ln):r===.5?e(v0e,x0e):e(sA(r),sA(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},no(t)}function D2(){var e=I2(uv());return e.copy=function(){return Bh(e,D2()).exponent(e.exponent())},va.apply(e,arguments),e}function y0e(){return D2.apply(null,arguments).exponent(.5)}function oA(e){return Math.sign(e)*e*e}function b0e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function d6(){var e=O2(),t=[0,1],r=!1,n;function a(i){var s=b0e(e(i));return isNaN(s)?n:r?Math.round(s):s}return a.invert=function(i){return e.invert(oA(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,jm)).map(oA)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return d6(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},va.apply(a,arguments),no(a)}function f6(){var e=[],t=[],r=[],n;function a(){var s=0,l=Math.max(1,t.length);for(r=new Array(l-1);++s<l;)r[s-1]=Ehe(e,s/l);return i}function i(s){return s==null||isNaN(s=+s)?n:t[$h(r,s)]}return i.invertExtent=function(s){var l=t.indexOf(s);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let l of s)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Bs),a()},i.range=function(s){return arguments.length?(t=Array.from(s),a()):t.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return f6().domain(e).range(t).unknown(n)},va.apply(i,arguments)}function h6(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function s(c){return c!=null&&c<=c?a[$h(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},s.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},s.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},s.unknown=function(c){return arguments.length&&(i=c),s},s.thresholds=function(){return n.slice()},s.copy=function(){return h6().domain([e,t]).range(a).unknown(i)},va.apply(no(s),arguments)}function p6(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[$h(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var s=t.indexOf(i);return[e[s-1],e[s]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return p6().domain(e).range(t).unknown(r)},va.apply(a,arguments)}const Kx=new Date,Gx=new Date;function hr(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const s=a(i),l=a.ceil(i);return i-s<l-i?s:l},a.offset=(i,s)=>(t(i=new Date(+i),s==null?1:Math.floor(s)),i),a.range=(i,s,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<s)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<s);return c},a.filter=i=>hr(s=>{if(s>=s)for(;e(s),!i(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;t(s,-1),!i(s););else for(;--l>=0;)for(;t(s,1),!i(s););}),r&&(a.count=(i,s)=>(Kx.setTime(+i),Gx.setTime(+s),e(Kx),e(Gx),Math.floor(r(Kx,Gx))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?s=>n(s)%i===0:s=>a.count(0,s)%i===0):a)),a}const Tm=hr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Tm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?hr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Tm);Tm.range;const ji=1e3,ca=ji*60,Ei=ca*60,qi=Ei*24,M2=qi*7,lA=qi*30,Xx=qi*365,Mo=hr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ji)},(e,t)=>(t-e)/ji,e=>e.getUTCSeconds());Mo.range;const L2=hr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ji)},(e,t)=>{e.setTime(+e+t*ca)},(e,t)=>(t-e)/ca,e=>e.getMinutes());L2.range;const $2=hr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ca)},(e,t)=>(t-e)/ca,e=>e.getUTCMinutes());$2.range;const F2=hr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ji-e.getMinutes()*ca)},(e,t)=>{e.setTime(+e+t*Ei)},(e,t)=>(t-e)/Ei,e=>e.getHours());F2.range;const B2=hr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ei)},(e,t)=>(t-e)/Ei,e=>e.getUTCHours());B2.range;const Uh=hr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ca)/qi,e=>e.getDate()-1);Uh.range;const dv=hr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/qi,e=>e.getUTCDate()-1);dv.range;const m6=hr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/qi,e=>Math.floor(e/qi));m6.range;function Nl(e){return hr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*ca)/M2)}const fv=Nl(0),Am=Nl(1),w0e=Nl(2),_0e=Nl(3),nu=Nl(4),S0e=Nl(5),j0e=Nl(6);fv.range;Am.range;w0e.range;_0e.range;nu.range;S0e.range;j0e.range;function Tl(e){return hr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/M2)}const hv=Tl(0),Om=Tl(1),E0e=Tl(2),N0e=Tl(3),au=Tl(4),T0e=Tl(5),A0e=Tl(6);hv.range;Om.range;E0e.range;N0e.range;au.range;T0e.range;A0e.range;const U2=hr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());U2.range;const z2=hr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());z2.range;const Wi=hr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Wi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:hr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Wi.range;const Hi=hr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Hi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:hr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Hi.range;function g6(e,t,r,n,a,i){const s=[[Mo,1,ji],[Mo,5,5*ji],[Mo,15,15*ji],[Mo,30,30*ji],[i,1,ca],[i,5,5*ca],[i,15,15*ca],[i,30,30*ca],[a,1,Ei],[a,3,3*Ei],[a,6,6*Ei],[a,12,12*Ei],[n,1,qi],[n,2,2*qi],[r,1,M2],[t,1,lA],[t,3,3*lA],[e,1,Xx]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:c(u,d,f),v=p?p.range(u,+d+1):[];return h?v.reverse():v}function c(u,d,f){const h=Math.abs(d-u)/f,p=j2(([,,x])=>x).right(s,h);if(p===s.length)return e.every(mb(u/Xx,d/Xx,f));if(p===0)return Tm.every(Math.max(mb(u,d,f),1));const[v,g]=s[h/s[p-1][2]<s[p][2]/h?p-1:p];return v.every(g)}return[l,c]}const[O0e,C0e]=g6(Hi,z2,hv,m6,B2,$2),[k0e,P0e]=g6(Wi,U2,fv,Uh,F2,L2);function Yx(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Qx(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ud(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function R0e(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,s=e.shortDays,l=e.months,c=e.shortMonths,u=dd(a),d=fd(a),f=dd(i),h=fd(i),p=dd(s),v=fd(s),g=dd(l),x=fd(l),b=dd(c),m=fd(c),y={a:oe,A:X,b:re,B:ue,c:null,d:pA,e:pA,f:rpe,g:fpe,G:ppe,H:Z0e,I:epe,j:tpe,L:v6,m:npe,M:ape,p:me,q:R,Q:vA,s:xA,S:ipe,u:spe,U:ope,V:lpe,w:cpe,W:upe,x:null,X:null,y:dpe,Y:hpe,Z:mpe,"%":gA},_={a:W,A:U,b:q,B:ie,c:null,d:mA,e:mA,f:ype,g:Ope,G:kpe,H:gpe,I:vpe,j:xpe,L:y6,m:bpe,M:wpe,p:Se,q:Z,Q:vA,s:xA,S:_pe,u:Spe,U:jpe,V:Epe,w:Npe,W:Tpe,x:null,X:null,y:Ape,Y:Cpe,Z:Ppe,"%":gA},w={a:A,A:C,b:D,B:P,c:H,d:fA,e:fA,f:X0e,g:dA,G:uA,H:hA,I:hA,j:H0e,L:G0e,m:W0e,M:V0e,p:N,q:q0e,Q:Q0e,s:J0e,S:K0e,u:$0e,U:F0e,V:B0e,w:L0e,W:U0e,x:V,X:ae,y:dA,Y:uA,Z:z0e,"%":Y0e};y.x=S(r,y),y.X=S(n,y),y.c=S(t,y),_.x=S(r,_),_.X=S(n,_),_.c=S(t,_);function S(K,te){return function(be){var ne=[],Fe=-1,Ce=0,st=K.length,Be,we,Ht;for(be instanceof Date||(be=new Date(+be));++Fe<st;)K.charCodeAt(Fe)===37&&(ne.push(K.slice(Ce,Fe)),(we=cA[Be=K.charAt(++Fe)])!=null?Be=K.charAt(++Fe):we=Be==="e"?" ":"0",(Ht=te[Be])&&(Be=Ht(be,we)),ne.push(Be),Ce=Fe+1);return ne.push(K.slice(Ce,Fe)),ne.join("")}}function j(K,te){return function(be){var ne=ud(1900,void 0,1),Fe=E(ne,K,be+="",0),Ce,st;if(Fe!=be.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(ne.s*1e3+("L"in ne?ne.L:0));if(te&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+ne.p*12),ne.m===void 0&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?(Ce=Qx(ud(ne.y,0,1)),st=Ce.getUTCDay(),Ce=st>4||st===0?Om.ceil(Ce):Om(Ce),Ce=dv.offset(Ce,(ne.V-1)*7),ne.y=Ce.getUTCFullYear(),ne.m=Ce.getUTCMonth(),ne.d=Ce.getUTCDate()+(ne.w+6)%7):(Ce=Yx(ud(ne.y,0,1)),st=Ce.getDay(),Ce=st>4||st===0?Am.ceil(Ce):Am(Ce),Ce=Uh.offset(Ce,(ne.V-1)*7),ne.y=Ce.getFullYear(),ne.m=Ce.getMonth(),ne.d=Ce.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),st="Z"in ne?Qx(ud(ne.y,0,1)).getUTCDay():Yx(ud(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+ne.W*7-(st+5)%7:ne.w+ne.U*7-(st+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,Qx(ne)):Yx(ne)}}function E(K,te,be,ne){for(var Fe=0,Ce=te.length,st=be.length,Be,we;Fe<Ce;){if(ne>=st)return-1;if(Be=te.charCodeAt(Fe++),Be===37){if(Be=te.charAt(Fe++),we=w[Be in cA?te.charAt(Fe++):Be],!we||(ne=we(K,be,ne))<0)return-1}else if(Be!=be.charCodeAt(ne++))return-1}return ne}function N(K,te,be){var ne=u.exec(te.slice(be));return ne?(K.p=d.get(ne[0].toLowerCase()),be+ne[0].length):-1}function A(K,te,be){var ne=p.exec(te.slice(be));return ne?(K.w=v.get(ne[0].toLowerCase()),be+ne[0].length):-1}function C(K,te,be){var ne=f.exec(te.slice(be));return ne?(K.w=h.get(ne[0].toLowerCase()),be+ne[0].length):-1}function D(K,te,be){var ne=b.exec(te.slice(be));return ne?(K.m=m.get(ne[0].toLowerCase()),be+ne[0].length):-1}function P(K,te,be){var ne=g.exec(te.slice(be));return ne?(K.m=x.get(ne[0].toLowerCase()),be+ne[0].length):-1}function H(K,te,be){return E(K,t,te,be)}function V(K,te,be){return E(K,r,te,be)}function ae(K,te,be){return E(K,n,te,be)}function oe(K){return s[K.getDay()]}function X(K){return i[K.getDay()]}function re(K){return c[K.getMonth()]}function ue(K){return l[K.getMonth()]}function me(K){return a[+(K.getHours()>=12)]}function R(K){return 1+~~(K.getMonth()/3)}function W(K){return s[K.getUTCDay()]}function U(K){return i[K.getUTCDay()]}function q(K){return c[K.getUTCMonth()]}function ie(K){return l[K.getUTCMonth()]}function Se(K){return a[+(K.getUTCHours()>=12)]}function Z(K){return 1+~~(K.getUTCMonth()/3)}return{format:function(K){var te=S(K+="",y);return te.toString=function(){return K},te},parse:function(K){var te=j(K+="",!1);return te.toString=function(){return K},te},utcFormat:function(K){var te=S(K+="",_);return te.toString=function(){return K},te},utcParse:function(K){var te=j(K+="",!0);return te.toString=function(){return K},te}}}var cA={"-":"",_:" ",0:"0"},Er=/^\s*\d+/,I0e=/^%/,D0e=/[\\^$*+?|[\]().{}]/g;function Ze(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function M0e(e){return e.replace(D0e,"\\$&")}function dd(e){return new RegExp("^(?:"+e.map(M0e).join("|")+")","i")}function fd(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function L0e(e,t,r){var n=Er.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function $0e(e,t,r){var n=Er.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function F0e(e,t,r){var n=Er.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function B0e(e,t,r){var n=Er.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function U0e(e,t,r){var n=Er.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function uA(e,t,r){var n=Er.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function dA(e,t,r){var n=Er.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function z0e(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function q0e(e,t,r){var n=Er.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function W0e(e,t,r){var n=Er.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function fA(e,t,r){var n=Er.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function H0e(e,t,r){var n=Er.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function hA(e,t,r){var n=Er.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function V0e(e,t,r){var n=Er.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function K0e(e,t,r){var n=Er.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function G0e(e,t,r){var n=Er.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function X0e(e,t,r){var n=Er.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Y0e(e,t,r){var n=I0e.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Q0e(e,t,r){var n=Er.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function J0e(e,t,r){var n=Er.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function pA(e,t){return Ze(e.getDate(),t,2)}function Z0e(e,t){return Ze(e.getHours(),t,2)}function epe(e,t){return Ze(e.getHours()%12||12,t,2)}function tpe(e,t){return Ze(1+Uh.count(Wi(e),e),t,3)}function v6(e,t){return Ze(e.getMilliseconds(),t,3)}function rpe(e,t){return v6(e,t)+"000"}function npe(e,t){return Ze(e.getMonth()+1,t,2)}function ape(e,t){return Ze(e.getMinutes(),t,2)}function ipe(e,t){return Ze(e.getSeconds(),t,2)}function spe(e){var t=e.getDay();return t===0?7:t}function ope(e,t){return Ze(fv.count(Wi(e)-1,e),t,2)}function x6(e){var t=e.getDay();return t>=4||t===0?nu(e):nu.ceil(e)}function lpe(e,t){return e=x6(e),Ze(nu.count(Wi(e),e)+(Wi(e).getDay()===4),t,2)}function cpe(e){return e.getDay()}function upe(e,t){return Ze(Am.count(Wi(e)-1,e),t,2)}function dpe(e,t){return Ze(e.getFullYear()%100,t,2)}function fpe(e,t){return e=x6(e),Ze(e.getFullYear()%100,t,2)}function hpe(e,t){return Ze(e.getFullYear()%1e4,t,4)}function ppe(e,t){var r=e.getDay();return e=r>=4||r===0?nu(e):nu.ceil(e),Ze(e.getFullYear()%1e4,t,4)}function mpe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ze(t/60|0,"0",2)+Ze(t%60,"0",2)}function mA(e,t){return Ze(e.getUTCDate(),t,2)}function gpe(e,t){return Ze(e.getUTCHours(),t,2)}function vpe(e,t){return Ze(e.getUTCHours()%12||12,t,2)}function xpe(e,t){return Ze(1+dv.count(Hi(e),e),t,3)}function y6(e,t){return Ze(e.getUTCMilliseconds(),t,3)}function ype(e,t){return y6(e,t)+"000"}function bpe(e,t){return Ze(e.getUTCMonth()+1,t,2)}function wpe(e,t){return Ze(e.getUTCMinutes(),t,2)}function _pe(e,t){return Ze(e.getUTCSeconds(),t,2)}function Spe(e){var t=e.getUTCDay();return t===0?7:t}function jpe(e,t){return Ze(hv.count(Hi(e)-1,e),t,2)}function b6(e){var t=e.getUTCDay();return t>=4||t===0?au(e):au.ceil(e)}function Epe(e,t){return e=b6(e),Ze(au.count(Hi(e),e)+(Hi(e).getUTCDay()===4),t,2)}function Npe(e){return e.getUTCDay()}function Tpe(e,t){return Ze(Om.count(Hi(e)-1,e),t,2)}function Ape(e,t){return Ze(e.getUTCFullYear()%100,t,2)}function Ope(e,t){return e=b6(e),Ze(e.getUTCFullYear()%100,t,2)}function Cpe(e,t){return Ze(e.getUTCFullYear()%1e4,t,4)}function kpe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?au(e):au.ceil(e),Ze(e.getUTCFullYear()%1e4,t,4)}function Ppe(){return"+0000"}function gA(){return"%"}function vA(e){return+e}function xA(e){return Math.floor(+e/1e3)}var $l,w6,_6;Rpe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Rpe(e){return $l=R0e(e),w6=$l.format,$l.parse,_6=$l.utcFormat,$l.utcParse,$l}function Ipe(e){return new Date(e)}function Dpe(e){return e instanceof Date?+e:+new Date(+e)}function q2(e,t,r,n,a,i,s,l,c,u){var d=O2(),f=d.invert,h=d.domain,p=u(".%L"),v=u(":%S"),g=u("%I:%M"),x=u("%I %p"),b=u("%a %d"),m=u("%b %d"),y=u("%B"),_=u("%Y");function w(S){return(c(S)<S?p:l(S)<S?v:s(S)<S?g:i(S)<S?x:n(S)<S?a(S)<S?b:m:r(S)<S?y:_)(S)}return d.invert=function(S){return new Date(f(S))},d.domain=function(S){return arguments.length?h(Array.from(S,Dpe)):h().map(Ipe)},d.ticks=function(S){var j=h();return e(j[0],j[j.length-1],S??10)},d.tickFormat=function(S,j){return j==null?w:u(j)},d.nice=function(S){var j=h();return(!S||typeof S.range!="function")&&(S=t(j[0],j[j.length-1],S??10)),S?h(l6(j,S)):d},d.copy=function(){return Bh(d,q2(e,t,r,n,a,i,s,l,c,u))},d}function Mpe(){return va.apply(q2(k0e,P0e,Wi,U2,fv,Uh,F2,L2,Mo,w6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Lpe(){return va.apply(q2(O0e,C0e,Hi,z2,hv,dv,B2,$2,Mo,_6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function pv(){var e=0,t=1,r,n,a,i,s=ln,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:s(a===0?.5:(f=(i(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(h){var p,v;return arguments.length?([p,v]=h,s=f(p,v),u):[s(0),s(1)]}}return u.range=d(Wu),u.rangeRound=d(A2),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function ao(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function S6(){var e=no(pv()(ln));return e.copy=function(){return ao(e,S6())},rs.apply(e,arguments)}function j6(){var e=P2(pv()).domain([1,10]);return e.copy=function(){return ao(e,j6()).base(e.base())},rs.apply(e,arguments)}function E6(){var e=R2(pv());return e.copy=function(){return ao(e,E6()).constant(e.constant())},rs.apply(e,arguments)}function W2(){var e=I2(pv());return e.copy=function(){return ao(e,W2()).exponent(e.exponent())},rs.apply(e,arguments)}function $pe(){return W2.apply(null,arguments).exponent(.5)}function N6(){var e=[],t=ln;function r(n){if(n!=null&&!isNaN(n=+n))return t(($h(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Bs),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>jhe(e,i/n))},r.copy=function(){return N6(t).domain(e)},rs.apply(r,arguments)}function mv(){var e=0,t=.5,r=1,n=1,a,i,s,l,c,u=ln,d,f=!1,h;function p(g){return isNaN(g=+g)?h:(g=.5+((g=+d(g))-i)*(n*g<n*i?l:c),u(f?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([e,t,r]=g,a=d(e=+e),i=d(t=+t),s=d(r=+r),l=a===i?0:.5/(i-a),c=i===s?0:.5/(s-i),n=i<a?-1:1,p):[e,t,r]},p.clamp=function(g){return arguments.length?(f=!!g,p):f},p.interpolator=function(g){return arguments.length?(u=g,p):u};function v(g){return function(x){var b,m,y;return arguments.length?([b,m,y]=x,u=Yhe(g,[b,m,y]),p):[u(0),u(.5),u(1)]}}return p.range=v(Wu),p.rangeRound=v(A2),p.unknown=function(g){return arguments.length?(h=g,p):h},function(g){return d=g,a=g(e),i=g(t),s=g(r),l=a===i?0:.5/(i-a),c=i===s?0:.5/(s-i),n=i<a?-1:1,p}}function T6(){var e=no(mv()(ln));return e.copy=function(){return ao(e,T6())},rs.apply(e,arguments)}function A6(){var e=P2(mv()).domain([.1,1,10]);return e.copy=function(){return ao(e,A6()).base(e.base())},rs.apply(e,arguments)}function O6(){var e=R2(mv());return e.copy=function(){return ao(e,O6()).constant(e.constant())},rs.apply(e,arguments)}function H2(){var e=I2(mv());return e.copy=function(){return ao(e,H2()).exponent(e.exponent())},rs.apply(e,arguments)}function Fpe(){return H2.apply(null,arguments).exponent(.5)}const yA=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Rf,scaleDiverging:T6,scaleDivergingLog:A6,scaleDivergingPow:H2,scaleDivergingSqrt:Fpe,scaleDivergingSymlog:O6,scaleIdentity:o6,scaleImplicit:gb,scaleLinear:Nm,scaleLog:c6,scaleOrdinal:E2,scalePoint:Wd,scalePow:D2,scaleQuantile:f6,scaleQuantize:h6,scaleRadial:d6,scaleSequential:S6,scaleSequentialLog:j6,scaleSequentialPow:W2,scaleSequentialQuantile:N6,scaleSequentialSqrt:$pe,scaleSequentialSymlog:E6,scaleSqrt:y0e,scaleSymlog:u6,scaleThreshold:p6,scaleTime:Mpe,scaleUtc:Lpe,tickFormat:s6},Symbol.toStringTag,{value:"Module"}));var Bpe=Du;function Upe(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],s=t(i);if(s!=null&&(l===void 0?s===s&&!Bpe(s):r(s,l)))var l=s,c=i}return c}var gv=Upe;function zpe(e,t){return e>t}var C6=zpe,qpe=gv,Wpe=C6,Hpe=zu;function Vpe(e){return e&&e.length?qpe(e,Hpe,Wpe):void 0}var Kpe=Vpe;const vv=it(Kpe);function Gpe(e,t){return e<t}var k6=Gpe,Xpe=gv,Ype=k6,Qpe=zu;function Jpe(e){return e&&e.length?Xpe(e,Qpe,Ype):void 0}var Zpe=Jpe;const xv=it(Zpe);var eme=i2,tme=di,rme=FI,nme=On;function ame(e,t){var r=nme(e)?eme:rme;return r(e,tme(t))}var ime=ame,sme=LI,ome=ime;function lme(e,t){return sme(ome(e,t),1)}var cme=lme;const ume=it(cme);var dme=b2;function fme(e,t){return dme(e,t)}var hme=fme;const yv=it(hme);var Hu=1e9,pme={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},K2,Ct=!0,pa="[DecimalError] ",Qo=pa+"Invalid argument: ",V2=pa+"Exponent out of range: ",Vu=Math.floor,So=Math.pow,mme=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Bn,mr=1e7,Et=7,P6=9007199254740991,Cm=Vu(P6/Et),Oe={};Oe.absoluteValue=Oe.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Oe.comparedTo=Oe.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Oe.decimalPlaces=Oe.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Et;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Oe.dividedBy=Oe.div=function(e){return Ii(this,new this.constructor(e))};Oe.dividedToIntegerBy=Oe.idiv=function(e){var t=this,r=t.constructor;return gt(Ii(t,new r(e),0,1),r.precision)};Oe.equals=Oe.eq=function(e){return!this.cmp(e)};Oe.exponent=function(){return nr(this)};Oe.greaterThan=Oe.gt=function(e){return this.cmp(e)>0};Oe.greaterThanOrEqualTo=Oe.gte=function(e){return this.cmp(e)>=0};Oe.isInteger=Oe.isint=function(){return this.e>this.d.length-2};Oe.isNegative=Oe.isneg=function(){return this.s<0};Oe.isPositive=Oe.ispos=function(){return this.s>0};Oe.isZero=function(){return this.s===0};Oe.lessThan=Oe.lt=function(e){return this.cmp(e)<0};Oe.lessThanOrEqualTo=Oe.lte=function(e){return this.cmp(e)<1};Oe.logarithm=Oe.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Bn))throw Error(pa+"NaN");if(r.s<1)throw Error(pa+(r.s?"NaN":"-Infinity"));return r.eq(Bn)?new n(0):(Ct=!1,t=Ii($f(r,i),$f(e,i),i),Ct=!0,gt(t,a))};Oe.minus=Oe.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?D6(t,e):R6(t,(e.s=-e.s,e))};Oe.modulo=Oe.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(pa+"NaN");return r.s?(Ct=!1,t=Ii(r,e,0,1).times(e),Ct=!0,r.minus(t)):gt(new n(r),a)};Oe.naturalExponential=Oe.exp=function(){return I6(this)};Oe.naturalLogarithm=Oe.ln=function(){return $f(this)};Oe.negated=Oe.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Oe.plus=Oe.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?R6(t,e):D6(t,(e.s=-e.s,e))};Oe.precision=Oe.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Qo+e);if(t=nr(a)+1,n=a.d.length-1,r=n*Et+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Oe.squareRoot=Oe.sqrt=function(){var e,t,r,n,a,i,s,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(pa+"NaN")}for(e=nr(l),Ct=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Za(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Vu((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=s=r+3;;)if(i=n,n=i.plus(Ii(l,i,s+2)).times(.5),Za(i.d).slice(0,s)===(t=Za(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),a==s&&t=="4999"){if(gt(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;s+=4}return Ct=!0,gt(n,r)};Oe.times=Oe.mul=function(e){var t,r,n,a,i,s,l,c,u,d=this,f=d.constructor,h=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=p.length,c<u&&(i=h,h=p,p=i,s=c,c=u,u=s),i=[],s=c+u,n=s;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=i[a]+p[n]*h[a-n-1]+t,i[a--]=l%mr|0,t=l/mr|0;i[a]=(i[a]+t)%mr|0}for(;!i[--s];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Ct?gt(e,f.precision):e};Oe.toDecimalPlaces=Oe.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(si(e,0,Hu),t===void 0?t=n.rounding:si(t,0,8),gt(r,e+nr(r)+1,t))};Oe.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=dl(n,!0):(si(e,0,Hu),t===void 0?t=a.rounding:si(t,0,8),n=gt(new a(n),e+1,t),r=dl(n,!0,e+1)),r};Oe.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?dl(a):(si(e,0,Hu),t===void 0?t=i.rounding:si(t,0,8),n=gt(new i(a),e+nr(a)+1,t),r=dl(n.abs(),!1,e+nr(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Oe.toInteger=Oe.toint=function(){var e=this,t=e.constructor;return gt(new t(e),nr(e)+1,t.rounding)};Oe.toNumber=function(){return+this};Oe.toPower=Oe.pow=function(e){var t,r,n,a,i,s,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Bn);if(l=new c(l),!l.s){if(e.s<1)throw Error(pa+"Infinity");return l}if(l.eq(Bn))return l;if(n=c.precision,e.eq(Bn))return gt(l,n);if(t=e.e,r=e.d.length-1,s=t>=r,i=l.s,s){if((r=d<0?-d:d)<=P6){for(a=new c(Bn),t=Math.ceil(n/Et+4),Ct=!1;r%2&&(a=a.times(l),wA(a.d,t)),r=Vu(r/2),r!==0;)l=l.times(l),wA(l.d,t);return Ct=!0,e.s<0?new c(Bn).div(a):gt(a,n)}}else if(i<0)throw Error(pa+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Ct=!1,a=e.times($f(l,n+u)),Ct=!0,a=I6(a),a.s=i,a};Oe.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=nr(a),n=dl(a,r<=i.toExpNeg||r>=i.toExpPos)):(si(e,1,Hu),t===void 0?t=i.rounding:si(t,0,8),a=gt(new i(a),e,t),r=nr(a),n=dl(a,e<=r||r<=i.toExpNeg,e)),n};Oe.toSignificantDigits=Oe.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(si(e,1,Hu),t===void 0?t=n.rounding:si(t,0,8)),gt(new n(r),e,t)};Oe.toString=Oe.valueOf=Oe.val=Oe.toJSON=Oe[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=nr(e),r=e.constructor;return dl(e,t<=r.toExpNeg||t>=r.toExpPos)};function R6(e,t){var r,n,a,i,s,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Ct?gt(t,f):t;if(c=e.d,u=t.d,s=e.e,a=t.e,c=c.slice(),i=s-a,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,a=s,l=c.length),s=Math.ceil(f/Et),l=s>l?s+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/mr|0,c[i]%=mr;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Ct?gt(t,f):t}function si(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Qo+e)}function Za(e){var t,r,n,a=e.length-1,i="",s=e[0];if(a>0){for(i+=s,t=1;t<a;t++)n=e[t]+"",r=Et-n.length,r&&(i+=cs(r)),i+=n;s=e[t],n=s+"",r=Et-n.length,r&&(i+=cs(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}var Ii=function(){function e(n,a){var i,s=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+s,n[l]=i%mr|0,s=i/mr|0;return s&&n.unshift(s),n}function t(n,a,i,s){var l,c;if(i!=s)c=i>s?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,i){for(var s=0;i--;)n[i]-=s,s=n[i]<a[i]?1:0,n[i]=s*mr+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,s){var l,c,u,d,f,h,p,v,g,x,b,m,y,_,w,S,j,E,N=n.constructor,A=n.s==a.s?1:-1,C=n.d,D=a.d;if(!n.s)return new N(n);if(!a.s)throw Error(pa+"Division by zero");for(c=n.e-a.e,j=D.length,w=C.length,p=new N(A),v=p.d=[],u=0;D[u]==(C[u]||0);)++u;if(D[u]>(C[u]||0)&&--c,i==null?m=i=N.precision:s?m=i+(nr(n)-nr(a))+1:m=i,m<0)return new N(0);if(m=m/Et+2|0,u=0,j==1)for(d=0,D=D[0],m++;(u<w||d)&&m--;u++)y=d*mr+(C[u]||0),v[u]=y/D|0,d=y%D|0;else{for(d=mr/(D[0]+1)|0,d>1&&(D=e(D,d),C=e(C,d),j=D.length,w=C.length),_=j,g=C.slice(0,j),x=g.length;x<j;)g[x++]=0;E=D.slice(),E.unshift(0),S=D[0],D[1]>=mr/2&&++S;do d=0,l=t(D,g,j,x),l<0?(b=g[0],j!=x&&(b=b*mr+(g[1]||0)),d=b/S|0,d>1?(d>=mr&&(d=mr-1),f=e(D,d),h=f.length,x=g.length,l=t(f,g,h,x),l==1&&(d--,r(f,j<h?E:D,h))):(d==0&&(l=d=1),f=D.slice()),h=f.length,h<x&&f.unshift(0),r(g,f,x),l==-1&&(x=g.length,l=t(D,g,j,x),l<1&&(d++,r(g,j<x?E:D,x))),x=g.length):l===0&&(d++,g=[0]),v[u++]=d,l&&g[0]?g[x++]=C[_]||0:(g=[C[_]],x=1);while((_++<w||g[0]!==void 0)&&m--)}return v[0]||v.shift(),p.e=c,gt(p,s?i+nr(p)+1:i)}}();function I6(e,t){var r,n,a,i,s,l,c=0,u=0,d=e.constructor,f=d.precision;if(nr(e)>16)throw Error(V2+nr(e));if(!e.s)return new d(Bn);for(Ct=!1,l=f,s=new d(.03125);e.abs().gte(.1);)e=e.times(s),u+=5;for(n=Math.log(So(2,u))/Math.LN10*2+5|0,l+=n,r=a=i=new d(Bn),d.precision=l;;){if(a=gt(a.times(e),l),r=r.times(++c),s=i.plus(Ii(a,r,l)),Za(s.d).slice(0,l)===Za(i.d).slice(0,l)){for(;u--;)i=gt(i.times(i),l);return d.precision=f,t==null?(Ct=!0,gt(i,f)):i}i=s}}function nr(e){for(var t=e.e*Et,r=e.d[0];r>=10;r/=10)t++;return t}function Jx(e,t,r){if(t>e.LN10.sd())throw Ct=!0,r&&(e.precision=r),Error(pa+"LN10 precision limit exceeded");return gt(new e(e.LN10),t)}function cs(e){for(var t="";e--;)t+="0";return t}function $f(e,t){var r,n,a,i,s,l,c,u,d,f=1,h=10,p=e,v=p.d,g=p.constructor,x=g.precision;if(p.s<1)throw Error(pa+(p.s?"NaN":"-Infinity"));if(p.eq(Bn))return new g(0);if(t==null?(Ct=!1,u=x):u=t,p.eq(10))return t==null&&(Ct=!0),Jx(g,u);if(u+=h,g.precision=u,r=Za(v),n=r.charAt(0),i=nr(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=Za(p.d),n=r.charAt(0),f++;i=nr(p),n>1?(p=new g("0."+r),i++):p=new g(n+"."+r.slice(1))}else return c=Jx(g,u+2,x).times(i+""),p=$f(new g(n+"."+r.slice(1)),u-h).plus(c),g.precision=x,t==null?(Ct=!0,gt(p,x)):p;for(l=s=p=Ii(p.minus(Bn),p.plus(Bn),u),d=gt(p.times(p),u),a=3;;){if(s=gt(s.times(d),u),c=l.plus(Ii(s,new g(a),u)),Za(c.d).slice(0,u)===Za(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(Jx(g,u+2,x).times(i+""))),l=Ii(l,new g(f),u),g.precision=x,t==null?(Ct=!0,gt(l,x)):l;l=c,a+=2}}function bA(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Vu(r/Et),e.d=[],n=(r+1)%Et,r<0&&(n+=Et),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Et;n<a;)e.d.push(+t.slice(n,n+=Et));t=t.slice(n),n=Et-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Ct&&(e.e>Cm||e.e<-Cm))throw Error(V2+r)}else e.s=0,e.e=0,e.d=[0];return e}function gt(e,t,r){var n,a,i,s,l,c,u,d,f=e.d;for(s=1,i=f[0];i>=10;i/=10)s++;if(n=t-s,n<0)n+=Et,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Et),i=f.length,d>=i)return e;for(u=i=f[d],s=1;i>=10;i/=10)s++;n%=Et,a=n-Et+s}if(r!==void 0&&(i=So(10,s-a-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/So(10,s-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=nr(e),f.length=1,t=t-i-1,f[0]=So(10,(Et-t%Et)%Et),e.e=Vu(-t/Et)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=So(10,Et-n),f[d]=a>0?(u/So(10,s-a)%So(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==mr&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=mr)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(Ct&&(e.e>Cm||e.e<-Cm))throw Error(V2+nr(e));return e}function D6(e,t){var r,n,a,i,s,l,c,u,d,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Ct?gt(t,p):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),s=u-n,s){for(d=s<0,d?(r=c,s=-s,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(p/Et),l)+2,s>a&&(s=a,r.length=1),r.reverse(),a=s;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}s=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>s;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=mr-1;--c[i],c[a]+=mr}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Ct?gt(t,p):t):new h(0)}function dl(e,t,r){var n,a=nr(e),i=Za(e.d),s=i.length;return t?(r&&(n=r-s)>0?i=i.charAt(0)+"."+i.slice(1)+cs(n):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+cs(-a-1)+i,r&&(n=r-s)>0&&(i+=cs(n))):a>=s?(i+=cs(a+1-s),r&&(n=r-a-1)>0&&(i=i+"."+cs(n))):((n=a+1)<s&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-s)>0&&(a+1===s&&(i+="."),i+=cs(n))),e.s<0?"-"+i:i}function wA(e,t){if(e.length>t)return e.length=t,!0}function M6(e){var t,r,n;function a(i){var s=this;if(!(s instanceof a))return new a(i);if(s.constructor=a,i instanceof a){s.s=i.s,s.e=i.e,s.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Qo+i);if(i>0)s.s=1;else if(i<0)i=-i,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(i===~~i&&i<1e7){s.e=0,s.d=[i];return}return bA(s,i.toString())}else if(typeof i!="string")throw Error(Qo+i);if(i.charCodeAt(0)===45?(i=i.slice(1),s.s=-1):s.s=1,mme.test(i))bA(s,i);else throw Error(Qo+i)}if(a.prototype=Oe,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=M6,a.config=a.set=gme,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function gme(e){if(!e||typeof e!="object")throw Error(pa+"Object expected");var t,r,n,a=["precision",1,Hu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Vu(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Qo+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Qo+r+": "+n);return this}var K2=M6(pme);Bn=new K2(1);const mt=K2;function vme(e){return wme(e)||bme(e)||yme(e)||xme()}function xme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yme(e,t){if(e){if(typeof e=="string")return bb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bb(e,t)}}function bme(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function wme(e){if(Array.isArray(e))return bb(e)}function bb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _me=function(t){return t},L6={},$6=function(t){return t===L6},_A=function(t){return function r(){return arguments.length===0||arguments.length===1&&$6(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},Sme=function e(t,r){return t===1?r:_A(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=a.filter(function(l){return l!==L6}).length;return s>=t?r.apply(void 0,a):e(t-s,_A(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(f){return $6(f)?c.shift():f});return r.apply(void 0,vme(d).concat(c))}))})},bv=function(t){return Sme(t.length,t)},wb=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},jme=bv(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),Eme=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return _me;var a=r.reverse(),i=a[0],s=a.slice(1);return function(){return s.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},_b=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},F6=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function Nme(e){var t;return e===0?t=1:t=Math.floor(new mt(e).abs().log(10).toNumber())+1,t}function Tme(e,t,r){for(var n=new mt(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var Ame=bv(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),Ome=bv(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),Cme=bv(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const wv={rangeStep:Tme,getDigitCount:Nme,interpolateNumber:Ame,uninterpolateNumber:Ome,uninterpolateTruncation:Cme};function Sb(e){return Rme(e)||Pme(e)||B6(e)||kme()}function kme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pme(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Rme(e){if(Array.isArray(e))return jb(e)}function Ff(e,t){return Mme(e)||Dme(e,t)||B6(e,t)||Ime()}function Ime(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B6(e,t){if(e){if(typeof e=="string")return jb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jb(e,t)}}function jb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dme(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var s=e[Symbol.iterator](),l;!(n=(l=s.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&s.return!=null&&s.return()}finally{if(a)throw i}}return r}}function Mme(e){if(Array.isArray(e))return e}function U6(e){var t=Ff(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function z6(e,t,r){if(e.lte(0))return new mt(0);var n=wv.getDigitCount(e.toNumber()),a=new mt(10).pow(n),i=e.div(a),s=n!==1?.05:.1,l=new mt(Math.ceil(i.div(s).toNumber())).add(r).mul(s),c=l.mul(a);return t?c:new mt(Math.ceil(c))}function Lme(e,t,r){var n=1,a=new mt(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new mt(10).pow(wv.getDigitCount(e)-1),a=new mt(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new mt(Math.floor(e)))}else e===0?a=new mt(Math.floor((t-1)/2)):r||(a=new mt(Math.floor(e)));var s=Math.floor((t-1)/2),l=Eme(jme(function(c){return a.add(new mt(c-s).mul(n)).toNumber()}),wb);return l(0,t)}function q6(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new mt(0),tickMin:new mt(0),tickMax:new mt(0)};var i=z6(new mt(t).sub(e).div(r-1),n,a),s;e<=0&&t>=0?s=new mt(0):(s=new mt(e).add(t).div(2),s=s.sub(new mt(s).mod(i)));var l=Math.ceil(s.sub(e).div(i).toNumber()),c=Math.ceil(new mt(t).sub(s).div(i).toNumber()),u=l+c+1;return u>r?q6(e,t,r,n,a+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:s.sub(new mt(l).mul(i)),tickMax:s.add(new mt(c).mul(i))})}function $me(e){var t=Ff(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(a,2),l=U6([r,n]),c=Ff(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(Sb(wb(0,a-1).map(function(){return 1/0}))):[].concat(Sb(wb(0,a-1).map(function(){return-1/0})),[d]);return r>n?_b(f):f}if(u===d)return Lme(u,a,i);var h=q6(u,d,s,i),p=h.step,v=h.tickMin,g=h.tickMax,x=wv.rangeStep(v,g.add(new mt(.1).mul(p)),p);return r>n?_b(x):x}function Fme(e,t){var r=Ff(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=U6([n,a]),l=Ff(s,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var d=Math.max(t,2),f=z6(new mt(u).sub(c).div(d-1),i,0),h=[].concat(Sb(wv.rangeStep(new mt(c),new mt(u).sub(new mt(.99).mul(f)),f)),[u]);return n>a?_b(h):h}var Bme=F6($me),Ume=F6(Fme),zme="Invariant failed";function fl(e,t){throw new Error(zme)}var qme=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function iu(e){"@babel/helpers - typeof";return iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iu(e)}function km(){return km=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},km.apply(this,arguments)}function Wme(e,t){return Gme(e)||Kme(e,t)||Vme(e,t)||Hme()}function Hme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vme(e,t){if(e){if(typeof e=="string")return SA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SA(e,t)}}function SA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Kme(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function Gme(e){if(Array.isArray(e))return e}function Xme(e,t){if(e==null)return{};var r=Yme(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Yme(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Qme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jme(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,V6(n.key),n)}}function Zme(e,t,r){return t&&Jme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ege(e,t,r){return t=Pm(t),tge(e,W6()?Reflect.construct(t,r||[],Pm(e).constructor):t.apply(e,r))}function tge(e,t){if(t&&(iu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rge(e)}function rge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W6=function(){return!!e})()}function Pm(e){return Pm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Pm(e)}function nge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Eb(e,t)}function Eb(e,t){return Eb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Eb(e,t)}function H6(e,t,r){return t=V6(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V6(e){var t=age(e,"string");return iu(t)=="symbol"?t:t+""}function age(e,t){if(iu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(iu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var _v=function(e){function t(){return Qme(this,t),ege(this,t,arguments)}return nge(t,e),Zme(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,s=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,h=Xme(n,qme),p=De(h,!1);this.props.direction==="x"&&d.type!=="number"&&fl();var v=c.map(function(g){var x=u(g,l),b=x.x,m=x.y,y=x.value,_=x.errorVal;if(!_)return null;var w=[],S,j;if(Array.isArray(_)){var E=Wme(_,2);S=E[0],j=E[1]}else S=j=_;if(i==="vertical"){var N=d.scale,A=m+a,C=A+s,D=A-s,P=N(y-S),H=N(y+j);w.push({x1:H,y1:C,x2:H,y2:D}),w.push({x1:P,y1:A,x2:H,y2:A}),w.push({x1:P,y1:C,x2:P,y2:D})}else if(i==="horizontal"){var V=f.scale,ae=b+a,oe=ae-s,X=ae+s,re=V(y-S),ue=V(y+j);w.push({x1:oe,y1:ue,x2:X,y2:ue}),w.push({x1:ae,y1:re,x2:ae,y2:ue}),w.push({x1:oe,y1:re,x2:X,y2:re})}return z.createElement(ct,km({className:"recharts-errorBar",key:"bar-".concat(w.map(function(me){return"".concat(me.x1,"-").concat(me.x2,"-").concat(me.y1,"-").concat(me.y2)}))},p),w.map(function(me){return z.createElement("line",km({},me,{key:"line-".concat(me.x1,"-").concat(me.x2,"-").concat(me.y1,"-").concat(me.y2)}))}))});return z.createElement(ct,{className:"recharts-errorBars"},v)}}])}(z.Component);H6(_v,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});H6(_v,"displayName","ErrorBar");function Bf(e){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bf(e)}function jA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ho(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jA(Object(r),!0).forEach(function(n){ige(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ige(e,t,r){return t=sge(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sge(e){var t=oge(e,"string");return Bf(t)=="symbol"?t:t+""}function oge(e,t){if(Bf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var K6=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,s=In(r,Pi);if(!s)return null;var l=Pi.defaultProps,c=l!==void 0?ho(ho({},l),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:i==="children"?u=(n||[]).reduce(function(d,f){var h=f.item,p=f.props,v=p.sectors||p.data||[];return d.concat(v.map(function(g){return{type:s.props.iconType||h.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(n||[]).map(function(d){var f=d.item,h=f.type.defaultProps,p=h!==void 0?ho(ho({},h),f.props):{},v=p.dataKey,g=p.name,x=p.legendType,b=p.hide;return{inactive:b,dataKey:v,type:c.iconType||x||"square",color:G2(f),value:g||v,payload:p}}),ho(ho(ho({},c),Pi.getWithHeight(s,a)),{},{payload:u,item:s})};function Uf(e){"@babel/helpers - typeof";return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uf(e)}function EA(e){return dge(e)||uge(e)||cge(e)||lge()}function lge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cge(e,t){if(e){if(typeof e=="string")return Nb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nb(e,t)}}function uge(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dge(e){if(Array.isArray(e))return Nb(e)}function Nb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function NA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NA(Object(r),!0).forEach(function(n){_c(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _c(e,t,r){return t=fge(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fge(e){var t=hge(e,"string");return Uf(t)=="symbol"?t:t+""}function hge(e,t){if(Uf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hr(e,t,r){return We(e)||We(t)?r:dr(t)?Wn(e,t,r):Me(t)?t(e):r}function Hd(e,t,r,n){var a=ume(e,function(l){return Hr(l,t)});if(r==="number"){var i=a.filter(function(l){return ve(l)||parseFloat(l)});return i.length?[xv(i),vv(i)]:[1/0,-1/0]}var s=n?a.filter(function(l){return!We(l)}):a;return s.map(function(l){return dr(l)||l instanceof Date?l:""})}var pge=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,f=a[u].coordinate,h=u>=l-1?a[0].coordinate:a[u+1].coordinate,p=void 0;if(sn(f-d)!==sn(h-f)){var v=[];if(sn(h-f)===sn(c[1]-c[0])){p=h;var g=f+c[1]-c[0];v[0]=Math.min(g,(g+d)/2),v[1]=Math.max(g,(g+d)/2)}else{p=d;var x=h+c[1]-c[0];v[0]=Math.min(f,(x+f)/2),v[1]=Math.max(f,(x+f)/2)}var b=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(t>b[0]&&t<=b[1]||t>=v[0]&&t<=v[1]){s=a[u].index;break}}else{var m=Math.min(d,h),y=Math.max(d,h);if(t>(m+f)/2&&t<=(y+f)/2){s=a[u].index;break}}}else for(var _=0;_<l;_++)if(_===0&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_>0&&_<l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_===l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2){s=n[_].index;break}return s},G2=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?qt(qt({},t.type.defaultProps),t.props):t.props,s=i.stroke,l=i.fill,c;switch(a){case"Line":c=s;break;case"Area":case"Radar":c=s&&s!=="none"?s:l;break;default:c=l;break}return c},mge=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var s={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,f=Object.keys(d),h=0,p=f.length;h<p;h++){var v=d[f[h]],g=v.items,x=v.cateAxisId,b=g.filter(function(j){return ki(j.type).indexOf("Bar")>=0});if(b&&b.length){var m=b[0].type.defaultProps,y=m!==void 0?qt(qt({},m),b[0].props):b[0].props,_=y.barSize,w=y[x];s[w]||(s[w]=[]);var S=We(_)?r:_;s[w].push({item:b[0],stackList:b.slice(1),barSize:We(S)?void 0:on(S,n,0)})}}return s},gge=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,s=i===void 0?[]:i,l=t.maxBarSize,c=s.length;if(c<1)return null;var u=on(r,a,0,!0),d,f=[];if(s[0].barSize===+s[0].barSize){var h=!1,p=a/c,v=s.reduce(function(_,w){return _+w.barSize||0},0);v+=(c-1)*u,v>=a&&(v-=(c-1)*u,u=0),v>=a&&p>0&&(h=!0,p*=.9,v=c*p);var g=(a-v)/2>>0,x={offset:g-u,size:0};d=s.reduce(function(_,w){var S={item:w.item,position:{offset:x.offset+x.size+u,size:h?p:w.barSize}},j=[].concat(EA(_),[S]);return x=j[j.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(E){j.push({item:E,position:x})}),j},f)}else{var b=on(n,a,0,!0);a-2*b-(c-1)*u<=0&&(u=0);var m=(a-2*b-(c-1)*u)/c;m>1&&(m>>=0);var y=l===+l?Math.min(m,l):m;d=s.reduce(function(_,w,S){var j=[].concat(EA(_),[{item:w.item,position:{offset:b+(m+u)*S+(m-y)/2,size:y}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(E){j.push({item:E,position:j[j.length-1].position})}),j},f)}return d},vge=function(t,r,n,a){var i=n.children,s=n.width,l=n.margin,c=s-(l.left||0)-(l.right||0),u=K6({children:i,legendWidth:c});if(u){var d=a||{},f=d.width,h=d.height,p=u.align,v=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&v==="middle")&&p!=="center"&&ve(t[p]))return qt(qt({},t),{},_c({},p,t[p]+(f||0)));if((g==="horizontal"||g==="vertical"&&p==="center")&&v!=="middle"&&ve(t[v]))return qt(qt({},t),{},_c({},v,t[v]+(h||0)))}return t},xge=function(t,r,n){return We(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},G6=function(t,r,n,a,i){var s=r.props.children,l=da(s,_v).filter(function(u){return xge(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=Hr(d,n);if(We(f))return u;var h=Array.isArray(f)?[xv(f),vv(f)]:[f,f],p=c.reduce(function(v,g){var x=Hr(d,g,0),b=h[0]-Math.abs(Array.isArray(x)?x[0]:x),m=h[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(b,v[0]),Math.max(m,v[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},yge=function(t,r,n,a,i){var s=r.map(function(l){return G6(t,l,n,i,a)}).filter(function(l){return!We(l)});return s&&s.length?s.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},X6=function(t,r,n,a,i){var s=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&G6(t,c,u,a)||Hd(t,u,n,i)});if(n==="number")return s.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return s.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},Y6=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},Q6=function(t,r,n,a){if(a)return t.map(function(c){return c.coordinate});var i,s,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(s=!0),c.coordinate});return i||l.push(r),s||l.push(n),l},Ni=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,s=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&s==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?sn(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var h=i?i.indexOf(f):f;return{coordinate:a(h)+u,value:f,offset:u}});return d.filter(function(f){return!Dh(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:a(f)+u,value:f,index:h,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,h){return{coordinate:a(f)+u,value:i?i[f]:f,index:h,offset:u}})},Zx=new WeakMap,B0=function(t,r){if(typeof r!="function")return t;Zx.has(t)||Zx.set(t,new WeakMap);var n=Zx.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},J6=function(t,r,n){var a=t.scale,i=t.type,s=t.layout,l=t.axisType;if(a==="auto")return s==="radial"&&l==="radiusAxis"?{scale:Rf(),realScaleType:"band"}:s==="radial"&&l==="angleAxis"?{scale:Nm(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Wd(),realScaleType:"point"}:i==="category"?{scale:Rf(),realScaleType:"band"}:{scale:Nm(),realScaleType:"linear"};if(ll(a)){var c="scale".concat(nv(a));return{scale:(yA[c]||Wd)(),realScaleType:yA[c]?c:"point"}}return Me(a)?{scale:a}:{scale:Wd(),realScaleType:"point"}},TA=1e-4,Z6=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-TA,s=Math.max(a[0],a[1])+TA,l=t(r[0]),c=t(r[n-1]);(l<i||l>s||c<i||c>s)&&t.domain([r[0],r[n-1]])}},bge=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},wge=function(t,r){if(!r||r.length!==2||!ve(r[0])||!ve(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!ve(t[0])||t[0]<n)&&(i[0]=n),(!ve(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},_ge=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,s=0,l=0;l<r;++l){var c=Dh(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=s,t[l][n][1]=s+c,s=t[l][n][1])}},Sge=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,s=0;s<r;++s){var l=Dh(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=i,t[s][n][1]=i+l,i=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},jge={sign:_ge,expand:qne,none:Qc,silhouette:Wne,wiggle:Hne,positive:Sge},Ege=function(t,r,n){var a=r.map(function(l){return l.props.dataKey}),i=jge[n],s=zne().keys(a).value(function(l,c){return+Hr(l,c,0)}).order(Q1).offset(i);return s(t)},Nge=function(t,r,n,a,i,s){if(!t)return null;var l=s?r.reverse():r,c={},u=l.reduce(function(f,h){var p,v=(p=h.type)!==null&&p!==void 0&&p.defaultProps?qt(qt({},h.type.defaultProps),h.props):h.props,g=v.stackId,x=v.hide;if(x)return f;var b=v[n],m=f[b]||{hasStack:!1,stackGroups:{}};if(dr(g)){var y=m.stackGroups[g]||{numericAxisId:n,cateAxisId:a,items:[]};y.items.push(h),m.hasStack=!0,m.stackGroups[g]=y}else m.stackGroups[Mh("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return qt(qt({},f),{},_c({},b,m))},c),d={};return Object.keys(u).reduce(function(f,h){var p=u[h];if(p.hasStack){var v={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(g,x){var b=p.stackGroups[x];return qt(qt({},g),{},_c({},x,{numericAxisId:n,cateAxisId:a,items:b.items,stackedData:Ege(t,b.items,i)}))},v)}return qt(qt({},f),{},_c({},h,p))},d)},eD=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,s=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=Bme(u,i,l);return t.domain([xv(d),vv(d)]),{niceTicks:d}}if(i&&a==="number"){var f=t.domain(),h=Ume(f,i,l);return{niceTicks:h}}return null},AA=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,s=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=Hr(s,r.dataKey,r.domain[l]);return We(c)?null:r.scale(c)-i/2+a},Tge=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},Age=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?qt(qt({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(dr(i)){var s=r[i];if(s){var l=s.items.indexOf(t);return l>=0?s.stackedData[l]:null}}return null},Oge=function(t){return t.reduce(function(r,n){return[xv(n.concat([r[0]]).filter(ve)),vv(n.concat([r[1]]).filter(ve))]},[1/0,-1/0])},tD=function(t,r,n){return Object.keys(t).reduce(function(a,i){var s=t[i],l=s.stackedData,c=l.reduce(function(u,d){var f=Oge(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},OA=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,CA=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Tb=function(t,r,n){if(Me(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(ve(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(OA.test(t[0])){var i=+OA.exec(t[0])[1];a[0]=r[0]-i}else Me(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(ve(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(CA.test(t[1])){var s=+CA.exec(t[1])[1];a[1]=r[1]+s}else Me(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},Rm=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=_2(r,function(f){return f.coordinate}),s=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},kA=function(t,r,n){return!t||!t.length||yv(t,Wn(n,"type.defaultProps.domain"))?r:t},rD=function(t,r){var n=t.type.defaultProps?qt(qt({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,s=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return qt(qt({},De(t,!1)),{},{dataKey:a,unit:s,formatter:l,name:i||a,color:G2(t),value:Hr(r,a),type:c,payload:r,chartType:u,hide:d})};function zf(e){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zf(e)}function PA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PA(Object(r),!0).forEach(function(n){nD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nD(e,t,r){return t=Cge(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cge(e){var t=kge(e,"string");return zf(t)=="symbol"?t:t+""}function kge(e,t){if(zf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pge(e,t){return Mge(e)||Dge(e,t)||Ige(e,t)||Rge()}function Rge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ige(e,t){if(e){if(typeof e=="string")return RA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RA(e,t)}}function RA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dge(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function Mge(e){if(Array.isArray(e))return e}var Im=Math.PI/180,Lge=function(t){return t*180/Math.PI},_t=function(t,r,n,a){return{x:t+Math.cos(-Im*a)*n,y:r+Math.sin(-Im*a)*n}},aD=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},$ge=function(t,r,n,a,i){var s=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=on(t.cx,s,s/2),f=on(t.cy,l,l/2),h=aD(s,l,n),p=on(t.innerRadius,h,0),v=on(t.outerRadius,h,h*.8),g=Object.keys(r);return g.reduce(function(x,b){var m=r[b],y=m.domain,_=m.reversed,w;if(We(m.range))a==="angleAxis"?w=[c,u]:a==="radiusAxis"&&(w=[p,v]),_&&(w=[w[1],w[0]]);else{w=m.range;var S=w,j=Pge(S,2);c=j[0],u=j[1]}var E=J6(m,i),N=E.realScaleType,A=E.scale;A.domain(y).range(w),Z6(A);var C=eD(A,gi(gi({},m),{},{realScaleType:N})),D=gi(gi(gi({},m),C),{},{range:w,radius:v,realScaleType:N,scale:A,cx:d,cy:f,innerRadius:p,outerRadius:v,startAngle:c,endAngle:u});return gi(gi({},x),{},nD({},b,D))},{})},Fge=function(t,r){var n=t.x,a=t.y,i=r.x,s=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-s,2))},Bge=function(t,r){var n=t.x,a=t.y,i=r.cx,s=r.cy,l=Fge({x:n,y:a},{x:i,y:s});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return a>s&&(u=2*Math.PI-u),{radius:l,angle:Lge(u),angleInRadian:u}},Uge=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),s=Math.min(a,i);return{startAngle:r-s*360,endAngle:n-s*360}},zge=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),s=Math.floor(a/360),l=Math.min(i,s);return t+l*360},IA=function(t,r){var n=t.x,a=t.y,i=Bge({x:n,y:a},r),s=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(s<c||s>u)return!1;if(s===0)return!0;var d=Uge(r),f=d.startAngle,h=d.endAngle,p=l,v;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;v=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;v=p>=h&&p<=f}return v?gi(gi({},r),{},{radius:s,angle:zge(p,r)}):null},iD=function(t){return!T.isValidElement(t)&&!Me(t)&&typeof t!="boolean"?t.className:""};function qf(e){"@babel/helpers - typeof";return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qf(e)}var qge=["offset"];function Wge(e){return Gge(e)||Kge(e)||Vge(e)||Hge()}function Hge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vge(e,t){if(e){if(typeof e=="string")return Ab(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ab(e,t)}}function Kge(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Gge(e){if(Array.isArray(e))return Ab(e)}function Ab(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xge(e,t){if(e==null)return{};var r=Yge(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Yge(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function DA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DA(Object(r),!0).forEach(function(n){Qge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qge(e,t,r){return t=Jge(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jge(e){var t=Zge(e,"string");return qf(t)=="symbol"?t:t+""}function Zge(e,t){if(qf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wf(){return Wf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wf.apply(this,arguments)}var eve=function(t){var r=t.value,n=t.formatter,a=We(t.children)?r:t.children;return Me(n)?n(a):a},tve=function(t,r){var n=sn(r-t),a=Math.min(Math.abs(r-t),360);return n*a},rve=function(t,r,n){var a=t.position,i=t.viewBox,s=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,p=c.startAngle,v=c.endAngle,g=c.clockWise,x=(f+h)/2,b=tve(p,v),m=b>=0?1:-1,y,_;a==="insideStart"?(y=p+m*s,_=g):a==="insideEnd"?(y=v-m*s,_=!g):a==="end"&&(y=v+m*s,_=g),_=b<=0?_:!_;var w=_t(u,d,x,y),S=_t(u,d,x,y+(_?1:-1)*359),j="M".concat(w.x,",").concat(w.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(_?0:1,`,
    `).concat(S.x,",").concat(S.y),E=We(t.id)?Mh("recharts-radial-line-"):t.id;return z.createElement("text",Wf({},n,{dominantBaseline:"central",className:qe("recharts-radial-bar-label",l)}),z.createElement("defs",null,z.createElement("path",{id:E,d:j})),z.createElement("textPath",{xlinkHref:"#".concat(E)},r))},nve=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,s=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,h=(d+f)/2;if(a==="outside"){var p=_t(s,l,u+n,h),v=p.x,g=p.y;return{x:v,y:g,textAnchor:v>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(c+u)/2,b=_t(s,l,x,h),m=b.x,y=b.y;return{x:m,y,textAnchor:"middle",verticalAnchor:"middle"}},ave=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,s=r,l=s.x,c=s.y,u=s.width,d=s.height,f=d>=0?1:-1,h=f*a,p=f>0?"end":"start",v=f>0?"start":"end",g=u>=0?1:-1,x=g*a,b=g>0?"end":"start",m=g>0?"start":"end";if(i==="top"){var y={x:l+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:p};return sr(sr({},y),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var _={x:l+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:v};return sr(sr({},_),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(i==="left"){var w={x:l-x,y:c+d/2,textAnchor:b,verticalAnchor:"middle"};return sr(sr({},w),n?{width:Math.max(w.x-n.x,0),height:d}:{})}if(i==="right"){var S={x:l+u+x,y:c+d/2,textAnchor:m,verticalAnchor:"middle"};return sr(sr({},S),n?{width:Math.max(n.x+n.width-S.x,0),height:d}:{})}var j=n?{width:u,height:d}:{};return i==="insideLeft"?sr({x:l+x,y:c+d/2,textAnchor:m,verticalAnchor:"middle"},j):i==="insideRight"?sr({x:l+u-x,y:c+d/2,textAnchor:b,verticalAnchor:"middle"},j):i==="insideTop"?sr({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:v},j):i==="insideBottom"?sr({x:l+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:p},j):i==="insideTopLeft"?sr({x:l+x,y:c+h,textAnchor:m,verticalAnchor:v},j):i==="insideTopRight"?sr({x:l+u-x,y:c+h,textAnchor:b,verticalAnchor:v},j):i==="insideBottomLeft"?sr({x:l+x,y:c+d-h,textAnchor:m,verticalAnchor:p},j):i==="insideBottomRight"?sr({x:l+u-x,y:c+d-h,textAnchor:b,verticalAnchor:p},j):Mu(i)&&(ve(i.x)||Io(i.x))&&(ve(i.y)||Io(i.y))?sr({x:l+on(i.x,u),y:c+on(i.y,d),textAnchor:"end",verticalAnchor:"end"},j):sr({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},j)},ive=function(t){return"cx"in t&&ve(t.cx)};function xr(e){var t=e.offset,r=t===void 0?5:t,n=Xge(e,qge),a=sr({offset:r},n),i=a.viewBox,s=a.position,l=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,h=a.textBreakAll;if(!i||We(l)&&We(c)&&!T.isValidElement(u)&&!Me(u))return null;if(T.isValidElement(u))return T.cloneElement(u,a);var p;if(Me(u)){if(p=T.createElement(u,a),T.isValidElement(p))return p}else p=eve(a);var v=ive(i),g=De(a,!0);if(v&&(s==="insideStart"||s==="insideEnd"||s==="end"))return rve(a,p,g);var x=v?nve(a):ave(a);return z.createElement(ul,Wf({className:qe("recharts-label",f)},g,x,{breakAll:h}),p)}xr.displayName="Label";var sD=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,s=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,h=t.y,p=t.top,v=t.left,g=t.width,x=t.height,b=t.clockWise,m=t.labelViewBox;if(m)return m;if(ve(g)&&ve(x)){if(ve(f)&&ve(h))return{x:f,y:h,width:g,height:x};if(ve(p)&&ve(v))return{x:p,y:v,width:g,height:x}}return ve(f)&&ve(h)?{x:f,y:h,width:0,height:0}:ve(r)&&ve(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:s||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:b}:t.viewBox?t.viewBox:{}},sve=function(t,r){return t?t===!0?z.createElement(xr,{key:"label-implicit",viewBox:r}):dr(t)?z.createElement(xr,{key:"label-implicit",viewBox:r,value:t}):T.isValidElement(t)?t.type===xr?T.cloneElement(t,{key:"label-implicit",viewBox:r}):z.createElement(xr,{key:"label-implicit",content:t,viewBox:r}):Me(t)?z.createElement(xr,{key:"label-implicit",content:t,viewBox:r}):Mu(t)?z.createElement(xr,Wf({viewBox:r},t,{key:"label-implicit"})):null:null},ove=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=sD(t),s=da(a,xr).map(function(c,u){return T.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return s;var l=sve(t.label,r||i);return[l].concat(Wge(s))};xr.parseViewBox=sD;xr.renderCallByParent=ove;function lve(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var cve=lve;const uve=it(cve);function Hf(e){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hf(e)}var dve=["valueAccessor"],fve=["data","dataKey","clockWise","id","textBreakAll"];function hve(e){return vve(e)||gve(e)||mve(e)||pve()}function pve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mve(e,t){if(e){if(typeof e=="string")return Ob(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ob(e,t)}}function gve(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vve(e){if(Array.isArray(e))return Ob(e)}function Ob(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dm(){return Dm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dm.apply(this,arguments)}function MA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MA(Object(r),!0).forEach(function(n){xve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xve(e,t,r){return t=yve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yve(e){var t=bve(e,"string");return Hf(t)=="symbol"?t:t+""}function bve(e,t){if(Hf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $A(e,t){if(e==null)return{};var r=wve(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function wve(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var _ve=function(t){return Array.isArray(t.value)?uve(t.value):t.value};function Us(e){var t=e.valueAccessor,r=t===void 0?_ve:t,n=$A(e,dve),a=n.data,i=n.dataKey,s=n.clockWise,l=n.id,c=n.textBreakAll,u=$A(n,fve);return!a||!a.length?null:z.createElement(ct,{className:"recharts-label-list"},a.map(function(d,f){var h=We(i)?r(d,f):Hr(d&&d.payload,i),p=We(l)?{}:{id:"".concat(l,"-").concat(f)};return z.createElement(xr,Dm({},De(d,!0),u,p,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:xr.parseViewBox(We(s)?d:LA(LA({},d),{},{clockWise:s})),key:"label-".concat(f),index:f}))}))}Us.displayName="LabelList";function Sve(e,t){return e?e===!0?z.createElement(Us,{key:"labelList-implicit",data:t}):z.isValidElement(e)||Me(e)?z.createElement(Us,{key:"labelList-implicit",data:t,content:e}):Mu(e)?z.createElement(Us,Dm({data:t},e,{key:"labelList-implicit"})):null:null}function jve(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=da(n,Us).map(function(s,l){return T.cloneElement(s,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var i=Sve(e.label,t);return[i].concat(hve(a))}Us.renderCallByParent=jve;function Vf(e){"@babel/helpers - typeof";return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vf(e)}function Cb(){return Cb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cb.apply(this,arguments)}function FA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function BA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FA(Object(r),!0).forEach(function(n){Eve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eve(e,t,r){return t=Nve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nve(e){var t=Tve(e,"string");return Vf(t)=="symbol"?t:t+""}function Tve(e,t){if(Vf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ave=function(t,r){var n=sn(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},U0=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,s=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,f=Math.asin(c/d)/Im,h=u?i:i+s*f,p=_t(r,n,d,h),v=_t(r,n,a,h),g=u?i-s*f:i,x=_t(r,n,d*Math.cos(f*Im),g);return{center:p,circleTangency:v,lineTangency:x,theta:f}},oD=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,s=t.startAngle,l=t.endAngle,c=Ave(s,l),u=s+c,d=_t(r,n,i,s),f=_t(r,n,i,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(s>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var p=_t(r,n,a,s),v=_t(r,n,a,u);h+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(s<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},Ove=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,s=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=sn(d-u),h=U0({cx:r,cy:n,radius:i,angle:u,sign:f,cornerRadius:s,cornerIsExternal:c}),p=h.circleTangency,v=h.lineTangency,g=h.theta,x=U0({cx:r,cy:n,radius:i,angle:d,sign:-f,cornerRadius:s,cornerIsExternal:c}),b=x.circleTangency,m=x.lineTangency,y=x.theta,_=c?Math.abs(u-d):Math.abs(u-d)-g-y;if(_<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):oD({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var w="M ".concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
  `);if(a>0){var S=U0({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),j=S.circleTangency,E=S.lineTangency,N=S.theta,A=U0({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),C=A.circleTangency,D=A.lineTangency,P=A.theta,H=c?Math.abs(u-d):Math.abs(u-d)-N-P;if(H<0&&s===0)return"".concat(w,"L").concat(r,",").concat(n,"Z");w+="L".concat(D.x,",").concat(D.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(C.x,",").concat(C.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(H>180),",").concat(+(f>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(E.x,",").concat(E.y,"Z")}else w+="L".concat(r,",").concat(n,"Z");return w},Cve={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},lD=function(t){var r=BA(BA({},Cve),t),n=r.cx,a=r.cy,i=r.innerRadius,s=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,h=r.className;if(s<i||d===f)return null;var p=qe("recharts-sector",h),v=s-i,g=on(l,v,0,!0),x;return g>0&&Math.abs(d-f)<360?x=Ove({cx:n,cy:a,innerRadius:i,outerRadius:s,cornerRadius:Math.min(g,v/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):x=oD({cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:d,endAngle:f}),z.createElement("path",Cb({},De(r,!0),{className:p,d:x,role:"img"}))};function Kf(e){"@babel/helpers - typeof";return Kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kf(e)}function kb(){return kb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kb.apply(this,arguments)}function UA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UA(Object(r),!0).forEach(function(n){kve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kve(e,t,r){return t=Pve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pve(e){var t=Rve(e,"string");return Kf(t)=="symbol"?t:t+""}function Rve(e,t){if(Kf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Kf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qA={curveBasisClosed:kne,curveBasisOpen:Pne,curveBasis:Cne,curveBumpX:gne,curveBumpY:vne,curveLinearClosed:Rne,curveLinear:iv,curveMonotoneX:Ine,curveMonotoneY:Dne,curveNatural:Mne,curveStep:Lne,curveStepAfter:Fne,curveStepBefore:$ne},z0=function(t){return t.x===+t.x&&t.y===+t.y},hd=function(t){return t.x},pd=function(t){return t.y},Ive=function(t,r){if(Me(t))return t;var n="curve".concat(nv(t));return(n==="curveMonotone"||n==="curveBump")&&r?qA["".concat(n).concat(r==="vertical"?"Y":"X")]:qA[n]||iv},Dve=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,s=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=Ive(n,l),f=u?i.filter(function(g){return z0(g)}):i,h;if(Array.isArray(s)){var p=u?s.filter(function(g){return z0(g)}):s,v=f.map(function(g,x){return zA(zA({},g),{},{base:p[x]})});return l==="vertical"?h=P0().y(pd).x1(hd).x0(function(g){return g.base.x}):h=P0().x(hd).y1(pd).y0(function(g){return g.base.y}),h.defined(z0).curve(d),h(v)}return l==="vertical"&&ve(s)?h=P0().y(pd).x1(hd).x0(s):ve(s)?h=P0().x(hd).y1(pd).y0(s):h=rI().x(hd).y(pd),h.defined(z0).curve(d),h(f)},Pb=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var s=n&&n.length?Dve(t):a;return T.createElement("path",kb({},De(t,!1),sm(t),{className:qe("recharts-curve",r),d:s,ref:i}))},cD={exports:{}},Mve="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Lve=Mve,$ve=Lve;function uD(){}function dD(){}dD.resetWarningCache=uD;var Fve=function(){function e(n,a,i,s,l,c){if(c!==$ve){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:dD,resetWarningCache:uD};return r.PropTypes=r,r};cD.exports=Fve();var Bve=cD.exports;const nt=it(Bve),{getOwnPropertyNames:Uve,getOwnPropertySymbols:zve}=Object,{hasOwnProperty:qve}=Object.prototype;function ey(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function q0(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);const{cache:i}=a,s=i.get(r),l=i.get(n);if(s&&l)return s===n&&l===r;i.set(r,n),i.set(n,r);const c=e(r,n,a);return i.delete(r),i.delete(n),c}}function Wve(e){return e!=null?e[Symbol.toStringTag]:void 0}function WA(e){return Uve(e).concat(zve(e))}const Hve=Object.hasOwn||((e,t)=>qve.call(e,t));function Al(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const Vve="__v",Kve="__o",Gve="_owner",{getOwnPropertyDescriptor:HA,keys:VA}=Object;function Xve(e,t){return e.byteLength===t.byteLength&&Mm(new Uint8Array(e),new Uint8Array(t))}function Yve(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function Qve(e,t){return e.byteLength===t.byteLength&&Mm(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function Jve(e,t){return Al(e.getTime(),t.getTime())}function Zve(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function exe(e,t){return e===t}function KA(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.entries();let s,l,c=0;for(;(s=i.next())&&!s.done;){const u=t.entries();let d=!1,f=0;for(;(l=u.next())&&!l.done;){if(a[f]){f++;continue}const h=s.value,p=l.value;if(r.equals(h[0],p[0],c,f,e,t,r)&&r.equals(h[1],p[1],h[0],p[0],e,t,r)){d=a[f]=!0;break}f++}if(!d)return!1;c++}return!0}const txe=Al;function rxe(e,t,r){const n=VA(e);let a=n.length;if(VA(t).length!==a)return!1;for(;a-- >0;)if(!fD(e,t,r,n[a]))return!1;return!0}function md(e,t,r){const n=WA(e);let a=n.length;if(WA(t).length!==a)return!1;let i,s,l;for(;a-- >0;)if(i=n[a],!fD(e,t,r,i)||(s=HA(e,i),l=HA(t,i),(s||l)&&(!s||!l||s.configurable!==l.configurable||s.enumerable!==l.enumerable||s.writable!==l.writable)))return!1;return!0}function nxe(e,t){return Al(e.valueOf(),t.valueOf())}function axe(e,t){return e.source===t.source&&e.flags===t.flags}function GA(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.values();let s,l;for(;(s=i.next())&&!s.done;){const c=t.values();let u=!1,d=0;for(;(l=c.next())&&!l.done;){if(!a[d]&&r.equals(s.value,l.value,s.value,l.value,e,t,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function Mm(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function ixe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function fD(e,t,r,n){return(n===Gve||n===Kve||n===Vve)&&(e.$$typeof||t.$$typeof)?!0:Hve(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const sxe="[object ArrayBuffer]",oxe="[object Arguments]",lxe="[object Boolean]",cxe="[object DataView]",uxe="[object Date]",dxe="[object Error]",fxe="[object Map]",hxe="[object Number]",pxe="[object Object]",mxe="[object RegExp]",gxe="[object Set]",vxe="[object String]",xxe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},yxe="[object URL]",bxe=Object.prototype.toString;function wxe({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:s,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:d,areSetsEqual:f,areTypedArraysEqual:h,areUrlsEqual:p,unknownTagComparators:v}){return function(x,b,m){if(x===b)return!0;if(x==null||b==null)return!1;const y=typeof x;if(y!==typeof b)return!1;if(y!=="object")return y==="number"?l(x,b,m):y==="function"?i(x,b,m):!1;const _=x.constructor;if(_!==b.constructor)return!1;if(_===Object)return c(x,b,m);if(Array.isArray(x))return t(x,b,m);if(_===Date)return n(x,b,m);if(_===RegExp)return d(x,b,m);if(_===Map)return s(x,b,m);if(_===Set)return f(x,b,m);const w=bxe.call(x);if(w===uxe)return n(x,b,m);if(w===mxe)return d(x,b,m);if(w===fxe)return s(x,b,m);if(w===gxe)return f(x,b,m);if(w===pxe)return typeof x.then!="function"&&typeof b.then!="function"&&c(x,b,m);if(w===yxe)return p(x,b,m);if(w===dxe)return a(x,b,m);if(w===oxe)return c(x,b,m);if(xxe[w])return h(x,b,m);if(w===sxe)return e(x,b,m);if(w===cxe)return r(x,b,m);if(w===lxe||w===hxe||w===vxe)return u(x,b,m);if(v){let S=v[w];if(!S){const j=Wve(x);j&&(S=v[j])}if(S)return S(x,b,m)}return!1}}function _xe({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:Xve,areArraysEqual:r?md:Yve,areDataViewsEqual:Qve,areDatesEqual:Jve,areErrorsEqual:Zve,areFunctionsEqual:exe,areMapsEqual:r?ey(KA,md):KA,areNumbersEqual:txe,areObjectsEqual:r?md:rxe,arePrimitiveWrappersEqual:nxe,areRegExpsEqual:axe,areSetsEqual:r?ey(GA,md):GA,areTypedArraysEqual:r?ey(Mm,md):Mm,areUrlsEqual:ixe,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const a=q0(n.areArraysEqual),i=q0(n.areMapsEqual),s=q0(n.areObjectsEqual),l=q0(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:l})}return n}function Sxe(e){return function(t,r,n,a,i,s,l){return e(t,r,l)}}function jxe({circular:e,comparator:t,createState:r,equals:n,strict:a}){if(r)return function(l,c){const{cache:u=e?new WeakMap:void 0,meta:d}=r();return t(l,c,{cache:u,equals:n,meta:d,strict:a})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(l,c){return t(l,c,i)}}const Exe=io();io({strict:!0});io({circular:!0});io({circular:!0,strict:!0});io({createInternalComparator:()=>Al});io({strict:!0,createInternalComparator:()=>Al});io({circular:!0,createInternalComparator:()=>Al});io({circular:!0,createInternalComparator:()=>Al,strict:!0});function io(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:a=!1}=e,i=_xe(e),s=wxe(i),l=r?r(s):Sxe(s);return jxe({circular:t,comparator:s,createState:n,equals:l,strict:a})}function Nxe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function XA(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):Nxe(a)};requestAnimationFrame(n)}function Rb(e){"@babel/helpers - typeof";return Rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rb(e)}function Txe(e){return kxe(e)||Cxe(e)||Oxe(e)||Axe()}function Axe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oxe(e,t){if(e){if(typeof e=="string")return YA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YA(e,t)}}function YA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Cxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kxe(e){if(Array.isArray(e))return e}function Pxe(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var s=i,l=Txe(s),c=l[0],u=l.slice(1);if(typeof c=="number"){XA(a.bind(null,u),c);return}a(c),XA(a.bind(null,u));return}Rb(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Gf(e){"@babel/helpers - typeof";return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gf(e)}function QA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function JA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QA(Object(r),!0).forEach(function(n){hD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hD(e,t,r){return t=Rxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rxe(e){var t=Ixe(e,"string");return Gf(t)==="symbol"?t:String(t)}function Ixe(e,t){if(Gf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dxe=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},Mxe=function(t){return t},Lxe=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Vd=function(t,r){return Object.keys(r).reduce(function(n,a){return JA(JA({},n),{},hD({},a,t(a,r[a])))},{})},ZA=function(t,r,n){return t.map(function(a){return"".concat(Lxe(a)," ").concat(r,"ms ").concat(n)}).join(",")};function $xe(e,t){return Uxe(e)||Bxe(e,t)||pD(e,t)||Fxe()}function Fxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bxe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function Uxe(e){if(Array.isArray(e))return e}function zxe(e){return Hxe(e)||Wxe(e)||pD(e)||qxe()}function qxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pD(e,t){if(e){if(typeof e=="string")return Ib(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ib(e,t)}}function Wxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Hxe(e){if(Array.isArray(e))return Ib(e)}function Ib(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Lm=1e-4,mD=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},gD=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},eO=function(t,r){return function(n){var a=mD(t,r);return gD(a,n)}},Vxe=function(t,r){return function(n){var a=mD(t,r),i=[].concat(zxe(a.map(function(s,l){return s*l}).slice(1)),[0]);return gD(i,n)}},tO=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],s=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,s=1,l=1;break;case"ease":a=.25,i=.1,s=.25,l=1;break;case"ease-in":a=.42,i=0,s=1,l=1;break;case"ease-out":a=.42,i=0,s=.58,l=1;break;case"ease-in-out":a=0,i=0,s=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),d=$xe(u,4);a=d[0],i=d[1],s=d[2],l=d[3]}}}var f=eO(a,s),h=eO(i,l),p=Vxe(a,s),v=function(b){return b>1?1:b<0?0:b},g=function(b){for(var m=b>1?1:b,y=m,_=0;_<8;++_){var w=f(y)-m,S=p(y);if(Math.abs(w-m)<Lm||S<Lm)return h(y);y=v(y-w/S)}return h(y)};return g.isStepper=!1,g},Kxe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,s=t.dt,l=s===void 0?17:s,c=function(d,f,h){var p=-(d-f)*n,v=h*i,g=h+(p-v)*l/1e3,x=h*l/1e3+d;return Math.abs(x-f)<Lm&&Math.abs(g)<Lm?[f,0]:[x,g]};return c.isStepper=!0,c.dt=l,c},Gxe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return tO(a);case"spring":return Kxe();default:if(a.split("(")[0]==="cubic-bezier")return tO(a)}return typeof a=="function"?a:null};function Xf(e){"@babel/helpers - typeof";return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xf(e)}function rO(e){return Qxe(e)||Yxe(e)||vD(e)||Xxe()}function Xxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Qxe(e){if(Array.isArray(e))return Mb(e)}function nO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Or(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nO(Object(r),!0).forEach(function(n){Db(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Db(e,t,r){return t=Jxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jxe(e){var t=Zxe(e,"string");return Xf(t)==="symbol"?t:String(t)}function Zxe(e,t){if(Xf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eye(e,t){return nye(e)||rye(e,t)||vD(e,t)||tye()}function tye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vD(e,t){if(e){if(typeof e=="string")return Mb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mb(e,t)}}function Mb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rye(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function nye(e){if(Array.isArray(e))return e}var $m=function(t,r,n){return t+(r-t)*n},Lb=function(t){var r=t.from,n=t.to;return r!==n},aye=function e(t,r,n){var a=Vd(function(i,s){if(Lb(s)){var l=t(s.from,s.to,s.velocity),c=eye(l,2),u=c[0],d=c[1];return Or(Or({},s),{},{from:u,velocity:d})}return s},r);return n<1?Vd(function(i,s){return Lb(s)?Or(Or({},s),{},{velocity:$m(s.velocity,a[i].velocity,n),from:$m(s.from,a[i].from,n)}):s},r):e(t,a,n-1)};const iye=function(e,t,r,n,a){var i=Dxe(e,t),s=i.reduce(function(x,b){return Or(Or({},x),{},Db({},b,[e[b],t[b]]))},{}),l=i.reduce(function(x,b){return Or(Or({},x),{},Db({},b,{from:e[b],velocity:0,to:t[b]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return Vd(function(b,m){return m.from},l)},p=function(){return!Object.values(l).filter(Lb).length},v=function(b){u||(u=b);var m=b-u,y=m/r.dt;l=aye(r,l,y),a(Or(Or(Or({},e),t),h())),u=b,p()||(c=requestAnimationFrame(f))},g=function(b){d||(d=b);var m=(b-d)/n,y=Vd(function(w,S){return $m.apply(void 0,rO(S).concat([r(m)]))},s);if(a(Or(Or(Or({},e),t),y)),m<1)c=requestAnimationFrame(f);else{var _=Vd(function(w,S){return $m.apply(void 0,rO(S).concat([r(1)]))},s);a(Or(Or(Or({},e),t),_))}};return f=r.isStepper?v:g,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function su(e){"@babel/helpers - typeof";return su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},su(e)}var sye=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function oye(e,t){if(e==null)return{};var r=lye(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function lye(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function ty(e){return fye(e)||dye(e)||uye(e)||cye()}function cye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uye(e,t){if(e){if(typeof e=="string")return $b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $b(e,t)}}function dye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fye(e){if(Array.isArray(e))return $b(e)}function $b(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function aO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aO(Object(r),!0).forEach(function(n){Td(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Td(e,t,r){return t=xD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xD(n.key),n)}}function mye(e,t,r){return t&&pye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xD(e){var t=gye(e,"string");return su(t)==="symbol"?t:String(t)}function gye(e,t){if(su(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(su(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fb(e,t)}function Fb(e,t){return Fb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Fb(e,t)}function xye(e){var t=yye();return function(){var n=Fm(e),a;if(t){var i=Fm(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Bb(this,a)}}function Bb(e,t){if(t&&(su(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ub(e)}function Ub(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fm(e){return Fm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fm(e)}var Vi=function(e){vye(r,e);var t=xye(r);function r(n,a){var i;hye(this,r),i=t.call(this,n,a);var s=i.props,l=s.isActive,c=s.attributeName,u=s.from,d=s.to,f=s.steps,h=s.children,p=s.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Ub(i)),i.changeStyle=i.changeStyle.bind(Ub(i)),!l||p<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:d}),Bb(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof h=="function")return i.state={style:u},Bb(i);i.state={style:c?Td({},c,u):u}}else i.state={style:{}};return i}return mye(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,s=a.canBegin;this.mounted=!0,!(!i||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,s=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,h=this.state.style;if(l){if(!s){var p={style:c?Td({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(p);return}if(!(Exe(a.to,d)&&a.canBegin&&a.isActive)){var v=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=v||u?f:a.to;if(this.state&&h){var x={style:c?Td({},c,g):g};(c&&h[c]!==g||!c&&h!==g)&&this.setState(x)}this.runAnimation(wa(wa({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,s=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,h=a.onAnimationStart,p=iye(s,l,Gxe(u),c,this.changeStyle),v=function(){i.stopJSAnimation=p()};this.manager.start([h,d,v,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,s=a.steps,l=a.begin,c=a.onAnimationStart,u=s[0],d=u.style,f=u.duration,h=f===void 0?0:f,p=function(g,x,b){if(b===0)return g;var m=x.duration,y=x.easing,_=y===void 0?"ease":y,w=x.style,S=x.properties,j=x.onAnimationEnd,E=b>0?s[b-1]:x,N=S||Object.keys(w);if(typeof _=="function"||_==="spring")return[].concat(ty(g),[i.runJSAnimation.bind(i,{from:E.style,to:w,duration:m,easing:_}),m]);var A=ZA(N,m,_),C=wa(wa(wa({},E.style),w),{},{transition:A});return[].concat(ty(g),[C,m,j]).filter(Mxe)};return this.manager.start([c].concat(ty(s.reduce(p,[d,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=Pxe());var i=a.begin,s=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,h=a.steps,p=a.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var g=l?Td({},l,c):c,x=ZA(Object.keys(g),s,u);v.start([d,i,wa(wa({},g),{},{transition:x}),s,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var s=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=oye(a,sye),u=T.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||s<=0)return i;var f=function(p){var v=p.props,g=v.style,x=g===void 0?{}:g,b=v.className,m=T.cloneElement(p,wa(wa({},c),{},{style:wa(wa({},x),d),className:b}));return m};return u===1?f(T.Children.only(i)):z.createElement("div",null,T.Children.map(i,function(h){return f(h)}))}}]),r}(T.PureComponent);Vi.displayName="Animate";Vi.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Vi.propTypes={from:nt.oneOfType([nt.object,nt.string]),to:nt.oneOfType([nt.object,nt.string]),attributeName:nt.string,duration:nt.number,begin:nt.number,easing:nt.oneOfType([nt.string,nt.func]),steps:nt.arrayOf(nt.shape({duration:nt.number.isRequired,style:nt.object.isRequired,easing:nt.oneOfType([nt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),nt.func]),properties:nt.arrayOf("string"),onAnimationEnd:nt.func})),children:nt.oneOfType([nt.node,nt.func]),isActive:nt.bool,canBegin:nt.bool,onAnimationEnd:nt.func,shouldReAnimate:nt.bool,onAnimationStart:nt.func,onAnimationReStart:nt.func};function Yf(e){"@babel/helpers - typeof";return Yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yf(e)}function Bm(){return Bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bm.apply(this,arguments)}function bye(e,t){return jye(e)||Sye(e,t)||_ye(e,t)||wye()}function wye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ye(e,t){if(e){if(typeof e=="string")return iO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iO(e,t)}}function iO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Sye(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function jye(e){if(Array.isArray(e))return e}function sO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function oO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sO(Object(r),!0).forEach(function(n){Eye(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eye(e,t,r){return t=Nye(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nye(e){var t=Tye(e,"string");return Yf(t)=="symbol"?t:t+""}function Tye(e,t){if(Yf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lO=function(t,r,n,a,i){var s=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(s>0&&i instanceof Array){for(var f=[0,0,0,0],h=0,p=4;h<p;h++)f[h]=i[h]>s?s:i[h];d="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*f[1])),d+="L ".concat(t+n,",").concat(r+a-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-c*f[2],",").concat(r+a)),d+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-l*f[3])),d+="Z"}else if(s>0&&i===+i&&i>0){var v=Math.min(s,i);d="M ".concat(t,",").concat(r+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+c*v,",").concat(r,`
            L `).concat(t+n-c*v,",").concat(r,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*v,`
            L `).concat(t+n,",").concat(r+a-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+n-c*v,",").concat(r+a,`
            L `).concat(t+c*v,",").concat(r+a,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t,",").concat(r+a-l*v," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},Aye=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,s=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),f=Math.min(s,s+c),h=Math.max(s,s+c);return n>=u&&n<=d&&a>=f&&a<=h}return!1},Oye={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},X2=function(t){var r=oO(oO({},Oye),t),n=T.useRef(),a=T.useState(-1),i=bye(a,2),s=i[0],l=i[1];T.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&l(_)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,h=r.radius,p=r.className,v=r.animationEasing,g=r.animationDuration,x=r.animationBegin,b=r.isAnimationActive,m=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var y=qe("recharts-rectangle",p);return m?z.createElement(Vi,{canBegin:s>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:g,animationEasing:v,isActive:m},function(_){var w=_.width,S=_.height,j=_.x,E=_.y;return z.createElement(Vi,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:g,isActive:b,easing:v},z.createElement("path",Bm({},De(r,!0),{className:y,d:lO(j,E,w,S,h),ref:n})))}):z.createElement("path",Bm({},De(r,!0),{className:y,d:lO(c,u,d,f,h)}))},Cye=["points","className","baseLinePoints","connectNulls"];function nc(){return nc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nc.apply(this,arguments)}function kye(e,t){if(e==null)return{};var r=Pye(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Pye(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function cO(e){return Mye(e)||Dye(e)||Iye(e)||Rye()}function Rye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Iye(e,t){if(e){if(typeof e=="string")return zb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zb(e,t)}}function Dye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Mye(e){if(Array.isArray(e))return zb(e)}function zb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var uO=function(t){return t&&t.x===+t.x&&t.y===+t.y},Lye=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){uO(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),uO(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Kd=function(t,r){var n=Lye(t);r&&(n=[n.reduce(function(i,s){return[].concat(cO(i),cO(s))},[])]);var a=n.map(function(i){return i.reduce(function(s,l,c){return"".concat(s).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},$ye=function(t,r,n){var a=Kd(t,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Kd(r.reverse(),n).slice(1))},Fye=function(t){var r=t.points,n=t.className,a=t.baseLinePoints,i=t.connectNulls,s=kye(t,Cye);if(!r||!r.length)return null;var l=qe("recharts-polygon",n);if(a&&a.length){var c=s.stroke&&s.stroke!=="none",u=$ye(r,a,i);return z.createElement("g",{className:l},z.createElement("path",nc({},De(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),c?z.createElement("path",nc({},De(s,!0),{fill:"none",d:Kd(r,i)})):null,c?z.createElement("path",nc({},De(s,!0),{fill:"none",d:Kd(a,i)})):null)}var d=Kd(r,i);return z.createElement("path",nc({},De(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",className:l,d}))};function qb(){return qb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qb.apply(this,arguments)}var Y2=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,s=qe("recharts-dot",i);return r===+r&&n===+n&&a===+a?T.createElement("circle",qb({},De(t,!1),sm(t),{className:s,cx:r,cy:n,r:a})):null};function Qf(e){"@babel/helpers - typeof";return Qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qf(e)}var Bye=["x","y","top","left","width","height","className"];function Wb(){return Wb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wb.apply(this,arguments)}function dO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Uye(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dO(Object(r),!0).forEach(function(n){zye(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zye(e,t,r){return t=qye(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qye(e){var t=Wye(e,"string");return Qf(t)=="symbol"?t:t+""}function Wye(e,t){if(Qf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hye(e,t){if(e==null)return{};var r=Vye(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Vye(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Kye=function(t,r,n,a,i,s){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(s,",").concat(r,"h").concat(n)},Gye=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,s=t.top,l=s===void 0?0:s,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,h=t.height,p=h===void 0?0:h,v=t.className,g=Hye(t,Bye),x=Uye({x:n,y:i,top:l,left:u,width:f,height:p},g);return!ve(n)||!ve(i)||!ve(f)||!ve(p)||!ve(l)||!ve(u)?null:z.createElement("path",Wb({},De(x,!0),{className:qe("recharts-cross",v),d:Kye(n,i,f,p,l,u)}))},Xye=gv,Yye=C6,Qye=di;function Jye(e,t){return e&&e.length?Xye(e,Qye(t),Yye):void 0}var Zye=Jye;const e1e=it(Zye);var t1e=gv,r1e=di,n1e=k6;function a1e(e,t){return e&&e.length?t1e(e,r1e(t),n1e):void 0}var i1e=a1e;const s1e=it(i1e);var o1e=["cx","cy","angle","ticks","axisLine"],l1e=["ticks","tick","angle","tickFormatter","stroke"];function ou(e){"@babel/helpers - typeof";return ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ou(e)}function Gd(){return Gd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gd.apply(this,arguments)}function fO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function po(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fO(Object(r),!0).forEach(function(n){Sv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hO(e,t){if(e==null)return{};var r=c1e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function c1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function u1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bD(n.key),n)}}function d1e(e,t,r){return t&&pO(e.prototype,t),r&&pO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f1e(e,t,r){return t=Um(t),h1e(e,yD()?Reflect.construct(t,r||[],Um(e).constructor):t.apply(e,r))}function h1e(e,t){if(t&&(ou(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p1e(e)}function p1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yD=function(){return!!e})()}function Um(e){return Um=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Um(e)}function m1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hb(e,t)}function Hb(e,t){return Hb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Hb(e,t)}function Sv(e,t,r){return t=bD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bD(e){var t=g1e(e,"string");return ou(t)=="symbol"?t:t+""}function g1e(e,t){if(ou(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ou(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var jv=function(e){function t(){return u1e(this,t),f1e(this,t,arguments)}return m1e(t,e),d1e(t,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,s=i.angle,l=i.cx,c=i.cy;return _t(l,c,a,s)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.angle,l=n.ticks,c=e1e(l,function(d){return d.coordinate||0}),u=s1e(l,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.angle,l=n.ticks,c=n.axisLine,u=hO(n,o1e),d=l.reduce(function(v,g){return[Math.min(v[0],g.coordinate),Math.max(v[1],g.coordinate)]},[1/0,-1/0]),f=_t(a,i,d[0],s),h=_t(a,i,d[1],s),p=po(po(po({},De(u,!1)),{},{fill:"none"},De(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return z.createElement("line",Gd({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,s=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=hO(a,l1e),f=this.getTickTextAnchor(),h=De(d,!1),p=De(s,!1),v=i.map(function(g,x){var b=n.getTickValueCoord(g),m=po(po(po(po({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(b.x,", ").concat(b.y,")")},h),{},{stroke:"none",fill:u},p),{},{index:x},b),{},{payload:g});return z.createElement(ct,Gd({className:qe("recharts-polar-radius-axis-tick",iD(s)),key:"tick-".concat(g.coordinate)},cl(n.props,g,x)),t.renderTickItem(s,m,c?c(g.value,x):g.value))});return z.createElement(ct,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,s=n.tick;return!a||!a.length?null:z.createElement(ct,{className:qe("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),s&&this.renderTicks(),xr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var s;return z.isValidElement(n)?s=z.cloneElement(n,a):Me(n)?s=n(a):s=z.createElement(ul,Gd({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),s}}])}(T.PureComponent);Sv(jv,"displayName","PolarRadiusAxis");Sv(jv,"axisType","radiusAxis");Sv(jv,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function lu(e){"@babel/helpers - typeof";return lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lu(e)}function To(){return To=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},To.apply(this,arguments)}function mO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mO(Object(r),!0).forEach(function(n){Ev(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function v1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_D(n.key),n)}}function x1e(e,t,r){return t&&gO(e.prototype,t),r&&gO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y1e(e,t,r){return t=zm(t),b1e(e,wD()?Reflect.construct(t,r||[],zm(e).constructor):t.apply(e,r))}function b1e(e,t){if(t&&(lu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w1e(e)}function w1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wD=function(){return!!e})()}function zm(e){return zm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zm(e)}function _1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vb(e,t)}function Vb(e,t){return Vb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Vb(e,t)}function Ev(e,t,r){return t=_D(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _D(e){var t=S1e(e,"string");return lu(t)=="symbol"?t:t+""}function S1e(e,t){if(lu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(lu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var j1e=Math.PI/180,vO=1e-5,Nv=function(e){function t(){return v1e(this,t),y1e(this,t,arguments)}return _1e(t,e),x1e(t,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,s=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,f=_t(i,s,l,n.coordinate),h=_t(i,s,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*j1e),s;return i>vO?s=a==="outer"?"start":"end":i<-vO?s=a==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.radius,l=n.axisLine,c=n.axisLineType,u=mo(mo({},De(this.props,!1)),{},{fill:"none"},De(l,!1));if(c==="circle")return z.createElement(Y2,To({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:s}));var d=this.props.ticks,f=d.map(function(h){return _t(a,i,s,h.coordinate)});return z.createElement(Fye,To({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,s=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=De(this.props,!1),f=De(s,!1),h=mo(mo({},d),{},{fill:"none"},De(l,!1)),p=i.map(function(v,g){var x=n.getTickLineCoord(v),b=n.getTickTextAnchor(v),m=mo(mo(mo({textAnchor:b},d),{},{stroke:"none",fill:u},f),{},{index:g,payload:v,x:x.x2,y:x.y2});return z.createElement(ct,To({className:qe("recharts-polar-angle-axis-tick",iD(s)),key:"tick-".concat(v.coordinate)},cl(n.props,v,g)),l&&z.createElement("line",To({className:"recharts-polar-angle-axis-tick-line"},h,x)),s&&t.renderTickItem(s,m,c?c(v.value,g):v.value))});return z.createElement(ct,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,s=n.axisLine;return i<=0||!a||!a.length?null:z.createElement(ct,{className:qe("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var s;return z.isValidElement(n)?s=z.cloneElement(n,a):Me(n)?s=n(a):s=z.createElement(ul,To({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),s}}])}(T.PureComponent);Ev(Nv,"displayName","PolarAngleAxis");Ev(Nv,"axisType","angleAxis");Ev(Nv,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var E1e=NI,N1e=E1e(Object.getPrototypeOf,Object),T1e=N1e,A1e=Zi,O1e=T1e,C1e=es,k1e="[object Object]",P1e=Function.prototype,R1e=Object.prototype,SD=P1e.toString,I1e=R1e.hasOwnProperty,D1e=SD.call(Object);function M1e(e){if(!C1e(e)||A1e(e)!=k1e)return!1;var t=O1e(e);if(t===null)return!0;var r=I1e.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&SD.call(r)==D1e}var L1e=M1e;const $1e=it(L1e);var F1e=Zi,B1e=es,U1e="[object Boolean]";function z1e(e){return e===!0||e===!1||B1e(e)&&F1e(e)==U1e}var q1e=z1e;const W1e=it(q1e);function Jf(e){"@babel/helpers - typeof";return Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jf(e)}function qm(){return qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qm.apply(this,arguments)}function H1e(e,t){return X1e(e)||G1e(e,t)||K1e(e,t)||V1e()}function V1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K1e(e,t){if(e){if(typeof e=="string")return xO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xO(e,t)}}function xO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function G1e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function X1e(e){if(Array.isArray(e))return e}function yO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yO(Object(r),!0).forEach(function(n){Y1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Y1e(e,t,r){return t=Q1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q1e(e){var t=J1e(e,"string");return Jf(t)=="symbol"?t:t+""}function J1e(e,t){if(Jf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Jf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wO=function(t,r,n,a,i){var s=n-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-s/2,",").concat(r+i),l+="L ".concat(t+n-s/2-a,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},Z1e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ebe=function(t){var r=bO(bO({},Z1e),t),n=T.useRef(),a=T.useState(-1),i=H1e(a,2),s=i[0],l=i[1];T.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var y=n.current.getTotalLength();y&&l(y)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,h=r.height,p=r.className,v=r.animationEasing,g=r.animationDuration,x=r.animationBegin,b=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var m=qe("recharts-trapezoid",p);return b?z.createElement(Vi,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:g,animationEasing:v,isActive:b},function(y){var _=y.upperWidth,w=y.lowerWidth,S=y.height,j=y.x,E=y.y;return z.createElement(Vi,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:g,easing:v},z.createElement("path",qm({},De(r,!0),{className:m,d:wO(j,E,_,w,S),ref:n})))}):z.createElement("g",null,z.createElement("path",qm({},De(r,!0),{className:m,d:wO(c,u,d,f,h)})))},tbe=["option","shapeType","propTransformer","activeClassName","isActive"];function Zf(e){"@babel/helpers - typeof";return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zf(e)}function rbe(e,t){if(e==null)return{};var r=nbe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function nbe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_O(Object(r),!0).forEach(function(n){abe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_O(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function abe(e,t,r){return t=ibe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ibe(e){var t=sbe(e,"string");return Zf(t)=="symbol"?t:t+""}function sbe(e,t){if(Zf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function obe(e,t){return Wm(Wm({},t),e)}function lbe(e,t){return e==="symbols"}function SO(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return z.createElement(X2,r);case"trapezoid":return z.createElement(ebe,r);case"sector":return z.createElement(lD,r);case"symbols":if(lbe(t))return z.createElement(p2,r);break;default:return null}}function cbe(e){return T.isValidElement(e)?e.props:e}function jD(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?obe:n,i=e.activeClassName,s=i===void 0?"recharts-active-shape":i,l=e.isActive,c=rbe(e,tbe),u;if(T.isValidElement(t))u=T.cloneElement(t,Wm(Wm({},c),cbe(t)));else if(Me(t))u=t(c);else if($1e(t)&&!W1e(t)){var d=a(t,c);u=z.createElement(SO,{shapeType:r,elementProps:d})}else{var f=c;u=z.createElement(SO,{shapeType:r,elementProps:f})}return l?z.createElement(ct,{className:s},u):u}function Tv(e,t){return t!=null&&"trapezoids"in e.props}function Av(e,t){return t!=null&&"sectors"in e.props}function eh(e,t){return t!=null&&"points"in e.props}function ube(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function dbe(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function fbe(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function hbe(e,t){var r;return Tv(e,t)?r=ube:Av(e,t)?r=dbe:eh(e,t)&&(r=fbe),r}function pbe(e,t){var r;return Tv(e,t)?r="trapezoids":Av(e,t)?r="sectors":eh(e,t)&&(r="points"),r}function mbe(e,t){if(Tv(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Av(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return eh(e,t)?t.payload:{}}function gbe(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=pbe(r,t),i=mbe(r,t),s=n.filter(function(c,u){var d=yv(i,c),f=r.props[a].filter(function(v){var g=hbe(r,t);return g(v,t)}),h=r.props[a].indexOf(f[f.length-1]),p=u===h;return d&&p}),l=n.indexOf(s[s.length-1]);return l}var op;function cu(e){"@babel/helpers - typeof";return cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cu(e)}function ac(){return ac=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ac.apply(this,arguments)}function jO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jO(Object(r),!0).forEach(function(n){oa(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ND(n.key),n)}}function xbe(e,t,r){return t&&EO(e.prototype,t),r&&EO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ybe(e,t,r){return t=Hm(t),bbe(e,ED()?Reflect.construct(t,r||[],Hm(e).constructor):t.apply(e,r))}function bbe(e,t){if(t&&(cu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wbe(e)}function wbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ED(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ED=function(){return!!e})()}function Hm(e){return Hm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hm(e)}function _be(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kb(e,t)}function Kb(e,t){return Kb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Kb(e,t)}function oa(e,t,r){return t=ND(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ND(e){var t=Sbe(e,"string");return cu(t)=="symbol"?t:t+""}function Sbe(e,t){if(cu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var za=function(e){function t(r){var n;return vbe(this,t),n=ybe(this,t,[r]),oa(n,"pieRef",null),oa(n,"sectorRefs",[]),oa(n,"id",Mh("recharts-pie-")),oa(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Me(a)&&a()}),oa(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Me(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return _be(t,e),xbe(t,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,d=De(this.props,!1),f=De(s,!1),h=De(l,!1),p=s&&s.offsetRadius||20,v=n.map(function(g,x){var b=(g.startAngle+g.endAngle)/2,m=_t(g.cx,g.cy,g.outerRadius+p,b),y=xt(xt(xt(xt({},d),g),{},{stroke:"none"},f),{},{index:x,textAnchor:t.getTextAnchor(m.x,g.cx)},m),_=xt(xt(xt(xt({},d),g),{},{fill:"none",stroke:g.fill},h),{},{index:x,points:[_t(g.cx,g.cy,g.outerRadius,b),m]}),w=c;return We(c)&&We(u)?w="value":We(c)&&(w=u),z.createElement(ct,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(x)},l&&t.renderLabelLineItem(l,_,"line"),t.renderLabelItem(s,y,Hr(g,w)))});return z.createElement(ct,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,s=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=a.isActiveIndex(d),h=c&&a.hasActiveIndex()?c:null,p=f?s:h,v=xt(xt({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return z.createElement(ct,ac({ref:function(x){x&&!a.sectorRefs.includes(x)&&a.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},cl(a.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),z.createElement(jD,ac({option:p,isActive:f,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,s=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state,h=f.prevSectors,p=f.prevIsAnimationActive;return z.createElement(Vi,{begin:l,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var g=v.t,x=[],b=i&&i[0],m=b.startAngle;return i.forEach(function(y,_){var w=h&&h[_],S=_>0?Wn(y,"paddingAngle",0):0;if(w){var j=ls(w.endAngle-w.startAngle,y.endAngle-y.startAngle),E=xt(xt({},y),{},{startAngle:m+S,endAngle:m+j(g)+S});x.push(E),m=E.endAngle}else{var N=y.endAngle,A=y.startAngle,C=ls(0,N-A),D=C(g),P=xt(xt({},y),{},{startAngle:m+S,endAngle:m+D+S});x.push(P),m=P.endAngle}}),z.createElement(ct,null,n.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var s=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[s].focus(),a.setState({sectorToFocus:s});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,s=this.state.prevSectors;return i&&a&&a.length&&(!s||!yv(s,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,s=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,f=a.innerRadius,h=a.outerRadius,p=a.isAnimationActive,v=this.state.isAnimationFinished;if(i||!s||!s.length||!ve(u)||!ve(d)||!ve(f)||!ve(h))return null;var g=qe("recharts-pie",l);return z.createElement(ct,{tabIndex:this.props.rootTabIndex,className:g,ref:function(b){n.pieRef=b}},this.renderSectors(),c&&this.renderLabels(s),xr.renderCallByParent(this.props,null,!1),(!p||v)&&Us.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(z.isValidElement(n))return z.cloneElement(n,a);if(Me(n))return n(a);var s=qe("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return z.createElement(Pb,ac({},a,{key:i,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(n,a,i){if(z.isValidElement(n))return z.cloneElement(n,a);var s=i;if(Me(n)&&(s=n(a),z.isValidElement(s)))return s;var l=qe("recharts-pie-label-text",typeof n!="boolean"&&!Me(n)?n.className:"");return z.createElement(ul,ac({},a,{alignmentBaseline:"middle",className:l}),s)}}])}(T.PureComponent);op=za;oa(za,"displayName","Pie");oa(za,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!qu.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});oa(za,"parseDeltaAngle",function(e,t){var r=sn(t-e),n=Math.min(Math.abs(t-e),360);return r*n});oa(za,"getRealPieData",function(e){var t=e.data,r=e.children,n=De(e,!1),a=da(r,ts);return t&&t.length?t.map(function(i,s){return xt(xt(xt({payload:i},n),i),a&&a[s]&&a[s].props)}):a&&a.length?a.map(function(i){return xt(xt({},n),i.props)}):[]});oa(za,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,i=t.height,s=aD(a,i),l=n+on(e.cx,a,a/2),c=r+on(e.cy,i,i/2),u=on(e.innerRadius,s,0),d=on(e.outerRadius,s,s*.8),f=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});oa(za,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?xt(xt({},t.type.defaultProps),t.props):t.props,a=op.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,s=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,h=n.tooltipType,p=Math.abs(n.minAngle),v=op.parseCoordinateOfPie(n,r),g=op.parseDeltaAngle(s,l),x=Math.abs(g),b=u;We(u)&&We(f)?($a(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):We(u)&&($a(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=f);var m=a.filter(function(E){return Hr(E,b,0)!==0}).length,y=(x>=360?m:m-1)*c,_=x-m*p-y,w=a.reduce(function(E,N){var A=Hr(N,b,0);return E+(ve(A)?A:0)},0),S;if(w>0){var j;S=a.map(function(E,N){var A=Hr(E,b,0),C=Hr(E,d,N),D=(ve(A)?A:0)/w,P;N?P=j.endAngle+sn(g)*c*(A!==0?1:0):P=s;var H=P+sn(g)*((A!==0?p:0)+D*_),V=(P+H)/2,ae=(v.innerRadius+v.outerRadius)/2,oe=[{name:C,value:A,payload:E,dataKey:b,type:h}],X=_t(v.cx,v.cy,ae,V);return j=xt(xt(xt({percent:D,cornerRadius:i,name:C,tooltipPayload:oe,midAngle:V,middleRadius:ae,tooltipPosition:X},E),v),{},{value:Hr(E,b),startAngle:P,endAngle:H,payload:E,paddingAngle:sn(g)*c}),j})}return xt(xt({},v),{},{sectors:S,data:a})});var jbe=Math.ceil,Ebe=Math.max;function Nbe(e,t,r,n){for(var a=-1,i=Ebe(jbe((t-e)/(r||1)),0),s=Array(i);i--;)s[n?i:++a]=e,e+=r;return s}var Tbe=Nbe,Abe=HI,NO=1/0,Obe=17976931348623157e292;function Cbe(e){if(!e)return e===0?e:0;if(e=Abe(e),e===NO||e===-NO){var t=e<0?-1:1;return t*Obe}return e===e?e:0}var TD=Cbe,kbe=Tbe,Pbe=cv,ry=TD;function Rbe(e){return function(t,r,n){return n&&typeof n!="number"&&Pbe(t,r,n)&&(r=n=void 0),t=ry(t),r===void 0?(r=t,t=0):r=ry(r),n=n===void 0?t<r?1:-1:ry(n),kbe(t,r,n,e)}}var Ibe=Rbe,Dbe=Ibe,Mbe=Dbe(),Lbe=Mbe;const Vm=it(Lbe);function th(e){"@babel/helpers - typeof";return th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},th(e)}function TO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function AO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TO(Object(r),!0).forEach(function(n){AD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AD(e,t,r){return t=$be(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $be(e){var t=Fbe(e,"string");return th(t)=="symbol"?t:t+""}function Fbe(e,t){if(th(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(th(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bbe=["Webkit","Moz","O","ms"],Ube=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=Bbe.reduce(function(i,s){return AO(AO({},i),{},AD({},s+n,r))},{});return a[t]=r,a};function uu(e){"@babel/helpers - typeof";return uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uu(e)}function Km(){return Km=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Km.apply(this,arguments)}function OO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ny(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OO(Object(r),!0).forEach(function(n){kn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,CD(n.key),n)}}function qbe(e,t,r){return t&&CO(e.prototype,t),r&&CO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wbe(e,t,r){return t=Gm(t),Hbe(e,OD()?Reflect.construct(t,r||[],Gm(e).constructor):t.apply(e,r))}function Hbe(e,t){if(t&&(uu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vbe(e)}function Vbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OD=function(){return!!e})()}function Gm(e){return Gm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gm(e)}function Kbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gb(e,t)}function Gb(e,t){return Gb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Gb(e,t)}function kn(e,t,r){return t=CD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CD(e){var t=Gbe(e,"string");return uu(t)=="symbol"?t:t+""}function Gbe(e,t){if(uu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(uu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Xbe=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,s=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=Wd().domain(Vm(0,c)).range([i,i+s-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},kO=function(t){return t.changedTouches&&!!t.changedTouches.length},du=function(e){function t(r){var n;return zbe(this,t),n=Wbe(this,t,[r]),kn(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),kn(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),kn(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,s=a.onDragEnd,l=a.startIndex;s==null||s({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),kn(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),kn(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),kn(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),kn(n,"handleSlideDragStart",function(a){var i=kO(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Kbe(t,e),qbe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,s=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(a,i),h=Math.max(a,i),p=t.getIndexInRange(s,f),v=t.getIndexInRange(s,h);return{startIndex:p-p%c,endIndex:v===d?d:v-v%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,s=a.tickFormatter,l=a.dataKey,c=Hr(i[n],l,n);return Me(s)?s(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,s=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,p=c.endIndex,v=c.onChange,g=n.pageX-i;g>0?g=Math.min(g,u+d-f-l,u+d-f-s):g<0&&(g=Math.max(g,u-s,u-l));var x=this.getIndex({startX:s+g,endX:l+g});(x.startIndex!==h||x.endIndex!==p)&&v&&v(x),this.setState({startX:s+g,endX:l+g,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=kO(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,s=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[s],d=this.props,f=d.x,h=d.width,p=d.travellerWidth,v=d.onChange,g=d.gap,x=d.data,b={startX:this.state.startX,endX:this.state.endX},m=n.pageX-i;m>0?m=Math.min(m,f+h-p-u):m<0&&(m=Math.max(m,f-u)),b[s]=u+m;var y=this.getIndex(b),_=y.startIndex,w=y.endIndex,S=function(){var E=x.length-1;return s==="startX"&&(l>c?_%g===0:w%g===0)||l<c&&w===E||s==="endX"&&(l>c?w%g===0:_%g===0)||l>c&&w===E};this.setState(kn(kn({},s,u+m),"brushMoveStartX",n.pageX),function(){v&&S()&&v(y)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,s=this.state,l=s.scaleValues,c=s.startX,u=s.endX,d=this.state[a],f=l.indexOf(d);if(f!==-1){var h=f+n;if(!(h===-1||h>=l.length)){var p=l[h];a==="startX"&&p>=u||a==="endX"&&p<=c||this.setState(kn({},a,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,l=n.height,c=n.fill,u=n.stroke;return z.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:s,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=T.Children.only(u);return f?z.cloneElement(f,{x:a,y:i,width:s,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,s,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,p=c.ariaLabel,v=c.data,g=c.startIndex,x=c.endIndex,b=Math.max(n,this.props.x),m=ny(ny({},De(this.props,!1)),{},{x:b,y:u,width:d,height:f}),y=p||"Min value: ".concat((i=v[g])===null||i===void 0?void 0:i.name,", Max value: ").concat((s=v[x])===null||s===void 0?void 0:s.name);return z.createElement(ct,{tabIndex:0,role:"slider","aria-label":y,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),l.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,m))}},{key:"renderSlide",value:function(n,a){var i=this.props,s=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return z.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:s,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,s=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,h=d.endX,p=5,v={pointerEvents:"none",fill:u};return z.createElement(ct,{className:"recharts-brush-texts"},z.createElement(ul,Km({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-p,y:s+l/2},v),this.getTextOfTick(a)),z.createElement(ul,Km({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+p,y:s+l/2},v),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,s=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,h=this.state,p=h.startX,v=h.endX,g=h.isTextActive,x=h.isSlideMoving,b=h.isTravellerMoving,m=h.isTravellerFocused;if(!a||!a.length||!ve(l)||!ve(c)||!ve(u)||!ve(d)||u<=0||d<=0)return null;var y=qe("recharts-brush",i),_=z.Children.count(s)===1,w=Ube("userSelect","none");return z.createElement(ct,{className:y,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(p,v),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(v,"endX"),(g||x||b||m||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,s=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return z.createElement(z.Fragment,null,z.createElement("rect",{x:a,y:i,width:s,height:l,fill:c,stroke:"none"}),z.createElement("line",{x1:a+1,y1:u,x2:a+s-1,y2:u,fill:"none",stroke:"#fff"}),z.createElement("line",{x1:a+1,y1:u+2,x2:a+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return z.isValidElement(n)?i=z.cloneElement(n,a):Me(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,s=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return ny({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:s},i&&i.length?Xbe({data:i,width:s,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(s!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+s-c]);var h=a.scale.domain().map(function(p){return a.scale(p)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:s,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,s=0,l=i-1;l-s>1;){var c=Math.floor((s+l)/2);n[c]>a?l=c:s=c}return a>=n[l]?l:s}}])}(T.PureComponent);kn(du,"displayName","Brush");kn(du,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Ybe=w2;function Qbe(e,t){var r;return Ybe(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var Jbe=Qbe,Zbe=xI,ewe=di,twe=Jbe,rwe=On,nwe=cv;function awe(e,t,r){var n=rwe(e)?Zbe:twe;return r&&nwe(e,t,r)&&(t=void 0),n(e,ewe(t))}var iwe=awe;const swe=it(iwe);var ni=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},PO=BI;function owe(e,t,r){t=="__proto__"&&PO?PO(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var lwe=owe,cwe=lwe,uwe=$I,dwe=di;function fwe(e,t){var r={};return t=dwe(t),uwe(e,function(n,a,i){cwe(r,a,t(n,a,i))}),r}var hwe=fwe;const pwe=it(hwe);function mwe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var gwe=mwe,vwe=w2;function xwe(e,t){var r=!0;return vwe(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var ywe=xwe,bwe=gwe,wwe=ywe,_we=di,Swe=On,jwe=cv;function Ewe(e,t,r){var n=Swe(e)?bwe:wwe;return r&&jwe(e,t,r)&&(t=void 0),n(e,_we(t))}var Nwe=Ewe;const kD=it(Nwe);var Twe=["x","y"];function rh(e){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rh(e)}function Xb(){return Xb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xb.apply(this,arguments)}function RO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RO(Object(r),!0).forEach(function(n){Awe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Awe(e,t,r){return t=Owe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Owe(e){var t=Cwe(e,"string");return rh(t)=="symbol"?t:t+""}function Cwe(e,t){if(rh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kwe(e,t){if(e==null)return{};var r=Pwe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Pwe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Rwe(e,t){var r=e.x,n=e.y,a=kwe(e,Twe),i="".concat(r),s=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return gd(gd(gd(gd(gd({},t),a),s?{x:s}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function IO(e){return z.createElement(jD,Xb({shapeType:"rectangle",propTransformer:Rwe,activeClassName:"recharts-active-bar"},e))}var Iwe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=ve(n)||rre(n);return i?t(n,a):(i||fl(),r)}},Dwe=["value","background"],PD;function fu(e){"@babel/helpers - typeof";return fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fu(e)}function Mwe(e,t){if(e==null)return{};var r=Lwe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Lwe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Xm(){return Xm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xm.apply(this,arguments)}function DO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DO(Object(r),!0).forEach(function(n){Os(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ID(n.key),n)}}function Fwe(e,t,r){return t&&MO(e.prototype,t),r&&MO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bwe(e,t,r){return t=Ym(t),Uwe(e,RD()?Reflect.construct(t,r||[],Ym(e).constructor):t.apply(e,r))}function Uwe(e,t){if(t&&(fu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zwe(e)}function zwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RD=function(){return!!e})()}function Ym(e){return Ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ym(e)}function qwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yb(e,t)}function Yb(e,t){return Yb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Yb(e,t)}function Os(e,t,r){return t=ID(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ID(e){var t=Wwe(e,"string");return fu(t)=="symbol"?t:t+""}function Wwe(e,t){if(fu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var wn=function(e){function t(){var r;$we(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Bwe(this,t,[].concat(a)),Os(r,"state",{isAnimationFinished:!1}),Os(r,"id",Mh("recharts-bar-")),Os(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),s&&s()}),Os(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),s&&s()}),r}return qwe(t,e),Fwe(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,s=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=De(this.props,!1);return n&&n.map(function(f,h){var p=h===c,v=p?u:s,g=Jt(Jt(Jt({},d),f),{},{isActive:p,option:v,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return z.createElement(ct,Xm({className:"recharts-bar-rectangle"},cl(a.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),z.createElement(IO,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,s=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,h=this.state.prevData;return z.createElement(Vi,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var v=p.t,g=i.map(function(x,b){var m=h&&h[b];if(m){var y=ls(m.x,x.x),_=ls(m.y,x.y),w=ls(m.width,x.width),S=ls(m.height,x.height);return Jt(Jt({},x),{},{x:y(v),y:_(v),width:w(v),height:S(v)})}if(s==="horizontal"){var j=ls(0,x.height),E=j(v);return Jt(Jt({},x),{},{y:x.y+x.height-E,height:E})}var N=ls(0,x.width),A=N(v);return Jt(Jt({},x),{},{width:A})});return z.createElement(ct,null,n.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,s=this.state.prevData;return i&&a&&a.length&&(!s||!yv(s,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,s=a.dataKey,l=a.activeIndex,c=De(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,h=Mwe(u,Dwe);if(!f)return null;var p=Jt(Jt(Jt(Jt(Jt({},h),{},{fill:"#eee"},f),c),cl(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:s,index:d,className:"recharts-bar-background-rectangle"});return z.createElement(IO,Xm({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},p))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=da(d,_v);if(!f)return null;var h=u==="vertical"?s[0].height/2:s[0].width/2,p=function(x,b){var m=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:m,errorVal:Hr(x,b)}},v={clipPath:n?"url(#clipPath-".concat(a,")"):null};return z.createElement(ct,v,f.map(function(g){return z.cloneElement(g,{key:"error-bar-".concat(a,"-").concat(g.props.dataKey),data:s,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,s=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,h=n.height,p=n.isAnimationActive,v=n.background,g=n.id;if(a||!i||!i.length)return null;var x=this.state.isAnimationFinished,b=qe("recharts-bar",s),m=l&&l.allowDataOverflow,y=c&&c.allowDataOverflow,_=m||y,w=We(g)?this.id:g;return z.createElement(ct,{className:b},m||y?z.createElement("defs",null,z.createElement("clipPath",{id:"clipPath-".concat(w)},z.createElement("rect",{x:m?u:u-f/2,y:y?d:d-h/2,width:m?f:f*2,height:y?h:h*2}))):null,z.createElement(ct,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(w,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,w),(!p||x)&&Us.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(T.PureComponent);PD=wn;Os(wn,"displayName","Bar");Os(wn,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!qu.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Os(wn,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,s=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,p=bge(n,r);if(!p)return null;var v=t.layout,g=r.type.defaultProps,x=g!==void 0?Jt(Jt({},g),r.props):r.props,b=x.dataKey,m=x.children,y=x.minPointSize,_=v==="horizontal"?s:i,w=u?_.scale.domain():null,S=Tge({numericAxis:_}),j=da(m,ts),E=f.map(function(N,A){var C,D,P,H,V,ae;u?C=wge(u[d+A],w):(C=Hr(N,b),Array.isArray(C)||(C=[S,C]));var oe=Iwe(y,PD.defaultProps.minPointSize)(C[1],A);if(v==="horizontal"){var X,re=[s.scale(C[0]),s.scale(C[1])],ue=re[0],me=re[1];D=AA({axis:i,ticks:l,bandSize:a,offset:p.offset,entry:N,index:A}),P=(X=me??ue)!==null&&X!==void 0?X:void 0,H=p.size;var R=ue-me;if(V=Number.isNaN(R)?0:R,ae={x:D,y:s.y,width:H,height:s.height},Math.abs(oe)>0&&Math.abs(V)<Math.abs(oe)){var W=sn(V||oe)*(Math.abs(oe)-Math.abs(V));P-=W,V+=W}}else{var U=[i.scale(C[0]),i.scale(C[1])],q=U[0],ie=U[1];if(D=q,P=AA({axis:s,ticks:c,bandSize:a,offset:p.offset,entry:N,index:A}),H=ie-q,V=p.size,ae={x:i.x,y:P,width:i.width,height:V},Math.abs(oe)>0&&Math.abs(H)<Math.abs(oe)){var Se=sn(H||oe)*(Math.abs(oe)-Math.abs(H));H+=Se}}return Jt(Jt(Jt({},N),{},{x:D,y:P,width:H,height:V,value:u?C:C[1],payload:N,background:ae},j&&j[A]&&j[A].props),{},{tooltipPayload:[rD(r,N)],tooltipPosition:{x:D+H/2,y:P+V/2}})});return Jt({data:E,layout:v},h)});function nh(e){"@babel/helpers - typeof";return nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nh(e)}function Hwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DD(n.key),n)}}function Vwe(e,t,r){return t&&LO(e.prototype,t),r&&LO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Oa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$O(Object(r),!0).forEach(function(n){Ov(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$O(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ov(e,t,r){return t=DD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DD(e){var t=Kwe(e,"string");return nh(t)=="symbol"?t:t+""}function Kwe(e,t){if(nh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(nh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gwe=function(t,r,n,a,i){var s=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},h=!!In(u,wn);return d.reduce(function(p,v){var g=r[v],x=g.orientation,b=g.domain,m=g.padding,y=m===void 0?{}:m,_=g.mirror,w=g.reversed,S="".concat(x).concat(_?"Mirror":""),j,E,N,A,C;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var D=b[1]-b[0],P=1/0,H=g.categoricalDomain.sort(ire);if(H.forEach(function(U,q){q>0&&(P=Math.min((U||0)-(H[q-1]||0),P))}),Number.isFinite(P)){var V=P/D,ae=g.layout==="vertical"?n.height:n.width;if(g.padding==="gap"&&(j=V*ae/2),g.padding==="no-gap"){var oe=on(t.barCategoryGap,V*ae),X=V*ae/2;j=X-oe-(X-oe)/ae*oe}}}a==="xAxis"?E=[n.left+(y.left||0)+(j||0),n.left+n.width-(y.right||0)-(j||0)]:a==="yAxis"?E=c==="horizontal"?[n.top+n.height-(y.bottom||0),n.top+(y.top||0)]:[n.top+(y.top||0)+(j||0),n.top+n.height-(y.bottom||0)-(j||0)]:E=g.range,w&&(E=[E[1],E[0]]);var re=J6(g,i,h),ue=re.scale,me=re.realScaleType;ue.domain(b).range(E),Z6(ue);var R=eD(ue,Oa(Oa({},g),{},{realScaleType:me}));a==="xAxis"?(C=x==="top"&&!_||x==="bottom"&&_,N=n.left,A=f[S]-C*g.height):a==="yAxis"&&(C=x==="left"&&!_||x==="right"&&_,N=f[S]-C*g.width,A=n.top);var W=Oa(Oa(Oa({},g),R),{},{realScaleType:me,x:N,y:A,scale:ue,width:a==="xAxis"?n.width:g.width,height:a==="yAxis"?n.height:g.height});return W.bandSize=Rm(W,R),!g.hide&&a==="xAxis"?f[S]+=(C?-1:1)*W.height:g.hide||(f[S]+=(C?-1:1)*W.width),Oa(Oa({},p),{},Ov({},v,W))},{})},MD=function(t,r){var n=t.x,a=t.y,i=r.x,s=r.y;return{x:Math.min(n,i),y:Math.min(a,s),width:Math.abs(i-n),height:Math.abs(s-a)}},Xwe=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return MD({x:r,y:n},{x:a,y:i})},LD=function(){function e(t){Hwe(this,e),this.scale=t}return Vwe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();Ov(LD,"EPS",1e-4);var Q2=function(t){var r=Object.keys(t).reduce(function(n,a){return Oa(Oa({},n),{},Ov({},a,LD.create(t[a])))},{});return Oa(Oa({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.bandAware,l=i.position;return pwe(a,function(c,u){return r[u].apply(c,{bandAware:s,position:l})})},isInRange:function(a){return kD(a,function(i,s){return r[s].isInRange(i)})}})};function Ywe(e){return(e%180+180)%180}var Qwe=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Ywe(a),s=i*Math.PI/180,l=Math.atan(n/r),c=s>l&&s<Math.PI-l?n/Math.sin(s):r/Math.cos(s);return Math.abs(c)},Jwe=di,Zwe=Lh,e_e=ov;function t_e(e){return function(t,r,n){var a=Object(t);if(!Zwe(t)){var i=Jwe(r);t=e_e(t),r=function(l){return i(a[l],l,a)}}var s=e(t,r,n);return s>-1?a[i?t[s]:s]:void 0}}var r_e=t_e,n_e=TD;function a_e(e){var t=n_e(e),r=t%1;return t===t?r?t-r:t:0}var i_e=a_e,s_e=PI,o_e=di,l_e=i_e,c_e=Math.max;function u_e(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:l_e(r);return a<0&&(a=c_e(n+a,0)),s_e(e,o_e(t),a)}var d_e=u_e,f_e=r_e,h_e=d_e,p_e=f_e(h_e),m_e=p_e;const g_e=it(m_e);var v_e=lte(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),J2=T.createContext(void 0),Z2=T.createContext(void 0),$D=T.createContext(void 0),FD=T.createContext({}),BD=T.createContext(void 0),UD=T.createContext(0),zD=T.createContext(0),FO=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,s=t.clipPathId,l=t.children,c=t.width,u=t.height,d=v_e(i);return z.createElement(J2.Provider,{value:n},z.createElement(Z2.Provider,{value:a},z.createElement(FD.Provider,{value:i},z.createElement($D.Provider,{value:d},z.createElement(BD.Provider,{value:s},z.createElement(UD.Provider,{value:u},z.createElement(zD.Provider,{value:c},l)))))))},x_e=function(){return T.useContext(BD)},qD=function(t){var r=T.useContext(J2);r==null&&fl();var n=r[t];return n==null&&fl(),n},y_e=function(){var t=T.useContext(J2);return ps(t)},b_e=function(){var t=T.useContext(Z2),r=g_e(t,function(n){return kD(n.domain,Number.isFinite)});return r||ps(t)},WD=function(t){var r=T.useContext(Z2);r==null&&fl();var n=r[t];return n==null&&fl(),n},w_e=function(){var t=T.useContext($D);return t},__e=function(){return T.useContext(FD)},eS=function(){return T.useContext(zD)},tS=function(){return T.useContext(UD)};function hu(e){"@babel/helpers - typeof";return hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hu(e)}function S_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j_e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,VD(n.key),n)}}function E_e(e,t,r){return t&&j_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function N_e(e,t,r){return t=Qm(t),T_e(e,HD()?Reflect.construct(t,r||[],Qm(e).constructor):t.apply(e,r))}function T_e(e,t){if(t&&(hu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A_e(e)}function A_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HD=function(){return!!e})()}function Qm(e){return Qm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qm(e)}function O_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qb(e,t)}function Qb(e,t){return Qb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Qb(e,t)}function BO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function UO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BO(Object(r),!0).forEach(function(n){rS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rS(e,t,r){return t=VD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VD(e){var t=C_e(e,"string");return hu(t)=="symbol"?t:t+""}function C_e(e,t){if(hu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function k_e(e,t){return D_e(e)||I_e(e,t)||R_e(e,t)||P_e()}function P_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R_e(e,t){if(e){if(typeof e=="string")return zO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zO(e,t)}}function zO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function D_e(e){if(Array.isArray(e))return e}function Jb(){return Jb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jb.apply(this,arguments)}var M_e=function(t,r){var n;return z.isValidElement(t)?n=z.cloneElement(t,r):Me(t)?n=t(r):n=z.createElement("line",Jb({},r,{className:"recharts-reference-line-line"})),n},L_e=function(t,r,n,a,i,s,l,c,u){var d=i.x,f=i.y,h=i.width,p=i.height;if(n){var v=u.y,g=t.y.apply(v,{position:s});if(ni(u,"discard")&&!t.y.isInRange(g))return null;var x=[{x:d+h,y:g},{x:d,y:g}];return c==="left"?x.reverse():x}if(r){var b=u.x,m=t.x.apply(b,{position:s});if(ni(u,"discard")&&!t.x.isInRange(m))return null;var y=[{x:m,y:f+p},{x:m,y:f}];return l==="top"?y.reverse():y}if(a){var _=u.segment,w=_.map(function(S){return t.apply(S,{position:s})});return ni(u,"discard")&&swe(w,function(S){return!t.isInRange(S)})?null:w}return null};function $_e(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,s=e.shape,l=e.className,c=e.alwaysShow,u=x_e(),d=qD(a),f=WD(i),h=w_e();if(!u||!h)return null;$a(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Q2({x:d.scale,y:f.scale}),v=dr(t),g=dr(r),x=n&&n.length===2,b=L_e(p,v,g,x,h,e.position,d.orientation,f.orientation,e);if(!b)return null;var m=k_e(b,2),y=m[0],_=y.x,w=y.y,S=m[1],j=S.x,E=S.y,N=ni(e,"hidden")?"url(#".concat(u,")"):void 0,A=UO(UO({clipPath:N},De(e,!0)),{},{x1:_,y1:w,x2:j,y2:E});return z.createElement(ct,{className:qe("recharts-reference-line",l)},M_e(s,A),xr.renderCallByParent(e,Xwe({x1:_,y1:w,x2:j,y2:E})))}var nS=function(e){function t(){return S_e(this,t),N_e(this,t,arguments)}return O_e(t,e),E_e(t,[{key:"render",value:function(){return z.createElement($_e,this.props)}}])}(z.Component);rS(nS,"displayName","ReferenceLine");rS(nS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Zb(){return Zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zb.apply(this,arguments)}function pu(e){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pu(e)}function qO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function WO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qO(Object(r),!0).forEach(function(n){Cv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function F_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B_e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GD(n.key),n)}}function U_e(e,t,r){return t&&B_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function z_e(e,t,r){return t=Jm(t),q_e(e,KD()?Reflect.construct(t,r||[],Jm(e).constructor):t.apply(e,r))}function q_e(e,t){if(t&&(pu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W_e(e)}function W_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KD=function(){return!!e})()}function Jm(e){return Jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jm(e)}function H_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ew(e,t)}function ew(e,t){return ew=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ew(e,t)}function Cv(e,t,r){return t=GD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GD(e){var t=V_e(e,"string");return pu(t)=="symbol"?t:t+""}function V_e(e,t){if(pu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var K_e=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,s=Q2({x:a.scale,y:i.scale}),l=s.apply({x:r,y:n},{bandAware:!0});return ni(t,"discard")&&!s.isInRange(l)?null:l},kv=function(e){function t(){return F_e(this,t),z_e(this,t,arguments)}return H_e(t,e),U_e(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,s=n.r,l=n.alwaysShow,c=n.clipPathId,u=dr(a),d=dr(i);if($a(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=K_e(this.props);if(!f)return null;var h=f.x,p=f.y,v=this.props,g=v.shape,x=v.className,b=ni(this.props,"hidden")?"url(#".concat(c,")"):void 0,m=WO(WO({clipPath:b},De(this.props,!0)),{},{cx:h,cy:p});return z.createElement(ct,{className:qe("recharts-reference-dot",x)},t.renderDot(g,m),xr.renderCallByParent(this.props,{x:h-s,y:p-s,width:2*s,height:2*s}))}}])}(z.Component);Cv(kv,"displayName","ReferenceDot");Cv(kv,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Cv(kv,"renderDot",function(e,t){var r;return z.isValidElement(e)?r=z.cloneElement(e,t):Me(e)?r=e(t):r=z.createElement(Y2,Zb({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function tw(){return tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tw.apply(this,arguments)}function mu(e){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mu(e)}function HO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function VO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HO(Object(r),!0).forEach(function(n){Pv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function G_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X_e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YD(n.key),n)}}function Y_e(e,t,r){return t&&X_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Q_e(e,t,r){return t=Zm(t),J_e(e,XD()?Reflect.construct(t,r||[],Zm(e).constructor):t.apply(e,r))}function J_e(e,t){if(t&&(mu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z_e(e)}function Z_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XD=function(){return!!e})()}function Zm(e){return Zm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zm(e)}function e2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rw(e,t)}function rw(e,t){return rw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},rw(e,t)}function Pv(e,t,r){return t=YD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YD(e){var t=t2e(e,"string");return mu(t)=="symbol"?t:t+""}function t2e(e,t){if(mu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var r2e=function(t,r,n,a,i){var s=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var h=Q2({x:d.scale,y:f.scale}),p={x:t?h.x.apply(s,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(c,{position:"start"}):h.y.rangeMin},v={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return ni(i,"discard")&&(!h.isInRange(p)||!h.isInRange(v))?null:MD(p,v)},Rv=function(e){function t(){return G_e(this,t),Q_e(this,t,arguments)}return e2e(t,e),Y_e(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,s=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;$a(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=dr(a),h=dr(i),p=dr(s),v=dr(l),g=this.props.shape;if(!f&&!h&&!p&&!v&&!g)return null;var x=r2e(f,h,p,v,this.props);if(!x&&!g)return null;var b=ni(this.props,"hidden")?"url(#".concat(d,")"):void 0;return z.createElement(ct,{className:qe("recharts-reference-area",c)},t.renderRect(g,VO(VO({clipPath:b},De(this.props,!0)),x)),xr.renderCallByParent(this.props,x))}}])}(z.Component);Pv(Rv,"displayName","ReferenceArea");Pv(Rv,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Pv(Rv,"renderRect",function(e,t){var r;return z.isValidElement(e)?r=z.cloneElement(e,t):Me(e)?r=e(t):r=z.createElement(X2,tw({},t,{className:"recharts-reference-area-rect"})),r});function QD(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function n2e(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Qwe(n,r)}function a2e(e,t,r){var n=r==="width",a=e.x,i=e.y,s=e.width,l=e.height;return t===1?{start:n?a:i,end:n?a+s:i+l}:{start:n?a+s:i+l,end:n?a:i}}function eg(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function i2e(e,t){return QD(e,t+1)}function s2e(e,t,r,n,a){for(var i=(n||[]).slice(),s=t.start,l=t.end,c=0,u=1,d=s,f=function(){var v=n==null?void 0:n[c];if(v===void 0)return{v:QD(n,u)};var g=c,x,b=function(){return x===void 0&&(x=r(v,g)),x},m=v.coordinate,y=c===0||eg(e,m,b,d,l);y||(c=0,d=s,u+=1),y&&(d=m+e*(b()/2+a),c+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function ah(e){"@babel/helpers - typeof";return ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ah(e)}function KO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KO(Object(r),!0).forEach(function(n){o2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o2e(e,t,r){return t=l2e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l2e(e){var t=c2e(e,"string");return ah(t)=="symbol"?t:t+""}function c2e(e,t){if(ah(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ah(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u2e(e,t,r,n,a){for(var i=(n||[]).slice(),s=i.length,l=t.start,c=t.end,u=function(h){var p=i[h],v,g=function(){return v===void 0&&(v=r(p,h)),v};if(h===s-1){var x=e*(p.coordinate+e*g()/2-c);i[h]=p=zr(zr({},p),{},{tickCoord:x>0?p.coordinate-x*e:p.coordinate})}else i[h]=p=zr(zr({},p),{},{tickCoord:p.coordinate});var b=eg(e,p.tickCoord,g,l,c);b&&(c=p.tickCoord-e*(g()/2+a),i[h]=zr(zr({},p),{},{isShow:!0}))},d=s-1;d>=0;d--)u(d);return i}function d2e(e,t,r,n,a,i){var s=(n||[]).slice(),l=s.length,c=t.start,u=t.end;if(i){var d=n[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);s[l-1]=d=zr(zr({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var p=eg(e,d.tickCoord,function(){return f},c,u);p&&(u=d.tickCoord-e*(f/2+a),s[l-1]=zr(zr({},d),{},{isShow:!0}))}for(var v=i?l-1:l,g=function(m){var y=s[m],_,w=function(){return _===void 0&&(_=r(y,m)),_};if(m===0){var S=e*(y.coordinate-e*w()/2-c);s[m]=y=zr(zr({},y),{},{tickCoord:S<0?y.coordinate-S*e:y.coordinate})}else s[m]=y=zr(zr({},y),{},{tickCoord:y.coordinate});var j=eg(e,y.tickCoord,w,c,u);j&&(c=y.tickCoord+e*(w()/2+a),s[m]=zr(zr({},y),{},{isShow:!0}))},x=0;x<v;x++)g(x);return s}function aS(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,s=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!a||!a.length||!n)return[];if(ve(c)||qu.isSsr)return i2e(a,typeof c=="number"&&ve(c)?c:0);var h=[],p=l==="top"||l==="bottom"?"width":"height",v=d&&p==="width"?qd(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=function(y,_){var w=Me(u)?u(y.value,_):y.value;return p==="width"?n2e(qd(w,{fontSize:t,letterSpacing:r}),v,f):qd(w,{fontSize:t,letterSpacing:r})[p]},x=a.length>=2?sn(a[1].coordinate-a[0].coordinate):1,b=a2e(i,x,p);return c==="equidistantPreserveStart"?s2e(x,b,g,a,s):(c==="preserveStart"||c==="preserveStartEnd"?h=d2e(x,b,g,a,s,c==="preserveStartEnd"):h=u2e(x,b,g,a,s),h.filter(function(m){return m.isShow}))}var f2e=["viewBox"],h2e=["viewBox"],p2e=["ticks"];function gu(e){"@babel/helpers - typeof";return gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gu(e)}function ic(){return ic=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ic.apply(this,arguments)}function GO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ir(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GO(Object(r),!0).forEach(function(n){iS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ay(e,t){if(e==null)return{};var r=m2e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function m2e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function g2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZD(n.key),n)}}function v2e(e,t,r){return t&&XO(e.prototype,t),r&&XO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function x2e(e,t,r){return t=tg(t),y2e(e,JD()?Reflect.construct(t,r||[],tg(e).constructor):t.apply(e,r))}function y2e(e,t){if(t&&(gu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b2e(e)}function b2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JD=function(){return!!e})()}function tg(e){return tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tg(e)}function w2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nw(e,t)}function nw(e,t){return nw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},nw(e,t)}function iS(e,t,r){return t=ZD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZD(e){var t=_2e(e,"string");return gu(t)=="symbol"?t:t+""}function _2e(e,t){if(gu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ku=function(e){function t(r){var n;return g2e(this,t),n=x2e(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return w2e(t,e),v2e(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,s=ay(n,f2e),l=this.props,c=l.viewBox,u=ay(l,h2e);return!bc(i,c)||!bc(s,u)||!bc(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,s=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,h=a.tickMargin,p,v,g,x,b,m,y=f?-1:1,_=n.tickSize||d,w=ve(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":p=v=n.coordinate,x=s+ +!f*c,g=x-y*_,m=g-y*h,b=w;break;case"left":g=x=n.coordinate,v=i+ +!f*l,p=v-y*_,b=p-y*h,m=w;break;case"right":g=x=n.coordinate,v=i+ +f*l,p=v+y*_,b=p+y*h,m=w;break;default:p=v=n.coordinate,x=s+ +f*c,g=x+y*_,m=g+y*h,b=w;break}return{line:{x1:p,y1:g,x2:v,y2:x},tick:{x:b,y:m}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s;switch(a){case"left":s=i?"start":"end";break;case"right":s=i?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s="end";switch(a){case"left":case"right":s="middle";break;case"top":s=i?"start":"end";break;default:s=i?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=ir(ir(ir({},De(this.props,!1)),De(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=ir(ir({},f),{},{x1:a,y1:i+h*l,x2:a+s,y2:i+h*l})}else{var p=+(c==="left"&&!u||c==="right"&&u);f=ir(ir({},f),{},{x1:a+p*s,y1:i,x2:a+p*s,y2:i+l})}return z.createElement("line",ic({},f,{className:qe("recharts-cartesian-axis-line",Wn(d,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var s=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,h=l.unit,p=aS(ir(ir({},this.props),{},{ticks:n}),a,i),v=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),x=De(this.props,!1),b=De(d,!1),m=ir(ir({},x),{},{fill:"none"},De(c,!1)),y=p.map(function(_,w){var S=s.getTickLineCoord(_),j=S.line,E=S.tick,N=ir(ir(ir(ir({textAnchor:v,verticalAnchor:g},x),{},{stroke:"none",fill:u},b),E),{},{index:w,payload:_,visibleTicksCount:p.length,tickFormatter:f});return z.createElement(ct,ic({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},cl(s.props,_,w)),c&&z.createElement("line",ic({},m,j,{className:qe("recharts-cartesian-axis-tick-line",Wn(c,"className"))})),d&&t.renderTickItem(d,N,"".concat(Me(f)?f(_.value,w):_.value).concat(h||"")))});return z.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,s=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,h=f.ticks,p=ay(f,p2e),v=h;return Me(c)&&(v=h&&h.length>0?c(this.props):c(p)),s<=0||l<=0||!v||!v.length?null:z.createElement(ct,{className:qe("recharts-cartesian-axis",u),ref:function(x){n.layerReference=x}},i&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),xr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var s,l=qe(a.className,"recharts-cartesian-axis-tick-value");return z.isValidElement(n)?s=z.cloneElement(n,ir(ir({},a),{},{className:l})):Me(n)?s=n(ir(ir({},a),{},{className:l})):s=z.createElement(ul,ic({},a,{className:"recharts-cartesian-axis-tick-value"}),i),s}}])}(T.Component);iS(Ku,"displayName","CartesianAxis");iS(Ku,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var S2e=["x1","y1","x2","y2","key"],j2e=["offset"];function hl(e){"@babel/helpers - typeof";return hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hl(e)}function YO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YO(Object(r),!0).forEach(function(n){E2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function E2e(e,t,r){return t=N2e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N2e(e){var t=T2e(e,"string");return hl(t)=="symbol"?t:t+""}function T2e(e,t){if(hl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lo(){return Lo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lo.apply(this,arguments)}function QO(e,t){if(e==null)return{};var r=A2e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function A2e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var O2e=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,s=t.width,l=t.height,c=t.ry;return z.createElement("rect",{x:a,y:i,ry:c,width:s,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function e8(e,t){var r;if(z.isValidElement(e))r=z.cloneElement(e,t);else if(Me(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,s=t.y2,l=t.key,c=QO(t,S2e),u=De(c,!1);u.offset;var d=QO(u,j2e);r=z.createElement("line",Lo({},d,{x1:n,y1:a,x2:i,y2:s,fill:"none",key:l}))}return r}function C2e(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(l,c){var u=Wr(Wr({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return e8(a,u)});return z.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function k2e(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(l,c){var u=Wr(Wr({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return e8(a,u)});return z.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function P2e(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,s=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,p){return h-p});a!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var v=!d[p+1],g=v?a+s-h:d[p+1]-h;if(g<=0)return null;var x=p%t.length;return z.createElement("rect",{key:"react-".concat(p),y:h,x:n,height:g,width:i,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return z.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function R2e(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,s=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var v=!d[p+1],g=v?i+l-h:d[p+1]-h;if(g<=0)return null;var x=p%n.length;return z.createElement("rect",{key:"react-".concat(p),x:h,y:s,width:g,height:c,stroke:"none",fill:n[x],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return z.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var I2e=function(t,r){var n=t.xAxis,a=t.width,i=t.height,s=t.offset;return Q6(aS(Wr(Wr(Wr({},Ku.defaultProps),n),{},{ticks:Ni(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.left,s.left+s.width,r)},D2e=function(t,r){var n=t.yAxis,a=t.width,i=t.height,s=t.offset;return Q6(aS(Wr(Wr(Wr({},Ku.defaultProps),n),{},{ticks:Ni(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.top,s.top+s.height,r)},Fl={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function pl(e){var t,r,n,a,i,s,l=eS(),c=tS(),u=__e(),d=Wr(Wr({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Fl.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Fl.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Fl.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Fl.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Fl.vertical,verticalFill:(s=e.verticalFill)!==null&&s!==void 0?s:Fl.verticalFill,x:ve(e.x)?e.x:u.left,y:ve(e.y)?e.y:u.top,width:ve(e.width)?e.width:u.width,height:ve(e.height)?e.height:u.height}),f=d.x,h=d.y,p=d.width,v=d.height,g=d.syncWithTicks,x=d.horizontalValues,b=d.verticalValues,m=y_e(),y=b_e();if(!ve(p)||p<=0||!ve(v)||v<=0||!ve(f)||f!==+f||!ve(h)||h!==+h)return null;var _=d.verticalCoordinatesGenerator||I2e,w=d.horizontalCoordinatesGenerator||D2e,S=d.horizontalPoints,j=d.verticalPoints;if((!S||!S.length)&&Me(w)){var E=x&&x.length,N=w({yAxis:y?Wr(Wr({},y),{},{ticks:E?x:y.ticks}):void 0,width:l,height:c,offset:u},E?!0:g);$a(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(hl(N),"]")),Array.isArray(N)&&(S=N)}if((!j||!j.length)&&Me(_)){var A=b&&b.length,C=_({xAxis:m?Wr(Wr({},m),{},{ticks:A?b:m.ticks}):void 0,width:l,height:c,offset:u},A?!0:g);$a(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(hl(C),"]")),Array.isArray(C)&&(j=C)}return z.createElement("g",{className:"recharts-cartesian-grid"},z.createElement(O2e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),z.createElement(C2e,Lo({},d,{offset:u,horizontalPoints:S,xAxis:m,yAxis:y})),z.createElement(k2e,Lo({},d,{offset:u,verticalPoints:j,xAxis:m,yAxis:y})),z.createElement(P2e,Lo({},d,{horizontalPoints:S})),z.createElement(R2e,Lo({},d,{verticalPoints:j})))}pl.displayName="CartesianGrid";function vu(e){"@babel/helpers - typeof";return vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vu(e)}function M2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L2e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n8(n.key),n)}}function $2e(e,t,r){return t&&L2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function F2e(e,t,r){return t=rg(t),B2e(e,t8()?Reflect.construct(t,r||[],rg(e).constructor):t.apply(e,r))}function B2e(e,t){if(t&&(vu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U2e(e)}function U2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(t8=function(){return!!e})()}function rg(e){return rg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rg(e)}function z2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aw(e,t)}function aw(e,t){return aw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},aw(e,t)}function r8(e,t,r){return t=n8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n8(e){var t=q2e(e,"string");return vu(t)=="symbol"?t:t+""}function q2e(e,t){if(vu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function iw(){return iw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iw.apply(this,arguments)}function W2e(e){var t=e.xAxisId,r=eS(),n=tS(),a=qD(t);return a==null?null:T.createElement(Ku,iw({},a,{className:qe("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(s){return Ni(s,!0)}}))}var Ki=function(e){function t(){return M2e(this,t),F2e(this,t,arguments)}return z2e(t,e),$2e(t,[{key:"render",value:function(){return T.createElement(W2e,this.props)}}])}(T.Component);r8(Ki,"displayName","XAxis");r8(Ki,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function xu(e){"@babel/helpers - typeof";return xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xu(e)}function H2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V2e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s8(n.key),n)}}function K2e(e,t,r){return t&&V2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function G2e(e,t,r){return t=ng(t),X2e(e,a8()?Reflect.construct(t,r||[],ng(e).constructor):t.apply(e,r))}function X2e(e,t){if(t&&(xu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y2e(e)}function Y2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a8=function(){return!!e})()}function ng(e){return ng=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ng(e)}function Q2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sw(e,t)}function sw(e,t){return sw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},sw(e,t)}function i8(e,t,r){return t=s8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s8(e){var t=J2e(e,"string");return xu(t)=="symbol"?t:t+""}function J2e(e,t){if(xu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ow(){return ow=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ow.apply(this,arguments)}var Z2e=function(t){var r=t.yAxisId,n=eS(),a=tS(),i=WD(r);return i==null?null:T.createElement(Ku,ow({},i,{className:qe("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return Ni(l,!0)}}))},Gi=function(e){function t(){return H2e(this,t),G2e(this,t,arguments)}return Q2e(t,e),K2e(t,[{key:"render",value:function(){return T.createElement(Z2e,this.props)}}])}(T.Component);i8(Gi,"displayName","YAxis");i8(Gi,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function JO(e){return nSe(e)||rSe(e)||tSe(e)||eSe()}function eSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tSe(e,t){if(e){if(typeof e=="string")return lw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lw(e,t)}}function rSe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nSe(e){if(Array.isArray(e))return lw(e)}function lw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var cw=function(t,r,n,a,i){var s=da(t,nS),l=da(t,kv),c=[].concat(JO(s),JO(l)),u=da(t,Rv),d="".concat(a,"Id"),f=a[0],h=r;if(c.length&&(h=c.reduce(function(g,x){if(x.props[d]===n&&ni(x.props,"extendDomain")&&ve(x.props[f])){var b=x.props[f];return[Math.min(g[0],b),Math.max(g[1],b)]}return g},h)),u.length){var p="".concat(f,"1"),v="".concat(f,"2");h=u.reduce(function(g,x){if(x.props[d]===n&&ni(x.props,"extendDomain")&&ve(x.props[p])&&ve(x.props[v])){var b=x.props[p],m=x.props[v];return[Math.min(g[0],b,m),Math.max(g[1],b,m)]}return g},h)}return i&&i.length&&(h=i.reduce(function(g,x){return ve(x)?[Math.min(g[0],x),Math.max(g[1],x)]:g},h)),h},o8={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new a(d,f||c,h),v=r?r+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],p]:c._events[v].push(p):(c._events[v]=p,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,v=new Array(p);h<p;h++)v[h]=f[h].fn;return v},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,p,v){var g=r?r+u:u;if(!this._events[g])return!1;var x=this._events[g],b=arguments.length,m,y;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),b){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,h),!0;case 5:return x.fn.call(x.context,d,f,h,p),!0;case 6:return x.fn.call(x.context,d,f,h,p,v),!0}for(y=1,m=new Array(b-1);y<b;y++)m[y-1]=arguments[y];x.fn.apply(x.context,m)}else{var _=x.length,w;for(y=0;y<_;y++)switch(x[y].once&&this.removeListener(u,x[y].fn,void 0,!0),b){case 1:x[y].fn.call(x[y].context);break;case 2:x[y].fn.call(x[y].context,d);break;case 3:x[y].fn.call(x[y].context,d,f);break;case 4:x[y].fn.call(x[y].context,d,f,h);break;default:if(!m)for(w=1,m=new Array(b-1);w<b;w++)m[w-1]=arguments[w];x[y].fn.apply(x[y].context,m)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return s(this,p),this;var v=this._events[p];if(v.fn)v.fn===d&&(!h||v.once)&&(!f||v.context===f)&&s(this,p);else{for(var g=0,x=[],b=v.length;g<b;g++)(v[g].fn!==d||h&&!v[g].once||f&&v[g].context!==f)&&x.push(v[g]);x.length?this._events[p]=x.length===1?x[0]:x:s(this,p)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&s(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(o8);var aSe=o8.exports;const iSe=it(aSe);var iy=new iSe,sy="recharts.syncMouseEvents";function ih(e){"@babel/helpers - typeof";return ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ih(e)}function sSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oSe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l8(n.key),n)}}function lSe(e,t,r){return t&&oSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function oy(e,t,r){return t=l8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l8(e){var t=cSe(e,"string");return ih(t)=="symbol"?t:t+""}function cSe(e,t){if(ih(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ih(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var uSe=function(){function e(){sSe(this,e),oy(this,"activeIndex",0),oy(this,"coordinateList",[]),oy(this,"layout","horizontal")}return lSe(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,s=r.container,l=s===void 0?null:s,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,h=r.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,s=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+c+u,h=s+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function dSe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&ve(n)&&ve(a))return!0}return!1}function fSe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function c8(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,s=_t(t,r,n,a),l=_t(t,r,n,i);return{points:[s,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function hSe(e,t,r){var n,a,i,s;if(e==="horizontal")n=t.x,i=n,a=r.top,s=r.top+r.height;else if(e==="vertical")a=t.y,s=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,h=_t(l,c,u,f),p=_t(l,c,d,f);n=h.x,a=h.y,i=p.x,s=p.y}else return c8(t);return[{x:n,y:a},{x:i,y:s}]}function sh(e){"@babel/helpers - typeof";return sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sh(e)}function ZO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function W0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZO(Object(r),!0).forEach(function(n){pSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pSe(e,t,r){return t=mSe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mSe(e){var t=gSe(e,"string");return sh(t)=="symbol"?t:t+""}function gSe(e,t){if(sh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vSe(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,s=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!i||!s||h!=="ScatterChart"&&a!=="axis")return null;var v,g=Pb;if(h==="ScatterChart")v=s,g=Gye;else if(h==="BarChart")v=fSe(f,s,c,d),g=X2;else if(f==="radial"){var x=c8(s),b=x.cx,m=x.cy,y=x.radius,_=x.startAngle,w=x.endAngle;v={cx:b,cy:m,startAngle:_,endAngle:w,innerRadius:y,outerRadius:y},g=lD}else v={points:hSe(f,s,c)},g=Pb;var S=W0(W0(W0(W0({stroke:"#ccc",pointerEvents:"none"},c),v),De(p,!1)),{},{payload:l,payloadIndex:u,className:qe("recharts-tooltip-cursor",p.className)});return T.isValidElement(p)?T.cloneElement(p,S):T.createElement(g,S)}var xSe=["item"],ySe=["children","className","width","height","style","compact","title","desc"];function yu(e){"@babel/helpers - typeof";return yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yu(e)}function sc(){return sc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sc.apply(this,arguments)}function eC(e,t){return _Se(e)||wSe(e,t)||d8(e,t)||bSe()}function bSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wSe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function _Se(e){if(Array.isArray(e))return e}function tC(e,t){if(e==null)return{};var r=SSe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function SSe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function jSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ESe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f8(n.key),n)}}function NSe(e,t,r){return t&&ESe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function TSe(e,t,r){return t=ag(t),ASe(e,u8()?Reflect.construct(t,r||[],ag(e).constructor):t.apply(e,r))}function ASe(e,t){if(t&&(yu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OSe(e)}function OSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u8=function(){return!!e})()}function ag(e){return ag=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ag(e)}function CSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uw(e,t)}function uw(e,t){return uw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},uw(e,t)}function bu(e){return RSe(e)||PSe(e)||d8(e)||kSe()}function kSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d8(e,t){if(e){if(typeof e=="string")return dw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dw(e,t)}}function PSe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function RSe(e){if(Array.isArray(e))return dw(e)}function dw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rC(Object(r),!0).forEach(function(n){Re(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Re(e,t,r){return t=f8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f8(e){var t=ISe(e,"string");return yu(t)=="symbol"?t:t+""}function ISe(e,t){if(yu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DSe={xAxis:["bottom","top"],yAxis:["left","right"]},MSe={width:"100%",height:"100%"},h8={x:0,y:0};function H0(e){return e}var LSe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},$Se=function(t,r,n,a){var i=r.find(function(d){return d&&d.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var s=i.coordinate,l=a.radius;return le(le(le({},a),_t(a.cx,a.cy,l,s)),{},{angle:s,radius:l})}var c=i.coordinate,u=a.angle;return le(le(le({},a),_t(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return h8},Iv=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,s=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(bu(l),bu(u)):l},[]);return s.length>0?s:t&&t.length&&ve(a)&&ve(i)?t.slice(a,i+1):[]};function p8(e){return e==="number"?[0,"auto"]:void 0}var fw=function(t,r,n,a){var i=t.graphicalItems,s=t.tooltipAxis,l=Iv(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(s.dataKey&&!s.allowDuplicatedCategory){var p=f===void 0?l:f;h=B1(p,s.dataKey,a)}else h=f&&f[n]||l[n];return h?[].concat(bu(c),[rD(u,h)]):c},[])},nC=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},s=LSe(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=pge(s,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=fw(t,r,d,f),p=$Se(n,l,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:p}}return null},FSe=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,s=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=t.stackOffset,p=Y6(d,i);return n.reduce(function(v,g){var x,b=g.type.defaultProps!==void 0?le(le({},g.type.defaultProps),g.props):g.props,m=b.type,y=b.dataKey,_=b.allowDataOverflow,w=b.allowDuplicatedCategory,S=b.scale,j=b.ticks,E=b.includeHidden,N=b[s];if(v[N])return v;var A=Iv(t.data,{graphicalItems:a.filter(function(R){var W,U=s in R.props?R.props[s]:(W=R.type.defaultProps)===null||W===void 0?void 0:W[s];return U===N}),dataStartIndex:c,dataEndIndex:u}),C=A.length,D,P,H;dSe(b.domain,_,m)&&(D=Tb(b.domain,null,_),p&&(m==="number"||S!=="auto")&&(H=Hd(A,y,"category")));var V=p8(m);if(!D||D.length===0){var ae,oe=(ae=b.domain)!==null&&ae!==void 0?ae:V;if(y){if(D=Hd(A,y,m),m==="category"&&p){var X=are(D);w&&X?(P=D,D=Vm(0,C)):w||(D=kA(oe,D,g).reduce(function(R,W){return R.indexOf(W)>=0?R:[].concat(bu(R),[W])},[]))}else if(m==="category")w?D=D.filter(function(R){return R!==""&&!We(R)}):D=kA(oe,D,g).reduce(function(R,W){return R.indexOf(W)>=0||W===""||We(W)?R:[].concat(bu(R),[W])},[]);else if(m==="number"){var re=yge(A,a.filter(function(R){var W,U,q=s in R.props?R.props[s]:(W=R.type.defaultProps)===null||W===void 0?void 0:W[s],ie="hide"in R.props?R.props.hide:(U=R.type.defaultProps)===null||U===void 0?void 0:U.hide;return q===N&&(E||!ie)}),y,i,d);re&&(D=re)}p&&(m==="number"||S!=="auto")&&(H=Hd(A,y,"category"))}else p?D=Vm(0,C):l&&l[N]&&l[N].hasStack&&m==="number"?D=h==="expand"?[0,1]:tD(l[N].stackGroups,c,u):D=X6(A,a.filter(function(R){var W=s in R.props?R.props[s]:R.type.defaultProps[s],U="hide"in R.props?R.props.hide:R.type.defaultProps.hide;return W===N&&(E||!U)}),m,d,!0);if(m==="number")D=cw(f,D,N,i,j),oe&&(D=Tb(oe,D,_));else if(m==="category"&&oe){var ue=oe,me=D.every(function(R){return ue.indexOf(R)>=0});me&&(D=ue)}}return le(le({},v),{},Re({},N,le(le({},b),{},{axisType:i,domain:D,categoricalDomain:H,duplicateDomain:P,originalDomain:(x=b.domain)!==null&&x!==void 0?x:V,isCategorical:p,layout:d})))},{})},BSe=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,s=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=Iv(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),p=h.length,v=Y6(d,i),g=-1;return n.reduce(function(x,b){var m=b.type.defaultProps!==void 0?le(le({},b.type.defaultProps),b.props):b.props,y=m[s],_=p8("number");if(!x[y]){g++;var w;return v?w=Vm(0,p):l&&l[y]&&l[y].hasStack?(w=tD(l[y].stackGroups,c,u),w=cw(f,w,y,i)):(w=Tb(_,X6(h,n.filter(function(S){var j,E,N=s in S.props?S.props[s]:(j=S.type.defaultProps)===null||j===void 0?void 0:j[s],A="hide"in S.props?S.props.hide:(E=S.type.defaultProps)===null||E===void 0?void 0:E.hide;return N===y&&!A}),"number",d),a.defaultProps.allowDataOverflow),w=cw(f,w,y,i)),le(le({},x),{},Re({},y,le(le({axisType:i},a.defaultProps),{},{hide:!0,orientation:Wn(DSe,"".concat(i,".").concat(g%2),null),domain:w,originalDomain:_,isCategorical:v,layout:d})))}return x},{})},USe=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,s=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(a,"Id"),h=da(d,i),p={};return h&&h.length?p=FSe(t,{axes:h,graphicalItems:s,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):s&&s.length&&(p=BSe(t,{Axis:i,graphicalItems:s,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),p},zSe=function(t){var r=ps(t),n=Ni(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:_2(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Rm(r,n)}},aC=function(t){var r=t.children,n=t.defaultShowTooltip,a=In(r,du),i=0,s=0;return t.data&&t.data.length!==0&&(s=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(s=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},qSe=function(t){return!t||!t.length?!1:t.some(function(r){var n=ki(r&&r.type);return n&&n.indexOf("Bar")>=0})},iC=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},WSe=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,s=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,h=n.margin||{},p=In(f,du),v=In(f,Pi),g=Object.keys(c).reduce(function(w,S){var j=c[S],E=j.orientation;return!j.mirror&&!j.hide?le(le({},w),{},Re({},E,w[E]+j.width)):w},{left:h.left||0,right:h.right||0}),x=Object.keys(s).reduce(function(w,S){var j=s[S],E=j.orientation;return!j.mirror&&!j.hide?le(le({},w),{},Re({},E,Wn(w,"".concat(E))+j.height)):w},{top:h.top||0,bottom:h.bottom||0}),b=le(le({},x),g),m=b.bottom;p&&(b.bottom+=p.props.height||du.defaultProps.height),v&&r&&(b=vge(b,a,n,r));var y=u-b.left-b.right,_=d-b.top-b.bottom;return le(le({brushBottom:m},b),{},{width:Math.max(y,0),height:Math.max(_,0)})},HSe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},m8=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,s=t.validateTooltipEventTypes,l=s===void 0?["axis"]:s,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,h=function(b,m){var y=m.graphicalItems,_=m.stackGroups,w=m.offset,S=m.updateId,j=m.dataStartIndex,E=m.dataEndIndex,N=b.barSize,A=b.layout,C=b.barGap,D=b.barCategoryGap,P=b.maxBarSize,H=iC(A),V=H.numericAxisName,ae=H.cateAxisName,oe=qSe(y),X=[];return y.forEach(function(re,ue){var me=Iv(b.data,{graphicalItems:[re],dataStartIndex:j,dataEndIndex:E}),R=re.type.defaultProps!==void 0?le(le({},re.type.defaultProps),re.props):re.props,W=R.dataKey,U=R.maxBarSize,q=R["".concat(V,"Id")],ie=R["".concat(ae,"Id")],Se={},Z=c.reduce(function(hn,qa){var so=m["".concat(qa.axisType,"Map")],Cn=R["".concat(qa.axisType,"Id")];so&&so[Cn]||qa.axisType==="zAxis"||fl();var oo=so[Cn];return le(le({},hn),{},Re(Re({},qa.axisType,oo),"".concat(qa.axisType,"Ticks"),Ni(oo)))},Se),K=Z[ae],te=Z["".concat(ae,"Ticks")],be=_&&_[q]&&_[q].hasStack&&Age(re,_[q].stackGroups),ne=ki(re.type).indexOf("Bar")>=0,Fe=Rm(K,te),Ce=[],st=oe&&mge({barSize:N,stackGroups:_,totalSize:HSe(Z,ae)});if(ne){var Be,we,Ht=We(U)?P:U,$r=(Be=(we=Rm(K,te,!0))!==null&&we!==void 0?we:Ht)!==null&&Be!==void 0?Be:0;Ce=gge({barGap:C,barCategoryGap:D,bandSize:$r!==Fe?$r:Fe,sizeList:st[ie],maxBarSize:Ht}),$r!==Fe&&(Ce=Ce.map(function(hn){return le(le({},hn),{},{position:le(le({},hn.position),{},{offset:hn.position.offset-$r/2})})}))}var Qn=re&&re.type&&re.type.getComposedData;Qn&&X.push({props:le(le({},Qn(le(le({},Z),{},{displayedData:me,props:b,dataKey:W,item:re,bandSize:Fe,barPosition:Ce,offset:w,stackedData:be,layout:A,dataStartIndex:j,dataEndIndex:E}))),{},Re(Re(Re({key:re.key||"item-".concat(ue)},V,Z[V]),ae,Z[ae]),"animationId",S)),childIndex:gre(re,b.children),item:re})}),X},p=function(b,m){var y=b.props,_=b.dataStartIndex,w=b.dataEndIndex,S=b.updateId;if(!EN({props:y}))return null;var j=y.children,E=y.layout,N=y.stackOffset,A=y.data,C=y.reverseStackOrder,D=iC(E),P=D.numericAxisName,H=D.cateAxisName,V=da(j,n),ae=Nge(A,V,"".concat(P,"Id"),"".concat(H,"Id"),N,C),oe=c.reduce(function(R,W){var U="".concat(W.axisType,"Map");return le(le({},R),{},Re({},U,USe(y,le(le({},W),{},{graphicalItems:V,stackGroups:W.axisType===P&&ae,dataStartIndex:_,dataEndIndex:w}))))},{}),X=WSe(le(le({},oe),{},{props:y,graphicalItems:V}),m==null?void 0:m.legendBBox);Object.keys(oe).forEach(function(R){oe[R]=d(y,oe[R],X,R.replace("Map",""),r)});var re=oe["".concat(H,"Map")],ue=zSe(re),me=h(y,le(le({},oe),{},{dataStartIndex:_,dataEndIndex:w,updateId:S,graphicalItems:V,stackGroups:ae,offset:X}));return le(le({formattedGraphicalItems:me,graphicalItems:V,offset:X,stackGroups:ae},ue),oe)},v=function(x){function b(m){var y,_,w;return jSe(this,b),w=TSe(this,b,[m]),Re(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Re(w,"accessibilityManager",new uSe),Re(w,"handleLegendBBoxUpdate",function(S){if(S){var j=w.state,E=j.dataStartIndex,N=j.dataEndIndex,A=j.updateId;w.setState(le({legendBBox:S},p({props:w.props,dataStartIndex:E,dataEndIndex:N,updateId:A},le(le({},w.state),{},{legendBBox:S}))))}}),Re(w,"handleReceiveSyncEvent",function(S,j,E){if(w.props.syncId===S){if(E===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(j)}}),Re(w,"handleBrushChange",function(S){var j=S.startIndex,E=S.endIndex;if(j!==w.state.dataStartIndex||E!==w.state.dataEndIndex){var N=w.state.updateId;w.setState(function(){return le({dataStartIndex:j,dataEndIndex:E},p({props:w.props,dataStartIndex:j,dataEndIndex:E,updateId:N},w.state))}),w.triggerSyncEvent({dataStartIndex:j,dataEndIndex:E})}}),Re(w,"handleMouseEnter",function(S){var j=w.getMouseInfo(S);if(j){var E=le(le({},j),{},{isTooltipActive:!0});w.setState(E),w.triggerSyncEvent(E);var N=w.props.onMouseEnter;Me(N)&&N(E,S)}}),Re(w,"triggeredAfterMouseMove",function(S){var j=w.getMouseInfo(S),E=j?le(le({},j),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(E),w.triggerSyncEvent(E);var N=w.props.onMouseMove;Me(N)&&N(E,S)}),Re(w,"handleItemMouseEnter",function(S){w.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Re(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),Re(w,"handleMouseMove",function(S){S.persist(),w.throttleTriggeredAfterMouseMove(S)}),Re(w,"handleMouseLeave",function(S){w.throttleTriggeredAfterMouseMove.cancel();var j={isTooltipActive:!1};w.setState(j),w.triggerSyncEvent(j);var E=w.props.onMouseLeave;Me(E)&&E(j,S)}),Re(w,"handleOuterEvent",function(S){var j=mre(S),E=Wn(w.props,"".concat(j));if(j&&Me(E)){var N,A;/.*touch.*/i.test(j)?A=w.getMouseInfo(S.changedTouches[0]):A=w.getMouseInfo(S),E((N=A)!==null&&N!==void 0?N:{},S)}}),Re(w,"handleClick",function(S){var j=w.getMouseInfo(S);if(j){var E=le(le({},j),{},{isTooltipActive:!0});w.setState(E),w.triggerSyncEvent(E);var N=w.props.onClick;Me(N)&&N(E,S)}}),Re(w,"handleMouseDown",function(S){var j=w.props.onMouseDown;if(Me(j)){var E=w.getMouseInfo(S);j(E,S)}}),Re(w,"handleMouseUp",function(S){var j=w.props.onMouseUp;if(Me(j)){var E=w.getMouseInfo(S);j(E,S)}}),Re(w,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Re(w,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseDown(S.changedTouches[0])}),Re(w,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseUp(S.changedTouches[0])}),Re(w,"handleDoubleClick",function(S){var j=w.props.onDoubleClick;if(Me(j)){var E=w.getMouseInfo(S);j(E,S)}}),Re(w,"handleContextMenu",function(S){var j=w.props.onContextMenu;if(Me(j)){var E=w.getMouseInfo(S);j(E,S)}}),Re(w,"triggerSyncEvent",function(S){w.props.syncId!==void 0&&iy.emit(sy,w.props.syncId,S,w.eventEmitterSymbol)}),Re(w,"applySyncEvent",function(S){var j=w.props,E=j.layout,N=j.syncMethod,A=w.state.updateId,C=S.dataStartIndex,D=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)w.setState(le({dataStartIndex:C,dataEndIndex:D},p({props:w.props,dataStartIndex:C,dataEndIndex:D,updateId:A},w.state)));else if(S.activeTooltipIndex!==void 0){var P=S.chartX,H=S.chartY,V=S.activeTooltipIndex,ae=w.state,oe=ae.offset,X=ae.tooltipTicks;if(!oe)return;if(typeof N=="function")V=N(X,S);else if(N==="value"){V=-1;for(var re=0;re<X.length;re++)if(X[re].value===S.activeLabel){V=re;break}}var ue=le(le({},oe),{},{x:oe.left,y:oe.top}),me=Math.min(P,ue.x+ue.width),R=Math.min(H,ue.y+ue.height),W=X[V]&&X[V].value,U=fw(w.state,w.props.data,V),q=X[V]?{x:E==="horizontal"?X[V].coordinate:me,y:E==="horizontal"?R:X[V].coordinate}:h8;w.setState(le(le({},S),{},{activeLabel:W,activeCoordinate:q,activePayload:U,activeTooltipIndex:V}))}else w.setState(S)}),Re(w,"renderCursor",function(S){var j,E=w.state,N=E.isTooltipActive,A=E.activeCoordinate,C=E.activePayload,D=E.offset,P=E.activeTooltipIndex,H=E.tooltipAxisBandSize,V=w.getTooltipEventType(),ae=(j=S.props.active)!==null&&j!==void 0?j:N,oe=w.props.layout,X=S.key||"_recharts-cursor";return z.createElement(vSe,{key:X,activeCoordinate:A,activePayload:C,activeTooltipIndex:P,chartName:r,element:S,isActive:ae,layout:oe,offset:D,tooltipAxisBandSize:H,tooltipEventType:V})}),Re(w,"renderPolarAxis",function(S,j,E){var N=Wn(S,"type.axisType"),A=Wn(w.state,"".concat(N,"Map")),C=S.type.defaultProps,D=C!==void 0?le(le({},C),S.props):S.props,P=A&&A[D["".concat(N,"Id")]];return T.cloneElement(S,le(le({},P),{},{className:qe(N,P.className),key:S.key||"".concat(j,"-").concat(E),ticks:Ni(P,!0)}))}),Re(w,"renderPolarGrid",function(S){var j=S.props,E=j.radialLines,N=j.polarAngles,A=j.polarRadius,C=w.state,D=C.radiusAxisMap,P=C.angleAxisMap,H=ps(D),V=ps(P),ae=V.cx,oe=V.cy,X=V.innerRadius,re=V.outerRadius;return T.cloneElement(S,{polarAngles:Array.isArray(N)?N:Ni(V,!0).map(function(ue){return ue.coordinate}),polarRadius:Array.isArray(A)?A:Ni(H,!0).map(function(ue){return ue.coordinate}),cx:ae,cy:oe,innerRadius:X,outerRadius:re,key:S.key||"polar-grid",radialLines:E})}),Re(w,"renderLegend",function(){var S=w.state.formattedGraphicalItems,j=w.props,E=j.children,N=j.width,A=j.height,C=w.props.margin||{},D=N-(C.left||0)-(C.right||0),P=K6({children:E,formattedGraphicalItems:S,legendWidth:D,legendContent:u});if(!P)return null;var H=P.item,V=tC(P,xSe);return T.cloneElement(H,le(le({},V),{},{chartWidth:N,chartHeight:A,margin:C,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),Re(w,"renderTooltip",function(){var S,j=w.props,E=j.children,N=j.accessibilityLayer,A=In(E,vr);if(!A)return null;var C=w.state,D=C.isTooltipActive,P=C.activeCoordinate,H=C.activePayload,V=C.activeLabel,ae=C.offset,oe=(S=A.props.active)!==null&&S!==void 0?S:D;return T.cloneElement(A,{viewBox:le(le({},ae),{},{x:ae.left,y:ae.top}),active:oe,label:V,payload:oe?H:[],coordinate:P,accessibilityLayer:N})}),Re(w,"renderBrush",function(S){var j=w.props,E=j.margin,N=j.data,A=w.state,C=A.offset,D=A.dataStartIndex,P=A.dataEndIndex,H=A.updateId;return T.cloneElement(S,{key:S.key||"_recharts-brush",onChange:B0(w.handleBrushChange,S.props.onChange),data:N,x:ve(S.props.x)?S.props.x:C.left,y:ve(S.props.y)?S.props.y:C.top+C.height+C.brushBottom-(E.bottom||0),width:ve(S.props.width)?S.props.width:C.width,startIndex:D,endIndex:P,updateId:"brush-".concat(H)})}),Re(w,"renderReferenceElement",function(S,j,E){if(!S)return null;var N=w,A=N.clipPathId,C=w.state,D=C.xAxisMap,P=C.yAxisMap,H=C.offset,V=S.type.defaultProps||{},ae=S.props,oe=ae.xAxisId,X=oe===void 0?V.xAxisId:oe,re=ae.yAxisId,ue=re===void 0?V.yAxisId:re;return T.cloneElement(S,{key:S.key||"".concat(j,"-").concat(E),xAxis:D[X],yAxis:P[ue],viewBox:{x:H.left,y:H.top,width:H.width,height:H.height},clipPathId:A})}),Re(w,"renderActivePoints",function(S){var j=S.item,E=S.activePoint,N=S.basePoint,A=S.childIndex,C=S.isRange,D=[],P=j.props.key,H=j.item.type.defaultProps!==void 0?le(le({},j.item.type.defaultProps),j.item.props):j.item.props,V=H.activeDot,ae=H.dataKey,oe=le(le({index:A,dataKey:ae,cx:E.x,cy:E.y,r:4,fill:G2(j.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},De(V,!1)),sm(V));return D.push(b.renderActiveDot(V,oe,"".concat(P,"-activePoint-").concat(A))),N?D.push(b.renderActiveDot(V,le(le({},oe),{},{cx:N.x,cy:N.y}),"".concat(P,"-basePoint-").concat(A))):C&&D.push(null),D}),Re(w,"renderGraphicChild",function(S,j,E){var N=w.filterFormatItem(S,j,E);if(!N)return null;var A=w.getTooltipEventType(),C=w.state,D=C.isTooltipActive,P=C.tooltipAxis,H=C.activeTooltipIndex,V=C.activeLabel,ae=w.props.children,oe=In(ae,vr),X=N.props,re=X.points,ue=X.isRange,me=X.baseLine,R=N.item.type.defaultProps!==void 0?le(le({},N.item.type.defaultProps),N.item.props):N.item.props,W=R.activeDot,U=R.hide,q=R.activeBar,ie=R.activeShape,Se=!!(!U&&D&&oe&&(W||q||ie)),Z={};A!=="axis"&&oe&&oe.props.trigger==="click"?Z={onClick:B0(w.handleItemMouseEnter,S.props.onClick)}:A!=="axis"&&(Z={onMouseLeave:B0(w.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:B0(w.handleItemMouseEnter,S.props.onMouseEnter)});var K=T.cloneElement(S,le(le({},N.props),Z));function te(qa){return typeof P.dataKey=="function"?P.dataKey(qa.payload):null}if(Se)if(H>=0){var be,ne;if(P.dataKey&&!P.allowDuplicatedCategory){var Fe=typeof P.dataKey=="function"?te:"payload.".concat(P.dataKey.toString());be=B1(re,Fe,V),ne=ue&&me&&B1(me,Fe,V)}else be=re==null?void 0:re[H],ne=ue&&me&&me[H];if(ie||q){var Ce=S.props.activeIndex!==void 0?S.props.activeIndex:H;return[T.cloneElement(S,le(le(le({},N.props),Z),{},{activeIndex:Ce})),null,null]}if(!We(be))return[K].concat(bu(w.renderActivePoints({item:N,activePoint:be,basePoint:ne,childIndex:H,isRange:ue})))}else{var st,Be=(st=w.getItemByXY(w.state.activeCoordinate))!==null&&st!==void 0?st:{graphicalItem:K},we=Be.graphicalItem,Ht=we.item,$r=Ht===void 0?S:Ht,Qn=we.childIndex,hn=le(le(le({},N.props),Z),{},{activeIndex:Qn});return[T.cloneElement($r,hn),null,null]}return ue?[K,null,null]:[K,null]}),Re(w,"renderCustomized",function(S,j,E){return T.cloneElement(S,le(le({key:"recharts-customized-".concat(E)},w.props),w.state))}),Re(w,"renderMap",{CartesianGrid:{handler:H0,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:H0},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:H0},YAxis:{handler:H0},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((y=m.id)!==null&&y!==void 0?y:Mh("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=VI(w.triggeredAfterMouseMove,(_=m.throttleDelay)!==null&&_!==void 0?_:1e3/60),w.state={},w}return CSe(b,x),NSe(b,[{key:"componentDidMount",value:function(){var y,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(y=this.props.margin.left)!==null&&y!==void 0?y:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var y=this.props,_=y.children,w=y.data,S=y.height,j=y.layout,E=In(_,vr);if(E){var N=E.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var A=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,C=fw(this.state,w,N,A),D=this.state.tooltipTicks[N].coordinate,P=(this.state.offset.top+S)/2,H=j==="horizontal",V=H?{x:D,y:P}:{y:D,x:P},ae=this.state.formattedGraphicalItems.find(function(X){var re=X.item;return re.type.name==="Scatter"});ae&&(V=le(le({},V),ae.props.points[N].tooltipPosition),C=ae.props.points[N].tooltipPayload);var oe={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:A,activePayload:C,activeCoordinate:V};this.setState(oe),this.renderCursor(E),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(y,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==y.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==y.margin){var w,S;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(y){z1([In(y.children,vr)],[In(this.props.children,vr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var y=In(this.props.children,vr);if(y&&typeof y.props.shared=="boolean"){var _=y.props.shared?"axis":"item";return l.indexOf(_)>=0?_:i}return i}},{key:"getMouseInfo",value:function(y){if(!this.container)return null;var _=this.container,w=_.getBoundingClientRect(),S=zfe(w),j={chartX:Math.round(y.pageX-S.left),chartY:Math.round(y.pageY-S.top)},E=w.width/_.offsetWidth||1,N=this.inRange(j.chartX,j.chartY,E);if(!N)return null;var A=this.state,C=A.xAxisMap,D=A.yAxisMap,P=this.getTooltipEventType(),H=nC(this.state,this.props.data,this.props.layout,N);if(P!=="axis"&&C&&D){var V=ps(C).scale,ae=ps(D).scale,oe=V&&V.invert?V.invert(j.chartX):null,X=ae&&ae.invert?ae.invert(j.chartY):null;return le(le({},j),{},{xValue:oe,yValue:X},H)}return H?le(le({},j),H):null}},{key:"inRange",value:function(y,_){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,j=y/w,E=_/w;if(S==="horizontal"||S==="vertical"){var N=this.state.offset,A=j>=N.left&&j<=N.left+N.width&&E>=N.top&&E<=N.top+N.height;return A?{x:j,y:E}:null}var C=this.state,D=C.angleAxisMap,P=C.radiusAxisMap;if(D&&P){var H=ps(D);return IA({x:j,y:E},H)}return null}},{key:"parseEventsOfWrapper",value:function(){var y=this.props.children,_=this.getTooltipEventType(),w=In(y,vr),S={};w&&_==="axis"&&(w.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var j=sm(this.props,this.handleOuterEvent);return le(le({},j),S)}},{key:"addListener",value:function(){iy.on(sy,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){iy.removeListener(sy,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(y,_,w){for(var S=this.state.formattedGraphicalItems,j=0,E=S.length;j<E;j++){var N=S[j];if(N.item===y||N.props.key===y.key||_===ki(N.item.type)&&w===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var y=this.clipPathId,_=this.state.offset,w=_.left,S=_.top,j=_.height,E=_.width;return z.createElement("defs",null,z.createElement("clipPath",{id:y},z.createElement("rect",{x:w,y:S,height:j,width:E})))}},{key:"getXScales",value:function(){var y=this.state.xAxisMap;return y?Object.entries(y).reduce(function(_,w){var S=eC(w,2),j=S[0],E=S[1];return le(le({},_),{},Re({},j,E.scale))},{}):null}},{key:"getYScales",value:function(){var y=this.state.yAxisMap;return y?Object.entries(y).reduce(function(_,w){var S=eC(w,2),j=S[0],E=S[1];return le(le({},_),{},Re({},j,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(y){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[y])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(y){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[y])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(y){var _=this.state,w=_.formattedGraphicalItems,S=_.activeItem;if(w&&w.length)for(var j=0,E=w.length;j<E;j++){var N=w[j],A=N.props,C=N.item,D=C.type.defaultProps!==void 0?le(le({},C.type.defaultProps),C.props):C.props,P=ki(C.type);if(P==="Bar"){var H=(A.data||[]).find(function(X){return Aye(y,X)});if(H)return{graphicalItem:N,payload:H}}else if(P==="RadialBar"){var V=(A.data||[]).find(function(X){return IA(y,X)});if(V)return{graphicalItem:N,payload:V}}else if(Tv(N,S)||Av(N,S)||eh(N,S)){var ae=gbe({graphicalItem:N,activeTooltipItem:S,itemData:D.data}),oe=D.activeIndex===void 0?ae:D.activeIndex;return{graphicalItem:le(le({},N),{},{childIndex:oe}),payload:eh(N,S)?D.data[ae]:N.props.data[ae]}}}return null}},{key:"render",value:function(){var y=this;if(!EN(this))return null;var _=this.props,w=_.children,S=_.className,j=_.width,E=_.height,N=_.style,A=_.compact,C=_.title,D=_.desc,P=tC(_,ySe),H=De(P,!1);if(A)return z.createElement(FO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},z.createElement(W1,sc({},H,{width:j,height:E,title:C,desc:D}),this.renderClipPath(),TN(w,this.renderMap)));if(this.props.accessibilityLayer){var V,ae;H.tabIndex=(V=this.props.tabIndex)!==null&&V!==void 0?V:0,H.role=(ae=this.props.role)!==null&&ae!==void 0?ae:"application",H.onKeyDown=function(X){y.accessibilityManager.keyboardEvent(X)},H.onFocus=function(){y.accessibilityManager.focus()}}var oe=this.parseEventsOfWrapper();return z.createElement(FO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},z.createElement("div",sc({className:qe("recharts-wrapper",S),style:le({position:"relative",cursor:"default",width:j,height:E},N)},oe,{ref:function(re){y.container=re}}),z.createElement(W1,sc({},H,{width:j,height:E,title:C,desc:D,style:MSe}),this.renderClipPath(),TN(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(T.Component);Re(v,"displayName",r),Re(v,"defaultProps",le({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Re(v,"getDerivedStateFromProps",function(x,b){var m=x.dataKey,y=x.data,_=x.children,w=x.width,S=x.height,j=x.layout,E=x.stackOffset,N=x.margin,A=b.dataStartIndex,C=b.dataEndIndex;if(b.updateId===void 0){var D=aC(x);return le(le(le({},D),{},{updateId:0},p(le(le({props:x},D),{},{updateId:0}),b)),{},{prevDataKey:m,prevData:y,prevWidth:w,prevHeight:S,prevLayout:j,prevStackOffset:E,prevMargin:N,prevChildren:_})}if(m!==b.prevDataKey||y!==b.prevData||w!==b.prevWidth||S!==b.prevHeight||j!==b.prevLayout||E!==b.prevStackOffset||!bc(N,b.prevMargin)){var P=aC(x),H={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},V=le(le({},nC(b,y,j)),{},{updateId:b.updateId+1}),ae=le(le(le({},P),H),V);return le(le(le({},ae),p(le({props:x},ae),b)),{},{prevDataKey:m,prevData:y,prevWidth:w,prevHeight:S,prevLayout:j,prevStackOffset:E,prevMargin:N,prevChildren:_})}if(!z1(_,b.prevChildren)){var oe,X,re,ue,me=In(_,du),R=me&&(oe=(X=me.props)===null||X===void 0?void 0:X.startIndex)!==null&&oe!==void 0?oe:A,W=me&&(re=(ue=me.props)===null||ue===void 0?void 0:ue.endIndex)!==null&&re!==void 0?re:C,U=R!==A||W!==C,q=!We(y),ie=q&&!U?b.updateId:b.updateId+1;return le(le({updateId:ie},p(le(le({props:x},b),{},{updateId:ie,dataStartIndex:R,dataEndIndex:W}),b)),{},{prevChildren:_,dataStartIndex:R,dataEndIndex:W})}return null}),Re(v,"renderActiveDot",function(x,b,m){var y;return T.isValidElement(x)?y=T.cloneElement(x,b):Me(x)?y=x(b):y=z.createElement(Y2,b),z.createElement(ct,{className:"recharts-active-dot",key:m},y)});var g=T.forwardRef(function(b,m){return z.createElement(v,sc({},b,{ref:m}))});return g.displayName=v.displayName,g},wu=m8({chartName:"BarChart",GraphicalChild:wn,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Ki},{axisType:"yAxis",AxisComp:Gi}],formatAxisMap:Gwe}),sS=m8({chartName:"PieChart",GraphicalChild:za,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Nv},{axisType:"radiusAxis",AxisComp:jv}],formatAxisMap:$ge,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const vd={ASIGNADA:"#3b82f6",RECUPERADA:"#8b5cf6",CERRADA:"#6b7280",PERDIDA:"#ef4444",DETERIORO:"#f97316"},VSe=({loans:e})=>{const t=T.useMemo(()=>{const a={},i=new Date;for(let s=7;s>=0;s--){const l=new Date(i);l.setDate(l.getDate()-s*7);const c=`S${8-s}`;a[c]=0}return e.forEach(s=>{const l=new Date(s.issued_at),c=Math.floor((i.getTime()-l.getTime())/(1e3*60*60*24*7));if(c>=0&&c<8){const u=`S${8-c}`;a[u]!==void 0&&a[u]++}}),Object.entries(a).map(([s,l])=>({week:s,count:l}))},[e]),r=T.useMemo(()=>{const a=e.filter(s=>s.reason==="PERDIDA").length,i=e.filter(s=>s.reason==="DETERIORO").length;return[{name:"Perdida",value:a,color:vd.PERDIDA},{name:"Deterioro",value:i,color:vd.DETERIORO}].filter(s=>s.value>0)},[e]),n=T.useMemo(()=>Xs.map(a=>{const i=e.filter(s=>{var l;return((l=s.backup_cards)==null?void 0:l.inventory_terminal)===a});return{terminal:a.split(" ")[0],ASIGNADA:i.filter(s=>s.status==="ASIGNADA").length,RECUPERADA:i.filter(s=>s.status==="RECUPERADA").length,CERRADA:i.filter(s=>s.status==="CERRADA").length}}),[e]);return o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Prestamos por Semana"}),o.jsx("div",{className:"h-48",children:o.jsx(Ri,{width:"100%",height:"100%",children:o.jsxs(wu,{data:t,children:[o.jsx(pl,{strokeDasharray:"3 3",vertical:!1}),o.jsx(Ki,{dataKey:"week",tick:{fontSize:11}}),o.jsx(Gi,{tick:{fontSize:11},allowDecimals:!1}),o.jsx(vr,{}),o.jsx(wn,{dataKey:"count",name:"Prestamos",fill:"#3b82f6",radius:[4,4,0,0]})]})})})]}),o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Motivo de Solicitud"}),o.jsx("div",{className:"h-48",children:r.length>0?o.jsx(Ri,{width:"100%",height:"100%",children:o.jsxs(sS,{children:[o.jsx(za,{data:r,cx:"50%",cy:"50%",innerRadius:40,outerRadius:70,paddingAngle:2,dataKey:"value",label:({name:a,percent:i})=>`${a} ${(i*100).toFixed(0)}%`,labelLine:!1,children:r.map((a,i)=>o.jsx(ts,{fill:a.color},`cell-${i}`))}),o.jsx(vr,{})]})}):o.jsx("div",{className:"h-full flex items-center justify-center text-slate-400 text-sm",children:"Sin datos"})})]}),o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Estado por Terminal"}),o.jsx("div",{className:"h-48",children:o.jsx(Ri,{width:"100%",height:"100%",children:o.jsxs(wu,{data:n,layout:"vertical",children:[o.jsx(pl,{strokeDasharray:"3 3",horizontal:!1}),o.jsx(Ki,{type:"number",tick:{fontSize:11},allowDecimals:!1}),o.jsx(Gi,{type:"category",dataKey:"terminal",tick:{fontSize:11},width:60}),o.jsx(vr,{}),o.jsx(Pi,{wrapperStyle:{fontSize:10}}),o.jsx(wn,{dataKey:"ASIGNADA",name:"Asignada",stackId:"a",fill:vd.ASIGNADA}),o.jsx(wn,{dataKey:"RECUPERADA",name:"Recuperada",stackId:"a",fill:vd.RECUPERADA}),o.jsx(wn,{dataKey:"CERRADA",name:"Cerrada",stackId:"a",fill:vd.CERRADA})]})})})]})]})},ig=e=>e.replace(/[.\-\s]/g,"").toUpperCase(),ml=e=>{const t=ig(e);if(t.length<2)return t;const r=t.slice(0,-1),n=t.slice(-1);return`${r.replace(/\B(?=(\d{3})+(?!\d))/g,".")}-${n}`},sC=e=>{const t=ig(e);if(t.length<8||t.length>9)return!1;const r=t.slice(0,-1),n=t.slice(-1);if(!/^\d+$/.test(r))return!1;let a=0,i=2;for(let c=r.length-1;c>=0;c--)a+=parseInt(r[c])*i,i=i===7?2:i+1;const s=a%11,l=s===0?"0":s===1?"K":String(11-s);return n===l},KSe=({status:e,isOverdue:t})=>{const r="inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded-full";if(t&&e==="ASIGNADA")return o.jsxs("span",{className:`${r} bg-amber-100 text-amber-800`,children:[o.jsx(Ug,{className:"w-3 h-3"}),"ATRASADA"]});const n={ASIGNADA:"bg-blue-100 text-blue-800",RECUPERADA:"bg-emerald-100 text-emerald-800",CERRADA:"bg-slate-100 text-slate-700",CANCELADA:"bg-red-100 text-red-800"};return o.jsx("span",{className:`${r} ${n[e]||"bg-slate-100 text-slate-700"}`,children:e})},GSe=({reason:e})=>{const t={PERDIDA:"bg-red-50 text-red-700",DETERIORO:"bg-orange-50 text-orange-700"};return o.jsx("span",{className:`inline-block px-2 py-0.5 text-xs font-medium rounded ${t[e]||""}`,children:e==="PERDIDA"?"Perdida":"Deterioro"})},XSe=({loans:e,onView:t,onEdit:r,onRecover:n,onCancel:a,onResendEmails:i})=>{const s=T.useMemo(()=>{const l=new Date;return e.map(c=>{const u=new Date(c.issued_at),d=Math.floor((l.getTime()-u.getTime())/(1e3*60*60*24));return{...c,daysPassed:d,isOverdue:c.status==="ASIGNADA"&&d>c.alert_after_days}})},[e]);return e.length===0?o.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:o.jsx("p",{className:"text-slate-500",children:"No se encontraron prestamos con los filtros seleccionados."})}):o.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[o.jsx("thead",{className:"bg-slate-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Trabajador"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"RUT"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Terminal"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Tarjeta"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Motivo"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Entrega"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Dias"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Estado"}),o.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:s.map(l=>{var c,u;return o.jsxs("tr",{className:`hover:bg-slate-50 ${l.isOverdue?"bg-amber-50/50":""}`,children:[o.jsxs("td",{className:"px-4 py-3 whitespace-nowrap",children:[o.jsx("p",{className:"text-sm font-medium text-slate-900",children:l.person_name}),o.jsx("p",{className:"text-xs text-slate-500",children:l.person_cargo||"-"})]}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-700",children:ml(l.person_rut)}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-700",children:l.person_terminal}),o.jsxs("td",{className:"px-4 py-3 whitespace-nowrap",children:[o.jsx("p",{className:"text-sm font-mono text-slate-900",children:((c=l.backup_cards)==null?void 0:c.card_number)||"-"}),o.jsx("p",{className:"text-xs text-slate-500",children:(u=l.backup_cards)==null?void 0:u.inventory_terminal})]}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsx(GSe,{reason:l.reason})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-700",children:new Date(l.issued_at).toLocaleDateString("es-CL")}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsxs("span",{className:`text-sm font-medium ${l.isOverdue?"text-amber-600":"text-slate-700"}`,children:[l.daysPassed,"d"]})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsx(KSe,{status:l.status,isOverdue:l.isOverdue})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[o.jsx("button",{onClick:()=>t(l),className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded",title:"Ver detalle",children:o.jsx(KQ,{className:"w-4 h-4"})}),l.status==="ASIGNADA"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>r(l),className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded",title:"Editar",children:o.jsx(fJ,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>n(l),className:"p-1.5 text-slate-400 hover:text-emerald-600 hover:bg-emerald-50 rounded",title:"Marcar recuperada",children:o.jsx(OR,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>a(l),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Cancelar",children:o.jsx(zi,{className:"w-4 h-4"})})]}),o.jsx("button",{onClick:()=>i(l),className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded",title:"Reenviar correos",children:o.jsx(TR,{className:"w-4 h-4"})})]})})]},l.id)})})]})})})},YSe=async(e,t)=>{let r=fe.from("backup_cards").select("*").order("card_number",{ascending:!0});e&&e!=="TODAS"&&(r=r.eq("status",e)),t&&(r=r.eq("inventory_terminal",t));const{data:n,error:a}=await r;if(a)throw a;return n},QSe=async e=>{let t=fe.from("backup_cards").select("*").eq("status","LIBRE").order("card_number");e&&(t=t.eq("inventory_terminal",e));const{data:r,error:n}=await t;if(n)throw n;return r},JSe=async e=>{const{data:t,error:r}=await fe.from("backup_cards").insert({card_number:e.card_number,inventory_terminal:e.inventory_terminal,notes:e.notes||null,status:"LIBRE"}).select().single();if(r)throw r;return t},ZSe=async e=>{const{error:t}=await fe.from("backup_cards").update({status:"INACTIVA"}).eq("id",e);if(t)throw t},eje=async e=>{let t=fe.from("backup_loans").select("*, backup_cards(*)").order("issued_at",{ascending:!1});e&&(e.search&&(t=t.or(`person_rut.ilike.%${e.search}%,person_name.ilike.%${e.search}%`)),e.terminal&&(t=t.eq("person_terminal",e.terminal)),e.status&&e.status!=="TODAS"&&(t=t.eq("status",e.status)),e.reason&&e.reason!=="TODAS"&&(t=t.eq("reason",e.reason)),e.dateFrom&&(t=t.gte("issued_at",e.dateFrom)),e.dateTo&&(t=t.lte("issued_at",e.dateTo+"T23:59:59")));const{data:r,error:n}=await t;if(n)throw n;return r},tje=async e=>{const{data:t,error:r}=await fe.from("backup_loans").insert({card_id:e.card_id,person_rut:e.person_rut,person_name:e.person_name,person_cargo:e.person_cargo||null,person_terminal:e.person_terminal,person_turno:e.person_turno||null,person_horario:e.person_horario||null,person_contacto:e.person_contacto||null,boss_email:e.worker_email||null,reason:e.reason,requested_at:e.requested_at,discount_amount:e.discount_amount,discount_applied:e.discount_applied,created_by_supervisor:e.created_by_supervisor,status:"ASIGNADA"}).select("*, backup_cards(*)").single();if(r)throw r;const{error:n}=await fe.from("backup_cards").update({status:"ASIGNADA"}).eq("id",e.card_id);if(n)throw n;return t},rje=async(e,t,r)=>{const{data:n,error:a}=await fe.from("backup_loans").select("card_id").eq("id",e).single();if(a)throw a;const{error:i}=await fe.from("backup_loans").update({status:"CERRADA",recovered_at:t,closed_at:new Date().toISOString()}).eq("id",e);if(i)throw i;const{error:s}=await fe.from("backup_cards").update({status:"LIBRE"}).eq("id",n.card_id);if(s)throw s},nje=async(e,t)=>{const{data:r,error:n}=await fe.from("backup_loans").select("card_id").eq("id",e).single();if(n)throw n;const{error:a}=await fe.from("backup_loans").update({status:"CANCELADA",cancel_reason:t,closed_at:new Date().toISOString()}).eq("id",e);if(a)throw a;const{error:i}=await fe.from("backup_cards").update({status:"LIBRE"}).eq("id",r.card_id);if(i)throw i},aje=async e=>{const{error:t}=await fe.from("backup_loans").update({emails_sent_at:new Date().toISOString()}).eq("id",e);if(t)throw t},g8=async()=>{const{data:e,error:t}=await fe.from("backup_email_settings").select("*").order("scope_type",{ascending:!1});if(t)throw t;return e},ije=async e=>{const{data:t,error:r}=await fe.from("backup_email_settings").upsert(e,{onConflict:"scope_type,scope_code"}).select().single();if(r)throw r;return t},sje=async()=>{const{data:e,error:t}=await fe.from("backup_cards").select("inventory_terminal, status");if(t)throw t;const r={"El Roble":0,"La Reina":0,"Maria Angelica":0};e==null||e.forEach(p=>{if(p.status==="LIBRE"){const v=p.inventory_terminal;Xs.includes(v)&&r[v]++}});const{data:n,error:a}=await fe.from("backup_loans").select("id, issued_at, alert_after_days, discount_amount, discount_applied").eq("status","ASIGNADA");if(a)throw a;const i=new Date;let s=0,l=0;n==null||n.forEach(p=>{const v=new Date(p.issued_at);Math.floor((i.getTime()-v.getTime())/(1e3*60*60*24))>p.alert_after_days&&s++,p.discount_applied&&(l+=p.discount_amount)});const c=new Date;c.setDate(c.getDate()-30);const{data:u,error:d}=await fe.from("backup_loans").select("issued_at, recovered_at, discount_amount, discount_applied").in("status",["RECUPERADA","CERRADA"]).gte("closed_at",c.toISOString());if(d)throw d;let f=0,h=0;return u==null||u.forEach(p=>{if(p.recovered_at){const v=new Date(p.issued_at),g=new Date(p.recovered_at),x=Math.floor((g.getTime()-v.getTime())/(1e3*60*60*24));f+=x,h++}p.discount_applied&&(l+=p.discount_amount)}),{availableByTerminal:r,activeLoans:(n==null?void 0:n.length)||0,overdueLoans:s,avgReturnDays:h>0?Math.round(f/h):0,totalDiscounts:l}},Yr={user:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="9" cy="5" r="3.5" stroke="#64748b" stroke-width="1.5"/>
        <path d="M2 16C2 12.686 5.13401 10 9 10C12.866 10 16 12.686 16 16" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,id:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="1.5" y="3.5" width="15" height="11" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <circle cx="6" cy="8" r="1.5" stroke="#64748b" stroke-width="1"/>
        <path d="M4 12C4 10.8954 4.89543 10 6 10C7.10457 10 8 10.8954 8 12" stroke="#64748b" stroke-width="1"/>
        <path d="M10.5 7.5H14.5M10.5 10H13" stroke="#64748b" stroke-width="1.2" stroke-linecap="round"/>
    </svg>`,building:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M2 16V3.5C2 3.22386 2.22386 3 2.5 3H9.5C9.77614 3 10 3.22386 10 3.5V16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M10 7H14.5C14.7761 7 15 7.22386 15 7.5V16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M5 6H7M5 9H7M5 12H7M12 10H13M12 13H13" stroke="#64748b" stroke-width="1.2" stroke-linecap="round"/>
        <path d="M1 16H17" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,calendar:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="2" y="3.5" width="14" height="12" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <path d="M2 7H16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M5.5 1.5V4.5M12.5 1.5V4.5" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,card:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="1" y="3" width="16" height="12" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <path d="M1 7H17" stroke="#64748b" stroke-width="1.5"/>
        <path d="M4 11H8" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,warning:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M9 6V10M9 12.5V13" stroke="#f59e0b" stroke-width="1.5" stroke-linecap="round"/>
        <path d="M3 15L9 3L15 15H3Z" stroke="#f59e0b" stroke-width="1.5" stroke-linejoin="round"/>
    </svg>`,money:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="9" cy="9" r="7" stroke="#64748b" stroke-width="1.5"/>
        <path d="M9 5V13M11 7H7.5C6.67157 7 6 7.67157 6 8.5C6 9.32843 6.67157 10 7.5 10H10.5C11.3284 10 12 10.6716 12 11.5C12 12.3284 11.3284 13 10.5 13H6" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,supervisor:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="9" cy="6" r="3" stroke="#64748b" stroke-width="1.5"/>
        <path d="M3 16C3 13.2386 5.68629 11 9 11C12.3137 11 15 13.2386 15 16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M9 3L10 1.5L11 3" stroke="#f59e0b" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`},Qr=(e,t,r,n=!1)=>`
    <tr>
        <td style="padding: 14px 16px; border-bottom: 1px solid #e2e8f0; width: 40%; vertical-align: middle;">
            <table role="presentation" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="padding-right: 12px; vertical-align: middle;">${e}</td>
                    <td style="font-size: 11px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">${t}</td>
                </tr>
            </table>
        </td>
        <td style="padding: 14px 16px; border-bottom: 1px solid #e2e8f0; font-size: 14px; font-weight: ${n?"700":"500"}; color: ${n?"#0f172a":"#334155"}; text-align: right;">${r}</td>
    </tr>
`,oje=e=>new Date(e).toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),lje=async(e,t,r,n)=>{var f;const a=((f=e.backup_cards)==null?void 0:f.card_number)||"N/A",i=e.person_terminal,s=e.reason==="PERDIDA"?"Prdida de Credencial":"Deterioro de Credencial",l=oje(e.issued_at),c=n?[n]:void 0,u=e.reason==="PERDIDA"?"#ef4444":"#f59e0b",d=e.reason==="PERDIDA"?"#fef2f2":"#fffbeb";try{const h=`Solicitud Nueva Credencial - ${e.person_name}`,p=`
            <!-- Status Banner -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td style="background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 12px; padding: 24px; text-align: center;">
                        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                            <tr>
                                <td align="center" style="padding-bottom: 8px;">
                                    <svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="28" cy="28" r="26" fill="#dbeafe" stroke="#3b82f6" stroke-width="3"/>
                                        <rect x="18" y="20" width="20" height="16" rx="2" stroke="#2563eb" stroke-width="2.5"/>
                                        <circle cx="24" cy="27" r="3" stroke="#2563eb" stroke-width="2"/>
                                        <path d="M20 33C20 31 21.5 29 24 29C26.5 29 28 31 28 33" stroke="#2563eb" stroke-width="2"/>
                                        <path d="M31 25H35M31 29H34" stroke="#2563eb" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                </td>
                            </tr>
                            <tr>
                                <td align="center">
                                    <span style="font-size: 11px; font-weight: 700; color: #1e40af; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 4px;">Accin Requerida</span>
                                    <span style="font-size: 20px; font-weight: 800; color: #1d4ed8; letter-spacing: -0.5px;">SOLICITUD DE NUEVA CREDENCIAL</span>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
            
            <!-- Reason Badge -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td align="center">
                        <span style="display: inline-block; padding: 8px 20px; background: ${d}; border: 1px solid ${u}; border-radius: 100px; color: ${u}; font-size: 12px; font-weight: 700; letter-spacing: 0.5px; text-transform: uppercase;">${s}</span>
                    </td>
                </tr>
            </table>
            
            <!-- Worker Data Section -->
            <p style="margin: 0 0 12px 0; font-size: 12px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">Datos del Trabajador</p>
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate; margin-bottom: 24px;">
                ${Qr(Yr.user,"Nombre",e.person_name,!0)}
                ${Qr(Yr.id,"RUT",e.person_rut)}
                ${Qr(Yr.building,"Terminal",i)}
                ${Qr(Yr.id,"Cargo",e.person_cargo||"No especificado")}
            </table>
            
            <!-- Backup Info Section -->
            <p style="margin: 0 0 12px 0; font-size: 12px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">Informacin del Respaldo</p>
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate; margin-bottom: 24px;">
                ${Qr(Yr.card,"Tarjeta Asignada",`N ${a}`,!0)}
                ${Qr(Yr.calendar,"Fecha Solicitud",e.requested_at)}
                ${Qr(Yr.supervisor,"Supervisor Entrega",e.created_by_supervisor)}
            </table>
            
            <!-- Action Message -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 16px;">
                <tr>
                    <td style="padding: 20px; background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 12px;">
                        <p style="margin: 0; font-size: 14px; color: #166534; font-weight: 600; text-align: center;">
                             Por favor proceder con la emisin de una nueva credencial para este trabajador.
                        </p>
                    </td>
                </tr>
            </table>
            
            ${n?`
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="padding: 12px 16px; background: #fef3c7; border: 1px solid #fde68a; border-radius: 8px;">
                        <p style="margin: 0; font-size: 13px; color: #92400e; font-weight: 500;">
                             <strong>Documento adjunto:</strong> Autorizacin de descuento firmada
                        </p>
                    </td>
                </tr>
            </table>
            `:""}
        `.trim();await Gs.sendEmail({audience:"manual",manualRecipients:[t],cc:r?r.split(",").map(x=>x.trim()).filter(Boolean):void 0,subject:h,body:p,attachments:c,module:"credenciales"});const v=`Notificacin Credencial Respaldo - ${e.person_name}`,g=`
            <!-- Status Banner -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td style="background: #fef3c7; border: 1px solid #fde68a; border-radius: 12px; padding: 24px; text-align: center;">
                        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                            <tr>
                                <td align="center" style="padding-bottom: 8px;">
                                    <svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="28" cy="28" r="26" fill="#fef9c3" stroke="#eab308" stroke-width="3"/>
                                        <path d="M28 18V32M28 36V38" stroke="#ca8a04" stroke-width="4" stroke-linecap="round"/>
                                    </svg>
                                </td>
                            </tr>
                            <tr>
                                <td align="center">
                                    <span style="font-size: 11px; font-weight: 700; color: #92400e; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 4px;">Notificacin Importante</span>
                                    <span style="font-size: 18px; font-weight: 800; color: #b45309; letter-spacing: -0.5px;">CREDENCIAL DE RESPALDO ASIGNADA</span>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
            
            <!-- Intro Message -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td style="padding: 16px 20px; background: #f8fafc; border-radius: 12px;">
                        <p style="margin: 0; font-size: 14px; color: #475569; line-height: 1.6;">
                            Se le informa que el trabajador a su cargo <strong style="color: #0f172a;">${e.person_name}</strong> utilizar una tarjeta de respaldo mientras se gestiona una nueva credencial.
                        </p>
                    </td>
                </tr>
            </table>
            
            <!-- Worker Data Section -->
            <p style="margin: 0 0 12px 0; font-size: 12px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">Datos del Trabajador</p>
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate; margin-bottom: 24px;">
                ${Qr(Yr.user,"Nombre",e.person_name,!0)}
                ${Qr(Yr.id,"RUT",e.person_rut)}
                ${Qr(Yr.building,"Terminal",i)}
                ${Qr(Yr.id,"Cargo",e.person_cargo||"No especificado")}
            </table>
            
            <!-- Backup Info Section -->
            <p style="margin: 0 0 12px 0; font-size: 12px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">Informacin del Respaldo</p>
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate; margin-bottom: 24px;">
                ${Qr(Yr.card,"Tarjeta Asignada",`N ${a}`,!0)}
                ${Qr(Yr.warning,"Motivo",s)}
                ${Qr(Yr.calendar,"Fecha de Entrega",l)}
                ${e.discount_applied?Qr(Yr.money,"Descuento Aplicado",`$${e.discount_amount.toLocaleString("es-CL")} (1 cuota)`,!0):""}
            </table>
            
            <!-- Important Notice -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 16px;">
                <tr>
                    <td style="padding: 20px; background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 12px;">
                        <p style="margin: 0; font-size: 14px; color: #1e40af; font-weight: 500; text-align: center;">
                             Una vez que el trabajador reciba su nueva credencial, deber devolver la tarjeta de respaldo.
                        </p>
                    </td>
                </tr>
            </table>
            
            ${n?`
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td style="padding: 12px 16px; background: #fef3c7; border: 1px solid #fde68a; border-radius: 8px;">
                        <p style="margin: 0; font-size: 13px; color: #92400e; font-weight: 500;">
                             <strong>Documento adjunto:</strong> Autorizacin de descuento firmada
                        </p>
                    </td>
                </tr>
            </table>
            `:""}
            
            <!-- Signature -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="padding-top: 16px; border-top: 1px solid #e2e8f0;">
                        <p style="margin: 0; font-size: 14px; color: #64748b;">Saludos cordiales,</p>
                        <p style="margin: 4px 0 0 0; font-size: 14px; font-weight: 700; color: #0f172a;">Gestin de Personal</p>
                    </td>
                </tr>
            </table>
        `.trim();return e.boss_email&&await Gs.sendEmail({audience:"manual",manualRecipients:[e.boss_email],subject:v,body:g,module:"credenciales"}),await aje(e.id),{success:!0}}catch(h){return console.error("Error sending backup emails:",h),{success:!1,error:h instanceof Error?h.message:"Error desconocido al enviar correos"}}},cje=({isOpen:e,onClose:t,onSubmit:r,isLoading:n,supervisorName:a})=>{const i=T.useRef(null),[s,l]=T.useState({person_rut:"",person_name:"",person_cargo:"",person_terminal:"EL_ROBLE",person_turno:"",person_horario:"",person_contacto:"",worker_email:"",reason:"PERDIDA",requested_at:new Date().toISOString().split("T")[0],card_id:"",discount_applied:!0,discount_amount:5e3,send_emails:!0,created_by_supervisor:a}),[c,u]=T.useState(""),[d,f]=T.useState(""),{data:h=[]}=rt({queryKey:["backup-cards-available",c],queryFn:()=>QSe(c||void 0),enabled:e}),p=async()=>{const x=ig(s.person_rut);if(!x)return;if(!sC(x)){f("RUT invalido");return}f("");const{data:b}=await fe.from("staff").select("nombre, cargo, terminal_code, turno, horario, contacto").eq("rut",x).single();l(b?m=>({...m,person_rut:ml(x),person_name:b.nombre,person_cargo:b.cargo||"",person_terminal:b.terminal_code||"EL_ROBLE",person_turno:b.turno||"",person_horario:b.horario||"",person_contacto:b.contacto||""}):m=>({...m,person_rut:ml(x)}))},v=async x=>{if(x.preventDefault(),!sC(ig(s.person_rut))){f("RUT invalido");return}await r(s,g)},g=()=>{const x=window.open("","_blank");if(x){const b=new Date().toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"});x.document.write(`
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autorizacin de Descuento - ${s.person_name||"RBU"}</title>
    <style>
        @page { size: letter; margin: 15mm 20mm; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: Arial, Helvetica, sans-serif;
            background-color: white;
            padding: 0;
            color: #000;
            font-size: 12px;
            line-height: 1.4;
        }

        .page {
            width: 100%;
            max-width: 210mm;
            margin: 0 auto;
        }

        /* Header Styles */
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 5px;
            padding-bottom: 5px;
            border-bottom: 3px solid black;
        }

        /* Logo RBU con camion CSS */
        .logo-container {
            position: relative;
            width: 150px;
            height: 50px;
        }
        .truck-body {
            border: 4px solid #003399;
            border-radius: 8px;
            width: 120px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            top: 0;
            left: 0;
            background: white;
            z-index: 2;
        }
        .truck-cab {
            position: absolute;
            top: 5px;
            right: 15px;
            width: 25px;
            height: 35px;
            border-top: 4px solid #003399;
            border-right: 4px solid #003399;
            border-radius: 0 5px 0 0;
        }
        .logo-text {
            color: #cc0000;
            font-weight: 900;
            font-size: 32px;
            font-family: 'Arial Black', Arial, sans-serif;
            letter-spacing: -2px;
        }
        .wheel {
            width: 12px;
            height: 12px;
            border: 4px solid #003399;
            border-radius: 50%;
            position: absolute;
            bottom: -5px;
            background: white;
            z-index: 3;
        }
        .w1 { left: 20px; }
        .w2 { left: 90px; }

        .rbu-santiago {
            color: #cc0000;
            font-weight: bold;
            font-size: 14px;
        }

        .title-bar {
            background-color: black;
            color: white;
            text-align: center;
            padding: 8px 0;
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 25px;
        }

        /* Form Fields */
        .field-row {
            display: flex;
            margin-bottom: 20px;
            align-items: flex-end;
        }
        
        .field-label {
            font-weight: bold;
            font-size: 11px;
            white-space: nowrap;
            margin-right: 10px;
        }

        .field-line {
            border-bottom: 2px solid black;
            flex-grow: 1;
            min-height: 18px;
            padding-left: 5px;
            font-size: 12px;
        }

        .rut-row {
            display: flex;
            justify-content: space-between;
        }
        
        .rut-container {
            display: flex;
            width: 38%;
            align-items: flex-end;
        }
        
        .cargo-container {
            display: flex;
            width: 55%;
            align-items: flex-end;
        }

        /* Authorization Text */
        .auth-text {
            text-align: center;
            font-weight: bold;
            margin: 25px 0;
            font-size: 13px;
            letter-spacing: 0.5px;
        }

        .amount-row {
            display: flex;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 12px;
            gap: 20px;
        }

        .concept-row {
            margin-left: 30px;
            margin-bottom: 5px;
            font-size: 13px;
        }
        .desc-small {
            font-size: 10px;
            margin-left: 30px;
            margin-bottom: 18px;
            color: #555;
        }

        /* Right aligned details */
        .details-right {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            margin-right: 20px;
        }
        
        .detail-item {
            display: flex;
            align-items: flex-end;
            margin-bottom: 8px;
            width: 280px;
            justify-content: flex-end;
        }
        
        .detail-item label {
            font-size: 11px;
            margin-right: 10px;
        }
        
        .detail-value {
            border-bottom: 2px solid black;
            width: 110px;
            text-align: right;
            font-weight: bold;
            font-size: 14px;
            padding-bottom: 2px;
            padding-right: 5px;
        }

        /* Signature & Date */
        .sig-date-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-top: 30px;
            margin-bottom: 10px;
            font-style: italic;
            font-size: 11px;
            font-weight: bold;
        }
        .date-val {
            font-size: 12px;
            font-style: normal;
        }

        .signature-line {
            border-bottom: 2px solid black;
            width: 200px;
            margin-top: 40px;
        }

        .legal-text {
            font-size: 9px;
            text-align: justify;
            line-height: 1.3;
            margin: 15px 0;
            padding-top: 10px;
            border-top: 1px solid #ccc;
        }

        /* Observations Box */
        .obs-header {
            background-color: #333;
            color: white;
            font-weight: bold;
            text-align: center;
            font-size: 11px;
            padding: 4px;
            border: 2px solid black;
            border-bottom: none;
        }
        .obs-box {
            border: 2px solid black;
            height: 50px;
            margin-bottom: 30px;
        }

        /* Footer */
        .footer-line {
            border-top: 3px solid black;
            padding-top: 8px;
            text-align: center;
            font-size: 10px;
            font-weight: bold;
            margin-top: 20px;
        }
        .company-name {
            text-align: right;
            font-weight: bold;
            margin-top: 15px;
            font-size: 11px;
            border-bottom: 2px solid black;
            display: inline-block;
            float: right;
            padding-bottom: 2px;
            text-decoration: underline;
        }

        /* Bottom Detail Section */
        .bottom-detail-title {
            text-align: center;
            font-style: italic;
            font-weight: bold;
            font-size: 14px;
            margin-top: 30px;
            margin-bottom: 10px;
            clear: both;
        }
        
        .bottom-table {
            width: 100%;
            font-size: 11px;
            overflow: hidden;
        }
        .bt-left { 
            float: left; 
            font-weight: bold;
        }
        .bt-right { 
            float: right; 
            text-align: center;
        }
        .costo-header {
            font-weight: bold;
            font-size: 10px;
            margin-bottom: 3px;
            color: #555;
        }

        @media print {
            body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
        }
    </style>
</head>
<body>

    <div class="page">
        <div class="header-top">
            <div class="logo-container">
                <div class="truck-cab"></div>
                <div class="truck-body">
                    <span class="logo-text">RBU</span>
                </div>
                <div class="wheel w1"></div>
                <div class="wheel w2"></div>
            </div>
            <div class="rbu-santiago">RBU Santiago.</div>
        </div>

        <div class="title-bar">
            Autorizacin de Descuento
        </div>

        <div class="field-row">
            <span class="field-label">NOMBRE DEL<br>TRABAJADOR:</span>
            <div class="field-line">${s.person_name||""}</div>
        </div>

        <div class="field-row rut-row">
            <div class="rut-container">
                <span class="field-label">RUT :</span>
                <div class="field-line">${s.person_rut||""}</div>
            </div>
            <div class="cargo-container">
                <span class="field-label">Cargo desempeado:</span>
                <div class="field-line">${s.person_cargo||""}</div>
            </div>
        </div>

        <div class="auth-text">
            EL TRABAJADOR INDIVIDUALIZADO AUTORIZA EN ESTE ACTO
        </div>

        <div class="amount-row">
            <span>EL DESCUENTO DE:</span>
            <span>$</span>
            <span>${s.discount_amount.toLocaleString("es-CL")}</span>
        </div>

        <div class="concept-row">
            <strong>POR CONCEPTO DE:</strong> &nbsp; ${s.reason==="PERDIDA"?"Prdida Credencial":"Deterioro Credencial"}
        </div>
        <div class="desc-small">Descripcin : Tarjeta de acceso vehicular</div>

        <div class="details-right">
            <div class="detail-item">
                <label>A descontar en:</label>
                <div class="detail-value">1 Cuota</div>
            </div>
            <div class="detail-item">
                <label>A contar de:</label>
                <div class="detail-value" style="font-style: italic; font-size: 12px;">Mes en curso</div>
            </div>
            <div class="detail-item">
                <label>Valor de cada cuota:</label>
                <div class="detail-value">$ ${s.discount_amount.toLocaleString("es-CL")}</div>
            </div>
        </div>

        <div class="sig-date-row">
            <div>
                <span>Firma y Rut del trabajador</span>
                <div class="signature-line"></div>
            </div>
            <span>Fecha : &nbsp; <span class="date-val"><strong>${b}</strong></span></span>
        </div>

        <div class="legal-text">
            El trabajador, mediante el presente instrumento, otorga mandato expreso a REDBUS URBANO S.A. para que descuente de sus remuneraciones en las cuotas y plazos indicados la suma indicada en este acto. Asimismo faculta expresamente a REDBUS URBANO S.A., para que en el evento de que por cualquier causa se pusiese trmino al contrato de trabajo, descuente el total del saldo adeudado de las indemnizaciones a que tenga derecho y/o otros emolumentos que pudiere tener derecho al trmino de la relacin laboral.
        </div>

        <div class="obs-header">Observaciones</div>
        <div class="obs-box"></div>

        <div class="footer-line">
            Av. El Salto 4651, Huechuraba, Santiago.<br>
            Fono: (56 2) 4881800 &nbsp;&nbsp; Fax: (56 2) 4881818
        </div>

        <div style="overflow: hidden; margin-top: 15px;">
            <div class="company-name">REDBUS URBANO S.A.</div>
        </div>

        <div class="bottom-detail-title">Detalle Descuento</div>
        
        <div class="bottom-table">
            <span class="bt-left">${s.reason==="PERDIDA"?"Prdida Credencial":"Deterioro Credencial"}</span>
            <div class="bt-right">
                <div class="costo-header">COSTO</div>
                <div><strong>$${s.discount_amount.toLocaleString("es-CL")}</strong></div>
            </div>
        </div>

    </div>

</body>
</html>
            `),x.document.close(),setTimeout(()=>x.print(),300)}};return T.useEffect(()=>{e&&(l({person_rut:"",person_name:"",person_cargo:"",person_terminal:"EL_ROBLE",person_turno:"",person_horario:"",person_contacto:"",worker_email:"",reason:"PERDIDA",requested_at:new Date().toISOString().split("T")[0],card_id:"",discount_applied:!0,discount_amount:5e3,send_emails:!0,created_by_supervisor:a}),f(""),u(""))},[e,a]),e?o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:t}),o.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between z-10",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Nuevo Prestamo de Respaldo"}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(zi,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("form",{onSubmit:v,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Datos del Trabajador"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"RUT"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",className:`input pr-10 ${d?"border-red-500":""}`,value:s.person_rut,onChange:x=>l(b=>({...b,person_rut:x.target.value})),onBlur:p,placeholder:"12.345.678-9",required:!0}),o.jsx(sJ,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"})]}),d&&o.jsx("p",{className:"text-xs text-red-500 mt-1",children:d})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nombre"}),o.jsx("input",{type:"text",className:"input",value:s.person_name,onChange:x=>l(b=>({...b,person_name:x.target.value})),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Cargo"}),o.jsx("input",{type:"text",className:"input",value:s.person_cargo,onChange:x=>l(b=>({...b,person_cargo:x.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Terminal"}),o.jsx("select",{className:"input",value:s.person_terminal,onChange:x=>l(b=>({...b,person_terminal:x.target.value})),required:!0,children:Kn.map(x=>o.jsx("option",{value:x.value,children:x.label},x.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Turno"}),o.jsx("input",{type:"text",className:"input",value:s.person_turno,onChange:x=>l(b=>({...b,person_turno:x.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Horario"}),o.jsx("input",{type:"text",className:"input",value:s.person_horario,onChange:x=>l(b=>({...b,person_horario:x.target.value})),placeholder:"08:00-18:00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contacto"}),o.jsx("input",{type:"text",className:"input",value:s.person_contacto,onChange:x=>l(b=>({...b,person_contacto:x.target.value}))})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:["Correo ",o.jsx("span",{className:"text-slate-400 font-normal",children:"(opcional)"})]}),o.jsx("input",{type:"email",className:"input",value:s.worker_email,onChange:x=>l(b=>({...b,worker_email:x.target.value})),placeholder:"Para notificar cuando llegue su credencial"})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Solicitud"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Motivo"}),o.jsx("select",{className:"input",value:s.reason,onChange:x=>l(b=>({...b,reason:x.target.value})),required:!0,children:CR.map(x=>o.jsx("option",{value:x.value,children:x.label},x.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Fecha Solicitud"}),o.jsx("input",{type:"date",className:"input",value:s.requested_at,onChange:x=>l(b=>({...b,requested_at:x.target.value})),required:!0})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Tarjeta de Respaldo"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Terminal de Inventario"}),o.jsxs("select",{className:"input",value:c,onChange:x=>{u(x.target.value),l(b=>({...b,card_id:""}))},children:[o.jsx("option",{value:"",children:"Todos"}),Xs.map(x=>o.jsx("option",{value:x,children:x},x))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Tarjeta Disponible"}),o.jsxs("select",{className:"input",value:s.card_id,onChange:x=>l(b=>({...b,card_id:x.target.value})),required:!0,children:[o.jsx("option",{value:"",children:"Seleccionar tarjeta..."}),h.map(x=>o.jsxs("option",{value:x.id,children:[x.card_number," (",x.inventory_terminal,")"]},x.id))]}),h.length===0&&o.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"No hay tarjetas disponibles"})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Descuento"}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:s.discount_applied,onChange:x=>l(b=>({...b,discount_applied:x.target.checked})),className:"w-4 h-4 rounded border-slate-300"}),o.jsxs("span",{className:"text-sm text-slate-700",children:["Aplicar descuento de $",s.discount_amount.toLocaleString("es-CL")," (1 cuota)"]})]}),s.discount_applied&&o.jsxs("span",{className:"text-xs text-slate-500 italic flex items-center gap-1",children:[o.jsx(tJ,{className:"w-3 h-3"}),"Se imprimir automticamente al crear"]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Notificaciones"}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:s.send_emails,onChange:x=>l(b=>({...b,send_emails:x.target.checked})),className:"w-4 h-4 rounded border-slate-300"}),o.jsx("span",{className:"text-sm text-slate-700",children:"Enviar correos al crear"})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[o.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n||!s.card_id,children:n?"Guardando...":"Crear Prestamo"})]})]}),o.jsx("div",{ref:i,className:"hidden"})]})})]}):null},uje=({isOpen:e,loan:t,onClose:r})=>{var i,s;if(!e||!t)return null;const n=l=>l?new Date(l).toLocaleDateString("es-CL",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",a=Math.floor((new Date().getTime()-new Date(t.issued_at).getTime())/(1e3*60*60*24));return o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:r}),o.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between z-10",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Detalle del Prestamo"}),o.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(zi,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[o.jsx(wJ,{className:"w-4 h-4"}),"Trabajador"]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Nombre:"}),o.jsx("span",{className:"text-sm font-medium text-slate-900",children:t.person_name})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"RUT:"}),o.jsx("span",{className:"text-sm font-medium text-slate-900",children:ml(t.person_rut)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Cargo:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.person_cargo||"-"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Terminal:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.person_terminal})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Turno:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.person_turno||"-"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Horario:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.person_horario||"-"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Contacto:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.person_contacto||"-"})]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[o.jsx(Ef,{className:"w-4 h-4"}),"Tarjeta de Respaldo"]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Numero:"}),o.jsx("span",{className:"text-sm font-mono font-medium text-slate-900",children:((i=t.backup_cards)==null?void 0:i.card_number)||"-"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Terminal Inventario:"}),o.jsx("span",{className:"text-sm text-slate-900",children:((s=t.backup_cards)==null?void 0:s.inventory_terminal)||"-"})]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[o.jsx($Q,{className:"w-4 h-4"}),"Solicitud"]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Motivo:"}),o.jsx("span",{className:`text-sm font-medium px-2 py-0.5 rounded ${t.reason==="PERDIDA"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:t.reason==="PERDIDA"?"Perdida":"Deterioro"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Fecha Solicitud:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.requested_at})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Fecha Entrega:"}),o.jsx("span",{className:"text-sm text-slate-900",children:n(t.issued_at)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Dias Transcurridos:"}),o.jsxs("span",{className:`text-sm font-medium ${a>t.alert_after_days?"text-amber-600":"text-slate-900"}`,children:[a," dias"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Estado:"}),o.jsx("span",{className:`text-sm font-medium px-2 py-0.5 rounded ${t.status==="ASIGNADA"?"bg-blue-100 text-blue-700":t.status==="CERRADA"?"bg-slate-100 text-slate-700":t.status==="CANCELADA"?"bg-red-100 text-red-700":"bg-emerald-100 text-emerald-700"}`,children:t.status})]}),t.recovered_at&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Recuperada:"}),o.jsx("span",{className:"text-sm text-slate-900",children:n(t.recovered_at)})]}),t.cancel_reason&&o.jsxs("div",{className:"pt-2 border-t border-slate-200",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Motivo Cancelacion:"}),o.jsx("p",{className:"text-sm text-slate-900 mt-1",children:t.cancel_reason})]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[o.jsx(NR,{className:"w-4 h-4"}),"Descuento"]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Aplicado:"}),o.jsx("span",{className:`text-sm font-medium ${t.discount_applied?"text-emerald-600":"text-slate-500"}`,children:t.discount_applied?"Si":"No"})]}),t.discount_applied&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Monto:"}),o.jsxs("span",{className:"text-sm font-medium text-slate-900",children:["$",t.discount_amount.toLocaleString("es-CL")]})]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[o.jsx(ER,{className:"w-4 h-4"}),"Auditoria"]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Creado por:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.created_by_supervisor})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Creado:"}),o.jsx("span",{className:"text-sm text-slate-900",children:n(t.created_at)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Correo Trabajador:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.boss_email||"-"})]}),t.emails_sent_at&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Emails Enviados:"}),o.jsx("span",{className:"text-sm text-slate-900",children:n(t.emails_sent_at)})]})]})]})]}),o.jsx("div",{className:"border-t border-slate-200 px-6 py-4 flex justify-end",children:o.jsx("button",{onClick:r,className:"btn btn-secondary",children:"Cerrar"})})]})})]})},dje=({isOpen:e,loan:t,onClose:r,onSubmit:n,isLoading:a})=>{var d;const[i,s]=T.useState(new Date().toISOString().split("T")[0]),[l,c]=T.useState(""),u=async f=>{f.preventDefault(),t&&(await n(t.id,i,l),c(""))};return!e||!t?null:o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:r}),o.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-md",children:[o.jsxs("div",{className:"border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(OR,{className:"w-5 h-5 text-emerald-600"}),o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Marcar como Recuperada"})]}),o.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(zi,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("form",{onSubmit:u,className:"p-6 space-y-4",children:[o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[o.jsxs("p",{className:"text-sm text-slate-600",children:[o.jsx("span",{className:"font-medium",children:"Trabajador:"})," ",t.person_name]}),o.jsxs("p",{className:"text-sm text-slate-600",children:[o.jsx("span",{className:"font-medium",children:"RUT:"})," ",ml(t.person_rut)]}),o.jsxs("p",{className:"text-sm text-slate-600",children:[o.jsx("span",{className:"font-medium",children:"Tarjeta:"})," ",(d=t.backup_cards)==null?void 0:d.card_number]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Fecha de Devolucion"}),o.jsx("input",{type:"date",className:"input",value:i,onChange:f=>s(f.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Observacion (opcional)"}),o.jsx("textarea",{className:"input min-h-[80px]",value:l,onChange:f=>c(f.target.value),placeholder:"Notas adicionales..."})]}),o.jsx("p",{className:"text-sm text-slate-500",children:"Al confirmar, la tarjeta sera liberada y quedara disponible para nuevos prestamos."}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:a,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary bg-emerald-600 hover:bg-emerald-700",disabled:a,children:a?"Procesando...":"Confirmar Devolucion"})]})]})]})})]})},fje=({isOpen:e,loan:t,onClose:r,onSubmit:n,isLoading:a})=>{var c;const[i,s]=T.useState(""),l=async u=>{u.preventDefault(),!(!t||!i.trim())&&(await n(t.id,i.trim()),s(""))};return!e||!t?null:o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:r}),o.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-md",children:[o.jsxs("div",{className:"border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ug,{className:"w-5 h-5 text-red-600"}),o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Cancelar Prestamo"})]}),o.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(zi,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("form",{onSubmit:l,className:"p-6 space-y-4",children:[o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[o.jsx("p",{className:"text-sm text-red-800 font-medium mb-2",children:"Esta accion no se puede deshacer."}),o.jsxs("p",{className:"text-sm text-red-700",children:["El prestamo a ",t.person_name," (tarjeta ",(c=t.backup_cards)==null?void 0:c.card_number,") sera cancelado y la tarjeta sera liberada."]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Motivo de cancelacion (obligatorio)"}),o.jsx("textarea",{className:"input min-h-[100px]",value:i,onChange:u=>s(u.target.value),placeholder:"Explique por que se cancela este prestamo...",required:!0})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:a,children:"Volver"}),o.jsx("button",{type:"submit",className:"btn btn-primary bg-red-600 hover:bg-red-700",disabled:a||!i.trim(),children:a?"Cancelando...":"Confirmar Cancelacion"})]})]})]})})]})},hje=({isOpen:e,onClose:t})=>{const r=Ge(),[n,a]=T.useState(!1),[i,s]=T.useState(""),[l,c]=T.useState(""),[u,d]=T.useState({card_number:"",inventory_terminal:"El Roble",notes:""}),{data:f=[],isLoading:h}=rt({queryKey:["backup-cards",i,l],queryFn:()=>YSe(l||void 0,i||void 0),enabled:e}),p=Xe({mutationFn:JSe,onSuccess:()=>{r.invalidateQueries({queryKey:["backup-cards"]}),a(!1),d({card_number:"",inventory_terminal:"El Roble",notes:""})}}),v=Xe({mutationFn:ZSe,onSuccess:()=>{r.invalidateQueries({queryKey:["backup-cards"]})}}),g=m=>{m.preventDefault(),p.mutate(u)},x=m=>{confirm(`Desactivar tarjeta ${m.card_number}?`)&&v.mutate(m.id)};if(!e)return null;const b={LIBRE:"bg-emerald-100 text-emerald-800",ASIGNADA:"bg-blue-100 text-blue-800",INACTIVA:"bg-slate-100 text-slate-600"};return o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:t}),o.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[85vh] flex flex-col",children:[o.jsxs("div",{className:"border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ef,{className:"w-5 h-5 text-slate-600"}),o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Inventario de Tarjetas"})]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(zi,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("div",{className:"p-4 border-b border-slate-100 flex flex-wrap items-center gap-3",children:[o.jsxs("select",{className:"input w-auto",value:i,onChange:m=>s(m.target.value),children:[o.jsx("option",{value:"",children:"Todos los terminales"}),Xs.map(m=>o.jsx("option",{value:m,children:m},m))]}),o.jsxs("select",{className:"input w-auto",value:l,onChange:m=>c(m.target.value),children:[o.jsx("option",{value:"",children:"Todos los estados"}),jJ.map(m=>o.jsx("option",{value:m.value,children:m.label},m.value))]}),o.jsx("div",{className:"flex-1"}),o.jsxs("button",{onClick:()=>a(!n),className:"btn btn-primary flex items-center gap-2",children:[o.jsx(AR,{className:"w-4 h-4"}),"Agregar Tarjeta"]})]}),n&&o.jsxs("form",{onSubmit:g,className:"p-4 bg-slate-50 border-b border-slate-100",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Numero de Tarjeta"}),o.jsx("input",{type:"text",className:"input",value:u.card_number,onChange:m=>d(y=>({...y,card_number:m.target.value})),placeholder:"Ej: TR-001",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Terminal"}),o.jsx("select",{className:"input",value:u.inventory_terminal,onChange:m=>d(y=>({...y,inventory_terminal:m.target.value})),children:Xs.map(m=>o.jsx("option",{value:m,children:m},m))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Notas (opcional)"}),o.jsx("input",{type:"text",className:"input",value:u.notes,onChange:m=>d(y=>({...y,notes:m.target.value}))})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[o.jsx("button",{type:"button",onClick:()=>a(!1),className:"btn btn-secondary text-sm",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary text-sm",disabled:p.isPending,children:p.isPending?"Guardando...":"Guardar"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:h?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):f.length===0?o.jsx("div",{className:"text-center py-8 text-slate-500",children:"No hay tarjetas registradas"}):o.jsx("div",{className:"space-y-2",children:f.map(m=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ef,{className:"w-5 h-5 text-slate-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-slate-900",children:m.card_number}),o.jsx("p",{className:"text-xs text-slate-500",children:m.inventory_terminal})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${b[m.status]||""}`,children:m.status}),m.status!=="INACTIVA"&&m.status!=="ASIGNADA"&&o.jsx("button",{onClick:()=>x(m),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Desactivar",children:o.jsx(pJ,{className:"w-4 h-4"})})]})]},m.id))})}),o.jsx("div",{className:"border-t border-slate-200 px-6 py-4 flex justify-end",children:o.jsx("button",{onClick:t,className:"btn btn-secondary",children:"Cerrar"})})]})})]})},pje=({isOpen:e,onClose:t})=>{const r=Ge(),[n,a]=T.useState("GLOBAL"),[i,s]=T.useState({manager_email:"",cc_emails:"",subject_manager:"Solicitud de Nueva Credencial",subject_boss:"Notificacion de Credencial de Respaldo",enabled:!0}),{data:l=[],isLoading:c}=rt({queryKey:["backup-email-settings"],queryFn:g8,enabled:e}),u=Xe({mutationFn:ije,onSuccess:()=>{r.invalidateQueries({queryKey:["backup-email-settings"]})}});T.useEffect(()=>{const f=l.find(h=>n==="GLOBAL"?h.scope_type==="GLOBAL":h.scope_code===n);s(f?{manager_email:f.manager_email,cc_emails:f.cc_emails||"",subject_manager:f.subject_manager,subject_boss:f.subject_boss,enabled:f.enabled}:{manager_email:"",cc_emails:"",subject_manager:"Solicitud de Nueva Credencial",subject_boss:"Notificacion de Credencial de Respaldo",enabled:!0})},[n,l]);const d=f=>{f.preventDefault(),u.mutate({scope_type:n==="GLOBAL"?"GLOBAL":"TERMINAL",scope_code:n,...i})};return e?o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:t}),o.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-lg",children:[o.jsxs("div",{className:"border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(TR,{className:"w-5 h-5 text-slate-600"}),o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Configuracion de Correos"})]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(zi,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Configurar para:"}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx("button",{type:"button",onClick:()=>a("GLOBAL"),className:`px-3 py-1.5 text-sm rounded-lg border ${n==="GLOBAL"?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:"Global"}),Xs.map(f=>o.jsx("button",{type:"button",onClick:()=>a(f),className:`px-3 py-1.5 text-sm rounded-lg border ${n===f?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:f},f))]})]}),c?o.jsx("div",{className:"flex justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o.jsxs("form",{onSubmit:d,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Email del Gestor (crear credencial)"}),o.jsx("input",{type:"email",className:"input",value:i.manager_email,onChange:f=>s(h=>({...h,manager_email:f.target.value})),placeholder:"gestor@empresa.cl",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"CC (opcional, separar por coma)"}),o.jsx("input",{type:"text",className:"input",value:i.cc_emails,onChange:f=>s(h=>({...h,cc_emails:f.target.value})),placeholder:"copia1@empresa.cl, copia2@empresa.cl"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asunto para Gestor"}),o.jsx("input",{type:"text",className:"input",value:i.subject_manager,onChange:f=>s(h=>({...h,subject_manager:f.target.value})),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asunto para Jefatura"}),o.jsx("input",{type:"text",className:"input",value:i.subject_boss,onChange:f=>s(h=>({...h,subject_boss:f.target.value})),required:!0})]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:i.enabled,onChange:f=>s(h=>({...h,enabled:f.target.checked})),className:"w-4 h-4 rounded border-slate-300"}),o.jsx("span",{className:"text-sm text-slate-700",children:"Envio habilitado"})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[o.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",children:"Cerrar"}),o.jsxs("button",{type:"submit",className:"btn btn-primary flex items-center gap-2",disabled:u.isPending,children:[o.jsx(aJ,{className:"w-4 h-4"}),u.isPending?"Guardando...":"Guardar"]})]}),u.isSuccess&&o.jsx("p",{className:"text-sm text-emerald-600 text-center",children:"Configuracion guardada correctamente"})]})]})]})})]}):null},mje=({isOpen:e,loan:t,managerEmail:r,workerEmail:n,cc:a,onClose:i,onSubmit:s,isLoading:l})=>{const c=T.useRef(null),[u,d]=T.useState(null),[f,h]=T.useState(null),[p,v]=T.useState(""),g=_=>{var j;const w=(j=_.target.files)==null?void 0:j[0];if(!w)return;if(!["application/pdf","image/png","image/jpeg"].includes(w.type)){v("Solo se permiten archivos PDF, PNG o JPG");return}if(w.size>5*1024*1024){v("El archivo no puede superar 5MB");return}if(v(""),d(w),w.type.startsWith("image/")){const E=new FileReader;E.onload=N=>{var A;return h((A=N.target)==null?void 0:A.result)},E.readAsDataURL(w)}else h(null)},x=async()=>{if(!u){v("Debe adjuntar el documento firmado");return}const _=new FileReader;_.onload=async w=>{var j;const S=((j=w.target)==null?void 0:j.result).split(",")[1];await s({filename:`autorizacion_descuento_${(t==null?void 0:t.person_rut)||"firmado"}.${u.name.split(".").pop()}`,content:S})},_.readAsDataURL(u)},b=async()=>{await s(null)},m=()=>{d(null),h(null),v("")},y=()=>{m(),i()};return!e||!t?null:o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:y}),o.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-lg",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Adjuntar Documento Firmado"}),o.jsx("button",{onClick:y,className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(zi,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[o.jsxs("p",{className:"text-sm text-blue-800",children:[o.jsx("strong",{children:"Trabajador:"})," ",t.person_name," (",ml(t.person_rut),")"]}),o.jsx("p",{className:"text-sm text-blue-800 mt-1",children:o.jsx("strong",{children:"Se enviar correo a:"})}),o.jsxs("ul",{className:"text-xs text-blue-700 mt-1 list-disc list-inside",children:[o.jsxs("li",{children:["Gestor de credenciales: ",r," ",o.jsx("span",{className:"text-blue-500",children:"(con adjunto)"})]}),n&&o.jsxs("li",{children:["Notificacin trabajador: ",n]}),a&&o.jsxs("li",{children:["CC: ",a]})]})]}),o.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[o.jsx(BQ,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-amber-800",children:"Importante"}),o.jsx("p",{className:"text-xs text-amber-700",children:"Adjunte el documento de autorizacin de descuento firmado por el trabajador. Este se enviar SOLO al gestor de credenciales."})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Documento Firmado (PDF, PNG, JPG)"}),o.jsx("input",{type:"file",ref:c,onChange:g,accept:".pdf,.png,.jpg,.jpeg",className:"hidden"}),u?o.jsx("div",{className:"border border-slate-200 rounded-lg p-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[f?o.jsx("img",{src:f,alt:"Preview",className:"w-16 h-16 object-cover rounded"}):o.jsx("div",{className:"w-16 h-16 bg-red-50 rounded flex items-center justify-center",children:o.jsx(XQ,{className:"w-8 h-8 text-red-500"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:u.name}),o.jsxs("p",{className:"text-xs text-slate-500",children:[(u.size/1024).toFixed(1)," KB"]})]}),o.jsx("button",{type:"button",onClick:()=>{d(null),h(null)},className:"p-1 hover:bg-slate-100 rounded",children:o.jsx(zi,{className:"w-4 h-4 text-slate-500"})})]})}):o.jsxs("button",{type:"button",onClick:()=>{var _;return(_=c.current)==null?void 0:_.click()},className:"w-full border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:border-blue-400 hover:bg-blue-50/50 transition-colors",children:[o.jsx(yJ,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Haga clic para seleccionar archivo"}),o.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Max 5MB"})]}),p&&o.jsx("p",{className:"text-xs text-red-500 mt-2",children:p})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-slate-200 bg-slate-50 rounded-b-xl",children:[o.jsx("button",{type:"button",onClick:b,className:"text-sm text-slate-500 hover:text-slate-700",disabled:l,children:"Enviar sin adjunto"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",onClick:y,className:"btn btn-secondary",disabled:l,children:"Cancelar"}),o.jsx("button",{type:"button",onClick:x,className:"btn btn-primary flex items-center gap-2",disabled:l||!u,children:l?"Enviando...":o.jsxs(o.Fragment,{children:[o.jsx(lJ,{className:"w-4 h-4"}),"Enviar Correos"]})})]})]})]})})]})},gje=()=>{var U,q,ie,Se;const e=Ge(),t=$e(Z=>Z.context),r=$e(Z=>Z.setContext),n=fr(Z=>Z.session),[a,i]=T.useState({status:"TODAS",reason:"TODAS",alertsOnly:!1}),[s,l]=T.useState(!1),[c,u]=T.useState(!1),[d,f]=T.useState(!1),[h,p]=T.useState(null),[v,g]=T.useState(!1),[x,b]=T.useState(!1),[m,y]=T.useState(!1),[_,w]=T.useState(!1),[S,j]=T.useState(null),[E,N]=T.useState(!1),A=rt({queryKey:["backup-loans",a],queryFn:()=>eje(a)}),C=rt({queryKey:["backup-kpis"],queryFn:sje}),D=rt({queryKey:["backup-email-settings"],queryFn:g8}),P=Xe({mutationFn:async Z=>({loan:await tje(Z),sendEmails:Z.send_emails}),onSuccess:({loan:Z,sendEmails:K})=>{e.invalidateQueries({queryKey:["backup-loans"]}),e.invalidateQueries({queryKey:["backup-kpis"]}),e.invalidateQueries({queryKey:["backup-cards"]}),l(!1),K&&(j(Z),w(!0))}}),H=Xe({mutationFn:({id:Z,recoveredAt:K,observation:te})=>rje(Z,K),onSuccess:()=>{e.invalidateQueries({queryKey:["backup-loans"]}),e.invalidateQueries({queryKey:["backup-kpis"]}),e.invalidateQueries({queryKey:["backup-cards"]}),b(!1),p(null)}}),V=Xe({mutationFn:({id:Z,reason:K})=>nje(Z,K),onSuccess:()=>{e.invalidateQueries({queryKey:["backup-loans"]}),e.invalidateQueries({queryKey:["backup-kpis"]}),e.invalidateQueries({queryKey:["backup-cards"]}),y(!1),p(null)}}),ae=T.useMemo(()=>{var K;let Z=A.data||[];if(t.mode!=="ALL"&&t.value){const te=(K=Kn.find(be=>be.value===t.value))==null?void 0:K.label;te&&(Z=Z.filter(be=>be.person_terminal===t.value||be.person_terminal===te))}if(a.alertsOnly){const te=new Date;Z=Z.filter(be=>{if(be.status!=="ASIGNADA")return!1;const ne=new Date(be.issued_at);return Math.floor((te.getTime()-ne.getTime())/(1e3*60*60*24))>be.alert_after_days})}return Z},[A.data,t,a.alertsOnly]),oe=Z=>{p(Z),g(!0)},X=Z=>{oe(Z)},re=Z=>{p(Z),b(!0)},ue=Z=>{p(Z),y(!0)},me=Z=>{j(Z),w(!0)},R=async Z=>{var be;if(!S)return;const K=(be=D.data)==null?void 0:be.find(ne=>ne.scope_code===S.person_terminal||ne.scope_type==="GLOBAL");if(!K){bF("Configuracin requerida",'Configure los correos primero en el botn "Correos"'),w(!1),j(null);return}N(!0);const te=await lje(S,K.manager_email,K.cc_emails||void 0,Z);N(!1),te.success?(Vn("Correos enviados","Los correos de notificacin fueron enviados correctamente",S.person_name),e.invalidateQueries({queryKey:["backup-loans"]})):zn("Error al enviar correos",te.error||"Error desconocido"),w(!1),j(null)},W=()=>{if(!ae.length)return;const Z=new Date,K=ae.map(te=>{var Fe;const be=new Date(te.issued_at),ne=Math.floor((Z.getTime()-be.getTime())/(1e3*60*60*24));return{rut:ml(te.person_rut),nombre:te.person_name,cargo:te.person_cargo||"",terminal:te.person_terminal,tarjeta:((Fe=te.backup_cards)==null?void 0:Fe.card_number)||"",motivo:te.reason==="PERDIDA"?"Perdida":"Deterioro",fecha_entrega:new Date(te.issued_at).toLocaleDateString("es-CL"),dias:ne,estado:te.status,descuento:te.discount_applied?te.discount_amount:0,correo_trabajador:te.boss_email||"",creado_por:te.created_by_supervisor}});Je({filename:`prestamos_respaldo_${new Date().toISOString().split("T")[0]}`,sheetName:"Prestamos",rows:K,columns:[{key:"rut",header:"RUT"},{key:"nombre",header:"Nombre"},{key:"cargo",header:"Cargo"},{key:"terminal",header:"Terminal"},{key:"tarjeta",header:"Tarjeta"},{key:"motivo",header:"Motivo"},{key:"fecha_entrega",header:"Fecha Entrega"},{key:"dias",header:"Dias"},{key:"estado",header:"Estado"},{key:"descuento",header:"Descuento"},{key:"email_jefatura",header:"Email Jefatura"},{key:"creado_por",header:"Creado Por"}]})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(Xt,{title:"Credenciales de Respaldo",description:"Control de prestamo de tarjetas de respaldo",actions:o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs("button",{onClick:()=>f(!0),className:"btn btn-secondary flex items-center gap-2",children:[o.jsx(uJ,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Correos"})]}),o.jsxs("button",{onClick:()=>u(!0),className:"btn btn-secondary flex items-center gap-2",children:[o.jsx(Ef,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Tarjetas"})]}),o.jsxs("button",{onClick:W,className:"btn btn-secondary flex items-center gap-2",children:[o.jsx(HQ,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"XLSX"})]}),o.jsxs("button",{onClick:()=>l(!0),className:"btn btn-primary flex items-center gap-2",children:[o.jsx(AR,{className:"w-4 h-4"}),"Nuevo Prestamo"]})]})}),o.jsx(EJ,{kpis:C.data||{availableByTerminal:{"El Roble":0,"La Reina":0,"Maria Angelica":0},activeLoans:0,overdueLoans:0,avgReturnDays:0,totalDiscounts:0},isLoading:C.isLoading}),!A.isLoading&&A.data&&A.data.length>0&&o.jsx(VSe,{loans:A.data}),o.jsxs("div",{className:"bg-white px-3 py-2 rounded-lg border border-slate-200 shadow-sm flex flex-wrap items-center gap-2",children:[o.jsx(QQ,{className:"w-4 h-4 text-slate-400 flex-shrink-0"}),o.jsx("input",{type:"text",className:"h-8 px-2 text-sm border border-slate-200 rounded-md w-32 focus:outline-none focus:ring-1 focus:ring-blue-400",placeholder:"RUT/Nombre...",value:a.search||"",onChange:Z=>i(K=>({...K,search:Z.target.value}))}),o.jsxs("select",{className:"h-8 px-2 text-sm border border-slate-200 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-400",value:t.value||"",onChange:Z=>{Z.target.value?r({mode:"TERMINAL",value:Z.target.value}):r({mode:"ALL"})},children:[o.jsx("option",{value:"",children:"Terminal"}),Kn.map(Z=>o.jsx("option",{value:Z.value,children:Z.label},Z.value))]}),o.jsxs("select",{className:"h-8 px-2 text-sm border border-slate-200 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-400",value:a.status||"TODAS",onChange:Z=>i(K=>({...K,status:Z.target.value})),children:[o.jsx("option",{value:"TODAS",children:"Estado"}),SJ.map(Z=>o.jsx("option",{value:Z.value,children:Z.label},Z.value))]}),o.jsxs("select",{className:"h-8 px-2 text-sm border border-slate-200 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-400",value:a.reason||"TODAS",onChange:Z=>i(K=>({...K,reason:Z.target.value})),children:[o.jsx("option",{value:"TODAS",children:"Motivo"}),CR.map(Z=>o.jsx("option",{value:Z.value,children:Z.label},Z.value))]}),o.jsxs("label",{className:"flex items-center gap-1 cursor-pointer text-xs text-slate-600 whitespace-nowrap",children:[o.jsx("input",{type:"checkbox",checked:a.alertsOnly||!1,onChange:Z=>i(K=>({...K,alertsOnly:Z.target.checked})),className:"w-3.5 h-3.5 rounded border-slate-300"}),o.jsx(Ug,{className:"w-3.5 h-3.5 text-amber-500"}),"Atrasados"]}),o.jsx("div",{className:"h-4 w-px bg-slate-200 hidden sm:block"}),o.jsx("input",{type:"date",className:"h-8 px-2 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400",value:a.dateFrom||"",onChange:Z=>i(K=>({...K,dateFrom:Z.target.value})),title:"Desde"}),o.jsx("span",{className:"text-slate-400 text-xs",children:"-"}),o.jsx("input",{type:"date",className:"h-8 px-2 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400",value:a.dateTo||"",onChange:Z=>i(K=>({...K,dateTo:Z.target.value})),title:"Hasta"})]}),A.isLoading&&o.jsx(Gt,{label:"Cargando prestamos..."}),A.isError&&o.jsx(Sr,{message:"Error al cargar prestamos",onRetry:A.refetch}),!A.isLoading&&!A.isError&&o.jsx(XSe,{loans:ae,onView:oe,onEdit:X,onRecover:re,onCancel:ue,onResendEmails:me}),o.jsx(cje,{isOpen:s,onClose:()=>l(!1),onSubmit:async(Z,K)=>{await P.mutateAsync(Z),Z.discount_applied&&K()},isLoading:P.isPending,supervisorName:(n==null?void 0:n.supervisorName)||"Supervisor"}),o.jsx(uje,{isOpen:v,loan:h,onClose:()=>{g(!1),p(null)}}),o.jsx(dje,{isOpen:x,loan:h,onClose:()=>{b(!1),p(null)},onSubmit:async(Z,K,te)=>{await H.mutateAsync({id:Z,recoveredAt:K,observation:te})},isLoading:H.isPending}),o.jsx(fje,{isOpen:m,loan:h,onClose:()=>{y(!1),p(null)},onSubmit:async(Z,K)=>{await V.mutateAsync({id:Z,reason:K})},isLoading:V.isPending}),o.jsx(hje,{isOpen:c,onClose:()=>u(!1)}),o.jsx(pje,{isOpen:d,onClose:()=>f(!1)}),o.jsx(mje,{isOpen:_,loan:S,managerEmail:((q=(U=D.data)==null?void 0:U.find(Z=>Z.scope_code===(S==null?void 0:S.person_terminal)||Z.scope_type==="GLOBAL"))==null?void 0:q.manager_email)||"",workerEmail:(S==null?void 0:S.boss_email)||"",cc:((Se=(ie=D.data)==null?void 0:ie.find(Z=>Z.scope_code===(S==null?void 0:S.person_terminal)||Z.scope_type==="GLOBAL"))==null?void 0:Se.cc_emails)||void 0,onClose:()=>{w(!1),j(null)},onSubmit:R,isLoading:E})]})},vje=[{id:"s-1",solicitante:"Ana Prez",tipo:"Materiales",fecha:"2023-12-04",estado:"abierta",terminal:"EL_ROBLE"},{id:"s-2",solicitante:"Carlos Vega",tipo:"Personal",fecha:"2023-12-03",estado:"en_proceso",terminal:"LA_REINA"},{id:"s-3",solicitante:"Laura Soto",tipo:"Tecnologa",fecha:"2023-12-02",estado:"cerrada",terminal:"EL_SALTO"}],oC=Eh(vje,(e,t)=>t!=null&&t.estado&&t.estado!=="todas"?e.estado===t.estado:!0),xje=()=>{const e=$e(b=>b.context),t=$e(b=>b.setContext),[r,n]=T.useState({estado:"todas"}),[a,i]=T.useState(""),[s,l]=T.useState(""),[c,u]=T.useState([]),d=rt({queryKey:["solicitudes",e,r],queryFn:()=>oC.list({terminalContext:e,filters:r,scope:"view"})}),f=T.useMemo(()=>[...d.data??[],...c],[d.data,c]),h=T.useMemo(()=>[{key:"tipo",header:"Tipo"},{key:"solicitante",header:"Solicitante"},{key:"estado",header:"Estado",render:b=>o.jsx("span",{className:"badge capitalize",children:b.estado}),value:b=>b.estado},{key:"fecha",header:"Fecha"},{key:"terminal",header:"Terminal",render:b=>He(b.terminal),value:b=>He(b.terminal)}],[]),p=h.map(b=>({key:b.key,header:b.header,value:m=>b.value?b.value(m):m[b.key]})),v=()=>{Je({filename:"solicitudes_vista",sheetName:"Solicitudes",rows:f,columns:p})},g=async()=>{const b=await oC.list({terminalContext:e,scope:"all"});Je({filename:"solicitudes_completo",sheetName:"Solicitudes",rows:b,columns:p})},x=()=>{const b={id:`local-${Date.now()}`,solicitante:s,tipo:a,estado:"abierta",fecha:new Date().toISOString().slice(0,10),terminal:e.value??"EL_ROBLE"};u(m=>[b,...m]),l(""),i("")};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Xt,{title:"Solicitudes",description:"Formulario universal para requerimientos",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"btn btn-primary",onClick:()=>{var b;return(b=document.getElementById("solicitud-form"))==null?void 0:b.scrollIntoView({behavior:"smooth"})},children:"Nueva solicitud"}),o.jsx(jr,{onExportView:v,onExportAll:g})]})}),o.jsx(An,{terminalContext:e,onTerminalChange:t,children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsxs("select",{className:"input",value:r.estado,onChange:b=>n({estado:b.target.value}),children:[o.jsx("option",{value:"todas",children:"Todas"}),o.jsx("option",{value:"abierta",children:"Abierta"}),o.jsx("option",{value:"en_proceso",children:"En proceso"}),o.jsx("option",{value:"cerrada",children:"Cerrada"})]})]})}),o.jsxs("div",{className:"card p-4",id:"solicitud-form",children:[o.jsx("p",{className:"mb-3 text-sm font-semibold text-slate-900",children:"Crear nueva solicitud"}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"label",children:"Solicitante"}),o.jsx("input",{className:"input",value:s,onChange:b=>l(b.target.value)})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"label",children:"Tipo"}),o.jsx("input",{className:"input",value:a,onChange:b=>i(b.target.value),placeholder:"Ej: Materiales"})]}),o.jsx("div",{className:"flex items-end justify-end",children:o.jsx("button",{className:"btn btn-primary",onClick:x,disabled:!s||!a,children:"Registrar (mock)"})})]})]}),d.isLoading&&o.jsx(Gt,{}),d.isError&&o.jsx(Sr,{onRetry:d.refetch}),!d.isLoading&&!d.isError&&o.jsxs(o.Fragment,{children:[!f.length&&o.jsx(ci,{description:"Sin solicitudes"}),f.length>0&&o.jsx(li,{columns:h,rows:f})]})]})},zh=({terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:l,children:c})=>o.jsxs(An,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Buscar PPU"}),o.jsx("input",{type:"text",className:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700 outline-none focus:border-brand-500 focus:ring-1 focus:ring-brand-500 w-32 lg:w-40",placeholder:"PPU...",value:r,onChange:u=>n(u.target.value)})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Desde"}),o.jsx("input",{type:"date",className:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700 outline-none focus:border-brand-500 w-full",value:a,onChange:u=>i(u.target.value)})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Hasta"}),o.jsx("input",{type:"date",className:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700 outline-none focus:border-brand-500 w-full",value:s,onChange:u=>l(u.target.value)})]}),c]}),qh=({items:e})=>o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:e.map((t,r)=>o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:t.label}),o.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:t.value}),t.subtext&&o.jsx("p",{className:"text-xs text-slate-400 mt-1 font-medium",children:t.subtext})]}),t.icon&&o.jsx("div",{className:`p-2 rounded-lg ${t.colorClass||"bg-slate-100 text-slate-600"}`,children:o.jsx(G,{name:t.icon,size:20})})]},r))}),yje="https://wvcplgwemvqhvtstlqmt.supabase.co",v8="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind2Y3BsZ3dlbXZxaHZ0c3RscW10Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAzNjIyMDUsImV4cCI6MjA3NTkzODIwNX0.K1YOv5lRn9fOous3AyG2gPxsQBzqOXRfYHgrCmO5zxk",bje=oR(yje,v8,{auth:{persistSession:!1,autoRefreshToken:!1},realtime:{params:{eventsPerSecond:10}}}),wje=()=>!!v8,Wh=async(e,t)=>{if(!wje())return[];let r=bje.from(e).select("*");if(t.terminalContext&&t.terminalContext.mode!=="ALL"){const c=Ba(t.terminalContext).map(u=>Ws[u]).filter(Boolean);c.length>0&&(r=r.in("terminal",c))}t.search&&(r=r.ilike("bus_ppu",`%${t.search}%`)),t.dateFrom&&(r=r.gte("created_at",t.dateFrom)),t.dateTo&&(r=r.lte("created_at",t.dateTo));const n=t.sortBy||"updated_at",a=t.sortOrder||"desc";r=r.order(n,{ascending:a==="asc"});const{data:i,error:s}=await r;if(s)throw console.error(`Error fetching ${e}:`,s),s;return i},_je=e=>Wh("extintores",e),Sje=e=>Wh("tags",e),jje=e=>Wh("mobileye",e),Eje=e=>Wh("odometro",e),Nje=e=>Wh("publicidad",e),Tje=e=>rt({queryKey:["minicheck","extintores",e],queryFn:()=>_je(e)}),Aje=e=>rt({queryKey:["minicheck","tags",e],queryFn:()=>Sje(e)}),Oje=e=>rt({queryKey:["minicheck","mobileye",e],queryFn:()=>jje(e)}),Cje=e=>rt({queryKey:["minicheck","odometros",e],queryFn:()=>Eje(e)}),kje=e=>rt({queryKey:["minicheck","publicidad",e],queryFn:()=>Nje(e)}),Pje=()=>{const e=$e(m=>m.context),t=$e(m=>m.setContext),[r,n]=T.useState(""),[a,i]=T.useState(""),[s,l]=T.useState(""),c=T.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:h}=Tje(c),p=T.useMemo(()=>{if(!u)return[];const m=u.length,y=u.filter(S=>S.certificacion==="VENCIDA").length,_=u.filter(S=>!S.tiene).length,w=u.filter(S=>S.presion==="BAJA_CARGA").length;return[{label:"Total Registros",value:m,icon:"clipboard"},{label:"Vencidos",value:y,icon:"alert-triangle",colorClass:"bg-red-50 text-red-600"},{label:"Sin Extintor",value:_,icon:"x",colorClass:"bg-orange-50 text-orange-600"},{label:"Presin Baja",value:w,icon:"activity",colorClass:"bg-yellow-50 text-yellow-600"}]},[u]),v=T.useMemo(()=>{if(!u)return[];const m=u.filter(_=>_.certificacion==="VIGENTE").length,y=u.filter(_=>_.certificacion==="VENCIDA").length;return[{name:"VIGENTE",value:m,color:"#10b981"},{name:"VENCIDA",value:y,color:"#ef4444"}]},[u]),g=[{key:"bus_ppu",header:"PPU",value:m=>m.bus_ppu},{key:"terminal",header:"Terminal",render:m=>He(m.terminal),value:m=>m.terminal},{key:"tiene",header:"Tiene",render:m=>o.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${m.tiene?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.tiene?"S":"NO"}),value:m=>m.tiene?"SI":"NO"},{key:"certificacion",header:"Certificacin",render:m=>o.jsx("span",{className:`text-xs font-bold ${m.certificacion==="VIGENTE"?"text-green-600":"text-red-600"}`,children:m.certificacion||"-"}),value:m=>m.certificacion||"-"},{key:"vencimiento_mes",header:"Vencimiento",render:m=>m.vencimiento_mes&&m.vencimiento_anio?`${m.vencimiento_mes}/${m.vencimiento_anio}`:"-",value:m=>`${m.vencimiento_mes}/${m.vencimiento_anio}`},{key:"presion",header:"Presin",value:m=>m.presion||"-"},{key:"cilindro",header:"Cilindro OK",render:m=>m.cilindro?"S":"No",value:m=>m.cilindro?"S":"No"},{key:"updated_at",header:"Actualizado",render:m=>tr(m.updated_at),value:m=>tr(m.updated_at)}],x=g.map(m=>({header:m.header,key:m.key,value:m.value})),b=()=>{u&&Je({filename:`minicheck_extintor_${new Date().toISOString().split("T")[0]}`,sheetName:"Extintores",rows:u,columns:x})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(Xt,{title:"Control de Extintores",description:"Validacin de estado y vencimiento de extintores",actions:o.jsx("div",{className:"flex gap-2",children:o.jsx(jr,{onExportView:b,onExportAll:b})})}),o.jsx(zh,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:l}),d&&o.jsx(Gt,{label:"Cargando extintores..."}),f&&o.jsx(Sr,{message:"No se pudieron obtener los registros de extintores.",onRetry:h}),!d&&!f&&o.jsxs(o.Fragment,{children:[o.jsx(qh,{items:p}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80",children:[o.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-4",children:"Estado Certificacin"}),o.jsx(Ri,{width:"100%",height:"100%",children:o.jsxs(wu,{data:v,children:[o.jsx(pl,{strokeDasharray:"3 3",vertical:!1}),o.jsx(Ki,{dataKey:"name",tick:{fontSize:10}}),o.jsx(Gi,{tick:{fontSize:10}}),o.jsx(vr,{}),o.jsx(wn,{dataKey:"value",name:"Cantidad",radius:[4,4,0,0],children:v.map((m,y)=>o.jsx(ts,{fill:m.color},`cell-${y}`))})]})})]}),o.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?o.jsx(li,{columns:g,rows:u}):o.jsx(ci,{label:"Sin registros",description:"No se encontraron extintores con los filtros seleccionados."})})]})]})]})},Rje=()=>{const e=$e(m=>m.context),t=$e(m=>m.setContext),[r,n]=T.useState(""),[a,i]=T.useState(""),[s,l]=T.useState(""),c=T.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:h}=Aje(c),p=T.useMemo(()=>{if(!u)return[];const m=u.length,y=u.filter(w=>!w.tiene).length,_=u.filter(w=>w.serie&&w.serie.trim().length>0).length;return[{label:"Total Registros",value:m,icon:"clipboard"},{label:"Sin TAG",value:y,icon:"alert-circle",colorClass:"bg-red-50 text-red-600"},{label:"Serie Informada",value:_,icon:"check",colorClass:"bg-blue-50 text-blue-600"}]},[u]),v=T.useMemo(()=>{if(!u)return[];const m=u.filter(_=>_.tiene).length,y=u.filter(_=>!_.tiene).length;return[{name:"Con TAG",value:m,color:"#10b981"},{name:"Sin TAG",value:y,color:"#ef4444"}]},[u]),g=[{key:"bus_ppu",header:"PPU",value:m=>m.bus_ppu},{key:"terminal",header:"Terminal",render:m=>He(m.terminal),value:m=>m.terminal},{key:"tiene",header:"Tiene TAG",render:m=>o.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${m.tiene?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.tiene?"S":"NO"}),value:m=>m.tiene?"SI":"NO"},{key:"serie",header:"N Serie",value:m=>m.serie||"-"},{key:"observacion",header:"Observacin",value:m=>m.observacion||""},{key:"updated_at",header:"Actualizado",render:m=>tr(m.updated_at),value:m=>tr(m.updated_at)}],x=g.map(m=>({header:m.header,key:m.key,value:m.value})),b=()=>{u&&Je({filename:`minicheck_tag_${new Date().toISOString().split("T")[0]}`,sheetName:"Tags",rows:u,columns:x})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(Xt,{title:"Control de TAG",description:"Verificacin de dispositivos TAG",actions:o.jsx("div",{className:"flex gap-2",children:o.jsx(jr,{onExportView:b,onExportAll:b})})}),o.jsx(zh,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:l}),d&&o.jsx(Gt,{label:"Cargando tags..."}),f&&o.jsx(Sr,{message:"No se pudieron cargar los datos.",onRetry:h}),!d&&!f&&o.jsxs(o.Fragment,{children:[o.jsx(qh,{items:p}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80 flex flex-col items-center justify-center",children:[o.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-2 w-full text-left",children:"Distribucin"}),o.jsx(Ri,{width:"100%",height:"100%",children:o.jsxs(sS,{children:[o.jsx(za,{data:v,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:v.map((m,y)=>o.jsx(ts,{fill:m.color},`cell-${y}`))}),o.jsx(vr,{}),o.jsx(Pi,{})]})})]}),o.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?o.jsx(li,{columns:g,rows:u}):o.jsx(ci,{label:"Sin registros",description:"No se encontraron datos."})})]})]})]})},Ije=()=>{const e=$e(y=>y.context),t=$e(y=>y.setContext),[r,n]=T.useState(""),[a,i]=T.useState(""),[s,l]=T.useState(""),c=T.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:h}=Oje(c),p=y=>y.consola&&y.sensor_frontal&&y.sensor_izq&&y.sensor_der,v=T.useMemo(()=>{if(!u)return[];const y=u.length,_=u.filter(S=>!p(S)).length,w=u.filter(S=>S.alerta_izq||S.alerta_der).length;return[{label:"Total Registros",value:y,icon:"clipboard"},{label:"Falla Sensores",value:_,icon:"alert-triangle",colorClass:"bg-red-50 text-red-600"},{label:"Alertas Activas",value:w,icon:"bell",colorClass:"bg-yellow-50 text-yellow-600"}]},[u]),g=T.useMemo(()=>{if(!u)return[];const y=u.filter(w=>p(w)).length,_=u.filter(w=>!p(w)).length;return[{name:"Sensores OK",value:y,color:"#10b981"},{name:"Falla",value:_,color:"#ef4444"}]},[u]),x=[{key:"bus_ppu",header:"PPU",value:y=>y.bus_ppu},{key:"terminal",header:"Terminal",render:y=>He(y.terminal),value:y=>y.terminal},{key:"bus_marca",header:"Marca",value:y=>y.bus_marca||"-"},{key:"consola",header:"Consola",render:y=>y.consola?o.jsx(G,{name:"check",size:16,className:"text-green-500"}):o.jsx(G,{name:"x",size:16,className:"text-red-500"}),value:y=>y.consola?"OK":"Falla"},{key:"id",header:"Sensores OK?",render:y=>{const _=p(y);return o.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${_?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:_?"S":"NO"})},value:y=>p(y)?"S":"NO"},{key:"id",header:"Alertas",render:y=>{const _=[];return y.alerta_izq&&_.push("IZQ"),y.alerta_der&&_.push("DER"),_.length>0?o.jsx("span",{className:"text-red-600 font-bold text-xs",children:_.join(", ")}):"-"},value:y=>{const _=[];return y.alerta_izq&&_.push("IZQ"),y.alerta_der&&_.push("DER"),_.join(", ")}},{key:"updated_at",header:"Actualizado",render:y=>tr(y.updated_at),value:y=>tr(y.updated_at)}],b=x.map(y=>({header:y.header,key:y.key,value:y.value})),m=()=>{u&&Je({filename:`minicheck_mobileye_${new Date().toISOString().split("T")[0]}`,sheetName:"Mobileye",rows:u,columns:b})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(Xt,{title:"Control Mobileye",description:"Estado de sensores y cmaras Mobileye",actions:o.jsx("div",{className:"flex gap-2",children:o.jsx(jr,{onExportView:m,onExportAll:m})})}),o.jsx(zh,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:l}),d&&o.jsx(Gt,{label:"Cargando Mobileye..."}),f&&o.jsx(Sr,{message:"No se pudieron cargar los datos.",onRetry:h}),!d&&!f&&o.jsxs(o.Fragment,{children:[o.jsx(qh,{items:v}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80",children:[o.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-4",children:"Estado General Sensores"}),o.jsx(Ri,{width:"100%",height:"100%",children:o.jsxs(wu,{data:g,children:[o.jsx(pl,{strokeDasharray:"3 3",vertical:!1}),o.jsx(Ki,{dataKey:"name",tick:{fontSize:10}}),o.jsx(Gi,{tick:{fontSize:10}}),o.jsx(vr,{}),o.jsx(wn,{dataKey:"value",name:"Cantidad",radius:[4,4,0,0],children:g.map((y,_)=>o.jsx(ts,{fill:y.color},`cell-${_}`))})]})})]}),o.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?o.jsx(li,{columns:x,rows:u}):o.jsx(ci,{label:"Sin registros",description:"No se encontraron datos."})})]})]})]})},Dje=()=>{const e=$e(m=>m.context),t=$e(m=>m.setContext),[r,n]=T.useState(""),[a,i]=T.useState(""),[s,l]=T.useState(""),c=T.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:h}=Cje(c),p=T.useMemo(()=>{if(!u)return[];const m=u.length,y=u.filter(w=>w.estado==="INCONSISTENTE").length,_=u.filter(w=>w.estado==="NO_FUNCIONA").length;return[{label:"Total Registros",value:m,icon:"clipboard"},{label:"Inconsistentes",value:y,icon:"alert-triangle",colorClass:"bg-yellow-50 text-yellow-600"},{label:"No Funciona",value:_,icon:"x-circle",colorClass:"bg-red-50 text-red-600"}]},[u]),v=T.useMemo(()=>{if(!u)return[];const m=u.filter(w=>w.estado==="OK").length,y=u.filter(w=>w.estado==="INCONSISTENTE").length,_=u.filter(w=>w.estado==="NO_FUNCIONA").length;return[{name:"OK",value:m,color:"#10b981"},{name:"INCONSISTENTE",value:y,color:"#f59e0b"},{name:"NO FUNCIONA",value:_,color:"#ef4444"}].filter(w=>w.value>0)},[u]),g=[{key:"bus_ppu",header:"PPU",value:m=>m.bus_ppu},{key:"terminal",header:"Terminal",render:m=>He(m.terminal),value:m=>m.terminal},{key:"lectura",header:"Lectura",value:m=>m.lectura.toLocaleString("es-CL")},{key:"estado",header:"Estado",render:m=>{let y="bg-gray-100 text-gray-800";return m.estado==="OK"&&(y="bg-green-100 text-green-800"),m.estado==="INCONSISTENTE"&&(y="bg-yellow-100 text-yellow-800"),m.estado==="NO_FUNCIONA"&&(y="bg-red-100 text-red-800"),o.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${y}`,children:m.estado})},value:m=>m.estado},{key:"observacion",header:"Observacin",value:m=>m.observacion||""},{key:"updated_at",header:"Actualizado",render:m=>tr(m.updated_at),value:m=>tr(m.updated_at)}],x=g.map(m=>({header:m.header,key:m.key,value:m.value})),b=()=>{u&&Je({filename:`minicheck_odometro_${new Date().toISOString().split("T")[0]}`,sheetName:"Odometros",rows:u,columns:x})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(Xt,{title:"Control Odmetro",description:"Lecturas y estado de odmetros",actions:o.jsx("div",{className:"flex gap-2",children:o.jsx(jr,{onExportView:b,onExportAll:b})})}),o.jsx(zh,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:l}),d&&o.jsx(Gt,{label:"Cargando Odmetros..."}),f&&o.jsx(Sr,{message:"No se pudieron cargar los datos.",onRetry:h}),!d&&!f&&o.jsxs(o.Fragment,{children:[o.jsx(qh,{items:p}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80 flex flex-col items-center justify-center",children:[o.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-2 w-full text-left",children:"Distribucin Estados"}),o.jsx(Ri,{width:"100%",height:"100%",children:o.jsxs(sS,{children:[o.jsx(za,{data:v,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:v.map((m,y)=>o.jsx(ts,{fill:m.color},`cell-${y}`))}),o.jsx(vr,{}),o.jsx(Pi,{})]})})]}),o.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?o.jsx(li,{columns:g,rows:u}):o.jsx(ci,{label:"Sin registros",description:"No se encontraron datos."})})]})]})]})},Mje=()=>{const e=$e(m=>m.context),t=$e(m=>m.setContext),[r,n]=T.useState(""),[a,i]=T.useState(""),[s,l]=T.useState(""),c=T.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:h}=kje(c),p=T.useMemo(()=>{if(!u)return[];const m=u.length,y=u.filter(S=>S.danio).length,_=u.filter(S=>S.residuos).length,w=u.filter(S=>!S.tiene).length;return[{label:"Total Registros",value:m,icon:"clipboard"},{label:"Con Dao",value:y,icon:"alert-triangle",colorClass:"bg-red-50 text-red-600"},{label:"Con Residuos",value:_,icon:"trash",colorClass:"bg-orange-50 text-orange-600"},{label:"Sin Publicidad",value:w,icon:"x-circle",colorClass:"bg-gray-50 text-gray-600"}]},[u]),v=T.useMemo(()=>{if(!u)return[];const m=u.filter(w=>w.danio).length,y=u.filter(w=>w.residuos).length,_=u.filter(w=>!w.tiene).length;return[{name:"Con Dao",value:m,color:"#ef4444"},{name:"Con Residuos",value:y,color:"#f97316"},{name:"Sin Pub.",value:_,color:"#64748b"}]},[u]),g=[{key:"bus_ppu",header:"PPU",value:m=>m.bus_ppu},{key:"terminal",header:"Terminal",render:m=>He(m.terminal),value:m=>m.terminal},{key:"tiene",header:"Tiene",render:m=>m.tiene?o.jsx("span",{className:"text-green-600 font-bold",children:"S"}):o.jsx("span",{className:"text-gray-400",children:"NO"}),value:m=>m.tiene?"SI":"NO"},{key:"danio",header:"Dao",render:m=>m.danio?o.jsx("span",{className:"px-2 py-0.5 rounded bg-red-100 text-red-800 text-xs font-bold",children:"S"}):o.jsx("span",{className:"text-gray-400",children:"-"}),value:m=>m.danio?"SI":"NO"},{key:"residuos",header:"Residuos",render:m=>m.residuos?o.jsx("span",{className:"px-2 py-0.5 rounded bg-orange-100 text-orange-800 text-xs font-bold",children:"S"}):o.jsx("span",{className:"text-gray-400",children:"-"}),value:m=>m.residuos?"SI":"NO"},{key:"nombre_publicidad",header:"Nombre",value:m=>m.nombre_publicidad||"-"},{key:"updated_at",header:"Actualizado",render:m=>tr(m.updated_at),value:m=>tr(m.updated_at)}],x=g.map(m=>({header:m.header,key:m.key,value:m.value})),b=()=>{u&&Je({filename:`minicheck_publicidad_${new Date().toISOString().split("T")[0]}`,sheetName:"Publicidad",rows:u,columns:x})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(Xt,{title:"Control Publicidad",description:"Estado de publicidad en buses",actions:o.jsx("div",{className:"flex gap-2",children:o.jsx(jr,{onExportView:b,onExportAll:b})})}),o.jsx(zh,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:l}),d&&o.jsx(Gt,{label:"Cargando publicidad..."}),f&&o.jsx(Sr,{message:"No se pudieron cargar los datos.",onRetry:h}),!d&&!f&&o.jsxs(o.Fragment,{children:[o.jsx(qh,{items:p}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80",children:[o.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-4",children:"Problemas Detectados"}),o.jsx(Ri,{width:"100%",height:"100%",children:o.jsxs(wu,{data:v,children:[o.jsx(pl,{strokeDasharray:"3 3",vertical:!1}),o.jsx(Ki,{dataKey:"name",tick:{fontSize:10}}),o.jsx(Gi,{tick:{fontSize:10}}),o.jsx(vr,{}),o.jsx(wn,{dataKey:"value",name:"Cantidad",radius:[4,4,0,0],children:v.map((m,y)=>o.jsx(ts,{fill:m.color},`cell-${y}`))})]})})]}),o.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?o.jsx(li,{columns:g,rows:u}):o.jsx(ci,{label:"Sin registros",description:"No se encontraron datos."})})]})]})]})},Lje=[{ppu:"ABCD12",modelo:"Camin 3/4",estado:"operativo",odometro:123400,proximaMantencion:"2024-01-15",terminal:"EL_ROBLE"},{ppu:"EFGH34",modelo:"Furgn",estado:"en_taller",odometro:88400,proximaMantencion:"2024-02-01",terminal:"LA_REINA"},{ppu:"IJKL56",modelo:"Tracto",estado:"fuera_servicio",odometro:23e4,proximaMantencion:"2024-01-30",terminal:"EL_SALTO"}],lC=Eh(Lje,(e,t)=>t!=null&&t.estado&&t.estado!=="todos"?e.estado===t.estado:!0),$je=()=>{const e=$e(v=>v.context),t=$e(v=>v.setContext),[r,n]=T.useState({estado:"todos"}),[a,i]=T.useState(""),s=rt({queryKey:["flota",e,r],queryFn:()=>lC.list({terminalContext:e,filters:r,scope:"view"})}),l=s.data??[],c=T.useMemo(()=>[{key:"ppu",header:"PPU"},{key:"modelo",header:"Modelo"},{key:"estado",header:"Estado",render:v=>o.jsx("span",{className:"badge capitalize",children:v.estado}),value:v=>v.estado},{key:"odometro",header:"Odmetro"},{key:"proximaMantencion",header:"Mantencin",render:v=>tr(v.proximaMantencion),value:v=>tr(v.proximaMantencion)},{key:"terminal",header:"Terminal",render:v=>He(v.terminal),value:v=>He(v.terminal)}],[]),u=c.map(v=>({key:v.key,header:v.header,value:g=>v.value?v.value(g):g[v.key]})),d=()=>{Je({filename:"flota_vista",sheetName:"Flota",rows:l,columns:u})},f=async()=>{const v=await lC.list({terminalContext:e,scope:"all"});Je({filename:"flota_completo",sheetName:"Flota",rows:v,columns:u})},h=T.useMemo(()=>{const v={};return l.forEach(g=>{v[g.estado]=(v[g.estado]??0)+1}),Object.entries(v).map(([g,x])=>({estado:g,count:x}))},[l]),p=l.find(v=>v.ppu===a)??l[0];return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Xt,{title:"Estado de Flota",description:"Vista por PPU con ficha y grficas",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"btn btn-primary",children:"Agregar unidad"}),o.jsx(jr,{onExportView:d,onExportAll:f})]})}),o.jsx(An,{terminalContext:e,onTerminalChange:t,children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsxs("select",{className:"input",value:r.estado,onChange:v=>n({estado:v.target.value}),children:[o.jsx("option",{value:"todos",children:"Todos"}),o.jsx("option",{value:"operativo",children:"Operativo"}),o.jsx("option",{value:"en_taller",children:"En taller"}),o.jsx("option",{value:"fuera_servicio",children:"Fuera de servicio"})]})]})}),s.isLoading&&o.jsx(Gt,{}),s.isError&&o.jsx(Sr,{onRetry:s.refetch}),!s.isLoading&&!s.isError&&l.length===0&&o.jsx(ci,{description:"Sin unidades"}),!s.isLoading&&!s.isError&&l.length>0&&o.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[o.jsx("div",{className:"md:col-span-2 space-y-3",children:o.jsx(li,{columns:c,rows:l})}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"card p-4",children:[o.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Resumen por estado"}),o.jsx("div",{className:"mt-2 h-48",children:o.jsx(Ri,{width:"100%",height:"100%",children:o.jsxs(wu,{data:h,children:[o.jsx(pl,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),o.jsx(Ki,{dataKey:"estado",tick:{fontSize:12}}),o.jsx(Gi,{allowDecimals:!1}),o.jsx(vr,{}),o.jsx(wn,{dataKey:"count",fill:"#3c5eff",radius:[6,6,0,0]})]})})})]}),p&&o.jsxs("div",{className:"card p-4",children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[o.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Ficha rpida"}),o.jsx("select",{className:"input w-32",value:p.ppu,onChange:v=>i(v.target.value),children:l.map(v=>o.jsx("option",{value:v.ppu,children:v.ppu},v.ppu))})]}),o.jsxs("dl",{className:"space-y-2 text-sm text-slate-700",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("dt",{className:"font-semibold",children:"Modelo"}),o.jsx("dd",{children:p.modelo})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("dt",{className:"font-semibold",children:"Estado"}),o.jsx("dd",{className:"badge capitalize",children:p.estado})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("dt",{className:"font-semibold",children:"Odmetro"}),o.jsx("dd",{children:p.odometro.toLocaleString("es-CL")})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("dt",{className:"font-semibold",children:"Prxima mantencin"}),o.jsx("dd",{children:tr(p.proximaMantencion)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("dt",{className:"font-semibold",children:"Terminal"}),o.jsx("dd",{children:He(p.terminal)})]})]})]})]})]})]})},Fje="modulepreload",Bje=function(e,t){return new URL(e,t).href},cC={},Uje=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){const s=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(r.map(u=>{if(u=Bje(u,n),u in cC)return;cC[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!n)for(let v=s.length-1;v>=0;v--){const g=s[v];if(g.href===u&&(!d||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":Fje,d||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),d)return new Promise((v,g)=>{p.addEventListener("load",v),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return a.then(s=>{for(const l of s||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},_u={TERMINAL:["El Roble"],CABEZAL:["El Descanso","Aeropuerto","Intermodal La Cisterna"]},Sc=e=>{const t={};return e.forEach(r=>{t[r.supply_id]=(t[r.supply_id]||0)+r.quantity}),t},jc=(e,t,r,n)=>e.filter(a=>a.location_type===t&&a.location_name===r&&n.includes(a.period)),zje=(e,t)=>{const r={},n=jc(e,"TERMINAL","El Roble",["DAY"]),a=Sc(n);Object.entries(a).forEach(([l,c])=>{r[l]=(r[l]||0)+c*5});const i=jc(e,"TERMINAL","El Roble",["NIGHT"]),s=Sc(i);return Object.entries(s).forEach(([l,c])=>{r[l]=(r[l]||0)+c*4}),_u.CABEZAL.forEach(l=>{const c=jc(e,"CABEZAL",l,["DAY"]),u=Sc(c);Object.entries(u).forEach(([d,f])=>{r[d]=(r[d]||0)+f*5})}),x8(r,t)},qje=(e,t)=>{const r={},n=jc(e,"TERMINAL","El Roble",["DAY"]),a=Sc(n);Object.entries(a).forEach(([l,c])=>{r[l]=(r[l]||0)+c*2});const i=jc(e,"TERMINAL","El Roble",["NIGHT"]),s=Sc(i);return Object.entries(s).forEach(([l,c])=>{r[l]=(r[l]||0)+c*3}),_u.CABEZAL.forEach(l=>{const c=jc(e,"CABEZAL",l,["WEEKEND"]),u=Sc(c);Object.entries(u).forEach(([d,f])=>{r[d]=(r[d]||0)+f*2})}),x8(r,t)},x8=(e,t)=>{const r=new Map(t.map(n=>[n.id,n]));return Object.entries(e).filter(([,n])=>n>0).map(([n,a])=>{var i;return{supply_id:n,supply_name:((i=r.get(n))==null?void 0:i.name)||"Desconocido",quantity:a}}).sort((n,a)=>n.supply_name.localeCompare(a.supply_name))},Wje=()=>{const e=new Date().getDay();return e===1?"SEMANA":e===5?"FIN_SEMANA":"EXTRA"},Hje=(e,t)=>{if(!t)return null;const r=new Date(e);return r.setDate(r.getDate()+t),r},hw=(e,t=3)=>{if(!e)return!1;const r=new Date(e),n=new Date;return Math.ceil((r.getTime()-n.getTime())/(1e3*60*60*24))<=t},pw=e=>({SEMANA:"Semana",FIN_SEMANA:"Fin de Semana",EXTRA:"Extra"})[e]||e,uC=e=>e==="PENDIENTE"?"Pendiente":"Retirado",Dv=async()=>{if(!Xr())return[];const{data:e,error:t}=await fe.from("supplies").select("*").order("name");if(t)throw console.error("Error fetching supplies:",t),t;return e||[]},Vje=async e=>{const{data:t,error:r}=await fe.from("supplies").insert(e).select().single();if(r)throw console.error("Error creating supply:",r),r;return t},Kje=async(e,t)=>{const{data:r,error:n}=await fe.from("supplies").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating supply:",n),n;return r},Gje=async e=>{const{error:t}=await fe.from("supplies").delete().eq("id",e);if(t)throw console.error("Error deleting supply:",t),t},y8=async()=>{if(!Xr())return[];const{data:e,error:t}=await fe.from("supply_consumption_profiles").select("*").order("location_type").order("location_name").order("period");if(t)throw console.error("Error fetching consumption profiles:",t),t;return e||[]},Xje=async e=>{const{data:t,error:r}=await fe.from("supply_consumption_profiles").upsert(e,{onConflict:"location_type,location_name,period,supply_id"}).select().single();if(r)throw console.error("Error upserting consumption profile:",r),r;return t},b8=async e=>{if(!Xr())return[];let t=fe.from("supply_requests").select("*").order("requested_at",{ascending:!1});e!=null&&e.status&&(t=t.eq("status",e.status)),e!=null&&e.terminal&&(t=t.eq("terminal",e.terminal));const{data:r,error:n}=await t;if(n)throw console.error("Error fetching supply requests:",n),n;return r||[]},Yje=async e=>{if(!Xr())return null;const{data:t,error:r}=await fe.from("supply_requests").select("*").eq("id",e).single();if(r)throw console.error("Error fetching supply request:",r),r;const{data:n,error:a}=await fe.from("supply_request_items").select("*, supply:supplies(*)").eq("request_id",e);if(a)throw console.error("Error fetching request items:",a),a;return{...t,items:n||[]}},Qje=async(e,t,r)=>{const{data:n,error:a}=await fe.from("supply_requests").insert({terminal:e.terminal,request_type:e.request_type,created_by:t,consumption_snapshot:r}).select().single();if(a)throw console.error("Error creating supply request:",a),a;const i=e.items.filter(s=>s.quantity>0).map(s=>({request_id:n.id,supply_id:s.supply_id,quantity:s.quantity,is_extra:s.is_extra}));if(i.length>0){const{error:s}=await fe.from("supply_request_items").insert(i);if(s)throw console.error("Error creating request items:",s),s}try{await Jje(n,r||{})}catch(s){console.error("Error sending request email:",s)}return n},Jje=async(e,t)=>{let r;e.request_type==="SEMANA"?r="MONDAY":e.request_type==="FIN_SEMANA"?r="FRIDAY":r="MANUAL";const{data:n,error:a}=await fe.from("supply_email_settings").select("*").eq("trigger",r).eq("enabled",!0).single();if(a||!n){console.log(`No enabled email settings found for trigger: ${r}`);return}if(!n.recipients){console.log(`No recipients configured for trigger: ${r}`);return}const i=Object.entries(t).map(([u,d])=>`<tr><td style="padding: 8px; border-bottom: 1px solid #e2e8f0;">${u}</td><td style="padding: 8px; border-bottom: 1px solid #e2e8f0; text-align: center;">${d}</td></tr>`).join(""),s=Object.values(t).reduce((u,d)=>u+d,0),l=`
        <p><strong>Terminal:</strong> ${e.terminal}</p>
        <p><strong>Tipo:</strong> ${e.request_type==="SEMANA"?"Semanal":e.request_type==="FIN_SEMANA"?"Fin de Semana":"Extra"}</p>
        <p><strong>Solicitado por:</strong> ${e.created_by}</p>
        <p><strong>Fecha:</strong> ${new Date(e.requested_at).toLocaleString("es-CL")}</p>
        
        <table style="width: 100%; border-collapse: collapse; margin-top: 16px;">
            <thead>
                <tr style="background-color: #f8fafc;">
                    <th style="padding: 10px; text-align: left; border-bottom: 2px solid #e2e8f0;">Insumo</th>
                    <th style="padding: 10px; text-align: center; border-bottom: 2px solid #e2e8f0;">Cantidad</th>
                </tr>
            </thead>
            <tbody>
                ${i}
            </tbody>
            <tfoot>
                <tr style="background-color: #f8fafc; font-weight: bold;">
                    <td style="padding: 10px;">TOTAL</td>
                    <td style="padding: 10px; text-align: center;">${s} unidades</td>
                </tr>
            </tfoot>
        </table>
        
        ${n.body?`<div style="margin-top: 24px;">${n.body}</div>`:""}
    `,{emailService:c}=await Uje(async()=>{const{emailService:u}=await Promise.resolve().then(()=>AX);return{emailService:u}},void 0,import.meta.url);await c.sendEmail({audience:"manual",manualRecipients:n.recipients.split(",").map(u=>u.trim()),subject:n.subject,body:l,module:"informativos"})},Zje=async e=>{const{data:t,error:r}=await fe.from("supply_requests").update({status:"RETIRADO",retrieved_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw console.error("Error marking request as retrieved:",r),r;return t},eEe=async e=>{const{error:t}=await fe.from("supply_requests").delete().eq("id",e);if(t)throw console.error("Error deleting supply request:",t),t},tEe=async(e,t)=>{const r=t.name.split(".").pop(),a=`receipts/${`${e}_${Date.now()}.${r}`}`,{error:i}=await fe.storage.from("supply-receipts").upload(a,t);if(i)throw console.error("Error uploading receipt:",i),i;const{error:s}=await fe.from("supply_requests").update({receipt_path:a}).eq("id",e);if(s)throw console.error("Error updating receipt path:",s),s;return a},rEe=async e=>{const{data:t}=await fe.storage.from("supply-receipts").createSignedUrl(e,3600);return(t==null?void 0:t.signedUrl)||""},nEe=async()=>{if(!Xr())return[];const{data:e,error:t}=await fe.from("supply_deliveries").select("*, supply:supplies(*)").order("delivered_at",{ascending:!1});if(t)throw console.error("Error fetching deliveries with supplies:",t),t;return e||[]},aEe=async(e,t,r)=>{const n=new Date,a=Hje(n,r),{data:i,error:s}=await fe.from("supply_deliveries").insert({...e,created_by:t,delivered_at:n.toISOString(),next_delivery_at:(a==null?void 0:a.toISOString())||null}).select().single();if(s)throw console.error("Error creating delivery:",s),s;return i},w8=async()=>{if(!Xr())return[];const{data:e,error:t}=await fe.from("supply_email_settings").select("*").order("trigger");if(t)throw console.error("Error fetching email settings:",t),t;return e||[]},dC=async(e,t)=>{const{data:r,error:n}=await fe.from("supply_email_settings").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating email settings:",n),n;return r},iEe=async(e,t)=>{const{data:r,error:n}=await fe.from("supply_email_settings").insert({trigger:e,...t}).select().single();if(n)throw console.error("Error creating email settings:",n),n;return r},sEe=async()=>{const e=await w8();if(e.length>0)return e;const t=[{trigger:"MONDAY",recipients:"",subject:"Solicitud Semanal de Insumos",body:"",enabled:!0},{trigger:"FRIDAY",recipients:"",subject:"Solicitud Fin de Semana - Insumos",body:"",enabled:!0},{trigger:"MANUAL",recipients:"",subject:"Solicitud Manual de Insumos",body:"",enabled:!0}],r=[];for(const n of t)try{const a=await iEe(n.trigger,{recipients:n.recipients,subject:n.subject,body:n.body,enabled:n.enabled});r.push(a)}catch(a){console.error(`Error creating default email setting for ${n.trigger}:`,a)}return r},oEe=async()=>{if(!Xr())return{pending:0,retrieved:0};const{data:e,error:t}=await fe.from("supply_requests").select("status");if(t)throw console.error("Error fetching request stats:",t),t;const r=(e==null?void 0:e.filter(a=>a.status==="PENDIENTE").length)||0,n=(e==null?void 0:e.filter(a=>a.status==="RETIRADO").length)||0;return{pending:r,retrieved:n}},lEe=async(e=7)=>{if(!Xr())return[];const t=new Date;t.setDate(t.getDate()+e);const{data:r,error:n}=await fe.from("supply_deliveries").select("*, supply:supplies(*)").not("next_delivery_at","is",null).lte("next_delivery_at",t.toISOString()).order("next_delivery_at");if(n)throw console.error("Error fetching upcoming deliveries:",n),n;return r||[]},cEe=()=>{const[e,t]=T.useState({supplies:[],requestStats:{pending:0,retrieved:0},upcomingDeliveries:[],recentRequests:[]}),[r,n]=T.useState(!0);T.useEffect(()=>{(async()=>{try{const[s,l,c,u]=await Promise.all([Dv(),oEe(),lEe(7),b8()]);t({supplies:s,requestStats:l,upcomingDeliveries:c,recentRequests:u.slice(0,5)})}catch(s){console.error("Error loading dashboard stats:",s)}finally{n(!1)}})()},[]),e.supplies.filter(i=>i.min_stock>0&&i.min_stock>0);const a=e.upcomingDeliveries.filter(i=>hw(i.next_delivery_at,3));return r?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[o.jsx("div",{className:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-brand-100 text-brand-600",children:o.jsx(G,{name:"package",size:22})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Insumos"}),o.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.supplies.length})]})]})}),o.jsx("div",{className:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-warning-100 text-warning-600",children:o.jsx(G,{name:"clock",size:22})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Pendientes"}),o.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.requestStats.pending})]})]})}),o.jsx("div",{className:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-success-100 text-success-600",children:o.jsx(G,{name:"check-circle",size:22})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Retiradas"}),o.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.requestStats.retrieved})]})]})}),o.jsx("div",{className:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`flex h-11 w-11 items-center justify-center rounded-xl ${a.length>0?"bg-danger-100 text-danger-600":"bg-slate-100 text-slate-500"}`,children:o.jsx(G,{name:"alert-triangle",size:22})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Alertas"}),o.jsx("p",{className:"text-2xl font-bold text-slate-800",children:a.length})]})]})})]}),o.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-4",children:[o.jsx("h3",{className:"font-semibold text-slate-800",children:"Solicitudes Recientes"}),o.jsx(G,{name:"file-text",size:18,className:"text-slate-400"})]}),o.jsx("div",{className:"divide-y divide-slate-100",children:e.recentRequests.length===0?o.jsx("div",{className:"px-5 py-8 text-center text-sm text-slate-500",children:"No hay solicitudes registradas"}):e.recentRequests.map(i=>o.jsxs("div",{className:"flex items-center gap-4 px-5 py-3.5",children:[o.jsx("div",{className:`flex h-9 w-9 items-center justify-center rounded-lg ${i.status==="PENDIENTE"?"bg-warning-100 text-warning-600":"bg-success-100 text-success-600"}`,children:o.jsx(G,{name:i.status==="PENDIENTE"?"clock":"check",size:16})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("p",{className:"text-sm font-medium text-slate-800 truncate",children:[pw(i.request_type)," - ",i.terminal]}),o.jsx("p",{className:"text-xs text-slate-500",children:new Date(i.requested_at).toLocaleDateString("es-CL")})]}),o.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${i.status==="PENDIENTE"?"bg-warning-100 text-warning-700":"bg-success-100 text-success-700"}`,children:i.status==="PENDIENTE"?"Pendiente":"Retirado"})]},i.id))})]}),o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-4",children:[o.jsx("h3",{className:"font-semibold text-slate-800",children:"Entregas Proximas"}),o.jsx(G,{name:"calendar",size:18,className:"text-slate-400"})]}),o.jsx("div",{className:"divide-y divide-slate-100",children:e.upcomingDeliveries.length===0?o.jsx("div",{className:"px-5 py-8 text-center text-sm text-slate-500",children:"No hay entregas programadas"}):e.upcomingDeliveries.slice(0,5).map(i=>{const s=hw(i.next_delivery_at,3);return o.jsxs("div",{className:"flex items-center gap-4 px-5 py-3.5",children:[o.jsx("div",{className:`flex h-9 w-9 items-center justify-center rounded-lg ${s?"bg-danger-100 text-danger-600":"bg-slate-100 text-slate-600"}`,children:o.jsx(G,{name:"user",size:16})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-slate-800 truncate",children:i.staff_name}),o.jsx("p",{className:"text-xs text-slate-500",children:i.next_delivery_at?new Date(i.next_delivery_at).toLocaleDateString("es-CL"):"Sin fecha"})]}),s&&o.jsx("span",{className:"inline-flex items-center rounded-full bg-danger-100 px-2.5 py-0.5 text-xs font-medium text-danger-700",children:"Vencida"})]},i.id)})})]})]}),o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-4",children:[o.jsx("h3",{className:"font-semibold text-slate-800",children:"Catalogo de Insumos"}),o.jsxs("span",{className:"text-sm text-slate-500",children:[e.supplies.length," insumos"]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("th",{className:"px-5 py-3",children:"Nombre"}),o.jsx("th",{className:"px-5 py-3",children:"Unidad"}),o.jsx("th",{className:"px-5 py-3 text-center",children:"Vida Util"}),o.jsx("th",{className:"px-5 py-3 text-center",children:"Stock Min"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:e.supplies.map(i=>o.jsxs("tr",{className:"hover:bg-slate-50",children:[o.jsx("td",{className:"px-5 py-3 text-sm font-medium text-slate-800",children:i.name}),o.jsx("td",{className:"px-5 py-3 text-sm text-slate-600",children:i.unit}),o.jsx("td",{className:"px-5 py-3 text-center text-sm text-slate-600",children:i.life_days?`${i.life_days} dias`:"-"}),o.jsx("td",{className:"px-5 py-3 text-center text-sm text-slate-600",children:i.min_stock>0?i.min_stock:"-"})]},i.id))})]})})]})]})},uEe=({onSuccess:e,onCancel:t})=>{const r=fr(j=>j.session),[n,a]=T.useState([]),[i,s]=T.useState([]),[l,c]=T.useState(!0),[u,d]=T.useState(!1),[f,h]=T.useState(_u.TERMINAL[0]),[p,v]=T.useState(Wje()),[g,x]=T.useState([]),[b,m]=T.useState({supply_id:"",quantity:0});T.useEffect(()=>{(async()=>{try{const[E,N]=await Promise.all([Dv(),y8()]);a(E),s(N)}catch(E){console.error("Error loading form data:",E)}finally{c(!1)}})()},[]),T.useEffect(()=>{if(n.length===0||i.length===0)return;let j;p==="SEMANA"?j=zje(i,n):p==="FIN_SEMANA"?j=qje(i,n):j=[],x(j.map(E=>({...E,is_extra:!1})))},[p,n,i]);const y=(j,E)=>{x(N=>N.map(A=>A.supply_id===j?{...A,quantity:Math.max(0,E)}:A))},_=()=>{if(!b.supply_id||b.quantity<=0)return;const j=n.find(N=>N.id===b.supply_id);if(!j)return;const E=g.find(N=>N.supply_id===b.supply_id);x(E?N=>N.map(A=>A.supply_id===b.supply_id?{...A,quantity:A.quantity+b.quantity}:A):N=>[...N,{supply_id:b.supply_id,supply_name:j.name,quantity:b.quantity,is_extra:!0}]),m({supply_id:"",quantity:0})},w=j=>{x(E=>E.filter(N=>N.supply_id!==j))},S=async()=>{const j=g.filter(E=>E.quantity>0);if(j.length===0){alert("Debe agregar al menos un insumo");return}d(!0);try{const E={};j.forEach(N=>{E[N.supply_name]=N.quantity}),await Qje({terminal:f,request_type:p,items:j.map(N=>({supply_id:N.supply_id,quantity:N.quantity,is_extra:N.is_extra}))},(r==null?void 0:r.supervisorName)||"Usuario",E),e()}catch(E){console.error("Error creating request:",E),alert("Error al crear la solicitud")}finally{d(!1)}};return l?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Terminal"}),o.jsx("select",{value:f,onChange:j=>h(j.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:_u.TERMINAL.map(j=>o.jsx("option",{value:j,children:j},j))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Tipo de Solicitud"}),o.jsxs("select",{value:p,onChange:j=>v(j.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:[o.jsx("option",{value:"SEMANA",children:"Semana (Lun-Vie)"}),o.jsx("option",{value:"FIN_SEMANA",children:"Fin de Semana"}),o.jsx("option",{value:"EXTRA",children:"Extra"})]})]})]}),p!=="EXTRA"&&o.jsx("div",{className:"rounded-lg bg-brand-50 p-3 text-sm text-brand-700",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(G,{name:"info",size:18,className:"mt-0.5 flex-shrink-0"}),o.jsx("p",{children:p==="SEMANA"?"Calculo automatico para Lunes a Viernes incluyendo noches de lunes a jueves.":"Calculo automatico para Viernes noche, Sabado y Domingo completos."})]})}),o.jsx("div",{className:"rounded-lg border border-slate-200 overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-slate-50 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("th",{className:"px-4 py-2",children:"Insumo"}),o.jsx("th",{className:"px-4 py-2 text-right w-24",children:"Cantidad"}),o.jsx("th",{className:"px-4 py-2 w-12"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:g.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"px-4 py-6 text-center text-slate-500",children:"No hay insumos. Agregue items extra."})}):g.map(j=>o.jsxs("tr",{children:[o.jsxs("td",{className:"px-4 py-2 text-slate-800",children:[j.supply_name,j.is_extra&&o.jsx("span",{className:"ml-2 text-xs text-brand-500",children:"(extra)"})]}),o.jsx("td",{className:"px-4 py-2",children:o.jsx("input",{type:"number",min:"0",value:j.quantity,onChange:E=>y(j.supply_id,parseInt(E.target.value)||0),className:"w-full rounded border border-slate-300 px-2 py-1 text-right text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})}),o.jsx("td",{className:"px-4 py-2 text-center",children:o.jsx("button",{onClick:()=>w(j.supply_id),className:"rounded p-1 text-slate-400 hover:bg-danger-100 hover:text-danger-600",children:o.jsx(G,{name:"x",size:16})})})]},j.supply_id))})]})}),o.jsxs("div",{className:"rounded-lg border border-dashed border-slate-300 p-4",children:[o.jsx("p",{className:"mb-3 text-sm font-medium text-slate-700",children:"Agregar insumo extra"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("select",{value:b.supply_id,onChange:j=>m(E=>({...E,supply_id:j.target.value})),className:"flex-1 rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:[o.jsx("option",{value:"",children:"Seleccionar insumo..."}),n.filter(j=>!g.some(E=>E.supply_id===j.id)).map(j=>o.jsx("option",{value:j.id,children:j.name},j.id))]}),o.jsx("input",{type:"number",min:"1",placeholder:"Cant.",value:b.quantity||"",onChange:j=>m(E=>({...E,quantity:parseInt(j.target.value)||0})),className:"w-20 rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"}),o.jsx("button",{onClick:_,disabled:!b.supply_id||b.quantity<=0,className:"rounded-lg bg-slate-100 px-3 py-2 text-slate-600 hover:bg-slate-200 disabled:opacity-50",children:o.jsx(G,{name:"plus",size:18})})]})]}),o.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-slate-50 px-4 py-3",children:[o.jsxs("span",{className:"text-sm font-medium text-slate-600",children:["Total items: ",g.filter(j=>j.quantity>0).length]}),o.jsxs("span",{className:"text-sm font-bold text-slate-800",children:[g.reduce((j,E)=>j+E.quantity,0)," unidades"]})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:t,className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),o.jsxs("button",{onClick:S,disabled:u||g.filter(j=>j.quantity>0).length===0,className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[u&&o.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Crear Solicitud"]})]})]})},dEe=({onRefresh:e})=>{const[t,r]=T.useState([]),[n,a]=T.useState(!0),[i,s]=T.useState(!1),[l,c]=T.useState(null),[u,d]=T.useState(!1),[f,h]=T.useState("ALL"),[p,v]=T.useState(null),[g,x]=T.useState(null),[b,m]=T.useState(!1),[y,_]=T.useState(null),w=async()=>{try{a(!0);const P=await b8(f!=="ALL"?{status:f}:void 0);r(P)}catch(P){console.error("Error loading requests:",P)}finally{a(!1)}};T.useEffect(()=>{w()},[f]);const S=async P=>{try{const H=await Yje(P);c(H),d(!0)}catch(H){console.error("Error loading request detail:",H)}},j=P=>{v(P),x(null),_(null)},E=async()=>{if(!(!p||!g)){m(!0),_(null);try{await tEe(p,g),await Zje(p),v(null),x(null),await w(),e==null||e()}catch(P){console.error("Error closing request:",P);const H=P instanceof Error?P.message:"Error desconocido";H.includes("Bucket not found")||H.includes("not found")?_('El bucket de almacenamiento no existe. Contacte al administrador para crear el bucket "supply-receipts" en Supabase Storage.'):H.includes("security")||H.includes("policy")?_("Error de permisos. Verifique las polticas del bucket en Supabase."):_(`Error al cerrar solicitud: ${H}`)}finally{m(!1)}}},N=P=>{var V;const H=(V=P.target.files)==null?void 0:V[0];if(H){if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(H.type)){_("Tipo de archivo no vlido. Use PDF, JPG o PNG.");return}if(H.size>5*1024*1024){_("El archivo excede 5MB.");return}x(H),_(null)}},A=async P=>{if(confirm("Eliminar esta solicitud?"))try{await eEe(P),await w(),e==null||e()}catch(H){console.error("Error deleting request:",H)}},C=async P=>{try{const H=await rEe(P);window.open(H,"_blank")}catch(H){console.error("Error getting receipt URL:",H)}},D=()=>{s(!1),w(),e==null||e()};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>h("ALL"),className:`rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${f==="ALL"?"bg-brand-500 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Todas"}),o.jsx("button",{onClick:()=>h("PENDIENTE"),className:`rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${f==="PENDIENTE"?"bg-warning-500 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Pendientes"}),o.jsx("button",{onClick:()=>h("RETIRADO"),className:`rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${f==="RETIRADO"?"bg-success-500 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Retiradas"})]}),o.jsxs("button",{onClick:()=>s(!0),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 transition-colors",children:[o.jsx(G,{name:"plus",size:18}),o.jsx("span",{children:"Nueva Solicitud"})]})]}),o.jsx("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:n?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):t.length===0?o.jsxs("div",{className:"px-5 py-12 text-center",children:[o.jsx(G,{name:"inbox",size:40,className:"mx-auto text-slate-300 mb-3"}),o.jsx("p",{className:"text-sm text-slate-500",children:"No hay solicitudes registradas"})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("th",{className:"px-4 py-3",children:"Fecha"}),o.jsx("th",{className:"px-4 py-3",children:"Tipo"}),o.jsx("th",{className:"px-4 py-3",children:"Terminal"}),o.jsx("th",{className:"px-4 py-3",children:"Estado"}),o.jsx("th",{className:"px-4 py-3",children:"Creado por"}),o.jsx("th",{className:"px-4 py-3 text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:t.map(P=>o.jsxs("tr",{className:"hover:bg-slate-50",children:[o.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:new Date(P.requested_at).toLocaleDateString("es-CL")}),o.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:pw(P.request_type)}),o.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:P.terminal}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${P.status==="PENDIENTE"?"bg-warning-100 text-warning-700":"bg-success-100 text-success-700"}`,children:uC(P.status)})}),o.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:P.created_by}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[o.jsx("button",{onClick:()=>S(P.id),className:"rounded-lg p-1.5 text-slate-500 hover:bg-slate-100 hover:text-brand-600",title:"Ver detalle",children:o.jsx(G,{name:"eye",size:16})}),P.status==="PENDIENTE"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>j(P.id),className:"rounded-lg p-1.5 text-slate-500 hover:bg-success-100 hover:text-success-600",title:"Cerrar solicitud (requiere boleta)",children:o.jsx(G,{name:"check",size:16})}),o.jsx("button",{onClick:()=>A(P.id),className:"rounded-lg p-1.5 text-slate-500 hover:bg-danger-100 hover:text-danger-600",title:"Eliminar",children:o.jsx(G,{name:"trash",size:16})})]}),P.receipt_path&&o.jsx("button",{onClick:()=>C(P.receipt_path),className:"rounded-lg p-1.5 text-slate-500 hover:bg-slate-100 hover:text-brand-600",title:"Ver boleta",children:o.jsx(G,{name:"file",size:16})})]})})]},P.id))})]})})}),i&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/60 p-4 backdrop-blur-sm",children:o.jsxs("div",{className:"relative mt-8 w-full max-w-2xl rounded-2xl bg-white p-6 shadow-xl",children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Nueva Solicitud"}),o.jsx("button",{onClick:()=>s(!1),className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:o.jsx(G,{name:"x",size:20})})]}),o.jsx(uEe,{onSuccess:D,onCancel:()=>s(!1)})]})}),u&&l&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/60 p-4 backdrop-blur-sm",children:o.jsxs("div",{className:"relative mt-8 w-full max-w-lg rounded-2xl bg-white p-6 shadow-xl",children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Detalle Solicitud"}),o.jsx("button",{onClick:()=>{d(!1),c(null)},className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:o.jsx(G,{name:"x",size:20})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500",children:"Tipo:"}),o.jsx("span",{className:"ml-2 font-medium text-slate-800",children:pw(l.request_type)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500",children:"Estado:"}),o.jsx("span",{className:`ml-2 font-medium ${l.status==="PENDIENTE"?"text-warning-600":"text-success-600"}`,children:uC(l.status)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500",children:"Terminal:"}),o.jsx("span",{className:"ml-2 font-medium text-slate-800",children:l.terminal})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500",children:"Fecha:"}),o.jsx("span",{className:"ml-2 font-medium text-slate-800",children:new Date(l.requested_at).toLocaleDateString("es-CL")})]})]}),o.jsx("div",{className:"rounded-lg border border-slate-200 overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-slate-50 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("th",{className:"px-4 py-2",children:"Insumo"}),o.jsx("th",{className:"px-4 py-2 text-right",children:"Cantidad"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:l.items.map(P=>{var H;return o.jsxs("tr",{children:[o.jsxs("td",{className:"px-4 py-2 text-slate-800",children:[((H=P.supply)==null?void 0:H.name)||"Desconocido",P.is_extra&&o.jsx("span",{className:"ml-2 text-xs text-brand-500",children:"(extra)"})]}),o.jsx("td",{className:"px-4 py-2 text-right font-medium text-slate-800",children:P.quantity})]},P.id)})})]})})]})]})}),p&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/60 p-4 backdrop-blur-sm",children:o.jsxs("div",{className:"relative mt-8 w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Cerrar Solicitud"}),o.jsx("button",{onClick:()=>v(null),className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:o.jsx(G,{name:"x",size:20})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"rounded-lg bg-warning-50 p-4 text-sm text-warning-800",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(G,{name:"alert-triangle",size:18,className:"mt-0.5 flex-shrink-0"}),o.jsxs("p",{children:[o.jsx("strong",{children:"Obligatorio:"})," Debe adjuntar la boleta o comprobante para cerrar esta solicitud."]})]})}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700",children:"Boleta o Comprobante (PDF, JPG, PNG - max 5MB) *"}),o.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:N,className:"block w-full text-sm text-slate-500 file:mr-4 file:rounded-lg file:border-0 file:bg-brand-50 file:px-4 file:py-2 file:text-sm file:font-medium file:text-brand-700 hover:file:bg-brand-100"}),g&&o.jsxs("p",{className:"mt-2 flex items-center gap-2 text-sm text-success-600",children:[o.jsx(G,{name:"check",size:16}),g.name]})]}),y&&o.jsx("div",{className:"rounded-lg bg-danger-50 p-3 text-sm text-danger-700",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(G,{name:"alert-triangle",size:16,className:"mt-0.5 flex-shrink-0"}),o.jsx("p",{children:y})]})}),o.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[o.jsx("button",{onClick:()=>v(null),className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),o.jsxs("button",{onClick:E,disabled:!g||b,className:"inline-flex items-center gap-2 rounded-lg bg-success-500 px-4 py-2 text-sm font-medium text-white hover:bg-success-600 disabled:opacity-50",children:[b&&o.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Cerrar Solicitud"]})]})]})]})})]})},fEe=()=>{const e=fr(m=>m.session),[t,r]=T.useState([]),[n,a]=T.useState([]),[i,s]=T.useState([]),[l,c]=T.useState(!0),[u,d]=T.useState(!1),[f,h]=T.useState(!1),[p,v]=T.useState({supply_id:"",staff_rut:"",staff_name:"",quantity:1,notes:""}),g=async()=>{try{const[m,y,_]=await Promise.all([Dv(),nEe(),cR({mode:"ALL"},{cargo:"cleaner",status:"ACTIVO"})]);r(m),a(y),s(_)}catch(m){console.error("Error loading deliveries data:",m)}finally{c(!1)}};T.useEffect(()=>{g()},[]);const x=m=>{const y=i.find(_=>_.rut===m);v(_=>({..._,staff_rut:m,staff_name:(y==null?void 0:y.nombre)||""}))},b=async()=>{if(!p.supply_id||!p.staff_rut||p.quantity<=0){alert("Complete todos los campos requeridos");return}h(!0);try{const m=t.find(y=>y.id===p.supply_id);await aEe(p,(e==null?void 0:e.supervisorName)||"Usuario",(m==null?void 0:m.life_days)||null),d(!1),v({supply_id:"",staff_rut:"",staff_name:"",quantity:1,notes:""}),await g()}catch(m){console.error("Error creating delivery:",m),alert("Error al registrar la entrega")}finally{h(!1)}};return l?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-sm text-slate-500",children:"Registro de entregas de insumos a personal de limpieza"}),o.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600",children:[o.jsx(G,{name:"plus",size:18}),o.jsx("span",{children:"Nueva Entrega"})]})]}),o.jsx("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:n.length===0?o.jsxs("div",{className:"px-5 py-12 text-center",children:[o.jsx(G,{name:"package",size:40,className:"mx-auto text-slate-300 mb-3"}),o.jsx("p",{className:"text-sm text-slate-500",children:"No hay entregas registradas"})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("th",{className:"px-4 py-3",children:"Fecha"}),o.jsx("th",{className:"px-4 py-3",children:"Personal"}),o.jsx("th",{className:"px-4 py-3",children:"Insumo"}),o.jsx("th",{className:"px-4 py-3 text-center",children:"Cantidad"}),o.jsx("th",{className:"px-4 py-3",children:"Proxima Entrega"}),o.jsx("th",{className:"px-4 py-3",children:"Notas"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:n.map(m=>{var _;const y=hw(m.next_delivery_at,3);return o.jsxs("tr",{className:"hover:bg-slate-50",children:[o.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:new Date(m.delivered_at).toLocaleDateString("es-CL")}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-slate-800",children:m.staff_name}),o.jsx("p",{className:"text-xs text-slate-500",children:m.staff_rut})]})}),o.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:((_=m.supply)==null?void 0:_.name)||"Desconocido"}),o.jsx("td",{className:"px-4 py-3 text-center text-sm font-medium text-slate-800",children:m.quantity}),o.jsx("td",{className:"px-4 py-3",children:m.next_delivery_at?o.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${y?"bg-danger-100 text-danger-700":"bg-slate-100 text-slate-600"}`,children:new Date(m.next_delivery_at).toLocaleDateString("es-CL")}):o.jsx("span",{className:"text-sm text-slate-400",children:"-"})}),o.jsx("td",{className:"px-4 py-3 text-sm text-slate-500",children:m.notes||"-"})]},m.id)})})]})})}),u&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/60 p-4 backdrop-blur-sm",children:o.jsxs("div",{className:"relative mt-8 w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Nueva Entrega"}),o.jsx("button",{onClick:()=>d(!1),className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:o.jsx(G,{name:"x",size:20})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Personal (Cleaner)"}),o.jsxs("select",{value:p.staff_rut,onChange:m=>x(m.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:[o.jsx("option",{value:"",children:"Seleccionar cleaner..."}),i.map(m=>o.jsxs("option",{value:m.rut,children:[m.nombre," (",m.rut,")"]},m.rut))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Insumo"}),o.jsxs("select",{value:p.supply_id,onChange:m=>v(y=>({...y,supply_id:m.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:[o.jsx("option",{value:"",children:"Seleccionar insumo..."}),t.map(m=>o.jsxs("option",{value:m.id,children:[m.name," (",m.unit,")",m.life_days&&` - ${m.life_days} dias vida util`]},m.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Cantidad"}),o.jsx("input",{type:"number",min:"1",value:p.quantity,onChange:m=>v(y=>({...y,quantity:parseInt(m.target.value)||1})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Notas (opcional)"}),o.jsx("textarea",{value:p.notes||"",onChange:m=>v(y=>({...y,notes:m.target.value})),rows:2,className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",placeholder:"Observaciones..."})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[o.jsx("button",{onClick:()=>d(!1),className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),o.jsxs("button",{onClick:b,disabled:f||!p.supply_id||!p.staff_rut,className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[f&&o.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Registrar Entrega"]})]})]})]})})]})},hEe=["rollo","bolsa","unidad","litro","kit"],pEe=()=>{const[e,t]=T.useState("consumption"),[r,n]=T.useState("TERMINAL"),[a,i]=T.useState([]),[s,l]=T.useState([]),[c,u]=T.useState(!0),[d,f]=T.useState(!1),[h,p]=T.useState(!1),[v,g]=T.useState({name:"",unit:"unidad",life_days:null,min_stock:0}),x=async()=>{try{const[E,N]=await Promise.all([Dv(),y8()]);i(E),l(N)}catch(E){console.error("Error loading config data:",E)}finally{u(!1)}};T.useEffect(()=>{x()},[]);const b=(E,N,A,C)=>{const D=s.find(P=>P.location_type===E&&P.location_name===N&&P.period===A&&P.supply_id===C);return(D==null?void 0:D.quantity)||0},m=async(E,N,A,C,D)=>{f(!0);try{await Xje({location_type:E,location_name:N,period:A,supply_id:C,quantity:Math.max(0,D)}),await x()}catch(P){console.error("Error updating profile:",P)}finally{f(!1)}},y=async(E,N,A)=>{f(!0);try{await Kje(E,{[N]:A}),await x()}catch(C){console.error("Error updating supply:",C)}finally{f(!1)}},_=async()=>{if(!v.name.trim()){alert("Ingrese el nombre del insumo");return}f(!0);try{await Vje({name:v.name.trim(),unit:v.unit,life_days:v.life_days,min_stock:v.min_stock}),g({name:"",unit:"unidad",life_days:null,min_stock:0}),p(!1),await x()}catch(E){console.error("Error creating supply:",E),alert("Error al crear el insumo")}finally{f(!1)}},w=async(E,N)=>{if(confirm(`Eliminar insumo "${N}"? Esta accion no se puede deshacer.`)){f(!0);try{await Gje(E),await x()}catch(A){console.error("Error deleting supply:",A),alert("Error al eliminar. Puede que tenga datos asociados.")}finally{f(!1)}}};if(c)return o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})});const S=r==="TERMINAL"?[{key:"DAY",label:"Dia"},{key:"NIGHT",label:"Noche"}]:[{key:"DAY",label:"Dia (L-V)"},{key:"WEEKEND",label:"Fin de Semana"}],j=r==="TERMINAL"?_u.TERMINAL:_u.CABEZAL;return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2 border-b border-slate-200 pb-2",children:[o.jsx("button",{onClick:()=>t("consumption"),className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${e==="consumption"?"bg-brand-500 text-white":"text-slate-600 hover:bg-slate-100"}`,children:"Consumos"}),o.jsx("button",{onClick:()=>t("supplies"),className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${e==="supplies"?"bg-brand-500 text-white":"text-slate-600 hover:bg-slate-100"}`,children:"Insumos"})]}),e==="consumption"&&o.jsxs("div",{className:"space-y-4",children:[a.length===0&&o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 p-8 text-center",children:[o.jsx(G,{name:"package",size:40,className:"mx-auto text-slate-300 mb-3"}),o.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"No hay insumos configurados. Agregue insumos primero."}),o.jsxs("button",{onClick:()=>t("supplies"),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600",children:[o.jsx(G,{name:"plus",size:18}),"Agregar Insumos"]})]}),a.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>n("TERMINAL"),className:`flex-1 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors ${r==="TERMINAL"?"bg-slate-800 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Terminal"}),o.jsx("button",{onClick:()=>n("CABEZAL"),className:`flex-1 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors ${r==="CABEZAL"?"bg-slate-800 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Cabezales"})]}),d&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-brand-600",children:[o.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-brand-500 border-t-transparent"}),"Guardando..."]}),j.map(E=>o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:[o.jsx("div",{className:"border-b border-slate-100 px-4 py-3 bg-slate-50",children:o.jsx("h3",{className:"font-medium text-slate-800",children:E})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("th",{className:"px-4 py-2",children:"Insumo"}),S.map(N=>o.jsx("th",{className:"px-4 py-2 text-center w-28",children:N.label},N.key))]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:a.map(N=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-4 py-2 text-slate-800",children:N.name}),S.map(A=>o.jsx("td",{className:"px-4 py-2 text-center",children:o.jsx("input",{type:"number",min:"0",value:b(r,E,A.key,N.id),onChange:C=>m(r,E,A.key,N.id,parseInt(C.target.value)||0),className:"w-16 rounded border border-slate-300 px-2 py-1 text-center text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})},A.key))]},N.id))})]})})]},E))]})]}),e==="supplies"&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex justify-end",children:o.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600",children:[o.jsx(G,{name:"plus",size:18}),"Agregar Insumo"]})}),h&&o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-brand-200 p-4",children:[o.jsx("h4",{className:"font-medium text-slate-800 mb-3",children:"Nuevo Insumo"}),o.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 md:grid-cols-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Nombre *"}),o.jsx("input",{type:"text",value:v.name,onChange:E=>g(N=>({...N,name:E.target.value})),placeholder:"Ej: Nova",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Unidad *"}),o.jsx("select",{value:v.unit,onChange:E=>g(N=>({...N,unit:E.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:hEe.map(E=>o.jsx("option",{value:E,children:E},E))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Vida Util (dias)"}),o.jsx("input",{type:"number",min:"0",value:v.life_days||"",placeholder:"Opcional",onChange:E=>g(N=>({...N,life_days:E.target.value?parseInt(E.target.value):null})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Stock Minimo"}),o.jsx("input",{type:"number",min:"0",value:v.min_stock,onChange:E=>g(N=>({...N,min_stock:parseInt(E.target.value)||0})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[o.jsx("button",{onClick:()=>{p(!1),g({name:"",unit:"unidad",life_days:null,min_stock:0})},className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),o.jsxs("button",{onClick:_,disabled:d||!v.name.trim(),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[d&&o.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Guardar"]})]})]}),a.length===0&&!h?o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 p-8 text-center",children:[o.jsx(G,{name:"package",size:40,className:"mx-auto text-slate-300 mb-3"}),o.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"No hay insumos configurados"}),o.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600",children:[o.jsx(G,{name:"plus",size:18}),"Agregar Primer Insumo"]})]}):a.length>0&&o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:[o.jsx("div",{className:"border-b border-slate-100 px-4 py-3 bg-slate-50",children:o.jsx("h3",{className:"font-medium text-slate-800",children:"Configuracion de Insumos"})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("th",{className:"px-4 py-2",children:"Insumo"}),o.jsx("th",{className:"px-4 py-2",children:"Unidad"}),o.jsx("th",{className:"px-4 py-2 text-center w-28",children:"Vida Util (dias)"}),o.jsx("th",{className:"px-4 py-2 text-center w-28",children:"Stock Minimo"}),o.jsx("th",{className:"px-4 py-2 w-16"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:a.map(E=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-4 py-2 font-medium text-slate-800",children:E.name}),o.jsx("td",{className:"px-4 py-2 text-slate-600",children:E.unit}),o.jsx("td",{className:"px-4 py-2 text-center",children:o.jsx("input",{type:"number",min:"0",value:E.life_days||"",placeholder:"-",onChange:N=>y(E.id,"life_days",N.target.value?parseInt(N.target.value):null),className:"w-16 rounded border border-slate-300 px-2 py-1 text-center text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})}),o.jsx("td",{className:"px-4 py-2 text-center",children:o.jsx("input",{type:"number",min:"0",value:E.min_stock||"",placeholder:"-",onChange:N=>y(E.id,"min_stock",parseInt(N.target.value)||0),className:"w-16 rounded border border-slate-300 px-2 py-1 text-center text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})}),o.jsx("td",{className:"px-4 py-2 text-center",children:o.jsx("button",{onClick:()=>w(E.id,E.name),className:"rounded p-1 text-slate-400 hover:bg-danger-100 hover:text-danger-600",children:o.jsx(G,{name:"trash",size:16})})})]},E.id))})]})})]})]})]})},mEe={MONDAY:"Lunes (Solicitud Semanal)",FRIDAY:"Viernes (Fin de Semana)",MANUAL:"Manual"},gEe=()=>{const[e,t]=T.useState([]),[r,n]=T.useState(!0),[a,i]=T.useState(!1),[s,l]=T.useState(null),[c,u]=T.useState(null),[d,f]=T.useState(null),[h,p]=T.useState({recipients:"",subject:"",body:"",enabled:!0}),v=async()=>{try{const w=await w8();return t(w),w}catch(w){return console.error("Error loading email settings:",w),[]}finally{n(!1)}},g=async()=>{i(!0);try{const w=await sEe();t(w)}catch(w){console.error("Error creating default settings:",w),alert("Error al crear configuraciones. Verifique que las tablas existan en Supabase.")}finally{i(!1)}};T.useEffect(()=>{v()},[]);const x=w=>{f(w.id),p({recipients:w.recipients,subject:w.subject,body:w.body,enabled:w.enabled})},b=()=>{f(null),p({recipients:"",subject:"",body:"",enabled:!0})},m=async w=>{l(w);try{await dC(w,h),await v(),f(null)}catch(S){console.error("Error saving email settings:",S),alert("Error al guardar la configuracion")}finally{l(null)}},y=async w=>{l(w.id);try{await dC(w.id,{enabled:!w.enabled}),await v()}catch(S){console.error("Error toggling email setting:",S)}finally{l(null)}},_=async w=>{if(!w.recipients){alert("Configure los destinatarios primero");return}u(w.id);try{await Gs.sendEmail({audience:"manual",manualRecipients:w.recipients.split(",").map(S=>S.trim()),subject:`[TEST] ${w.subject}`,body:`<p>Este es un correo de prueba.</p><hr/>${w.body}`,module:"informativos"}),alert("Correo de prueba enviado")}catch(S){console.error("Error sending test email:",S),alert("Error al enviar el correo de prueba")}finally{u(null)}};return r?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):e.length===0?o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 p-8 text-center",children:[o.jsx(G,{name:"send",size:40,className:"mx-auto text-slate-300 mb-3"}),o.jsx("h3",{className:"font-medium text-slate-800 mb-2",children:"Configurar Correos Automaticos"}),o.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Cree las configuraciones de correo para las solicitudes automaticas de Lunes, Viernes y Manual."}),o.jsxs("button",{onClick:g,disabled:a,className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[a?o.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}):o.jsx(G,{name:"plus",size:18}),"Crear Configuraciones"]})]})}):o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"rounded-lg bg-slate-50 p-4 text-sm text-slate-600",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(G,{name:"info",size:18,className:"mt-0.5 flex-shrink-0 text-slate-500"}),o.jsx("p",{children:"Configure los destinatarios y plantillas de correo para las solicitudes automaticas. Los correos se envian automaticamente los dias configurados."})]})}),o.jsx("div",{className:"space-y-4",children:e.map(w=>{const S=d===w.id,j=s===w.id,E=c===w.id;return o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-4 py-3 bg-slate-50",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:`h-2 w-2 rounded-full ${w.enabled?"bg-success-500":"bg-slate-400"}`}),o.jsx("h3",{className:"font-medium text-slate-800",children:mEe[w.trigger]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("button",{onClick:()=>y(w),disabled:j,className:`rounded-lg px-3 py-1 text-xs font-medium transition-colors ${w.enabled?"bg-success-100 text-success-700 hover:bg-success-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:w.enabled?"Activo":"Inactivo"})})]}),o.jsx("div",{className:"p-4",children:S?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Destinatarios (separados por coma)"}),o.jsx("input",{type:"text",value:h.recipients,onChange:N=>p(A=>({...A,recipients:N.target.value})),placeholder:"correo1@ejemplo.com, correo2@ejemplo.com",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Asunto"}),o.jsx("input",{type:"text",value:h.subject,onChange:N=>p(A=>({...A,subject:N.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Cuerpo del mensaje (HTML permitido)"}),o.jsx("textarea",{value:h.body,onChange:N=>p(A=>({...A,body:N.target.value})),rows:4,placeholder:"Ejemplo: <p>Estimados,</p><p>Se adjunta la solicitud de insumos.</p>",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx("button",{onClick:b,className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),o.jsxs("button",{onClick:()=>m(w.id),disabled:j,className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[j&&o.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Guardar"]})]})]}):o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Destinatarios"}),o.jsx("p",{className:"mt-1 text-sm text-slate-800",children:w.recipients||o.jsx("span",{className:"text-slate-400 italic",children:"No configurado"})})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Asunto"}),o.jsx("p",{className:"mt-1 text-sm text-slate-800",children:w.subject})]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Mensaje"}),o.jsx("p",{className:"mt-1 text-sm text-slate-600 line-clamp-2",children:w.body||o.jsx("span",{className:"text-slate-400 italic",children:"Sin mensaje"})})]}),o.jsxs("div",{className:"flex gap-2 pt-2",children:[o.jsxs("button",{onClick:()=>x(w),className:"inline-flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-sm font-medium text-slate-600 hover:bg-slate-100",children:[o.jsx(G,{name:"edit",size:14}),"Editar"]}),o.jsxs("button",{onClick:()=>_(w),disabled:E||!w.recipients,className:"inline-flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-sm font-medium text-brand-600 hover:bg-brand-50 disabled:opacity-50",children:[E?o.jsx("div",{className:"h-3.5 w-3.5 animate-spin rounded-full border-2 border-brand-500 border-t-transparent"}):o.jsx(G,{name:"send",size:14}),"Enviar Prueba"]})]})]})})]},w.id)})})]})},vEe=[{key:"dashboard",label:"Dashboard",icon:"bar-chart"},{key:"solicitudes",label:"Solicitudes",icon:"file-text"},{key:"entregas",label:"Entregas",icon:"package"},{key:"config",label:"Configuracion",icon:"settings"}],xEe=()=>{const[e,t]=T.useState("dashboard"),[r,n]=T.useState("consumption"),[a,i]=T.useState(0),s=()=>i(l=>l+1);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Solicitudes de Insumos"}),o.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Gestion inteligente de insumos, solicitudes y entregas a personal"})]}),o.jsx("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 pb-3",children:vEe.map(l=>o.jsxs("button",{onClick:()=>t(l.key),className:`inline-flex items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium transition-all ${e===l.key?"bg-brand-500 text-white shadow-brand":"text-slate-600 hover:bg-slate-100"}`,children:[o.jsx(G,{name:l.icon,size:18}),o.jsx("span",{className:"hidden sm:inline",children:l.label})]},l.key))}),o.jsxs("div",{children:[e==="dashboard"&&o.jsx(cEe,{}),e==="solicitudes"&&o.jsx(dEe,{onRefresh:s}),e==="entregas"&&o.jsx(fEe,{}),e==="config"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>n("consumption"),className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${r==="consumption"?"bg-slate-800 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Consumos e Insumos"}),o.jsx("button",{onClick:()=>n("emails"),className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${r==="emails"?"bg-slate-800 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Correos"})]}),r==="consumption"&&o.jsx(pEe,{}),r==="emails"&&o.jsx(gEe,{})]})]},a)]})},yEe=()=>{const e=fr(a=>a.session),t=fr(a=>a.hydrateSession),[r,n]=T.useState(!0);return T.useEffect(()=>{t().finally(()=>n(!1))},[t]),r?o.jsx(Gt,{label:"Validando sesin"}):e?o.jsx(cP,{}):o.jsx(lP,{to:"/",replace:!0})},bEe=()=>o.jsx(j7,{children:o.jsxs(g7,{children:[o.jsx(Ft,{path:"/",element:o.jsx(D7,{})}),o.jsx(Ft,{element:o.jsx(yEe,{}),children:o.jsxs(Ft,{element:o.jsx(U7,{}),children:[o.jsx(Ft,{path:"/personal",element:o.jsx(NX,{})}),o.jsx(Ft,{path:"/reuniones",element:o.jsx(bY,{})}),o.jsx(Ft,{path:"/tareas",element:o.jsx(_Y,{})}),o.jsx(Ft,{path:"/informativos",element:o.jsx(jY,{})}),o.jsx(Ft,{path:"/asistencia",element:o.jsx(NQ,{})}),o.jsx(Ft,{path:"/aseo/interior",element:o.jsx(OQ,{})}),o.jsx(Ft,{path:"/aseo/exterior",element:o.jsx(CQ,{})}),o.jsx(Ft,{path:"/aseo/rodillo",element:o.jsx(kQ,{})}),o.jsx(Ft,{path:"/credenciales",element:o.jsx(gje,{})}),o.jsx(Ft,{path:"/solicitudes",element:o.jsx(xje,{})}),o.jsx(Ft,{path:"/minicheck/extintor",element:o.jsx(Pje,{})}),o.jsx(Ft,{path:"/minicheck/tag",element:o.jsx(Rje,{})}),o.jsx(Ft,{path:"/minicheck/mobileye",element:o.jsx(Ije,{})}),o.jsx(Ft,{path:"/minicheck/odometro",element:o.jsx(Dje,{})}),o.jsx(Ft,{path:"/minicheck/publicidad",element:o.jsx(Mje,{})}),o.jsx(Ft,{path:"/estado-flota",element:o.jsx($je,{})}),o.jsx(Ft,{path:"/insumos",element:o.jsx(xEe,{})})]})}),o.jsx(Ft,{path:"*",element:o.jsx(lP,{to:"/",replace:!0})})]})});ly.createRoot(document.getElementById("root")).render(o.jsx(z.StrictMode,{children:o.jsx(jF,{children:o.jsx(bEe,{})})}));
