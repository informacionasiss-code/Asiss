var Nj=e=>{throw TypeError(e)};var Hv=(e,t,r)=>t.has(e)||Nj("Cannot "+r);var B=(e,t,r)=>(Hv(e,t,"read from private field"),r?r.call(e):t.get(e)),Pe=(e,t,r)=>t.has(e)?Nj("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Se=(e,t,r,n)=>(Hv(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),qe=(e,t,r)=>(Hv(e,t,"access private method"),r);var Gh=(e,t,r,n)=>({set _(a){Se(e,t,a,r)},get _(){return B(e,t,n)}});function PO(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function it(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Q8(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var RO={exports:{}},cg={},IO={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mh=Symbol.for("react.element"),J8=Symbol.for("react.portal"),Z8=Symbol.for("react.fragment"),eM=Symbol.for("react.strict_mode"),tM=Symbol.for("react.profiler"),rM=Symbol.for("react.provider"),nM=Symbol.for("react.context"),aM=Symbol.for("react.forward_ref"),iM=Symbol.for("react.suspense"),sM=Symbol.for("react.memo"),oM=Symbol.for("react.lazy"),Tj=Symbol.iterator;function lM(e){return e===null||typeof e!="object"?null:(e=Tj&&e[Tj]||e["@@iterator"],typeof e=="function"?e:null)}var DO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},MO=Object.assign,LO={};function Eu(e,t,r){this.props=e,this.context=t,this.refs=LO,this.updater=r||DO}Eu.prototype.isReactComponent={};Eu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Eu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $O(){}$O.prototype=Eu.prototype;function _w(e,t,r){this.props=e,this.context=t,this.refs=LO,this.updater=r||DO}var jw=_w.prototype=new $O;jw.constructor=_w;MO(jw,Eu.prototype);jw.isPureReactComponent=!0;var Aj=Array.isArray,FO=Object.prototype.hasOwnProperty,Sw={current:null},BO={key:!0,ref:!0,__self:!0,__source:!0};function UO(e,t,r){var n,a={},i=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)FO.call(t,n)&&!BO.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:mh,type:e,key:i,ref:s,props:a,_owner:Sw.current}}function cM(e,t){return{$$typeof:mh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ew(e){return typeof e=="object"&&e!==null&&e.$$typeof===mh}function uM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Cj=/\/+/g;function Vv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?uM(""+e.key):t.toString(36)}function G0(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case mh:case J8:s=!0}}if(s)return s=e,a=a(s),e=n===""?"."+Vv(s,0):n,Aj(a)?(r="",e!=null&&(r=e.replace(Cj,"$&/")+"/"),G0(a,t,r,"",function(u){return u})):a!=null&&(Ew(a)&&(a=cM(a,r+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(Cj,"$&/")+"/")+e)),t.push(a)),1;if(s=0,n=n===""?".":n+":",Aj(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Vv(i,l);s+=G0(i,t,r,c,a)}else if(c=lM(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Vv(i,l++),s+=G0(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Yh(e,t,r){if(e==null)return e;var n=[],a=0;return G0(e,n,"","",function(i){return t.call(r,i,a++)}),n}function dM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var pn={current:null},X0={transition:null},fM={ReactCurrentDispatcher:pn,ReactCurrentBatchConfig:X0,ReactCurrentOwner:Sw};function zO(){throw Error("act(...) is not supported in production builds of React.")}Xe.Children={map:Yh,forEach:function(e,t,r){Yh(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Yh(e,function(){t++}),t},toArray:function(e){return Yh(e,function(t){return t})||[]},only:function(e){if(!Ew(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Xe.Component=Eu;Xe.Fragment=Z8;Xe.Profiler=tM;Xe.PureComponent=_w;Xe.StrictMode=eM;Xe.Suspense=iM;Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fM;Xe.act=zO;Xe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=MO({},e.props),a=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=Sw.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)FO.call(t,c)&&!BO.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:mh,type:e.type,key:a,ref:i,props:n,_owner:s}};Xe.createContext=function(e){return e={$$typeof:nM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rM,_context:e},e.Consumer=e};Xe.createElement=UO;Xe.createFactory=function(e){var t=UO.bind(null,e);return t.type=e,t};Xe.createRef=function(){return{current:null}};Xe.forwardRef=function(e){return{$$typeof:aM,render:e}};Xe.isValidElement=Ew;Xe.lazy=function(e){return{$$typeof:oM,_payload:{_status:-1,_result:e},_init:dM}};Xe.memo=function(e,t){return{$$typeof:sM,type:e,compare:t===void 0?null:t}};Xe.startTransition=function(e){var t=X0.transition;X0.transition={};try{e()}finally{X0.transition=t}};Xe.unstable_act=zO;Xe.useCallback=function(e,t){return pn.current.useCallback(e,t)};Xe.useContext=function(e){return pn.current.useContext(e)};Xe.useDebugValue=function(){};Xe.useDeferredValue=function(e){return pn.current.useDeferredValue(e)};Xe.useEffect=function(e,t){return pn.current.useEffect(e,t)};Xe.useId=function(){return pn.current.useId()};Xe.useImperativeHandle=function(e,t,r){return pn.current.useImperativeHandle(e,t,r)};Xe.useInsertionEffect=function(e,t){return pn.current.useInsertionEffect(e,t)};Xe.useLayoutEffect=function(e,t){return pn.current.useLayoutEffect(e,t)};Xe.useMemo=function(e,t){return pn.current.useMemo(e,t)};Xe.useReducer=function(e,t,r){return pn.current.useReducer(e,t,r)};Xe.useRef=function(e){return pn.current.useRef(e)};Xe.useState=function(e){return pn.current.useState(e)};Xe.useSyncExternalStore=function(e,t,r){return pn.current.useSyncExternalStore(e,t,r)};Xe.useTransition=function(){return pn.current.useTransition()};Xe.version="18.3.1";IO.exports=Xe;var T=IO.exports;const z=it(T),hM=PO({__proto__:null,default:z},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pM=T,mM=Symbol.for("react.element"),gM=Symbol.for("react.fragment"),vM=Object.prototype.hasOwnProperty,xM=pM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yM={key:!0,ref:!0,__self:!0,__source:!0};function qO(e,t,r){var n,a={},i=null,s=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)vM.call(t,n)&&!yM.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:mM,type:e,key:i,ref:s,props:a,_owner:xM.current}}cg.Fragment=gM;cg.jsx=qO;cg.jsxs=qO;RO.exports=cg;var o=RO.exports,hy={},WO={exports:{}},Yn={},HO={exports:{}},VO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(X,re){var de=X.length;X.push(re);e:for(;0<de;){var me=de-1>>>1,R=X[me];if(0<a(R,re))X[me]=re,X[de]=R,de=me;else break e}}function r(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var re=X[0],de=X.pop();if(de!==re){X[0]=de;e:for(var me=0,R=X.length,W=R>>>1;me<W;){var U=2*(me+1)-1,q=X[U],se=U+1,je=X[se];if(0>a(q,de))se<R&&0>a(je,q)?(X[me]=je,X[se]=de,me=se):(X[me]=q,X[U]=de,me=U);else if(se<R&&0>a(je,de))X[me]=je,X[se]=de,me=se;else break e}}return re}function a(X,re){var de=X.sortIndex-re.sortIndex;return de!==0?de:X.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,v=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(X){for(var re=r(u);re!==null;){if(re.callback===null)n(u);else if(re.startTime<=X)n(u),re.sortIndex=re.expirationTime,t(c,re);else break;re=r(u)}}function _(X){if(g=!1,y(X),!v)if(r(c)!==null)v=!0,ie(w);else{var re=r(u);re!==null&&G(_,re.startTime-X)}}function w(X,re){v=!1,g&&(g=!1,b(E),E=-1),p=!0;var de=h;try{for(y(re),f=r(c);f!==null&&(!(f.expirationTime>re)||X&&!O());){var me=f.callback;if(typeof me=="function"){f.callback=null,h=f.priorityLevel;var R=me(f.expirationTime<=re);re=e.unstable_now(),typeof R=="function"?f.callback=R:f===r(c)&&n(c),y(re)}else n(c);f=r(c)}if(f!==null)var W=!0;else{var U=r(u);U!==null&&G(_,U.startTime-re),W=!1}return W}finally{f=null,h=de,p=!1}}var j=!1,S=null,E=-1,N=5,A=-1;function O(){return!(e.unstable_now()-A<N)}function D(){if(S!==null){var X=e.unstable_now();A=X;var re=!0;try{re=S(!0,X)}finally{re?k():(j=!1,S=null)}}else j=!1}var k;if(typeof m=="function")k=function(){m(D)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,K=V.port2;V.port1.onmessage=D,k=function(){K.postMessage(null)}}else k=function(){x(D,0)};function ie(X){S=X,j||(j=!0,k())}function G(X,re){E=x(function(){X(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_continueExecution=function(){v||p||(v=!0,ie(w))},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(X){switch(h){case 1:case 2:case 3:var re=3;break;default:re=h}var de=h;h=re;try{return X()}finally{h=de}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(X,re){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var de=h;h=X;try{return re()}finally{h=de}},e.unstable_scheduleCallback=function(X,re,de){var me=e.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?me+de:me):de=me,X){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=de+R,X={id:d++,callback:re,priorityLevel:X,startTime:de,expirationTime:R,sortIndex:-1},de>me?(X.sortIndex=de,t(u,X),r(c)===null&&X===r(u)&&(g?(b(E),E=-1):g=!0,G(_,de-me))):(X.sortIndex=R,t(c,X),v||p||(v=!0,ie(w))),X},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(X){var re=h;return function(){var de=h;h=re;try{return X.apply(this,arguments)}finally{h=de}}}})(VO);HO.exports=VO;var bM=HO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wM=T,Gn=bM;function pe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var KO=new Set,Qd={};function vl(e,t){Fc(e,t),Fc(e+"Capture",t)}function Fc(e,t){for(Qd[e]=t,e=0;e<t.length;e++)KO.add(t[e])}var Di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),py=Object.prototype.hasOwnProperty,_M=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Oj={},kj={};function jM(e){return py.call(kj,e)?!0:py.call(Oj,e)?!1:_M.test(e)?kj[e]=!0:(Oj[e]=!0,!1)}function SM(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function EM(e,t,r,n){if(t===null||typeof t>"u"||SM(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function mn(e,t,r,n,a,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var Lr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Lr[e]=new mn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Lr[t]=new mn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Lr[e]=new mn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Lr[e]=new mn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Lr[e]=new mn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Lr[e]=new mn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Lr[e]=new mn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Lr[e]=new mn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Lr[e]=new mn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Nw=/[\-:]([a-z])/g;function Tw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Nw,Tw);Lr[t]=new mn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Nw,Tw);Lr[t]=new mn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Nw,Tw);Lr[t]=new mn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Lr[e]=new mn(e,1,!1,e.toLowerCase(),null,!1,!1)});Lr.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Lr[e]=new mn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Aw(e,t,r,n){var a=Lr.hasOwnProperty(t)?Lr[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(EM(t,r,a,n)&&(r=null),n||a===null?jM(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Xi=wM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qh=Symbol.for("react.element"),Wl=Symbol.for("react.portal"),Hl=Symbol.for("react.fragment"),Cw=Symbol.for("react.strict_mode"),my=Symbol.for("react.profiler"),GO=Symbol.for("react.provider"),XO=Symbol.for("react.context"),Ow=Symbol.for("react.forward_ref"),gy=Symbol.for("react.suspense"),vy=Symbol.for("react.suspense_list"),kw=Symbol.for("react.memo"),ls=Symbol.for("react.lazy"),YO=Symbol.for("react.offscreen"),Pj=Symbol.iterator;function Zu(e){return e===null||typeof e!="object"?null:(e=Pj&&e[Pj]||e["@@iterator"],typeof e=="function"?e:null)}var Ut=Object.assign,Kv;function bd(e){if(Kv===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Kv=t&&t[1]||""}return`
`+Kv+e}var Gv=!1;function Xv(e,t){if(!e||Gv)return"";Gv=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),s=a.length-1,l=i.length-1;1<=s&&0<=l&&a[s]!==i[l];)l--;for(;1<=s&&0<=l;s--,l--)if(a[s]!==i[l]){if(s!==1||l!==1)do if(s--,l--,0>l||a[s]!==i[l]){var c=`
`+a[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=l);break}}}finally{Gv=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?bd(e):""}function NM(e){switch(e.tag){case 5:return bd(e.type);case 16:return bd("Lazy");case 13:return bd("Suspense");case 19:return bd("SuspenseList");case 0:case 2:case 15:return e=Xv(e.type,!1),e;case 11:return e=Xv(e.type.render,!1),e;case 1:return e=Xv(e.type,!0),e;default:return""}}function xy(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Hl:return"Fragment";case Wl:return"Portal";case my:return"Profiler";case Cw:return"StrictMode";case gy:return"Suspense";case vy:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case XO:return(e.displayName||"Context")+".Consumer";case GO:return(e._context.displayName||"Context")+".Provider";case Ow:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case kw:return t=e.displayName||null,t!==null?t:xy(e.type)||"Memo";case ls:t=e._payload,e=e._init;try{return xy(e(t))}catch{}}return null}function TM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xy(t);case 8:return t===Cw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ws(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function QO(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function AM(e){var t=QO(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(s){n=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Jh(e){e._valueTracker||(e._valueTracker=AM(e))}function JO(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=QO(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function up(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function yy(e,t){var r=t.checked;return Ut({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Rj(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ws(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ZO(e,t){t=t.checked,t!=null&&Aw(e,"checked",t,!1)}function by(e,t){ZO(e,t);var r=Ws(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?wy(e,t.type,r):t.hasOwnProperty("defaultValue")&&wy(e,t.type,Ws(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ij(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function wy(e,t,r){(t!=="number"||up(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var wd=Array.isArray;function cc(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ws(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function _y(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(pe(91));return Ut({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Dj(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(pe(92));if(wd(r)){if(1<r.length)throw Error(pe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ws(r)}}function ek(e,t){var r=Ws(t.value),n=Ws(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Mj(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function tk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jy(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?tk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zh,rk=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Zh=Zh||document.createElement("div"),Zh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Zh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Jd(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Od={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CM=["Webkit","ms","Moz","O"];Object.keys(Od).forEach(function(e){CM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Od[t]=Od[e]})});function nk(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Od.hasOwnProperty(e)&&Od[e]?(""+t).trim():t+"px"}function ak(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=nk(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var OM=Ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sy(e,t){if(t){if(OM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(pe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(pe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(pe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(pe(62))}}function Ey(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ny=null;function Pw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ty=null,uc=null,dc=null;function Lj(e){if(e=xh(e)){if(typeof Ty!="function")throw Error(pe(280));var t=e.stateNode;t&&(t=pg(t),Ty(e.stateNode,e.type,t))}}function ik(e){uc?dc?dc.push(e):dc=[e]:uc=e}function sk(){if(uc){var e=uc,t=dc;if(dc=uc=null,Lj(e),t)for(e=0;e<t.length;e++)Lj(t[e])}}function ok(e,t){return e(t)}function lk(){}var Yv=!1;function ck(e,t,r){if(Yv)return e(t,r);Yv=!0;try{return ok(e,t,r)}finally{Yv=!1,(uc!==null||dc!==null)&&(lk(),sk())}}function Zd(e,t){var r=e.stateNode;if(r===null)return null;var n=pg(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(pe(231,t,typeof r));return r}var Ay=!1;if(Di)try{var ed={};Object.defineProperty(ed,"passive",{get:function(){Ay=!0}}),window.addEventListener("test",ed,ed),window.removeEventListener("test",ed,ed)}catch{Ay=!1}function kM(e,t,r,n,a,i,s,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var kd=!1,dp=null,fp=!1,Cy=null,PM={onError:function(e){kd=!0,dp=e}};function RM(e,t,r,n,a,i,s,l,c){kd=!1,dp=null,kM.apply(PM,arguments)}function IM(e,t,r,n,a,i,s,l,c){if(RM.apply(this,arguments),kd){if(kd){var u=dp;kd=!1,dp=null}else throw Error(pe(198));fp||(fp=!0,Cy=u)}}function xl(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function uk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $j(e){if(xl(e)!==e)throw Error(pe(188))}function DM(e){var t=e.alternate;if(!t){if(t=xl(e),t===null)throw Error(pe(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return $j(a),e;if(i===n)return $j(a),t;i=i.sibling}throw Error(pe(188))}if(r.return!==n.return)r=a,n=i;else{for(var s=!1,l=a.child;l;){if(l===r){s=!0,r=a,n=i;break}if(l===n){s=!0,n=a,r=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===r){s=!0,r=i,n=a;break}if(l===n){s=!0,n=i,r=a;break}l=l.sibling}if(!s)throw Error(pe(189))}}if(r.alternate!==n)throw Error(pe(190))}if(r.tag!==3)throw Error(pe(188));return r.stateNode.current===r?e:t}function dk(e){return e=DM(e),e!==null?fk(e):null}function fk(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=fk(e);if(t!==null)return t;e=e.sibling}return null}var hk=Gn.unstable_scheduleCallback,Fj=Gn.unstable_cancelCallback,MM=Gn.unstable_shouldYield,LM=Gn.unstable_requestPaint,Yt=Gn.unstable_now,$M=Gn.unstable_getCurrentPriorityLevel,Rw=Gn.unstable_ImmediatePriority,pk=Gn.unstable_UserBlockingPriority,hp=Gn.unstable_NormalPriority,FM=Gn.unstable_LowPriority,mk=Gn.unstable_IdlePriority,ug=null,ti=null;function BM(e){if(ti&&typeof ti.onCommitFiberRoot=="function")try{ti.onCommitFiberRoot(ug,e,void 0,(e.current.flags&128)===128)}catch{}}var La=Math.clz32?Math.clz32:qM,UM=Math.log,zM=Math.LN2;function qM(e){return e>>>=0,e===0?32:31-(UM(e)/zM|0)|0}var e0=64,t0=4194304;function _d(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pp(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,s=r&268435455;if(s!==0){var l=s&~a;l!==0?n=_d(l):(i&=s,i!==0&&(n=_d(i)))}else s=r&~a,s!==0?n=_d(s):i!==0&&(n=_d(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-La(t),a=1<<r,n|=e[r],t&=~a;return n}function WM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HM(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-La(i),l=1<<s,c=a[s];c===-1?(!(l&r)||l&n)&&(a[s]=WM(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Oy(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function gk(){var e=e0;return e0<<=1,!(e0&4194240)&&(e0=64),e}function Qv(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gh(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-La(t),e[t]=r}function VM(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-La(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Iw(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-La(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var dt=0;function vk(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var xk,Dw,yk,bk,wk,ky=!1,r0=[],Ps=null,Rs=null,Is=null,ef=new Map,tf=new Map,fs=[],KM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bj(e,t){switch(e){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":Rs=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":ef.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":tf.delete(t.pointerId)}}function td(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=xh(t),t!==null&&Dw(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function GM(e,t,r,n,a){switch(t){case"focusin":return Ps=td(Ps,e,t,r,n,a),!0;case"dragenter":return Rs=td(Rs,e,t,r,n,a),!0;case"mouseover":return Is=td(Is,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return ef.set(i,td(ef.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,tf.set(i,td(tf.get(i)||null,e,t,r,n,a)),!0}return!1}function _k(e){var t=Co(e.target);if(t!==null){var r=xl(t);if(r!==null){if(t=r.tag,t===13){if(t=uk(r),t!==null){e.blockedOn=t,wk(e.priority,function(){yk(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Y0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Py(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Ny=n,r.target.dispatchEvent(n),Ny=null}else return t=xh(r),t!==null&&Dw(t),e.blockedOn=r,!1;t.shift()}return!0}function Uj(e,t,r){Y0(e)&&r.delete(t)}function XM(){ky=!1,Ps!==null&&Y0(Ps)&&(Ps=null),Rs!==null&&Y0(Rs)&&(Rs=null),Is!==null&&Y0(Is)&&(Is=null),ef.forEach(Uj),tf.forEach(Uj)}function rd(e,t){e.blockedOn===t&&(e.blockedOn=null,ky||(ky=!0,Gn.unstable_scheduleCallback(Gn.unstable_NormalPriority,XM)))}function rf(e){function t(a){return rd(a,e)}if(0<r0.length){rd(r0[0],e);for(var r=1;r<r0.length;r++){var n=r0[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ps!==null&&rd(Ps,e),Rs!==null&&rd(Rs,e),Is!==null&&rd(Is,e),ef.forEach(t),tf.forEach(t),r=0;r<fs.length;r++)n=fs[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<fs.length&&(r=fs[0],r.blockedOn===null);)_k(r),r.blockedOn===null&&fs.shift()}var fc=Xi.ReactCurrentBatchConfig,mp=!0;function YM(e,t,r,n){var a=dt,i=fc.transition;fc.transition=null;try{dt=1,Mw(e,t,r,n)}finally{dt=a,fc.transition=i}}function QM(e,t,r,n){var a=dt,i=fc.transition;fc.transition=null;try{dt=4,Mw(e,t,r,n)}finally{dt=a,fc.transition=i}}function Mw(e,t,r,n){if(mp){var a=Py(e,t,r,n);if(a===null)ox(e,t,n,gp,r),Bj(e,n);else if(GM(a,e,t,r,n))n.stopPropagation();else if(Bj(e,n),t&4&&-1<KM.indexOf(e)){for(;a!==null;){var i=xh(a);if(i!==null&&xk(i),i=Py(e,t,r,n),i===null&&ox(e,t,n,gp,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else ox(e,t,n,null,r)}}var gp=null;function Py(e,t,r,n){if(gp=null,e=Pw(n),e=Co(e),e!==null)if(t=xl(e),t===null)e=null;else if(r=t.tag,r===13){if(e=uk(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return gp=e,null}function jk(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($M()){case Rw:return 1;case pk:return 4;case hp:case FM:return 16;case mk:return 536870912;default:return 16}default:return 16}}var Ns=null,Lw=null,Q0=null;function Sk(){if(Q0)return Q0;var e,t=Lw,r=t.length,n,a="value"in Ns?Ns.value:Ns.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===a[i-n];n++);return Q0=a.slice(e,1<n?1-n:void 0)}function J0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function n0(){return!0}function zj(){return!1}function Qn(e){function t(r,n,a,i,s){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?n0:zj,this.isPropagationStopped=zj,this}return Ut(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=n0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=n0)},persist:function(){},isPersistent:n0}),t}var Nu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$w=Qn(Nu),vh=Ut({},Nu,{view:0,detail:0}),JM=Qn(vh),Jv,Zv,nd,dg=Ut({},vh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nd&&(nd&&e.type==="mousemove"?(Jv=e.screenX-nd.screenX,Zv=e.screenY-nd.screenY):Zv=Jv=0,nd=e),Jv)},movementY:function(e){return"movementY"in e?e.movementY:Zv}}),qj=Qn(dg),ZM=Ut({},dg,{dataTransfer:0}),eL=Qn(ZM),tL=Ut({},vh,{relatedTarget:0}),ex=Qn(tL),rL=Ut({},Nu,{animationName:0,elapsedTime:0,pseudoElement:0}),nL=Qn(rL),aL=Ut({},Nu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),iL=Qn(aL),sL=Ut({},Nu,{data:0}),Wj=Qn(sL),oL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uL(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=cL[e])?!!t[e]:!1}function Fw(){return uL}var dL=Ut({},vh,{key:function(e){if(e.key){var t=oL[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=J0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lL[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fw,charCode:function(e){return e.type==="keypress"?J0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?J0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fL=Qn(dL),hL=Ut({},dg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hj=Qn(hL),pL=Ut({},vh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fw}),mL=Qn(pL),gL=Ut({},Nu,{propertyName:0,elapsedTime:0,pseudoElement:0}),vL=Qn(gL),xL=Ut({},dg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),yL=Qn(xL),bL=[9,13,27,32],Bw=Di&&"CompositionEvent"in window,Pd=null;Di&&"documentMode"in document&&(Pd=document.documentMode);var wL=Di&&"TextEvent"in window&&!Pd,Ek=Di&&(!Bw||Pd&&8<Pd&&11>=Pd),Vj=" ",Kj=!1;function Nk(e,t){switch(e){case"keyup":return bL.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tk(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vl=!1;function _L(e,t){switch(e){case"compositionend":return Tk(t);case"keypress":return t.which!==32?null:(Kj=!0,Vj);case"textInput":return e=t.data,e===Vj&&Kj?null:e;default:return null}}function jL(e,t){if(Vl)return e==="compositionend"||!Bw&&Nk(e,t)?(e=Sk(),Q0=Lw=Ns=null,Vl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ek&&t.locale!=="ko"?null:t.data;default:return null}}var SL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gj(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!SL[e.type]:t==="textarea"}function Ak(e,t,r,n){ik(n),t=vp(t,"onChange"),0<t.length&&(r=new $w("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Rd=null,nf=null;function EL(e){Fk(e,0)}function fg(e){var t=Xl(e);if(JO(t))return e}function NL(e,t){if(e==="change")return t}var Ck=!1;if(Di){var tx;if(Di){var rx="oninput"in document;if(!rx){var Xj=document.createElement("div");Xj.setAttribute("oninput","return;"),rx=typeof Xj.oninput=="function"}tx=rx}else tx=!1;Ck=tx&&(!document.documentMode||9<document.documentMode)}function Yj(){Rd&&(Rd.detachEvent("onpropertychange",Ok),nf=Rd=null)}function Ok(e){if(e.propertyName==="value"&&fg(nf)){var t=[];Ak(t,nf,e,Pw(e)),ck(EL,t)}}function TL(e,t,r){e==="focusin"?(Yj(),Rd=t,nf=r,Rd.attachEvent("onpropertychange",Ok)):e==="focusout"&&Yj()}function AL(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fg(nf)}function CL(e,t){if(e==="click")return fg(t)}function OL(e,t){if(e==="input"||e==="change")return fg(t)}function kL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ua=typeof Object.is=="function"?Object.is:kL;function af(e,t){if(Ua(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!py.call(t,a)||!Ua(e[a],t[a]))return!1}return!0}function Qj(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jj(e,t){var r=Qj(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Qj(r)}}function kk(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kk(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pk(){for(var e=window,t=up();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=up(e.document)}return t}function Uw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function PL(e){var t=Pk(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&kk(r.ownerDocument.documentElement,r)){if(n!==null&&Uw(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=Jj(r,i);var s=Jj(r,n);a&&s&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var RL=Di&&"documentMode"in document&&11>=document.documentMode,Kl=null,Ry=null,Id=null,Iy=!1;function Zj(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Iy||Kl==null||Kl!==up(n)||(n=Kl,"selectionStart"in n&&Uw(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Id&&af(Id,n)||(Id=n,n=vp(Ry,"onSelect"),0<n.length&&(t=new $w("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Kl)))}function a0(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Gl={animationend:a0("Animation","AnimationEnd"),animationiteration:a0("Animation","AnimationIteration"),animationstart:a0("Animation","AnimationStart"),transitionend:a0("Transition","TransitionEnd")},nx={},Rk={};Di&&(Rk=document.createElement("div").style,"AnimationEvent"in window||(delete Gl.animationend.animation,delete Gl.animationiteration.animation,delete Gl.animationstart.animation),"TransitionEvent"in window||delete Gl.transitionend.transition);function hg(e){if(nx[e])return nx[e];if(!Gl[e])return e;var t=Gl[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Rk)return nx[e]=t[r];return e}var Ik=hg("animationend"),Dk=hg("animationiteration"),Mk=hg("animationstart"),Lk=hg("transitionend"),$k=new Map,eS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qs(e,t){$k.set(e,t),vl(t,[e])}for(var ax=0;ax<eS.length;ax++){var ix=eS[ax],IL=ix.toLowerCase(),DL=ix[0].toUpperCase()+ix.slice(1);Qs(IL,"on"+DL)}Qs(Ik,"onAnimationEnd");Qs(Dk,"onAnimationIteration");Qs(Mk,"onAnimationStart");Qs("dblclick","onDoubleClick");Qs("focusin","onFocus");Qs("focusout","onBlur");Qs(Lk,"onTransitionEnd");Fc("onMouseEnter",["mouseout","mouseover"]);Fc("onMouseLeave",["mouseout","mouseover"]);Fc("onPointerEnter",["pointerout","pointerover"]);Fc("onPointerLeave",["pointerout","pointerover"]);vl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vl("onBeforeInput",["compositionend","keypress","textInput","paste"]);vl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ML=new Set("cancel close invalid load scroll toggle".split(" ").concat(jd));function tS(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,IM(n,t,void 0,e),e.currentTarget=null}function Fk(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var s=n.length-1;0<=s;s--){var l=n[s],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;tS(a,l,u),i=c}else for(s=0;s<n.length;s++){if(l=n[s],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;tS(a,l,u),i=c}}}if(fp)throw e=Cy,fp=!1,Cy=null,e}function St(e,t){var r=t[Fy];r===void 0&&(r=t[Fy]=new Set);var n=e+"__bubble";r.has(n)||(Bk(t,e,2,!1),r.add(n))}function sx(e,t,r){var n=0;t&&(n|=4),Bk(r,e,n,t)}var i0="_reactListening"+Math.random().toString(36).slice(2);function sf(e){if(!e[i0]){e[i0]=!0,KO.forEach(function(r){r!=="selectionchange"&&(ML.has(r)||sx(r,!1,e),sx(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[i0]||(t[i0]=!0,sx("selectionchange",!1,t))}}function Bk(e,t,r,n){switch(jk(t)){case 1:var a=YM;break;case 4:a=QM;break;default:a=Mw}r=a.bind(null,t,r,e),a=void 0,!Ay||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function ox(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(s===4)for(s=n.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;s=s.return}for(;l!==null;){if(s=Co(l),s===null)return;if(c=s.tag,c===5||c===6){n=i=s;continue e}l=l.parentNode}}n=n.return}ck(function(){var u=i,d=Pw(r),f=[];e:{var h=$k.get(e);if(h!==void 0){var p=$w,v=e;switch(e){case"keypress":if(J0(r)===0)break e;case"keydown":case"keyup":p=fL;break;case"focusin":v="focus",p=ex;break;case"focusout":v="blur",p=ex;break;case"beforeblur":case"afterblur":p=ex;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=qj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=eL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=mL;break;case Ik:case Dk:case Mk:p=nL;break;case Lk:p=vL;break;case"scroll":p=JM;break;case"wheel":p=yL;break;case"copy":case"cut":case"paste":p=iL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Hj}var g=(t&4)!==0,x=!g&&e==="scroll",b=g?h!==null?h+"Capture":null:h;g=[];for(var m=u,y;m!==null;){y=m;var _=y.stateNode;if(y.tag===5&&_!==null&&(y=_,b!==null&&(_=Zd(m,b),_!=null&&g.push(of(m,_,y)))),x)break;m=m.return}0<g.length&&(h=new p(h,v,null,r,d),f.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==Ny&&(v=r.relatedTarget||r.fromElement)&&(Co(v)||v[Mi]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(v=r.relatedTarget||r.toElement,p=u,v=v?Co(v):null,v!==null&&(x=xl(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(g=qj,_="onMouseLeave",b="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(g=Hj,_="onPointerLeave",b="onPointerEnter",m="pointer"),x=p==null?h:Xl(p),y=v==null?h:Xl(v),h=new g(_,m+"leave",p,r,d),h.target=x,h.relatedTarget=y,_=null,Co(d)===u&&(g=new g(b,m+"enter",v,r,d),g.target=y,g.relatedTarget=x,_=g),x=_,p&&v)t:{for(g=p,b=v,m=0,y=g;y;y=Ol(y))m++;for(y=0,_=b;_;_=Ol(_))y++;for(;0<m-y;)g=Ol(g),m--;for(;0<y-m;)b=Ol(b),y--;for(;m--;){if(g===b||b!==null&&g===b.alternate)break t;g=Ol(g),b=Ol(b)}g=null}else g=null;p!==null&&rS(f,h,p,g,!1),v!==null&&x!==null&&rS(f,x,v,g,!0)}}e:{if(h=u?Xl(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var w=NL;else if(Gj(h))if(Ck)w=OL;else{w=AL;var j=TL}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=CL);if(w&&(w=w(e,u))){Ak(f,w,r,d);break e}j&&j(e,h,u),e==="focusout"&&(j=h._wrapperState)&&j.controlled&&h.type==="number"&&wy(h,"number",h.value)}switch(j=u?Xl(u):window,e){case"focusin":(Gj(j)||j.contentEditable==="true")&&(Kl=j,Ry=u,Id=null);break;case"focusout":Id=Ry=Kl=null;break;case"mousedown":Iy=!0;break;case"contextmenu":case"mouseup":case"dragend":Iy=!1,Zj(f,r,d);break;case"selectionchange":if(RL)break;case"keydown":case"keyup":Zj(f,r,d)}var S;if(Bw)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Vl?Nk(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(Ek&&r.locale!=="ko"&&(Vl||E!=="onCompositionStart"?E==="onCompositionEnd"&&Vl&&(S=Sk()):(Ns=d,Lw="value"in Ns?Ns.value:Ns.textContent,Vl=!0)),j=vp(u,E),0<j.length&&(E=new Wj(E,e,null,r,d),f.push({event:E,listeners:j}),S?E.data=S:(S=Tk(r),S!==null&&(E.data=S)))),(S=wL?_L(e,r):jL(e,r))&&(u=vp(u,"onBeforeInput"),0<u.length&&(d=new Wj("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=S))}Fk(f,t)})}function of(e,t,r){return{instance:e,listener:t,currentTarget:r}}function vp(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Zd(e,r),i!=null&&n.unshift(of(e,i,a)),i=Zd(e,t),i!=null&&n.push(of(e,i,a))),e=e.return}return n}function Ol(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function rS(e,t,r,n,a){for(var i=t._reactName,s=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=Zd(r,i),c!=null&&s.unshift(of(r,c,l))):a||(c=Zd(r,i),c!=null&&s.push(of(r,c,l)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var LL=/\r\n?/g,$L=/\u0000|\uFFFD/g;function nS(e){return(typeof e=="string"?e:""+e).replace(LL,`
`).replace($L,"")}function s0(e,t,r){if(t=nS(t),nS(e)!==t&&r)throw Error(pe(425))}function xp(){}var Dy=null,My=null;function Ly(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $y=typeof setTimeout=="function"?setTimeout:void 0,FL=typeof clearTimeout=="function"?clearTimeout:void 0,aS=typeof Promise=="function"?Promise:void 0,BL=typeof queueMicrotask=="function"?queueMicrotask:typeof aS<"u"?function(e){return aS.resolve(null).then(e).catch(UL)}:$y;function UL(e){setTimeout(function(){throw e})}function lx(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),rf(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);rf(t)}function Ds(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function iS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Tu=Math.random().toString(36).slice(2),Za="__reactFiber$"+Tu,lf="__reactProps$"+Tu,Mi="__reactContainer$"+Tu,Fy="__reactEvents$"+Tu,zL="__reactListeners$"+Tu,qL="__reactHandles$"+Tu;function Co(e){var t=e[Za];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Mi]||r[Za]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=iS(e);e!==null;){if(r=e[Za])return r;e=iS(e)}return t}e=r,r=e.parentNode}return null}function xh(e){return e=e[Za]||e[Mi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(pe(33))}function pg(e){return e[lf]||null}var By=[],Yl=-1;function Js(e){return{current:e}}function Tt(e){0>Yl||(e.current=By[Yl],By[Yl]=null,Yl--)}function _t(e,t){Yl++,By[Yl]=e.current,e.current=t}var Hs={},Yr=Js(Hs),En=Js(!1),Zo=Hs;function Bc(e,t){var r=e.type.contextTypes;if(!r)return Hs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Nn(e){return e=e.childContextTypes,e!=null}function yp(){Tt(En),Tt(Yr)}function sS(e,t,r){if(Yr.current!==Hs)throw Error(pe(168));_t(Yr,t),_t(En,r)}function Uk(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(pe(108,TM(e)||"Unknown",a));return Ut({},r,n)}function bp(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Hs,Zo=Yr.current,_t(Yr,e),_t(En,En.current),!0}function oS(e,t,r){var n=e.stateNode;if(!n)throw Error(pe(169));r?(e=Uk(e,t,Zo),n.__reactInternalMemoizedMergedChildContext=e,Tt(En),Tt(Yr),_t(Yr,e)):Tt(En),_t(En,r)}var gi=null,mg=!1,cx=!1;function zk(e){gi===null?gi=[e]:gi.push(e)}function WL(e){mg=!0,zk(e)}function Zs(){if(!cx&&gi!==null){cx=!0;var e=0,t=dt;try{var r=gi;for(dt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}gi=null,mg=!1}catch(a){throw gi!==null&&(gi=gi.slice(e+1)),hk(Rw,Zs),a}finally{dt=t,cx=!1}}return null}var Ql=[],Jl=0,wp=null,_p=0,oa=[],la=0,el=null,wi=1,_i="";function vo(e,t){Ql[Jl++]=_p,Ql[Jl++]=wp,wp=e,_p=t}function qk(e,t,r){oa[la++]=wi,oa[la++]=_i,oa[la++]=el,el=e;var n=wi;e=_i;var a=32-La(n)-1;n&=~(1<<a),r+=1;var i=32-La(t)+a;if(30<i){var s=a-a%5;i=(n&(1<<s)-1).toString(32),n>>=s,a-=s,wi=1<<32-La(t)+a|r<<a|n,_i=i+e}else wi=1<<i|r<<a|n,_i=e}function zw(e){e.return!==null&&(vo(e,1),qk(e,1,0))}function qw(e){for(;e===wp;)wp=Ql[--Jl],Ql[Jl]=null,_p=Ql[--Jl],Ql[Jl]=null;for(;e===el;)el=oa[--la],oa[la]=null,_i=oa[--la],oa[la]=null,wi=oa[--la],oa[la]=null}var Vn=null,Hn=null,kt=!1,Pa=null;function Wk(e,t){var r=ua(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function lS(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Vn=e,Hn=Ds(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Vn=e,Hn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=el!==null?{id:wi,overflow:_i}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ua(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Vn=e,Hn=null,!0):!1;default:return!1}}function Uy(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zy(e){if(kt){var t=Hn;if(t){var r=t;if(!lS(e,t)){if(Uy(e))throw Error(pe(418));t=Ds(r.nextSibling);var n=Vn;t&&lS(e,t)?Wk(n,r):(e.flags=e.flags&-4097|2,kt=!1,Vn=e)}}else{if(Uy(e))throw Error(pe(418));e.flags=e.flags&-4097|2,kt=!1,Vn=e}}}function cS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Vn=e}function o0(e){if(e!==Vn)return!1;if(!kt)return cS(e),kt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ly(e.type,e.memoizedProps)),t&&(t=Hn)){if(Uy(e))throw Hk(),Error(pe(418));for(;t;)Wk(e,t),t=Ds(t.nextSibling)}if(cS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(pe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Hn=Ds(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Hn=null}}else Hn=Vn?Ds(e.stateNode.nextSibling):null;return!0}function Hk(){for(var e=Hn;e;)e=Ds(e.nextSibling)}function Uc(){Hn=Vn=null,kt=!1}function Ww(e){Pa===null?Pa=[e]:Pa.push(e)}var HL=Xi.ReactCurrentBatchConfig;function ad(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(pe(309));var n=r.stateNode}if(!n)throw Error(pe(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var l=a.refs;s===null?delete l[i]:l[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(pe(284));if(!r._owner)throw Error(pe(290,e))}return e}function l0(e,t){throw e=Object.prototype.toString.call(t),Error(pe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function uS(e){var t=e._init;return t(e._payload)}function Vk(e){function t(b,m){if(e){var y=b.deletions;y===null?(b.deletions=[m],b.flags|=16):y.push(m)}}function r(b,m){if(!e)return null;for(;m!==null;)t(b,m),m=m.sibling;return null}function n(b,m){for(b=new Map;m!==null;)m.key!==null?b.set(m.key,m):b.set(m.index,m),m=m.sibling;return b}function a(b,m){return b=Fs(b,m),b.index=0,b.sibling=null,b}function i(b,m,y){return b.index=y,e?(y=b.alternate,y!==null?(y=y.index,y<m?(b.flags|=2,m):y):(b.flags|=2,m)):(b.flags|=1048576,m)}function s(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,m,y,_){return m===null||m.tag!==6?(m=gx(y,b.mode,_),m.return=b,m):(m=a(m,y),m.return=b,m)}function c(b,m,y,_){var w=y.type;return w===Hl?d(b,m,y.props.children,_,y.key):m!==null&&(m.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ls&&uS(w)===m.type)?(_=a(m,y.props),_.ref=ad(b,m,y),_.return=b,_):(_=ip(y.type,y.key,y.props,null,b.mode,_),_.ref=ad(b,m,y),_.return=b,_)}function u(b,m,y,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=vx(y,b.mode,_),m.return=b,m):(m=a(m,y.children||[]),m.return=b,m)}function d(b,m,y,_,w){return m===null||m.tag!==7?(m=Xo(y,b.mode,_,w),m.return=b,m):(m=a(m,y),m.return=b,m)}function f(b,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=gx(""+m,b.mode,y),m.return=b,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Qh:return y=ip(m.type,m.key,m.props,null,b.mode,y),y.ref=ad(b,null,m),y.return=b,y;case Wl:return m=vx(m,b.mode,y),m.return=b,m;case ls:var _=m._init;return f(b,_(m._payload),y)}if(wd(m)||Zu(m))return m=Xo(m,b.mode,y,null),m.return=b,m;l0(b,m)}return null}function h(b,m,y,_){var w=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return w!==null?null:l(b,m,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Qh:return y.key===w?c(b,m,y,_):null;case Wl:return y.key===w?u(b,m,y,_):null;case ls:return w=y._init,h(b,m,w(y._payload),_)}if(wd(y)||Zu(y))return w!==null?null:d(b,m,y,_,null);l0(b,y)}return null}function p(b,m,y,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return b=b.get(y)||null,l(m,b,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Qh:return b=b.get(_.key===null?y:_.key)||null,c(m,b,_,w);case Wl:return b=b.get(_.key===null?y:_.key)||null,u(m,b,_,w);case ls:var j=_._init;return p(b,m,y,j(_._payload),w)}if(wd(_)||Zu(_))return b=b.get(y)||null,d(m,b,_,w,null);l0(m,_)}return null}function v(b,m,y,_){for(var w=null,j=null,S=m,E=m=0,N=null;S!==null&&E<y.length;E++){S.index>E?(N=S,S=null):N=S.sibling;var A=h(b,S,y[E],_);if(A===null){S===null&&(S=N);break}e&&S&&A.alternate===null&&t(b,S),m=i(A,m,E),j===null?w=A:j.sibling=A,j=A,S=N}if(E===y.length)return r(b,S),kt&&vo(b,E),w;if(S===null){for(;E<y.length;E++)S=f(b,y[E],_),S!==null&&(m=i(S,m,E),j===null?w=S:j.sibling=S,j=S);return kt&&vo(b,E),w}for(S=n(b,S);E<y.length;E++)N=p(S,b,E,y[E],_),N!==null&&(e&&N.alternate!==null&&S.delete(N.key===null?E:N.key),m=i(N,m,E),j===null?w=N:j.sibling=N,j=N);return e&&S.forEach(function(O){return t(b,O)}),kt&&vo(b,E),w}function g(b,m,y,_){var w=Zu(y);if(typeof w!="function")throw Error(pe(150));if(y=w.call(y),y==null)throw Error(pe(151));for(var j=w=null,S=m,E=m=0,N=null,A=y.next();S!==null&&!A.done;E++,A=y.next()){S.index>E?(N=S,S=null):N=S.sibling;var O=h(b,S,A.value,_);if(O===null){S===null&&(S=N);break}e&&S&&O.alternate===null&&t(b,S),m=i(O,m,E),j===null?w=O:j.sibling=O,j=O,S=N}if(A.done)return r(b,S),kt&&vo(b,E),w;if(S===null){for(;!A.done;E++,A=y.next())A=f(b,A.value,_),A!==null&&(m=i(A,m,E),j===null?w=A:j.sibling=A,j=A);return kt&&vo(b,E),w}for(S=n(b,S);!A.done;E++,A=y.next())A=p(S,b,E,A.value,_),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?E:A.key),m=i(A,m,E),j===null?w=A:j.sibling=A,j=A);return e&&S.forEach(function(D){return t(b,D)}),kt&&vo(b,E),w}function x(b,m,y,_){if(typeof y=="object"&&y!==null&&y.type===Hl&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Qh:e:{for(var w=y.key,j=m;j!==null;){if(j.key===w){if(w=y.type,w===Hl){if(j.tag===7){r(b,j.sibling),m=a(j,y.props.children),m.return=b,b=m;break e}}else if(j.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ls&&uS(w)===j.type){r(b,j.sibling),m=a(j,y.props),m.ref=ad(b,j,y),m.return=b,b=m;break e}r(b,j);break}else t(b,j);j=j.sibling}y.type===Hl?(m=Xo(y.props.children,b.mode,_,y.key),m.return=b,b=m):(_=ip(y.type,y.key,y.props,null,b.mode,_),_.ref=ad(b,m,y),_.return=b,b=_)}return s(b);case Wl:e:{for(j=y.key;m!==null;){if(m.key===j)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){r(b,m.sibling),m=a(m,y.children||[]),m.return=b,b=m;break e}else{r(b,m);break}else t(b,m);m=m.sibling}m=vx(y,b.mode,_),m.return=b,b=m}return s(b);case ls:return j=y._init,x(b,m,j(y._payload),_)}if(wd(y))return v(b,m,y,_);if(Zu(y))return g(b,m,y,_);l0(b,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(r(b,m.sibling),m=a(m,y),m.return=b,b=m):(r(b,m),m=gx(y,b.mode,_),m.return=b,b=m),s(b)):r(b,m)}return x}var zc=Vk(!0),Kk=Vk(!1),jp=Js(null),Sp=null,Zl=null,Hw=null;function Vw(){Hw=Zl=Sp=null}function Kw(e){var t=jp.current;Tt(jp),e._currentValue=t}function qy(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function hc(e,t){Sp=e,Hw=Zl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(_n=!0),e.firstContext=null)}function pa(e){var t=e._currentValue;if(Hw!==e)if(e={context:e,memoizedValue:t,next:null},Zl===null){if(Sp===null)throw Error(pe(308));Zl=e,Sp.dependencies={lanes:0,firstContext:e}}else Zl=Zl.next=e;return t}var Oo=null;function Gw(e){Oo===null?Oo=[e]:Oo.push(e)}function Gk(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Gw(t)):(r.next=a.next,a.next=r),t.interleaved=r,Li(e,n)}function Li(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var cs=!1;function Xw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ni(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ms(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Je&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Li(e,r)}return a=n.interleaved,a===null?(t.next=t,Gw(n)):(t.next=a.next,a.next=t),n.interleaved=t,Li(e,r)}function Z0(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Iw(e,r)}}function dS(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=s:i=i.next=s,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ep(e,t,r,n){var a=e.updateQueue;cs=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,s===null?i=u:s.next=u,s=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==s&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;s=0,d=u=c=null,l=i;do{var h=l.lane,p=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,g=l;switch(h=t,p=r,g.tag){case 1:if(v=g.payload,typeof v=="function"){f=v.call(p,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,h=typeof v=="function"?v.call(p,f,h):v,h==null)break e;f=Ut({},f,h);break e;case 2:cs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,s|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do s|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);rl|=s,e.lanes=s,e.memoizedState=f}}function fS(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(pe(191,a));a.call(n)}}}var yh={},ri=Js(yh),cf=Js(yh),uf=Js(yh);function ko(e){if(e===yh)throw Error(pe(174));return e}function Yw(e,t){switch(_t(uf,t),_t(cf,e),_t(ri,yh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:jy(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=jy(t,e)}Tt(ri),_t(ri,t)}function qc(){Tt(ri),Tt(cf),Tt(uf)}function Yk(e){ko(uf.current);var t=ko(ri.current),r=jy(t,e.type);t!==r&&(_t(cf,e),_t(ri,r))}function Qw(e){cf.current===e&&(Tt(ri),Tt(cf))}var Lt=Js(0);function Np(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ux=[];function Jw(){for(var e=0;e<ux.length;e++)ux[e]._workInProgressVersionPrimary=null;ux.length=0}var ep=Xi.ReactCurrentDispatcher,dx=Xi.ReactCurrentBatchConfig,tl=0,Ft=null,cr=null,vr=null,Tp=!1,Dd=!1,df=0,VL=0;function zr(){throw Error(pe(321))}function Zw(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ua(e[r],t[r]))return!1;return!0}function e_(e,t,r,n,a,i){if(tl=i,Ft=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ep.current=e===null||e.memoizedState===null?YL:QL,e=r(n,a),Dd){i=0;do{if(Dd=!1,df=0,25<=i)throw Error(pe(301));i+=1,vr=cr=null,t.updateQueue=null,ep.current=JL,e=r(n,a)}while(Dd)}if(ep.current=Ap,t=cr!==null&&cr.next!==null,tl=0,vr=cr=Ft=null,Tp=!1,t)throw Error(pe(300));return e}function t_(){var e=df!==0;return df=0,e}function Ga(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vr===null?Ft.memoizedState=vr=e:vr=vr.next=e,vr}function ma(){if(cr===null){var e=Ft.alternate;e=e!==null?e.memoizedState:null}else e=cr.next;var t=vr===null?Ft.memoizedState:vr.next;if(t!==null)vr=t,cr=e;else{if(e===null)throw Error(pe(310));cr=e,e={memoizedState:cr.memoizedState,baseState:cr.baseState,baseQueue:cr.baseQueue,queue:cr.queue,next:null},vr===null?Ft.memoizedState=vr=e:vr=vr.next=e}return vr}function ff(e,t){return typeof t=="function"?t(e):t}function fx(e){var t=ma(),r=t.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=e;var n=cr,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var s=a.next;a.next=i.next,i.next=s}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=s=null,c=null,u=i;do{var d=u.lane;if((tl&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,s=n):c=c.next=f,Ft.lanes|=d,rl|=d}u=u.next}while(u!==null&&u!==i);c===null?s=n:c.next=l,Ua(n,t.memoizedState)||(_n=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Ft.lanes|=i,rl|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function hx(e){var t=ma(),r=t.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var s=a=a.next;do i=e(i,s.action),s=s.next;while(s!==a);Ua(i,t.memoizedState)||(_n=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Qk(){}function Jk(e,t){var r=Ft,n=ma(),a=t(),i=!Ua(n.memoizedState,a);if(i&&(n.memoizedState=a,_n=!0),n=n.queue,r_(t4.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||vr!==null&&vr.memoizedState.tag&1){if(r.flags|=2048,hf(9,e4.bind(null,r,n,a,t),void 0,null),jr===null)throw Error(pe(349));tl&30||Zk(r,t,a)}return a}function Zk(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ft.updateQueue,t===null?(t={lastEffect:null,stores:null},Ft.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function e4(e,t,r,n){t.value=r,t.getSnapshot=n,r4(t)&&n4(e)}function t4(e,t,r){return r(function(){r4(t)&&n4(e)})}function r4(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ua(e,r)}catch{return!0}}function n4(e){var t=Li(e,1);t!==null&&$a(t,e,1,-1)}function hS(e){var t=Ga();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ff,lastRenderedState:e},t.queue=e,e=e.dispatch=XL.bind(null,Ft,e),[t.memoizedState,e]}function hf(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ft.updateQueue,t===null?(t={lastEffect:null,stores:null},Ft.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function a4(){return ma().memoizedState}function tp(e,t,r,n){var a=Ga();Ft.flags|=e,a.memoizedState=hf(1|t,r,void 0,n===void 0?null:n)}function gg(e,t,r,n){var a=ma();n=n===void 0?null:n;var i=void 0;if(cr!==null){var s=cr.memoizedState;if(i=s.destroy,n!==null&&Zw(n,s.deps)){a.memoizedState=hf(t,r,i,n);return}}Ft.flags|=e,a.memoizedState=hf(1|t,r,i,n)}function pS(e,t){return tp(8390656,8,e,t)}function r_(e,t){return gg(2048,8,e,t)}function i4(e,t){return gg(4,2,e,t)}function s4(e,t){return gg(4,4,e,t)}function o4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function l4(e,t,r){return r=r!=null?r.concat([e]):null,gg(4,4,o4.bind(null,t,e),r)}function n_(){}function c4(e,t){var r=ma();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Zw(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function u4(e,t){var r=ma();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Zw(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function d4(e,t,r){return tl&21?(Ua(r,t)||(r=gk(),Ft.lanes|=r,rl|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_n=!0),e.memoizedState=r)}function KL(e,t){var r=dt;dt=r!==0&&4>r?r:4,e(!0);var n=dx.transition;dx.transition={};try{e(!1),t()}finally{dt=r,dx.transition=n}}function f4(){return ma().memoizedState}function GL(e,t,r){var n=$s(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},h4(e))p4(t,r);else if(r=Gk(e,t,r,n),r!==null){var a=dn();$a(r,e,n,a),m4(r,t,n)}}function XL(e,t,r){var n=$s(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(h4(e))p4(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,l=i(s,r);if(a.hasEagerState=!0,a.eagerState=l,Ua(l,s)){var c=t.interleaved;c===null?(a.next=a,Gw(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=Gk(e,t,a,n),r!==null&&(a=dn(),$a(r,e,n,a),m4(r,t,n))}}function h4(e){var t=e.alternate;return e===Ft||t!==null&&t===Ft}function p4(e,t){Dd=Tp=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function m4(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Iw(e,r)}}var Ap={readContext:pa,useCallback:zr,useContext:zr,useEffect:zr,useImperativeHandle:zr,useInsertionEffect:zr,useLayoutEffect:zr,useMemo:zr,useReducer:zr,useRef:zr,useState:zr,useDebugValue:zr,useDeferredValue:zr,useTransition:zr,useMutableSource:zr,useSyncExternalStore:zr,useId:zr,unstable_isNewReconciler:!1},YL={readContext:pa,useCallback:function(e,t){return Ga().memoizedState=[e,t===void 0?null:t],e},useContext:pa,useEffect:pS,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,tp(4194308,4,o4.bind(null,t,e),r)},useLayoutEffect:function(e,t){return tp(4194308,4,e,t)},useInsertionEffect:function(e,t){return tp(4,2,e,t)},useMemo:function(e,t){var r=Ga();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ga();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=GL.bind(null,Ft,e),[n.memoizedState,e]},useRef:function(e){var t=Ga();return e={current:e},t.memoizedState=e},useState:hS,useDebugValue:n_,useDeferredValue:function(e){return Ga().memoizedState=e},useTransition:function(){var e=hS(!1),t=e[0];return e=KL.bind(null,e[1]),Ga().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ft,a=Ga();if(kt){if(r===void 0)throw Error(pe(407));r=r()}else{if(r=t(),jr===null)throw Error(pe(349));tl&30||Zk(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,pS(t4.bind(null,n,i,e),[e]),n.flags|=2048,hf(9,e4.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Ga(),t=jr.identifierPrefix;if(kt){var r=_i,n=wi;r=(n&~(1<<32-La(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=df++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=VL++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},QL={readContext:pa,useCallback:c4,useContext:pa,useEffect:r_,useImperativeHandle:l4,useInsertionEffect:i4,useLayoutEffect:s4,useMemo:u4,useReducer:fx,useRef:a4,useState:function(){return fx(ff)},useDebugValue:n_,useDeferredValue:function(e){var t=ma();return d4(t,cr.memoizedState,e)},useTransition:function(){var e=fx(ff)[0],t=ma().memoizedState;return[e,t]},useMutableSource:Qk,useSyncExternalStore:Jk,useId:f4,unstable_isNewReconciler:!1},JL={readContext:pa,useCallback:c4,useContext:pa,useEffect:r_,useImperativeHandle:l4,useInsertionEffect:i4,useLayoutEffect:s4,useMemo:u4,useReducer:hx,useRef:a4,useState:function(){return hx(ff)},useDebugValue:n_,useDeferredValue:function(e){var t=ma();return cr===null?t.memoizedState=e:d4(t,cr.memoizedState,e)},useTransition:function(){var e=hx(ff)[0],t=ma().memoizedState;return[e,t]},useMutableSource:Qk,useSyncExternalStore:Jk,useId:f4,unstable_isNewReconciler:!1};function Ea(e,t){if(e&&e.defaultProps){t=Ut({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Wy(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ut({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var vg={isMounted:function(e){return(e=e._reactInternals)?xl(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=dn(),a=$s(e),i=Ni(n,a);i.payload=t,r!=null&&(i.callback=r),t=Ms(e,i,a),t!==null&&($a(t,e,a,n),Z0(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=dn(),a=$s(e),i=Ni(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Ms(e,i,a),t!==null&&($a(t,e,a,n),Z0(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=dn(),n=$s(e),a=Ni(r,n);a.tag=2,t!=null&&(a.callback=t),t=Ms(e,a,n),t!==null&&($a(t,e,n,r),Z0(t,e,n))}};function mS(e,t,r,n,a,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,s):t.prototype&&t.prototype.isPureReactComponent?!af(r,n)||!af(a,i):!0}function g4(e,t,r){var n=!1,a=Hs,i=t.contextType;return typeof i=="object"&&i!==null?i=pa(i):(a=Nn(t)?Zo:Yr.current,n=t.contextTypes,i=(n=n!=null)?Bc(e,a):Hs),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vg,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function gS(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&vg.enqueueReplaceState(t,t.state,null)}function Hy(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Xw(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=pa(i):(i=Nn(t)?Zo:Yr.current,a.context=Bc(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Wy(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&vg.enqueueReplaceState(a,a.state,null),Ep(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Wc(e,t){try{var r="",n=t;do r+=NM(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function px(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Vy(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ZL=typeof WeakMap=="function"?WeakMap:Map;function v4(e,t,r){r=Ni(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Op||(Op=!0,r1=n),Vy(e,t)},r}function x4(e,t,r){r=Ni(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Vy(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Vy(e,t),typeof n!="function"&&(Ls===null?Ls=new Set([this]):Ls.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function vS(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new ZL;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=h$.bind(null,e,t,r),t.then(e,e))}function xS(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function yS(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ni(-1,1),t.tag=2,Ms(r,t,1))),r.lanes|=1),e)}var e$=Xi.ReactCurrentOwner,_n=!1;function tn(e,t,r,n){t.child=e===null?Kk(t,null,r,n):zc(t,e.child,r,n)}function bS(e,t,r,n,a){r=r.render;var i=t.ref;return hc(t,a),n=e_(e,t,r,n,i,a),r=t_(),e!==null&&!_n?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,$i(e,t,a)):(kt&&r&&zw(t),t.flags|=1,tn(e,t,n,a),t.child)}function wS(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!d_(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,y4(e,t,i,n,a)):(e=ip(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var s=i.memoizedProps;if(r=r.compare,r=r!==null?r:af,r(s,n)&&e.ref===t.ref)return $i(e,t,a)}return t.flags|=1,e=Fs(i,n),e.ref=t.ref,e.return=t,t.child=e}function y4(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(af(i,n)&&e.ref===t.ref)if(_n=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(_n=!0);else return t.lanes=e.lanes,$i(e,t,a)}return Ky(e,t,r,n,a)}function b4(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(tc,Ln),Ln|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_t(tc,Ln),Ln|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,_t(tc,Ln),Ln|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,_t(tc,Ln),Ln|=n;return tn(e,t,a,r),t.child}function w4(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ky(e,t,r,n,a){var i=Nn(r)?Zo:Yr.current;return i=Bc(t,i),hc(t,a),r=e_(e,t,r,n,i,a),n=t_(),e!==null&&!_n?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,$i(e,t,a)):(kt&&n&&zw(t),t.flags|=1,tn(e,t,r,a),t.child)}function _S(e,t,r,n,a){if(Nn(r)){var i=!0;bp(t)}else i=!1;if(hc(t,a),t.stateNode===null)rp(e,t),g4(t,r,n),Hy(t,r,n,a),n=!0;else if(e===null){var s=t.stateNode,l=t.memoizedProps;s.props=l;var c=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=pa(u):(u=Nn(r)?Zo:Yr.current,u=Bc(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==n||c!==u)&&gS(t,s,n,u),cs=!1;var h=t.memoizedState;s.state=h,Ep(t,n,s,a),c=t.memoizedState,l!==n||h!==c||En.current||cs?(typeof d=="function"&&(Wy(t,r,d,n),c=t.memoizedState),(l=cs||mS(t,r,l,n,h,c,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),s.props=n,s.state=c,s.context=u,n=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,Xk(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Ea(t.type,l),s.props=u,f=t.pendingProps,h=s.context,c=r.contextType,typeof c=="object"&&c!==null?c=pa(c):(c=Nn(r)?Zo:Yr.current,c=Bc(t,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==f||h!==c)&&gS(t,s,n,c),cs=!1,h=t.memoizedState,s.state=h,Ep(t,n,s,a);var v=t.memoizedState;l!==f||h!==v||En.current||cs?(typeof p=="function"&&(Wy(t,r,p,n),v=t.memoizedState),(u=cs||mS(t,r,u,n,h,v,c)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,v,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,v,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),s.props=n,s.state=v,s.context=c,n=u):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Gy(e,t,r,n,i,a)}function Gy(e,t,r,n,a,i){w4(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return a&&oS(t,r,!1),$i(e,t,i);n=t.stateNode,e$.current=t;var l=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=zc(t,e.child,null,i),t.child=zc(t,null,l,i)):tn(e,t,l,i),t.memoizedState=n.state,a&&oS(t,r,!0),t.child}function _4(e){var t=e.stateNode;t.pendingContext?sS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&sS(e,t.context,!1),Yw(e,t.containerInfo)}function jS(e,t,r,n,a){return Uc(),Ww(a),t.flags|=256,tn(e,t,r,n),t.child}var Xy={dehydrated:null,treeContext:null,retryLane:0};function Yy(e){return{baseLanes:e,cachePool:null,transitions:null}}function j4(e,t,r){var n=t.pendingProps,a=Lt.current,i=!1,s=(t.flags&128)!==0,l;if((l=s)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),_t(Lt,a&1),e===null)return zy(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,i?(n=t.mode,i=t.child,s={mode:"hidden",children:s},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=bg(s,n,0,null),e=Xo(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Yy(r),t.memoizedState=Xy,e):a_(t,s));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return t$(e,t,s,n,l,a,r);if(i){i=n.fallback,s=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(s&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Fs(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Fs(l,i):(i=Xo(i,s,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,s=e.child.memoizedState,s=s===null?Yy(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~r,t.memoizedState=Xy,n}return i=e.child,e=i.sibling,n=Fs(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function a_(e,t){return t=bg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function c0(e,t,r,n){return n!==null&&Ww(n),zc(t,e.child,null,r),e=a_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function t$(e,t,r,n,a,i,s){if(r)return t.flags&256?(t.flags&=-257,n=px(Error(pe(422))),c0(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=bg({mode:"visible",children:n.children},a,0,null),i=Xo(i,a,s,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&zc(t,e.child,null,s),t.child.memoizedState=Yy(s),t.memoizedState=Xy,i);if(!(t.mode&1))return c0(e,t,s,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(pe(419)),n=px(i,n,void 0),c0(e,t,s,n)}if(l=(s&e.childLanes)!==0,_n||l){if(n=jr,n!==null){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|s)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Li(e,a),$a(n,e,a,-1))}return u_(),n=px(Error(pe(421))),c0(e,t,s,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=p$.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Hn=Ds(a.nextSibling),Vn=t,kt=!0,Pa=null,e!==null&&(oa[la++]=wi,oa[la++]=_i,oa[la++]=el,wi=e.id,_i=e.overflow,el=t),t=a_(t,n.children),t.flags|=4096,t)}function SS(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),qy(e.return,t,r)}function mx(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function S4(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(tn(e,t,n.children,r),n=Lt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&SS(e,r,t);else if(e.tag===19)SS(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(_t(Lt,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Np(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),mx(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Np(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}mx(t,!0,r,null,i);break;case"together":mx(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $i(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),rl|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(pe(153));if(t.child!==null){for(e=t.child,r=Fs(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Fs(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function r$(e,t,r){switch(t.tag){case 3:_4(t),Uc();break;case 5:Yk(t);break;case 1:Nn(t.type)&&bp(t);break;case 4:Yw(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;_t(jp,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(_t(Lt,Lt.current&1),t.flags|=128,null):r&t.child.childLanes?j4(e,t,r):(_t(Lt,Lt.current&1),e=$i(e,t,r),e!==null?e.sibling:null);_t(Lt,Lt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return S4(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),_t(Lt,Lt.current),n)break;return null;case 22:case 23:return t.lanes=0,b4(e,t,r)}return $i(e,t,r)}var E4,Qy,N4,T4;E4=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Qy=function(){};N4=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,ko(ri.current);var i=null;switch(r){case"input":a=yy(e,a),n=yy(e,n),i=[];break;case"select":a=Ut({},a,{value:void 0}),n=Ut({},n,{value:void 0}),i=[];break;case"textarea":a=_y(e,a),n=_y(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=xp)}Sy(r,n);var s;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Qd.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Qd.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&St("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};T4=function(e,t,r,n){r!==n&&(t.flags|=4)};function id(e,t){if(!kt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function qr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function n$(e,t,r){var n=t.pendingProps;switch(qw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qr(t),null;case 1:return Nn(t.type)&&yp(),qr(t),null;case 3:return n=t.stateNode,qc(),Tt(En),Tt(Yr),Jw(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(o0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pa!==null&&(i1(Pa),Pa=null))),Qy(e,t),qr(t),null;case 5:Qw(t);var a=ko(uf.current);if(r=t.type,e!==null&&t.stateNode!=null)N4(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(pe(166));return qr(t),null}if(e=ko(ri.current),o0(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Za]=t,n[lf]=i,e=(t.mode&1)!==0,r){case"dialog":St("cancel",n),St("close",n);break;case"iframe":case"object":case"embed":St("load",n);break;case"video":case"audio":for(a=0;a<jd.length;a++)St(jd[a],n);break;case"source":St("error",n);break;case"img":case"image":case"link":St("error",n),St("load",n);break;case"details":St("toggle",n);break;case"input":Rj(n,i),St("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},St("invalid",n);break;case"textarea":Dj(n,i),St("invalid",n)}Sy(r,i),a=null;for(var s in i)if(i.hasOwnProperty(s)){var l=i[s];s==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&s0(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&s0(n.textContent,l,e),a=["children",""+l]):Qd.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&St("scroll",n)}switch(r){case"input":Jh(n),Ij(n,i,!0);break;case"textarea":Jh(n),Mj(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=xp)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=tk(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[Za]=t,e[lf]=n,E4(e,t,!1,!1),t.stateNode=e;e:{switch(s=Ey(r,n),r){case"dialog":St("cancel",e),St("close",e),a=n;break;case"iframe":case"object":case"embed":St("load",e),a=n;break;case"video":case"audio":for(a=0;a<jd.length;a++)St(jd[a],e);a=n;break;case"source":St("error",e),a=n;break;case"img":case"image":case"link":St("error",e),St("load",e),a=n;break;case"details":St("toggle",e),a=n;break;case"input":Rj(e,n),a=yy(e,n),St("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Ut({},n,{value:void 0}),St("invalid",e);break;case"textarea":Dj(e,n),a=_y(e,n),St("invalid",e);break;default:a=n}Sy(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?ak(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&rk(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Jd(e,c):typeof c=="number"&&Jd(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Qd.hasOwnProperty(i)?c!=null&&i==="onScroll"&&St("scroll",e):c!=null&&Aw(e,i,c,s))}switch(r){case"input":Jh(e),Ij(e,n,!1);break;case"textarea":Jh(e),Mj(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ws(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?cc(e,!!n.multiple,i,!1):n.defaultValue!=null&&cc(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=xp)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return qr(t),null;case 6:if(e&&t.stateNode!=null)T4(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(pe(166));if(r=ko(uf.current),ko(ri.current),o0(t)){if(n=t.stateNode,r=t.memoizedProps,n[Za]=t,(i=n.nodeValue!==r)&&(e=Vn,e!==null))switch(e.tag){case 3:s0(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&s0(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Za]=t,t.stateNode=n}return qr(t),null;case 13:if(Tt(Lt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(kt&&Hn!==null&&t.mode&1&&!(t.flags&128))Hk(),Uc(),t.flags|=98560,i=!1;else if(i=o0(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(pe(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(pe(317));i[Za]=t}else Uc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;qr(t),i=!1}else Pa!==null&&(i1(Pa),Pa=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Lt.current&1?dr===0&&(dr=3):u_())),t.updateQueue!==null&&(t.flags|=4),qr(t),null);case 4:return qc(),Qy(e,t),e===null&&sf(t.stateNode.containerInfo),qr(t),null;case 10:return Kw(t.type._context),qr(t),null;case 17:return Nn(t.type)&&yp(),qr(t),null;case 19:if(Tt(Lt),i=t.memoizedState,i===null)return qr(t),null;if(n=(t.flags&128)!==0,s=i.rendering,s===null)if(n)id(i,!1);else{if(dr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Np(e),s!==null){for(t.flags|=128,id(i,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return _t(Lt,Lt.current&1|2),t.child}e=e.sibling}i.tail!==null&&Yt()>Hc&&(t.flags|=128,n=!0,id(i,!1),t.lanes=4194304)}else{if(!n)if(e=Np(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),id(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!kt)return qr(t),null}else 2*Yt()-i.renderingStartTime>Hc&&r!==1073741824&&(t.flags|=128,n=!0,id(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(r=i.last,r!==null?r.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Yt(),t.sibling=null,r=Lt.current,_t(Lt,n?r&1|2:r&1),t):(qr(t),null);case 22:case 23:return c_(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ln&1073741824&&(qr(t),t.subtreeFlags&6&&(t.flags|=8192)):qr(t),null;case 24:return null;case 25:return null}throw Error(pe(156,t.tag))}function a$(e,t){switch(qw(t),t.tag){case 1:return Nn(t.type)&&yp(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qc(),Tt(En),Tt(Yr),Jw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Qw(t),null;case 13:if(Tt(Lt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(pe(340));Uc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Tt(Lt),null;case 4:return qc(),null;case 10:return Kw(t.type._context),null;case 22:case 23:return c_(),null;case 24:return null;default:return null}}var u0=!1,Hr=!1,i$=typeof WeakSet=="function"?WeakSet:Set,Te=null;function ec(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ht(e,t,n)}else r.current=null}function Jy(e,t,r){try{r()}catch(n){Ht(e,t,n)}}var ES=!1;function s$(e,t){if(Dy=mp,e=Pk(),Uw(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var s=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==r||a!==0&&f.nodeType!==3||(l=s+a),f!==i||n!==0&&f.nodeType!==3||(c=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===r&&++u===a&&(l=s),h===i&&++d===n&&(c=s),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(My={focusedElem:e,selectionRange:r},mp=!1,Te=t;Te!==null;)if(t=Te,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Te=e;else for(;Te!==null;){t=Te;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,x=v.memoizedState,b=t.stateNode,m=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:Ea(t.type,g),x);b.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pe(163))}}catch(_){Ht(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Te=e;break}Te=t.return}return v=ES,ES=!1,v}function Md(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Jy(t,r,i)}a=a.next}while(a!==n)}}function xg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Zy(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function A4(e){var t=e.alternate;t!==null&&(e.alternate=null,A4(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Za],delete t[lf],delete t[Fy],delete t[zL],delete t[qL])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function C4(e){return e.tag===5||e.tag===3||e.tag===4}function NS(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||C4(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function e1(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=xp));else if(n!==4&&(e=e.child,e!==null))for(e1(e,t,r),e=e.sibling;e!==null;)e1(e,t,r),e=e.sibling}function t1(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(t1(e,t,r),e=e.sibling;e!==null;)t1(e,t,r),e=e.sibling}var kr=null,Ca=!1;function is(e,t,r){for(r=r.child;r!==null;)O4(e,t,r),r=r.sibling}function O4(e,t,r){if(ti&&typeof ti.onCommitFiberUnmount=="function")try{ti.onCommitFiberUnmount(ug,r)}catch{}switch(r.tag){case 5:Hr||ec(r,t);case 6:var n=kr,a=Ca;kr=null,is(e,t,r),kr=n,Ca=a,kr!==null&&(Ca?(e=kr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):kr.removeChild(r.stateNode));break;case 18:kr!==null&&(Ca?(e=kr,r=r.stateNode,e.nodeType===8?lx(e.parentNode,r):e.nodeType===1&&lx(e,r),rf(e)):lx(kr,r.stateNode));break;case 4:n=kr,a=Ca,kr=r.stateNode.containerInfo,Ca=!0,is(e,t,r),kr=n,Ca=a;break;case 0:case 11:case 14:case 15:if(!Hr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Jy(r,t,s),a=a.next}while(a!==n)}is(e,t,r);break;case 1:if(!Hr&&(ec(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ht(r,t,l)}is(e,t,r);break;case 21:is(e,t,r);break;case 22:r.mode&1?(Hr=(n=Hr)||r.memoizedState!==null,is(e,t,r),Hr=n):is(e,t,r);break;default:is(e,t,r)}}function TS(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new i$),t.forEach(function(n){var a=m$.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function ba(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,s=t,l=s;e:for(;l!==null;){switch(l.tag){case 5:kr=l.stateNode,Ca=!1;break e;case 3:kr=l.stateNode.containerInfo,Ca=!0;break e;case 4:kr=l.stateNode.containerInfo,Ca=!0;break e}l=l.return}if(kr===null)throw Error(pe(160));O4(i,s,a),kr=null,Ca=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Ht(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)k4(t,e),t=t.sibling}function k4(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ba(t,e),Ha(e),n&4){try{Md(3,e,e.return),xg(3,e)}catch(g){Ht(e,e.return,g)}try{Md(5,e,e.return)}catch(g){Ht(e,e.return,g)}}break;case 1:ba(t,e),Ha(e),n&512&&r!==null&&ec(r,r.return);break;case 5:if(ba(t,e),Ha(e),n&512&&r!==null&&ec(r,r.return),e.flags&32){var a=e.stateNode;try{Jd(a,"")}catch(g){Ht(e,e.return,g)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,s=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ZO(a,i),Ey(l,s);var u=Ey(l,i);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];d==="style"?ak(a,f):d==="dangerouslySetInnerHTML"?rk(a,f):d==="children"?Jd(a,f):Aw(a,d,f,u)}switch(l){case"input":by(a,i);break;case"textarea":ek(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?cc(a,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?cc(a,!!i.multiple,i.defaultValue,!0):cc(a,!!i.multiple,i.multiple?[]:"",!1))}a[lf]=i}catch(g){Ht(e,e.return,g)}}break;case 6:if(ba(t,e),Ha(e),n&4){if(e.stateNode===null)throw Error(pe(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Ht(e,e.return,g)}}break;case 3:if(ba(t,e),Ha(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{rf(t.containerInfo)}catch(g){Ht(e,e.return,g)}break;case 4:ba(t,e),Ha(e);break;case 13:ba(t,e),Ha(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(o_=Yt())),n&4&&TS(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Hr=(u=Hr)||d,ba(t,e),Hr=u):ba(t,e),Ha(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Te=e,d=e.child;d!==null;){for(f=Te=d;Te!==null;){switch(h=Te,p=h.child,h.tag){case 0:case 11:case 14:case 15:Md(4,h,h.return);break;case 1:ec(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(g){Ht(n,r,g)}}break;case 5:ec(h,h.return);break;case 22:if(h.memoizedState!==null){CS(f);continue}}p!==null?(p.return=h,Te=p):CS(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=nk("display",s))}catch(g){Ht(e,e.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Ht(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ba(t,e),Ha(e),n&4&&TS(e);break;case 21:break;default:ba(t,e),Ha(e)}}function Ha(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(C4(r)){var n=r;break e}r=r.return}throw Error(pe(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Jd(a,""),n.flags&=-33);var i=NS(e);t1(e,i,a);break;case 3:case 4:var s=n.stateNode.containerInfo,l=NS(e);e1(e,l,s);break;default:throw Error(pe(161))}}catch(c){Ht(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function o$(e,t,r){Te=e,P4(e)}function P4(e,t,r){for(var n=(e.mode&1)!==0;Te!==null;){var a=Te,i=a.child;if(a.tag===22&&n){var s=a.memoizedState!==null||u0;if(!s){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Hr;l=u0;var u=Hr;if(u0=s,(Hr=c)&&!u)for(Te=a;Te!==null;)s=Te,c=s.child,s.tag===22&&s.memoizedState!==null?OS(a):c!==null?(c.return=s,Te=c):OS(a);for(;i!==null;)Te=i,P4(i),i=i.sibling;Te=a,u0=l,Hr=u}AS(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Te=i):AS(e)}}function AS(e){for(;Te!==null;){var t=Te;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Hr||xg(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Hr)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Ea(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&fS(t,i,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}fS(t,s,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&rf(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pe(163))}Hr||t.flags&512&&Zy(t)}catch(h){Ht(t,t.return,h)}}if(t===e){Te=null;break}if(r=t.sibling,r!==null){r.return=t.return,Te=r;break}Te=t.return}}function CS(e){for(;Te!==null;){var t=Te;if(t===e){Te=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Te=r;break}Te=t.return}}function OS(e){for(;Te!==null;){var t=Te;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{xg(4,t)}catch(c){Ht(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Ht(t,a,c)}}var i=t.return;try{Zy(t)}catch(c){Ht(t,i,c)}break;case 5:var s=t.return;try{Zy(t)}catch(c){Ht(t,s,c)}}}catch(c){Ht(t,t.return,c)}if(t===e){Te=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Te=l;break}Te=t.return}}var l$=Math.ceil,Cp=Xi.ReactCurrentDispatcher,i_=Xi.ReactCurrentOwner,fa=Xi.ReactCurrentBatchConfig,Je=0,jr=null,rr=null,Dr=0,Ln=0,tc=Js(0),dr=0,pf=null,rl=0,yg=0,s_=0,Ld=null,wn=null,o_=0,Hc=1/0,pi=null,Op=!1,r1=null,Ls=null,d0=!1,Ts=null,kp=0,$d=0,n1=null,np=-1,ap=0;function dn(){return Je&6?Yt():np!==-1?np:np=Yt()}function $s(e){return e.mode&1?Je&2&&Dr!==0?Dr&-Dr:HL.transition!==null?(ap===0&&(ap=gk()),ap):(e=dt,e!==0||(e=window.event,e=e===void 0?16:jk(e.type)),e):1}function $a(e,t,r,n){if(50<$d)throw $d=0,n1=null,Error(pe(185));gh(e,r,n),(!(Je&2)||e!==jr)&&(e===jr&&(!(Je&2)&&(yg|=r),dr===4&&hs(e,Dr)),Tn(e,n),r===1&&Je===0&&!(t.mode&1)&&(Hc=Yt()+500,mg&&Zs()))}function Tn(e,t){var r=e.callbackNode;HM(e,t);var n=pp(e,e===jr?Dr:0);if(n===0)r!==null&&Fj(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Fj(r),t===1)e.tag===0?WL(kS.bind(null,e)):zk(kS.bind(null,e)),BL(function(){!(Je&6)&&Zs()}),r=null;else{switch(vk(n)){case 1:r=Rw;break;case 4:r=pk;break;case 16:r=hp;break;case 536870912:r=mk;break;default:r=hp}r=B4(r,R4.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function R4(e,t){if(np=-1,ap=0,Je&6)throw Error(pe(327));var r=e.callbackNode;if(pc()&&e.callbackNode!==r)return null;var n=pp(e,e===jr?Dr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Pp(e,n);else{t=n;var a=Je;Je|=2;var i=D4();(jr!==e||Dr!==t)&&(pi=null,Hc=Yt()+500,Go(e,t));do try{d$();break}catch(l){I4(e,l)}while(!0);Vw(),Cp.current=i,Je=a,rr!==null?t=0:(jr=null,Dr=0,t=dr)}if(t!==0){if(t===2&&(a=Oy(e),a!==0&&(n=a,t=a1(e,a))),t===1)throw r=pf,Go(e,0),hs(e,n),Tn(e,Yt()),r;if(t===6)hs(e,n);else{if(a=e.current.alternate,!(n&30)&&!c$(a)&&(t=Pp(e,n),t===2&&(i=Oy(e),i!==0&&(n=i,t=a1(e,i))),t===1))throw r=pf,Go(e,0),hs(e,n),Tn(e,Yt()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(pe(345));case 2:xo(e,wn,pi);break;case 3:if(hs(e,n),(n&130023424)===n&&(t=o_+500-Yt(),10<t)){if(pp(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){dn(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=$y(xo.bind(null,e,wn,pi),t);break}xo(e,wn,pi);break;case 4:if(hs(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var s=31-La(n);i=1<<s,s=t[s],s>a&&(a=s),n&=~i}if(n=a,n=Yt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*l$(n/1960))-n,10<n){e.timeoutHandle=$y(xo.bind(null,e,wn,pi),n);break}xo(e,wn,pi);break;case 5:xo(e,wn,pi);break;default:throw Error(pe(329))}}}return Tn(e,Yt()),e.callbackNode===r?R4.bind(null,e):null}function a1(e,t){var r=Ld;return e.current.memoizedState.isDehydrated&&(Go(e,t).flags|=256),e=Pp(e,t),e!==2&&(t=wn,wn=r,t!==null&&i1(t)),e}function i1(e){wn===null?wn=e:wn.push.apply(wn,e)}function c$(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Ua(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hs(e,t){for(t&=~s_,t&=~yg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-La(t),n=1<<r;e[r]=-1,t&=~n}}function kS(e){if(Je&6)throw Error(pe(327));pc();var t=pp(e,0);if(!(t&1))return Tn(e,Yt()),null;var r=Pp(e,t);if(e.tag!==0&&r===2){var n=Oy(e);n!==0&&(t=n,r=a1(e,n))}if(r===1)throw r=pf,Go(e,0),hs(e,t),Tn(e,Yt()),r;if(r===6)throw Error(pe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xo(e,wn,pi),Tn(e,Yt()),null}function l_(e,t){var r=Je;Je|=1;try{return e(t)}finally{Je=r,Je===0&&(Hc=Yt()+500,mg&&Zs())}}function nl(e){Ts!==null&&Ts.tag===0&&!(Je&6)&&pc();var t=Je;Je|=1;var r=fa.transition,n=dt;try{if(fa.transition=null,dt=1,e)return e()}finally{dt=n,fa.transition=r,Je=t,!(Je&6)&&Zs()}}function c_(){Ln=tc.current,Tt(tc)}function Go(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,FL(r)),rr!==null)for(r=rr.return;r!==null;){var n=r;switch(qw(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&yp();break;case 3:qc(),Tt(En),Tt(Yr),Jw();break;case 5:Qw(n);break;case 4:qc();break;case 13:Tt(Lt);break;case 19:Tt(Lt);break;case 10:Kw(n.type._context);break;case 22:case 23:c_()}r=r.return}if(jr=e,rr=e=Fs(e.current,null),Dr=Ln=t,dr=0,pf=null,s_=yg=rl=0,wn=Ld=null,Oo!==null){for(t=0;t<Oo.length;t++)if(r=Oo[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var s=i.next;i.next=a,n.next=s}r.pending=n}Oo=null}return e}function I4(e,t){do{var r=rr;try{if(Vw(),ep.current=Ap,Tp){for(var n=Ft.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Tp=!1}if(tl=0,vr=cr=Ft=null,Dd=!1,df=0,i_.current=null,r===null||r.return===null){dr=1,pf=t,rr=null;break}e:{var i=e,s=r.return,l=r,c=t;if(t=Dr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=xS(s);if(p!==null){p.flags&=-257,yS(p,s,l,i,t),p.mode&1&&vS(i,u,t),t=p,c=u;var v=t.updateQueue;if(v===null){var g=new Set;g.add(c),t.updateQueue=g}else v.add(c);break e}else{if(!(t&1)){vS(i,u,t),u_();break e}c=Error(pe(426))}}else if(kt&&l.mode&1){var x=xS(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),yS(x,s,l,i,t),Ww(Wc(c,l));break e}}i=c=Wc(c,l),dr!==4&&(dr=2),Ld===null?Ld=[i]:Ld.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=v4(i,c,t);dS(i,b);break e;case 1:l=c;var m=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ls===null||!Ls.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=x4(i,l,t);dS(i,_);break e}}i=i.return}while(i!==null)}L4(r)}catch(w){t=w,rr===r&&r!==null&&(rr=r=r.return);continue}break}while(!0)}function D4(){var e=Cp.current;return Cp.current=Ap,e===null?Ap:e}function u_(){(dr===0||dr===3||dr===2)&&(dr=4),jr===null||!(rl&268435455)&&!(yg&268435455)||hs(jr,Dr)}function Pp(e,t){var r=Je;Je|=2;var n=D4();(jr!==e||Dr!==t)&&(pi=null,Go(e,t));do try{u$();break}catch(a){I4(e,a)}while(!0);if(Vw(),Je=r,Cp.current=n,rr!==null)throw Error(pe(261));return jr=null,Dr=0,dr}function u$(){for(;rr!==null;)M4(rr)}function d$(){for(;rr!==null&&!MM();)M4(rr)}function M4(e){var t=F4(e.alternate,e,Ln);e.memoizedProps=e.pendingProps,t===null?L4(e):rr=t,i_.current=null}function L4(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=a$(r,t),r!==null){r.flags&=32767,rr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{dr=6,rr=null;return}}else if(r=n$(r,t,Ln),r!==null){rr=r;return}if(t=t.sibling,t!==null){rr=t;return}rr=t=e}while(t!==null);dr===0&&(dr=5)}function xo(e,t,r){var n=dt,a=fa.transition;try{fa.transition=null,dt=1,f$(e,t,r,n)}finally{fa.transition=a,dt=n}return null}function f$(e,t,r,n){do pc();while(Ts!==null);if(Je&6)throw Error(pe(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(pe(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(VM(e,i),e===jr&&(rr=jr=null,Dr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||d0||(d0=!0,B4(hp,function(){return pc(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=fa.transition,fa.transition=null;var s=dt;dt=1;var l=Je;Je|=4,i_.current=null,s$(e,r),k4(r,e),PL(My),mp=!!Dy,My=Dy=null,e.current=r,o$(r),LM(),Je=l,dt=s,fa.transition=i}else e.current=r;if(d0&&(d0=!1,Ts=e,kp=a),i=e.pendingLanes,i===0&&(Ls=null),BM(r.stateNode),Tn(e,Yt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Op)throw Op=!1,e=r1,r1=null,e;return kp&1&&e.tag!==0&&pc(),i=e.pendingLanes,i&1?e===n1?$d++:($d=0,n1=e):$d=0,Zs(),null}function pc(){if(Ts!==null){var e=vk(kp),t=fa.transition,r=dt;try{if(fa.transition=null,dt=16>e?16:e,Ts===null)var n=!1;else{if(e=Ts,Ts=null,kp=0,Je&6)throw Error(pe(331));var a=Je;for(Je|=4,Te=e.current;Te!==null;){var i=Te,s=i.child;if(Te.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Te=u;Te!==null;){var d=Te;switch(d.tag){case 0:case 11:case 15:Md(8,d,i)}var f=d.child;if(f!==null)f.return=d,Te=f;else for(;Te!==null;){d=Te;var h=d.sibling,p=d.return;if(A4(d),d===u){Te=null;break}if(h!==null){h.return=p,Te=h;break}Te=p}}}var v=i.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}Te=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,Te=s;else e:for(;Te!==null;){if(i=Te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Md(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,Te=b;break e}Te=i.return}}var m=e.current;for(Te=m;Te!==null;){s=Te;var y=s.child;if(s.subtreeFlags&2064&&y!==null)y.return=s,Te=y;else e:for(s=m;Te!==null;){if(l=Te,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:xg(9,l)}}catch(w){Ht(l,l.return,w)}if(l===s){Te=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,Te=_;break e}Te=l.return}}if(Je=a,Zs(),ti&&typeof ti.onPostCommitFiberRoot=="function")try{ti.onPostCommitFiberRoot(ug,e)}catch{}n=!0}return n}finally{dt=r,fa.transition=t}}return!1}function PS(e,t,r){t=Wc(r,t),t=v4(e,t,1),e=Ms(e,t,1),t=dn(),e!==null&&(gh(e,1,t),Tn(e,t))}function Ht(e,t,r){if(e.tag===3)PS(e,e,r);else for(;t!==null;){if(t.tag===3){PS(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ls===null||!Ls.has(n))){e=Wc(r,e),e=x4(t,e,1),t=Ms(t,e,1),e=dn(),t!==null&&(gh(t,1,e),Tn(t,e));break}}t=t.return}}function h$(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=dn(),e.pingedLanes|=e.suspendedLanes&r,jr===e&&(Dr&r)===r&&(dr===4||dr===3&&(Dr&130023424)===Dr&&500>Yt()-o_?Go(e,0):s_|=r),Tn(e,t)}function $4(e,t){t===0&&(e.mode&1?(t=t0,t0<<=1,!(t0&130023424)&&(t0=4194304)):t=1);var r=dn();e=Li(e,t),e!==null&&(gh(e,t,r),Tn(e,r))}function p$(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),$4(e,r)}function m$(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(pe(314))}n!==null&&n.delete(t),$4(e,r)}var F4;F4=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||En.current)_n=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return _n=!1,r$(e,t,r);_n=!!(e.flags&131072)}else _n=!1,kt&&t.flags&1048576&&qk(t,_p,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;rp(e,t),e=t.pendingProps;var a=Bc(t,Yr.current);hc(t,r),a=e_(null,t,n,e,a,r);var i=t_();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nn(n)?(i=!0,bp(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Xw(t),a.updater=vg,t.stateNode=a,a._reactInternals=t,Hy(t,n,e,r),t=Gy(null,t,n,!0,i,r)):(t.tag=0,kt&&i&&zw(t),tn(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(rp(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=v$(n),e=Ea(n,e),a){case 0:t=Ky(null,t,n,e,r);break e;case 1:t=_S(null,t,n,e,r);break e;case 11:t=bS(null,t,n,e,r);break e;case 14:t=wS(null,t,n,Ea(n.type,e),r);break e}throw Error(pe(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ea(n,a),Ky(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ea(n,a),_S(e,t,n,a,r);case 3:e:{if(_4(t),e===null)throw Error(pe(387));n=t.pendingProps,i=t.memoizedState,a=i.element,Xk(e,t),Ep(t,n,null,r);var s=t.memoizedState;if(n=s.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Wc(Error(pe(423)),t),t=jS(e,t,n,r,a);break e}else if(n!==a){a=Wc(Error(pe(424)),t),t=jS(e,t,n,r,a);break e}else for(Hn=Ds(t.stateNode.containerInfo.firstChild),Vn=t,kt=!0,Pa=null,r=Kk(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Uc(),n===a){t=$i(e,t,r);break e}tn(e,t,n,r)}t=t.child}return t;case 5:return Yk(t),e===null&&zy(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,s=a.children,Ly(n,a)?s=null:i!==null&&Ly(n,i)&&(t.flags|=32),w4(e,t),tn(e,t,s,r),t.child;case 6:return e===null&&zy(t),null;case 13:return j4(e,t,r);case 4:return Yw(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=zc(t,null,n,r):tn(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ea(n,a),bS(e,t,n,a,r);case 7:return tn(e,t,t.pendingProps,r),t.child;case 8:return tn(e,t,t.pendingProps.children,r),t.child;case 12:return tn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,s=a.value,_t(jp,n._currentValue),n._currentValue=s,i!==null)if(Ua(i.value,s)){if(i.children===a.children&&!En.current){t=$i(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){s=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Ni(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),qy(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(pe(341));s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),qy(s,r,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}tn(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,hc(t,r),a=pa(a),n=n(a),t.flags|=1,tn(e,t,n,r),t.child;case 14:return n=t.type,a=Ea(n,t.pendingProps),a=Ea(n.type,a),wS(e,t,n,a,r);case 15:return y4(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ea(n,a),rp(e,t),t.tag=1,Nn(n)?(e=!0,bp(t)):e=!1,hc(t,r),g4(t,n,a),Hy(t,n,a,r),Gy(null,t,n,!0,e,r);case 19:return S4(e,t,r);case 22:return b4(e,t,r)}throw Error(pe(156,t.tag))};function B4(e,t){return hk(e,t)}function g$(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ua(e,t,r,n){return new g$(e,t,r,n)}function d_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function v$(e){if(typeof e=="function")return d_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ow)return 11;if(e===kw)return 14}return 2}function Fs(e,t){var r=e.alternate;return r===null?(r=ua(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ip(e,t,r,n,a,i){var s=2;if(n=e,typeof e=="function")d_(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Hl:return Xo(r.children,a,i,t);case Cw:s=8,a|=8;break;case my:return e=ua(12,r,t,a|2),e.elementType=my,e.lanes=i,e;case gy:return e=ua(13,r,t,a),e.elementType=gy,e.lanes=i,e;case vy:return e=ua(19,r,t,a),e.elementType=vy,e.lanes=i,e;case YO:return bg(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case GO:s=10;break e;case XO:s=9;break e;case Ow:s=11;break e;case kw:s=14;break e;case ls:s=16,n=null;break e}throw Error(pe(130,e==null?e:typeof e,""))}return t=ua(s,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Xo(e,t,r,n){return e=ua(7,e,n,t),e.lanes=r,e}function bg(e,t,r,n){return e=ua(22,e,n,t),e.elementType=YO,e.lanes=r,e.stateNode={isHidden:!1},e}function gx(e,t,r){return e=ua(6,e,null,t),e.lanes=r,e}function vx(e,t,r){return t=ua(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function x$(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qv(0),this.expirationTimes=Qv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qv(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function f_(e,t,r,n,a,i,s,l,c){return e=new x$(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ua(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xw(i),e}function y$(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wl,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function U4(e){if(!e)return Hs;e=e._reactInternals;e:{if(xl(e)!==e||e.tag!==1)throw Error(pe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(pe(171))}if(e.tag===1){var r=e.type;if(Nn(r))return Uk(e,r,t)}return t}function z4(e,t,r,n,a,i,s,l,c){return e=f_(r,n,!0,e,a,i,s,l,c),e.context=U4(null),r=e.current,n=dn(),a=$s(r),i=Ni(n,a),i.callback=t??null,Ms(r,i,a),e.current.lanes=a,gh(e,a,n),Tn(e,n),e}function wg(e,t,r,n){var a=t.current,i=dn(),s=$s(a);return r=U4(r),t.context===null?t.context=r:t.pendingContext=r,t=Ni(i,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ms(a,t,s),e!==null&&($a(e,a,s,i),Z0(e,a,s)),s}function Rp(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function RS(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function h_(e,t){RS(e,t),(e=e.alternate)&&RS(e,t)}function b$(){return null}var q4=typeof reportError=="function"?reportError:function(e){console.error(e)};function p_(e){this._internalRoot=e}_g.prototype.render=p_.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(pe(409));wg(e,t,null,null)};_g.prototype.unmount=p_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;nl(function(){wg(null,e,null,null)}),t[Mi]=null}};function _g(e){this._internalRoot=e}_g.prototype.unstable_scheduleHydration=function(e){if(e){var t=bk();e={blockedOn:null,target:e,priority:t};for(var r=0;r<fs.length&&t!==0&&t<fs[r].priority;r++);fs.splice(r,0,e),r===0&&_k(e)}};function m_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function jg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function IS(){}function w$(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=Rp(s);i.call(u)}}var s=z4(t,n,e,0,null,!1,!1,"",IS);return e._reactRootContainer=s,e[Mi]=s.current,sf(e.nodeType===8?e.parentNode:e),nl(),s}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=Rp(c);l.call(u)}}var c=f_(e,0,!1,null,null,!1,!1,"",IS);return e._reactRootContainer=c,e[Mi]=c.current,sf(e.nodeType===8?e.parentNode:e),nl(function(){wg(t,c,r,n)}),c}function Sg(e,t,r,n,a){var i=r._reactRootContainer;if(i){var s=i;if(typeof a=="function"){var l=a;a=function(){var c=Rp(s);l.call(c)}}wg(t,s,e,a)}else s=w$(r,t,e,a,n);return Rp(s)}xk=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=_d(t.pendingLanes);r!==0&&(Iw(t,r|1),Tn(t,Yt()),!(Je&6)&&(Hc=Yt()+500,Zs()))}break;case 13:nl(function(){var n=Li(e,1);if(n!==null){var a=dn();$a(n,e,1,a)}}),h_(e,1)}};Dw=function(e){if(e.tag===13){var t=Li(e,134217728);if(t!==null){var r=dn();$a(t,e,134217728,r)}h_(e,134217728)}};yk=function(e){if(e.tag===13){var t=$s(e),r=Li(e,t);if(r!==null){var n=dn();$a(r,e,t,n)}h_(e,t)}};bk=function(){return dt};wk=function(e,t){var r=dt;try{return dt=e,t()}finally{dt=r}};Ty=function(e,t,r){switch(t){case"input":if(by(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=pg(n);if(!a)throw Error(pe(90));JO(n),by(n,a)}}}break;case"textarea":ek(e,r);break;case"select":t=r.value,t!=null&&cc(e,!!r.multiple,t,!1)}};ok=l_;lk=nl;var _$={usingClientEntryPoint:!1,Events:[xh,Xl,pg,ik,sk,l_]},sd={findFiberByHostInstance:Co,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},j$={bundleType:sd.bundleType,version:sd.version,rendererPackageName:sd.rendererPackageName,rendererConfig:sd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=dk(e),e===null?null:e.stateNode},findFiberByHostInstance:sd.findFiberByHostInstance||b$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var f0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!f0.isDisabled&&f0.supportsFiber)try{ug=f0.inject(j$),ti=f0}catch{}}Yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_$;Yn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m_(t))throw Error(pe(200));return y$(e,t,null,r)};Yn.createRoot=function(e,t){if(!m_(e))throw Error(pe(299));var r=!1,n="",a=q4;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=f_(e,1,!1,null,null,r,!1,n,a),e[Mi]=t.current,sf(e.nodeType===8?e.parentNode:e),new p_(t)};Yn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(pe(188)):(e=Object.keys(e).join(","),Error(pe(268,e)));return e=dk(t),e=e===null?null:e.stateNode,e};Yn.flushSync=function(e){return nl(e)};Yn.hydrate=function(e,t,r){if(!jg(t))throw Error(pe(200));return Sg(null,e,t,!0,r)};Yn.hydrateRoot=function(e,t,r){if(!m_(e))throw Error(pe(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",s=q4;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=z4(t,null,e,1,r??null,a,!1,i,s),e[Mi]=t.current,sf(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new _g(t)};Yn.render=function(e,t,r){if(!jg(t))throw Error(pe(200));return Sg(null,e,t,!1,r)};Yn.unmountComponentAtNode=function(e){if(!jg(e))throw Error(pe(40));return e._reactRootContainer?(nl(function(){Sg(null,null,e,!1,function(){e._reactRootContainer=null,e[Mi]=null})}),!0):!1};Yn.unstable_batchedUpdates=l_;Yn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!jg(r))throw Error(pe(200));if(e==null||e._reactInternals===void 0)throw Error(pe(38));return Sg(e,t,r,!1,n)};Yn.version="18.3.1-next-f1338f8080-20240426";function W4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(W4)}catch(e){console.error(e)}}W4(),WO.exports=Yn;var S$=WO.exports,DS=S$;hy.createRoot=DS.createRoot,hy.hydrateRoot=DS.hydrateRoot;var Au=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},E$={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},vs,ww,wO,N$=(wO=class{constructor(){Pe(this,vs,E$);Pe(this,ww,!1)}setTimeoutProvider(e){Se(this,vs,e)}setTimeout(e,t){return B(this,vs).setTimeout(e,t)}clearTimeout(e){B(this,vs).clearTimeout(e)}setInterval(e,t){return B(this,vs).setInterval(e,t)}clearInterval(e){B(this,vs).clearInterval(e)}},vs=new WeakMap,ww=new WeakMap,wO),Po=new N$;function T$(e){setTimeout(e,0)}var al=typeof window>"u"||"Deno"in globalThis;function rn(){}function A$(e,t){return typeof e=="function"?e(t):e}function s1(e){return typeof e=="number"&&e>=0&&e!==1/0}function H4(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Bs(e,t){return typeof e=="function"?e(t):e}function sa(e,t){return typeof e=="function"?e(t):e}function MS(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:s,stale:l}=e;if(s){if(n){if(t.queryHash!==g_(s,t.options))return!1}else if(!mf(t.queryKey,s))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function LS(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(il(t.options.mutationKey)!==il(i))return!1}else if(!mf(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function g_(e,t){return((t==null?void 0:t.queryKeyHashFn)||il)(e)}function il(e){return JSON.stringify(e,(t,r)=>o1(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function mf(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>mf(e[r],t[r])):!1}var C$=Object.prototype.hasOwnProperty;function V4(e,t){if(e===t)return e;const r=$S(e)&&$S(t);if(!r&&!(o1(e)&&o1(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),s=i.length,l=r?new Array(s):{};let c=0;for(let u=0;u<s;u++){const d=r?u:i[u],f=e[d],h=t[d];if(f===h){l[d]=f,(r?u<a:C$.call(e,d))&&c++;continue}if(f===null||h===null||typeof f!="object"||typeof h!="object"){l[d]=h;continue}const p=V4(f,h);l[d]=p,p===f&&c++}return a===s&&c===a?e:l}function Ip(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function $S(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function o1(e){if(!FS(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!FS(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function FS(e){return Object.prototype.toString.call(e)==="[object Object]"}function O$(e){return new Promise(t=>{Po.setTimeout(t,e)})}function l1(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?V4(e,t):t}function k$(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function P$(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var v_=Symbol();function K4(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===v_?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function G4(e,t){return typeof e=="function"?e(...t):!!e}var Fo,xs,Tc,_O,R$=(_O=class extends Au{constructor(){super();Pe(this,Fo);Pe(this,xs);Pe(this,Tc);Se(this,Tc,t=>{if(!al&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){B(this,xs)||this.setEventListener(B(this,Tc))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,xs))==null||t.call(this),Se(this,xs,void 0))}setEventListener(t){var r;Se(this,Tc,t),(r=B(this,xs))==null||r.call(this),Se(this,xs,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){B(this,Fo)!==t&&(Se(this,Fo,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof B(this,Fo)=="boolean"?B(this,Fo):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Fo=new WeakMap,xs=new WeakMap,Tc=new WeakMap,_O),x_=new R$;function c1(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var I$=T$;function D$(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=I$;const i=l=>{t?e.push(l):a(()=>{r(l)})},s=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||s()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var ur=D$(),Ac,ys,Cc,jO,M$=(jO=class extends Au{constructor(){super();Pe(this,Ac,!0);Pe(this,ys);Pe(this,Cc);Se(this,Cc,t=>{if(!al&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){B(this,ys)||this.setEventListener(B(this,Cc))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,ys))==null||t.call(this),Se(this,ys,void 0))}setEventListener(t){var r;Se(this,Cc,t),(r=B(this,ys))==null||r.call(this),Se(this,ys,t(this.setOnline.bind(this)))}setOnline(t){B(this,Ac)!==t&&(Se(this,Ac,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return B(this,Ac)}},Ac=new WeakMap,ys=new WeakMap,Cc=new WeakMap,jO),Dp=new M$;function L$(e){return Math.min(1e3*2**e,3e4)}function X4(e){return(e??"online")==="online"?Dp.isOnline():!0}var u1=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Y4(e){let t=!1,r=0,n;const a=c1(),i=()=>a.status!=="pending",s=g=>{var x;if(!i()){const b=new u1(g);h(b),(x=e.onCancel)==null||x.call(e,b)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>x_.isFocused()&&(e.networkMode==="always"||Dp.isOnline())&&e.canRun(),d=()=>X4(e.networkMode)&&e.canRun(),f=g=>{i()||(n==null||n(),a.resolve(g))},h=g=>{i()||(n==null||n(),a.reject(g))},p=()=>new Promise(g=>{var x;n=b=>{(i()||u())&&g(b)},(x=e.onPause)==null||x.call(e)}).then(()=>{var g;n=void 0,i()||(g=e.onContinue)==null||g.call(e)}),v=()=>{if(i())return;let g;const x=r===0?e.initialPromise:void 0;try{g=x??e.fn()}catch(b){g=Promise.reject(b)}Promise.resolve(g).then(f).catch(b=>{var j;if(i())return;const m=e.retry??(al?0:3),y=e.retryDelay??L$,_=typeof y=="function"?y(r,b):y,w=m===!0||typeof m=="number"&&r<m||typeof m=="function"&&m(r,b);if(t||!w){h(b);return}r++,(j=e.onFail)==null||j.call(e,r,b),O$(_).then(()=>u()?void 0:p()).then(()=>{t?h(b):v()})})};return{promise:a,status:()=>a.status,cancel:s,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?v():p().then(v),a)}}var Bo,SO,Q4=(SO=class{constructor(){Pe(this,Bo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),s1(this.gcTime)&&Se(this,Bo,Po.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(al?1/0:5*60*1e3))}clearGcTimeout(){B(this,Bo)&&(Po.clearTimeout(B(this,Bo)),Se(this,Bo,void 0))}},Bo=new WeakMap,SO),Uo,Oc,aa,zo,mr,uh,qo,Ta,hi,EO,$$=(EO=class extends Q4{constructor(t){super();Pe(this,Ta);Pe(this,Uo);Pe(this,Oc);Pe(this,aa);Pe(this,zo);Pe(this,mr);Pe(this,uh);Pe(this,qo);Se(this,qo,!1),Se(this,uh,t.defaultOptions),this.setOptions(t.options),this.observers=[],Se(this,zo,t.client),Se(this,aa,B(this,zo).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Se(this,Uo,US(this.options)),this.state=t.state??B(this,Uo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=B(this,mr))==null?void 0:t.promise}setOptions(t){if(this.options={...B(this,uh),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=US(this.options);r.data!==void 0&&(this.setState(BS(r.data,r.dataUpdatedAt)),Se(this,Uo,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&B(this,aa).remove(this)}setData(t,r){const n=l1(this.state.data,t,this.options);return qe(this,Ta,hi).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){qe(this,Ta,hi).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=B(this,mr))==null?void 0:n.promise;return(a=B(this,mr))==null||a.cancel(t),r?r.then(rn).catch(rn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(B(this,Uo))}isActive(){return this.observers.some(t=>sa(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===v_||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Bs(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!H4(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=B(this,mr))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=B(this,mr))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),B(this,aa).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(B(this,mr)&&(B(this,qo)?B(this,mr).cancel({revert:!0}):B(this,mr).cancelRetry()),this.scheduleGc()),B(this,aa).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||qe(this,Ta,hi).call(this,{type:"invalidate"})}async fetch(t,r){var c,u,d,f,h,p,v,g,x,b,m,y;if(this.state.fetchStatus!=="idle"&&((c=B(this,mr))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(B(this,mr))return B(this,mr).continueRetry(),B(this,mr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const _=this.observers.find(w=>w.options.queryFn);_&&this.setOptions(_.options)}const n=new AbortController,a=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(Se(this,qo,!0),n.signal)})},i=()=>{const _=K4(this.options,r),j=(()=>{const S={client:B(this,zo),queryKey:this.queryKey,meta:this.meta};return a(S),S})();return Se(this,qo,!1),this.options.persister?this.options.persister(_,j,this):_(j)},l=(()=>{const _={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:B(this,zo),state:this.state,fetchFn:i};return a(_),_})();(u=this.options.behavior)==null||u.onFetch(l,this),Se(this,Oc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&qe(this,Ta,hi).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),Se(this,mr,Y4({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:_=>{_ instanceof u1&&_.revert&&this.setState({...B(this,Oc),fetchStatus:"idle"}),n.abort()},onFail:(_,w)=>{qe(this,Ta,hi).call(this,{type:"failed",failureCount:_,error:w})},onPause:()=>{qe(this,Ta,hi).call(this,{type:"pause"})},onContinue:()=>{qe(this,Ta,hi).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const _=await B(this,mr).start();if(_===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(_),(p=(h=B(this,aa).config).onSuccess)==null||p.call(h,_,this),(g=(v=B(this,aa).config).onSettled)==null||g.call(v,_,this.state.error,this),_}catch(_){if(_ instanceof u1){if(_.silent)return B(this,mr).promise;if(_.revert){if(this.state.data===void 0)throw _;return this.state.data}}throw qe(this,Ta,hi).call(this,{type:"error",error:_}),(b=(x=B(this,aa).config).onError)==null||b.call(x,_,this),(y=(m=B(this,aa).config).onSettled)==null||y.call(m,this.state.data,_,this),_}finally{this.scheduleGc()}}},Uo=new WeakMap,Oc=new WeakMap,aa=new WeakMap,zo=new WeakMap,mr=new WeakMap,uh=new WeakMap,qo=new WeakMap,Ta=new WeakSet,hi=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...J4(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...BS(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Se(this,Oc,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),ur.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),B(this,aa).notify({query:this,type:"updated",action:t})})},EO);function J4(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:X4(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function BS(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function US(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var xn,Ye,dh,Zr,Wo,kc,vi,bs,fh,Pc,Rc,Ho,Vo,ws,Ic,at,Sd,d1,f1,h1,p1,m1,g1,v1,Z4,NO,F$=(NO=class extends Au{constructor(t,r){super();Pe(this,at);Pe(this,xn);Pe(this,Ye);Pe(this,dh);Pe(this,Zr);Pe(this,Wo);Pe(this,kc);Pe(this,vi);Pe(this,bs);Pe(this,fh);Pe(this,Pc);Pe(this,Rc);Pe(this,Ho);Pe(this,Vo);Pe(this,ws);Pe(this,Ic,new Set);this.options=r,Se(this,xn,t),Se(this,bs,null),Se(this,vi,c1()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(B(this,Ye).addObserver(this),zS(B(this,Ye),this.options)?qe(this,at,Sd).call(this):this.updateResult(),qe(this,at,p1).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return x1(B(this,Ye),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return x1(B(this,Ye),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,qe(this,at,m1).call(this),qe(this,at,g1).call(this),B(this,Ye).removeObserver(this)}setOptions(t){const r=this.options,n=B(this,Ye);if(this.options=B(this,xn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof sa(this.options.enabled,B(this,Ye))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");qe(this,at,v1).call(this),B(this,Ye).setOptions(this.options),r._defaulted&&!Ip(this.options,r)&&B(this,xn).getQueryCache().notify({type:"observerOptionsUpdated",query:B(this,Ye),observer:this});const a=this.hasListeners();a&&qS(B(this,Ye),n,this.options,r)&&qe(this,at,Sd).call(this),this.updateResult(),a&&(B(this,Ye)!==n||sa(this.options.enabled,B(this,Ye))!==sa(r.enabled,B(this,Ye))||Bs(this.options.staleTime,B(this,Ye))!==Bs(r.staleTime,B(this,Ye)))&&qe(this,at,d1).call(this);const i=qe(this,at,f1).call(this);a&&(B(this,Ye)!==n||sa(this.options.enabled,B(this,Ye))!==sa(r.enabled,B(this,Ye))||i!==B(this,ws))&&qe(this,at,h1).call(this,i)}getOptimisticResult(t){const r=B(this,xn).getQueryCache().build(B(this,xn),t),n=this.createResult(r,t);return U$(this,n)&&(Se(this,Zr,n),Se(this,kc,this.options),Se(this,Wo,B(this,Ye).state)),n}getCurrentResult(){return B(this,Zr)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&B(this,vi).status==="pending"&&B(this,vi).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){B(this,Ic).add(t)}getCurrentQuery(){return B(this,Ye)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=B(this,xn).defaultQueryOptions(t),n=B(this,xn).getQueryCache().build(B(this,xn),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return qe(this,at,Sd).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),B(this,Zr)))}createResult(t,r){var N;const n=B(this,Ye),a=this.options,i=B(this,Zr),s=B(this,Wo),l=B(this,kc),u=t!==n?t.state:B(this,dh),{state:d}=t;let f={...d},h=!1,p;if(r._optimisticResults){const A=this.hasListeners(),O=!A&&zS(t,r),D=A&&qS(t,n,r,a);(O||D)&&(f={...f,...J4(d.data,t.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:v,errorUpdatedAt:g,status:x}=f;p=f.data;let b=!1;if(r.placeholderData!==void 0&&p===void 0&&x==="pending"){let A;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(A=i.data,b=!0):A=typeof r.placeholderData=="function"?r.placeholderData((N=B(this,Rc))==null?void 0:N.state.data,B(this,Rc)):r.placeholderData,A!==void 0&&(x="success",p=l1(i==null?void 0:i.data,A,r),h=!0)}if(r.select&&p!==void 0&&!b)if(i&&p===(s==null?void 0:s.data)&&r.select===B(this,fh))p=B(this,Pc);else try{Se(this,fh,r.select),p=r.select(p),p=l1(i==null?void 0:i.data,p,r),Se(this,Pc,p),Se(this,bs,null)}catch(A){Se(this,bs,A)}B(this,bs)&&(v=B(this,bs),p=B(this,Pc),g=Date.now(),x="error");const m=f.fetchStatus==="fetching",y=x==="pending",_=x==="error",w=y&&m,j=p!==void 0,E={status:x,fetchStatus:f.fetchStatus,isPending:y,isSuccess:x==="success",isError:_,isInitialLoading:w,isLoading:w,data:p,dataUpdatedAt:f.dataUpdatedAt,error:v,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:m,isRefetching:m&&!y,isLoadingError:_&&!j,isPaused:f.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:_&&j,isStale:y_(t,r),refetch:this.refetch,promise:B(this,vi),isEnabled:sa(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const A=k=>{E.status==="error"?k.reject(E.error):E.data!==void 0&&k.resolve(E.data)},O=()=>{const k=Se(this,vi,E.promise=c1());A(k)},D=B(this,vi);switch(D.status){case"pending":t.queryHash===n.queryHash&&A(D);break;case"fulfilled":(E.status==="error"||E.data!==D.value)&&O();break;case"rejected":(E.status!=="error"||E.error!==D.reason)&&O();break}}return E}updateResult(){const t=B(this,Zr),r=this.createResult(B(this,Ye),this.options);if(Se(this,Wo,B(this,Ye).state),Se(this,kc,this.options),B(this,Wo).data!==void 0&&Se(this,Rc,B(this,Ye)),Ip(r,t))return;Se(this,Zr,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!B(this,Ic).size)return!0;const s=new Set(i??B(this,Ic));return this.options.throwOnError&&s.add("error"),Object.keys(B(this,Zr)).some(l=>{const c=l;return B(this,Zr)[c]!==t[c]&&s.has(c)})};qe(this,at,Z4).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&qe(this,at,p1).call(this)}},xn=new WeakMap,Ye=new WeakMap,dh=new WeakMap,Zr=new WeakMap,Wo=new WeakMap,kc=new WeakMap,vi=new WeakMap,bs=new WeakMap,fh=new WeakMap,Pc=new WeakMap,Rc=new WeakMap,Ho=new WeakMap,Vo=new WeakMap,ws=new WeakMap,Ic=new WeakMap,at=new WeakSet,Sd=function(t){qe(this,at,v1).call(this);let r=B(this,Ye).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(rn)),r},d1=function(){qe(this,at,m1).call(this);const t=Bs(this.options.staleTime,B(this,Ye));if(al||B(this,Zr).isStale||!s1(t))return;const n=H4(B(this,Zr).dataUpdatedAt,t)+1;Se(this,Ho,Po.setTimeout(()=>{B(this,Zr).isStale||this.updateResult()},n))},f1=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(B(this,Ye)):this.options.refetchInterval)??!1},h1=function(t){qe(this,at,g1).call(this),Se(this,ws,t),!(al||sa(this.options.enabled,B(this,Ye))===!1||!s1(B(this,ws))||B(this,ws)===0)&&Se(this,Vo,Po.setInterval(()=>{(this.options.refetchIntervalInBackground||x_.isFocused())&&qe(this,at,Sd).call(this)},B(this,ws)))},p1=function(){qe(this,at,d1).call(this),qe(this,at,h1).call(this,qe(this,at,f1).call(this))},m1=function(){B(this,Ho)&&(Po.clearTimeout(B(this,Ho)),Se(this,Ho,void 0))},g1=function(){B(this,Vo)&&(Po.clearInterval(B(this,Vo)),Se(this,Vo,void 0))},v1=function(){const t=B(this,xn).getQueryCache().build(B(this,xn),this.options);if(t===B(this,Ye))return;const r=B(this,Ye);Se(this,Ye,t),Se(this,dh,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Z4=function(t){ur.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(B(this,Zr))}),B(this,xn).getQueryCache().notify({query:B(this,Ye),type:"observerResultsUpdated"})})},NO);function B$(e,t){return sa(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function zS(e,t){return B$(e,t)||e.state.data!==void 0&&x1(e,t,t.refetchOnMount)}function x1(e,t,r){if(sa(t.enabled,e)!==!1&&Bs(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&y_(e,t)}return!1}function qS(e,t,r,n){return(e!==t||sa(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&y_(e,r)}function y_(e,t){return sa(t.enabled,e)!==!1&&e.isStaleByTime(Bs(t.staleTime,e))}function U$(e,t){return!Ip(e.getCurrentResult(),t)}function WS(e){return{onFetch:(t,r)=>{var d,f,h,p,v;const n=t.options,a=(h=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],s=((v=t.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const x=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},b=K4(t.options,t.fetchOptions),m=async(y,_,w)=>{if(g)return Promise.reject();if(_==null&&y.pages.length)return Promise.resolve(y);const S=(()=>{const O={client:t.client,queryKey:t.queryKey,pageParam:_,direction:w?"backward":"forward",meta:t.options.meta};return x(O),O})(),E=await b(S),{maxPages:N}=t.options,A=w?P$:k$;return{pages:A(y.pages,E,N),pageParams:A(y.pageParams,_,N)}};if(a&&i.length){const y=a==="backward",_=y?z$:HS,w={pages:i,pageParams:s},j=_(n,w);l=await m(w,j,y)}else{const y=e??i.length;do{const _=c===0?s[0]??n.initialPageParam:HS(n,l);if(c>0&&_==null)break;l=await m(l,_),c++}while(c<y)}return l};t.options.persister?t.fetchFn=()=>{var g,x;return(x=(g=t.options).persister)==null?void 0:x.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function HS(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function z$(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var hh,Ya,en,Ko,Qa,os,TO,q$=(TO=class extends Q4{constructor(t){super();Pe(this,Qa);Pe(this,hh);Pe(this,Ya);Pe(this,en);Pe(this,Ko);Se(this,hh,t.client),this.mutationId=t.mutationId,Se(this,en,t.mutationCache),Se(this,Ya,[]),this.state=t.state||eP(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){B(this,Ya).includes(t)||(B(this,Ya).push(t),this.clearGcTimeout(),B(this,en).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Se(this,Ya,B(this,Ya).filter(r=>r!==t)),this.scheduleGc(),B(this,en).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){B(this,Ya).length||(this.state.status==="pending"?this.scheduleGc():B(this,en).remove(this))}continue(){var t;return((t=B(this,Ko))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,l,c,u,d,f,h,p,v,g,x,b,m,y,_,w,j,S,E,N;const r=()=>{qe(this,Qa,os).call(this,{type:"continue"})},n={client:B(this,hh),meta:this.options.meta,mutationKey:this.options.mutationKey};Se(this,Ko,Y4({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(A,O)=>{qe(this,Qa,os).call(this,{type:"failed",failureCount:A,error:O})},onPause:()=>{qe(this,Qa,os).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>B(this,en).canRun(this)}));const a=this.state.status==="pending",i=!B(this,Ko).canStart();try{if(a)r();else{qe(this,Qa,os).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(s=B(this,en).config).onMutate)==null?void 0:l.call(s,t,this,n));const O=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,n));O!==this.state.context&&qe(this,Qa,os).call(this,{type:"pending",context:O,variables:t,isPaused:i})}const A=await B(this,Ko).start();return await((f=(d=B(this,en).config).onSuccess)==null?void 0:f.call(d,A,t,this.state.context,this,n)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,A,t,this.state.context,n)),await((g=(v=B(this,en).config).onSettled)==null?void 0:g.call(v,A,null,this.state.variables,this.state.context,this,n)),await((b=(x=this.options).onSettled)==null?void 0:b.call(x,A,null,t,this.state.context,n)),qe(this,Qa,os).call(this,{type:"success",data:A}),A}catch(A){try{throw await((y=(m=B(this,en).config).onError)==null?void 0:y.call(m,A,t,this.state.context,this,n)),await((w=(_=this.options).onError)==null?void 0:w.call(_,A,t,this.state.context,n)),await((S=(j=B(this,en).config).onSettled)==null?void 0:S.call(j,void 0,A,this.state.variables,this.state.context,this,n)),await((N=(E=this.options).onSettled)==null?void 0:N.call(E,void 0,A,t,this.state.context,n)),A}finally{qe(this,Qa,os).call(this,{type:"error",error:A})}}finally{B(this,en).runNext(this)}}},hh=new WeakMap,Ya=new WeakMap,en=new WeakMap,Ko=new WeakMap,Qa=new WeakSet,os=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ur.batch(()=>{B(this,Ya).forEach(n=>{n.onMutationUpdate(t)}),B(this,en).notify({mutation:this,type:"updated",action:t})})},TO);function eP(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xi,Aa,ph,AO,W$=(AO=class extends Au{constructor(t={}){super();Pe(this,xi);Pe(this,Aa);Pe(this,ph);this.config=t,Se(this,xi,new Set),Se(this,Aa,new Map),Se(this,ph,0)}build(t,r,n){const a=new q$({client:t,mutationCache:this,mutationId:++Gh(this,ph)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){B(this,xi).add(t);const r=h0(t);if(typeof r=="string"){const n=B(this,Aa).get(r);n?n.push(t):B(this,Aa).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(B(this,xi).delete(t)){const r=h0(t);if(typeof r=="string"){const n=B(this,Aa).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&B(this,Aa).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=h0(t);if(typeof r=="string"){const n=B(this,Aa).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=h0(t);if(typeof r=="string"){const a=(n=B(this,Aa).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ur.batch(()=>{B(this,xi).forEach(t=>{this.notify({type:"removed",mutation:t})}),B(this,xi).clear(),B(this,Aa).clear()})}getAll(){return Array.from(B(this,xi))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>LS(r,n))}findAll(t={}){return this.getAll().filter(r=>LS(t,r))}notify(t){ur.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return ur.batch(()=>Promise.all(t.map(r=>r.continue().catch(rn))))}},xi=new WeakMap,Aa=new WeakMap,ph=new WeakMap,AO);function h0(e){var t;return(t=e.options.scope)==null?void 0:t.id}var yi,_s,yn,bi,Ii,sp,y1,CO,H$=(CO=class extends Au{constructor(r,n){super();Pe(this,Ii);Pe(this,yi);Pe(this,_s);Pe(this,yn);Pe(this,bi);Se(this,yi,r),this.setOptions(n),this.bindMethods(),qe(this,Ii,sp).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=B(this,yi).defaultMutationOptions(r),Ip(this.options,n)||B(this,yi).getMutationCache().notify({type:"observerOptionsUpdated",mutation:B(this,yn),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&il(n.mutationKey)!==il(this.options.mutationKey)?this.reset():((a=B(this,yn))==null?void 0:a.state.status)==="pending"&&B(this,yn).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=B(this,yn))==null||r.removeObserver(this)}onMutationUpdate(r){qe(this,Ii,sp).call(this),qe(this,Ii,y1).call(this,r)}getCurrentResult(){return B(this,_s)}reset(){var r;(r=B(this,yn))==null||r.removeObserver(this),Se(this,yn,void 0),qe(this,Ii,sp).call(this),qe(this,Ii,y1).call(this)}mutate(r,n){var a;return Se(this,bi,n),(a=B(this,yn))==null||a.removeObserver(this),Se(this,yn,B(this,yi).getMutationCache().build(B(this,yi),this.options)),B(this,yn).addObserver(this),B(this,yn).execute(r)}},yi=new WeakMap,_s=new WeakMap,yn=new WeakMap,bi=new WeakMap,Ii=new WeakSet,sp=function(){var n;const r=((n=B(this,yn))==null?void 0:n.state)??eP();Se(this,_s,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},y1=function(r){ur.batch(()=>{var n,a,i,s,l,c,u,d;if(B(this,bi)&&this.hasListeners()){const f=B(this,_s).variables,h=B(this,_s).context,p={client:B(this,yi),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(n=B(this,bi)).onSuccess)==null||a.call(n,r.data,f,h,p),(s=(i=B(this,bi)).onSettled)==null||s.call(i,r.data,null,f,h,p)):(r==null?void 0:r.type)==="error"&&((c=(l=B(this,bi)).onError)==null||c.call(l,r.error,f,h,p),(d=(u=B(this,bi)).onSettled)==null||d.call(u,void 0,r.error,f,h,p))}this.listeners.forEach(f=>{f(B(this,_s))})})},CO),Ja,OO,V$=(OO=class extends Au{constructor(t={}){super();Pe(this,Ja);this.config=t,Se(this,Ja,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??g_(a,r);let s=this.get(i);return s||(s=new $$({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(s)),s}add(t){B(this,Ja).has(t.queryHash)||(B(this,Ja).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=B(this,Ja).get(t.queryHash);r&&(t.destroy(),r===t&&B(this,Ja).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ur.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return B(this,Ja).get(t)}getAll(){return[...B(this,Ja).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>MS(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>MS(t,n)):r}notify(t){ur.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){ur.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ur.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ja=new WeakMap,OO),Wt,js,Ss,Dc,Mc,Es,Lc,$c,kO,K$=(kO=class{constructor(e={}){Pe(this,Wt);Pe(this,js);Pe(this,Ss);Pe(this,Dc);Pe(this,Mc);Pe(this,Es);Pe(this,Lc);Pe(this,$c);Se(this,Wt,e.queryCache||new V$),Se(this,js,e.mutationCache||new W$),Se(this,Ss,e.defaultOptions||{}),Se(this,Dc,new Map),Se(this,Mc,new Map),Se(this,Es,0)}mount(){Gh(this,Es)._++,B(this,Es)===1&&(Se(this,Lc,x_.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,Wt).onFocus())})),Se(this,$c,Dp.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,Wt).onOnline())})))}unmount(){var e,t;Gh(this,Es)._--,B(this,Es)===0&&((e=B(this,Lc))==null||e.call(this),Se(this,Lc,void 0),(t=B(this,$c))==null||t.call(this),Se(this,$c,void 0))}isFetching(e){return B(this,Wt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return B(this,js).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=B(this,Wt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=B(this,Wt).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Bs(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return B(this,Wt).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=B(this,Wt).get(n.queryHash),i=a==null?void 0:a.state.data,s=A$(t,i);if(s!==void 0)return B(this,Wt).build(this,n).setData(s,{...r,manual:!0})}setQueriesData(e,t,r){return ur.batch(()=>B(this,Wt).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=B(this,Wt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=B(this,Wt);ur.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=B(this,Wt);return ur.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=ur.batch(()=>B(this,Wt).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(rn).catch(rn)}invalidateQueries(e,t={}){return ur.batch(()=>(B(this,Wt).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=ur.batch(()=>B(this,Wt).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(rn)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(rn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=B(this,Wt).build(this,t);return r.isStaleByTime(Bs(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(rn).catch(rn)}fetchInfiniteQuery(e){return e.behavior=WS(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(rn).catch(rn)}ensureInfiniteQueryData(e){return e.behavior=WS(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Dp.isOnline()?B(this,js).resumePausedMutations():Promise.resolve()}getQueryCache(){return B(this,Wt)}getMutationCache(){return B(this,js)}getDefaultOptions(){return B(this,Ss)}setDefaultOptions(e){Se(this,Ss,e)}setQueryDefaults(e,t){B(this,Dc).set(il(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...B(this,Dc).values()],r={};return t.forEach(n=>{mf(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){B(this,Mc).set(il(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...B(this,Mc).values()],r={};return t.forEach(n=>{mf(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...B(this,Ss).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=g_(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===v_&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...B(this,Ss).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){B(this,Wt).clear(),B(this,js).clear()}},Wt=new WeakMap,js=new WeakMap,Ss=new WeakMap,Dc=new WeakMap,Mc=new WeakMap,Es=new WeakMap,Lc=new WeakMap,$c=new WeakMap,kO),tP=T.createContext(void 0),$e=e=>{const t=T.useContext(tP);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},G$=({client:e,children:t})=>(T.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(tP.Provider,{value:e,children:t})),rP=T.createContext(!1),X$=()=>T.useContext(rP);rP.Provider;function Y$(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Q$=T.createContext(Y$()),J$=()=>T.useContext(Q$),Z$=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},eF=e=>{T.useEffect(()=>{e.clearReset()},[e])},tF=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||G4(r,[e.error,n])),rF=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},nF=(e,t)=>e.isLoading&&e.isFetching&&!t,aF=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,VS=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function iF(e,t,r){var f,h,p,v,g;const n=X$(),a=J$(),i=$e(),s=i.defaultQueryOptions(e);(h=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||h.call(f,s),s._optimisticResults=n?"isRestoring":"optimistic",rF(s),Z$(s,a),eF(a);const l=!i.getQueryCache().get(s.queryHash),[c]=T.useState(()=>new t(i,s)),u=c.getOptimisticResult(s),d=!n&&e.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(x=>{const b=d?c.subscribe(ur.batchCalls(x)):rn;return c.updateResult(),b},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),T.useEffect(()=>{c.setOptions(s)},[s,c]),aF(s,u))throw VS(s,c,a);if(tF({result:u,errorResetBoundary:a,throwOnError:s.throwOnError,query:i.getQueryCache().get(s.queryHash),suspense:s.suspense}))throw u.error;if((v=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||v.call(p,s,u),s.experimental_prefetchInRender&&!al&&nF(u,n)){const x=l?VS(s,c,a):(g=i.getQueryCache().get(s.queryHash))==null?void 0:g.promise;x==null||x.catch(rn).finally(()=>{c.updateResult()})}return s.notifyOnChangeProps?u:c.trackResult(u)}function Ge(e,t){return iF(e,F$)}function Be(e,t){const r=$e(),[n]=T.useState(()=>new H$(r,e));T.useEffect(()=>{n.setOptions(e)},[n,e]);const a=T.useSyncExternalStore(T.useCallback(s=>n.subscribe(ur.batchCalls(s)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=T.useCallback((s,l)=>{n.mutate(s,l).catch(rn)},[n]);if(a.error&&G4(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const sF={},KS=e=>{let t;const r=new Set,n=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const p=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(v=>v(t,p))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(sF?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,c);return c},oF=e=>e?KS(e):KS;var nP={exports:{}},aP={},iP={exports:{}},sP={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vc=T;function lF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cF=typeof Object.is=="function"?Object.is:lF,uF=Vc.useState,dF=Vc.useEffect,fF=Vc.useLayoutEffect,hF=Vc.useDebugValue;function pF(e,t){var r=t(),n=uF({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return fF(function(){a.value=r,a.getSnapshot=t,xx(a)&&i({inst:a})},[e,r,t]),dF(function(){return xx(a)&&i({inst:a}),e(function(){xx(a)&&i({inst:a})})},[e]),hF(r),r}function xx(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!cF(e,r)}catch{return!0}}function mF(e,t){return t()}var gF=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?mF:pF;sP.useSyncExternalStore=Vc.useSyncExternalStore!==void 0?Vc.useSyncExternalStore:gF;iP.exports=sP;var vF=iP.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eg=T,xF=vF;function yF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bF=typeof Object.is=="function"?Object.is:yF,wF=xF.useSyncExternalStore,_F=Eg.useRef,jF=Eg.useEffect,SF=Eg.useMemo,EF=Eg.useDebugValue;aP.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=_F(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=SF(function(){function c(p){if(!u){if(u=!0,d=p,p=n(p),a!==void 0&&s.hasValue){var v=s.value;if(a(v,p))return f=v}return f=p}if(v=f,bF(d,p))return v;var g=n(p);return a!==void 0&&a(v,g)?(d=p,v):(d=p,f=g)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,r,n,a]);var l=wF(e,i[0],i[1]);return jF(function(){s.hasValue=!0,s.value=l},[l]),EF(l),l};nP.exports=aP;var NF=nP.exports;const TF=it(NF),oP={},{useDebugValue:AF}=z,{useSyncExternalStoreWithSelector:CF}=TF;let GS=!1;const OF=e=>e;function kF(e,t=OF,r){(oP?"production":void 0)!=="production"&&r&&!GS&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),GS=!0);const n=CF(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return AF(n),n}const XS=e=>{(oP?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?oF(e):e,r=(n,a)=>kF(t,n,a);return Object.assign(r,t),r},Ng=e=>e?XS(e):XS,PF=e=>{try{const t=window.AudioContext||window.webkitAudioContext;if(!t)return;const r=new t,n=r.createOscillator(),a=r.createGain();switch(n.connect(a),a.connect(r.destination),e){case"success":n.frequency.setValueAtTime(880,r.currentTime),n.frequency.setValueAtTime(1108.73,r.currentTime+.1),a.gain.setValueAtTime(.3,r.currentTime),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.3),n.start(r.currentTime),n.stop(r.currentTime+.3);break;case"error":n.frequency.setValueAtTime(220,r.currentTime),n.frequency.setValueAtTime(196,r.currentTime+.15),a.gain.setValueAtTime(.3,r.currentTime),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.4),n.start(r.currentTime),n.stop(r.currentTime+.4);break;case"warning":n.frequency.setValueAtTime(440,r.currentTime),a.gain.setValueAtTime(.2,r.currentTime),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.2),n.start(r.currentTime),n.stop(r.currentTime+.2);break;case"info":n.frequency.setValueAtTime(523.25,r.currentTime),a.gain.setValueAtTime(.15,r.currentTime),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.15),n.start(r.currentTime),n.stop(r.currentTime+.15);break}}catch{}},bh=Ng(e=>({toasts:[],addToast:t=>{const r=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,n={...t,id:r,duration:t.duration??5e3};PF(t.type),e(a=>({toasts:[...a.toasts,n]})),setTimeout(()=>{e(a=>({toasts:a.toasts.filter(i=>i.id!==r)}))},n.duration)},removeToast:t=>e(r=>({toasts:r.toasts.filter(n=>n.id!==t)})),clearAll:()=>e({toasts:[]})})),hn=(e,t,r)=>{bh.getState().addToast({type:"success",title:e,message:t,createdBy:r})},on=(e,t)=>{bh.getState().addToast({type:"error",title:e,message:t,duration:8e3})},RF=(e,t)=>{bh.getState().addToast({type:"warning",title:e,message:t})},IF={users:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"}),calendar:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"}),clipboard:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25z"}),megaphone:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 110-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 01-1.44-4.282m3.102.069a18.03 18.03 0 01-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 018.835 2.535M10.34 6.66a23.847 23.847 0 008.835-2.535m0 0A23.74 23.74 0 0018.795 3m.38 1.125a23.91 23.91 0 011.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 001.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 010 3.46"}),clock:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}),key:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"}),inbox:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 13.5h3.86a2.25 2.25 0 012.012 1.244l.256.512a2.25 2.25 0 002.013 1.244h3.218a2.25 2.25 0 002.013-1.244l.256-.512a2.25 2.25 0 012.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 00-2.15-1.588H6.911a2.25 2.25 0 00-2.15 1.588L2.35 13.177a2.25 2.25 0 00-.1.661z"}),sparkles:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"}),truck:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}),"check-circle":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),tag:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),eye:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),gauge:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6l4 2m6-2a10 10 0 11-20 0 10 10 0 0120 0z"}),image:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"}),home:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}),"chevron-down":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}),"chevron-right":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}),menu:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}),x:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}),search:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"}),bell:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"}),logout:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}),settings:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),building:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}),layers:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.429 9.75L2.25 12l4.179 2.25m0-4.5l5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-4.179 2.25m0 0L21.75 12l-4.179 2.25m0 0l4.179 2.25L12 21.75 2.25 16.5l4.179-2.25m11.142 0l-5.571 3-5.571-3"}),droplet:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3.75c-3.314 0-6 4.03-6 9a6 6 0 1012 0c0-4.97-2.686-9-6-9z"}),spray:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23.693L5 15.5m14.8-.2a2.251 2.251 0 01.45 2.574l-.788 1.576a2.25 2.25 0 01-2.45 1.186l-6.09-1.218a5.227 5.227 0 01-2.842-1.61l-.91-1.014a2.25 2.25 0 01-.218-2.692l1.55-2.58"}),brush:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}),info:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}),"alert-circle":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}),"alert-triangle":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"}),check:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}),"x-circle":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),trash:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}),activity:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"}),user:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"}),plus:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}),package:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"}),"file-text":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}),"bar-chart":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"}),edit:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}),send:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}),upload:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}),file:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})},H=({name:e,className:t="",size:r=24})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:r,height:r,className:t,children:IF[e]}),DF=({toast:e})=>{const{removeToast:t}=bh(),r={success:"bg-gradient-to-r from-success-500 to-success-600",error:"bg-gradient-to-r from-danger-500 to-danger-600",warning:"bg-gradient-to-r from-warning-500 to-warning-600",info:"bg-gradient-to-r from-brand-500 to-brand-600"},n={success:"check-circle",error:"alert-circle",warning:"alert-triangle",info:"info"};return o.jsxs("div",{className:`${r[e.type]} text-white rounded-xl shadow-2xl p-4 min-w-[320px] max-w-[420px] animate-slide-in-right flex items-start gap-3`,style:{animation:"slideInRight 0.3s ease-out"},children:[o.jsx("div",{className:"flex-shrink-0 mt-0.5",children:o.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:o.jsx(H,{name:n[e.type],size:22,className:"text-white"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"flex items-center gap-2 mb-1",children:o.jsx("h4",{className:"font-bold text-base",children:e.title})}),o.jsx("p",{className:"text-sm text-white/90 leading-relaxed",children:e.message}),e.createdBy&&o.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-white/80",children:[o.jsx(H,{name:"user",size:14}),o.jsxs("span",{children:["Registrado por: ",o.jsx("strong",{className:"text-white",children:e.createdBy})]})]})]}),o.jsx("button",{onClick:()=>t(e.id),className:"flex-shrink-0 p-1 hover:bg-white/20 rounded-lg transition-colors",children:o.jsx(H,{name:"x",size:18,className:"text-white/80"})})]})},MF=()=>{const{toasts:e}=bh();return e.length===0?null:o.jsxs(o.Fragment,{children:[o.jsx("style",{children:`
        @keyframes slideInRight {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
      `}),o.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3",children:e.map(t=>o.jsx(DF,{toast:t},t.id))})]})},LF=({children:e})=>{const[t]=T.useState(()=>new K$({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:6e4}}}));return o.jsxs(G$,{client:t,children:[e,o.jsx(MF,{})]})};/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gf(){return gf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gf.apply(this,arguments)}var As;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(As||(As={}));const YS="popstate";function $F(e){e===void 0&&(e={});function t(a,i){let{pathname:s="/",search:l="",hash:c=""}=yl(a.location.hash.substr(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),b1("",{pathname:s,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){let s=a.document.querySelector("base"),l="";if(s&&s.getAttribute("href")){let c=a.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof i=="string"?i:Mp(i))}function n(a,i){Tg(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return BF(t,r,n,e)}function Bt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Tg(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function FF(){return Math.random().toString(36).substr(2,8)}function QS(e,t){return{usr:e.state,key:e.key,idx:t}}function b1(e,t,r,n){return r===void 0&&(r=null),gf({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?yl(t):t,{state:r,key:t&&t.key||n||FF()})}function Mp(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function yl(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function BF(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,s=a.history,l=As.Pop,c=null,u=d();u==null&&(u=0,s.replaceState(gf({},s.state,{idx:u}),""));function d(){return(s.state||{idx:null}).idx}function f(){l=As.Pop;let x=d(),b=x==null?null:x-u;u=x,c&&c({action:l,location:g.location,delta:b})}function h(x,b){l=As.Push;let m=b1(g.location,x,b);r&&r(m,x),u=d()+1;let y=QS(m,u),_=g.createHref(m);try{s.pushState(y,"",_)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;a.location.assign(_)}i&&c&&c({action:l,location:g.location,delta:1})}function p(x,b){l=As.Replace;let m=b1(g.location,x,b);r&&r(m,x),u=d();let y=QS(m,u),_=g.createHref(m);s.replaceState(y,"",_),i&&c&&c({action:l,location:g.location,delta:0})}function v(x){let b=a.location.origin!=="null"?a.location.origin:a.location.href,m=typeof x=="string"?x:Mp(x);return m=m.replace(/ $/,"%20"),Bt(b,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,b)}let g={get action(){return l},get location(){return e(a,s)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(YS,f),c=x,()=>{a.removeEventListener(YS,f),c=null}},createHref(x){return t(a,x)},createURL:v,encodeLocation(x){let b=v(x);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:p,go(x){return s.go(x)}};return g}var JS;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(JS||(JS={}));function UF(e,t,r){return r===void 0&&(r="/"),zF(e,t,r)}function zF(e,t,r,n){let a=typeof t=="string"?yl(t):t,i=Kc(a.pathname||"/",r);if(i==null)return null;let s=lP(e);qF(s);let l=null;for(let c=0;l==null&&c<s.length;++c){let u=e7(i);l=JF(s[c],u)}return l}function lP(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,s,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};c.relativePath.startsWith("/")&&(Bt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Us([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Bt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),lP(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:YF(u,i.index),routesMeta:d})};return e.forEach((i,s)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,s);else for(let c of cP(i.path))a(i,s,c)}),t}function cP(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let s=cP(n.join("/")),l=[];return l.push(...s.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...s),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function qF(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:QF(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const WF=/^:[\w-]+$/,HF=3,VF=2,KF=1,GF=10,XF=-2,ZS=e=>e==="*";function YF(e,t){let r=e.split("/"),n=r.length;return r.some(ZS)&&(n+=XF),t&&(n+=VF),r.filter(a=>!ZS(a)).reduce((a,i)=>a+(WF.test(i)?HF:i===""?KF:GF),n)}function QF(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function JF(e,t,r){let{routesMeta:n}=e,a={},i="/",s=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=w1({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f)return null;Object.assign(a,f.params),s.push({params:a,pathname:Us([i,f.pathname]),pathnameBase:i7(Us([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=Us([i,f.pathnameBase]))}return s}function w1(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=ZF(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:p}=d;if(h==="*"){let g=l[f]||"";s=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const v=l[f];return p&&!v?u[h]=void 0:u[h]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:s,pattern:e}}function ZF(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Tg(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function e7(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Tg(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Kc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const t7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,r7=e=>t7.test(e);function n7(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?yl(e):e,i;if(r)if(r7(r))i=r;else{if(r.includes("//")){let s=r;r=r.replace(/\/\/+/g,"/"),Tg(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+r))}r.startsWith("/")?i=eE(r.substring(1),"/"):i=eE(r,t)}else i=t;return{pathname:i,search:s7(n),hash:o7(a)}}function eE(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function yx(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function a7(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function b_(e,t){let r=a7(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function w_(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=yl(e):(a=gf({},e),Bt(!a.pathname||!a.pathname.includes("?"),yx("?","pathname","search",a)),Bt(!a.pathname||!a.pathname.includes("#"),yx("#","pathname","hash",a)),Bt(!a.search||!a.search.includes("#"),yx("#","search","hash",a)));let i=e===""||a.pathname==="",s=i?"/":a.pathname,l;if(s==null)l=r;else{let f=t.length-1;if(!n&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=n7(a,l),u=s&&s!=="/"&&s.endsWith("/"),d=(i||s===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Us=e=>e.join("/").replace(/\/\/+/g,"/"),i7=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),s7=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,o7=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function l7(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const uP=["post","put","patch","delete"];new Set(uP);const c7=["get",...uP];new Set(c7);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vf(){return vf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vf.apply(this,arguments)}const Ag=T.createContext(null),dP=T.createContext(null),Yi=T.createContext(null),Cg=T.createContext(null),Qi=T.createContext({outlet:null,matches:[],isDataRoute:!1}),fP=T.createContext(null);function u7(e,t){let{relative:r}=t===void 0?{}:t;Cu()||Bt(!1);let{basename:n,navigator:a}=T.useContext(Yi),{hash:i,pathname:s,search:l}=Og(e,{relative:r}),c=s;return n!=="/"&&(c=s==="/"?n:Us([n,s])),a.createHref({pathname:c,search:l,hash:i})}function Cu(){return T.useContext(Cg)!=null}function bl(){return Cu()||Bt(!1),T.useContext(Cg).location}function hP(e){T.useContext(Yi).static||T.useLayoutEffect(e)}function __(){let{isDataRoute:e}=T.useContext(Qi);return e?E7():d7()}function d7(){Cu()||Bt(!1);let e=T.useContext(Ag),{basename:t,future:r,navigator:n}=T.useContext(Yi),{matches:a}=T.useContext(Qi),{pathname:i}=bl(),s=JSON.stringify(b_(a,r.v7_relativeSplatPath)),l=T.useRef(!1);return hP(()=>{l.current=!0}),T.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=w_(u,JSON.parse(s),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Us([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,s,i,e])}const f7=T.createContext(null);function h7(e){let t=T.useContext(Qi).outlet;return t&&T.createElement(f7.Provider,{value:e},t)}function Og(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=T.useContext(Yi),{matches:a}=T.useContext(Qi),{pathname:i}=bl(),s=JSON.stringify(b_(a,n.v7_relativeSplatPath));return T.useMemo(()=>w_(e,JSON.parse(s),i,r==="path"),[e,s,i,r])}function p7(e,t){return m7(e,t)}function m7(e,t,r,n){Cu()||Bt(!1);let{navigator:a}=T.useContext(Yi),{matches:i}=T.useContext(Qi),s=i[i.length-1],l=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let u=bl(),d;if(t){var f;let x=typeof t=="string"?yl(t):t;c==="/"||(f=x.pathname)!=null&&f.startsWith(c)||Bt(!1),d=x}else d=u;let h=d.pathname||"/",p=h;if(c!=="/"){let x=c.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(x.length).join("/")}let v=UF(e,{pathname:p}),g=b7(v&&v.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Us([c,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:Us([c,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,r,n);return t&&g?T.createElement(Cg.Provider,{value:{location:vf({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:As.Pop}},g):g}function g7(){let e=S7(),t=l7(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),r?T.createElement("pre",{style:a},r):null,null)}const v7=T.createElement(g7,null);class x7 extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?T.createElement(Qi.Provider,{value:this.props.routeContext},T.createElement(fP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function y7(e){let{routeContext:t,match:r,children:n}=e,a=T.useContext(Ag);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),T.createElement(Qi.Provider,{value:t},n)}function b7(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=s.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Bt(!1),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:p}=r,v=f.route.loader&&h[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||v){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,h)=>{let p,v=!1,g=null,x=null;r&&(p=l&&f.route.id?l[f.route.id]:void 0,g=f.route.errorElement||v7,c&&(u<0&&h===0?(N7("route-fallback"),v=!0,x=null):u===h&&(v=!0,x=f.route.hydrateFallbackElement||null)));let b=t.concat(s.slice(0,h+1)),m=()=>{let y;return p?y=g:v?y=x:f.route.Component?y=T.createElement(f.route.Component,null):f.route.element?y=f.route.element:y=d,T.createElement(y7,{match:f,routeContext:{outlet:d,matches:b,isDataRoute:r!=null},children:y})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?T.createElement(x7,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:m(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):m()},null)}var pP=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(pP||{}),mP=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(mP||{});function w7(e){let t=T.useContext(Ag);return t||Bt(!1),t}function _7(e){let t=T.useContext(dP);return t||Bt(!1),t}function j7(e){let t=T.useContext(Qi);return t||Bt(!1),t}function gP(e){let t=j7(),r=t.matches[t.matches.length-1];return r.route.id||Bt(!1),r.route.id}function S7(){var e;let t=T.useContext(fP),r=_7(),n=gP();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function E7(){let{router:e}=w7(pP.UseNavigateStable),t=gP(mP.UseNavigateStable),r=T.useRef(!1);return hP(()=>{r.current=!0}),T.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,vf({fromRouteId:t},i)))},[e,t])}const tE={};function N7(e,t,r){tE[e]||(tE[e]=!0)}function T7(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function vP(e){let{to:t,replace:r,state:n,relative:a}=e;Cu()||Bt(!1);let{future:i,static:s}=T.useContext(Yi),{matches:l}=T.useContext(Qi),{pathname:c}=bl(),u=__(),d=w_(t,b_(l,i.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(d);return T.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:a}),[u,f,a,r,n]),null}function xP(e){return h7(e.context)}function qt(e){Bt(!1)}function A7(e){let{basename:t="/",children:r=null,location:n,navigationType:a=As.Pop,navigator:i,static:s=!1,future:l}=e;Cu()&&Bt(!1);let c=t.replace(/^\/*/,"/"),u=T.useMemo(()=>({basename:c,navigator:i,static:s,future:vf({v7_relativeSplatPath:!1},l)}),[c,l,i,s]);typeof n=="string"&&(n=yl(n));let{pathname:d="/",search:f="",hash:h="",state:p=null,key:v="default"}=n,g=T.useMemo(()=>{let x=Kc(d,c);return x==null?null:{location:{pathname:x,search:f,hash:h,state:p,key:v},navigationType:a}},[c,d,f,h,p,v,a]);return g==null?null:T.createElement(Yi.Provider,{value:u},T.createElement(Cg.Provider,{children:r,value:g}))}function C7(e){let{children:t,location:r}=e;return p7(_1(t),r)}new Promise(()=>{});function _1(e,t){t===void 0&&(t=[]);let r=[];return T.Children.forEach(e,(n,a)=>{if(!T.isValidElement(n))return;let i=[...t,a];if(n.type===T.Fragment){r.push.apply(r,_1(n.props.children,i));return}n.type!==qt&&Bt(!1),!n.props.index||!n.props.children||Bt(!1);let s={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=_1(n.props.children,i)),r.push(s)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lp(){return Lp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lp.apply(this,arguments)}function yP(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function O7(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function k7(e,t){return e.button===0&&(!t||t==="_self")&&!O7(e)}const P7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],R7=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],I7="6";try{window.__reactRouterVersion=I7}catch{}const D7=T.createContext({isTransitioning:!1}),M7="startTransition",rE=hM[M7];function L7(e){let{basename:t,children:r,future:n,window:a}=e,i=T.useRef();i.current==null&&(i.current=$F({window:a,v5Compat:!0}));let s=i.current,[l,c]=T.useState({action:s.action,location:s.location}),{v7_startTransition:u}=n||{},d=T.useCallback(f=>{u&&rE?rE(()=>c(f)):c(f)},[c,u]);return T.useLayoutEffect(()=>s.listen(d),[s,d]),T.useEffect(()=>T7(n),[n]),T.createElement(A7,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:s,future:n})}const $7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",F7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,B7=T.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:s,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=yP(t,P7),{basename:p}=T.useContext(Yi),v,g=!1;if(typeof u=="string"&&F7.test(u)&&(v=u,$7))try{let y=new URL(window.location.href),_=u.startsWith("//")?new URL(y.protocol+u):new URL(u),w=Kc(_.pathname,p);_.origin===y.origin&&w!=null?u=w+_.search+_.hash:g=!0}catch{}let x=u7(u,{relative:a}),b=q7(u,{replace:s,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function m(y){n&&n(y),y.defaultPrevented||b(y)}return T.createElement("a",Lp({},h,{href:v||x,onClick:g||i?n:m,ref:r,target:c}))}),U7=T.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:a=!1,className:i="",end:s=!1,style:l,to:c,viewTransition:u,children:d}=t,f=yP(t,R7),h=Og(c,{relative:f.relative}),p=bl(),v=T.useContext(dP),{navigator:g,basename:x}=T.useContext(Yi),b=v!=null&&W7(h)&&u===!0,m=g.encodeLocation?g.encodeLocation(h).pathname:h.pathname,y=p.pathname,_=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;a||(y=y.toLowerCase(),_=_?_.toLowerCase():null,m=m.toLowerCase()),_&&x&&(_=Kc(_,x)||_);const w=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let j=y===m||!s&&y.startsWith(m)&&y.charAt(w)==="/",S=_!=null&&(_===m||!s&&_.startsWith(m)&&_.charAt(m.length)==="/"),E={isActive:j,isPending:S,isTransitioning:b},N=j?n:void 0,A;typeof i=="function"?A=i(E):A=[i,j?"active":null,S?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(E):l;return T.createElement(B7,Lp({},f,{"aria-current":N,className:A,ref:r,style:O,to:c,viewTransition:u}),typeof d=="function"?d(E):d)});var j1;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(j1||(j1={}));var nE;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(nE||(nE={}));function z7(e){let t=T.useContext(Ag);return t||Bt(!1),t}function q7(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:s,viewTransition:l}=t===void 0?{}:t,c=__(),u=bl(),d=Og(e,{relative:s});return T.useCallback(f=>{if(k7(f,r)){f.preventDefault();let h=n!==void 0?n:Mp(u)===Mp(d);c(e,{replace:h,state:a,preventScrollReset:i,relative:s,viewTransition:l})}},[u,c,d,n,a,r,e,i,s,l])}function W7(e,t){t===void 0&&(t={});let r=T.useContext(D7);r==null&&Bt(!1);let{basename:n}=z7(j1.useViewTransitionState),a=Og(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=Kc(r.currentLocation.pathname,n)||r.currentLocation.pathname,s=Kc(r.nextLocation.pathname,n)||r.nextLocation.pathname;return w1(a.pathname,s)!=null||w1(a.pathname,i)!=null}let p0=null;const H7=(e,t)=>({supervisorName:e,terminalCode:t,startedAt:new Date().toISOString()}),$p={startSession:async(e,t)=>(p0=H7(e,t),p0),getSession:async()=>p0,logout:async()=>{p0=null}},ht=Ng(e=>({session:null,setSession:t=>e({session:t}),clearSession:()=>e({session:null}),hydrateSession:async()=>{const t=await $p.getSession();e({session:t})}})),Vs={EL_ROBLE:"El Roble",LA_REINA:"La Reina",EL_SALTO:"El Salto",LO_ECHEVERS:"Lo Echevers",COLO_COLO:"Colo Colo"},j_=[{code:"ROBLE_Y_REINA",name:"El Roble + La Reina",members:["EL_ROBLE","LA_REINA"]}],Cn=Object.entries(Vs).map(([e,t])=>({value:e,label:t})),V7=j_.map(e=>({value:e.code,label:e.name})),bP={mode:"ALL"},Jn=e=>{if(e.mode==="ALL"||!e.value)return Object.keys(Vs);if(e.mode==="TERMINAL")return[e.value];const t=j_.find(r=>r.code===e.value);return t?t.members:Object.keys(Vs)},K7=(e,t)=>{const r=Jn(t);return e.filter(n=>r.includes(n.terminal))},Ve=e=>{if(Vs[e])return Vs[e];const t=j_.find(r=>r.code===e);return(t==null?void 0:t.name)??String(e)},Le=Ng(e=>({context:bP,setContext:t=>e({context:t})})),G7=()=>{const e=__(),t=ht(f=>f.setSession),r=ht(f=>f.session),n=Le(f=>f.setContext),[a,i]=T.useState(""),[s,l]=T.useState("EL_ROBLE"),[c,u]=T.useState(!1);T.useEffect(()=>{r&&e("/personal")},[r,e]);const d=async f=>{f.preventDefault(),u(!0);const h=await $p.startSession(a,s);t(h),n({mode:"TERMINAL",value:s}),e("/personal")};return o.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-dark-900 via-dark-800 to-brand-900",children:[o.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-brand-500/30 rounded-full blur-3xl animate-float"}),o.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent-500/20 rounded-full blur-3xl animate-float",style:{animationDelay:"1s"}}),o.jsx("div",{className:"absolute top-1/2 right-1/3 w-64 h-64 bg-brand-600/20 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),o.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})]}),o.jsxs("div",{className:"relative z-10 w-full max-w-lg px-4 animate-slide-up",children:[o.jsx("div",{className:"flex justify-center mb-8",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br from-brand-500 to-brand-700 shadow-brand-lg",children:o.jsx("span",{className:"text-3xl font-bold text-white",children:"A"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-2xl font-bold text-white",children:"Asiss"}),o.jsx("span",{className:"text-sm text-slate-400",children:"Dashboard de Logstica"})]})]})}),o.jsxs("div",{className:"card-glass p-8 md:p-10",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Bienvenido"}),o.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Ingresa tus datos para acceder al panel de control"})]}),o.jsxs("form",{onSubmit:d,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nombre del Supervisor"}),o.jsxs("div",{className:"relative",children:[o.jsx(H,{name:"users",size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"}),o.jsx("input",{type:"text",className:"input pl-10",value:a,onChange:f=>i(f.target.value),placeholder:"Ej: Ana Prez",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsxs("div",{className:"relative",children:[o.jsx(H,{name:"building",size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none z-10"}),o.jsx("select",{className:"input pl-10 appearance-none cursor-pointer",value:s,onChange:f=>l(f.target.value),style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2394a3b8'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px",paddingRight:"40px"},children:Cn.map(f=>o.jsx("option",{value:f.value,children:f.label},f.value))})]})]}),o.jsx("button",{type:"submit",disabled:c||!a,className:"btn btn-primary w-full py-3.5 text-base",children:c?o.jsxs("span",{className:"flex items-center justify-center gap-2",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Iniciando sesin..."]}):o.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Entrar al Dashboard",o.jsx(H,{name:"chevron-right",size:18})]})})]}),o.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200",children:o.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-slate-500",children:[o.jsx(H,{name:"check-circle",size:14,className:"text-success-500"}),o.jsx("span",{children:"Conexin segura  Datos protegidos"})]})})]}),o.jsx("p",{className:"mt-6 text-center text-xs text-slate-500",children:"Versin 2.0   2024 Asiss"})]})]})},aE=[{label:"Operacin",icon:"building",items:[{label:"Personal",to:"/personal",icon:"users"},{label:"Reuniones",to:"/reuniones",icon:"calendar"},{label:"Tareas",to:"/tareas",icon:"clipboard"},{label:"Informativos",to:"/informativos",icon:"megaphone"},{label:"Asistencia",to:"/asistencia",icon:"clock"},{label:"Credenciales",to:"/credenciales",icon:"key"},{label:"Solicitudes",to:"/solicitudes",icon:"inbox"}]},{label:"Aseo",icon:"sparkles",items:[{label:"Interior",to:"/aseo/interior",icon:"droplet"},{label:"Exterior",to:"/aseo/exterior",icon:"spray"},{label:"Rodillo",to:"/aseo/rodillo",icon:"brush"}]},{label:"Insumos",icon:"package",items:[{label:"Solicitudes",to:"/insumos",icon:"file-text"}]},{label:"MiniCheck",icon:"check-circle",items:[{label:"Extintor",to:"/minicheck/extintor",icon:"check-circle"},{label:"Tag",to:"/minicheck/tag",icon:"tag"},{label:"Mobileye",to:"/minicheck/mobileye",icon:"eye"},{label:"Odmetro",to:"/minicheck/odometro",icon:"gauge"},{label:"Publicidad",to:"/minicheck/publicidad",icon:"image"}]},{label:"Flota",icon:"truck",items:[{label:"Estado de Flota",to:"/estado-flota",icon:"truck"}]}],X7=({isOpen:e,onClose:t})=>{const r=bl(),[n,a]=T.useState(()=>{const l=aE.find(c=>c.items.some(u=>r.pathname.startsWith(u.to)));return l?[l.label]:["Operacin"]}),i=l=>{a(c=>c.includes(l)?c.filter(u=>u!==l):[...c,l])},s=l=>l.items.some(c=>r.pathname.startsWith(c.to));return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`${e?"fixed":"hidden"} inset-0 z-40 bg-black/60 backdrop-blur-sm md:hidden`,onClick:t}),o.jsx("aside",{className:`${e?"translate-x-0":"-translate-x-full"} fixed inset-y-0 left-0 z-50 w-72 transform transition-transform duration-300 ease-out md:translate-x-0`,children:o.jsxs("div",{className:"flex h-full flex-col bg-gradient-to-b from-dark-800 to-dark-900",children:[o.jsxs("div",{className:"flex items-center gap-3 px-6 py-5 border-b border-white/10",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-brand-500 to-brand-700 shadow-brand",children:o.jsx("span",{className:"text-lg font-bold text-white",children:"A"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-sm font-bold text-white",children:"Asiss"}),o.jsx("span",{className:"text-xs text-slate-400",children:"Dashboard Logstica"})]}),o.jsx("button",{onClick:t,className:"ml-auto rounded-lg p-1.5 text-slate-400 hover:bg-white/10 hover:text-white md:hidden",children:o.jsx(H,{name:"x",size:20})})]}),o.jsx("nav",{className:"flex-1 overflow-y-auto custom-scrollbar px-3 py-4 space-y-1",children:aE.map(l=>{const c=n.includes(l.label),u=s(l);return o.jsxs("div",{className:"mb-1",children:[o.jsxs("button",{onClick:()=>i(l.label),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 group ${u?"bg-white/10 text-white":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[o.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-lg transition-all duration-200 ${u?"bg-gradient-to-br from-brand-500 to-brand-600 text-white shadow-brand":"bg-white/5 text-slate-400 group-hover:bg-white/10 group-hover:text-slate-200"}`,children:o.jsx(H,{name:l.icon,size:18})}),o.jsx("span",{className:"flex-1 text-left text-sm font-semibold",children:l.label}),o.jsx(H,{name:"chevron-down",size:16,className:`transition-transform duration-200 ${c?"rotate-0":"-rotate-90"}`})]}),o.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-out ${c?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:o.jsx("div",{className:"mt-1 ml-4 pl-4 border-l border-white/10 space-y-0.5",children:l.items.map(d=>o.jsxs(U7,{to:d.to,onClick:t,className:({isActive:f})=>`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-all duration-200 ${f?"bg-brand-500/20 text-brand-300 font-medium":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[o.jsx(H,{name:d.icon,size:16}),o.jsx("span",{children:d.label})]},d.to))})})]},l.label)})}),o.jsx("div",{className:"border-t border-white/10 px-4 py-4",children:o.jsxs("div",{className:"flex items-center gap-3 px-2",children:[o.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-gradient-to-br from-accent-400 to-accent-600 text-white text-sm font-bold",children:"S"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-white truncate",children:"Supervisor"}),o.jsx("p",{className:"text-xs text-slate-400",children:"Terminal Activo"})]})]})})]})})]})},bx=new Set;let m0=[];const Y7=()=>crypto.randomUUID(),iE={subscribeNotifications:e=>(bx.add(e),()=>bx.delete(e)),publishNotification:e=>{const t={id:e.id??Y7(),createdAt:e.createdAt??new Date().toISOString(),...e};return m0=[t,...m0].slice(0,50),bx.forEach(r=>r(t)),t},getNotifications:()=>m0,clear:()=>{m0=[]}},Q7=Ng(e=>({items:[],last:void 0,addNotification:t=>e(r=>({items:[t,...r.items],last:t})),setAll:t=>e({items:t}),clear:()=>e({items:[],last:void 0})})),Sr=e=>(typeof e=="string"?new Date(e):e).toLocaleDateString("es-CL",{year:"numeric",month:"short",day:"numeric"}),J7=()=>{const{items:e,addNotification:t,setAll:r,last:n}=Q7(),[a,i]=T.useState(!1),[s,l]=T.useState(!1);return T.useEffect(()=>{r(iE.getNotifications());const c=iE.subscribeNotifications(u=>{t(u),l(!0),setTimeout(()=>l(!1),3500)});return()=>c()},[t,r]),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{type:"button",className:"btn btn-secondary h-10",onClick:()=>i(c=>!c),children:[o.jsxs("span",{className:"relative inline-flex items-center",children:[o.jsx("svg",{className:"h-5 w-5 text-slate-600",fill:"none",stroke:"currentColor",strokeWidth:"1.8",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14 17h5l-1.405-1.405A2.032 2.032 0 0117 14.158V11a5.002 5.002 0 00-3-4.584V6a2 2 0 10-4 0v.416A5.002 5.002 0 007 11v3.159c0 .538-.214 1.055-.595 1.436L5 17h5m4 0v1a3 3 0 11-6 0v-1m6 0H8"})}),e.length>0&&o.jsx("span",{className:"absolute -right-2 -top-2 flex h-5 min-w-[20px] items-center justify-center rounded-full bg-brand-500 px-1 text-xs font-bold text-white",children:e.length})]}),o.jsx("span",{className:"hidden text-sm font-semibold text-slate-700 sm:inline",children:"Alertas"})]}),a&&o.jsxs("div",{className:"absolute right-0 z-30 mt-2 w-80 rounded-lg border border-slate-200 bg-white shadow-lg",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[o.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Notificaciones"}),o.jsx("button",{className:"text-xs text-brand-600 hover:underline",onClick:()=>i(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"max-h-80 space-y-2 overflow-y-auto px-4 pb-4",children:[e.length===0&&o.jsx("p",{className:"text-sm text-slate-500",children:"Sin notificaciones por ahora."}),e.map(c=>o.jsxs("div",{className:"rounded-md border border-slate-100 bg-slate-50 p-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[o.jsx("span",{className:"font-semibold capitalize",children:c.level}),o.jsx("span",{children:Sr(c.createdAt)})]}),o.jsx("p",{className:"text-sm font-semibold text-slate-800",children:c.title}),o.jsx("p",{className:"text-sm text-slate-600",children:c.message})]},c.id))]})]}),s&&n&&o.jsxs("div",{className:"fixed bottom-4 right-4 z-40 max-w-sm rounded-md border border-slate-200 bg-white px-4 py-3 shadow-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-xs font-semibold uppercase text-brand-700",children:n.level}),o.jsx("button",{onClick:()=>l(!1),className:"text-xs text-slate-500 hover:text-slate-700",children:"Cerrar"})]}),o.jsx("p",{className:"text-sm font-semibold text-slate-900",children:n.title}),o.jsx("p",{className:"text-sm text-slate-700",children:n.message})]})]})},Z7=({onMenuToggle:e})=>{var i;const t=Le(s=>s.context),r=ht(s=>s.session),n=ht(s=>s.clearSession),a=()=>t.mode==="ALL"?"Todos los terminales":t.mode==="TERMINAL"&&t.value?Ve(t.value):"Terminal";return o.jsx("header",{className:"header px-4 md:px-6",children:o.jsxs("div",{className:"flex w-full items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:e,className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-100 text-slate-600 transition-all hover:bg-slate-200 md:hidden","aria-label":"Abrir men",children:o.jsx(H,{name:"menu",size:20})}),o.jsxs("div",{className:"hidden md:block",children:[o.jsx("h1",{className:"text-lg font-bold text-slate-900",children:"Dashboard"}),o.jsx("p",{className:"text-xs text-slate-500",children:a()})]})]}),o.jsx("div",{className:"hidden lg:flex flex-1 max-w-md mx-8",children:o.jsxs("div",{className:"relative w-full",children:[o.jsx(H,{name:"search",size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),o.jsx("input",{type:"search",placeholder:"Buscar en el dashboard...",className:"w-full rounded-xl border border-slate-200 bg-slate-50 py-2.5 pl-10 pr-4 text-sm transition-all placeholder:text-slate-400 focus:border-brand-500 focus:bg-white focus:outline-none focus:ring-2 focus:ring-brand-500/20"})]})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"md:hidden",children:o.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-brand-50 px-3 py-1.5",children:[o.jsx(H,{name:"building",size:14,className:"text-brand-600"}),o.jsx("span",{className:"text-xs font-semibold text-brand-700",children:t.mode==="ALL"?"Todos":(i=t.value)==null?void 0:i.split("_").pop()})]})}),o.jsx(J7,{}),r&&o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"hidden sm:flex items-center gap-3 rounded-xl border border-slate-200 bg-white px-3 py-2 shadow-sm",children:[o.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-brand-500 to-brand-600 text-white text-sm font-bold",children:r.supervisorName.charAt(0).toUpperCase()}),o.jsxs("div",{className:"hidden md:flex flex-col leading-tight",children:[o.jsx("span",{className:"text-sm font-semibold text-slate-900",children:r.supervisorName}),o.jsx("span",{className:"text-xs text-slate-500",children:Ve(r.terminalCode)})]}),o.jsx("button",{onClick:()=>{n(),$p.logout()},className:"ml-1 rounded-lg p-1.5 text-slate-400 transition-colors hover:bg-slate-100 hover:text-danger-600",title:"Cerrar sesin",children:o.jsx(H,{name:"logout",size:18})})]}),o.jsx("button",{onClick:()=>{n(),$p.logout()},className:"sm:hidden flex h-10 w-10 items-center justify-center rounded-xl bg-slate-100 text-slate-600 transition-all hover:bg-danger-100 hover:text-danger-600",title:"Cerrar sesin",children:o.jsx(H,{name:"logout",size:20})})]})]})]})})},eB=()=>{const[e,t]=T.useState(!1);return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-slate-100 to-slate-50",children:o.jsxs("div",{className:"flex",children:[o.jsx(X7,{isOpen:e,onClose:()=>t(!1)}),o.jsxs("div",{className:"flex min-h-screen flex-1 flex-col md:ml-72",children:[o.jsx(Z7,{onMenuToggle:()=>t(r=>!r)}),o.jsx("main",{className:"flex-1 px-4 pb-8 pt-6 md:px-8",children:o.jsx("div",{className:"animate-fade-in",children:o.jsx(xP,{})})}),o.jsx("footer",{className:"border-t border-slate-200 bg-white/50 px-4 py-4 md:px-8",children:o.jsxs("div",{className:"flex flex-col items-center justify-between gap-2 text-xs text-slate-500 sm:flex-row",children:[o.jsx("p",{children:" 2024 Asiss  Dashboard de Operaciones y Logstica"}),o.jsxs("p",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-success-500 animate-pulse"}),"Sistema operativo"]})]})})]})]})})},zt=({label:e="Cargando..."})=>o.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"h-12 w-12 rounded-full border-[3px] border-slate-200"}),o.jsx("div",{className:"absolute inset-0 h-12 w-12 rounded-full border-[3px] border-transparent border-t-brand-500 animate-spin"})]}),o.jsx("p",{className:"mt-4 text-sm font-medium text-slate-600",children:e})]}),Ct=({title:e,description:t,actions:r})=>o.jsxs("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 md:text-3xl",children:e}),t&&o.jsx("p",{className:"mt-1 text-sm text-slate-500",children:t})]}),r&&o.jsx("div",{className:"flex flex-wrap items-center gap-3",children:r})]}),tB=({value:e,onChange:t,label:r="Terminal actual"})=>{const n=e.mode==="ALL"?"ALL":e.mode==="GROUP"?`GROUP:${e.value}`:`TERMINAL:${e.value}`,a=i=>{const s=i.target.value;if(s==="ALL"){t(bP);return}if(s.startsWith("GROUP:")){const c=s.replace("GROUP:","");t({mode:"GROUP",value:c});return}const l=s.replace("TERMINAL:","");t({mode:"TERMINAL",value:l})};return o.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-600",children:[o.jsx("span",{className:"mb-1",children:r}),o.jsxs("select",{value:n,onChange:a,className:"input min-w-[200px]","aria-label":"Selector de terminal",children:[o.jsx("option",{value:"ALL",children:"Todos"}),o.jsx("optgroup",{label:"Terminales",children:Cn.map(i=>o.jsx("option",{value:`TERMINAL:${i.value}`,children:i.label},i.value))}),o.jsx("optgroup",{label:"Grupos",children:V7.map(i=>o.jsx("option",{value:`GROUP:${i.value}`,children:i.label},i.value))})]})]})},Pn=({terminalContext:e,onTerminalChange:t,children:r})=>o.jsx("div",{className:"card p-4 mb-6",children:o.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(tB,{value:e,onChange:t})}),r&&o.jsx("div",{className:"flex flex-wrap items-end gap-3 border-t border-slate-100 pt-4 lg:border-0 lg:pt-0",children:r})]})}),Er=({message:e="Ha ocurrido un error",onRetry:t})=>o.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border border-danger-200 bg-danger-50/50 px-6 py-12 text-center",children:[o.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-danger-100 mb-4",children:o.jsx("svg",{className:"h-7 w-7 text-danger-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})})}),o.jsx("p",{className:"text-sm font-semibold text-danger-700",children:e}),o.jsx("p",{className:"mt-1 text-xs text-danger-600 max-w-xs",children:"Por favor intenta de nuevo o contacta soporte si el problema persiste."}),t&&o.jsxs("button",{onClick:t,className:"mt-4 btn btn-secondary text-danger-700 border-danger-300 hover:bg-danger-100",children:[o.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reintentar"]})]}),hr=({onExportView:e,onExportAll:t})=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:e,className:"btn btn-secondary text-sm",children:[o.jsx(H,{name:"clipboard",size:16}),o.jsx("span",{className:"hidden sm:inline",children:"Exportar Vista"}),o.jsx("span",{className:"sm:hidden",children:"Vista"})]}),o.jsxs("button",{onClick:t,className:"btn btn-primary text-sm",children:[o.jsx(H,{name:"layers",size:16}),o.jsx("span",{className:"hidden sm:inline",children:"Exportar Todo"}),o.jsx("span",{className:"sm:hidden",children:"Todo"})]})]});/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Fp={};Fp.version="0.18.5";var wP=1252,rB=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],_P=function(e){rB.indexOf(e)!=-1&&(wP=e)};function nB(){_P(1252)}var xf=function(e){_P(e)};function aB(){xf(1200),nB()}var g0=function(t){return String.fromCharCode(t)},sE=function(t){return String.fromCharCode(t)},Bp,Cs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function yf(e){for(var t="",r=0,n=0,a=0,i=0,s=0,l=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),i=r>>2,n=e.charCodeAt(u++),s=(r&3)<<4|n>>4,a=e.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),t+=Cs.charAt(i)+Cs.charAt(s)+Cs.charAt(l)+Cs.charAt(c);return t}function Fi(e){var t="",r=0,n=0,a=0,i=0,s=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)i=Cs.indexOf(e.charAt(u++)),s=Cs.indexOf(e.charAt(u++)),r=i<<2|s>>4,t+=String.fromCharCode(r),l=Cs.indexOf(e.charAt(u++)),n=(s&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=Cs.indexOf(e.charAt(u++)),a=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var tt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Ji=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function sl(e){return tt?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function oE(e){return tt?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Ia=function(t){return tt?Ji(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function kg(e){if(typeof ArrayBuffer>"u")return Ia(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function wh(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function iB(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}var Rr=tt?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Ji(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function sB(e){for(var t=[],r=0,n=e.length+250,a=sl(e.length+255),i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s<128)a[r++]=s;else if(s<2048)a[r++]=192|s>>6&31,a[r++]=128|s&63;else if(s>=55296&&s<57344){s=(s&1023)+64;var l=e.charCodeAt(++i)&1023;a[r++]=240|s>>8&7,a[r++]=128|s>>2&63,a[r++]=128|l>>6&15|(s&3)<<4,a[r++]=128|l&63}else a[r++]=224|s>>12&15,a[r++]=128|s>>6&63,a[r++]=128|s&63;r>n&&(t.push(a.slice(0,r)),r=0,a=sl(65535),n=65530)}return t.push(a.slice(0,r)),Rr(t)}var Fd=/\u0000/g,v0=/[\u0001-\u0006]/g;function mc(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Ma(e,t){var r=""+e;return r.length>=t?r:Vt("0",t-r.length)+r}function S_(e,t){var r=""+e;return r.length>=t?r:Vt(" ",t-r.length)+r}function Up(e,t){var r=""+e;return r.length>=t?r:r+Vt(" ",t-r.length)}function oB(e,t){var r=""+Math.round(e);return r.length>=t?r:Vt("0",t-r.length)+r}function lB(e,t){var r=""+e;return r.length>=t?r:Vt("0",t-r.length)+r}var lE=Math.pow(2,32);function kl(e,t){if(e>lE||e<-lE)return oB(e,t);var r=Math.round(e);return lB(r,t)}function zp(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var cE=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],wx=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function cB(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Gt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},uE={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},uB={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function qp(e,t,r){for(var n=e<0?-1:1,a=e*n,i=0,s=1,l=0,c=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),l=f*s+i,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),i=s,s=l,c=u,u=d;if(d>t&&(u>t?(d=c,l=i):(d=u,l=s)),!r)return[0,n*l,d];var h=Math.floor(n*l/d);return[h,n*l-h*d,d]}function x0(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),i=0,s=[],l={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)s=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)s=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),s=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),n<60&&(i=(i+6)%7),r&&(i=vB(c,s))}return l.y=s[0],l.m=s[1],l.d=s[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=i,l}var jP=new Date(1899,11,31,0,0,0),dB=jP.getTime(),fB=new Date(1900,2,1,0,0,0);function SP(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=fB&&(r+=24*60*60*1e3),(r-(dB+(e.getTimezoneOffset()-jP.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function E_(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function hB(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function pB(e){var t=e<0?12:11,r=E_(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function mB(e){var t=E_(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function gB(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=pB(e):t===10?r=e.toFixed(10).substr(0,12):r=mB(e),E_(hB(r.toUpperCase()))}function S1(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):gB(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Ks(14,SP(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function vB(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function xB(e,t,r,n){var a="",i=0,s=0,l=r.y,c,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return wx[r.m-1][1];case 5:return wx[r.m-1][0];default:return wx[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return cE[r.q][0];default:return cE[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Ma(r.S,t.length):(n>=2?s=n===3?1e3:100:s=n===1?10:1,i=Math.round(s*(r.S+r.u)),i>=60*s&&(i=0),t==="s"?i===0?"0":""+i/s:(a=Ma(i,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?Ma(c,u):"";return d}function Os(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var EP=/%/g;function yB(e,t,r){var n=t.replace(EP,""),a=t.length-n.length;return Ti(e,n,r*Math.pow(10,2*a))+Vt("%",a)}function bB(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Ti(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function NP(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+NP(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),r.indexOf("e")===-1){var s=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+i):r+="E+"+(s-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+i)%a)+"."+d.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var TP=/# (\?+)( ?)\/( ?)(\d+)/;function wB(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),i=Math.floor(a/n),s=a-i*n,l=n;return r+(i===0?"":""+i)+" "+(s===0?Vt(" ",e[1].length+1+e[4].length):S_(s,e[1].length)+e[2]+"/"+e[3]+Ma(l,e[4].length))}function _B(e,t,r){return r+(t===0?"":""+t)+Vt(" ",e[1].length+2+e[4].length)}var AP=/^#*0*\.([0#]+)/,CP=/\).*[0#]/,OP=/\(###\) ###\\?-####/;function nn(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function dE(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function fE(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function jB(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function SB(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function na(e,t,r){if(e.charCodeAt(0)===40&&!t.match(CP)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?na("n",n,r):"("+na("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return bB(e,t,r);if(t.indexOf("%")!==-1)return yB(e,t,r);if(t.indexOf("E")!==-1)return NP(t,r);if(t.charCodeAt(0)===36)return"$"+na(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,s,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+kl(c,t.length);if(t.match(/^[#?]+$/))return a=kl(r,0),a==="0"&&(a=""),a.length>t.length?a:nn(t.substr(0,t.length-a.length))+a;if(i=t.match(TP))return wB(i,c,u);if(t.match(/^#+0+$/))return u+kl(c,t.length-t.indexOf("0"));if(i=t.match(AP))return a=dE(r,i[1].length).replace(/^([^\.]+)$/,"$1."+nn(i[1])).replace(/\.$/,"."+nn(i[1])).replace(/\.(\d*)$/,function(v,g){return"."+g+Vt("0",nn(i[1]).length-g.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+dE(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+Os(kl(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+na(e,t,-r):Os(""+(Math.floor(r)+jB(r,i[1].length)))+"."+Ma(fE(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return na(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=mc(na(e,t.replace(/[\\-]/g,""),r)),s=0,mc(mc(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return s<a.length?a.charAt(s++):v==="0"?"0":""}));if(t.match(OP))return a=na(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(i[4].length,7),l=qp(c,Math.pow(10,s)-1,!1),a=""+u,d=Ti("n",i[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+i[2]+"/"+i[3],d=Up(l[2],s),d.length<i[4].length&&(d=nn(i[4].substr(i[4].length-d.length))+d),a+=d,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(i[1].length,i[4].length),7),l=qp(c,Math.pow(10,s)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?S_(l[1],s)+i[2]+"/"+i[3]+Up(l[2],s):Vt(" ",2*s+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=kl(r,0),t.length<=a.length?a:nn(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),s=a.indexOf(".");var f=t.indexOf(".")-s,h=t.length-a.length-f;return nn(t.substr(0,f)+a+t.substr(t.length-h))}if(i=t.match(/^00,000\.([#0]*0)$/))return s=fE(r,i[1].length),r<0?"-"+na(e,t,-r):Os(SB(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Ma(0,3-v.length):"")+v})+"."+Ma(s,i[1].length);switch(t){case"###,##0.00":return na(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=Os(kl(c,0));return p!=="0"?u+p:"";case"###,###.00":return na(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return na(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function EB(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Ti(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function NB(e,t,r){var n=t.replace(EP,""),a=t.length-n.length;return Ti(e,n,r*Math.pow(10,2*a))+Vt("%",a)}function kP(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+kP(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),!r.match(/[Ee]/)){var s=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+i):r+="E+"+(s-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+i)%a)+"."+d.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Va(e,t,r){if(e.charCodeAt(0)===40&&!t.match(CP)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Va("n",n,r):"("+Va("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return EB(e,t,r);if(t.indexOf("%")!==-1)return NB(e,t,r);if(t.indexOf("E")!==-1)return kP(t,r);if(t.charCodeAt(0)===36)return"$"+Va(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,s,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Ma(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:nn(t.substr(0,t.length-a.length))+a;if(i=t.match(TP))return _B(i,c,u);if(t.match(/^#+0+$/))return u+Ma(c,t.length-t.indexOf("0"));if(i=t.match(AP))return a=(""+r).replace(/^([^\.]+)$/,"$1."+nn(i[1])).replace(/\.$/,"."+nn(i[1])),a=a.replace(/\.(\d*)$/,function(v,g){return"."+g+Vt("0",nn(i[1]).length-g.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+Os(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Va(e,t,-r):Os(""+r)+"."+Vt("0",i[1].length);if(i=t.match(/^#,#*,#0/))return Va(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=mc(Va(e,t.replace(/[\\-]/g,""),r)),s=0,mc(mc(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return s<a.length?a.charAt(s++):v==="0"?"0":""}));if(t.match(OP))return a=Va(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(i[4].length,7),l=qp(c,Math.pow(10,s)-1,!1),a=""+u,d=Ti("n",i[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+i[2]+"/"+i[3],d=Up(l[2],s),d.length<i[4].length&&(d=nn(i[4].substr(i[4].length-d.length))+d),a+=d,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(i[1].length,i[4].length),7),l=qp(c,Math.pow(10,s)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?S_(l[1],s)+i[2]+"/"+i[3]+Up(l[2],s):Vt(" ",2*s+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:nn(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),s=a.indexOf(".");var f=t.indexOf(".")-s,h=t.length-a.length-f;return nn(t.substr(0,f)+a+t.substr(t.length-h))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Va(e,t,-r):Os(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Ma(0,3-v.length):"")+v})+"."+Ma(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=Os(""+c);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return Va(e,t.slice(0,t.lastIndexOf(".")),r)+nn(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Ti(e,t,r){return(r|0)===r?Va(e,t,r):na(e,t,r)}function TB(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var PP=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function RP(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":zp(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(PP))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function AB(e,t,r,n){for(var a=[],i="",s=0,l="",c="t",u,d,f,h="H";s<e.length;)switch(l=e.charAt(s)){case"G":if(!zp(e,s))throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"G",v:"General"},s+=7;break;case'"':for(i="";(f=e.charCodeAt(++s))!==34&&s<e.length;)i+=String.fromCharCode(f);a[a.length]={t:"t",v:i},++s;break;case"\\":var p=e.charAt(++s),v=p==="("||p===")"?p:"t";a[a.length]={t:v,v:p},++s;break;case"_":a[a.length]={t:"t",v:" "},s+=2;break;case"@":a[a.length]={t:"T",v:t},++s;break;case"B":case"b":if(e.charAt(s+1)==="1"||e.charAt(s+1)==="2"){if(u==null&&(u=x0(t,r,e.charAt(s+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(s,2)},c=l,s+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=x0(t,r),u==null))return"";for(i=l;++s<e.length&&e.charAt(s).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=h),a[a.length]={t:l,v:i},c=l;break;case"A":case"a":case"":var g={t:l,v:l};if(u==null&&(u=x0(t,r)),e.substr(s,3).toUpperCase()==="A/P"?(u!=null&&(g.v=u.H>=12?"P":"A"),g.t="T",h="h",s+=3):e.substr(s,5).toUpperCase()==="AM/PM"?(u!=null&&(g.v=u.H>=12?"PM":"AM"),g.t="T",s+=5,h="h"):e.substr(s,5).toUpperCase()==="/"?(u!=null&&(g.v=u.H>=12?"":""),g.t="T",s+=5,h="h"):(g.t="t",++s),u==null&&g.t==="T")return"";a[a.length]=g,c=l;break;case"[":for(i=l;e.charAt(s++)!=="]"&&s<e.length;)i+=e.charAt(s);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(PP)){if(u==null&&(u=x0(t,r),u==null))return"";a[a.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",RP(e)||(a[a.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=l;++s<e.length&&(l=e.charAt(s))==="0";)i+=l;a[a.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++s<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(s))>-1;)i+=l;a[a.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++s)===l;)i+=l;a[a.length]={t:l,v:i},c=l;break;case"*":++s,(e.charAt(s)==" "||e.charAt(s)=="*")&&++s;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;s<e.length&&"0123456789".indexOf(e.charAt(++s))>-1;)i+=e.charAt(s);a[a.length]={t:"D",v:i};break;case" ":a[a.length]={t:l,v:l},++s;break;case"$":a[a.length]={t:"t",v:"$"},++s;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"t",v:l},++s;break}var x=0,b=0,m;for(s=a.length-1,c="t";s>=0;--s)switch(a[s].t){case"h":case"H":a[s].t=h,c="h",x<1&&(x=1);break;case"s":(m=a[s].v.match(/\.0+$/))&&(b=Math.max(b,m[0].length-1)),x<3&&(x=3);case"d":case"y":case"M":case"e":c=a[s].t;break;case"m":c==="s"&&(a[s].t="M",x<2&&(x=2));break;case"X":break;case"Z":x<1&&a[s].v.match(/[Hh]/)&&(x=1),x<2&&a[s].v.match(/[Mm]/)&&(x=2),x<3&&a[s].v.match(/[Ss]/)&&(x=3)}switch(x){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var y="",_;for(s=0;s<a.length;++s)switch(a[s].t){case"t":case"T":case" ":case"D":break;case"X":a[s].v="",a[s].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[s].v=xB(a[s].t.charCodeAt(0),a[s].v,u,b),a[s].t="t";break;case"n":case"?":for(_=s+1;a[_]!=null&&((l=a[_].t)==="?"||l==="D"||(l===" "||l==="t")&&a[_+1]!=null&&(a[_+1].t==="?"||a[_+1].t==="t"&&a[_+1].v==="/")||a[s].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[_].v==="/"||a[_].v===" "&&a[_+1]!=null&&a[_+1].t=="?"));)a[s].v+=a[_].v,a[_]={v:"",t:";"},++_;y+=a[s].v,s=_-1;break;case"G":a[s].t="t",a[s].v=S1(t,r);break}var w="",j,S;if(y.length>0){y.charCodeAt(0)==40?(j=t<0&&y.charCodeAt(0)===45?-t:t,S=Ti("n",y,j)):(j=t<0&&n>1?-t:t,S=Ti("n",y,j),j<0&&a[0]&&a[0].t=="t"&&(S=S.substr(1),a[0].v="-"+a[0].v)),_=S.length-1;var E=a.length;for(s=0;s<a.length;++s)if(a[s]!=null&&a[s].t!="t"&&a[s].v.indexOf(".")>-1){E=s;break}var N=a.length;if(E===a.length&&S.indexOf("E")===-1){for(s=a.length-1;s>=0;--s)a[s]==null||"n?".indexOf(a[s].t)===-1||(_>=a[s].v.length-1?(_-=a[s].v.length,a[s].v=S.substr(_+1,a[s].v.length)):_<0?a[s].v="":(a[s].v=S.substr(0,_+1),_=-1),a[s].t="t",N=s);_>=0&&N<a.length&&(a[N].v=S.substr(0,_+1)+a[N].v)}else if(E!==a.length&&S.indexOf("E")===-1){for(_=S.indexOf(".")-1,s=E;s>=0;--s)if(!(a[s]==null||"n?".indexOf(a[s].t)===-1)){for(d=a[s].v.indexOf(".")>-1&&s===E?a[s].v.indexOf(".")-1:a[s].v.length-1,w=a[s].v.substr(d+1);d>=0;--d)_>=0&&(a[s].v.charAt(d)==="0"||a[s].v.charAt(d)==="#")&&(w=S.charAt(_--)+w);a[s].v=w,a[s].t="t",N=s}for(_>=0&&N<a.length&&(a[N].v=S.substr(0,_+1)+a[N].v),_=S.indexOf(".")+1,s=E;s<a.length;++s)if(!(a[s]==null||"n?(".indexOf(a[s].t)===-1&&s!==E)){for(d=a[s].v.indexOf(".")>-1&&s===E?a[s].v.indexOf(".")+1:0,w=a[s].v.substr(0,d);d<a[s].v.length;++d)_<S.length&&(w+=S.charAt(_++));a[s].v=w,a[s].t="t",N=s}}}for(s=0;s<a.length;++s)a[s]!=null&&"n?".indexOf(a[s].t)>-1&&(j=n>1&&t<0&&s>0&&a[s-1].v==="-"?-t:t,a[s].v=Ti(a[s].t,a[s].v,j),a[s].t="t");var A="";for(s=0;s!==a.length;++s)a[s]!=null&&(A+=a[s].v);return A}var hE=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function pE(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function CB(e,t){var r=TB(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var s=r[0].match(hE),l=r[1].match(hE);return pE(t,s)?[n,r[0]]:pE(t,l)?[n,r[1]]:[n,r[s!=null&&l!=null?2:1]]}return[n,i]}function Ks(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Gt)[e],n==null&&(n=r.table&&r.table[uE[e]]||Gt[uE[e]]),n==null&&(n=uB[e]||"General");break}if(zp(n,0))return S1(t,r);t instanceof Date&&(t=SP(t,r.date1904));var a=CB(n,t);if(zp(a[1]))return S1(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return AB(a[1],t,r,a[0])}function IP(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Gt[r]==null){t<0&&(t=r);continue}if(Gt[r]==e){t=r;break}}t<0&&(t=391)}return Gt[t]=e,t}function Pg(e){for(var t=0;t!=392;++t)e[t]!==void 0&&IP(e[t],t)}function Rg(){Gt=cB()}var DP=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function OB(e){var t=typeof e=="number"?Gt[e]:e;return t=t.replace(DP,"(\\d+)"),new RegExp("^"+t+"$")}function kB(e,t,r){var n=-1,a=-1,i=-1,s=-1,l=-1,c=-1;(t.match(DP)||[]).forEach(function(f,h){var p=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=p;break;case"d":i=p;break;case"h":s=p;break;case"s":c=p;break;case"m":s>=0?l=p:a=p;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return s==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&i==-1?d:u+"T"+d}var PB=function(){var e={};e.version="1.2.0";function t(){for(var S=0,E=new Array(256),N=0;N!=256;++N)S=N,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,E[N]=S;return typeof Int32Array<"u"?new Int32Array(E):E}var r=t();function n(S){var E=0,N=0,A=0,O=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(A=0;A!=256;++A)O[A]=S[A];for(A=0;A!=256;++A)for(N=S[A],E=256+A;E<4096;E+=256)N=O[E]=N>>>8^S[N&255];var D=[];for(A=1;A!=16;++A)D[A-1]=typeof Int32Array<"u"?O.subarray(A*256,A*256+256):O.slice(A*256,A*256+256);return D}var a=n(r),i=a[0],s=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=a[6],h=a[7],p=a[8],v=a[9],g=a[10],x=a[11],b=a[12],m=a[13],y=a[14];function _(S,E){for(var N=E^-1,A=0,O=S.length;A<O;)N=N>>>8^r[(N^S.charCodeAt(A++))&255];return~N}function w(S,E){for(var N=E^-1,A=S.length-15,O=0;O<A;)N=y[S[O++]^N&255]^m[S[O++]^N>>8&255]^b[S[O++]^N>>16&255]^x[S[O++]^N>>>24]^g[S[O++]]^v[S[O++]]^p[S[O++]]^h[S[O++]]^f[S[O++]]^d[S[O++]]^u[S[O++]]^c[S[O++]]^l[S[O++]]^s[S[O++]]^i[S[O++]]^r[S[O++]];for(A+=15;O<A;)N=N>>>8^r[(N^S[O++])&255];return~N}function j(S,E){for(var N=E^-1,A=0,O=S.length,D=0,k=0;A<O;)D=S.charCodeAt(A++),D<128?N=N>>>8^r[(N^D)&255]:D<2048?(N=N>>>8^r[(N^(192|D>>6&31))&255],N=N>>>8^r[(N^(128|D&63))&255]):D>=55296&&D<57344?(D=(D&1023)+64,k=S.charCodeAt(A++)&1023,N=N>>>8^r[(N^(240|D>>8&7))&255],N=N>>>8^r[(N^(128|D>>2&63))&255],N=N>>>8^r[(N^(128|k>>6&15|(D&3)<<4))&255],N=N>>>8^r[(N^(128|k&63))&255]):(N=N>>>8^r[(N^(224|D>>12&15))&255],N=N>>>8^r[(N^(128|D>>6&63))&255],N=N>>>8^r[(N^(128|D&63))&255]);return~N}return e.table=r,e.bstr=_,e.buf=w,e.str=j,e}(),mt=function(){var t={};t.version="1.2.1";function r(C,M){for(var P=C.split("/"),I=M.split("/"),L=0,F=0,J=Math.min(P.length,I.length);L<J;++L){if(F=P[L].length-I[L].length)return F;if(P[L]!=I[L])return P[L]<I[L]?-1:1}return P.length-I.length}function n(C){if(C.charAt(C.length-1)=="/")return C.slice(0,-1).indexOf("/")===-1?C:n(C.slice(0,-1));var M=C.lastIndexOf("/");return M===-1?C:C.slice(0,M+1)}function a(C){if(C.charAt(C.length-1)=="/")return a(C.slice(0,-1));var M=C.lastIndexOf("/");return M===-1?C:C.slice(M+1)}function i(C,M){typeof M=="string"&&(M=new Date(M));var P=M.getHours();P=P<<6|M.getMinutes(),P=P<<5|M.getSeconds()>>>1,C.write_shift(2,P);var I=M.getFullYear()-1980;I=I<<4|M.getMonth()+1,I=I<<5|M.getDate(),C.write_shift(2,I)}function s(C){var M=C.read_shift(2)&65535,P=C.read_shift(2)&65535,I=new Date,L=P&31;P>>>=5;var F=P&15;P>>>=4,I.setMilliseconds(0),I.setFullYear(P+1980),I.setMonth(F-1),I.setDate(L);var J=M&31;M>>>=5;var ue=M&63;return M>>>=6,I.setHours(M),I.setMinutes(ue),I.setSeconds(J<<1),I}function l(C){Fn(C,0);for(var M={},P=0;C.l<=C.length-4;){var I=C.read_shift(2),L=C.read_shift(2),F=C.l+L,J={};switch(I){case 21589:P=C.read_shift(1),P&1&&(J.mtime=C.read_shift(4)),L>5&&(P&2&&(J.atime=C.read_shift(4)),P&4&&(J.ctime=C.read_shift(4))),J.mtime&&(J.mt=new Date(J.mtime*1e3));break}C.l=F,M[I]=J}return M}var c;function u(){return c||(c={})}function d(C,M){if(C[0]==80&&C[1]==75)return Ej(C,M);if((C[0]|32)==109&&(C[1]|32)==105)return H8(C,M);if(C.length<512)throw new Error("CFB file size "+C.length+" < 512");var P=3,I=512,L=0,F=0,J=0,ue=0,Q=0,Z=[],te=C.slice(0,512);Fn(te,0);var he=f(te);switch(P=he[0],P){case 3:I=512;break;case 4:I=4096;break;case 0:if(he[1]==0)return Ej(C,M);default:throw new Error("Major Version: Expected 3 or 4 saw "+P)}I!==512&&(te=C.slice(0,I),Fn(te,28));var _e=C.slice(0,I);h(te,P);var Ne=te.read_shift(4,"i");if(P===3&&Ne!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ne);te.l+=4,J=te.read_shift(4,"i"),te.l+=4,te.chk("00100000","Mini Stream Cutoff Size: "),ue=te.read_shift(4,"i"),L=te.read_shift(4,"i"),Q=te.read_shift(4,"i"),F=te.read_shift(4,"i");for(var ge=-1,Ee=0;Ee<109&&(ge=te.read_shift(4,"i"),!(ge<0));++Ee)Z[Ee]=ge;var Fe=p(C,I);x(Q,F,Fe,I,Z);var It=m(Fe,J,Z,I);It[J].name="!Directory",L>0&&ue!==k&&(It[ue].name="!MiniFAT"),It[Z[0]].name="!FAT",It.fat_addrs=Z,It.ssz=I;var Dt={},Ur=[],Yu=[],Qu=[];y(J,It,Fe,Ur,L,Dt,Yu,ue),v(Yu,Qu,Ur),Ur.shift();var Ju={FileIndex:Yu,FullPaths:Qu};return M&&M.raw&&(Ju.raw={header:_e,sectors:Fe}),Ju}function f(C){if(C[C.l]==80&&C[C.l+1]==75)return[0,0];C.chk(V,"Header Signature: "),C.l+=16;var M=C.read_shift(2,"u");return[C.read_shift(2,"u"),M]}function h(C,M){var P=9;switch(C.l+=2,P=C.read_shift(2)){case 9:if(M!=3)throw new Error("Sector Shift: Expected 9 saw "+P);break;case 12:if(M!=4)throw new Error("Sector Shift: Expected 12 saw "+P);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+P)}C.chk("0600","Mini Sector Shift: "),C.chk("000000000000","Reserved: ")}function p(C,M){for(var P=Math.ceil(C.length/M)-1,I=[],L=1;L<P;++L)I[L-1]=C.slice(L*M,(L+1)*M);return I[P-1]=C.slice(P*M),I}function v(C,M,P){for(var I=0,L=0,F=0,J=0,ue=0,Q=P.length,Z=[],te=[];I<Q;++I)Z[I]=te[I]=I,M[I]=P[I];for(;ue<te.length;++ue)I=te[ue],L=C[I].L,F=C[I].R,J=C[I].C,Z[I]===I&&(L!==-1&&Z[L]!==L&&(Z[I]=Z[L]),F!==-1&&Z[F]!==F&&(Z[I]=Z[F])),J!==-1&&(Z[J]=I),L!==-1&&I!=Z[I]&&(Z[L]=Z[I],te.lastIndexOf(L)<ue&&te.push(L)),F!==-1&&I!=Z[I]&&(Z[F]=Z[I],te.lastIndexOf(F)<ue&&te.push(F));for(I=1;I<Q;++I)Z[I]===I&&(F!==-1&&Z[F]!==F?Z[I]=Z[F]:L!==-1&&Z[L]!==L&&(Z[I]=Z[L]));for(I=1;I<Q;++I)if(C[I].type!==0){if(ue=I,ue!=Z[ue])do ue=Z[ue],M[I]=M[ue]+"/"+M[I];while(ue!==0&&Z[ue]!==-1&&ue!=Z[ue]);Z[I]=-1}for(M[0]+="/",I=1;I<Q;++I)C[I].type!==2&&(M[I]+="/")}function g(C,M,P){for(var I=C.start,L=C.size,F=[],J=I;P&&L>0&&J>=0;)F.push(M.slice(J*D,J*D+D)),L-=D,J=Eo(P,J*4);return F.length===0?oe(0):Rr(F).slice(0,C.size)}function x(C,M,P,I,L){var F=k;if(C===k){if(M!==0)throw new Error("DIFAT chain shorter than expected")}else if(C!==-1){var J=P[C],ue=(I>>>2)-1;if(!J)return;for(var Q=0;Q<ue&&(F=Eo(J,Q*4))!==k;++Q)L.push(F);x(Eo(J,I-4),M-1,P,I,L)}}function b(C,M,P,I,L){var F=[],J=[];L||(L=[]);var ue=I-1,Q=0,Z=0;for(Q=M;Q>=0;){L[Q]=!0,F[F.length]=Q,J.push(C[Q]);var te=P[Math.floor(Q*4/I)];if(Z=Q*4&ue,I<4+Z)throw new Error("FAT boundary crossed: "+Q+" 4 "+I);if(!C[te])break;Q=Eo(C[te],Z)}return{nodes:F,data:_E([J])}}function m(C,M,P,I){var L=C.length,F=[],J=[],ue=[],Q=[],Z=I-1,te=0,he=0,_e=0,Ne=0;for(te=0;te<L;++te)if(ue=[],_e=te+M,_e>=L&&(_e-=L),!J[_e]){Q=[];var ge=[];for(he=_e;he>=0;){ge[he]=!0,J[he]=!0,ue[ue.length]=he,Q.push(C[he]);var Ee=P[Math.floor(he*4/I)];if(Ne=he*4&Z,I<4+Ne)throw new Error("FAT boundary crossed: "+he+" 4 "+I);if(!C[Ee]||(he=Eo(C[Ee],Ne),ge[he]))break}F[_e]={nodes:ue,data:_E([Q])}}return F}function y(C,M,P,I,L,F,J,ue){for(var Q=0,Z=I.length?2:0,te=M[C].data,he=0,_e=0,Ne;he<te.length;he+=128){var ge=te.slice(he,he+128);Fn(ge,64),_e=ge.read_shift(2),Ne=O_(ge,0,_e-Z),I.push(Ne);var Ee={name:Ne,type:ge.read_shift(1),color:ge.read_shift(1),L:ge.read_shift(4,"i"),R:ge.read_shift(4,"i"),C:ge.read_shift(4,"i"),clsid:ge.read_shift(16),state:ge.read_shift(4,"i"),start:0,size:0},Fe=ge.read_shift(2)+ge.read_shift(2)+ge.read_shift(2)+ge.read_shift(2);Fe!==0&&(Ee.ct=_(ge,ge.l-8));var It=ge.read_shift(2)+ge.read_shift(2)+ge.read_shift(2)+ge.read_shift(2);It!==0&&(Ee.mt=_(ge,ge.l-8)),Ee.start=ge.read_shift(4,"i"),Ee.size=ge.read_shift(4,"i"),Ee.size<0&&Ee.start<0&&(Ee.size=Ee.type=0,Ee.start=k,Ee.name=""),Ee.type===5?(Q=Ee.start,L>0&&Q!==k&&(M[Q].name="!StreamData")):Ee.size>=4096?(Ee.storage="fat",M[Ee.start]===void 0&&(M[Ee.start]=b(P,Ee.start,M.fat_addrs,M.ssz)),M[Ee.start].name=Ee.name,Ee.content=M[Ee.start].data.slice(0,Ee.size)):(Ee.storage="minifat",Ee.size<0?Ee.size=0:Q!==k&&Ee.start!==k&&M[Q]&&(Ee.content=g(Ee,M[Q].data,(M[ue]||{}).data))),Ee.content&&Fn(Ee.content,0),F[Ne]=Ee,J.push(Ee)}}function _(C,M){return new Date((Un(C,M+4)/1e7*Math.pow(2,32)+Un(C,M)/1e7-11644473600)*1e3)}function w(C,M){return u(),d(c.readFileSync(C),M)}function j(C,M){var P=M&&M.type;switch(P||tt&&Buffer.isBuffer(C)&&(P="buffer"),P||"base64"){case"file":return w(C,M);case"base64":return d(Ia(Fi(C)),M);case"binary":return d(Ia(C),M)}return d(C,M)}function S(C,M){var P=M||{},I=P.root||"Root Entry";if(C.FullPaths||(C.FullPaths=[]),C.FileIndex||(C.FileIndex=[]),C.FullPaths.length!==C.FileIndex.length)throw new Error("inconsistent CFB structure");C.FullPaths.length===0&&(C.FullPaths[0]=I+"/",C.FileIndex[0]={name:I,type:5}),P.CLSID&&(C.FileIndex[0].clsid=P.CLSID),E(C)}function E(C){var M="Sh33tJ5";if(!mt.find(C,"/"+M)){var P=oe(4);P[0]=55,P[1]=P[3]=50,P[2]=54,C.FileIndex.push({name:M,type:2,content:P,size:4,L:69,R:69,C:69}),C.FullPaths.push(C.FullPaths[0]+M),N(C)}}function N(C,M){S(C);for(var P=!1,I=!1,L=C.FullPaths.length-1;L>=0;--L){var F=C.FileIndex[L];switch(F.type){case 0:I?P=!0:(C.FileIndex.pop(),C.FullPaths.pop());break;case 1:case 2:case 5:I=!0,isNaN(F.R*F.L*F.C)&&(P=!0),F.R>-1&&F.L>-1&&F.R==F.L&&(P=!0);break;default:P=!0;break}}if(!(!P&&!M)){var J=new Date(1987,1,19),ue=0,Q=Object.create?Object.create(null):{},Z=[];for(L=0;L<C.FullPaths.length;++L)Q[C.FullPaths[L]]=!0,C.FileIndex[L].type!==0&&Z.push([C.FullPaths[L],C.FileIndex[L]]);for(L=0;L<Z.length;++L){var te=n(Z[L][0]);I=Q[te],I||(Z.push([te,{name:a(te).replace("/",""),type:1,clsid:ie,ct:J,mt:J,content:null}]),Q[te]=!0)}for(Z.sort(function(Ne,ge){return r(Ne[0],ge[0])}),C.FullPaths=[],C.FileIndex=[],L=0;L<Z.length;++L)C.FullPaths[L]=Z[L][0],C.FileIndex[L]=Z[L][1];for(L=0;L<Z.length;++L){var he=C.FileIndex[L],_e=C.FullPaths[L];if(he.name=a(_e).replace("/",""),he.L=he.R=he.C=-(he.color=1),he.size=he.content?he.content.length:0,he.start=0,he.clsid=he.clsid||ie,L===0)he.C=Z.length>1?1:-1,he.size=0,he.type=5;else if(_e.slice(-1)=="/"){for(ue=L+1;ue<Z.length&&n(C.FullPaths[ue])!=_e;++ue);for(he.C=ue>=Z.length?-1:ue,ue=L+1;ue<Z.length&&n(C.FullPaths[ue])!=n(_e);++ue);he.R=ue>=Z.length?-1:ue,he.type=1}else n(C.FullPaths[L+1]||"")==n(_e)&&(he.R=L+1),he.type=2}}}function A(C,M){var P=M||{};if(P.fileType=="mad")return V8(C,P);switch(N(C),P.fileType){case"zip":return F8(C,P)}var I=function(Ne){for(var ge=0,Ee=0,Fe=0;Fe<Ne.FileIndex.length;++Fe){var It=Ne.FileIndex[Fe];if(It.content){var Dt=It.content.length;Dt>0&&(Dt<4096?ge+=Dt+63>>6:Ee+=Dt+511>>9)}}for(var Ur=Ne.FullPaths.length+3>>2,Yu=ge+7>>3,Qu=ge+127>>7,Ju=Yu+Ee+Ur+Qu,uo=Ju+127>>7,Wv=uo<=109?0:Math.ceil((uo-109)/127);Ju+uo+Wv+127>>7>uo;)Wv=++uo<=109?0:Math.ceil((uo-109)/127);var di=[1,Wv,uo,Qu,Ur,Ee,ge,0];return Ne.FileIndex[0].size=ge<<6,di[7]=(Ne.FileIndex[0].start=di[0]+di[1]+di[2]+di[3]+di[4]+di[5])+(di[6]+7>>3),di}(C),L=oe(I[7]<<9),F=0,J=0;{for(F=0;F<8;++F)L.write_shift(1,K[F]);for(F=0;F<8;++F)L.write_shift(2,0);for(L.write_shift(2,62),L.write_shift(2,3),L.write_shift(2,65534),L.write_shift(2,9),L.write_shift(2,6),F=0;F<3;++F)L.write_shift(2,0);for(L.write_shift(4,0),L.write_shift(4,I[2]),L.write_shift(4,I[0]+I[1]+I[2]+I[3]-1),L.write_shift(4,0),L.write_shift(4,4096),L.write_shift(4,I[3]?I[0]+I[1]+I[2]-1:k),L.write_shift(4,I[3]),L.write_shift(-4,I[1]?I[0]-1:k),L.write_shift(4,I[1]),F=0;F<109;++F)L.write_shift(-4,F<I[2]?I[1]+F:-1)}if(I[1])for(J=0;J<I[1];++J){for(;F<236+J*127;++F)L.write_shift(-4,F<I[2]?I[1]+F:-1);L.write_shift(-4,J===I[1]-1?k:J+1)}var ue=function(Ne){for(J+=Ne;F<J-1;++F)L.write_shift(-4,F+1);Ne&&(++F,L.write_shift(-4,k))};for(J=F=0,J+=I[1];F<J;++F)L.write_shift(-4,G.DIFSECT);for(J+=I[2];F<J;++F)L.write_shift(-4,G.FATSECT);ue(I[3]),ue(I[4]);for(var Q=0,Z=0,te=C.FileIndex[0];Q<C.FileIndex.length;++Q)te=C.FileIndex[Q],te.content&&(Z=te.content.length,!(Z<4096)&&(te.start=J,ue(Z+511>>9)));for(ue(I[6]+7>>3);L.l&511;)L.write_shift(-4,G.ENDOFCHAIN);for(J=F=0,Q=0;Q<C.FileIndex.length;++Q)te=C.FileIndex[Q],te.content&&(Z=te.content.length,!(!Z||Z>=4096)&&(te.start=J,ue(Z+63>>6)));for(;L.l&511;)L.write_shift(-4,G.ENDOFCHAIN);for(F=0;F<I[4]<<2;++F){var he=C.FullPaths[F];if(!he||he.length===0){for(Q=0;Q<17;++Q)L.write_shift(4,0);for(Q=0;Q<3;++Q)L.write_shift(4,-1);for(Q=0;Q<12;++Q)L.write_shift(4,0);continue}te=C.FileIndex[F],F===0&&(te.start=te.size?te.start-1:k);var _e=F===0&&P.root||te.name;if(Z=2*(_e.length+1),L.write_shift(64,_e,"utf16le"),L.write_shift(2,Z),L.write_shift(1,te.type),L.write_shift(1,te.color),L.write_shift(-4,te.L),L.write_shift(-4,te.R),L.write_shift(-4,te.C),te.clsid)L.write_shift(16,te.clsid,"hex");else for(Q=0;Q<4;++Q)L.write_shift(4,0);L.write_shift(4,te.state||0),L.write_shift(4,0),L.write_shift(4,0),L.write_shift(4,0),L.write_shift(4,0),L.write_shift(4,te.start),L.write_shift(4,te.size),L.write_shift(4,0)}for(F=1;F<C.FileIndex.length;++F)if(te=C.FileIndex[F],te.size>=4096)if(L.l=te.start+1<<9,tt&&Buffer.isBuffer(te.content))te.content.copy(L,L.l,0,te.size),L.l+=te.size+511&-512;else{for(Q=0;Q<te.size;++Q)L.write_shift(1,te.content[Q]);for(;Q&511;++Q)L.write_shift(1,0)}for(F=1;F<C.FileIndex.length;++F)if(te=C.FileIndex[F],te.size>0&&te.size<4096)if(tt&&Buffer.isBuffer(te.content))te.content.copy(L,L.l,0,te.size),L.l+=te.size+63&-64;else{for(Q=0;Q<te.size;++Q)L.write_shift(1,te.content[Q]);for(;Q&63;++Q)L.write_shift(1,0)}if(tt)L.l=L.length;else for(;L.l<L.length;)L.write_shift(1,0);return L}function O(C,M){var P=C.FullPaths.map(function(Q){return Q.toUpperCase()}),I=P.map(function(Q){var Z=Q.split("/");return Z[Z.length-(Q.slice(-1)=="/"?2:1)]}),L=!1;M.charCodeAt(0)===47?(L=!0,M=P[0].slice(0,-1)+M):L=M.indexOf("/")!==-1;var F=M.toUpperCase(),J=L===!0?P.indexOf(F):I.indexOf(F);if(J!==-1)return C.FileIndex[J];var ue=!F.match(v0);for(F=F.replace(Fd,""),ue&&(F=F.replace(v0,"!")),J=0;J<P.length;++J)if((ue?P[J].replace(v0,"!"):P[J]).replace(Fd,"")==F||(ue?I[J].replace(v0,"!"):I[J]).replace(Fd,"")==F)return C.FileIndex[J];return null}var D=64,k=-2,V="d0cf11e0a1b11ae1",K=[208,207,17,224,161,177,26,225],ie="00000000000000000000000000000000",G={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:k,FREESECT:-1,HEADER_SIGNATURE:V,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ie,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function X(C,M,P){u();var I=A(C,P);c.writeFileSync(M,I)}function re(C){for(var M=new Array(C.length),P=0;P<C.length;++P)M[P]=String.fromCharCode(C[P]);return M.join("")}function de(C,M){var P=A(C,M);switch(M&&M.type||"buffer"){case"file":return u(),c.writeFileSync(M.filename,P),P;case"binary":return typeof P=="string"?P:re(P);case"base64":return yf(typeof P=="string"?P:re(P));case"buffer":if(tt)return Buffer.isBuffer(P)?P:Ji(P);case"array":return typeof P=="string"?Ia(P):P}return P}var me;function R(C){try{var M=C.InflateRaw,P=new M;if(P._processChunk(new Uint8Array([3,0]),P._finishFlushFlag),P.bytesRead)me=C;else throw new Error("zlib does not expose bytesRead")}catch(I){console.error("cannot use native zlib: "+(I.message||I))}}function W(C,M){if(!me)return jj(C,M);var P=me.InflateRaw,I=new P,L=I._processChunk(C.slice(C.l),I._finishFlushFlag);return C.l+=I.bytesRead,L}function U(C){return me?me.deflateRawSync(C):vj(C)}var q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],se=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],je=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ee(C){var M=(C<<1|C<<11)&139536|(C<<5|C<<15)&558144;return(M>>16|M>>8|M)&255}for(var Y=typeof Uint8Array<"u",ne=Y?new Uint8Array(256):[],be=0;be<256;++be)ne[be]=ee(be);function ae(C,M){var P=ne[C&255];return M<=8?P>>>8-M:(P=P<<8|ne[C>>8&255],M<=16?P>>>16-M:(P=P<<8|ne[C>>16&255],P>>>24-M))}function Ue(C,M){var P=M&7,I=M>>>3;return(C[I]|(P<=6?0:C[I+1]<<8))>>>P&3}function Oe(C,M){var P=M&7,I=M>>>3;return(C[I]|(P<=5?0:C[I+1]<<8))>>>P&7}function st(C,M){var P=M&7,I=M>>>3;return(C[I]|(P<=4?0:C[I+1]<<8))>>>P&15}function ze(C,M){var P=M&7,I=M>>>3;return(C[I]|(P<=3?0:C[I+1]<<8))>>>P&31}function we(C,M){var P=M&7,I=M>>>3;return(C[I]|(P<=1?0:C[I+1]<<8))>>>P&127}function Xt(C,M,P){var I=M&7,L=M>>>3,F=(1<<P)-1,J=C[L]>>>I;return P<8-I||(J|=C[L+1]<<8-I,P<16-I)||(J|=C[L+2]<<16-I,P<24-I)||(J|=C[L+3]<<24-I),J&F}function Br(C,M,P){var I=M&7,L=M>>>3;return I<=5?C[L]|=(P&7)<<I:(C[L]|=P<<I&255,C[L+1]=(P&7)>>8-I),M+3}function Zn(C,M,P){var I=M&7,L=M>>>3;return P=(P&1)<<I,C[L]|=P,M+1}function gn(C,M,P){var I=M&7,L=M>>>3;return P<<=I,C[L]|=P&255,P>>>=8,C[L+1]=P,M+8}function Wa(C,M,P){var I=M&7,L=M>>>3;return P<<=I,C[L]|=P&255,P>>>=8,C[L+1]=P&255,C[L+2]=P>>>8,M+16}function oo(C,M){var P=C.length,I=2*P>M?2*P:M+5,L=0;if(P>=M)return C;if(tt){var F=oE(I);if(C.copy)C.copy(F);else for(;L<C.length;++L)F[L]=C[L];return F}else if(Y){var J=new Uint8Array(I);if(J.set)J.set(C);else for(;L<P;++L)J[L]=C[L];return J}return C.length=I,C}function In(C){for(var M=new Array(C),P=0;P<C;++P)M[P]=0;return M}function lo(C,M,P){var I=1,L=0,F=0,J=0,ue=0,Q=C.length,Z=Y?new Uint16Array(32):In(32);for(F=0;F<32;++F)Z[F]=0;for(F=Q;F<P;++F)C[F]=0;Q=C.length;var te=Y?new Uint16Array(Q):In(Q);for(F=0;F<Q;++F)Z[L=C[F]]++,I<L&&(I=L),te[F]=0;for(Z[0]=0,F=1;F<=I;++F)Z[F+16]=ue=ue+Z[F-1]<<1;for(F=0;F<Q;++F)ue=C[F],ue!=0&&(te[F]=Z[ue+16]++);var he=0;for(F=0;F<Q;++F)if(he=C[F],he!=0)for(ue=ae(te[F],I)>>I-he,J=(1<<I+4-he)-1;J>=0;--J)M[ue|J<<he]=he&15|F<<4;return I}var Uv=Y?new Uint16Array(512):In(512),zv=Y?new Uint16Array(32):In(32);if(!Y){for(var co=0;co<512;++co)Uv[co]=0;for(co=0;co<32;++co)zv[co]=0}(function(){for(var C=[],M=0;M<32;M++)C.push(5);lo(C,zv,32);var P=[];for(M=0;M<=143;M++)P.push(8);for(;M<=255;M++)P.push(9);for(;M<=279;M++)P.push(7);for(;M<=287;M++)P.push(8);lo(P,Uv,288)})();var D8=function(){for(var M=Y?new Uint8Array(32768):[],P=0,I=0;P<je.length-1;++P)for(;I<je[P+1];++I)M[I]=P;for(;I<32768;++I)M[I]=29;var L=Y?new Uint8Array(259):[];for(P=0,I=0;P<se.length-1;++P)for(;I<se[P+1];++I)L[I]=P;function F(ue,Q){for(var Z=0;Z<ue.length;){var te=Math.min(65535,ue.length-Z),he=Z+te==ue.length;for(Q.write_shift(1,+he),Q.write_shift(2,te),Q.write_shift(2,~te&65535);te-- >0;)Q[Q.l++]=ue[Z++]}return Q.l}function J(ue,Q){for(var Z=0,te=0,he=Y?new Uint16Array(32768):[];te<ue.length;){var _e=Math.min(65535,ue.length-te);if(_e<10){for(Z=Br(Q,Z,+(te+_e==ue.length)),Z&7&&(Z+=8-(Z&7)),Q.l=Z/8|0,Q.write_shift(2,_e),Q.write_shift(2,~_e&65535);_e-- >0;)Q[Q.l++]=ue[te++];Z=Q.l*8;continue}Z=Br(Q,Z,+(te+_e==ue.length)+2);for(var Ne=0;_e-- >0;){var ge=ue[te];Ne=(Ne<<5^ge)&32767;var Ee=-1,Fe=0;if((Ee=he[Ne])&&(Ee|=te&-32768,Ee>te&&(Ee-=32768),Ee<te))for(;ue[Ee+Fe]==ue[te+Fe]&&Fe<250;)++Fe;if(Fe>2){ge=L[Fe],ge<=22?Z=gn(Q,Z,ne[ge+1]>>1)-1:(gn(Q,Z,3),Z+=5,gn(Q,Z,ne[ge-23]>>5),Z+=3);var It=ge<8?0:ge-4>>2;It>0&&(Wa(Q,Z,Fe-se[ge]),Z+=It),ge=M[te-Ee],Z=gn(Q,Z,ne[ge]>>3),Z-=3;var Dt=ge<4?0:ge-2>>1;Dt>0&&(Wa(Q,Z,te-Ee-je[ge]),Z+=Dt);for(var Ur=0;Ur<Fe;++Ur)he[Ne]=te&32767,Ne=(Ne<<5^ue[te])&32767,++te;_e-=Fe-1}else ge<=143?ge=ge+48:Z=Zn(Q,Z,1),Z=gn(Q,Z,ne[ge]),he[Ne]=te&32767,++te}Z=gn(Q,Z,0)-1}return Q.l=(Z+7)/8|0,Q.l}return function(Q,Z){return Q.length<8?F(Q,Z):J(Q,Z)}}();function vj(C){var M=oe(50+Math.floor(C.length*1.1)),P=D8(C,M);return M.slice(0,P)}var xj=Y?new Uint16Array(32768):In(32768),yj=Y?new Uint16Array(32768):In(32768),bj=Y?new Uint16Array(128):In(128),wj=1,_j=1;function M8(C,M){var P=ze(C,M)+257;M+=5;var I=ze(C,M)+1;M+=5;var L=st(C,M)+4;M+=4;for(var F=0,J=Y?new Uint8Array(19):In(19),ue=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Q=1,Z=Y?new Uint8Array(8):In(8),te=Y?new Uint8Array(8):In(8),he=J.length,_e=0;_e<L;++_e)J[q[_e]]=F=Oe(C,M),Q<F&&(Q=F),Z[F]++,M+=3;var Ne=0;for(Z[0]=0,_e=1;_e<=Q;++_e)te[_e]=Ne=Ne+Z[_e-1]<<1;for(_e=0;_e<he;++_e)(Ne=J[_e])!=0&&(ue[_e]=te[Ne]++);var ge=0;for(_e=0;_e<he;++_e)if(ge=J[_e],ge!=0){Ne=ne[ue[_e]]>>8-ge;for(var Ee=(1<<7-ge)-1;Ee>=0;--Ee)bj[Ne|Ee<<ge]=ge&7|_e<<3}var Fe=[];for(Q=1;Fe.length<P+I;)switch(Ne=bj[we(C,M)],M+=Ne&7,Ne>>>=3){case 16:for(F=3+Ue(C,M),M+=2,Ne=Fe[Fe.length-1];F-- >0;)Fe.push(Ne);break;case 17:for(F=3+Oe(C,M),M+=3;F-- >0;)Fe.push(0);break;case 18:for(F=11+we(C,M),M+=7;F-- >0;)Fe.push(0);break;default:Fe.push(Ne),Q<Ne&&(Q=Ne);break}var It=Fe.slice(0,P),Dt=Fe.slice(P);for(_e=P;_e<286;++_e)It[_e]=0;for(_e=I;_e<30;++_e)Dt[_e]=0;return wj=lo(It,xj,286),_j=lo(Dt,yj,30),M}function L8(C,M){if(C[0]==3&&!(C[1]&3))return[sl(M),2];for(var P=0,I=0,L=oE(M||1<<18),F=0,J=L.length>>>0,ue=0,Q=0;!(I&1);){if(I=Oe(C,P),P+=3,I>>>1)I>>1==1?(ue=9,Q=5):(P=M8(C,P),ue=wj,Q=_j);else{P&7&&(P+=8-(P&7));var Z=C[P>>>3]|C[(P>>>3)+1]<<8;if(P+=32,Z>0)for(!M&&J<F+Z&&(L=oo(L,F+Z),J=L.length);Z-- >0;)L[F++]=C[P>>>3],P+=8;continue}for(;;){!M&&J<F+32767&&(L=oo(L,F+32767),J=L.length);var te=Xt(C,P,ue),he=I>>>1==1?Uv[te]:xj[te];if(P+=he&15,he>>>=4,!(he>>>8&255))L[F++]=he;else{if(he==256)break;he-=257;var _e=he<8?0:he-4>>2;_e>5&&(_e=0);var Ne=F+se[he];_e>0&&(Ne+=Xt(C,P,_e),P+=_e),te=Xt(C,P,Q),he=I>>>1==1?zv[te]:yj[te],P+=he&15,he>>>=4;var ge=he<4?0:he-2>>1,Ee=je[he];for(ge>0&&(Ee+=Xt(C,P,ge),P+=ge),!M&&J<Ne&&(L=oo(L,Ne+100),J=L.length);F<Ne;)L[F]=L[F-Ee],++F}}}return M?[L,P+7>>>3]:[L.slice(0,F),P+7>>>3]}function jj(C,M){var P=C.slice(C.l||0),I=L8(P,M);return C.l+=I[1],I[0]}function Sj(C,M){if(C)typeof console<"u"&&console.error(M);else throw new Error(M)}function Ej(C,M){var P=C;Fn(P,0);var I=[],L=[],F={FileIndex:I,FullPaths:L};S(F,{root:M.root});for(var J=P.length-4;(P[J]!=80||P[J+1]!=75||P[J+2]!=5||P[J+3]!=6)&&J>=0;)--J;P.l=J+4,P.l+=4;var ue=P.read_shift(2);P.l+=6;var Q=P.read_shift(4);for(P.l=Q,J=0;J<ue;++J){P.l+=20;var Z=P.read_shift(4),te=P.read_shift(4),he=P.read_shift(2),_e=P.read_shift(2),Ne=P.read_shift(2);P.l+=8;var ge=P.read_shift(4),Ee=l(P.slice(P.l+he,P.l+he+_e));P.l+=he+_e+Ne;var Fe=P.l;P.l=ge+4,$8(P,Z,te,F,Ee),P.l=Fe}return F}function $8(C,M,P,I,L){C.l+=2;var F=C.read_shift(2),J=C.read_shift(2),ue=s(C);if(F&8257)throw new Error("Unsupported ZIP encryption");for(var Q=C.read_shift(4),Z=C.read_shift(4),te=C.read_shift(4),he=C.read_shift(2),_e=C.read_shift(2),Ne="",ge=0;ge<he;++ge)Ne+=String.fromCharCode(C[C.l++]);if(_e){var Ee=l(C.slice(C.l,C.l+_e));(Ee[21589]||{}).mt&&(ue=Ee[21589].mt),((L||{})[21589]||{}).mt&&(ue=L[21589].mt)}C.l+=_e;var Fe=C.slice(C.l,C.l+Z);switch(J){case 8:Fe=W(C,te);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+J)}var It=!1;F&8&&(Q=C.read_shift(4),Q==134695760&&(Q=C.read_shift(4),It=!0),Z=C.read_shift(4),te=C.read_shift(4)),Z!=M&&Sj(It,"Bad compressed size: "+M+" != "+Z),te!=P&&Sj(It,"Bad uncompressed size: "+P+" != "+te),qv(I,Ne,Fe,{unsafe:!0,mt:ue})}function F8(C,M){var P=M||{},I=[],L=[],F=oe(1),J=P.compression?8:0,ue=0,Q=0,Z=0,te=0,he=0,_e=C.FullPaths[0],Ne=_e,ge=C.FileIndex[0],Ee=[],Fe=0;for(Q=1;Q<C.FullPaths.length;++Q)if(Ne=C.FullPaths[Q].slice(_e.length),ge=C.FileIndex[Q],!(!ge.size||!ge.content||Ne=="Sh33tJ5")){var It=te,Dt=oe(Ne.length);for(Z=0;Z<Ne.length;++Z)Dt.write_shift(1,Ne.charCodeAt(Z)&127);Dt=Dt.slice(0,Dt.l),Ee[he]=PB.buf(ge.content,0);var Ur=ge.content;J==8&&(Ur=U(Ur)),F=oe(30),F.write_shift(4,67324752),F.write_shift(2,20),F.write_shift(2,ue),F.write_shift(2,J),ge.mt?i(F,ge.mt):F.write_shift(4,0),F.write_shift(-4,Ee[he]),F.write_shift(4,Ur.length),F.write_shift(4,ge.content.length),F.write_shift(2,Dt.length),F.write_shift(2,0),te+=F.length,I.push(F),te+=Dt.length,I.push(Dt),te+=Ur.length,I.push(Ur),F=oe(46),F.write_shift(4,33639248),F.write_shift(2,0),F.write_shift(2,20),F.write_shift(2,ue),F.write_shift(2,J),F.write_shift(4,0),F.write_shift(-4,Ee[he]),F.write_shift(4,Ur.length),F.write_shift(4,ge.content.length),F.write_shift(2,Dt.length),F.write_shift(2,0),F.write_shift(2,0),F.write_shift(2,0),F.write_shift(2,0),F.write_shift(4,0),F.write_shift(4,It),Fe+=F.l,L.push(F),Fe+=Dt.length,L.push(Dt),++he}return F=oe(22),F.write_shift(4,101010256),F.write_shift(2,0),F.write_shift(2,0),F.write_shift(2,he),F.write_shift(2,he),F.write_shift(4,Fe),F.write_shift(4,te),F.write_shift(2,0),Rr([Rr(I),Rr(L),F])}var Kh={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function B8(C,M){if(C.ctype)return C.ctype;var P=C.name||"",I=P.match(/\.([^\.]+)$/);return I&&Kh[I[1]]||M&&(I=(P=M).match(/[\.\\]([^\.\\])+$/),I&&Kh[I[1]])?Kh[I[1]]:"application/octet-stream"}function U8(C){for(var M=yf(C),P=[],I=0;I<M.length;I+=76)P.push(M.slice(I,I+76));return P.join(`\r
`)+`\r
`}function z8(C){var M=C.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Z){var te=Z.charCodeAt(0).toString(16).toUpperCase();return"="+(te.length==1?"0"+te:te)});M=M.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),M.charAt(0)==`
`&&(M="=0D"+M.slice(1)),M=M.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var P=[],I=M.split(`\r
`),L=0;L<I.length;++L){var F=I[L];if(F.length==0){P.push("");continue}for(var J=0;J<F.length;){var ue=76,Q=F.slice(J,J+ue);Q.charAt(ue-1)=="="?ue--:Q.charAt(ue-2)=="="?ue-=2:Q.charAt(ue-3)=="="&&(ue-=3),Q=F.slice(J,J+ue),J+=ue,J<F.length&&(Q+="="),P.push(Q)}}return P.join(`\r
`)}function q8(C){for(var M=[],P=0;P<C.length;++P){for(var I=C[P];P<=C.length&&I.charAt(I.length-1)=="=";)I=I.slice(0,I.length-1)+C[++P];M.push(I)}for(var L=0;L<M.length;++L)M[L]=M[L].replace(/[=][0-9A-Fa-f]{2}/g,function(F){return String.fromCharCode(parseInt(F.slice(1),16))});return Ia(M.join(`\r
`))}function W8(C,M,P){for(var I="",L="",F="",J,ue=0;ue<10;++ue){var Q=M[ue];if(!Q||Q.match(/^\s*$/))break;var Z=Q.match(/^(.*?):\s*([^\s].*)$/);if(Z)switch(Z[1].toLowerCase()){case"content-location":I=Z[2].trim();break;case"content-type":F=Z[2].trim();break;case"content-transfer-encoding":L=Z[2].trim();break}}switch(++ue,L.toLowerCase()){case"base64":J=Ia(Fi(M.slice(ue).join("")));break;case"quoted-printable":J=q8(M.slice(ue));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+L)}var te=qv(C,I.slice(P.length),J,{unsafe:!0});F&&(te.ctype=F)}function H8(C,M){if(re(C.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var P=M&&M.root||"",I=(tt&&Buffer.isBuffer(C)?C.toString("binary"):re(C)).split(`\r
`),L=0,F="";for(L=0;L<I.length;++L)if(F=I[L],!!/^Content-Location:/i.test(F)&&(F=F.slice(F.indexOf("file")),P||(P=F.slice(0,F.lastIndexOf("/")+1)),F.slice(0,P.length)!=P))for(;P.length>0&&(P=P.slice(0,P.length-1),P=P.slice(0,P.lastIndexOf("/")+1),F.slice(0,P.length)!=P););var J=(I[1]||"").match(/boundary="(.*?)"/);if(!J)throw new Error("MAD cannot find boundary");var ue="--"+(J[1]||""),Q=[],Z=[],te={FileIndex:Q,FullPaths:Z};S(te);var he,_e=0;for(L=0;L<I.length;++L){var Ne=I[L];Ne!==ue&&Ne!==ue+"--"||(_e++&&W8(te,I.slice(he,L),P),he=L)}return te}function V8(C,M){var P=M||{},I=P.boundary||"SheetJS";I="------="+I;for(var L=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+I.slice(2)+'"',"","",""],F=C.FullPaths[0],J=F,ue=C.FileIndex[0],Q=1;Q<C.FullPaths.length;++Q)if(J=C.FullPaths[Q].slice(F.length),ue=C.FileIndex[Q],!(!ue.size||!ue.content||J=="Sh33tJ5")){J=J.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Fe){return"_x"+Fe.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Fe){return"_u"+Fe.charCodeAt(0).toString(16)+"_"});for(var Z=ue.content,te=tt&&Buffer.isBuffer(Z)?Z.toString("binary"):re(Z),he=0,_e=Math.min(1024,te.length),Ne=0,ge=0;ge<=_e;++ge)(Ne=te.charCodeAt(ge))>=32&&Ne<128&&++he;var Ee=he>=_e*4/5;L.push(I),L.push("Content-Location: "+(P.root||"file:///C:/SheetJS/")+J),L.push("Content-Transfer-Encoding: "+(Ee?"quoted-printable":"base64")),L.push("Content-Type: "+B8(ue,J)),L.push(""),L.push(Ee?z8(te):U8(te))}return L.push(I+`--\r
`),L.join(`\r
`)}function K8(C){var M={};return S(M,C),M}function qv(C,M,P,I){var L=I&&I.unsafe;L||S(C);var F=!L&&mt.find(C,M);if(!F){var J=C.FullPaths[0];M.slice(0,J.length)==J?J=M:(J.slice(-1)!="/"&&(J+="/"),J=(J+M).replace("//","/")),F={name:a(M),type:2},C.FileIndex.push(F),C.FullPaths.push(J),L||mt.utils.cfb_gc(C)}return F.content=P,F.size=P?P.length:0,I&&(I.CLSID&&(F.clsid=I.CLSID),I.mt&&(F.mt=I.mt),I.ct&&(F.ct=I.ct)),F}function G8(C,M){S(C);var P=mt.find(C,M);if(P){for(var I=0;I<C.FileIndex.length;++I)if(C.FileIndex[I]==P)return C.FileIndex.splice(I,1),C.FullPaths.splice(I,1),!0}return!1}function X8(C,M,P){S(C);var I=mt.find(C,M);if(I){for(var L=0;L<C.FileIndex.length;++L)if(C.FileIndex[L]==I)return C.FileIndex[L].name=a(P),C.FullPaths[L]=P,!0}return!1}function Y8(C){N(C,!0)}return t.find=O,t.read=j,t.parse=d,t.write=de,t.writeFile=X,t.utils={cfb_new:K8,cfb_add:qv,cfb_del:G8,cfb_mov:X8,cfb_gc:Y8,ReadShift:Ud,CheckField:ZP,prep_blob:Fn,bconcat:Rr,use_zlib:R,_deflateRaw:vj,_inflateRaw:jj,consts:G},t}();function RB(e){return typeof e=="string"?kg(e):Array.isArray(e)?iB(e):e}function _h(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=kg(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?wf(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([RB(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var s=document.createElement("a");if(s.download!=null)return s.download=e,s.href=i,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=wh(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function $r(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function mE(e,t){for(var r=[],n=$r(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function N_(e){for(var t=[],r=$r(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function Ig(e){for(var t=[],r=$r(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function IB(e){for(var t=[],r=$r(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var Wp=new Date(1899,11,30,0,0,0);function On(e,t){var r=e.getTime(),n=Wp.getTime()+(e.getTimezoneOffset()-Wp.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var MP=new Date,DB=Wp.getTime()+(MP.getTimezoneOffset()-Wp.getTimezoneOffset())*6e4,gE=MP.getTimezoneOffset();function LP(e){var t=new Date;return t.setTime(e*24*60*60*1e3+DB),t.getTimezoneOffset()!==gE&&t.setTime(t.getTime()+(t.getTimezoneOffset()-gE)*6e4),t}var vE=new Date("2017-02-19T19:06:09.000Z"),$P=isNaN(vE.getFullYear())?new Date("2/19/17"):vE,MB=$P.getFullYear()==2017;function fn(e,t){var r=new Date(e);if(MB)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if($P.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Dg(e,t){if(tt&&Buffer.isBuffer(e))return e.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function kn(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=kn(e[r]));return t}function Vt(e,t){for(var r="";r.length<t;)r+=e;return r}function Ai(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var LB=["january","february","march","april","may","june","july","august","september","october","november","december"];function bf(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var s=e.toLowerCase();if(s.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(s=s.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),s.length>3&&LB.indexOf(s)==-1)return r}else if(s.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}function We(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return tt?n=Ji(r):n=sB(r),mt.utils.cfb_add(e,t,n)}mt.utils.cfb_add(e,t,r)}else e.file(t,r)}function T_(){return mt.utils.cfb_new()}var ir=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,$B={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},A_=N_($B),C_=/[&<>'"]/g,FB=/[\u0000-\u0008\u000b-\u001f]/g;function ut(e){var t=e+"";return t.replace(C_,function(r){return A_[r]}).replace(FB,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function xE(e){return ut(e).replace(/ /g,"_x0020_")}var FP=/[\u0000-\u001f]/g;function BB(e){var t=e+"";return t.replace(C_,function(r){return A_[r]}).replace(/\n/g,"<br/>").replace(FP,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function UB(e){var t=e+"";return t.replace(C_,function(r){return A_[r]}).replace(FP,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function zB(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function qB(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function _x(e){for(var t="",r=0,n=0,a=0,i=0,s=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){s=(n&31)<<6,s|=a&63,t+=String.fromCharCode(s);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|i&63);continue}s=e.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(i&63)<<6|s&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function yE(e){var t=sl(2*e.length),r,n,a=1,i=0,s=0,l;for(n=0;n<e.length;n+=a)a=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,s=55296+(r>>>10&1023),r=56320+(r&1023)),s!==0&&(t[i++]=s&255,t[i++]=s>>>8,s=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function bE(e){return Ji(e,"binary").toString("utf8")}var y0="foo bar baz",Bd=tt&&(bE(y0)==_x(y0)&&bE||yE(y0)==_x(y0)&&yE)||_x,wf=tt?function(e){return Ji(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},WB=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),BP=/(^\s|\s$|\n)/;function Ir(e,t){return"<"+e+(t.match(BP)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function _f(e){return $r(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function xe(e,t,r){return"<"+e+(r!=null?_f(r):"")+(t!=null?(t.match(BP)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function E1(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function HB(e,t){switch(typeof e){case"string":var r=xe("vt:lpwstr",ut(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return xe((e|0)==e?"vt:i4":"vt:r8",ut(String(e)));case"boolean":return xe("vt:bool",e?"true":"false")}if(e instanceof Date)return xe("vt:filetime",E1(e));throw new Error("Unable to serialize "+e)}var br={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Ou=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Bn={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function VB(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,i=5;i>=0;--i)a=a*256+e[t+i];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function KB(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,i=0,s=n?-t:t;isFinite(s)?s==0?a=i=0:(a=Math.floor(Math.log(s)/Math.LN2),i=s*Math.pow(2,52-a),a<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?a=-1022:(i-=Math.pow(2,52),a+=1023)):(a=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(a&15)<<4|i&15,e[r+7]=a>>4|n}var wE=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,i=e[0][n].length;a<i;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},_E=tt?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Ji(t)})):wE(e)}:wE,jE=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(Ed(e,a)));return n.join("").replace(Fd,"")},O_=tt?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Fd,""):jE(e,t,r)}:jE,SE=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},UP=tt?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):SE(e,t,r)}:SE,EE=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(Ul(e,a)));return n.join("")},jh=tt?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):EE(t,r,n)}:EE,zP=function(e,t){var r=Un(e,t);return r>0?jh(e,t+4,t+4+r-1):""},qP=zP,WP=function(e,t){var r=Un(e,t);return r>0?jh(e,t+4,t+4+r-1):""},HP=WP,VP=function(e,t){var r=2*Un(e,t);return r>0?jh(e,t+4,t+4+r-1):""},KP=VP,GP=function(t,r){var n=Un(t,r);return n>0?O_(t,r+4,r+4+n):""},XP=GP,YP=function(e,t){var r=Un(e,t);return r>0?jh(e,t+4,t+4+r):""},QP=YP,JP=function(e,t){return VB(e,t)},Hp=JP,k_=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};tt&&(qP=function(t,r){if(!Buffer.isBuffer(t))return zP(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},HP=function(t,r){if(!Buffer.isBuffer(t))return WP(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},KP=function(t,r){if(!Buffer.isBuffer(t))return VP(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},XP=function(t,r){if(!Buffer.isBuffer(t))return GP(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},QP=function(t,r){if(!Buffer.isBuffer(t))return YP(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},Hp=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):JP(t,r)},k_=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Ul=function(e,t){return e[t]},Ed=function(e,t){return e[t+1]*256+e[t]},GB=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Un=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Eo=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},XB=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Ud(e,t){var r="",n,a,i=[],s,l,c,u;switch(t){case"dbcs":if(u=this.l,tt&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(Ed(this,u)),u+=2;e*=2;break;case"utf8":r=jh(this,this.l,this.l+e);break;case"utf16le":e*=2,r=O_(this,this.l,this.l+e);break;case"wstr":return Ud.call(this,e,"dbcs");case"lpstr-ansi":r=qP(this,this.l),e=4+Un(this,this.l);break;case"lpstr-cp":r=HP(this,this.l),e=4+Un(this,this.l);break;case"lpwstr":r=KP(this,this.l),e=4+2*Un(this,this.l);break;case"lpp4":e=4+Un(this,this.l),r=XP(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Un(this,this.l),r=QP(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(s=Ul(this,this.l+e++))!==0;)i.push(g0(s));r=i.join("");break;case"_wstr":for(e=0,r="";(s=Ed(this,this.l+e))!==0;)i.push(g0(s)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return s=Ul(this,u),this.l=u+1,l=Ud.call(this,e-c,s?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(g0(Ed(this,u))),u+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return s=Ul(this,u),this.l=u+1,l=Ud.call(this,e-c,s?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(g0(Ul(this,u))),u+=1}r=i.join("");break;default:switch(e){case 1:return n=Ul(this,this.l),this.l++,n;case 2:return n=(t==="i"?GB:Ed)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(n=(e>0?Eo:XB)(this,this.l),this.l+=4,n):(a=Un(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=Hp(this,this.l):a=Hp([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=UP(this,this.l,e);break}}return this.l+=e,r}var YB=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},QB=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},JB=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function ZB(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)JB(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var s=t.charCodeAt(a);this[this.l++]=s&255,this[this.l++]=s>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,YB(this,t,this.l);break;case 8:if(n=8,r==="f"){KB(this,t,this.l);break}case 16:break;case-4:n=4,QB(this,t,this.l);break}return this.l+=n,this}function ZP(e,t){var r=UP(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Fn(e,t){e.l=t,e.read_shift=Ud,e.chk=ZP,e.write_shift=ZB}function ii(e,t){e.l+=t}function oe(e){var t=sl(e);return Fn(t,0),t}function An(){var e=[],t=tt?256:2048,r=function(u){var d=oe(u);return Fn(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},s=function(){return a(),Rr(e)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:l,end:s,_bufs:e}}function fe(e,t,r,n){var a=+t,i;if(!isNaN(a)){n||(n=VH[a].p||(r||[]).length||0),i=1+(a>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var s=e.next(i);a<=127?s.write_shift(1,a):(s.write_shift(1,(a&127)+128),s.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)s.write_shift(1,(n&127)+128),n>>=7;else{s.write_shift(1,n);break}n>0&&k_(r)&&e.push(r)}}function zd(e,t,r){var n=kn(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function NE(e,t,r){var n=kn(e);return n.s=zd(n.s,t.s,r),n.e=zd(n.e,t.s,r),n}function qd(e,t){if(e.cRel&&e.c<0)for(e=kn(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=kn(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=ft(e);return!e.cRel&&e.cRel!=null&&(r=r9(r)),!e.rRel&&e.rRel!=null&&(r=e9(r)),r}function jx(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Gr(e.s.c)+":"+(e.e.cRel?"":"$")+Gr(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Mr(e.s.r)+":"+(e.e.rRel?"":"$")+Mr(e.e.r):qd(e.s,t.biff)+":"+qd(e.e,t.biff)}function P_(e){return parseInt(t9(e),10)-1}function Mr(e){return""+(e+1)}function e9(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function t9(e){return e.replace(/\$(\d+)$/,"$1")}function R_(e){for(var t=n9(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function Gr(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function r9(e){return e.replace(/^([A-Z])/,"$$$1")}function n9(e){return e.replace(/^\$([A-Z])/,"$1")}function a9(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function wr(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function ft(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Xn(e){var t=e.indexOf(":");return t==-1?{s:wr(e),e:wr(e)}:{s:wr(e.slice(0,t)),e:wr(e.slice(t+1))}}function nr(e,t){return typeof t>"u"||typeof t=="number"?nr(e.s,e.e):(typeof e!="string"&&(e=ft(e)),typeof t!="string"&&(t=ft(t)),e==t?e:e+":"+t)}function At(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,i=e.length;for(r=0;n<i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===i||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function TE(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Ks(e.z,r?On(t):t)}catch{}try{return e.w=Ks((e.XF||{}).numFmtId||(r?14:0),r?On(t):t)}catch{return""+t}}function Bi(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Sh[e.v]||e.v:t==null?TE(e,e.v):TE(e,t))}function wl(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function e5(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,i=e||(a?[]:{}),s=0,l=0;if(i&&n.origin!=null){if(typeof n.origin=="number")s=n.origin;else{var c=typeof n.origin=="string"?wr(n.origin):n.origin;s=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var d=At(i["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),s==-1&&(u.e.r=s=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var p={v:t[f][h]},v=s+f,g=l+h;if(u.s.r>v&&(u.s.r=v),u.s.c>g&&(u.s.c=g),u.e.r<v&&(u.e.r=v),u.e.c<g&&(u.e.c=g),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))p=t[f][h];else if(Array.isArray(p.v)&&(p.f=t[f][h][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Gt[14],n.cellDates?(p.t="d",p.w=Ks(p.z,On(p.v))):(p.t="n",p.v=On(p.v),p.w=Ks(p.z,p.v))):p.t="s";if(a)i[v]||(i[v]=[]),i[v][g]&&i[v][g].z&&(p.z=i[v][g].z),i[v][g]=p;else{var x=ft({c:g,r:v});i[x]&&i[x].z&&(p.z=i[x].z),i[x]=p}}}return u.s.c<1e7&&(i["!ref"]=nr(u)),i}function ku(e,t){return e5(null,e,t)}function i9(e){return e.read_shift(4,"i")}function Fa(e,t){return t||(t=oe(4)),t.write_shift(4,e),t}function Xr(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function _r(e,t){var r=!1;return t==null&&(r=!0,t=oe(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function s9(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function o9(e,t){return t||(t=oe(4)),t.write_shift(2,0),t.write_shift(2,0),t}function I_(e,t){var r=e.l,n=e.read_shift(1),a=Xr(e),i=[],s={t:a,h:a};if(n&1){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(s9(e));s.r=i}else s.r=[{ich:0,ifnt:0}];return e.l=r+t,s}function l9(e,t){var r=!1;return t==null&&(r=!0,t=oe(15+4*e.t.length)),t.write_shift(1,0),_r(e.t,t),r?t.slice(0,t.l):t}var c9=I_;function u9(e,t){var r=!1;return t==null&&(r=!0,t=oe(23+4*e.t.length)),t.write_shift(1,1),_r(e.t,t),t.write_shift(4,1),o9({},t),r?t.slice(0,t.l):t}function va(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function _l(e,t){return t==null&&(t=oe(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function jl(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Sl(e,t){return t==null&&(t=oe(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var d9=Xr,t5=_r;function D_(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function Vp(e,t){var r=!1;return t==null&&(r=!0,t=oe(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var f9=Xr,N1=D_,M_=Vp;function r5(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?Hp([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Eo(t,0)>>2;return r?a/100:a}function n5(e,t){t==null&&(t=oe(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function a5(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function h9(e,t){return t||(t=oe(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var El=a5,Pu=h9;function Ru(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function ol(e,t){return(t||oe(8)).write_shift(8,e,"f")}function p9(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),i=e.read_shift(2,"i"),s=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=j9[a];u&&(t.rgb=$E(u));break;case 2:t.rgb=$E([s,l,c]);break;case 3:t.theme=a;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function Kp(e,t){if(t||(t=oe(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function m9(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function g9(e,t){t||(t=oe(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}var i5=2,Mn=3,b0=11,Gp=19,w0=64,v9=65,x9=71,y9=4108,b9=4126,Pr=80,AE={1:{n:"CodePage",t:i5},2:{n:"Category",t:Pr},3:{n:"PresentationFormat",t:Pr},4:{n:"ByteCount",t:Mn},5:{n:"LineCount",t:Mn},6:{n:"ParagraphCount",t:Mn},7:{n:"SlideCount",t:Mn},8:{n:"NoteCount",t:Mn},9:{n:"HiddenCount",t:Mn},10:{n:"MultimediaClipCount",t:Mn},11:{n:"ScaleCrop",t:b0},12:{n:"HeadingPairs",t:y9},13:{n:"TitlesOfParts",t:b9},14:{n:"Manager",t:Pr},15:{n:"Company",t:Pr},16:{n:"LinksUpToDate",t:b0},17:{n:"CharacterCount",t:Mn},19:{n:"SharedDoc",t:b0},22:{n:"HyperlinksChanged",t:b0},23:{n:"AppVersion",t:Mn,p:"version"},24:{n:"DigSig",t:v9},26:{n:"ContentType",t:Pr},27:{n:"ContentStatus",t:Pr},28:{n:"Language",t:Pr},29:{n:"Version",t:Pr},255:{},2147483648:{n:"Locale",t:Gp},2147483651:{n:"Behavior",t:Gp},1919054434:{}},CE={1:{n:"CodePage",t:i5},2:{n:"Title",t:Pr},3:{n:"Subject",t:Pr},4:{n:"Author",t:Pr},5:{n:"Keywords",t:Pr},6:{n:"Comments",t:Pr},7:{n:"Template",t:Pr},8:{n:"LastAuthor",t:Pr},9:{n:"RevNumber",t:Pr},10:{n:"EditTime",t:w0},11:{n:"LastPrinted",t:w0},12:{n:"CreatedDate",t:w0},13:{n:"ModifiedDate",t:w0},14:{n:"PageCount",t:Mn},15:{n:"WordCount",t:Mn},16:{n:"CharCount",t:Mn},17:{n:"Thumbnail",t:x9},18:{n:"Application",t:Pr},19:{n:"DocSecurity",t:Mn},255:{},2147483648:{n:"Locale",t:Gp},2147483651:{n:"Behavior",t:Gp},1919054434:{}};function w9(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var _9=w9([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),j9=kn(_9),Sh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},S9={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},_0={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function s5(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function o5(e,t){var r=IB(S9),n=[],a;n[n.length]=ir,n[n.length]=xe("Types",null,{xmlns:br.CT,"xmlns:xsd":br.xsd,"xmlns:xsi":br.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return xe("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=xe("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:_0[c][t.bookType]||_0[c].xlsx}))},s=function(c){(e[c]||[]).forEach(function(u){n[n.length]=xe("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:_0[c][t.bookType]||_0[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(u){n[n.length]=xe("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return i("workbooks"),s("sheets"),s("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),s("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Ze={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function l5(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function gc(e){var t=[ir,xe("Relationships",null,{xmlns:br.RELS})];return $r(e["!id"]).forEach(function(r){t[t.length]=xe("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function lt(e,t,r,n,a,i){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[Ze.HLINK,Ze.XPATH,Ze.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}function E9(e){var t=[ir];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function OE(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function N9(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function T9(e){var t=[ir];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(OE(e[r][0],e[r][1])),t.push(N9("",e[r][0]));return t.push(OE("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function c5(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Fp.version+"</meta:generator></office:meta></office:document-meta>"}var Yo=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Sx(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=ut(t),n[n.length]=r?xe(e,t,r):Ir(e,t))}function u5(e,t){var r=t||{},n=[ir,xe("cp:coreProperties",null,{"xmlns:cp":br.CORE_PROPS,"xmlns:dc":br.dc,"xmlns:dcterms":br.dcterms,"xmlns:dcmitype":br.dcmitype,"xmlns:xsi":br.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&Sx("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:E1(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&Sx("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:E1(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var i=0;i!=Yo.length;++i){var s=Yo[i],l=r.Props&&r.Props[s[1]]!=null?r.Props[s[1]]:e?e[s[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&Sx(s[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var vc=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],d5=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function f5(e){var t=[],r=xe;return e||(e={}),e.Application="SheetJS",t[t.length]=ir,t[t.length]=xe("Properties",null,{xmlns:br.EXT_PROPS,"xmlns:vt":br.vt}),vc.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=ut(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+ut(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function h5(e){var t=[ir,xe("Properties",null,{xmlns:br.CUST_PROPS,"xmlns:vt":br.vt})];if(!e)return t.join("");var r=1;return $r(e).forEach(function(a){++r,t[t.length]=xe("property",HB(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ut(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var kE={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function A9(e,t){var r=[];return $r(kE).map(function(n){for(var a=0;a<Yo.length;++a)if(Yo[a][1]==n)return Yo[a];for(a=0;a<vc.length;++a)if(vc[a][1]==n)return vc[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(Ir(kE[n[1]]||n[1],a))}}),xe("DocumentProperties",r.join(""),{xmlns:Bn.o})}function C9(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&$r(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var s=0;s<Yo.length;++s)if(i==Yo[s][1])return;for(s=0;s<vc.length;++s)if(i==vc[s][1])return;for(s=0;s<r.length;++s)if(i==r[s])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(xe(xE(i),l,{"dt:dt":c}))}}),t&&$r(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var s=t[i],l="string";typeof s=="number"?(l="float",s=String(s)):s===!0||s===!1?(l="boolean",s=s?"1":"0"):s instanceof Date?(l="dateTime.tz",s=s.toISOString()):s=String(s),a.push(xe(xE(i),s,{"dt:dt":l}))}}),"<"+n+' xmlns="'+Bn.o+'">'+a.join("")+"</"+n+">"}function O9(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),a+=i);var s=oe(8);return s.write_shift(4,n),s.write_shift(4,a),s}function PE(e,t){var r=oe(4),n=oe(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=oe(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=O9(t);break;case 31:case 80:for(n=oe(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Rr([r,n])}var p5=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function k9(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function RE(e,t,r){var n=oe(8),a=[],i=[],s=8,l=0,c=oe(8),u=oe(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),i.push(c),a.push(u),s+=8+c.length,!t){u=oe(8),u.write_shift(4,0),a.unshift(u);var d=[oe(4)];for(d[0].write_shift(4,e.length),l=0;l<e.length;++l){var f=e[l][0];for(c=oe(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Rr(d),i.unshift(c),s+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(p5.indexOf(e[l][0])>-1||d5.indexOf(e[l][0])>-1)&&e[l][1]!=null){var h=e[l][1],p=0;if(t){p=+t[e[l][0]];var v=r[p];if(v.p=="version"&&typeof h=="string"){var g=h.split(".");h=(+g[0]<<16)+(+g[1]||0)}c=PE(v.t,h)}else{var x=k9(h);x==-1&&(x=31,h=String(h)),c=PE(x,h)}i.push(c),u=oe(8),u.write_shift(4,t?p:2+l),a.push(u),s+=8+c.length}var b=8*(i.length+1);for(l=0;l<i.length;++l)a[l].write_shift(4,b),b+=i[l].length;return n.write_shift(4,s),n.write_shift(4,i.length),Rr([n].concat(a).concat(i))}function IE(e,t,r,n,a,i){var s=oe(a?68:48),l=[s];s.write_shift(2,65534),s.write_shift(2,0),s.write_shift(4,842412599),s.write_shift(16,mt.utils.consts.HEADER_CLSID,"hex"),s.write_shift(4,a?2:1),s.write_shift(16,t,"hex"),s.write_shift(4,a?68:48);var c=RE(e,r,n);if(l.push(c),a){var u=RE(a,null,null);s.write_shift(16,i,"hex"),s.write_shift(4,68+c.length),l.push(u)}return Rr(l)}function P9(e,t){t||(t=oe(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function R9(e,t){return e.read_shift(t)===1}function an(e,t){return t||(t=oe(2)),t.write_shift(2,+!!e),t}function m5(e){return e.read_shift(2,"u")}function ia(e,t){return t||(t=oe(2)),t.write_shift(2,e),t}function g5(e,t,r){return r||(r=oe(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function v5(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var s=n?e.read_shift(n,a):"";return s}function I9(e){var t=e.t||"",r=oe(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=oe(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return Rr(a)}function D9(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function M9(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):D9(e,n,r)}function L9(e,t,r){if(r.biff>5)return M9(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function x5(e,t,r){return r||(r=oe(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function DE(e,t){t||(t=oe(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function $9(e){var t=oe(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),i=a>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var s=[8,6815827,6619237,4849780,83];for(r=0;r<s.length;++r)t.write_shift(4,s[r]);if(i==28)n=n.slice(1),DE(n,t);else if(i&2){for(s="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));var l=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&DE(a>-1?n.slice(a+1):"",t)}else{for(s="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function ll(e,t,r,n){return n||(n=oe(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function F9(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),i=e.read_shift(n,"i"),s=e.read_shift(n,"i");return[a,i,s]}function B9(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function y5(e,t){return t||(t=oe(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function L_(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=oe(a);return i.write_shift(2,n),i.write_shift(2,t),a>4&&i.write_shift(2,29282),a>6&&i.write_shift(2,1997),a>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function U9(e,t){var r=!t||t.biff==8,n=oe(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function z9(e,t){var r=!t||t.biff>=8?2:1,n=oe(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function q9(e,t){var r=oe(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=I9(e[a]);var i=Rr([r].concat(n));return i.parts=[r.length].concat(n.map(function(s){return s.length})),i}function W9(){var e=oe(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function H9(e){var t=oe(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function V9(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,i=oe(a);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function K9(e,t,r,n){var a=oe(10);return ll(e,t,n,a),a.write_shift(4,r),a}function G9(e,t,r,n,a){var i=!a||a.biff==8,s=oe(8+ +i+(1+i)*r.length);return ll(e,t,n,s),s.write_shift(2,r.length),i&&s.write_shift(1,1),s.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),s}function X9(e,t,r,n){var a=r&&r.biff==5;n||(n=oe(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}function Y9(e,t){var r=t.biff==8||!t.biff?4:2,n=oe(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function ME(e,t,r,n){var a=r&&r.biff==5;n||(n=oe(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&a&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function Q9(e){var t=oe(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function J9(e,t,r,n,a,i){var s=oe(8);return ll(e,t,n,s),g5(r,i,s),s}function Z9(e,t,r,n){var a=oe(14);return ll(e,t,n,a),ol(r,a),a}function eU(e,t,r){if(r.biff<8)return tU(e,t,r);for(var n=[],a=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(F9(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function tU(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=v5(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function rU(e){var t=oe(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)y5(e[r],t);return t}function nU(e){var t=oe(24),r=wr(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Rr([t,$9(e[1])])}function aU(e){var t=e[1].Tooltip,r=oe(10+2*(t.length+1));r.write_shift(2,2048);var n=wr(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function iU(e){return e||(e=oe(4)),e.write_shift(2,1),e.write_shift(2,1),e}function sU(e,t,r){if(!r.cellStyles)return ii(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),i=e.read_shift(n),s=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:i,w:s,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function oU(e,t){var r=oe(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function lU(e){for(var t=oe(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}function cU(e,t,r){var n=oe(15);return Nh(n,e,t),n.write_shift(8,r,"f"),n}function uU(e,t,r){var n=oe(9);return Nh(n,e,t),n.write_shift(2,r),n}var dU=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=N_({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=sl(1);switch(c.type){case"base64":d=Ia(Fi(l));break;case"binary":d=Ia(l);break;case"buffer":case"array":d=l;break}Fn(d,0);var f=d.read_shift(1),h=!!(f&136),p=!1,v=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,h=!0;break;case 49:p=!0,h=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var g=0,x=521;f==2&&(g=d.read_shift(2)),d.l+=3,f!=2&&(g=d.read_shift(4)),g>1048576&&(g=1e6),f!=2&&(x=d.read_shift(2));var b=d.read_shift(2),m=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(m=e[d[d.l]]),d.l+=1,d.l+=2),v&&(d.l+=36);for(var y=[],_={},w=Math.min(d.length,f==2?521:x-10-(p?264:0)),j=v?32:11;d.l<w&&d[d.l]!=13;)switch(_={},_.name=Bp.utils.decode(m,d.slice(d.l,d.l+j)).replace(/[\u0000\r\n].*$/g,""),d.l+=j,_.type=String.fromCharCode(d.read_shift(1)),f!=2&&!v&&(_.offset=d.read_shift(4)),_.len=d.read_shift(1),f==2&&(_.offset=d.read_shift(2)),_.dec=d.read_shift(1),_.name.length&&y.push(_),f!=2&&(d.l+=v?13:14),_.type){case"B":(!p||_.len!=8)&&c.WTF&&console.log("Skipping "+_.name+":"+_.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+_.name+":"+_.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+_.type)}if(d[d.l]!==13&&(d.l=x-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=x;var S=0,E=0;for(u[0]=[],E=0;E!=y.length;++E)u[0][E]=y[E].name;for(;g-- >0;){if(d[d.l]===42){d.l+=b;continue}for(++d.l,u[++S]=[],E=0,E=0;E!=y.length;++E){var N=d.slice(d.l,d.l+y[E].len);d.l+=y[E].len,Fn(N,0);var A=Bp.utils.decode(m,N);switch(y[E].type){case"C":A.trim().length&&(u[S][E]=A.replace(/\s+$/,""));break;case"D":A.length===8?u[S][E]=new Date(+A.slice(0,4),+A.slice(4,6)-1,+A.slice(6,8)):u[S][E]=A;break;case"F":u[S][E]=parseFloat(A.trim());break;case"+":case"I":u[S][E]=v?N.read_shift(-4,"i")^2147483648:N.read_shift(4,"i");break;case"L":switch(A.trim().toUpperCase()){case"Y":case"T":u[S][E]=!0;break;case"N":case"F":u[S][E]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+A+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[S][E]="##MEMO##"+(v?parseInt(A.trim(),10):N.read_shift(4));break;case"N":A=A.replace(/\u0000/g,"").trim(),A&&A!="."&&(u[S][E]=+A||0);break;case"@":u[S][E]=new Date(N.read_shift(-8,"f")-621356832e5);break;case"T":u[S][E]=new Date((N.read_shift(4)-2440588)*864e5+N.read_shift(4));break;case"Y":u[S][E]=N.read_shift(4,"i")/1e4+N.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[S][E]=-N.read_shift(-8,"f");break;case"B":if(p&&y[E].len==8){u[S][E]=N.read_shift(8,"f");break}case"G":case"P":N.l+=y[E].len;break;case"0":if(y[E].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+y[E].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=y,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=ku(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(l,c){try{return wl(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function s(l,c){var u=c||{};if(+u.codepage>=0&&xf(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=An(),f=Zp(l,{header:1,raw:!0,cellDates:!0}),h=f[0],p=f.slice(1),v=l["!cols"]||[],g=0,x=0,b=0,m=1;for(g=0;g<h.length;++g){if(((v[g]||{}).DBF||{}).name){h[g]=v[g].DBF.name,++b;continue}if(h[g]!=null){if(++b,typeof h[g]=="number"&&(h[g]=h[g].toString(10)),typeof h[g]!="string")throw new Error("DBF Invalid column name "+h[g]+" |"+typeof h[g]+"|");if(h.indexOf(h[g])!==g){for(x=0;x<1024;++x)if(h.indexOf(h[g]+"_"+x)==-1){h[g]+="_"+x;break}}}}var y=At(l["!ref"]),_=[],w=[],j=[];for(g=0;g<=y.e.c-y.s.c;++g){var S="",E="",N=0,A=[];for(x=0;x<p.length;++x)p[x][g]!=null&&A.push(p[x][g]);if(A.length==0||h[g]==null){_[g]="?";continue}for(x=0;x<A.length;++x){switch(typeof A[x]){case"number":E="B";break;case"string":E="C";break;case"boolean":E="L";break;case"object":E=A[x]instanceof Date?"D":"C";break;default:E="C"}N=Math.max(N,String(A[x]).length),S=S&&S!=E?"C":E}N>250&&(N=250),E=((v[g]||{}).DBF||{}).type,E=="C"&&v[g].DBF.len>N&&(N=v[g].DBF.len),S=="B"&&E=="N"&&(S="N",j[g]=v[g].DBF.dec,N=v[g].DBF.len),w[g]=S=="C"||E=="N"?N:i[S]||0,m+=w[g],_[g]=S}var O=d.next(32);for(O.write_shift(4,318902576),O.write_shift(4,p.length),O.write_shift(2,296+32*b),O.write_shift(2,m),g=0;g<4;++g)O.write_shift(4,0);for(O.write_shift(4,0|(+t[wP]||3)<<8),g=0,x=0;g<h.length;++g)if(h[g]!=null){var D=d.next(32),k=(h[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);D.write_shift(1,k,"sbcs"),D.write_shift(1,_[g]=="?"?"C":_[g],"sbcs"),D.write_shift(4,x),D.write_shift(1,w[g]||i[_[g]]||0),D.write_shift(1,j[g]||0),D.write_shift(1,2),D.write_shift(4,0),D.write_shift(1,0),D.write_shift(4,0),D.write_shift(4,0),x+=w[g]||i[_[g]]||0}var V=d.next(264);for(V.write_shift(4,13),g=0;g<65;++g)V.write_shift(4,0);for(g=0;g<p.length;++g){var K=d.next(m);for(K.write_shift(1,0),x=0;x<h.length;++x)if(h[x]!=null)switch(_[x]){case"L":K.write_shift(1,p[g][x]==null?63:p[g][x]?84:70);break;case"B":K.write_shift(8,p[g][x]||0,"f");break;case"N":var ie="0";for(typeof p[g][x]=="number"&&(ie=p[g][x].toFixed(j[x]||0)),b=0;b<w[x]-ie.length;++b)K.write_shift(1,32);K.write_shift(1,ie,"sbcs");break;case"D":p[g][x]?(K.write_shift(4,("0000"+p[g][x].getFullYear()).slice(-4),"sbcs"),K.write_shift(2,("00"+(p[g][x].getMonth()+1)).slice(-2),"sbcs"),K.write_shift(2,("00"+p[g][x].getDate()).slice(-2),"sbcs")):K.write_shift(8,"00000000","sbcs");break;case"C":var G=String(p[g][x]!=null?p[g][x]:"").slice(0,w[x]);for(K.write_shift(1,G,"sbcs"),b=0;b<w[x]-G.length;++b)K.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:s}}(),fU=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+$r(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,p){var v=e[p];return typeof v=="number"?sE(v):v},n=function(h,p,v){var g=p.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return g==59?h:sE(g)};e["|"]=254;function a(h,p){switch(p.type){case"base64":return i(Fi(h),p);case"binary":return i(h,p);case"buffer":return i(tt&&Buffer.isBuffer(h)?h.toString("binary"):wh(h),p);case"array":return i(Dg(h),p)}throw new Error("Unrecognized type "+p.type)}function i(h,p){var v=h.split(/[\n\r]+/),g=-1,x=-1,b=0,m=0,y=[],_=[],w=null,j={},S=[],E=[],N=[],A=0,O;for(+p.codepage>=0&&xf(+p.codepage);b!==v.length;++b){A=0;var D=v[b].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),k=D.replace(/;;/g,"\0").split(";").map(function(q){return q.replace(/\u0000/g,";")}),V=k[0],K;if(D.length>0)switch(V){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":k[1].charAt(0)=="P"&&_.push(D.slice(3).replace(/;;/g,";"));break;case"C":var ie=!1,G=!1,X=!1,re=!1,de=-1,me=-1;for(m=1;m<k.length;++m)switch(k[m].charAt(0)){case"A":break;case"X":x=parseInt(k[m].slice(1))-1,G=!0;break;case"Y":for(g=parseInt(k[m].slice(1))-1,G||(x=0),O=y.length;O<=g;++O)y[O]=[];break;case"K":K=k[m].slice(1),K.charAt(0)==='"'?K=K.slice(1,K.length-1):K==="TRUE"?K=!0:K==="FALSE"?K=!1:isNaN(Ai(K))?isNaN(bf(K).getDate())||(K=fn(K)):(K=Ai(K),w!==null&&RP(w)&&(K=LP(K))),ie=!0;break;case"E":re=!0;var R=uz(k[m].slice(1),{r:g,c:x});y[g][x]=[y[g][x],R];break;case"S":X=!0,y[g][x]=[y[g][x],"S5S"];break;case"G":break;case"R":de=parseInt(k[m].slice(1))-1;break;case"C":me=parseInt(k[m].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+D)}if(ie&&(y[g][x]&&y[g][x].length==2?y[g][x][0]=K:y[g][x]=K,w=null),X){if(re)throw new Error("SYLK shared formula cannot have own formula");var W=de>-1&&y[de][me];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");y[g][x][1]=dz(W[1],{r:g-de,c:x-me})}break;case"F":var U=0;for(m=1;m<k.length;++m)switch(k[m].charAt(0)){case"X":x=parseInt(k[m].slice(1))-1,++U;break;case"Y":for(g=parseInt(k[m].slice(1))-1,O=y.length;O<=g;++O)y[O]=[];break;case"M":A=parseInt(k[m].slice(1))/20;break;case"F":break;case"G":break;case"P":w=_[parseInt(k[m].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(N=k[m].slice(1).split(" "),O=parseInt(N[0],10);O<=parseInt(N[1],10);++O)A=parseInt(N[2],10),E[O-1]=A===0?{hidden:!0}:{wch:A},$_(E[O-1]);break;case"C":x=parseInt(k[m].slice(1))-1,E[x]||(E[x]={});break;case"R":g=parseInt(k[m].slice(1))-1,S[g]||(S[g]={}),A>0?(S[g].hpt=A,S[g].hpx=S5(A)):A===0&&(S[g].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+D)}U<1&&(w=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+D)}}return S.length>0&&(j["!rows"]=S),E.length>0&&(j["!cols"]=E),p&&p.sheetRows&&(y=y.slice(0,p.sheetRows)),[y,j]}function s(h,p){var v=a(h,p),g=v[0],x=v[1],b=ku(g,p);return $r(x).forEach(function(m){b[m]=x[m]}),b}function l(h,p){return wl(s(h,p),p)}function c(h,p,v,g){var x="C;Y"+(v+1)+";X"+(g+1)+";K";switch(h.t){case"n":x+=h.v||0,h.f&&!h.F&&(x+=";E"+B_(h.f,{r:v,c:g}));break;case"b":x+=h.v?"TRUE":"FALSE";break;case"e":x+=h.w||h.v;break;case"d":x+='"'+(h.w||h.v)+'"';break;case"s":x+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return x}function u(h,p){p.forEach(function(v,g){var x="F;W"+(g+1)+" "+(g+1)+" ";v.hidden?x+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=Xp(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=Yp(v.wpx)),typeof v.wch=="number"&&(x+=Math.round(v.wch))),x.charAt(x.length-1)!=" "&&h.push(x)})}function d(h,p){p.forEach(function(v,g){var x="F;";v.hidden?x+="M0;":v.hpt?x+="M"+20*v.hpt+";":v.hpx&&(x+="M"+20*Qp(v.hpx)+";"),x.length>2&&h.push(x+"R"+(g+1))})}function f(h,p){var v=["ID;PWXL;N;E"],g=[],x=At(h["!ref"]),b,m=Array.isArray(h),y=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),h["!cols"]&&u(v,h["!cols"]),h["!rows"]&&d(v,h["!rows"]),v.push("B;Y"+(x.e.r-x.s.r+1)+";X"+(x.e.c-x.s.c+1)+";D"+[x.s.c,x.s.r,x.e.c,x.e.r].join(" "));for(var _=x.s.r;_<=x.e.r;++_)for(var w=x.s.c;w<=x.e.c;++w){var j=ft({r:_,c:w});b=m?(h[_]||[])[w]:h[j],!(!b||b.v==null&&(!b.f||b.F))&&g.push(c(b,h,_,w))}return v.join(y)+y+g.join(y)+y+"E"+y}return{to_workbook:l,to_sheet:s,from_sheet:f}}(),hU=function(){function e(i,s){switch(s.type){case"base64":return t(Fi(i),s);case"binary":return t(i,s);case"buffer":return t(tt&&Buffer.isBuffer(i)?i.toString("binary"):wh(i),s);case"array":return t(Dg(i),s)}throw new Error("Unrecognized type "+s.type)}function t(i,s){for(var l=i.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=l[d].trim().split(","),p=h[0],v=h[1];++d;for(var g=l[d]||"";(g.match(/["]/g)||[]).length&1&&d<l.length-1;)g+=`
`+l[++d];switch(g=g.trim(),+p){case-1:if(g==="BOT"){f[++c]=[],u=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?f[c][u]=!0:g==="FALSE"?f[c][u]=!1:isNaN(Ai(v))?isNaN(bf(v).getDate())?f[c][u]=v:f[c][u]=fn(v):f[c][u]=Ai(v),++u;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),f[c][u++]=g!==""?g:null;break}if(g==="EOD")break}}return s&&s.sheetRows&&(f=f.slice(0,s.sheetRows)),f}function r(i,s){return ku(e(i,s),s)}function n(i,s){return wl(r(i,s),s)}var a=function(){var i=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},s=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=At(c["!ref"]),f,h=Array.isArray(c);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,d.e.r-d.s.r+1,""),i(u,"TUPLES",0,d.e.c-d.s.c+1,""),i(u,"DATA",0,0,"");for(var p=d.s.r;p<=d.e.r;++p){s(u,-1,0,"BOT");for(var v=d.s.c;v<=d.e.c;++v){var g=ft({r:p,c:v});if(f=h?(c[p]||[])[v]:c[g],!f){s(u,1,0,"");continue}switch(f.t){case"n":var x=f.w;!x&&f.v!=null&&(x=f.v),x==null?f.f&&!f.F?s(u,1,0,"="+f.f):s(u,1,0,""):s(u,0,x,"V");break;case"b":s(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":s(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Ks(f.z||Gt[14],On(fn(f.v)))),s(u,0,f.w,"V");break;default:s(u,1,0,"")}}}s(u,-1,0,"EOD");var b=`\r
`,m=u.join(b);return m}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),b5=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var p=f.split(`
`),v=-1,g=-1,x=0,b=[];x!==p.length;++x){var m=p[x].trim().split(":");if(m[0]==="cell"){var y=wr(m[1]);if(b.length<=y.r)for(v=b.length;v<=y.r;++v)b[v]||(b[v]=[]);switch(v=y.r,g=y.c,m[2]){case"t":b[v][g]=e(m[3]);break;case"v":b[v][g]=+m[3];break;case"vtf":var _=m[m.length-1];case"vtc":switch(m[3]){case"nl":b[v][g]=!!+m[4];break;default:b[v][g]=+m[4];break}m[2]=="vtf"&&(b[v][g]=[b[v][g],_])}}}return h&&h.sheetRows&&(b=b.slice(0,h.sheetRows)),b}function n(f,h){return ku(r(f,h),h)}function a(f,h){return wl(n(f,h),h)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),s=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],p=[],v,g="",x=Xn(f["!ref"]),b=Array.isArray(f),m=x.s.r;m<=x.e.r;++m)for(var y=x.s.c;y<=x.e.c;++y)if(g=ft({r:m,c:y}),v=b?(f[m]||[])[y]:f[g],!(!v||v.v==null||v.t==="z")){switch(p=["cell",g,"t"],v.t){case"s":case"str":p.push(t(v.v));break;case"n":v.f?(p[2]="vtf",p[3]="n",p[4]=v.v,p[5]=t(v.f)):(p[2]="v",p[3]=v.v);break;case"b":p[2]="vt"+(v.f?"f":"c"),p[3]="nl",p[4]=v.v?"1":"0",p[5]=t(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var _=On(fn(v.v));p[2]="vtc",p[3]="nd",p[4]=""+_,p[5]=v.w||Ks(v.z||Gt[14],_);break;case"e":continue}h.push(p.join(":"))}return h.push("sheet:c:"+(x.e.c-x.s.c+1)+":r:"+(x.e.r-x.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[i,s,l,s,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),pU=function(){function e(d,f,h,p,v){v.raw?f[h][p]=d:d===""||(d==="TRUE"?f[h][p]=!0:d==="FALSE"?f[h][p]=!1:isNaN(Ai(d))?isNaN(bf(d).getDate())?f[h][p]=d:f[h][p]=fn(d):f[h][p]=Ai(d))}function t(d,f){var h=f||{},p=[];if(!d||d.length===0)return p;for(var v=d.split(/[\r\n]/),g=v.length-1;g>=0&&v[g].length===0;)--g;for(var x=10,b=0,m=0;m<=g;++m)b=v[m].indexOf(" "),b==-1?b=v[m].length:b++,x=Math.max(x,b);for(m=0;m<=g;++m){p[m]=[];var y=0;for(e(v[m].slice(0,x).trim(),p,m,y,h),y=1;y<=(v[m].length-x)/10+1;++y)e(v[m].slice(x+(y-1)*10,x+y*10).trim(),p,m,y,h)}return h.sheetRows&&(p=p.slice(0,h.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,p=0,v=0;p<d.length;++p)(v=d.charCodeAt(p))==34?h=!h:!h&&v in r&&(f[v]=(f[v]||0)+1);v=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&v.push([f[p],p]);if(!v.length){f=n;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&v.push([f[p],p])}return v.sort(function(g,x){return g[0]-x[0]||n[g[1]]-n[x[1]]}),r[v.pop()[1]]||44}function i(d,f){var h=f||{},p="",v=h.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(p=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(p=d.charAt(4),d=d.slice(6)):p=a(d.slice(0,1024)):h&&h.FS?p=h.FS:p=a(d.slice(0,1024));var x=0,b=0,m=0,y=0,_=0,w=p.charCodeAt(0),j=!1,S=0,E=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var N=h.dateNF!=null?OB(h.dateNF):null;function A(){var O=d.slice(y,_),D={};if(O.charAt(0)=='"'&&O.charAt(O.length-1)=='"'&&(O=O.slice(1,-1).replace(/""/g,'"')),O.length===0)D.t="z";else if(h.raw)D.t="s",D.v=O;else if(O.trim().length===0)D.t="s",D.v=O;else if(O.charCodeAt(0)==61)O.charCodeAt(1)==34&&O.charCodeAt(O.length-1)==34?(D.t="s",D.v=O.slice(2,-1).replace(/""/g,'"')):fz(O)?(D.t="n",D.f=O.slice(1)):(D.t="s",D.v=O);else if(O=="TRUE")D.t="b",D.v=!0;else if(O=="FALSE")D.t="b",D.v=!1;else if(!isNaN(m=Ai(O)))D.t="n",h.cellText!==!1&&(D.w=O),D.v=m;else if(!isNaN(bf(O).getDate())||N&&O.match(N)){D.z=h.dateNF||Gt[14];var k=0;N&&O.match(N)&&(O=kB(O,h.dateNF,O.match(N)||[]),k=1),h.cellDates?(D.t="d",D.v=fn(O,k)):(D.t="n",D.v=On(fn(O,k))),h.cellText!==!1&&(D.w=Ks(D.z,D.v instanceof Date?On(D.v):D.v)),h.cellNF||delete D.z}else D.t="s",D.v=O;if(D.t=="z"||(h.dense?(v[x]||(v[x]=[]),v[x][b]=D):v[ft({c:b,r:x})]=D),y=_+1,E=d.charCodeAt(y),g.e.c<b&&(g.e.c=b),g.e.r<x&&(g.e.r=x),S==w)++b;else if(b=0,++x,h.sheetRows&&h.sheetRows<=x)return!0}e:for(;_<d.length;++_)switch(S=d.charCodeAt(_)){case 34:E===34&&(j=!j);break;case w:case 10:case 13:if(!j&&A())break e;break}return _-y>0&&A(),v["!ref"]=nr(g),v}function s(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?i(d,f):ku(t(d,f),f)}function l(d,f){var h="",p=f.type=="string"?[0,0,0,0]:NV(d,f);switch(f.type){case"base64":h=Fi(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof Bp<"u"||(h=tt&&Buffer.isBuffer(d)?d.toString("binary"):wh(d));break;case"array":h=Dg(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?h=Bd(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=Bd(h):f.type=="binary"&&typeof Bp<"u",h.slice(0,19)=="socialcalc:version:"?b5.to_sheet(f.type=="string"?h:Bd(h),f):s(h,f)}function c(d,f){return wl(l(d,f),f)}function u(d){for(var f=[],h=At(d["!ref"]),p,v=Array.isArray(d),g=h.s.r;g<=h.e.r;++g){for(var x=[],b=h.s.c;b<=h.e.c;++b){var m=ft({r:g,c:b});if(p=v?(d[g]||[])[b]:d[m],!p||p.v==null){x.push("          ");continue}for(var y=(p.w||(Bi(p),p.w)||"").slice(0,10);y.length<10;)y+=" ";x.push(y+(b===0?" ":""))}f.push(x.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}(),LE=function(){function e(R,W,U){if(R){Fn(R,R.l||0);for(var q=U.Enum||de;R.l<R.length;){var se=R.read_shift(2),je=q[se]||q[65535],ee=R.read_shift(2),Y=R.l+ee,ne=je.f&&je.f(R,ee,U);if(R.l=Y,W(ne,je,se))return}}}function t(R,W){switch(W.type){case"base64":return r(Ia(Fi(R)),W);case"binary":return r(Ia(R),W);case"buffer":case"array":return r(R,W)}throw"Unsupported type "+W.type}function r(R,W){if(!R)return R;var U=W||{},q=U.dense?[]:{},se="Sheet1",je="",ee=0,Y={},ne=[],be=[],ae={s:{r:0,c:0},e:{r:0,c:0}},Ue=U.sheetRows||0;if(R[2]==0&&(R[3]==8||R[3]==9)&&R.length>=16&&R[14]==5&&R[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(R[2]==2)U.Enum=de,e(R,function(we,Xt,Br){switch(Br){case 0:U.vers=we,we>=4096&&(U.qpro=!0);break;case 6:ae=we;break;case 204:we&&(je=we);break;case 222:je=we;break;case 15:case 51:U.qpro||(we[1].v=we[1].v.slice(1));case 13:case 14:case 16:Br==14&&(we[2]&112)==112&&(we[2]&15)>1&&(we[2]&15)<15&&(we[1].z=U.dateNF||Gt[14],U.cellDates&&(we[1].t="d",we[1].v=LP(we[1].v))),U.qpro&&we[3]>ee&&(q["!ref"]=nr(ae),Y[se]=q,ne.push(se),q=U.dense?[]:{},ae={s:{r:0,c:0},e:{r:0,c:0}},ee=we[3],se=je||"Sheet"+(ee+1),je="");var Zn=U.dense?(q[we[0].r]||[])[we[0].c]:q[ft(we[0])];if(Zn){Zn.t=we[1].t,Zn.v=we[1].v,we[1].z!=null&&(Zn.z=we[1].z),we[1].f!=null&&(Zn.f=we[1].f);break}U.dense?(q[we[0].r]||(q[we[0].r]=[]),q[we[0].r][we[0].c]=we[1]):q[ft(we[0])]=we[1];break}},U);else if(R[2]==26||R[2]==14)U.Enum=me,R[2]==14&&(U.qpro=!0,R.l=0),e(R,function(we,Xt,Br){switch(Br){case 204:se=we;break;case 22:we[1].v=we[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(we[3]>ee&&(q["!ref"]=nr(ae),Y[se]=q,ne.push(se),q=U.dense?[]:{},ae={s:{r:0,c:0},e:{r:0,c:0}},ee=we[3],se="Sheet"+(ee+1)),Ue>0&&we[0].r>=Ue)break;U.dense?(q[we[0].r]||(q[we[0].r]=[]),q[we[0].r][we[0].c]=we[1]):q[ft(we[0])]=we[1],ae.e.c<we[0].c&&(ae.e.c=we[0].c),ae.e.r<we[0].r&&(ae.e.r=we[0].r);break;case 27:we[14e3]&&(be[we[14e3][0]]=we[14e3][1]);break;case 1537:be[we[0]]=we[1],we[0]==ee&&(se=we[1]);break}},U);else throw new Error("Unrecognized LOTUS BOF "+R[2]);if(q["!ref"]=nr(ae),Y[je||se]=q,ne.push(je||se),!be.length)return{SheetNames:ne,Sheets:Y};for(var Oe={},st=[],ze=0;ze<be.length;++ze)Y[ne[ze]]?(st.push(be[ze]||ne[ze]),Oe[be[ze]]=Y[be[ze]]||Y[ne[ze]]):(st.push(be[ze]),Oe[be[ze]]={"!ref":"A1"});return{SheetNames:st,Sheets:Oe}}function n(R,W){var U=W||{};if(+U.codepage>=0&&xf(+U.codepage),U.type=="string")throw new Error("Cannot write WK1 to JS string");var q=An(),se=At(R["!ref"]),je=Array.isArray(R),ee=[];ye(q,0,i(1030)),ye(q,6,c(se));for(var Y=Math.min(se.e.r,8191),ne=se.s.r;ne<=Y;++ne)for(var be=Mr(ne),ae=se.s.c;ae<=se.e.c;++ae){ne===se.s.r&&(ee[ae]=Gr(ae));var Ue=ee[ae]+be,Oe=je?(R[ne]||[])[ae]:R[Ue];if(!(!Oe||Oe.t=="z"))if(Oe.t=="n")(Oe.v|0)==Oe.v&&Oe.v>=-32768&&Oe.v<=32767?ye(q,13,p(ne,ae,Oe.v)):ye(q,14,g(ne,ae,Oe.v));else{var st=Bi(Oe);ye(q,15,f(ne,ae,st.slice(0,239)))}}return ye(q,1),q.end()}function a(R,W){var U=W||{};if(+U.codepage>=0&&xf(+U.codepage),U.type=="string")throw new Error("Cannot write WK3 to JS string");var q=An();ye(q,0,s(R));for(var se=0,je=0;se<R.SheetNames.length;++se)(R.Sheets[R.SheetNames[se]]||{})["!ref"]&&ye(q,27,re(R.SheetNames[se],je++));var ee=0;for(se=0;se<R.SheetNames.length;++se){var Y=R.Sheets[R.SheetNames[se]];if(!(!Y||!Y["!ref"])){for(var ne=At(Y["!ref"]),be=Array.isArray(Y),ae=[],Ue=Math.min(ne.e.r,8191),Oe=ne.s.r;Oe<=Ue;++Oe)for(var st=Mr(Oe),ze=ne.s.c;ze<=ne.e.c;++ze){Oe===ne.s.r&&(ae[ze]=Gr(ze));var we=ae[ze]+st,Xt=be?(Y[Oe]||[])[ze]:Y[we];if(!(!Xt||Xt.t=="z"))if(Xt.t=="n")ye(q,23,A(Oe,ze,ee,Xt.v));else{var Br=Bi(Xt);ye(q,22,S(Oe,ze,ee,Br.slice(0,239)))}}++ee}}return ye(q,1),q.end()}function i(R){var W=oe(2);return W.write_shift(2,R),W}function s(R){var W=oe(26);W.write_shift(2,4096),W.write_shift(2,4),W.write_shift(4,0);for(var U=0,q=0,se=0,je=0;je<R.SheetNames.length;++je){var ee=R.SheetNames[je],Y=R.Sheets[ee];if(!(!Y||!Y["!ref"])){++se;var ne=Xn(Y["!ref"]);U<ne.e.r&&(U=ne.e.r),q<ne.e.c&&(q=ne.e.c)}}return U>8191&&(U=8191),W.write_shift(2,U),W.write_shift(1,se),W.write_shift(1,q),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(1,1),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(4,0),W}function l(R,W,U){var q={s:{c:0,r:0},e:{c:0,r:0}};return W==8&&U.qpro?(q.s.c=R.read_shift(1),R.l++,q.s.r=R.read_shift(2),q.e.c=R.read_shift(1),R.l++,q.e.r=R.read_shift(2),q):(q.s.c=R.read_shift(2),q.s.r=R.read_shift(2),W==12&&U.qpro&&(R.l+=2),q.e.c=R.read_shift(2),q.e.r=R.read_shift(2),W==12&&U.qpro&&(R.l+=2),q.s.c==65535&&(q.s.c=q.e.c=q.s.r=q.e.r=0),q)}function c(R){var W=oe(8);return W.write_shift(2,R.s.c),W.write_shift(2,R.s.r),W.write_shift(2,R.e.c),W.write_shift(2,R.e.r),W}function u(R,W,U){var q=[{c:0,r:0},{t:"n",v:0},0,0];return U.qpro&&U.vers!=20768?(q[0].c=R.read_shift(1),q[3]=R.read_shift(1),q[0].r=R.read_shift(2),R.l+=2):(q[2]=R.read_shift(1),q[0].c=R.read_shift(2),q[0].r=R.read_shift(2)),q}function d(R,W,U){var q=R.l+W,se=u(R,W,U);if(se[1].t="s",U.vers==20768){R.l++;var je=R.read_shift(1);return se[1].v=R.read_shift(je,"utf8"),se}return U.qpro&&R.l++,se[1].v=R.read_shift(q-R.l,"cstr"),se}function f(R,W,U){var q=oe(7+U.length);q.write_shift(1,255),q.write_shift(2,W),q.write_shift(2,R),q.write_shift(1,39);for(var se=0;se<q.length;++se){var je=U.charCodeAt(se);q.write_shift(1,je>=128?95:je)}return q.write_shift(1,0),q}function h(R,W,U){var q=u(R,W,U);return q[1].v=R.read_shift(2,"i"),q}function p(R,W,U){var q=oe(7);return q.write_shift(1,255),q.write_shift(2,W),q.write_shift(2,R),q.write_shift(2,U,"i"),q}function v(R,W,U){var q=u(R,W,U);return q[1].v=R.read_shift(8,"f"),q}function g(R,W,U){var q=oe(13);return q.write_shift(1,255),q.write_shift(2,W),q.write_shift(2,R),q.write_shift(8,U,"f"),q}function x(R,W,U){var q=R.l+W,se=u(R,W,U);if(se[1].v=R.read_shift(8,"f"),U.qpro)R.l=q;else{var je=R.read_shift(2);_(R.slice(R.l,R.l+je),se),R.l+=je}return se}function b(R,W,U){var q=W&32768;return W&=-32769,W=(q?R:0)+(W>=8192?W-16384:W),(q?"":"$")+(U?Gr(W):Mr(W))}var m={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},y=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function _(R,W){Fn(R,0);for(var U=[],q=0,se="",je="",ee="",Y="";R.l<R.length;){var ne=R[R.l++];switch(ne){case 0:U.push(R.read_shift(8,"f"));break;case 1:je=b(W[0].c,R.read_shift(2),!0),se=b(W[0].r,R.read_shift(2),!1),U.push(je+se);break;case 2:{var be=b(W[0].c,R.read_shift(2),!0),ae=b(W[0].r,R.read_shift(2),!1);je=b(W[0].c,R.read_shift(2),!0),se=b(W[0].r,R.read_shift(2),!1),U.push(be+ae+":"+je+se)}break;case 3:if(R.l<R.length){console.error("WK1 premature formula end");return}break;case 4:U.push("("+U.pop()+")");break;case 5:U.push(R.read_shift(2));break;case 6:{for(var Ue="";ne=R[R.l++];)Ue+=String.fromCharCode(ne);U.push('"'+Ue.replace(/"/g,'""')+'"')}break;case 8:U.push("-"+U.pop());break;case 23:U.push("+"+U.pop());break;case 22:U.push("NOT("+U.pop()+")");break;case 20:case 21:Y=U.pop(),ee=U.pop(),U.push(["AND","OR"][ne-20]+"("+ee+","+Y+")");break;default:if(ne<32&&y[ne])Y=U.pop(),ee=U.pop(),U.push(ee+y[ne]+Y);else if(m[ne]){if(q=m[ne][1],q==69&&(q=R[R.l++]),q>U.length){console.error("WK1 bad formula parse 0x"+ne.toString(16)+":|"+U.join("|")+"|");return}var Oe=U.slice(-q);U.length-=q,U.push(m[ne][0]+"("+Oe.join(",")+")")}else return ne<=7?console.error("WK1 invalid opcode "+ne.toString(16)):ne<=24?console.error("WK1 unsupported op "+ne.toString(16)):ne<=30?console.error("WK1 invalid opcode "+ne.toString(16)):ne<=115?console.error("WK1 unsupported function opcode "+ne.toString(16)):console.error("WK1 unrecognized opcode "+ne.toString(16))}}U.length==1?W[1].f=""+U[0]:console.error("WK1 bad formula parse |"+U.join("|")+"|")}function w(R){var W=[{c:0,r:0},{t:"n",v:0},0];return W[0].r=R.read_shift(2),W[3]=R[R.l++],W[0].c=R[R.l++],W}function j(R,W){var U=w(R);return U[1].t="s",U[1].v=R.read_shift(W-4,"cstr"),U}function S(R,W,U,q){var se=oe(6+q.length);se.write_shift(2,R),se.write_shift(1,U),se.write_shift(1,W),se.write_shift(1,39);for(var je=0;je<q.length;++je){var ee=q.charCodeAt(je);se.write_shift(1,ee>=128?95:ee)}return se.write_shift(1,0),se}function E(R,W){var U=w(R);U[1].v=R.read_shift(2);var q=U[1].v>>1;if(U[1].v&1)switch(q&7){case 0:q=(q>>3)*5e3;break;case 1:q=(q>>3)*500;break;case 2:q=(q>>3)/20;break;case 3:q=(q>>3)/200;break;case 4:q=(q>>3)/2e3;break;case 5:q=(q>>3)/2e4;break;case 6:q=(q>>3)/16;break;case 7:q=(q>>3)/64;break}return U[1].v=q,U}function N(R,W){var U=w(R),q=R.read_shift(4),se=R.read_shift(4),je=R.read_shift(2);if(je==65535)return q===0&&se===3221225472?(U[1].t="e",U[1].v=15):q===0&&se===3489660928?(U[1].t="e",U[1].v=42):U[1].v=0,U;var ee=je&32768;return je=(je&32767)-16446,U[1].v=(1-ee*2)*(se*Math.pow(2,je+32)+q*Math.pow(2,je)),U}function A(R,W,U,q){var se=oe(14);if(se.write_shift(2,R),se.write_shift(1,U),se.write_shift(1,W),q==0)return se.write_shift(4,0),se.write_shift(4,0),se.write_shift(2,65535),se;var je=0,ee=0,Y=0,ne=0;return q<0&&(je=1,q=-q),ee=Math.log2(q)|0,q/=Math.pow(2,ee-31),ne=q>>>0,ne&2147483648||(q/=2,++ee,ne=q>>>0),q-=ne,ne|=2147483648,ne>>>=0,q*=Math.pow(2,32),Y=q>>>0,se.write_shift(4,Y),se.write_shift(4,ne),ee+=16383+(je?32768:0),se.write_shift(2,ee),se}function O(R,W){var U=N(R);return R.l+=W-14,U}function D(R,W){var U=w(R),q=R.read_shift(4);return U[1].v=q>>6,U}function k(R,W){var U=w(R),q=R.read_shift(8,"f");return U[1].v=q,U}function V(R,W){var U=k(R);return R.l+=W-10,U}function K(R,W){return R[R.l+W-1]==0?R.read_shift(W,"cstr"):""}function ie(R,W){var U=R[R.l++];U>W-1&&(U=W-1);for(var q="";q.length<U;)q+=String.fromCharCode(R[R.l++]);return q}function G(R,W,U){if(!(!U.qpro||W<21)){var q=R.read_shift(1);R.l+=17,R.l+=1,R.l+=2;var se=R.read_shift(W-21,"cstr");return[q,se]}}function X(R,W){for(var U={},q=R.l+W;R.l<q;){var se=R.read_shift(2);if(se==14e3){for(U[se]=[0,""],U[se][0]=R.read_shift(2);R[R.l];)U[se][1]+=String.fromCharCode(R[R.l]),R.l++;R.l++}}return U}function re(R,W){var U=oe(5+R.length);U.write_shift(2,14e3),U.write_shift(2,W);for(var q=0;q<R.length;++q){var se=R.charCodeAt(q);U[U.l++]=se>127?95:se}return U[U.l++]=0,U}var de={0:{n:"BOF",f:m5},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:x},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:K},222:{n:"SHEETNAMELP",f:ie},65535:{n:""}},me={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:j},23:{n:"NUMBER17",f:N},24:{n:"NUMBER18",f:E},25:{n:"FORMULA19",f:O},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:X},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:D},38:{n:"??"},39:{n:"NUMBER27",f:k},40:{n:"FORMULA28",f:V},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:K},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:G},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}(),mU=/^\s|\s$|[\t\n\r]/;function w5(e,t){if(!t.bookSST)return"";var r=[ir];r[r.length]=xe("sst",null,{xmlns:Ou[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],i="<si>";a.r?i+=a.r:(i+="<t",a.t||(a.t=""),a.t.match(mU)&&(i+=' xml:space="preserve"'),i+=">"+ut(a.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function gU(e){return[e.read_shift(4),e.read_shift(4)]}function vU(e,t){return t||(t=oe(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var xU=l9;function yU(e){var t=An();fe(t,159,vU(e));for(var r=0;r<e.length;++r)fe(t,19,xU(e[r]));return fe(t,160),t.end()}function bU(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function _5(e){var t=0,r,n=bU(e),a=n.length+1,i,s,l,c,u;for(r=sl(a),r[0]=n.length,i=1;i!=a;++i)r[i]=n[i-1];for(i=a-1;i>=0;--i)s=r[i],l=t&16384?1:0,c=t<<1&32767,u=l|c,t=u^s;return t^52811}var wU=function(){function e(a,i){switch(i.type){case"base64":return t(Fi(a),i);case"binary":return t(a,i);case"buffer":return t(tt&&Buffer.isBuffer(a)?a.toString("binary"):wh(a),i);case"array":return t(Dg(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){var s=i||{},l=s.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var h=/\\\w+\b/g,p=0,v,g=-1;v=h.exec(d);){switch(v[0]){case"\\cell":var x=d.slice(p,h.lastIndex-v[0].length);if(x[0]==" "&&(x=x.slice(1)),++g,x.length){var b={v:x,t:"s"};Array.isArray(l)?l[f][g]=b:l[ft({r:f,c:g})]=b}break}p=h.lastIndex}g>u.e.c&&(u.e.c=g)}),l["!ref"]=nr(u),l}function r(a,i){return wl(e(a,i),i)}function n(a){for(var i=["{\\rtf1\\ansi"],s=At(a["!ref"]),l,c=Array.isArray(a),u=s.s.r;u<=s.e.r;++u){i.push("\\trowd\\trautofit1");for(var d=s.s.c;d<=s.e.c;++d)i.push("\\cellx"+(d+1));for(i.push("\\pard\\intbl"),d=s.s.c;d<=s.e.c;++d){var f=ft({r:u,c:d});l=c?(a[u]||[])[d]:a[f],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(Bi(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function $E(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}var _U=6,Ci=_U;function Xp(e){return Math.floor((e+Math.round(128/Ci)/256)*Ci)}function Yp(e){return Math.floor((e-5)/Ci*100+.5)/100}function T1(e){return Math.round((e*Ci+5)/Ci*256)/256}function $_(e){e.width?(e.wpx=Xp(e.width),e.wch=Yp(e.wpx),e.MDW=Ci):e.wpx?(e.wch=Yp(e.wpx),e.width=T1(e.wch),e.MDW=Ci):typeof e.wch=="number"&&(e.width=T1(e.wch),e.wpx=Xp(e.width),e.MDW=Ci),e.customWidth&&delete e.customWidth}var jU=96,j5=jU;function Qp(e){return e*96/j5}function S5(e){return e*j5/96}function SU(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=xe("numFmt",null,{numFmtId:n,formatCode:ut(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=xe("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function EU(e){var t=[];return t[t.length]=xe("cellXfs",null),e.forEach(function(r){t[t.length]=xe("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=xe("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function E5(e,t){var r=[ir,xe("styleSheet",null,{xmlns:Ou[0],"xmlns:vt":br.vt})],n;return e.SSF&&(n=SU(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=EU(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function NU(e,t){var r=e.read_shift(2),n=Xr(e);return[r,n]}function TU(e,t,r){r||(r=oe(6+4*t.length)),r.write_shift(2,e),_r(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function AU(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=m9(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var s=e.read_shift(1);s!=0&&(n.underline=s);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=p9(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Xr(e),n}function CU(e,t){t||(t=oe(25+4*32)),t.write_shift(2,e.sz*20),g9(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Kp(e.color,t);var n=0;return n=2,t.write_shift(1,n),_r(e.name,t),t.length>t.l?t.slice(0,t.l):t}var OU=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Ex,kU=ii;function FE(e,t){t||(t=oe(4*3+8*7+16*1)),Ex||(Ex=N_(OU));var r=Ex[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(Kp({auto:1},t),Kp({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function PU(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function N5(e,t,r){r||(r=oe(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function od(e,t){return t||(t=oe(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var RU=ii;function IU(e,t){return t||(t=oe(51)),t.write_shift(1,0),od(null,t),od(null,t),od(null,t),od(null,t),od(null,t),t.length>t.l?t.slice(0,t.l):t}function DU(e,t){return t||(t=oe(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),Vp(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function MU(e,t,r){var n=oe(2052);return n.write_shift(4,e),Vp(t,n),Vp(r,n),n.length>n.l?n.slice(0,n.l):n}function LU(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(fe(e,615,Fa(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&fe(e,44,TU(a,t[a]))}),fe(e,616))}}function $U(e){var t=1;fe(e,611,Fa(t)),fe(e,43,CU({sz:12,color:{theme:1},name:"Calibri",family:2})),fe(e,612)}function FU(e){var t=2;fe(e,603,Fa(t)),fe(e,45,FE({patternType:"none"})),fe(e,45,FE({patternType:"gray125"})),fe(e,604)}function BU(e){var t=1;fe(e,613,Fa(t)),fe(e,46,IU()),fe(e,614)}function UU(e){var t=1;fe(e,626,Fa(t)),fe(e,47,N5({numFmtId:0},65535)),fe(e,627)}function zU(e,t){fe(e,617,Fa(t.length)),t.forEach(function(r){fe(e,47,N5(r,0))}),fe(e,618)}function qU(e){var t=1;fe(e,619,Fa(t)),fe(e,48,DU({xfId:0,name:"Normal"})),fe(e,620)}function WU(e){var t=0;fe(e,505,Fa(t)),fe(e,506)}function HU(e){var t=0;fe(e,508,MU(t,"TableStyleMedium9","PivotStyleMedium4")),fe(e,509)}function VU(e,t){var r=An();return fe(r,278),LU(r,e.SSF),$U(r),FU(r),BU(r),UU(r),zU(r,t.cellXfs),qU(r),WU(r),HU(r),fe(r,279),r.end()}function T5(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[ir];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function KU(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Xr(e)}}function GU(e){var t=oe(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),_r(e.name,t),t.slice(0,t.l)}function XU(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function YU(e){var t=oe(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function QU(e,t){var r=oe(8+2*t.length);return r.write_shift(4,e),_r(t,r),r.slice(0,r.l)}function JU(e){return e.l+=4,e.read_shift(4)!=0}function ZU(e,t){var r=oe(8);return r.write_shift(4,e),r.write_shift(4,1),r}function ez(){var e=An();return fe(e,332),fe(e,334,Fa(1)),fe(e,335,GU({name:"XLDAPR",version:12e4,flags:3496657072})),fe(e,336),fe(e,339,QU(1,"XLDAPR")),fe(e,52),fe(e,35,Fa(514)),fe(e,4096,Fa(0)),fe(e,4097,ia(1)),fe(e,36),fe(e,53),fe(e,340),fe(e,337,ZU(1)),fe(e,51,YU([[1,0]])),fe(e,338),fe(e,333),e.end()}function A5(){var e=[ir];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function tz(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=ft(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}var rc=1024;function C5(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[xe("xml",null,{"xmlns:v":Bn.v,"xmlns:o":Bn.o,"xmlns:x":Bn.x,"xmlns:mv":Bn.mv}).replace(/\/>/,">"),xe("o:shapelayout",xe("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),xe("v:shapetype",[xe("v:stroke",null,{joinstyle:"miter"}),xe("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];rc<e*1e3;)rc+=1e3;return t.forEach(function(i){var s=wr(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?xe("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=xe("v:fill",c,l),d={on:"t",obscured:"t"};++rc,a=a.concat(["<v:shape"+_f({id:"_x0000_s"+rc,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,xe("v:shadow",null,d),xe("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ir("x:Anchor",[s.c+1,0,s.r+1,0,s.c+3,20,s.r+5,20].join(",")),Ir("x:AutoFill","False"),Ir("x:Row",String(s.r)),Ir("x:Column",String(s.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function O5(e){var t=[ir,xe("comments",null,{xmlns:Ou[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var i=ut(a.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(ut(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),i.length<=1)t.push(Ir("t",ut(i[0]||"")));else{for(var s=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)s+=`Reply:
    `+i[l]+`
`;t.push(Ir("t",ut(s)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function rz(e,t,r){var n=[ir,xe("ThreadedComments",null,{xmlns:br.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var i="";(a[1]||[]).forEach(function(s,l){if(!s.T){delete s.ID;return}s.a&&t.indexOf(s.a)==-1&&t.push(s.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,s.ID=c.id,s.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),n.push(xe("threadedComment",Ir("text",s.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function nz(e){var t=[ir,xe("personList",null,{xmlns:br.TCMNT,"xmlns:x":Ou[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(xe("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function az(e){var t={};t.iauthor=e.read_shift(4);var r=El(e);return t.rfx=r.s,t.ref=ft(r.s),e.l+=16,t}function iz(e,t){return t==null&&(t=oe(36)),t.write_shift(4,e[1].iauthor),Pu(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var sz=Xr;function oz(e){return _r(e.slice(0,54))}function lz(e){var t=An(),r=[];return fe(t,628),fe(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),fe(t,632,oz(a.a)))})}),fe(t,631),fe(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var i={s:wr(n[0]),e:wr(n[0])};fe(t,635,iz([i,a])),a.t&&a.t.length>0&&fe(t,637,u9(a)),fe(t,636),delete a.iauthor})}),fe(t,634),fe(t,629),t.end()}function cz(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&mt.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var k5=["xlsb","xlsm","xlam","biff8","xla"],uz=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,i,s){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,d=s.length>0?parseInt(s,10)|0:0;return l?d+=t.c:--d,c?u+=t.r:--u,a+(l?"":"$")+Gr(d)+(c?"":"$")+Mr(u)}return function(a,i){return t=i,a.replace(e,r)}}(),F_=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,B_=function(){return function(t,r){return t.replace(F_,function(n,a,i,s,l,c){var u=R_(s)-(i?0:r.c),d=P_(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",h=u==0?"":i?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function dz(e,t){return e.replace(F_,function(r,n,a,i,s,l){return n+(a=="$"?a+i:Gr(R_(i)+t.c))+(s=="$"?s+l:Mr(P_(l)+t.r))})}function fz(e){return e.length!=1}function Jt(e){e.l+=1}function Gs(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function P5(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return R5(e);r.biff==12&&(n=4)}var a=e.read_shift(n),i=e.read_shift(n),s=Gs(e),l=Gs(e);return{s:{r:a,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function R5(e){var t=Gs(e),r=Gs(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function hz(e,t,r){if(r.biff<8)return R5(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),i=Gs(e),s=Gs(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:s[0],cRel:s[1],rRel:s[2]}}}function I5(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return pz(e);var n=e.read_shift(r&&r.biff==12?4:2),a=Gs(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function pz(e){var t=Gs(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function mz(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function gz(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return vz(e);var a=e.read_shift(n>=12?4:2),i=e.read_shift(2),s=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;a>524287;)a-=1048576;if(s==1)for(;i>8191;)i=i-16384;return{r:a,c:i,cRel:s,rRel:l}}function vz(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function xz(e,t,r){var n=(e[e.l++]&96)>>5,a=P5(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function yz(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var s=P5(e,i,r);return[n,a,s]}function bz(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function wz(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,a]}function _z(e,t,r){var n=(e[e.l++]&96)>>5,a=hz(e,t-1,r);return[n,a]}function jz(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function BE(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Sz(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],i=0;i<=n;++i)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function Ez(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Nz(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Tz(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function Az(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function D5(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Cz(e){return e.read_shift(2),D5(e)}function Oz(e){return e.read_shift(2),D5(e)}function kz(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=I5(e,0,r);return[n,a]}function Pz(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=gz(e,0,r);return[n,a]}function Rz(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=I5(e,0,r);return[n,a,i]}function Iz(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[Iq[a],$5[a],n]}function Dz(e,t,r){var n=e[e.l++],a=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:Mz(e);return[a,(i[0]===0?$5:Rq)[i[1]]]}function Mz(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Lz(e,t,r){e.l+=r&&r.biff==2?3:4}function $z(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function Fz(e){return e.l++,Sh[e.read_shift(1)]}function Bz(e){return e.l++,e.read_shift(2)}function Uz(e){return e.l++,e.read_shift(1)!==0}function zz(e){return e.l++,Ru(e)}function qz(e,t,r){return e.l++,v5(e,t-1,r)}function Wz(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=R9(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Sh[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Ru(e);break;case 2:r[1]=L9(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Hz(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],i=0;i!=n;++i)a.push((r.biff==12?El:B9)(e));return a}function Vz(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var i=0,s=[];i!=n&&(s[i]=[]);++i)for(var l=0;l!=a;++l)s[i][l]=Wz(e,r.biff);return s}function Kz(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,i=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function Gz(e,t,r){if(r.biff==5)return Xz(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),i=e.read_shift(4);return[n,a,i]}function Xz(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function Yz(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function Qz(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function Jz(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function Zz(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,a]}var eq=ii,tq=ii,rq=ii;function Eh(e,t,r){return e.l+=2,[mz(e)]}function U_(e){return e.l+=6,[]}var nq=Eh,aq=U_,iq=U_,sq=Eh;function M5(e){return e.l+=2,[m5(e),e.read_shift(2)&1]}var oq=Eh,lq=M5,cq=U_,uq=Eh,dq=Eh,fq=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function hq(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),i=e.read_shift(2),s=fq[r>>2&31];return{ixti:t,coltype:r&3,rt:s,idx:n,c:a,C:i}}function pq(e){return e.l+=2,[e.read_shift(4)]}function mq(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function gq(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function vq(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function xq(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function yq(e){return e.l+=4,[0,0]}var UE={1:{n:"PtgExp",f:$z},2:{n:"PtgTbl",f:rq},3:{n:"PtgAdd",f:Jt},4:{n:"PtgSub",f:Jt},5:{n:"PtgMul",f:Jt},6:{n:"PtgDiv",f:Jt},7:{n:"PtgPower",f:Jt},8:{n:"PtgConcat",f:Jt},9:{n:"PtgLt",f:Jt},10:{n:"PtgLe",f:Jt},11:{n:"PtgEq",f:Jt},12:{n:"PtgGe",f:Jt},13:{n:"PtgGt",f:Jt},14:{n:"PtgNe",f:Jt},15:{n:"PtgIsect",f:Jt},16:{n:"PtgUnion",f:Jt},17:{n:"PtgRange",f:Jt},18:{n:"PtgUplus",f:Jt},19:{n:"PtgUminus",f:Jt},20:{n:"PtgPercent",f:Jt},21:{n:"PtgParen",f:Jt},22:{n:"PtgMissArg",f:Jt},23:{n:"PtgStr",f:qz},26:{n:"PtgSheet",f:mq},27:{n:"PtgEndSheet",f:gq},28:{n:"PtgErr",f:Fz},29:{n:"PtgBool",f:Uz},30:{n:"PtgInt",f:Bz},31:{n:"PtgNum",f:zz},32:{n:"PtgArray",f:jz},33:{n:"PtgFunc",f:Iz},34:{n:"PtgFuncVar",f:Dz},35:{n:"PtgName",f:Kz},36:{n:"PtgRef",f:kz},37:{n:"PtgArea",f:xz},38:{n:"PtgMemArea",f:Yz},39:{n:"PtgMemErr",f:eq},40:{n:"PtgMemNoMem",f:tq},41:{n:"PtgMemFunc",f:Qz},42:{n:"PtgRefErr",f:Jz},43:{n:"PtgAreaErr",f:bz},44:{n:"PtgRefN",f:Pz},45:{n:"PtgAreaN",f:_z},46:{n:"PtgMemAreaN",f:vq},47:{n:"PtgMemNoMemN",f:xq},57:{n:"PtgNameX",f:Gz},58:{n:"PtgRef3d",f:Rz},59:{n:"PtgArea3d",f:yz},60:{n:"PtgRefErr3d",f:Zz},61:{n:"PtgAreaErr3d",f:wz},255:{}},bq={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},wq={1:{n:"PtgElfLel",f:M5},2:{n:"PtgElfRw",f:uq},3:{n:"PtgElfCol",f:nq},6:{n:"PtgElfRwV",f:dq},7:{n:"PtgElfColV",f:sq},10:{n:"PtgElfRadical",f:oq},11:{n:"PtgElfRadicalS",f:cq},13:{n:"PtgElfColS",f:aq},15:{n:"PtgElfColSV",f:iq},16:{n:"PtgElfRadicalLel",f:lq},25:{n:"PtgList",f:hq},29:{n:"PtgSxName",f:pq},255:{}},_q={0:{n:"PtgAttrNoop",f:yq},1:{n:"PtgAttrSemi",f:Az},2:{n:"PtgAttrIf",f:Nz},4:{n:"PtgAttrChoose",f:Sz},8:{n:"PtgAttrGoto",f:Ez},16:{n:"PtgAttrSum",f:Lz},32:{n:"PtgAttrBaxcel",f:BE},33:{n:"PtgAttrBaxcel",f:BE},64:{n:"PtgAttrSpace",f:Cz},65:{n:"PtgAttrSpaceSemi",f:Oz},128:{n:"PtgAttrIfError",f:Tz},255:{}};function jq(e,t,r,n){if(n.biff<8)return ii(e,t);for(var a=e.l+t,i=[],s=0;s!==r.length;++s)switch(r[s][0]){case"PtgArray":r[s][1]=Vz(e,0,n),i.push(r[s][1]);break;case"PtgMemArea":r[s][2]=Hz(e,r[s][1],n),i.push(r[s][2]);break;case"PtgExp":n&&n.biff==12&&(r[s][1][1]=e.read_shift(4),i.push(r[s][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[s][0]}return t=a-e.l,t!==0&&i.push(ii(e,t)),i}function Sq(e,t,r){for(var n=e.l+t,a,i,s=[];n!=e.l;)t=n-e.l,i=e[e.l],a=UE[i]||UE[bq[i]],(i===24||i===25)&&(a=(i===24?wq:_q)[e[e.l+1]]),!a||!a.f?ii(e,t):s.push([a.n,a.f(e,t,r)]);return s}function Eq(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],i=0;i<n.length;++i){var s=n[i];if(s)switch(s[0]){case 2:a.push('"'+s[1].replace(/"/g,'""')+'"');break;default:a.push(s[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var Nq={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Tq(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function L5(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function zE(e,t,r){var n=L5(e,t,r);return n=="#REF"?n:Tq(n,r)}function Gc(e,t,r,n,a){var i=a&&a.biff||8,s={s:{c:0,r:0}},l=[],c,u,d,f=0,h=0,p,v="";if(!e[0]||!e[0][0])return"";for(var g=-1,x="",b=0,m=e[0].length;b<m;++b){var y=e[0][b];switch(y[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),g>=0){switch(e[0][g][1][0]){case 0:x=Vt(" ",e[0][g][1][1]);break;case 1:x=Vt("\r",e[0][g][1][1]);break;default:if(x="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}u=u+x,g=-1}l.push(u+Nq[y[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=zd(y[1][1],s,a),l.push(qd(d,i));break;case"PtgRefN":d=r?zd(y[1][1],r,a):y[1][1],l.push(qd(d,i));break;case"PtgRef3d":f=y[1][1],d=zd(y[1][2],s,a),v=zE(n,f,a),l.push(v+"!"+qd(d,i));break;case"PtgFunc":case"PtgFuncVar":var _=y[1][0],w=y[1][1];_||(_=0),_&=127;var j=_==0?[]:l.slice(-_);l.length-=_,w==="User"&&(w=j.shift()),l.push(w+"("+j.join(",")+")");break;case"PtgBool":l.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(y[1]);break;case"PtgNum":l.push(String(y[1]));break;case"PtgStr":l.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(y[1]);break;case"PtgAreaN":p=NE(y[1][1],r?{s:r}:s,a),l.push(jx(p,a));break;case"PtgArea":p=NE(y[1][1],s,a),l.push(jx(p,a));break;case"PtgArea3d":f=y[1][1],p=y[1][2],v=zE(n,f,a),l.push(v+"!"+jx(p,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=y[1][2];var S=(n.names||[])[h-1]||(n[0]||[])[h],E=S?S.Name:"SH33TJSNAME"+String(h);E&&E.slice(0,6)=="_xlfn."&&!a.xlfn&&(E=E.slice(6)),l.push(E);break;case"PtgNameX":var N=y[1][1];h=y[1][2];var A;if(a.biff<=5)N<0&&(N=-N),n[N]&&(A=n[N][h]);else{var O="";if(((n[N]||[])[0]||[])[0]==14849||(((n[N]||[])[0]||[])[0]==1025?n[N][h]&&n[N][h].itab>0&&(O=n.SheetNames[n[N][h].itab-1]+"!"):O=n.SheetNames[h-1]+"!"),n[N]&&n[N][h])O+=n[N][h].Name;else if(n[0]&&n[0][h])O+=n[0][h].Name;else{var D=(L5(n,N,a)||"").split(";;");D[h-1]?O=D[h-1]:O+="SH33TJSERRX"}l.push(O);break}A||(A={Name:"SH33TJSERRY"}),l.push(A.Name);break;case"PtgParen":var k="(",V=")";if(g>=0){switch(x="",e[0][g][1][0]){case 2:k=Vt(" ",e[0][g][1][1])+k;break;case 3:k=Vt("\r",e[0][g][1][1])+k;break;case 4:V=Vt(" ",e[0][g][1][1])+V;break;case 5:V=Vt("\r",e[0][g][1][1])+V;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}g=-1}l.push(k+l.pop()+V);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:y[1][1],r:y[1][0]};var K={c:r.c,r:r.r};if(n.sharedf[ft(d)]){var ie=n.sharedf[ft(d)];l.push(Gc(ie,s,K,n,a))}else{var G=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(Gc(u[1],s,K,n,a)),G=!0;break}G||l.push(y[1])}break;case"PtgArray":l.push("{"+Eq(y[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=b;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(y));default:throw new Error("Unrecognized Formula Token: "+String(y))}var X=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&g>=0&&X.indexOf(e[0][b][0])==-1){y=e[0][g];var re=!0;switch(y[1][0]){case 4:re=!1;case 0:x=Vt(" ",y[1][1]);break;case 5:re=!1;case 1:x=Vt("\r",y[1][1]);break;default:if(x="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}l.push((re?x:"")+l.pop()+(re?"":x)),g=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function Aq(e){if(e==null){var t=oe(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return ol(e);return ol(0)}function Cq(e,t,r,n,a){var i=ll(t,r,a),s=Aq(e.v),l=oe(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=oe(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Rr([i,s,l,u]);return f}function Mg(e,t,r){var n=e.read_shift(4),a=Sq(e,n,r),i=e.read_shift(4),s=i>0?jq(e,i,a,r):null;return[a,s]}var Oq=Mg,Lg=Mg,kq=Mg,Pq=Mg,Rq={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},$5={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Iq={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Dq(e){var t="of:="+e.replace(F_,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function Mq(e){return e.replace(/\./,"!")}var Wd=typeof Map<"u";function z_(e,t,r){var n=0,a=e.length;if(r){if(Wd?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=Wd?r.get(t):r[t];n<i.length;++n)if(e[i[n]].t===t)return e.Count++,i[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(Wd?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function $g(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(Ci=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=Yp(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=T1(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function F5(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function eo(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,i=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){IP(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=i;++a)if(e[a].numFmtId===n)return a;return e[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function Lq(e,t,r){if(e&&e["!ref"]){var n=At(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function $q(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+nr(e[r])+'"/>';return t+"</mergeCells>"}function Fq(e,t,r,n,a){var i=!1,s={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,s.codeName=wf(ut(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),l=(l||"")+xe("outlinePr",null,u)}!i&&!l||(a[a.length]=xe("sheetPr",l,s))}var Bq=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Uq=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function zq(e){var t={sheet:1};return Bq.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),Uq.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=_5(e.password).toString(16).toUpperCase()),xe("sheetProtection",null,t)}function qq(e){return F5(e),xe("pageMargins",null,e)}function Wq(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=xe("col",null,$g(a,n)));return r[r.length]="</cols>",r.join("")}function Hq(e,t,r,n){var a=typeof e.ref=="string"?e.ref:nr(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,s=Xn(a);s.s.r==s.e.r&&(s.e.r=Xn(t["!ref"]).e.r,a=nr(s));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),xe("autoFilter",null,{ref:a})}function Vq(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),xe("sheetViews",xe("sheetView",null,a),{})}function Kq(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",i=e.t,s=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=Sh[e.v];break;case"d":n&&n.cellDates?a=fn(e.v,-1).toISOString():(e=kn(e),e.t="n",a=""+(e.v=On(fn(e.v)))),typeof e.z>"u"&&(e.z=Gt[14]);break;default:a=e.v;break}var l=Ir("v",ut(a)),c={r:t},u=eo(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Ir("v",""+z_(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=s),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=xe("f",ut(e.f),d)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),xe("c",l,c)}function Gq(e,t,r,n){var a=[],i=[],s=At(e["!ref"]),l="",c,u="",d=[],f=0,h=0,p=e["!rows"],v=Array.isArray(e),g={r:u},x,b=-1;for(h=s.s.c;h<=s.e.c;++h)d[h]=Gr(h);for(f=s.s.r;f<=s.e.r;++f){for(i=[],u=Mr(f),h=s.s.c;h<=s.e.c;++h){c=d[h]+u;var m=v?(e[f]||[])[h]:e[c];m!==void 0&&(l=Kq(m,c,e,t))!=null&&i.push(l)}(i.length>0||p&&p[f])&&(g={r:u},p&&p[f]&&(x=p[f],x.hidden&&(g.hidden=1),b=-1,x.hpx?b=Qp(x.hpx):x.hpt&&(b=x.hpt),b>-1&&(g.ht=b,g.customHeight=1),x.level&&(g.outlineLevel=x.level)),a[a.length]=xe("row",i.join(""),g))}if(p)for(;f<p.length;++f)p&&p[f]&&(g={r:f+1},x=p[f],x.hidden&&(g.hidden=1),b=-1,x.hpx?b=Qp(x.hpx):x.hpt&&(b=x.hpt),b>-1&&(g.ht=b,g.customHeight=1),x.level&&(g.outlineLevel=x.level),a[a.length]=xe("row","",g));return a.join("")}function B5(e,t,r,n){var a=[ir,xe("worksheet",null,{xmlns:Ou[0],"xmlns:r":br.r})],i=r.SheetNames[e],s=0,l="",c=r.Sheets[i];c==null&&(c={});var u=c["!ref"]||"A1",d=At(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=nr(d)}n||(n={}),c["!comments"]=[];var f=[];Fq(c,r,e,t,a),a[a.length]=xe("dimension",null,{ref:u}),a[a.length]=Vq(c,t,e,r),t.sheetFormat&&(a[a.length]=xe("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=Wq(c,c["!cols"])),a[s=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=Gq(c,t),l.length>0&&(a[a.length]=l)),a.length>s+1&&(a[a.length]="</sheetData>",a[s]=a[s].replace("/>",">")),c["!protect"]&&(a[a.length]=zq(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=Hq(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=$q(c["!merges"]));var h=-1,p,v=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(g){g[1].Target&&(p={ref:g[0]},g[1].Target.charAt(0)!="#"&&(v=lt(n,-1,ut(g[1].Target).replace(/#.*$/,""),Ze.HLINK),p["r:id"]="rId"+v),(h=g[1].Target.indexOf("#"))>-1&&(p.location=ut(g[1].Target.slice(h+1))),g[1].Tooltip&&(p.tooltip=ut(g[1].Tooltip)),a[a.length]=xe("hyperlink",null,p))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=qq(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=Ir("ignoredErrors",xe("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(v=lt(n,-1,"../drawings/drawing"+(e+1)+".xml",Ze.DRAW),a[a.length]=xe("drawing",null,{"r:id":"rId"+v}),c["!drawing"]=f),c["!comments"].length>0&&(v=lt(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Ze.VML),a[a.length]=xe("legacyDrawing",null,{"r:id":"rId"+v}),c["!legacy"]=v),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function Xq(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=a/20),r}function Yq(e,t,r){var n=oe(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var i=320;a.hpx?i=Qp(a.hpx)*20:a.hpt&&(i=a.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var s=0;a.level&&(s|=a.level),a.hidden&&(s|=16),(a.hpx||a.hpt)&&(s|=32),n.write_shift(1,s),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,p=d<<10;p<d+1<<10;++p){u.c=p;var v=Array.isArray(r)?(r[u.r]||[])[u.c]:r[ft(u)];v&&(f<0&&(f=p),h=p)}f<0||(++l,n.write_shift(4,f),n.write_shift(4,h))}var g=n.l;return n.l=c,n.write_shift(4,l),n.l=g,n.length>n.l?n.slice(0,n.l):n}function Qq(e,t,r,n){var a=Yq(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&fe(e,0,a)}var Jq=El,Zq=Pu;function eW(){}function tW(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=d9(e),r}function rW(e,t,r){r==null&&(r=oe(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return Kp({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),t5(e,r),r.slice(0,r.l)}function nW(e){var t=va(e);return[t]}function aW(e,t,r){return r==null&&(r=oe(8)),_l(t,r)}function iW(e){var t=jl(e);return[t]}function sW(e,t,r){return r==null&&(r=oe(4)),Sl(t,r)}function oW(e){var t=va(e),r=e.read_shift(1);return[t,r,"b"]}function lW(e,t,r){return r==null&&(r=oe(9)),_l(t,r),r.write_shift(1,e.v?1:0),r}function cW(e){var t=jl(e),r=e.read_shift(1);return[t,r,"b"]}function uW(e,t,r){return r==null&&(r=oe(5)),Sl(t,r),r.write_shift(1,e.v?1:0),r}function dW(e){var t=va(e),r=e.read_shift(1);return[t,r,"e"]}function fW(e,t,r){return r==null&&(r=oe(9)),_l(t,r),r.write_shift(1,e.v),r}function hW(e){var t=jl(e),r=e.read_shift(1);return[t,r,"e"]}function pW(e,t,r){return r==null&&(r=oe(8)),Sl(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function mW(e){var t=va(e),r=e.read_shift(4);return[t,r,"s"]}function gW(e,t,r){return r==null&&(r=oe(12)),_l(t,r),r.write_shift(4,t.v),r}function vW(e){var t=jl(e),r=e.read_shift(4);return[t,r,"s"]}function xW(e,t,r){return r==null&&(r=oe(8)),Sl(t,r),r.write_shift(4,t.v),r}function yW(e){var t=va(e),r=Ru(e);return[t,r,"n"]}function bW(e,t,r){return r==null&&(r=oe(16)),_l(t,r),ol(e.v,r),r}function wW(e){var t=jl(e),r=Ru(e);return[t,r,"n"]}function _W(e,t,r){return r==null&&(r=oe(12)),Sl(t,r),ol(e.v,r),r}function jW(e){var t=va(e),r=r5(e);return[t,r,"n"]}function SW(e,t,r){return r==null&&(r=oe(12)),_l(t,r),n5(e.v,r),r}function EW(e){var t=jl(e),r=r5(e);return[t,r,"n"]}function NW(e,t,r){return r==null&&(r=oe(8)),Sl(t,r),n5(e.v,r),r}function TW(e){var t=va(e),r=I_(e);return[t,r,"is"]}function AW(e){var t=va(e),r=Xr(e);return[t,r,"str"]}function CW(e,t,r){return r==null&&(r=oe(12+4*e.v.length)),_l(t,r),_r(e.v,r),r.length>r.l?r.slice(0,r.l):r}function OW(e){var t=jl(e),r=Xr(e);return[t,r,"str"]}function kW(e,t,r){return r==null&&(r=oe(8+4*e.v.length)),Sl(t,r),_r(e.v,r),r.length>r.l?r.slice(0,r.l):r}function PW(e,t,r){var n=e.l+t,a=va(e);a.r=r["!row"];var i=e.read_shift(1),s=[a,i,"b"];if(r.cellFormula){e.l+=2;var l=Lg(e,n-e.l,r);s[3]=Gc(l,null,a,r.supbooks,r)}else e.l=n;return s}function RW(e,t,r){var n=e.l+t,a=va(e);a.r=r["!row"];var i=e.read_shift(1),s=[a,i,"e"];if(r.cellFormula){e.l+=2;var l=Lg(e,n-e.l,r);s[3]=Gc(l,null,a,r.supbooks,r)}else e.l=n;return s}function IW(e,t,r){var n=e.l+t,a=va(e);a.r=r["!row"];var i=Ru(e),s=[a,i,"n"];if(r.cellFormula){e.l+=2;var l=Lg(e,n-e.l,r);s[3]=Gc(l,null,a,r.supbooks,r)}else e.l=n;return s}function DW(e,t,r){var n=e.l+t,a=va(e);a.r=r["!row"];var i=Xr(e),s=[a,i,"str"];if(r.cellFormula){e.l+=2;var l=Lg(e,n-e.l,r);s[3]=Gc(l,null,a,r.supbooks,r)}else e.l=n;return s}var MW=El,LW=Pu;function $W(e,t){return t==null&&(t=oe(4)),t.write_shift(4,e),t}function FW(e,t){var r=e.l+t,n=El(e),a=D_(e),i=Xr(e),s=Xr(e),l=Xr(e);e.l=r;var c={rfx:n,relId:a,loc:i,display:l};return s&&(c.Tooltip=s),c}function BW(e,t){var r=oe(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Pu({s:wr(e[0]),e:wr(e[0])},r),M_("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return _r(a||"",r),_r(e[1].Tooltip||"",r),_r("",r),r.slice(0,r.l)}function UW(){}function zW(e,t,r){var n=e.l+t,a=a5(e),i=e.read_shift(1),s=[a];if(s[2]=i,r.cellFormula){var l=Oq(e,n-e.l,r);s[1]=l}else e.l=n;return s}function qW(e,t,r){var n=e.l+t,a=El(e),i=[a];if(r.cellFormula){var s=Pq(e,n-e.l,r);i[1]=s,e.l=n}else e.l=n;return i}function WW(e,t,r){r==null&&(r=oe(18));var n=$g(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var U5=["left","right","top","bottom","header","footer"];function HW(e){var t={};return U5.forEach(function(r){t[r]=Ru(e)}),t}function VW(e,t){return t==null&&(t=oe(6*8)),F5(e),U5.forEach(function(r){ol(e[r],t)}),t}function KW(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function GW(e,t,r){r==null&&(r=oe(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function XW(e){var t=oe(24);return t.write_shift(4,4),t.write_shift(4,1),Pu(e,t),t}function YW(e,t){return t==null&&(t=oe(16*4+2)),t.write_shift(2,e.password?_5(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function QW(){}function JW(){}function ZW(e,t,r,n,a,i,s){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=kn(t),t.z=t.z||Gt[14],t.v=On(fn(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:n};switch(c.s=eo(a.cellXfs,t,a),t.l&&i["!links"].push([ft(c),t.l]),t.c&&i["!comments"].push([ft(c),t.c]),t.t){case"s":case"str":return a.bookSST?(l=z_(a.Strings,t.v,a.revStrings),c.t="s",c.v=l,s?fe(e,18,xW(t,c)):fe(e,7,gW(t,c))):(c.t="str",s?fe(e,17,kW(t,c)):fe(e,6,CW(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?s?fe(e,13,NW(t,c)):fe(e,2,SW(t,c)):s?fe(e,16,_W(t,c)):fe(e,5,bW(t,c)),!0;case"b":return c.t="b",s?fe(e,15,uW(t,c)):fe(e,4,lW(t,c)),!0;case"e":return c.t="e",s?fe(e,14,pW(t,c)):fe(e,3,fW(t,c)),!0}return s?fe(e,12,sW(t,c)):fe(e,1,aW(t,c)),!0}function eH(e,t,r,n){var a=At(t["!ref"]||"A1"),i,s="",l=[];fe(e,145);var c=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){s=Mr(d),Qq(e,t,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(l[h]=Gr(h)),i=l[h]+s;var p=c?(t[d]||[])[h]:t[i];if(!p){f=!1;continue}f=ZW(e,p,d,h,n,t,f)}}fe(e,146)}function tH(e,t){!t||!t["!merges"]||(fe(e,177,$W(t["!merges"].length)),t["!merges"].forEach(function(r){fe(e,176,LW(r))}),fe(e,178))}function rH(e,t){!t||!t["!cols"]||(fe(e,390),t["!cols"].forEach(function(r,n){r&&fe(e,60,WW(n,r))}),fe(e,391))}function nH(e,t){!t||!t["!ref"]||(fe(e,648),fe(e,649,XW(At(t["!ref"]))),fe(e,650))}function aH(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=lt(r,-1,n[1].Target.replace(/#.*$/,""),Ze.HLINK);fe(e,494,BW(n,a))}}),delete t["!links"]}function iH(e,t,r,n){if(t["!comments"].length>0){var a=lt(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Ze.VML);fe(e,551,M_("rId"+a)),t["!legacy"]=a}}function sH(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],i=typeof a.ref=="string"?a.ref:nr(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,l=Xn(i);l.s.r==l.e.r&&(l.e.r=Xn(t["!ref"]).e.r,i=nr(l));for(var c=0;c<s.length;++c){var u=s[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+i;break}}c==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),fe(e,161,Pu(At(i))),fe(e,162)}}function oH(e,t,r){fe(e,133),fe(e,137,GW(t,r)),fe(e,138),fe(e,134)}function lH(e,t){t["!protect"]&&fe(e,535,YW(t["!protect"]))}function cH(e,t,r,n){var a=An(),i=r.SheetNames[e],s=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=At(s["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return s["!links"]=[],s["!comments"]=[],fe(a,129),(r.vbaraw||s["!outline"])&&fe(a,147,rW(l,s["!outline"])),fe(a,148,Zq(c)),oH(a,s,r.Workbook),rH(a,s),eH(a,s,e,t),lH(a,s),sH(a,s,r,e),tH(a,s),aH(a,s,n),s["!margins"]&&fe(a,476,VW(s["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&nH(a,s),iH(a,s,e,n),fe(a,130),a.end()}function uH(e,t){e.l+=10;var r=Xr(e);return{name:r}}var dH=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function fH(e){return!e.Workbook||!e.Workbook.WBProps?"false":qB(e.Workbook.WBProps.date1904)?"true":"false"}var hH="][*?/\\".split("");function z5(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return hH.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function pH(e,t,r){e.forEach(function(n,a){z5(n);for(var i=0;i<a;++i)if(n==e[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var s=t&&t[a]&&t[a].CodeName||n;if(s.charCodeAt(0)==95&&s.length>22)throw new Error("Bad Code Name: Worksheet"+s)}})}function mH(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];pH(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)Lq(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}function q5(e){var t=[ir];t[t.length]=xe("workbook",null,{xmlns:Ou[0],"xmlns:r":br.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(dH.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=xe("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],i=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!a[i]||!a[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var s={name:ut(e.SheetNames[i].slice(0,31))};if(s.sheetId=""+(i+1),s["r:id"]="rId"+(i+1),a[i])switch(a[i].Hidden){case 1:s.state="hidden";break;case 2:s.state="veryHidden";break}t[t.length]=xe("sheet",null,s)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=xe("definedName",ut(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function gH(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=N1(e),r.name=Xr(e),r}function vH(e,t){return t||(t=oe(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),M_(e.strRelID,t),_r(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function xH(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?Xr(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function yH(e,t){t||(t=oe(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),t5(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function bH(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),i=f9(e),s=kq(e,0,r),l=D_(e);e.l=n;var c={Name:i,Ptg:s};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function wH(e,t){fe(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};fe(e,156,vH(a))}fe(e,144)}function _H(e,t){t||(t=oe(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return _r("SheetJS",t),_r(Fp.version,t),_r(Fp.version,t),_r("7262",t),t.length>t.l?t.slice(0,t.l):t}function jH(e,t){t||(t=oe(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function SH(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&i==-1&&(i=n);i>a||(fe(e,135),fe(e,158,jH(a)),fe(e,136))}}function EH(e,t){var r=An();return fe(r,131),fe(r,128,_H()),fe(r,153,yH(e.Workbook&&e.Workbook.WBProps||null)),SH(r,e),wH(r,e),fe(r,132),r.end()}function NH(e,t,r){return(t.slice(-4)===".bin"?EH:q5)(e)}function TH(e,t,r,n,a){return(t.slice(-4)===".bin"?cH:B5)(e,r,n,a)}function AH(e,t,r){return(t.slice(-4)===".bin"?VU:E5)(e,r)}function CH(e,t,r){return(t.slice(-4)===".bin"?yU:w5)(e,r)}function OH(e,t,r){return(t.slice(-4)===".bin"?lz:O5)(e)}function kH(e){return(e.slice(-4)===".bin"?ez:A5)()}function PH(e,t){var r=[];return e.Props&&r.push(A9(e.Props,t)),e.Custprops&&r.push(C9(e.Props,e.Custprops)),r.join("")}function RH(){return""}function IH(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var i=[];i.push(xe("NumberFormat",null,{"ss:Format":ut(Gt[n.numFmtId])}));var s={"ss:ID":"s"+(21+a)};r.push(xe("Style",i.join(""),s))}),xe("Styles",r.join(""))}function W5(e){return xe("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+B_(e.Ref,{r:0,c:0})})}function DH(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(W5(a)))}return xe("Names",r.join(""))}function MH(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,i=[],s=0;s<a.length;++s){var l=a[s];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(W5(l)))}return i.join("")}function LH(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(xe("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(xe("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(xe("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(xe("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(Ir("ProtectContents","True")),e["!protect"].objects&&a.push(Ir("ProtectObjects","True")),e["!protect"].scenarios&&a.push(Ir("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(Ir("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(Ir("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(s){e["!protect"][s[0]]&&a.push("<"+s[1]+"/>")})),a.length==0?"":xe("WorksheetOptions",a.join(""),{xmlns:Bn.x})}function $H(e){return e.map(function(t){var r=zB(t.t||""),n=xe("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return xe("Comment",n,{"ss:Author":t.a})}).join("")}function FH(e,t,r,n,a,i,s){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+ut(B_(e.f,s))),e.F&&e.F.slice(0,t.length)==t){var c=wr(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==s.r?"":"["+(c.r-s.r)+"]")+"C"+(c.c==s.c?"":"["+(c.c-s.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=ut(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=ut(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=s.c||u[d].s.r!=s.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=Sh[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Gt[14]);break;case"s":f="String",h=UB(e.v||"");break}var p=eo(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+p),l["ss:Index"]=s.c+1;var v=e.v!=null?h:"",g=e.t=="z"?"":'<Data ss:Type="'+f+'">'+v+"</Data>";return(e.c||[]).length>0&&(g+=$H(e.c)),xe("Cell",g,l)}function BH(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=S5(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function UH(e,t,r,n){if(!e["!ref"])return"";var a=At(e["!ref"]),i=e["!merges"]||[],s=0,l=[];e["!cols"]&&e["!cols"].forEach(function(x,b){$_(x);var m=!!x.width,y=$g(b,x),_={"ss:Index":b+1};m&&(_["ss:Width"]=Xp(y.width)),x.hidden&&(_["ss:Hidden"]="1"),l.push(xe("Column",null,_))});for(var c=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[BH(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(s=0;s!=i.length;++s)if(!(i[s].s.c>f)&&!(i[s].s.r>u)&&!(i[s].e.c<f)&&!(i[s].e.r<u)){(i[s].s.c!=f||i[s].s.r!=u)&&(h=!0);break}if(!h){var p={r:u,c:f},v=ft(p),g=c?(e[u]||[])[f]:e[v];d.push(FH(g,v,e,t,r,n,p))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function zH(e,t,r){var n=[],a=r.SheetNames[e],i=r.Sheets[a],s=i?MH(i,t,e,r):"";return s.length>0&&n.push("<Names>"+s+"</Names>"),s=i?UH(i,t,e,r):"",s.length>0&&n.push("<Table>"+s+"</Table>"),n.push(LH(i,t,e,r)),n.join("")}function qH(e,t){t||(t={}),e.SSF||(e.SSF=kn(Gt)),e.SSF&&(Rg(),Pg(e.SSF),t.revssf=Ig(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],eo(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(PH(e,t)),r.push(RH()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(xe("Worksheet",zH(n,t,e),{"ss:Name":ut(e.SheetNames[n])}));return r[2]=IH(e,t),r[3]=DH(e),ir+xe("Workbook",r.join(""),{xmlns:Bn.ss,"xmlns:o":Bn.o,"xmlns:x":Bn.x,"xmlns:ss":Bn.ss,"xmlns:dt":Bn.dt,"xmlns:html":Bn.html})}var Nx={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function WH(e,t){var r=[],n=[],a=[],i=0,s,l=mE(AE,"n"),c=mE(CE,"n");if(e.Props)for(s=$r(e.Props),i=0;i<s.length;++i)(Object.prototype.hasOwnProperty.call(l,s[i])?r:Object.prototype.hasOwnProperty.call(c,s[i])?n:a).push([s[i],e.Props[s[i]]]);if(e.Custprops)for(s=$r(e.Custprops),i=0;i<s.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},s[i])||(Object.prototype.hasOwnProperty.call(l,s[i])?r:Object.prototype.hasOwnProperty.call(c,s[i])?n:a).push([s[i],e.Custprops[s[i]]]);var u=[];for(i=0;i<a.length;++i)p5.indexOf(a[i][0])>-1||d5.indexOf(a[i][0])>-1||a[i][1]!=null&&u.push(a[i]);n.length&&mt.utils.cfb_add(t,"/SummaryInformation",IE(n,Nx.SI,c,CE)),(r.length||u.length)&&mt.utils.cfb_add(t,"/DocumentSummaryInformation",IE(r,Nx.DSI,l,AE,u.length?u:null,Nx.UDI))}function HH(e,t){var r=t||{},n=mt.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return mt.utils.cfb_add(n,a,H5(e,r)),r.biff==8&&(e.Props||e.Custprops)&&WH(e,n),r.biff==8&&e.vbaraw&&cz(n,mt.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var VH={0:{f:Xq},1:{f:nW},2:{f:jW},3:{f:dW},4:{f:oW},5:{f:yW},6:{f:AW},7:{f:mW},8:{f:DW},9:{f:IW},10:{f:PW},11:{f:RW},12:{f:iW},13:{f:EW},14:{f:hW},15:{f:cW},16:{f:wW},17:{f:OW},18:{f:vW},19:{f:I_},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:bH},40:{},42:{},43:{f:AU},44:{f:NU},45:{f:kU},46:{f:RU},47:{f:PU},48:{},49:{f:i9},50:{},51:{f:XU},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:sU},62:{f:TW},63:{f:tz},64:{f:QW},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ii,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:KW},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:tW},148:{f:Jq,p:16},151:{f:UW},152:{},153:{f:xH},154:{},155:{},156:{f:gH},157:{},158:{},159:{T:1,f:gU},160:{T:-1},161:{T:1,f:El},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:MW},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:KU},336:{T:-1},337:{f:JU,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:N1},357:{},358:{},359:{},360:{T:1},361:{},362:{f:eU},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:zW},427:{f:qW},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:HW},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:eW},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:FW},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:N1},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:sz},633:{T:1},634:{T:-1},635:{T:1,f:az},636:{T:-1},637:{f:c9},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:uH},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:JW},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function ye(e,t,r,n){var a=t;if(!isNaN(a)){var i=n||(r||[]).length||0,s=e.next(4);s.write_shift(2,a),s.write_shift(2,i),i>0&&k_(r)&&e.push(r)}}function KH(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return ye(e,t,r,a);var i=t;if(!isNaN(i)){for(var s=r.parts||[],l=0,c=0,u=0;u+(s[l]||8224)<=8224;)u+=s[l]||8224,l++;var d=e.next(4);for(d.write_shift(2,i),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(s[l]||8224)<=8224;)u+=s[l]||8224,l++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function Nh(e,t,r){return e||(e=oe(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function GH(e,t,r,n){var a=oe(9);return Nh(a,e,t),g5(r,n||"b",a),a}function XH(e,t,r){var n=oe(8+2*r.length);return Nh(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function YH(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?On(fn(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?ye(e,2,uU(r,n,a)):ye(e,3,cU(r,n,a));return;case"b":case"e":ye(e,5,GH(r,n,t.v,t.t));return;case"s":case"str":ye(e,4,XH(r,n,(t.v||"").slice(0,255)));return}ye(e,1,Nh(null,r,n))}function QH(e,t,r,n){var a=Array.isArray(t),i=At(t["!ref"]||"A1"),s,l="",c=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),s=nr(i)}for(var u=i.s.r;u<=i.e.r;++u){l=Mr(u);for(var d=i.s.c;d<=i.e.c;++d){u===i.s.r&&(c[d]=Gr(d)),s=c[d]+l;var f=a?(t[u]||[])[d]:t[s];f&&YH(e,f,u,d)}}}function JH(e,t){for(var r=t||{},n=An(),a=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(a=i);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return ye(n,r.biff==4?1033:r.biff==3?521:9,L_(e,16,r)),QH(n,e.Sheets[e.SheetNames[a]],a,r),ye(n,10),n.end()}function ZH(e,t,r){ye(e,49,V9({sz:12,name:"Arial"},r))}function eV(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&ye(e,1054,X9(a,t[a],r))})}function tV(e,t){var r=oe(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),ye(e,2151,r),r=oe(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),y5(At(t["!ref"]||"A1"),r),r.write_shift(4,4),ye(e,2152,r)}function rV(e,t){for(var r=0;r<16;++r)ye(e,224,ME({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){ye(e,224,ME(n,0,t))})}function nV(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];ye(e,440,nU(n)),n[1].Tooltip&&ye(e,2048,aU(n))}delete t["!links"]}function aV(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&ye(e,125,oU($g(a,n),a))})}}function iV(e,t,r,n,a){var i=16+eo(a.cellXfs,t,a);if(t.v==null&&!t.bf){ye(e,513,ll(r,n,i));return}if(t.bf)ye(e,6,Cq(t,r,n,a,i));else switch(t.t){case"d":case"n":var s=t.t=="d"?On(fn(t.v)):t.v;ye(e,515,Z9(r,n,s,i));break;case"b":case"e":ye(e,517,J9(r,n,t.v,i,a,t.t));break;case"s":case"str":if(a.bookSST){var l=z_(a.Strings,t.v,a.revStrings);ye(e,253,K9(r,n,l,i))}else ye(e,516,G9(r,n,(t.v||"").slice(0,255),i,a));break;default:ye(e,513,ll(r,n,i))}}function sV(e,t,r){var n=An(),a=r.SheetNames[e],i=r.Sheets[a]||{},s=(r||{}).Workbook||{},l=(s.Sheets||[])[e]||{},c=Array.isArray(i),u=t.biff==8,d,f="",h=[],p=At(i["!ref"]||"A1"),v=u?65536:16384;if(p.e.c>255||p.e.r>=v){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,v-1)}ye(n,2057,L_(r,16,t)),ye(n,13,ia(1)),ye(n,12,ia(100)),ye(n,15,an(!0)),ye(n,17,an(!1)),ye(n,16,ol(.001)),ye(n,95,an(!0)),ye(n,42,an(!1)),ye(n,43,an(!1)),ye(n,130,ia(1)),ye(n,128,Q9()),ye(n,131,an(!1)),ye(n,132,an(!1)),u&&aV(n,i["!cols"]),ye(n,512,Y9(p,t)),u&&(i["!links"]=[]);for(var g=p.s.r;g<=p.e.r;++g){f=Mr(g);for(var x=p.s.c;x<=p.e.c;++x){g===p.s.r&&(h[x]=Gr(x)),d=h[x]+f;var b=c?(i[g]||[])[x]:i[d];b&&(iV(n,b,g,x,t),u&&b.l&&i["!links"].push([d,b.l]))}}var m=l.CodeName||l.name||a;return u&&ye(n,574,H9((s.Views||[])[0])),u&&(i["!merges"]||[]).length&&ye(n,229,rU(i["!merges"])),u&&nV(n,i),ye(n,442,x5(m)),u&&tV(n,i),ye(n,10),n.end()}function oV(e,t,r){var n=An(),a=(e||{}).Workbook||{},i=a.Sheets||[],s=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(ye(n,2057,L_(e,5,r)),r.bookType=="xla"&&ye(n,135),ye(n,225,l?ia(1200):null),ye(n,193,P9(2)),c&&ye(n,191),c&&ye(n,192),ye(n,226),ye(n,92,U9("SheetJS",r)),ye(n,66,ia(l?1200:1252)),l&&ye(n,353,ia(0)),l&&ye(n,448),ye(n,317,lU(e.SheetNames.length)),l&&e.vbaraw&&ye(n,211),l&&e.vbaraw){var u=s.CodeName||"ThisWorkbook";ye(n,442,x5(u))}ye(n,156,ia(17)),ye(n,25,an(!1)),ye(n,18,an(!1)),ye(n,19,ia(0)),l&&ye(n,431,an(!1)),l&&ye(n,444,ia(0)),ye(n,61,W9()),ye(n,64,an(!1)),ye(n,141,ia(0)),ye(n,34,an(fH(e)=="true")),ye(n,14,an(!0)),l&&ye(n,439,an(!1)),ye(n,218,ia(0)),ZH(n,e,r),eV(n,e.SSF,r),rV(n,r),l&&ye(n,352,an(!1));var d=n.end(),f=An();l&&ye(f,140,iU()),l&&r.Strings&&KH(f,252,q9(r.Strings)),ye(f,10);var h=f.end(),p=An(),v=0,g=0;for(g=0;g<e.SheetNames.length;++g)v+=(l?12:11)+(l?2:1)*e.SheetNames[g].length;var x=d.length+v+h.length;for(g=0;g<e.SheetNames.length;++g){var b=i[g]||{};ye(p,133,z9({pos:x,hs:b.Hidden||0,dt:0,name:e.SheetNames[g]},r)),x+=t[g].length}var m=p.end();if(v!=m.length)throw new Error("BS8 "+v+" != "+m.length);var y=[];return d.length&&y.push(d),m.length&&y.push(m),h.length&&y.push(h),Rr(y)}function lV(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=kn(Gt)),e&&e.SSF&&(Rg(),Pg(e.SSF),r.revssf=Ig(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,q_(r),r.cellXfs=[],eo(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=sV(a,r,e);return n.unshift(oV(e,n,r)),Rr(n)}function H5(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Xn(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return lV(e,t);case 4:case 3:case 2:return JH(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function cV(e,t,r,n){for(var a=e["!merges"]||[],i=[],s=t.s.c;s<=t.e.c;++s){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>s)&&!(a[u].e.r<r||a[u].e.c<s)){if(a[u].s.r<r||a[u].s.c<s){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=ft({r,c:s}),f=n.dense?(e[r]||[])[s]:e[d],h=f&&f.v!=null&&(f.h||BB(f.w||(Bi(f),f.w)||""))||"",p={};l>1&&(p.rowspan=l),c>1&&(p.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),p.id=(n.id||"sjs")+"-"+d,i.push(xe("td",h,p))}}var v="<tr>";return v+i.join("")+"</tr>"}var uV='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',dV="</body></html>";function fV(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function V5(e,t){var r=t||{},n=r.header!=null?r.header:uV,a=r.footer!=null?r.footer:dV,i=[n],s=Xn(e["!ref"]);r.dense=Array.isArray(e),i.push(fV(e,s,r));for(var l=s.s.r;l<=s.e.r;++l)i.push(cV(e,s,l,r));return i.push("</table>"+a),i.join("")}function K5(e,t,r){var n=r||{},a=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var s=typeof n.origin=="string"?wr(n.origin):n.origin;a=s.r,i=s.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:i}};if(e["!ref"]){var d=Xn(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,p=e["!rows"]||(e["!rows"]=[]),v=0,g=0,x=0,b=0,m=0,y=0;for(e["!cols"]||(e["!cols"]=[]);v<l.length&&g<c;++v){var _=l[v];if(qE(_)){if(n.display)continue;p[g]={hidden:!0}}var w=_.children;for(x=b=0;x<w.length;++x){var j=w[x];if(!(n.display&&qE(j))){var S=j.hasAttribute("data-v")?j.getAttribute("data-v"):j.hasAttribute("v")?j.getAttribute("v"):WB(j.innerHTML),E=j.getAttribute("data-z")||j.getAttribute("z");for(h=0;h<f.length;++h){var N=f[h];N.s.c==b+i&&N.s.r<g+a&&g+a<=N.e.r&&(b=N.e.c+1-i,h=-1)}y=+j.getAttribute("colspan")||1,((m=+j.getAttribute("rowspan")||1)>1||y>1)&&f.push({s:{r:g+a,c:b+i},e:{r:g+a+(m||1)-1,c:b+i+(y||1)-1}});var A={t:"s",v:S},O=j.getAttribute("data-t")||j.getAttribute("t")||"";S!=null&&(S.length==0?A.t=O||"z":n.raw||S.trim().length==0||O=="s"||(S==="TRUE"?A={t:"b",v:!0}:S==="FALSE"?A={t:"b",v:!1}:isNaN(Ai(S))?isNaN(bf(S).getDate())||(A={t:"d",v:fn(S)},n.cellDates||(A={t:"n",v:On(A.v)}),A.z=n.dateNF||Gt[14]):A={t:"n",v:Ai(S)})),A.z===void 0&&E!=null&&(A.z=E);var D="",k=j.getElementsByTagName("A");if(k&&k.length)for(var V=0;V<k.length&&!(k[V].hasAttribute("href")&&(D=k[V].getAttribute("href"),D.charAt(0)!="#"));++V);D&&D.charAt(0)!="#"&&(A.l={Target:D}),n.dense?(e[g+a]||(e[g+a]=[]),e[g+a][b+i]=A):e[ft({c:b+i,r:g+a})]=A,u.e.c<b+i&&(u.e.c=b+i),b+=y}}++g}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,g-1+a),e["!ref"]=nr(u),g>=c&&(e["!fullref"]=nr((u.e.r=l.length-v+g-1+a,u))),e}function G5(e,t){var r=t||{},n=r.dense?[]:{};return K5(n,e,t)}function hV(e,t){return wl(G5(e,t),t)}function qE(e){var t="",r=pV(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function pV(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var mV=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+_f({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return ir+t}}(),WE=function(){var e=function(i){return ut(i).replace(/  +/g,function(s){return'<text:s text:c="'+s.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,s,l){var c=[];c.push('      <table:table table:name="'+ut(s.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=Xn(i["!ref"]||"A1"),h=i["!merges"]||[],p=0,v=Array.isArray(i);if(i["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(i["!cols"][d]?' table:style-name="co'+i["!cols"][d].ods+'"':"")+`></table:table-column>
`);var g="",x=i["!rows"]||[];for(u=0;u<f.s.r;++u)g=x[u]?' table:style-name="ro'+x[u].ods+'"':"",c.push("        <table:table-row"+g+`></table:table-row>
`);for(;u<=f.e.r;++u){for(g=x[u]?' table:style-name="ro'+x[u].ods+'"':"",c.push("        <table:table-row"+g+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var b=!1,m={},y="";for(p=0;p!=h.length;++p)if(!(h[p].s.c>d)&&!(h[p].s.r>u)&&!(h[p].e.c<d)&&!(h[p].e.r<u)){(h[p].s.c!=d||h[p].s.r!=u)&&(b=!0),m["table:number-columns-spanned"]=h[p].e.c-h[p].s.c+1,m["table:number-rows-spanned"]=h[p].e.r-h[p].s.r+1;break}if(b){c.push(r);continue}var _=ft({r:u,c:d}),w=v?(i[u]||[])[d]:i[_];if(w&&w.f&&(m["table:formula"]=ut(Dq(w.f)),w.F&&w.F.slice(0,_.length)==_)){var j=Xn(w.F);m["table:number-matrix-columns-spanned"]=j.e.c-j.s.c+1,m["table:number-matrix-rows-spanned"]=j.e.r-j.s.r+1}if(!w){c.push(t);continue}switch(w.t){case"b":y=w.v?"TRUE":"FALSE",m["office:value-type"]="boolean",m["office:boolean-value"]=w.v?"true":"false";break;case"n":y=w.w||String(w.v||0),m["office:value-type"]="float",m["office:value"]=w.v||0;break;case"s":case"str":y=w.v==null?"":w.v,m["office:value-type"]="string";break;case"d":y=w.w||fn(w.v).toISOString(),m["office:value-type"]="date",m["office:date-value"]=fn(w.v).toISOString(),m["table:style-name"]="ce1";break;default:c.push(t);continue}var S=e(y);if(w.l&&w.l.Target){var E=w.l.Target;E=E.charAt(0)=="#"?"#"+Mq(E.slice(1)):E,E.charAt(0)!="#"&&!E.match(/^\w+:/)&&(E="../"+E),S=xe("text:a",S,{"xlink:href":E.replace(/&/g,"&amp;")})}c.push("          "+xe("table:table-cell",xe("text:p",S,{}),m)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(i,s){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;s.SheetNames.map(function(u){return s.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;$_(f),f.ods=l;var h=u["!cols"][d].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;s.SheetNames.map(function(u){return s.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(s,l){var c=[ir],u=_f({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=_f({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(c5().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,s),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=s.SheetNames.length;++f)c.push(n(s.Sheets[s.SheetNames[f]],s,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function X5(e,t){if(t.bookType=="fods")return WE(e,t);var r=T_(),n="",a=[],i=[];return n="mimetype",We(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",We(r,n,WE(e,t)),a.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",We(r,n,mV(e,t)),a.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",We(r,n,ir+c5()),a.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",We(r,n,T9(i)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",We(r,n,E9(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Jp(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function gV(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Ia(wf(e))}function vV(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Xs(e){var t=e.reduce(function(a,i){return a+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function xV(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var i=0;a>=1;++i,a/=256)e[t+i]=a&255;e[t+15]|=r>=0?0:128}function jf(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function ot(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function xc(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function lr(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=jf(e,r),i=a&7;a=Math.floor(a/8);var s=0,l;if(a==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:s=4,l=e.slice(r[0],r[0]+s),r[0]+=s;break;case 1:s=8,l=e.slice(r[0],r[0]+s),r[0]+=s;break;case 2:s=jf(e,r),l=e.slice(r[0],r[0]+s),r[0]+=s;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:i};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function Ar(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(ot(n*8+a.type)),a.type==2&&t.push(ot(a.data.length)),t.push(a.data))})}),Xs(t)}function wa(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=jf(e,n),i=lr(e.slice(n[0],n[0]+a));n[0]+=a;var s={id:xc(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=lr(l.data),u=xc(c[3][0].data);s.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=i[3])!=null&&t[0]&&(s.merge=xc(i[3][0].data)>>>0>0),r.push(s)}return r}function Pl(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:ot(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:ot(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(s){a.push(s.data),s.meta[3]=[{type:0,data:ot(s.data.length)}],n[2].push({data:Ar(s.meta),type:2})});var i=Ar(n);t.push(ot(i.length)),t.push(i),a.forEach(function(s){return t.push(s)})}),Xs(t)}function yV(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=jf(t,r),a=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var s=t[r[0]++]>>2;if(s<60)++s;else{var l=s-59;s=t[r[0]],l>1&&(s|=t[r[0]+1]<<8),l>2&&(s|=t[r[0]+2]<<16),l>3&&(s|=t[r[0]+3]<<24),s>>>=0,s++,r[0]+=l}a.push(t.slice(r[0],r[0]+s)),r[0]+=s;continue}else{var c=0,u=0;if(i==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Xs(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=Xs(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function _a(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(yV(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Xs(t)}function Rl(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var i=ot(n),s=i.length;t.push(i),n<=60?(s++,t.push(new Uint8Array([n-1<<2]))):n<=256?(s+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(s+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(s+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(s+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),s+=n,a[0]=0,a[1]=s&255,a[2]=s>>8&255,a[3]=s>>16&255,r+=n}return Xs(t)}function Tx(e,t){var r=new Uint8Array(32),n=Jp(r),a=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,xV(r,a,e.v),i|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),i|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,i,!0),r.slice(0,a)}function Ax(e,t){var r=new Uint8Array(32),n=Jp(r),a=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),i|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),i|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,i,!0),r.slice(0,a)}function ss(e){var t=lr(e);return jf(t[1][0].data)}function bV(e,t,r){var n,a,i,s;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((s=(i=e[8])==null?void 0:i[0])==null?void 0:s.data)&&xc(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=Jp(e[7][0].data),d=0,f=[],h=Jp(e[4][0].data),p=0,v=[],g=0;g<t.length;++g){if(t[g]==null){u.setUint16(g*2,65535,!0),h.setUint16(g*2,65535);continue}u.setUint16(g*2,d,!0),h.setUint16(g*2,p,!0);var x,b;switch(typeof t[g]){case"string":x=Tx({t:"s",v:t[g]},r),b=Ax({t:"s",v:t[g]},r);break;case"number":x=Tx({t:"n",v:t[g]},r),b=Ax({t:"n",v:t[g]},r);break;case"boolean":x=Tx({t:"b",v:t[g]},r),b=Ax({t:"b",v:t[g]},r);break;default:throw new Error("Unsupported value "+t[g])}f.push(x),d+=x.length,v.push(b),p+=b.length,++c}for(e[2][0].data=ot(c);g<e[7][0].data.length/2;++g)u.setUint16(g*2,65535,!0),h.setUint16(g*2,65535,!0);return e[6][0].data=Xs(f),e[3][0].data=Xs(v),c}function wV(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Xn(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(nr(n)));var i=Zp(r,{range:n,header:1}),s=["~Sh33tJ5~"];i.forEach(function(W){return W.forEach(function(U){typeof U=="string"&&s.push(U)})});var l={},c=[],u=mt.read(t.numbers,{type:"base64"});u.FileIndex.map(function(W,U){return[W,u.FullPaths[U]]}).forEach(function(W){var U=W[0],q=W[1];if(U.type==2&&U.name.match(/\.iwa/)){var se=U.content,je=_a(se),ee=wa(je);ee.forEach(function(Y){c.push(Y.id),l[Y.id]={deps:[],location:q,type:xc(Y.messages[0].meta[1][0].data)}})}}),c.sort(function(W,U){return W-U});var d=c.filter(function(W){return W>1}).map(function(W){return[W,ot(W)]});u.FileIndex.map(function(W,U){return[W,u.FullPaths[U]]}).forEach(function(W){var U=W[0];if(W[1],!!U.name.match(/\.iwa/)){var q=wa(_a(U.content));q.forEach(function(se){se.messages.forEach(function(je){d.forEach(function(ee){se.messages.some(function(Y){return xc(Y.meta[1][0].data)!=11006&&vV(Y.data,ee[1])})&&l[ee[0]].deps.push(se.id)})})})}});for(var f=mt.find(u,l[1].location),h=wa(_a(f.content)),p,v=0;v<h.length;++v){var g=h[v];g.id==1&&(p=g)}var x=ss(lr(p.messages[0].data)[1][0].data);for(f=mt.find(u,l[x].location),h=wa(_a(f.content)),v=0;v<h.length;++v)g=h[v],g.id==x&&(p=g);for(x=ss(lr(p.messages[0].data)[2][0].data),f=mt.find(u,l[x].location),h=wa(_a(f.content)),v=0;v<h.length;++v)g=h[v],g.id==x&&(p=g);for(x=ss(lr(p.messages[0].data)[2][0].data),f=mt.find(u,l[x].location),h=wa(_a(f.content)),v=0;v<h.length;++v)g=h[v],g.id==x&&(p=g);var b=lr(p.messages[0].data);{b[6][0].data=ot(n.e.r+1),b[7][0].data=ot(n.e.c+1);var m=ss(b[46][0].data),y=mt.find(u,l[m].location),_=wa(_a(y.content));{for(var w=0;w<_.length&&_[w].id!=m;++w);if(_[w].id!=m)throw"Bad ColumnRowUIDMapArchive";var j=lr(_[w].messages[0].data);j[1]=[],j[2]=[],j[3]=[];for(var S=0;S<=n.e.c;++S){var E=[];E[1]=E[2]=[{type:0,data:ot(S+420690)}],j[1].push({type:2,data:Ar(E)}),j[2].push({type:0,data:ot(S)}),j[3].push({type:0,data:ot(S)})}j[4]=[],j[5]=[],j[6]=[];for(var N=0;N<=n.e.r;++N)E=[],E[1]=E[2]=[{type:0,data:ot(N+726270)}],j[4].push({type:2,data:Ar(E)}),j[5].push({type:0,data:ot(N)}),j[6].push({type:0,data:ot(N)});_[w].messages[0].data=Ar(j)}y.content=Rl(Pl(_)),y.size=y.content.length,delete b[46];var A=lr(b[4][0].data);{A[7][0].data=ot(n.e.r+1);var O=lr(A[1][0].data),D=ss(O[2][0].data);y=mt.find(u,l[D].location),_=wa(_a(y.content));{if(_[0].id!=D)throw"Bad HeaderStorageBucket";var k=lr(_[0].messages[0].data);for(N=0;N<i.length;++N){var V=lr(k[2][0].data);V[1][0].data=ot(N),V[4][0].data=ot(i[N].length),k[2][N]={type:k[2][0].type,data:Ar(V)}}_[0].messages[0].data=Ar(k)}y.content=Rl(Pl(_)),y.size=y.content.length;var K=ss(A[2][0].data);y=mt.find(u,l[K].location),_=wa(_a(y.content));{if(_[0].id!=K)throw"Bad HeaderStorageBucket";for(k=lr(_[0].messages[0].data),S=0;S<=n.e.c;++S)V=lr(k[2][0].data),V[1][0].data=ot(S),V[4][0].data=ot(n.e.r+1),k[2][S]={type:k[2][0].type,data:Ar(V)};_[0].messages[0].data=Ar(k)}y.content=Rl(Pl(_)),y.size=y.content.length;var ie=ss(A[4][0].data);(function(){for(var W=mt.find(u,l[ie].location),U=wa(_a(W.content)),q,se=0;se<U.length;++se){var je=U[se];je.id==ie&&(q=je)}var ee=lr(q.messages[0].data);{ee[3]=[];var Y=[];s.forEach(function(ae,Ue){Y[1]=[{type:0,data:ot(Ue)}],Y[2]=[{type:0,data:ot(1)}],Y[3]=[{type:2,data:gV(ae)}],ee[3].push({type:2,data:Ar(Y)})})}q.messages[0].data=Ar(ee);var ne=Pl(U),be=Rl(ne);W.content=be,W.size=W.content.length})();var G=lr(A[3][0].data);{var X=G[1][0];delete G[2];var re=lr(X.data);{var de=ss(re[2][0].data);(function(){for(var W=mt.find(u,l[de].location),U=wa(_a(W.content)),q,se=0;se<U.length;++se){var je=U[se];je.id==de&&(q=je)}var ee=lr(q.messages[0].data);{delete ee[6],delete G[7];var Y=new Uint8Array(ee[5][0].data);ee[5]=[];for(var ne=0,be=0;be<=n.e.r;++be){var ae=lr(Y);ne+=bV(ae,i[be],s),ae[1][0].data=ot(be),ee[5].push({data:Ar(ae),type:2})}ee[1]=[{type:0,data:ot(n.e.c+1)}],ee[2]=[{type:0,data:ot(n.e.r+1)}],ee[3]=[{type:0,data:ot(ne)}],ee[4]=[{type:0,data:ot(n.e.r+1)}]}q.messages[0].data=Ar(ee);var Ue=Pl(U),Oe=Rl(Ue);W.content=Oe,W.size=W.content.length})()}X.data=Ar(re)}A[3][0].data=Ar(G)}b[4][0].data=Ar(A)}p.messages[0].data=Ar(b);var me=Pl(h),R=Rl(me);return f.content=R,f.size=f.content.length,u}function _V(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function q_(e){_V([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function jV(e,t){return t.bookType=="ods"?X5(e,t):t.bookType=="numbers"?wV(e,t):t.bookType=="xlsb"?SV(e,t):EV(e,t)}function SV(e,t){rc=1024,e&&!e.SSF&&(e.SSF=kn(Gt)),e&&e.SSF&&(Rg(),Pg(e.SSF),t.revssf=Ig(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Wd?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=k5.indexOf(t.bookType)>-1,a=s5();q_(t=t||{});var i=T_(),s="",l=0;if(t.cellXfs=[],eo(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),s="docProps/core.xml",We(i,s,u5(e.Props,t)),a.coreprops.push(s),lt(t.rels,2,s,Ze.CORE_PROPS),s="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,We(i,s,f5(e.Props)),a.extprops.push(s),lt(t.rels,3,s,Ze.EXT_PROPS),e.Custprops!==e.Props&&$r(e.Custprops||{}).length>0&&(s="docProps/custom.xml",We(i,s,h5(e.Custprops)),a.custprops.push(s),lt(t.rels,4,s,Ze.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var d={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:s="xl/worksheets/sheet"+l+"."+r,We(i,s,TH(l-1,s,t,e,d)),a.sheets.push(s),lt(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Ze.WS[0])}if(f){var p=f["!comments"],v=!1,g="";p&&p.length>0&&(g="xl/comments"+l+"."+r,We(i,g,OH(p,g)),a.comments.push(g),lt(d,-1,"../comments"+l+"."+r,Ze.CMNT),v=!0),f["!legacy"]&&v&&We(i,"xl/drawings/vmlDrawing"+l+".vml",C5(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&We(i,l5(s),gc(d))}return t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+r,We(i,s,CH(t.Strings,s,t)),a.strs.push(s),lt(t.wbrels,-1,"sharedStrings."+r,Ze.SST)),s="xl/workbook."+r,We(i,s,NH(e,s)),a.workbooks.push(s),lt(t.rels,1,s,Ze.WB),s="xl/theme/theme1.xml",We(i,s,T5(e.Themes,t)),a.themes.push(s),lt(t.wbrels,-1,"theme/theme1.xml",Ze.THEME),s="xl/styles."+r,We(i,s,AH(e,s,t)),a.styles.push(s),lt(t.wbrels,-1,"styles."+r,Ze.STY),e.vbaraw&&n&&(s="xl/vbaProject.bin",We(i,s,e.vbaraw),a.vba.push(s),lt(t.wbrels,-1,"vbaProject.bin",Ze.VBA)),s="xl/metadata."+r,We(i,s,kH(s)),a.metadata.push(s),lt(t.wbrels,-1,"metadata."+r,Ze.XLMETA),We(i,"[Content_Types].xml",o5(a,t)),We(i,"_rels/.rels",gc(t.rels)),We(i,"xl/_rels/workbook."+r+".rels",gc(t.wbrels)),delete t.revssf,delete t.ssf,i}function EV(e,t){rc=1024,e&&!e.SSF&&(e.SSF=kn(Gt)),e&&e.SSF&&(Rg(),Pg(e.SSF),t.revssf=Ig(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Wd?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=k5.indexOf(t.bookType)>-1,a=s5();q_(t=t||{});var i=T_(),s="",l=0;if(t.cellXfs=[],eo(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),s="docProps/core.xml",We(i,s,u5(e.Props,t)),a.coreprops.push(s),lt(t.rels,2,s,Ze.CORE_PROPS),s="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,We(i,s,f5(e.Props)),a.extprops.push(s),lt(t.rels,3,s,Ze.EXT_PROPS),e.Custprops!==e.Props&&$r(e.Custprops||{}).length>0&&(s="docProps/custom.xml",We(i,s,h5(e.Custprops)),a.custprops.push(s),lt(t.rels,4,s,Ze.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},h=e.Sheets[e.SheetNames[l-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:s="xl/worksheets/sheet"+l+"."+r,We(i,s,B5(l-1,t,e,f)),a.sheets.push(s),lt(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Ze.WS[0])}if(h){var v=h["!comments"],g=!1,x="";if(v&&v.length>0){var b=!1;v.forEach(function(m){m[1].forEach(function(y){y.T==!0&&(b=!0)})}),b&&(x="xl/threadedComments/threadedComment"+l+"."+r,We(i,x,rz(v,d,t)),a.threadedcomments.push(x),lt(f,-1,"../threadedComments/threadedComment"+l+"."+r,Ze.TCMNT)),x="xl/comments"+l+"."+r,We(i,x,O5(v)),a.comments.push(x),lt(f,-1,"../comments"+l+"."+r,Ze.CMNT),g=!0}h["!legacy"]&&g&&We(i,"xl/drawings/vmlDrawing"+l+".vml",C5(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&We(i,l5(s),gc(f))}return t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+r,We(i,s,w5(t.Strings,t)),a.strs.push(s),lt(t.wbrels,-1,"sharedStrings."+r,Ze.SST)),s="xl/workbook."+r,We(i,s,q5(e)),a.workbooks.push(s),lt(t.rels,1,s,Ze.WB),s="xl/theme/theme1.xml",We(i,s,T5(e.Themes,t)),a.themes.push(s),lt(t.wbrels,-1,"theme/theme1.xml",Ze.THEME),s="xl/styles."+r,We(i,s,E5(e,t)),a.styles.push(s),lt(t.wbrels,-1,"styles."+r,Ze.STY),e.vbaraw&&n&&(s="xl/vbaProject.bin",We(i,s,e.vbaraw),a.vba.push(s),lt(t.wbrels,-1,"vbaProject.bin",Ze.VBA)),s="xl/metadata."+r,We(i,s,A5()),a.metadata.push(s),lt(t.wbrels,-1,"metadata."+r,Ze.XLMETA),d.length>1&&(s="xl/persons/person.xml",We(i,s,nz(d)),a.people.push(s),lt(t.wbrels,-1,"persons/person.xml",Ze.PEOPLE)),We(i,"[Content_Types].xml",o5(a,t)),We(i,"_rels/.rels",gc(t.rels)),We(i,"xl/_rels/workbook."+r+".rels",gc(t.wbrels)),delete t.revssf,delete t.ssf,i}function NV(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Fi(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Y5(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return _h(t.file,mt.write(e,{type:tt?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return mt.write(e,t)}function TV(e,t){var r=kn(t||{}),n=jV(e,r);return AV(n,r)}function AV(e,t){var r={},n=tt?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?mt.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(kg(a))}return t.password&&typeof encrypt_agile<"u"?Y5(encrypt_agile(a,t.password),t):t.type==="file"?_h(t.file,a):t.type=="string"?Bd(a):a}function CV(e,t){var r=t||{},n=HH(e,r);return Y5(n,r)}function Ka(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return yf(wf(n));case"binary":return wf(n);case"string":return e;case"file":return _h(t.file,n,"utf8");case"buffer":return tt?Ji(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Ka(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function OV(e,t){switch(t.type){case"base64":return yf(e);case"binary":return e;case"string":return e;case"file":return _h(t.file,e,"binary");case"buffer":return tt?Ji(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function j0(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?yf(r):t.type=="string"?Bd(r):r;case"file":return _h(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function Q5(e,t){aB(),mH(e);var r=kn(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=Q5(e,r);return r.type="array",kg(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Ka(qH(e,r),r);case"slk":case"sylk":return Ka(fU.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return Ka(V5(e.Sheets[e.SheetNames[a]],r),r);case"txt":return OV(J5(e.Sheets[e.SheetNames[a]],r),r);case"csv":return Ka(W_(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return Ka(hU.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return j0(dU.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return Ka(pU.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return Ka(wU.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return Ka(b5.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return Ka(X5(e,r),r);case"wk1":return j0(LE.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return j0(LE.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),j0(H5(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),CV(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return TV(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function kV(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function PV(e,t,r){var n={};return n.type="file",n.file=t,kV(n),Q5(e,n)}function RV(e,t,r,n,a,i,s,l){var c=Mr(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!s||e[r])for(var p=t.s.c;p<=t.e.c;++p){var v=s?e[r][p]:e[n[p]+c];if(v===void 0||v.t===void 0){if(u===void 0)continue;i[p]!=null&&(h[i[p]]=u);continue}var g=v.v;switch(v.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(i[p]!=null){if(g==null)if(v.t=="e"&&g===null)h[i[p]]=null;else if(u!==void 0)h[i[p]]=u;else if(d&&g===null)h[i[p]]=null;else continue;else h[i[p]]=d&&(v.t!=="n"||v.t==="n"&&l.rawNumbers!==!1)?g:Bi(v,g,l);g!=null&&(f=!1)}}return{row:h,isempty:f}}function Zp(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,i=[],s=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=At(d);break;case"number":c=At(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=Mr(c.s.r),h=[],p=[],v=0,g=0,x=Array.isArray(e),b=c.s.r,m=0,y={};x&&!e[b]&&(e[b]=[]);var _=u.skipHidden&&e["!cols"]||[],w=u.skipHidden&&e["!rows"]||[];for(m=c.s.c;m<=c.e.c;++m)if(!(_[m]||{}).hidden)switch(h[m]=Gr(m),r=x?e[b][m]:e[h[m]+f],n){case 1:i[m]=m-c.s.c;break;case 2:i[m]=h[m];break;case 3:i[m]=u.header[m-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=s=Bi(r,null,u),g=y[s]||0,!g)y[s]=1;else{do l=s+"_"+g++;while(y[l]);y[s]=g,y[l]=1}i[m]=l}for(b=c.s.r+a;b<=c.e.r;++b)if(!(w[b]||{}).hidden){var j=RV(e,c,b,h,n,i,x,u);(j.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(p[v++]=j.row)}return p.length=v,p}var HE=/"/g;function IV(e,t,r,n,a,i,s,l){for(var c=!0,u=[],d="",f=Mr(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var p=l.dense?(e[r]||[])[h]:e[n[h]+f];if(p==null)d="";else if(p.v!=null){c=!1,d=""+(l.rawNumbers&&p.t=="n"?p.v:Bi(p,null,l));for(var v=0,g=0;v!==d.length;++v)if((g=d.charCodeAt(v))===a||g===i||g===34||l.forceQuotes){d='"'+d.replace(HE,'""')+'"';break}d=="ID"&&(d='"ID"')}else p.f!=null&&!p.F?(c=!1,d="="+p.f,d.indexOf(",")>=0&&(d='"'+d.replace(HE,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(s)}function W_(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=At(e["!ref"]),i=n.FS!==void 0?n.FS:",",s=i.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],v=a.s.c;v<=a.e.c;++v)(h[v]||{}).hidden||(f[v]=Gr(v));for(var g=0,x=a.s.r;x<=a.e.r;++x)(p[x]||{}).hidden||(d=IV(e,a,x,f,s,c,i,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((g++?l:"")+d)));return delete n.dense,r.join("")}function J5(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=W_(e,t);return r}function DV(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=At(e["!ref"]),i="",s=[],l,c=[],u=Array.isArray(e);for(l=a.s.c;l<=a.e.c;++l)s[l]=Gr(l);for(var d=a.s.r;d<=a.e.r;++d)for(i=Mr(d),l=a.s.c;l<=a.e.c;++l)if(t=s[l]+i,r=u?(e[d]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function Z5(e,t,r){var n=r||{},a=+!n.skipHeader,i=e||{},s=0,l=0;if(i&&n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var c=typeof n.origin=="string"?wr(n.origin):n.origin;s=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:s+t.length-1+a}};if(i["!ref"]){var f=At(i["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),s==-1&&(s=f.e.r+1,d.e.r=s+t.length-1+a)}else s==-1&&(s=0,d.e.r=t.length-1+a);var h=n.header||[],p=0;t.forEach(function(g,x){$r(g).forEach(function(b){(p=h.indexOf(b))==-1&&(h[p=h.length]=b);var m=g[b],y="z",_="",w=ft({c:l+p,r:s+x+a});u=Sf(i,w),m&&typeof m=="object"&&!(m instanceof Date)?i[w]=m:(typeof m=="number"?y="n":typeof m=="boolean"?y="b":typeof m=="string"?y="s":m instanceof Date?(y="d",n.cellDates||(y="n",m=On(m)),_=n.dateNF||Gt[14]):m===null&&n.nullError&&(y="e",m=0),u?(u.t=y,u.v=m,delete u.w,delete u.R,_&&(u.z=_)):i[w]=u={t:y,v:m},_&&(u.z=_))})}),d.e.c=Math.max(d.e.c,l+h.length-1);var v=Mr(s);if(a)for(p=0;p<h.length;++p)i[Gr(p+l)+v]={t:"s",v:h[p]};return i["!ref"]=nr(d),i}function MV(e,t){return Z5(null,e,t)}function Sf(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=wr(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Sf(e,ft(t)):Sf(e,ft({r:t,c:r||0}))}function LV(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function $V(){return{SheetNames:[],Sheets:{}}}function FV(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);a=i&&+i[2]||0;var s=i&&i[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=s+a)!=-1;++a);}if(z5(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function BV(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=LV(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function UV(e,t){return e.z=t,e}function e3(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function zV(e,t,r){return e3(e,"#"+t,r)}function qV(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function WV(e,t,r,n){for(var a=typeof t!="string"?t:At(t),i=typeof t=="string"?t:nr(t),s=a.s.r;s<=a.e.r;++s)for(var l=a.s.c;l<=a.e.c;++l){var c=Sf(e,s,l);c.t="n",c.F=i,delete c.v,s==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var Cx={encode_col:Gr,encode_row:Mr,encode_cell:ft,encode_range:nr,decode_col:R_,decode_row:P_,split_cell:a9,decode_cell:wr,decode_range:Xn,format_cell:Bi,sheet_add_aoa:e5,sheet_add_json:Z5,sheet_add_dom:K5,aoa_to_sheet:ku,json_to_sheet:MV,table_to_sheet:G5,table_to_book:hV,sheet_to_csv:W_,sheet_to_txt:J5,sheet_to_json:Zp,sheet_to_html:V5,sheet_to_formulae:DV,sheet_to_row_object_array:Zp,sheet_get_cell:Sf,book_new:$V,book_append_sheet:FV,book_set_sheet_visibility:BV,cell_set_number_format:UV,cell_set_hyperlink:e3,cell_set_internal_link:zV,cell_add_comment:qV,sheet_set_array_formula:WV,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Qe=({filename:e,sheetName:t,rows:r,columns:n})=>{const a=e.endsWith(".xlsx")?e:`${e}.xlsx`,i=n.map(u=>u.header),s=r.map(u=>n.map(d=>(d.value?d.value(u):u[d.key])??"")),l=Cx.aoa_to_sheet([i,...s]),c=Cx.book_new();Cx.book_append_sheet(c,l,t),PV(c,a)},to=e=>e.replace(/[.\-\s]/g,"").toUpperCase(),Qt=e=>{const t=to(e);if(t.length<2)return t;const r=t.slice(0,-1),n=t.slice(-1);return`${r.replace(/\B(?=(\d{3})+(?!\d))/g,".")}-${n}`},HV=e=>{const t=e.replace(/\D/g,"");let r=0,n=2;for(let i=t.length-1;i>=0;i--)r+=parseInt(t[i],10)*n,n=n===7?2:n+1;const a=11-r%11;return a===11?"0":a===10?"K":String(a)},A1=e=>{if(!e||e.trim()==="")return{valid:!1,error:"RUT es requerido"};const t=to(e);if(!/^\d{7,9}[0-9K]$/i.test(t))return{valid:!1,error:"Formato de RUT invlido"};const r=t.slice(0,-1),n=t.slice(-1).toUpperCase(),a=HV(r);return n!==a?{valid:!1,error:"Dgito verificador invlido"}:{valid:!0}};var C1=function(e,t){return C1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},C1(e,t)};function t3(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");C1(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var em=function(){return em=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},em.apply(this,arguments)};function Iu(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function r3(e,t,r,n){var a=arguments.length,i=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(i=(a<3?s(i):a>3?s(t,r,i):s(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function n3(e,t){return function(r,n){t(r,n,e)}}function a3(e,t,r,n,a,i){function s(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f,h=!1,p=r.length-1;p>=0;p--){var v={};for(var g in n)v[g]=g==="access"?{}:n[g];for(var g in n.access)v.access[g]=n.access[g];v.addInitializer=function(b){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(b||null))};var x=(0,r[p])(l==="accessor"?{get:d.get,set:d.set}:d[c],v);if(l==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(f=s(x.get))&&(d.get=f),(f=s(x.set))&&(d.set=f),(f=s(x.init))&&a.unshift(f)}else(f=s(x))&&(l==="field"?a.unshift(f):d[c]=f)}u&&Object.defineProperty(u,n.name,d),h=!0}function i3(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function s3(e){return typeof e=="symbol"?e:"".concat(e)}function o3(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function l3(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ae(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function c3(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=l(0),s.throw=l(1),s.return=l(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Fg=Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function u3(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Fg(t,e,r)}function tm(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function H_(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(l){s={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function d3(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(H_(arguments[t]));return e}function f3(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var i=arguments[t],s=0,l=i.length;s<l;s++,a++)n[a]=i[s];return n}function h3(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Xc(e){return this instanceof Xc?(this.v=e,this):new Xc(e)}function p3(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),a[Symbol.asyncIterator]=function(){return this},a;function s(p){return function(v){return Promise.resolve(v).then(p,f)}}function l(p,v){n[p]&&(a[p]=function(g){return new Promise(function(x,b){i.push([p,g,x,b])>1||c(p,g)})},v&&(a[p]=v(a[p])))}function c(p,v){try{u(n[p](v))}catch(g){h(i[0][3],g)}}function u(p){p.value instanceof Xc?Promise.resolve(p.value.v).then(d,f):h(i[0][2],p)}function d(p){c("next",p)}function f(p){c("throw",p)}function h(p,v){p(v),i.shift(),i.length&&c(i[0][0],i[0][1])}}function m3(e){var t,r;return t={},n("next"),n("throw",function(a){throw a}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(a,i){t[a]=e[a]?function(s){return(r=!r)?{value:Xc(e[a](s)),done:!1}:i?i(s):s}:i}}function g3(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof tm=="function"?tm(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(s){return new Promise(function(l,c){s=e[i](s),a(l,c,s.done,s.value)})}}function a(i,s,l,c){Promise.resolve(c).then(function(u){i({value:u,done:l})},s)}}function v3(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var VV=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},O1=function(e){return O1=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},O1(e)};function x3(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=O1(e),n=0;n<r.length;n++)r[n]!=="default"&&Fg(t,e,r[n]);return VV(t,e),t}function y3(e){return e&&e.__esModule?e:{default:e}}function b3(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function w3(e,t,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}function _3(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function j3(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var KV=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function S3(e){function t(i){e.error=e.hasError?new KV(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;function a(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(a,function(s){return t(s),a()})}else n|=1}catch(s){t(s)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function E3(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,a,i,s){return n?t?".jsx":".js":a&&(!i||!s)?r:a+i+"."+s.toLowerCase()+"js"}):e}const GV={__extends:t3,__assign:em,__rest:Iu,__decorate:r3,__param:n3,__esDecorate:a3,__runInitializers:i3,__propKey:s3,__setFunctionName:o3,__metadata:l3,__awaiter:Ae,__generator:c3,__createBinding:Fg,__exportStar:u3,__values:tm,__read:H_,__spread:d3,__spreadArrays:f3,__spreadArray:h3,__await:Xc,__asyncGenerator:p3,__asyncDelegator:m3,__asyncValues:g3,__makeTemplateObject:v3,__importStar:x3,__importDefault:y3,__classPrivateFieldGet:b3,__classPrivateFieldSet:w3,__classPrivateFieldIn:_3,__addDisposableResource:j3,__disposeResources:S3,__rewriteRelativeImportExtension:E3},XV=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:j3,get __assign(){return em},__asyncDelegator:m3,__asyncGenerator:p3,__asyncValues:g3,__await:Xc,__awaiter:Ae,__classPrivateFieldGet:b3,__classPrivateFieldIn:_3,__classPrivateFieldSet:w3,__createBinding:Fg,__decorate:r3,__disposeResources:S3,__esDecorate:a3,__exportStar:u3,__extends:t3,__generator:c3,__importDefault:y3,__importStar:x3,__makeTemplateObject:v3,__metadata:l3,__param:n3,__propKey:s3,__read:H_,__rest:Iu,__rewriteRelativeImportExtension:E3,__runInitializers:i3,__setFunctionName:o3,__spread:d3,__spreadArray:h3,__spreadArrays:f3,__values:tm,default:GV},Symbol.toStringTag,{value:"Module"})),YV=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Bg extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class N3 extends Bg{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class k1 extends Bg{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class P1 extends Bg{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var rm;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(rm||(rm={}));class QV{constructor(t,{headers:r={},customFetch:n,region:a=rm.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=YV(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ae(this,arguments,void 0,function*(r,n={}){var a;let i,s;try{const{headers:l,method:c,body:u,signal:d,timeout:f}=n;let h={},{region:p}=n;p||(p=this.region);const v=new URL(`${this.url}/${r}`);p&&p!=="any"&&(h["x-region"]=p,v.searchParams.set("forceFunctionRegion",p));let g;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(h["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(h["Content-Type"]="application/json",g=JSON.stringify(u)):g=u;let x=d;f&&(s=new AbortController,i=setTimeout(()=>s.abort(),f),d?(x=s.signal,d.addEventListener("abort",()=>s.abort())):x=s.signal);const b=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),l),body:g,signal:x}).catch(w=>{throw new N3(w)}),m=b.headers.get("x-relay-error");if(m&&m==="true")throw new k1(b);if(!b.ok)throw new P1(b);let y=((a=b.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),_;return y==="application/json"?_=yield b.json():y==="application/octet-stream"||y==="application/pdf"?_=yield b.blob():y==="text/event-stream"?_=b:y==="multipart/form-data"?_=yield b.formData():_=yield b.text(),{data:_,error:null,response:b}}catch(l){return{data:null,error:l,response:l instanceof P1||l instanceof k1?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var sn={};const Du=Q8(XV);var S0={},E0={},N0={},T0={},A0={},C0={},VE;function T3(){if(VE)return C0;VE=1,Object.defineProperty(C0,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return C0.default=e,C0}var KE;function A3(){if(KE)return A0;KE=1,Object.defineProperty(A0,"__esModule",{value:!0});const t=Du.__importDefault(T3());class r{constructor(a){var i,s;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(i=a.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=a.signal,this.isMaybeSingle=(s=a.isMaybeSingle)!==null&&s!==void 0?s:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=new Headers(this.headers),this.headers.set(a,i),this}then(a,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let l=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,f,h;let p=null,v=null,g=null,x=c.status,b=c.statusText;if(c.ok){if(this.method!=="HEAD"){const w=await c.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?v=w:v=JSON.parse(w))}const y=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),_=(f=c.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");y&&_&&_.length>1&&(g=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(p={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,g=null,x=406,b="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const y=await c.text();try{p=JSON.parse(y),Array.isArray(p)&&c.status===404&&(v=[],p=null,x=200,b="OK")}catch{c.status===404&&y===""?(x=204,b="No Content"):p={message:y}}if(p&&this.isMaybeSingle&&(!((h=p==null?void 0:p.details)===null||h===void 0)&&h.includes("0 rows"))&&(p=null,x=200,b="OK"),p&&this.shouldThrowOnError)throw new t.default(p)}return{error:p,data:v,count:g,status:x,statusText:b}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,f,h,p,v;let g="";const x=c==null?void 0:c.cause;if(x){const b=(u=x==null?void 0:x.message)!==null&&u!==void 0?u:"",m=(d=x==null?void 0:x.code)!==null&&d!==void 0?d:"";g=`${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"FetchError"}: ${c==null?void 0:c.message}`,g+=`

Caused by: ${(h=x==null?void 0:x.name)!==null&&h!==void 0?h:"Error"}: ${b}`,m&&(g+=` (${m})`),x!=null&&x.stack&&(g+=`
${x.stack}`)}else g=(p=c==null?void 0:c.stack)!==null&&p!==void 0?p:"";return{error:{message:`${(v=c==null?void 0:c.name)!==null&&v!==void 0?v:"FetchError"}: ${c==null?void 0:c.message}`,details:g,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(a,i)}returns(){return this}overrideTypes(){return this}}return A0.default=r,A0}var GE;function C3(){if(GE)return T0;GE=1,Object.defineProperty(T0,"__esModule",{value:!0});const t=Du.__importDefault(A3());class r extends t.default{select(a){let i=!1;const s=(a??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:i=!0,nullsFirst:s,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${a}.${i?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:s=i}={}){const l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,i,{foreignTable:s,referencedTable:l=s}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(u,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:i=!1,settings:s=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var d;const f=[a?"analyze":null,i?"verbose":null,s?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),h=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${h}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return T0.default=r,T0}var XE;function V_(){if(XE)return N0;XE=1,Object.defineProperty(N0,"__esModule",{value:!0});const t=Du.__importDefault(C3()),r=new RegExp("[,()]");class n extends t.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}regexMatch(i,s){return this.url.searchParams.append(i,`match.${s}`),this}regexIMatch(i,s){return this.url.searchParams.append(i,`imatch.${s}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}isDistinct(i,s){return this.url.searchParams.append(i,`isdistinct.${s}`),this}in(i,s){const l=Array.from(new Set(s)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${u}fts${d}.${s}`),this}match(i){return Object.entries(i).forEach(([s,l])=>{this.url.searchParams.append(s,`eq.${l}`)}),this}not(i,s,l){return this.url.searchParams.append(i,`not.${s}.${l}`),this}or(i,{foreignTable:s,referencedTable:l=s}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,s,l){return this.url.searchParams.append(i,`${s}.${l}`),this}}return N0.default=n,N0}var YE;function O3(){if(YE)return E0;YE=1,Object.defineProperty(E0,"__esModule",{value:!0});const t=Du.__importDefault(V_());class r{constructor(a,{headers:i={},schema:s,fetch:l}){this.url=a,this.headers=new Headers(i),this.schema=s,this.fetch=l}select(a,i){const{head:s=!1,count:l}=i??{},c=s?"HEAD":"GET";let u=!1;const d=(a??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:s=!0}={}){var l;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const u=a.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:s=!1,count:l,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const f=a.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(f.length>0){const h=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(a,{count:i}={}){var s;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:a}={}){var i;const s="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return E0.default=r,E0}var QE;function JV(){if(QE)return S0;QE=1,Object.defineProperty(S0,"__esModule",{value:!0});const e=Du,t=e.__importDefault(O3()),r=e.__importDefault(V_());class n{constructor(i,{headers:s={},schema:l,fetch:c}={}){this.url=i,this.headers=new Headers(s),this.schemaName=l,this.fetch=c}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const s=new URL(`${this.url}/${i}`);return new t.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,s={},{head:l=!1,get:c=!1,count:u}={}){var d;let f;const h=new URL(`${this.url}/rpc/${i}`);let p;l||c?(f=l?"HEAD":"GET",Object.entries(s).filter(([g,x])=>x!==void 0).map(([g,x])=>[g,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([g,x])=>{h.searchParams.append(g,x)})):(f="POST",p=s);const v=new Headers(this.headers);return u&&v.set("Prefer",`count=${u}`),new r.default({method:f,url:h,headers:v,schema:this.schemaName,body:p,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return S0.default=n,S0}Object.defineProperty(sn,"__esModule",{value:!0});var k3=sn.PostgrestError=U3=sn.PostgrestBuilder=F3=sn.PostgrestTransformBuilder=L3=sn.PostgrestFilterBuilder=D3=sn.PostgrestQueryBuilder=R3=sn.PostgrestClient=void 0;const Mu=Du,P3=Mu.__importDefault(JV());var R3=sn.PostgrestClient=P3.default;const I3=Mu.__importDefault(O3());var D3=sn.PostgrestQueryBuilder=I3.default;const M3=Mu.__importDefault(V_());var L3=sn.PostgrestFilterBuilder=M3.default;const $3=Mu.__importDefault(C3());var F3=sn.PostgrestTransformBuilder=$3.default;const B3=Mu.__importDefault(A3());var U3=sn.PostgrestBuilder=B3.default;const z3=Mu.__importDefault(T3());k3=sn.PostgrestError=z3.default;var q3=sn.default={PostgrestClient:P3.default,PostgrestQueryBuilder:I3.default,PostgrestFilterBuilder:M3.default,PostgrestTransformBuilder:$3.default,PostgrestBuilder:B3.default,PostgrestError:z3.default};const ZV=PO({__proto__:null,get PostgrestBuilder(){return U3},get PostgrestClient(){return R3},get PostgrestError(){return k3},get PostgrestFilterBuilder(){return L3},get PostgrestQueryBuilder(){return D3},get PostgrestTransformBuilder(){return F3},default:q3},[sn]),{PostgrestClient:eK,PostgrestQueryBuilder:SNe,PostgrestFilterBuilder:ENe,PostgrestTransformBuilder:NNe,PostgrestBuilder:TNe,PostgrestError:tK}=q3||ZV;class W3{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const rK="2.87.3",nK=`realtime-js/${rK}`,H3="1.0.0",aK="2.0.0",JE=H3,R1=1e4,iK=1e3,sK=100;var No;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(No||(No={}));var Zt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Zt||(Zt={}));var Oa;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Oa||(Oa={}));var I1;(function(e){e.websocket="websocket"})(I1||(I1={}));var To;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(To||(To={}));class oK{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},s=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(t,r,n){var a,i;const s=t.topic,l=(a=t.ref)!==null&&a!==void 0?a:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+s.length+u.length+f.length,p=new ArrayBuffer(this.HEADER_LENGTH+h);let v=new DataView(p),g=0;v.setUint8(g++,this.KINDS.userBroadcastPush),v.setUint8(g++,c.length),v.setUint8(g++,l.length),v.setUint8(g++,s.length),v.setUint8(g++,u.length),v.setUint8(g++,f.length),v.setUint8(g++,r),Array.from(c,b=>v.setUint8(g++,b.charCodeAt(0))),Array.from(l,b=>v.setUint8(g++,b.charCodeAt(0))),Array.from(s,b=>v.setUint8(g++,b.charCodeAt(0))),Array.from(u,b=>v.setUint8(g++,b.charCodeAt(0))),Array.from(f,b=>v.setUint8(g++,b.charCodeAt(0)));var x=new Uint8Array(p.byteLength+n.byteLength);return x.set(new Uint8Array(p),0),x.set(new Uint8Array(n),p.byteLength),x.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,i,s,l,c]=n;return r({join_ref:a,ref:i,topic:s,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),s=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+a));c=c+a;const d=n.decode(t.slice(c,c+i));c=c+i;const f=n.decode(t.slice(c,c+s));c=c+s;const h=t.slice(c,t.byteLength),p=l===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,v={type:this.BROADCAST_EVENT,event:d,payload:p};return s>0&&(v.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class V3{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var xt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(xt||(xt={}));const ZE=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,s)=>(i[s]=lK(s,e,t,a),i),{}):{}},lK=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,s=r[e];return i&&!n.includes(i)?K3(i,s):D1(s)},K3=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return fK(t,r)}switch(e){case xt.bool:return cK(t);case xt.float4:case xt.float8:case xt.int2:case xt.int4:case xt.int8:case xt.numeric:case xt.oid:return uK(t);case xt.json:case xt.jsonb:return dK(t);case xt.timestamp:return hK(t);case xt.abstime:case xt.date:case xt.daterange:case xt.int4range:case xt.int8range:case xt.money:case xt.reltime:case xt.text:case xt.time:case xt.timestamptz:case xt.timetz:case xt.tsrange:case xt.tstzrange:return D1(t);default:return D1(t)}},D1=e=>e,cK=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},uK=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},dK=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},fK=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const s=e.slice(1,r);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(l=>K3(t,l))}return e},hK=e=>typeof e=="string"?e.replace(" ","T"):e,G3=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Ox{constructor(t,r,n={},a=R1){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var M1;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(M1||(M1={}));class yc{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:s,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yc.syncState(this.state,a,i,s),this.pendingDiffs.forEach(c=>{this.state=yc.syncDiff(this.state,c,i,s)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:s,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=yc.syncDiff(this.state,a,i,s),l())}),this.onJoin((a,i,s)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:s})}),this.onLeave((a,i,s)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),s=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{s[u]||(c[u]=d)}),this.map(s,(u,d)=>{const f=i[u];if(f){const h=d.map(x=>x.presence_ref),p=f.map(x=>x.presence_ref),v=d.filter(x=>p.indexOf(x.presence_ref)<0),g=f.filter(x=>h.indexOf(x.presence_ref)<0);v.length>0&&(l[u]=v),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:s}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(p=>p.presence_ref),h=d.filter(p=>f.indexOf(p.presence_ref)<0);t[l].unshift(...h)}n(l,d,c)}),this.map(s,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var L1;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(L1||(L1={}));var bc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(bc||(bc={}));var Xa;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Xa||(Xa={}));const pK=Zt;class Ro{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ox(this,Oa.join,this.params,this.timeout),this.rejoinTimer=new V3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Zt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Oa.reply,{},(s,l)=>{this._trigger(this._replyEventName(l),s)}),this.presence=new yc(this),this.broadcastEndpointURL=G3(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Zt.closed){const{config:{broadcast:s,presence:l,private:c}}=this.params,u=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[bc.PRESENCE]&&this.bindings[bc.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},h={broadcast:s,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Xa.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Xa.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){t==null||t(Xa.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,x=(v=g==null?void 0:g.length)!==null&&v!==void 0?v:0,b=[];for(let m=0;m<x;m++){const y=g[m],{filter:{event:_,schema:w,table:j,filter:S}}=y,E=p&&p[m];if(E&&E.event===_&&Ro.isFilterValueEqual(E.schema,w)&&Ro.isFilterValueEqual(E.table,j)&&Ro.isFilterValueEqual(E.filter,S))b.push(Object.assign(Object.assign({},y),{id:E.id}));else{this.unsubscribe(),this.state=Zt.errored,t==null||t(Xa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(Xa.SUBSCRIBED);return}}).receive("error",p=>{this.state=Zt.errored,t==null||t(Xa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Xa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Zt.joined&&t===bc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:s}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var s,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(s=this.params)===null||s===void 0?void 0:s.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Zt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Oa.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new Ox(this,Oa.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Zt.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),s=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),s}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Ox(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>sK){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const s=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Oa;if(n&&[l,c,u,d].indexOf(s)>=0&&n!==this._joinRef())return;let h=this._onMessage(s,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var v,g,x;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((x=(g=p.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===s}).map(p=>p.callback(h,n)):(i=this.bindings[s])===null||i===void 0||i.filter(p=>{var v,g,x,b,m,y;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in p){const _=p.id,w=(v=p.filter)===null||v===void 0?void 0:v.event;return _&&((g=r.ids)===null||g===void 0?void 0:g.includes(_))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const _=(m=(b=p==null?void 0:p.filter)===null||b===void 0?void 0:b.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return _==="*"||_===((y=r==null?void 0:r.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===s}).map(p=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:g,table:x,commit_timestamp:b,type:m,errors:y}=v;h=Object.assign(Object.assign({},{schema:g,table:x,commit_timestamp:b,eventType:m,new:{},old:{},errors:y}),this._getPayloadRecords(v))}p.callback(h,n)})}_isClosed(){return this.state===Zt.closed}_isJoined(){return this.state===Zt.joined}_isJoining(){return this.state===Zt.joining}_isLeaving(){return this.state===Zt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Ro.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Oa.close,{},t)}_onError(t){this._on(Oa.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Zt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=ZE(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=ZE(t.columns,t.old_record)),r}}const kx=()=>{},O0={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},mK=[1e3,2e3,5e3,1e4],gK=1e4,vK=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class X3{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=R1,this.transport=null,this.heartbeatIntervalMs=O0.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=kx,this.ref=0,this.reconnectTimer=null,this.vsn=JE,this.logger=kx,this.conn=null,this.sendBuffer=[],this.serializer=new oK,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${I1.websocket}`,this.httpEndpoint=G3(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=W3.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case No.connecting:return To.Connecting;case No.open:return To.Open;case No.closing:return To.Closing;default:return To.Closed}}isConnected(){return this.connectionState()===To.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new Ro(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,s=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(iK,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},O0.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:s}=r,l=s?`(${s})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,s)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===No.open||this.conn.readyState===No.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Oa.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([vK],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:nK};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(Oa.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new V3(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},O0.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,s,l,c,u,d,f,h,p;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:R1,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:O0.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:kx,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:JE,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:v=>mK[v-1]||gK,this.vsn){case H3:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(v,g)=>g(JSON.stringify(v)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(v,g)=>g(JSON.parse(v));break;case aK:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Ug extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Mt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class xK extends Ug{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class $1 extends Ug{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const K_=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),yK=()=>Response,F1=e=>{if(Array.isArray(e))return e.map(r=>F1(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=F1(n)}),t},bK=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},wK=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),Px=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},_K=(e,t,r)=>Ae(void 0,void 0,void 0,function*(){const n=yield yK();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const i=e.status||500,s=(a==null?void 0:a.statusCode)||i+"";t(new xK(Px(a),i,s))}).catch(a=>{t(new $1(Px(a),a))}):t(new $1(Px(e),e))}),jK=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(bK(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Th(e,t,r,n,a,i){return Ae(this,void 0,void 0,function*(){return new Promise((s,l)=>{e(r,jK(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>_K(c,l,n))})})}function Ef(e,t,r,n){return Ae(this,void 0,void 0,function*(){return Th(e,"GET",t,r,n)})}function Na(e,t,r,n,a){return Ae(this,void 0,void 0,function*(){return Th(e,"POST",t,n,a,r)})}function B1(e,t,r,n,a){return Ae(this,void 0,void 0,function*(){return Th(e,"PUT",t,n,a,r)})}function SK(e,t,r,n){return Ae(this,void 0,void 0,function*(){return Th(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function G_(e,t,r,n,a){return Ae(this,void 0,void 0,function*(){return Th(e,"DELETE",t,n,a,r)})}class EK{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return Ae(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}}var Y3;class NK{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[Y3]="BlobDownloadBuilder",this.promise=null}asStream(){return new EK(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ae(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}}Y3=Symbol.toStringTag;const TK={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},eN={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class AK{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=K_(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return Ae(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},eN),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",s.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${s.cacheControl}`,l["content-type"]=s.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!s.duplex&&(s.duplex="half")),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(t=="PUT"?B1:Na)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Mt(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return Ae(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),s=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${s}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:eN.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield B1(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Mt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Ae(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield Na(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),s=new URL(this.url+i.url),l=s.searchParams.get("token");if(!l)throw new Ug("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}update(t,r,n){return Ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Ae(this,void 0,void 0,function*(){try{return{data:yield Na(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mt(a))return{data:null,error:a};throw a}})}copy(t,r,n){return Ae(this,void 0,void 0,function*(){try{return{data:{path:(yield Na(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mt(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return Ae(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Na(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mt(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return Ae(this,void 0,void 0,function*(){try{const a=yield Na(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mt(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),s=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>Ef(this.fetch,`${this.url}/${a}/${l}${s}`,{headers:this.headers,noResolveJson:!0});return new NK(c,this.shouldThrowOnError)}info(t){return Ae(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Ef(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:F1(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}exists(t){return Ae(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield SK(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n)&&n instanceof $1){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield G_(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}list(t,r,n){return Ae(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},TK),r),{prefix:t||""});return{data:yield Na(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mt(a))return{data:null,error:a};throw a}})}listV2(t,r){return Ae(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Na(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Q3="2.87.3",J3={"X-Client-Info":`storage-js/${Q3}`};class CK{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},J3),r),this.fetch=K_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Ae(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield Ef(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}getBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield Ef(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}createBucket(t){return Ae(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Na(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mt(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return Ae(this,void 0,void 0,function*(){try{return{data:yield B1(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield Na(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield G_(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var Nf=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function OK(e,t,r){const n=new URL(t,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&n.searchParams.set(a,i);return n.toString()}async function kK(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function PK(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:a,body:i,headers:s}){const l=OK(e.baseUrl,n,a),c=await kK(e.auth),u=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...s},body:i?JSON.stringify(i):void 0}),d=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),h=f&&d?JSON.parse(d):d;if(!u.ok){const p=f?h:void 0,v=p==null?void 0:p.error;throw new Nf((v==null?void 0:v.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:p})}return{status:u.status,headers:u.headers,data:h}}}}function k0(e){return e.join("")}var RK=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:k0(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${k0(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${k0(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${k0(e.namespace)}`}),!0}catch(t){if(t instanceof Nf&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Nf&&r.status===409)return;throw r}}};function Il(e){return e.join("")}var IK=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Il(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Il(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Il(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Il(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Il(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Il(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Nf&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Nf&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},DK=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=PK({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new RK(this.client,t),this.tableOps=new IK(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class MK{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},J3),r),this.fetch=K_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield Na(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}listBuckets(t){return Ae(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Ef(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield G_(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}from(t){if(!wK(t))throw new Ug("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new DK({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>Ae(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(i,s){const l=i[s];return typeof l!="function"?l:(...c)=>Ae(this,void 0,void 0,function*(){try{return{data:yield l.apply(i,c),error:null}}catch(u){if(n)throw u;return{data:null,error:u}}})}})}}const X_={"X-Client-Info":`storage-js/${Q3}`,"Content-Type":"application/json"};class Z3 extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function zn(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Rx extends Z3{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class LK extends Z3{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var tN;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(tN||(tN={}));const Y_=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),$K=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},rN=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),FK=(e,t,r)=>Ae(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e.status||500,i=e;if(typeof i.json=="function")i.json().then(s=>{const l=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||a+"";t(new Rx(rN(s),a,l))}).catch(()=>{const s=a+"",l=i.statusText||`HTTP ${a} error`;t(new Rx(l,a,s))});else{const s=a+"",l=i.statusText||`HTTP ${a} error`;t(new Rx(l,a,s))}}else t(new LK(rN(e),e))}),BK=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return n?($K(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function UK(e,t,r,n,a,i){return Ae(this,void 0,void 0,function*(){return new Promise((s,l)=>{e(r,BK(t,n,a,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>s(c)).catch(c=>FK(c,l,n))})})}function qn(e,t,r,n,a){return Ae(this,void 0,void 0,function*(){return UK(e,"POST",t,n,a,r)})}class zK{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},X_),r),this.fetch=Y_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Ae(this,void 0,void 0,function*(){try{return{data:(yield qn(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zn(r))return{data:null,error:r};throw r}})}getIndex(t,r){return Ae(this,void 0,void 0,function*(){try{return{data:yield qn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zn(n))return{data:null,error:n};throw n}})}listIndexes(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield qn(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zn(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return Ae(this,void 0,void 0,function*(){try{return{data:(yield qn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zn(n))return{data:null,error:n};throw n}})}}class qK{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},X_),r),this.fetch=Y_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Ae(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield qn(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zn(r))return{data:null,error:r};throw r}})}getVectors(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield qn(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zn(r))return{data:null,error:r};throw r}})}listVectors(t){return Ae(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield qn(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zn(r))return{data:null,error:r};throw r}})}queryVectors(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield qn(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zn(r))return{data:null,error:r};throw r}})}deleteVectors(t){return Ae(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield qn(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zn(r))return{data:null,error:r};throw r}})}}class WK{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},X_),r),this.fetch=Y_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:(yield qn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zn(r))return{data:null,error:r};throw r}})}getBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield qn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zn(r))return{data:null,error:r};throw r}})}listBuckets(){return Ae(this,arguments,void 0,function*(t={}){try{return{data:yield qn(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:(yield qn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zn(r))return{data:null,error:r};throw r}})}}class HK extends WK{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new VK(this.url,this.headers,t,this.fetch)}createBucket(t){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Ae(this,void 0,void 0,function*(){return r.createBucket.call(this,t)})}getBucket(t){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Ae(this,void 0,void 0,function*(){return r.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Ae(this,arguments,void 0,function*(r={}){return t.listBuckets.call(this,r)})}deleteBucket(t){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Ae(this,void 0,void 0,function*(){return r.deleteBucket.call(this,t)})}}class VK extends zK{constructor(t,r,n,a){super(t,r,a),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ae(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ae(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ae(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ae(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new KK(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class KK extends qK{constructor(t,r,n,a,i){super(t,r,i),this.vectorBucketName=n,this.indexName=a}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ae(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ae(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ae(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ae(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ae(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class GK extends CK{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new AK(this.url,this.headers,t,this.fetch)}get vectors(){return new HK(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new MK(this.url+"/iceberg",this.headers,this.fetch)}}const XK="2.87.3";let Nd="";typeof Deno<"u"?Nd="deno":typeof document<"u"?Nd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Nd="react-native":Nd="node";const YK={"X-Client-Info":`supabase-js-${Nd}/${XK}`},QK={headers:YK},JK={schema:"public"},ZK={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},eG={},tG=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),rG=()=>Headers,nG=(e,t,r)=>{const n=tG(r),a=rG();return async(i,s)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new a(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},s),{headers:u}))}};function aG(e){return e.endsWith("/")?e:e+"/"}function iG(e,t){var r,n;const{db:a,auth:i,realtime:s,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),s),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function sG(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(aG(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const eR="2.87.3",zl=30*1e3,U1=3,Ix=U1*zl,oG="http://localhost:9999",lG="supabase.auth.token",cG={"X-Client-Info":`gotrue-js/${eR}`},z1="X-Supabase-Api-Version",tR={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},uG=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,dG=10*60*1e3;class Yc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ke(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class rR extends Yc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function nR(e){return ke(e)&&e.name==="AuthApiError"}class ps extends Yc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class li extends Yc{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class vn extends li{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function aR(e){return ke(e)&&e.name==="AuthSessionMissingError"}class yo extends li{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Td extends li{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ad extends li{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function iR(e){return ke(e)&&e.name==="AuthImplicitGrantRedirectError"}class q1 extends li{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class sR extends li{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}function fG(e){return ke(e)&&e.name==="AuthPKCECodeVerifierMissingError"}class nm extends li{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function op(e){return ke(e)&&e.name==="AuthRetryableFetchError"}class W1 extends li{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}function hG(e){return ke(e)&&e.name==="AuthWeakPasswordError"}class am extends li{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const im="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),nN=` 	
\r=`.split(""),pG=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<nN.length;t+=1)e[nN[t].charCodeAt(0)]=-2;for(let t=0;t<im.length;t+=1)e[im[t].charCodeAt(0)]=t;return e})();function aN(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(im[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(im[n]),t.queuedBits-=6}}function oR(e,t,r){const n=pG[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function iN(e){const t=[],r=s=>{t.push(String.fromCodePoint(s))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=s=>{vG(s,n,r)};for(let s=0;s<e.length;s+=1)oR(e.charCodeAt(s),a,i);return t.join("")}function mG(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function gG(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}mG(n,t)}}function vG(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function wc(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)oR(e.charCodeAt(a),r,n);return new Uint8Array(t)}function xG(e){const t=[];return gG(e,r=>t.push(r)),new Uint8Array(t)}function Io(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>aN(a,r,n)),aN(null,r,n),t.join("")}function yG(e){return Math.round(Date.now()/1e3)+e}function bG(){return Symbol("auth-callback")}const Cr=()=>typeof window<"u"&&typeof document<"u",fo={tested:!1,writable:!1},lR=()=>{if(!Cr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fo.tested)return fo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),fo.tested=!0,fo.writable=!0}catch{fo.tested=!0,fo.writable=!1}return fo.writable};function wG(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const cR=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),_G=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ql=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ho=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Tr=async(e,t)=>{await e.removeItem(t)};class zg{constructor(){this.promise=new zg.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}zg.promiseConstructor=Promise;function Dx(e){const t=e.split(".");if(t.length!==3)throw new am("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!uG.test(t[n]))throw new am("JWT not in base64url format");return{header:JSON.parse(iN(t[0])),payload:JSON.parse(iN(t[1])),signature:wc(t[2]),raw:{header:t[0],payload:t[1]}}}async function jG(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function SG(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const s=await e(i);if(!t(i,null,s)){n(s);return}}catch(s){if(!t(i,s)){a(s);return}}})()})}function EG(e){return("0"+e.toString(16)).substr(-2)}function NG(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,EG).join("")}async function TG(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function AG(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await TG(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Dl(e,t,r=!1){const n=NG();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await ql(e,`${t}-code-verifier`,a);const i=await AG(n);return[i,n===i?"plain":"s256"]}const CG=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function OG(e){const t=e.headers.get(z1);if(!t||!t.match(CG))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function kG(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function PG(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const RG=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ml(e){if(!RG.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Mx(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function IG(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function sN(e){return JSON.parse(JSON.stringify(e))}const bo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),DG=[502,503,504];async function oN(e){var t;if(!_G(e))throw new nm(bo(e),0);if(DG.includes(e.status))throw new nm(bo(e),e.status);let r;try{r=await e.json()}catch(i){throw new ps(bo(i),i)}let n;const a=OG(e);if(a&&a.getTime()>=tR["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new W1(bo(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new vn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0))throw new W1(bo(r),e.status,r.weak_password.reasons);throw new rR(bo(r),e.status||500,n)}const MG=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Ie(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[z1]||(i[z1]=tR["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const s=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(s.redirect_to=n.redirectTo);const l=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await LG(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function LG(e,t,r,n,a,i){const s=MG(t,n,a,i);let l;try{l=await e(r,Object.assign({},s))}catch(c){throw console.error(c),new nm(bo(c),0)}if(l.ok||await oN(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await oN(c)}}function Sa(e){var t;let r=null;BG(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=yG(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function lN(e){const t=Sa(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ms(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function $G(e){return{data:e,error:null}}function FG(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,s=Iu(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},s);return{data:{properties:l,user:c},error:null}}function cN(e){return e}function BG(e){return e.access_token&&e.refresh_token&&e.expires_in}const lp=["global","local","others"];class Q_{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=cR(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=lp[0]){if(lp.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${lp.join(", ")}`);try{return await Ie(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Ie(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ms})}catch(n){if(ke(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Iu(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Ie(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:FG,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ke(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Ie(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ms})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,s,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Ie(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:cN});if(d.error)throw d.error;const f=await d.json(),h=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);u[`${x}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(ke(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Ml(t);try{return await Ie(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ms})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ml(t);try{return await Ie(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:ms})}catch(n){if(ke(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Ml(t);try{return await Ie(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:ms})}catch(n){if(ke(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Ml(t.userId);try{const{data:r,error:n}=await Ie(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(ke(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ml(t.userId),Ml(t.id);try{return{data:await Ie(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,s,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Ie(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:cN});if(d.error)throw d.error;const f=await d.json(),h=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);u[`${x}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(ke(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Ie(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ke(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Ie(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ke(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Ie(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Ie(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Ie(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ke(r))return{data:null,error:r};throw r}}}function uN(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const wo={debug:!!(globalThis&&lR()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class J_ extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class uR extends J_{}class UG extends J_{}async function dR(e,t,r){wo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),wo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){wo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{wo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw wo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new uR(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(wo.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const dN={};async function zG(e,t,r){var n;const a=(n=dN[e])!==null&&n!==void 0?n:Promise.resolve(),i=Promise.race([a.catch(()=>null),t>=0?new Promise((s,l)=>{setTimeout(()=>{l(new UG(`Acquiring process lock with name "${e}" timed out`))},t)}):null].filter(s=>s)).catch(s=>{if(s&&s.isAcquireTimeout)throw s;return null}).then(async()=>await r());return dN[e]=i.catch(async s=>{if(s&&s.isAcquireTimeout)return await a,null;throw s}),await i}function qG(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function fR(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function WG(e){return parseInt(e,16)}function HG(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function VG(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:s,notBefore:l,requestId:c,resources:u,scheme:d,uri:f,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=fR(e.address),v=d?`${d}://${n}`:n,g=e.statement?`${e.statement}
`:"",x=`${v} wants you to sign in with your Ethereum account:
${p}

${g}`;let b=`URI: ${f}
Version: ${h}
Chain ID: ${r}${s?`
Nonce: ${s}`:""}
Issued At: ${i.toISOString()}`;if(a&&(b+=`
Expiration Time: ${a.toISOString()}`),l&&(b+=`
Not Before: ${l.toISOString()}`),c&&(b+=`
Request ID: ${c}`),u){let m=`
Resources:`;for(const y of u){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);m+=`
- ${y}`}b+=m}return`${x}
${b}`}class tr extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class sm extends tr{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function KG({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new tr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new tr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new tr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new tr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new tr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new tr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new tr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new tr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(hR(s)){if(i.rp.id!==s)return new tr({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new tr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new tr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new tr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new tr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function GG({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new tr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new tr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(hR(n)){if(r.rpId!==n)return new tr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new tr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new tr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new tr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class XG{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const YG=new XG;function QG(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=Iu(e,["challenge","user","excludeCredentials"]),i=wc(t).buffer,s=Object.assign(Object.assign({},r),{id:wc(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:s});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:wc(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function JG(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Iu(e,["challenge","allowCredentials"]),a=wc(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let s=0;s<r.length;s++){const l=r[s];i.allowCredentials[s]=Object.assign(Object.assign({},l),{id:wc(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function ZG(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Io(new Uint8Array(e.response.attestationObject)),clientDataJSON:Io(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function eX(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Io(new Uint8Array(a.authenticatorData)),clientDataJSON:Io(new Uint8Array(a.clientDataJSON)),signature:Io(new Uint8Array(a.signature)),userHandle:a.userHandle?Io(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function hR(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function fN(){var e,t;return!!(Cr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function tX(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new sm("Browser returned unexpected credential type",t)}:{data:null,error:new sm("Empty credential response",t)}}catch(t){return{data:null,error:KG({error:t,options:e})}}}async function rX(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new sm("Browser returned unexpected credential type",t)}:{data:null,error:new sm("Empty credential response",t)}}catch(t){return{data:null,error:GG({error:t,options:e})}}}const nX={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},aX={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function om(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const s=a[i];if(s!==void 0)if(Array.isArray(s))n[i]=s;else if(r(s))n[i]=s;else if(t(s)){const l=n[i];t(l)?n[i]=om(l,s):n[i]=om(s)}else n[i]=s}return n}function iX(e,t){return om(nX,e,t||{})}function sX(e,t){return om(aX,e,t||{})}class oX{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){try{const{data:s,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!s)return{data:null,error:l};const c=a??YG.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=iX(s.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:f}=await tX({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=sX(s.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:f}=await rX(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(s){return ke(s)?{data:null,error:s}:{data:null,error:new ps("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new Yc("rpId is required for WebAuthn authentication")};try{if(!fN())return{data:null,error:new ps("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!s)return{data:null,error:l};const{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(s){return ke(s)?{data:null,error:s}:{data:null,error:new ps("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new Yc("rpId is required for WebAuthn registration")};try{if(!fN())return{data:null,error:new ps("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(s){return ke(s)?{data:null,error:s}:{data:null,error:new ps("Unexpected error in register",s)}}}}qG();const lX={url:oG,storageKey:lG,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:cG,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function hN(e,t,r){return await r()}const Ll={};class Qc{get jwks(){var t,r;return(r=(t=Ll[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ll[this.storageKey]=Object.assign(Object.assign({},Ll[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ll[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ll[this.storageKey]=Object.assign(Object.assign({},Ll[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},lX),t);if(this.storageKey=i.storageKey,this.instanceID=(r=Qc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Qc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Cr()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Q_({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=cR(i.fetch),this.lock=i.lock||hN,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Cr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=dR:this.lock=hN,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new oX(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:lR()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=uN(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=uN(this.memoryStorage)),Cr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${eR}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Cr()&&(r=wG(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Cr()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),iR(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:s,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",s,"redirect type",l),await this._saveSession(s),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ke(r)?this._returnResult({error:r}):this._returnResult({error:new ps("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Sa}),{data:s,error:l}=i;if(l||!s)return this._returnResult({data:{user:null,session:null},error:l});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(ke(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Dl(this.storage,this.storageKey)),i=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:v},xform:Sa})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Sa})}else throw new Td("You must provide either an email or phone number and a password");const{data:s,error:l}=i;if(l||!s)return await Tr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await Tr(this.storage,`${this.storageKey}-code-verifier`),ke(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:s,options:l}=t;r=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:lN})}else if("phone"in t){const{phone:i,password:s,options:l}=t;r=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:lN})}else throw new Td("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new yo;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(ke(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,s,l,c,u,d,f,h;let p,v;if("message"in t)p=t.message,v=t.signature;else{const{chain:g,wallet:x,statement:b,options:m}=t;let y;if(Cr())if(typeof x=="object")y=x;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")y=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=x}const _=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href),w=await y.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!w||w.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=fR(w[0]);let S=(n=m==null?void 0:m.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!S){const N=await y.request({method:"eth_chainId"});S=WG(N)}const E={domain:_.host,address:j,statement:b,uri:_.href,version:"1",chainId:S,nonce:(a=m==null?void 0:m.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(s=(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(l=m==null?void 0:m.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=m==null?void 0:m.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=m==null?void 0:m.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=VG(E),v=await y.request({method:"personal_sign",params:[HG(p),j]})}try{const{data:g,error:x}=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:v},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Sa});if(x)throw x;if(!g||!g.session||!g.user){const b=new yo;return this._returnResult({data:{user:null,session:null},error:b})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:x})}catch(g){if(ke(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var r,n,a,i,s,l,c,u,d,f,h,p;let v,g;if("message"in t)v=t.message,g=t.signature;else{const{chain:x,wallet:b,statement:m,options:y}=t;let _;if(Cr())if(typeof b=="object")_=b;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))_=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=b}const w=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const j=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),m?{statement:m}:null));let S;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")S=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)S=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)v=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),g=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${w.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(a=(n=y==null?void 0:y.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((s=y==null?void 0:y.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((f=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...y.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const j=await _.signMessage(new TextEncoder().encode(v),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=j}}try{const{data:x,error:b}=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Io(g)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Sa});if(b)throw b;if(!x||!x.session||!x.user){const m=new yo;return this._returnResult({data:{user:null,session:null},error:m})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:b})}catch(x){if(ke(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(t){const r=await ho(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new sR;const{data:i,error:s}=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Sa});if(await Tr(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!i||!i.session||!i.user){const l=new yo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:s})}catch(i){if(await Tr(this.storage,`${this.storageKey}-code-verifier`),ke(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:s}=t,l=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Sa}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new yo;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(ke(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,i,s;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Dl(this.storage,this.storageKey));const{error:f}=await Ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await Ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(s=c==null?void 0:c.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Td("You must provide either an email or phone number.")}catch(l){if(await Tr(this.storage,`${this.storageKey}-code-verifier`),ke(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:s,error:l}=await Ie(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Sa});if(l)throw l;if(!s)throw new Error("An error occurred on token verification.");const c=s.session,u=s.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(ke(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,i,s;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Dl(this.storage,this.storageKey));const u=await Ie(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:$G});return!((i=u.data)===null||i===void 0)&&i.url&&Cr()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await Tr(this.storage,`${this.storageKey}-code-verifier`),ke(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new vn;const{error:a}=await Ie(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(ke(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:s}=await Ie(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:s,error:l}=await Ie(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:l})}throw new Td("You must provide either an email or phone number and a type")}catch(r){if(ke(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ho(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Ix:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const s=await ho(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=Mx()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};t.user=IG(t.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ms}):await this._useSession(async r=>{var n,a,i;const{data:s,error:l}=r;if(l)throw l;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new vn}:await Ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:ms})})}catch(r){if(ke(r))return aR(r)&&(await this._removeSession(),await Tr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new vn;const s=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Dl(this.storage,this.storageKey));const{data:u,error:d}=await Ie(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:s.access_token,xform:ms});if(d)throw d;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(n){if(await Tr(this.storage,`${this.storageKey}-code-verifier`),ke(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new vn;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:s}=Dx(t.access_token);if(s.exp&&(n=s.exp,a=n<=r),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(ke(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:s,error:l}=r;if(l)throw l;t=(n=s.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new vn;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(ke(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Cr())throw new Ad("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ad(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new q1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ad("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new q1("No code detected.");const{data:m,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:s,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!s||!u)throw new Ad("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const p=h-d;p*1e3<=zl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const v=h-f;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,h,d);const{data:g,error:x}=await this._getUser(i);if(x)throw x;const b={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:s,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:b,redirectType:t.type},error:null})}catch(n){if(ke(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await ho(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const s=(n=a.session)===null||n===void 0?void 0:n.access_token;if(s){const{error:l}=await this.admin.signOut(s,t);if(l&&!(nR(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Tr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=bG(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:s}=r;if(s)throw s;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Dl(this.storage,this.storageKey,!0));try{return await Ie(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Tr(this.storage,`${this.storageKey}-code-verifier`),ke(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var s,l,c,u,d;const{data:f,error:h}=i;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ie(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return Cr()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(ke(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:s,provider:l,token:c,access_token:u,nonce:d}=t,f=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Sa}),{data:h,error:p}=f;return p?this._returnResult({data:{user:null,session:null},error:p}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new yo}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:p}))}catch(a){if(await Tr(this.storage,`${this.storageKey}-code-verifier`),ke(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)throw s;return await Ie(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await SG(async a=>(a>0&&await jG(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Ie(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Sa})),(a,i)=>{const s=200*Math.pow(2,a);return i&&op(i)&&Date.now()+s-n<zl})}catch(n){if(this._debug(r,"error",n),ke(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Cr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await ho(this.storage,this.storageKey);if(a&&this.userStorage){let s=await ho(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:a.user},await ql(this.userStorage,this.storageKey+"-user",s)),a.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:Mx()}else if(a&&!a.user&&!a.user){const s=await ho(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(a.user=s.user,await Tr(this.storage,this.storageKey+"-user"),await ql(this.storage,this.storageKey,a)):a.user=Mx()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ix;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Ix}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:s}=await this._callRefreshToken(a.refresh_token);s&&(console.error(s),op(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:l}=await this._getUser(a.access_token);!l&&(s!=null&&s.user)?(a.user=s.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new vn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new zg;const{data:i,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!i.session)throw new vn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),ke(i)){const s={data:null,error:i};return op(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],s=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(s),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Tr(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await ql(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=sN(a);await ql(this.storage,this.storageKey,i)}else{const a=sN(r);await ql(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Tr(this.storage,this.storageKey),await Tr(this.storage,this.storageKey+"-code-verifier"),await Tr(this.storage,this.storageKey+"-user"),this.userStorage&&await Tr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Cr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),zl);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/zl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${zl}ms, refresh threshold is ${U1} ticks`),a<=U1&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof J_)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Cr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,s]=await Dl(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(s)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await Ie(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await Ie(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?ZG(t.webauthn.credential_response):eX(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await Ie(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const s=await Ie(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(s.error)return s;const{data:l}=s;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:QG(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:JG(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Dx(n.access_token);let s=null;i.aal&&(s=i.aal);let l=s;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:s,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Ie(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new vn})})}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new vn});const s=await Ie(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&Cr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new vn});const s=await Ie(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&Cr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Ie(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new vn})})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(await Ie(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new vn})})}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+dG>a)return n;const{data:i,error:s}=await Ie(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:v}=await this.getSession();if(v||!p.session)return this._returnResult({data:null,error:v});n=p.session.access_token}const{header:a,payload:i,signature:s,raw:{header:l,payload:c}}=Dx(n);r!=null&&r.allowExpired||kG(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:a,signature:s},error:null}}const d=PG(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,s,xG(`${l}.${c}`)))throw new am("Invalid JWT signature");return{data:{claims:i,header:a,signature:s},error:null}}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}}Qc.nextInstanceID={};const cX=Q_,pR=Qc;class uX extends pR{constructor(t){super(t)}}class mR{constructor(t,r,n){var a,i,s;this.supabaseUrl=t,this.supabaseKey=r;const l=sG(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:JK,realtime:eG,auth:Object.assign(Object.assign({},ZK),{storageKey:c}),global:QK},d=iG(n??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=d.auth)!==null&&s!==void 0?s:{},this.headers,d.global.fetch),this.fetch=nG(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new eK(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new GK(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new QV(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:s,flowType:l,lock:c,debug:u,throwOnError:d},f,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new uX({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),f),storageKey:s,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:l,lock:c,debug:u,throwOnError:d,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new X3(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const dX=(e,t,r)=>new mR(e,t,r);function fX(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}fX()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const hX=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:cX,AuthApiError:rR,AuthClient:pR,AuthError:Yc,AuthImplicitGrantRedirectError:Ad,AuthInvalidCredentialsError:Td,AuthInvalidJwtError:am,AuthInvalidTokenResponseError:yo,AuthPKCECodeVerifierMissingError:sR,AuthPKCEGrantCodeExchangeError:q1,AuthRetryableFetchError:nm,AuthSessionMissingError:vn,AuthUnknownError:ps,AuthWeakPasswordError:W1,CustomAuthError:li,get FunctionRegion(){return rm},FunctionsError:Bg,FunctionsFetchError:N3,FunctionsHttpError:P1,FunctionsRelayError:k1,GoTrueAdminApi:Q_,GoTrueClient:Qc,NavigatorLockAcquireTimeoutError:uR,PostgrestError:tK,REALTIME_CHANNEL_STATES:pK,get REALTIME_LISTEN_TYPES(){return bc},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return L1},get REALTIME_PRESENCE_LISTEN_EVENTS(){return M1},get REALTIME_SUBSCRIBE_STATES(){return Xa},RealtimeChannel:Ro,RealtimeClient:X3,RealtimePresence:yc,SIGN_OUT_SCOPES:lp,SupabaseClient:mR,WebSocketFactory:W3,createClient:dX,isAuthApiError:nR,isAuthError:ke,isAuthImplicitGrantRedirectError:iR,isAuthPKCECodeVerifierMissingError:fG,isAuthRetryableFetchError:op,isAuthSessionMissingError:aR,isAuthWeakPasswordError:hG,lockInternals:wo,navigatorLock:dR,processLock:zG},Symbol.toStringTag,{value:"Module"})),{createClient:gR}=hX,pX="https://kzslhhctjfxsdvcrqvvs.supabase.co",vR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt6c2xoaGN0amZ4c2R2Y3JxdnZzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4NDAzODQsImV4cCI6MjA4MTQxNjM4NH0.NQ1maFD5Nl8y-5TxJFjeSdhOSzOi-6Hd8o4VcrmLUKo",le=gR(pX,vR,{auth:{persistSession:!1,autoRefreshToken:!1},realtime:{params:{eventsPerSecond:10}}}),Fr=()=>!!vR,Jc=[{value:"conductor",label:"Conductor"},{value:"inspector_patio",label:"Inspector Patio"},{value:"cleaner",label:"Cleaner"},{value:"planillero",label:"Planillero"},{value:"supervisor",label:"Supervisor"}],mX=[{value:"todos",label:"Todos"},{value:"ACTIVO",label:"Activo"},{value:"DESVINCULADO",label:"Desvinculado"}],xR=async(e,t)=>{if(!Fr())return console.warn("Supabase not configured, returning empty array"),[];const r=Jn(e);let n=le.from("staff").select(`
      *,
      staff_admonitions(count)
    `).in("terminal_code",r).order("nombre",{ascending:!0});if(t!=null&&t.status&&t.status!=="todos"&&(n=n.eq("status",t.status)),t!=null&&t.cargo&&t.cargo!=="todos"&&(n=n.eq("cargo",t.cargo)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}const{data:a,error:i}=await n;if(i)throw console.error("Error fetching staff:",i),i;return(a||[]).map(s=>{var l,c;return{...s,admonition_count:((c=(l=s.staff_admonitions)==null?void 0:l[0])==null?void 0:c.count)??0}})},gX=async e=>{const t=to(e),{data:r,error:n}=await le.from("staff").select("*").eq("rut",t).single();if(n){if(n.code==="PGRST116")return null;throw n}return r},vX=async e=>{var n,a,i,s,l,c;const{data:t,error:r}=await le.from("staff").insert({rut:to(e.rut),nombre:e.nombre.trim(),cargo:e.cargo,terminal_code:e.terminal_code,turno:e.turno.trim(),horario:e.horario.trim(),contacto:e.contacto.trim(),email:((n=e.email)==null?void 0:n.trim())||null,talla_polera:((a=e.talla_polera)==null?void 0:a.trim())||null,talla_chaqueta:((i=e.talla_chaqueta)==null?void 0:i.trim())||null,talla_pantalon:((s=e.talla_pantalon)==null?void 0:s.trim())||null,talla_zapato_seguridad:((l=e.talla_zapato_seguridad)==null?void 0:l.trim())||null,talla_chaleco_reflectante:((c=e.talla_chaleco_reflectante)==null?void 0:c.trim())||null}).select().single();if(r)throw r.code==="23505"?new Error("Ya existe un trabajador con ese RUT"):r;return t},xX=async(e,t)=>{var i,s,l,c,u,d;const r={};t.rut!==void 0&&(r.rut=to(t.rut)),t.nombre!==void 0&&(r.nombre=t.nombre.trim()),t.cargo!==void 0&&(r.cargo=t.cargo),t.terminal_code!==void 0&&(r.terminal_code=t.terminal_code),t.turno!==void 0&&(r.turno=t.turno.trim()),t.horario!==void 0&&(r.horario=t.horario.trim()),t.contacto!==void 0&&(r.contacto=t.contacto.trim()),t.email!==void 0&&(r.email=((i=t.email)==null?void 0:i.trim())||null),t.talla_polera!==void 0&&(r.talla_polera=((s=t.talla_polera)==null?void 0:s.trim())||null),t.talla_chaqueta!==void 0&&(r.talla_chaqueta=((l=t.talla_chaqueta)==null?void 0:l.trim())||null),t.talla_pantalon!==void 0&&(r.talla_pantalon=((c=t.talla_pantalon)==null?void 0:c.trim())||null),t.talla_zapato_seguridad!==void 0&&(r.talla_zapato_seguridad=((u=t.talla_zapato_seguridad)==null?void 0:u.trim())||null),t.talla_chaleco_reflectante!==void 0&&(r.talla_chaleco_reflectante=((d=t.talla_chaleco_reflectante)==null?void 0:d.trim())||null);const{data:n,error:a}=await le.from("staff").update(r).eq("id",e).select().single();if(a)throw a;return n},yX=async(e,t)=>{const{data:r,error:n}=await le.from("staff").update({status:"DESVINCULADO",terminated_at:new Date().toISOString(),termination_comment:t.trim()}).eq("id",e).select().single();if(n)throw n;return r},bX=async e=>{const t=Jn(e),{data:r,error:n}=await le.from("staff").select("cargo, terminal_code").eq("status","ACTIVO").in("terminal_code",t);if(n)throw n;const{data:a}=await le.from("staff_caps").select("*").eq("scope_code","ER_LR"),i=new Map;(a||[]).forEach(d=>{i.set(d.cargo,d.max_q)});const s=new Map;Jc.forEach(d=>s.set(d.value,0)),(r||[]).forEach(d=>{const f=s.get(d.cargo)||0;s.set(d.cargo,f+1)});const l=Jc.map(d=>({cargo:d.value,count:s.get(d.value)||0,max_q:i.get(d.value)??null})),c=new Map;t.forEach(d=>c.set(d,0)),(r||[]).forEach(d=>{const f=c.get(d.terminal_code)||0;c.set(d.terminal_code,f+1)});const u=t.map(d=>({terminal_code:d,count:c.get(d)||0}));return{byCargo:l,byTerminal:u,total:(r==null?void 0:r.length)||0}},wX=async(e,t,r,n)=>{const a=n.name.split(".").pop(),i=`staff/${e}/admonitions/${Date.now()}.${a}`,{error:s}=await le.storage.from("staff-docs").upload(i,n);if(s)throw console.error("Upload error:",s),new Error("Error al subir el documento");const{data:l,error:c}=await le.from("staff_admonitions").insert({staff_id:e,reason:t.trim(),admonition_date:r,document_path:i}).select().single();if(c)throw c;return l},_X=(e,t)=>{const r=le.channel("staff-changes").on("postgres_changes",{event:"*",schema:"public",table:"staff"},n=>{e({eventType:n.eventType,new:n.new,old:n.old})}).on("postgres_changes",{event:"INSERT",schema:"public",table:"staff_admonitions"},n=>{t({eventType:n.eventType,new:n.new})}).subscribe();return()=>{le.removeChannel(r)}},Ot={all:["staff"],lists:()=>[...Ot.all,"list"],list:(e,t)=>[...Ot.lists(),e,t],details:()=>[...Ot.all,"detail"],detail:e=>[...Ot.details(),e],counts:e=>[...Ot.all,"counts",e],caps:()=>[...Ot.all,"caps"],admonitions:e=>[...Ot.all,"admonitions",e]},yR=(e,t)=>Ge({queryKey:Ot.list(e,t),queryFn:()=>xR(e,t)}),jX=e=>Ge({queryKey:Ot.counts(e),queryFn:()=>bX(e)}),SX=()=>{const e=$e();return Be({mutationFn:t=>vX(t),onSuccess:()=>{e.invalidateQueries({queryKey:Ot.lists()}),e.invalidateQueries({queryKey:Ot.counts({})})}})},EX=()=>{const e=$e();return Be({mutationFn:({id:t,values:r})=>xX(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:Ot.lists()}),e.invalidateQueries({queryKey:Ot.detail(t.id)}),e.invalidateQueries({queryKey:Ot.counts({})})}})},NX=()=>{const e=$e();return Be({mutationFn:({id:t,comment:r})=>yX(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:Ot.lists()}),e.invalidateQueries({queryKey:Ot.detail(t.id)}),e.invalidateQueries({queryKey:Ot.counts({})})}})},TX=()=>{const e=$e();return Be({mutationFn:({staffId:t,reason:r,admonitionDate:n,file:a})=>wX(t,r,n,a),onSuccess:t=>{e.invalidateQueries({queryKey:Ot.admonitions(t.staff_id)}),e.invalidateQueries({queryKey:Ot.lists()})}})},AX=e=>{const t=$e();T.useEffect(()=>_X(n=>{console.log("Staff change:",n.eventType),t.invalidateQueries({queryKey:Ot.lists()}),t.invalidateQueries({queryKey:Ot.counts(e)}),n.new&&t.invalidateQueries({queryKey:Ot.detail(n.new.id)})},n=>{console.log("Admonition change:",n.eventType),n.new&&(t.invalidateQueries({queryKey:Ot.admonitions(n.new.staff_id)}),t.invalidateQueries({queryKey:Ot.lists()}))}),[t,e])},CX=e=>({conductor:"calendar",inspector_patio:"clipboard",cleaner:"check-circle",planillero:"layers",supervisor:"users"})[e]||"users",OX=e=>{var t;return((t=Jc.find(r=>r.value===e))==null?void 0:t.label)||e},kX=({terminalContext:e})=>{const{data:t,isLoading:r}=jX(e);if(r)return o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6",children:[...Array(5)].map((a,i)=>o.jsxs("div",{className:"card p-4 animate-pulse",children:[o.jsx("div",{className:"h-4 bg-slate-200 rounded w-20 mb-2"}),o.jsx("div",{className:"h-8 bg-slate-200 rounded w-16"})]},i))});if(!t)return null;const n=e.mode==="ALL"||e.mode==="TERMINAL"&&(e.value==="EL_ROBLE"||e.value==="LA_REINA");return o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide mb-3",children:["Personal por Cargo ",n&&"(ER-LR)"]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:t.byCargo.map(a=>{const i=a.max_q?a.count/a.max_q*100:0,s=a.max_q&&a.count>a.max_q,l=a.max_q&&i>=80&&!s;return o.jsxs("div",{className:`card p-4 transition-all ${s?"border-danger-300 bg-danger-50":l?"border-warning-300 bg-warning-50":""}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-slate-100",children:o.jsx(H,{name:CX(a.cargo),size:18,className:"text-slate-600"})}),o.jsx("span",{className:"text-xs font-semibold text-slate-600 uppercase",children:OX(a.cargo)})]}),o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("span",{className:`text-2xl font-bold ${s?"text-danger-600":l?"text-warning-600":"text-slate-900"}`,children:a.count}),a.max_q&&o.jsxs("span",{className:"text-sm text-slate-500",children:["/ ",a.max_q]})]}),a.max_q&&o.jsx("div",{className:"mt-2 h-1.5 bg-slate-200 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full transition-all ${s?"bg-danger-500":l?"bg-warning-500":"bg-brand-500"}`,style:{width:`${Math.min(i,100)}%`}})})]},a.cargo)})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide mb-3",children:"Personal por Terminal"}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.byTerminal.map(a=>o.jsxs("div",{className:"card px-4 py-3 flex items-center gap-3",children:[o.jsx(H,{name:"building",size:18,className:"text-slate-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-slate-500",children:Ve(a.terminal_code)}),o.jsx("p",{className:"text-lg font-bold text-slate-900",children:a.count})]})]},a.terminal_code)),o.jsxs("div",{className:"card px-4 py-3 flex items-center gap-3 bg-brand-50 border-brand-200",children:[o.jsx(H,{name:"users",size:18,className:"text-brand-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-brand-600 font-semibold",children:"Total"}),o.jsx("p",{className:"text-lg font-bold text-brand-700",children:t.total})]})]})]})]})]})},PX=e=>{var t;return((t=Jc.find(r=>r.value===e))==null?void 0:t.label)||e},RX=({staff:e,onEdit:t,onOffboard:r,onAdmonish:n})=>e.length?o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"table-header-cell",children:"RUT"}),o.jsx("th",{scope:"col",className:"table-header-cell",children:"Nombre"}),o.jsx("th",{scope:"col",className:"table-header-cell",children:"Cargo"}),o.jsx("th",{scope:"col",className:"table-header-cell",children:"Terminal"}),o.jsx("th",{scope:"col",className:"table-header-cell",children:"Turno"}),o.jsx("th",{scope:"col",className:"table-header-cell",children:"Horario"}),o.jsx("th",{scope:"col",className:"table-header-cell",children:"Contacto"}),o.jsx("th",{scope:"col",className:"table-header-cell",children:"Estado"}),o.jsx("th",{scope:"col",className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:e.map(a=>{const i=a.status==="DESVINCULADO";return o.jsxs("tr",{className:`table-row ${i?"bg-danger-50 hover:bg-danger-100":""}`,children:[o.jsx("td",{className:"table-cell font-mono text-sm",children:Qt(a.rut)}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium text-slate-900",children:a.nombre}),a.admonition_count>0&&o.jsxs("span",{className:"badge badge-warning text-xs",title:`${a.admonition_count} amonestacin(es)`,children:[" ",a.admonition_count]})]})}),o.jsx("td",{className:"table-cell",children:PX(a.cargo)}),o.jsx("td",{className:"table-cell",children:Ve(a.terminal_code)}),o.jsx("td",{className:"table-cell",children:a.turno}),o.jsx("td",{className:"table-cell font-mono text-xs",children:a.horario}),o.jsx("td",{className:"table-cell text-sm",children:a.contacto}),o.jsx("td",{className:"table-cell",children:o.jsx("span",{className:`badge ${i?"badge-danger":"badge-success"}`,children:a.status})}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[!i&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>t(a),className:"btn btn-ghost btn-icon text-slate-600 hover:text-brand-600",title:"Modificar",children:o.jsx(H,{name:"clipboard",size:16})}),o.jsx("button",{onClick:()=>n(a),className:"btn btn-ghost btn-icon text-slate-600 hover:text-warning-600",title:"Amonestar",children:o.jsx(H,{name:"megaphone",size:16})}),o.jsx("button",{onClick:()=>r(a),className:"btn btn-ghost btn-icon text-slate-600 hover:text-danger-600",title:"Desvincular",children:o.jsx(H,{name:"logout",size:16})})]}),i&&o.jsx("span",{className:"text-xs text-danger-600",children:a.terminated_at?new Date(a.terminated_at).toLocaleDateString("es-CL"):"Desvinculado"})]})})]},a.id)})})]})}):o.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50/50 px-6 py-12 text-center",children:[o.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-slate-100 mb-4",children:o.jsx(H,{name:"users",size:28,className:"text-slate-400"})}),o.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"No hay personal registrado"}),o.jsx("p",{className:"mt-1 text-xs text-slate-500 max-w-xs",children:'Comienza agregando trabajadores con el botn "Nuevo Trabajador"'})]}),IX=["Maana","Tarde","Noche","Rotativo"],P0=["XS","S","M","L","XL","XXL","XXXL"],DX=["35","36","37","38","39","40","41","42","43","44","45","46"],pN=e=>e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e):!0,MX=({initialData:e,onSubmit:t,onCancel:r,isLoading:n})=>{const[a,i]=T.useState({rut:"",nombre:"",cargo:"conductor",terminal_code:"EL_ROBLE",turno:"Maana",horario:"08:00-18:00",contacto:"",email:"",talla_polera:"",talla_chaqueta:"",talla_pantalon:"",talla_zapato_seguridad:"",talla_chaleco_reflectante:""}),[s,l]=T.useState(null),[c,u]=T.useState(null),[d,f]=T.useState(""),[h,p]=T.useState(!1);T.useEffect(()=>{if(e){i({rut:e.rut,nombre:e.nombre,cargo:e.cargo,terminal_code:e.terminal_code,turno:e.turno,horario:e.horario,contacto:e.contacto,email:e.email||"",talla_polera:e.talla_polera||"",talla_chaqueta:e.talla_chaqueta||"",talla_pantalon:e.talla_pantalon||"",talla_zapato_seguridad:e.talla_zapato_seguridad||"",talla_chaleco_reflectante:e.talla_chaleco_reflectante||""}),f(Qt(e.rut));const _=e.email||e.talla_polera||e.talla_chaqueta||e.talla_pantalon||e.talla_zapato_seguridad||e.talla_chaleco_reflectante;p(!!_)}},[e]);const v=_=>{f(_);const w=A1(_);w.valid?(l(null),i(j=>({...j,rut:to(_)}))):l(w.error||null)},g=()=>{a.rut&&f(Qt(a.rut))},x=_=>{i(w=>({...w,email:_})),_&&!pN(_)?u("Formato de correo invlido"):u(null)},b=_=>{_.preventDefault();const w=A1(a.rut);if(!w.valid){l(w.error||"RUT invlido");return}if(a.email&&!pN(a.email)){u("Formato de correo invlido");return}t(a)},m=!!e,y=(_,w,j)=>o.jsxs("div",{children:[o.jsx("label",{className:"label",children:_}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",className:"input",list:`${w}-options`,value:a[w]||"",onChange:S=>i(E=>({...E,[w]:S.target.value})),placeholder:"Seleccionar o escribir..."}),o.jsx("datalist",{id:`${w}-options`,children:j.map(S=>o.jsx("option",{value:S},S))})]})]});return o.jsxs("form",{onSubmit:b,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"RUT"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",className:`input ${s?"border-danger-500 focus:ring-danger-500":""}`,value:d,onChange:_=>v(_.target.value),onBlur:g,placeholder:"12.345.678-9",disabled:m,required:!0}),m&&o.jsx(H,{name:"key",size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"})]}),s&&o.jsx("p",{className:"mt-1 text-xs text-danger-600",children:s}),m&&o.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"El RUT no puede modificarse"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nombre Completo"}),o.jsx("input",{type:"text",className:"input",value:a.nombre,onChange:_=>i(w=>({...w,nombre:_.target.value})),placeholder:"Juan Prez Gonzlez",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cargo"}),o.jsx("select",{className:"input",value:a.cargo,onChange:_=>i(w=>({...w,cargo:_.target.value})),required:!0,children:Jc.map(_=>o.jsx("option",{value:_.value,children:_.label},_.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsx("select",{className:"input",value:a.terminal_code,onChange:_=>i(w=>({...w,terminal_code:_.target.value})),required:!0,children:Cn.map(_=>o.jsx("option",{value:_.value,children:_.label},_.value))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Turno"}),o.jsx("select",{className:"input",value:a.turno,onChange:_=>i(w=>({...w,turno:_.target.value})),required:!0,children:IX.map(_=>o.jsx("option",{value:_,children:_},_))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Horario"}),o.jsx("input",{type:"text",className:"input",value:a.horario,onChange:_=>i(w=>({...w,horario:_.target.value})),placeholder:"08:00-18:00",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Contacto"}),o.jsx("input",{type:"text",className:"input",value:a.contacto,onChange:_=>i(w=>({...w,contacto:_.target.value})),placeholder:"Telfono o email",required:!0})]}),o.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[o.jsxs("button",{type:"button",onClick:()=>p(!h),className:"w-full flex items-center justify-between px-4 py-3 bg-slate-50 hover:bg-slate-100 transition-colors",children:[o.jsxs("span",{className:"font-medium text-slate-700 flex items-center gap-2",children:[o.jsx(H,{name:"tag",size:18}),"Tallas y Correo"]}),o.jsx(H,{name:"chevron-down",size:18,className:`text-slate-500 transition-transform ${h?"rotate-180":""}`})]}),h&&o.jsxs("div",{className:"p-4 space-y-4 bg-white",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Correo Electrnico"}),o.jsx("input",{type:"email",className:`input ${c?"border-danger-500 focus:ring-danger-500":""}`,value:a.email||"",onChange:_=>x(_.target.value),placeholder:"trabajador@ejemplo.com"}),c&&o.jsx("p",{className:"mt-1 text-xs text-danger-600",children:c})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[y("Talla Polera","talla_polera",P0),y("Talla Chaqueta","talla_chaqueta",P0),y("Talla Pantaln","talla_pantalon",P0),y("Talla Zapato de Seguridad","talla_zapato_seguridad",DX),y("Talla Chaleco Reflectante","talla_chaleco_reflectante",P0)]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n||!!s||!!c,children:n?o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Guardando..."]}):m?"Guardar Cambios":"Crear Trabajador"})]})]})},LX=({staffName:e,onConfirm:t,onCancel:r,isLoading:n})=>{const[a,i]=T.useState(""),s=l=>{l.preventDefault(),a.trim()&&t(a.trim())};return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),o.jsxs("div",{className:"relative w-full max-w-md card p-6 animate-scale-in",children:[o.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[o.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-danger-100",children:o.jsx(H,{name:"logout",size:24,className:"text-danger-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Desvincular Trabajador"}),o.jsxs("p",{className:"text-sm text-slate-600",children:["Ests seguro que deseas desvincular a ",o.jsx("strong",{children:e}),"?"]})]})]}),o.jsx("div",{className:"mb-4 p-3 rounded-lg bg-warning-50 border border-warning-200",children:o.jsxs("p",{className:"text-sm text-warning-800",children:[o.jsx("strong",{children:" Esta accin es irreversible."})," El trabajador quedar marcado como desvinculado y no podr ser eliminado del sistema."]})}),o.jsxs("form",{onSubmit:s,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"label",children:"Motivo de Desvinculacin *"}),o.jsx("textarea",{className:"input min-h-[100px]",value:a,onChange:l=>i(l.target.value),placeholder:"Describe el motivo de la desvinculacin...",required:!0})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-danger",disabled:n||!a.trim(),children:n?o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Procesando..."]}):"Confirmar Desvinculacin"})]})]})]})]})},$X=({staffName:e,onConfirm:t,onCancel:r,isLoading:n})=>{const[a,i]=T.useState(""),[s,l]=T.useState(new Date().toISOString().split("T")[0]),[c,u]=T.useState(null),[d,f]=T.useState(!1),h=T.useRef(null),p=m=>{m.preventDefault(),a.trim()&&s&&c&&t(a.trim(),s,c)},v=m=>{m.preventDefault(),m.stopPropagation(),m.type==="dragenter"||m.type==="dragover"?f(!0):m.type==="dragleave"&&f(!1)},g=m=>{m.preventDefault(),m.stopPropagation(),f(!1),m.dataTransfer.files&&m.dataTransfer.files[0]&&u(m.dataTransfer.files[0])},x=m=>{m.target.files&&m.target.files[0]&&u(m.target.files[0])},b=()=>{u(null),h.current&&(h.current.value="")};return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),o.jsxs("div",{className:"relative w-full max-w-lg card p-6 animate-scale-in",children:[o.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[o.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-warning-100",children:o.jsx(H,{name:"megaphone",size:24,className:"text-warning-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Registrar Amonestacin"}),o.jsxs("p",{className:"text-sm text-slate-600",children:["Amonestacin para ",o.jsx("strong",{children:e})]})]})]}),o.jsxs("form",{onSubmit:p,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Motivo de la Amonestacin *"}),o.jsx("textarea",{className:"input min-h-[80px]",value:a,onChange:m=>i(m.target.value),placeholder:"Describe el motivo de la amonestacin...",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha de Amonestacin *"}),o.jsx("input",{type:"date",className:"input",value:s,onChange:m=>l(m.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Documento Adjunto *"}),o.jsxs("div",{className:`border-2 border-dashed rounded-xl p-6 text-center transition-all ${d?"border-brand-500 bg-brand-50":c?"border-success-300 bg-success-50":"border-slate-300 hover:border-slate-400"}`,onDragEnter:v,onDragLeave:v,onDragOver:v,onDrop:g,children:[o.jsx("input",{ref:h,type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:x,className:"hidden",id:"admonition-file"}),c?o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsx(H,{name:"check-circle",size:24,className:"text-success-600"}),o.jsxs("div",{className:"text-left",children:[o.jsx("p",{className:"text-sm font-medium text-slate-900",children:c.name}),o.jsxs("p",{className:"text-xs text-slate-500",children:[(c.size/1024).toFixed(1)," KB"]})]}),o.jsx("button",{type:"button",onClick:b,className:"ml-4 text-danger-600 hover:text-danger-700",children:o.jsx(H,{name:"x",size:20})})]}):o.jsxs("label",{htmlFor:"admonition-file",className:"cursor-pointer flex flex-col items-center gap-2",children:[o.jsx(H,{name:"image",size:32,className:"text-slate-400"}),o.jsxs("p",{className:"text-sm text-slate-600",children:[o.jsx("span",{className:"font-semibold text-brand-600",children:"Haz clic para subir"})," ","o arrastra el archivo aqu"]}),o.jsx("p",{className:"text-xs text-slate-400",children:"PDF, JPG, PNG (mx. 10MB)"})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n||!a.trim()||!s||!c,children:n?o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Guardando..."]}):"Registrar Amonestacin"})]})]})]})]})},FX=()=>{const e=Le(y=>y.context),t=Le(y=>y.setContext),[r,n]=T.useState({status:"todos",cargo:"todos"}),[a,i]=T.useState({type:"none"}),s=yR(e,r),l=SX(),c=EX(),u=NX(),d=TX();AX(e);const f=[{key:"rut",header:"RUT",value:y=>Qt(y.rut)},{key:"nombre",header:"NOMBRE",value:y=>y.nombre},{key:"cargo",header:"CARGO",value:y=>y.cargo},{key:"terminal_code",header:"TERMINAL",value:y=>Ve(y.terminal_code)},{key:"turno",header:"TURNO",value:y=>y.turno},{key:"horario",header:"HORARIO",value:y=>y.horario},{key:"contacto",header:"CONTACTO",value:y=>y.contacto},{key:"email",header:"CORREO",value:y=>y.email||""},{key:"talla_polera",header:"TALLA_POLERA",value:y=>y.talla_polera||""},{key:"talla_chaqueta",header:"TALLA_CHAQUETA",value:y=>y.talla_chaqueta||""},{key:"talla_pantalon",header:"TALLA_PANTALON",value:y=>y.talla_pantalon||""},{key:"talla_zapato_seguridad",header:"TALLA_ZAPATO_SEGURIDAD",value:y=>y.talla_zapato_seguridad||""},{key:"talla_chaleco_reflectante",header:"TALLA_CHALECO_REFLECTANTE",value:y=>y.talla_chaleco_reflectante||""},{key:"status",header:"ESTADO",value:y=>y.status},{key:"terminated_at",header:"FECHA_DESVINCULACION",value:y=>y.terminated_at?new Date(y.terminated_at).toLocaleDateString("es-CL"):""},{key:"termination_comment",header:"COMENTARIO_DESVINCULACION",value:y=>y.termination_comment||""}],h=()=>{s.data&&Qe({filename:"personal_vista",sheetName:"Personal",rows:s.data,columns:f})},p=()=>{s.data&&Qe({filename:"personal_completo",sheetName:"Personal",rows:s.data,columns:f})},v=async y=>{try{await l.mutateAsync(y),i({type:"none"})}catch(_){console.error("Error creating staff:",_),alert(_ instanceof Error?_.message:"Error al crear trabajador")}},g=async y=>{if(a.type==="edit")try{await c.mutateAsync({id:a.staff.id,values:y}),i({type:"none"})}catch(_){console.error("Error updating staff:",_),alert(_ instanceof Error?_.message:"Error al actualizar trabajador")}},x=async y=>{if(a.type==="offboard")try{await u.mutateAsync({id:a.staff.id,comment:y}),i({type:"none"})}catch(_){console.error("Error offboarding staff:",_),alert(_ instanceof Error?_.message:"Error al desvincular trabajador")}},b=async(y,_,w)=>{if(a.type==="admonish")try{await d.mutateAsync({staffId:a.staff.id,reason:y,admonitionDate:_,file:w}),i({type:"none"})}catch(j){console.error("Error creating admonition:",j),alert(j instanceof Error?j.message:"Error al registrar amonestacin")}},m=()=>i({type:"none"});return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ct,{title:"Personal",description:"Gestin del equipo operativo por terminal.",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary",onClick:()=>i({type:"create"}),children:[o.jsx(H,{name:"users",size:18}),"Nuevo Trabajador"]}),o.jsx(hr,{onExportView:h,onExportAll:p})]})}),o.jsx(kX,{terminalContext:e}),o.jsxs(Pn,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:r.status,onChange:y=>n(_=>({..._,status:y.target.value})),children:mX.map(y=>o.jsx("option",{value:y.value,children:y.label},y.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Cargo"}),o.jsxs("select",{className:"input",value:r.cargo||"todos",onChange:y=>n(_=>({..._,cargo:y.target.value})),children:[o.jsx("option",{value:"todos",children:"Todos"}),Jc.map(y=>o.jsx("option",{value:y.value,children:y.label},y.value))]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"RUT o nombre",value:r.search??"",onChange:y=>n(_=>({..._,search:y.target.value}))})]})]}),s.isLoading&&o.jsx(zt,{label:"Cargando personal..."}),s.isError&&o.jsx(Er,{onRetry:()=>s.refetch()}),!s.isLoading&&!s.isError&&o.jsx(RX,{staff:s.data||[],onEdit:y=>i({type:"edit",staff:y}),onOffboard:y=>i({type:"offboard",staff:y}),onAdmonish:y=>i({type:"admonish",staff:y})}),(a.type==="create"||a.type==="edit")&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:m}),o.jsxs("div",{className:"relative w-full max-w-2xl card p-6 animate-scale-in max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-xl font-bold text-slate-900",children:a.type==="create"?"Nuevo Trabajador":"Editar Trabajador"}),o.jsx("button",{onClick:m,className:"text-slate-400 hover:text-slate-600",children:o.jsx(H,{name:"x",size:24})})]}),o.jsx(MX,{initialData:a.type==="edit"?a.staff:null,onSubmit:a.type==="create"?v:g,onCancel:m,isLoading:l.isPending||c.isPending})]})]}),a.type==="offboard"&&o.jsx(LX,{staffName:a.staff.nombre,onConfirm:x,onCancel:m,isLoading:u.isPending}),a.type==="admonish"&&o.jsx($X,{staffName:a.staff.nombre,onConfirm:b,onCancel:m,isLoading:d.isPending})]})},BX="https://kzslhhctjfxsdvcrqvvs.supabase.co/functions/v1/send-email",mN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt6c2xoaGN0amZ4c2R2Y3JxdnZzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4NDAzODQsImV4cCI6MjA4MTQxNjM4NH0.NQ1maFD5Nl8y-5TxJFjeSdhOSzOi-6Hd8o4VcrmLUKo",Ui={sendEmail:async e=>{const t=await fetch(BX,{method:"POST",headers:{"Content-Type":"application/json",apikey:mN,Authorization:`Bearer ${mN}`},body:JSON.stringify(e)});if(!t.ok){const n=await t.text();throw new Error(`Email send failed: ${t.status} ${n}`)}const r=await t.json();return{accepted:r.accepted??!0,messageId:r.messageId??"pending"}}},UX=Object.freeze(Object.defineProperty({__proto__:null,emailService:Ui},Symbol.toStringTag,{value:"Module"})),zX=async(e,t)=>{if(!Fr())return[];const r=Jn(e);let n=le.from("meetings").select(`
            *,
            meeting_invitees(count),
            meeting_files(count),
            meeting_actions(count)
        `).in("terminal_code",r).order("starts_at",{ascending:!1});if(t!=null&&t.status&&t.status!=="todos"&&(n=n.eq("status",t.status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.ilike("title",s)}t!=null&&t.date_from&&(n=n.gte("starts_at",t.date_from)),t!=null&&t.date_to&&(n=n.lte("starts_at",t.date_to+"T23:59:59"));const{data:a,error:i}=await n;if(i)throw i;return(a||[]).map(s=>{var l,c,u,d,f,h;return{...s,invitees_count:((c=(l=s.meeting_invitees)==null?void 0:l[0])==null?void 0:c.count)||0,files_count:((d=(u=s.meeting_files)==null?void 0:u[0])==null?void 0:d.count)||0,actions_count:((h=(f=s.meeting_actions)==null?void 0:f[0])==null?void 0:h.count)||0}})},bR=async e=>{const{data:t,error:r}=await le.from("meetings").select("*").eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t},qX=async(e,t)=>{const{data:r,error:n}=await le.from("meetings").insert({title:e.title,terminal_code:e.terminal_code,starts_at:e.starts_at,duration_minutes:e.duration_minutes,location:e.location||null,meeting_link:e.meeting_link||null,agenda_json:e.agenda_json||[],created_by_supervisor:t}).select().single();if(n)throw on("Error al crear reunin","No se pudo guardar la reunin"),n;return e.invitees.length>0&&await _R(r.id,e.invitees),hn("Reunin creada",`"${e.title}" programada correctamente`,t),r},WX=async(e,t)=>{const r={};t.title!==void 0&&(r.title=t.title),t.terminal_code!==void 0&&(r.terminal_code=t.terminal_code),t.starts_at!==void 0&&(r.starts_at=t.starts_at),t.duration_minutes!==void 0&&(r.duration_minutes=t.duration_minutes),t.location!==void 0&&(r.location=t.location||null),t.meeting_link!==void 0&&(r.meeting_link=t.meeting_link||null),t.agenda_json!==void 0&&(r.agenda_json=t.agenda_json);const{data:n,error:a}=await le.from("meetings").update(r).eq("id",e).select().single();if(a)throw a;return n},HX=async(e,t,r)=>{const n={status:t};r&&(n.cancel_reason=r);const{error:a}=await le.from("meetings").update(n).eq("id",e);if(a)throw a},VX=async(e,t)=>{const{error:r}=await le.from("meetings").update({minutes_text:t}).eq("id",e);if(r)throw r},wR=async e=>{const{data:t,error:r}=await le.from("meeting_invitees").select("*").eq("meeting_id",e).order("invitee_name");if(r)throw r;return t||[]},_R=async(e,t)=>{const r=t.map(a=>({meeting_id:e,staff_id:a.staff_id||null,invitee_name:a.invitee_name,invitee_email:a.invitee_email||null})),{error:n}=await le.from("meeting_invitees").insert(r);if(n)throw n},gN=async(e,t)=>{const{error:r}=await le.from("meeting_invitees").update({notification_status:t,notified_at:t==="ENVIADO"?new Date().toISOString():null}).eq("id",e);if(r)throw r},KX=async e=>{const{data:t,error:r}=await le.from("meeting_files").select("*").eq("meeting_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},GX=async(e,t,r)=>{const n=t.name.split(".").pop(),a=`meetings/${e}/${Date.now()}.${n}`,{error:i}=await le.storage.from("meeting-files").upload(a,t);if(i)throw on("Error al subir archivo",i.message),i;const{data:s,error:l}=await le.from("meeting_files").insert({meeting_id:e,storage_path:a,file_name:t.name,mime_type:t.type,size_bytes:t.size,uploaded_by:r}).select().single();if(l)throw l;return s},XX=async(e,t)=>{await le.storage.from("meeting-files").remove([t]);const{error:r}=await le.from("meeting_files").delete().eq("id",e);if(r)throw r},YX=async e=>{const{data:t,error:r}=await le.storage.from("meeting-files").createSignedUrl(e,3600);if(r)throw r;return t.signedUrl},QX=async e=>{const{data:t,error:r}=await le.from("meeting_actions").select("*").eq("meeting_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},JX=async(e,t)=>{const{data:r,error:n}=await le.from("meeting_actions").insert({meeting_id:e,description:t.description,responsible_staff_id:t.responsible_staff_id||null,responsible_name:t.responsible_name||null,due_date:t.due_date||null}).select().single();if(n)throw n;return r},ZX=async(e,t)=>{const{data:r,error:n}=await le.from("meeting_actions").update(t).eq("id",e).select().single();if(n)throw n;return r},eY=async e=>{const{error:t}=await le.from("meeting_actions").delete().eq("id",e);if(t)throw t},jR=async(e,t)=>{const{data:r,error:n}=await le.from("meeting_email_settings").select("*").eq("scope_type",e).eq("scope_code",t).single();if(n){if(n.code==="PGRST116")return null;throw n}return r},tY=async e=>{const{error:t}=await le.from("meeting_email_settings").upsert(e,{onConflict:"scope_type,scope_code"});if(t)throw t},rY=async(e,t,r)=>{var c;const n=await jR("GLOBAL","ALL");if(!(n!=null&&n.enabled))return;const a=new Date(e.starts_at),i=a.toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),s=a.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"}),l=e.agenda_json.map((u,d)=>`${d+1}. ${u.text}`).join(`
`)||"Sin agenda definida";for(const u of t)if(u.invitee_email)try{const d=n.subject_template.replace("{{title}}",e.title),f=n.body_template.replace("{{invitee_name}}",u.invitee_name).replace("{{title}}",e.title).replace("{{date}}",i).replace("{{time}}",s).replace("{{duration}}",e.duration_minutes.toString()).replace("{{location}}",e.location||e.meeting_link||"Por confirmar").replace("{{agenda}}",l).replace("{{organizer}}",r);await Ui.sendEmail({audience:"manual",manualRecipients:[u.invitee_email],cc:((c=n.cc_emails)==null?void 0:c.split(",").map(h=>h.trim()).filter(Boolean))||[],subject:d,body:f.replace(/\n/g,"<br>")}),await gN(u.id,"ENVIADO")}catch(d){console.error("Error sending invitation:",d),await gN(u.id,"ERROR")}},nY=async()=>{const{data:e,error:t}=await le.from("staff").select("id, nombre, email, terminal_code").eq("cargo","Supervisor").eq("status","ACTIVO").order("nombre");if(t)throw t;return e||[]},rt={all:["meetings"],list:(e,t)=>[...rt.all,"list",e,t],detail:e=>[...rt.all,"detail",e],invitees:e=>[...rt.all,"invitees",e],files:e=>[...rt.all,"files",e],actions:e=>[...rt.all,"actions",e],supervisors:["supervisors"],emailSettings:e=>[...rt.all,"emailSettings",e]},Z_=e=>{const t=Le(n=>n.context),r=t.mode==="ALL"?"ALL":t.value||"ALL";return Ge({queryKey:rt.list(r,e),queryFn:()=>zX(t,e)})},aY=e=>Ge({queryKey:rt.detail(e||""),queryFn:()=>bR(e),enabled:!!e}),SR=()=>{const e=$e(),t=ht(r=>r.session);return Be({mutationFn:r=>qX(r,(t==null?void 0:t.supervisorName)||""),onSuccess:()=>{e.invalidateQueries({queryKey:rt.all})}})},iY=()=>{const e=$e();return Be({mutationFn:({id:t,values:r})=>WX(t,r),onSuccess:(t,{id:r})=>{e.invalidateQueries({queryKey:rt.all}),e.invalidateQueries({queryKey:rt.detail(r)})}})},sY=()=>{const e=$e();return Be({mutationFn:({id:t,status:r,reason:n})=>HX(t,r,n),onSuccess:()=>{e.invalidateQueries({queryKey:rt.all})}})},oY=()=>{const e=$e();return Be({mutationFn:({id:t,minutes:r})=>VX(t,r),onSuccess:(t,{id:r})=>{e.invalidateQueries({queryKey:rt.detail(r)})}})},ER=e=>Ge({queryKey:rt.invitees(e||""),queryFn:()=>wR(e),enabled:!!e}),lY=()=>{const e=$e();return Be({mutationFn:({meetingId:t,invitees:r})=>_R(t,r),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:rt.invitees(r)}),e.invalidateQueries({queryKey:rt.all})}})},cY=e=>Ge({queryKey:rt.files(e||""),queryFn:()=>KX(e),enabled:!!e}),uY=()=>{const e=$e(),t=ht(r=>r.session);return Be({mutationFn:({meetingId:r,file:n})=>GX(r,n,(t==null?void 0:t.supervisorName)||""),onSuccess:(r,{meetingId:n})=>{e.invalidateQueries({queryKey:rt.files(n)}),e.invalidateQueries({queryKey:rt.all})}})},dY=()=>{const e=$e();return Be({mutationFn:({id:t,storagePath:r,meetingId:n})=>XX(t,r),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:rt.files(r)}),e.invalidateQueries({queryKey:rt.all})}})},fY=e=>Ge({queryKey:rt.actions(e||""),queryFn:()=>QX(e),enabled:!!e}),hY=()=>{const e=$e();return Be({mutationFn:({meetingId:t,values:r})=>JX(t,r),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:rt.actions(r)}),e.invalidateQueries({queryKey:rt.all})}})},pY=()=>{const e=$e();return Be({mutationFn:({id:t,meetingId:r,values:n})=>ZX(t,n),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:rt.actions(r)})}})},mY=()=>{const e=$e();return Be({mutationFn:({id:t,meetingId:r})=>eY(t),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:rt.actions(r)}),e.invalidateQueries({queryKey:rt.all})}})},gY=()=>Ge({queryKey:rt.supervisors,queryFn:nY,staleTime:5*60*1e3}),vY=(e,t)=>Ge({queryKey:rt.emailSettings(`${e}-${t}`),queryFn:()=>jR(e,t)}),xY=()=>{const e=$e();return Be({mutationFn:t=>tY(t),onSuccess:()=>{e.invalidateQueries({queryKey:rt.all})}})},yY=()=>{const e=$e(),t=ht(r=>r.session);return Be({mutationFn:async({meetingId:r})=>{const n=await bR(r),a=await wR(r);n&&a.length>0&&await rY(n,a,(t==null?void 0:t.supervisorName)||"")},onSuccess:(r,{meetingId:n})=>{e.invalidateQueries({queryKey:rt.invitees(n)})}})},bY=["ISAAC AVILA","CLAUDIO ARRIAGADA","CRISTIAN LURASCHI"],R0=e=>e.toUpperCase().trim().replace(/\s+/g," "),NR=e=>{const t=R0(e);return bY.some(r=>R0(r)===t||t.includes(R0(r))||R0(r).includes(t))},wY=[{value:"todos",label:"Todos"},{value:"PROGRAMADA",label:"Programada"},{value:"REALIZADA",label:"Realizada"},{value:"CANCELADA",label:"Cancelada"}],_Y=({value:e,onChange:t,existingInvitees:r=[]})=>{const n=gY(),[a,i]=T.useState(""),[s,l]=T.useState(!1),[c,u]=T.useState(""),[d,f]=T.useState(""),h=new Set([...r.map(b=>b.staff_id).filter(Boolean),...e.map(b=>b.staff_id).filter(Boolean)]),p=T.useMemo(()=>{if(!n.data)return[];const b=a.toLowerCase();return n.data.filter(m=>!h.has(m.id)).filter(m=>m.nombre.toLowerCase().includes(b)||(m.email||"").toLowerCase().includes(b)).slice(0,8)},[n.data,a,h]),v=b=>{t([...e,{staff_id:b.id,invitee_name:b.nombre,invitee_email:b.email||void 0}]),i(""),l(!1)},g=()=>{d.trim()&&(t([...e,{invitee_name:d.trim(),invitee_email:c.trim()||void 0}]),f(""),u(""))},x=b=>{t(e.filter((m,y)=>y!==b))};return o.jsxs("div",{className:"space-y-3",children:[r.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Ya invitados:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(b=>o.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1 bg-slate-100 rounded-full text-sm",children:[o.jsx(H,{name:"user",size:14,className:"text-slate-400"}),o.jsx("span",{children:b.invitee_name})]},b.id))})]}),e.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:e.map((b,m)=>o.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1 bg-brand-100 text-brand-800 rounded-full text-sm",children:[o.jsx(H,{name:"user",size:14}),o.jsx("span",{children:b.invitee_name}),o.jsx("button",{type:"button",onClick:()=>x(m),className:"ml-1 hover:text-brand-600",children:o.jsx(H,{name:"x",size:14})})]},m))}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",className:"input",value:a,onChange:b=>{i(b.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Buscar supervisor por nombre o correo..."}),s&&p.length>0&&o.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:p.map(b=>o.jsxs("button",{type:"button",onClick:()=>v(b),className:"w-full px-4 py-2 text-left hover:bg-slate-50 border-b last:border-b-0 border-slate-100",children:[o.jsx("div",{className:"font-medium text-slate-800",children:b.nombre}),b.email&&o.jsx("div",{className:"text-sm text-slate-500",children:b.email})]},b.id))})]}),o.jsxs("div",{className:"border-t pt-3",children:[o.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Agregar invitado externo:"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-2",children:[o.jsx("input",{type:"text",className:"input flex-1",value:d,onChange:b=>f(b.target.value),placeholder:"Nombre"}),o.jsx("input",{type:"email",className:"input flex-1",value:c,onChange:b=>u(b.target.value),placeholder:"Correo (opcional)"}),o.jsx("button",{type:"button",onClick:g,className:"btn btn-secondary shrink-0",disabled:!d.trim(),children:o.jsx(H,{name:"plus",size:18})})]})]})]})},vN=({meeting:e,onClose:t,onSuccess:r})=>{const n=Le(m=>m.context),a=SR(),i=iY(),s=ER((e==null?void 0:e.id)||null),l=lY(),[c,u]=T.useState({title:"",terminal_code:n.mode==="TERMINAL"?n.value:"EL_ROBLE",starts_at:"",duration_minutes:60,location:"",meeting_link:"",agenda_json:[],invitees:[]}),[d,f]=T.useState("");T.useEffect(()=>{e&&u({title:e.title,terminal_code:e.terminal_code,starts_at:e.starts_at.slice(0,16),duration_minutes:e.duration_minutes,location:e.location||"",meeting_link:e.meeting_link||"",agenda_json:e.agenda_json||[],invitees:[]})},[e]);const h=()=>{if(!d.trim())return;const m={id:crypto.randomUUID(),text:d.trim()};u(y=>({...y,agenda_json:[...y.agenda_json,m]})),f("")},p=m=>{u(y=>({...y,agenda_json:y.agenda_json.filter(_=>_.id!==m)}))},v=m=>{u(y=>({...y,invitees:m}))},g=async m=>{m.preventDefault();try{e?(await i.mutateAsync({id:e.id,values:c}),c.invitees.length>0&&await l.mutateAsync({meetingId:e.id,invitees:c.invitees})):await a.mutateAsync(c),r()}catch(y){console.error("Error saving meeting:",y)}},x=c.title&&c.starts_at&&c.terminal_code,b=a.isPending||i.isPending;return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),o.jsxs("div",{className:"relative w-full max-w-2xl bg-white rounded-2xl shadow-2xl max-h-[90vh] overflow-hidden",children:[o.jsx("div",{className:"bg-brand-600 text-white p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-xl font-bold",children:e?"Editar Reunin":"Nueva Reunin"}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg",children:o.jsx(H,{name:"x",size:24})})]})}),o.jsxs("form",{onSubmit:g,className:"p-6 overflow-y-auto max-h-[calc(90vh-180px)]",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Ttulo de la reunin"}),o.jsx("input",{type:"text",className:"input",value:c.title,onChange:m=>u(y=>({...y,title:m.target.value})),placeholder:"Ej: Reunin de coordinacin semanal",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsx("select",{className:"input",value:c.terminal_code,onChange:m=>u(y=>({...y,terminal_code:m.target.value})),required:!0,children:Cn.map(m=>o.jsx("option",{value:m.value,children:m.label},m.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha y hora"}),o.jsx("input",{type:"datetime-local",className:"input",value:c.starts_at,onChange:m=>u(y=>({...y,starts_at:m.target.value})),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Duracin (minutos)"}),o.jsxs("select",{className:"input",value:c.duration_minutes,onChange:m=>u(y=>({...y,duration_minutes:Number(m.target.value)})),children:[o.jsx("option",{value:30,children:"30 minutos"}),o.jsx("option",{value:60,children:"1 hora"}),o.jsx("option",{value:90,children:"1.5 horas"}),o.jsx("option",{value:120,children:"2 horas"}),o.jsx("option",{value:180,children:"3 horas"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Lugar / Sala"}),o.jsx("input",{type:"text",className:"input",value:c.location,onChange:m=>u(y=>({...y,location:m.target.value})),placeholder:"Ej: Sala de reuniones"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Link de videollamada (opcional)"}),o.jsx("input",{type:"url",className:"input",value:c.meeting_link,onChange:m=>u(y=>({...y,meeting_link:m.target.value})),placeholder:"https://meet.google.com/..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Agenda"}),o.jsxs("div",{className:"space-y-2",children:[c.agenda_json.map((m,y)=>o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-2 rounded-lg",children:[o.jsxs("span",{className:"font-medium text-slate-500",children:[y+1,"."]}),o.jsx("span",{className:"flex-1",children:m.text}),o.jsx("button",{type:"button",onClick:()=>p(m.id),className:"text-red-500 hover:text-red-700",children:o.jsx(H,{name:"x",size:16})})]},m.id)),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",className:"input flex-1",value:d,onChange:m=>f(m.target.value),placeholder:"Agregar punto a la agenda",onKeyDown:m=>m.key==="Enter"&&(m.preventDefault(),h())}),o.jsx("button",{type:"button",onClick:h,className:"btn btn-secondary",children:o.jsx(H,{name:"plus",size:18})})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Invitados (supervisores)"}),o.jsx(_Y,{value:c.invitees,onChange:v,existingInvitees:s.data||[]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-6 mt-6 border-t",children:[o.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:!x||b,className:"btn btn-primary",children:b?"Guardando...":e?"Actualizar":"Crear Reunin"})]})]})]})]})},jY=({meetingTitle:e,onConfirm:t,onCancel:r,isLoading:n})=>{const[a,i]=T.useState("");return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),o.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 animate-scale-in",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:o.jsx(H,{name:"alert-triangle",size:24,className:"text-red-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Cancelar Reunin"}),o.jsx("p",{className:"text-sm text-slate-500",children:e})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"label",children:"Motivo de cancelacin"}),o.jsx("textarea",{className:"input min-h-[100px] resize-none",value:a,onChange:s=>i(s.target.value),placeholder:"Indique el motivo por el cual se cancela esta reunin...",required:!0})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Volver"}),o.jsx("button",{onClick:()=>t(a),disabled:!a.trim()||n,className:"btn bg-red-600 hover:bg-red-700 text-white",children:n?"Cancelando...":"Confirmar Cancelacin"})]})]})]})},SY=({onOpenMeeting:e})=>{const t=Le(w=>w.context),r=Le(w=>w.setContext),n=ht(w=>w.session),a=(n==null?void 0:n.supervisorName)??"",i=NR(a),[s,l]=T.useState({status:"todos"}),[c,u]=T.useState(!1),[d,f]=T.useState(null),[h,p]=T.useState(null),v=Z_(s);SR();const g=sY(),x=[{key:"starts_at",header:"Fecha/Hora",value:w=>b(w.starts_at)},{key:"title",header:"Ttulo",value:w=>w.title},{key:"terminal",header:"Terminal",value:w=>Ve(w.terminal_code)},{key:"status",header:"Estado",value:w=>w.status},{key:"duration",header:"Duracin (min)",value:w=>w.duration_minutes.toString()},{key:"invitees",header:"Invitados",value:w=>w.invitees_count.toString()},{key:"location",header:"Lugar",value:w=>w.location||w.meeting_link||""}],b=w=>{const j=new Date(w);return j.toLocaleDateString("es-CL",{day:"2-digit",month:"short",year:"numeric"})+" "+j.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})},m=w=>{switch(w){case"REALIZADA":return o.jsx("span",{className:"badge badge-success",children:w});case"CANCELADA":return o.jsx("span",{className:"badge badge-danger",children:w});default:return o.jsx("span",{className:"badge badge-warning",children:w})}},y=async w=>{h&&(await g.mutateAsync({id:h.id,status:"CANCELADA",reason:w}),p(null))},_=async w=>{await g.mutateAsync({id:w.id,status:"REALIZADA"})};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ct,{title:"Reuniones",description:"Gestin de reuniones y seguimiento de acuerdos",actions:o.jsxs("div",{className:"flex gap-2",children:[i&&o.jsxs("button",{className:"btn btn-primary",onClick:()=>u(!0),children:[o.jsx(H,{name:"plus",size:18})," Nueva Reunin"]}),o.jsx(hr,{onExportView:()=>Qe({filename:"reuniones",sheetName:"Reuniones",rows:v.data||[],columns:x}),onExportAll:()=>Qe({filename:"reuniones_all",sheetName:"Reuniones",rows:v.data||[],columns:x})})]})}),o.jsxs(Pn,{terminalContext:t,onTerminalChange:r,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:s.status,onChange:w=>l(j=>({...j,status:w.target.value})),children:wY.map(w=>o.jsx("option",{value:w.value,children:w.label},w.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"Ttulo de reunin",value:s.search??"",onChange:w=>l(j=>({...j,search:w.target.value}))})]})]}),v.isLoading&&o.jsx(zt,{label:"Cargando reuniones..."}),v.isError&&o.jsx(Er,{onRetry:()=>v.refetch()}),!v.isLoading&&!v.isError&&o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{className:"table-header-cell",children:"Fecha/Hora"}),o.jsx("th",{className:"table-header-cell",children:"Ttulo"}),o.jsx("th",{className:"table-header-cell",children:"Terminal"}),o.jsx("th",{className:"table-header-cell",children:"Estado"}),o.jsx("th",{className:"table-header-cell text-center",children:"Inv."}),o.jsx("th",{className:"table-header-cell text-center",children:"Tareas"}),o.jsx("th",{className:"table-header-cell text-center",children:"Adj."}),o.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:(v.data||[]).length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"table-cell text-center text-slate-500 py-8",children:"No hay reuniones registradas"})}):(v.data||[]).map(w=>o.jsxs("tr",{className:"table-row cursor-pointer hover:bg-slate-50",onClick:()=>e(w.id),children:[o.jsx("td",{className:"table-cell text-sm",children:b(w.starts_at)}),o.jsx("td",{className:"table-cell font-medium",children:w.title}),o.jsx("td",{className:"table-cell text-sm",children:Ve(w.terminal_code)}),o.jsx("td",{className:"table-cell",children:m(w.status)}),o.jsx("td",{className:"table-cell text-center",children:o.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-sm font-medium",children:w.invitees_count})}),o.jsx("td",{className:"table-cell text-center",children:o.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-sm font-medium",children:w.actions_count})}),o.jsx("td",{className:"table-cell text-center",children:o.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-sm font-medium",children:w.files_count})}),o.jsx("td",{className:"table-cell",onClick:j=>j.stopPropagation(),children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[o.jsx("button",{onClick:()=>e(w.id),className:"btn btn-ghost btn-icon",title:"Ver detalle",children:o.jsx(H,{name:"eye",size:16})}),i&&w.status==="PROGRAMADA"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>f(w),className:"btn btn-ghost btn-icon",title:"Editar",children:o.jsx(H,{name:"edit",size:16})}),o.jsx("button",{onClick:()=>_(w),className:"btn btn-ghost btn-icon text-success-600",title:"Marcar realizada",children:o.jsx(H,{name:"check-circle",size:16})}),o.jsx("button",{onClick:()=>p(w),className:"btn btn-ghost btn-icon text-danger-600",title:"Cancelar",children:o.jsx(H,{name:"x-circle",size:16})})]})]})})]},w.id))})]})}),c&&o.jsx(vN,{onClose:()=>u(!1),onSuccess:()=>u(!1)}),d&&o.jsx(vN,{meeting:d,onClose:()=>f(null),onSuccess:()=>f(null)}),h&&o.jsx(jY,{meetingTitle:h.title,onConfirm:y,onCancel:()=>p(null),isLoading:g.isPending})]})},EY=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],NY=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],TY=({onOpenMeeting:e})=>{const t=new Date,[r,n]=T.useState(t.getFullYear()),[a,i]=T.useState(t.getMonth()),[s,l]=T.useState(null),c=Z_({status:"todos"}),u=T.useMemo(()=>{const b=new Date(r,a,1),y=new Date(r,a+1,0).getDate();let _=b.getDay();const w=[];for(let j=0;j<_;j++)w.push(null);for(let j=1;j<=y;j++)w.push(j);return w},[r,a]),d=b=>{if(!c.data)return[];const m=`${r}-${String(a+1).padStart(2,"0")}-${String(b).padStart(2,"0")}`;return c.data.filter(y=>y.starts_at.startsWith(m))},f=T.useMemo(()=>{if(!c.data)return[];const b=new Date().toISOString();return c.data.filter(m=>m.status==="PROGRAMADA"&&m.starts_at>=b).sort((m,y)=>m.starts_at.localeCompare(y.starts_at)).slice(0,5)},[c.data]),h=s?d(parseInt(s.split("-")[2])):[],p=()=>{a===0?(i(11),n(r-1)):i(a-1)},v=()=>{a===11?(i(0),n(r+1)):i(a+1)},g=b=>new Date(b).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"}),x=b=>{switch(b){case"REALIZADA":return"bg-green-500";case"CANCELADA":return"bg-red-500";default:return"bg-brand-500"}};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(Ct,{title:"Agenda",description:"Vista de calendario de reuniones"}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 card p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("button",{onClick:p,className:"btn btn-ghost btn-icon",children:o.jsx(H,{name:"chevron-right",size:20,className:"rotate-180"})}),o.jsxs("h3",{className:"text-lg font-bold text-slate-800",children:[EY[a]," ",r]}),o.jsx("button",{onClick:v,className:"btn btn-ghost btn-icon",children:o.jsx(H,{name:"chevron-right",size:20})})]}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:NY.map(b=>o.jsx("div",{className:"text-center text-xs font-semibold text-slate-500 py-2",children:b},b))}),o.jsx("div",{className:"grid grid-cols-7 gap-1",children:u.map((b,m)=>{if(b===null)return o.jsx("div",{className:"h-16"},`e-${m}`);const y=d(b),_=`${r}-${String(a+1).padStart(2,"0")}-${String(b).padStart(2,"0")}`,w=b===t.getDate()&&a===t.getMonth()&&r===t.getFullYear(),j=s===_;return o.jsxs("button",{onClick:()=>l(_),className:`h-16 rounded-lg border text-left p-1 transition-all ${j?"border-brand-500 bg-brand-50":"border-transparent hover:bg-slate-50"} ${w?"ring-2 ring-brand-400":""}`,children:[o.jsx("span",{className:`text-sm font-medium ${w?"text-brand-600":"text-slate-700"}`,children:b}),o.jsxs("div",{className:"mt-1 space-y-0.5",children:[y.slice(0,2).map(S=>o.jsx("div",{className:`h-1 rounded ${x(S.status)}`},S.id)),y.length>2&&o.jsxs("span",{className:"text-[10px] text-slate-500",children:["+",y.length-2]})]})]},b)})}),s&&o.jsxs("div",{className:"mt-4 pt-4 border-t",children:[o.jsxs("h4",{className:"font-semibold text-slate-700 mb-2",children:["Reuniones del ",new Date(s+"T12:00:00").toLocaleDateString("es-CL",{day:"numeric",month:"long"})]}),h.length===0?o.jsx("p",{className:"text-sm text-slate-500",children:"Sin reuniones programadas"}):o.jsx("div",{className:"space-y-2",children:h.map(b=>o.jsx("button",{onClick:()=>e(b.id),className:"w-full text-left p-3 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`w-2 h-2 rounded-full ${x(b.status)}`}),o.jsx("span",{className:"font-medium",children:b.title}),o.jsx("span",{className:"text-sm text-slate-500 ml-auto",children:g(b.starts_at)})]})},b.id))})]})]}),o.jsxs("div",{className:"card p-6",children:[o.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[o.jsx(H,{name:"clock",size:18})," Prximas reuniones"]}),f.length===0?o.jsx("p",{className:"text-sm text-slate-500",children:"Sin reuniones prximas"}):o.jsx("div",{className:"space-y-3",children:f.map(b=>o.jsxs("button",{onClick:()=>e(b.id),className:"w-full text-left p-3 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors",children:[o.jsx("div",{className:"font-medium text-slate-800",children:b.title}),o.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:[new Date(b.starts_at).toLocaleDateString("es-CL",{day:"numeric",month:"short"})," - ",g(b.starts_at)]}),o.jsx("div",{className:"text-xs text-slate-400 mt-1",children:Ve(b.terminal_code)})]},b.id))})]})]})]})},AY=({onOpenMeeting:e})=>{const t=Le(c=>c.context),r=Le(c=>c.setContext),[n,a]=T.useState({status:"REALIZADA"}),i=Z_(n),s=(i.data||[]).filter(c=>c.minutes_text),l=[{key:"date",header:"Fecha",value:c=>new Date(c.starts_at).toLocaleDateString("es-CL")},{key:"title",header:"Ttulo",value:c=>c.title},{key:"terminal",header:"Terminal",value:c=>Ve(c.terminal_code)},{key:"minutes",header:"Minuta",value:c=>c.minutes_text||""}];return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ct,{title:"Minutas y Reportes",description:"Registro de minutas de reuniones realizadas",actions:o.jsx(hr,{onExportView:()=>Qe({filename:"minutas",sheetName:"Minutas",rows:s,columns:l}),onExportAll:()=>Qe({filename:"minutas_all",sheetName:"Minutas",rows:s,columns:l})})}),o.jsx(Pn,{terminalContext:t,onTerminalChange:r,children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"Ttulo de reunin",value:n.search??"",onChange:c=>a(u=>({...u,search:c.target.value}))})]})}),i.isLoading&&o.jsx(zt,{label:"Cargando minutas..."}),!i.isLoading&&s.length===0&&o.jsxs("div",{className:"card p-8 text-center text-slate-500",children:[o.jsx(H,{name:"file-text",size:48,className:"mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"No hay minutas registradas"})]}),o.jsx("div",{className:"grid gap-4",children:s.map(c=>o.jsxs("div",{className:"card p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>e(c.id),children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-slate-800",children:c.title}),o.jsxs("div",{className:"text-sm text-slate-500",children:[new Date(c.starts_at).toLocaleDateString("es-CL",{day:"numeric",month:"long",year:"numeric"})," - ",Ve(c.terminal_code)]})]}),o.jsx("span",{className:"badge badge-success",children:c.status})]}),o.jsx("div",{className:"text-sm text-slate-600 line-clamp-3 bg-slate-50 p-3 rounded-lg",children:c.minutes_text})]},c.id))})]})},CY=()=>{const e=vY("GLOBAL","ALL"),t=xY(),[r,n]=T.useState(!0),[a,i]=T.useState(""),[s,l]=T.useState(""),[c,u]=T.useState("");T.useEffect(()=>{e.data&&(n(e.data.enabled),i(e.data.cc_emails||""),l(e.data.subject_template),u(e.data.body_template))},[e.data]);const d=async()=>{await t.mutateAsync({scope_type:"GLOBAL",scope_code:"ALL",enabled:r,cc_emails:a||null,subject_template:s,body_template:c})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(Ct,{title:"Configuracin",description:"Ajustes de correo y notificaciones para reuniones"}),o.jsxs("div",{className:"card p-6 max-w-2xl",children:[o.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[o.jsx(H,{name:"send",size:18})," Configuracin de Correos"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-slate-800",children:"Notificaciones por correo"}),o.jsx("div",{className:"text-sm text-slate-500",children:"Enviar invitaciones automticas al crear reuniones"})]}),o.jsx("button",{onClick:()=>n(!r),className:`relative w-12 h-6 rounded-full transition-colors ${r?"bg-brand-600":"bg-slate-300"}`,children:o.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${r?"left-7":"left-1"}`})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Correos en copia (CC)"}),o.jsx("input",{type:"text",className:"input",value:a,onChange:f=>i(f.target.value),placeholder:"correo1@ejemplo.cl, correo2@ejemplo.cl"}),o.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Separar mltiples correos con coma"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Plantilla de asunto"}),o.jsx("input",{type:"text",className:"input",value:s,onChange:f=>l(f.target.value)}),o.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Variables: ","{{title}}"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Plantilla de cuerpo"}),o.jsx("textarea",{className:"input min-h-[200px] font-mono text-sm",value:c,onChange:f=>u(f.target.value)}),o.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Variables: ","{{invitee_name}}, {{title}}, {{date}}, {{time}}, {{duration}}, {{location}}, {{agenda}}, {{organizer}}"]})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t",children:o.jsx("button",{onClick:d,disabled:t.isPending,className:"btn btn-primary",children:t.isPending?"Guardando...":"Guardar Configuracin"})})]})]})]})},OY=({meetingId:e,onClose:t})=>{const r=ht(k=>k.session),n=(r==null?void 0:r.supervisorName)??"",a=NR(n),[i,s]=T.useState("info"),[l,c]=T.useState(""),[u,d]=T.useState(!0),f=aY(e),h=ER(e),p=cY(e),v=fY(e),g=oY(),x=yY(),b=uY(),m=dY(),y=hY(),_=pY(),w=mY(),j=f.data;T.useState(()=>{j!=null&&j.minutes_text&&c(j.minutes_text)});const S=async()=>{await g.mutateAsync({id:e,minutes:l}),d(!0)},E=async k=>{var K;const V=(K=k.target.files)==null?void 0:K[0];V&&(await b.mutateAsync({meetingId:e,file:V}),k.target.value="")},N=async(k,V)=>{const K=await YX(k);window.open(K,"_blank")},A=k=>{const V=new Date(k);return V.toLocaleDateString("es-CL",{weekday:"long",day:"numeric",month:"long",year:"numeric"})+" a las "+V.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})},O=k=>{switch(k){case"REALIZADA":return o.jsx("span",{className:"badge badge-success",children:k});case"CANCELADA":return o.jsx("span",{className:"badge badge-danger",children:k});default:return o.jsx("span",{className:"badge badge-warning",children:k})}};if(f.isLoading)return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:o.jsx(zt,{label:"Cargando reunin..."})});if(!j)return null;const D=[{id:"info",label:"Info",icon:"info"},{id:"agenda",label:"Agenda",icon:"clipboard"},{id:"invitees",label:"Invitados",icon:"users"},{id:"minutes",label:"Minuta",icon:"file-text"},{id:"actions",label:"Acuerdos",icon:"check-circle"},{id:"files",label:"Archivos",icon:"file"}];return o.jsx("div",{className:"fixed inset-0 z-50 flex bg-black/50 backdrop-blur-sm",children:o.jsxs("div",{className:"w-full h-full bg-white flex flex-col lg:flex-row animate-scale-in",children:[o.jsxs("div",{className:"lg:w-64 bg-slate-50 border-b lg:border-b-0 lg:border-r border-slate-200 p-4 flex lg:flex-col gap-2 overflow-x-auto lg:overflow-visible shrink-0",children:[D.map(k=>o.jsxs("button",{onClick:()=>s(k.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all whitespace-nowrap ${i===k.id?"bg-brand-600 text-white":"text-slate-600 hover:bg-slate-200"}`,children:[o.jsx(H,{name:k.icon,size:18}),o.jsx("span",{className:"hidden lg:inline",children:k.label})]},k.id)),o.jsxs("button",{onClick:t,className:"mt-auto flex items-center gap-2 px-4 py-2 rounded-lg text-slate-600 hover:bg-slate-200",children:[o.jsx(H,{name:"x",size:18})," ",o.jsx("span",{className:"hidden lg:inline",children:"Cerrar"})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[o.jsx("div",{className:"mb-6 pb-4 border-b",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:j.title}),o.jsx("p",{className:"text-slate-500 mt-1",children:A(j.starts_at)})]}),O(j.status)]})}),i==="info"&&o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Terminal"}),o.jsx("div",{className:"font-medium",children:Ve(j.terminal_code)})]}),o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Duracin"}),o.jsxs("div",{className:"font-medium",children:[j.duration_minutes," minutos"]})]}),o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Lugar"}),o.jsx("div",{className:"font-medium",children:j.location||"No especificado"})]}),o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Link"}),j.meeting_link?o.jsx("a",{href:j.meeting_link,target:"_blank",rel:"noopener noreferrer",className:"text-brand-600 hover:underline",children:"Unirse a la reunin"}):o.jsx("div",{className:"font-medium",children:"No disponible"})]}),o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg md:col-span-2",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Organizado por"}),o.jsx("div",{className:"font-medium",children:j.created_by_supervisor})]})]}),i==="agenda"&&o.jsx("div",{className:"space-y-2",children:j.agenda_json.length===0?o.jsx("p",{className:"text-slate-500",children:"Sin agenda definida"}):j.agenda_json.map((k,V)=>o.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 p-3 rounded-lg",children:[o.jsx("span",{className:"w-6 h-6 rounded-full bg-brand-100 text-brand-600 flex items-center justify-center text-sm font-bold",children:V+1}),o.jsx("span",{className:"flex-1",children:k.text})]},k.id))}),i==="invitees"&&o.jsxs("div",{className:"space-y-4",children:[a&&o.jsxs("button",{onClick:()=>x.mutate({meetingId:e}),disabled:x.isPending,className:"btn btn-secondary",children:[o.jsx(H,{name:"send",size:16})," ",x.isPending?"Enviando...":"Reenviar invitaciones"]}),o.jsx("div",{className:"space-y-2",children:(h.data||[]).map(k=>o.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:k.invitee_name}),k.invitee_email&&o.jsx("div",{className:"text-sm text-slate-500",children:k.invitee_email})]}),o.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${k.notification_status==="ENVIADO"?"bg-green-100 text-green-700":k.notification_status==="ERROR"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:k.notification_status})]},k.id))})]}),i==="minutes"&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("textarea",{className:"input min-h-[300px] font-mono",value:l,onChange:k=>{c(k.target.value),d(!1)},placeholder:"Escriba la minuta de la reunin aqu...",disabled:!a}),a&&o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:S,disabled:u||g.isPending,className:"btn btn-primary",children:g.isPending?"Guardando...":"Guardar Minuta"}),u&&o.jsx("span",{className:"text-sm text-green-600",children:"Guardado"})]})]}),i==="actions"&&o.jsx(kY,{actions:v.data||[],meetingId:e,canManage:a,onCreate:k=>y.mutate({meetingId:e,values:k}),onUpdate:(k,V)=>_.mutate({id:k,meetingId:e,values:V}),onDelete:k=>w.mutate({id:k,meetingId:e})}),i==="files"&&o.jsxs("div",{className:"space-y-4",children:[a&&o.jsxs("label",{className:"btn btn-secondary cursor-pointer inline-flex items-center gap-2",children:[o.jsx(H,{name:"upload",size:16})," Subir archivo",o.jsx("input",{type:"file",className:"hidden",accept:".pdf,.png,.jpg,.jpeg,.doc,.docx",onChange:E})]}),o.jsx("div",{className:"space-y-2",children:(p.data||[]).map(k=>o.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(H,{name:"file",size:20,className:"text-slate-400"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:k.file_name}),o.jsxs("div",{className:"text-xs text-slate-500",children:[(k.size_bytes/1024).toFixed(1)," KB"]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>N(k.storage_path,k.file_name),className:"btn btn-ghost btn-icon",children:o.jsx(H,{name:"eye",size:16})}),a&&o.jsx("button",{onClick:()=>m.mutate({id:k.id,storagePath:k.storage_path,meetingId:e}),className:"btn btn-ghost btn-icon text-red-500",children:o.jsx(H,{name:"trash",size:16})})]})]},k.id))})]})]})]})})},kY=({actions:e,canManage:t,onCreate:r,onUpdate:n,onDelete:a})=>{const[i,s]=T.useState(""),[l,c]=T.useState(""),[u,d]=T.useState(""),f=()=>{i.trim()&&(r({description:i,responsible_name:l||void 0,due_date:u||void 0}),s(""),c(""),d(""))};return o.jsxs("div",{className:"space-y-4",children:[t&&o.jsxs("div",{className:"space-y-2 bg-slate-50 p-4 rounded-lg",children:[o.jsx("input",{className:"input",value:i,onChange:h=>s(h.target.value),placeholder:"Descripcin del acuerdo"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("input",{className:"input",value:l,onChange:h=>c(h.target.value),placeholder:"Responsable"}),o.jsx("input",{type:"date",className:"input",value:u,onChange:h=>d(h.target.value)})]}),o.jsxs("button",{onClick:f,className:"btn btn-primary",disabled:!i.trim(),children:[o.jsx(H,{name:"plus",size:16})," Agregar Acuerdo"]})]}),o.jsx("div",{className:"space-y-2",children:e.map(h=>o.jsxs("div",{className:"flex items-start gap-3 bg-slate-50 p-3 rounded-lg",children:[o.jsx("button",{onClick:()=>n(h.id,{status:h.status==="CUMPLIDO"?"PENDIENTE":"CUMPLIDO"}),className:`mt-0.5 w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 ${h.status==="CUMPLIDO"?"bg-green-500 border-green-500 text-white":"border-slate-300"}`,disabled:!t,children:h.status==="CUMPLIDO"&&o.jsx(H,{name:"check",size:12})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:h.status==="CUMPLIDO"?"line-through text-slate-400":"",children:h.description}),o.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:[h.responsible_name&&o.jsx("span",{children:h.responsible_name}),h.due_date&&o.jsx("span",{className:"ml-2",children:new Date(h.due_date).toLocaleDateString("es-CL")})]})]}),t&&o.jsx("button",{onClick:()=>a(h.id),className:"text-red-500 hover:text-red-700",children:o.jsx(H,{name:"trash",size:16})})]},h.id))})]})},PY=[{id:"agenda",label:"Agenda",icon:"calendar"},{id:"reuniones",label:"Reuniones",icon:"users"},{id:"minutas",label:"Minutas",icon:"file-text"},{id:"config",label:"Configuracin",icon:"settings"}],RY=()=>{const[e,t]=T.useState("reuniones"),[r,n]=T.useState(null),a=l=>{n(l)},i=()=>{n(null)},s=()=>{switch(e){case"agenda":return o.jsx(TY,{onOpenMeeting:a});case"reuniones":return o.jsx(SY,{onOpenMeeting:a});case"minutas":return o.jsx(AY,{onOpenMeeting:a});case"config":return o.jsx(CY,{});default:return null}};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 border-b border-slate-200 pb-4",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:PY.map(l=>o.jsxs("button",{onClick:()=>t(l.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${e===l.id?"bg-brand-600 text-white shadow-md":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[o.jsx(H,{name:l.icon,size:18}),o.jsx("span",{className:"hidden sm:inline",children:l.label})]},l.id))})}),s(),r&&o.jsx(OY,{meetingId:r,onClose:i})]})},IY=async(e,t,r)=>{if(!Fr())return[];const n=Jn(e);let a=le.from("tasks").select("*").in("terminal_code",n).order("updated_at",{ascending:!1});if(t!=null&&t.status&&t.status!=="todos"&&(a=a.eq("status",t.status)),t!=null&&t.priority&&t.priority!=="todos"&&(a=a.eq("priority",t.priority)),t!=null&&t.search){const l=`%${t.search}%`;a=a.or(`title.ilike.${l},description.ilike.${l}`)}t!=null&&t.assigned_to_name&&(a=a.ilike("assigned_to_name",`%${t.assigned_to_name}%`)),t!=null&&t.date_from&&(a=a.gte("created_at",t.date_from)),t!=null&&t.date_to&&(a=a.lte("created_at",t.date_to+"T23:59:59")),t!=null&&t.due_from&&(a=a.gte("due_at",t.due_from)),t!=null&&t.due_to&&(a=a.lte("due_at",t.due_to+"T23:59:59")),t!=null&&t.only_mine&&r&&(a=a.ilike("assigned_to_name",`%${r}%`));const{data:i,error:s}=await a;if(s)throw s;return i||[]},e2=async e=>{const{data:t,error:r}=await le.from("tasks").select("*").eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t},DY=async e=>{const t=Jn(e),r=new Date().toISOString(),{data:n,error:a}=await le.from("tasks").select("status, due_at").in("terminal_code",t);if(a)throw a;const i=n||[];return{pending:i.filter(s=>s.status==="PENDIENTE").length,inProgress:i.filter(s=>s.status==="EN_CURSO").length,completed:i.filter(s=>s.status==="TERMINADO").length,evaluated:i.filter(s=>s.status==="EVALUADO").length,rejected:i.filter(s=>s.status==="RECHAZADO").length,overdue:i.filter(s=>s.due_at&&s.due_at<r&&!["EVALUADO","RECHAZADO"].includes(s.status)).length}},MY=async(e,t)=>{const{data:r,error:n}=await le.from("tasks").insert({title:e.title,description:e.description||null,terminal_code:e.terminal_code,priority:e.priority,assigned_to_staff_id:e.assigned_to_staff_id||null,assigned_to_name:e.assigned_to_name,assigned_to_email:e.assigned_to_email||null,created_by_supervisor:t,due_at:e.due_at||null,period_start:e.period_start||null,period_end:e.period_end||null}).select().single();if(n)throw on("Error al crear tarea","No se pudo guardar la tarea"),n;return hn("Tarea creada",`"${e.title}" asignada a ${e.assigned_to_name}`,t),e.assigned_to_email&&await t2("assigned",r),r},LY=async(e,t)=>{const r={};t.title!==void 0&&(r.title=t.title),t.description!==void 0&&(r.description=t.description||null),t.terminal_code!==void 0&&(r.terminal_code=t.terminal_code),t.priority!==void 0&&(r.priority=t.priority),t.assigned_to_staff_id!==void 0&&(r.assigned_to_staff_id=t.assigned_to_staff_id||null),t.assigned_to_name!==void 0&&(r.assigned_to_name=t.assigned_to_name),t.assigned_to_email!==void 0&&(r.assigned_to_email=t.assigned_to_email||null),t.due_at!==void 0&&(r.due_at=t.due_at||null),t.period_start!==void 0&&(r.period_start=t.period_start||null),t.period_end!==void 0&&(r.period_end=t.period_end||null);const{data:n,error:a}=await le.from("tasks").update(r).eq("id",e).select().single();if(a)throw a;return n},$Y=async(e,t,r)=>{const{error:n}=await le.from("tasks").update({status:t}).eq("id",e);if(n)throw n;const a=await e2(e);a!=null&&a.assigned_to_email&&await t2("status_change",a)},FY=async(e,t,r,n,a)=>{const i={status:t?"EVALUADO":"RECHAZADO",evaluated_by:r,evaluated_at:new Date().toISOString()};t&&n&&(i.evaluation_note=n),!t&&a&&(i.rejected_reason=a);const{error:s}=await le.from("tasks").update(i).eq("id",e);if(s)throw s;const l=await e2(e);l!=null&&l.assigned_to_email&&await t2(t?"evaluated_ok":"evaluated_reject",l),hn(t?"Tarea evaluada":"Tarea rechazada",t?"La tarea ha sido aceptada":"La tarea ha sido devuelta",r)},BY=async e=>{const{data:t,error:r}=await le.from("task_comments").select("*").eq("task_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},UY=async(e,t,r)=>{const{data:n,error:a}=await le.from("task_comments").insert({task_id:e,author_name:r,body:t}).select().single();if(a)throw a;return n},zY=async e=>{const{data:t,error:r}=await le.from("task_attachments").select("*").eq("task_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},qY=async(e,t,r)=>{const n=t.name.split(".").pop(),a=`tasks/${e}/${Date.now()}.${n}`,{error:i}=await le.storage.from("task-files").upload(a,t);if(i)throw on("Error al subir archivo",i.message),i;const{data:s,error:l}=await le.from("task_attachments").insert({task_id:e,type:"FILE",storage_path:a,file_name:t.name,mime_type:t.type,size_bytes:t.size,created_by:r}).select().single();if(l)throw l;return s},WY=async(e,t,r,n)=>{const{data:a,error:i}=await le.from("task_attachments").insert({task_id:e,type:"URL",url:t,file_name:r,created_by:n}).select().single();if(i)throw i;return a},HY=async(e,t)=>{t&&await le.storage.from("task-files").remove([t]);const{error:r}=await le.from("task_attachments").delete().eq("id",e);if(r)throw r},VY=async e=>{const{data:t,error:r}=await le.storage.from("task-files").createSignedUrl(e,3600);if(r)throw r;return t.signedUrl},TR=async(e,t)=>{const{data:r,error:n}=await le.from("task_email_settings").select("*").eq("scope_type",e).eq("scope_code",t).single();if(n){if(n.code==="PGRST116")return null;throw n}return r},KY=async e=>{const{error:t}=await le.from("task_email_settings").upsert(e,{onConflict:"scope_type,scope_code"});if(t)throw t},t2=async(e,t,r)=>{var a;const n=await TR("GLOBAL","ALL");if(!(!(n!=null&&n.enabled)||!t.assigned_to_email))try{const i=n.subject_templates[e]||"",s=n.body_templates[e]||"",l=c=>c.replace(/\{\{title\}\}/g,t.title).replace(/\{\{description\}\}/g,t.description||"").replace(/\{\{assigned_name\}\}/g,t.assigned_to_name).replace(/\{\{status\}\}/g,t.status).replace(/\{\{priority\}\}/g,t.priority).replace(/\{\{due_date\}\}/g,t.due_at?new Date(t.due_at).toLocaleDateString("es-CL"):"Sin fecha").replace(/\{\{creator\}\}/g,t.created_by_supervisor).replace(/\{\{reason\}\}/g,t.rejected_reason||"");await Ui.sendEmail({audience:"manual",manualRecipients:[t.assigned_to_email],cc:((a=n.cc_emails)==null?void 0:a.split(",").map(c=>c.trim()).filter(Boolean))||[],subject:l(i),body:l(s).replace(/\n/g,"<br>")})}catch(i){console.error("Error sending task email:",i)}},GY=async()=>{const{data:e,error:t}=await le.from("staff").select("id, nombre, email, cargo, terminal_code").eq("status","ACTIVO").order("nombre");if(t)throw t;return e||[]},$t={all:["tasks"],list:(e,t)=>[...$t.all,"list",e,t],detail:e=>[...$t.all,"detail",e],kpis:e=>[...$t.all,"kpis",e],comments:e=>[...$t.all,"comments",e],attachments:e=>[...$t.all,"attachments",e],staff:["staff-for-assignment"],emailSettings:e=>[...$t.all,"emailSettings",e]},qg=e=>{const t=Le(a=>a.context),r=ht(a=>a.session),n=t.mode==="ALL"?"ALL":t.value||"ALL";return Ge({queryKey:$t.list(n,e),queryFn:()=>IY(t,e,r==null?void 0:r.supervisorName)})},XY=e=>Ge({queryKey:$t.detail(e||""),queryFn:()=>e2(e),enabled:!!e}),YY=()=>{const e=Le(r=>r.context),t=e.mode==="ALL"?"ALL":e.value||"ALL";return Ge({queryKey:$t.kpis(t),queryFn:()=>DY(e)})},QY=()=>{const e=$e(),t=ht(r=>r.session);return Be({mutationFn:r=>MY(r,(t==null?void 0:t.supervisorName)||""),onSuccess:()=>{e.invalidateQueries({queryKey:$t.all})}})},JY=()=>{const e=$e();return Be({mutationFn:({id:t,values:r})=>LY(t,r),onSuccess:(t,{id:r})=>{e.invalidateQueries({queryKey:$t.all}),e.invalidateQueries({queryKey:$t.detail(r)})}})},AR=()=>{const e=$e(),t=ht(r=>r.session);return Be({mutationFn:({id:r,status:n})=>$Y(r,n,(t==null?void 0:t.supervisorName)||""),onSuccess:()=>{e.invalidateQueries({queryKey:$t.all})}})},ZY=()=>{const e=$e(),t=ht(r=>r.session);return Be({mutationFn:({id:r,accepted:n,note:a,reason:i})=>FY(r,n,(t==null?void 0:t.supervisorName)||"",a,i),onSuccess:()=>{e.invalidateQueries({queryKey:$t.all})}})},eQ=e=>Ge({queryKey:$t.comments(e||""),queryFn:()=>BY(e),enabled:!!e}),tQ=()=>{const e=$e(),t=ht(r=>r.session);return Be({mutationFn:({taskId:r,body:n})=>UY(r,n,(t==null?void 0:t.supervisorName)||""),onSuccess:(r,{taskId:n})=>{e.invalidateQueries({queryKey:$t.comments(n)})}})},rQ=e=>Ge({queryKey:$t.attachments(e||""),queryFn:()=>zY(e),enabled:!!e}),nQ=()=>{const e=$e(),t=ht(r=>r.session);return Be({mutationFn:({taskId:r,file:n})=>qY(r,n,(t==null?void 0:t.supervisorName)||""),onSuccess:(r,{taskId:n})=>{e.invalidateQueries({queryKey:$t.attachments(n)})}})},aQ=()=>{const e=$e(),t=ht(r=>r.session);return Be({mutationFn:({taskId:r,url:n,label:a})=>WY(r,n,a,(t==null?void 0:t.supervisorName)||""),onSuccess:(r,{taskId:n})=>{e.invalidateQueries({queryKey:$t.attachments(n)})}})},iQ=()=>{const e=$e();return Be({mutationFn:({id:t,storagePath:r,taskId:n})=>HY(t,r),onSuccess:(t,{taskId:r})=>{e.invalidateQueries({queryKey:$t.attachments(r)})}})},sQ=()=>Ge({queryKey:$t.staff,queryFn:GY,staleTime:5*60*1e3}),oQ=(e,t)=>Ge({queryKey:$t.emailSettings(`${e}-${t}`),queryFn:()=>TR(e,t)}),lQ=()=>{const e=$e();return Be({mutationFn:t=>KY(t),onSuccess:()=>{e.invalidateQueries({queryKey:$t.all})}})},cQ=["ISAAC AVILA","CLAUDIO ARRIAGADA","CRISTIAN LURASCHI"],nc=e=>e.toUpperCase().trim().replace(/\s+/g," "),lm=e=>{const t=nc(e);return cQ.some(r=>nc(r)===t||t.includes(nc(r))||nc(r).includes(t))},CR=(e,t)=>nc(e)===nc(t),OR=(e,t,r)=>{if(t)return["PENDIENTE","EN_CURSO","TERMINADO","EVALUADO","RECHAZADO"];if(r)switch(e){case"PENDIENTE":return["EN_CURSO"];case"EN_CURSO":return["TERMINADO"];case"RECHAZADO":return["EN_CURSO"];default:return[]}return[]},uQ=[{value:"todos",label:"Todos"},{value:"PENDIENTE",label:"Pendiente"},{value:"EN_CURSO",label:"En Curso"},{value:"TERMINADO",label:"Terminado"},{value:"EVALUADO",label:"Evaluado"},{value:"RECHAZADO",label:"Rechazado"}],r2=[{value:"BAJA",label:"Baja",color:"bg-slate-100 text-slate-700"},{value:"MEDIA",label:"Media",color:"bg-blue-100 text-blue-700"},{value:"ALTA",label:"Alta",color:"bg-amber-100 text-amber-700"},{value:"CRITICA",label:"Critica",color:"bg-red-100 text-red-700"}],dQ=["PENDIENTE","EN_CURSO","TERMINADO","EVALUADO","RECHAZADO"],n2=e=>{switch(e){case"PENDIENTE":return"bg-slate-100 text-slate-700 border-slate-300";case"EN_CURSO":return"bg-blue-100 text-blue-700 border-blue-300";case"TERMINADO":return"bg-amber-100 text-amber-700 border-amber-300";case"EVALUADO":return"bg-green-100 text-green-700 border-green-300";case"RECHAZADO":return"bg-red-100 text-red-700 border-red-300"}},Tf=e=>{var t;return((t=r2.find(r=>r.value===e))==null?void 0:t.color)||""},H1=({task:e,onClose:t,onSuccess:r})=>{const n=Le(m=>m.context),a=QY(),i=JY(),s=sQ(),[l,c]=T.useState({title:"",description:"",terminal_code:n.mode==="TERMINAL"?n.value:"EL_ROBLE",priority:"MEDIA",assigned_to_name:"",assigned_to_email:"",due_at:"",period_start:"",period_end:""}),[u,d]=T.useState(""),[f,h]=T.useState(!1);T.useEffect(()=>{var m;e&&c({title:e.title,description:e.description||"",terminal_code:e.terminal_code,priority:e.priority,assigned_to_staff_id:e.assigned_to_staff_id||void 0,assigned_to_name:e.assigned_to_name,assigned_to_email:e.assigned_to_email||"",due_at:((m=e.due_at)==null?void 0:m.slice(0,16))||"",period_start:e.period_start||"",period_end:e.period_end||""})},[e]);const p=(s.data||[]).filter(m=>m.nombre.toLowerCase().includes(u.toLowerCase())).slice(0,8),v=m=>{c(y=>({...y,assigned_to_staff_id:m.id,assigned_to_name:m.nombre,assigned_to_email:m.email||""})),d(""),h(!1)},g=async m=>{m.preventDefault();try{e?await i.mutateAsync({id:e.id,values:l}):await a.mutateAsync(l),r()}catch(y){console.error("Error saving task:",y)}},x=l.title&&l.assigned_to_name&&l.terminal_code,b=a.isPending||i.isPending;return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),o.jsxs("div",{className:"relative w-full max-w-2xl bg-white rounded-2xl shadow-2xl max-h-[90vh] overflow-hidden",children:[o.jsx("div",{className:"bg-brand-600 text-white p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-xl font-bold",children:e?"Editar Tarea":"Nueva Tarea"}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg",children:o.jsx(H,{name:"x",size:24})})]})}),o.jsxs("form",{onSubmit:g,className:"p-6 overflow-y-auto max-h-[calc(90vh-180px)]",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Ttulo"}),o.jsx("input",{type:"text",className:"input",value:l.title,onChange:m=>c(y=>({...y,title:m.target.value})),placeholder:"Descripcin breve de la tarea",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Descripcin"}),o.jsx("textarea",{className:"input min-h-[80px]",value:l.description,onChange:m=>c(y=>({...y,description:m.target.value})),placeholder:"Detalles adicionales..."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsx("select",{className:"input",value:l.terminal_code,onChange:m=>c(y=>({...y,terminal_code:m.target.value})),required:!0,children:Cn.map(m=>o.jsx("option",{value:m.value,children:m.label},m.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Prioridad"}),o.jsx("select",{className:"input",value:l.priority,onChange:m=>c(y=>({...y,priority:m.target.value})),children:r2.map(m=>o.jsx("option",{value:m.value,children:m.label},m.value))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Asignar a"}),o.jsxs("div",{className:"relative",children:[l.assigned_to_name&&o.jsxs("div",{className:"mb-2 inline-flex items-center gap-2 px-3 py-1 bg-brand-100 text-brand-800 rounded-full text-sm",children:[o.jsx(H,{name:"user",size:14}),o.jsx("span",{children:l.assigned_to_name}),o.jsx("button",{type:"button",onClick:()=>c(m=>({...m,assigned_to_staff_id:void 0,assigned_to_name:"",assigned_to_email:""})),className:"hover:text-brand-600",children:o.jsx(H,{name:"x",size:14})})]}),o.jsx("input",{type:"text",className:"input",value:u,onChange:m=>{d(m.target.value),h(!0)},onFocus:()=>h(!0),placeholder:"Buscar personal..."}),f&&p.length>0&&o.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:p.map(m=>o.jsxs("button",{type:"button",onClick:()=>v(m),className:"w-full px-4 py-2 text-left hover:bg-slate-50 border-b last:border-b-0",children:[o.jsx("div",{className:"font-medium text-sm",children:m.nombre}),o.jsxs("div",{className:"text-xs text-slate-500",children:[m.cargo," - ",m.terminal_code]})]},m.id))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Correo del asignado (opcional)"}),o.jsx("input",{type:"email",className:"input",value:l.assigned_to_email,onChange:m=>c(y=>({...y,assigned_to_email:m.target.value})),placeholder:"correo@ejemplo.cl"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Vencimiento"}),o.jsx("input",{type:"datetime-local",className:"input",value:l.due_at,onChange:m=>c(y=>({...y,due_at:m.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Periodo desde"}),o.jsx("input",{type:"date",className:"input",value:l.period_start,onChange:m=>c(y=>({...y,period_start:m.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Periodo hasta"}),o.jsx("input",{type:"date",className:"input",value:l.period_end,onChange:m=>c(y=>({...y,period_end:m.target.value}))})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-6 mt-6 border-t",children:[o.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:!x||b,className:"btn btn-primary",children:b?"Guardando...":e?"Actualizar":"Crear Tarea"})]})]})]})]})},fQ={PENDIENTE:"Pendiente",EN_CURSO:"En Curso",TERMINADO:"Terminado",EVALUADO:"Evaluado",RECHAZADO:"Rechazado"},hQ=({onOpenTask:e})=>{const t=ht(g=>g.session),r=(t==null?void 0:t.supervisorName)??"",n=lm(r),[a,i]=T.useState(!1),[s,l]=T.useState(null),c=qg(),u=AR(),d=g=>(c.data||[]).filter(x=>x.status===g),f=g=>{l(g)},h=g=>{g.preventDefault()},p=async g=>{if(!s||s.status===g){l(null);return}const x=lm(r),b=CR(r,s.assigned_to_name);if(!OR(s.status,x,b).includes(g)){l(null);return}await u.mutateAsync({id:s.id,status:g}),l(null)},v=g=>{if(!g)return null;const x=new Date(g),m=x<new Date;return o.jsx("span",{className:`text-xs ${m?"text-red-600 font-medium":"text-slate-500"}`,children:x.toLocaleDateString("es-CL",{day:"2-digit",month:"short"})})};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ct,{title:"Tablero de Tareas",description:"Vista Kanban con arrastrar y soltar",actions:n&&o.jsxs("button",{className:"btn btn-primary",onClick:()=>i(!0),children:[o.jsx(H,{name:"plus",size:18})," Nueva Tarea"]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 overflow-x-auto pb-4",children:dQ.map(g=>o.jsxs("div",{className:"bg-slate-100 rounded-xl p-3 min-h-[400px]",onDragOver:h,onDrop:()=>p(g),children:[o.jsxs("div",{className:`flex items-center justify-between mb-3 px-2 py-1 rounded-lg ${n2(g)}`,children:[o.jsx("span",{className:"font-semibold text-sm",children:fQ[g]}),o.jsx("span",{className:"text-xs font-medium px-2 py-0.5 bg-white/50 rounded-full",children:d(g).length})]}),o.jsx("div",{className:"space-y-2",children:d(g).map(x=>o.jsxs("div",{draggable:!0,onDragStart:()=>f(x),onClick:()=>e(x.id),className:`bg-white rounded-lg p-3 shadow-sm cursor-pointer hover:shadow-md transition-shadow border-l-4 ${(s==null?void 0:s.id)===x.id?"opacity-50":""}`,style:{borderLeftColor:x.priority==="CRITICA"?"#ef4444":x.priority==="ALTA"?"#f59e0b":x.priority==="MEDIA"?"#3b82f6":"#94a3b8"},children:[o.jsx("div",{className:"font-medium text-sm text-slate-800 line-clamp-2",children:x.title}),o.jsxs("div",{className:"flex items-center justify-between mt-2",children:[o.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${Tf(x.priority)}`,children:x.priority}),v(x.due_at)]}),o.jsx("div",{className:"text-xs text-slate-500 mt-2 truncate",children:x.assigned_to_name})]},x.id))})]},g))}),a&&o.jsx(H1,{onClose:()=>i(!1),onSuccess:()=>i(!1)})]})},pQ=({onOpenTask:e})=>{const t=Le(g=>g.context),r=Le(g=>g.setContext),n=ht(g=>g.session),a=(n==null?void 0:n.supervisorName)??"",i=lm(a),[s,l]=T.useState({status:"todos",priority:"todos"}),[c,u]=T.useState(!1),[d,f]=T.useState(null),h=qg(s),p=[{key:"due_at",header:"Vencimiento",value:g=>g.due_at?new Date(g.due_at).toLocaleDateString("es-CL"):""},{key:"title",header:"Ttulo",value:g=>g.title},{key:"terminal",header:"Terminal",value:g=>Ve(g.terminal_code)},{key:"priority",header:"Prioridad",value:g=>g.priority},{key:"assigned",header:"Asignado",value:g=>g.assigned_to_name},{key:"status",header:"Estado",value:g=>g.status},{key:"created",header:"Creado",value:g=>new Date(g.created_at).toLocaleDateString("es-CL")}],v=g=>{if(!g)return"-";const x=new Date(g),m=x<new Date;return o.jsx("span",{className:m?"text-red-600 font-medium":"",children:x.toLocaleDateString("es-CL",{day:"2-digit",month:"short"})})};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ct,{title:"Lista de Tareas",description:"Vista de tabla con filtros avanzados",actions:o.jsxs("div",{className:"flex gap-2",children:[i&&o.jsxs("button",{className:"btn btn-primary",onClick:()=>u(!0),children:[o.jsx(H,{name:"plus",size:18})," Nueva Tarea"]}),o.jsx(hr,{onExportView:()=>Qe({filename:"tareas",sheetName:"Tareas",rows:h.data||[],columns:p}),onExportAll:()=>Qe({filename:"tareas_all",sheetName:"Tareas",rows:h.data||[],columns:p})})]})}),o.jsxs(Pn,{terminalContext:t,onTerminalChange:r,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:s.status,onChange:g=>l(x=>({...x,status:g.target.value})),children:uQ.map(g=>o.jsx("option",{value:g.value,children:g.label},g.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Prioridad"}),o.jsxs("select",{className:"input",value:s.priority,onChange:g=>l(x=>({...x,priority:g.target.value})),children:[o.jsx("option",{value:"todos",children:"Todas"}),r2.map(g=>o.jsx("option",{value:g.value,children:g.label},g.value))]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"Ttulo o descripcin",value:s.search??"",onChange:g=>l(x=>({...x,search:g.target.value}))})]}),o.jsx("div",{className:"flex items-end",children:o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:s.only_mine||!1,onChange:g=>l(x=>({...x,only_mine:g.target.checked})),className:"w-4 h-4 rounded"}),o.jsx("span",{className:"text-sm",children:"Solo mis tareas"})]})})]}),h.isLoading&&o.jsx(zt,{label:"Cargando tareas..."}),h.isError&&o.jsx(Er,{onRetry:()=>h.refetch()}),!h.isLoading&&!h.isError&&o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{className:"table-header-cell",children:"Vence"}),o.jsx("th",{className:"table-header-cell",children:"Ttulo"}),o.jsx("th",{className:"table-header-cell",children:"Terminal"}),o.jsx("th",{className:"table-header-cell",children:"Prioridad"}),o.jsx("th",{className:"table-header-cell",children:"Asignado"}),o.jsx("th",{className:"table-header-cell",children:"Estado"}),o.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:(h.data||[]).length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"table-cell text-center text-slate-500 py-8",children:"No hay tareas"})}):(h.data||[]).map(g=>o.jsxs("tr",{className:"table-row cursor-pointer hover:bg-slate-50",onClick:()=>e(g.id),children:[o.jsx("td",{className:"table-cell text-sm",children:v(g.due_at)}),o.jsx("td",{className:"table-cell font-medium",children:g.title}),o.jsx("td",{className:"table-cell text-sm",children:Ve(g.terminal_code)}),o.jsx("td",{className:"table-cell",children:o.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Tf(g.priority)}`,children:g.priority})}),o.jsx("td",{className:"table-cell text-sm",children:g.assigned_to_name}),o.jsx("td",{className:"table-cell",children:o.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${n2(g.status)}`,children:g.status})}),o.jsx("td",{className:"table-cell",onClick:x=>x.stopPropagation(),children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[o.jsx("button",{onClick:()=>e(g.id),className:"btn btn-ghost btn-icon",title:"Ver",children:o.jsx(H,{name:"eye",size:16})}),i&&o.jsx("button",{onClick:()=>f(g),className:"btn btn-ghost btn-icon",title:"Editar",children:o.jsx(H,{name:"edit",size:16})})]})})]},g.id))})]})}),c&&o.jsx(H1,{onClose:()=>u(!1),onSuccess:()=>u(!1)}),d&&o.jsx(H1,{task:d,onClose:()=>f(null),onSuccess:()=>f(null)})]})},mQ=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],gQ=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],vQ=({onOpenTask:e})=>{const t=new Date,[r,n]=T.useState(t.getFullYear()),[a,i]=T.useState(t.getMonth()),[s,l]=T.useState(null),c=qg(),u=T.useMemo(()=>{const v=new Date(r,a,1),x=new Date(r,a+1,0).getDate(),b=v.getDay(),m=[];for(let y=0;y<b;y++)m.push(null);for(let y=1;y<=x;y++)m.push(y);return m},[r,a]),d=v=>{if(!c.data)return[];const g=`${r}-${String(a+1).padStart(2,"0")}-${String(v).padStart(2,"0")}`;return c.data.filter(x=>x.due_at&&x.due_at.startsWith(g)?!0:x.period_start&&x.period_end?g>=x.period_start&&g<=x.period_end:!1)},f=s?d(parseInt(s.split("-")[2])):[],h=()=>{a===0?(i(11),n(r-1)):i(a-1)},p=()=>{a===11?(i(0),n(r+1)):i(a+1)};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(Ct,{title:"Calendario de Tareas",description:"Vista mensual con vencimientos y periodos"}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 card p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("button",{onClick:h,className:"btn btn-ghost btn-icon",children:o.jsx(H,{name:"chevron-right",size:20,className:"rotate-180"})}),o.jsxs("h3",{className:"text-lg font-bold text-slate-800",children:[mQ[a]," ",r]}),o.jsx("button",{onClick:p,className:"btn btn-ghost btn-icon",children:o.jsx(H,{name:"chevron-right",size:20})})]}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:gQ.map(v=>o.jsx("div",{className:"text-center text-xs font-semibold text-slate-500 py-2",children:v},v))}),o.jsx("div",{className:"grid grid-cols-7 gap-1",children:u.map((v,g)=>{if(v===null)return o.jsx("div",{className:"h-20"},`e-${g}`);const x=d(v),b=`${r}-${String(a+1).padStart(2,"0")}-${String(v).padStart(2,"0")}`,m=v===t.getDate()&&a===t.getMonth()&&r===t.getFullYear(),y=s===b;return o.jsxs("button",{onClick:()=>l(b),className:`h-20 rounded-lg border text-left p-1 transition-all ${y?"border-brand-500 bg-brand-50":"border-transparent hover:bg-slate-50"} ${m?"ring-2 ring-brand-400":""}`,children:[o.jsx("span",{className:`text-sm font-medium ${m?"text-brand-600":"text-slate-700"}`,children:v}),o.jsxs("div",{className:"mt-1 space-y-0.5 overflow-hidden",children:[x.slice(0,2).map(_=>o.jsx("div",{className:`text-[10px] px-1 rounded truncate ${Tf(_.priority)}`,children:_.title},_.id)),x.length>2&&o.jsxs("span",{className:"text-[10px] text-slate-500",children:["+",x.length-2]})]})]},v)})})]}),o.jsxs("div",{className:"card p-6",children:[o.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[o.jsx(H,{name:"clipboard",size:18}),s?`Tareas: ${new Date(s+"T12:00:00").toLocaleDateString("es-CL",{day:"numeric",month:"long"})}`:"Selecciona un da"]}),s===null?o.jsx("p",{className:"text-sm text-slate-500",children:"Haz clic en un da para ver las tareas"}):f.length===0?o.jsx("p",{className:"text-sm text-slate-500",children:"Sin tareas para este da"}):o.jsx("div",{className:"space-y-2",children:f.map(v=>o.jsxs("button",{onClick:()=>e(v.id),className:"w-full text-left p-3 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors",children:[o.jsx("div",{className:"font-medium text-sm",children:v.title}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${Tf(v.priority)}`,children:v.priority}),o.jsx("span",{className:"text-xs text-slate-500",children:v.assigned_to_name})]})]},v.id))})]})]})]})},xQ=()=>{const e=YY();qg();const t=e.data,r=[{key:"metric",header:"Mtrica",value:i=>i.metric},{key:"value",header:"Valor",value:i=>i.value.toString()}],n=t?[{metric:"Pendientes",value:t.pending},{metric:"En Curso",value:t.inProgress},{metric:"Terminadas",value:t.completed},{metric:"Evaluadas",value:t.evaluated},{metric:"Rechazadas",value:t.rejected},{metric:"Vencidas",value:t.overdue}]:[],a=({label:i,value:s,icon:l,color:c})=>o.jsx("div",{className:`card p-4 border-l-4 ${c}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold text-slate-800",children:s}),o.jsx("div",{className:"text-sm text-slate-500",children:i})]}),o.jsx("div",{className:"p-3 bg-slate-100 rounded-full",children:o.jsx(H,{name:l,size:24,className:"text-slate-600"})})]})});return e.isLoading?o.jsx(zt,{label:"Cargando reportes..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsx(Ct,{title:"Reportes de Tareas",description:"KPIs y mtricas de rendimiento",actions:o.jsx(hr,{onExportView:()=>Qe({filename:"reporte_tareas",sheetName:"KPIs",rows:n,columns:r}),onExportAll:()=>Qe({filename:"reporte_tareas",sheetName:"KPIs",rows:n,columns:r})})}),t&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[o.jsx(a,{label:"Pendientes",value:t.pending,icon:"clock",color:"border-slate-400"}),o.jsx(a,{label:"En Curso",value:t.inProgress,icon:"activity",color:"border-blue-500"}),o.jsx(a,{label:"Terminadas",value:t.completed,icon:"check",color:"border-amber-500"}),o.jsx(a,{label:"Evaluadas",value:t.evaluated,icon:"check-circle",color:"border-green-500"}),o.jsx(a,{label:"Rechazadas",value:t.rejected,icon:"x-circle",color:"border-red-500"}),o.jsx(a,{label:"Vencidas",value:t.overdue,icon:"alert-triangle",color:"border-orange-500"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"card p-6",children:[o.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Distribucin por Estado"}),o.jsx("div",{className:"space-y-3",children:[{label:"Pendientes",value:t.pending,color:"bg-slate-400"},{label:"En Curso",value:t.inProgress,color:"bg-blue-500"},{label:"Terminadas",value:t.completed,color:"bg-amber-500"},{label:"Evaluadas",value:t.evaluated,color:"bg-green-500"},{label:"Rechazadas",value:t.rejected,color:"bg-red-500"}].map(i=>{const s=t.pending+t.inProgress+t.completed+t.evaluated+t.rejected,l=s>0?i.value/s*100:0;return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{children:i.label}),o.jsx("span",{className:"font-medium",children:i.value})]}),o.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full ${i.color} rounded-full`,style:{width:`${l}%`}})})]},i.label)})})]}),o.jsxs("div",{className:"card p-6",children:[o.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Resumen General"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded-lg",children:[o.jsx("span",{className:"text-slate-600",children:"Total de tareas"}),o.jsx("span",{className:"text-xl font-bold text-brand-600",children:t.pending+t.inProgress+t.completed+t.evaluated+t.rejected})]}),o.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded-lg",children:[o.jsx("span",{className:"text-slate-600",children:"Tasa de cumplimiento"}),o.jsx("span",{className:"text-xl font-bold text-green-600",children:(()=>{const i=t.evaluated,s=t.pending+t.inProgress+t.completed+t.evaluated;return s>0?`${Math.round(i/s*100)}%`:"0%"})()})]}),o.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50 rounded-lg",children:[o.jsx("span",{className:"text-slate-600",children:"Requieren atencin"}),o.jsx("span",{className:"text-xl font-bold text-red-600",children:t.overdue+t.rejected})]})]})]})]})]})]})},yQ=()=>{const e=oQ("GLOBAL","ALL"),t=lQ(),[r,n]=T.useState(!0),[a,i]=T.useState(""),[s,l]=T.useState({assigned:"Nueva tarea asignada: {{title}}",status_change:"Tarea actualizada: {{title}}",overdue:"Tarea vencida: {{title}}",evaluated_ok:"Tarea evaluada: {{title}}",evaluated_reject:"Tarea rechazada: {{title}}"}),[c,u]=T.useState({assigned:"",status_change:"",overdue:"",evaluated_ok:"",evaluated_reject:""});T.useEffect(()=>{e.data&&(n(e.data.enabled),i(e.data.cc_emails||""),l(e.data.subject_templates),u(e.data.body_templates))},[e.data]);const d=async()=>{await t.mutateAsync({scope_type:"GLOBAL",scope_code:"ALL",enabled:r,cc_emails:a||null,subject_templates:s,body_templates:c})},f=[{key:"assigned",label:"Al asignar tarea"},{key:"status_change",label:"Cambio de estado"},{key:"overdue",label:"Tarea vencida"},{key:"evaluated_ok",label:"Tarea aceptada"},{key:"evaluated_reject",label:"Tarea rechazada"}];return o.jsxs("div",{className:"space-y-6",children:[o.jsx(Ct,{title:"Configuracin",description:"Ajustes de correo y notificaciones para tareas"}),o.jsxs("div",{className:"card p-6 max-w-3xl",children:[o.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[o.jsx(H,{name:"send",size:18})," Configuracin de Correos"]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-slate-800",children:"Notificaciones por correo"}),o.jsx("div",{className:"text-sm text-slate-500",children:"Enviar correos al asignar, cambiar estado o evaluar tareas"})]}),o.jsx("button",{onClick:()=>n(!r),className:`relative w-12 h-6 rounded-full transition-colors ${r?"bg-brand-600":"bg-slate-300"}`,children:o.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${r?"left-7":"left-1"}`})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Correos en copia (CC)"}),o.jsx("input",{type:"text",className:"input",value:a,onChange:h=>i(h.target.value),placeholder:"correo1@ejemplo.cl, correo2@ejemplo.cl"}),o.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Separar mltiples correos con coma"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"font-medium text-slate-700",children:"Plantillas de correo"}),o.jsxs("p",{className:"text-xs text-slate-500",children:["Variables: ","{{title}}, {{description}}, {{assigned_name}}, {{status}}, {{priority}}, {{due_date}}, {{creator}}, {{reason}}"]}),f.map(({key:h,label:p})=>o.jsxs("div",{className:"border rounded-lg p-4",children:[o.jsx("div",{className:"font-medium text-sm text-slate-700 mb-2",children:p}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("input",{type:"text",className:"input text-sm",placeholder:"Asunto",value:s[h],onChange:v=>l(g=>({...g,[h]:v.target.value}))}),o.jsx("textarea",{className:"input min-h-[80px] text-sm font-mono",placeholder:"Cuerpo del correo",value:c[h],onChange:v=>u(g=>({...g,[h]:v.target.value}))})]})]},h))]}),o.jsx("div",{className:"flex justify-end pt-4 border-t",children:o.jsx("button",{onClick:d,disabled:t.isPending,className:"btn btn-primary",children:t.isPending?"Guardando...":"Guardar Configuracin"})})]})]})]})},bQ=({mode:e,taskTitle:t,onConfirm:r,onCancel:n,isLoading:a})=>{const[i,s]=T.useState(""),l=e==="accept";return o.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:n}),o.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 animate-scale-in",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:`p-3 rounded-full ${l?"bg-green-100":"bg-red-100"}`,children:o.jsx(H,{name:l?"check-circle":"x-circle",size:24,className:l?"text-green-600":"text-red-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800",children:l?"Aceptar Tarea":"Rechazar Tarea"}),o.jsx("p",{className:"text-sm text-slate-500",children:t})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"label",children:l?"Nota de evaluacin (opcional)":"Motivo de rechazo"}),o.jsx("textarea",{className:"input min-h-[100px] resize-none",value:i,onChange:c=>s(c.target.value),placeholder:l?"Comentario sobre la tarea completada...":"Indique por qu se rechaza la tarea...",required:!l})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",children:"Cancelar"}),o.jsx("button",{onClick:()=>r(l?i:void 0,l?void 0:i),disabled:!l&&!i.trim()||a,className:`btn ${l?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"} text-white`,children:a?"Procesando...":l?"Aceptar":"Rechazar"})]})]})]})},wQ=({taskId:e,onClose:t})=>{const r=ht(G=>G.session),n=(r==null?void 0:r.supervisorName)??"",a=lm(n),[i,s]=T.useState("info"),[l,c]=T.useState(""),[u,d]=T.useState(null),[f,h]=T.useState({url:"",label:""}),p=XY(e),v=eQ(e),g=rQ(e),x=tQ(),b=nQ(),m=aQ(),y=iQ(),_=AR(),w=ZY(),j=p.data,S=j?CR(n,j.assigned_to_name):!1,E=j?OR(j.status,a,S):[],N=async G=>{await _.mutateAsync({id:e,status:G})},A=async()=>{l.trim()&&(await x.mutateAsync({taskId:e,body:l}),c(""))},O=async G=>{var re;const X=(re=G.target.files)==null?void 0:re[0];X&&(await b.mutateAsync({taskId:e,file:X}),G.target.value="")},D=async()=>{f.url.trim()&&(await m.mutateAsync({taskId:e,url:f.url,label:f.label||f.url}),h({url:"",label:""}))},k=async G=>{const X=await VY(G);window.open(X,"_blank")},V=async(G,X,re)=>{await w.mutateAsync({id:e,accepted:G,note:X,reason:re}),d(null)};if(p.isLoading)return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:o.jsx(zt,{label:"Cargando tarea..."})});if(!j)return null;const K=G=>new Date(G).toLocaleString("es-CL"),ie=[{id:"info",label:"Info",icon:"info"},{id:"comments",label:"Comentarios",icon:"clipboard"},{id:"attachments",label:"Adjuntos",icon:"file"}];return o.jsxs("div",{className:"fixed inset-0 z-50 flex bg-black/50 backdrop-blur-sm",children:[o.jsxs("div",{className:"w-full h-full bg-white flex flex-col lg:flex-row animate-scale-in",children:[o.jsxs("div",{className:"lg:w-64 bg-slate-50 border-b lg:border-b-0 lg:border-r border-slate-200 p-4 flex lg:flex-col gap-2 overflow-x-auto lg:overflow-visible shrink-0",children:[ie.map(G=>o.jsxs("button",{onClick:()=>s(G.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all whitespace-nowrap ${i===G.id?"bg-brand-600 text-white":"text-slate-600 hover:bg-slate-200"}`,children:[o.jsx(H,{name:G.icon,size:18}),o.jsx("span",{className:"hidden lg:inline",children:G.label})]},G.id)),o.jsxs("button",{onClick:t,className:"mt-auto flex items-center gap-2 px-4 py-2 rounded-lg text-slate-600 hover:bg-slate-200",children:[o.jsx(H,{name:"x",size:18})," ",o.jsx("span",{className:"hidden lg:inline",children:"Cerrar"})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[o.jsxs("div",{className:"mb-6 pb-4 border-b",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:j.title}),o.jsx("p",{className:"text-slate-500 mt-1",children:j.description||"Sin descripcin"})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${Tf(j.priority)}`,children:j.priority}),o.jsx("span",{className:`px-3 py-1 rounded-full text-sm border ${n2(j.status)}`,children:j.status})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[E.filter(G=>G!==j.status&&!["EVALUADO","RECHAZADO"].includes(G)).map(G=>o.jsxs("button",{onClick:()=>N(G),className:"btn btn-secondary text-sm",disabled:_.isPending,children:["Cambiar a ",G]},G)),a&&j.status==="TERMINADO"&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>d("accept"),className:"btn bg-green-600 hover:bg-green-700 text-white text-sm",children:[o.jsx(H,{name:"check-circle",size:16})," Aceptar"]}),o.jsxs("button",{onClick:()=>d("reject"),className:"btn bg-red-600 hover:bg-red-700 text-white text-sm",children:[o.jsx(H,{name:"x-circle",size:16})," Rechazar"]})]})]})]}),i==="info"&&o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Terminal"}),o.jsx("div",{className:"font-medium",children:Ve(j.terminal_code)})]}),o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Asignado a"}),o.jsx("div",{className:"font-medium",children:j.assigned_to_name})]}),o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Vencimiento"}),o.jsx("div",{className:"font-medium",children:j.due_at?K(j.due_at):"Sin fecha"})]}),o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Creado por"}),o.jsx("div",{className:"font-medium",children:j.created_by_supervisor})]}),j.evaluated_by&&o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg md:col-span-2",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Evaluado por"}),o.jsxs("div",{className:"font-medium",children:[j.evaluated_by," - ",j.evaluated_at?K(j.evaluated_at):""]}),j.evaluation_note&&o.jsx("div",{className:"text-sm text-slate-600 mt-1",children:j.evaluation_note})]}),j.rejected_reason&&o.jsxs("div",{className:"bg-red-50 p-4 rounded-lg md:col-span-2 border border-red-200",children:[o.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Motivo de rechazo"}),o.jsx("div",{className:"text-red-700 mt-1",children:j.rejected_reason})]})]}),i==="comments"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("textarea",{className:"input flex-1 min-h-[80px]",value:l,onChange:G=>c(G.target.value),placeholder:"Agregar comentario o actualizacin..."}),o.jsx("button",{onClick:A,disabled:!l.trim()||x.isPending,className:"btn btn-primary self-end",children:o.jsx(H,{name:"send",size:16})})]}),o.jsx("div",{className:"space-y-3",children:(v.data||[]).map(G=>o.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"font-medium text-slate-700",children:G.author_name}),o.jsx("span",{className:"text-slate-400",children:new Date(G.created_at).toLocaleString("es-CL")})]}),o.jsx("div",{className:"mt-2 text-slate-600",children:G.body})]},G.id))})]}),i==="attachments"&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:o.jsxs("label",{className:"btn btn-secondary cursor-pointer inline-flex items-center gap-2",children:[o.jsx(H,{name:"upload",size:16})," Subir archivo",o.jsx("input",{type:"file",className:"hidden",accept:".pdf,.png,.jpg,.jpeg,.xlsx",onChange:O})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 p-3 bg-slate-50 rounded-lg",children:[o.jsx("input",{type:"url",className:"input flex-1",placeholder:"URL",value:f.url,onChange:G=>h(X=>({...X,url:G.target.value}))}),o.jsx("input",{type:"text",className:"input flex-1",placeholder:"Etiqueta (opcional)",value:f.label,onChange:G=>h(X=>({...X,label:G.target.value}))}),o.jsx("button",{onClick:D,disabled:!f.url,className:"btn btn-secondary shrink-0",children:o.jsx(H,{name:"plus",size:16})})]}),o.jsx("div",{className:"space-y-2",children:(g.data||[]).map(G=>o.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(H,{name:G.type==="URL"?"activity":"file",size:20,className:"text-slate-400"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-sm",children:G.file_name}),G.size_bytes&&o.jsxs("div",{className:"text-xs text-slate-500",children:[(G.size_bytes/1024).toFixed(1)," KB"]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[G.type==="FILE"&&G.storage_path&&o.jsx("button",{onClick:()=>k(G.storage_path),className:"btn btn-ghost btn-icon",children:o.jsx(H,{name:"eye",size:16})}),G.type==="URL"&&G.url&&o.jsx("a",{href:G.url,target:"_blank",rel:"noopener noreferrer",className:"btn btn-ghost btn-icon",children:o.jsx(H,{name:"eye",size:16})}),o.jsx("button",{onClick:()=>y.mutate({id:G.id,storagePath:G.storage_path,taskId:e}),className:"btn btn-ghost btn-icon text-red-500",children:o.jsx(H,{name:"trash",size:16})})]})]},G.id))})]})]})]}),u&&o.jsx(bQ,{mode:u,taskTitle:j.title,onConfirm:(G,X)=>V(u==="accept",G,X),onCancel:()=>d(null),isLoading:w.isPending})]})},_Q=[{id:"kanban",label:"Tablero",icon:"layers"},{id:"lista",label:"Lista",icon:"clipboard"},{id:"calendario",label:"Calendario",icon:"calendar"},{id:"reportes",label:"Reportes",icon:"bar-chart"},{id:"config",label:"Configuracin",icon:"settings"}],jQ=()=>{const[e,t]=T.useState("kanban"),[r,n]=T.useState(null),a=l=>{n(l)},i=()=>{n(null)},s=()=>{switch(e){case"kanban":return o.jsx(hQ,{onOpenTask:a});case"lista":return o.jsx(pQ,{onOpenTask:a});case"calendario":return o.jsx(vQ,{onOpenTask:a});case"reportes":return o.jsx(xQ,{});case"config":return o.jsx(yQ,{});default:return null}};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 border-b border-slate-200 pb-4",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:_Q.map(l=>o.jsxs("button",{onClick:()=>t(l.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${e===l.id?"bg-brand-600 text-white shadow-md":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[o.jsx(H,{name:l.icon,size:18}),o.jsx("span",{className:"hidden sm:inline",children:l.label})]},l.id))})}),s(),r&&o.jsx(wQ,{taskId:r,onClose:i})]})},Zi=({columns:e,rows:t,emptyMessage:r="Sin resultados"})=>t.length?o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsx("tr",{children:e.map(n=>o.jsx("th",{scope:"col",className:"table-header-cell",children:n.header},n.key))})}),o.jsx("tbody",{className:"table-body",children:t.map((n,a)=>o.jsx("tr",{className:"table-row",children:e.map(i=>o.jsx("td",{className:"table-cell",children:i.render?i.render(n):n[i.key]},i.key))},a))})]})}):o.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50/50 px-6 py-12 text-center",children:[o.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-slate-100 mb-3",children:o.jsx("svg",{className:"h-6 w-6 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),o.jsx("p",{className:"text-sm font-medium text-slate-600",children:r}),o.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"No hay datos para mostrar en este momento"})]}),es=({label:e="Sin datos",description:t})=>o.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50/50 px-6 py-12 text-center",children:[o.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-slate-100 mb-4",children:o.jsx("svg",{className:"h-7 w-7 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),o.jsx("p",{className:"text-sm font-semibold text-slate-700",children:e}),t&&o.jsx("p",{className:"mt-1 text-xs text-slate-500 max-w-xs",children:t})]}),Wg=(e,t)=>({list:async({terminalContext:r,filters:n,scope:a})=>{const i=K7(e,r);return a==="all"?i:t?i.filter(s=>t(s,n)):i}}),SQ=[{id:"i-1",titulo:"Actualizacin de protocolos",fecha:"2023-12-02",enviadoPor:"Equipo Seguridad",alcance:"todos",terminal:"EL_ROBLE"},{id:"i-2",titulo:"Corte programado",fecha:"2023-12-03",enviadoPor:"Operaciones",alcance:"terminal",terminal:"LA_REINA"},{id:"i-3",titulo:"Campaa de seguridad",fecha:"2023-12-01",enviadoPor:"Prevencin",alcance:"segmentado",terminal:"EL_SALTO"}],xN=Wg(SQ,(e,t)=>t!=null&&t.alcance&&t.alcance!=="todos"?e.alcance===t.alcance:!0),EQ=()=>{var A;const e=Le(O=>O.context),t=Le(O=>O.setContext),[r,n]=T.useState({alcance:"todos"}),[a,i]=T.useState("todos"),[s,l]=T.useState("EL_ROBLE"),[c,u]=T.useState(""),[d,f]=T.useState(""),[h,p]=T.useState(""),[v,g]=T.useState(!1),[x,b]=T.useState(""),[m,y]=T.useState(""),_=Ge({queryKey:["informativos",e,r],queryFn:()=>xN.list({terminalContext:e,filters:r,scope:"view"})}),w=T.useMemo(()=>[{key:"titulo",header:"Ttulo"},{key:"enviadoPor",header:"Enviado por"},{key:"alcance",header:"Alcance",render:O=>o.jsx("span",{className:"badge",children:O.alcance}),value:O=>O.alcance},{key:"fecha",header:"Fecha",render:O=>Sr(O.fecha),value:O=>Sr(O.fecha)},{key:"terminal",header:"Terminal",render:O=>Ve(O.terminal),value:O=>Ve(O.terminal)}],[]),j=w.map(O=>({key:O.key,header:O.header,value:D=>O.value?O.value(D):D[O.key]})),S=()=>{_.data&&Qe({filename:"informativos_vista",sheetName:"Informativos",rows:_.data,columns:j})},E=async()=>{const O=await xN.list({terminalContext:e,scope:"all"});Qe({filename:"informativos_completo",sheetName:"Informativos",rows:O,columns:j})},N=async()=>{y(""),g(!0);try{const O=await Ui.sendEmail({audience:a,terminalCodes:a==="por_terminal"?[s]:void 0,manualRecipients:a==="manual"?c.split(",").map(D=>D.trim()).filter(Boolean):void 0,subject:d,body:h});b(`Correo enviado (${O.messageId})`),f(""),p(""),u("")}catch(O){y(O.message)}finally{g(!1)}};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ct,{title:"Informativos",description:"Comunicaciones internas con opciones de envo por terminal.",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"btn btn-primary",children:"Nuevo informativo"}),o.jsx(hr,{onExportView:S,onExportAll:E})]})}),o.jsx(Pn,{terminalContext:e,onTerminalChange:t,children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Alcance"}),o.jsxs("select",{className:"input",value:r.alcance,onChange:O=>n({alcance:O.target.value}),children:[o.jsx("option",{value:"todos",children:"Todos"}),o.jsx("option",{value:"terminal",children:"Por terminal"}),o.jsx("option",{value:"segmentado",children:"Segmentado"})]})]})}),_.isLoading&&o.jsx(zt,{}),_.isError&&o.jsx(Er,{onRetry:_.refetch}),!_.isLoading&&!_.isError&&o.jsxs(o.Fragment,{children:[!((A=_.data)!=null&&A.length)&&o.jsx(es,{description:"No hay informativos con los filtros actuales."}),_.data&&_.data.length>0&&o.jsx(Zi,{columns:w,rows:_.data})]}),o.jsxs("div",{className:"card p-4",children:[o.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-base font-semibold text-slate-900",children:"Enviar correo interno"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Mdulo preparado para conectar a Edge Function."})]}),o.jsxs("div",{className:"flex flex-col items-end gap-1 text-right",children:[x&&o.jsx("span",{className:"badge",children:x}),m&&o.jsx("span",{className:"text-xs font-semibold text-red-600",children:m})]})]}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"label",children:"Destinatarios"}),o.jsxs("select",{className:"input",value:a,onChange:O=>i(O.target.value),children:[o.jsx("option",{value:"todos",children:"Todos"}),o.jsx("option",{value:"por_terminal",children:"Por terminal"}),o.jsx("option",{value:"manual",children:"Lista manual"})]})]}),a==="por_terminal"&&o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"label",children:"Terminal objetivo"}),o.jsx("select",{className:"input",value:s,onChange:O=>l(O.target.value),children:Cn.map(O=>o.jsx("option",{value:O.value,children:O.label},O.value))})]}),a==="manual"&&o.jsxs("div",{className:"space-y-1 md:col-span-2",children:[o.jsx("label",{className:"label",children:"Correos (separados por coma)"}),o.jsx("input",{className:"input",value:c,onChange:O=>u(O.target.value),placeholder:"correo1@dominio.com, correo2@dominio.com"})]}),o.jsxs("div",{className:"md:col-span-3 grid gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"label",children:"Asunto"}),o.jsx("input",{className:"input",value:d,onChange:O=>f(O.target.value)})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"label",children:"Mensaje"}),o.jsx("textarea",{className:"input min-h-[120px]",value:h,onChange:O=>p(O.target.value),placeholder:"Contenido del correo"})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{className:"btn btn-primary",onClick:N,disabled:v||!d||!h,children:v?"Enviando...":"Enviar (mock)"})})]})]})]})]})},NQ=["ISAAC AVILA","CLAUDIO ARRIAGADA","CRISTIAN LURASCHI"],TQ={EL_ROBLE:"CRISTIAN LURASCHI",LA_REINA:"CRISTIAN LURASCHI"},ro=e=>e.trim().replace(/\s+/g," ").toUpperCase(),Ah=e=>{const t=ro(e);return NQ.includes(t)},AQ=e=>TQ[e]??"",Ch=({data:e,isLoading:t})=>{if(t)return o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[...Array(4)].map((n,a)=>o.jsxs("div",{className:"card p-4 animate-pulse",children:[o.jsx("div",{className:"h-4 bg-slate-200 rounded w-24 mb-2"}),o.jsx("div",{className:"h-8 bg-slate-200 rounded w-12"})]},a))});if(!e)return null;const r=[{label:"Pendientes Hoy",value:e.pendingToday,icon:"clock",bgClass:"bg-warning-50 border-warning-200",textClass:"text-warning-700",iconClass:"text-warning-500"},{label:"Pendientes Total",value:e.pendingTotal,icon:"inbox",bgClass:"bg-orange-50 border-orange-200",textClass:"text-orange-700",iconClass:"text-orange-500"},{label:"Autorizados (30d)",value:e.authorizedRange,icon:"check-circle",bgClass:"bg-success-50 border-success-200",textClass:"text-success-700",iconClass:"text-success-500"},{label:"Rechazados (30d)",value:e.rejectedRange,icon:"x",bgClass:"bg-danger-50 border-danger-200",textClass:"text-danger-700",iconClass:"text-danger-500"}];return o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:r.map(n=>o.jsxs("div",{className:`card p-4 ${n.bgClass}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(H,{name:n.icon,size:18,className:n.iconClass}),o.jsx("span",{className:"text-xs font-semibold text-slate-600 uppercase",children:n.label})]}),o.jsx("p",{className:`text-2xl font-bold ${n.textClass}`,children:n.value})]},n.label))})},si=({mode:e,itemName:t,onConfirm:r,onCancel:n,isLoading:a})=>{const[i,s]=T.useState(""),l=u=>{u.preventDefault(),!(e==="reject"&&!i.trim())&&r(i.trim()||void 0)},c=e==="authorize";return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:n}),o.jsxs("div",{className:"relative w-full max-w-md card p-6 animate-scale-in",children:[o.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[o.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-full ${c?"bg-success-100":"bg-danger-100"}`,children:o.jsx(H,{name:c?"check-circle":"x",size:24,className:c?"text-success-600":"text-danger-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:c?"Autorizar Registro":"Rechazar Registro"}),o.jsx("p",{className:"text-sm text-slate-600",children:c?`Confirmas la autorizacin de "${t}"?`:`Confirmas el rechazo de "${t}"?`})]})]}),o.jsxs("form",{onSubmit:l,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"label",children:c?"Comentario (opcional)":"Motivo del rechazo *"}),o.jsx("textarea",{className:"input min-h-[80px]",value:i,onChange:u=>s(u.target.value),placeholder:c?"Agregar comentario...":"Describe el motivo del rechazo...",required:!c})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",disabled:a,children:"Cancelar"}),o.jsx("button",{type:"submit",className:`btn ${c?"btn-success":"btn-danger"}`,disabled:a||!c&&!i.trim(),children:a?o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Procesando..."]}):c?"Autorizar":"Rechazar"})]})]})]})]})},Hg=({value:e,onChange:t,onStaffFound:r,disabled:n})=>{const[a,i]=T.useState(""),[s,l]=T.useState(!1),[c,u]=T.useState(null),[d,f]=T.useState(!1);T.useEffect(()=>{e&&i(Qt(e))},[e]);const h=g=>{if(i(g),u(null),f(!1),A1(g).valid){const b=to(g);t(b),p(b)}else t(""),r(null)},p=async g=>{l(!0);try{const x=await gX(g);x?(f(!0),r(x)):(u("RUT no encontrado en Personal"),r(null))}catch{u("Error al buscar RUT"),r(null)}finally{l(!1)}},v=()=>{e&&i(Qt(e))};return o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"RUT"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",className:`input pr-10 ${c?"border-danger-500":d?"border-success-500":""}`,value:a,onChange:g=>h(g.target.value),onBlur:v,placeholder:"12.345.678-9",disabled:n}),o.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:s?o.jsxs("svg",{className:"animate-spin h-4 w-4 text-slate-400",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):d?o.jsx(H,{name:"check-circle",size:18,className:"text-success-500"}):c?o.jsx(H,{name:"x",size:18,className:"text-danger-500"}):o.jsx(H,{name:"search",size:18,className:"text-slate-400"})})]}),c&&o.jsx("p",{className:"mt-1 text-xs text-danger-600",children:c}),d&&o.jsx("p",{className:"mt-1 text-xs text-success-600",children:"Datos cargados desde Personal"})]})},CQ=({initialData:e,supervisorName:t,onSubmit:r,onCancel:n,isLoading:a})=>{const[i,s]=T.useState({rut:"",nombre:"",area:"Logstica",cargo:"",jefe_terminal:"",terminal_code:"EL_ROBLE",cabezal:"",incident_state:"",schedule_in_out:"",date:new Date().toISOString().split("T")[0],time_range:"",observations:"",informed_by:t,...e});T.useEffect(()=>{const u=AQ(i.terminal_code);u&&s(d=>({...d,jefe_terminal:u}))},[i.terminal_code]);const l=u=>{u&&s(d=>({...d,nombre:u.nombre,cargo:u.cargo,terminal_code:u.terminal_code}))},c=u=>{u.preventDefault(),r(i)};return o.jsxs("form",{onSubmit:c,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(Hg,{value:i.rut,onChange:u=>s(d=>({...d,rut:u})),onStaffFound:l,disabled:!!(e!=null&&e.rut)}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nombre"}),o.jsx("input",{type:"text",className:"input",value:i.nombre,onChange:u=>s(d=>({...d,nombre:u.target.value})),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"rea"}),o.jsx("input",{type:"text",className:"input",value:i.area,onChange:u=>s(d=>({...d,area:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cargo"}),o.jsx("input",{type:"text",className:"input",value:i.cargo,onChange:u=>s(d=>({...d,cargo:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsx("select",{className:"input",value:i.terminal_code,onChange:u=>s(d=>({...d,terminal_code:u.target.value})),required:!0,children:Cn.map(u=>o.jsx("option",{value:u.value,children:u.label},u.value))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Jefe de Terminal"}),o.jsx("input",{type:"text",className:"input",value:i.jefe_terminal,onChange:u=>s(d=>({...d,jefe_terminal:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cabezal"}),o.jsx("input",{type:"text",className:"input",value:i.cabezal,onChange:u=>s(d=>({...d,cabezal:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Estado (Incidente)"}),o.jsx("input",{type:"text",className:"input",value:i.incident_state,onChange:u=>s(d=>({...d,incident_state:u.target.value}))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Horario Entrada/Salida"}),o.jsx("input",{type:"text",className:"input",value:i.schedule_in_out,onChange:u=>s(d=>({...d,schedule_in_out:u.target.value})),placeholder:"08:00-18:00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha"}),o.jsx("input",{type:"date",className:"input",value:i.date,onChange:u=>s(d=>({...d,date:u.target.value})),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Horario (Rango)"}),o.jsx("input",{type:"text",className:"input",value:i.time_range,onChange:u=>s(d=>({...d,time_range:u.target.value})),placeholder:"10:00-14:00"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Observaciones"}),o.jsx("textarea",{className:"input min-h-[80px]",value:i.observations,onChange:u=>s(d=>({...d,observations:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Informado Por"}),o.jsx("input",{type:"text",className:"input",value:i.informed_by,onChange:u=>s(d=>({...d,informed_by:u.target.value}))})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[o.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",disabled:a,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?"Guardando...":e?"Guardar Cambios":"Crear Registro"})]})]})},a2=async e=>{const{data:t,error:r}=await le.from("app_configuration").select("value").eq("key",e).single();return r?(r.code==="PGRST116"||console.error(`Error fetching config ${e}:`,r),null):t.value},OQ=async(e,t,r)=>{const{error:n}=await le.from("app_configuration").upsert({key:e,value:t,description:r},{onConflict:"key"});if(n)throw console.error(`Error updating config ${e}:`,n),n},kQ=async(e,t)=>{if(!Fr())return[];const r=Jn(e);let n=le.from("attendance_no_marcaciones").select("*").in("terminal_code",r).order("date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}t!=null&&t.date_from&&(n=n.gte("date",t.date_from)),t!=null&&t.date_to&&(n=n.lte("date",t.date_to));const{data:a,error:i}=await n;if(i)throw i;return a||[]},PQ=async(e,t)=>{const{data:r,error:n}=await le.from("attendance_no_marcaciones").insert({...e,created_by_supervisor:ro(t)}).select().single();if(n)throw on("Error al crear registro","No se pudo guardar el registro de No Marcacin"),n;try{await Oh("No Marcaciones",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.date,createdBy:t,details:{rea:e.area||"",Cargo:e.cargo||"","Jefe Terminal":e.jefe_terminal||"",Observaciones:e.observations||""}}),hn("Registro creado exitosamente",`No Marcacin para ${e.nombre} guardado y correo enviado`,t)}catch{hn("Registro creado",`No Marcacin para ${e.nombre} guardado (correo no enviado)`,t)}return r},RQ=async(e,t)=>{const{data:r,error:n}=await le.from("attendance_no_marcaciones").update(t).eq("id",e).select().single();if(n)throw n;return r},IQ=async(e,t)=>{if(!Fr())return[];const r=Jn(e);let n=le.from("attendance_sin_credenciales").select("*").in("terminal_code",r).order("date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}const{data:a,error:i}=await n;if(i)throw i;return a||[]},DQ=async(e,t)=>{const{data:r,error:n}=await le.from("attendance_sin_credenciales").insert({...e,created_by_supervisor:ro(t)}).select().single();if(n)throw on("Error al crear registro","No se pudo guardar el registro de Sin Credenciales"),n;try{await Oh("Sin Credenciales",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.date,createdBy:t,details:{Cabezal:e.cabezal||"",Horario:`${e.start_time||""} - ${e.end_time||""}`,Cargo:e.cargo||"","Supervisor Autoriza":e.supervisor_autoriza||""}}),hn("Registro creado exitosamente",`Sin Credenciales para ${e.nombre} guardado y correo enviado`,t)}catch{hn("Registro creado",`Sin Credenciales para ${e.nombre} guardado (correo no enviado)`,t)}return r},MQ=async(e,t)=>{const{data:r,error:n}=await le.from("attendance_sin_credenciales").update(t).eq("id",e).select().single();if(n)throw n;return r},LQ=async(e,t)=>{if(!Fr())return[];const r=Jn(e);let n=le.from("attendance_cambios_dia").select("*").in("terminal_code",r).order("date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}const{data:a,error:i}=await n;if(i)throw i;return a||[]},$Q=async(e,t)=>{let r=null;if(e.document){const u=e.document.name.split(".").pop(),d=`cambios-dia/${Date.now()}.${u}`,{error:f}=await le.storage.from("attendance-docs").upload(d,e.document);if(f)throw console.error("Storage Upload Error Detail:",f),on("Error al subir documento","Verifica que el archivo sea imagen o PDF y menor a 5MB"),new Error(`Error al subir documento: ${f.message}`);r=d}const{document:n,...a}=e,i={...a,document_path:r,created_by_supervisor:ro(t)};["day_off_date","day_on_date","prog_start","prog_end","reprogram_start","reprogram_end","day_off_start","day_off_end","day_on_start","day_on_end"].forEach(u=>{i[u]===""&&(i[u]=null)});const{data:l,error:c}=await le.from("attendance_cambios_dia").insert(i).select().single();if(c)throw on("Error al crear registro","No se pudo guardar el registro de Cambio de Da"),c;try{let u="No adjunto";if(r){const{data:d}=le.storage.from("attendance-docs").getPublicUrl(r);u=`<a href="${d.publicUrl}" target="_blank" style="color: #2563eb; text-decoration: underline; font-weight: 700;">Ver Documento Adjunto</a>`}await Oh("Cambios de Da",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.date,createdBy:t,details:{"Jornada Programada":`${e.prog_start||""} - ${e.prog_end||""}`,"Da No Trabaja":e.day_off_date||"","Da Trabaja":e.day_on_date||"",Documento:u}}),hn("Registro creado exitosamente",`Cambio de Da para ${e.nombre} guardado y correo enviado`,t)}catch{hn("Registro creado",`Cambio de Da para ${e.nombre} guardado (correo no enviado)`,t)}return l},FQ=async(e,t)=>{const{document:r,...n}=t,a={...n};["day_off_date","day_on_date","prog_start","prog_end","reprogram_start","reprogram_end","day_off_start","day_off_end","day_on_start","day_on_end"].forEach(c=>{a[c]===""&&(a[c]=null)});const{data:s,error:l}=await le.from("attendance_cambios_dia").update(a).eq("id",e).select().single();if(l)throw l;return s},BQ=async e=>{const{data:t,error:r}=await le.storage.from("attendance-docs").createSignedUrl(e,3600);if(r)throw r;return t.signedUrl},UQ=async(e,t)=>{if(!Fr())return[];const r=Jn(e);let n=le.from("attendance_autorizaciones").select("*").in("terminal_code",r).order("authorization_date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}const{data:a,error:i}=await n;if(i)throw i;return a||[]},zQ=async(e,t)=>{const{data:r,error:n}=await le.from("attendance_autorizaciones").insert({...e,created_by_supervisor:ro(t)}).select().single();if(n)throw on("Error al crear registro","No se pudo guardar la autorizacin"),n;try{await Oh("Autorizaciones",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.authorization_date,createdBy:t,details:{Tipo:e.entry_or_exit==="ENTRADA"?"Llegada Tarda":"Retiro Anticipado",Horario:e.horario||"",Turno:e.turno||"",Motivo:e.motivo||""}}),hn("Registro creado exitosamente",`Autorizacin para ${e.nombre} guardada y correo enviado`,t)}catch{hn("Registro creado",`Autorizacin para ${e.nombre} guardada (correo no enviado)`,t)}return r},qQ=async(e,t)=>{const{data:r,error:n}=await le.from("attendance_autorizaciones").update(t).eq("id",e).select().single();if(n)throw n;return r},WQ=async(e,t,r)=>{const{error:n}=await le.from(e).update({auth_status:"AUTORIZADO",authorized_by:ro(r),authorized_at:new Date().toISOString()}).eq("id",t);if(n)throw n},HQ=async(e,t,r,n)=>{const{error:a}=await le.from(e).update({auth_status:"RECHAZADO",authorized_by:ro(r),authorized_at:new Date().toISOString(),rejection_reason:n}).eq("id",t);if(a)throw a},VQ=async(e,t,r="date")=>{if(!Fr())return{pendingToday:0,pendingTotal:0,authorizedRange:0,rejectedRange:0};const n=Jn(t),a=new Date().toISOString().split("T")[0],{count:i}=await le.from(e).select("*",{count:"exact",head:!0}).in("terminal_code",n).eq("auth_status","PENDIENTE").eq(r,a),{count:s}=await le.from(e).select("*",{count:"exact",head:!0}).in("terminal_code",n).eq("auth_status","PENDIENTE"),l=new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],{count:c}=await le.from(e).select("*",{count:"exact",head:!0}).in("terminal_code",n).eq("auth_status","AUTORIZADO").gte(r,l),{count:u}=await le.from(e).select("*",{count:"exact",head:!0}).in("terminal_code",n).eq("auth_status","RECHAZADO").gte(r,l);return{pendingToday:i??0,pendingTotal:s??0,authorizedRange:c??0,rejectedRange:u??0}},KQ=(e,t)=>{const r=le.channel("attendance-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_no_marcaciones"},()=>e("attendance_no_marcaciones")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_no_marcaciones"},()=>t("attendance_no_marcaciones")).on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_sin_credenciales"},()=>e("attendance_sin_credenciales")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_sin_credenciales"},()=>t("attendance_sin_credenciales")).on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_cambios_dia"},()=>e("attendance_cambios_dia")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_cambios_dia"},()=>t("attendance_cambios_dia")).on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_autorizaciones"},()=>e("attendance_autorizaciones")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_autorizaciones"},()=>t("attendance_autorizaciones")).on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_vacaciones"},()=>e("attendance_vacaciones")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_vacaciones"},()=>t("attendance_vacaciones")).subscribe();return()=>{le.removeChannel(r)}},i2=(e,t)=>{const r=new Date(e+"T12:00:00"),n=new Date(t+"T12:00:00");let a=0;const i=new Date(r);for(;i<=n;){const s=i.getDay();s!==0&&s!==6&&a++,i.setDate(i.getDate()+1)}return a},s2=(e,t)=>{const r=new Date(e+"T12:00:00"),n=new Date(t+"T12:00:00"),a=Math.abs(n.getTime()-r.getTime());return Math.ceil(a/(1e3*60*60*24))+1},GQ=async(e,t,r)=>{const{count:n,error:a}=await le.from("staff").select("*",{count:"exact",head:!0}).eq("cargo",e).eq("terminal_code",t).eq("turno",r).eq("status","ACTIVO");if(a)throw a;return n??0},kR=async(e,t,r,n,a,i)=>{let s=le.from("attendance_vacaciones").select("*").eq("cargo",e).eq("terminal_code",t).eq("turno",r).in("auth_status",["PENDIENTE","AUTORIZADO"]).lte("start_date",a).gte("end_date",n);i&&(s=s.neq("rut",i));const{data:l,error:c}=await s;if(c)throw c;const u=await GQ(e,t,r),d=new Set((l==null?void 0:l.map(p=>p.rut))||[]).size,f=u-d-1;let h=0;if(l&&l.length>0){const p=new Date(n),v=new Date(a);for(const g of l){const x=new Date(g.start_date),b=new Date(g.end_date),m=new Date(Math.max(p.getTime(),x.getTime())),y=new Date(Math.min(v.getTime(),b.getTime())),_=Math.ceil((y.getTime()-m.getTime())/(1e3*60*60*24))+1;_>h&&(h=_)}}return{hasConflict:((l==null?void 0:l.length)??0)>0,conflictingVacations:(l||[]).map(p=>({nombre:p.nombre,cargo:p.cargo,turno:p.turno,start_date:p.start_date,end_date:p.end_date})),totalStaffCount:u,availableStaffCount:Math.max(0,f),overlappingDays:h}},XQ=async(e,t)=>{if(!Fr())return[];const r=Jn(e);let n=le.from("attendance_vacaciones").select("*").in("terminal_code",r).order("start_date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}t!=null&&t.date_from&&(n=n.gte("start_date",t.date_from)),t!=null&&t.date_to&&(n=n.lte("end_date",t.date_to));const{data:a,error:i}=await n;if(i)throw i;return a||[]},YQ=async(e,t)=>{const r=s2(e.start_date,e.end_date),n=i2(e.start_date,e.end_date),a=await kR(e.cargo,e.terminal_code,e.turno,e.start_date,e.end_date),i=a.hasConflict?`${a.conflictingVacations.length} persona(s) en misma posicin en vacaciones. Disponibles: ${a.availableStaffCount}/${a.totalStaffCount}`:null,{data:s,error:l}=await le.from("attendance_vacaciones").insert({rut:e.rut,nombre:e.nombre,cargo:e.cargo,terminal_code:e.terminal_code,turno:e.turno,start_date:e.start_date,end_date:e.end_date,return_date:e.return_date,calendar_days:r,business_days:n,has_conflict:a.hasConflict,conflict_authorized:e.conflict_authorized,conflict_details:i,created_by_supervisor:ro(t)}).select().single();if(l)throw on("Error al crear registro","No se pudo guardar la solicitud de vacaciones"),l;try{const c=a.hasConflict?`<strong style="color: #dc2626;">ADVERTENCIA:</strong> ${i}`:"Sin conflictos detectados";await Oh("Vacaciones",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.start_date,createdBy:t,details:{"Fecha Inicio":e.start_date,"Fecha Trmino":e.end_date,"Fecha Vuelta":e.return_date,"Das Calendario":r.toString(),"Das a Descontar":n.toString(),Conflictos:c}}),hn("Solicitud de vacaciones creada",`Vacaciones para ${e.nombre} (${n} das hbiles) registradas`,t)}catch{hn("Solicitud creada",`Vacaciones para ${e.nombre} registradas (correo no enviado)`,t)}return s},QQ=async(e,t)=>{const r={...t};t.start_date&&t.end_date&&(r.calendar_days=s2(t.start_date,t.end_date),r.business_days=i2(t.start_date,t.end_date));const{data:n,error:a}=await le.from("attendance_vacaciones").update(r).eq("id",e).select().single();if(a)throw a;return n},PR="isaac.avila@transdev.cl",bn={check:`<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="28" cy="28" r="26" fill="#dcfce7" stroke="#22c55e" stroke-width="3"/>
        <path d="M18 28L24 34L38 20" stroke="#16a34a" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,x:`<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="28" cy="28" r="26" fill="#fee2e2" stroke="#ef4444" stroke-width="3"/>
        <path d="M20 20L36 36M36 20L20 36" stroke="#dc2626" stroke-width="4" stroke-linecap="round"/>
    </svg>`,clock:`<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="28" cy="28" r="26" fill="#fef3c7" stroke="#f59e0b" stroke-width="3"/>
        <circle cx="28" cy="28" r="3" fill="#d97706"/>
        <path d="M28 16V28L36 33" stroke="#d97706" stroke-width="3" stroke-linecap="round"/>
    </svg>`,user:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="9" cy="5" r="3.5" stroke="#64748b" stroke-width="1.5"/>
        <path d="M2 16C2 12.686 5.13401 10 9 10C12.866 10 16 12.686 16 16" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,id:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="1.5" y="3.5" width="15" height="11" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <circle cx="6" cy="8" r="1.5" stroke="#64748b" stroke-width="1"/>
        <path d="M4 12C4 10.8954 4.89543 10 6 10C7.10457 10 8 10.8954 8 12" stroke="#64748b" stroke-width="1"/>
        <path d="M10.5 7.5H14.5M10.5 10H13" stroke="#64748b" stroke-width="1.2" stroke-linecap="round"/>
    </svg>`,building:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M2 16V3.5C2 3.22386 2.22386 3 2.5 3H9.5C9.77614 3 10 3.22386 10 3.5V16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M10 7H14.5C14.7761 7 15 7.22386 15 7.5V16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M5 6H7M5 9H7M5 12H7M12 10H13M12 13H13" stroke="#64748b" stroke-width="1.2" stroke-linecap="round"/>
        <path d="M1 16H17" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,calendar:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="2" y="3.5" width="14" height="12" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <path d="M2 7H16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M5.5 1.5V4.5M12.5 1.5V4.5" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`},RR=e=>new Date(e+"T12:00:00").toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Ra=(e,t,r,n=!1)=>`
    <tr>
        <td style="padding: 12px 16px; border-bottom: 1px solid #e2e8f0; width: 40%; vertical-align: middle;">
            <table role="presentation" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="padding-right: 12px; vertical-align: middle;">${e}</td>
                    <td style="font-size: 11px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">${t}</td>
                </tr>
            </table>
        </td>
        <td style="padding: 12px 16px; border-bottom: 1px solid #e2e8f0; font-size: 14px; font-weight: ${n?"700":"500"}; color: ${n?"#0f172a":"#334155"}; text-align: right;">${r}</td>
    </tr>
`,IR=async(e,t,r,n,a,i,s)=>{const l=e==="AUTORIZADO",c=l?"#16a34a":"#dc2626",u=l?"#f0fdf4":"#fef2f2",d=l?"#bbf7d0":"#fecaca",f=l?bn.check:bn.x,h=`${t} ${e} - ${n}`,p=`
        <!-- Status Banner -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
            <tr>
                <td style="background: ${u}; border: 1px solid ${d}; border-radius: 12px; padding: 24px; text-align: center;">
                    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                        <tr>
                            <td align="center" style="padding-bottom: 8px;">
                                ${f}
                            </td>
                        </tr>
                        <tr>
                            <td align="center">
                                <span style="font-size: 11px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 4px;">Estado del Registro</span>
                                <span style="font-size: 20px; font-weight: 800; color: ${c}; letter-spacing: -0.5px;">${e}</span>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
        
        <!-- Data Table -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate;">
            ${Ra(bn.id,"Subseccin",t,!0)}
            ${Ra(bn.id,"RUT",Qt(r))}
            ${Ra(bn.user,"Trabajador",n)}
            ${Ra(bn.building,"Terminal",Ve(a))}
            ${Ra(bn.calendar,"Fecha",RR(i))}
            ${s?Ra(bn.id,"Motivo",s,!0):""}
        </table>
    `.trim(),v=await a2("email_notifications"),g=v!=null&&v.to&&v.to.length>0?v.to:[PR],x=(v==null?void 0:v.cc)||[];try{await Ui.sendEmail({audience:"manual",manualRecipients:g,cc:x,subject:h,body:p})}catch(b){console.error("Error sending authorization email:",b)}},Oh=async(e,t)=>{const r=t.details?Object.entries(t.details).filter(([c,u])=>u&&u.trim()).map(([c,u])=>Ra(bn.id,c,u)).join(""):"",n=`Nuevo Registro: ${e}`,a=`
        <!-- Worker Name Header -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
            <tr>
                <td align="center">
                    <h2 style="margin: 0; font-size: 24px; font-weight: 800; color: #0f172a;">${t.nombre}</h2>
                </td>
            </tr>
        </table>
        
        <!-- Status Banner -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
            <tr>
                <td style="background: #fffbeb; border: 1px solid #fde68a; border-radius: 12px; padding: 24px; text-align: center;">
                    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                        <tr>
                            <td align="center" style="padding-bottom: 8px;">
                                ${bn.clock}
                            </td>
                        </tr>
                        <tr>
                            <td align="center">
                                <span style="font-size: 11px; font-weight: 700; color: #92400e; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 4px;">Estado del Registro</span>
                                <span style="font-size: 18px; font-weight: 800; color: #b45309; letter-spacing: -0.5px;">PENDIENTE DE AUTORIZACIN</span>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
        
        <!-- Subsection Badge -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
            <tr>
                <td align="center">
                    <span style="display: inline-block; padding: 8px 20px; background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 100px; color: #2563eb; font-size: 12px; font-weight: 700; letter-spacing: 0.5px; text-transform: uppercase;">${e}</span>
                </td>
            </tr>
        </table>
        
        <!-- Data Table -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate;">
            ${Ra(bn.id,"RUT",Qt(t.rut))}
            ${Ra(bn.user,"Trabajador",t.nombre,!0)}
            ${Ra(bn.building,"Terminal",Ve(t.terminal))}
            ${Ra(bn.calendar,"Fecha",RR(t.date))}
            ${r}
        </table>
        
        <!-- Registered By -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-top: 24px;">
            <tr>
                <td style="padding: 16px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px;">
                    <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
                        <tr>
                            <td width="40" style="padding-right: 12px; vertical-align: middle;">
                                <div style="width: 40px; height: 40px; background: #2563eb; border-radius: 50%; text-align: center; line-height: 40px; color: white; font-weight: 700; font-size: 16px;">${t.createdBy.charAt(0)}</div>
                            </td>
                            <td style="vertical-align: middle;">
                                <span style="display: block; font-size: 10px; color: #64748b; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 2px;">Registrado por</span>
                                <span style="display: block; font-size: 14px; font-weight: 700; color: #0f172a;">${t.createdBy}</span>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    `.trim(),i=await a2("email_notifications"),s=i!=null&&i.to&&i.to.length>0?i.to:[PR],l=(i==null?void 0:i.cc)||[];try{await Ui.sendEmail({audience:"manual",manualRecipients:s,cc:l,subject:n,body:a})}catch(c){console.error("Error sending record created email:",c)}},kh=[{value:"todos",label:"Todos"},{value:"PENDIENTE",label:"Pendiente"},{value:"AUTORIZADO",label:"Autorizado"},{value:"RECHAZADO",label:"Rechazado"}],DR=[{value:"ENTRADA",label:"Llegada Tarda"},{value:"SALIDA",label:"Retiro Anticipado"}],MR={"no-marcaciones":"No Marcaciones","sin-credenciales":"Sin Credenciales","cambios-dia":"Cambios de Da",autorizaciones:"Autorizaciones",vacaciones:"Vacaciones"},wt={all:["attendance"],noMarcaciones:(e,t)=>[...wt.all,"no-marcaciones",e,t],sinCredenciales:(e,t)=>[...wt.all,"sin-credenciales",e,t],cambiosDia:(e,t)=>[...wt.all,"cambios-dia",e,t],autorizaciones:(e,t)=>[...wt.all,"autorizaciones",e,t],vacaciones:(e,t)=>[...wt.all,"vacaciones",e,t],kpis:(e,t)=>[...wt.all,"kpis",e,t]},JQ=(e,t)=>Ge({queryKey:wt.noMarcaciones(e,t),queryFn:()=>kQ(e,t)}),ZQ=(e,t)=>Ge({queryKey:wt.sinCredenciales(e,t),queryFn:()=>IQ(e,t)}),eJ=(e,t)=>Ge({queryKey:wt.cambiosDia(e,t),queryFn:()=>LQ(e,t)}),tJ=(e,t)=>Ge({queryKey:wt.autorizaciones(e,t),queryFn:()=>UQ(e,t)}),rJ=(e,t)=>Ge({queryKey:wt.vacaciones(e,t),queryFn:()=>XQ(e,t)}),o2={"no-marcaciones":"attendance_no_marcaciones","sin-credenciales":"attendance_sin_credenciales","cambios-dia":"attendance_cambios_dia",autorizaciones:"attendance_autorizaciones",vacaciones:"attendance_vacaciones"},nJ={"no-marcaciones":"date","sin-credenciales":"date","cambios-dia":"date",autorizaciones:"authorization_date",vacaciones:"start_date"},Ph=(e,t)=>Ge({queryKey:wt.kpis(e,t),queryFn:()=>VQ(o2[e],t,nJ[e])}),aJ=()=>{const e=$e();return Be({mutationFn:({values:t,createdBy:r})=>PQ(t,r),onSuccess:()=>e.invalidateQueries({queryKey:wt.all})})},iJ=()=>{const e=$e();return Be({mutationFn:({values:t,createdBy:r})=>DQ(t,r),onSuccess:()=>e.invalidateQueries({queryKey:wt.all})})},sJ=()=>{const e=$e();return Be({mutationFn:({values:t,createdBy:r})=>$Q(t,r),onSuccess:()=>e.invalidateQueries({queryKey:wt.all})})},oJ=()=>{const e=$e();return Be({mutationFn:({values:t,createdBy:r})=>zQ(t,r),onSuccess:()=>e.invalidateQueries({queryKey:wt.all})})},lJ=()=>{const e=$e();return Be({mutationFn:({values:t,createdBy:r})=>YQ(t,r),onSuccess:()=>e.invalidateQueries({queryKey:wt.all})})},cJ=()=>{const e=$e();return Be({mutationFn:({id:t,values:r})=>RQ(t,r),onSuccess:()=>e.invalidateQueries({queryKey:wt.all})})},uJ=()=>{const e=$e();return Be({mutationFn:({id:t,values:r})=>MQ(t,r),onSuccess:()=>e.invalidateQueries({queryKey:wt.all})})},dJ=()=>{const e=$e();return Be({mutationFn:({id:t,values:r})=>FQ(t,r),onSuccess:()=>e.invalidateQueries({queryKey:wt.all})})},fJ=()=>{const e=$e();return Be({mutationFn:({id:t,values:r})=>qQ(t,r),onSuccess:()=>e.invalidateQueries({queryKey:wt.all})})},hJ=()=>{const e=$e();return Be({mutationFn:({id:t,values:r})=>QQ(t,r),onSuccess:()=>e.invalidateQueries({queryKey:wt.all})})},Rh=()=>{const e=$e();return Be({mutationFn:async({subsection:t,id:r,authorizedBy:n,rut:a,nombre:i,terminal:s,date:l})=>{await WQ(o2[t],r,n),await IR("AUTORIZADO",MR[t],a,i,s,l)},onSuccess:()=>e.invalidateQueries({queryKey:wt.all})})},Ih=()=>{const e=$e();return Be({mutationFn:async({subsection:t,id:r,authorizedBy:n,reason:a,rut:i,nombre:s,terminal:l,date:c})=>{await HQ(o2[t],r,n,a),await IR("RECHAZADO",MR[t],i,s,l,c,a)},onSuccess:()=>e.invalidateQueries({queryKey:wt.all})})},Dh=()=>{const e=$e();T.useEffect(()=>{const t=KQ(()=>e.invalidateQueries({queryKey:wt.all}),()=>e.invalidateQueries({queryKey:wt.all}));return()=>{t()}},[e])},pJ=()=>{const e=Le(w=>w.context),t=Le(w=>w.setContext),r=ht(w=>w.session),n=(r==null?void 0:r.supervisorName)??"",a=Ah(n),[i,s]=T.useState({auth_status:"todos"}),[l,c]=T.useState({type:"none"}),u=JQ(e,i),d=Ph("no-marcaciones",e),f=aJ(),h=cJ(),p=Rh(),v=Ih();Dh();const g=[{key:"rut",header:"RUT",value:w=>Qt(w.rut)},{key:"nombre",header:"Nombre",value:w=>w.nombre},{key:"area",header:"rea",value:w=>w.area},{key:"cargo",header:"Cargo",value:w=>w.cargo},{key:"jefe_terminal",header:"Jefe Terminal",value:w=>w.jefe_terminal},{key:"terminal",header:"Terminal",value:w=>Ve(w.terminal_code)},{key:"cabezal",header:"Cabezal",value:w=>w.cabezal},{key:"incident_state",header:"Estado",value:w=>w.incident_state},{key:"date",header:"Fecha",value:w=>w.date},{key:"auth_status",header:"Autorizacin",value:w=>w.auth_status}],x=async w=>{await f.mutateAsync({values:w,createdBy:n}),c({type:"none"})},b=async w=>{l.type==="edit"&&(await h.mutateAsync({id:l.record.id,values:w}),c({type:"none"}))},m=async()=>{if(l.type!=="authorize")return;const w=l.record;await p.mutateAsync({subsection:"no-marcaciones",id:w.id,authorizedBy:n,rut:w.rut,nombre:w.nombre,terminal:w.terminal_code,date:w.date}),c({type:"none"})},y=async w=>{if(l.type!=="reject"||!w)return;const j=l.record;await v.mutateAsync({subsection:"no-marcaciones",id:j.id,authorizedBy:n,reason:w,rut:j.rut,nombre:j.nombre,terminal:j.terminal_code,date:j.date}),c({type:"none"})},_=w=>{switch(w){case"AUTORIZADO":return o.jsx("span",{className:"badge badge-success",children:w});case"RECHAZADO":return o.jsx("span",{className:"badge badge-danger",children:w});default:return o.jsx("span",{className:"badge badge-warning",children:w})}};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ct,{title:"No Marcaciones",description:"Registros de no marcacin de personal",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[o.jsx(H,{name:"clipboard",size:18})," Nuevo Registro"]}),o.jsx(hr,{onExportView:()=>Qe({filename:"no_marcaciones",sheetName:"Datos",rows:u.data||[],columns:g}),onExportAll:()=>Qe({filename:"no_marcaciones_all",sheetName:"Datos",rows:u.data||[],columns:g})})]})}),o.jsx(Ch,{data:d.data,isLoading:d.isLoading}),o.jsxs(Pn,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:i.auth_status,onChange:w=>s(j=>({...j,auth_status:w.target.value})),children:kh.map(w=>o.jsx("option",{value:w.value,children:w.label},w.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:w=>s(j=>({...j,search:w.target.value}))})]})]}),u.isLoading&&o.jsx(zt,{label:"Cargando registros..."}),u.isError&&o.jsx(Er,{onRetry:()=>u.refetch()}),!u.isLoading&&!u.isError&&o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{className:"table-header-cell",children:"RUT"}),o.jsx("th",{className:"table-header-cell",children:"Nombre"}),o.jsx("th",{className:"table-header-cell",children:"Terminal"}),o.jsx("th",{className:"table-header-cell",children:"Fecha"}),o.jsx("th",{className:"table-header-cell",children:"Estado"}),o.jsx("th",{className:"table-header-cell",children:"Autorizacin"}),o.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:(u.data||[]).map(w=>o.jsxs("tr",{className:"table-row",children:[o.jsx("td",{className:"table-cell font-mono text-sm",children:Qt(w.rut)}),o.jsx("td",{className:"table-cell font-medium",children:w.nombre}),o.jsx("td",{className:"table-cell",children:Ve(w.terminal_code)}),o.jsx("td",{className:"table-cell",children:w.date}),o.jsx("td",{className:"table-cell",children:w.incident_state||"-"}),o.jsx("td",{className:"table-cell",children:_(w.auth_status)}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[w.auth_status==="PENDIENTE"&&o.jsx("button",{onClick:()=>c({type:"edit",record:w}),className:"btn btn-ghost btn-icon",title:"Editar",children:o.jsx(H,{name:"clipboard",size:16})}),a&&w.auth_status==="PENDIENTE"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>c({type:"authorize",record:w}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:o.jsx(H,{name:"check-circle",size:16})}),o.jsx("button",{onClick:()=>c({type:"reject",record:w}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:o.jsx(H,{name:"x",size:16})})]})]})})]},w.id))})]})}),(l.type==="create"||l.type==="edit")&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),o.jsxs("div",{className:"relative w-full max-w-3xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-xl font-bold",children:l.type==="create"?"Nuevo Registro":"Editar Registro"}),o.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:o.jsx(H,{name:"x",size:24})})]}),o.jsx(CQ,{initialData:l.type==="edit"?{...l.record,area:l.record.area??"Logstica",cargo:l.record.cargo??"",jefe_terminal:l.record.jefe_terminal??"",cabezal:l.record.cabezal??"",incident_state:l.record.incident_state??"",schedule_in_out:l.record.schedule_in_out??"",time_range:l.record.time_range??"",observations:l.record.observations??"",informed_by:l.record.informed_by??n}:void 0,supervisorName:n,onSubmit:l.type==="create"?x:b,onCancel:()=>c({type:"none"}),isLoading:f.isPending||h.isPending})]})]}),l.type==="authorize"&&o.jsx(si,{mode:"authorize",itemName:l.record.nombre,onConfirm:m,onCancel:()=>c({type:"none"}),isLoading:p.isPending}),l.type==="reject"&&o.jsx(si,{mode:"reject",itemName:l.record.nombre,onConfirm:y,onCancel:()=>c({type:"none"}),isLoading:v.isPending})]})},mJ=({initialData:e,supervisorName:t,onSubmit:r,onCancel:n,isLoading:a})=>{const[i,s]=T.useState({rut:"",nombre:"",terminal_code:"EL_ROBLE",cabezal:"",date:new Date().toISOString().split("T")[0],start_time:"",end_time:"",cargo:"",supervisor_autoriza:t,area:"Logstica",responsable:"",observacion:"",...e}),l=u=>{if(u){const[d,f]=(u.horario||"").split("-"),h=(d==null?void 0:d.trim())||"",p=(f==null?void 0:f.trim())||"";s(v=>({...v,nombre:u.nombre,cargo:u.cargo,terminal_code:u.terminal_code,start_time:h,end_time:p}))}},c=u=>{u.preventDefault(),r(i)};return o.jsxs("form",{onSubmit:c,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(Hg,{value:i.rut,onChange:u=>s(d=>({...d,rut:u})),onStaffFound:l,disabled:!!(e!=null&&e.rut)}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nombre"}),o.jsx("input",{type:"text",className:"input",value:i.nombre,onChange:u=>s(d=>({...d,nombre:u.target.value})),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsx("select",{className:"input",value:i.terminal_code,onChange:u=>s(d=>({...d,terminal_code:u.target.value})),required:!0,children:Cn.map(u=>o.jsx("option",{value:u.value,children:u.label},u.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cabezal"}),o.jsx("input",{type:"text",className:"input",value:i.cabezal,onChange:u=>s(d=>({...d,cabezal:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha"}),o.jsx("input",{type:"date",className:"input",value:i.date,onChange:u=>s(d=>({...d,date:u.target.value})),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Hora Inicio"}),o.jsx("input",{type:"time",className:"input",value:i.start_time,onChange:u=>s(d=>({...d,start_time:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Hora Fin"}),o.jsx("input",{type:"time",className:"input",value:i.end_time,onChange:u=>s(d=>({...d,end_time:u.target.value}))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cargo"}),o.jsx("input",{type:"text",className:"input",value:i.cargo,onChange:u=>s(d=>({...d,cargo:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Supervisor Autoriza"}),o.jsx("input",{type:"text",className:"input",value:i.supervisor_autoriza,onChange:u=>s(d=>({...d,supervisor_autoriza:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"rea"}),o.jsx("input",{type:"text",className:"input",value:i.area,onChange:u=>s(d=>({...d,area:u.target.value}))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Responsable"}),o.jsx("input",{type:"text",className:"input",value:i.responsable,onChange:u=>s(d=>({...d,responsable:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Observacin"}),o.jsx("textarea",{className:"input min-h-[80px]",value:i.observacion,onChange:u=>s(d=>({...d,observacion:u.target.value}))})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[o.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",disabled:a,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?"Guardando...":e?"Guardar Cambios":"Crear Registro"})]})]})},gJ=()=>{const e=Le(w=>w.context),t=Le(w=>w.setContext),r=ht(w=>w.session),n=(r==null?void 0:r.supervisorName)??"",a=Ah(n),[i,s]=T.useState({auth_status:"todos"}),[l,c]=T.useState({type:"none"}),u=ZQ(e,i),d=Ph("sin-credenciales",e),f=iJ(),h=uJ(),p=Rh(),v=Ih();Dh();const g=[{key:"rut",header:"RUT",value:w=>Qt(w.rut)},{key:"nombre",header:"Nombre",value:w=>w.nombre},{key:"terminal",header:"Terminal",value:w=>Ve(w.terminal_code)},{key:"cabezal",header:"Cabezal",value:w=>w.cabezal},{key:"date",header:"Fecha",value:w=>w.date},{key:"start_time",header:"Hora Inicio",value:w=>w.start_time},{key:"end_time",header:"Hora Fin",value:w=>w.end_time},{key:"cargo",header:"Cargo",value:w=>w.cargo},{key:"supervisor_autoriza",header:"Supervisor Autoriza",value:w=>w.supervisor_autoriza},{key:"auth_status",header:"Autorizacin",value:w=>w.auth_status}],x=async w=>{await f.mutateAsync({values:w,createdBy:n}),c({type:"none"})},b=async w=>{l.type==="edit"&&(await h.mutateAsync({id:l.record.id,values:w}),c({type:"none"}))},m=async()=>{if(l.type!=="authorize")return;const w=l.record;await p.mutateAsync({subsection:"sin-credenciales",id:w.id,authorizedBy:n,rut:w.rut,nombre:w.nombre,terminal:w.terminal_code,date:w.date}),c({type:"none"})},y=async w=>{if(l.type!=="reject"||!w)return;const j=l.record;await v.mutateAsync({subsection:"sin-credenciales",id:j.id,authorizedBy:n,reason:w,rut:j.rut,nombre:j.nombre,terminal:j.terminal_code,date:j.date}),c({type:"none"})},_=w=>{switch(w){case"AUTORIZADO":return o.jsx("span",{className:"badge badge-success",children:w});case"RECHAZADO":return o.jsx("span",{className:"badge badge-danger",children:w});default:return o.jsx("span",{className:"badge badge-warning",children:w})}};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ct,{title:"Sin Credenciales",description:"Registros de personal sin credencial",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[o.jsx(H,{name:"key",size:18})," Nuevo Registro"]}),o.jsx(hr,{onExportView:()=>Qe({filename:"sin_credenciales",sheetName:"Datos",rows:u.data||[],columns:g}),onExportAll:()=>Qe({filename:"sin_credenciales_all",sheetName:"Datos",rows:u.data||[],columns:g})})]})}),o.jsx(Ch,{data:d.data,isLoading:d.isLoading}),o.jsxs(Pn,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:i.auth_status,onChange:w=>s(j=>({...j,auth_status:w.target.value})),children:kh.map(w=>o.jsx("option",{value:w.value,children:w.label},w.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:w=>s(j=>({...j,search:w.target.value}))})]})]}),u.isLoading&&o.jsx(zt,{label:"Cargando registros..."}),u.isError&&o.jsx(Er,{onRetry:()=>u.refetch()}),!u.isLoading&&!u.isError&&o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{className:"table-header-cell",children:"RUT"}),o.jsx("th",{className:"table-header-cell",children:"Nombre"}),o.jsx("th",{className:"table-header-cell",children:"Terminal"}),o.jsx("th",{className:"table-header-cell",children:"Cabezal"}),o.jsx("th",{className:"table-header-cell",children:"Fecha"}),o.jsx("th",{className:"table-header-cell",children:"Hora"}),o.jsx("th",{className:"table-header-cell",children:"Autorizacin"}),o.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:(u.data||[]).map(w=>o.jsxs("tr",{className:"table-row",children:[o.jsx("td",{className:"table-cell font-mono text-sm",children:Qt(w.rut)}),o.jsx("td",{className:"table-cell font-medium",children:w.nombre}),o.jsx("td",{className:"table-cell",children:Ve(w.terminal_code)}),o.jsx("td",{className:"table-cell",children:w.cabezal||"-"}),o.jsx("td",{className:"table-cell",children:w.date}),o.jsxs("td",{className:"table-cell",children:[w.start_time," - ",w.end_time]}),o.jsx("td",{className:"table-cell",children:_(w.auth_status)}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[w.auth_status==="PENDIENTE"&&o.jsx("button",{onClick:()=>c({type:"edit",record:w}),className:"btn btn-ghost btn-icon",title:"Editar",children:o.jsx(H,{name:"clipboard",size:16})}),a&&w.auth_status==="PENDIENTE"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>c({type:"authorize",record:w}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:o.jsx(H,{name:"check-circle",size:16})}),o.jsx("button",{onClick:()=>c({type:"reject",record:w}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:o.jsx(H,{name:"x",size:16})})]})]})})]},w.id))})]})}),(l.type==="create"||l.type==="edit")&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),o.jsxs("div",{className:"relative w-full max-w-3xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-xl font-bold",children:l.type==="create"?"Nuevo Registro":"Editar Registro"}),o.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:o.jsx(H,{name:"x",size:24})})]}),o.jsx(mJ,{initialData:l.type==="edit"?{...l.record,cabezal:l.record.cabezal??"",start_time:l.record.start_time??"",end_time:l.record.end_time??"",cargo:l.record.cargo??"",supervisor_autoriza:l.record.supervisor_autoriza??"",area:l.record.area??"",responsable:l.record.responsable??"",observacion:l.record.observacion??""}:void 0,supervisorName:n,onSubmit:l.type==="create"?x:b,onCancel:()=>c({type:"none"}),isLoading:f.isPending||h.isPending})]})]}),l.type==="authorize"&&o.jsx(si,{mode:"authorize",itemName:l.record.nombre,onConfirm:m,onCancel:()=>c({type:"none"}),isLoading:p.isPending}),l.type==="reject"&&o.jsx(si,{mode:"reject",itemName:l.record.nombre,onConfirm:y,onCancel:()=>c({type:"none"}),isLoading:v.isPending})]})},vJ=({initialData:e,onSubmit:t,onCancel:r,isLoading:n})=>{const a=T.useRef(null),[i,s]=T.useState({rut:"",nombre:"",terminal_code:"EL_ROBLE",cabezal:"",date:new Date().toISOString().split("T")[0],prog_start:"",prog_end:"",reprogram_start:"",reprogram_end:"",day_off_date:"",day_off_start:"",day_off_end:"",day_on_date:"",day_on_start:"",day_on_end:"",document:null,...e}),l=u=>{if(u){const[d,f]=(u.horario||"").split("-"),h=(d==null?void 0:d.trim())||"",p=(f==null?void 0:f.trim())||"";s(v=>({...v,nombre:u.nombre,terminal_code:u.terminal_code,prog_start:h,prog_end:p,day_off_start:h,day_off_end:p,day_on_start:h,day_on_end:p}))}},c=u=>{u.preventDefault(),t(i)};return o.jsxs("form",{onSubmit:c,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(Hg,{value:i.rut,onChange:u=>s(d=>({...d,rut:u})),onStaffFound:l,disabled:!!(e!=null&&e.rut)}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nombre"}),o.jsx("input",{type:"text",className:"input",value:i.nombre,onChange:u=>s(d=>({...d,nombre:u.target.value})),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsx("select",{className:"input",value:i.terminal_code,onChange:u=>s(d=>({...d,terminal_code:u.target.value})),required:!0,children:Cn.map(u=>o.jsx("option",{value:u.value,children:u.label},u.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cabezal"}),o.jsx("input",{type:"text",className:"input",value:i.cabezal,onChange:u=>s(d=>({...d,cabezal:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha Registro"}),o.jsx("input",{type:"date",className:"input",value:i.date,onChange:u=>s(d=>({...d,date:u.target.value})),required:!0})]})]}),o.jsxs("div",{className:"card p-4 bg-brand-50 border-brand-200",children:[o.jsx("h4",{className:"font-semibold text-brand-800 mb-3",children:"Jornada Programada (desde Personal)"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Entrada"}),o.jsx("input",{type:"text",className:"input bg-brand-100 font-medium",value:i.prog_start,onChange:u=>s(d=>({...d,prog_start:u.target.value})),placeholder:"--:--",readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Salida"}),o.jsx("input",{type:"text",className:"input bg-brand-100 font-medium",value:i.prog_end,onChange:u=>s(d=>({...d,prog_end:u.target.value})),placeholder:"--:--",readOnly:!0})]})]})]}),o.jsxs("div",{className:"card p-4 bg-slate-50",children:[o.jsx("h4",{className:"font-semibold text-slate-700 mb-3",children:"Da Programado (No Trabaja)"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha"}),o.jsx("input",{type:"date",className:"input",value:i.day_off_date,onChange:u=>s(d=>({...d,day_off_date:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Inicio"}),o.jsx("input",{type:"text",className:"input font-medium",value:i.day_off_start,onChange:u=>s(d=>({...d,day_off_start:u.target.value})),placeholder:"--:--"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Trmino"}),o.jsx("input",{type:"text",className:"input font-medium",value:i.day_off_end,onChange:u=>s(d=>({...d,day_off_end:u.target.value})),placeholder:"--:--"})]})]})]}),o.jsxs("div",{className:"card p-4 bg-success-50 border-success-200",children:[o.jsx("h4",{className:"font-semibold text-success-800 mb-3",children:"Da ReProgramado (Trabaja)"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha"}),o.jsx("input",{type:"date",className:"input",value:i.day_on_date,onChange:u=>s(d=>({...d,day_on_date:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Inicio"}),o.jsx("input",{type:"text",className:"input font-medium",value:i.day_on_start,onChange:u=>s(d=>({...d,day_on_start:u.target.value})),placeholder:"--:--"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Trmino"}),o.jsx("input",{type:"text",className:"input font-medium",value:i.day_on_end,onChange:u=>s(d=>({...d,day_on_end:u.target.value})),placeholder:"--:--"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Documento Adjunto (opcional)"}),o.jsxs("div",{className:"border-2 border-dashed rounded-xl p-4 text-center",children:[o.jsx("input",{ref:a,type:"file",accept:".pdf,.jpg,.jpeg,.png",className:"hidden",onChange:u=>s(d=>{var f;return{...d,document:((f=u.target.files)==null?void 0:f[0])||null}})}),i.document?o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsx(H,{name:"check-circle",size:20,className:"text-success-600"}),o.jsx("span",{className:"text-sm",children:i.document.name}),o.jsx("button",{type:"button",onClick:()=>{s(u=>({...u,document:null})),a.current&&(a.current.value="")},className:"text-danger-600",children:o.jsx(H,{name:"x",size:18})})]}):o.jsxs("button",{type:"button",onClick:()=>{var u;return(u=a.current)==null?void 0:u.click()},className:"btn btn-secondary",children:[o.jsx(H,{name:"image",size:18})," Seleccionar Archivo"]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Guardando...":e?"Guardar Cambios":"Crear Registro"})]})]})},xJ=()=>{const e=Le(j=>j.context),t=Le(j=>j.setContext),r=ht(j=>j.session),n=(r==null?void 0:r.supervisorName)??"",a=Ah(n),[i,s]=T.useState({auth_status:"todos"}),[l,c]=T.useState({type:"none"}),u=eJ(e,i),d=Ph("cambios-dia",e),f=sJ(),h=dJ(),p=Rh(),v=Ih();Dh();const g=[{key:"rut",header:"RUT",value:j=>Qt(j.rut)},{key:"nombre",header:"Nombre",value:j=>j.nombre},{key:"terminal",header:"Terminal",value:j=>Ve(j.terminal_code)},{key:"cabezal",header:"Cabezal",value:j=>j.cabezal},{key:"date",header:"Fecha",value:j=>j.date},{key:"prog_start",header:"Prog. Inicio",value:j=>j.prog_start},{key:"prog_end",header:"Prog. Fin",value:j=>j.prog_end},{key:"reprogram_start",header:"Reprog. Inicio",value:j=>j.reprogram_start},{key:"reprogram_end",header:"Reprog. Fin",value:j=>j.reprogram_end},{key:"auth_status",header:"Autorizacin",value:j=>j.auth_status}],x=async j=>{await f.mutateAsync({values:j,createdBy:n}),c({type:"none"})},b=async j=>{l.type==="edit"&&(await h.mutateAsync({id:l.record.id,values:j}),c({type:"none"}))},m=async()=>{if(l.type!=="authorize")return;const j=l.record;await p.mutateAsync({subsection:"cambios-dia",id:j.id,authorizedBy:n,rut:j.rut,nombre:j.nombre,terminal:j.terminal_code,date:j.date}),c({type:"none"})},y=async j=>{if(l.type!=="reject"||!j)return;const S=l.record;await v.mutateAsync({subsection:"cambios-dia",id:S.id,authorizedBy:n,reason:j,rut:S.rut,nombre:S.nombre,terminal:S.terminal_code,date:S.date}),c({type:"none"})},_=async j=>{try{const S=await BQ(j);window.open(S,"_blank")}catch(S){console.error("Error getting document URL:",S)}},w=j=>{switch(j){case"AUTORIZADO":return o.jsx("span",{className:"badge badge-success",children:j});case"RECHAZADO":return o.jsx("span",{className:"badge badge-danger",children:j});default:return o.jsx("span",{className:"badge badge-warning",children:j})}};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ct,{title:"Cambios de Da",description:"Reprogramaciones de jornada laboral",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[o.jsx(H,{name:"calendar",size:18})," Nuevo Registro"]}),o.jsx(hr,{onExportView:()=>Qe({filename:"cambios_dia",sheetName:"Datos",rows:u.data||[],columns:g}),onExportAll:()=>Qe({filename:"cambios_dia_all",sheetName:"Datos",rows:u.data||[],columns:g})})]})}),o.jsx(Ch,{data:d.data,isLoading:d.isLoading}),o.jsxs(Pn,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:i.auth_status,onChange:j=>s(S=>({...S,auth_status:j.target.value})),children:kh.map(j=>o.jsx("option",{value:j.value,children:j.label},j.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:j=>s(S=>({...S,search:j.target.value}))})]})]}),u.isLoading&&o.jsx(zt,{label:"Cargando registros..."}),u.isError&&o.jsx(Er,{onRetry:()=>u.refetch()}),!u.isLoading&&!u.isError&&o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{className:"table-header-cell",children:"RUT"}),o.jsx("th",{className:"table-header-cell",children:"Nombre"}),o.jsx("th",{className:"table-header-cell",children:"Terminal"}),o.jsx("th",{className:"table-header-cell",children:"Fecha"}),o.jsx("th",{className:"table-header-cell",children:"Jornada Prog."}),o.jsx("th",{className:"table-header-cell",children:"Jornada Reprog."}),o.jsx("th",{className:"table-header-cell",children:"Doc"}),o.jsx("th",{className:"table-header-cell",children:"Autorizacin"}),o.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:(u.data||[]).map(j=>o.jsxs("tr",{className:"table-row",children:[o.jsx("td",{className:"table-cell font-mono text-sm",children:Qt(j.rut)}),o.jsx("td",{className:"table-cell font-medium",children:j.nombre}),o.jsx("td",{className:"table-cell",children:Ve(j.terminal_code)}),o.jsx("td",{className:"table-cell",children:j.date}),o.jsxs("td",{className:"table-cell text-xs",children:[j.prog_start," - ",j.prog_end]}),o.jsxs("td",{className:"table-cell text-xs",children:[j.reprogram_start," - ",j.reprogram_end]}),o.jsx("td",{className:"table-cell",children:j.document_path?o.jsx("button",{onClick:()=>_(j.document_path),className:"text-brand-600 hover:underline",children:o.jsx(H,{name:"image",size:16})}):"-"}),o.jsx("td",{className:"table-cell",children:w(j.auth_status)}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[j.auth_status==="PENDIENTE"&&o.jsx("button",{onClick:()=>c({type:"edit",record:j}),className:"btn btn-ghost btn-icon",title:"Editar",children:o.jsx(H,{name:"clipboard",size:16})}),a&&j.auth_status==="PENDIENTE"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>c({type:"authorize",record:j}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:o.jsx(H,{name:"check-circle",size:16})}),o.jsx("button",{onClick:()=>c({type:"reject",record:j}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:o.jsx(H,{name:"x",size:16})})]})]})})]},j.id))})]})}),(l.type==="create"||l.type==="edit")&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),o.jsxs("div",{className:"relative w-full max-w-4xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-xl font-bold",children:l.type==="create"?"Nuevo Registro":"Editar Registro"}),o.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:o.jsx(H,{name:"x",size:24})})]}),o.jsx(vJ,{initialData:l.type==="edit"?{...l.record,cabezal:l.record.cabezal??"",prog_start:l.record.prog_start??"",prog_end:l.record.prog_end??"",reprogram_start:l.record.reprogram_start??"",reprogram_end:l.record.reprogram_end??"",day_off_date:l.record.day_off_date??"",day_off_start:l.record.day_off_start??"",day_off_end:l.record.day_off_end??"",day_on_date:l.record.day_on_date??"",day_on_start:l.record.day_on_start??"",day_on_end:l.record.day_on_end??"",document:null}:void 0,onSubmit:l.type==="create"?x:b,onCancel:()=>c({type:"none"}),isLoading:f.isPending||h.isPending})]})]}),l.type==="authorize"&&o.jsx(si,{mode:"authorize",itemName:l.record.nombre,onConfirm:m,onCancel:()=>c({type:"none"}),isLoading:p.isPending}),l.type==="reject"&&o.jsx(si,{mode:"reject",itemName:l.record.nombre,onConfirm:y,onCancel:()=>c({type:"none"}),isLoading:v.isPending})]})},yJ=({initialData:e,onSubmit:t,onCancel:r,isLoading:n})=>{const[a,i]=T.useState({rut:"",nombre:"",cargo:"",terminal_code:"EL_ROBLE",turno:"",horario:"",authorization_date:new Date().toISOString().split("T")[0],entry_or_exit:"ENTRADA",motivo:"",...e}),s=c=>{c&&i(u=>({...u,nombre:c.nombre,cargo:c.cargo,terminal_code:c.terminal_code,turno:c.turno,horario:c.horario}))},l=c=>{c.preventDefault(),t(a)};return o.jsxs("form",{onSubmit:l,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(Hg,{value:a.rut,onChange:c=>i(u=>({...u,rut:c})),onStaffFound:s,disabled:!!(e!=null&&e.rut)}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nombre"}),o.jsx("input",{type:"text",className:"input",value:a.nombre,onChange:c=>i(u=>({...u,nombre:c.target.value})),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cargo"}),o.jsx("input",{type:"text",className:"input",value:a.cargo,onChange:c=>i(u=>({...u,cargo:c.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsx("select",{className:"input",value:a.terminal_code,onChange:c=>i(u=>({...u,terminal_code:c.target.value})),required:!0,children:Cn.map(c=>o.jsx("option",{value:c.value,children:c.label},c.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Turno"}),o.jsx("input",{type:"text",className:"input",value:a.turno,onChange:c=>i(u=>({...u,turno:c.target.value}))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Horario"}),o.jsx("input",{type:"text",className:"input",value:a.horario,onChange:c=>i(u=>({...u,horario:c.target.value})),placeholder:"08:00-18:00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha de Autorizacin"}),o.jsx("input",{type:"date",className:"input",value:a.authorization_date,onChange:c=>i(u=>({...u,authorization_date:c.target.value})),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Tipo"}),o.jsx("select",{className:"input",value:a.entry_or_exit,onChange:c=>i(u=>({...u,entry_or_exit:c.target.value})),required:!0,children:DR.map(c=>o.jsx("option",{value:c.value,children:c.label},c.value))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Motivo"}),o.jsx("textarea",{className:"input min-h-[80px]",value:a.motivo,onChange:c=>i(u=>({...u,motivo:c.target.value})),placeholder:"Describe el motivo de la autorizacin...",required:!0})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Guardando...":e?"Guardar Cambios":"Crear Registro"})]})]})},bJ=()=>{const e=Le(S=>S.context),t=Le(S=>S.setContext),r=ht(S=>S.session),n=(r==null?void 0:r.supervisorName)??"",a=Ah(n),[i,s]=T.useState({auth_status:"todos"}),[l,c]=T.useState({type:"none"}),u=tJ(e,i),d=Ph("autorizaciones",e),f=oJ(),h=fJ(),p=Rh(),v=Ih();Dh();const g=S=>{var E;return((E=DR.find(N=>N.value===S))==null?void 0:E.label)||S},x=[{key:"rut",header:"RUT",value:S=>Qt(S.rut)},{key:"nombre",header:"Nombre",value:S=>S.nombre},{key:"cargo",header:"Cargo",value:S=>S.cargo},{key:"terminal",header:"Terminal",value:S=>Ve(S.terminal_code)},{key:"turno",header:"Turno",value:S=>S.turno},{key:"horario",header:"Horario",value:S=>S.horario},{key:"authorization_date",header:"Fecha",value:S=>S.authorization_date},{key:"entry_or_exit",header:"Tipo",value:S=>g(S.entry_or_exit)},{key:"motivo",header:"Motivo",value:S=>S.motivo},{key:"auth_status",header:"Autorizacin",value:S=>S.auth_status}],b=async S=>{await f.mutateAsync({values:S,createdBy:n}),c({type:"none"})},m=async S=>{l.type==="edit"&&(await h.mutateAsync({id:l.record.id,values:S}),c({type:"none"}))},y=async()=>{if(l.type!=="authorize")return;const S=l.record;await p.mutateAsync({subsection:"autorizaciones",id:S.id,authorizedBy:n,rut:S.rut,nombre:S.nombre,terminal:S.terminal_code,date:S.authorization_date}),c({type:"none"})},_=async S=>{if(l.type!=="reject"||!S)return;const E=l.record;await v.mutateAsync({subsection:"autorizaciones",id:E.id,authorizedBy:n,reason:S,rut:E.rut,nombre:E.nombre,terminal:E.terminal_code,date:E.authorization_date}),c({type:"none"})},w=S=>{switch(S){case"AUTORIZADO":return o.jsx("span",{className:"badge badge-success",children:S});case"RECHAZADO":return o.jsx("span",{className:"badge badge-danger",children:S});default:return o.jsx("span",{className:"badge badge-warning",children:S})}},j=S=>S==="ENTRADA"?o.jsx("span",{className:"badge bg-blue-100 text-blue-700",children:"Llegada Tarda"}):o.jsx("span",{className:"badge bg-purple-100 text-purple-700",children:"Retiro Anticipado"});return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ct,{title:"Autorizaciones",description:"Retiros anticipados y llegadas tardas",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[o.jsx(H,{name:"check-circle",size:18})," Nueva Solicitud"]}),o.jsx(hr,{onExportView:()=>Qe({filename:"autorizaciones",sheetName:"Datos",rows:u.data||[],columns:x}),onExportAll:()=>Qe({filename:"autorizaciones_all",sheetName:"Datos",rows:u.data||[],columns:x})})]})}),o.jsx(Ch,{data:d.data,isLoading:d.isLoading}),o.jsxs(Pn,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:i.auth_status,onChange:S=>s(E=>({...E,auth_status:S.target.value})),children:kh.map(S=>o.jsx("option",{value:S.value,children:S.label},S.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:S=>s(E=>({...E,search:S.target.value}))})]})]}),u.isLoading&&o.jsx(zt,{label:"Cargando registros..."}),u.isError&&o.jsx(Er,{onRetry:()=>u.refetch()}),!u.isLoading&&!u.isError&&o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{className:"table-header-cell",children:"RUT"}),o.jsx("th",{className:"table-header-cell",children:"Nombre"}),o.jsx("th",{className:"table-header-cell",children:"Terminal"}),o.jsx("th",{className:"table-header-cell",children:"Fecha"}),o.jsx("th",{className:"table-header-cell",children:"Tipo"}),o.jsx("th",{className:"table-header-cell",children:"Motivo"}),o.jsx("th",{className:"table-header-cell",children:"Autorizacin"}),o.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:(u.data||[]).map(S=>o.jsxs("tr",{className:"table-row",children:[o.jsx("td",{className:"table-cell font-mono text-sm",children:Qt(S.rut)}),o.jsx("td",{className:"table-cell font-medium",children:S.nombre}),o.jsx("td",{className:"table-cell",children:Ve(S.terminal_code)}),o.jsx("td",{className:"table-cell",children:S.authorization_date}),o.jsx("td",{className:"table-cell",children:j(S.entry_or_exit)}),o.jsx("td",{className:"table-cell max-w-[200px] truncate",title:S.motivo,children:S.motivo}),o.jsx("td",{className:"table-cell",children:w(S.auth_status)}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[S.auth_status==="PENDIENTE"&&o.jsx("button",{onClick:()=>c({type:"edit",record:S}),className:"btn btn-ghost btn-icon",title:"Editar",children:o.jsx(H,{name:"clipboard",size:16})}),a&&S.auth_status==="PENDIENTE"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>c({type:"authorize",record:S}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:o.jsx(H,{name:"check-circle",size:16})}),o.jsx("button",{onClick:()=>c({type:"reject",record:S}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:o.jsx(H,{name:"x",size:16})})]})]})})]},S.id))})]})}),(l.type==="create"||l.type==="edit")&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),o.jsxs("div",{className:"relative w-full max-w-3xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-xl font-bold",children:l.type==="create"?"Nueva Solicitud":"Editar Solicitud"}),o.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:o.jsx(H,{name:"x",size:24})})]}),o.jsx(yJ,{initialData:l.type==="edit"?{...l.record,cargo:l.record.cargo??"",turno:l.record.turno??"",horario:l.record.horario??""}:void 0,onSubmit:l.type==="create"?b:m,onCancel:()=>c({type:"none"}),isLoading:f.isPending||h.isPending})]})]}),l.type==="authorize"&&o.jsx(si,{mode:"authorize",itemName:l.record.nombre,onConfirm:y,onCancel:()=>c({type:"none"}),isLoading:p.isPending}),l.type==="reject"&&o.jsx(si,{mode:"reject",itemName:l.record.nombre,onConfirm:_,onCancel:()=>c({type:"none"}),isLoading:v.isPending})]})},Lx=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],wJ=["Lun","Mar","Mi","Jue","Vie","Sb","Dom"],_J=({isOpen:e,onClose:t,vacaciones:r})=>{const n=new Date,[a,i]=T.useState(n.getFullYear()),[s,l]=T.useState(n.getMonth()),[c,u]=T.useState(null),[d,f]=T.useState("todos"),[h,p]=T.useState("todos"),v=T.useMemo(()=>{const E=new Set;return r.forEach(N=>E.add(N.cargo)),Array.from(E).sort()},[r]),g=T.useMemo(()=>r.filter(E=>!(d!=="todos"&&E.terminal_code!==d||h!=="todos"&&E.cargo!==h)),[r,d,h]),x=T.useMemo(()=>{const E=new Date(a,s,1),A=new Date(a,s+1,0).getDate();let O=E.getDay()-1;O<0&&(O=6);const D=[];for(let k=0;k<O;k++)D.push(null);for(let k=1;k<=A;k++)D.push(k);return D},[a,s]),b=E=>{const N=`${a}-${String(s+1).padStart(2,"0")}-${String(E).padStart(2,"0")}`;return g.filter(A=>N>=A.start_date&&N<=A.end_date)},m=c?b(c):[],y=()=>{s===0?(l(11),i(a-1)):l(s-1),u(null)},_=()=>{s===11?(l(0),i(a+1)):l(s+1),u(null)},w=()=>{i(n.getFullYear()),l(n.getMonth()),u(n.getDate())};if(!e)return null;const j=E=>E===n.getDate()&&s===n.getMonth()&&a===n.getFullYear(),S=E=>E%7===5||E%7===6;return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),o.jsxs("div",{className:"relative w-full max-w-5xl bg-white rounded-2xl shadow-2xl max-h-[90vh] overflow-hidden animate-scale-in",children:[o.jsxs("div",{className:"bg-gradient-to-r from-brand-600 to-brand-700 text-white p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-3",children:[o.jsx(H,{name:"calendar",size:28}),"Calendario de Vacaciones"]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:o.jsx(H,{name:"x",size:24})})]}),o.jsxs("div",{className:"flex flex-wrap gap-4",children:[o.jsxs("div",{className:"flex-1 min-w-[180px]",children:[o.jsx("label",{className:"text-white/70 text-xs font-medium block mb-1",children:"Terminal"}),o.jsxs("select",{className:"w-full px-3 py-2 rounded-lg bg-white/20 text-white border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50",value:d,onChange:E=>f(E.target.value),children:[o.jsx("option",{value:"todos",className:"text-slate-800",children:"Todos los terminales"}),Cn.map(E=>o.jsx("option",{value:E.value,className:"text-slate-800",children:E.label},E.value))]})]}),o.jsxs("div",{className:"flex-1 min-w-[180px]",children:[o.jsx("label",{className:"text-white/70 text-xs font-medium block mb-1",children:"Cargo"}),o.jsxs("select",{className:"w-full px-3 py-2 rounded-lg bg-white/20 text-white border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50",value:h,onChange:E=>p(E.target.value),children:[o.jsx("option",{value:"todos",className:"text-slate-800",children:"Todos los cargos"}),v.map(E=>o.jsx("option",{value:E,className:"text-slate-800",children:E},E))]})]})]})]}),o.jsxs("div",{className:"flex flex-col lg:flex-row",children:[o.jsxs("div",{className:"flex-1 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("button",{onClick:y,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsx(H,{name:"chevron-right",size:24,className:"rotate-180"})}),o.jsxs("div",{className:"text-center",children:[o.jsxs("h3",{className:"text-xl font-bold text-slate-800",children:[Lx[s]," ",a]}),o.jsx("button",{onClick:w,className:"text-sm text-brand-600 hover:text-brand-700 font-medium mt-1",children:"Ir a hoy"})]}),o.jsx("button",{onClick:_,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsx(H,{name:"chevron-right",size:24})})]}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:wJ.map((E,N)=>o.jsx("div",{className:`text-center text-sm font-semibold py-2 ${N>=5?"text-slate-400":"text-slate-600"}`,children:E},E))}),o.jsx("div",{className:"grid grid-cols-7 gap-1",children:x.map((E,N)=>{if(E===null)return o.jsx("div",{className:"h-16"},`empty-${N}`);const A=b(E),O=A.length>0,D=c===E,k=j(E),V=S(N);return o.jsxs("button",{onClick:()=>u(E),className:`
                                            h-16 rounded-lg border-2 transition-all text-left p-1 relative
                                            ${D?"border-brand-500 bg-brand-50 shadow-md":"border-transparent"}
                                            ${k?"ring-2 ring-brand-400 ring-offset-1":""}
                                            ${V?"bg-slate-50":"bg-white"}
                                            ${O?"hover:border-brand-300":"hover:bg-slate-50"}
                                        `,children:[o.jsx("span",{className:`
                                            text-sm font-semibold
                                            ${k?"text-brand-600":V?"text-slate-400":"text-slate-700"}
                                        `,children:E}),O&&o.jsxs("div",{className:"mt-1 space-y-0.5",children:[A.slice(0,2).map((K,ie)=>o.jsx("div",{className:"text-[10px] bg-amber-100 text-amber-800 rounded px-1 truncate font-medium",title:`${K.nombre} - ${K.cargo}`,children:K.nombre.split(" ")[0]},ie)),A.length>2&&o.jsxs("div",{className:"text-[10px] text-amber-600 font-medium px-1",children:["+",A.length-2," ms"]})]})]},E)})}),o.jsxs("div",{className:"flex items-center gap-6 mt-6 text-sm text-slate-600",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 bg-amber-100 rounded border border-amber-200"}),o.jsx("span",{children:"Con vacaciones"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 bg-slate-50 rounded border border-slate-200"}),o.jsx("span",{children:"Fin de semana"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 rounded ring-2 ring-brand-400 ring-offset-1"}),o.jsx("span",{children:"Hoy"})]})]})]}),o.jsxs("div",{className:"lg:w-80 border-t lg:border-t-0 lg:border-l border-slate-200 bg-slate-50 p-6",children:[o.jsxs("h4",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[o.jsx(H,{name:"users",size:18}),c?o.jsxs(o.Fragment,{children:["Vacaciones: ",c," ",Lx[s]]}):o.jsx(o.Fragment,{children:"Selecciona un da"})]}),c===null?o.jsxs("div",{className:"text-center py-8 text-slate-400",children:[o.jsx(H,{name:"calendar",size:48,className:"mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"Haz clic en un da para ver quin est de vacaciones"})]}):m.length===0?o.jsxs("div",{className:"text-center py-8 text-slate-400",children:[o.jsx(H,{name:"check-circle",size:48,className:"mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"Sin vacaciones registradas para este da"})]}):o.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:m.map((E,N)=>o.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200 shadow-sm",children:[o.jsx("div",{className:"font-semibold text-slate-800",children:E.nombre}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(H,{name:"tag",size:14,className:"text-slate-400"}),E.cargo]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(H,{name:"building",size:14,className:"text-slate-400"}),Vs[E.terminal_code]||E.terminal_code]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(H,{name:"clock",size:14,className:"text-slate-400"}),E.turno]})]}),o.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-100 text-xs text-slate-500",children:[E.start_date,"  ",E.end_date,o.jsxs("span",{className:"ml-2 font-medium text-brand-600",children:["(",E.business_days," das hbiles)"]})]})]},N))}),g.length>0&&o.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-200",children:[o.jsxs("div",{className:"text-xs text-slate-500 uppercase font-semibold mb-2",children:["Resumen ",Lx[s]]}),o.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[o.jsx("div",{className:"text-2xl font-bold text-brand-600",children:g.filter(E=>{const N=`${a}-${String(s+1).padStart(2,"0")}-01`,A=`${a}-${String(s+1).padStart(2,"0")}-31`;return E.end_date>=N&&E.start_date<=A}).length}),o.jsx("div",{className:"text-sm text-slate-600",children:"personas con vacaciones"})]})]})]})]})]})]})},jJ=({initialData:e,onSubmit:t,onCancel:r,isLoading:n})=>{const a=Le(E=>E.context),i=yR(a),[s,l]=T.useState(""),[c,u]=T.useState(null),[d,f]=T.useState(!1),[h,p]=T.useState({rut:"",nombre:"",cargo:"",terminal_code:"",turno:"",start_date:"",end_date:"",return_date:"",conflict_authorized:!1}),[v,g]=T.useState(null),[x,b]=T.useState(!1),m=T.useMemo(()=>!h.start_date||!h.end_date?0:s2(h.start_date,h.end_date),[h.start_date,h.end_date]),y=T.useMemo(()=>!h.start_date||!h.end_date?0:i2(h.start_date,h.end_date),[h.start_date,h.end_date]);T.useEffect(()=>{e&&(p({rut:e.rut,nombre:e.nombre,cargo:e.cargo,terminal_code:e.terminal_code,turno:e.turno,start_date:e.start_date,end_date:e.end_date,return_date:e.return_date,conflict_authorized:e.conflict_authorized}),l(Qt(e.rut)))},[e]);const _=T.useMemo(()=>{if(!s||!i.data)return[];const E=to(s).toLowerCase();return i.data.filter(N=>N.status==="ACTIVO").filter(N=>N.rut.toLowerCase().includes(E)||N.nombre.toLowerCase().includes(E)).slice(0,8)},[s,i.data]);T.useEffect(()=>{(async()=>{if(!h.cargo||!h.terminal_code||!h.turno||!h.start_date||!h.end_date){g(null);return}b(!0);try{const N=await kR(h.cargo,h.terminal_code,h.turno,h.start_date,h.end_date,e==null?void 0:e.rut);g(N)}catch(N){console.error("Error checking conflicts:",N)}finally{b(!1)}})()},[h.cargo,h.terminal_code,h.turno,h.start_date,h.end_date,e==null?void 0:e.rut]),T.useEffect(()=>{if(h.end_date){const E=new Date(h.end_date+"T12:00:00");for(E.setDate(E.getDate()+1);E.getDay()===0||E.getDay()===6;)E.setDate(E.getDate()+1);p(N=>({...N,return_date:E.toISOString().split("T")[0]}))}},[h.end_date]);const w=E=>{u(E),l(Qt(E.rut)),p(N=>({...N,rut:E.rut,nombre:E.nombre,cargo:E.cargo,terminal_code:E.terminal_code,turno:E.turno})),f(!1)},j=async E=>{E.preventDefault(),await t(h)},S=h.rut&&h.start_date&&h.end_date&&h.return_date&&(!(v!=null&&v.hasConflict)||h.conflict_authorized);return o.jsxs("form",{onSubmit:j,className:"space-y-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx("label",{className:"label",children:"Buscar Trabajador por RUT"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",className:"input pr-10",placeholder:"Ingrese RUT o nombre...",value:s,onChange:E=>{l(E.target.value),f(!0)},onFocus:()=>f(!0)}),o.jsx(H,{name:"search",size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"})]}),d&&_.length>0&&o.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:_.map(E=>o.jsx("button",{type:"button",onClick:()=>w(E),className:"w-full px-4 py-3 text-left hover:bg-slate-50 border-b last:border-b-0 border-slate-100",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-slate-800",children:E.nombre}),o.jsx("div",{className:"text-sm text-slate-500 font-mono",children:Qt(E.rut)})]}),o.jsxs("div",{className:"text-right text-sm text-slate-500",children:[o.jsx("div",{children:E.cargo}),o.jsx("div",{children:E.turno})]})]})},E.id))}),d&&s&&_.length===0&&i.data&&o.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg p-4 text-slate-500 text-sm",children:"No se encontraron trabajadores activos"})]}),c&&o.jsx("div",{className:"bg-brand-50 border border-brand-200 rounded-lg p-4",children:o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500 block",children:"Nombre"}),o.jsx("span",{className:"font-semibold text-slate-800",children:c.nombre})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500 block",children:"Cargo"}),o.jsx("span",{className:"font-semibold text-slate-800",children:c.cargo})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500 block",children:"Terminal"}),o.jsx("span",{className:"font-semibold text-slate-800",children:Vs[c.terminal_code]||c.terminal_code})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500 block",children:"Turno"}),o.jsx("span",{className:"font-semibold text-slate-800",children:c.turno})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha Inicio"}),o.jsx("input",{type:"date",className:"input",value:h.start_date,onChange:E=>p(N=>({...N,start_date:E.target.value})),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha Trmino"}),o.jsx("input",{type:"date",className:"input",value:h.end_date,min:h.start_date,onChange:E=>p(N=>({...N,end_date:E.target.value})),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha Vuelta"}),o.jsx("input",{type:"date",className:"input",value:h.return_date,min:h.end_date,onChange:E=>p(N=>({...N,return_date:E.target.value})),required:!0})]})]}),h.start_date&&h.end_date&&o.jsx("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-slate-700",children:m}),o.jsx("div",{className:"text-sm text-slate-500",children:"Das calendario"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-brand-600",children:y}),o.jsx("div",{className:"text-sm text-slate-500",children:"Das a descontar"}),o.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"(sin sbados ni domingos)"})]})]})}),x&&o.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4 text-center text-slate-500",children:[o.jsx(H,{name:"clock",size:20,className:"inline-block mr-2 animate-spin"}),"Verificando disponibilidad..."]}),(v==null?void 0:v.hasConflict)&&!x&&o.jsx("div",{className:"bg-amber-50 border border-amber-300 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(H,{name:"alert-triangle",size:24,className:"text-amber-600 shrink-0 mt-0.5"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-semibold text-amber-800 mb-2",children:"Conflicto de Personal Detectado"}),o.jsxs("p",{className:"text-sm text-amber-700 mb-3",children:["Hay ",v.conflictingVacations.length," persona(s) del mismo cargo, terminal y turno con vacaciones en fechas solapadas."]}),o.jsx("div",{className:"bg-white/50 rounded p-3 mb-3",children:o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-amber-700",children:"Personal total:"}),o.jsx("span",{className:"font-bold ml-2",children:v.totalStaffCount})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-amber-700",children:"Disponibles:"}),o.jsx("span",{className:"font-bold ml-2 text-amber-800",children:v.availableStaffCount})]})]})}),o.jsxs("div",{className:"text-sm text-amber-700 mb-3",children:[o.jsx("strong",{children:"En vacaciones:"}),o.jsx("ul",{className:"mt-1 space-y-1",children:v.conflictingVacations.map((E,N)=>o.jsxs("li",{children:[" ",E.nombre," (",E.start_date," al ",E.end_date,")"]},N))})]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:h.conflict_authorized,onChange:E=>p(N=>({...N,conflict_authorized:E.target.checked})),className:"w-4 h-4 text-amber-600 border-amber-300 rounded focus:ring-amber-500"}),o.jsx("span",{className:"text-sm font-medium text-amber-800",children:"Autorizo esta solicitud a pesar del conflicto"})]})]})]})}),v&&!v.hasConflict&&!x&&h.start_date&&h.end_date&&o.jsxs("div",{className:"bg-green-50 border border-green-300 rounded-lg p-4 flex items-center gap-3",children:[o.jsx(H,{name:"check-circle",size:24,className:"text-green-600"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-green-800",children:"Sin conflictos"}),o.jsxs("span",{className:"text-green-700 text-sm ml-2",children:["(",v.availableStaffCount+1," de ",v.totalStaffCount," disponibles despus de esta solicitud)"]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:!S||n,className:"btn btn-primary",children:n?"Guardando...":e?"Actualizar":"Solicitar Vacaciones"})]})]})},SJ=()=>{const e=Le(E=>E.context),t=Le(E=>E.setContext),r=ht(E=>E.session),n=(r==null?void 0:r.supervisorName)??"",a=Ah(n),[i,s]=T.useState({auth_status:"todos"}),[l,c]=T.useState({type:"none"}),[u,d]=T.useState(!1),f=rJ(e,i),h=Ph("vacaciones",e),p=lJ(),v=hJ(),g=Rh(),x=Ih();Dh();const b=[{key:"rut",header:"RUT",value:E=>Qt(E.rut)},{key:"nombre",header:"Nombre",value:E=>E.nombre},{key:"cargo",header:"Cargo",value:E=>E.cargo},{key:"terminal",header:"Terminal",value:E=>Ve(E.terminal_code)},{key:"turno",header:"Turno",value:E=>E.turno},{key:"start_date",header:"Fecha Inicio",value:E=>E.start_date},{key:"end_date",header:"Fecha Trmino",value:E=>E.end_date},{key:"return_date",header:"Fecha Vuelta",value:E=>E.return_date},{key:"calendar_days",header:"Das Calendario",value:E=>E.calendar_days.toString()},{key:"business_days",header:"Das Hbiles",value:E=>E.business_days.toString()},{key:"has_conflict",header:"Conflicto",value:E=>E.has_conflict?"S":"No"},{key:"auth_status",header:"Estado",value:E=>E.auth_status}],m=async E=>{await p.mutateAsync({values:E,createdBy:n}),c({type:"none"})},y=async E=>{l.type==="edit"&&(await v.mutateAsync({id:l.record.id,values:E}),c({type:"none"}))},_=async()=>{if(l.type!=="authorize")return;const E=l.record;await g.mutateAsync({subsection:"vacaciones",id:E.id,authorizedBy:n,rut:E.rut,nombre:E.nombre,terminal:E.terminal_code,date:E.start_date}),c({type:"none"})},w=async E=>{if(l.type!=="reject"||!E)return;const N=l.record;await x.mutateAsync({subsection:"vacaciones",id:N.id,authorizedBy:n,reason:E,rut:N.rut,nombre:N.nombre,terminal:N.terminal_code,date:N.start_date}),c({type:"none"})},j=E=>{switch(E){case"AUTORIZADO":return o.jsx("span",{className:"badge badge-success",children:E});case"RECHAZADO":return o.jsx("span",{className:"badge badge-danger",children:E});default:return o.jsx("span",{className:"badge badge-warning",children:E})}},S=E=>new Date(E+"T12:00:00").toLocaleDateString("es-CL",{day:"2-digit",month:"short"});return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ct,{title:"Vacaciones",description:"Gestin inteligente de vacaciones con deteccin de conflictos",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{className:"btn btn-secondary",onClick:()=>d(!0),children:[o.jsx(H,{name:"calendar",size:18})," Calendario"]}),o.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[o.jsx(H,{name:"plus",size:18})," Nueva Solicitud"]}),o.jsx(hr,{onExportView:()=>Qe({filename:"vacaciones",sheetName:"Datos",rows:f.data||[],columns:b}),onExportAll:()=>Qe({filename:"vacaciones_all",sheetName:"Datos",rows:f.data||[],columns:b})})]})}),o.jsx(Ch,{data:h.data,isLoading:h.isLoading}),o.jsxs(Pn,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:i.auth_status,onChange:E=>s(N=>({...N,auth_status:E.target.value})),children:kh.map(E=>o.jsx("option",{value:E.value,children:E.label},E.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:E=>s(N=>({...N,search:E.target.value}))})]})]}),f.isLoading&&o.jsx(zt,{label:"Cargando vacaciones..."}),f.isError&&o.jsx(Er,{onRetry:()=>f.refetch()}),!f.isLoading&&!f.isError&&o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{className:"table-header-cell",children:"RUT"}),o.jsx("th",{className:"table-header-cell",children:"Nombre"}),o.jsx("th",{className:"table-header-cell",children:"Cargo/Turno"}),o.jsx("th",{className:"table-header-cell",children:"Perodo"}),o.jsx("th",{className:"table-header-cell text-center",children:"Das"}),o.jsx("th",{className:"table-header-cell",children:"Conflicto"}),o.jsx("th",{className:"table-header-cell",children:"Estado"}),o.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:(f.data||[]).length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"table-cell text-center text-slate-500 py-8",children:"No hay solicitudes de vacaciones registradas"})}):(f.data||[]).map(E=>o.jsxs("tr",{className:"table-row",children:[o.jsx("td",{className:"table-cell font-mono text-sm",children:Qt(E.rut)}),o.jsx("td",{className:"table-cell font-medium",children:E.nombre}),o.jsxs("td",{className:"table-cell",children:[o.jsx("div",{className:"text-sm",children:E.cargo}),o.jsx("div",{className:"text-xs text-slate-500",children:E.turno})]}),o.jsxs("td",{className:"table-cell",children:[o.jsxs("div",{className:"text-sm",children:[S(E.start_date)," - ",S(E.end_date)]}),o.jsxs("div",{className:"text-xs text-slate-500",children:["Vuelta: ",S(E.return_date)]})]}),o.jsxs("td",{className:"table-cell text-center",children:[o.jsx("div",{className:"text-lg font-bold text-brand-600",children:E.business_days}),o.jsxs("div",{className:"text-xs text-slate-500",children:[E.calendar_days," cal"]})]}),o.jsx("td",{className:"table-cell",children:E.has_conflict?o.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium ${E.conflict_authorized?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:[o.jsx(H,{name:"alert-triangle",size:12}),E.conflict_authorized?"Autorizado":"Sin autorizar"]}):o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-700",children:[o.jsx(H,{name:"check-circle",size:12}),"Sin conflicto"]})}),o.jsx("td",{className:"table-cell",children:j(E.auth_status)}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[E.auth_status==="PENDIENTE"&&o.jsx("button",{onClick:()=>c({type:"edit",record:E}),className:"btn btn-ghost btn-icon",title:"Editar",children:o.jsx(H,{name:"clipboard",size:16})}),a&&E.auth_status==="PENDIENTE"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>c({type:"authorize",record:E}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:o.jsx(H,{name:"check-circle",size:16})}),o.jsx("button",{onClick:()=>c({type:"reject",record:E}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:o.jsx(H,{name:"x",size:16})})]})]})})]},E.id))})]})}),(l.type==="create"||l.type==="edit")&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),o.jsxs("div",{className:"relative w-full max-w-3xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-xl font-bold",children:l.type==="create"?"Nueva Solicitud de Vacaciones":"Editar Solicitud"}),o.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:o.jsx(H,{name:"x",size:24})})]}),o.jsx(jJ,{initialData:l.type==="edit"?l.record:void 0,onSubmit:l.type==="create"?m:y,onCancel:()=>c({type:"none"}),isLoading:p.isPending||v.isPending})]})]}),l.type==="authorize"&&o.jsx(si,{mode:"authorize",itemName:l.record.nombre,onConfirm:_,onCancel:()=>c({type:"none"}),isLoading:g.isPending}),l.type==="reject"&&o.jsx(si,{mode:"reject",itemName:l.record.nombre,onConfirm:w,onCancel:()=>c({type:"none"}),isLoading:x.isPending}),o.jsx(_J,{isOpen:u,onClose:()=>d(!1),vacaciones:f.data||[]})]})},yN="email_notifications",EJ=({isOpen:e,onClose:t})=>{const[r,n]=T.useState({to:[],cc:[]}),[a,i]=T.useState(!0),[s,l]=T.useState(!1),[c,u]=T.useState(""),[d,f]=T.useState("");T.useEffect(()=>{e&&h()},[e]);const h=async()=>{i(!0);try{const m=await a2(yN);n(m||{to:["isaac.avila@transdev.cl"],cc:[]})}catch(m){console.error("Error loading config:",m),on("Error","No se pudo cargar la configuracin")}finally{i(!1)}},p=async()=>{l(!0);try{await OQ(yN,r,"Configuracin de destinatarios para notificaciones"),hn("Configuracin guardada","Los correos se enviarn a los nuevos destinatarios"),t()}catch(m){console.error("Error saving config:",m),on("Error","No se pudo guardar la configuracin")}finally{l(!1)}},v=m=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m),g=m=>{const y=m==="to"?c:d,_=m==="to"?u:f,w=y.trim();if(w){if(!v(w)){on("Email invlido","Por favor ingresa un correo electrnico vlido");return}if(r[m].includes(w)){on("Email duplicado","Este correo ya est en la lista");return}n(j=>({...j,[m]:[...j[m],w]})),_("")}},x=(m,y)=>{n(_=>({..._,[m]:_[m].filter(w=>w!==y)}))},b=(m,y)=>{m.key==="Enter"&&(m.preventDefault(),g(y))};return e?o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),o.jsxs("div",{className:"relative w-full max-w-lg card p-6 animate-scale-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6 border-b pb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-brand-100 p-2 rounded-lg text-brand-600",children:o.jsx(H,{name:"settings",size:24})}),o.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Configuracin de Correos"})]}),o.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600",children:o.jsx(H,{name:"x",size:24})})]}),a?o.jsx("div",{className:"py-12 flex justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"label mb-2 flex justify-between",children:[o.jsx("span",{children:"Destinatarios Principales (Para)"}),o.jsx("span",{className:"text-xs font-normal text-slate-500",children:"Reciben el correo directamente"})]}),o.jsxs("div",{className:"flex gap-2 mb-3",children:[o.jsx("input",{type:"email",className:"input flex-1",placeholder:"ejemplo@transdev.cl",value:c,onChange:m=>u(m.target.value),onKeyDown:m=>b(m,"to")}),o.jsx("button",{type:"button",onClick:()=>g("to"),className:"btn btn-secondary px-3",disabled:!c.trim(),children:o.jsx(H,{name:"plus",size:18})})]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 min-h-[60px] border border-slate-200 flex flex-wrap gap-2",children:[r.to.length===0&&o.jsx("span",{className:"text-sm text-slate-400 italic self-center w-full text-center",children:"Sin destinatarios"}),r.to.map(m=>o.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white border border-slate-200 rounded-full text-sm font-medium text-slate-700 shadow-sm",children:[m,o.jsx("button",{onClick:()=>x("to",m),className:"text-slate-400 hover:text-danger-500 ml-1",children:o.jsx(H,{name:"x",size:14})})]},m))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"label mb-2 flex justify-between",children:[o.jsx("span",{children:"En Copia (CC)"}),o.jsx("span",{className:"text-xs font-normal text-slate-500",children:"Reciben una copia"})]}),o.jsxs("div",{className:"flex gap-2 mb-3",children:[o.jsx("input",{type:"email",className:"input flex-1",placeholder:"jefe@transdev.cl",value:d,onChange:m=>f(m.target.value),onKeyDown:m=>b(m,"cc")}),o.jsx("button",{type:"button",onClick:()=>g("cc"),className:"btn btn-secondary px-3",disabled:!d.trim(),children:o.jsx(H,{name:"plus",size:18})})]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 min-h-[60px] border border-slate-200 flex flex-wrap gap-2",children:[r.cc.length===0&&o.jsx("span",{className:"text-sm text-slate-400 italic self-center w-full text-center",children:"Sin copias"}),r.cc.map(m=>o.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white border border-slate-200 rounded-full text-sm font-medium text-slate-700 shadow-sm",children:[m,o.jsx("button",{onClick:()=>x("cc",m),className:"text-slate-400 hover:text-danger-500 ml-1",children:o.jsx(H,{name:"x",size:14})})]},m))]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t mt-4",children:[o.jsx("button",{onClick:t,className:"btn btn-secondary",disabled:s,children:"Cancelar"}),o.jsx("button",{onClick:p,className:"btn btn-primary min-w-[120px]",disabled:s,children:s?"Guardando...":"Guardar Cambios"})]})]})]})]}):null},NJ=[{id:"no-marcaciones",label:"No Marcaciones",icon:"clock"},{id:"sin-credenciales",label:"Sin Credenciales",icon:"key"},{id:"cambios-dia",label:"Cambios de Da",icon:"calendar"},{id:"autorizaciones",label:"Autorizaciones",icon:"check-circle"},{id:"vacaciones",label:"Vacaciones",icon:"sparkles"}],TJ=()=>{const[e,t]=T.useState("no-marcaciones"),[r,n]=T.useState(!1),a=()=>{switch(e){case"no-marcaciones":return o.jsx(pJ,{});case"sin-credenciales":return o.jsx(gJ,{});case"cambios-dia":return o.jsx(xJ,{});case"autorizaciones":return o.jsx(bJ,{});case"vacaciones":return o.jsx(SJ,{});default:return null}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 border-b border-slate-200 pb-4",children:[o.jsx("div",{className:"flex flex-wrap gap-2",children:NJ.map(i=>o.jsxs("button",{onClick:()=>t(i.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${e===i.id?"bg-brand-600 text-white shadow-md":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[o.jsx(H,{name:i.icon,size:18}),o.jsx("span",{className:"hidden sm:inline",children:i.label})]},i.id))}),o.jsxs("button",{onClick:()=>n(!0),className:"btn btn-secondary text-sm flex items-center gap-2 shrink-0",children:[o.jsx(H,{name:"settings",size:16}),o.jsx("span",{children:"Configurar Correos"})]})]}),a(),o.jsx(EJ,{isOpen:r,onClose:()=>n(!1)})]})},AJ=[{id:"ai-1",area:"interior",responsable:"Equipo Aseo 1",fecha:"2023-12-04T08:00:00Z",estado:"pendiente",observaciones:"Pendiente zona comedor",terminal:"EL_ROBLE"},{id:"ae-1",area:"exterior",responsable:"Equipo Aseo 2",fecha:"2023-12-03T15:00:00Z",estado:"completado",observaciones:"Patio listo",terminal:"LA_REINA"},{id:"ar-1",area:"rodillo",responsable:"Equipo Rodillo",fecha:"2023-12-02T17:00:00Z",estado:"pendiente",terminal:"EL_SALTO"}],CJ=e=>Wg(AJ.filter(t=>t.area===e),(t,r)=>r!=null&&r.estado&&r.estado!=="todos"?t.estado===r.estado:!0),l2=({area:e,title:t})=>{var h;const r=Le(p=>p.context),n=Le(p=>p.setContext),[a,i]=T.useState({estado:"todos"}),s=T.useMemo(()=>CJ(e),[e]),l=Ge({queryKey:["aseo",e,r,a],queryFn:()=>s.list({terminalContext:r,filters:a,scope:"view"})}),c=T.useMemo(()=>[{key:"responsable",header:"Responsable"},{key:"fecha",header:"Fecha",render:p=>Sr(p.fecha),value:p=>Sr(p.fecha)},{key:"estado",header:"Estado",render:p=>o.jsx("span",{className:"badge capitalize",children:p.estado}),value:p=>p.estado},{key:"observaciones",header:"Observaciones",render:p=>p.observaciones??"",value:p=>p.observaciones??""},{key:"terminal",header:"Terminal",render:p=>Ve(p.terminal),value:p=>Ve(p.terminal)}],[]),u=c.map(p=>({key:p.key,header:p.header,value:v=>p.value?p.value(v):v[p.key]})),d=()=>{l.data&&Qe({filename:`aseo_${e}_vista`,sheetName:`Aseo ${e}`,rows:l.data,columns:u})},f=async()=>{const p=await s.list({terminalContext:r,scope:"all"});Qe({filename:`aseo_${e}_completo`,sheetName:`Aseo ${e}`,rows:p,columns:u})};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ct,{title:`Aseo - ${t}`,description:"Control de aseo por rea",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"btn btn-primary",children:"Nuevo registro"}),o.jsx(hr,{onExportView:d,onExportAll:f})]})}),o.jsx(Pn,{terminalContext:r,onTerminalChange:n,children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsxs("select",{className:"input",value:a.estado,onChange:p=>i({estado:p.target.value}),children:[o.jsx("option",{value:"todos",children:"Todos"}),o.jsx("option",{value:"pendiente",children:"Pendiente"}),o.jsx("option",{value:"completado",children:"Completado"})]})]})}),l.isLoading&&o.jsx(zt,{}),l.isError&&o.jsx(Er,{onRetry:l.refetch}),!l.isLoading&&!l.isError&&o.jsxs(o.Fragment,{children:[!((h=l.data)!=null&&h.length)&&o.jsx(es,{description:"Sin registros"}),l.data&&l.data.length>0&&o.jsx(Zi,{columns:c,rows:l.data})]})]})},OJ=()=>o.jsx(l2,{area:"interior",title:"Interior"}),kJ=()=>o.jsx(l2,{area:"exterior",title:"Exterior"}),PJ=()=>o.jsx(l2,{area:"rodillo",title:"Rodillo"});/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RJ=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),IJ=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),bN=e=>{const t=IJ(e);return t.charAt(0).toUpperCase()+t.slice(1)},LR=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),DJ=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LJ=T.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:s,...l},c)=>T.createElement("svg",{ref:c,...MJ,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:LR("lucide",a),...!i&&!DJ(l)&&{"aria-hidden":"true"},...l},[...s.map(([u,d])=>T.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=(e,t)=>{const r=T.forwardRef(({className:n,...a},i)=>T.createElement(LJ,{ref:i,iconNode:t,className:LR(`lucide-${RJ(bN(e))}`,`lucide-${e}`,n),...a}));return r.displayName=bN(e),r};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $J=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],FJ=Rt("calendar",$J);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],UJ=Rt("circle-alert",BJ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zJ=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$R=Rt("clock",zJ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qJ=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Af=Rt("credit-card",qJ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],FR=Rt("dollar-sign",WJ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HJ=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],VJ=Rt("download",HJ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],GJ=Rt("eye",KJ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],YJ=Rt("file-text",XJ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QJ=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],JJ=Rt("funnel",QJ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZJ=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],BR=Rt("mail",ZJ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eZ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],UR=Rt("plus",eZ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tZ=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],rZ=Rt("printer",tZ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nZ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],zR=Rt("rotate-ccw",nZ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aZ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],iZ=Rt("save",aZ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sZ=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],oZ=Rt("search",sZ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lZ=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],cZ=Rt("send",lZ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uZ=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dZ=Rt("settings",uZ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fZ=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],hZ=Rt("square-pen",fZ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pZ=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],mZ=Rt("trash-2",pZ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gZ=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],vZ=Rt("trending-up",gZ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xZ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Vg=Rt("triangle-alert",xZ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yZ=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],bZ=Rt("upload",yZ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wZ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],_Z=Rt("user",wZ);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jZ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],zi=Rt("x",jZ),Ys=["El Roble","La Reina","Maria Angelica"],qR=[{value:"PERDIDA",label:"Perdida"},{value:"DETERIORO",label:"Deterioro"}],SZ=[{value:"ASIGNADA",label:"Asignada"},{value:"RECUPERADA",label:"Recuperada"},{value:"CERRADA",label:"Cerrada"},{value:"CANCELADA",label:"Cancelada"}],EZ=[{value:"LIBRE",label:"Libre"},{value:"ASIGNADA",label:"Asignada"},{value:"INACTIVA",label:"Inactiva"}],ld=({title:e,value:t,subtitle:r,icon:n,colorClass:a="bg-slate-50 text-slate-600"})=>o.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:e}),o.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-1",children:t}),r&&o.jsx("p",{className:"text-xs text-slate-500 mt-1",children:r})]}),o.jsx("div",{className:`p-2 rounded-lg ${a}`,children:n})]})}),NZ=({kpis:e,isLoading:t})=>{if(t)return o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:Array.from({length:5}).map((a,i)=>o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm animate-pulse",children:[o.jsx("div",{className:"h-4 bg-slate-200 rounded w-24 mb-2"}),o.jsx("div",{className:"h-8 bg-slate-200 rounded w-16"})]},i))});const r=Ys.reduce((a,i)=>a+(e.availableByTerminal[i]||0),0),n=Ys.map(a=>`${a.split(" ")[0]}: ${e.availableByTerminal[a]||0}`).join(" | ");return o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[o.jsx(ld,{title:"Disponibles",value:r,subtitle:n,icon:o.jsx(Af,{className:"w-5 h-5"}),colorClass:"bg-emerald-50 text-emerald-600"}),o.jsx(ld,{title:"Prestamos Activos",value:e.activeLoans,icon:o.jsx($R,{className:"w-5 h-5"}),colorClass:"bg-blue-50 text-blue-600"}),o.jsx(ld,{title:"Atrasados (+7d)",value:e.overdueLoans,icon:o.jsx(Vg,{className:"w-5 h-5"}),colorClass:e.overdueLoans>0?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-400"}),o.jsx(ld,{title:"Tiempo Promedio",value:`${e.avgReturnDays} dias`,subtitle:"Ultimos 30 dias",icon:o.jsx(vZ,{className:"w-5 h-5"}),colorClass:"bg-indigo-50 text-indigo-600"}),o.jsx(ld,{title:"Descuentos",value:`$${e.totalDiscounts.toLocaleString("es-CL")}`,icon:o.jsx(FR,{className:"w-5 h-5"}),colorClass:"bg-violet-50 text-violet-600"})]})};function WR(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=WR(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function He(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=WR(e))&&(n&&(n+=" "),n+=t);return n}var TZ=Array.isArray,Rn=TZ,AZ=typeof Xh=="object"&&Xh&&Xh.Object===Object&&Xh,HR=AZ,CZ=HR,OZ=typeof self=="object"&&self&&self.Object===Object&&self,kZ=CZ||OZ||Function("return this")(),ci=kZ,PZ=ci,RZ=PZ.Symbol,Mh=RZ,wN=Mh,VR=Object.prototype,IZ=VR.hasOwnProperty,DZ=VR.toString,cd=wN?wN.toStringTag:void 0;function MZ(e){var t=IZ.call(e,cd),r=e[cd];try{e[cd]=void 0;var n=!0}catch{}var a=DZ.call(e);return n&&(t?e[cd]=r:delete e[cd]),a}var LZ=MZ,$Z=Object.prototype,FZ=$Z.toString;function BZ(e){return FZ.call(e)}var UZ=BZ,_N=Mh,zZ=LZ,qZ=UZ,WZ="[object Null]",HZ="[object Undefined]",jN=_N?_N.toStringTag:void 0;function VZ(e){return e==null?e===void 0?HZ:WZ:jN&&jN in Object(e)?zZ(e):qZ(e)}var ts=VZ;function KZ(e){return e!=null&&typeof e=="object"}var rs=KZ,GZ=ts,XZ=rs,YZ="[object Symbol]";function QZ(e){return typeof e=="symbol"||XZ(e)&&GZ(e)==YZ}var Lu=QZ,JZ=Rn,ZZ=Lu,eee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tee=/^\w*$/;function ree(e,t){if(JZ(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||ZZ(e)?!0:tee.test(e)||!eee.test(e)||t!=null&&e in Object(t)}var c2=ree;function nee(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var no=nee;const $u=it(no);var aee=ts,iee=no,see="[object AsyncFunction]",oee="[object Function]",lee="[object GeneratorFunction]",cee="[object Proxy]";function uee(e){if(!iee(e))return!1;var t=aee(e);return t==oee||t==lee||t==see||t==cee}var u2=uee;const Me=it(u2);var dee=ci,fee=dee["__core-js_shared__"],hee=fee,$x=hee,SN=function(){var e=/[^.]+$/.exec($x&&$x.keys&&$x.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function pee(e){return!!SN&&SN in e}var mee=pee,gee=Function.prototype,vee=gee.toString;function xee(e){if(e!=null){try{return vee.call(e)}catch{}try{return e+""}catch{}}return""}var KR=xee,yee=u2,bee=mee,wee=no,_ee=KR,jee=/[\\^$.*+?()[\]{}|]/g,See=/^\[object .+?Constructor\]$/,Eee=Function.prototype,Nee=Object.prototype,Tee=Eee.toString,Aee=Nee.hasOwnProperty,Cee=RegExp("^"+Tee.call(Aee).replace(jee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Oee(e){if(!wee(e)||bee(e))return!1;var t=yee(e)?Cee:See;return t.test(_ee(e))}var kee=Oee;function Pee(e,t){return e==null?void 0:e[t]}var Ree=Pee,Iee=kee,Dee=Ree;function Mee(e,t){var r=Dee(e,t);return Iee(r)?r:void 0}var Nl=Mee,Lee=Nl,$ee=Lee(Object,"create"),Kg=$ee,EN=Kg;function Fee(){this.__data__=EN?EN(null):{},this.size=0}var Bee=Fee;function Uee(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var zee=Uee,qee=Kg,Wee="__lodash_hash_undefined__",Hee=Object.prototype,Vee=Hee.hasOwnProperty;function Kee(e){var t=this.__data__;if(qee){var r=t[e];return r===Wee?void 0:r}return Vee.call(t,e)?t[e]:void 0}var Gee=Kee,Xee=Kg,Yee=Object.prototype,Qee=Yee.hasOwnProperty;function Jee(e){var t=this.__data__;return Xee?t[e]!==void 0:Qee.call(t,e)}var Zee=Jee,ete=Kg,tte="__lodash_hash_undefined__";function rte(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ete&&t===void 0?tte:t,this}var nte=rte,ate=Bee,ite=zee,ste=Gee,ote=Zee,lte=nte;function Fu(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Fu.prototype.clear=ate;Fu.prototype.delete=ite;Fu.prototype.get=ste;Fu.prototype.has=ote;Fu.prototype.set=lte;var cte=Fu;function ute(){this.__data__=[],this.size=0}var dte=ute;function fte(e,t){return e===t||e!==e&&t!==t}var d2=fte,hte=d2;function pte(e,t){for(var r=e.length;r--;)if(hte(e[r][0],t))return r;return-1}var Gg=pte,mte=Gg,gte=Array.prototype,vte=gte.splice;function xte(e){var t=this.__data__,r=mte(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():vte.call(t,r,1),--this.size,!0}var yte=xte,bte=Gg;function wte(e){var t=this.__data__,r=bte(t,e);return r<0?void 0:t[r][1]}var _te=wte,jte=Gg;function Ste(e){return jte(this.__data__,e)>-1}var Ete=Ste,Nte=Gg;function Tte(e,t){var r=this.__data__,n=Nte(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Ate=Tte,Cte=dte,Ote=yte,kte=_te,Pte=Ete,Rte=Ate;function Bu(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Bu.prototype.clear=Cte;Bu.prototype.delete=Ote;Bu.prototype.get=kte;Bu.prototype.has=Pte;Bu.prototype.set=Rte;var Xg=Bu,Ite=Nl,Dte=ci,Mte=Ite(Dte,"Map"),f2=Mte,NN=cte,Lte=Xg,$te=f2;function Fte(){this.size=0,this.__data__={hash:new NN,map:new($te||Lte),string:new NN}}var Bte=Fte;function Ute(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var zte=Ute,qte=zte;function Wte(e,t){var r=e.__data__;return qte(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Yg=Wte,Hte=Yg;function Vte(e){var t=Hte(this,e).delete(e);return this.size-=t?1:0,t}var Kte=Vte,Gte=Yg;function Xte(e){return Gte(this,e).get(e)}var Yte=Xte,Qte=Yg;function Jte(e){return Qte(this,e).has(e)}var Zte=Jte,ere=Yg;function tre(e,t){var r=ere(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var rre=tre,nre=Bte,are=Kte,ire=Yte,sre=Zte,ore=rre;function Uu(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Uu.prototype.clear=nre;Uu.prototype.delete=are;Uu.prototype.get=ire;Uu.prototype.has=sre;Uu.prototype.set=ore;var h2=Uu,GR=h2,lre="Expected a function";function p2(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(lre);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var s=e.apply(this,n);return r.cache=i.set(a,s)||i,s};return r.cache=new(p2.Cache||GR),r}p2.Cache=GR;var XR=p2;const cre=it(XR);var ure=XR,dre=500;function fre(e){var t=ure(e,function(n){return r.size===dre&&r.clear(),n}),r=t.cache;return t}var hre=fre,pre=hre,mre=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gre=/\\(\\)?/g,vre=pre(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(mre,function(r,n,a,i){t.push(a?i.replace(gre,"$1"):n||r)}),t}),xre=vre;function yre(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var m2=yre,TN=Mh,bre=m2,wre=Rn,_re=Lu,AN=TN?TN.prototype:void 0,CN=AN?AN.toString:void 0;function YR(e){if(typeof e=="string")return e;if(wre(e))return bre(e,YR)+"";if(_re(e))return CN?CN.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var jre=YR,Sre=jre;function Ere(e){return e==null?"":Sre(e)}var QR=Ere,Nre=Rn,Tre=c2,Are=xre,Cre=QR;function Ore(e,t){return Nre(e)?e:Tre(e,t)?[e]:Are(Cre(e))}var JR=Ore,kre=Lu;function Pre(e){if(typeof e=="string"||kre(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Qg=Pre,Rre=JR,Ire=Qg;function Dre(e,t){t=Rre(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Ire(t[r++])];return r&&r==n?e:void 0}var g2=Dre,Mre=g2;function Lre(e,t,r){var n=e==null?void 0:Mre(e,t);return n===void 0?r:n}var ZR=Lre;const Kn=it(ZR);function $re(e){return e==null}var Fre=$re;const Ke=it(Fre);var Bre=ts,Ure=Rn,zre=rs,qre="[object String]";function Wre(e){return typeof e=="string"||!Ure(e)&&zre(e)&&Bre(e)==qre}var Hre=Wre;const cl=it(Hre);var eI={exports:{}},pt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v2=Symbol.for("react.element"),x2=Symbol.for("react.portal"),Jg=Symbol.for("react.fragment"),Zg=Symbol.for("react.strict_mode"),ev=Symbol.for("react.profiler"),tv=Symbol.for("react.provider"),rv=Symbol.for("react.context"),Vre=Symbol.for("react.server_context"),nv=Symbol.for("react.forward_ref"),av=Symbol.for("react.suspense"),iv=Symbol.for("react.suspense_list"),sv=Symbol.for("react.memo"),ov=Symbol.for("react.lazy"),Kre=Symbol.for("react.offscreen"),tI;tI=Symbol.for("react.module.reference");function xa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case v2:switch(e=e.type,e){case Jg:case ev:case Zg:case av:case iv:return e;default:switch(e=e&&e.$$typeof,e){case Vre:case rv:case nv:case ov:case sv:case tv:return e;default:return t}}case x2:return t}}}pt.ContextConsumer=rv;pt.ContextProvider=tv;pt.Element=v2;pt.ForwardRef=nv;pt.Fragment=Jg;pt.Lazy=ov;pt.Memo=sv;pt.Portal=x2;pt.Profiler=ev;pt.StrictMode=Zg;pt.Suspense=av;pt.SuspenseList=iv;pt.isAsyncMode=function(){return!1};pt.isConcurrentMode=function(){return!1};pt.isContextConsumer=function(e){return xa(e)===rv};pt.isContextProvider=function(e){return xa(e)===tv};pt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===v2};pt.isForwardRef=function(e){return xa(e)===nv};pt.isFragment=function(e){return xa(e)===Jg};pt.isLazy=function(e){return xa(e)===ov};pt.isMemo=function(e){return xa(e)===sv};pt.isPortal=function(e){return xa(e)===x2};pt.isProfiler=function(e){return xa(e)===ev};pt.isStrictMode=function(e){return xa(e)===Zg};pt.isSuspense=function(e){return xa(e)===av};pt.isSuspenseList=function(e){return xa(e)===iv};pt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Jg||e===ev||e===Zg||e===av||e===iv||e===Kre||typeof e=="object"&&e!==null&&(e.$$typeof===ov||e.$$typeof===sv||e.$$typeof===tv||e.$$typeof===rv||e.$$typeof===nv||e.$$typeof===tI||e.getModuleId!==void 0)};pt.typeOf=xa;eI.exports=pt;var Gre=eI.exports,Xre=ts,Yre=rs,Qre="[object Number]";function Jre(e){return typeof e=="number"||Yre(e)&&Xre(e)==Qre}var rI=Jre;const Zre=it(rI);var ene=rI;function tne(e){return ene(e)&&e!=+e}var rne=tne;const Lh=it(rne);var ln=function(t){return t===0?0:t>0?1:-1},Do=function(t){return cl(t)&&t.indexOf("%")===t.length-1},ve=function(t){return Zre(t)&&!Lh(t)},nne=function(t){return Ke(t)},fr=function(t){return ve(t)||cl(t)},ane=0,$h=function(t){var r=++ane;return"".concat(t||"").concat(r)},cn=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ve(t)&&!cl(t))return n;var i;if(Do(t)){var s=t.indexOf("%");i=r*parseFloat(t.slice(0,s))/100}else i=+t;return Lh(i)&&(i=n),a&&i>r&&(i=r),i},gs=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},ine=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},us=function(t,r){return ve(t)&&ve(r)?function(n){return t+n*(r-t)}:function(){return r}};function V1(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Kn(n,t))===r})}var sne=function(t,r){return ve(t)&&ve(r)?t-r:cl(t)&&cl(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function _c(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function K1(e){"@babel/helpers - typeof";return K1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K1(e)}var one=["viewBox","children"],lne=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],ON=["points","pathLength"],Fx={svg:one,polygon:ON,polyline:ON},y2=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],cm=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(T.isValidElement(t)&&(n=t.props),!$u(n))return null;var a={};return Object.keys(n).forEach(function(i){y2.includes(i)&&(a[i]=r||function(s){return n[i](n,s)})}),a},cne=function(t,r,n){return function(a){return t(r,n,a),null}},ul=function(t,r,n){if(!$u(t)||K1(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var s=t[i];y2.includes(i)&&typeof s=="function"&&(a||(a={}),a[i]=cne(s,r,n))}),a},une=["children"],dne=["children"];function kN(e,t){if(e==null)return{};var r=fne(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fne(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var PN={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Oi=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},RN=null,Bx=null,b2=function e(t){if(t===RN&&Array.isArray(Bx))return Bx;var r=[];return T.Children.forEach(t,function(n){Ke(n)||(Gre.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),Bx=r,RN=t,r};function ha(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return Oi(a)}):n=[Oi(t)],b2(e).forEach(function(a){var i=Kn(a,"type.displayName")||Kn(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function $n(e,t){var r=ha(e,t);return r&&r[0]}var IN=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!ve(n)||n<=0||!ve(a)||a<=0)},hne=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],pne=function(t){return t&&t.type&&cl(t.type)&&hne.indexOf(t.type)>=0},mne=function(t,r,n,a){var i,s=(i=Fx==null?void 0:Fx[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Me(t)&&(a&&s.includes(r)||lne.includes(r))||n&&y2.includes(r)},De=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(T.isValidElement(t)&&(a=t.props),!$u(a))return null;var i={};return Object.keys(a).forEach(function(s){var l;mne((l=a)===null||l===void 0?void 0:l[s],s,r,n)&&(i[s]=a[s])}),i},G1=function e(t,r){if(t===r)return!0;var n=T.Children.count(t);if(n!==T.Children.count(r))return!1;if(n===0)return!0;if(n===1)return DN(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],s=r[a];if(Array.isArray(i)||Array.isArray(s)){if(!e(i,s))return!1}else if(!DN(i,s))return!1}return!0},DN=function(t,r){if(Ke(t)&&Ke(r))return!0;if(!Ke(t)&&!Ke(r)){var n=t.props||{},a=n.children,i=kN(n,une),s=r.props||{},l=s.children,c=kN(s,dne);return a&&l?_c(i,c)&&G1(a,l):!a&&!l?_c(i,c):!1}return!1},MN=function(t,r){var n=[],a={};return b2(t).forEach(function(i,s){if(pne(i))n.push(i);else if(i){var l=Oi(i.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var f=u(i,l,s);n.push(f),a[l]=!0}}}),n},gne=function(t){var r=t&&t.type;return r&&PN[r]?PN[r]:null},vne=function(t,r){return b2(r).indexOf(t)},xne=["children","width","height","viewBox","className","style","title","desc"];function X1(){return X1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X1.apply(this,arguments)}function yne(e,t){if(e==null)return{};var r=bne(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function bne(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Y1(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,s=e.style,l=e.title,c=e.desc,u=yne(e,xne),d=a||{width:r,height:n,x:0,y:0},f=He("recharts-surface",i);return z.createElement("svg",X1({},De(u,!0,"svg"),{className:f,width:r,height:n,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),z.createElement("title",null,l),z.createElement("desc",null,c),t)}var wne=["children","className"];function Q1(){return Q1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q1.apply(this,arguments)}function _ne(e,t){if(e==null)return{};var r=jne(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jne(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var ct=z.forwardRef(function(e,t){var r=e.children,n=e.className,a=_ne(e,wne),i=He("recharts-layer",n);return z.createElement("g",Q1({className:i},De(a,!0),{ref:t}),r)}),Ba=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function Sne(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var Ene=Sne,Nne=Ene;function Tne(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:Nne(e,t,r)}var Ane=Tne,Cne="\\ud800-\\udfff",One="\\u0300-\\u036f",kne="\\ufe20-\\ufe2f",Pne="\\u20d0-\\u20ff",Rne=One+kne+Pne,Ine="\\ufe0e\\ufe0f",Dne="\\u200d",Mne=RegExp("["+Dne+Cne+Rne+Ine+"]");function Lne(e){return Mne.test(e)}var nI=Lne;function $ne(e){return e.split("")}var Fne=$ne,aI="\\ud800-\\udfff",Bne="\\u0300-\\u036f",Une="\\ufe20-\\ufe2f",zne="\\u20d0-\\u20ff",qne=Bne+Une+zne,Wne="\\ufe0e\\ufe0f",Hne="["+aI+"]",J1="["+qne+"]",Z1="\\ud83c[\\udffb-\\udfff]",Vne="(?:"+J1+"|"+Z1+")",iI="[^"+aI+"]",sI="(?:\\ud83c[\\udde6-\\uddff]){2}",oI="[\\ud800-\\udbff][\\udc00-\\udfff]",Kne="\\u200d",lI=Vne+"?",cI="["+Wne+"]?",Gne="(?:"+Kne+"(?:"+[iI,sI,oI].join("|")+")"+cI+lI+")*",Xne=cI+lI+Gne,Yne="(?:"+[iI+J1+"?",J1,sI,oI,Hne].join("|")+")",Qne=RegExp(Z1+"(?="+Z1+")|"+Yne+Xne,"g");function Jne(e){return e.match(Qne)||[]}var Zne=Jne,eae=Fne,tae=nI,rae=Zne;function nae(e){return tae(e)?rae(e):eae(e)}var aae=nae,iae=Ane,sae=nI,oae=aae,lae=QR;function cae(e){return function(t){t=lae(t);var r=sae(t)?oae(t):void 0,n=r?r[0]:t.charAt(0),a=r?iae(r,1).join(""):t.slice(1);return n[e]()+a}}var uae=cae,dae=uae,fae=dae("toUpperCase"),hae=fae;const lv=it(hae);function bt(e){return function(){return e}}const uI=Math.cos,um=Math.sin,za=Math.sqrt,dm=Math.PI,cv=2*dm,eb=Math.PI,tb=2*eb,_o=1e-6,pae=tb-_o;function dI(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function mae(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return dI;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class gae{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?dI:mae(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,s){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,l=this._y1,c=n-t,u=a-r,d=s-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>_o)if(!(Math.abs(f*c-u*d)>_o)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-s,v=a-l,g=c*c+u*u,x=p*p+v*v,b=Math.sqrt(g),m=Math.sqrt(h),y=i*Math.tan((eb-Math.acos((g+h-x)/(2*b*m)))/2),_=y/m,w=y/b;Math.abs(_-1)>_o&&this._append`L${t+_*d},${r+_*f}`,this._append`A${i},${i},0,0,${+(f*p>d*v)},${this._x1=t+w*c},${this._y1=r+w*u}`}}arc(t,r,n,a,i,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^s,h=s?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>_o||Math.abs(this._y1-d)>_o)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%tb+tb),h>pae?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>_o&&this._append`A${n},${n},0,${+(h>=eb)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function w2(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new gae(t)}function _2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function fI(e){this._context=e}fI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function uv(e){return new fI(e)}function hI(e){return e[0]}function pI(e){return e[1]}function mI(e,t){var r=bt(!0),n=null,a=uv,i=null,s=w2(l);e=typeof e=="function"?e:e===void 0?hI:bt(e),t=typeof t=="function"?t:t===void 0?pI:bt(t);function l(c){var u,d=(c=_2(c)).length,f,h=!1,p;for(n==null&&(i=a(p=s())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,c),+t(f,u,c));if(p)return i=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:bt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:bt(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:bt(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function I0(e,t,r){var n=null,a=bt(!0),i=null,s=uv,l=null,c=w2(u);e=typeof e=="function"?e:e===void 0?hI:bt(+e),t=typeof t=="function"?t:bt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?pI:bt(+r);function u(f){var h,p,v,g=(f=_2(f)).length,x,b=!1,m,y=new Array(g),_=new Array(g);for(i==null&&(l=s(m=c())),h=0;h<=g;++h){if(!(h<g&&a(x=f[h],h,f))===b)if(b=!b)p=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=h-1;v>=p;--v)l.point(y[v],_[v]);l.lineEnd(),l.areaEnd()}b&&(y[h]=+e(x,h,f),_[h]=+t(x,h,f),l.point(n?+n(x,h,f):y[h],r?+r(x,h,f):_[h]))}if(m)return l=null,m+""||null}function d(){return mI().defined(a).curve(s).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:bt(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:bt(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:bt(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:bt(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:bt(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:bt(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:bt(!!f),u):a},u.curve=function(f){return arguments.length?(s=f,i!=null&&(l=s(i)),u):s},u.context=function(f){return arguments.length?(f==null?i=l=null:l=s(i=f),u):i},u}class gI{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function vae(e){return new gI(e,!0)}function xae(e){return new gI(e,!1)}const j2={draw(e,t){const r=za(t/dm);e.moveTo(r,0),e.arc(0,0,r,0,cv)}},yae={draw(e,t){const r=za(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},vI=za(1/3),bae=vI*2,wae={draw(e,t){const r=za(t/bae),n=r*vI;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},_ae={draw(e,t){const r=za(t),n=-r/2;e.rect(n,n,r,r)}},jae=.8908130915292852,xI=um(dm/10)/um(7*dm/10),Sae=um(cv/10)*xI,Eae=-uI(cv/10)*xI,Nae={draw(e,t){const r=za(t*jae),n=Sae*r,a=Eae*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const s=cv*i/5,l=uI(s),c=um(s);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},Ux=za(3),Tae={draw(e,t){const r=-za(t/(Ux*3));e.moveTo(0,r*2),e.lineTo(-Ux*r,-r),e.lineTo(Ux*r,-r),e.closePath()}},ea=-.5,ta=za(3)/2,rb=1/za(12),Aae=(rb/2+1)*3,Cae={draw(e,t){const r=za(t/Aae),n=r/2,a=r*rb,i=n,s=r*rb+r,l=-i,c=s;e.moveTo(n,a),e.lineTo(i,s),e.lineTo(l,c),e.lineTo(ea*n-ta*a,ta*n+ea*a),e.lineTo(ea*i-ta*s,ta*i+ea*s),e.lineTo(ea*l-ta*c,ta*l+ea*c),e.lineTo(ea*n+ta*a,ea*a-ta*n),e.lineTo(ea*i+ta*s,ea*s-ta*i),e.lineTo(ea*l+ta*c,ea*c-ta*l),e.closePath()}};function Oae(e,t){let r=null,n=w2(a);e=typeof e=="function"?e:bt(e||j2),t=typeof t=="function"?t:bt(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:bt(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:bt(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function fm(){}function hm(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function yI(e){this._context=e}yI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:hm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:hm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kae(e){return new yI(e)}function bI(e){this._context=e}bI.prototype={areaStart:fm,areaEnd:fm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:hm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Pae(e){return new bI(e)}function wI(e){this._context=e}wI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:hm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Rae(e){return new wI(e)}function _I(e){this._context=e}_I.prototype={areaStart:fm,areaEnd:fm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Iae(e){return new _I(e)}function LN(e){return e<0?-1:1}function $N(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),s=(r-e._y1)/(a||n<0&&-0),l=(i*a+s*n)/(n+a);return(LN(i)+LN(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(l))||0}function FN(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function zx(e,t,r){var n=e._x0,a=e._y0,i=e._x1,s=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,s-l*r,i,s)}function pm(e){this._context=e}pm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:zx(this,this._t0,FN(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,zx(this,FN(this,r=$N(this,e,t)),r);break;default:zx(this,this._t0,r=$N(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function jI(e){this._context=new SI(e)}(jI.prototype=Object.create(pm.prototype)).point=function(e,t){pm.prototype.point.call(this,t,e)};function SI(e){this._context=e}SI.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function Dae(e){return new pm(e)}function Mae(e){return new jI(e)}function EI(e){this._context=e}EI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=BN(e),a=BN(t),i=0,s=1;s<r;++i,++s)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function BN(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),s=new Array(r);for(a[0]=0,i[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,s[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,s[t]-=n*s[t-1];for(a[r-1]=s[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(s[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Lae(e){return new EI(e)}function dv(e,t){this._context=e,this._t=t}dv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function $ae(e){return new dv(e,.5)}function Fae(e){return new dv(e,0)}function Bae(e){return new dv(e,1)}function Zc(e,t){if((s=e.length)>1)for(var r=1,n,a,i=e[t[0]],s,l=i.length;r<s;++r)for(a=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function nb(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Uae(e,t){return e[t]}function zae(e){const t=[];return t.key=e,t}function qae(){var e=bt([]),t=nb,r=Zc,n=Uae;function a(i){var s=Array.from(e.apply(this,arguments),zae),l,c=s.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(s[l][u]=[0,+n(f,s[l].key,u,i)]).data=f;for(l=0,d=_2(t(s));l<c;++l)s[d[l]].index=l;return r(s,d),s}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:bt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:bt(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?nb:typeof i=="function"?i:bt(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Zc,a):r},a}function Wae(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,s;a<i;++a){for(s=r=0;r<n;++r)s+=e[r][a][1]||0;if(s)for(r=0;r<n;++r)e[r][a][1]/=s}Zc(e,t)}}function Hae(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var s=0,l=0;s<a;++s)l+=e[s][r][1]||0;n[r][1]+=n[r][0]=-l/2}Zc(e,t)}}function Vae(e,t){if(!(!((s=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,s;n<i;++n){for(var l=0,c=0,u=0;l<s;++l){for(var d=e[t[l]],f=d[n][1]||0,h=d[n-1][1]||0,p=(f-h)/2,v=0;v<l;++v){var g=e[t[v]],x=g[n][1]||0,b=g[n-1][1]||0;p+=x-b}c+=f,u+=p*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Zc(e,t)}}function Cf(e){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cf(e)}var Kae=["type","size","sizeType"];function ab(){return ab=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ab.apply(this,arguments)}function UN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UN(Object(r),!0).forEach(function(n){Gae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gae(e,t,r){return t=Xae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xae(e){var t=Yae(e,"string");return Cf(t)=="symbol"?t:t+""}function Yae(e,t){if(Cf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qae(e,t){if(e==null)return{};var r=Jae(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Jae(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var NI={symbolCircle:j2,symbolCross:yae,symbolDiamond:wae,symbolSquare:_ae,symbolStar:Nae,symbolTriangle:Tae,symbolWye:Cae},Zae=Math.PI/180,eie=function(t){var r="symbol".concat(lv(t));return NI[r]||j2},tie=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*Zae;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},rie=function(t,r){NI["symbol".concat(lv(t))]=r},S2=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,s=t.sizeType,l=s===void 0?"area":s,c=Qae(t,Kae),u=zN(zN({},c),{},{type:n,size:i,sizeType:l}),d=function(){var x=eie(n),b=Oae().type(x).size(tie(i,l,n));return b()},f=u.className,h=u.cx,p=u.cy,v=De(u,!0);return h===+h&&p===+p&&i===+i?z.createElement("path",ab({},v,{className:He("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:d()})):null};S2.registerSymbol=rie;function eu(e){"@babel/helpers - typeof";return eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eu(e)}function ib(){return ib=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ib.apply(this,arguments)}function qN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nie(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qN(Object(r),!0).forEach(function(n){Of(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,AI(n.key),n)}}function sie(e,t,r){return t&&iie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function oie(e,t,r){return t=mm(t),lie(e,TI()?Reflect.construct(t,r||[],mm(e).constructor):t.apply(e,r))}function lie(e,t){if(t&&(eu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cie(e)}function cie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TI=function(){return!!e})()}function mm(e){return mm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mm(e)}function uie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sb(e,t)}function sb(e,t){return sb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},sb(e,t)}function Of(e,t,r){return t=AI(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AI(e){var t=die(e,"string");return eu(t)=="symbol"?t:t+""}function die(e,t){if(eu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(eu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ra=32,E2=function(e){function t(){return aie(this,t),oie(this,t,arguments)}return uie(t,e),sie(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=ra/2,s=ra/6,l=ra/3,c=n.inactive?a:n.color;if(n.type==="plainline")return z.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:ra,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return z.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(ra,"M").concat(2*l,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return z.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(ra/8,"h").concat(ra,"v").concat(ra*3/4,"h").concat(-ra,"z"),className:"recharts-legend-icon"});if(z.isValidElement(n.legendIcon)){var u=nie({},n);return delete u.legendIcon,z.cloneElement(n.legendIcon,u)}return z.createElement(S2,{fill:c,cx:i,cy:i,size:ra,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,s=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:ra,height:ra},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,v){var g=p.formatter||c,x=He(Of(Of({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",p.inactive));if(p.type==="none")return null;var b=Me(p.value)?null:p.value;Ba(!Me(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var m=p.inactive?u:p.color;return z.createElement("li",ib({className:x,style:f,key:"legend-item-".concat(v)},ul(n.props,p,v)),z.createElement(Y1,{width:s,height:s,viewBox:d,style:h},n.renderIcon(p)),z.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},g?g(b,p,v):b))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,s=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?s:"left"};return z.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(T.PureComponent);Of(E2,"displayName","Legend");Of(E2,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var fie=Xg;function hie(){this.__data__=new fie,this.size=0}var pie=hie;function mie(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var gie=mie;function vie(e){return this.__data__.get(e)}var xie=vie;function yie(e){return this.__data__.has(e)}var bie=yie,wie=Xg,_ie=f2,jie=h2,Sie=200;function Eie(e,t){var r=this.__data__;if(r instanceof wie){var n=r.__data__;if(!_ie||n.length<Sie-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new jie(n)}return r.set(e,t),this.size=r.size,this}var Nie=Eie,Tie=Xg,Aie=pie,Cie=gie,Oie=xie,kie=bie,Pie=Nie;function zu(e){var t=this.__data__=new Tie(e);this.size=t.size}zu.prototype.clear=Aie;zu.prototype.delete=Cie;zu.prototype.get=Oie;zu.prototype.has=kie;zu.prototype.set=Pie;var CI=zu,Rie="__lodash_hash_undefined__";function Iie(e){return this.__data__.set(e,Rie),this}var Die=Iie;function Mie(e){return this.__data__.has(e)}var Lie=Mie,$ie=h2,Fie=Die,Bie=Lie;function gm(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new $ie;++t<r;)this.add(e[t])}gm.prototype.add=gm.prototype.push=Fie;gm.prototype.has=Bie;var OI=gm;function Uie(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var kI=Uie;function zie(e,t){return e.has(t)}var PI=zie,qie=OI,Wie=kI,Hie=PI,Vie=1,Kie=2;function Gie(e,t,r,n,a,i){var s=r&Vie,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var f=-1,h=!0,p=r&Kie?new qie:void 0;for(i.set(e,t),i.set(t,e);++f<l;){var v=e[f],g=t[f];if(n)var x=s?n(g,v,f,t,e,i):n(v,g,f,e,t,i);if(x!==void 0){if(x)continue;h=!1;break}if(p){if(!Wie(t,function(b,m){if(!Hie(p,m)&&(v===b||a(v,b,r,n,i)))return p.push(m)})){h=!1;break}}else if(!(v===g||a(v,g,r,n,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var RI=Gie,Xie=ci,Yie=Xie.Uint8Array,Qie=Yie;function Jie(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var Zie=Jie;function ese(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var N2=ese,WN=Mh,HN=Qie,tse=d2,rse=RI,nse=Zie,ase=N2,ise=1,sse=2,ose="[object Boolean]",lse="[object Date]",cse="[object Error]",use="[object Map]",dse="[object Number]",fse="[object RegExp]",hse="[object Set]",pse="[object String]",mse="[object Symbol]",gse="[object ArrayBuffer]",vse="[object DataView]",VN=WN?WN.prototype:void 0,qx=VN?VN.valueOf:void 0;function xse(e,t,r,n,a,i,s){switch(r){case vse:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case gse:return!(e.byteLength!=t.byteLength||!i(new HN(e),new HN(t)));case ose:case lse:case dse:return tse(+e,+t);case cse:return e.name==t.name&&e.message==t.message;case fse:case pse:return e==t+"";case use:var l=nse;case hse:var c=n&ise;if(l||(l=ase),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;n|=sse,s.set(e,t);var d=rse(l(e),l(t),n,a,i,s);return s.delete(e),d;case mse:if(qx)return qx.call(e)==qx.call(t)}return!1}var yse=xse;function bse(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var II=bse,wse=II,_se=Rn;function jse(e,t,r){var n=t(e);return _se(e)?n:wse(n,r(e))}var Sse=jse;function Ese(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[a++]=s)}return i}var Nse=Ese;function Tse(){return[]}var Ase=Tse,Cse=Nse,Ose=Ase,kse=Object.prototype,Pse=kse.propertyIsEnumerable,KN=Object.getOwnPropertySymbols,Rse=KN?function(e){return e==null?[]:(e=Object(e),Cse(KN(e),function(t){return Pse.call(e,t)}))}:Ose,Ise=Rse;function Dse(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Mse=Dse,Lse=ts,$se=rs,Fse="[object Arguments]";function Bse(e){return $se(e)&&Lse(e)==Fse}var Use=Bse,GN=Use,zse=rs,DI=Object.prototype,qse=DI.hasOwnProperty,Wse=DI.propertyIsEnumerable,Hse=GN(function(){return arguments}())?GN:function(e){return zse(e)&&qse.call(e,"callee")&&!Wse.call(e,"callee")},T2=Hse,vm={exports:{}};function Vse(){return!1}var Kse=Vse;vm.exports;(function(e,t){var r=ci,n=Kse,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===a,l=s?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(vm,vm.exports);var MI=vm.exports,Gse=9007199254740991,Xse=/^(?:0|[1-9]\d*)$/;function Yse(e,t){var r=typeof e;return t=t??Gse,!!t&&(r=="number"||r!="symbol"&&Xse.test(e))&&e>-1&&e%1==0&&e<t}var A2=Yse,Qse=9007199254740991;function Jse(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Qse}var C2=Jse,Zse=ts,eoe=C2,toe=rs,roe="[object Arguments]",noe="[object Array]",aoe="[object Boolean]",ioe="[object Date]",soe="[object Error]",ooe="[object Function]",loe="[object Map]",coe="[object Number]",uoe="[object Object]",doe="[object RegExp]",foe="[object Set]",hoe="[object String]",poe="[object WeakMap]",moe="[object ArrayBuffer]",goe="[object DataView]",voe="[object Float32Array]",xoe="[object Float64Array]",yoe="[object Int8Array]",boe="[object Int16Array]",woe="[object Int32Array]",_oe="[object Uint8Array]",joe="[object Uint8ClampedArray]",Soe="[object Uint16Array]",Eoe="[object Uint32Array]",Et={};Et[voe]=Et[xoe]=Et[yoe]=Et[boe]=Et[woe]=Et[_oe]=Et[joe]=Et[Soe]=Et[Eoe]=!0;Et[roe]=Et[noe]=Et[moe]=Et[aoe]=Et[goe]=Et[ioe]=Et[soe]=Et[ooe]=Et[loe]=Et[coe]=Et[uoe]=Et[doe]=Et[foe]=Et[hoe]=Et[poe]=!1;function Noe(e){return toe(e)&&eoe(e.length)&&!!Et[Zse(e)]}var Toe=Noe;function Aoe(e){return function(t){return e(t)}}var LI=Aoe,xm={exports:{}};xm.exports;(function(e,t){var r=HR,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,s=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();e.exports=l})(xm,xm.exports);var Coe=xm.exports,Ooe=Toe,koe=LI,XN=Coe,YN=XN&&XN.isTypedArray,Poe=YN?koe(YN):Ooe,$I=Poe,Roe=Mse,Ioe=T2,Doe=Rn,Moe=MI,Loe=A2,$oe=$I,Foe=Object.prototype,Boe=Foe.hasOwnProperty;function Uoe(e,t){var r=Doe(e),n=!r&&Ioe(e),a=!r&&!n&&Moe(e),i=!r&&!n&&!a&&$oe(e),s=r||n||a||i,l=s?Roe(e.length,String):[],c=l.length;for(var u in e)(t||Boe.call(e,u))&&!(s&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Loe(u,c)))&&l.push(u);return l}var zoe=Uoe,qoe=Object.prototype;function Woe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||qoe;return e===r}var Hoe=Woe;function Voe(e,t){return function(r){return e(t(r))}}var FI=Voe,Koe=FI,Goe=Koe(Object.keys,Object),Xoe=Goe,Yoe=Hoe,Qoe=Xoe,Joe=Object.prototype,Zoe=Joe.hasOwnProperty;function ele(e){if(!Yoe(e))return Qoe(e);var t=[];for(var r in Object(e))Zoe.call(e,r)&&r!="constructor"&&t.push(r);return t}var tle=ele,rle=u2,nle=C2;function ale(e){return e!=null&&nle(e.length)&&!rle(e)}var Fh=ale,ile=zoe,sle=tle,ole=Fh;function lle(e){return ole(e)?ile(e):sle(e)}var fv=lle,cle=Sse,ule=Ise,dle=fv;function fle(e){return cle(e,dle,ule)}var hle=fle,QN=hle,ple=1,mle=Object.prototype,gle=mle.hasOwnProperty;function vle(e,t,r,n,a,i){var s=r&ple,l=QN(e),c=l.length,u=QN(t),d=u.length;if(c!=d&&!s)return!1;for(var f=c;f--;){var h=l[f];if(!(s?h in t:gle.call(t,h)))return!1}var p=i.get(e),v=i.get(t);if(p&&v)return p==t&&v==e;var g=!0;i.set(e,t),i.set(t,e);for(var x=s;++f<c;){h=l[f];var b=e[h],m=t[h];if(n)var y=s?n(m,b,h,t,e,i):n(b,m,h,e,t,i);if(!(y===void 0?b===m||a(b,m,r,n,i):y)){g=!1;break}x||(x=h=="constructor")}if(g&&!x){var _=e.constructor,w=t.constructor;_!=w&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof w=="function"&&w instanceof w)&&(g=!1)}return i.delete(e),i.delete(t),g}var xle=vle,yle=Nl,ble=ci,wle=yle(ble,"DataView"),_le=wle,jle=Nl,Sle=ci,Ele=jle(Sle,"Promise"),Nle=Ele,Tle=Nl,Ale=ci,Cle=Tle(Ale,"Set"),BI=Cle,Ole=Nl,kle=ci,Ple=Ole(kle,"WeakMap"),Rle=Ple,ob=_le,lb=f2,cb=Nle,ub=BI,db=Rle,UI=ts,qu=KR,JN="[object Map]",Ile="[object Object]",ZN="[object Promise]",eT="[object Set]",tT="[object WeakMap]",rT="[object DataView]",Dle=qu(ob),Mle=qu(lb),Lle=qu(cb),$le=qu(ub),Fle=qu(db),jo=UI;(ob&&jo(new ob(new ArrayBuffer(1)))!=rT||lb&&jo(new lb)!=JN||cb&&jo(cb.resolve())!=ZN||ub&&jo(new ub)!=eT||db&&jo(new db)!=tT)&&(jo=function(e){var t=UI(e),r=t==Ile?e.constructor:void 0,n=r?qu(r):"";if(n)switch(n){case Dle:return rT;case Mle:return JN;case Lle:return ZN;case $le:return eT;case Fle:return tT}return t});var Ble=jo,Wx=CI,Ule=RI,zle=yse,qle=xle,nT=Ble,aT=Rn,iT=MI,Wle=$I,Hle=1,sT="[object Arguments]",oT="[object Array]",D0="[object Object]",Vle=Object.prototype,lT=Vle.hasOwnProperty;function Kle(e,t,r,n,a,i){var s=aT(e),l=aT(t),c=s?oT:nT(e),u=l?oT:nT(t);c=c==sT?D0:c,u=u==sT?D0:u;var d=c==D0,f=u==D0,h=c==u;if(h&&iT(e)){if(!iT(t))return!1;s=!0,d=!1}if(h&&!d)return i||(i=new Wx),s||Wle(e)?Ule(e,t,r,n,a,i):zle(e,t,c,r,n,a,i);if(!(r&Hle)){var p=d&&lT.call(e,"__wrapped__"),v=f&&lT.call(t,"__wrapped__");if(p||v){var g=p?e.value():e,x=v?t.value():t;return i||(i=new Wx),a(g,x,r,n,i)}}return h?(i||(i=new Wx),qle(e,t,r,n,a,i)):!1}var Gle=Kle,Xle=Gle,cT=rs;function zI(e,t,r,n,a){return e===t?!0:e==null||t==null||!cT(e)&&!cT(t)?e!==e&&t!==t:Xle(e,t,r,n,zI,a)}var O2=zI,Yle=CI,Qle=O2,Jle=1,Zle=2;function ece(e,t,r,n){var a=r.length,i=a,s=!n;if(e==null)return!i;for(e=Object(e);a--;){var l=r[a];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=r[a];var c=l[0],u=e[c],d=l[1];if(s&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new Yle;if(n)var h=n(u,d,c,e,t,f);if(!(h===void 0?Qle(d,u,Jle|Zle,n,f):h))return!1}}return!0}var tce=ece,rce=no;function nce(e){return e===e&&!rce(e)}var qI=nce,ace=qI,ice=fv;function sce(e){for(var t=ice(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,ace(a)]}return t}var oce=sce;function lce(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var WI=lce,cce=tce,uce=oce,dce=WI;function fce(e){var t=uce(e);return t.length==1&&t[0][2]?dce(t[0][0],t[0][1]):function(r){return r===e||cce(r,e,t)}}var hce=fce;function pce(e,t){return e!=null&&t in Object(e)}var mce=pce,gce=JR,vce=T2,xce=Rn,yce=A2,bce=C2,wce=Qg;function _ce(e,t,r){t=gce(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var s=wce(t[n]);if(!(i=e!=null&&r(e,s)))break;e=e[s]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&bce(a)&&yce(s,a)&&(xce(e)||vce(e)))}var jce=_ce,Sce=mce,Ece=jce;function Nce(e,t){return e!=null&&Ece(e,t,Sce)}var Tce=Nce,Ace=O2,Cce=ZR,Oce=Tce,kce=c2,Pce=qI,Rce=WI,Ice=Qg,Dce=1,Mce=2;function Lce(e,t){return kce(e)&&Pce(t)?Rce(Ice(e),t):function(r){var n=Cce(r,e);return n===void 0&&n===t?Oce(r,e):Ace(t,n,Dce|Mce)}}var $ce=Lce;function Fce(e){return e}var Wu=Fce;function Bce(e){return function(t){return t==null?void 0:t[e]}}var Uce=Bce,zce=g2;function qce(e){return function(t){return zce(t,e)}}var Wce=qce,Hce=Uce,Vce=Wce,Kce=c2,Gce=Qg;function Xce(e){return Kce(e)?Hce(Gce(e)):Vce(e)}var Yce=Xce,Qce=hce,Jce=$ce,Zce=Wu,eue=Rn,tue=Yce;function rue(e){return typeof e=="function"?e:e==null?Zce:typeof e=="object"?eue(e)?Jce(e[0],e[1]):Qce(e):tue(e)}var ui=rue;function nue(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var HI=nue;function aue(e){return e!==e}var iue=aue;function sue(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var oue=sue,lue=HI,cue=iue,uue=oue;function due(e,t,r){return t===t?uue(e,t,r):lue(e,cue,r)}var fue=due,hue=fue;function pue(e,t){var r=e==null?0:e.length;return!!r&&hue(e,t,0)>-1}var mue=pue;function gue(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var vue=gue;function xue(){}var yue=xue,Hx=BI,bue=yue,wue=N2,_ue=1/0,jue=Hx&&1/wue(new Hx([,-0]))[1]==_ue?function(e){return new Hx(e)}:bue,Sue=jue,Eue=OI,Nue=mue,Tue=vue,Aue=PI,Cue=Sue,Oue=N2,kue=200;function Pue(e,t,r){var n=-1,a=Nue,i=e.length,s=!0,l=[],c=l;if(r)s=!1,a=Tue;else if(i>=kue){var u=t?null:Cue(e);if(u)return Oue(u);s=!1,a=Aue,c=new Eue}else c=t?[]:l;e:for(;++n<i;){var d=e[n],f=t?t(d):d;if(d=r||d!==0?d:0,s&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),l.push(d)}else a(c,f,r)||(c!==l&&c.push(f),l.push(d))}return l}var Rue=Pue,Iue=ui,Due=Rue;function Mue(e,t){return e&&e.length?Due(e,Iue(t)):[]}var Lue=Mue;const uT=it(Lue);function VI(e,t,r){return t===!0?uT(e,r):Me(t)?uT(e,t):e}function tu(e){"@babel/helpers - typeof";return tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tu(e)}var $ue=["ref"];function dT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dT(Object(r),!0).forEach(function(n){hv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GI(n.key),n)}}function Bue(e,t,r){return t&&fT(e.prototype,t),r&&fT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Uue(e,t,r){return t=ym(t),zue(e,KI()?Reflect.construct(t,r||[],ym(e).constructor):t.apply(e,r))}function zue(e,t){if(t&&(tu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return que(e)}function que(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KI=function(){return!!e})()}function ym(e){return ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ym(e)}function Wue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fb(e,t)}function fb(e,t){return fb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},fb(e,t)}function hv(e,t,r){return t=GI(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GI(e){var t=Hue(e,"string");return tu(t)=="symbol"?t:t+""}function Hue(e,t){if(tu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(tu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Vue(e,t){if(e==null)return{};var r=Kue(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Kue(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Gue(e){return e.value}function Xue(e,t){if(z.isValidElement(e))return z.cloneElement(e,t);if(typeof e=="function")return z.createElement(e,t);t.ref;var r=Vue(t,$ue);return z.createElement(E2,r)}var hT=1,ki=function(e){function t(){var r;Fue(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Uue(this,t,[].concat(a)),hv(r,"lastBoundingBox",{width:-1,height:-1}),r}return Wue(t,e),Bue(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>hT||Math.abs(a.height-this.lastBoundingBox.height)>hT)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?fi({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,s=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(s==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();f={left:((u||0)-p.width)/2}}else f=s==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();h={top:((d||0)-v.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return fi(fi({},f),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,s=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=fi(fi({position:"absolute",width:s||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return z.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){n.wrapperNode=p}},Xue(i,fi(fi({},this.props),{},{payload:VI(d,u,Gue)})))}}],[{key:"getWithHeight",value:function(n,a){var i=fi(fi({},this.defaultProps),n.props),s=i.layout;return s==="vertical"&&ve(n.props.height)?{height:n.props.height}:s==="horizontal"?{width:n.props.width||a}:null}}])}(T.PureComponent);hv(ki,"displayName","Legend");hv(ki,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var pT=Mh,Yue=T2,Que=Rn,mT=pT?pT.isConcatSpreadable:void 0;function Jue(e){return Que(e)||Yue(e)||!!(mT&&e&&e[mT])}var Zue=Jue,ede=II,tde=Zue;function XI(e,t,r,n,a){var i=-1,s=e.length;for(r||(r=tde),a||(a=[]);++i<s;){var l=e[i];t>0&&r(l)?t>1?XI(l,t-1,r,n,a):ede(a,l):n||(a[a.length]=l)}return a}var YI=XI;function rde(e){return function(t,r,n){for(var a=-1,i=Object(t),s=n(t),l=s.length;l--;){var c=s[e?l:++a];if(r(i[c],c,i)===!1)break}return t}}var nde=rde,ade=nde,ide=ade(),sde=ide,ode=sde,lde=fv;function cde(e,t){return e&&ode(e,t,lde)}var QI=cde,ude=Fh;function dde(e,t){return function(r,n){if(r==null)return r;if(!ude(r))return e(r,n);for(var a=r.length,i=t?a:-1,s=Object(r);(t?i--:++i<a)&&n(s[i],i,s)!==!1;);return r}}var fde=dde,hde=QI,pde=fde,mde=pde(hde),k2=mde,gde=k2,vde=Fh;function xde(e,t){var r=-1,n=vde(e)?Array(e.length):[];return gde(e,function(a,i,s){n[++r]=t(a,i,s)}),n}var JI=xde;function yde(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var bde=yde,gT=Lu;function wde(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=gT(e),s=t!==void 0,l=t===null,c=t===t,u=gT(t);if(!l&&!u&&!i&&e>t||i&&s&&c&&!l&&!u||n&&s&&c||!r&&c||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||l&&r&&a||!s&&a||!c)return-1}return 0}var _de=wde,jde=_de;function Sde(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,s=a.length,l=r.length;++n<s;){var c=jde(a[n],i[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var Ede=Sde,Vx=m2,Nde=g2,Tde=ui,Ade=JI,Cde=bde,Ode=LI,kde=Ede,Pde=Wu,Rde=Rn;function Ide(e,t,r){t.length?t=Vx(t,function(i){return Rde(i)?function(s){return Nde(s,i.length===1?i[0]:i)}:i}):t=[Pde];var n=-1;t=Vx(t,Ode(Tde));var a=Ade(e,function(i,s,l){var c=Vx(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return Cde(a,function(i,s){return kde(i,s,r)})}var Dde=Ide;function Mde(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Lde=Mde,$de=Lde,vT=Math.max;function Fde(e,t,r){return t=vT(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=vT(n.length-t,0),s=Array(i);++a<i;)s[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(s),$de(e,this,l)}}var Bde=Fde;function Ude(e){return function(){return e}}var zde=Ude,qde=Nl,Wde=function(){try{var e=qde(Object,"defineProperty");return e({},"",{}),e}catch{}}(),ZI=Wde,Hde=zde,xT=ZI,Vde=Wu,Kde=xT?function(e,t){return xT(e,"toString",{configurable:!0,enumerable:!1,value:Hde(t),writable:!0})}:Vde,Gde=Kde,Xde=800,Yde=16,Qde=Date.now;function Jde(e){var t=0,r=0;return function(){var n=Qde(),a=Yde-(n-r);if(r=n,a>0){if(++t>=Xde)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Zde=Jde,efe=Gde,tfe=Zde,rfe=tfe(efe),nfe=rfe,afe=Wu,ife=Bde,sfe=nfe;function ofe(e,t){return sfe(ife(e,t,afe),e+"")}var lfe=ofe,cfe=d2,ufe=Fh,dfe=A2,ffe=no;function hfe(e,t,r){if(!ffe(r))return!1;var n=typeof t;return(n=="number"?ufe(r)&&dfe(t,r.length):n=="string"&&t in r)?cfe(r[t],e):!1}var pv=hfe,pfe=YI,mfe=Dde,gfe=lfe,yT=pv,vfe=gfe(function(e,t){if(e==null)return[];var r=t.length;return r>1&&yT(e,t[0],t[1])?t=[]:r>2&&yT(t[0],t[1],t[2])&&(t=[t[0]]),mfe(e,pfe(t,1),[])}),xfe=vfe;const P2=it(xfe);function kf(e){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kf(e)}function hb(){return hb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hb.apply(this,arguments)}function yfe(e,t){return jfe(e)||_fe(e,t)||wfe(e,t)||bfe()}function bfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wfe(e,t){if(e){if(typeof e=="string")return bT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bT(e,t)}}function bT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _fe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function jfe(e){if(Array.isArray(e))return e}function wT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Kx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wT(Object(r),!0).forEach(function(n){Sfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sfe(e,t,r){return t=Efe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Efe(e){var t=Nfe(e,"string");return kf(t)=="symbol"?t:t+""}function Nfe(e,t){if(kf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tfe(e){return Array.isArray(e)&&fr(e[0])&&fr(e[1])?e.join(" ~ "):e}var Afe=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,s=t.itemStyle,l=s===void 0?{}:s,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,h=t.itemSorter,p=t.wrapperClassName,v=t.labelClassName,g=t.label,x=t.labelFormatter,b=t.accessibilityLayer,m=b===void 0?!1:b,y=function(){if(d&&d.length){var D={padding:0,margin:0},k=(h?P2(d,h):d).map(function(V,K){if(V.type==="none")return null;var ie=Kx({display:"block",paddingTop:4,paddingBottom:4,color:V.color||"#000"},l),G=V.formatter||f||Tfe,X=V.value,re=V.name,de=X,me=re;if(G&&de!=null&&me!=null){var R=G(X,re,V,K,d);if(Array.isArray(R)){var W=yfe(R,2);de=W[0],me=W[1]}else de=R}return z.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(K),style:ie},fr(me)?z.createElement("span",{className:"recharts-tooltip-item-name"},me):null,fr(me)?z.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,z.createElement("span",{className:"recharts-tooltip-item-value"},de),z.createElement("span",{className:"recharts-tooltip-item-unit"},V.unit||""))});return z.createElement("ul",{className:"recharts-tooltip-item-list",style:D},k)}return null},_=Kx({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),w=Kx({margin:0},u),j=!Ke(g),S=j?g:"",E=He("recharts-default-tooltip",p),N=He("recharts-tooltip-label",v);j&&x&&d!==void 0&&d!==null&&(S=x(g,d));var A=m?{role:"status","aria-live":"assertive"}:{};return z.createElement("div",hb({className:E,style:_},A),z.createElement("p",{className:N,style:w},z.isValidElement(S)?S:"".concat(S)),y())};function Pf(e){"@babel/helpers - typeof";return Pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pf(e)}function M0(e,t,r){return t=Cfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cfe(e){var t=Ofe(e,"string");return Pf(t)=="symbol"?t:t+""}function Ofe(e,t){if(Pf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ud="recharts-tooltip-wrapper",kfe={visibility:"hidden"};function Pfe(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return He(ud,M0(M0(M0(M0({},"".concat(ud,"-right"),ve(r)&&t&&ve(t.x)&&r>=t.x),"".concat(ud,"-left"),ve(r)&&t&&ve(t.x)&&r<t.x),"".concat(ud,"-bottom"),ve(n)&&t&&ve(t.y)&&n>=t.y),"".concat(ud,"-top"),ve(n)&&t&&ve(t.y)&&n<t.y))}function _T(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,s=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&ve(i[n]))return i[n];var d=r[n]-l-a,f=r[n]+a;if(t[n])return s[n]?d:f;if(s[n]){var h=d,p=c[n];return h<p?Math.max(f,c[n]):Math.max(d,c[n])}var v=f+l,g=c[n]+u;return v>g?Math.max(d,c[n]):Math.max(f,c[n])}function Rfe(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Ife(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,s=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return s.height>0&&s.width>0&&r?(d=_T({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),f=_T({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=Rfe({translateX:d,translateY:f,useTranslate3d:l})):u=kfe,{cssProperties:u,cssClasses:Pfe({translateX:d,translateY:f,coordinate:r})}}function ru(e){"@babel/helpers - typeof";return ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ru(e)}function jT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ST(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jT(Object(r),!0).forEach(function(n){mb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mfe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tD(n.key),n)}}function Lfe(e,t,r){return t&&Mfe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $fe(e,t,r){return t=bm(t),Ffe(e,eD()?Reflect.construct(t,r||[],bm(e).constructor):t.apply(e,r))}function Ffe(e,t){if(t&&(ru(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bfe(e)}function Bfe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eD=function(){return!!e})()}function bm(e){return bm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bm(e)}function Ufe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pb(e,t)}function pb(e,t){return pb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},pb(e,t)}function mb(e,t,r){return t=tD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tD(e){var t=zfe(e,"string");return ru(t)=="symbol"?t:t+""}function zfe(e,t){if(ru(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ru(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ET=1,qfe=function(e){function t(){var r;Dfe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=$fe(this,t,[].concat(a)),mb(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),mb(r,"handleKeyDown",function(s){if(s.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return Ufe(t,e),Lfe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>ET||Math.abs(n.height-this.state.lastBoundingBox.height)>ET)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,h=a.isAnimationActive,p=a.offset,v=a.position,g=a.reverseDirection,x=a.useTranslate3d,b=a.viewBox,m=a.wrapperStyle,y=Ife({allowEscapeViewBox:s,coordinate:d,offsetTopLeft:p,position:v,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:b}),_=y.cssClasses,w=y.cssProperties,j=ST(ST({transition:h&&i?"transform ".concat(l,"ms ").concat(c):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},m);return z.createElement("div",{tabIndex:-1,className:_,style:j,ref:function(E){n.wrapperNode=E}},u)}}])}(T.PureComponent),Wfe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Hu={isSsr:Wfe()};function nu(e){"@babel/helpers - typeof";return nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nu(e)}function NT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function TT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NT(Object(r),!0).forEach(function(n){R2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vfe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nD(n.key),n)}}function Kfe(e,t,r){return t&&Vfe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gfe(e,t,r){return t=wm(t),Xfe(e,rD()?Reflect.construct(t,r||[],wm(e).constructor):t.apply(e,r))}function Xfe(e,t){if(t&&(nu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yfe(e)}function Yfe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rD=function(){return!!e})()}function wm(e){return wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wm(e)}function Qfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gb(e,t)}function gb(e,t){return gb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},gb(e,t)}function R2(e,t,r){return t=nD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nD(e){var t=Jfe(e,"string");return nu(t)=="symbol"?t:t+""}function Jfe(e,t){if(nu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(nu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Zfe(e){return e.dataKey}function ehe(e,t){return z.isValidElement(e)?z.cloneElement(e,t):typeof e=="function"?z.createElement(e,t):z.createElement(Afe,t)}var xr=function(e){function t(){return Hfe(this,t),Gfe(this,t,arguments)}return Qfe(t,e),Kfe(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,h=a.isAnimationActive,p=a.offset,v=a.payload,g=a.payloadUniqBy,x=a.position,b=a.reverseDirection,m=a.useTranslate3d,y=a.viewBox,_=a.wrapperStyle,w=v??[];f&&w.length&&(w=VI(v.filter(function(S){return S.value!=null&&(S.hide!==!0||n.props.includeHidden)}),g,Zfe));var j=w.length>0;return z.createElement(qfe,{allowEscapeViewBox:s,animationDuration:l,animationEasing:c,isAnimationActive:h,active:i,coordinate:d,hasPayload:j,offset:p,position:x,reverseDirection:b,useTranslate3d:m,viewBox:y,wrapperStyle:_},ehe(u,TT(TT({},this.props),{},{payload:w})))}}])}(T.PureComponent);R2(xr,"displayName","Tooltip");R2(xr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Hu.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var the=ci,rhe=function(){return the.Date.now()},nhe=rhe,ahe=/\s/;function ihe(e){for(var t=e.length;t--&&ahe.test(e.charAt(t)););return t}var she=ihe,ohe=she,lhe=/^\s+/;function che(e){return e&&e.slice(0,ohe(e)+1).replace(lhe,"")}var uhe=che,dhe=uhe,AT=no,fhe=Lu,CT=NaN,hhe=/^[-+]0x[0-9a-f]+$/i,phe=/^0b[01]+$/i,mhe=/^0o[0-7]+$/i,ghe=parseInt;function vhe(e){if(typeof e=="number")return e;if(fhe(e))return CT;if(AT(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=AT(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=dhe(e);var r=phe.test(e);return r||mhe.test(e)?ghe(e.slice(2),r?2:8):hhe.test(e)?CT:+e}var aD=vhe,xhe=no,Gx=nhe,OT=aD,yhe="Expected a function",bhe=Math.max,whe=Math.min;function _he(e,t,r){var n,a,i,s,l,c,u=0,d=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(yhe);t=OT(t)||0,xhe(r)&&(d=!!r.leading,f="maxWait"in r,i=f?bhe(OT(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h);function p(j){var S=n,E=a;return n=a=void 0,u=j,s=e.apply(E,S),s}function v(j){return u=j,l=setTimeout(b,t),d?p(j):s}function g(j){var S=j-c,E=j-u,N=t-S;return f?whe(N,i-E):N}function x(j){var S=j-c,E=j-u;return c===void 0||S>=t||S<0||f&&E>=i}function b(){var j=Gx();if(x(j))return m(j);l=setTimeout(b,g(j))}function m(j){return l=void 0,h&&n?p(j):(n=a=void 0,s)}function y(){l!==void 0&&clearTimeout(l),u=0,n=c=a=l=void 0}function _(){return l===void 0?s:m(Gx())}function w(){var j=Gx(),S=x(j);if(n=arguments,a=this,c=j,S){if(l===void 0)return v(c);if(f)return clearTimeout(l),l=setTimeout(b,t),p(c)}return l===void 0&&(l=setTimeout(b,t)),s}return w.cancel=y,w.flush=_,w}var jhe=_he,She=jhe,Ehe=no,Nhe="Expected a function";function The(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(Nhe);return Ehe(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),She(e,t,{leading:n,maxWait:t,trailing:a})}var Ahe=The;const iD=it(Ahe);function Rf(e){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rf(e)}function kT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function L0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kT(Object(r),!0).forEach(function(n){Che(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Che(e,t,r){return t=Ohe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ohe(e){var t=khe(e,"string");return Rf(t)=="symbol"?t:t+""}function khe(e,t){if(Rf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Phe(e,t){return Mhe(e)||Dhe(e,t)||Ihe(e,t)||Rhe()}function Rhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ihe(e,t){if(e){if(typeof e=="string")return PT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PT(e,t)}}function PT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dhe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function Mhe(e){if(Array.isArray(e))return e}var Pi=T.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,s=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,h=e.maxHeight,p=e.children,v=e.debounce,g=v===void 0?0:v,x=e.id,b=e.className,m=e.onResize,y=e.style,_=y===void 0?{}:y,w=T.useRef(null),j=T.useRef();j.current=m,T.useImperativeHandle(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var S=T.useState({containerWidth:a.width,containerHeight:a.height}),E=Phe(S,2),N=E[0],A=E[1],O=T.useCallback(function(k,V){A(function(K){var ie=Math.round(k),G=Math.round(V);return K.containerWidth===ie&&K.containerHeight===G?K:{containerWidth:ie,containerHeight:G}})},[]);T.useEffect(function(){var k=function(re){var de,me=re[0].contentRect,R=me.width,W=me.height;O(R,W),(de=j.current)===null||de===void 0||de.call(j,R,W)};g>0&&(k=iD(k,g,{trailing:!0,leading:!1}));var V=new ResizeObserver(k),K=w.current.getBoundingClientRect(),ie=K.width,G=K.height;return O(ie,G),V.observe(w.current),function(){V.disconnect()}},[O,g]);var D=T.useMemo(function(){var k=N.containerWidth,V=N.containerHeight;if(k<0||V<0)return null;Ba(Do(s)||Do(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,c),Ba(!r||r>0,"The aspect(%s) must be greater than zero.",r);var K=Do(s)?k:s,ie=Do(c)?V:c;r&&r>0&&(K?ie=K/r:ie&&(K=ie*r),h&&ie>h&&(ie=h)),Ba(K>0||ie>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,K,ie,s,c,d,f,r);var G=!Array.isArray(p)&&Oi(p.type).endsWith("Chart");return z.Children.map(p,function(X){return z.isValidElement(X)?T.cloneElement(X,L0({width:K,height:ie},G?{style:L0({height:"100%",width:"100%",maxHeight:ie,maxWidth:K},X.props.style)}:{})):X})},[r,p,c,h,f,d,N,s]);return z.createElement("div",{id:x?"".concat(x):void 0,className:He("recharts-responsive-container",b),style:L0(L0({},_),{},{width:s,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:w},D)}),ns=function(t){return null};ns.displayName="Cell";function If(e){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},If(e)}function RT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RT(Object(r),!0).forEach(function(n){Lhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lhe(e,t,r){return t=$he(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $he(e){var t=Fhe(e,"string");return If(t)=="symbol"?t:t+""}function Fhe(e,t){if(If(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(If(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $l={widthCache:{},cacheCount:0},Bhe=2e3,Uhe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},IT="recharts_measurement_span";function zhe(e){var t=vb({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Hd=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Hu.isSsr)return{width:0,height:0};var n=zhe(r),a=JSON.stringify({text:t,copyStyle:n});if($l.widthCache[a])return $l.widthCache[a];try{var i=document.getElementById(IT);i||(i=document.createElement("span"),i.setAttribute("id",IT),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var s=vb(vb({},Uhe),n);Object.assign(i.style,s),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return $l.widthCache[a]=c,++$l.cacheCount>Bhe&&($l.cacheCount=0,$l.widthCache={}),c}catch{return{width:0,height:0}}},qhe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Df(e){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Df(e)}function _m(e,t){return Khe(e)||Vhe(e,t)||Hhe(e,t)||Whe()}function Whe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hhe(e,t){if(e){if(typeof e=="string")return DT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DT(e,t)}}function DT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Vhe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function Khe(e){if(Array.isArray(e))return e}function Ghe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yhe(n.key),n)}}function Xhe(e,t,r){return t&&MT(e.prototype,t),r&&MT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yhe(e){var t=Qhe(e,"string");return Df(t)=="symbol"?t:t+""}function Qhe(e,t){if(Df(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var LT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$T=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Jhe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Zhe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,sD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},e0e=Object.keys(sD),ac="NaN";function t0e(e,t){return e*sD[t]}var $0=function(){function e(t,r){Ghe(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!Jhe.test(r)&&(this.num=NaN,this.unit=""),e0e.includes(r)&&(this.num=t0e(t,r),this.unit="px")}return Xhe(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=Zhe.exec(r))!==null&&n!==void 0?n:[],i=_m(a,3),s=i[1],l=i[2];return new e(parseFloat(s),l??"")}}])}();function oD(e){if(e.includes(ac))return ac;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=LT.exec(t))!==null&&r!==void 0?r:[],a=_m(n,4),i=a[1],s=a[2],l=a[3],c=$0.parse(i??""),u=$0.parse(l??""),d=s==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return ac;t=t.replace(LT,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=$T.exec(t))!==null&&f!==void 0?f:[],p=_m(h,4),v=p[1],g=p[2],x=p[3],b=$0.parse(v??""),m=$0.parse(x??""),y=g==="+"?b.add(m):b.subtract(m);if(y.isNaN())return ac;t=t.replace($T,y.toString())}return t}var FT=/\(([^()]*)\)/;function r0e(e){for(var t=e;t.includes("(");){var r=FT.exec(t),n=_m(r,2),a=n[1];t=t.replace(FT,oD(a))}return t}function n0e(e){var t=e.replace(/\s+/g,"");return t=r0e(t),t=oD(t),t}function a0e(e){try{return n0e(e)}catch{return ac}}function Xx(e){var t=a0e(e.slice(5,-1));return t===ac?"":t}var i0e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],s0e=["dx","dy","angle","className","breakAll"];function xb(){return xb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xb.apply(this,arguments)}function BT(e,t){if(e==null)return{};var r=o0e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function o0e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function UT(e,t){return d0e(e)||u0e(e,t)||c0e(e,t)||l0e()}function l0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c0e(e,t){if(e){if(typeof e=="string")return zT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zT(e,t)}}function zT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u0e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function d0e(e){if(Array.isArray(e))return e}var lD=/[ \f\n\r\t\v\u2028\u2029]+/,cD=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];Ke(r)||(n?i=r.toString().split(""):i=r.toString().split(lD));var s=i.map(function(c){return{word:c,width:Hd(c,a).width}}),l=n?0:Hd("",a).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},f0e=function(t,r,n,a,i){var s=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=ve(s),f=l,h=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return K.reduce(function(ie,G){var X=G.word,re=G.width,de=ie[ie.length-1];if(de&&(a==null||i||de.width+re+n<Number(a)))de.words.push(X),de.width+=re+n;else{var me={words:[X],width:re};ie.push(me)}return ie},[])},p=h(r),v=function(K){return K.reduce(function(ie,G){return ie.width>G.width?ie:G})};if(!d)return p;for(var g="",x=function(K){var ie=f.slice(0,K),G=cD({breakAll:u,style:c,children:ie+g}).wordsWithComputedWidth,X=h(G),re=X.length>s||v(X).width>Number(a);return[re,X]},b=0,m=f.length-1,y=0,_;b<=m&&y<=f.length-1;){var w=Math.floor((b+m)/2),j=w-1,S=x(j),E=UT(S,2),N=E[0],A=E[1],O=x(w),D=UT(O,1),k=D[0];if(!N&&!k&&(b=w+1),N&&k&&(m=w-1),!N&&k){_=A;break}y++}return _||p},qT=function(t){var r=Ke(t)?[]:t.toString().split(lD);return[{words:r}]},h0e=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,s=t.breakAll,l=t.maxLines;if((r||n)&&!Hu.isSsr){var c,u,d=cD({breakAll:s,children:a,style:i});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return qT(a);return f0e({breakAll:s,children:a,maxLines:l,style:i},c,u,r,n)}return qT(a)},WT="#808080",dl=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,s=t.lineHeight,l=s===void 0?"1em":s,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,h=t.textAnchor,p=h===void 0?"start":h,v=t.verticalAnchor,g=v===void 0?"end":v,x=t.fill,b=x===void 0?WT:x,m=BT(t,i0e),y=T.useMemo(function(){return h0e({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:f,style:m.style,width:m.width})},[m.breakAll,m.children,m.maxLines,f,m.style,m.width]),_=m.dx,w=m.dy,j=m.angle,S=m.className,E=m.breakAll,N=BT(m,s0e);if(!fr(n)||!fr(i))return null;var A=n+(ve(_)?_:0),O=i+(ve(w)?w:0),D;switch(g){case"start":D=Xx("calc(".concat(u,")"));break;case"middle":D=Xx("calc(".concat((y.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:D=Xx("calc(".concat(y.length-1," * -").concat(l,")"));break}var k=[];if(f){var V=y[0].width,K=m.width;k.push("scale(".concat((ve(K)?K/V:1)/V,")"))}return j&&k.push("rotate(".concat(j,", ").concat(A,", ").concat(O,")")),k.length&&(N.transform=k.join(" ")),z.createElement("text",xb({},De(N,!0),{x:A,y:O,className:He("recharts-text",S),textAnchor:p,fill:b.includes("url")?WT:b}),y.map(function(ie,G){var X=ie.words.join(E?"":" ");return z.createElement("tspan",{x:A,dy:G===0?D:l,key:"".concat(X,"-").concat(G)},X)}))};function zs(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function p0e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function I2(e){let t,r,n;e.length!==2?(t=zs,r=(l,c)=>zs(e(l),c),n=(l,c)=>e(l)-c):(t=e===zs||e===p0e?e:m0e,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:s,right:i}}function m0e(){return 0}function uD(e){return e===null?NaN:+e}function*g0e(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const v0e=I2(zs),Bh=v0e.right;I2(uD).center;class HT extends Map{constructor(t,r=b0e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(VT(this,t))}has(t){return super.has(VT(this,t))}set(t,r){return super.set(x0e(this,t),r)}delete(t){return super.delete(y0e(this,t))}}function VT({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function x0e({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function y0e({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function b0e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function w0e(e=zs){if(e===zs)return dD;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function dD(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const _0e=Math.sqrt(50),j0e=Math.sqrt(10),S0e=Math.sqrt(2);function jm(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),s=i>=_0e?10:i>=j0e?5:i>=S0e?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/s,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*s,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?jm(e,t,r*2):[l,c,u]}function yb(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,s]=n?jm(t,e,r):jm(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(s<0)for(let u=0;u<l;++u)c[u]=(i-u)/-s;else for(let u=0;u<l;++u)c[u]=(i-u)*s;else if(s<0)for(let u=0;u<l;++u)c[u]=(a+u)/-s;else for(let u=0;u<l;++u)c[u]=(a+u)*s;return c}function bb(e,t,r){return t=+t,e=+e,r=+r,jm(e,t,r)[2]}function wb(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?bb(t,e,r):bb(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function KT(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function GT(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function fD(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?dD:w0e(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/c+h)),v=Math.min(n,Math.floor(t+(c-u)*f/c+h));fD(e,t,p,v,a)}const i=e[t];let s=r,l=n;for(dd(e,r,t),a(e[n],i)>0&&dd(e,r,n);s<l;){for(dd(e,s,l),++s,--l;a(e[s],i)<0;)++s;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?dd(e,r,l):(++l,dd(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function dd(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function E0e(e,t,r){if(e=Float64Array.from(g0e(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return GT(e);if(t>=1)return KT(e);var n,a=(n-1)*t,i=Math.floor(a),s=KT(fD(e,i).subarray(0,i+1)),l=GT(e.subarray(i+1));return s+(l-s)*(a-i)}}function N0e(e,t,r=uD){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),s=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return s+(l-s)*(a-i)}}function T0e(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function ya(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function as(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const _b=Symbol("implicit");function D2(){var e=new HT,t=[],r=[],n=_b;function a(i){let s=e.get(i);if(s===void 0){if(n!==_b)return n;e.set(i,s=t.push(i)-1)}return r[s%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new HT;for(const s of i)e.has(s)||e.set(s,t.push(s)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return D2(t,r).unknown(n)},ya.apply(a,arguments),a}function Mf(){var e=D2().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,s,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,p=a<n,v=p?a:n,g=p?n:a;i=(g-v)/Math.max(1,h-c+u*2),l&&(i=Math.floor(i)),v+=(g-v-i*(h-c))*d,s=i*(1-c),l&&(v=Math.round(v),s=Math.round(s));var x=T0e(h).map(function(b){return v+i*b});return r(p?x.reverse():x)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return Mf(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},ya.apply(f(),arguments)}function hD(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return hD(t())},e}function Vd(){return hD(Mf.apply(null,arguments).paddingInner(1))}function M2(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function pD(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Uh(){}var Lf=.7,Sm=1/Lf,jc="\\s*([+-]?\\d+)\\s*",$f="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ni="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",A0e=/^#([0-9a-f]{3,8})$/,C0e=new RegExp(`^rgb\\(${jc},${jc},${jc}\\)$`),O0e=new RegExp(`^rgb\\(${ni},${ni},${ni}\\)$`),k0e=new RegExp(`^rgba\\(${jc},${jc},${jc},${$f}\\)$`),P0e=new RegExp(`^rgba\\(${ni},${ni},${ni},${$f}\\)$`),R0e=new RegExp(`^hsl\\(${$f},${ni},${ni}\\)$`),I0e=new RegExp(`^hsla\\(${$f},${ni},${ni},${$f}\\)$`),XT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};M2(Uh,Ff,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:YT,formatHex:YT,formatHex8:D0e,formatHsl:M0e,formatRgb:QT,toString:QT});function YT(){return this.rgb().formatHex()}function D0e(){return this.rgb().formatHex8()}function M0e(){return mD(this).formatHsl()}function QT(){return this.rgb().formatRgb()}function Ff(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=A0e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?JT(t):r===3?new jn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?F0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?F0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=C0e.exec(e))?new jn(t[1],t[2],t[3],1):(t=O0e.exec(e))?new jn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=k0e.exec(e))?F0(t[1],t[2],t[3],t[4]):(t=P0e.exec(e))?F0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=R0e.exec(e))?tA(t[1],t[2]/100,t[3]/100,1):(t=I0e.exec(e))?tA(t[1],t[2]/100,t[3]/100,t[4]):XT.hasOwnProperty(e)?JT(XT[e]):e==="transparent"?new jn(NaN,NaN,NaN,0):null}function JT(e){return new jn(e>>16&255,e>>8&255,e&255,1)}function F0(e,t,r,n){return n<=0&&(e=t=r=NaN),new jn(e,t,r,n)}function L0e(e){return e instanceof Uh||(e=Ff(e)),e?(e=e.rgb(),new jn(e.r,e.g,e.b,e.opacity)):new jn}function jb(e,t,r,n){return arguments.length===1?L0e(e):new jn(e,t,r,n??1)}function jn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}M2(jn,jb,pD(Uh,{brighter(e){return e=e==null?Sm:Math.pow(Sm,e),new jn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Lf:Math.pow(Lf,e),new jn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new jn(Qo(this.r),Qo(this.g),Qo(this.b),Em(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ZT,formatHex:ZT,formatHex8:$0e,formatRgb:eA,toString:eA}));function ZT(){return`#${Mo(this.r)}${Mo(this.g)}${Mo(this.b)}`}function $0e(){return`#${Mo(this.r)}${Mo(this.g)}${Mo(this.b)}${Mo((isNaN(this.opacity)?1:this.opacity)*255)}`}function eA(){const e=Em(this.opacity);return`${e===1?"rgb(":"rgba("}${Qo(this.r)}, ${Qo(this.g)}, ${Qo(this.b)}${e===1?")":`, ${e})`}`}function Em(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Qo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Mo(e){return e=Qo(e),(e<16?"0":"")+e.toString(16)}function tA(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Da(e,t,r,n)}function mD(e){if(e instanceof Da)return new Da(e.h,e.s,e.l,e.opacity);if(e instanceof Uh||(e=Ff(e)),!e)return new Da;if(e instanceof Da)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),s=NaN,l=i-a,c=(i+a)/2;return l?(t===i?s=(r-n)/l+(r<n)*6:r===i?s=(n-t)/l+2:s=(t-r)/l+4,l/=c<.5?i+a:2-i-a,s*=60):l=c>0&&c<1?0:s,new Da(s,l,c,e.opacity)}function F0e(e,t,r,n){return arguments.length===1?mD(e):new Da(e,t,r,n??1)}function Da(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}M2(Da,F0e,pD(Uh,{brighter(e){return e=e==null?Sm:Math.pow(Sm,e),new Da(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Lf:Math.pow(Lf,e),new Da(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new jn(Yx(e>=240?e-240:e+120,a,n),Yx(e,a,n),Yx(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Da(rA(this.h),B0(this.s),B0(this.l),Em(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Em(this.opacity);return`${e===1?"hsl(":"hsla("}${rA(this.h)}, ${B0(this.s)*100}%, ${B0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function rA(e){return e=(e||0)%360,e<0?e+360:e}function B0(e){return Math.max(0,Math.min(1,e||0))}function Yx(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const L2=e=>()=>e;function B0e(e,t){return function(r){return e+r*t}}function U0e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function z0e(e){return(e=+e)==1?gD:function(t,r){return r-t?U0e(t,r,e):L2(isNaN(t)?r:t)}}function gD(e,t){var r=t-e;return r?B0e(e,r):L2(isNaN(e)?t:e)}const nA=function e(t){var r=z0e(t);function n(a,i){var s=r((a=jb(a)).r,(i=jb(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),u=gD(a.opacity,i.opacity);return function(d){return a.r=s(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function q0e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function W0e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function H0e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),s;for(s=0;s<n;++s)a[s]=Vu(e[s],t[s]);for(;s<r;++s)i[s]=t[s];return function(l){for(s=0;s<n;++s)i[s]=a[s](l);return i}}function V0e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Nm(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function K0e(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Vu(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var Sb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qx=new RegExp(Sb.source,"g");function G0e(e){return function(){return e}}function X0e(e){return function(t){return e(t)+""}}function Y0e(e,t){var r=Sb.lastIndex=Qx.lastIndex=0,n,a,i,s=-1,l=[],c=[];for(e=e+"",t=t+"";(n=Sb.exec(e))&&(a=Qx.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[s]?l[s]+=i:l[++s]=i),(n=n[0])===(a=a[0])?l[s]?l[s]+=a:l[++s]=a:(l[++s]=null,c.push({i:s,x:Nm(n,a)})),r=Qx.lastIndex;return r<t.length&&(i=t.slice(r),l[s]?l[s]+=i:l[++s]=i),l.length<2?c[0]?X0e(c[0].x):G0e(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Vu(e,t){var r=typeof t,n;return t==null||r==="boolean"?L2(t):(r==="number"?Nm:r==="string"?(n=Ff(t))?(t=n,nA):Y0e:t instanceof Ff?nA:t instanceof Date?V0e:W0e(t)?q0e:Array.isArray(t)?H0e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?K0e:Nm)(e,t)}function $2(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Q0e(e,t){t===void 0&&(t=e,e=Vu);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(s){var l=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return i[l](s-l)}}function J0e(e){return function(){return e}}function Tm(e){return+e}var aA=[0,1];function un(e){return e}function Eb(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:J0e(isNaN(t)?NaN:.5)}function Z0e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function epe(e,t,r){var n=e[0],a=e[1],i=t[0],s=t[1];return a<n?(n=Eb(a,n),i=r(s,i)):(n=Eb(n,a),i=r(i,s)),function(l){return i(n(l))}}function tpe(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)a[s]=Eb(e[s],e[s+1]),i[s]=r(t[s],t[s+1]);return function(l){var c=Bh(e,l,1,n)-1;return i[c](a[c](l))}}function zh(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function mv(){var e=aA,t=aA,r=Vu,n,a,i,s=un,l,c,u;function d(){var h=Math.min(e.length,t.length);return s!==un&&(s=Z0e(e[0],e[h-1])),l=h>2?tpe:epe,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=l(e.map(n),t,r)))(n(s(h)))}return f.invert=function(h){return s(a((u||(u=l(t,e.map(n),Nm)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Tm),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=$2,d()},f.clamp=function(h){return arguments.length?(s=h?!0:un,d()):s!==un},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,p){return n=h,a=p,d()}}function F2(){return mv()(un,un)}function rpe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Am(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function au(e){return e=Am(Math.abs(e)),e?e[1]:NaN}function npe(e,t){return function(r,n){for(var a=r.length,i=[],s=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[s=(s+1)%e.length];return i.reverse().join(t)}}function ape(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var ipe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Bf(e){if(!(t=ipe.exec(e)))throw new Error("invalid format: "+e);var t;return new B2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Bf.prototype=B2.prototype;function B2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}B2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function spe(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var vD;function ope(e,t){var r=Am(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(vD=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=n.length;return i===s?n:i>s?n+new Array(i-s+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Am(e,Math.max(0,t+i-1))[0]}function iA(e,t){var r=Am(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const sA={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:rpe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>iA(e*100,t),r:iA,s:ope,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function oA(e){return e}var lA=Array.prototype.map,cA=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function lpe(e){var t=e.grouping===void 0||e.thousands===void 0?oA:npe(lA.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?oA:ape(lA.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Bf(f);var h=f.fill,p=f.align,v=f.sign,g=f.symbol,x=f.zero,b=f.width,m=f.comma,y=f.precision,_=f.trim,w=f.type;w==="n"?(m=!0,w="g"):sA[w]||(y===void 0&&(y=12),_=!0,w="g"),(x||h==="0"&&p==="=")&&(x=!0,h="0",p="=");var j=g==="$"?r:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",S=g==="$"?n:/[%p]/.test(w)?s:"",E=sA[w],N=/[defgprs%]/.test(w);y=y===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function A(O){var D=j,k=S,V,K,ie;if(w==="c")k=E(O)+k,O="";else{O=+O;var G=O<0||1/O<0;if(O=isNaN(O)?c:E(Math.abs(O),y),_&&(O=spe(O)),G&&+O==0&&v!=="+"&&(G=!1),D=(G?v==="("?v:l:v==="-"||v==="("?"":v)+D,k=(w==="s"?cA[8+vD/3]:"")+k+(G&&v==="("?")":""),N){for(V=-1,K=O.length;++V<K;)if(ie=O.charCodeAt(V),48>ie||ie>57){k=(ie===46?a+O.slice(V+1):O.slice(V))+k,O=O.slice(0,V);break}}}m&&!x&&(O=t(O,1/0));var X=D.length+O.length+k.length,re=X<b?new Array(b-X+1).join(h):"";switch(m&&x&&(O=t(re+O,re.length?b-k.length:1/0),re=""),p){case"<":O=D+O+k+re;break;case"=":O=D+re+O+k;break;case"^":O=re.slice(0,X=re.length>>1)+D+O+k+re.slice(X);break;default:O=re+D+O+k;break}return i(O)}return A.toString=function(){return f+""},A}function d(f,h){var p=u((f=Bf(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(au(h)/3)))*3,g=Math.pow(10,-v),x=cA[8+v/3];return function(b){return p(g*b)+x}}return{format:u,formatPrefix:d}}var U0,U2,xD;cpe({thousands:",",grouping:[3],currency:["$",""]});function cpe(e){return U0=lpe(e),U2=U0.format,xD=U0.formatPrefix,U0}function upe(e){return Math.max(0,-au(Math.abs(e)))}function dpe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(au(t)/3)))*3-au(Math.abs(e)))}function fpe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,au(t)-au(e))+1}function yD(e,t,r,n){var a=wb(e,t,r),i;switch(n=Bf(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=dpe(a,s))&&(n.precision=i),xD(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=fpe(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=upe(a))&&(n.precision=i-(n.type==="%")*2);break}}return U2(n)}function ao(e){var t=e.domain;return e.ticks=function(r){var n=t();return yb(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return yD(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,s=n[a],l=n[i],c,u,d=10;for(l<s&&(u=s,s=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=bb(s,l,r),u===c)return n[a]=s,n[i]=l,t(n);if(u>0)s=Math.floor(s/u)*u,l=Math.ceil(l/u)*u;else if(u<0)s=Math.ceil(s*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Cm(){var e=F2();return e.copy=function(){return zh(e,Cm())},ya.apply(e,arguments),ao(e)}function bD(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Tm),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return bD(e).unknown(t)},e=arguments.length?Array.from(e,Tm):[0,1],ao(r)}function wD(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],s;return i<a&&(s=r,r=n,n=s,s=a,a=i,i=s),e[r]=t.floor(a),e[n]=t.ceil(i),e}function uA(e){return Math.log(e)}function dA(e){return Math.exp(e)}function hpe(e){return-Math.log(-e)}function ppe(e){return-Math.exp(-e)}function mpe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function gpe(e){return e===10?mpe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function vpe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function fA(e){return(t,r)=>-e(-t,r)}function z2(e){const t=e(uA,dA),r=t.domain;let n=10,a,i;function s(){return a=vpe(n),i=gpe(n),r()[0]<0?(a=fA(a),i=fA(i),e(hpe,ppe)):e(uA,dA),t}return t.base=function(l){return arguments.length?(n=+l,s()):n},t.domain=function(l){return arguments.length?(r(l),s()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),p=a(d),v,g;const x=l==null?10:+l;let b=[];if(!(n%1)&&p-h<x){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(v=1;v<n;++v)if(g=h<0?v/i(-h):v*i(h),!(g<u)){if(g>d)break;b.push(g)}}else for(;h<=p;++h)for(v=n-1;v>=1;--v)if(g=h>0?v/i(-h):v*i(h),!(g<u)){if(g>d)break;b.push(g)}b.length*2<x&&(b=yb(u,d,x))}else b=yb(h,p,Math.min(p-h,x)).map(i);return f?b.reverse():b},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Bf(c)).precision==null&&(c.trim=!0),c=U2(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(wD(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function _D(){const e=z2(mv()).domain([1,10]);return e.copy=()=>zh(e,_D()).base(e.base()),ya.apply(e,arguments),e}function hA(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function pA(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function q2(e){var t=1,r=e(hA(t),pA(t));return r.constant=function(n){return arguments.length?e(hA(t=+n),pA(t)):t},ao(r)}function jD(){var e=q2(mv());return e.copy=function(){return zh(e,jD()).constant(e.constant())},ya.apply(e,arguments)}function mA(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function xpe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function ype(e){return e<0?-e*e:e*e}function W2(e){var t=e(un,un),r=1;function n(){return r===1?e(un,un):r===.5?e(xpe,ype):e(mA(r),mA(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},ao(t)}function H2(){var e=W2(mv());return e.copy=function(){return zh(e,H2()).exponent(e.exponent())},ya.apply(e,arguments),e}function bpe(){return H2.apply(null,arguments).exponent(.5)}function gA(e){return Math.sign(e)*e*e}function wpe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function SD(){var e=F2(),t=[0,1],r=!1,n;function a(i){var s=wpe(e(i));return isNaN(s)?n:r?Math.round(s):s}return a.invert=function(i){return e.invert(gA(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,Tm)).map(gA)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return SD(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},ya.apply(a,arguments),ao(a)}function ED(){var e=[],t=[],r=[],n;function a(){var s=0,l=Math.max(1,t.length);for(r=new Array(l-1);++s<l;)r[s-1]=N0e(e,s/l);return i}function i(s){return s==null||isNaN(s=+s)?n:t[Bh(r,s)]}return i.invertExtent=function(s){var l=t.indexOf(s);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let l of s)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(zs),a()},i.range=function(s){return arguments.length?(t=Array.from(s),a()):t.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return ED().domain(e).range(t).unknown(n)},ya.apply(i,arguments)}function ND(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function s(c){return c!=null&&c<=c?a[Bh(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},s.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},s.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},s.unknown=function(c){return arguments.length&&(i=c),s},s.thresholds=function(){return n.slice()},s.copy=function(){return ND().domain([e,t]).range(a).unknown(i)},ya.apply(ao(s),arguments)}function TD(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[Bh(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var s=t.indexOf(i);return[e[s-1],e[s]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return TD().domain(e).range(t).unknown(r)},ya.apply(a,arguments)}const Jx=new Date,Zx=new Date;function pr(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const s=a(i),l=a.ceil(i);return i-s<l-i?s:l},a.offset=(i,s)=>(t(i=new Date(+i),s==null?1:Math.floor(s)),i),a.range=(i,s,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<s)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<s);return c},a.filter=i=>pr(s=>{if(s>=s)for(;e(s),!i(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;t(s,-1),!i(s););else for(;--l>=0;)for(;t(s,1),!i(s););}),r&&(a.count=(i,s)=>(Jx.setTime(+i),Zx.setTime(+s),e(Jx),e(Zx),Math.floor(r(Jx,Zx))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?s=>n(s)%i===0:s=>a.count(0,s)%i===0):a)),a}const Om=pr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Om.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?pr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Om);Om.range;const ji=1e3,da=ji*60,Si=da*60,qi=Si*24,V2=qi*7,vA=qi*30,ey=qi*365,Lo=pr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ji)},(e,t)=>(t-e)/ji,e=>e.getUTCSeconds());Lo.range;const K2=pr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ji)},(e,t)=>{e.setTime(+e+t*da)},(e,t)=>(t-e)/da,e=>e.getMinutes());K2.range;const G2=pr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*da)},(e,t)=>(t-e)/da,e=>e.getUTCMinutes());G2.range;const X2=pr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ji-e.getMinutes()*da)},(e,t)=>{e.setTime(+e+t*Si)},(e,t)=>(t-e)/Si,e=>e.getHours());X2.range;const Y2=pr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Si)},(e,t)=>(t-e)/Si,e=>e.getUTCHours());Y2.range;const qh=pr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*da)/qi,e=>e.getDate()-1);qh.range;const gv=pr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/qi,e=>e.getUTCDate()-1);gv.range;const AD=pr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/qi,e=>Math.floor(e/qi));AD.range;function Tl(e){return pr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*da)/V2)}const vv=Tl(0),km=Tl(1),_pe=Tl(2),jpe=Tl(3),iu=Tl(4),Spe=Tl(5),Epe=Tl(6);vv.range;km.range;_pe.range;jpe.range;iu.range;Spe.range;Epe.range;function Al(e){return pr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/V2)}const xv=Al(0),Pm=Al(1),Npe=Al(2),Tpe=Al(3),su=Al(4),Ape=Al(5),Cpe=Al(6);xv.range;Pm.range;Npe.range;Tpe.range;su.range;Ape.range;Cpe.range;const Q2=pr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Q2.range;const J2=pr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());J2.range;const Wi=pr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Wi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:pr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Wi.range;const Hi=pr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Hi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:pr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Hi.range;function CD(e,t,r,n,a,i){const s=[[Lo,1,ji],[Lo,5,5*ji],[Lo,15,15*ji],[Lo,30,30*ji],[i,1,da],[i,5,5*da],[i,15,15*da],[i,30,30*da],[a,1,Si],[a,3,3*Si],[a,6,6*Si],[a,12,12*Si],[n,1,qi],[n,2,2*qi],[r,1,V2],[t,1,vA],[t,3,3*vA],[e,1,ey]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:c(u,d,f),v=p?p.range(u,+d+1):[];return h?v.reverse():v}function c(u,d,f){const h=Math.abs(d-u)/f,p=I2(([,,x])=>x).right(s,h);if(p===s.length)return e.every(wb(u/ey,d/ey,f));if(p===0)return Om.every(Math.max(wb(u,d,f),1));const[v,g]=s[h/s[p-1][2]<s[p][2]/h?p-1:p];return v.every(g)}return[l,c]}const[Ope,kpe]=CD(Hi,J2,xv,AD,Y2,G2),[Ppe,Rpe]=CD(Wi,Q2,vv,qh,X2,K2);function ty(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ry(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function fd(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Ipe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,s=e.shortDays,l=e.months,c=e.shortMonths,u=hd(a),d=pd(a),f=hd(i),h=pd(i),p=hd(s),v=pd(s),g=hd(l),x=pd(l),b=hd(c),m=pd(c),y={a:G,A:X,b:re,B:de,c:null,d:jA,e:jA,f:nme,g:hme,G:mme,H:eme,I:tme,j:rme,L:OD,m:ame,M:ime,p:me,q:R,Q:NA,s:TA,S:sme,u:ome,U:lme,V:cme,w:ume,W:dme,x:null,X:null,y:fme,Y:pme,Z:gme,"%":EA},_={a:W,A:U,b:q,B:se,c:null,d:SA,e:SA,f:bme,g:Ome,G:Pme,H:vme,I:xme,j:yme,L:PD,m:wme,M:_me,p:je,q:ee,Q:NA,s:TA,S:jme,u:Sme,U:Eme,V:Nme,w:Tme,W:Ame,x:null,X:null,y:Cme,Y:kme,Z:Rme,"%":EA},w={a:A,A:O,b:D,B:k,c:V,d:wA,e:wA,f:Ype,g:bA,G:yA,H:_A,I:_A,j:Vpe,L:Xpe,m:Hpe,M:Kpe,p:N,q:Wpe,Q:Jpe,s:Zpe,S:Gpe,u:Fpe,U:Bpe,V:Upe,w:$pe,W:zpe,x:K,X:ie,y:bA,Y:yA,Z:qpe,"%":Qpe};y.x=j(r,y),y.X=j(n,y),y.c=j(t,y),_.x=j(r,_),_.X=j(n,_),_.c=j(t,_);function j(Y,ne){return function(be){var ae=[],Ue=-1,Oe=0,st=Y.length,ze,we,Xt;for(be instanceof Date||(be=new Date(+be));++Ue<st;)Y.charCodeAt(Ue)===37&&(ae.push(Y.slice(Oe,Ue)),(we=xA[ze=Y.charAt(++Ue)])!=null?ze=Y.charAt(++Ue):we=ze==="e"?" ":"0",(Xt=ne[ze])&&(ze=Xt(be,we)),ae.push(ze),Oe=Ue+1);return ae.push(Y.slice(Oe,Ue)),ae.join("")}}function S(Y,ne){return function(be){var ae=fd(1900,void 0,1),Ue=E(ae,Y,be+="",0),Oe,st;if(Ue!=be.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(ne&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(Oe=ry(fd(ae.y,0,1)),st=Oe.getUTCDay(),Oe=st>4||st===0?Pm.ceil(Oe):Pm(Oe),Oe=gv.offset(Oe,(ae.V-1)*7),ae.y=Oe.getUTCFullYear(),ae.m=Oe.getUTCMonth(),ae.d=Oe.getUTCDate()+(ae.w+6)%7):(Oe=ty(fd(ae.y,0,1)),st=Oe.getDay(),Oe=st>4||st===0?km.ceil(Oe):km(Oe),Oe=qh.offset(Oe,(ae.V-1)*7),ae.y=Oe.getFullYear(),ae.m=Oe.getMonth(),ae.d=Oe.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),st="Z"in ae?ry(fd(ae.y,0,1)).getUTCDay():ty(fd(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(st+5)%7:ae.w+ae.U*7-(st+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,ry(ae)):ty(ae)}}function E(Y,ne,be,ae){for(var Ue=0,Oe=ne.length,st=be.length,ze,we;Ue<Oe;){if(ae>=st)return-1;if(ze=ne.charCodeAt(Ue++),ze===37){if(ze=ne.charAt(Ue++),we=w[ze in xA?ne.charAt(Ue++):ze],!we||(ae=we(Y,be,ae))<0)return-1}else if(ze!=be.charCodeAt(ae++))return-1}return ae}function N(Y,ne,be){var ae=u.exec(ne.slice(be));return ae?(Y.p=d.get(ae[0].toLowerCase()),be+ae[0].length):-1}function A(Y,ne,be){var ae=p.exec(ne.slice(be));return ae?(Y.w=v.get(ae[0].toLowerCase()),be+ae[0].length):-1}function O(Y,ne,be){var ae=f.exec(ne.slice(be));return ae?(Y.w=h.get(ae[0].toLowerCase()),be+ae[0].length):-1}function D(Y,ne,be){var ae=b.exec(ne.slice(be));return ae?(Y.m=m.get(ae[0].toLowerCase()),be+ae[0].length):-1}function k(Y,ne,be){var ae=g.exec(ne.slice(be));return ae?(Y.m=x.get(ae[0].toLowerCase()),be+ae[0].length):-1}function V(Y,ne,be){return E(Y,t,ne,be)}function K(Y,ne,be){return E(Y,r,ne,be)}function ie(Y,ne,be){return E(Y,n,ne,be)}function G(Y){return s[Y.getDay()]}function X(Y){return i[Y.getDay()]}function re(Y){return c[Y.getMonth()]}function de(Y){return l[Y.getMonth()]}function me(Y){return a[+(Y.getHours()>=12)]}function R(Y){return 1+~~(Y.getMonth()/3)}function W(Y){return s[Y.getUTCDay()]}function U(Y){return i[Y.getUTCDay()]}function q(Y){return c[Y.getUTCMonth()]}function se(Y){return l[Y.getUTCMonth()]}function je(Y){return a[+(Y.getUTCHours()>=12)]}function ee(Y){return 1+~~(Y.getUTCMonth()/3)}return{format:function(Y){var ne=j(Y+="",y);return ne.toString=function(){return Y},ne},parse:function(Y){var ne=S(Y+="",!1);return ne.toString=function(){return Y},ne},utcFormat:function(Y){var ne=j(Y+="",_);return ne.toString=function(){return Y},ne},utcParse:function(Y){var ne=S(Y+="",!0);return ne.toString=function(){return Y},ne}}}var xA={"-":"",_:" ",0:"0"},Nr=/^\s*\d+/,Dpe=/^%/,Mpe=/[\\^$*+?|[\]().{}]/g;function et(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function Lpe(e){return e.replace(Mpe,"\\$&")}function hd(e){return new RegExp("^(?:"+e.map(Lpe).join("|")+")","i")}function pd(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function $pe(e,t,r){var n=Nr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function Fpe(e,t,r){var n=Nr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function Bpe(e,t,r){var n=Nr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Upe(e,t,r){var n=Nr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function zpe(e,t,r){var n=Nr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function yA(e,t,r){var n=Nr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function bA(e,t,r){var n=Nr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function qpe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Wpe(e,t,r){var n=Nr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function Hpe(e,t,r){var n=Nr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function wA(e,t,r){var n=Nr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Vpe(e,t,r){var n=Nr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function _A(e,t,r){var n=Nr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Kpe(e,t,r){var n=Nr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Gpe(e,t,r){var n=Nr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Xpe(e,t,r){var n=Nr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Ype(e,t,r){var n=Nr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Qpe(e,t,r){var n=Dpe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Jpe(e,t,r){var n=Nr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Zpe(e,t,r){var n=Nr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function jA(e,t){return et(e.getDate(),t,2)}function eme(e,t){return et(e.getHours(),t,2)}function tme(e,t){return et(e.getHours()%12||12,t,2)}function rme(e,t){return et(1+qh.count(Wi(e),e),t,3)}function OD(e,t){return et(e.getMilliseconds(),t,3)}function nme(e,t){return OD(e,t)+"000"}function ame(e,t){return et(e.getMonth()+1,t,2)}function ime(e,t){return et(e.getMinutes(),t,2)}function sme(e,t){return et(e.getSeconds(),t,2)}function ome(e){var t=e.getDay();return t===0?7:t}function lme(e,t){return et(vv.count(Wi(e)-1,e),t,2)}function kD(e){var t=e.getDay();return t>=4||t===0?iu(e):iu.ceil(e)}function cme(e,t){return e=kD(e),et(iu.count(Wi(e),e)+(Wi(e).getDay()===4),t,2)}function ume(e){return e.getDay()}function dme(e,t){return et(km.count(Wi(e)-1,e),t,2)}function fme(e,t){return et(e.getFullYear()%100,t,2)}function hme(e,t){return e=kD(e),et(e.getFullYear()%100,t,2)}function pme(e,t){return et(e.getFullYear()%1e4,t,4)}function mme(e,t){var r=e.getDay();return e=r>=4||r===0?iu(e):iu.ceil(e),et(e.getFullYear()%1e4,t,4)}function gme(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+et(t/60|0,"0",2)+et(t%60,"0",2)}function SA(e,t){return et(e.getUTCDate(),t,2)}function vme(e,t){return et(e.getUTCHours(),t,2)}function xme(e,t){return et(e.getUTCHours()%12||12,t,2)}function yme(e,t){return et(1+gv.count(Hi(e),e),t,3)}function PD(e,t){return et(e.getUTCMilliseconds(),t,3)}function bme(e,t){return PD(e,t)+"000"}function wme(e,t){return et(e.getUTCMonth()+1,t,2)}function _me(e,t){return et(e.getUTCMinutes(),t,2)}function jme(e,t){return et(e.getUTCSeconds(),t,2)}function Sme(e){var t=e.getUTCDay();return t===0?7:t}function Eme(e,t){return et(xv.count(Hi(e)-1,e),t,2)}function RD(e){var t=e.getUTCDay();return t>=4||t===0?su(e):su.ceil(e)}function Nme(e,t){return e=RD(e),et(su.count(Hi(e),e)+(Hi(e).getUTCDay()===4),t,2)}function Tme(e){return e.getUTCDay()}function Ame(e,t){return et(Pm.count(Hi(e)-1,e),t,2)}function Cme(e,t){return et(e.getUTCFullYear()%100,t,2)}function Ome(e,t){return e=RD(e),et(e.getUTCFullYear()%100,t,2)}function kme(e,t){return et(e.getUTCFullYear()%1e4,t,4)}function Pme(e,t){var r=e.getUTCDay();return e=r>=4||r===0?su(e):su.ceil(e),et(e.getUTCFullYear()%1e4,t,4)}function Rme(){return"+0000"}function EA(){return"%"}function NA(e){return+e}function TA(e){return Math.floor(+e/1e3)}var Fl,ID,DD;Ime({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ime(e){return Fl=Ipe(e),ID=Fl.format,Fl.parse,DD=Fl.utcFormat,Fl.utcParse,Fl}function Dme(e){return new Date(e)}function Mme(e){return e instanceof Date?+e:+new Date(+e)}function Z2(e,t,r,n,a,i,s,l,c,u){var d=F2(),f=d.invert,h=d.domain,p=u(".%L"),v=u(":%S"),g=u("%I:%M"),x=u("%I %p"),b=u("%a %d"),m=u("%b %d"),y=u("%B"),_=u("%Y");function w(j){return(c(j)<j?p:l(j)<j?v:s(j)<j?g:i(j)<j?x:n(j)<j?a(j)<j?b:m:r(j)<j?y:_)(j)}return d.invert=function(j){return new Date(f(j))},d.domain=function(j){return arguments.length?h(Array.from(j,Mme)):h().map(Dme)},d.ticks=function(j){var S=h();return e(S[0],S[S.length-1],j??10)},d.tickFormat=function(j,S){return S==null?w:u(S)},d.nice=function(j){var S=h();return(!j||typeof j.range!="function")&&(j=t(S[0],S[S.length-1],j??10)),j?h(wD(S,j)):d},d.copy=function(){return zh(d,Z2(e,t,r,n,a,i,s,l,c,u))},d}function Lme(){return ya.apply(Z2(Ppe,Rpe,Wi,Q2,vv,qh,X2,K2,Lo,ID).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function $me(){return ya.apply(Z2(Ope,kpe,Hi,J2,xv,gv,Y2,G2,Lo,DD).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function yv(){var e=0,t=1,r,n,a,i,s=un,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:s(a===0?.5:(f=(i(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(h){var p,v;return arguments.length?([p,v]=h,s=f(p,v),u):[s(0),s(1)]}}return u.range=d(Vu),u.rangeRound=d($2),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function io(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function MD(){var e=ao(yv()(un));return e.copy=function(){return io(e,MD())},as.apply(e,arguments)}function LD(){var e=z2(yv()).domain([1,10]);return e.copy=function(){return io(e,LD()).base(e.base())},as.apply(e,arguments)}function $D(){var e=q2(yv());return e.copy=function(){return io(e,$D()).constant(e.constant())},as.apply(e,arguments)}function ej(){var e=W2(yv());return e.copy=function(){return io(e,ej()).exponent(e.exponent())},as.apply(e,arguments)}function Fme(){return ej.apply(null,arguments).exponent(.5)}function FD(){var e=[],t=un;function r(n){if(n!=null&&!isNaN(n=+n))return t((Bh(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(zs),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>E0e(e,i/n))},r.copy=function(){return FD(t).domain(e)},as.apply(r,arguments)}function bv(){var e=0,t=.5,r=1,n=1,a,i,s,l,c,u=un,d,f=!1,h;function p(g){return isNaN(g=+g)?h:(g=.5+((g=+d(g))-i)*(n*g<n*i?l:c),u(f?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([e,t,r]=g,a=d(e=+e),i=d(t=+t),s=d(r=+r),l=a===i?0:.5/(i-a),c=i===s?0:.5/(s-i),n=i<a?-1:1,p):[e,t,r]},p.clamp=function(g){return arguments.length?(f=!!g,p):f},p.interpolator=function(g){return arguments.length?(u=g,p):u};function v(g){return function(x){var b,m,y;return arguments.length?([b,m,y]=x,u=Q0e(g,[b,m,y]),p):[u(0),u(.5),u(1)]}}return p.range=v(Vu),p.rangeRound=v($2),p.unknown=function(g){return arguments.length?(h=g,p):h},function(g){return d=g,a=g(e),i=g(t),s=g(r),l=a===i?0:.5/(i-a),c=i===s?0:.5/(s-i),n=i<a?-1:1,p}}function BD(){var e=ao(bv()(un));return e.copy=function(){return io(e,BD())},as.apply(e,arguments)}function UD(){var e=z2(bv()).domain([.1,1,10]);return e.copy=function(){return io(e,UD()).base(e.base())},as.apply(e,arguments)}function zD(){var e=q2(bv());return e.copy=function(){return io(e,zD()).constant(e.constant())},as.apply(e,arguments)}function tj(){var e=W2(bv());return e.copy=function(){return io(e,tj()).exponent(e.exponent())},as.apply(e,arguments)}function Bme(){return tj.apply(null,arguments).exponent(.5)}const AA=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Mf,scaleDiverging:BD,scaleDivergingLog:UD,scaleDivergingPow:tj,scaleDivergingSqrt:Bme,scaleDivergingSymlog:zD,scaleIdentity:bD,scaleImplicit:_b,scaleLinear:Cm,scaleLog:_D,scaleOrdinal:D2,scalePoint:Vd,scalePow:H2,scaleQuantile:ED,scaleQuantize:ND,scaleRadial:SD,scaleSequential:MD,scaleSequentialLog:LD,scaleSequentialPow:ej,scaleSequentialQuantile:FD,scaleSequentialSqrt:Fme,scaleSequentialSymlog:$D,scaleSqrt:bpe,scaleSymlog:jD,scaleThreshold:TD,scaleTime:Lme,scaleUtc:$me,tickFormat:yD},Symbol.toStringTag,{value:"Module"}));var Ume=Lu;function zme(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],s=t(i);if(s!=null&&(l===void 0?s===s&&!Ume(s):r(s,l)))var l=s,c=i}return c}var wv=zme;function qme(e,t){return e>t}var qD=qme,Wme=wv,Hme=qD,Vme=Wu;function Kme(e){return e&&e.length?Wme(e,Vme,Hme):void 0}var Gme=Kme;const _v=it(Gme);function Xme(e,t){return e<t}var WD=Xme,Yme=wv,Qme=WD,Jme=Wu;function Zme(e){return e&&e.length?Yme(e,Jme,Qme):void 0}var ege=Zme;const jv=it(ege);var tge=m2,rge=ui,nge=JI,age=Rn;function ige(e,t){var r=age(e)?tge:nge;return r(e,rge(t))}var sge=ige,oge=YI,lge=sge;function cge(e,t){return oge(lge(e,t),1)}var uge=cge;const dge=it(uge);var fge=O2;function hge(e,t){return fge(e,t)}var pge=hge;const Sv=it(pge);var Ku=1e9,mge={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},nj,Pt=!0,ga="[DecimalError] ",Jo=ga+"Invalid argument: ",rj=ga+"Exponent out of range: ",Gu=Math.floor,So=Math.pow,gge=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Wn,gr=1e7,Nt=7,HD=9007199254740991,Rm=Gu(HD/Nt),Ce={};Ce.absoluteValue=Ce.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ce.comparedTo=Ce.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Ce.decimalPlaces=Ce.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Nt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ce.dividedBy=Ce.div=function(e){return Ri(this,new this.constructor(e))};Ce.dividedToIntegerBy=Ce.idiv=function(e){var t=this,r=t.constructor;return vt(Ri(t,new r(e),0,1),r.precision)};Ce.equals=Ce.eq=function(e){return!this.cmp(e)};Ce.exponent=function(){return ar(this)};Ce.greaterThan=Ce.gt=function(e){return this.cmp(e)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(e){return this.cmp(e)>=0};Ce.isInteger=Ce.isint=function(){return this.e>this.d.length-2};Ce.isNegative=Ce.isneg=function(){return this.s<0};Ce.isPositive=Ce.ispos=function(){return this.s>0};Ce.isZero=function(){return this.s===0};Ce.lessThan=Ce.lt=function(e){return this.cmp(e)<0};Ce.lessThanOrEqualTo=Ce.lte=function(e){return this.cmp(e)<1};Ce.logarithm=Ce.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Wn))throw Error(ga+"NaN");if(r.s<1)throw Error(ga+(r.s?"NaN":"-Infinity"));return r.eq(Wn)?new n(0):(Pt=!1,t=Ri(Uf(r,i),Uf(e,i),i),Pt=!0,vt(t,a))};Ce.minus=Ce.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?GD(t,e):VD(t,(e.s=-e.s,e))};Ce.modulo=Ce.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(ga+"NaN");return r.s?(Pt=!1,t=Ri(r,e,0,1).times(e),Pt=!0,r.minus(t)):vt(new n(r),a)};Ce.naturalExponential=Ce.exp=function(){return KD(this)};Ce.naturalLogarithm=Ce.ln=function(){return Uf(this)};Ce.negated=Ce.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ce.plus=Ce.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?VD(t,e):GD(t,(e.s=-e.s,e))};Ce.precision=Ce.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Jo+e);if(t=ar(a)+1,n=a.d.length-1,r=n*Nt+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ce.squareRoot=Ce.sqrt=function(){var e,t,r,n,a,i,s,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(ga+"NaN")}for(e=ar(l),Pt=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=ei(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Gu((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=s=r+3;;)if(i=n,n=i.plus(Ri(l,i,s+2)).times(.5),ei(i.d).slice(0,s)===(t=ei(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),a==s&&t=="4999"){if(vt(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;s+=4}return Pt=!0,vt(n,r)};Ce.times=Ce.mul=function(e){var t,r,n,a,i,s,l,c,u,d=this,f=d.constructor,h=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=p.length,c<u&&(i=h,h=p,p=i,s=c,c=u,u=s),i=[],s=c+u,n=s;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=i[a]+p[n]*h[a-n-1]+t,i[a--]=l%gr|0,t=l/gr|0;i[a]=(i[a]+t)%gr|0}for(;!i[--s];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Pt?vt(e,f.precision):e};Ce.toDecimalPlaces=Ce.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(oi(e,0,Ku),t===void 0?t=n.rounding:oi(t,0,8),vt(r,e+ar(r)+1,t))};Ce.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=fl(n,!0):(oi(e,0,Ku),t===void 0?t=a.rounding:oi(t,0,8),n=vt(new a(n),e+1,t),r=fl(n,!0,e+1)),r};Ce.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?fl(a):(oi(e,0,Ku),t===void 0?t=i.rounding:oi(t,0,8),n=vt(new i(a),e+ar(a)+1,t),r=fl(n.abs(),!1,e+ar(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ce.toInteger=Ce.toint=function(){var e=this,t=e.constructor;return vt(new t(e),ar(e)+1,t.rounding)};Ce.toNumber=function(){return+this};Ce.toPower=Ce.pow=function(e){var t,r,n,a,i,s,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Wn);if(l=new c(l),!l.s){if(e.s<1)throw Error(ga+"Infinity");return l}if(l.eq(Wn))return l;if(n=c.precision,e.eq(Wn))return vt(l,n);if(t=e.e,r=e.d.length-1,s=t>=r,i=l.s,s){if((r=d<0?-d:d)<=HD){for(a=new c(Wn),t=Math.ceil(n/Nt+4),Pt=!1;r%2&&(a=a.times(l),OA(a.d,t)),r=Gu(r/2),r!==0;)l=l.times(l),OA(l.d,t);return Pt=!0,e.s<0?new c(Wn).div(a):vt(a,n)}}else if(i<0)throw Error(ga+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Pt=!1,a=e.times(Uf(l,n+u)),Pt=!0,a=KD(a),a.s=i,a};Ce.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=ar(a),n=fl(a,r<=i.toExpNeg||r>=i.toExpPos)):(oi(e,1,Ku),t===void 0?t=i.rounding:oi(t,0,8),a=vt(new i(a),e,t),r=ar(a),n=fl(a,e<=r||r<=i.toExpNeg,e)),n};Ce.toSignificantDigits=Ce.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(oi(e,1,Ku),t===void 0?t=n.rounding:oi(t,0,8)),vt(new n(r),e,t)};Ce.toString=Ce.valueOf=Ce.val=Ce.toJSON=Ce[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ar(e),r=e.constructor;return fl(e,t<=r.toExpNeg||t>=r.toExpPos)};function VD(e,t){var r,n,a,i,s,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Pt?vt(t,f):t;if(c=e.d,u=t.d,s=e.e,a=t.e,c=c.slice(),i=s-a,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,a=s,l=c.length),s=Math.ceil(f/Nt),l=s>l?s+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/gr|0,c[i]%=gr;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Pt?vt(t,f):t}function oi(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Jo+e)}function ei(e){var t,r,n,a=e.length-1,i="",s=e[0];if(a>0){for(i+=s,t=1;t<a;t++)n=e[t]+"",r=Nt-n.length,r&&(i+=ds(r)),i+=n;s=e[t],n=s+"",r=Nt-n.length,r&&(i+=ds(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}var Ri=function(){function e(n,a){var i,s=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+s,n[l]=i%gr|0,s=i/gr|0;return s&&n.unshift(s),n}function t(n,a,i,s){var l,c;if(i!=s)c=i>s?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,i){for(var s=0;i--;)n[i]-=s,s=n[i]<a[i]?1:0,n[i]=s*gr+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,s){var l,c,u,d,f,h,p,v,g,x,b,m,y,_,w,j,S,E,N=n.constructor,A=n.s==a.s?1:-1,O=n.d,D=a.d;if(!n.s)return new N(n);if(!a.s)throw Error(ga+"Division by zero");for(c=n.e-a.e,S=D.length,w=O.length,p=new N(A),v=p.d=[],u=0;D[u]==(O[u]||0);)++u;if(D[u]>(O[u]||0)&&--c,i==null?m=i=N.precision:s?m=i+(ar(n)-ar(a))+1:m=i,m<0)return new N(0);if(m=m/Nt+2|0,u=0,S==1)for(d=0,D=D[0],m++;(u<w||d)&&m--;u++)y=d*gr+(O[u]||0),v[u]=y/D|0,d=y%D|0;else{for(d=gr/(D[0]+1)|0,d>1&&(D=e(D,d),O=e(O,d),S=D.length,w=O.length),_=S,g=O.slice(0,S),x=g.length;x<S;)g[x++]=0;E=D.slice(),E.unshift(0),j=D[0],D[1]>=gr/2&&++j;do d=0,l=t(D,g,S,x),l<0?(b=g[0],S!=x&&(b=b*gr+(g[1]||0)),d=b/j|0,d>1?(d>=gr&&(d=gr-1),f=e(D,d),h=f.length,x=g.length,l=t(f,g,h,x),l==1&&(d--,r(f,S<h?E:D,h))):(d==0&&(l=d=1),f=D.slice()),h=f.length,h<x&&f.unshift(0),r(g,f,x),l==-1&&(x=g.length,l=t(D,g,S,x),l<1&&(d++,r(g,S<x?E:D,x))),x=g.length):l===0&&(d++,g=[0]),v[u++]=d,l&&g[0]?g[x++]=O[_]||0:(g=[O[_]],x=1);while((_++<w||g[0]!==void 0)&&m--)}return v[0]||v.shift(),p.e=c,vt(p,s?i+ar(p)+1:i)}}();function KD(e,t){var r,n,a,i,s,l,c=0,u=0,d=e.constructor,f=d.precision;if(ar(e)>16)throw Error(rj+ar(e));if(!e.s)return new d(Wn);for(Pt=!1,l=f,s=new d(.03125);e.abs().gte(.1);)e=e.times(s),u+=5;for(n=Math.log(So(2,u))/Math.LN10*2+5|0,l+=n,r=a=i=new d(Wn),d.precision=l;;){if(a=vt(a.times(e),l),r=r.times(++c),s=i.plus(Ri(a,r,l)),ei(s.d).slice(0,l)===ei(i.d).slice(0,l)){for(;u--;)i=vt(i.times(i),l);return d.precision=f,t==null?(Pt=!0,vt(i,f)):i}i=s}}function ar(e){for(var t=e.e*Nt,r=e.d[0];r>=10;r/=10)t++;return t}function ny(e,t,r){if(t>e.LN10.sd())throw Pt=!0,r&&(e.precision=r),Error(ga+"LN10 precision limit exceeded");return vt(new e(e.LN10),t)}function ds(e){for(var t="";e--;)t+="0";return t}function Uf(e,t){var r,n,a,i,s,l,c,u,d,f=1,h=10,p=e,v=p.d,g=p.constructor,x=g.precision;if(p.s<1)throw Error(ga+(p.s?"NaN":"-Infinity"));if(p.eq(Wn))return new g(0);if(t==null?(Pt=!1,u=x):u=t,p.eq(10))return t==null&&(Pt=!0),ny(g,u);if(u+=h,g.precision=u,r=ei(v),n=r.charAt(0),i=ar(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=ei(p.d),n=r.charAt(0),f++;i=ar(p),n>1?(p=new g("0."+r),i++):p=new g(n+"."+r.slice(1))}else return c=ny(g,u+2,x).times(i+""),p=Uf(new g(n+"."+r.slice(1)),u-h).plus(c),g.precision=x,t==null?(Pt=!0,vt(p,x)):p;for(l=s=p=Ri(p.minus(Wn),p.plus(Wn),u),d=vt(p.times(p),u),a=3;;){if(s=vt(s.times(d),u),c=l.plus(Ri(s,new g(a),u)),ei(c.d).slice(0,u)===ei(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(ny(g,u+2,x).times(i+""))),l=Ri(l,new g(f),u),g.precision=x,t==null?(Pt=!0,vt(l,x)):l;l=c,a+=2}}function CA(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Gu(r/Nt),e.d=[],n=(r+1)%Nt,r<0&&(n+=Nt),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Nt;n<a;)e.d.push(+t.slice(n,n+=Nt));t=t.slice(n),n=Nt-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Pt&&(e.e>Rm||e.e<-Rm))throw Error(rj+r)}else e.s=0,e.e=0,e.d=[0];return e}function vt(e,t,r){var n,a,i,s,l,c,u,d,f=e.d;for(s=1,i=f[0];i>=10;i/=10)s++;if(n=t-s,n<0)n+=Nt,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Nt),i=f.length,d>=i)return e;for(u=i=f[d],s=1;i>=10;i/=10)s++;n%=Nt,a=n-Nt+s}if(r!==void 0&&(i=So(10,s-a-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/So(10,s-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=ar(e),f.length=1,t=t-i-1,f[0]=So(10,(Nt-t%Nt)%Nt),e.e=Gu(-t/Nt)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=So(10,Nt-n),f[d]=a>0?(u/So(10,s-a)%So(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==gr&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=gr)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(Pt&&(e.e>Rm||e.e<-Rm))throw Error(rj+ar(e));return e}function GD(e,t){var r,n,a,i,s,l,c,u,d,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Pt?vt(t,p):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),s=u-n,s){for(d=s<0,d?(r=c,s=-s,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(p/Nt),l)+2,s>a&&(s=a,r.length=1),r.reverse(),a=s;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}s=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>s;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=gr-1;--c[i],c[a]+=gr}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Pt?vt(t,p):t):new h(0)}function fl(e,t,r){var n,a=ar(e),i=ei(e.d),s=i.length;return t?(r&&(n=r-s)>0?i=i.charAt(0)+"."+i.slice(1)+ds(n):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+ds(-a-1)+i,r&&(n=r-s)>0&&(i+=ds(n))):a>=s?(i+=ds(a+1-s),r&&(n=r-a-1)>0&&(i=i+"."+ds(n))):((n=a+1)<s&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-s)>0&&(a+1===s&&(i+="."),i+=ds(n))),e.s<0?"-"+i:i}function OA(e,t){if(e.length>t)return e.length=t,!0}function XD(e){var t,r,n;function a(i){var s=this;if(!(s instanceof a))return new a(i);if(s.constructor=a,i instanceof a){s.s=i.s,s.e=i.e,s.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Jo+i);if(i>0)s.s=1;else if(i<0)i=-i,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(i===~~i&&i<1e7){s.e=0,s.d=[i];return}return CA(s,i.toString())}else if(typeof i!="string")throw Error(Jo+i);if(i.charCodeAt(0)===45?(i=i.slice(1),s.s=-1):s.s=1,gge.test(i))CA(s,i);else throw Error(Jo+i)}if(a.prototype=Ce,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=XD,a.config=a.set=vge,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function vge(e){if(!e||typeof e!="object")throw Error(ga+"Object expected");var t,r,n,a=["precision",1,Ku,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Gu(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Jo+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Jo+r+": "+n);return this}var nj=XD(mge);Wn=new nj(1);const gt=nj;function xge(e){return _ge(e)||wge(e)||bge(e)||yge()}function yge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bge(e,t){if(e){if(typeof e=="string")return Nb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nb(e,t)}}function wge(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function _ge(e){if(Array.isArray(e))return Nb(e)}function Nb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var jge=function(t){return t},YD={},QD=function(t){return t===YD},kA=function(t){return function r(){return arguments.length===0||arguments.length===1&&QD(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},Sge=function e(t,r){return t===1?r:kA(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=a.filter(function(l){return l!==YD}).length;return s>=t?r.apply(void 0,a):e(t-s,kA(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(f){return QD(f)?c.shift():f});return r.apply(void 0,xge(d).concat(c))}))})},Ev=function(t){return Sge(t.length,t)},Tb=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},Ege=Ev(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),Nge=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return jge;var a=r.reverse(),i=a[0],s=a.slice(1);return function(){return s.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},Ab=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},JD=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function Tge(e){var t;return e===0?t=1:t=Math.floor(new gt(e).abs().log(10).toNumber())+1,t}function Age(e,t,r){for(var n=new gt(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var Cge=Ev(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),Oge=Ev(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),kge=Ev(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const Nv={rangeStep:Age,getDigitCount:Tge,interpolateNumber:Cge,uninterpolateNumber:Oge,uninterpolateTruncation:kge};function Cb(e){return Ige(e)||Rge(e)||ZD(e)||Pge()}function Pge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rge(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Ige(e){if(Array.isArray(e))return Ob(e)}function zf(e,t){return Lge(e)||Mge(e,t)||ZD(e,t)||Dge()}function Dge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZD(e,t){if(e){if(typeof e=="string")return Ob(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ob(e,t)}}function Ob(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Mge(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var s=e[Symbol.iterator](),l;!(n=(l=s.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&s.return!=null&&s.return()}finally{if(a)throw i}}return r}}function Lge(e){if(Array.isArray(e))return e}function e6(e){var t=zf(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function t6(e,t,r){if(e.lte(0))return new gt(0);var n=Nv.getDigitCount(e.toNumber()),a=new gt(10).pow(n),i=e.div(a),s=n!==1?.05:.1,l=new gt(Math.ceil(i.div(s).toNumber())).add(r).mul(s),c=l.mul(a);return t?c:new gt(Math.ceil(c))}function $ge(e,t,r){var n=1,a=new gt(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new gt(10).pow(Nv.getDigitCount(e)-1),a=new gt(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new gt(Math.floor(e)))}else e===0?a=new gt(Math.floor((t-1)/2)):r||(a=new gt(Math.floor(e)));var s=Math.floor((t-1)/2),l=Nge(Ege(function(c){return a.add(new gt(c-s).mul(n)).toNumber()}),Tb);return l(0,t)}function r6(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new gt(0),tickMin:new gt(0),tickMax:new gt(0)};var i=t6(new gt(t).sub(e).div(r-1),n,a),s;e<=0&&t>=0?s=new gt(0):(s=new gt(e).add(t).div(2),s=s.sub(new gt(s).mod(i)));var l=Math.ceil(s.sub(e).div(i).toNumber()),c=Math.ceil(new gt(t).sub(s).div(i).toNumber()),u=l+c+1;return u>r?r6(e,t,r,n,a+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:s.sub(new gt(l).mul(i)),tickMax:s.add(new gt(c).mul(i))})}function Fge(e){var t=zf(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(a,2),l=e6([r,n]),c=zf(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(Cb(Tb(0,a-1).map(function(){return 1/0}))):[].concat(Cb(Tb(0,a-1).map(function(){return-1/0})),[d]);return r>n?Ab(f):f}if(u===d)return $ge(u,a,i);var h=r6(u,d,s,i),p=h.step,v=h.tickMin,g=h.tickMax,x=Nv.rangeStep(v,g.add(new gt(.1).mul(p)),p);return r>n?Ab(x):x}function Bge(e,t){var r=zf(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=e6([n,a]),l=zf(s,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var d=Math.max(t,2),f=t6(new gt(u).sub(c).div(d-1),i,0),h=[].concat(Cb(Nv.rangeStep(new gt(c),new gt(u).sub(new gt(.99).mul(f)),f)),[u]);return n>a?Ab(h):h}var Uge=JD(Fge),zge=JD(Bge),qge="Invariant failed";function hl(e,t){throw new Error(qge)}var Wge=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function ou(e){"@babel/helpers - typeof";return ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ou(e)}function Im(){return Im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Im.apply(this,arguments)}function Hge(e,t){return Xge(e)||Gge(e,t)||Kge(e,t)||Vge()}function Vge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kge(e,t){if(e){if(typeof e=="string")return PA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PA(e,t)}}function PA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Gge(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function Xge(e){if(Array.isArray(e))return e}function Yge(e,t){if(e==null)return{};var r=Qge(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Qge(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Jge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i6(n.key),n)}}function eve(e,t,r){return t&&Zge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tve(e,t,r){return t=Dm(t),rve(e,n6()?Reflect.construct(t,r||[],Dm(e).constructor):t.apply(e,r))}function rve(e,t){if(t&&(ou(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nve(e)}function nve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n6=function(){return!!e})()}function Dm(e){return Dm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Dm(e)}function ave(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kb(e,t)}function kb(e,t){return kb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},kb(e,t)}function a6(e,t,r){return t=i6(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i6(e){var t=ive(e,"string");return ou(t)=="symbol"?t:t+""}function ive(e,t){if(ou(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ou(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Tv=function(e){function t(){return Jge(this,t),tve(this,t,arguments)}return ave(t,e),eve(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,s=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,h=Yge(n,Wge),p=De(h,!1);this.props.direction==="x"&&d.type!=="number"&&hl();var v=c.map(function(g){var x=u(g,l),b=x.x,m=x.y,y=x.value,_=x.errorVal;if(!_)return null;var w=[],j,S;if(Array.isArray(_)){var E=Hge(_,2);j=E[0],S=E[1]}else j=S=_;if(i==="vertical"){var N=d.scale,A=m+a,O=A+s,D=A-s,k=N(y-j),V=N(y+S);w.push({x1:V,y1:O,x2:V,y2:D}),w.push({x1:k,y1:A,x2:V,y2:A}),w.push({x1:k,y1:O,x2:k,y2:D})}else if(i==="horizontal"){var K=f.scale,ie=b+a,G=ie-s,X=ie+s,re=K(y-j),de=K(y+S);w.push({x1:G,y1:de,x2:X,y2:de}),w.push({x1:ie,y1:re,x2:ie,y2:de}),w.push({x1:G,y1:re,x2:X,y2:re})}return z.createElement(ct,Im({className:"recharts-errorBar",key:"bar-".concat(w.map(function(me){return"".concat(me.x1,"-").concat(me.x2,"-").concat(me.y1,"-").concat(me.y2)}))},p),w.map(function(me){return z.createElement("line",Im({},me,{key:"line-".concat(me.x1,"-").concat(me.x2,"-").concat(me.y1,"-").concat(me.y2)}))}))});return z.createElement(ct,{className:"recharts-errorBars"},v)}}])}(z.Component);a6(Tv,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});a6(Tv,"displayName","ErrorBar");function qf(e){"@babel/helpers - typeof";return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qf(e)}function RA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function po(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RA(Object(r),!0).forEach(function(n){sve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sve(e,t,r){return t=ove(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ove(e){var t=lve(e,"string");return qf(t)=="symbol"?t:t+""}function lve(e,t){if(qf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s6=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,s=$n(r,ki);if(!s)return null;var l=ki.defaultProps,c=l!==void 0?po(po({},l),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:i==="children"?u=(n||[]).reduce(function(d,f){var h=f.item,p=f.props,v=p.sectors||p.data||[];return d.concat(v.map(function(g){return{type:s.props.iconType||h.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(n||[]).map(function(d){var f=d.item,h=f.type.defaultProps,p=h!==void 0?po(po({},h),f.props):{},v=p.dataKey,g=p.name,x=p.legendType,b=p.hide;return{inactive:b,dataKey:v,type:c.iconType||x||"square",color:aj(f),value:g||v,payload:p}}),po(po(po({},c),ki.getWithHeight(s,a)),{},{payload:u,item:s})};function Wf(e){"@babel/helpers - typeof";return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wf(e)}function IA(e){return fve(e)||dve(e)||uve(e)||cve()}function cve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uve(e,t){if(e){if(typeof e=="string")return Pb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pb(e,t)}}function dve(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fve(e){if(Array.isArray(e))return Pb(e)}function Pb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function DA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DA(Object(r),!0).forEach(function(n){Sc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sc(e,t,r){return t=hve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hve(e){var t=pve(e,"string");return Wf(t)=="symbol"?t:t+""}function pve(e,t){if(Wf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kr(e,t,r){return Ke(e)||Ke(t)?r:fr(t)?Kn(e,t,r):Me(t)?t(e):r}function Kd(e,t,r,n){var a=dge(e,function(l){return Kr(l,t)});if(r==="number"){var i=a.filter(function(l){return ve(l)||parseFloat(l)});return i.length?[jv(i),_v(i)]:[1/0,-1/0]}var s=n?a.filter(function(l){return!Ke(l)}):a;return s.map(function(l){return fr(l)||l instanceof Date?l:""})}var mve=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,f=a[u].coordinate,h=u>=l-1?a[0].coordinate:a[u+1].coordinate,p=void 0;if(ln(f-d)!==ln(h-f)){var v=[];if(ln(h-f)===ln(c[1]-c[0])){p=h;var g=f+c[1]-c[0];v[0]=Math.min(g,(g+d)/2),v[1]=Math.max(g,(g+d)/2)}else{p=d;var x=h+c[1]-c[0];v[0]=Math.min(f,(x+f)/2),v[1]=Math.max(f,(x+f)/2)}var b=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(t>b[0]&&t<=b[1]||t>=v[0]&&t<=v[1]){s=a[u].index;break}}else{var m=Math.min(d,h),y=Math.max(d,h);if(t>(m+f)/2&&t<=(y+f)/2){s=a[u].index;break}}}else for(var _=0;_<l;_++)if(_===0&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_>0&&_<l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_===l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2){s=n[_].index;break}return s},aj=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Kt(Kt({},t.type.defaultProps),t.props):t.props,s=i.stroke,l=i.fill,c;switch(a){case"Line":c=s;break;case"Area":case"Radar":c=s&&s!=="none"?s:l;break;default:c=l;break}return c},gve=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var s={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,f=Object.keys(d),h=0,p=f.length;h<p;h++){var v=d[f[h]],g=v.items,x=v.cateAxisId,b=g.filter(function(S){return Oi(S.type).indexOf("Bar")>=0});if(b&&b.length){var m=b[0].type.defaultProps,y=m!==void 0?Kt(Kt({},m),b[0].props):b[0].props,_=y.barSize,w=y[x];s[w]||(s[w]=[]);var j=Ke(_)?r:_;s[w].push({item:b[0],stackList:b.slice(1),barSize:Ke(j)?void 0:cn(j,n,0)})}}return s},vve=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,s=i===void 0?[]:i,l=t.maxBarSize,c=s.length;if(c<1)return null;var u=cn(r,a,0,!0),d,f=[];if(s[0].barSize===+s[0].barSize){var h=!1,p=a/c,v=s.reduce(function(_,w){return _+w.barSize||0},0);v+=(c-1)*u,v>=a&&(v-=(c-1)*u,u=0),v>=a&&p>0&&(h=!0,p*=.9,v=c*p);var g=(a-v)/2>>0,x={offset:g-u,size:0};d=s.reduce(function(_,w){var j={item:w.item,position:{offset:x.offset+x.size+u,size:h?p:w.barSize}},S=[].concat(IA(_),[j]);return x=S[S.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(E){S.push({item:E,position:x})}),S},f)}else{var b=cn(n,a,0,!0);a-2*b-(c-1)*u<=0&&(u=0);var m=(a-2*b-(c-1)*u)/c;m>1&&(m>>=0);var y=l===+l?Math.min(m,l):m;d=s.reduce(function(_,w,j){var S=[].concat(IA(_),[{item:w.item,position:{offset:b+(m+u)*j+(m-y)/2,size:y}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(E){S.push({item:E,position:S[S.length-1].position})}),S},f)}return d},xve=function(t,r,n,a){var i=n.children,s=n.width,l=n.margin,c=s-(l.left||0)-(l.right||0),u=s6({children:i,legendWidth:c});if(u){var d=a||{},f=d.width,h=d.height,p=u.align,v=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&v==="middle")&&p!=="center"&&ve(t[p]))return Kt(Kt({},t),{},Sc({},p,t[p]+(f||0)));if((g==="horizontal"||g==="vertical"&&p==="center")&&v!=="middle"&&ve(t[v]))return Kt(Kt({},t),{},Sc({},v,t[v]+(h||0)))}return t},yve=function(t,r,n){return Ke(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},o6=function(t,r,n,a,i){var s=r.props.children,l=ha(s,Tv).filter(function(u){return yve(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=Kr(d,n);if(Ke(f))return u;var h=Array.isArray(f)?[jv(f),_v(f)]:[f,f],p=c.reduce(function(v,g){var x=Kr(d,g,0),b=h[0]-Math.abs(Array.isArray(x)?x[0]:x),m=h[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(b,v[0]),Math.max(m,v[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},bve=function(t,r,n,a,i){var s=r.map(function(l){return o6(t,l,n,i,a)}).filter(function(l){return!Ke(l)});return s&&s.length?s.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},l6=function(t,r,n,a,i){var s=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&o6(t,c,u,a)||Kd(t,u,n,i)});if(n==="number")return s.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return s.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},c6=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},u6=function(t,r,n,a){if(a)return t.map(function(c){return c.coordinate});var i,s,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(s=!0),c.coordinate});return i||l.push(r),s||l.push(n),l},Ei=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,s=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&s==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?ln(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var h=i?i.indexOf(f):f;return{coordinate:a(h)+u,value:f,offset:u}});return d.filter(function(f){return!Lh(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:a(f)+u,value:f,index:h,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,h){return{coordinate:a(f)+u,value:i?i[f]:f,index:h,offset:u}})},ay=new WeakMap,z0=function(t,r){if(typeof r!="function")return t;ay.has(t)||ay.set(t,new WeakMap);var n=ay.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},d6=function(t,r,n){var a=t.scale,i=t.type,s=t.layout,l=t.axisType;if(a==="auto")return s==="radial"&&l==="radiusAxis"?{scale:Mf(),realScaleType:"band"}:s==="radial"&&l==="angleAxis"?{scale:Cm(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Vd(),realScaleType:"point"}:i==="category"?{scale:Mf(),realScaleType:"band"}:{scale:Cm(),realScaleType:"linear"};if(cl(a)){var c="scale".concat(lv(a));return{scale:(AA[c]||Vd)(),realScaleType:AA[c]?c:"point"}}return Me(a)?{scale:a}:{scale:Vd(),realScaleType:"point"}},MA=1e-4,f6=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-MA,s=Math.max(a[0],a[1])+MA,l=t(r[0]),c=t(r[n-1]);(l<i||l>s||c<i||c>s)&&t.domain([r[0],r[n-1]])}},wve=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},_ve=function(t,r){if(!r||r.length!==2||!ve(r[0])||!ve(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!ve(t[0])||t[0]<n)&&(i[0]=n),(!ve(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},jve=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,s=0,l=0;l<r;++l){var c=Lh(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=s,t[l][n][1]=s+c,s=t[l][n][1])}},Sve=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,s=0;s<r;++s){var l=Lh(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=i,t[s][n][1]=i+l,i=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},Eve={sign:jve,expand:Wae,none:Zc,silhouette:Hae,wiggle:Vae,positive:Sve},Nve=function(t,r,n){var a=r.map(function(l){return l.props.dataKey}),i=Eve[n],s=qae().keys(a).value(function(l,c){return+Kr(l,c,0)}).order(nb).offset(i);return s(t)},Tve=function(t,r,n,a,i,s){if(!t)return null;var l=s?r.reverse():r,c={},u=l.reduce(function(f,h){var p,v=(p=h.type)!==null&&p!==void 0&&p.defaultProps?Kt(Kt({},h.type.defaultProps),h.props):h.props,g=v.stackId,x=v.hide;if(x)return f;var b=v[n],m=f[b]||{hasStack:!1,stackGroups:{}};if(fr(g)){var y=m.stackGroups[g]||{numericAxisId:n,cateAxisId:a,items:[]};y.items.push(h),m.hasStack=!0,m.stackGroups[g]=y}else m.stackGroups[$h("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return Kt(Kt({},f),{},Sc({},b,m))},c),d={};return Object.keys(u).reduce(function(f,h){var p=u[h];if(p.hasStack){var v={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(g,x){var b=p.stackGroups[x];return Kt(Kt({},g),{},Sc({},x,{numericAxisId:n,cateAxisId:a,items:b.items,stackedData:Nve(t,b.items,i)}))},v)}return Kt(Kt({},f),{},Sc({},h,p))},d)},h6=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,s=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=Uge(u,i,l);return t.domain([jv(d),_v(d)]),{niceTicks:d}}if(i&&a==="number"){var f=t.domain(),h=zge(f,i,l);return{niceTicks:h}}return null},LA=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,s=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=Kr(s,r.dataKey,r.domain[l]);return Ke(c)?null:r.scale(c)-i/2+a},Ave=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},Cve=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Kt(Kt({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(fr(i)){var s=r[i];if(s){var l=s.items.indexOf(t);return l>=0?s.stackedData[l]:null}}return null},Ove=function(t){return t.reduce(function(r,n){return[jv(n.concat([r[0]]).filter(ve)),_v(n.concat([r[1]]).filter(ve))]},[1/0,-1/0])},p6=function(t,r,n){return Object.keys(t).reduce(function(a,i){var s=t[i],l=s.stackedData,c=l.reduce(function(u,d){var f=Ove(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},$A=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,FA=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Rb=function(t,r,n){if(Me(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(ve(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if($A.test(t[0])){var i=+$A.exec(t[0])[1];a[0]=r[0]-i}else Me(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(ve(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(FA.test(t[1])){var s=+FA.exec(t[1])[1];a[1]=r[1]+s}else Me(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},Mm=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=P2(r,function(f){return f.coordinate}),s=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},BA=function(t,r,n){return!t||!t.length||Sv(t,Kn(n,"type.defaultProps.domain"))?r:t},m6=function(t,r){var n=t.type.defaultProps?Kt(Kt({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,s=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return Kt(Kt({},De(t,!1)),{},{dataKey:a,unit:s,formatter:l,name:i||a,color:aj(t),value:Kr(r,a),type:c,payload:r,chartType:u,hide:d})};function Hf(e){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hf(e)}function UA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UA(Object(r),!0).forEach(function(n){g6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g6(e,t,r){return t=kve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kve(e){var t=Pve(e,"string");return Hf(t)=="symbol"?t:t+""}function Pve(e,t){if(Hf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rve(e,t){return Lve(e)||Mve(e,t)||Dve(e,t)||Ive()}function Ive(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dve(e,t){if(e){if(typeof e=="string")return zA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zA(e,t)}}function zA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Mve(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function Lve(e){if(Array.isArray(e))return e}var Lm=Math.PI/180,$ve=function(t){return t*180/Math.PI},jt=function(t,r,n,a){return{x:t+Math.cos(-Lm*a)*n,y:r+Math.sin(-Lm*a)*n}},v6=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Fve=function(t,r,n,a,i){var s=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=cn(t.cx,s,s/2),f=cn(t.cy,l,l/2),h=v6(s,l,n),p=cn(t.innerRadius,h,0),v=cn(t.outerRadius,h,h*.8),g=Object.keys(r);return g.reduce(function(x,b){var m=r[b],y=m.domain,_=m.reversed,w;if(Ke(m.range))a==="angleAxis"?w=[c,u]:a==="radiusAxis"&&(w=[p,v]),_&&(w=[w[1],w[0]]);else{w=m.range;var j=w,S=Rve(j,2);c=S[0],u=S[1]}var E=d6(m,i),N=E.realScaleType,A=E.scale;A.domain(y).range(w),f6(A);var O=h6(A,mi(mi({},m),{},{realScaleType:N})),D=mi(mi(mi({},m),O),{},{range:w,radius:v,realScaleType:N,scale:A,cx:d,cy:f,innerRadius:p,outerRadius:v,startAngle:c,endAngle:u});return mi(mi({},x),{},g6({},b,D))},{})},Bve=function(t,r){var n=t.x,a=t.y,i=r.x,s=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-s,2))},Uve=function(t,r){var n=t.x,a=t.y,i=r.cx,s=r.cy,l=Bve({x:n,y:a},{x:i,y:s});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return a>s&&(u=2*Math.PI-u),{radius:l,angle:$ve(u),angleInRadian:u}},zve=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),s=Math.min(a,i);return{startAngle:r-s*360,endAngle:n-s*360}},qve=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),s=Math.floor(a/360),l=Math.min(i,s);return t+l*360},qA=function(t,r){var n=t.x,a=t.y,i=Uve({x:n,y:a},r),s=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(s<c||s>u)return!1;if(s===0)return!0;var d=zve(r),f=d.startAngle,h=d.endAngle,p=l,v;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;v=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;v=p>=h&&p<=f}return v?mi(mi({},r),{},{radius:s,angle:qve(p,r)}):null},x6=function(t){return!T.isValidElement(t)&&!Me(t)&&typeof t!="boolean"?t.className:""};function Vf(e){"@babel/helpers - typeof";return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vf(e)}var Wve=["offset"];function Hve(e){return Xve(e)||Gve(e)||Kve(e)||Vve()}function Vve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kve(e,t){if(e){if(typeof e=="string")return Ib(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ib(e,t)}}function Gve(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Xve(e){if(Array.isArray(e))return Ib(e)}function Ib(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Yve(e,t){if(e==null)return{};var r=Qve(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Qve(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function WA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function or(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WA(Object(r),!0).forEach(function(n){Jve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jve(e,t,r){return t=Zve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zve(e){var t=exe(e,"string");return Vf(t)=="symbol"?t:t+""}function exe(e,t){if(Vf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kf(){return Kf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kf.apply(this,arguments)}var txe=function(t){var r=t.value,n=t.formatter,a=Ke(t.children)?r:t.children;return Me(n)?n(a):a},rxe=function(t,r){var n=ln(r-t),a=Math.min(Math.abs(r-t),360);return n*a},nxe=function(t,r,n){var a=t.position,i=t.viewBox,s=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,p=c.startAngle,v=c.endAngle,g=c.clockWise,x=(f+h)/2,b=rxe(p,v),m=b>=0?1:-1,y,_;a==="insideStart"?(y=p+m*s,_=g):a==="insideEnd"?(y=v-m*s,_=!g):a==="end"&&(y=v+m*s,_=g),_=b<=0?_:!_;var w=jt(u,d,x,y),j=jt(u,d,x,y+(_?1:-1)*359),S="M".concat(w.x,",").concat(w.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(_?0:1,`,
    `).concat(j.x,",").concat(j.y),E=Ke(t.id)?$h("recharts-radial-line-"):t.id;return z.createElement("text",Kf({},n,{dominantBaseline:"central",className:He("recharts-radial-bar-label",l)}),z.createElement("defs",null,z.createElement("path",{id:E,d:S})),z.createElement("textPath",{xlinkHref:"#".concat(E)},r))},axe=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,s=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,h=(d+f)/2;if(a==="outside"){var p=jt(s,l,u+n,h),v=p.x,g=p.y;return{x:v,y:g,textAnchor:v>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(c+u)/2,b=jt(s,l,x,h),m=b.x,y=b.y;return{x:m,y,textAnchor:"middle",verticalAnchor:"middle"}},ixe=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,s=r,l=s.x,c=s.y,u=s.width,d=s.height,f=d>=0?1:-1,h=f*a,p=f>0?"end":"start",v=f>0?"start":"end",g=u>=0?1:-1,x=g*a,b=g>0?"end":"start",m=g>0?"start":"end";if(i==="top"){var y={x:l+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:p};return or(or({},y),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var _={x:l+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:v};return or(or({},_),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(i==="left"){var w={x:l-x,y:c+d/2,textAnchor:b,verticalAnchor:"middle"};return or(or({},w),n?{width:Math.max(w.x-n.x,0),height:d}:{})}if(i==="right"){var j={x:l+u+x,y:c+d/2,textAnchor:m,verticalAnchor:"middle"};return or(or({},j),n?{width:Math.max(n.x+n.width-j.x,0),height:d}:{})}var S=n?{width:u,height:d}:{};return i==="insideLeft"?or({x:l+x,y:c+d/2,textAnchor:m,verticalAnchor:"middle"},S):i==="insideRight"?or({x:l+u-x,y:c+d/2,textAnchor:b,verticalAnchor:"middle"},S):i==="insideTop"?or({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:v},S):i==="insideBottom"?or({x:l+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:p},S):i==="insideTopLeft"?or({x:l+x,y:c+h,textAnchor:m,verticalAnchor:v},S):i==="insideTopRight"?or({x:l+u-x,y:c+h,textAnchor:b,verticalAnchor:v},S):i==="insideBottomLeft"?or({x:l+x,y:c+d-h,textAnchor:m,verticalAnchor:p},S):i==="insideBottomRight"?or({x:l+u-x,y:c+d-h,textAnchor:b,verticalAnchor:p},S):$u(i)&&(ve(i.x)||Do(i.x))&&(ve(i.y)||Do(i.y))?or({x:l+cn(i.x,u),y:c+cn(i.y,d),textAnchor:"end",verticalAnchor:"end"},S):or({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},S)},sxe=function(t){return"cx"in t&&ve(t.cx)};function yr(e){var t=e.offset,r=t===void 0?5:t,n=Yve(e,Wve),a=or({offset:r},n),i=a.viewBox,s=a.position,l=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,h=a.textBreakAll;if(!i||Ke(l)&&Ke(c)&&!T.isValidElement(u)&&!Me(u))return null;if(T.isValidElement(u))return T.cloneElement(u,a);var p;if(Me(u)){if(p=T.createElement(u,a),T.isValidElement(p))return p}else p=txe(a);var v=sxe(i),g=De(a,!0);if(v&&(s==="insideStart"||s==="insideEnd"||s==="end"))return nxe(a,p,g);var x=v?axe(a):ixe(a);return z.createElement(dl,Kf({className:He("recharts-label",f)},g,x,{breakAll:h}),p)}yr.displayName="Label";var y6=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,s=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,h=t.y,p=t.top,v=t.left,g=t.width,x=t.height,b=t.clockWise,m=t.labelViewBox;if(m)return m;if(ve(g)&&ve(x)){if(ve(f)&&ve(h))return{x:f,y:h,width:g,height:x};if(ve(p)&&ve(v))return{x:p,y:v,width:g,height:x}}return ve(f)&&ve(h)?{x:f,y:h,width:0,height:0}:ve(r)&&ve(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:s||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:b}:t.viewBox?t.viewBox:{}},oxe=function(t,r){return t?t===!0?z.createElement(yr,{key:"label-implicit",viewBox:r}):fr(t)?z.createElement(yr,{key:"label-implicit",viewBox:r,value:t}):T.isValidElement(t)?t.type===yr?T.cloneElement(t,{key:"label-implicit",viewBox:r}):z.createElement(yr,{key:"label-implicit",content:t,viewBox:r}):Me(t)?z.createElement(yr,{key:"label-implicit",content:t,viewBox:r}):$u(t)?z.createElement(yr,Kf({viewBox:r},t,{key:"label-implicit"})):null:null},lxe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=y6(t),s=ha(a,yr).map(function(c,u){return T.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return s;var l=oxe(t.label,r||i);return[l].concat(Hve(s))};yr.parseViewBox=y6;yr.renderCallByParent=lxe;function cxe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var uxe=cxe;const dxe=it(uxe);function Gf(e){"@babel/helpers - typeof";return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gf(e)}var fxe=["valueAccessor"],hxe=["data","dataKey","clockWise","id","textBreakAll"];function pxe(e){return xxe(e)||vxe(e)||gxe(e)||mxe()}function mxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gxe(e,t){if(e){if(typeof e=="string")return Db(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Db(e,t)}}function vxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xxe(e){if(Array.isArray(e))return Db(e)}function Db(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $m(){return $m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$m.apply(this,arguments)}function HA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function VA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HA(Object(r),!0).forEach(function(n){yxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yxe(e,t,r){return t=bxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bxe(e){var t=wxe(e,"string");return Gf(t)=="symbol"?t:t+""}function wxe(e,t){if(Gf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KA(e,t){if(e==null)return{};var r=_xe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _xe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var jxe=function(t){return Array.isArray(t.value)?dxe(t.value):t.value};function qs(e){var t=e.valueAccessor,r=t===void 0?jxe:t,n=KA(e,fxe),a=n.data,i=n.dataKey,s=n.clockWise,l=n.id,c=n.textBreakAll,u=KA(n,hxe);return!a||!a.length?null:z.createElement(ct,{className:"recharts-label-list"},a.map(function(d,f){var h=Ke(i)?r(d,f):Kr(d&&d.payload,i),p=Ke(l)?{}:{id:"".concat(l,"-").concat(f)};return z.createElement(yr,$m({},De(d,!0),u,p,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:yr.parseViewBox(Ke(s)?d:VA(VA({},d),{},{clockWise:s})),key:"label-".concat(f),index:f}))}))}qs.displayName="LabelList";function Sxe(e,t){return e?e===!0?z.createElement(qs,{key:"labelList-implicit",data:t}):z.isValidElement(e)||Me(e)?z.createElement(qs,{key:"labelList-implicit",data:t,content:e}):$u(e)?z.createElement(qs,$m({data:t},e,{key:"labelList-implicit"})):null:null}function Exe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=ha(n,qs).map(function(s,l){return T.cloneElement(s,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var i=Sxe(e.label,t);return[i].concat(pxe(a))}qs.renderCallByParent=Exe;function Xf(e){"@babel/helpers - typeof";return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xf(e)}function Mb(){return Mb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mb.apply(this,arguments)}function GA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function XA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GA(Object(r),!0).forEach(function(n){Nxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nxe(e,t,r){return t=Txe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Txe(e){var t=Axe(e,"string");return Xf(t)=="symbol"?t:t+""}function Axe(e,t){if(Xf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cxe=function(t,r){var n=ln(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},q0=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,s=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,f=Math.asin(c/d)/Lm,h=u?i:i+s*f,p=jt(r,n,d,h),v=jt(r,n,a,h),g=u?i-s*f:i,x=jt(r,n,d*Math.cos(f*Lm),g);return{center:p,circleTangency:v,lineTangency:x,theta:f}},b6=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,s=t.startAngle,l=t.endAngle,c=Cxe(s,l),u=s+c,d=jt(r,n,i,s),f=jt(r,n,i,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(s>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var p=jt(r,n,a,s),v=jt(r,n,a,u);h+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(s<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},Oxe=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,s=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=ln(d-u),h=q0({cx:r,cy:n,radius:i,angle:u,sign:f,cornerRadius:s,cornerIsExternal:c}),p=h.circleTangency,v=h.lineTangency,g=h.theta,x=q0({cx:r,cy:n,radius:i,angle:d,sign:-f,cornerRadius:s,cornerIsExternal:c}),b=x.circleTangency,m=x.lineTangency,y=x.theta,_=c?Math.abs(u-d):Math.abs(u-d)-g-y;if(_<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):b6({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var w="M ".concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
  `);if(a>0){var j=q0({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),S=j.circleTangency,E=j.lineTangency,N=j.theta,A=q0({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),O=A.circleTangency,D=A.lineTangency,k=A.theta,V=c?Math.abs(u-d):Math.abs(u-d)-N-k;if(V<0&&s===0)return"".concat(w,"L").concat(r,",").concat(n,"Z");w+="L".concat(D.x,",").concat(D.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(V>180),",").concat(+(f>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(E.x,",").concat(E.y,"Z")}else w+="L".concat(r,",").concat(n,"Z");return w},kxe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},w6=function(t){var r=XA(XA({},kxe),t),n=r.cx,a=r.cy,i=r.innerRadius,s=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,h=r.className;if(s<i||d===f)return null;var p=He("recharts-sector",h),v=s-i,g=cn(l,v,0,!0),x;return g>0&&Math.abs(d-f)<360?x=Oxe({cx:n,cy:a,innerRadius:i,outerRadius:s,cornerRadius:Math.min(g,v/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):x=b6({cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:d,endAngle:f}),z.createElement("path",Mb({},De(r,!0),{className:p,d:x,role:"img"}))};function Yf(e){"@babel/helpers - typeof";return Yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yf(e)}function Lb(){return Lb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lb.apply(this,arguments)}function YA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function QA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YA(Object(r),!0).forEach(function(n){Pxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pxe(e,t,r){return t=Rxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rxe(e){var t=Ixe(e,"string");return Yf(t)=="symbol"?t:t+""}function Ixe(e,t){if(Yf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JA={curveBasisClosed:Pae,curveBasisOpen:Rae,curveBasis:kae,curveBumpX:vae,curveBumpY:xae,curveLinearClosed:Iae,curveLinear:uv,curveMonotoneX:Dae,curveMonotoneY:Mae,curveNatural:Lae,curveStep:$ae,curveStepAfter:Bae,curveStepBefore:Fae},W0=function(t){return t.x===+t.x&&t.y===+t.y},md=function(t){return t.x},gd=function(t){return t.y},Dxe=function(t,r){if(Me(t))return t;var n="curve".concat(lv(t));return(n==="curveMonotone"||n==="curveBump")&&r?JA["".concat(n).concat(r==="vertical"?"Y":"X")]:JA[n]||uv},Mxe=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,s=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=Dxe(n,l),f=u?i.filter(function(g){return W0(g)}):i,h;if(Array.isArray(s)){var p=u?s.filter(function(g){return W0(g)}):s,v=f.map(function(g,x){return QA(QA({},g),{},{base:p[x]})});return l==="vertical"?h=I0().y(gd).x1(md).x0(function(g){return g.base.x}):h=I0().x(md).y1(gd).y0(function(g){return g.base.y}),h.defined(W0).curve(d),h(v)}return l==="vertical"&&ve(s)?h=I0().y(gd).x1(md).x0(s):ve(s)?h=I0().x(md).y1(gd).y0(s):h=mI().x(md).y(gd),h.defined(W0).curve(d),h(f)},$b=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var s=n&&n.length?Mxe(t):a;return T.createElement("path",Lb({},De(t,!1),cm(t),{className:He("recharts-curve",r),d:s,ref:i}))},_6={exports:{}},Lxe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",$xe=Lxe,Fxe=$xe;function j6(){}function S6(){}S6.resetWarningCache=j6;var Bxe=function(){function e(n,a,i,s,l,c){if(c!==Fxe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:S6,resetWarningCache:j6};return r.PropTypes=r,r};_6.exports=Bxe();var Uxe=_6.exports;const nt=it(Uxe),{getOwnPropertyNames:zxe,getOwnPropertySymbols:qxe}=Object,{hasOwnProperty:Wxe}=Object.prototype;function iy(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function H0(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);const{cache:i}=a,s=i.get(r),l=i.get(n);if(s&&l)return s===n&&l===r;i.set(r,n),i.set(n,r);const c=e(r,n,a);return i.delete(r),i.delete(n),c}}function Hxe(e){return e!=null?e[Symbol.toStringTag]:void 0}function ZA(e){return zxe(e).concat(qxe(e))}const Vxe=Object.hasOwn||((e,t)=>Wxe.call(e,t));function Cl(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const Kxe="__v",Gxe="__o",Xxe="_owner",{getOwnPropertyDescriptor:eC,keys:tC}=Object;function Yxe(e,t){return e.byteLength===t.byteLength&&Fm(new Uint8Array(e),new Uint8Array(t))}function Qxe(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function Jxe(e,t){return e.byteLength===t.byteLength&&Fm(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function Zxe(e,t){return Cl(e.getTime(),t.getTime())}function eye(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function tye(e,t){return e===t}function rC(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.entries();let s,l,c=0;for(;(s=i.next())&&!s.done;){const u=t.entries();let d=!1,f=0;for(;(l=u.next())&&!l.done;){if(a[f]){f++;continue}const h=s.value,p=l.value;if(r.equals(h[0],p[0],c,f,e,t,r)&&r.equals(h[1],p[1],h[0],p[0],e,t,r)){d=a[f]=!0;break}f++}if(!d)return!1;c++}return!0}const rye=Cl;function nye(e,t,r){const n=tC(e);let a=n.length;if(tC(t).length!==a)return!1;for(;a-- >0;)if(!E6(e,t,r,n[a]))return!1;return!0}function vd(e,t,r){const n=ZA(e);let a=n.length;if(ZA(t).length!==a)return!1;let i,s,l;for(;a-- >0;)if(i=n[a],!E6(e,t,r,i)||(s=eC(e,i),l=eC(t,i),(s||l)&&(!s||!l||s.configurable!==l.configurable||s.enumerable!==l.enumerable||s.writable!==l.writable)))return!1;return!0}function aye(e,t){return Cl(e.valueOf(),t.valueOf())}function iye(e,t){return e.source===t.source&&e.flags===t.flags}function nC(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.values();let s,l;for(;(s=i.next())&&!s.done;){const c=t.values();let u=!1,d=0;for(;(l=c.next())&&!l.done;){if(!a[d]&&r.equals(s.value,l.value,s.value,l.value,e,t,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function Fm(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function sye(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function E6(e,t,r,n){return(n===Xxe||n===Gxe||n===Kxe)&&(e.$$typeof||t.$$typeof)?!0:Vxe(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const oye="[object ArrayBuffer]",lye="[object Arguments]",cye="[object Boolean]",uye="[object DataView]",dye="[object Date]",fye="[object Error]",hye="[object Map]",pye="[object Number]",mye="[object Object]",gye="[object RegExp]",vye="[object Set]",xye="[object String]",yye={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},bye="[object URL]",wye=Object.prototype.toString;function _ye({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:s,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:d,areSetsEqual:f,areTypedArraysEqual:h,areUrlsEqual:p,unknownTagComparators:v}){return function(x,b,m){if(x===b)return!0;if(x==null||b==null)return!1;const y=typeof x;if(y!==typeof b)return!1;if(y!=="object")return y==="number"?l(x,b,m):y==="function"?i(x,b,m):!1;const _=x.constructor;if(_!==b.constructor)return!1;if(_===Object)return c(x,b,m);if(Array.isArray(x))return t(x,b,m);if(_===Date)return n(x,b,m);if(_===RegExp)return d(x,b,m);if(_===Map)return s(x,b,m);if(_===Set)return f(x,b,m);const w=wye.call(x);if(w===dye)return n(x,b,m);if(w===gye)return d(x,b,m);if(w===hye)return s(x,b,m);if(w===vye)return f(x,b,m);if(w===mye)return typeof x.then!="function"&&typeof b.then!="function"&&c(x,b,m);if(w===bye)return p(x,b,m);if(w===fye)return a(x,b,m);if(w===lye)return c(x,b,m);if(yye[w])return h(x,b,m);if(w===oye)return e(x,b,m);if(w===uye)return r(x,b,m);if(w===cye||w===pye||w===xye)return u(x,b,m);if(v){let j=v[w];if(!j){const S=Hxe(x);S&&(j=v[S])}if(j)return j(x,b,m)}return!1}}function jye({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:Yxe,areArraysEqual:r?vd:Qxe,areDataViewsEqual:Jxe,areDatesEqual:Zxe,areErrorsEqual:eye,areFunctionsEqual:tye,areMapsEqual:r?iy(rC,vd):rC,areNumbersEqual:rye,areObjectsEqual:r?vd:nye,arePrimitiveWrappersEqual:aye,areRegExpsEqual:iye,areSetsEqual:r?iy(nC,vd):nC,areTypedArraysEqual:r?iy(Fm,vd):Fm,areUrlsEqual:sye,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const a=H0(n.areArraysEqual),i=H0(n.areMapsEqual),s=H0(n.areObjectsEqual),l=H0(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:l})}return n}function Sye(e){return function(t,r,n,a,i,s,l){return e(t,r,l)}}function Eye({circular:e,comparator:t,createState:r,equals:n,strict:a}){if(r)return function(l,c){const{cache:u=e?new WeakMap:void 0,meta:d}=r();return t(l,c,{cache:u,equals:n,meta:d,strict:a})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(l,c){return t(l,c,i)}}const Nye=so();so({strict:!0});so({circular:!0});so({circular:!0,strict:!0});so({createInternalComparator:()=>Cl});so({strict:!0,createInternalComparator:()=>Cl});so({circular:!0,createInternalComparator:()=>Cl});so({circular:!0,createInternalComparator:()=>Cl,strict:!0});function so(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:a=!1}=e,i=jye(e),s=_ye(i),l=r?r(s):Sye(s);return Eye({circular:t,comparator:s,createState:n,equals:l,strict:a})}function Tye(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function aC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):Tye(a)};requestAnimationFrame(n)}function Fb(e){"@babel/helpers - typeof";return Fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fb(e)}function Aye(e){return Pye(e)||kye(e)||Oye(e)||Cye()}function Cye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oye(e,t){if(e){if(typeof e=="string")return iC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iC(e,t)}}function iC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pye(e){if(Array.isArray(e))return e}function Rye(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var s=i,l=Aye(s),c=l[0],u=l.slice(1);if(typeof c=="number"){aC(a.bind(null,u),c);return}a(c),aC(a.bind(null,u));return}Fb(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Qf(e){"@babel/helpers - typeof";return Qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qf(e)}function sC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function oC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sC(Object(r),!0).forEach(function(n){N6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N6(e,t,r){return t=Iye(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iye(e){var t=Dye(e,"string");return Qf(t)==="symbol"?t:String(t)}function Dye(e,t){if(Qf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mye=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},Lye=function(t){return t},$ye=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Gd=function(t,r){return Object.keys(r).reduce(function(n,a){return oC(oC({},n),{},N6({},a,t(a,r[a])))},{})},lC=function(t,r,n){return t.map(function(a){return"".concat($ye(a)," ").concat(r,"ms ").concat(n)}).join(",")};function Fye(e,t){return zye(e)||Uye(e,t)||T6(e,t)||Bye()}function Bye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uye(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function zye(e){if(Array.isArray(e))return e}function qye(e){return Vye(e)||Hye(e)||T6(e)||Wye()}function Wye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T6(e,t){if(e){if(typeof e=="string")return Bb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bb(e,t)}}function Hye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Vye(e){if(Array.isArray(e))return Bb(e)}function Bb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Bm=1e-4,A6=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},C6=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},cC=function(t,r){return function(n){var a=A6(t,r);return C6(a,n)}},Kye=function(t,r){return function(n){var a=A6(t,r),i=[].concat(qye(a.map(function(s,l){return s*l}).slice(1)),[0]);return C6(i,n)}},uC=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],s=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,s=1,l=1;break;case"ease":a=.25,i=.1,s=.25,l=1;break;case"ease-in":a=.42,i=0,s=1,l=1;break;case"ease-out":a=.42,i=0,s=.58,l=1;break;case"ease-in-out":a=0,i=0,s=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),d=Fye(u,4);a=d[0],i=d[1],s=d[2],l=d[3]}}}var f=cC(a,s),h=cC(i,l),p=Kye(a,s),v=function(b){return b>1?1:b<0?0:b},g=function(b){for(var m=b>1?1:b,y=m,_=0;_<8;++_){var w=f(y)-m,j=p(y);if(Math.abs(w-m)<Bm||j<Bm)return h(y);y=v(y-w/j)}return h(y)};return g.isStepper=!1,g},Gye=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,s=t.dt,l=s===void 0?17:s,c=function(d,f,h){var p=-(d-f)*n,v=h*i,g=h+(p-v)*l/1e3,x=h*l/1e3+d;return Math.abs(x-f)<Bm&&Math.abs(g)<Bm?[f,0]:[x,g]};return c.isStepper=!0,c.dt=l,c},Xye=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return uC(a);case"spring":return Gye();default:if(a.split("(")[0]==="cubic-bezier")return uC(a)}return typeof a=="function"?a:null};function Jf(e){"@babel/helpers - typeof";return Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jf(e)}function dC(e){return Jye(e)||Qye(e)||O6(e)||Yye()}function Yye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Jye(e){if(Array.isArray(e))return zb(e)}function fC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Or(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fC(Object(r),!0).forEach(function(n){Ub(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ub(e,t,r){return t=Zye(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zye(e){var t=e1e(e,"string");return Jf(t)==="symbol"?t:String(t)}function e1e(e,t){if(Jf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Jf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t1e(e,t){return a1e(e)||n1e(e,t)||O6(e,t)||r1e()}function r1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O6(e,t){if(e){if(typeof e=="string")return zb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zb(e,t)}}function zb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function n1e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function a1e(e){if(Array.isArray(e))return e}var Um=function(t,r,n){return t+(r-t)*n},qb=function(t){var r=t.from,n=t.to;return r!==n},i1e=function e(t,r,n){var a=Gd(function(i,s){if(qb(s)){var l=t(s.from,s.to,s.velocity),c=t1e(l,2),u=c[0],d=c[1];return Or(Or({},s),{},{from:u,velocity:d})}return s},r);return n<1?Gd(function(i,s){return qb(s)?Or(Or({},s),{},{velocity:Um(s.velocity,a[i].velocity,n),from:Um(s.from,a[i].from,n)}):s},r):e(t,a,n-1)};const s1e=function(e,t,r,n,a){var i=Mye(e,t),s=i.reduce(function(x,b){return Or(Or({},x),{},Ub({},b,[e[b],t[b]]))},{}),l=i.reduce(function(x,b){return Or(Or({},x),{},Ub({},b,{from:e[b],velocity:0,to:t[b]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return Gd(function(b,m){return m.from},l)},p=function(){return!Object.values(l).filter(qb).length},v=function(b){u||(u=b);var m=b-u,y=m/r.dt;l=i1e(r,l,y),a(Or(Or(Or({},e),t),h())),u=b,p()||(c=requestAnimationFrame(f))},g=function(b){d||(d=b);var m=(b-d)/n,y=Gd(function(w,j){return Um.apply(void 0,dC(j).concat([r(m)]))},s);if(a(Or(Or(Or({},e),t),y)),m<1)c=requestAnimationFrame(f);else{var _=Gd(function(w,j){return Um.apply(void 0,dC(j).concat([r(1)]))},s);a(Or(Or(Or({},e),t),_))}};return f=r.isStepper?v:g,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function lu(e){"@babel/helpers - typeof";return lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lu(e)}var o1e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function l1e(e,t){if(e==null)return{};var r=c1e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function c1e(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function sy(e){return h1e(e)||f1e(e)||d1e(e)||u1e()}function u1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d1e(e,t){if(e){if(typeof e=="string")return Wb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wb(e,t)}}function f1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function h1e(e){if(Array.isArray(e))return Wb(e)}function Wb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ja(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hC(Object(r),!0).forEach(function(n){Cd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cd(e,t,r){return t=k6(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m1e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k6(n.key),n)}}function g1e(e,t,r){return t&&m1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function k6(e){var t=v1e(e,"string");return lu(t)==="symbol"?t:String(t)}function v1e(e,t){if(lu(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(lu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hb(e,t)}function Hb(e,t){return Hb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Hb(e,t)}function y1e(e){var t=b1e();return function(){var n=zm(e),a;if(t){var i=zm(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Vb(this,a)}}function Vb(e,t){if(t&&(lu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kb(e)}function Kb(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b1e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zm(e){return zm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zm(e)}var Vi=function(e){x1e(r,e);var t=y1e(r);function r(n,a){var i;p1e(this,r),i=t.call(this,n,a);var s=i.props,l=s.isActive,c=s.attributeName,u=s.from,d=s.to,f=s.steps,h=s.children,p=s.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Kb(i)),i.changeStyle=i.changeStyle.bind(Kb(i)),!l||p<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:d}),Vb(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof h=="function")return i.state={style:u},Vb(i);i.state={style:c?Cd({},c,u):u}}else i.state={style:{}};return i}return g1e(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,s=a.canBegin;this.mounted=!0,!(!i||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,s=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,h=this.state.style;if(l){if(!s){var p={style:c?Cd({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(p);return}if(!(Nye(a.to,d)&&a.canBegin&&a.isActive)){var v=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=v||u?f:a.to;if(this.state&&h){var x={style:c?Cd({},c,g):g};(c&&h[c]!==g||!c&&h!==g)&&this.setState(x)}this.runAnimation(ja(ja({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,s=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,h=a.onAnimationStart,p=s1e(s,l,Xye(u),c,this.changeStyle),v=function(){i.stopJSAnimation=p()};this.manager.start([h,d,v,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,s=a.steps,l=a.begin,c=a.onAnimationStart,u=s[0],d=u.style,f=u.duration,h=f===void 0?0:f,p=function(g,x,b){if(b===0)return g;var m=x.duration,y=x.easing,_=y===void 0?"ease":y,w=x.style,j=x.properties,S=x.onAnimationEnd,E=b>0?s[b-1]:x,N=j||Object.keys(w);if(typeof _=="function"||_==="spring")return[].concat(sy(g),[i.runJSAnimation.bind(i,{from:E.style,to:w,duration:m,easing:_}),m]);var A=lC(N,m,_),O=ja(ja(ja({},E.style),w),{},{transition:A});return[].concat(sy(g),[O,m,S]).filter(Lye)};return this.manager.start([c].concat(sy(s.reduce(p,[d,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=Rye());var i=a.begin,s=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,h=a.steps,p=a.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var g=l?Cd({},l,c):c,x=lC(Object.keys(g),s,u);v.start([d,i,ja(ja({},g),{},{transition:x}),s,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var s=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=l1e(a,o1e),u=T.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||s<=0)return i;var f=function(p){var v=p.props,g=v.style,x=g===void 0?{}:g,b=v.className,m=T.cloneElement(p,ja(ja({},c),{},{style:ja(ja({},x),d),className:b}));return m};return u===1?f(T.Children.only(i)):z.createElement("div",null,T.Children.map(i,function(h){return f(h)}))}}]),r}(T.PureComponent);Vi.displayName="Animate";Vi.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Vi.propTypes={from:nt.oneOfType([nt.object,nt.string]),to:nt.oneOfType([nt.object,nt.string]),attributeName:nt.string,duration:nt.number,begin:nt.number,easing:nt.oneOfType([nt.string,nt.func]),steps:nt.arrayOf(nt.shape({duration:nt.number.isRequired,style:nt.object.isRequired,easing:nt.oneOfType([nt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),nt.func]),properties:nt.arrayOf("string"),onAnimationEnd:nt.func})),children:nt.oneOfType([nt.node,nt.func]),isActive:nt.bool,canBegin:nt.bool,onAnimationEnd:nt.func,shouldReAnimate:nt.bool,onAnimationStart:nt.func,onAnimationReStart:nt.func};function Zf(e){"@babel/helpers - typeof";return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zf(e)}function qm(){return qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qm.apply(this,arguments)}function w1e(e,t){return E1e(e)||S1e(e,t)||j1e(e,t)||_1e()}function _1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j1e(e,t){if(e){if(typeof e=="string")return pC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pC(e,t)}}function pC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S1e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function E1e(e){if(Array.isArray(e))return e}function mC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mC(Object(r),!0).forEach(function(n){N1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N1e(e,t,r){return t=T1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T1e(e){var t=A1e(e,"string");return Zf(t)=="symbol"?t:t+""}function A1e(e,t){if(Zf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vC=function(t,r,n,a,i){var s=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(s>0&&i instanceof Array){for(var f=[0,0,0,0],h=0,p=4;h<p;h++)f[h]=i[h]>s?s:i[h];d="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*f[1])),d+="L ".concat(t+n,",").concat(r+a-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-c*f[2],",").concat(r+a)),d+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-l*f[3])),d+="Z"}else if(s>0&&i===+i&&i>0){var v=Math.min(s,i);d="M ".concat(t,",").concat(r+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+c*v,",").concat(r,`
            L `).concat(t+n-c*v,",").concat(r,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*v,`
            L `).concat(t+n,",").concat(r+a-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+n-c*v,",").concat(r+a,`
            L `).concat(t+c*v,",").concat(r+a,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t,",").concat(r+a-l*v," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},C1e=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,s=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),f=Math.min(s,s+c),h=Math.max(s,s+c);return n>=u&&n<=d&&a>=f&&a<=h}return!1},O1e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ij=function(t){var r=gC(gC({},O1e),t),n=T.useRef(),a=T.useState(-1),i=w1e(a,2),s=i[0],l=i[1];T.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&l(_)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,h=r.radius,p=r.className,v=r.animationEasing,g=r.animationDuration,x=r.animationBegin,b=r.isAnimationActive,m=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var y=He("recharts-rectangle",p);return m?z.createElement(Vi,{canBegin:s>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:g,animationEasing:v,isActive:m},function(_){var w=_.width,j=_.height,S=_.x,E=_.y;return z.createElement(Vi,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:g,isActive:b,easing:v},z.createElement("path",qm({},De(r,!0),{className:y,d:vC(S,E,w,j,h),ref:n})))}):z.createElement("path",qm({},De(r,!0),{className:y,d:vC(c,u,d,f,h)}))},k1e=["points","className","baseLinePoints","connectNulls"];function ic(){return ic=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ic.apply(this,arguments)}function P1e(e,t){if(e==null)return{};var r=R1e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function R1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function xC(e){return L1e(e)||M1e(e)||D1e(e)||I1e()}function I1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D1e(e,t){if(e){if(typeof e=="string")return Gb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gb(e,t)}}function M1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function L1e(e){if(Array.isArray(e))return Gb(e)}function Gb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var yC=function(t){return t&&t.x===+t.x&&t.y===+t.y},$1e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){yC(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),yC(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Xd=function(t,r){var n=$1e(t);r&&(n=[n.reduce(function(i,s){return[].concat(xC(i),xC(s))},[])]);var a=n.map(function(i){return i.reduce(function(s,l,c){return"".concat(s).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},F1e=function(t,r,n){var a=Xd(t,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Xd(r.reverse(),n).slice(1))},B1e=function(t){var r=t.points,n=t.className,a=t.baseLinePoints,i=t.connectNulls,s=P1e(t,k1e);if(!r||!r.length)return null;var l=He("recharts-polygon",n);if(a&&a.length){var c=s.stroke&&s.stroke!=="none",u=F1e(r,a,i);return z.createElement("g",{className:l},z.createElement("path",ic({},De(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),c?z.createElement("path",ic({},De(s,!0),{fill:"none",d:Xd(r,i)})):null,c?z.createElement("path",ic({},De(s,!0),{fill:"none",d:Xd(a,i)})):null)}var d=Xd(r,i);return z.createElement("path",ic({},De(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",className:l,d}))};function Xb(){return Xb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xb.apply(this,arguments)}var sj=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,s=He("recharts-dot",i);return r===+r&&n===+n&&a===+a?T.createElement("circle",Xb({},De(t,!1),cm(t),{className:s,cx:r,cy:n,r:a})):null};function eh(e){"@babel/helpers - typeof";return eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eh(e)}var U1e=["x","y","top","left","width","height","className"];function Yb(){return Yb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yb.apply(this,arguments)}function bC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function z1e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bC(Object(r),!0).forEach(function(n){q1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function q1e(e,t,r){return t=W1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W1e(e){var t=H1e(e,"string");return eh(t)=="symbol"?t:t+""}function H1e(e,t){if(eh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(eh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V1e(e,t){if(e==null)return{};var r=K1e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function K1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var G1e=function(t,r,n,a,i,s){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(s,",").concat(r,"h").concat(n)},X1e=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,s=t.top,l=s===void 0?0:s,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,h=t.height,p=h===void 0?0:h,v=t.className,g=V1e(t,U1e),x=z1e({x:n,y:i,top:l,left:u,width:f,height:p},g);return!ve(n)||!ve(i)||!ve(f)||!ve(p)||!ve(l)||!ve(u)?null:z.createElement("path",Yb({},De(x,!0),{className:He("recharts-cross",v),d:G1e(n,i,f,p,l,u)}))},Y1e=wv,Q1e=qD,J1e=ui;function Z1e(e,t){return e&&e.length?Y1e(e,J1e(t),Q1e):void 0}var ebe=Z1e;const tbe=it(ebe);var rbe=wv,nbe=ui,abe=WD;function ibe(e,t){return e&&e.length?rbe(e,nbe(t),abe):void 0}var sbe=ibe;const obe=it(sbe);var lbe=["cx","cy","angle","ticks","axisLine"],cbe=["ticks","tick","angle","tickFormatter","stroke"];function cu(e){"@babel/helpers - typeof";return cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cu(e)}function Yd(){return Yd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yd.apply(this,arguments)}function wC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wC(Object(r),!0).forEach(function(n){Av(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _C(e,t){if(e==null)return{};var r=ube(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ube(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function dbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R6(n.key),n)}}function fbe(e,t,r){return t&&jC(e.prototype,t),r&&jC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function hbe(e,t,r){return t=Wm(t),pbe(e,P6()?Reflect.construct(t,r||[],Wm(e).constructor):t.apply(e,r))}function pbe(e,t){if(t&&(cu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mbe(e)}function mbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(P6=function(){return!!e})()}function Wm(e){return Wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wm(e)}function gbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qb(e,t)}function Qb(e,t){return Qb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Qb(e,t)}function Av(e,t,r){return t=R6(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R6(e){var t=vbe(e,"string");return cu(t)=="symbol"?t:t+""}function vbe(e,t){if(cu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Cv=function(e){function t(){return dbe(this,t),hbe(this,t,arguments)}return gbe(t,e),fbe(t,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,s=i.angle,l=i.cx,c=i.cy;return jt(l,c,a,s)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.angle,l=n.ticks,c=tbe(l,function(d){return d.coordinate||0}),u=obe(l,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.angle,l=n.ticks,c=n.axisLine,u=_C(n,lbe),d=l.reduce(function(v,g){return[Math.min(v[0],g.coordinate),Math.max(v[1],g.coordinate)]},[1/0,-1/0]),f=jt(a,i,d[0],s),h=jt(a,i,d[1],s),p=mo(mo(mo({},De(u,!1)),{},{fill:"none"},De(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return z.createElement("line",Yd({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,s=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=_C(a,cbe),f=this.getTickTextAnchor(),h=De(d,!1),p=De(s,!1),v=i.map(function(g,x){var b=n.getTickValueCoord(g),m=mo(mo(mo(mo({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(b.x,", ").concat(b.y,")")},h),{},{stroke:"none",fill:u},p),{},{index:x},b),{},{payload:g});return z.createElement(ct,Yd({className:He("recharts-polar-radius-axis-tick",x6(s)),key:"tick-".concat(g.coordinate)},ul(n.props,g,x)),t.renderTickItem(s,m,c?c(g.value,x):g.value))});return z.createElement(ct,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,s=n.tick;return!a||!a.length?null:z.createElement(ct,{className:He("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),s&&this.renderTicks(),yr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var s;return z.isValidElement(n)?s=z.cloneElement(n,a):Me(n)?s=n(a):s=z.createElement(dl,Yd({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),s}}])}(T.PureComponent);Av(Cv,"displayName","PolarRadiusAxis");Av(Cv,"axisType","radiusAxis");Av(Cv,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function uu(e){"@babel/helpers - typeof";return uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uu(e)}function Ao(){return Ao=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ao.apply(this,arguments)}function SC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function go(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SC(Object(r),!0).forEach(function(n){Ov(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D6(n.key),n)}}function ybe(e,t,r){return t&&EC(e.prototype,t),r&&EC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function bbe(e,t,r){return t=Hm(t),wbe(e,I6()?Reflect.construct(t,r||[],Hm(e).constructor):t.apply(e,r))}function wbe(e,t){if(t&&(uu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _be(e)}function _be(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I6=function(){return!!e})()}function Hm(e){return Hm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hm(e)}function jbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jb(e,t)}function Jb(e,t){return Jb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Jb(e,t)}function Ov(e,t,r){return t=D6(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D6(e){var t=Sbe(e,"string");return uu(t)=="symbol"?t:t+""}function Sbe(e,t){if(uu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(uu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ebe=Math.PI/180,NC=1e-5,kv=function(e){function t(){return xbe(this,t),bbe(this,t,arguments)}return jbe(t,e),ybe(t,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,s=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,f=jt(i,s,l,n.coordinate),h=jt(i,s,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*Ebe),s;return i>NC?s=a==="outer"?"start":"end":i<-NC?s=a==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.radius,l=n.axisLine,c=n.axisLineType,u=go(go({},De(this.props,!1)),{},{fill:"none"},De(l,!1));if(c==="circle")return z.createElement(sj,Ao({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:s}));var d=this.props.ticks,f=d.map(function(h){return jt(a,i,s,h.coordinate)});return z.createElement(B1e,Ao({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,s=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=De(this.props,!1),f=De(s,!1),h=go(go({},d),{},{fill:"none"},De(l,!1)),p=i.map(function(v,g){var x=n.getTickLineCoord(v),b=n.getTickTextAnchor(v),m=go(go(go({textAnchor:b},d),{},{stroke:"none",fill:u},f),{},{index:g,payload:v,x:x.x2,y:x.y2});return z.createElement(ct,Ao({className:He("recharts-polar-angle-axis-tick",x6(s)),key:"tick-".concat(v.coordinate)},ul(n.props,v,g)),l&&z.createElement("line",Ao({className:"recharts-polar-angle-axis-tick-line"},h,x)),s&&t.renderTickItem(s,m,c?c(v.value,g):v.value))});return z.createElement(ct,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,s=n.axisLine;return i<=0||!a||!a.length?null:z.createElement(ct,{className:He("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var s;return z.isValidElement(n)?s=z.cloneElement(n,a):Me(n)?s=n(a):s=z.createElement(dl,Ao({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),s}}])}(T.PureComponent);Ov(kv,"displayName","PolarAngleAxis");Ov(kv,"axisType","angleAxis");Ov(kv,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Nbe=FI,Tbe=Nbe(Object.getPrototypeOf,Object),Abe=Tbe,Cbe=ts,Obe=Abe,kbe=rs,Pbe="[object Object]",Rbe=Function.prototype,Ibe=Object.prototype,M6=Rbe.toString,Dbe=Ibe.hasOwnProperty,Mbe=M6.call(Object);function Lbe(e){if(!kbe(e)||Cbe(e)!=Pbe)return!1;var t=Obe(e);if(t===null)return!0;var r=Dbe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&M6.call(r)==Mbe}var $be=Lbe;const Fbe=it($be);var Bbe=ts,Ube=rs,zbe="[object Boolean]";function qbe(e){return e===!0||e===!1||Ube(e)&&Bbe(e)==zbe}var Wbe=qbe;const Hbe=it(Wbe);function th(e){"@babel/helpers - typeof";return th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},th(e)}function Vm(){return Vm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vm.apply(this,arguments)}function Vbe(e,t){return Ybe(e)||Xbe(e,t)||Gbe(e,t)||Kbe()}function Kbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gbe(e,t){if(e){if(typeof e=="string")return TC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TC(e,t)}}function TC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xbe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function Ybe(e){if(Array.isArray(e))return e}function AC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function CC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AC(Object(r),!0).forEach(function(n){Qbe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qbe(e,t,r){return t=Jbe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jbe(e){var t=Zbe(e,"string");return th(t)=="symbol"?t:t+""}function Zbe(e,t){if(th(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(th(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OC=function(t,r,n,a,i){var s=n-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-s/2,",").concat(r+i),l+="L ".concat(t+n-s/2-a,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},ewe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},twe=function(t){var r=CC(CC({},ewe),t),n=T.useRef(),a=T.useState(-1),i=Vbe(a,2),s=i[0],l=i[1];T.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var y=n.current.getTotalLength();y&&l(y)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,h=r.height,p=r.className,v=r.animationEasing,g=r.animationDuration,x=r.animationBegin,b=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var m=He("recharts-trapezoid",p);return b?z.createElement(Vi,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:g,animationEasing:v,isActive:b},function(y){var _=y.upperWidth,w=y.lowerWidth,j=y.height,S=y.x,E=y.y;return z.createElement(Vi,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:g,easing:v},z.createElement("path",Vm({},De(r,!0),{className:m,d:OC(S,E,_,w,j),ref:n})))}):z.createElement("g",null,z.createElement("path",Vm({},De(r,!0),{className:m,d:OC(c,u,d,f,h)})))},rwe=["option","shapeType","propTransformer","activeClassName","isActive"];function rh(e){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rh(e)}function nwe(e,t){if(e==null)return{};var r=awe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function awe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function kC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Km(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kC(Object(r),!0).forEach(function(n){iwe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iwe(e,t,r){return t=swe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function swe(e){var t=owe(e,"string");return rh(t)=="symbol"?t:t+""}function owe(e,t){if(rh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lwe(e,t){return Km(Km({},t),e)}function cwe(e,t){return e==="symbols"}function PC(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return z.createElement(ij,r);case"trapezoid":return z.createElement(twe,r);case"sector":return z.createElement(w6,r);case"symbols":if(cwe(t))return z.createElement(S2,r);break;default:return null}}function uwe(e){return T.isValidElement(e)?e.props:e}function L6(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?lwe:n,i=e.activeClassName,s=i===void 0?"recharts-active-shape":i,l=e.isActive,c=nwe(e,rwe),u;if(T.isValidElement(t))u=T.cloneElement(t,Km(Km({},c),uwe(t)));else if(Me(t))u=t(c);else if(Fbe(t)&&!Hbe(t)){var d=a(t,c);u=z.createElement(PC,{shapeType:r,elementProps:d})}else{var f=c;u=z.createElement(PC,{shapeType:r,elementProps:f})}return l?z.createElement(ct,{className:s},u):u}function Pv(e,t){return t!=null&&"trapezoids"in e.props}function Rv(e,t){return t!=null&&"sectors"in e.props}function nh(e,t){return t!=null&&"points"in e.props}function dwe(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function fwe(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function hwe(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function pwe(e,t){var r;return Pv(e,t)?r=dwe:Rv(e,t)?r=fwe:nh(e,t)&&(r=hwe),r}function mwe(e,t){var r;return Pv(e,t)?r="trapezoids":Rv(e,t)?r="sectors":nh(e,t)&&(r="points"),r}function gwe(e,t){if(Pv(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Rv(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return nh(e,t)?t.payload:{}}function vwe(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=mwe(r,t),i=gwe(r,t),s=n.filter(function(c,u){var d=Sv(i,c),f=r.props[a].filter(function(v){var g=pwe(r,t);return g(v,t)}),h=r.props[a].indexOf(f[f.length-1]),p=u===h;return d&&p}),l=n.indexOf(s[s.length-1]);return l}var cp;function du(e){"@babel/helpers - typeof";return du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},du(e)}function sc(){return sc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sc.apply(this,arguments)}function RC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RC(Object(r),!0).forEach(function(n){ca(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,F6(n.key),n)}}function ywe(e,t,r){return t&&IC(e.prototype,t),r&&IC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function bwe(e,t,r){return t=Gm(t),wwe(e,$6()?Reflect.construct(t,r||[],Gm(e).constructor):t.apply(e,r))}function wwe(e,t){if(t&&(du(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _we(e)}function _we(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($6=function(){return!!e})()}function Gm(e){return Gm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gm(e)}function jwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zb(e,t)}function Zb(e,t){return Zb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Zb(e,t)}function ca(e,t,r){return t=F6(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F6(e){var t=Swe(e,"string");return du(t)=="symbol"?t:t+""}function Swe(e,t){if(du(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(du(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var qa=function(e){function t(r){var n;return xwe(this,t),n=bwe(this,t,[r]),ca(n,"pieRef",null),ca(n,"sectorRefs",[]),ca(n,"id",$h("recharts-pie-")),ca(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Me(a)&&a()}),ca(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Me(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return jwe(t,e),ywe(t,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,d=De(this.props,!1),f=De(s,!1),h=De(l,!1),p=s&&s.offsetRadius||20,v=n.map(function(g,x){var b=(g.startAngle+g.endAngle)/2,m=jt(g.cx,g.cy,g.outerRadius+p,b),y=yt(yt(yt(yt({},d),g),{},{stroke:"none"},f),{},{index:x,textAnchor:t.getTextAnchor(m.x,g.cx)},m),_=yt(yt(yt(yt({},d),g),{},{fill:"none",stroke:g.fill},h),{},{index:x,points:[jt(g.cx,g.cy,g.outerRadius,b),m]}),w=c;return Ke(c)&&Ke(u)?w="value":Ke(c)&&(w=u),z.createElement(ct,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(x)},l&&t.renderLabelLineItem(l,_,"line"),t.renderLabelItem(s,y,Kr(g,w)))});return z.createElement(ct,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,s=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=a.isActiveIndex(d),h=c&&a.hasActiveIndex()?c:null,p=f?s:h,v=yt(yt({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return z.createElement(ct,sc({ref:function(x){x&&!a.sectorRefs.includes(x)&&a.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},ul(a.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),z.createElement(L6,sc({option:p,isActive:f,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,s=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state,h=f.prevSectors,p=f.prevIsAnimationActive;return z.createElement(Vi,{begin:l,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var g=v.t,x=[],b=i&&i[0],m=b.startAngle;return i.forEach(function(y,_){var w=h&&h[_],j=_>0?Kn(y,"paddingAngle",0):0;if(w){var S=us(w.endAngle-w.startAngle,y.endAngle-y.startAngle),E=yt(yt({},y),{},{startAngle:m+j,endAngle:m+S(g)+j});x.push(E),m=E.endAngle}else{var N=y.endAngle,A=y.startAngle,O=us(0,N-A),D=O(g),k=yt(yt({},y),{},{startAngle:m+j,endAngle:m+D+j});x.push(k),m=k.endAngle}}),z.createElement(ct,null,n.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var s=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[s].focus(),a.setState({sectorToFocus:s});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,s=this.state.prevSectors;return i&&a&&a.length&&(!s||!Sv(s,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,s=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,f=a.innerRadius,h=a.outerRadius,p=a.isAnimationActive,v=this.state.isAnimationFinished;if(i||!s||!s.length||!ve(u)||!ve(d)||!ve(f)||!ve(h))return null;var g=He("recharts-pie",l);return z.createElement(ct,{tabIndex:this.props.rootTabIndex,className:g,ref:function(b){n.pieRef=b}},this.renderSectors(),c&&this.renderLabels(s),yr.renderCallByParent(this.props,null,!1),(!p||v)&&qs.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(z.isValidElement(n))return z.cloneElement(n,a);if(Me(n))return n(a);var s=He("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return z.createElement($b,sc({},a,{key:i,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(n,a,i){if(z.isValidElement(n))return z.cloneElement(n,a);var s=i;if(Me(n)&&(s=n(a),z.isValidElement(s)))return s;var l=He("recharts-pie-label-text",typeof n!="boolean"&&!Me(n)?n.className:"");return z.createElement(dl,sc({},a,{alignmentBaseline:"middle",className:l}),s)}}])}(T.PureComponent);cp=qa;ca(qa,"displayName","Pie");ca(qa,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Hu.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ca(qa,"parseDeltaAngle",function(e,t){var r=ln(t-e),n=Math.min(Math.abs(t-e),360);return r*n});ca(qa,"getRealPieData",function(e){var t=e.data,r=e.children,n=De(e,!1),a=ha(r,ns);return t&&t.length?t.map(function(i,s){return yt(yt(yt({payload:i},n),i),a&&a[s]&&a[s].props)}):a&&a.length?a.map(function(i){return yt(yt({},n),i.props)}):[]});ca(qa,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,i=t.height,s=v6(a,i),l=n+cn(e.cx,a,a/2),c=r+cn(e.cy,i,i/2),u=cn(e.innerRadius,s,0),d=cn(e.outerRadius,s,s*.8),f=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});ca(qa,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?yt(yt({},t.type.defaultProps),t.props):t.props,a=cp.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,s=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,h=n.tooltipType,p=Math.abs(n.minAngle),v=cp.parseCoordinateOfPie(n,r),g=cp.parseDeltaAngle(s,l),x=Math.abs(g),b=u;Ke(u)&&Ke(f)?(Ba(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):Ke(u)&&(Ba(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=f);var m=a.filter(function(E){return Kr(E,b,0)!==0}).length,y=(x>=360?m:m-1)*c,_=x-m*p-y,w=a.reduce(function(E,N){var A=Kr(N,b,0);return E+(ve(A)?A:0)},0),j;if(w>0){var S;j=a.map(function(E,N){var A=Kr(E,b,0),O=Kr(E,d,N),D=(ve(A)?A:0)/w,k;N?k=S.endAngle+ln(g)*c*(A!==0?1:0):k=s;var V=k+ln(g)*((A!==0?p:0)+D*_),K=(k+V)/2,ie=(v.innerRadius+v.outerRadius)/2,G=[{name:O,value:A,payload:E,dataKey:b,type:h}],X=jt(v.cx,v.cy,ie,K);return S=yt(yt(yt({percent:D,cornerRadius:i,name:O,tooltipPayload:G,midAngle:K,middleRadius:ie,tooltipPosition:X},E),v),{},{value:Kr(E,b),startAngle:k,endAngle:V,payload:E,paddingAngle:ln(g)*c}),S})}return yt(yt({},v),{},{sectors:j,data:a})});var Ewe=Math.ceil,Nwe=Math.max;function Twe(e,t,r,n){for(var a=-1,i=Nwe(Ewe((t-e)/(r||1)),0),s=Array(i);i--;)s[n?i:++a]=e,e+=r;return s}var Awe=Twe,Cwe=aD,DC=1/0,Owe=17976931348623157e292;function kwe(e){if(!e)return e===0?e:0;if(e=Cwe(e),e===DC||e===-DC){var t=e<0?-1:1;return t*Owe}return e===e?e:0}var B6=kwe,Pwe=Awe,Rwe=pv,oy=B6;function Iwe(e){return function(t,r,n){return n&&typeof n!="number"&&Rwe(t,r,n)&&(r=n=void 0),t=oy(t),r===void 0?(r=t,t=0):r=oy(r),n=n===void 0?t<r?1:-1:oy(n),Pwe(t,r,n,e)}}var Dwe=Iwe,Mwe=Dwe,Lwe=Mwe(),$we=Lwe;const Xm=it($we);function ah(e){"@babel/helpers - typeof";return ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ah(e)}function MC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MC(Object(r),!0).forEach(function(n){U6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function U6(e,t,r){return t=Fwe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fwe(e){var t=Bwe(e,"string");return ah(t)=="symbol"?t:t+""}function Bwe(e,t){if(ah(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ah(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Uwe=["Webkit","Moz","O","ms"],zwe=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=Uwe.reduce(function(i,s){return LC(LC({},i),{},U6({},s+n,r))},{});return a[t]=r,a};function fu(e){"@babel/helpers - typeof";return fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fu(e)}function Ym(){return Ym=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ym.apply(this,arguments)}function $C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ly(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$C(Object(r),!0).forEach(function(n){Dn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$C(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,q6(n.key),n)}}function Wwe(e,t,r){return t&&FC(e.prototype,t),r&&FC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hwe(e,t,r){return t=Qm(t),Vwe(e,z6()?Reflect.construct(t,r||[],Qm(e).constructor):t.apply(e,r))}function Vwe(e,t){if(t&&(fu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kwe(e)}function Kwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z6=function(){return!!e})()}function Qm(e){return Qm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qm(e)}function Gwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ew(e,t)}function ew(e,t){return ew=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ew(e,t)}function Dn(e,t,r){return t=q6(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q6(e){var t=Xwe(e,"string");return fu(t)=="symbol"?t:t+""}function Xwe(e,t){if(fu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ywe=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,s=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=Vd().domain(Xm(0,c)).range([i,i+s-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},BC=function(t){return t.changedTouches&&!!t.changedTouches.length},hu=function(e){function t(r){var n;return qwe(this,t),n=Hwe(this,t,[r]),Dn(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Dn(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Dn(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,s=a.onDragEnd,l=a.startIndex;s==null||s({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),Dn(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Dn(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Dn(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Dn(n,"handleSlideDragStart",function(a){var i=BC(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Gwe(t,e),Wwe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,s=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(a,i),h=Math.max(a,i),p=t.getIndexInRange(s,f),v=t.getIndexInRange(s,h);return{startIndex:p-p%c,endIndex:v===d?d:v-v%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,s=a.tickFormatter,l=a.dataKey,c=Kr(i[n],l,n);return Me(s)?s(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,s=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,p=c.endIndex,v=c.onChange,g=n.pageX-i;g>0?g=Math.min(g,u+d-f-l,u+d-f-s):g<0&&(g=Math.max(g,u-s,u-l));var x=this.getIndex({startX:s+g,endX:l+g});(x.startIndex!==h||x.endIndex!==p)&&v&&v(x),this.setState({startX:s+g,endX:l+g,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=BC(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,s=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[s],d=this.props,f=d.x,h=d.width,p=d.travellerWidth,v=d.onChange,g=d.gap,x=d.data,b={startX:this.state.startX,endX:this.state.endX},m=n.pageX-i;m>0?m=Math.min(m,f+h-p-u):m<0&&(m=Math.max(m,f-u)),b[s]=u+m;var y=this.getIndex(b),_=y.startIndex,w=y.endIndex,j=function(){var E=x.length-1;return s==="startX"&&(l>c?_%g===0:w%g===0)||l<c&&w===E||s==="endX"&&(l>c?w%g===0:_%g===0)||l>c&&w===E};this.setState(Dn(Dn({},s,u+m),"brushMoveStartX",n.pageX),function(){v&&j()&&v(y)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,s=this.state,l=s.scaleValues,c=s.startX,u=s.endX,d=this.state[a],f=l.indexOf(d);if(f!==-1){var h=f+n;if(!(h===-1||h>=l.length)){var p=l[h];a==="startX"&&p>=u||a==="endX"&&p<=c||this.setState(Dn({},a,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,l=n.height,c=n.fill,u=n.stroke;return z.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:s,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=T.Children.only(u);return f?z.cloneElement(f,{x:a,y:i,width:s,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,s,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,p=c.ariaLabel,v=c.data,g=c.startIndex,x=c.endIndex,b=Math.max(n,this.props.x),m=ly(ly({},De(this.props,!1)),{},{x:b,y:u,width:d,height:f}),y=p||"Min value: ".concat((i=v[g])===null||i===void 0?void 0:i.name,", Max value: ").concat((s=v[x])===null||s===void 0?void 0:s.name);return z.createElement(ct,{tabIndex:0,role:"slider","aria-label":y,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),l.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,m))}},{key:"renderSlide",value:function(n,a){var i=this.props,s=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return z.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:s,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,s=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,h=d.endX,p=5,v={pointerEvents:"none",fill:u};return z.createElement(ct,{className:"recharts-brush-texts"},z.createElement(dl,Ym({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-p,y:s+l/2},v),this.getTextOfTick(a)),z.createElement(dl,Ym({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+p,y:s+l/2},v),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,s=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,h=this.state,p=h.startX,v=h.endX,g=h.isTextActive,x=h.isSlideMoving,b=h.isTravellerMoving,m=h.isTravellerFocused;if(!a||!a.length||!ve(l)||!ve(c)||!ve(u)||!ve(d)||u<=0||d<=0)return null;var y=He("recharts-brush",i),_=z.Children.count(s)===1,w=zwe("userSelect","none");return z.createElement(ct,{className:y,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(p,v),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(v,"endX"),(g||x||b||m||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,s=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return z.createElement(z.Fragment,null,z.createElement("rect",{x:a,y:i,width:s,height:l,fill:c,stroke:"none"}),z.createElement("line",{x1:a+1,y1:u,x2:a+s-1,y2:u,fill:"none",stroke:"#fff"}),z.createElement("line",{x1:a+1,y1:u+2,x2:a+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return z.isValidElement(n)?i=z.cloneElement(n,a):Me(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,s=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return ly({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:s},i&&i.length?Ywe({data:i,width:s,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(s!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+s-c]);var h=a.scale.domain().map(function(p){return a.scale(p)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:s,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,s=0,l=i-1;l-s>1;){var c=Math.floor((s+l)/2);n[c]>a?l=c:s=c}return a>=n[l]?l:s}}])}(T.PureComponent);Dn(hu,"displayName","Brush");Dn(hu,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Qwe=k2;function Jwe(e,t){var r;return Qwe(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var Zwe=Jwe,e_e=kI,t_e=ui,r_e=Zwe,n_e=Rn,a_e=pv;function i_e(e,t,r){var n=n_e(e)?e_e:r_e;return r&&a_e(e,t,r)&&(t=void 0),n(e,t_e(t))}var s_e=i_e;const o_e=it(s_e);var ai=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},UC=ZI;function l_e(e,t,r){t=="__proto__"&&UC?UC(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var c_e=l_e,u_e=c_e,d_e=QI,f_e=ui;function h_e(e,t){var r={};return t=f_e(t),d_e(e,function(n,a,i){u_e(r,a,t(n,a,i))}),r}var p_e=h_e;const m_e=it(p_e);function g_e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var v_e=g_e,x_e=k2;function y_e(e,t){var r=!0;return x_e(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var b_e=y_e,w_e=v_e,__e=b_e,j_e=ui,S_e=Rn,E_e=pv;function N_e(e,t,r){var n=S_e(e)?w_e:__e;return r&&E_e(e,t,r)&&(t=void 0),n(e,j_e(t))}var T_e=N_e;const W6=it(T_e);var A_e=["x","y"];function ih(e){"@babel/helpers - typeof";return ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ih(e)}function tw(){return tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tw.apply(this,arguments)}function zC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zC(Object(r),!0).forEach(function(n){C_e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function C_e(e,t,r){return t=O_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O_e(e){var t=k_e(e,"string");return ih(t)=="symbol"?t:t+""}function k_e(e,t){if(ih(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ih(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function P_e(e,t){if(e==null)return{};var r=R_e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function R_e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function I_e(e,t){var r=e.x,n=e.y,a=P_e(e,A_e),i="".concat(r),s=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return xd(xd(xd(xd(xd({},t),a),s?{x:s}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function qC(e){return z.createElement(L6,tw({shapeType:"rectangle",propTransformer:I_e,activeClassName:"recharts-active-bar"},e))}var D_e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=ve(n)||nne(n);return i?t(n,a):(i||hl(),r)}},M_e=["value","background"],H6;function pu(e){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pu(e)}function L_e(e,t){if(e==null)return{};var r=$_e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $_e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Jm(){return Jm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jm.apply(this,arguments)}function WC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WC(Object(r),!0).forEach(function(n){ks(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function F_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,K6(n.key),n)}}function B_e(e,t,r){return t&&HC(e.prototype,t),r&&HC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function U_e(e,t,r){return t=Zm(t),z_e(e,V6()?Reflect.construct(t,r||[],Zm(e).constructor):t.apply(e,r))}function z_e(e,t){if(t&&(pu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q_e(e)}function q_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V6=function(){return!!e})()}function Zm(e){return Zm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zm(e)}function W_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rw(e,t)}function rw(e,t){return rw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},rw(e,t)}function ks(e,t,r){return t=K6(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K6(e){var t=H_e(e,"string");return pu(t)=="symbol"?t:t+""}function H_e(e,t){if(pu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Sn=function(e){function t(){var r;F_e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=U_e(this,t,[].concat(a)),ks(r,"state",{isAnimationFinished:!1}),ks(r,"id",$h("recharts-bar-")),ks(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),s&&s()}),ks(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),s&&s()}),r}return W_e(t,e),B_e(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,s=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=De(this.props,!1);return n&&n.map(function(f,h){var p=h===c,v=p?u:s,g=er(er(er({},d),f),{},{isActive:p,option:v,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return z.createElement(ct,Jm({className:"recharts-bar-rectangle"},ul(a.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),z.createElement(qC,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,s=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,h=this.state.prevData;return z.createElement(Vi,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var v=p.t,g=i.map(function(x,b){var m=h&&h[b];if(m){var y=us(m.x,x.x),_=us(m.y,x.y),w=us(m.width,x.width),j=us(m.height,x.height);return er(er({},x),{},{x:y(v),y:_(v),width:w(v),height:j(v)})}if(s==="horizontal"){var S=us(0,x.height),E=S(v);return er(er({},x),{},{y:x.y+x.height-E,height:E})}var N=us(0,x.width),A=N(v);return er(er({},x),{},{width:A})});return z.createElement(ct,null,n.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,s=this.state.prevData;return i&&a&&a.length&&(!s||!Sv(s,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,s=a.dataKey,l=a.activeIndex,c=De(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,h=L_e(u,M_e);if(!f)return null;var p=er(er(er(er(er({},h),{},{fill:"#eee"},f),c),ul(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:s,index:d,className:"recharts-bar-background-rectangle"});return z.createElement(qC,Jm({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},p))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=ha(d,Tv);if(!f)return null;var h=u==="vertical"?s[0].height/2:s[0].width/2,p=function(x,b){var m=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:m,errorVal:Kr(x,b)}},v={clipPath:n?"url(#clipPath-".concat(a,")"):null};return z.createElement(ct,v,f.map(function(g){return z.cloneElement(g,{key:"error-bar-".concat(a,"-").concat(g.props.dataKey),data:s,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,s=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,h=n.height,p=n.isAnimationActive,v=n.background,g=n.id;if(a||!i||!i.length)return null;var x=this.state.isAnimationFinished,b=He("recharts-bar",s),m=l&&l.allowDataOverflow,y=c&&c.allowDataOverflow,_=m||y,w=Ke(g)?this.id:g;return z.createElement(ct,{className:b},m||y?z.createElement("defs",null,z.createElement("clipPath",{id:"clipPath-".concat(w)},z.createElement("rect",{x:m?u:u-f/2,y:y?d:d-h/2,width:m?f:f*2,height:y?h:h*2}))):null,z.createElement(ct,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(w,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,w),(!p||x)&&qs.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(T.PureComponent);H6=Sn;ks(Sn,"displayName","Bar");ks(Sn,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Hu.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ks(Sn,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,s=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,p=wve(n,r);if(!p)return null;var v=t.layout,g=r.type.defaultProps,x=g!==void 0?er(er({},g),r.props):r.props,b=x.dataKey,m=x.children,y=x.minPointSize,_=v==="horizontal"?s:i,w=u?_.scale.domain():null,j=Ave({numericAxis:_}),S=ha(m,ns),E=f.map(function(N,A){var O,D,k,V,K,ie;u?O=_ve(u[d+A],w):(O=Kr(N,b),Array.isArray(O)||(O=[j,O]));var G=D_e(y,H6.defaultProps.minPointSize)(O[1],A);if(v==="horizontal"){var X,re=[s.scale(O[0]),s.scale(O[1])],de=re[0],me=re[1];D=LA({axis:i,ticks:l,bandSize:a,offset:p.offset,entry:N,index:A}),k=(X=me??de)!==null&&X!==void 0?X:void 0,V=p.size;var R=de-me;if(K=Number.isNaN(R)?0:R,ie={x:D,y:s.y,width:V,height:s.height},Math.abs(G)>0&&Math.abs(K)<Math.abs(G)){var W=ln(K||G)*(Math.abs(G)-Math.abs(K));k-=W,K+=W}}else{var U=[i.scale(O[0]),i.scale(O[1])],q=U[0],se=U[1];if(D=q,k=LA({axis:s,ticks:c,bandSize:a,offset:p.offset,entry:N,index:A}),V=se-q,K=p.size,ie={x:i.x,y:k,width:i.width,height:K},Math.abs(G)>0&&Math.abs(V)<Math.abs(G)){var je=ln(V||G)*(Math.abs(G)-Math.abs(V));V+=je}}return er(er(er({},N),{},{x:D,y:k,width:V,height:K,value:u?O:O[1],payload:N,background:ie},S&&S[A]&&S[A].props),{},{tooltipPayload:[m6(r,N)],tooltipPosition:{x:D+V/2,y:k+K/2}})});return er({data:E,layout:v},h)});function sh(e){"@babel/helpers - typeof";return sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sh(e)}function V_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,G6(n.key),n)}}function K_e(e,t,r){return t&&VC(e.prototype,t),r&&VC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function KC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ka(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KC(Object(r),!0).forEach(function(n){Iv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Iv(e,t,r){return t=G6(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G6(e){var t=G_e(e,"string");return sh(t)=="symbol"?t:t+""}function G_e(e,t){if(sh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var X_e=function(t,r,n,a,i){var s=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},h=!!$n(u,Sn);return d.reduce(function(p,v){var g=r[v],x=g.orientation,b=g.domain,m=g.padding,y=m===void 0?{}:m,_=g.mirror,w=g.reversed,j="".concat(x).concat(_?"Mirror":""),S,E,N,A,O;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var D=b[1]-b[0],k=1/0,V=g.categoricalDomain.sort(sne);if(V.forEach(function(U,q){q>0&&(k=Math.min((U||0)-(V[q-1]||0),k))}),Number.isFinite(k)){var K=k/D,ie=g.layout==="vertical"?n.height:n.width;if(g.padding==="gap"&&(S=K*ie/2),g.padding==="no-gap"){var G=cn(t.barCategoryGap,K*ie),X=K*ie/2;S=X-G-(X-G)/ie*G}}}a==="xAxis"?E=[n.left+(y.left||0)+(S||0),n.left+n.width-(y.right||0)-(S||0)]:a==="yAxis"?E=c==="horizontal"?[n.top+n.height-(y.bottom||0),n.top+(y.top||0)]:[n.top+(y.top||0)+(S||0),n.top+n.height-(y.bottom||0)-(S||0)]:E=g.range,w&&(E=[E[1],E[0]]);var re=d6(g,i,h),de=re.scale,me=re.realScaleType;de.domain(b).range(E),f6(de);var R=h6(de,ka(ka({},g),{},{realScaleType:me}));a==="xAxis"?(O=x==="top"&&!_||x==="bottom"&&_,N=n.left,A=f[j]-O*g.height):a==="yAxis"&&(O=x==="left"&&!_||x==="right"&&_,N=f[j]-O*g.width,A=n.top);var W=ka(ka(ka({},g),R),{},{realScaleType:me,x:N,y:A,scale:de,width:a==="xAxis"?n.width:g.width,height:a==="yAxis"?n.height:g.height});return W.bandSize=Mm(W,R),!g.hide&&a==="xAxis"?f[j]+=(O?-1:1)*W.height:g.hide||(f[j]+=(O?-1:1)*W.width),ka(ka({},p),{},Iv({},v,W))},{})},X6=function(t,r){var n=t.x,a=t.y,i=r.x,s=r.y;return{x:Math.min(n,i),y:Math.min(a,s),width:Math.abs(i-n),height:Math.abs(s-a)}},Y_e=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return X6({x:r,y:n},{x:a,y:i})},Y6=function(){function e(t){V_e(this,e),this.scale=t}return K_e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();Iv(Y6,"EPS",1e-4);var oj=function(t){var r=Object.keys(t).reduce(function(n,a){return ka(ka({},n),{},Iv({},a,Y6.create(t[a])))},{});return ka(ka({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.bandAware,l=i.position;return m_e(a,function(c,u){return r[u].apply(c,{bandAware:s,position:l})})},isInRange:function(a){return W6(a,function(i,s){return r[s].isInRange(i)})}})};function Q_e(e){return(e%180+180)%180}var J_e=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Q_e(a),s=i*Math.PI/180,l=Math.atan(n/r),c=s>l&&s<Math.PI-l?n/Math.sin(s):r/Math.cos(s);return Math.abs(c)},Z_e=ui,e2e=Fh,t2e=fv;function r2e(e){return function(t,r,n){var a=Object(t);if(!e2e(t)){var i=Z_e(r);t=t2e(t),r=function(l){return i(a[l],l,a)}}var s=e(t,r,n);return s>-1?a[i?t[s]:s]:void 0}}var n2e=r2e,a2e=B6;function i2e(e){var t=a2e(e),r=t%1;return t===t?r?t-r:t:0}var s2e=i2e,o2e=HI,l2e=ui,c2e=s2e,u2e=Math.max;function d2e(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:c2e(r);return a<0&&(a=u2e(n+a,0)),o2e(e,l2e(t),a)}var f2e=d2e,h2e=n2e,p2e=f2e,m2e=h2e(p2e),g2e=m2e;const v2e=it(g2e);var x2e=cre(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),lj=T.createContext(void 0),cj=T.createContext(void 0),Q6=T.createContext(void 0),J6=T.createContext({}),Z6=T.createContext(void 0),e8=T.createContext(0),t8=T.createContext(0),GC=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,s=t.clipPathId,l=t.children,c=t.width,u=t.height,d=x2e(i);return z.createElement(lj.Provider,{value:n},z.createElement(cj.Provider,{value:a},z.createElement(J6.Provider,{value:i},z.createElement(Q6.Provider,{value:d},z.createElement(Z6.Provider,{value:s},z.createElement(e8.Provider,{value:u},z.createElement(t8.Provider,{value:c},l)))))))},y2e=function(){return T.useContext(Z6)},r8=function(t){var r=T.useContext(lj);r==null&&hl();var n=r[t];return n==null&&hl(),n},b2e=function(){var t=T.useContext(lj);return gs(t)},w2e=function(){var t=T.useContext(cj),r=v2e(t,function(n){return W6(n.domain,Number.isFinite)});return r||gs(t)},n8=function(t){var r=T.useContext(cj);r==null&&hl();var n=r[t];return n==null&&hl(),n},_2e=function(){var t=T.useContext(Q6);return t},j2e=function(){return T.useContext(J6)},uj=function(){return T.useContext(t8)},dj=function(){return T.useContext(e8)};function mu(e){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mu(e)}function S2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E2e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i8(n.key),n)}}function N2e(e,t,r){return t&&E2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function T2e(e,t,r){return t=eg(t),A2e(e,a8()?Reflect.construct(t,r||[],eg(e).constructor):t.apply(e,r))}function A2e(e,t){if(t&&(mu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C2e(e)}function C2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a8=function(){return!!e})()}function eg(e){return eg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},eg(e)}function O2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nw(e,t)}function nw(e,t){return nw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},nw(e,t)}function XC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function YC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XC(Object(r),!0).forEach(function(n){fj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fj(e,t,r){return t=i8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i8(e){var t=k2e(e,"string");return mu(t)=="symbol"?t:t+""}function k2e(e,t){if(mu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function P2e(e,t){return M2e(e)||D2e(e,t)||I2e(e,t)||R2e()}function R2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I2e(e,t){if(e){if(typeof e=="string")return QC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QC(e,t)}}function QC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function D2e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function M2e(e){if(Array.isArray(e))return e}function aw(){return aw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aw.apply(this,arguments)}var L2e=function(t,r){var n;return z.isValidElement(t)?n=z.cloneElement(t,r):Me(t)?n=t(r):n=z.createElement("line",aw({},r,{className:"recharts-reference-line-line"})),n},$2e=function(t,r,n,a,i,s,l,c,u){var d=i.x,f=i.y,h=i.width,p=i.height;if(n){var v=u.y,g=t.y.apply(v,{position:s});if(ai(u,"discard")&&!t.y.isInRange(g))return null;var x=[{x:d+h,y:g},{x:d,y:g}];return c==="left"?x.reverse():x}if(r){var b=u.x,m=t.x.apply(b,{position:s});if(ai(u,"discard")&&!t.x.isInRange(m))return null;var y=[{x:m,y:f+p},{x:m,y:f}];return l==="top"?y.reverse():y}if(a){var _=u.segment,w=_.map(function(j){return t.apply(j,{position:s})});return ai(u,"discard")&&o_e(w,function(j){return!t.isInRange(j)})?null:w}return null};function F2e(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,s=e.shape,l=e.className,c=e.alwaysShow,u=y2e(),d=r8(a),f=n8(i),h=_2e();if(!u||!h)return null;Ba(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=oj({x:d.scale,y:f.scale}),v=fr(t),g=fr(r),x=n&&n.length===2,b=$2e(p,v,g,x,h,e.position,d.orientation,f.orientation,e);if(!b)return null;var m=P2e(b,2),y=m[0],_=y.x,w=y.y,j=m[1],S=j.x,E=j.y,N=ai(e,"hidden")?"url(#".concat(u,")"):void 0,A=YC(YC({clipPath:N},De(e,!0)),{},{x1:_,y1:w,x2:S,y2:E});return z.createElement(ct,{className:He("recharts-reference-line",l)},L2e(s,A),yr.renderCallByParent(e,Y_e({x1:_,y1:w,x2:S,y2:E})))}var hj=function(e){function t(){return S2e(this,t),T2e(this,t,arguments)}return O2e(t,e),N2e(t,[{key:"render",value:function(){return z.createElement(F2e,this.props)}}])}(z.Component);fj(hj,"displayName","ReferenceLine");fj(hj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function iw(){return iw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iw.apply(this,arguments)}function gu(e){"@babel/helpers - typeof";return gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gu(e)}function JC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ZC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JC(Object(r),!0).forEach(function(n){Dv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function B2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U2e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o8(n.key),n)}}function z2e(e,t,r){return t&&U2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function q2e(e,t,r){return t=tg(t),W2e(e,s8()?Reflect.construct(t,r||[],tg(e).constructor):t.apply(e,r))}function W2e(e,t){if(t&&(gu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H2e(e)}function H2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s8=function(){return!!e})()}function tg(e){return tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tg(e)}function V2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sw(e,t)}function sw(e,t){return sw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},sw(e,t)}function Dv(e,t,r){return t=o8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o8(e){var t=K2e(e,"string");return gu(t)=="symbol"?t:t+""}function K2e(e,t){if(gu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var G2e=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,s=oj({x:a.scale,y:i.scale}),l=s.apply({x:r,y:n},{bandAware:!0});return ai(t,"discard")&&!s.isInRange(l)?null:l},Mv=function(e){function t(){return B2e(this,t),q2e(this,t,arguments)}return V2e(t,e),z2e(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,s=n.r,l=n.alwaysShow,c=n.clipPathId,u=fr(a),d=fr(i);if(Ba(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=G2e(this.props);if(!f)return null;var h=f.x,p=f.y,v=this.props,g=v.shape,x=v.className,b=ai(this.props,"hidden")?"url(#".concat(c,")"):void 0,m=ZC(ZC({clipPath:b},De(this.props,!0)),{},{cx:h,cy:p});return z.createElement(ct,{className:He("recharts-reference-dot",x)},t.renderDot(g,m),yr.renderCallByParent(this.props,{x:h-s,y:p-s,width:2*s,height:2*s}))}}])}(z.Component);Dv(Mv,"displayName","ReferenceDot");Dv(Mv,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Dv(Mv,"renderDot",function(e,t){var r;return z.isValidElement(e)?r=z.cloneElement(e,t):Me(e)?r=e(t):r=z.createElement(sj,iw({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function ow(){return ow=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ow.apply(this,arguments)}function vu(e){"@babel/helpers - typeof";return vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vu(e)}function eO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eO(Object(r),!0).forEach(function(n){Lv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y2e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c8(n.key),n)}}function Q2e(e,t,r){return t&&Y2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function J2e(e,t,r){return t=rg(t),Z2e(e,l8()?Reflect.construct(t,r||[],rg(e).constructor):t.apply(e,r))}function Z2e(e,t){if(t&&(vu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eje(e)}function eje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l8=function(){return!!e})()}function rg(e){return rg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rg(e)}function tje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lw(e,t)}function lw(e,t){return lw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},lw(e,t)}function Lv(e,t,r){return t=c8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c8(e){var t=rje(e,"string");return vu(t)=="symbol"?t:t+""}function rje(e,t){if(vu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var nje=function(t,r,n,a,i){var s=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var h=oj({x:d.scale,y:f.scale}),p={x:t?h.x.apply(s,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(c,{position:"start"}):h.y.rangeMin},v={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return ai(i,"discard")&&(!h.isInRange(p)||!h.isInRange(v))?null:X6(p,v)},$v=function(e){function t(){return X2e(this,t),J2e(this,t,arguments)}return tje(t,e),Q2e(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,s=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;Ba(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=fr(a),h=fr(i),p=fr(s),v=fr(l),g=this.props.shape;if(!f&&!h&&!p&&!v&&!g)return null;var x=nje(f,h,p,v,this.props);if(!x&&!g)return null;var b=ai(this.props,"hidden")?"url(#".concat(d,")"):void 0;return z.createElement(ct,{className:He("recharts-reference-area",c)},t.renderRect(g,tO(tO({clipPath:b},De(this.props,!0)),x)),yr.renderCallByParent(this.props,x))}}])}(z.Component);Lv($v,"displayName","ReferenceArea");Lv($v,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Lv($v,"renderRect",function(e,t){var r;return z.isValidElement(e)?r=z.cloneElement(e,t):Me(e)?r=e(t):r=z.createElement(ij,ow({},t,{className:"recharts-reference-area-rect"})),r});function u8(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function aje(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return J_e(n,r)}function ije(e,t,r){var n=r==="width",a=e.x,i=e.y,s=e.width,l=e.height;return t===1?{start:n?a:i,end:n?a+s:i+l}:{start:n?a+s:i+l,end:n?a:i}}function ng(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function sje(e,t){return u8(e,t+1)}function oje(e,t,r,n,a){for(var i=(n||[]).slice(),s=t.start,l=t.end,c=0,u=1,d=s,f=function(){var v=n==null?void 0:n[c];if(v===void 0)return{v:u8(n,u)};var g=c,x,b=function(){return x===void 0&&(x=r(v,g)),x},m=v.coordinate,y=c===0||ng(e,m,b,d,l);y||(c=0,d=s,u+=1),y&&(d=m+e*(b()/2+a),c+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function oh(e){"@babel/helpers - typeof";return oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oh(e)}function rO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rO(Object(r),!0).forEach(function(n){lje(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lje(e,t,r){return t=cje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cje(e){var t=uje(e,"string");return oh(t)=="symbol"?t:t+""}function uje(e,t){if(oh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(oh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dje(e,t,r,n,a){for(var i=(n||[]).slice(),s=i.length,l=t.start,c=t.end,u=function(h){var p=i[h],v,g=function(){return v===void 0&&(v=r(p,h)),v};if(h===s-1){var x=e*(p.coordinate+e*g()/2-c);i[h]=p=Wr(Wr({},p),{},{tickCoord:x>0?p.coordinate-x*e:p.coordinate})}else i[h]=p=Wr(Wr({},p),{},{tickCoord:p.coordinate});var b=ng(e,p.tickCoord,g,l,c);b&&(c=p.tickCoord-e*(g()/2+a),i[h]=Wr(Wr({},p),{},{isShow:!0}))},d=s-1;d>=0;d--)u(d);return i}function fje(e,t,r,n,a,i){var s=(n||[]).slice(),l=s.length,c=t.start,u=t.end;if(i){var d=n[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);s[l-1]=d=Wr(Wr({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var p=ng(e,d.tickCoord,function(){return f},c,u);p&&(u=d.tickCoord-e*(f/2+a),s[l-1]=Wr(Wr({},d),{},{isShow:!0}))}for(var v=i?l-1:l,g=function(m){var y=s[m],_,w=function(){return _===void 0&&(_=r(y,m)),_};if(m===0){var j=e*(y.coordinate-e*w()/2-c);s[m]=y=Wr(Wr({},y),{},{tickCoord:j<0?y.coordinate-j*e:y.coordinate})}else s[m]=y=Wr(Wr({},y),{},{tickCoord:y.coordinate});var S=ng(e,y.tickCoord,w,c,u);S&&(c=y.tickCoord+e*(w()/2+a),s[m]=Wr(Wr({},y),{},{isShow:!0}))},x=0;x<v;x++)g(x);return s}function pj(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,s=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!a||!a.length||!n)return[];if(ve(c)||Hu.isSsr)return sje(a,typeof c=="number"&&ve(c)?c:0);var h=[],p=l==="top"||l==="bottom"?"width":"height",v=d&&p==="width"?Hd(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=function(y,_){var w=Me(u)?u(y.value,_):y.value;return p==="width"?aje(Hd(w,{fontSize:t,letterSpacing:r}),v,f):Hd(w,{fontSize:t,letterSpacing:r})[p]},x=a.length>=2?ln(a[1].coordinate-a[0].coordinate):1,b=ije(i,x,p);return c==="equidistantPreserveStart"?oje(x,b,g,a,s):(c==="preserveStart"||c==="preserveStartEnd"?h=fje(x,b,g,a,s,c==="preserveStartEnd"):h=dje(x,b,g,a,s),h.filter(function(m){return m.isShow}))}var hje=["viewBox"],pje=["viewBox"],mje=["ticks"];function xu(e){"@babel/helpers - typeof";return xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xu(e)}function oc(){return oc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oc.apply(this,arguments)}function nO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nO(Object(r),!0).forEach(function(n){mj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cy(e,t){if(e==null)return{};var r=gje(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function gje(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function vje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f8(n.key),n)}}function xje(e,t,r){return t&&aO(e.prototype,t),r&&aO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function yje(e,t,r){return t=ag(t),bje(e,d8()?Reflect.construct(t,r||[],ag(e).constructor):t.apply(e,r))}function bje(e,t){if(t&&(xu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wje(e)}function wje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d8=function(){return!!e})()}function ag(e){return ag=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ag(e)}function _je(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cw(e,t)}function cw(e,t){return cw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},cw(e,t)}function mj(e,t,r){return t=f8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f8(e){var t=jje(e,"string");return xu(t)=="symbol"?t:t+""}function jje(e,t){if(xu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Xu=function(e){function t(r){var n;return vje(this,t),n=yje(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return _je(t,e),xje(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,s=cy(n,hje),l=this.props,c=l.viewBox,u=cy(l,pje);return!_c(i,c)||!_c(s,u)||!_c(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,s=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,h=a.tickMargin,p,v,g,x,b,m,y=f?-1:1,_=n.tickSize||d,w=ve(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":p=v=n.coordinate,x=s+ +!f*c,g=x-y*_,m=g-y*h,b=w;break;case"left":g=x=n.coordinate,v=i+ +!f*l,p=v-y*_,b=p-y*h,m=w;break;case"right":g=x=n.coordinate,v=i+ +f*l,p=v+y*_,b=p+y*h,m=w;break;default:p=v=n.coordinate,x=s+ +f*c,g=x+y*_,m=g+y*h,b=w;break}return{line:{x1:p,y1:g,x2:v,y2:x},tick:{x:b,y:m}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s;switch(a){case"left":s=i?"start":"end";break;case"right":s=i?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s="end";switch(a){case"left":case"right":s="middle";break;case"top":s=i?"start":"end";break;default:s=i?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=sr(sr(sr({},De(this.props,!1)),De(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=sr(sr({},f),{},{x1:a,y1:i+h*l,x2:a+s,y2:i+h*l})}else{var p=+(c==="left"&&!u||c==="right"&&u);f=sr(sr({},f),{},{x1:a+p*s,y1:i,x2:a+p*s,y2:i+l})}return z.createElement("line",oc({},f,{className:He("recharts-cartesian-axis-line",Kn(d,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var s=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,h=l.unit,p=pj(sr(sr({},this.props),{},{ticks:n}),a,i),v=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),x=De(this.props,!1),b=De(d,!1),m=sr(sr({},x),{},{fill:"none"},De(c,!1)),y=p.map(function(_,w){var j=s.getTickLineCoord(_),S=j.line,E=j.tick,N=sr(sr(sr(sr({textAnchor:v,verticalAnchor:g},x),{},{stroke:"none",fill:u},b),E),{},{index:w,payload:_,visibleTicksCount:p.length,tickFormatter:f});return z.createElement(ct,oc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},ul(s.props,_,w)),c&&z.createElement("line",oc({},m,S,{className:He("recharts-cartesian-axis-tick-line",Kn(c,"className"))})),d&&t.renderTickItem(d,N,"".concat(Me(f)?f(_.value,w):_.value).concat(h||"")))});return z.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,s=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,h=f.ticks,p=cy(f,mje),v=h;return Me(c)&&(v=h&&h.length>0?c(this.props):c(p)),s<=0||l<=0||!v||!v.length?null:z.createElement(ct,{className:He("recharts-cartesian-axis",u),ref:function(x){n.layerReference=x}},i&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),yr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var s,l=He(a.className,"recharts-cartesian-axis-tick-value");return z.isValidElement(n)?s=z.cloneElement(n,sr(sr({},a),{},{className:l})):Me(n)?s=n(sr(sr({},a),{},{className:l})):s=z.createElement(dl,oc({},a,{className:"recharts-cartesian-axis-tick-value"}),i),s}}])}(T.Component);mj(Xu,"displayName","CartesianAxis");mj(Xu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Sje=["x1","y1","x2","y2","key"],Eje=["offset"];function pl(e){"@babel/helpers - typeof";return pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pl(e)}function iO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iO(Object(r),!0).forEach(function(n){Nje(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nje(e,t,r){return t=Tje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tje(e){var t=Aje(e,"string");return pl(t)=="symbol"?t:t+""}function Aje(e,t){if(pl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $o(){return $o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$o.apply(this,arguments)}function sO(e,t){if(e==null)return{};var r=Cje(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Cje(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Oje=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,s=t.width,l=t.height,c=t.ry;return z.createElement("rect",{x:a,y:i,ry:c,width:s,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function h8(e,t){var r;if(z.isValidElement(e))r=z.cloneElement(e,t);else if(Me(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,s=t.y2,l=t.key,c=sO(t,Sje),u=De(c,!1);u.offset;var d=sO(u,Eje);r=z.createElement("line",$o({},d,{x1:n,y1:a,x2:i,y2:s,fill:"none",key:l}))}return r}function kje(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(l,c){var u=Vr(Vr({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return h8(a,u)});return z.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function Pje(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(l,c){var u=Vr(Vr({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return h8(a,u)});return z.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function Rje(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,s=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,p){return h-p});a!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var v=!d[p+1],g=v?a+s-h:d[p+1]-h;if(g<=0)return null;var x=p%t.length;return z.createElement("rect",{key:"react-".concat(p),y:h,x:n,height:g,width:i,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return z.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function Ije(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,s=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var v=!d[p+1],g=v?i+l-h:d[p+1]-h;if(g<=0)return null;var x=p%n.length;return z.createElement("rect",{key:"react-".concat(p),x:h,y:s,width:g,height:c,stroke:"none",fill:n[x],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return z.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var Dje=function(t,r){var n=t.xAxis,a=t.width,i=t.height,s=t.offset;return u6(pj(Vr(Vr(Vr({},Xu.defaultProps),n),{},{ticks:Ei(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.left,s.left+s.width,r)},Mje=function(t,r){var n=t.yAxis,a=t.width,i=t.height,s=t.offset;return u6(pj(Vr(Vr(Vr({},Xu.defaultProps),n),{},{ticks:Ei(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.top,s.top+s.height,r)},Bl={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function ml(e){var t,r,n,a,i,s,l=uj(),c=dj(),u=j2e(),d=Vr(Vr({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Bl.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Bl.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Bl.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Bl.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Bl.vertical,verticalFill:(s=e.verticalFill)!==null&&s!==void 0?s:Bl.verticalFill,x:ve(e.x)?e.x:u.left,y:ve(e.y)?e.y:u.top,width:ve(e.width)?e.width:u.width,height:ve(e.height)?e.height:u.height}),f=d.x,h=d.y,p=d.width,v=d.height,g=d.syncWithTicks,x=d.horizontalValues,b=d.verticalValues,m=b2e(),y=w2e();if(!ve(p)||p<=0||!ve(v)||v<=0||!ve(f)||f!==+f||!ve(h)||h!==+h)return null;var _=d.verticalCoordinatesGenerator||Dje,w=d.horizontalCoordinatesGenerator||Mje,j=d.horizontalPoints,S=d.verticalPoints;if((!j||!j.length)&&Me(w)){var E=x&&x.length,N=w({yAxis:y?Vr(Vr({},y),{},{ticks:E?x:y.ticks}):void 0,width:l,height:c,offset:u},E?!0:g);Ba(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(pl(N),"]")),Array.isArray(N)&&(j=N)}if((!S||!S.length)&&Me(_)){var A=b&&b.length,O=_({xAxis:m?Vr(Vr({},m),{},{ticks:A?b:m.ticks}):void 0,width:l,height:c,offset:u},A?!0:g);Ba(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(pl(O),"]")),Array.isArray(O)&&(S=O)}return z.createElement("g",{className:"recharts-cartesian-grid"},z.createElement(Oje,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),z.createElement(kje,$o({},d,{offset:u,horizontalPoints:j,xAxis:m,yAxis:y})),z.createElement(Pje,$o({},d,{offset:u,verticalPoints:S,xAxis:m,yAxis:y})),z.createElement(Rje,$o({},d,{horizontalPoints:j})),z.createElement(Ije,$o({},d,{verticalPoints:S})))}ml.displayName="CartesianGrid";function yu(e){"@babel/helpers - typeof";return yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yu(e)}function Lje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g8(n.key),n)}}function Fje(e,t,r){return t&&$je(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bje(e,t,r){return t=ig(t),Uje(e,p8()?Reflect.construct(t,r||[],ig(e).constructor):t.apply(e,r))}function Uje(e,t){if(t&&(yu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zje(e)}function zje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p8=function(){return!!e})()}function ig(e){return ig=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ig(e)}function qje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uw(e,t)}function uw(e,t){return uw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},uw(e,t)}function m8(e,t,r){return t=g8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g8(e){var t=Wje(e,"string");return yu(t)=="symbol"?t:t+""}function Wje(e,t){if(yu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function dw(){return dw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dw.apply(this,arguments)}function Hje(e){var t=e.xAxisId,r=uj(),n=dj(),a=r8(t);return a==null?null:T.createElement(Xu,dw({},a,{className:He("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(s){return Ei(s,!0)}}))}var Ki=function(e){function t(){return Lje(this,t),Bje(this,t,arguments)}return qje(t,e),Fje(t,[{key:"render",value:function(){return T.createElement(Hje,this.props)}}])}(T.Component);m8(Ki,"displayName","XAxis");m8(Ki,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function bu(e){"@babel/helpers - typeof";return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bu(e)}function Vje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kje(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y8(n.key),n)}}function Gje(e,t,r){return t&&Kje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xje(e,t,r){return t=sg(t),Yje(e,v8()?Reflect.construct(t,r||[],sg(e).constructor):t.apply(e,r))}function Yje(e,t){if(t&&(bu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qje(e)}function Qje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v8=function(){return!!e})()}function sg(e){return sg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sg(e)}function Jje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fw(e,t)}function fw(e,t){return fw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},fw(e,t)}function x8(e,t,r){return t=y8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y8(e){var t=Zje(e,"string");return bu(t)=="symbol"?t:t+""}function Zje(e,t){if(bu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function hw(){return hw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hw.apply(this,arguments)}var eSe=function(t){var r=t.yAxisId,n=uj(),a=dj(),i=n8(r);return i==null?null:T.createElement(Xu,hw({},i,{className:He("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return Ei(l,!0)}}))},Gi=function(e){function t(){return Vje(this,t),Xje(this,t,arguments)}return Jje(t,e),Gje(t,[{key:"render",value:function(){return T.createElement(eSe,this.props)}}])}(T.Component);x8(Gi,"displayName","YAxis");x8(Gi,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function oO(e){return aSe(e)||nSe(e)||rSe(e)||tSe()}function tSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rSe(e,t){if(e){if(typeof e=="string")return pw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pw(e,t)}}function nSe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function aSe(e){if(Array.isArray(e))return pw(e)}function pw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var mw=function(t,r,n,a,i){var s=ha(t,hj),l=ha(t,Mv),c=[].concat(oO(s),oO(l)),u=ha(t,$v),d="".concat(a,"Id"),f=a[0],h=r;if(c.length&&(h=c.reduce(function(g,x){if(x.props[d]===n&&ai(x.props,"extendDomain")&&ve(x.props[f])){var b=x.props[f];return[Math.min(g[0],b),Math.max(g[1],b)]}return g},h)),u.length){var p="".concat(f,"1"),v="".concat(f,"2");h=u.reduce(function(g,x){if(x.props[d]===n&&ai(x.props,"extendDomain")&&ve(x.props[p])&&ve(x.props[v])){var b=x.props[p],m=x.props[v];return[Math.min(g[0],b,m),Math.max(g[1],b,m)]}return g},h)}return i&&i.length&&(h=i.reduce(function(g,x){return ve(x)?[Math.min(g[0],x),Math.max(g[1],x)]:g},h)),h},b8={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new a(d,f||c,h),v=r?r+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],p]:c._events[v].push(p):(c._events[v]=p,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,v=new Array(p);h<p;h++)v[h]=f[h].fn;return v},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,p,v){var g=r?r+u:u;if(!this._events[g])return!1;var x=this._events[g],b=arguments.length,m,y;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),b){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,h),!0;case 5:return x.fn.call(x.context,d,f,h,p),!0;case 6:return x.fn.call(x.context,d,f,h,p,v),!0}for(y=1,m=new Array(b-1);y<b;y++)m[y-1]=arguments[y];x.fn.apply(x.context,m)}else{var _=x.length,w;for(y=0;y<_;y++)switch(x[y].once&&this.removeListener(u,x[y].fn,void 0,!0),b){case 1:x[y].fn.call(x[y].context);break;case 2:x[y].fn.call(x[y].context,d);break;case 3:x[y].fn.call(x[y].context,d,f);break;case 4:x[y].fn.call(x[y].context,d,f,h);break;default:if(!m)for(w=1,m=new Array(b-1);w<b;w++)m[w-1]=arguments[w];x[y].fn.apply(x[y].context,m)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return s(this,p),this;var v=this._events[p];if(v.fn)v.fn===d&&(!h||v.once)&&(!f||v.context===f)&&s(this,p);else{for(var g=0,x=[],b=v.length;g<b;g++)(v[g].fn!==d||h&&!v[g].once||f&&v[g].context!==f)&&x.push(v[g]);x.length?this._events[p]=x.length===1?x[0]:x:s(this,p)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&s(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(b8);var iSe=b8.exports;const sSe=it(iSe);var uy=new sSe,dy="recharts.syncMouseEvents";function lh(e){"@babel/helpers - typeof";return lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lh(e)}function oSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lSe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w8(n.key),n)}}function cSe(e,t,r){return t&&lSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fy(e,t,r){return t=w8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w8(e){var t=uSe(e,"string");return lh(t)=="symbol"?t:t+""}function uSe(e,t){if(lh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(lh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var dSe=function(){function e(){oSe(this,e),fy(this,"activeIndex",0),fy(this,"coordinateList",[]),fy(this,"layout","horizontal")}return cSe(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,s=r.container,l=s===void 0?null:s,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,h=r.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,s=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+c+u,h=s+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function fSe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&ve(n)&&ve(a))return!0}return!1}function hSe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function _8(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,s=jt(t,r,n,a),l=jt(t,r,n,i);return{points:[s,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function pSe(e,t,r){var n,a,i,s;if(e==="horizontal")n=t.x,i=n,a=r.top,s=r.top+r.height;else if(e==="vertical")a=t.y,s=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,h=jt(l,c,u,f),p=jt(l,c,d,f);n=h.x,a=h.y,i=p.x,s=p.y}else return _8(t);return[{x:n,y:a},{x:i,y:s}]}function ch(e){"@babel/helpers - typeof";return ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ch(e)}function lO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function V0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lO(Object(r),!0).forEach(function(n){mSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mSe(e,t,r){return t=gSe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gSe(e){var t=vSe(e,"string");return ch(t)=="symbol"?t:t+""}function vSe(e,t){if(ch(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ch(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xSe(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,s=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!i||!s||h!=="ScatterChart"&&a!=="axis")return null;var v,g=$b;if(h==="ScatterChart")v=s,g=X1e;else if(h==="BarChart")v=hSe(f,s,c,d),g=ij;else if(f==="radial"){var x=_8(s),b=x.cx,m=x.cy,y=x.radius,_=x.startAngle,w=x.endAngle;v={cx:b,cy:m,startAngle:_,endAngle:w,innerRadius:y,outerRadius:y},g=w6}else v={points:pSe(f,s,c)},g=$b;var j=V0(V0(V0(V0({stroke:"#ccc",pointerEvents:"none"},c),v),De(p,!1)),{},{payload:l,payloadIndex:u,className:He("recharts-tooltip-cursor",p.className)});return T.isValidElement(p)?T.cloneElement(p,j):T.createElement(g,j)}var ySe=["item"],bSe=["children","className","width","height","style","compact","title","desc"];function wu(e){"@babel/helpers - typeof";return wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wu(e)}function lc(){return lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lc.apply(this,arguments)}function cO(e,t){return jSe(e)||_Se(e,t)||S8(e,t)||wSe()}function wSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Se(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function jSe(e){if(Array.isArray(e))return e}function uO(e,t){if(e==null)return{};var r=SSe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function SSe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ESe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NSe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E8(n.key),n)}}function TSe(e,t,r){return t&&NSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ASe(e,t,r){return t=og(t),CSe(e,j8()?Reflect.construct(t,r||[],og(e).constructor):t.apply(e,r))}function CSe(e,t){if(t&&(wu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OSe(e)}function OSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j8=function(){return!!e})()}function og(e){return og=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},og(e)}function kSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gw(e,t)}function gw(e,t){return gw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},gw(e,t)}function _u(e){return ISe(e)||RSe(e)||S8(e)||PSe()}function PSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S8(e,t){if(e){if(typeof e=="string")return vw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vw(e,t)}}function RSe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ISe(e){if(Array.isArray(e))return vw(e)}function vw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dO(Object(r),!0).forEach(function(n){Re(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Re(e,t,r){return t=E8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E8(e){var t=DSe(e,"string");return wu(t)=="symbol"?t:t+""}function DSe(e,t){if(wu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var MSe={xAxis:["bottom","top"],yAxis:["left","right"]},LSe={width:"100%",height:"100%"},N8={x:0,y:0};function K0(e){return e}var $Se=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},FSe=function(t,r,n,a){var i=r.find(function(d){return d&&d.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var s=i.coordinate,l=a.radius;return ce(ce(ce({},a),jt(a.cx,a.cy,l,s)),{},{angle:s,radius:l})}var c=i.coordinate,u=a.angle;return ce(ce(ce({},a),jt(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return N8},Fv=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,s=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(_u(l),_u(u)):l},[]);return s.length>0?s:t&&t.length&&ve(a)&&ve(i)?t.slice(a,i+1):[]};function T8(e){return e==="number"?[0,"auto"]:void 0}var xw=function(t,r,n,a){var i=t.graphicalItems,s=t.tooltipAxis,l=Fv(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(s.dataKey&&!s.allowDuplicatedCategory){var p=f===void 0?l:f;h=V1(p,s.dataKey,a)}else h=f&&f[n]||l[n];return h?[].concat(_u(c),[m6(u,h)]):c},[])},fO=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},s=$Se(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=mve(s,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=xw(t,r,d,f),p=FSe(n,l,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:p}}return null},BSe=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,s=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=t.stackOffset,p=c6(d,i);return n.reduce(function(v,g){var x,b=g.type.defaultProps!==void 0?ce(ce({},g.type.defaultProps),g.props):g.props,m=b.type,y=b.dataKey,_=b.allowDataOverflow,w=b.allowDuplicatedCategory,j=b.scale,S=b.ticks,E=b.includeHidden,N=b[s];if(v[N])return v;var A=Fv(t.data,{graphicalItems:a.filter(function(R){var W,U=s in R.props?R.props[s]:(W=R.type.defaultProps)===null||W===void 0?void 0:W[s];return U===N}),dataStartIndex:c,dataEndIndex:u}),O=A.length,D,k,V;fSe(b.domain,_,m)&&(D=Rb(b.domain,null,_),p&&(m==="number"||j!=="auto")&&(V=Kd(A,y,"category")));var K=T8(m);if(!D||D.length===0){var ie,G=(ie=b.domain)!==null&&ie!==void 0?ie:K;if(y){if(D=Kd(A,y,m),m==="category"&&p){var X=ine(D);w&&X?(k=D,D=Xm(0,O)):w||(D=BA(G,D,g).reduce(function(R,W){return R.indexOf(W)>=0?R:[].concat(_u(R),[W])},[]))}else if(m==="category")w?D=D.filter(function(R){return R!==""&&!Ke(R)}):D=BA(G,D,g).reduce(function(R,W){return R.indexOf(W)>=0||W===""||Ke(W)?R:[].concat(_u(R),[W])},[]);else if(m==="number"){var re=bve(A,a.filter(function(R){var W,U,q=s in R.props?R.props[s]:(W=R.type.defaultProps)===null||W===void 0?void 0:W[s],se="hide"in R.props?R.props.hide:(U=R.type.defaultProps)===null||U===void 0?void 0:U.hide;return q===N&&(E||!se)}),y,i,d);re&&(D=re)}p&&(m==="number"||j!=="auto")&&(V=Kd(A,y,"category"))}else p?D=Xm(0,O):l&&l[N]&&l[N].hasStack&&m==="number"?D=h==="expand"?[0,1]:p6(l[N].stackGroups,c,u):D=l6(A,a.filter(function(R){var W=s in R.props?R.props[s]:R.type.defaultProps[s],U="hide"in R.props?R.props.hide:R.type.defaultProps.hide;return W===N&&(E||!U)}),m,d,!0);if(m==="number")D=mw(f,D,N,i,S),G&&(D=Rb(G,D,_));else if(m==="category"&&G){var de=G,me=D.every(function(R){return de.indexOf(R)>=0});me&&(D=de)}}return ce(ce({},v),{},Re({},N,ce(ce({},b),{},{axisType:i,domain:D,categoricalDomain:V,duplicateDomain:k,originalDomain:(x=b.domain)!==null&&x!==void 0?x:K,isCategorical:p,layout:d})))},{})},USe=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,s=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=Fv(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),p=h.length,v=c6(d,i),g=-1;return n.reduce(function(x,b){var m=b.type.defaultProps!==void 0?ce(ce({},b.type.defaultProps),b.props):b.props,y=m[s],_=T8("number");if(!x[y]){g++;var w;return v?w=Xm(0,p):l&&l[y]&&l[y].hasStack?(w=p6(l[y].stackGroups,c,u),w=mw(f,w,y,i)):(w=Rb(_,l6(h,n.filter(function(j){var S,E,N=s in j.props?j.props[s]:(S=j.type.defaultProps)===null||S===void 0?void 0:S[s],A="hide"in j.props?j.props.hide:(E=j.type.defaultProps)===null||E===void 0?void 0:E.hide;return N===y&&!A}),"number",d),a.defaultProps.allowDataOverflow),w=mw(f,w,y,i)),ce(ce({},x),{},Re({},y,ce(ce({axisType:i},a.defaultProps),{},{hide:!0,orientation:Kn(MSe,"".concat(i,".").concat(g%2),null),domain:w,originalDomain:_,isCategorical:v,layout:d})))}return x},{})},zSe=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,s=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(a,"Id"),h=ha(d,i),p={};return h&&h.length?p=BSe(t,{axes:h,graphicalItems:s,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):s&&s.length&&(p=USe(t,{Axis:i,graphicalItems:s,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),p},qSe=function(t){var r=gs(t),n=Ei(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:P2(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Mm(r,n)}},hO=function(t){var r=t.children,n=t.defaultShowTooltip,a=$n(r,hu),i=0,s=0;return t.data&&t.data.length!==0&&(s=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(s=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},WSe=function(t){return!t||!t.length?!1:t.some(function(r){var n=Oi(r&&r.type);return n&&n.indexOf("Bar")>=0})},pO=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},HSe=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,s=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,h=n.margin||{},p=$n(f,hu),v=$n(f,ki),g=Object.keys(c).reduce(function(w,j){var S=c[j],E=S.orientation;return!S.mirror&&!S.hide?ce(ce({},w),{},Re({},E,w[E]+S.width)):w},{left:h.left||0,right:h.right||0}),x=Object.keys(s).reduce(function(w,j){var S=s[j],E=S.orientation;return!S.mirror&&!S.hide?ce(ce({},w),{},Re({},E,Kn(w,"".concat(E))+S.height)):w},{top:h.top||0,bottom:h.bottom||0}),b=ce(ce({},x),g),m=b.bottom;p&&(b.bottom+=p.props.height||hu.defaultProps.height),v&&r&&(b=xve(b,a,n,r));var y=u-b.left-b.right,_=d-b.top-b.bottom;return ce(ce({brushBottom:m},b),{},{width:Math.max(y,0),height:Math.max(_,0)})},VSe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},A8=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,s=t.validateTooltipEventTypes,l=s===void 0?["axis"]:s,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,h=function(b,m){var y=m.graphicalItems,_=m.stackGroups,w=m.offset,j=m.updateId,S=m.dataStartIndex,E=m.dataEndIndex,N=b.barSize,A=b.layout,O=b.barGap,D=b.barCategoryGap,k=b.maxBarSize,V=pO(A),K=V.numericAxisName,ie=V.cateAxisName,G=WSe(y),X=[];return y.forEach(function(re,de){var me=Fv(b.data,{graphicalItems:[re],dataStartIndex:S,dataEndIndex:E}),R=re.type.defaultProps!==void 0?ce(ce({},re.type.defaultProps),re.props):re.props,W=R.dataKey,U=R.maxBarSize,q=R["".concat(K,"Id")],se=R["".concat(ie,"Id")],je={},ee=c.reduce(function(gn,Wa){var oo=m["".concat(Wa.axisType,"Map")],In=R["".concat(Wa.axisType,"Id")];oo&&oo[In]||Wa.axisType==="zAxis"||hl();var lo=oo[In];return ce(ce({},gn),{},Re(Re({},Wa.axisType,lo),"".concat(Wa.axisType,"Ticks"),Ei(lo)))},je),Y=ee[ie],ne=ee["".concat(ie,"Ticks")],be=_&&_[q]&&_[q].hasStack&&Cve(re,_[q].stackGroups),ae=Oi(re.type).indexOf("Bar")>=0,Ue=Mm(Y,ne),Oe=[],st=G&&gve({barSize:N,stackGroups:_,totalSize:VSe(ee,ie)});if(ae){var ze,we,Xt=Ke(U)?k:U,Br=(ze=(we=Mm(Y,ne,!0))!==null&&we!==void 0?we:Xt)!==null&&ze!==void 0?ze:0;Oe=vve({barGap:O,barCategoryGap:D,bandSize:Br!==Ue?Br:Ue,sizeList:st[se],maxBarSize:Xt}),Br!==Ue&&(Oe=Oe.map(function(gn){return ce(ce({},gn),{},{position:ce(ce({},gn.position),{},{offset:gn.position.offset-Br/2})})}))}var Zn=re&&re.type&&re.type.getComposedData;Zn&&X.push({props:ce(ce({},Zn(ce(ce({},ee),{},{displayedData:me,props:b,dataKey:W,item:re,bandSize:Ue,barPosition:Oe,offset:w,stackedData:be,layout:A,dataStartIndex:S,dataEndIndex:E}))),{},Re(Re(Re({key:re.key||"item-".concat(de)},K,ee[K]),ie,ee[ie]),"animationId",j)),childIndex:vne(re,b.children),item:re})}),X},p=function(b,m){var y=b.props,_=b.dataStartIndex,w=b.dataEndIndex,j=b.updateId;if(!IN({props:y}))return null;var S=y.children,E=y.layout,N=y.stackOffset,A=y.data,O=y.reverseStackOrder,D=pO(E),k=D.numericAxisName,V=D.cateAxisName,K=ha(S,n),ie=Tve(A,K,"".concat(k,"Id"),"".concat(V,"Id"),N,O),G=c.reduce(function(R,W){var U="".concat(W.axisType,"Map");return ce(ce({},R),{},Re({},U,zSe(y,ce(ce({},W),{},{graphicalItems:K,stackGroups:W.axisType===k&&ie,dataStartIndex:_,dataEndIndex:w}))))},{}),X=HSe(ce(ce({},G),{},{props:y,graphicalItems:K}),m==null?void 0:m.legendBBox);Object.keys(G).forEach(function(R){G[R]=d(y,G[R],X,R.replace("Map",""),r)});var re=G["".concat(V,"Map")],de=qSe(re),me=h(y,ce(ce({},G),{},{dataStartIndex:_,dataEndIndex:w,updateId:j,graphicalItems:K,stackGroups:ie,offset:X}));return ce(ce({formattedGraphicalItems:me,graphicalItems:K,offset:X,stackGroups:ie},de),G)},v=function(x){function b(m){var y,_,w;return ESe(this,b),w=ASe(this,b,[m]),Re(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Re(w,"accessibilityManager",new dSe),Re(w,"handleLegendBBoxUpdate",function(j){if(j){var S=w.state,E=S.dataStartIndex,N=S.dataEndIndex,A=S.updateId;w.setState(ce({legendBBox:j},p({props:w.props,dataStartIndex:E,dataEndIndex:N,updateId:A},ce(ce({},w.state),{},{legendBBox:j}))))}}),Re(w,"handleReceiveSyncEvent",function(j,S,E){if(w.props.syncId===j){if(E===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(S)}}),Re(w,"handleBrushChange",function(j){var S=j.startIndex,E=j.endIndex;if(S!==w.state.dataStartIndex||E!==w.state.dataEndIndex){var N=w.state.updateId;w.setState(function(){return ce({dataStartIndex:S,dataEndIndex:E},p({props:w.props,dataStartIndex:S,dataEndIndex:E,updateId:N},w.state))}),w.triggerSyncEvent({dataStartIndex:S,dataEndIndex:E})}}),Re(w,"handleMouseEnter",function(j){var S=w.getMouseInfo(j);if(S){var E=ce(ce({},S),{},{isTooltipActive:!0});w.setState(E),w.triggerSyncEvent(E);var N=w.props.onMouseEnter;Me(N)&&N(E,j)}}),Re(w,"triggeredAfterMouseMove",function(j){var S=w.getMouseInfo(j),E=S?ce(ce({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(E),w.triggerSyncEvent(E);var N=w.props.onMouseMove;Me(N)&&N(E,j)}),Re(w,"handleItemMouseEnter",function(j){w.setState(function(){return{isTooltipActive:!0,activeItem:j,activePayload:j.tooltipPayload,activeCoordinate:j.tooltipPosition||{x:j.cx,y:j.cy}}})}),Re(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),Re(w,"handleMouseMove",function(j){j.persist(),w.throttleTriggeredAfterMouseMove(j)}),Re(w,"handleMouseLeave",function(j){w.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};w.setState(S),w.triggerSyncEvent(S);var E=w.props.onMouseLeave;Me(E)&&E(S,j)}),Re(w,"handleOuterEvent",function(j){var S=gne(j),E=Kn(w.props,"".concat(S));if(S&&Me(E)){var N,A;/.*touch.*/i.test(S)?A=w.getMouseInfo(j.changedTouches[0]):A=w.getMouseInfo(j),E((N=A)!==null&&N!==void 0?N:{},j)}}),Re(w,"handleClick",function(j){var S=w.getMouseInfo(j);if(S){var E=ce(ce({},S),{},{isTooltipActive:!0});w.setState(E),w.triggerSyncEvent(E);var N=w.props.onClick;Me(N)&&N(E,j)}}),Re(w,"handleMouseDown",function(j){var S=w.props.onMouseDown;if(Me(S)){var E=w.getMouseInfo(j);S(E,j)}}),Re(w,"handleMouseUp",function(j){var S=w.props.onMouseUp;if(Me(S)){var E=w.getMouseInfo(j);S(E,j)}}),Re(w,"handleTouchMove",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(j.changedTouches[0])}),Re(w,"handleTouchStart",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&w.handleMouseDown(j.changedTouches[0])}),Re(w,"handleTouchEnd",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&w.handleMouseUp(j.changedTouches[0])}),Re(w,"handleDoubleClick",function(j){var S=w.props.onDoubleClick;if(Me(S)){var E=w.getMouseInfo(j);S(E,j)}}),Re(w,"handleContextMenu",function(j){var S=w.props.onContextMenu;if(Me(S)){var E=w.getMouseInfo(j);S(E,j)}}),Re(w,"triggerSyncEvent",function(j){w.props.syncId!==void 0&&uy.emit(dy,w.props.syncId,j,w.eventEmitterSymbol)}),Re(w,"applySyncEvent",function(j){var S=w.props,E=S.layout,N=S.syncMethod,A=w.state.updateId,O=j.dataStartIndex,D=j.dataEndIndex;if(j.dataStartIndex!==void 0||j.dataEndIndex!==void 0)w.setState(ce({dataStartIndex:O,dataEndIndex:D},p({props:w.props,dataStartIndex:O,dataEndIndex:D,updateId:A},w.state)));else if(j.activeTooltipIndex!==void 0){var k=j.chartX,V=j.chartY,K=j.activeTooltipIndex,ie=w.state,G=ie.offset,X=ie.tooltipTicks;if(!G)return;if(typeof N=="function")K=N(X,j);else if(N==="value"){K=-1;for(var re=0;re<X.length;re++)if(X[re].value===j.activeLabel){K=re;break}}var de=ce(ce({},G),{},{x:G.left,y:G.top}),me=Math.min(k,de.x+de.width),R=Math.min(V,de.y+de.height),W=X[K]&&X[K].value,U=xw(w.state,w.props.data,K),q=X[K]?{x:E==="horizontal"?X[K].coordinate:me,y:E==="horizontal"?R:X[K].coordinate}:N8;w.setState(ce(ce({},j),{},{activeLabel:W,activeCoordinate:q,activePayload:U,activeTooltipIndex:K}))}else w.setState(j)}),Re(w,"renderCursor",function(j){var S,E=w.state,N=E.isTooltipActive,A=E.activeCoordinate,O=E.activePayload,D=E.offset,k=E.activeTooltipIndex,V=E.tooltipAxisBandSize,K=w.getTooltipEventType(),ie=(S=j.props.active)!==null&&S!==void 0?S:N,G=w.props.layout,X=j.key||"_recharts-cursor";return z.createElement(xSe,{key:X,activeCoordinate:A,activePayload:O,activeTooltipIndex:k,chartName:r,element:j,isActive:ie,layout:G,offset:D,tooltipAxisBandSize:V,tooltipEventType:K})}),Re(w,"renderPolarAxis",function(j,S,E){var N=Kn(j,"type.axisType"),A=Kn(w.state,"".concat(N,"Map")),O=j.type.defaultProps,D=O!==void 0?ce(ce({},O),j.props):j.props,k=A&&A[D["".concat(N,"Id")]];return T.cloneElement(j,ce(ce({},k),{},{className:He(N,k.className),key:j.key||"".concat(S,"-").concat(E),ticks:Ei(k,!0)}))}),Re(w,"renderPolarGrid",function(j){var S=j.props,E=S.radialLines,N=S.polarAngles,A=S.polarRadius,O=w.state,D=O.radiusAxisMap,k=O.angleAxisMap,V=gs(D),K=gs(k),ie=K.cx,G=K.cy,X=K.innerRadius,re=K.outerRadius;return T.cloneElement(j,{polarAngles:Array.isArray(N)?N:Ei(K,!0).map(function(de){return de.coordinate}),polarRadius:Array.isArray(A)?A:Ei(V,!0).map(function(de){return de.coordinate}),cx:ie,cy:G,innerRadius:X,outerRadius:re,key:j.key||"polar-grid",radialLines:E})}),Re(w,"renderLegend",function(){var j=w.state.formattedGraphicalItems,S=w.props,E=S.children,N=S.width,A=S.height,O=w.props.margin||{},D=N-(O.left||0)-(O.right||0),k=s6({children:E,formattedGraphicalItems:j,legendWidth:D,legendContent:u});if(!k)return null;var V=k.item,K=uO(k,ySe);return T.cloneElement(V,ce(ce({},K),{},{chartWidth:N,chartHeight:A,margin:O,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),Re(w,"renderTooltip",function(){var j,S=w.props,E=S.children,N=S.accessibilityLayer,A=$n(E,xr);if(!A)return null;var O=w.state,D=O.isTooltipActive,k=O.activeCoordinate,V=O.activePayload,K=O.activeLabel,ie=O.offset,G=(j=A.props.active)!==null&&j!==void 0?j:D;return T.cloneElement(A,{viewBox:ce(ce({},ie),{},{x:ie.left,y:ie.top}),active:G,label:K,payload:G?V:[],coordinate:k,accessibilityLayer:N})}),Re(w,"renderBrush",function(j){var S=w.props,E=S.margin,N=S.data,A=w.state,O=A.offset,D=A.dataStartIndex,k=A.dataEndIndex,V=A.updateId;return T.cloneElement(j,{key:j.key||"_recharts-brush",onChange:z0(w.handleBrushChange,j.props.onChange),data:N,x:ve(j.props.x)?j.props.x:O.left,y:ve(j.props.y)?j.props.y:O.top+O.height+O.brushBottom-(E.bottom||0),width:ve(j.props.width)?j.props.width:O.width,startIndex:D,endIndex:k,updateId:"brush-".concat(V)})}),Re(w,"renderReferenceElement",function(j,S,E){if(!j)return null;var N=w,A=N.clipPathId,O=w.state,D=O.xAxisMap,k=O.yAxisMap,V=O.offset,K=j.type.defaultProps||{},ie=j.props,G=ie.xAxisId,X=G===void 0?K.xAxisId:G,re=ie.yAxisId,de=re===void 0?K.yAxisId:re;return T.cloneElement(j,{key:j.key||"".concat(S,"-").concat(E),xAxis:D[X],yAxis:k[de],viewBox:{x:V.left,y:V.top,width:V.width,height:V.height},clipPathId:A})}),Re(w,"renderActivePoints",function(j){var S=j.item,E=j.activePoint,N=j.basePoint,A=j.childIndex,O=j.isRange,D=[],k=S.props.key,V=S.item.type.defaultProps!==void 0?ce(ce({},S.item.type.defaultProps),S.item.props):S.item.props,K=V.activeDot,ie=V.dataKey,G=ce(ce({index:A,dataKey:ie,cx:E.x,cy:E.y,r:4,fill:aj(S.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},De(K,!1)),cm(K));return D.push(b.renderActiveDot(K,G,"".concat(k,"-activePoint-").concat(A))),N?D.push(b.renderActiveDot(K,ce(ce({},G),{},{cx:N.x,cy:N.y}),"".concat(k,"-basePoint-").concat(A))):O&&D.push(null),D}),Re(w,"renderGraphicChild",function(j,S,E){var N=w.filterFormatItem(j,S,E);if(!N)return null;var A=w.getTooltipEventType(),O=w.state,D=O.isTooltipActive,k=O.tooltipAxis,V=O.activeTooltipIndex,K=O.activeLabel,ie=w.props.children,G=$n(ie,xr),X=N.props,re=X.points,de=X.isRange,me=X.baseLine,R=N.item.type.defaultProps!==void 0?ce(ce({},N.item.type.defaultProps),N.item.props):N.item.props,W=R.activeDot,U=R.hide,q=R.activeBar,se=R.activeShape,je=!!(!U&&D&&G&&(W||q||se)),ee={};A!=="axis"&&G&&G.props.trigger==="click"?ee={onClick:z0(w.handleItemMouseEnter,j.props.onClick)}:A!=="axis"&&(ee={onMouseLeave:z0(w.handleItemMouseLeave,j.props.onMouseLeave),onMouseEnter:z0(w.handleItemMouseEnter,j.props.onMouseEnter)});var Y=T.cloneElement(j,ce(ce({},N.props),ee));function ne(Wa){return typeof k.dataKey=="function"?k.dataKey(Wa.payload):null}if(je)if(V>=0){var be,ae;if(k.dataKey&&!k.allowDuplicatedCategory){var Ue=typeof k.dataKey=="function"?ne:"payload.".concat(k.dataKey.toString());be=V1(re,Ue,K),ae=de&&me&&V1(me,Ue,K)}else be=re==null?void 0:re[V],ae=de&&me&&me[V];if(se||q){var Oe=j.props.activeIndex!==void 0?j.props.activeIndex:V;return[T.cloneElement(j,ce(ce(ce({},N.props),ee),{},{activeIndex:Oe})),null,null]}if(!Ke(be))return[Y].concat(_u(w.renderActivePoints({item:N,activePoint:be,basePoint:ae,childIndex:V,isRange:de})))}else{var st,ze=(st=w.getItemByXY(w.state.activeCoordinate))!==null&&st!==void 0?st:{graphicalItem:Y},we=ze.graphicalItem,Xt=we.item,Br=Xt===void 0?j:Xt,Zn=we.childIndex,gn=ce(ce(ce({},N.props),ee),{},{activeIndex:Zn});return[T.cloneElement(Br,gn),null,null]}return de?[Y,null,null]:[Y,null]}),Re(w,"renderCustomized",function(j,S,E){return T.cloneElement(j,ce(ce({key:"recharts-customized-".concat(E)},w.props),w.state))}),Re(w,"renderMap",{CartesianGrid:{handler:K0,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:K0},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:K0},YAxis:{handler:K0},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((y=m.id)!==null&&y!==void 0?y:$h("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=iD(w.triggeredAfterMouseMove,(_=m.throttleDelay)!==null&&_!==void 0?_:1e3/60),w.state={},w}return kSe(b,x),TSe(b,[{key:"componentDidMount",value:function(){var y,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(y=this.props.margin.left)!==null&&y!==void 0?y:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var y=this.props,_=y.children,w=y.data,j=y.height,S=y.layout,E=$n(_,xr);if(E){var N=E.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var A=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,O=xw(this.state,w,N,A),D=this.state.tooltipTicks[N].coordinate,k=(this.state.offset.top+j)/2,V=S==="horizontal",K=V?{x:D,y:k}:{y:D,x:k},ie=this.state.formattedGraphicalItems.find(function(X){var re=X.item;return re.type.name==="Scatter"});ie&&(K=ce(ce({},K),ie.props.points[N].tooltipPosition),O=ie.props.points[N].tooltipPayload);var G={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:A,activePayload:O,activeCoordinate:K};this.setState(G),this.renderCursor(E),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(y,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==y.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==y.margin){var w,j;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0}})}return null}},{key:"componentDidUpdate",value:function(y){G1([$n(y.children,xr)],[$n(this.props.children,xr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var y=$n(this.props.children,xr);if(y&&typeof y.props.shared=="boolean"){var _=y.props.shared?"axis":"item";return l.indexOf(_)>=0?_:i}return i}},{key:"getMouseInfo",value:function(y){if(!this.container)return null;var _=this.container,w=_.getBoundingClientRect(),j=qhe(w),S={chartX:Math.round(y.pageX-j.left),chartY:Math.round(y.pageY-j.top)},E=w.width/_.offsetWidth||1,N=this.inRange(S.chartX,S.chartY,E);if(!N)return null;var A=this.state,O=A.xAxisMap,D=A.yAxisMap,k=this.getTooltipEventType(),V=fO(this.state,this.props.data,this.props.layout,N);if(k!=="axis"&&O&&D){var K=gs(O).scale,ie=gs(D).scale,G=K&&K.invert?K.invert(S.chartX):null,X=ie&&ie.invert?ie.invert(S.chartY):null;return ce(ce({},S),{},{xValue:G,yValue:X},V)}return V?ce(ce({},S),V):null}},{key:"inRange",value:function(y,_){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,j=this.props.layout,S=y/w,E=_/w;if(j==="horizontal"||j==="vertical"){var N=this.state.offset,A=S>=N.left&&S<=N.left+N.width&&E>=N.top&&E<=N.top+N.height;return A?{x:S,y:E}:null}var O=this.state,D=O.angleAxisMap,k=O.radiusAxisMap;if(D&&k){var V=gs(D);return qA({x:S,y:E},V)}return null}},{key:"parseEventsOfWrapper",value:function(){var y=this.props.children,_=this.getTooltipEventType(),w=$n(y,xr),j={};w&&_==="axis"&&(w.props.trigger==="click"?j={onClick:this.handleClick}:j={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=cm(this.props,this.handleOuterEvent);return ce(ce({},S),j)}},{key:"addListener",value:function(){uy.on(dy,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){uy.removeListener(dy,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(y,_,w){for(var j=this.state.formattedGraphicalItems,S=0,E=j.length;S<E;S++){var N=j[S];if(N.item===y||N.props.key===y.key||_===Oi(N.item.type)&&w===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var y=this.clipPathId,_=this.state.offset,w=_.left,j=_.top,S=_.height,E=_.width;return z.createElement("defs",null,z.createElement("clipPath",{id:y},z.createElement("rect",{x:w,y:j,height:S,width:E})))}},{key:"getXScales",value:function(){var y=this.state.xAxisMap;return y?Object.entries(y).reduce(function(_,w){var j=cO(w,2),S=j[0],E=j[1];return ce(ce({},_),{},Re({},S,E.scale))},{}):null}},{key:"getYScales",value:function(){var y=this.state.yAxisMap;return y?Object.entries(y).reduce(function(_,w){var j=cO(w,2),S=j[0],E=j[1];return ce(ce({},_),{},Re({},S,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(y){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[y])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(y){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[y])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(y){var _=this.state,w=_.formattedGraphicalItems,j=_.activeItem;if(w&&w.length)for(var S=0,E=w.length;S<E;S++){var N=w[S],A=N.props,O=N.item,D=O.type.defaultProps!==void 0?ce(ce({},O.type.defaultProps),O.props):O.props,k=Oi(O.type);if(k==="Bar"){var V=(A.data||[]).find(function(X){return C1e(y,X)});if(V)return{graphicalItem:N,payload:V}}else if(k==="RadialBar"){var K=(A.data||[]).find(function(X){return qA(y,X)});if(K)return{graphicalItem:N,payload:K}}else if(Pv(N,j)||Rv(N,j)||nh(N,j)){var ie=vwe({graphicalItem:N,activeTooltipItem:j,itemData:D.data}),G=D.activeIndex===void 0?ie:D.activeIndex;return{graphicalItem:ce(ce({},N),{},{childIndex:G}),payload:nh(N,j)?D.data[ie]:N.props.data[ie]}}}return null}},{key:"render",value:function(){var y=this;if(!IN(this))return null;var _=this.props,w=_.children,j=_.className,S=_.width,E=_.height,N=_.style,A=_.compact,O=_.title,D=_.desc,k=uO(_,bSe),V=De(k,!1);if(A)return z.createElement(GC,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},z.createElement(Y1,lc({},V,{width:S,height:E,title:O,desc:D}),this.renderClipPath(),MN(w,this.renderMap)));if(this.props.accessibilityLayer){var K,ie;V.tabIndex=(K=this.props.tabIndex)!==null&&K!==void 0?K:0,V.role=(ie=this.props.role)!==null&&ie!==void 0?ie:"application",V.onKeyDown=function(X){y.accessibilityManager.keyboardEvent(X)},V.onFocus=function(){y.accessibilityManager.focus()}}var G=this.parseEventsOfWrapper();return z.createElement(GC,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},z.createElement("div",lc({className:He("recharts-wrapper",j),style:ce({position:"relative",cursor:"default",width:S,height:E},N)},G,{ref:function(re){y.container=re}}),z.createElement(Y1,lc({},V,{width:S,height:E,title:O,desc:D,style:LSe}),this.renderClipPath(),MN(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(T.Component);Re(v,"displayName",r),Re(v,"defaultProps",ce({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Re(v,"getDerivedStateFromProps",function(x,b){var m=x.dataKey,y=x.data,_=x.children,w=x.width,j=x.height,S=x.layout,E=x.stackOffset,N=x.margin,A=b.dataStartIndex,O=b.dataEndIndex;if(b.updateId===void 0){var D=hO(x);return ce(ce(ce({},D),{},{updateId:0},p(ce(ce({props:x},D),{},{updateId:0}),b)),{},{prevDataKey:m,prevData:y,prevWidth:w,prevHeight:j,prevLayout:S,prevStackOffset:E,prevMargin:N,prevChildren:_})}if(m!==b.prevDataKey||y!==b.prevData||w!==b.prevWidth||j!==b.prevHeight||S!==b.prevLayout||E!==b.prevStackOffset||!_c(N,b.prevMargin)){var k=hO(x),V={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},K=ce(ce({},fO(b,y,S)),{},{updateId:b.updateId+1}),ie=ce(ce(ce({},k),V),K);return ce(ce(ce({},ie),p(ce({props:x},ie),b)),{},{prevDataKey:m,prevData:y,prevWidth:w,prevHeight:j,prevLayout:S,prevStackOffset:E,prevMargin:N,prevChildren:_})}if(!G1(_,b.prevChildren)){var G,X,re,de,me=$n(_,hu),R=me&&(G=(X=me.props)===null||X===void 0?void 0:X.startIndex)!==null&&G!==void 0?G:A,W=me&&(re=(de=me.props)===null||de===void 0?void 0:de.endIndex)!==null&&re!==void 0?re:O,U=R!==A||W!==O,q=!Ke(y),se=q&&!U?b.updateId:b.updateId+1;return ce(ce({updateId:se},p(ce(ce({props:x},b),{},{updateId:se,dataStartIndex:R,dataEndIndex:W}),b)),{},{prevChildren:_,dataStartIndex:R,dataEndIndex:W})}return null}),Re(v,"renderActiveDot",function(x,b,m){var y;return T.isValidElement(x)?y=T.cloneElement(x,b):Me(x)?y=x(b):y=z.createElement(sj,b),z.createElement(ct,{className:"recharts-active-dot",key:m},y)});var g=T.forwardRef(function(b,m){return z.createElement(v,lc({},b,{ref:m}))});return g.displayName=v.displayName,g},ju=A8({chartName:"BarChart",GraphicalChild:Sn,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Ki},{axisType:"yAxis",AxisComp:Gi}],formatAxisMap:X_e}),gj=A8({chartName:"PieChart",GraphicalChild:qa,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:kv},{axisType:"radiusAxis",AxisComp:Cv}],formatAxisMap:Fve,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const yd={ASIGNADA:"#3b82f6",RECUPERADA:"#8b5cf6",CERRADA:"#6b7280",PERDIDA:"#ef4444",DETERIORO:"#f97316"},KSe=({loans:e})=>{const t=T.useMemo(()=>{const a={},i=new Date;for(let s=7;s>=0;s--){const l=new Date(i);l.setDate(l.getDate()-s*7);const c=`S${8-s}`;a[c]=0}return e.forEach(s=>{const l=new Date(s.issued_at),c=Math.floor((i.getTime()-l.getTime())/(1e3*60*60*24*7));if(c>=0&&c<8){const u=`S${8-c}`;a[u]!==void 0&&a[u]++}}),Object.entries(a).map(([s,l])=>({week:s,count:l}))},[e]),r=T.useMemo(()=>{const a=e.filter(s=>s.reason==="PERDIDA").length,i=e.filter(s=>s.reason==="DETERIORO").length;return[{name:"Perdida",value:a,color:yd.PERDIDA},{name:"Deterioro",value:i,color:yd.DETERIORO}].filter(s=>s.value>0)},[e]),n=T.useMemo(()=>Ys.map(a=>{const i=e.filter(s=>{var l;return((l=s.backup_cards)==null?void 0:l.inventory_terminal)===a});return{terminal:a.split(" ")[0],ASIGNADA:i.filter(s=>s.status==="ASIGNADA").length,RECUPERADA:i.filter(s=>s.status==="RECUPERADA").length,CERRADA:i.filter(s=>s.status==="CERRADA").length}}),[e]);return o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Prestamos por Semana"}),o.jsx("div",{className:"h-48",children:o.jsx(Pi,{width:"100%",height:"100%",children:o.jsxs(ju,{data:t,children:[o.jsx(ml,{strokeDasharray:"3 3",vertical:!1}),o.jsx(Ki,{dataKey:"week",tick:{fontSize:11}}),o.jsx(Gi,{tick:{fontSize:11},allowDecimals:!1}),o.jsx(xr,{}),o.jsx(Sn,{dataKey:"count",name:"Prestamos",fill:"#3b82f6",radius:[4,4,0,0]})]})})})]}),o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Motivo de Solicitud"}),o.jsx("div",{className:"h-48",children:r.length>0?o.jsx(Pi,{width:"100%",height:"100%",children:o.jsxs(gj,{children:[o.jsx(qa,{data:r,cx:"50%",cy:"50%",innerRadius:40,outerRadius:70,paddingAngle:2,dataKey:"value",label:({name:a,percent:i})=>`${a} ${(i*100).toFixed(0)}%`,labelLine:!1,children:r.map((a,i)=>o.jsx(ns,{fill:a.color},`cell-${i}`))}),o.jsx(xr,{})]})}):o.jsx("div",{className:"h-full flex items-center justify-center text-slate-400 text-sm",children:"Sin datos"})})]}),o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Estado por Terminal"}),o.jsx("div",{className:"h-48",children:o.jsx(Pi,{width:"100%",height:"100%",children:o.jsxs(ju,{data:n,layout:"vertical",children:[o.jsx(ml,{strokeDasharray:"3 3",horizontal:!1}),o.jsx(Ki,{type:"number",tick:{fontSize:11},allowDecimals:!1}),o.jsx(Gi,{type:"category",dataKey:"terminal",tick:{fontSize:11},width:60}),o.jsx(xr,{}),o.jsx(ki,{wrapperStyle:{fontSize:10}}),o.jsx(Sn,{dataKey:"ASIGNADA",name:"Asignada",stackId:"a",fill:yd.ASIGNADA}),o.jsx(Sn,{dataKey:"RECUPERADA",name:"Recuperada",stackId:"a",fill:yd.RECUPERADA}),o.jsx(Sn,{dataKey:"CERRADA",name:"Cerrada",stackId:"a",fill:yd.CERRADA})]})})})]})]})},lg=e=>e.replace(/[.\-\s]/g,"").toUpperCase(),gl=e=>{const t=lg(e);if(t.length<2)return t;const r=t.slice(0,-1),n=t.slice(-1);return`${r.replace(/\B(?=(\d{3})+(?!\d))/g,".")}-${n}`},mO=e=>{const t=lg(e);if(t.length<8||t.length>9)return!1;const r=t.slice(0,-1),n=t.slice(-1);if(!/^\d+$/.test(r))return!1;let a=0,i=2;for(let c=r.length-1;c>=0;c--)a+=parseInt(r[c])*i,i=i===7?2:i+1;const s=a%11,l=s===0?"0":s===1?"K":String(11-s);return n===l},GSe=({status:e,isOverdue:t})=>{const r="inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded-full";if(t&&e==="ASIGNADA")return o.jsxs("span",{className:`${r} bg-amber-100 text-amber-800`,children:[o.jsx(Vg,{className:"w-3 h-3"}),"ATRASADA"]});const n={ASIGNADA:"bg-blue-100 text-blue-800",RECUPERADA:"bg-emerald-100 text-emerald-800",CERRADA:"bg-slate-100 text-slate-700",CANCELADA:"bg-red-100 text-red-800"};return o.jsx("span",{className:`${r} ${n[e]||"bg-slate-100 text-slate-700"}`,children:e})},XSe=({reason:e})=>{const t={PERDIDA:"bg-red-50 text-red-700",DETERIORO:"bg-orange-50 text-orange-700"};return o.jsx("span",{className:`inline-block px-2 py-0.5 text-xs font-medium rounded ${t[e]||""}`,children:e==="PERDIDA"?"Perdida":"Deterioro"})},YSe=({loans:e,onView:t,onEdit:r,onRecover:n,onCancel:a,onResendEmails:i})=>{const s=T.useMemo(()=>{const l=new Date;return e.map(c=>{const u=new Date(c.issued_at),d=Math.floor((l.getTime()-u.getTime())/(1e3*60*60*24));return{...c,daysPassed:d,isOverdue:c.status==="ASIGNADA"&&d>c.alert_after_days}})},[e]);return e.length===0?o.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:o.jsx("p",{className:"text-slate-500",children:"No se encontraron prestamos con los filtros seleccionados."})}):o.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[o.jsx("thead",{className:"bg-slate-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Trabajador"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"RUT"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Terminal"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Tarjeta"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Motivo"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Entrega"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Dias"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Estado"}),o.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:s.map(l=>{var c,u;return o.jsxs("tr",{className:`hover:bg-slate-50 ${l.isOverdue?"bg-amber-50/50":""}`,children:[o.jsxs("td",{className:"px-4 py-3 whitespace-nowrap",children:[o.jsx("p",{className:"text-sm font-medium text-slate-900",children:l.person_name}),o.jsx("p",{className:"text-xs text-slate-500",children:l.person_cargo||"-"})]}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-700",children:gl(l.person_rut)}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-700",children:l.person_terminal}),o.jsxs("td",{className:"px-4 py-3 whitespace-nowrap",children:[o.jsx("p",{className:"text-sm font-mono text-slate-900",children:((c=l.backup_cards)==null?void 0:c.card_number)||"-"}),o.jsx("p",{className:"text-xs text-slate-500",children:(u=l.backup_cards)==null?void 0:u.inventory_terminal})]}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsx(XSe,{reason:l.reason})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-700",children:new Date(l.issued_at).toLocaleDateString("es-CL")}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsxs("span",{className:`text-sm font-medium ${l.isOverdue?"text-amber-600":"text-slate-700"}`,children:[l.daysPassed,"d"]})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsx(GSe,{status:l.status,isOverdue:l.isOverdue})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[o.jsx("button",{onClick:()=>t(l),className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded",title:"Ver detalle",children:o.jsx(GJ,{className:"w-4 h-4"})}),l.status==="ASIGNADA"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>r(l),className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded",title:"Editar",children:o.jsx(hZ,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>n(l),className:"p-1.5 text-slate-400 hover:text-emerald-600 hover:bg-emerald-50 rounded",title:"Marcar recuperada",children:o.jsx(zR,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>a(l),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Cancelar",children:o.jsx(zi,{className:"w-4 h-4"})})]}),o.jsx("button",{onClick:()=>i(l),className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded",title:"Reenviar correos",children:o.jsx(BR,{className:"w-4 h-4"})})]})})]},l.id)})})]})})})},QSe=async(e,t)=>{let r=le.from("backup_cards").select("*").order("card_number",{ascending:!0});e&&e!=="TODAS"&&(r=r.eq("status",e)),t&&(r=r.eq("inventory_terminal",t));const{data:n,error:a}=await r;if(a)throw a;return n},JSe=async e=>{let t=le.from("backup_cards").select("*").eq("status","LIBRE").order("card_number");e&&(t=t.eq("inventory_terminal",e));const{data:r,error:n}=await t;if(n)throw n;return r},ZSe=async e=>{const{data:t,error:r}=await le.from("backup_cards").insert({card_number:e.card_number,inventory_terminal:e.inventory_terminal,notes:e.notes||null,status:"LIBRE"}).select().single();if(r)throw r;return t},eEe=async e=>{const{error:t}=await le.from("backup_cards").update({status:"INACTIVA"}).eq("id",e);if(t)throw t},tEe=async e=>{let t=le.from("backup_loans").select("*, backup_cards(*)").order("issued_at",{ascending:!1});e&&(e.search&&(t=t.or(`person_rut.ilike.%${e.search}%,person_name.ilike.%${e.search}%`)),e.terminal&&(t=t.eq("person_terminal",e.terminal)),e.status&&e.status!=="TODAS"&&(t=t.eq("status",e.status)),e.reason&&e.reason!=="TODAS"&&(t=t.eq("reason",e.reason)),e.dateFrom&&(t=t.gte("issued_at",e.dateFrom)),e.dateTo&&(t=t.lte("issued_at",e.dateTo+"T23:59:59")));const{data:r,error:n}=await t;if(n)throw n;return r},rEe=async e=>{const{data:t,error:r}=await le.from("backup_loans").insert({card_id:e.card_id,person_rut:e.person_rut,person_name:e.person_name,person_cargo:e.person_cargo||null,person_terminal:e.person_terminal,person_turno:e.person_turno||null,person_horario:e.person_horario||null,person_contacto:e.person_contacto||null,boss_email:e.worker_email||null,reason:e.reason,requested_at:e.requested_at,discount_amount:e.discount_amount,discount_applied:e.discount_applied,created_by_supervisor:e.created_by_supervisor,status:"ASIGNADA"}).select("*, backup_cards(*)").single();if(r)throw r;const{error:n}=await le.from("backup_cards").update({status:"ASIGNADA"}).eq("id",e.card_id);if(n)throw n;return t},nEe=async(e,t,r)=>{const{data:n,error:a}=await le.from("backup_loans").select("card_id").eq("id",e).single();if(a)throw a;const{error:i}=await le.from("backup_loans").update({status:"CERRADA",recovered_at:t,closed_at:new Date().toISOString()}).eq("id",e);if(i)throw i;const{error:s}=await le.from("backup_cards").update({status:"LIBRE"}).eq("id",n.card_id);if(s)throw s},aEe=async(e,t)=>{const{data:r,error:n}=await le.from("backup_loans").select("card_id").eq("id",e).single();if(n)throw n;const{error:a}=await le.from("backup_loans").update({status:"CANCELADA",cancel_reason:t,closed_at:new Date().toISOString()}).eq("id",e);if(a)throw a;const{error:i}=await le.from("backup_cards").update({status:"LIBRE"}).eq("id",r.card_id);if(i)throw i},iEe=async e=>{const{error:t}=await le.from("backup_loans").update({emails_sent_at:new Date().toISOString()}).eq("id",e);if(t)throw t},C8=async()=>{const{data:e,error:t}=await le.from("backup_email_settings").select("*").order("scope_type",{ascending:!1});if(t)throw t;return e},sEe=async e=>{const{data:t,error:r}=await le.from("backup_email_settings").upsert(e,{onConflict:"scope_type,scope_code"}).select().single();if(r)throw r;return t},oEe=async()=>{const{data:e,error:t}=await le.from("backup_cards").select("inventory_terminal, status");if(t)throw t;const r={"El Roble":0,"La Reina":0,"Maria Angelica":0};e==null||e.forEach(p=>{if(p.status==="LIBRE"){const v=p.inventory_terminal;Ys.includes(v)&&r[v]++}});const{data:n,error:a}=await le.from("backup_loans").select("id, issued_at, alert_after_days, discount_amount, discount_applied").eq("status","ASIGNADA");if(a)throw a;const i=new Date;let s=0,l=0;n==null||n.forEach(p=>{const v=new Date(p.issued_at);Math.floor((i.getTime()-v.getTime())/(1e3*60*60*24))>p.alert_after_days&&s++,p.discount_applied&&(l+=p.discount_amount)});const c=new Date;c.setDate(c.getDate()-30);const{data:u,error:d}=await le.from("backup_loans").select("issued_at, recovered_at, discount_amount, discount_applied").in("status",["RECUPERADA","CERRADA"]).gte("closed_at",c.toISOString());if(d)throw d;let f=0,h=0;return u==null||u.forEach(p=>{if(p.recovered_at){const v=new Date(p.issued_at),g=new Date(p.recovered_at),x=Math.floor((g.getTime()-v.getTime())/(1e3*60*60*24));f+=x,h++}p.discount_applied&&(l+=p.discount_amount)}),{availableByTerminal:r,activeLoans:(n==null?void 0:n.length)||0,overdueLoans:s,avgReturnDays:h>0?Math.round(f/h):0,totalDiscounts:l}},Qr={user:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="9" cy="5" r="3.5" stroke="#64748b" stroke-width="1.5"/>
        <path d="M2 16C2 12.686 5.13401 10 9 10C12.866 10 16 12.686 16 16" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,id:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="1.5" y="3.5" width="15" height="11" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <circle cx="6" cy="8" r="1.5" stroke="#64748b" stroke-width="1"/>
        <path d="M4 12C4 10.8954 4.89543 10 6 10C7.10457 10 8 10.8954 8 12" stroke="#64748b" stroke-width="1"/>
        <path d="M10.5 7.5H14.5M10.5 10H13" stroke="#64748b" stroke-width="1.2" stroke-linecap="round"/>
    </svg>`,building:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M2 16V3.5C2 3.22386 2.22386 3 2.5 3H9.5C9.77614 3 10 3.22386 10 3.5V16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M10 7H14.5C14.7761 7 15 7.22386 15 7.5V16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M5 6H7M5 9H7M5 12H7M12 10H13M12 13H13" stroke="#64748b" stroke-width="1.2" stroke-linecap="round"/>
        <path d="M1 16H17" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,calendar:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="2" y="3.5" width="14" height="12" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <path d="M2 7H16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M5.5 1.5V4.5M12.5 1.5V4.5" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,card:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="1" y="3" width="16" height="12" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <path d="M1 7H17" stroke="#64748b" stroke-width="1.5"/>
        <path d="M4 11H8" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,warning:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M9 6V10M9 12.5V13" stroke="#f59e0b" stroke-width="1.5" stroke-linecap="round"/>
        <path d="M3 15L9 3L15 15H3Z" stroke="#f59e0b" stroke-width="1.5" stroke-linejoin="round"/>
    </svg>`,money:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="9" cy="9" r="7" stroke="#64748b" stroke-width="1.5"/>
        <path d="M9 5V13M11 7H7.5C6.67157 7 6 7.67157 6 8.5C6 9.32843 6.67157 10 7.5 10H10.5C11.3284 10 12 10.6716 12 11.5C12 12.3284 11.3284 13 10.5 13H6" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,supervisor:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="9" cy="6" r="3" stroke="#64748b" stroke-width="1.5"/>
        <path d="M3 16C3 13.2386 5.68629 11 9 11C12.3137 11 15 13.2386 15 16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M9 3L10 1.5L11 3" stroke="#f59e0b" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`},Jr=(e,t,r,n=!1)=>`
    <tr>
        <td style="padding: 14px 16px; border-bottom: 1px solid #e2e8f0; width: 40%; vertical-align: middle;">
            <table role="presentation" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="padding-right: 12px; vertical-align: middle;">${e}</td>
                    <td style="font-size: 11px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">${t}</td>
                </tr>
            </table>
        </td>
        <td style="padding: 14px 16px; border-bottom: 1px solid #e2e8f0; font-size: 14px; font-weight: ${n?"700":"500"}; color: ${n?"#0f172a":"#334155"}; text-align: right;">${r}</td>
    </tr>
`,lEe=e=>new Date(e).toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),cEe=async(e,t,r,n)=>{var f;const a=((f=e.backup_cards)==null?void 0:f.card_number)||"N/A",i=e.person_terminal,s=e.reason==="PERDIDA"?"Prdida de Credencial":"Deterioro de Credencial",l=lEe(e.issued_at),c=n?[n]:void 0,u=e.reason==="PERDIDA"?"#ef4444":"#f59e0b",d=e.reason==="PERDIDA"?"#fef2f2":"#fffbeb";try{const h=`Solicitud Nueva Credencial - ${e.person_name}`,p=`
            <!-- Status Banner -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td style="background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 12px; padding: 24px; text-align: center;">
                        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                            <tr>
                                <td align="center" style="padding-bottom: 8px;">
                                    <svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="28" cy="28" r="26" fill="#dbeafe" stroke="#3b82f6" stroke-width="3"/>
                                        <rect x="18" y="20" width="20" height="16" rx="2" stroke="#2563eb" stroke-width="2.5"/>
                                        <circle cx="24" cy="27" r="3" stroke="#2563eb" stroke-width="2"/>
                                        <path d="M20 33C20 31 21.5 29 24 29C26.5 29 28 31 28 33" stroke="#2563eb" stroke-width="2"/>
                                        <path d="M31 25H35M31 29H34" stroke="#2563eb" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                </td>
                            </tr>
                            <tr>
                                <td align="center">
                                    <span style="font-size: 11px; font-weight: 700; color: #1e40af; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 4px;">Accin Requerida</span>
                                    <span style="font-size: 20px; font-weight: 800; color: #1d4ed8; letter-spacing: -0.5px;">SOLICITUD DE NUEVA CREDENCIAL</span>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
            
            <!-- Reason Badge -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td align="center">
                        <span style="display: inline-block; padding: 8px 20px; background: ${d}; border: 1px solid ${u}; border-radius: 100px; color: ${u}; font-size: 12px; font-weight: 700; letter-spacing: 0.5px; text-transform: uppercase;">${s}</span>
                    </td>
                </tr>
            </table>
            
            <!-- Worker Data Section -->
            <p style="margin: 0 0 12px 0; font-size: 12px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">Datos del Trabajador</p>
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate; margin-bottom: 24px;">
                ${Jr(Qr.user,"Nombre",e.person_name,!0)}
                ${Jr(Qr.id,"RUT",e.person_rut)}
                ${Jr(Qr.building,"Terminal",i)}
                ${Jr(Qr.id,"Cargo",e.person_cargo||"No especificado")}
            </table>
            
            <!-- Backup Info Section -->
            <p style="margin: 0 0 12px 0; font-size: 12px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">Informacin del Respaldo</p>
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate; margin-bottom: 24px;">
                ${Jr(Qr.card,"Tarjeta Asignada",`N ${a}`,!0)}
                ${Jr(Qr.calendar,"Fecha Solicitud",e.requested_at)}
                ${Jr(Qr.supervisor,"Supervisor Entrega",e.created_by_supervisor)}
            </table>
            
            <!-- Action Message -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 16px;">
                <tr>
                    <td style="padding: 20px; background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 12px;">
                        <p style="margin: 0; font-size: 14px; color: #166534; font-weight: 600; text-align: center;">
                             Por favor proceder con la emisin de una nueva credencial para este trabajador.
                        </p>
                    </td>
                </tr>
            </table>
            
            ${n?`
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="padding: 12px 16px; background: #fef3c7; border: 1px solid #fde68a; border-radius: 8px;">
                        <p style="margin: 0; font-size: 13px; color: #92400e; font-weight: 500;">
                             <strong>Documento adjunto:</strong> Autorizacin de descuento firmada
                        </p>
                    </td>
                </tr>
            </table>
            `:""}
        `.trim();await Ui.sendEmail({audience:"manual",manualRecipients:[t],cc:r?r.split(",").map(x=>x.trim()).filter(Boolean):void 0,subject:h,body:p,attachments:c,module:"credenciales"});const v=`Notificacin Credencial Respaldo - ${e.person_name}`,g=`
            <!-- Status Banner -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td style="background: #fef3c7; border: 1px solid #fde68a; border-radius: 12px; padding: 24px; text-align: center;">
                        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                            <tr>
                                <td align="center" style="padding-bottom: 8px;">
                                    <svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="28" cy="28" r="26" fill="#fef9c3" stroke="#eab308" stroke-width="3"/>
                                        <path d="M28 18V32M28 36V38" stroke="#ca8a04" stroke-width="4" stroke-linecap="round"/>
                                    </svg>
                                </td>
                            </tr>
                            <tr>
                                <td align="center">
                                    <span style="font-size: 11px; font-weight: 700; color: #92400e; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 4px;">Notificacin Importante</span>
                                    <span style="font-size: 18px; font-weight: 800; color: #b45309; letter-spacing: -0.5px;">CREDENCIAL DE RESPALDO ASIGNADA</span>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
            
            <!-- Intro Message -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td style="padding: 16px 20px; background: #f8fafc; border-radius: 12px;">
                        <p style="margin: 0; font-size: 14px; color: #475569; line-height: 1.6;">
                            Se le informa que el trabajador a su cargo <strong style="color: #0f172a;">${e.person_name}</strong> utilizar una tarjeta de respaldo mientras se gestiona una nueva credencial.
                        </p>
                    </td>
                </tr>
            </table>
            
            <!-- Worker Data Section -->
            <p style="margin: 0 0 12px 0; font-size: 12px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">Datos del Trabajador</p>
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate; margin-bottom: 24px;">
                ${Jr(Qr.user,"Nombre",e.person_name,!0)}
                ${Jr(Qr.id,"RUT",e.person_rut)}
                ${Jr(Qr.building,"Terminal",i)}
                ${Jr(Qr.id,"Cargo",e.person_cargo||"No especificado")}
            </table>
            
            <!-- Backup Info Section -->
            <p style="margin: 0 0 12px 0; font-size: 12px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">Informacin del Respaldo</p>
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate; margin-bottom: 24px;">
                ${Jr(Qr.card,"Tarjeta Asignada",`N ${a}`,!0)}
                ${Jr(Qr.warning,"Motivo",s)}
                ${Jr(Qr.calendar,"Fecha de Entrega",l)}
                ${e.discount_applied?Jr(Qr.money,"Descuento Aplicado",`$${e.discount_amount.toLocaleString("es-CL")} (1 cuota)`,!0):""}
            </table>
            
            <!-- Important Notice -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 16px;">
                <tr>
                    <td style="padding: 20px; background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 12px;">
                        <p style="margin: 0; font-size: 14px; color: #1e40af; font-weight: 500; text-align: center;">
                             Una vez que el trabajador reciba su nueva credencial, deber devolver la tarjeta de respaldo.
                        </p>
                    </td>
                </tr>
            </table>
            
            ${n?`
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td style="padding: 12px 16px; background: #fef3c7; border: 1px solid #fde68a; border-radius: 8px;">
                        <p style="margin: 0; font-size: 13px; color: #92400e; font-weight: 500;">
                             <strong>Documento adjunto:</strong> Autorizacin de descuento firmada
                        </p>
                    </td>
                </tr>
            </table>
            `:""}
            
            <!-- Signature -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="padding-top: 16px; border-top: 1px solid #e2e8f0;">
                        <p style="margin: 0; font-size: 14px; color: #64748b;">Saludos cordiales,</p>
                        <p style="margin: 4px 0 0 0; font-size: 14px; font-weight: 700; color: #0f172a;">Gestin de Personal</p>
                    </td>
                </tr>
            </table>
        `.trim();return e.boss_email&&await Ui.sendEmail({audience:"manual",manualRecipients:[e.boss_email],subject:v,body:g,module:"credenciales"}),await iEe(e.id),{success:!0}}catch(h){return console.error("Error sending backup emails:",h),{success:!1,error:h instanceof Error?h.message:"Error desconocido al enviar correos"}}},uEe=({isOpen:e,onClose:t,onSubmit:r,isLoading:n,supervisorName:a})=>{const i=T.useRef(null),[s,l]=T.useState({person_rut:"",person_name:"",person_cargo:"",person_terminal:"EL_ROBLE",person_turno:"",person_horario:"",person_contacto:"",worker_email:"",reason:"PERDIDA",requested_at:new Date().toISOString().split("T")[0],card_id:"",discount_applied:!0,discount_amount:5e3,send_emails:!0,created_by_supervisor:a}),[c,u]=T.useState(""),[d,f]=T.useState(""),{data:h=[]}=Ge({queryKey:["backup-cards-available",c],queryFn:()=>JSe(c||void 0),enabled:e}),p=async()=>{const x=lg(s.person_rut);if(!x)return;if(!mO(x)){f("RUT invalido");return}f("");const{data:b}=await le.from("staff").select("nombre, cargo, terminal_code, turno, horario, contacto").eq("rut",x).single();l(b?m=>({...m,person_rut:gl(x),person_name:b.nombre,person_cargo:b.cargo||"",person_terminal:b.terminal_code||"EL_ROBLE",person_turno:b.turno||"",person_horario:b.horario||"",person_contacto:b.contacto||""}):m=>({...m,person_rut:gl(x)}))},v=async x=>{if(x.preventDefault(),!mO(lg(s.person_rut))){f("RUT invalido");return}await r(s,g)},g=()=>{const x=window.open("","_blank");if(x){const b=new Date().toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"});x.document.write(`
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autorizacin de Descuento - ${s.person_name||"RBU"}</title>
    <style>
        @page { size: letter; margin: 15mm 20mm; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: Arial, Helvetica, sans-serif;
            background-color: white;
            padding: 0;
            color: #000;
            font-size: 12px;
            line-height: 1.4;
        }

        .page {
            width: 100%;
            max-width: 210mm;
            margin: 0 auto;
        }

        /* Header Styles */
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 5px;
            padding-bottom: 5px;
            border-bottom: 3px solid black;
        }

        /* Logo RBU con camion CSS */
        .logo-container {
            position: relative;
            width: 150px;
            height: 50px;
        }
        .truck-body {
            border: 4px solid #003399;
            border-radius: 8px;
            width: 120px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            top: 0;
            left: 0;
            background: white;
            z-index: 2;
        }
        .truck-cab {
            position: absolute;
            top: 5px;
            right: 15px;
            width: 25px;
            height: 35px;
            border-top: 4px solid #003399;
            border-right: 4px solid #003399;
            border-radius: 0 5px 0 0;
        }
        .logo-text {
            color: #cc0000;
            font-weight: 900;
            font-size: 32px;
            font-family: 'Arial Black', Arial, sans-serif;
            letter-spacing: -2px;
        }
        .wheel {
            width: 12px;
            height: 12px;
            border: 4px solid #003399;
            border-radius: 50%;
            position: absolute;
            bottom: -5px;
            background: white;
            z-index: 3;
        }
        .w1 { left: 20px; }
        .w2 { left: 90px; }

        .rbu-santiago {
            color: #cc0000;
            font-weight: bold;
            font-size: 14px;
        }

        .title-bar {
            background-color: black;
            color: white;
            text-align: center;
            padding: 8px 0;
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 25px;
        }

        /* Form Fields */
        .field-row {
            display: flex;
            margin-bottom: 20px;
            align-items: flex-end;
        }
        
        .field-label {
            font-weight: bold;
            font-size: 11px;
            white-space: nowrap;
            margin-right: 10px;
        }

        .field-line {
            border-bottom: 2px solid black;
            flex-grow: 1;
            min-height: 18px;
            padding-left: 5px;
            font-size: 12px;
        }

        .rut-row {
            display: flex;
            justify-content: space-between;
        }
        
        .rut-container {
            display: flex;
            width: 38%;
            align-items: flex-end;
        }
        
        .cargo-container {
            display: flex;
            width: 55%;
            align-items: flex-end;
        }

        /* Authorization Text */
        .auth-text {
            text-align: center;
            font-weight: bold;
            margin: 25px 0;
            font-size: 13px;
            letter-spacing: 0.5px;
        }

        .amount-row {
            display: flex;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 12px;
            gap: 20px;
        }

        .concept-row {
            margin-left: 30px;
            margin-bottom: 5px;
            font-size: 13px;
        }
        .desc-small {
            font-size: 10px;
            margin-left: 30px;
            margin-bottom: 18px;
            color: #555;
        }

        /* Right aligned details */
        .details-right {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            margin-right: 20px;
        }
        
        .detail-item {
            display: flex;
            align-items: flex-end;
            margin-bottom: 8px;
            width: 280px;
            justify-content: flex-end;
        }
        
        .detail-item label {
            font-size: 11px;
            margin-right: 10px;
        }
        
        .detail-value {
            border-bottom: 2px solid black;
            width: 110px;
            text-align: right;
            font-weight: bold;
            font-size: 14px;
            padding-bottom: 2px;
            padding-right: 5px;
        }

        /* Signature & Date */
        .sig-date-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-top: 30px;
            margin-bottom: 10px;
            font-style: italic;
            font-size: 11px;
            font-weight: bold;
        }
        .date-val {
            font-size: 12px;
            font-style: normal;
        }

        .signature-line {
            border-bottom: 2px solid black;
            width: 200px;
            margin-top: 40px;
        }

        .legal-text {
            font-size: 9px;
            text-align: justify;
            line-height: 1.3;
            margin: 15px 0;
            padding-top: 10px;
            border-top: 1px solid #ccc;
        }

        /* Observations Box */
        .obs-header {
            background-color: #333;
            color: white;
            font-weight: bold;
            text-align: center;
            font-size: 11px;
            padding: 4px;
            border: 2px solid black;
            border-bottom: none;
        }
        .obs-box {
            border: 2px solid black;
            height: 50px;
            margin-bottom: 30px;
        }

        /* Footer */
        .footer-line {
            border-top: 3px solid black;
            padding-top: 8px;
            text-align: center;
            font-size: 10px;
            font-weight: bold;
            margin-top: 20px;
        }
        .company-name {
            text-align: right;
            font-weight: bold;
            margin-top: 15px;
            font-size: 11px;
            border-bottom: 2px solid black;
            display: inline-block;
            float: right;
            padding-bottom: 2px;
            text-decoration: underline;
        }

        /* Bottom Detail Section */
        .bottom-detail-title {
            text-align: center;
            font-style: italic;
            font-weight: bold;
            font-size: 14px;
            margin-top: 30px;
            margin-bottom: 10px;
            clear: both;
        }
        
        .bottom-table {
            width: 100%;
            font-size: 11px;
            overflow: hidden;
        }
        .bt-left { 
            float: left; 
            font-weight: bold;
        }
        .bt-right { 
            float: right; 
            text-align: center;
        }
        .costo-header {
            font-weight: bold;
            font-size: 10px;
            margin-bottom: 3px;
            color: #555;
        }

        @media print {
            body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
        }
    </style>
</head>
<body>

    <div class="page">
        <div class="header-top">
            <div class="logo-container">
                <div class="truck-cab"></div>
                <div class="truck-body">
                    <span class="logo-text">RBU</span>
                </div>
                <div class="wheel w1"></div>
                <div class="wheel w2"></div>
            </div>
            <div class="rbu-santiago">RBU Santiago.</div>
        </div>

        <div class="title-bar">
            Autorizacin de Descuento
        </div>

        <div class="field-row">
            <span class="field-label">NOMBRE DEL<br>TRABAJADOR:</span>
            <div class="field-line">${s.person_name||""}</div>
        </div>

        <div class="field-row rut-row">
            <div class="rut-container">
                <span class="field-label">RUT :</span>
                <div class="field-line">${s.person_rut||""}</div>
            </div>
            <div class="cargo-container">
                <span class="field-label">Cargo desempeado:</span>
                <div class="field-line">${s.person_cargo||""}</div>
            </div>
        </div>

        <div class="auth-text">
            EL TRABAJADOR INDIVIDUALIZADO AUTORIZA EN ESTE ACTO
        </div>

        <div class="amount-row">
            <span>EL DESCUENTO DE:</span>
            <span>$</span>
            <span>${s.discount_amount.toLocaleString("es-CL")}</span>
        </div>

        <div class="concept-row">
            <strong>POR CONCEPTO DE:</strong> &nbsp; ${s.reason==="PERDIDA"?"Prdida Credencial":"Deterioro Credencial"}
        </div>
        <div class="desc-small">Descripcin : Tarjeta de acceso vehicular</div>

        <div class="details-right">
            <div class="detail-item">
                <label>A descontar en:</label>
                <div class="detail-value">1 Cuota</div>
            </div>
            <div class="detail-item">
                <label>A contar de:</label>
                <div class="detail-value" style="font-style: italic; font-size: 12px;">Mes en curso</div>
            </div>
            <div class="detail-item">
                <label>Valor de cada cuota:</label>
                <div class="detail-value">$ ${s.discount_amount.toLocaleString("es-CL")}</div>
            </div>
        </div>

        <div class="sig-date-row">
            <div>
                <span>Firma y Rut del trabajador</span>
                <div class="signature-line"></div>
            </div>
            <span>Fecha : &nbsp; <span class="date-val"><strong>${b}</strong></span></span>
        </div>

        <div class="legal-text">
            El trabajador, mediante el presente instrumento, otorga mandato expreso a REDBUS URBANO S.A. para que descuente de sus remuneraciones en las cuotas y plazos indicados la suma indicada en este acto. Asimismo faculta expresamente a REDBUS URBANO S.A., para que en el evento de que por cualquier causa se pusiese trmino al contrato de trabajo, descuente el total del saldo adeudado de las indemnizaciones a que tenga derecho y/o otros emolumentos que pudiere tener derecho al trmino de la relacin laboral.
        </div>

        <div class="obs-header">Observaciones</div>
        <div class="obs-box"></div>

        <div class="footer-line">
            Av. El Salto 4651, Huechuraba, Santiago.<br>
            Fono: (56 2) 4881800 &nbsp;&nbsp; Fax: (56 2) 4881818
        </div>

        <div style="overflow: hidden; margin-top: 15px;">
            <div class="company-name">REDBUS URBANO S.A.</div>
        </div>

        <div class="bottom-detail-title">Detalle Descuento</div>
        
        <div class="bottom-table">
            <span class="bt-left">${s.reason==="PERDIDA"?"Prdida Credencial":"Deterioro Credencial"}</span>
            <div class="bt-right">
                <div class="costo-header">COSTO</div>
                <div><strong>$${s.discount_amount.toLocaleString("es-CL")}</strong></div>
            </div>
        </div>

    </div>

</body>
</html>
            `),x.document.close(),setTimeout(()=>x.print(),300)}};return T.useEffect(()=>{e&&(l({person_rut:"",person_name:"",person_cargo:"",person_terminal:"EL_ROBLE",person_turno:"",person_horario:"",person_contacto:"",worker_email:"",reason:"PERDIDA",requested_at:new Date().toISOString().split("T")[0],card_id:"",discount_applied:!0,discount_amount:5e3,send_emails:!0,created_by_supervisor:a}),f(""),u(""))},[e,a]),e?o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:t}),o.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between z-10",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Nuevo Prestamo de Respaldo"}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(zi,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("form",{onSubmit:v,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Datos del Trabajador"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"RUT"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",className:`input pr-10 ${d?"border-red-500":""}`,value:s.person_rut,onChange:x=>l(b=>({...b,person_rut:x.target.value})),onBlur:p,placeholder:"12.345.678-9",required:!0}),o.jsx(oZ,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"})]}),d&&o.jsx("p",{className:"text-xs text-red-500 mt-1",children:d})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nombre"}),o.jsx("input",{type:"text",className:"input",value:s.person_name,onChange:x=>l(b=>({...b,person_name:x.target.value})),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Cargo"}),o.jsx("input",{type:"text",className:"input",value:s.person_cargo,onChange:x=>l(b=>({...b,person_cargo:x.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Terminal"}),o.jsx("select",{className:"input",value:s.person_terminal,onChange:x=>l(b=>({...b,person_terminal:x.target.value})),required:!0,children:Cn.map(x=>o.jsx("option",{value:x.value,children:x.label},x.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Turno"}),o.jsx("input",{type:"text",className:"input",value:s.person_turno,onChange:x=>l(b=>({...b,person_turno:x.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Horario"}),o.jsx("input",{type:"text",className:"input",value:s.person_horario,onChange:x=>l(b=>({...b,person_horario:x.target.value})),placeholder:"08:00-18:00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contacto"}),o.jsx("input",{type:"text",className:"input",value:s.person_contacto,onChange:x=>l(b=>({...b,person_contacto:x.target.value}))})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:["Correo ",o.jsx("span",{className:"text-slate-400 font-normal",children:"(opcional)"})]}),o.jsx("input",{type:"email",className:"input",value:s.worker_email,onChange:x=>l(b=>({...b,worker_email:x.target.value})),placeholder:"Para notificar cuando llegue su credencial"})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Solicitud"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Motivo"}),o.jsx("select",{className:"input",value:s.reason,onChange:x=>l(b=>({...b,reason:x.target.value})),required:!0,children:qR.map(x=>o.jsx("option",{value:x.value,children:x.label},x.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Fecha Solicitud"}),o.jsx("input",{type:"date",className:"input",value:s.requested_at,onChange:x=>l(b=>({...b,requested_at:x.target.value})),required:!0})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Tarjeta de Respaldo"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Terminal de Inventario"}),o.jsxs("select",{className:"input",value:c,onChange:x=>{u(x.target.value),l(b=>({...b,card_id:""}))},children:[o.jsx("option",{value:"",children:"Todos"}),Ys.map(x=>o.jsx("option",{value:x,children:x},x))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Tarjeta Disponible"}),o.jsxs("select",{className:"input",value:s.card_id,onChange:x=>l(b=>({...b,card_id:x.target.value})),required:!0,children:[o.jsx("option",{value:"",children:"Seleccionar tarjeta..."}),h.map(x=>o.jsxs("option",{value:x.id,children:[x.card_number," (",x.inventory_terminal,")"]},x.id))]}),h.length===0&&o.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"No hay tarjetas disponibles"})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Descuento"}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:s.discount_applied,onChange:x=>l(b=>({...b,discount_applied:x.target.checked})),className:"w-4 h-4 rounded border-slate-300"}),o.jsxs("span",{className:"text-sm text-slate-700",children:["Aplicar descuento de $",s.discount_amount.toLocaleString("es-CL")," (1 cuota)"]})]}),s.discount_applied&&o.jsxs("span",{className:"text-xs text-slate-500 italic flex items-center gap-1",children:[o.jsx(rZ,{className:"w-3 h-3"}),"Se imprimir automticamente al crear"]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Notificaciones"}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:s.send_emails,onChange:x=>l(b=>({...b,send_emails:x.target.checked})),className:"w-4 h-4 rounded border-slate-300"}),o.jsx("span",{className:"text-sm text-slate-700",children:"Enviar correos al crear"})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[o.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n||!s.card_id,children:n?"Guardando...":"Crear Prestamo"})]})]}),o.jsx("div",{ref:i,className:"hidden"})]})})]}):null},dEe=({isOpen:e,loan:t,onClose:r})=>{var i,s;if(!e||!t)return null;const n=l=>l?new Date(l).toLocaleDateString("es-CL",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",a=Math.floor((new Date().getTime()-new Date(t.issued_at).getTime())/(1e3*60*60*24));return o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:r}),o.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between z-10",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Detalle del Prestamo"}),o.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(zi,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[o.jsx(_Z,{className:"w-4 h-4"}),"Trabajador"]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Nombre:"}),o.jsx("span",{className:"text-sm font-medium text-slate-900",children:t.person_name})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"RUT:"}),o.jsx("span",{className:"text-sm font-medium text-slate-900",children:gl(t.person_rut)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Cargo:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.person_cargo||"-"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Terminal:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.person_terminal})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Turno:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.person_turno||"-"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Horario:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.person_horario||"-"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Contacto:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.person_contacto||"-"})]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[o.jsx(Af,{className:"w-4 h-4"}),"Tarjeta de Respaldo"]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Numero:"}),o.jsx("span",{className:"text-sm font-mono font-medium text-slate-900",children:((i=t.backup_cards)==null?void 0:i.card_number)||"-"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Terminal Inventario:"}),o.jsx("span",{className:"text-sm text-slate-900",children:((s=t.backup_cards)==null?void 0:s.inventory_terminal)||"-"})]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[o.jsx(FJ,{className:"w-4 h-4"}),"Solicitud"]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Motivo:"}),o.jsx("span",{className:`text-sm font-medium px-2 py-0.5 rounded ${t.reason==="PERDIDA"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:t.reason==="PERDIDA"?"Perdida":"Deterioro"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Fecha Solicitud:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.requested_at})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Fecha Entrega:"}),o.jsx("span",{className:"text-sm text-slate-900",children:n(t.issued_at)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Dias Transcurridos:"}),o.jsxs("span",{className:`text-sm font-medium ${a>t.alert_after_days?"text-amber-600":"text-slate-900"}`,children:[a," dias"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Estado:"}),o.jsx("span",{className:`text-sm font-medium px-2 py-0.5 rounded ${t.status==="ASIGNADA"?"bg-blue-100 text-blue-700":t.status==="CERRADA"?"bg-slate-100 text-slate-700":t.status==="CANCELADA"?"bg-red-100 text-red-700":"bg-emerald-100 text-emerald-700"}`,children:t.status})]}),t.recovered_at&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Recuperada:"}),o.jsx("span",{className:"text-sm text-slate-900",children:n(t.recovered_at)})]}),t.cancel_reason&&o.jsxs("div",{className:"pt-2 border-t border-slate-200",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Motivo Cancelacion:"}),o.jsx("p",{className:"text-sm text-slate-900 mt-1",children:t.cancel_reason})]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[o.jsx(FR,{className:"w-4 h-4"}),"Descuento"]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Aplicado:"}),o.jsx("span",{className:`text-sm font-medium ${t.discount_applied?"text-emerald-600":"text-slate-500"}`,children:t.discount_applied?"Si":"No"})]}),t.discount_applied&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Monto:"}),o.jsxs("span",{className:"text-sm font-medium text-slate-900",children:["$",t.discount_amount.toLocaleString("es-CL")]})]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[o.jsx($R,{className:"w-4 h-4"}),"Auditoria"]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Creado por:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.created_by_supervisor})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Creado:"}),o.jsx("span",{className:"text-sm text-slate-900",children:n(t.created_at)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Correo Trabajador:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.boss_email||"-"})]}),t.emails_sent_at&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Emails Enviados:"}),o.jsx("span",{className:"text-sm text-slate-900",children:n(t.emails_sent_at)})]})]})]})]}),o.jsx("div",{className:"border-t border-slate-200 px-6 py-4 flex justify-end",children:o.jsx("button",{onClick:r,className:"btn btn-secondary",children:"Cerrar"})})]})})]})},fEe=({isOpen:e,loan:t,onClose:r,onSubmit:n,isLoading:a})=>{var d;const[i,s]=T.useState(new Date().toISOString().split("T")[0]),[l,c]=T.useState(""),u=async f=>{f.preventDefault(),t&&(await n(t.id,i,l),c(""))};return!e||!t?null:o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:r}),o.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-md",children:[o.jsxs("div",{className:"border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(zR,{className:"w-5 h-5 text-emerald-600"}),o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Marcar como Recuperada"})]}),o.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(zi,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("form",{onSubmit:u,className:"p-6 space-y-4",children:[o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[o.jsxs("p",{className:"text-sm text-slate-600",children:[o.jsx("span",{className:"font-medium",children:"Trabajador:"})," ",t.person_name]}),o.jsxs("p",{className:"text-sm text-slate-600",children:[o.jsx("span",{className:"font-medium",children:"RUT:"})," ",gl(t.person_rut)]}),o.jsxs("p",{className:"text-sm text-slate-600",children:[o.jsx("span",{className:"font-medium",children:"Tarjeta:"})," ",(d=t.backup_cards)==null?void 0:d.card_number]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Fecha de Devolucion"}),o.jsx("input",{type:"date",className:"input",value:i,onChange:f=>s(f.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Observacion (opcional)"}),o.jsx("textarea",{className:"input min-h-[80px]",value:l,onChange:f=>c(f.target.value),placeholder:"Notas adicionales..."})]}),o.jsx("p",{className:"text-sm text-slate-500",children:"Al confirmar, la tarjeta sera liberada y quedara disponible para nuevos prestamos."}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:a,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary bg-emerald-600 hover:bg-emerald-700",disabled:a,children:a?"Procesando...":"Confirmar Devolucion"})]})]})]})})]})},hEe=({isOpen:e,loan:t,onClose:r,onSubmit:n,isLoading:a})=>{var c;const[i,s]=T.useState(""),l=async u=>{u.preventDefault(),!(!t||!i.trim())&&(await n(t.id,i.trim()),s(""))};return!e||!t?null:o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:r}),o.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-md",children:[o.jsxs("div",{className:"border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Vg,{className:"w-5 h-5 text-red-600"}),o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Cancelar Prestamo"})]}),o.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(zi,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("form",{onSubmit:l,className:"p-6 space-y-4",children:[o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[o.jsx("p",{className:"text-sm text-red-800 font-medium mb-2",children:"Esta accion no se puede deshacer."}),o.jsxs("p",{className:"text-sm text-red-700",children:["El prestamo a ",t.person_name," (tarjeta ",(c=t.backup_cards)==null?void 0:c.card_number,") sera cancelado y la tarjeta sera liberada."]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Motivo de cancelacion (obligatorio)"}),o.jsx("textarea",{className:"input min-h-[100px]",value:i,onChange:u=>s(u.target.value),placeholder:"Explique por que se cancela este prestamo...",required:!0})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:a,children:"Volver"}),o.jsx("button",{type:"submit",className:"btn btn-primary bg-red-600 hover:bg-red-700",disabled:a||!i.trim(),children:a?"Cancelando...":"Confirmar Cancelacion"})]})]})]})})]})},pEe=({isOpen:e,onClose:t})=>{const r=$e(),[n,a]=T.useState(!1),[i,s]=T.useState(""),[l,c]=T.useState(""),[u,d]=T.useState({card_number:"",inventory_terminal:"El Roble",notes:""}),{data:f=[],isLoading:h}=Ge({queryKey:["backup-cards",i,l],queryFn:()=>QSe(l||void 0,i||void 0),enabled:e}),p=Be({mutationFn:ZSe,onSuccess:()=>{r.invalidateQueries({queryKey:["backup-cards"]}),a(!1),d({card_number:"",inventory_terminal:"El Roble",notes:""})}}),v=Be({mutationFn:eEe,onSuccess:()=>{r.invalidateQueries({queryKey:["backup-cards"]})}}),g=m=>{m.preventDefault(),p.mutate(u)},x=m=>{confirm(`Desactivar tarjeta ${m.card_number}?`)&&v.mutate(m.id)};if(!e)return null;const b={LIBRE:"bg-emerald-100 text-emerald-800",ASIGNADA:"bg-blue-100 text-blue-800",INACTIVA:"bg-slate-100 text-slate-600"};return o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:t}),o.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[85vh] flex flex-col",children:[o.jsxs("div",{className:"border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Af,{className:"w-5 h-5 text-slate-600"}),o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Inventario de Tarjetas"})]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(zi,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("div",{className:"p-4 border-b border-slate-100 flex flex-wrap items-center gap-3",children:[o.jsxs("select",{className:"input w-auto",value:i,onChange:m=>s(m.target.value),children:[o.jsx("option",{value:"",children:"Todos los terminales"}),Ys.map(m=>o.jsx("option",{value:m,children:m},m))]}),o.jsxs("select",{className:"input w-auto",value:l,onChange:m=>c(m.target.value),children:[o.jsx("option",{value:"",children:"Todos los estados"}),EZ.map(m=>o.jsx("option",{value:m.value,children:m.label},m.value))]}),o.jsx("div",{className:"flex-1"}),o.jsxs("button",{onClick:()=>a(!n),className:"btn btn-primary flex items-center gap-2",children:[o.jsx(UR,{className:"w-4 h-4"}),"Agregar Tarjeta"]})]}),n&&o.jsxs("form",{onSubmit:g,className:"p-4 bg-slate-50 border-b border-slate-100",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Numero de Tarjeta"}),o.jsx("input",{type:"text",className:"input",value:u.card_number,onChange:m=>d(y=>({...y,card_number:m.target.value})),placeholder:"Ej: TR-001",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Terminal"}),o.jsx("select",{className:"input",value:u.inventory_terminal,onChange:m=>d(y=>({...y,inventory_terminal:m.target.value})),children:Ys.map(m=>o.jsx("option",{value:m,children:m},m))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Notas (opcional)"}),o.jsx("input",{type:"text",className:"input",value:u.notes,onChange:m=>d(y=>({...y,notes:m.target.value}))})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[o.jsx("button",{type:"button",onClick:()=>a(!1),className:"btn btn-secondary text-sm",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary text-sm",disabled:p.isPending,children:p.isPending?"Guardando...":"Guardar"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:h?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):f.length===0?o.jsx("div",{className:"text-center py-8 text-slate-500",children:"No hay tarjetas registradas"}):o.jsx("div",{className:"space-y-2",children:f.map(m=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Af,{className:"w-5 h-5 text-slate-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-slate-900",children:m.card_number}),o.jsx("p",{className:"text-xs text-slate-500",children:m.inventory_terminal})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${b[m.status]||""}`,children:m.status}),m.status!=="INACTIVA"&&m.status!=="ASIGNADA"&&o.jsx("button",{onClick:()=>x(m),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Desactivar",children:o.jsx(mZ,{className:"w-4 h-4"})})]})]},m.id))})}),o.jsx("div",{className:"border-t border-slate-200 px-6 py-4 flex justify-end",children:o.jsx("button",{onClick:t,className:"btn btn-secondary",children:"Cerrar"})})]})})]})},mEe=({isOpen:e,onClose:t})=>{const r=$e(),[n,a]=T.useState("GLOBAL"),[i,s]=T.useState({manager_email:"",cc_emails:"",subject_manager:"Solicitud de Nueva Credencial",subject_boss:"Notificacion de Credencial de Respaldo",enabled:!0}),{data:l=[],isLoading:c}=Ge({queryKey:["backup-email-settings"],queryFn:C8,enabled:e}),u=Be({mutationFn:sEe,onSuccess:()=>{r.invalidateQueries({queryKey:["backup-email-settings"]})}});T.useEffect(()=>{const f=l.find(h=>n==="GLOBAL"?h.scope_type==="GLOBAL":h.scope_code===n);s(f?{manager_email:f.manager_email,cc_emails:f.cc_emails||"",subject_manager:f.subject_manager,subject_boss:f.subject_boss,enabled:f.enabled}:{manager_email:"",cc_emails:"",subject_manager:"Solicitud de Nueva Credencial",subject_boss:"Notificacion de Credencial de Respaldo",enabled:!0})},[n,l]);const d=f=>{f.preventDefault(),u.mutate({scope_type:n==="GLOBAL"?"GLOBAL":"TERMINAL",scope_code:n,...i})};return e?o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:t}),o.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-lg",children:[o.jsxs("div",{className:"border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(BR,{className:"w-5 h-5 text-slate-600"}),o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Configuracion de Correos"})]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(zi,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Configurar para:"}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx("button",{type:"button",onClick:()=>a("GLOBAL"),className:`px-3 py-1.5 text-sm rounded-lg border ${n==="GLOBAL"?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:"Global"}),Ys.map(f=>o.jsx("button",{type:"button",onClick:()=>a(f),className:`px-3 py-1.5 text-sm rounded-lg border ${n===f?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:f},f))]})]}),c?o.jsx("div",{className:"flex justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o.jsxs("form",{onSubmit:d,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Email del Gestor (crear credencial)"}),o.jsx("input",{type:"email",className:"input",value:i.manager_email,onChange:f=>s(h=>({...h,manager_email:f.target.value})),placeholder:"gestor@empresa.cl",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"CC (opcional, separar por coma)"}),o.jsx("input",{type:"text",className:"input",value:i.cc_emails,onChange:f=>s(h=>({...h,cc_emails:f.target.value})),placeholder:"copia1@empresa.cl, copia2@empresa.cl"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asunto para Gestor"}),o.jsx("input",{type:"text",className:"input",value:i.subject_manager,onChange:f=>s(h=>({...h,subject_manager:f.target.value})),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asunto para Jefatura"}),o.jsx("input",{type:"text",className:"input",value:i.subject_boss,onChange:f=>s(h=>({...h,subject_boss:f.target.value})),required:!0})]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:i.enabled,onChange:f=>s(h=>({...h,enabled:f.target.checked})),className:"w-4 h-4 rounded border-slate-300"}),o.jsx("span",{className:"text-sm text-slate-700",children:"Envio habilitado"})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[o.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",children:"Cerrar"}),o.jsxs("button",{type:"submit",className:"btn btn-primary flex items-center gap-2",disabled:u.isPending,children:[o.jsx(iZ,{className:"w-4 h-4"}),u.isPending?"Guardando...":"Guardar"]})]}),u.isSuccess&&o.jsx("p",{className:"text-sm text-emerald-600 text-center",children:"Configuracion guardada correctamente"})]})]})]})})]}):null},gEe=({isOpen:e,loan:t,managerEmail:r,workerEmail:n,cc:a,onClose:i,onSubmit:s,isLoading:l})=>{const c=T.useRef(null),[u,d]=T.useState(null),[f,h]=T.useState(null),[p,v]=T.useState(""),g=_=>{var S;const w=(S=_.target.files)==null?void 0:S[0];if(!w)return;if(!["application/pdf","image/png","image/jpeg"].includes(w.type)){v("Solo se permiten archivos PDF, PNG o JPG");return}if(w.size>5*1024*1024){v("El archivo no puede superar 5MB");return}if(v(""),d(w),w.type.startsWith("image/")){const E=new FileReader;E.onload=N=>{var A;return h((A=N.target)==null?void 0:A.result)},E.readAsDataURL(w)}else h(null)},x=async()=>{if(!u){v("Debe adjuntar el documento firmado");return}const _=new FileReader;_.onload=async w=>{var S;const j=((S=w.target)==null?void 0:S.result).split(",")[1];await s({filename:`autorizacion_descuento_${(t==null?void 0:t.person_rut)||"firmado"}.${u.name.split(".").pop()}`,content:j})},_.readAsDataURL(u)},b=async()=>{await s(null)},m=()=>{d(null),h(null),v("")},y=()=>{m(),i()};return!e||!t?null:o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:y}),o.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-lg",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Adjuntar Documento Firmado"}),o.jsx("button",{onClick:y,className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(zi,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[o.jsxs("p",{className:"text-sm text-blue-800",children:[o.jsx("strong",{children:"Trabajador:"})," ",t.person_name," (",gl(t.person_rut),")"]}),o.jsx("p",{className:"text-sm text-blue-800 mt-1",children:o.jsx("strong",{children:"Se enviar correo a:"})}),o.jsxs("ul",{className:"text-xs text-blue-700 mt-1 list-disc list-inside",children:[o.jsxs("li",{children:["Gestor de credenciales: ",r," ",o.jsx("span",{className:"text-blue-500",children:"(con adjunto)"})]}),n&&o.jsxs("li",{children:["Notificacin trabajador: ",n]}),a&&o.jsxs("li",{children:["CC: ",a]})]})]}),o.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[o.jsx(UJ,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-amber-800",children:"Importante"}),o.jsx("p",{className:"text-xs text-amber-700",children:"Adjunte el documento de autorizacin de descuento firmado por el trabajador. Este se enviar SOLO al gestor de credenciales."})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Documento Firmado (PDF, PNG, JPG)"}),o.jsx("input",{type:"file",ref:c,onChange:g,accept:".pdf,.png,.jpg,.jpeg",className:"hidden"}),u?o.jsx("div",{className:"border border-slate-200 rounded-lg p-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[f?o.jsx("img",{src:f,alt:"Preview",className:"w-16 h-16 object-cover rounded"}):o.jsx("div",{className:"w-16 h-16 bg-red-50 rounded flex items-center justify-center",children:o.jsx(YJ,{className:"w-8 h-8 text-red-500"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:u.name}),o.jsxs("p",{className:"text-xs text-slate-500",children:[(u.size/1024).toFixed(1)," KB"]})]}),o.jsx("button",{type:"button",onClick:()=>{d(null),h(null)},className:"p-1 hover:bg-slate-100 rounded",children:o.jsx(zi,{className:"w-4 h-4 text-slate-500"})})]})}):o.jsxs("button",{type:"button",onClick:()=>{var _;return(_=c.current)==null?void 0:_.click()},className:"w-full border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:border-blue-400 hover:bg-blue-50/50 transition-colors",children:[o.jsx(bZ,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Haga clic para seleccionar archivo"}),o.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Max 5MB"})]}),p&&o.jsx("p",{className:"text-xs text-red-500 mt-2",children:p})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-slate-200 bg-slate-50 rounded-b-xl",children:[o.jsx("button",{type:"button",onClick:b,className:"text-sm text-slate-500 hover:text-slate-700",disabled:l,children:"Enviar sin adjunto"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",onClick:y,className:"btn btn-secondary",disabled:l,children:"Cancelar"}),o.jsx("button",{type:"button",onClick:x,className:"btn btn-primary flex items-center gap-2",disabled:l||!u,children:l?"Enviando...":o.jsxs(o.Fragment,{children:[o.jsx(cZ,{className:"w-4 h-4"}),"Enviar Correos"]})})]})]})]})})]})},vEe=()=>{var U,q,se,je;const e=$e(),t=Le(ee=>ee.context),r=Le(ee=>ee.setContext),n=ht(ee=>ee.session),[a,i]=T.useState({status:"TODAS",reason:"TODAS",alertsOnly:!1}),[s,l]=T.useState(!1),[c,u]=T.useState(!1),[d,f]=T.useState(!1),[h,p]=T.useState(null),[v,g]=T.useState(!1),[x,b]=T.useState(!1),[m,y]=T.useState(!1),[_,w]=T.useState(!1),[j,S]=T.useState(null),[E,N]=T.useState(!1),A=Ge({queryKey:["backup-loans",a],queryFn:()=>tEe(a)}),O=Ge({queryKey:["backup-kpis"],queryFn:oEe}),D=Ge({queryKey:["backup-email-settings"],queryFn:C8}),k=Be({mutationFn:async ee=>({loan:await rEe(ee),sendEmails:ee.send_emails}),onSuccess:({loan:ee,sendEmails:Y})=>{e.invalidateQueries({queryKey:["backup-loans"]}),e.invalidateQueries({queryKey:["backup-kpis"]}),e.invalidateQueries({queryKey:["backup-cards"]}),l(!1),Y&&(S(ee),w(!0))}}),V=Be({mutationFn:({id:ee,recoveredAt:Y,observation:ne})=>nEe(ee,Y),onSuccess:()=>{e.invalidateQueries({queryKey:["backup-loans"]}),e.invalidateQueries({queryKey:["backup-kpis"]}),e.invalidateQueries({queryKey:["backup-cards"]}),b(!1),p(null)}}),K=Be({mutationFn:({id:ee,reason:Y})=>aEe(ee,Y),onSuccess:()=>{e.invalidateQueries({queryKey:["backup-loans"]}),e.invalidateQueries({queryKey:["backup-kpis"]}),e.invalidateQueries({queryKey:["backup-cards"]}),y(!1),p(null)}}),ie=T.useMemo(()=>{var Y;let ee=A.data||[];if(t.mode!=="ALL"&&t.value){const ne=(Y=Cn.find(be=>be.value===t.value))==null?void 0:Y.label;ne&&(ee=ee.filter(be=>be.person_terminal===t.value||be.person_terminal===ne))}if(a.alertsOnly){const ne=new Date;ee=ee.filter(be=>{if(be.status!=="ASIGNADA")return!1;const ae=new Date(be.issued_at);return Math.floor((ne.getTime()-ae.getTime())/(1e3*60*60*24))>be.alert_after_days})}return ee},[A.data,t,a.alertsOnly]),G=ee=>{p(ee),g(!0)},X=ee=>{G(ee)},re=ee=>{p(ee),b(!0)},de=ee=>{p(ee),y(!0)},me=ee=>{S(ee),w(!0)},R=async ee=>{var be;if(!j)return;const Y=(be=D.data)==null?void 0:be.find(ae=>ae.scope_code===j.person_terminal||ae.scope_type==="GLOBAL");if(!Y){RF("Configuracin requerida",'Configure los correos primero en el botn "Correos"'),w(!1),S(null);return}N(!0);const ne=await cEe(j,Y.manager_email,Y.cc_emails||void 0,ee);N(!1),ne.success?(hn("Correos enviados","Los correos de notificacin fueron enviados correctamente",j.person_name),e.invalidateQueries({queryKey:["backup-loans"]})):on("Error al enviar correos",ne.error||"Error desconocido"),w(!1),S(null)},W=()=>{if(!ie.length)return;const ee=new Date,Y=ie.map(ne=>{var Ue;const be=new Date(ne.issued_at),ae=Math.floor((ee.getTime()-be.getTime())/(1e3*60*60*24));return{rut:gl(ne.person_rut),nombre:ne.person_name,cargo:ne.person_cargo||"",terminal:ne.person_terminal,tarjeta:((Ue=ne.backup_cards)==null?void 0:Ue.card_number)||"",motivo:ne.reason==="PERDIDA"?"Perdida":"Deterioro",fecha_entrega:new Date(ne.issued_at).toLocaleDateString("es-CL"),dias:ae,estado:ne.status,descuento:ne.discount_applied?ne.discount_amount:0,correo_trabajador:ne.boss_email||"",creado_por:ne.created_by_supervisor}});Qe({filename:`prestamos_respaldo_${new Date().toISOString().split("T")[0]}`,sheetName:"Prestamos",rows:Y,columns:[{key:"rut",header:"RUT"},{key:"nombre",header:"Nombre"},{key:"cargo",header:"Cargo"},{key:"terminal",header:"Terminal"},{key:"tarjeta",header:"Tarjeta"},{key:"motivo",header:"Motivo"},{key:"fecha_entrega",header:"Fecha Entrega"},{key:"dias",header:"Dias"},{key:"estado",header:"Estado"},{key:"descuento",header:"Descuento"},{key:"email_jefatura",header:"Email Jefatura"},{key:"creado_por",header:"Creado Por"}]})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(Ct,{title:"Credenciales de Respaldo",description:"Control de prestamo de tarjetas de respaldo",actions:o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs("button",{onClick:()=>f(!0),className:"btn btn-secondary flex items-center gap-2",children:[o.jsx(dZ,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Correos"})]}),o.jsxs("button",{onClick:()=>u(!0),className:"btn btn-secondary flex items-center gap-2",children:[o.jsx(Af,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Tarjetas"})]}),o.jsxs("button",{onClick:W,className:"btn btn-secondary flex items-center gap-2",children:[o.jsx(VJ,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"XLSX"})]}),o.jsxs("button",{onClick:()=>l(!0),className:"btn btn-primary flex items-center gap-2",children:[o.jsx(UR,{className:"w-4 h-4"}),"Nuevo Prestamo"]})]})}),o.jsx(NZ,{kpis:O.data||{availableByTerminal:{"El Roble":0,"La Reina":0,"Maria Angelica":0},activeLoans:0,overdueLoans:0,avgReturnDays:0,totalDiscounts:0},isLoading:O.isLoading}),!A.isLoading&&A.data&&A.data.length>0&&o.jsx(KSe,{loans:A.data}),o.jsxs("div",{className:"bg-white px-3 py-2 rounded-lg border border-slate-200 shadow-sm flex flex-wrap items-center gap-2",children:[o.jsx(JJ,{className:"w-4 h-4 text-slate-400 flex-shrink-0"}),o.jsx("input",{type:"text",className:"h-8 px-2 text-sm border border-slate-200 rounded-md w-32 focus:outline-none focus:ring-1 focus:ring-blue-400",placeholder:"RUT/Nombre...",value:a.search||"",onChange:ee=>i(Y=>({...Y,search:ee.target.value}))}),o.jsxs("select",{className:"h-8 px-2 text-sm border border-slate-200 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-400",value:t.value||"",onChange:ee=>{ee.target.value?r({mode:"TERMINAL",value:ee.target.value}):r({mode:"ALL"})},children:[o.jsx("option",{value:"",children:"Terminal"}),Cn.map(ee=>o.jsx("option",{value:ee.value,children:ee.label},ee.value))]}),o.jsxs("select",{className:"h-8 px-2 text-sm border border-slate-200 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-400",value:a.status||"TODAS",onChange:ee=>i(Y=>({...Y,status:ee.target.value})),children:[o.jsx("option",{value:"TODAS",children:"Estado"}),SZ.map(ee=>o.jsx("option",{value:ee.value,children:ee.label},ee.value))]}),o.jsxs("select",{className:"h-8 px-2 text-sm border border-slate-200 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-400",value:a.reason||"TODAS",onChange:ee=>i(Y=>({...Y,reason:ee.target.value})),children:[o.jsx("option",{value:"TODAS",children:"Motivo"}),qR.map(ee=>o.jsx("option",{value:ee.value,children:ee.label},ee.value))]}),o.jsxs("label",{className:"flex items-center gap-1 cursor-pointer text-xs text-slate-600 whitespace-nowrap",children:[o.jsx("input",{type:"checkbox",checked:a.alertsOnly||!1,onChange:ee=>i(Y=>({...Y,alertsOnly:ee.target.checked})),className:"w-3.5 h-3.5 rounded border-slate-300"}),o.jsx(Vg,{className:"w-3.5 h-3.5 text-amber-500"}),"Atrasados"]}),o.jsx("div",{className:"h-4 w-px bg-slate-200 hidden sm:block"}),o.jsx("input",{type:"date",className:"h-8 px-2 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400",value:a.dateFrom||"",onChange:ee=>i(Y=>({...Y,dateFrom:ee.target.value})),title:"Desde"}),o.jsx("span",{className:"text-slate-400 text-xs",children:"-"}),o.jsx("input",{type:"date",className:"h-8 px-2 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400",value:a.dateTo||"",onChange:ee=>i(Y=>({...Y,dateTo:ee.target.value})),title:"Hasta"})]}),A.isLoading&&o.jsx(zt,{label:"Cargando prestamos..."}),A.isError&&o.jsx(Er,{message:"Error al cargar prestamos",onRetry:A.refetch}),!A.isLoading&&!A.isError&&o.jsx(YSe,{loans:ie,onView:G,onEdit:X,onRecover:re,onCancel:de,onResendEmails:me}),o.jsx(uEe,{isOpen:s,onClose:()=>l(!1),onSubmit:async(ee,Y)=>{await k.mutateAsync(ee),ee.discount_applied&&Y()},isLoading:k.isPending,supervisorName:(n==null?void 0:n.supervisorName)||"Supervisor"}),o.jsx(dEe,{isOpen:v,loan:h,onClose:()=>{g(!1),p(null)}}),o.jsx(fEe,{isOpen:x,loan:h,onClose:()=>{b(!1),p(null)},onSubmit:async(ee,Y,ne)=>{await V.mutateAsync({id:ee,recoveredAt:Y,observation:ne})},isLoading:V.isPending}),o.jsx(hEe,{isOpen:m,loan:h,onClose:()=>{y(!1),p(null)},onSubmit:async(ee,Y)=>{await K.mutateAsync({id:ee,reason:Y})},isLoading:K.isPending}),o.jsx(pEe,{isOpen:c,onClose:()=>u(!1)}),o.jsx(mEe,{isOpen:d,onClose:()=>f(!1)}),o.jsx(gEe,{isOpen:_,loan:j,managerEmail:((q=(U=D.data)==null?void 0:U.find(ee=>ee.scope_code===(j==null?void 0:j.person_terminal)||ee.scope_type==="GLOBAL"))==null?void 0:q.manager_email)||"",workerEmail:(j==null?void 0:j.boss_email)||"",cc:((je=(se=D.data)==null?void 0:se.find(ee=>ee.scope_code===(j==null?void 0:j.person_terminal)||ee.scope_type==="GLOBAL"))==null?void 0:je.cc_emails)||void 0,onClose:()=>{w(!1),S(null)},onSubmit:R,isLoading:E})]})},xEe=[{id:"s-1",solicitante:"Ana Prez",tipo:"Materiales",fecha:"2023-12-04",estado:"abierta",terminal:"EL_ROBLE"},{id:"s-2",solicitante:"Carlos Vega",tipo:"Personal",fecha:"2023-12-03",estado:"en_proceso",terminal:"LA_REINA"},{id:"s-3",solicitante:"Laura Soto",tipo:"Tecnologa",fecha:"2023-12-02",estado:"cerrada",terminal:"EL_SALTO"}],gO=Wg(xEe,(e,t)=>t!=null&&t.estado&&t.estado!=="todas"?e.estado===t.estado:!0),yEe=()=>{const e=Le(b=>b.context),t=Le(b=>b.setContext),[r,n]=T.useState({estado:"todas"}),[a,i]=T.useState(""),[s,l]=T.useState(""),[c,u]=T.useState([]),d=Ge({queryKey:["solicitudes",e,r],queryFn:()=>gO.list({terminalContext:e,filters:r,scope:"view"})}),f=T.useMemo(()=>[...d.data??[],...c],[d.data,c]),h=T.useMemo(()=>[{key:"tipo",header:"Tipo"},{key:"solicitante",header:"Solicitante"},{key:"estado",header:"Estado",render:b=>o.jsx("span",{className:"badge capitalize",children:b.estado}),value:b=>b.estado},{key:"fecha",header:"Fecha"},{key:"terminal",header:"Terminal",render:b=>Ve(b.terminal),value:b=>Ve(b.terminal)}],[]),p=h.map(b=>({key:b.key,header:b.header,value:m=>b.value?b.value(m):m[b.key]})),v=()=>{Qe({filename:"solicitudes_vista",sheetName:"Solicitudes",rows:f,columns:p})},g=async()=>{const b=await gO.list({terminalContext:e,scope:"all"});Qe({filename:"solicitudes_completo",sheetName:"Solicitudes",rows:b,columns:p})},x=()=>{const b={id:`local-${Date.now()}`,solicitante:s,tipo:a,estado:"abierta",fecha:new Date().toISOString().slice(0,10),terminal:e.value??"EL_ROBLE"};u(m=>[b,...m]),l(""),i("")};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ct,{title:"Solicitudes",description:"Formulario universal para requerimientos",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"btn btn-primary",onClick:()=>{var b;return(b=document.getElementById("solicitud-form"))==null?void 0:b.scrollIntoView({behavior:"smooth"})},children:"Nueva solicitud"}),o.jsx(hr,{onExportView:v,onExportAll:g})]})}),o.jsx(Pn,{terminalContext:e,onTerminalChange:t,children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsxs("select",{className:"input",value:r.estado,onChange:b=>n({estado:b.target.value}),children:[o.jsx("option",{value:"todas",children:"Todas"}),o.jsx("option",{value:"abierta",children:"Abierta"}),o.jsx("option",{value:"en_proceso",children:"En proceso"}),o.jsx("option",{value:"cerrada",children:"Cerrada"})]})]})}),o.jsxs("div",{className:"card p-4",id:"solicitud-form",children:[o.jsx("p",{className:"mb-3 text-sm font-semibold text-slate-900",children:"Crear nueva solicitud"}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"label",children:"Solicitante"}),o.jsx("input",{className:"input",value:s,onChange:b=>l(b.target.value)})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"label",children:"Tipo"}),o.jsx("input",{className:"input",value:a,onChange:b=>i(b.target.value),placeholder:"Ej: Materiales"})]}),o.jsx("div",{className:"flex items-end justify-end",children:o.jsx("button",{className:"btn btn-primary",onClick:x,disabled:!s||!a,children:"Registrar (mock)"})})]})]}),d.isLoading&&o.jsx(zt,{}),d.isError&&o.jsx(Er,{onRetry:d.refetch}),!d.isLoading&&!d.isError&&o.jsxs(o.Fragment,{children:[!f.length&&o.jsx(es,{description:"Sin solicitudes"}),f.length>0&&o.jsx(Zi,{columns:h,rows:f})]})]})},Wh=({terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:l,children:c})=>o.jsxs(Pn,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Buscar PPU"}),o.jsx("input",{type:"text",className:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700 outline-none focus:border-brand-500 focus:ring-1 focus:ring-brand-500 w-32 lg:w-40",placeholder:"PPU...",value:r,onChange:u=>n(u.target.value)})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Desde"}),o.jsx("input",{type:"date",className:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700 outline-none focus:border-brand-500 w-full",value:a,onChange:u=>i(u.target.value)})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Hasta"}),o.jsx("input",{type:"date",className:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700 outline-none focus:border-brand-500 w-full",value:s,onChange:u=>l(u.target.value)})]}),c]}),Hh=({items:e})=>o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:e.map((t,r)=>o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:t.label}),o.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:t.value}),t.subtext&&o.jsx("p",{className:"text-xs text-slate-400 mt-1 font-medium",children:t.subtext})]}),t.icon&&o.jsx("div",{className:`p-2 rounded-lg ${t.colorClass||"bg-slate-100 text-slate-600"}`,children:o.jsx(H,{name:t.icon,size:20})})]},r))}),bEe="https://wvcplgwemvqhvtstlqmt.supabase.co",O8="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind2Y3BsZ3dlbXZxaHZ0c3RscW10Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAzNjIyMDUsImV4cCI6MjA3NTkzODIwNX0.K1YOv5lRn9fOous3AyG2gPxsQBzqOXRfYHgrCmO5zxk",wEe=gR(bEe,O8,{auth:{persistSession:!1,autoRefreshToken:!1},realtime:{params:{eventsPerSecond:10}}}),_Ee=()=>!!O8,Vh=async(e,t)=>{if(!_Ee())return[];let r=wEe.from(e).select("*");if(t.terminalContext&&t.terminalContext.mode!=="ALL"){const c=Jn(t.terminalContext).map(u=>Vs[u]).filter(Boolean);c.length>0&&(r=r.in("terminal",c))}t.search&&(r=r.ilike("bus_ppu",`%${t.search}%`)),t.dateFrom&&(r=r.gte("created_at",t.dateFrom)),t.dateTo&&(r=r.lte("created_at",t.dateTo));const n=t.sortBy||"updated_at",a=t.sortOrder||"desc";r=r.order(n,{ascending:a==="asc"});const{data:i,error:s}=await r;if(s)throw console.error(`Error fetching ${e}:`,s),s;return i},jEe=e=>Vh("extintores",e),SEe=e=>Vh("tags",e),EEe=e=>Vh("mobileye",e),NEe=e=>Vh("odometro",e),TEe=e=>Vh("publicidad",e),AEe=e=>Ge({queryKey:["minicheck","extintores",e],queryFn:()=>jEe(e)}),CEe=e=>Ge({queryKey:["minicheck","tags",e],queryFn:()=>SEe(e)}),OEe=e=>Ge({queryKey:["minicheck","mobileye",e],queryFn:()=>EEe(e)}),kEe=e=>Ge({queryKey:["minicheck","odometros",e],queryFn:()=>NEe(e)}),PEe=e=>Ge({queryKey:["minicheck","publicidad",e],queryFn:()=>TEe(e)}),REe=()=>{const e=Le(m=>m.context),t=Le(m=>m.setContext),[r,n]=T.useState(""),[a,i]=T.useState(""),[s,l]=T.useState(""),c=T.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:h}=AEe(c),p=T.useMemo(()=>{if(!u)return[];const m=u.length,y=u.filter(j=>j.certificacion==="VENCIDA").length,_=u.filter(j=>!j.tiene).length,w=u.filter(j=>j.presion==="BAJA_CARGA").length;return[{label:"Total Registros",value:m,icon:"clipboard"},{label:"Vencidos",value:y,icon:"alert-triangle",colorClass:"bg-red-50 text-red-600"},{label:"Sin Extintor",value:_,icon:"x",colorClass:"bg-orange-50 text-orange-600"},{label:"Presin Baja",value:w,icon:"activity",colorClass:"bg-yellow-50 text-yellow-600"}]},[u]),v=T.useMemo(()=>{if(!u)return[];const m=u.filter(_=>_.certificacion==="VIGENTE").length,y=u.filter(_=>_.certificacion==="VENCIDA").length;return[{name:"VIGENTE",value:m,color:"#10b981"},{name:"VENCIDA",value:y,color:"#ef4444"}]},[u]),g=[{key:"bus_ppu",header:"PPU",value:m=>m.bus_ppu},{key:"terminal",header:"Terminal",render:m=>Ve(m.terminal),value:m=>m.terminal},{key:"tiene",header:"Tiene",render:m=>o.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${m.tiene?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.tiene?"S":"NO"}),value:m=>m.tiene?"SI":"NO"},{key:"certificacion",header:"Certificacin",render:m=>o.jsx("span",{className:`text-xs font-bold ${m.certificacion==="VIGENTE"?"text-green-600":"text-red-600"}`,children:m.certificacion||"-"}),value:m=>m.certificacion||"-"},{key:"vencimiento_mes",header:"Vencimiento",render:m=>m.vencimiento_mes&&m.vencimiento_anio?`${m.vencimiento_mes}/${m.vencimiento_anio}`:"-",value:m=>`${m.vencimiento_mes}/${m.vencimiento_anio}`},{key:"presion",header:"Presin",value:m=>m.presion||"-"},{key:"cilindro",header:"Cilindro OK",render:m=>m.cilindro?"S":"No",value:m=>m.cilindro?"S":"No"},{key:"updated_at",header:"Actualizado",render:m=>Sr(m.updated_at),value:m=>Sr(m.updated_at)}],x=g.map(m=>({header:m.header,key:m.key,value:m.value})),b=()=>{u&&Qe({filename:`minicheck_extintor_${new Date().toISOString().split("T")[0]}`,sheetName:"Extintores",rows:u,columns:x})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(Ct,{title:"Control de Extintores",description:"Validacin de estado y vencimiento de extintores",actions:o.jsx("div",{className:"flex gap-2",children:o.jsx(hr,{onExportView:b,onExportAll:b})})}),o.jsx(Wh,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:l}),d&&o.jsx(zt,{label:"Cargando extintores..."}),f&&o.jsx(Er,{message:"No se pudieron obtener los registros de extintores.",onRetry:h}),!d&&!f&&o.jsxs(o.Fragment,{children:[o.jsx(Hh,{items:p}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80",children:[o.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-4",children:"Estado Certificacin"}),o.jsx(Pi,{width:"100%",height:"100%",children:o.jsxs(ju,{data:v,children:[o.jsx(ml,{strokeDasharray:"3 3",vertical:!1}),o.jsx(Ki,{dataKey:"name",tick:{fontSize:10}}),o.jsx(Gi,{tick:{fontSize:10}}),o.jsx(xr,{}),o.jsx(Sn,{dataKey:"value",name:"Cantidad",radius:[4,4,0,0],children:v.map((m,y)=>o.jsx(ns,{fill:m.color},`cell-${y}`))})]})})]}),o.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?o.jsx(Zi,{columns:g,rows:u}):o.jsx(es,{label:"Sin registros",description:"No se encontraron extintores con los filtros seleccionados."})})]})]})]})},IEe=()=>{const e=Le(m=>m.context),t=Le(m=>m.setContext),[r,n]=T.useState(""),[a,i]=T.useState(""),[s,l]=T.useState(""),c=T.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:h}=CEe(c),p=T.useMemo(()=>{if(!u)return[];const m=u.length,y=u.filter(w=>!w.tiene).length,_=u.filter(w=>w.serie&&w.serie.trim().length>0).length;return[{label:"Total Registros",value:m,icon:"clipboard"},{label:"Sin TAG",value:y,icon:"alert-circle",colorClass:"bg-red-50 text-red-600"},{label:"Serie Informada",value:_,icon:"check",colorClass:"bg-blue-50 text-blue-600"}]},[u]),v=T.useMemo(()=>{if(!u)return[];const m=u.filter(_=>_.tiene).length,y=u.filter(_=>!_.tiene).length;return[{name:"Con TAG",value:m,color:"#10b981"},{name:"Sin TAG",value:y,color:"#ef4444"}]},[u]),g=[{key:"bus_ppu",header:"PPU",value:m=>m.bus_ppu},{key:"terminal",header:"Terminal",render:m=>Ve(m.terminal),value:m=>m.terminal},{key:"tiene",header:"Tiene TAG",render:m=>o.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${m.tiene?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.tiene?"S":"NO"}),value:m=>m.tiene?"SI":"NO"},{key:"serie",header:"N Serie",value:m=>m.serie||"-"},{key:"observacion",header:"Observacin",value:m=>m.observacion||""},{key:"updated_at",header:"Actualizado",render:m=>Sr(m.updated_at),value:m=>Sr(m.updated_at)}],x=g.map(m=>({header:m.header,key:m.key,value:m.value})),b=()=>{u&&Qe({filename:`minicheck_tag_${new Date().toISOString().split("T")[0]}`,sheetName:"Tags",rows:u,columns:x})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(Ct,{title:"Control de TAG",description:"Verificacin de dispositivos TAG",actions:o.jsx("div",{className:"flex gap-2",children:o.jsx(hr,{onExportView:b,onExportAll:b})})}),o.jsx(Wh,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:l}),d&&o.jsx(zt,{label:"Cargando tags..."}),f&&o.jsx(Er,{message:"No se pudieron cargar los datos.",onRetry:h}),!d&&!f&&o.jsxs(o.Fragment,{children:[o.jsx(Hh,{items:p}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80 flex flex-col items-center justify-center",children:[o.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-2 w-full text-left",children:"Distribucin"}),o.jsx(Pi,{width:"100%",height:"100%",children:o.jsxs(gj,{children:[o.jsx(qa,{data:v,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:v.map((m,y)=>o.jsx(ns,{fill:m.color},`cell-${y}`))}),o.jsx(xr,{}),o.jsx(ki,{})]})})]}),o.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?o.jsx(Zi,{columns:g,rows:u}):o.jsx(es,{label:"Sin registros",description:"No se encontraron datos."})})]})]})]})},DEe=()=>{const e=Le(y=>y.context),t=Le(y=>y.setContext),[r,n]=T.useState(""),[a,i]=T.useState(""),[s,l]=T.useState(""),c=T.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:h}=OEe(c),p=y=>y.consola&&y.sensor_frontal&&y.sensor_izq&&y.sensor_der,v=T.useMemo(()=>{if(!u)return[];const y=u.length,_=u.filter(j=>!p(j)).length,w=u.filter(j=>j.alerta_izq||j.alerta_der).length;return[{label:"Total Registros",value:y,icon:"clipboard"},{label:"Falla Sensores",value:_,icon:"alert-triangle",colorClass:"bg-red-50 text-red-600"},{label:"Alertas Activas",value:w,icon:"bell",colorClass:"bg-yellow-50 text-yellow-600"}]},[u]),g=T.useMemo(()=>{if(!u)return[];const y=u.filter(w=>p(w)).length,_=u.filter(w=>!p(w)).length;return[{name:"Sensores OK",value:y,color:"#10b981"},{name:"Falla",value:_,color:"#ef4444"}]},[u]),x=[{key:"bus_ppu",header:"PPU",value:y=>y.bus_ppu},{key:"terminal",header:"Terminal",render:y=>Ve(y.terminal),value:y=>y.terminal},{key:"bus_marca",header:"Marca",value:y=>y.bus_marca||"-"},{key:"consola",header:"Consola",render:y=>y.consola?o.jsx(H,{name:"check",size:16,className:"text-green-500"}):o.jsx(H,{name:"x",size:16,className:"text-red-500"}),value:y=>y.consola?"OK":"Falla"},{key:"id",header:"Sensores OK?",render:y=>{const _=p(y);return o.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${_?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:_?"S":"NO"})},value:y=>p(y)?"S":"NO"},{key:"id",header:"Alertas",render:y=>{const _=[];return y.alerta_izq&&_.push("IZQ"),y.alerta_der&&_.push("DER"),_.length>0?o.jsx("span",{className:"text-red-600 font-bold text-xs",children:_.join(", ")}):"-"},value:y=>{const _=[];return y.alerta_izq&&_.push("IZQ"),y.alerta_der&&_.push("DER"),_.join(", ")}},{key:"updated_at",header:"Actualizado",render:y=>Sr(y.updated_at),value:y=>Sr(y.updated_at)}],b=x.map(y=>({header:y.header,key:y.key,value:y.value})),m=()=>{u&&Qe({filename:`minicheck_mobileye_${new Date().toISOString().split("T")[0]}`,sheetName:"Mobileye",rows:u,columns:b})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(Ct,{title:"Control Mobileye",description:"Estado de sensores y cmaras Mobileye",actions:o.jsx("div",{className:"flex gap-2",children:o.jsx(hr,{onExportView:m,onExportAll:m})})}),o.jsx(Wh,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:l}),d&&o.jsx(zt,{label:"Cargando Mobileye..."}),f&&o.jsx(Er,{message:"No se pudieron cargar los datos.",onRetry:h}),!d&&!f&&o.jsxs(o.Fragment,{children:[o.jsx(Hh,{items:v}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80",children:[o.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-4",children:"Estado General Sensores"}),o.jsx(Pi,{width:"100%",height:"100%",children:o.jsxs(ju,{data:g,children:[o.jsx(ml,{strokeDasharray:"3 3",vertical:!1}),o.jsx(Ki,{dataKey:"name",tick:{fontSize:10}}),o.jsx(Gi,{tick:{fontSize:10}}),o.jsx(xr,{}),o.jsx(Sn,{dataKey:"value",name:"Cantidad",radius:[4,4,0,0],children:g.map((y,_)=>o.jsx(ns,{fill:y.color},`cell-${_}`))})]})})]}),o.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?o.jsx(Zi,{columns:x,rows:u}):o.jsx(es,{label:"Sin registros",description:"No se encontraron datos."})})]})]})]})},MEe=()=>{const e=Le(m=>m.context),t=Le(m=>m.setContext),[r,n]=T.useState(""),[a,i]=T.useState(""),[s,l]=T.useState(""),c=T.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:h}=kEe(c),p=T.useMemo(()=>{if(!u)return[];const m=u.length,y=u.filter(w=>w.estado==="INCONSISTENTE").length,_=u.filter(w=>w.estado==="NO_FUNCIONA").length;return[{label:"Total Registros",value:m,icon:"clipboard"},{label:"Inconsistentes",value:y,icon:"alert-triangle",colorClass:"bg-yellow-50 text-yellow-600"},{label:"No Funciona",value:_,icon:"x-circle",colorClass:"bg-red-50 text-red-600"}]},[u]),v=T.useMemo(()=>{if(!u)return[];const m=u.filter(w=>w.estado==="OK").length,y=u.filter(w=>w.estado==="INCONSISTENTE").length,_=u.filter(w=>w.estado==="NO_FUNCIONA").length;return[{name:"OK",value:m,color:"#10b981"},{name:"INCONSISTENTE",value:y,color:"#f59e0b"},{name:"NO FUNCIONA",value:_,color:"#ef4444"}].filter(w=>w.value>0)},[u]),g=[{key:"bus_ppu",header:"PPU",value:m=>m.bus_ppu},{key:"terminal",header:"Terminal",render:m=>Ve(m.terminal),value:m=>m.terminal},{key:"lectura",header:"Lectura",value:m=>m.lectura.toLocaleString("es-CL")},{key:"estado",header:"Estado",render:m=>{let y="bg-gray-100 text-gray-800";return m.estado==="OK"&&(y="bg-green-100 text-green-800"),m.estado==="INCONSISTENTE"&&(y="bg-yellow-100 text-yellow-800"),m.estado==="NO_FUNCIONA"&&(y="bg-red-100 text-red-800"),o.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${y}`,children:m.estado})},value:m=>m.estado},{key:"observacion",header:"Observacin",value:m=>m.observacion||""},{key:"updated_at",header:"Actualizado",render:m=>Sr(m.updated_at),value:m=>Sr(m.updated_at)}],x=g.map(m=>({header:m.header,key:m.key,value:m.value})),b=()=>{u&&Qe({filename:`minicheck_odometro_${new Date().toISOString().split("T")[0]}`,sheetName:"Odometros",rows:u,columns:x})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(Ct,{title:"Control Odmetro",description:"Lecturas y estado de odmetros",actions:o.jsx("div",{className:"flex gap-2",children:o.jsx(hr,{onExportView:b,onExportAll:b})})}),o.jsx(Wh,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:l}),d&&o.jsx(zt,{label:"Cargando Odmetros..."}),f&&o.jsx(Er,{message:"No se pudieron cargar los datos.",onRetry:h}),!d&&!f&&o.jsxs(o.Fragment,{children:[o.jsx(Hh,{items:p}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80 flex flex-col items-center justify-center",children:[o.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-2 w-full text-left",children:"Distribucin Estados"}),o.jsx(Pi,{width:"100%",height:"100%",children:o.jsxs(gj,{children:[o.jsx(qa,{data:v,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:v.map((m,y)=>o.jsx(ns,{fill:m.color},`cell-${y}`))}),o.jsx(xr,{}),o.jsx(ki,{})]})})]}),o.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?o.jsx(Zi,{columns:g,rows:u}):o.jsx(es,{label:"Sin registros",description:"No se encontraron datos."})})]})]})]})},LEe=()=>{const e=Le(m=>m.context),t=Le(m=>m.setContext),[r,n]=T.useState(""),[a,i]=T.useState(""),[s,l]=T.useState(""),c=T.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:h}=PEe(c),p=T.useMemo(()=>{if(!u)return[];const m=u.length,y=u.filter(j=>j.danio).length,_=u.filter(j=>j.residuos).length,w=u.filter(j=>!j.tiene).length;return[{label:"Total Registros",value:m,icon:"clipboard"},{label:"Con Dao",value:y,icon:"alert-triangle",colorClass:"bg-red-50 text-red-600"},{label:"Con Residuos",value:_,icon:"trash",colorClass:"bg-orange-50 text-orange-600"},{label:"Sin Publicidad",value:w,icon:"x-circle",colorClass:"bg-gray-50 text-gray-600"}]},[u]),v=T.useMemo(()=>{if(!u)return[];const m=u.filter(w=>w.danio).length,y=u.filter(w=>w.residuos).length,_=u.filter(w=>!w.tiene).length;return[{name:"Con Dao",value:m,color:"#ef4444"},{name:"Con Residuos",value:y,color:"#f97316"},{name:"Sin Pub.",value:_,color:"#64748b"}]},[u]),g=[{key:"bus_ppu",header:"PPU",value:m=>m.bus_ppu},{key:"terminal",header:"Terminal",render:m=>Ve(m.terminal),value:m=>m.terminal},{key:"tiene",header:"Tiene",render:m=>m.tiene?o.jsx("span",{className:"text-green-600 font-bold",children:"S"}):o.jsx("span",{className:"text-gray-400",children:"NO"}),value:m=>m.tiene?"SI":"NO"},{key:"danio",header:"Dao",render:m=>m.danio?o.jsx("span",{className:"px-2 py-0.5 rounded bg-red-100 text-red-800 text-xs font-bold",children:"S"}):o.jsx("span",{className:"text-gray-400",children:"-"}),value:m=>m.danio?"SI":"NO"},{key:"residuos",header:"Residuos",render:m=>m.residuos?o.jsx("span",{className:"px-2 py-0.5 rounded bg-orange-100 text-orange-800 text-xs font-bold",children:"S"}):o.jsx("span",{className:"text-gray-400",children:"-"}),value:m=>m.residuos?"SI":"NO"},{key:"nombre_publicidad",header:"Nombre",value:m=>m.nombre_publicidad||"-"},{key:"updated_at",header:"Actualizado",render:m=>Sr(m.updated_at),value:m=>Sr(m.updated_at)}],x=g.map(m=>({header:m.header,key:m.key,value:m.value})),b=()=>{u&&Qe({filename:`minicheck_publicidad_${new Date().toISOString().split("T")[0]}`,sheetName:"Publicidad",rows:u,columns:x})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(Ct,{title:"Control Publicidad",description:"Estado de publicidad en buses",actions:o.jsx("div",{className:"flex gap-2",children:o.jsx(hr,{onExportView:b,onExportAll:b})})}),o.jsx(Wh,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:l}),d&&o.jsx(zt,{label:"Cargando publicidad..."}),f&&o.jsx(Er,{message:"No se pudieron cargar los datos.",onRetry:h}),!d&&!f&&o.jsxs(o.Fragment,{children:[o.jsx(Hh,{items:p}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80",children:[o.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-4",children:"Problemas Detectados"}),o.jsx(Pi,{width:"100%",height:"100%",children:o.jsxs(ju,{data:v,children:[o.jsx(ml,{strokeDasharray:"3 3",vertical:!1}),o.jsx(Ki,{dataKey:"name",tick:{fontSize:10}}),o.jsx(Gi,{tick:{fontSize:10}}),o.jsx(xr,{}),o.jsx(Sn,{dataKey:"value",name:"Cantidad",radius:[4,4,0,0],children:v.map((m,y)=>o.jsx(ns,{fill:m.color},`cell-${y}`))})]})})]}),o.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?o.jsx(Zi,{columns:g,rows:u}):o.jsx(es,{label:"Sin registros",description:"No se encontraron datos."})})]})]})]})},$Ee=[{ppu:"ABCD12",modelo:"Camin 3/4",estado:"operativo",odometro:123400,proximaMantencion:"2024-01-15",terminal:"EL_ROBLE"},{ppu:"EFGH34",modelo:"Furgn",estado:"en_taller",odometro:88400,proximaMantencion:"2024-02-01",terminal:"LA_REINA"},{ppu:"IJKL56",modelo:"Tracto",estado:"fuera_servicio",odometro:23e4,proximaMantencion:"2024-01-30",terminal:"EL_SALTO"}],vO=Wg($Ee,(e,t)=>t!=null&&t.estado&&t.estado!=="todos"?e.estado===t.estado:!0),FEe=()=>{const e=Le(v=>v.context),t=Le(v=>v.setContext),[r,n]=T.useState({estado:"todos"}),[a,i]=T.useState(""),s=Ge({queryKey:["flota",e,r],queryFn:()=>vO.list({terminalContext:e,filters:r,scope:"view"})}),l=s.data??[],c=T.useMemo(()=>[{key:"ppu",header:"PPU"},{key:"modelo",header:"Modelo"},{key:"estado",header:"Estado",render:v=>o.jsx("span",{className:"badge capitalize",children:v.estado}),value:v=>v.estado},{key:"odometro",header:"Odmetro"},{key:"proximaMantencion",header:"Mantencin",render:v=>Sr(v.proximaMantencion),value:v=>Sr(v.proximaMantencion)},{key:"terminal",header:"Terminal",render:v=>Ve(v.terminal),value:v=>Ve(v.terminal)}],[]),u=c.map(v=>({key:v.key,header:v.header,value:g=>v.value?v.value(g):g[v.key]})),d=()=>{Qe({filename:"flota_vista",sheetName:"Flota",rows:l,columns:u})},f=async()=>{const v=await vO.list({terminalContext:e,scope:"all"});Qe({filename:"flota_completo",sheetName:"Flota",rows:v,columns:u})},h=T.useMemo(()=>{const v={};return l.forEach(g=>{v[g.estado]=(v[g.estado]??0)+1}),Object.entries(v).map(([g,x])=>({estado:g,count:x}))},[l]),p=l.find(v=>v.ppu===a)??l[0];return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ct,{title:"Estado de Flota",description:"Vista por PPU con ficha y grficas",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"btn btn-primary",children:"Agregar unidad"}),o.jsx(hr,{onExportView:d,onExportAll:f})]})}),o.jsx(Pn,{terminalContext:e,onTerminalChange:t,children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsxs("select",{className:"input",value:r.estado,onChange:v=>n({estado:v.target.value}),children:[o.jsx("option",{value:"todos",children:"Todos"}),o.jsx("option",{value:"operativo",children:"Operativo"}),o.jsx("option",{value:"en_taller",children:"En taller"}),o.jsx("option",{value:"fuera_servicio",children:"Fuera de servicio"})]})]})}),s.isLoading&&o.jsx(zt,{}),s.isError&&o.jsx(Er,{onRetry:s.refetch}),!s.isLoading&&!s.isError&&l.length===0&&o.jsx(es,{description:"Sin unidades"}),!s.isLoading&&!s.isError&&l.length>0&&o.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[o.jsx("div",{className:"md:col-span-2 space-y-3",children:o.jsx(Zi,{columns:c,rows:l})}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"card p-4",children:[o.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Resumen por estado"}),o.jsx("div",{className:"mt-2 h-48",children:o.jsx(Pi,{width:"100%",height:"100%",children:o.jsxs(ju,{data:h,children:[o.jsx(ml,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),o.jsx(Ki,{dataKey:"estado",tick:{fontSize:12}}),o.jsx(Gi,{allowDecimals:!1}),o.jsx(xr,{}),o.jsx(Sn,{dataKey:"count",fill:"#3c5eff",radius:[6,6,0,0]})]})})})]}),p&&o.jsxs("div",{className:"card p-4",children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[o.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Ficha rpida"}),o.jsx("select",{className:"input w-32",value:p.ppu,onChange:v=>i(v.target.value),children:l.map(v=>o.jsx("option",{value:v.ppu,children:v.ppu},v.ppu))})]}),o.jsxs("dl",{className:"space-y-2 text-sm text-slate-700",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("dt",{className:"font-semibold",children:"Modelo"}),o.jsx("dd",{children:p.modelo})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("dt",{className:"font-semibold",children:"Estado"}),o.jsx("dd",{className:"badge capitalize",children:p.estado})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("dt",{className:"font-semibold",children:"Odmetro"}),o.jsx("dd",{children:p.odometro.toLocaleString("es-CL")})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("dt",{className:"font-semibold",children:"Prxima mantencin"}),o.jsx("dd",{children:Sr(p.proximaMantencion)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("dt",{className:"font-semibold",children:"Terminal"}),o.jsx("dd",{children:Ve(p.terminal)})]})]})]})]})]})]})},BEe="modulepreload",UEe=function(e,t){return new URL(e,t).href},xO={},zEe=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){const s=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(r.map(u=>{if(u=UEe(u,n),u in xO)return;xO[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!n)for(let v=s.length-1;v>=0;v--){const g=s[v];if(g.href===u&&(!d||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":BEe,d||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),d)return new Promise((v,g)=>{p.addEventListener("load",v),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return a.then(s=>{for(const l of s||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},Su={TERMINAL:["El Roble"],CABEZAL:["El Descanso","Aeropuerto","Intermodal La Cisterna"]},Ec=e=>{const t={};return e.forEach(r=>{t[r.supply_id]=(t[r.supply_id]||0)+r.quantity}),t},Nc=(e,t,r,n)=>e.filter(a=>a.location_type===t&&a.location_name===r&&n.includes(a.period)),qEe=(e,t)=>{const r={},n=Nc(e,"TERMINAL","El Roble",["DAY"]),a=Ec(n);Object.entries(a).forEach(([l,c])=>{r[l]=(r[l]||0)+c*5});const i=Nc(e,"TERMINAL","El Roble",["NIGHT"]),s=Ec(i);return Object.entries(s).forEach(([l,c])=>{r[l]=(r[l]||0)+c*4}),Su.CABEZAL.forEach(l=>{const c=Nc(e,"CABEZAL",l,["DAY"]),u=Ec(c);Object.entries(u).forEach(([d,f])=>{r[d]=(r[d]||0)+f*5})}),k8(r,t)},WEe=(e,t)=>{const r={},n=Nc(e,"TERMINAL","El Roble",["DAY"]),a=Ec(n);Object.entries(a).forEach(([l,c])=>{r[l]=(r[l]||0)+c*2});const i=Nc(e,"TERMINAL","El Roble",["NIGHT"]),s=Ec(i);return Object.entries(s).forEach(([l,c])=>{r[l]=(r[l]||0)+c*3}),Su.CABEZAL.forEach(l=>{const c=Nc(e,"CABEZAL",l,["WEEKEND"]),u=Ec(c);Object.entries(u).forEach(([d,f])=>{r[d]=(r[d]||0)+f*2})}),k8(r,t)},k8=(e,t)=>{const r=new Map(t.map(n=>[n.id,n]));return Object.entries(e).filter(([,n])=>n>0).map(([n,a])=>{var i;return{supply_id:n,supply_name:((i=r.get(n))==null?void 0:i.name)||"Desconocido",quantity:a}}).sort((n,a)=>n.supply_name.localeCompare(a.supply_name))},HEe=()=>{const e=new Date().getDay();return e===1?"SEMANA":e===5?"FIN_SEMANA":"EXTRA"},VEe=(e,t)=>{if(!t)return null;const r=new Date(e);return r.setDate(r.getDate()+t),r},yw=(e,t=3)=>{if(!e)return!1;const r=new Date(e),n=new Date;return Math.ceil((r.getTime()-n.getTime())/(1e3*60*60*24))<=t},bw=e=>({SEMANA:"Semana",FIN_SEMANA:"Fin de Semana",EXTRA:"Extra"})[e]||e,yO=e=>e==="PENDIENTE"?"Pendiente":"Retirado",Bv=async()=>{if(!Fr())return[];const{data:e,error:t}=await le.from("supplies").select("*").order("name");if(t)throw console.error("Error fetching supplies:",t),t;return e||[]},KEe=async e=>{const{data:t,error:r}=await le.from("supplies").insert(e).select().single();if(r)throw console.error("Error creating supply:",r),r;return t},GEe=async(e,t)=>{const{data:r,error:n}=await le.from("supplies").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating supply:",n),n;return r},XEe=async e=>{const{error:t}=await le.from("supplies").delete().eq("id",e);if(t)throw console.error("Error deleting supply:",t),t},P8=async()=>{if(!Fr())return[];const{data:e,error:t}=await le.from("supply_consumption_profiles").select("*").order("location_type").order("location_name").order("period");if(t)throw console.error("Error fetching consumption profiles:",t),t;return e||[]},YEe=async e=>{const{data:t,error:r}=await le.from("supply_consumption_profiles").upsert(e,{onConflict:"location_type,location_name,period,supply_id"}).select().single();if(r)throw console.error("Error upserting consumption profile:",r),r;return t},R8=async e=>{if(!Fr())return[];let t=le.from("supply_requests").select("*").order("requested_at",{ascending:!1});e!=null&&e.status&&(t=t.eq("status",e.status)),e!=null&&e.terminal&&(t=t.eq("terminal",e.terminal));const{data:r,error:n}=await t;if(n)throw console.error("Error fetching supply requests:",n),n;return r||[]},QEe=async e=>{if(!Fr())return null;const{data:t,error:r}=await le.from("supply_requests").select("*").eq("id",e).single();if(r)throw console.error("Error fetching supply request:",r),r;const{data:n,error:a}=await le.from("supply_request_items").select("*, supply:supplies(*)").eq("request_id",e);if(a)throw console.error("Error fetching request items:",a),a;return{...t,items:n||[]}},JEe=async(e,t,r)=>{const{data:n,error:a}=await le.from("supply_requests").insert({terminal:e.terminal,request_type:e.request_type,created_by:t,consumption_snapshot:r}).select().single();if(a)throw console.error("Error creating supply request:",a),a;const i=e.items.filter(s=>s.quantity>0).map(s=>({request_id:n.id,supply_id:s.supply_id,quantity:s.quantity,is_extra:s.is_extra}));if(i.length>0){const{error:s}=await le.from("supply_request_items").insert(i);if(s)throw console.error("Error creating request items:",s),s}try{await ZEe(n,r||{})}catch(s){console.error("Error sending request email:",s)}return n},ZEe=async(e,t)=>{let r;e.request_type==="SEMANA"?r="MONDAY":e.request_type==="FIN_SEMANA"?r="FRIDAY":r="MANUAL";const{data:n,error:a}=await le.from("supply_email_settings").select("*").eq("trigger",r).eq("enabled",!0).single();if(a||!n){console.log(`No enabled email settings found for trigger: ${r}`);return}if(!n.recipients){console.log(`No recipients configured for trigger: ${r}`);return}const i=Object.entries(t).map(([u,d])=>`<tr><td style="padding: 8px; border-bottom: 1px solid #e2e8f0;">${u}</td><td style="padding: 8px; border-bottom: 1px solid #e2e8f0; text-align: center;">${d}</td></tr>`).join(""),s=Object.values(t).reduce((u,d)=>u+d,0),l=`
        <p><strong>Terminal:</strong> ${e.terminal}</p>
        <p><strong>Tipo:</strong> ${e.request_type==="SEMANA"?"Semanal":e.request_type==="FIN_SEMANA"?"Fin de Semana":"Extra"}</p>
        <p><strong>Solicitado por:</strong> ${e.created_by}</p>
        <p><strong>Fecha:</strong> ${new Date(e.requested_at).toLocaleString("es-CL")}</p>
        
        <table style="width: 100%; border-collapse: collapse; margin-top: 16px;">
            <thead>
                <tr style="background-color: #f8fafc;">
                    <th style="padding: 10px; text-align: left; border-bottom: 2px solid #e2e8f0;">Insumo</th>
                    <th style="padding: 10px; text-align: center; border-bottom: 2px solid #e2e8f0;">Cantidad</th>
                </tr>
            </thead>
            <tbody>
                ${i}
            </tbody>
            <tfoot>
                <tr style="background-color: #f8fafc; font-weight: bold;">
                    <td style="padding: 10px;">TOTAL</td>
                    <td style="padding: 10px; text-align: center;">${s} unidades</td>
                </tr>
            </tfoot>
        </table>
        
        ${n.body?`<div style="margin-top: 24px;">${n.body}</div>`:""}
    `,{emailService:c}=await zEe(async()=>{const{emailService:u}=await Promise.resolve().then(()=>UX);return{emailService:u}},void 0,import.meta.url);await c.sendEmail({audience:"manual",manualRecipients:n.recipients.split(",").map(u=>u.trim()),subject:n.subject,body:l,module:"informativos"})},eNe=async e=>{const{data:t,error:r}=await le.from("supply_requests").update({status:"RETIRADO",retrieved_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw console.error("Error marking request as retrieved:",r),r;return t},tNe=async e=>{const{error:t}=await le.from("supply_requests").delete().eq("id",e);if(t)throw console.error("Error deleting supply request:",t),t},rNe=async(e,t)=>{const r=t.name.split(".").pop(),a=`receipts/${`${e}_${Date.now()}.${r}`}`,{error:i}=await le.storage.from("supply-receipts").upload(a,t);if(i)throw console.error("Error uploading receipt:",i),i;const{error:s}=await le.from("supply_requests").update({receipt_path:a}).eq("id",e);if(s)throw console.error("Error updating receipt path:",s),s;return a},nNe=async e=>{const{data:t}=await le.storage.from("supply-receipts").createSignedUrl(e,3600);return(t==null?void 0:t.signedUrl)||""},aNe=async()=>{if(!Fr())return[];const{data:e,error:t}=await le.from("supply_deliveries").select("*, supply:supplies(*)").order("delivered_at",{ascending:!1});if(t)throw console.error("Error fetching deliveries with supplies:",t),t;return e||[]},iNe=async(e,t,r)=>{const n=new Date,a=VEe(n,r),{data:i,error:s}=await le.from("supply_deliveries").insert({...e,created_by:t,delivered_at:n.toISOString(),next_delivery_at:(a==null?void 0:a.toISOString())||null}).select().single();if(s)throw console.error("Error creating delivery:",s),s;return i},I8=async()=>{if(!Fr())return[];const{data:e,error:t}=await le.from("supply_email_settings").select("*").order("trigger");if(t)throw console.error("Error fetching email settings:",t),t;return e||[]},bO=async(e,t)=>{const{data:r,error:n}=await le.from("supply_email_settings").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating email settings:",n),n;return r},sNe=async(e,t)=>{const{data:r,error:n}=await le.from("supply_email_settings").insert({trigger:e,...t}).select().single();if(n)throw console.error("Error creating email settings:",n),n;return r},oNe=async()=>{const e=await I8();if(e.length>0)return e;const t=[{trigger:"MONDAY",recipients:"",subject:"Solicitud Semanal de Insumos",body:"",enabled:!0},{trigger:"FRIDAY",recipients:"",subject:"Solicitud Fin de Semana - Insumos",body:"",enabled:!0},{trigger:"MANUAL",recipients:"",subject:"Solicitud Manual de Insumos",body:"",enabled:!0}],r=[];for(const n of t)try{const a=await sNe(n.trigger,{recipients:n.recipients,subject:n.subject,body:n.body,enabled:n.enabled});r.push(a)}catch(a){console.error(`Error creating default email setting for ${n.trigger}:`,a)}return r},lNe=async()=>{if(!Fr())return{pending:0,retrieved:0};const{data:e,error:t}=await le.from("supply_requests").select("status");if(t)throw console.error("Error fetching request stats:",t),t;const r=(e==null?void 0:e.filter(a=>a.status==="PENDIENTE").length)||0,n=(e==null?void 0:e.filter(a=>a.status==="RETIRADO").length)||0;return{pending:r,retrieved:n}},cNe=async(e=7)=>{if(!Fr())return[];const t=new Date;t.setDate(t.getDate()+e);const{data:r,error:n}=await le.from("supply_deliveries").select("*, supply:supplies(*)").not("next_delivery_at","is",null).lte("next_delivery_at",t.toISOString()).order("next_delivery_at");if(n)throw console.error("Error fetching upcoming deliveries:",n),n;return r||[]},uNe=()=>{const[e,t]=T.useState({supplies:[],requestStats:{pending:0,retrieved:0},upcomingDeliveries:[],recentRequests:[]}),[r,n]=T.useState(!0);T.useEffect(()=>{(async()=>{try{const[s,l,c,u]=await Promise.all([Bv(),lNe(),cNe(7),R8()]);t({supplies:s,requestStats:l,upcomingDeliveries:c,recentRequests:u.slice(0,5)})}catch(s){console.error("Error loading dashboard stats:",s)}finally{n(!1)}})()},[]),e.supplies.filter(i=>i.min_stock>0&&i.min_stock>0);const a=e.upcomingDeliveries.filter(i=>yw(i.next_delivery_at,3));return r?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[o.jsx("div",{className:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-brand-100 text-brand-600",children:o.jsx(H,{name:"package",size:22})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Insumos"}),o.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.supplies.length})]})]})}),o.jsx("div",{className:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-warning-100 text-warning-600",children:o.jsx(H,{name:"clock",size:22})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Pendientes"}),o.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.requestStats.pending})]})]})}),o.jsx("div",{className:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-success-100 text-success-600",children:o.jsx(H,{name:"check-circle",size:22})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Retiradas"}),o.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.requestStats.retrieved})]})]})}),o.jsx("div",{className:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`flex h-11 w-11 items-center justify-center rounded-xl ${a.length>0?"bg-danger-100 text-danger-600":"bg-slate-100 text-slate-500"}`,children:o.jsx(H,{name:"alert-triangle",size:22})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Alertas"}),o.jsx("p",{className:"text-2xl font-bold text-slate-800",children:a.length})]})]})})]}),o.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-4",children:[o.jsx("h3",{className:"font-semibold text-slate-800",children:"Solicitudes Recientes"}),o.jsx(H,{name:"file-text",size:18,className:"text-slate-400"})]}),o.jsx("div",{className:"divide-y divide-slate-100",children:e.recentRequests.length===0?o.jsx("div",{className:"px-5 py-8 text-center text-sm text-slate-500",children:"No hay solicitudes registradas"}):e.recentRequests.map(i=>o.jsxs("div",{className:"flex items-center gap-4 px-5 py-3.5",children:[o.jsx("div",{className:`flex h-9 w-9 items-center justify-center rounded-lg ${i.status==="PENDIENTE"?"bg-warning-100 text-warning-600":"bg-success-100 text-success-600"}`,children:o.jsx(H,{name:i.status==="PENDIENTE"?"clock":"check",size:16})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("p",{className:"text-sm font-medium text-slate-800 truncate",children:[bw(i.request_type)," - ",i.terminal]}),o.jsx("p",{className:"text-xs text-slate-500",children:new Date(i.requested_at).toLocaleDateString("es-CL")})]}),o.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${i.status==="PENDIENTE"?"bg-warning-100 text-warning-700":"bg-success-100 text-success-700"}`,children:i.status==="PENDIENTE"?"Pendiente":"Retirado"})]},i.id))})]}),o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-4",children:[o.jsx("h3",{className:"font-semibold text-slate-800",children:"Entregas Proximas"}),o.jsx(H,{name:"calendar",size:18,className:"text-slate-400"})]}),o.jsx("div",{className:"divide-y divide-slate-100",children:e.upcomingDeliveries.length===0?o.jsx("div",{className:"px-5 py-8 text-center text-sm text-slate-500",children:"No hay entregas programadas"}):e.upcomingDeliveries.slice(0,5).map(i=>{const s=yw(i.next_delivery_at,3);return o.jsxs("div",{className:"flex items-center gap-4 px-5 py-3.5",children:[o.jsx("div",{className:`flex h-9 w-9 items-center justify-center rounded-lg ${s?"bg-danger-100 text-danger-600":"bg-slate-100 text-slate-600"}`,children:o.jsx(H,{name:"user",size:16})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-slate-800 truncate",children:i.staff_name}),o.jsx("p",{className:"text-xs text-slate-500",children:i.next_delivery_at?new Date(i.next_delivery_at).toLocaleDateString("es-CL"):"Sin fecha"})]}),s&&o.jsx("span",{className:"inline-flex items-center rounded-full bg-danger-100 px-2.5 py-0.5 text-xs font-medium text-danger-700",children:"Vencida"})]},i.id)})})]})]}),o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-4",children:[o.jsx("h3",{className:"font-semibold text-slate-800",children:"Catalogo de Insumos"}),o.jsxs("span",{className:"text-sm text-slate-500",children:[e.supplies.length," insumos"]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("th",{className:"px-5 py-3",children:"Nombre"}),o.jsx("th",{className:"px-5 py-3",children:"Unidad"}),o.jsx("th",{className:"px-5 py-3 text-center",children:"Vida Util"}),o.jsx("th",{className:"px-5 py-3 text-center",children:"Stock Min"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:e.supplies.map(i=>o.jsxs("tr",{className:"hover:bg-slate-50",children:[o.jsx("td",{className:"px-5 py-3 text-sm font-medium text-slate-800",children:i.name}),o.jsx("td",{className:"px-5 py-3 text-sm text-slate-600",children:i.unit}),o.jsx("td",{className:"px-5 py-3 text-center text-sm text-slate-600",children:i.life_days?`${i.life_days} dias`:"-"}),o.jsx("td",{className:"px-5 py-3 text-center text-sm text-slate-600",children:i.min_stock>0?i.min_stock:"-"})]},i.id))})]})})]})]})},dNe=({onSuccess:e,onCancel:t})=>{const r=ht(S=>S.session),[n,a]=T.useState([]),[i,s]=T.useState([]),[l,c]=T.useState(!0),[u,d]=T.useState(!1),[f,h]=T.useState(Su.TERMINAL[0]),[p,v]=T.useState(HEe()),[g,x]=T.useState([]),[b,m]=T.useState({supply_id:"",quantity:0});T.useEffect(()=>{(async()=>{try{const[E,N]=await Promise.all([Bv(),P8()]);a(E),s(N)}catch(E){console.error("Error loading form data:",E)}finally{c(!1)}})()},[]),T.useEffect(()=>{if(n.length===0||i.length===0)return;let S;p==="SEMANA"?S=qEe(i,n):p==="FIN_SEMANA"?S=WEe(i,n):S=[],x(S.map(E=>({...E,is_extra:!1})))},[p,n,i]);const y=(S,E)=>{x(N=>N.map(A=>A.supply_id===S?{...A,quantity:Math.max(0,E)}:A))},_=()=>{if(!b.supply_id||b.quantity<=0)return;const S=n.find(N=>N.id===b.supply_id);if(!S)return;const E=g.find(N=>N.supply_id===b.supply_id);x(E?N=>N.map(A=>A.supply_id===b.supply_id?{...A,quantity:A.quantity+b.quantity}:A):N=>[...N,{supply_id:b.supply_id,supply_name:S.name,quantity:b.quantity,is_extra:!0}]),m({supply_id:"",quantity:0})},w=S=>{x(E=>E.filter(N=>N.supply_id!==S))},j=async()=>{const S=g.filter(E=>E.quantity>0);if(S.length===0){alert("Debe agregar al menos un insumo");return}d(!0);try{const E={};S.forEach(N=>{E[N.supply_name]=N.quantity}),await JEe({terminal:f,request_type:p,items:S.map(N=>({supply_id:N.supply_id,quantity:N.quantity,is_extra:N.is_extra}))},(r==null?void 0:r.supervisorName)||"Usuario",E),e()}catch(E){console.error("Error creating request:",E),alert("Error al crear la solicitud")}finally{d(!1)}};return l?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Terminal"}),o.jsx("select",{value:f,onChange:S=>h(S.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:Su.TERMINAL.map(S=>o.jsx("option",{value:S,children:S},S))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Tipo de Solicitud"}),o.jsxs("select",{value:p,onChange:S=>v(S.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:[o.jsx("option",{value:"SEMANA",children:"Semana (Lun-Vie)"}),o.jsx("option",{value:"FIN_SEMANA",children:"Fin de Semana"}),o.jsx("option",{value:"EXTRA",children:"Extra"})]})]})]}),p!=="EXTRA"&&o.jsx("div",{className:"rounded-lg bg-brand-50 p-3 text-sm text-brand-700",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(H,{name:"info",size:18,className:"mt-0.5 flex-shrink-0"}),o.jsx("p",{children:p==="SEMANA"?"Calculo automatico para Lunes a Viernes incluyendo noches de lunes a jueves.":"Calculo automatico para Viernes noche, Sabado y Domingo completos."})]})}),o.jsx("div",{className:"rounded-lg border border-slate-200 overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-slate-50 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("th",{className:"px-4 py-2",children:"Insumo"}),o.jsx("th",{className:"px-4 py-2 text-right w-24",children:"Cantidad"}),o.jsx("th",{className:"px-4 py-2 w-12"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:g.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"px-4 py-6 text-center text-slate-500",children:"No hay insumos. Agregue items extra."})}):g.map(S=>o.jsxs("tr",{children:[o.jsxs("td",{className:"px-4 py-2 text-slate-800",children:[S.supply_name,S.is_extra&&o.jsx("span",{className:"ml-2 text-xs text-brand-500",children:"(extra)"})]}),o.jsx("td",{className:"px-4 py-2",children:o.jsx("input",{type:"number",min:"0",value:S.quantity,onChange:E=>y(S.supply_id,parseInt(E.target.value)||0),className:"w-full rounded border border-slate-300 px-2 py-1 text-right text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})}),o.jsx("td",{className:"px-4 py-2 text-center",children:o.jsx("button",{onClick:()=>w(S.supply_id),className:"rounded p-1 text-slate-400 hover:bg-danger-100 hover:text-danger-600",children:o.jsx(H,{name:"x",size:16})})})]},S.supply_id))})]})}),o.jsxs("div",{className:"rounded-lg border border-dashed border-slate-300 p-4",children:[o.jsx("p",{className:"mb-3 text-sm font-medium text-slate-700",children:"Agregar insumo extra"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("select",{value:b.supply_id,onChange:S=>m(E=>({...E,supply_id:S.target.value})),className:"flex-1 rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:[o.jsx("option",{value:"",children:"Seleccionar insumo..."}),n.filter(S=>!g.some(E=>E.supply_id===S.id)).map(S=>o.jsx("option",{value:S.id,children:S.name},S.id))]}),o.jsx("input",{type:"number",min:"1",placeholder:"Cant.",value:b.quantity||"",onChange:S=>m(E=>({...E,quantity:parseInt(S.target.value)||0})),className:"w-20 rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"}),o.jsx("button",{onClick:_,disabled:!b.supply_id||b.quantity<=0,className:"rounded-lg bg-slate-100 px-3 py-2 text-slate-600 hover:bg-slate-200 disabled:opacity-50",children:o.jsx(H,{name:"plus",size:18})})]})]}),o.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-slate-50 px-4 py-3",children:[o.jsxs("span",{className:"text-sm font-medium text-slate-600",children:["Total items: ",g.filter(S=>S.quantity>0).length]}),o.jsxs("span",{className:"text-sm font-bold text-slate-800",children:[g.reduce((S,E)=>S+E.quantity,0)," unidades"]})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:t,className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),o.jsxs("button",{onClick:j,disabled:u||g.filter(S=>S.quantity>0).length===0,className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[u&&o.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Crear Solicitud"]})]})]})},fNe=({onRefresh:e})=>{const[t,r]=T.useState([]),[n,a]=T.useState(!0),[i,s]=T.useState(!1),[l,c]=T.useState(null),[u,d]=T.useState(!1),[f,h]=T.useState("ALL"),[p,v]=T.useState(null),[g,x]=T.useState(null),[b,m]=T.useState(!1),[y,_]=T.useState(null),w=async()=>{try{a(!0);const k=await R8(f!=="ALL"?{status:f}:void 0);r(k)}catch(k){console.error("Error loading requests:",k)}finally{a(!1)}};T.useEffect(()=>{w()},[f]);const j=async k=>{try{const V=await QEe(k);c(V),d(!0)}catch(V){console.error("Error loading request detail:",V)}},S=k=>{v(k),x(null),_(null)},E=async()=>{if(!(!p||!g)){m(!0),_(null);try{await rNe(p,g),await eNe(p),v(null),x(null),await w(),e==null||e()}catch(k){console.error("Error closing request:",k);const V=k instanceof Error?k.message:"Error desconocido";V.includes("Bucket not found")||V.includes("not found")?_('El bucket de almacenamiento no existe. Contacte al administrador para crear el bucket "supply-receipts" en Supabase Storage.'):V.includes("security")||V.includes("policy")?_("Error de permisos. Verifique las polticas del bucket en Supabase."):_(`Error al cerrar solicitud: ${V}`)}finally{m(!1)}}},N=k=>{var K;const V=(K=k.target.files)==null?void 0:K[0];if(V){if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(V.type)){_("Tipo de archivo no vlido. Use PDF, JPG o PNG.");return}if(V.size>5*1024*1024){_("El archivo excede 5MB.");return}x(V),_(null)}},A=async k=>{if(confirm("Eliminar esta solicitud?"))try{await tNe(k),await w(),e==null||e()}catch(V){console.error("Error deleting request:",V)}},O=async k=>{try{const V=await nNe(k);window.open(V,"_blank")}catch(V){console.error("Error getting receipt URL:",V)}},D=()=>{s(!1),w(),e==null||e()};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>h("ALL"),className:`rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${f==="ALL"?"bg-brand-500 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Todas"}),o.jsx("button",{onClick:()=>h("PENDIENTE"),className:`rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${f==="PENDIENTE"?"bg-warning-500 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Pendientes"}),o.jsx("button",{onClick:()=>h("RETIRADO"),className:`rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${f==="RETIRADO"?"bg-success-500 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Retiradas"})]}),o.jsxs("button",{onClick:()=>s(!0),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 transition-colors",children:[o.jsx(H,{name:"plus",size:18}),o.jsx("span",{children:"Nueva Solicitud"})]})]}),o.jsx("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:n?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):t.length===0?o.jsxs("div",{className:"px-5 py-12 text-center",children:[o.jsx(H,{name:"inbox",size:40,className:"mx-auto text-slate-300 mb-3"}),o.jsx("p",{className:"text-sm text-slate-500",children:"No hay solicitudes registradas"})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("th",{className:"px-4 py-3",children:"Fecha"}),o.jsx("th",{className:"px-4 py-3",children:"Tipo"}),o.jsx("th",{className:"px-4 py-3",children:"Terminal"}),o.jsx("th",{className:"px-4 py-3",children:"Estado"}),o.jsx("th",{className:"px-4 py-3",children:"Creado por"}),o.jsx("th",{className:"px-4 py-3 text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:t.map(k=>o.jsxs("tr",{className:"hover:bg-slate-50",children:[o.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:new Date(k.requested_at).toLocaleDateString("es-CL")}),o.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:bw(k.request_type)}),o.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:k.terminal}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${k.status==="PENDIENTE"?"bg-warning-100 text-warning-700":"bg-success-100 text-success-700"}`,children:yO(k.status)})}),o.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:k.created_by}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[o.jsx("button",{onClick:()=>j(k.id),className:"rounded-lg p-1.5 text-slate-500 hover:bg-slate-100 hover:text-brand-600",title:"Ver detalle",children:o.jsx(H,{name:"eye",size:16})}),k.status==="PENDIENTE"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>S(k.id),className:"rounded-lg p-1.5 text-slate-500 hover:bg-success-100 hover:text-success-600",title:"Cerrar solicitud (requiere boleta)",children:o.jsx(H,{name:"check",size:16})}),o.jsx("button",{onClick:()=>A(k.id),className:"rounded-lg p-1.5 text-slate-500 hover:bg-danger-100 hover:text-danger-600",title:"Eliminar",children:o.jsx(H,{name:"trash",size:16})})]}),k.receipt_path&&o.jsx("button",{onClick:()=>O(k.receipt_path),className:"rounded-lg p-1.5 text-slate-500 hover:bg-slate-100 hover:text-brand-600",title:"Ver boleta",children:o.jsx(H,{name:"file",size:16})})]})})]},k.id))})]})})}),i&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/60 p-4 backdrop-blur-sm",children:o.jsxs("div",{className:"relative mt-8 w-full max-w-2xl rounded-2xl bg-white p-6 shadow-xl",children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Nueva Solicitud"}),o.jsx("button",{onClick:()=>s(!1),className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:o.jsx(H,{name:"x",size:20})})]}),o.jsx(dNe,{onSuccess:D,onCancel:()=>s(!1)})]})}),u&&l&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/60 p-4 backdrop-blur-sm",children:o.jsxs("div",{className:"relative mt-8 w-full max-w-lg rounded-2xl bg-white p-6 shadow-xl",children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Detalle Solicitud"}),o.jsx("button",{onClick:()=>{d(!1),c(null)},className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:o.jsx(H,{name:"x",size:20})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500",children:"Tipo:"}),o.jsx("span",{className:"ml-2 font-medium text-slate-800",children:bw(l.request_type)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500",children:"Estado:"}),o.jsx("span",{className:`ml-2 font-medium ${l.status==="PENDIENTE"?"text-warning-600":"text-success-600"}`,children:yO(l.status)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500",children:"Terminal:"}),o.jsx("span",{className:"ml-2 font-medium text-slate-800",children:l.terminal})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500",children:"Fecha:"}),o.jsx("span",{className:"ml-2 font-medium text-slate-800",children:new Date(l.requested_at).toLocaleDateString("es-CL")})]})]}),o.jsx("div",{className:"rounded-lg border border-slate-200 overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-slate-50 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("th",{className:"px-4 py-2",children:"Insumo"}),o.jsx("th",{className:"px-4 py-2 text-right",children:"Cantidad"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:l.items.map(k=>{var V;return o.jsxs("tr",{children:[o.jsxs("td",{className:"px-4 py-2 text-slate-800",children:[((V=k.supply)==null?void 0:V.name)||"Desconocido",k.is_extra&&o.jsx("span",{className:"ml-2 text-xs text-brand-500",children:"(extra)"})]}),o.jsx("td",{className:"px-4 py-2 text-right font-medium text-slate-800",children:k.quantity})]},k.id)})})]})})]})]})}),p&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/60 p-4 backdrop-blur-sm",children:o.jsxs("div",{className:"relative mt-8 w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Cerrar Solicitud"}),o.jsx("button",{onClick:()=>v(null),className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:o.jsx(H,{name:"x",size:20})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"rounded-lg bg-warning-50 p-4 text-sm text-warning-800",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(H,{name:"alert-triangle",size:18,className:"mt-0.5 flex-shrink-0"}),o.jsxs("p",{children:[o.jsx("strong",{children:"Obligatorio:"})," Debe adjuntar la boleta o comprobante para cerrar esta solicitud."]})]})}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700",children:"Boleta o Comprobante (PDF, JPG, PNG - max 5MB) *"}),o.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:N,className:"block w-full text-sm text-slate-500 file:mr-4 file:rounded-lg file:border-0 file:bg-brand-50 file:px-4 file:py-2 file:text-sm file:font-medium file:text-brand-700 hover:file:bg-brand-100"}),g&&o.jsxs("p",{className:"mt-2 flex items-center gap-2 text-sm text-success-600",children:[o.jsx(H,{name:"check",size:16}),g.name]})]}),y&&o.jsx("div",{className:"rounded-lg bg-danger-50 p-3 text-sm text-danger-700",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(H,{name:"alert-triangle",size:16,className:"mt-0.5 flex-shrink-0"}),o.jsx("p",{children:y})]})}),o.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[o.jsx("button",{onClick:()=>v(null),className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),o.jsxs("button",{onClick:E,disabled:!g||b,className:"inline-flex items-center gap-2 rounded-lg bg-success-500 px-4 py-2 text-sm font-medium text-white hover:bg-success-600 disabled:opacity-50",children:[b&&o.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Cerrar Solicitud"]})]})]})]})})]})},hNe=()=>{const e=ht(m=>m.session),[t,r]=T.useState([]),[n,a]=T.useState([]),[i,s]=T.useState([]),[l,c]=T.useState(!0),[u,d]=T.useState(!1),[f,h]=T.useState(!1),[p,v]=T.useState({supply_id:"",staff_rut:"",staff_name:"",quantity:1,notes:""}),g=async()=>{try{const[m,y,_]=await Promise.all([Bv(),aNe(),xR({mode:"ALL"},{cargo:"cleaner",status:"ACTIVO"})]);r(m),a(y),s(_)}catch(m){console.error("Error loading deliveries data:",m)}finally{c(!1)}};T.useEffect(()=>{g()},[]);const x=m=>{const y=i.find(_=>_.rut===m);v(_=>({..._,staff_rut:m,staff_name:(y==null?void 0:y.nombre)||""}))},b=async()=>{if(!p.supply_id||!p.staff_rut||p.quantity<=0){alert("Complete todos los campos requeridos");return}h(!0);try{const m=t.find(y=>y.id===p.supply_id);await iNe(p,(e==null?void 0:e.supervisorName)||"Usuario",(m==null?void 0:m.life_days)||null),d(!1),v({supply_id:"",staff_rut:"",staff_name:"",quantity:1,notes:""}),await g()}catch(m){console.error("Error creating delivery:",m),alert("Error al registrar la entrega")}finally{h(!1)}};return l?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-sm text-slate-500",children:"Registro de entregas de insumos a personal de limpieza"}),o.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600",children:[o.jsx(H,{name:"plus",size:18}),o.jsx("span",{children:"Nueva Entrega"})]})]}),o.jsx("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:n.length===0?o.jsxs("div",{className:"px-5 py-12 text-center",children:[o.jsx(H,{name:"package",size:40,className:"mx-auto text-slate-300 mb-3"}),o.jsx("p",{className:"text-sm text-slate-500",children:"No hay entregas registradas"})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("th",{className:"px-4 py-3",children:"Fecha"}),o.jsx("th",{className:"px-4 py-3",children:"Personal"}),o.jsx("th",{className:"px-4 py-3",children:"Insumo"}),o.jsx("th",{className:"px-4 py-3 text-center",children:"Cantidad"}),o.jsx("th",{className:"px-4 py-3",children:"Proxima Entrega"}),o.jsx("th",{className:"px-4 py-3",children:"Notas"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:n.map(m=>{var _;const y=yw(m.next_delivery_at,3);return o.jsxs("tr",{className:"hover:bg-slate-50",children:[o.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:new Date(m.delivered_at).toLocaleDateString("es-CL")}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-slate-800",children:m.staff_name}),o.jsx("p",{className:"text-xs text-slate-500",children:m.staff_rut})]})}),o.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:((_=m.supply)==null?void 0:_.name)||"Desconocido"}),o.jsx("td",{className:"px-4 py-3 text-center text-sm font-medium text-slate-800",children:m.quantity}),o.jsx("td",{className:"px-4 py-3",children:m.next_delivery_at?o.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${y?"bg-danger-100 text-danger-700":"bg-slate-100 text-slate-600"}`,children:new Date(m.next_delivery_at).toLocaleDateString("es-CL")}):o.jsx("span",{className:"text-sm text-slate-400",children:"-"})}),o.jsx("td",{className:"px-4 py-3 text-sm text-slate-500",children:m.notes||"-"})]},m.id)})})]})})}),u&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/60 p-4 backdrop-blur-sm",children:o.jsxs("div",{className:"relative mt-8 w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Nueva Entrega"}),o.jsx("button",{onClick:()=>d(!1),className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:o.jsx(H,{name:"x",size:20})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Personal (Cleaner)"}),o.jsxs("select",{value:p.staff_rut,onChange:m=>x(m.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:[o.jsx("option",{value:"",children:"Seleccionar cleaner..."}),i.map(m=>o.jsxs("option",{value:m.rut,children:[m.nombre," (",m.rut,")"]},m.rut))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Insumo"}),o.jsxs("select",{value:p.supply_id,onChange:m=>v(y=>({...y,supply_id:m.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:[o.jsx("option",{value:"",children:"Seleccionar insumo..."}),t.map(m=>o.jsxs("option",{value:m.id,children:[m.name," (",m.unit,")",m.life_days&&` - ${m.life_days} dias vida util`]},m.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Cantidad"}),o.jsx("input",{type:"number",min:"1",value:p.quantity,onChange:m=>v(y=>({...y,quantity:parseInt(m.target.value)||1})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Notas (opcional)"}),o.jsx("textarea",{value:p.notes||"",onChange:m=>v(y=>({...y,notes:m.target.value})),rows:2,className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",placeholder:"Observaciones..."})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[o.jsx("button",{onClick:()=>d(!1),className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),o.jsxs("button",{onClick:b,disabled:f||!p.supply_id||!p.staff_rut,className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[f&&o.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Registrar Entrega"]})]})]})]})})]})},pNe=["rollo","bolsa","unidad","litro","kit"],mNe=()=>{const[e,t]=T.useState("consumption"),[r,n]=T.useState("TERMINAL"),[a,i]=T.useState([]),[s,l]=T.useState([]),[c,u]=T.useState(!0),[d,f]=T.useState(!1),[h,p]=T.useState(!1),[v,g]=T.useState({name:"",unit:"unidad",life_days:null,min_stock:0}),x=async()=>{try{const[E,N]=await Promise.all([Bv(),P8()]);i(E),l(N)}catch(E){console.error("Error loading config data:",E)}finally{u(!1)}};T.useEffect(()=>{x()},[]);const b=(E,N,A,O)=>{const D=s.find(k=>k.location_type===E&&k.location_name===N&&k.period===A&&k.supply_id===O);return(D==null?void 0:D.quantity)||0},m=async(E,N,A,O,D)=>{f(!0);try{await YEe({location_type:E,location_name:N,period:A,supply_id:O,quantity:Math.max(0,D)}),await x()}catch(k){console.error("Error updating profile:",k)}finally{f(!1)}},y=async(E,N,A)=>{f(!0);try{await GEe(E,{[N]:A}),await x()}catch(O){console.error("Error updating supply:",O)}finally{f(!1)}},_=async()=>{if(!v.name.trim()){alert("Ingrese el nombre del insumo");return}f(!0);try{await KEe({name:v.name.trim(),unit:v.unit,life_days:v.life_days,min_stock:v.min_stock}),g({name:"",unit:"unidad",life_days:null,min_stock:0}),p(!1),await x()}catch(E){console.error("Error creating supply:",E),alert("Error al crear el insumo")}finally{f(!1)}},w=async(E,N)=>{if(confirm(`Eliminar insumo "${N}"? Esta accion no se puede deshacer.`)){f(!0);try{await XEe(E),await x()}catch(A){console.error("Error deleting supply:",A),alert("Error al eliminar. Puede que tenga datos asociados.")}finally{f(!1)}}};if(c)return o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})});const j=r==="TERMINAL"?[{key:"DAY",label:"Dia"},{key:"NIGHT",label:"Noche"}]:[{key:"DAY",label:"Dia (L-V)"},{key:"WEEKEND",label:"Fin de Semana"}],S=r==="TERMINAL"?Su.TERMINAL:Su.CABEZAL;return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2 border-b border-slate-200 pb-2",children:[o.jsx("button",{onClick:()=>t("consumption"),className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${e==="consumption"?"bg-brand-500 text-white":"text-slate-600 hover:bg-slate-100"}`,children:"Consumos"}),o.jsx("button",{onClick:()=>t("supplies"),className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${e==="supplies"?"bg-brand-500 text-white":"text-slate-600 hover:bg-slate-100"}`,children:"Insumos"})]}),e==="consumption"&&o.jsxs("div",{className:"space-y-4",children:[a.length===0&&o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 p-8 text-center",children:[o.jsx(H,{name:"package",size:40,className:"mx-auto text-slate-300 mb-3"}),o.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"No hay insumos configurados. Agregue insumos primero."}),o.jsxs("button",{onClick:()=>t("supplies"),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600",children:[o.jsx(H,{name:"plus",size:18}),"Agregar Insumos"]})]}),a.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>n("TERMINAL"),className:`flex-1 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors ${r==="TERMINAL"?"bg-slate-800 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Terminal"}),o.jsx("button",{onClick:()=>n("CABEZAL"),className:`flex-1 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors ${r==="CABEZAL"?"bg-slate-800 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Cabezales"})]}),d&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-brand-600",children:[o.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-brand-500 border-t-transparent"}),"Guardando..."]}),S.map(E=>o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:[o.jsx("div",{className:"border-b border-slate-100 px-4 py-3 bg-slate-50",children:o.jsx("h3",{className:"font-medium text-slate-800",children:E})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("th",{className:"px-4 py-2",children:"Insumo"}),j.map(N=>o.jsx("th",{className:"px-4 py-2 text-center w-28",children:N.label},N.key))]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:a.map(N=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-4 py-2 text-slate-800",children:N.name}),j.map(A=>o.jsx("td",{className:"px-4 py-2 text-center",children:o.jsx("input",{type:"number",min:"0",value:b(r,E,A.key,N.id),onChange:O=>m(r,E,A.key,N.id,parseInt(O.target.value)||0),className:"w-16 rounded border border-slate-300 px-2 py-1 text-center text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})},A.key))]},N.id))})]})})]},E))]})]}),e==="supplies"&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex justify-end",children:o.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600",children:[o.jsx(H,{name:"plus",size:18}),"Agregar Insumo"]})}),h&&o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-brand-200 p-4",children:[o.jsx("h4",{className:"font-medium text-slate-800 mb-3",children:"Nuevo Insumo"}),o.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 md:grid-cols-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Nombre *"}),o.jsx("input",{type:"text",value:v.name,onChange:E=>g(N=>({...N,name:E.target.value})),placeholder:"Ej: Nova",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Unidad *"}),o.jsx("select",{value:v.unit,onChange:E=>g(N=>({...N,unit:E.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:pNe.map(E=>o.jsx("option",{value:E,children:E},E))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Vida Util (dias)"}),o.jsx("input",{type:"number",min:"0",value:v.life_days||"",placeholder:"Opcional",onChange:E=>g(N=>({...N,life_days:E.target.value?parseInt(E.target.value):null})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Stock Minimo"}),o.jsx("input",{type:"number",min:"0",value:v.min_stock,onChange:E=>g(N=>({...N,min_stock:parseInt(E.target.value)||0})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[o.jsx("button",{onClick:()=>{p(!1),g({name:"",unit:"unidad",life_days:null,min_stock:0})},className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),o.jsxs("button",{onClick:_,disabled:d||!v.name.trim(),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[d&&o.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Guardar"]})]})]}),a.length===0&&!h?o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 p-8 text-center",children:[o.jsx(H,{name:"package",size:40,className:"mx-auto text-slate-300 mb-3"}),o.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"No hay insumos configurados"}),o.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600",children:[o.jsx(H,{name:"plus",size:18}),"Agregar Primer Insumo"]})]}):a.length>0&&o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:[o.jsx("div",{className:"border-b border-slate-100 px-4 py-3 bg-slate-50",children:o.jsx("h3",{className:"font-medium text-slate-800",children:"Configuracion de Insumos"})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("th",{className:"px-4 py-2",children:"Insumo"}),o.jsx("th",{className:"px-4 py-2",children:"Unidad"}),o.jsx("th",{className:"px-4 py-2 text-center w-28",children:"Vida Util (dias)"}),o.jsx("th",{className:"px-4 py-2 text-center w-28",children:"Stock Minimo"}),o.jsx("th",{className:"px-4 py-2 w-16"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:a.map(E=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-4 py-2 font-medium text-slate-800",children:E.name}),o.jsx("td",{className:"px-4 py-2 text-slate-600",children:E.unit}),o.jsx("td",{className:"px-4 py-2 text-center",children:o.jsx("input",{type:"number",min:"0",value:E.life_days||"",placeholder:"-",onChange:N=>y(E.id,"life_days",N.target.value?parseInt(N.target.value):null),className:"w-16 rounded border border-slate-300 px-2 py-1 text-center text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})}),o.jsx("td",{className:"px-4 py-2 text-center",children:o.jsx("input",{type:"number",min:"0",value:E.min_stock||"",placeholder:"-",onChange:N=>y(E.id,"min_stock",parseInt(N.target.value)||0),className:"w-16 rounded border border-slate-300 px-2 py-1 text-center text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})}),o.jsx("td",{className:"px-4 py-2 text-center",children:o.jsx("button",{onClick:()=>w(E.id,E.name),className:"rounded p-1 text-slate-400 hover:bg-danger-100 hover:text-danger-600",children:o.jsx(H,{name:"trash",size:16})})})]},E.id))})]})})]})]})]})},gNe={MONDAY:"Lunes (Solicitud Semanal)",FRIDAY:"Viernes (Fin de Semana)",MANUAL:"Manual"},vNe=()=>{const[e,t]=T.useState([]),[r,n]=T.useState(!0),[a,i]=T.useState(!1),[s,l]=T.useState(null),[c,u]=T.useState(null),[d,f]=T.useState(null),[h,p]=T.useState({recipients:"",subject:"",body:"",enabled:!0}),v=async()=>{try{const w=await I8();return t(w),w}catch(w){return console.error("Error loading email settings:",w),[]}finally{n(!1)}},g=async()=>{i(!0);try{const w=await oNe();t(w)}catch(w){console.error("Error creating default settings:",w),alert("Error al crear configuraciones. Verifique que las tablas existan en Supabase.")}finally{i(!1)}};T.useEffect(()=>{v()},[]);const x=w=>{f(w.id),p({recipients:w.recipients,subject:w.subject,body:w.body,enabled:w.enabled})},b=()=>{f(null),p({recipients:"",subject:"",body:"",enabled:!0})},m=async w=>{l(w);try{await bO(w,h),await v(),f(null)}catch(j){console.error("Error saving email settings:",j),alert("Error al guardar la configuracion")}finally{l(null)}},y=async w=>{l(w.id);try{await bO(w.id,{enabled:!w.enabled}),await v()}catch(j){console.error("Error toggling email setting:",j)}finally{l(null)}},_=async w=>{if(!w.recipients){alert("Configure los destinatarios primero");return}u(w.id);try{await Ui.sendEmail({audience:"manual",manualRecipients:w.recipients.split(",").map(j=>j.trim()),subject:`[TEST] ${w.subject}`,body:`<p>Este es un correo de prueba.</p><hr/>${w.body}`,module:"informativos"}),alert("Correo de prueba enviado")}catch(j){console.error("Error sending test email:",j),alert("Error al enviar el correo de prueba")}finally{u(null)}};return r?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):e.length===0?o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 p-8 text-center",children:[o.jsx(H,{name:"send",size:40,className:"mx-auto text-slate-300 mb-3"}),o.jsx("h3",{className:"font-medium text-slate-800 mb-2",children:"Configurar Correos Automaticos"}),o.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Cree las configuraciones de correo para las solicitudes automaticas de Lunes, Viernes y Manual."}),o.jsxs("button",{onClick:g,disabled:a,className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[a?o.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}):o.jsx(H,{name:"plus",size:18}),"Crear Configuraciones"]})]})}):o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"rounded-lg bg-slate-50 p-4 text-sm text-slate-600",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(H,{name:"info",size:18,className:"mt-0.5 flex-shrink-0 text-slate-500"}),o.jsx("p",{children:"Configure los destinatarios y plantillas de correo para las solicitudes automaticas. Los correos se envian automaticamente los dias configurados."})]})}),o.jsx("div",{className:"space-y-4",children:e.map(w=>{const j=d===w.id,S=s===w.id,E=c===w.id;return o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-4 py-3 bg-slate-50",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:`h-2 w-2 rounded-full ${w.enabled?"bg-success-500":"bg-slate-400"}`}),o.jsx("h3",{className:"font-medium text-slate-800",children:gNe[w.trigger]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("button",{onClick:()=>y(w),disabled:S,className:`rounded-lg px-3 py-1 text-xs font-medium transition-colors ${w.enabled?"bg-success-100 text-success-700 hover:bg-success-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:w.enabled?"Activo":"Inactivo"})})]}),o.jsx("div",{className:"p-4",children:j?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Destinatarios (separados por coma)"}),o.jsx("input",{type:"text",value:h.recipients,onChange:N=>p(A=>({...A,recipients:N.target.value})),placeholder:"correo1@ejemplo.com, correo2@ejemplo.com",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Asunto"}),o.jsx("input",{type:"text",value:h.subject,onChange:N=>p(A=>({...A,subject:N.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Cuerpo del mensaje (HTML permitido)"}),o.jsx("textarea",{value:h.body,onChange:N=>p(A=>({...A,body:N.target.value})),rows:4,placeholder:"Ejemplo: <p>Estimados,</p><p>Se adjunta la solicitud de insumos.</p>",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx("button",{onClick:b,className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),o.jsxs("button",{onClick:()=>m(w.id),disabled:S,className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[S&&o.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Guardar"]})]})]}):o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Destinatarios"}),o.jsx("p",{className:"mt-1 text-sm text-slate-800",children:w.recipients||o.jsx("span",{className:"text-slate-400 italic",children:"No configurado"})})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Asunto"}),o.jsx("p",{className:"mt-1 text-sm text-slate-800",children:w.subject})]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Mensaje"}),o.jsx("p",{className:"mt-1 text-sm text-slate-600 line-clamp-2",children:w.body||o.jsx("span",{className:"text-slate-400 italic",children:"Sin mensaje"})})]}),o.jsxs("div",{className:"flex gap-2 pt-2",children:[o.jsxs("button",{onClick:()=>x(w),className:"inline-flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-sm font-medium text-slate-600 hover:bg-slate-100",children:[o.jsx(H,{name:"edit",size:14}),"Editar"]}),o.jsxs("button",{onClick:()=>_(w),disabled:E||!w.recipients,className:"inline-flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-sm font-medium text-brand-600 hover:bg-brand-50 disabled:opacity-50",children:[E?o.jsx("div",{className:"h-3.5 w-3.5 animate-spin rounded-full border-2 border-brand-500 border-t-transparent"}):o.jsx(H,{name:"send",size:14}),"Enviar Prueba"]})]})]})})]},w.id)})})]})},xNe=[{key:"dashboard",label:"Dashboard",icon:"bar-chart"},{key:"solicitudes",label:"Solicitudes",icon:"file-text"},{key:"entregas",label:"Entregas",icon:"package"},{key:"config",label:"Configuracion",icon:"settings"}],yNe=()=>{const[e,t]=T.useState("dashboard"),[r,n]=T.useState("consumption"),[a,i]=T.useState(0),s=()=>i(l=>l+1);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Solicitudes de Insumos"}),o.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Gestion inteligente de insumos, solicitudes y entregas a personal"})]}),o.jsx("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 pb-3",children:xNe.map(l=>o.jsxs("button",{onClick:()=>t(l.key),className:`inline-flex items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium transition-all ${e===l.key?"bg-brand-500 text-white shadow-brand":"text-slate-600 hover:bg-slate-100"}`,children:[o.jsx(H,{name:l.icon,size:18}),o.jsx("span",{className:"hidden sm:inline",children:l.label})]},l.key))}),o.jsxs("div",{children:[e==="dashboard"&&o.jsx(uNe,{}),e==="solicitudes"&&o.jsx(fNe,{onRefresh:s}),e==="entregas"&&o.jsx(hNe,{}),e==="config"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>n("consumption"),className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${r==="consumption"?"bg-slate-800 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Consumos e Insumos"}),o.jsx("button",{onClick:()=>n("emails"),className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${r==="emails"?"bg-slate-800 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Correos"})]}),r==="consumption"&&o.jsx(mNe,{}),r==="emails"&&o.jsx(vNe,{})]})]},a)]})},bNe=()=>{const e=ht(a=>a.session),t=ht(a=>a.hydrateSession),[r,n]=T.useState(!0);return T.useEffect(()=>{t().finally(()=>n(!1))},[t]),r?o.jsx(zt,{label:"Validando sesin"}):e?o.jsx(xP,{}):o.jsx(vP,{to:"/",replace:!0})},wNe=()=>o.jsx(L7,{children:o.jsxs(C7,{children:[o.jsx(qt,{path:"/",element:o.jsx(G7,{})}),o.jsx(qt,{element:o.jsx(bNe,{}),children:o.jsxs(qt,{element:o.jsx(eB,{}),children:[o.jsx(qt,{path:"/personal",element:o.jsx(FX,{})}),o.jsx(qt,{path:"/reuniones",element:o.jsx(RY,{})}),o.jsx(qt,{path:"/tareas",element:o.jsx(jQ,{})}),o.jsx(qt,{path:"/informativos",element:o.jsx(EQ,{})}),o.jsx(qt,{path:"/asistencia",element:o.jsx(TJ,{})}),o.jsx(qt,{path:"/aseo/interior",element:o.jsx(OJ,{})}),o.jsx(qt,{path:"/aseo/exterior",element:o.jsx(kJ,{})}),o.jsx(qt,{path:"/aseo/rodillo",element:o.jsx(PJ,{})}),o.jsx(qt,{path:"/credenciales",element:o.jsx(vEe,{})}),o.jsx(qt,{path:"/solicitudes",element:o.jsx(yEe,{})}),o.jsx(qt,{path:"/minicheck/extintor",element:o.jsx(REe,{})}),o.jsx(qt,{path:"/minicheck/tag",element:o.jsx(IEe,{})}),o.jsx(qt,{path:"/minicheck/mobileye",element:o.jsx(DEe,{})}),o.jsx(qt,{path:"/minicheck/odometro",element:o.jsx(MEe,{})}),o.jsx(qt,{path:"/minicheck/publicidad",element:o.jsx(LEe,{})}),o.jsx(qt,{path:"/estado-flota",element:o.jsx(FEe,{})}),o.jsx(qt,{path:"/insumos",element:o.jsx(yNe,{})})]})}),o.jsx(qt,{path:"*",element:o.jsx(vP,{to:"/",replace:!0})})]})});hy.createRoot(document.getElementById("root")).render(o.jsx(z.StrictMode,{children:o.jsx(LF,{children:o.jsx(wNe,{})})}));
