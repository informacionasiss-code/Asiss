var aV=Object.defineProperty;var oC=e=>{throw TypeError(e)};var iV=(e,t,r)=>t in e?aV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var $r=(e,t,r)=>iV(e,typeof t!="symbol"?t+"":t,r),J_=(e,t,r)=>t.has(e)||oC("Cannot "+r);var xe=(e,t,r)=>(J_(e,t,"read from private field"),r?r.call(e):t.get(e)),It=(e,t,r)=>t.has(e)?oC("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ft=(e,t,r,n)=>(J_(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),ur=(e,t,r)=>(J_(e,t,"access private method"),r);var Qx=(e,t,r,n)=>({set _(a){ft(e,t,a,r)},get _(){return xe(e,t,n)}});function VD(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Zx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function sV(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var GD={exports:{}},B2={},KD={exports:{}},hr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uv=Symbol.for("react.element"),oV=Symbol.for("react.portal"),lV=Symbol.for("react.fragment"),cV=Symbol.for("react.strict_mode"),uV=Symbol.for("react.profiler"),dV=Symbol.for("react.provider"),fV=Symbol.for("react.context"),hV=Symbol.for("react.forward_ref"),pV=Symbol.for("react.suspense"),mV=Symbol.for("react.memo"),gV=Symbol.for("react.lazy"),lC=Symbol.iterator;function vV(e){return e===null||typeof e!="object"?null:(e=lC&&e[lC]||e["@@iterator"],typeof e=="function"?e:null)}var YD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},XD=Object.assign,JD={};function vp(e,t,r){this.props=e,this.context=t,this.refs=JD,this.updater=r||YD}vp.prototype.isReactComponent={};vp.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vp.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function QD(){}QD.prototype=vp.prototype;function y4(e,t,r){this.props=e,this.context=t,this.refs=JD,this.updater=r||YD}var b4=y4.prototype=new QD;b4.constructor=y4;XD(b4,vp.prototype);b4.isPureReactComponent=!0;var cC=Array.isArray,ZD=Object.prototype.hasOwnProperty,w4={current:null},eI={key:!0,ref:!0,__self:!0,__source:!0};function tI(e,t,r){var n,a={},i=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)ZD.call(t,n)&&!eI.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Uv,type:e,key:i,ref:s,props:a,_owner:w4.current}}function xV(e,t){return{$$typeof:Uv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function _4(e){return typeof e=="object"&&e!==null&&e.$$typeof===Uv}function yV(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var uC=/\/+/g;function Q_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yV(""+e.key):t.toString(36)}function ly(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Uv:case oV:s=!0}}if(s)return s=e,a=a(s),e=n===""?"."+Q_(s,0):n,cC(a)?(r="",e!=null&&(r=e.replace(uC,"$&/")+"/"),ly(a,t,r,"",function(u){return u})):a!=null&&(_4(a)&&(a=xV(a,r+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(uC,"$&/")+"/")+e)),t.push(a)),1;if(s=0,n=n===""?".":n+":",cC(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Q_(i,l);s+=ly(i,t,r,c,a)}else if(c=vV(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Q_(i,l++),s+=ly(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function e1(e,t,r){if(e==null)return e;var n=[],a=0;return ly(e,n,"","",function(i){return t.call(r,i,a++)}),n}function bV(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Bi={current:null},cy={transition:null},wV={ReactCurrentDispatcher:Bi,ReactCurrentBatchConfig:cy,ReactCurrentOwner:w4};function rI(){throw Error("act(...) is not supported in production builds of React.")}hr.Children={map:e1,forEach:function(e,t,r){e1(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return e1(e,function(){t++}),t},toArray:function(e){return e1(e,function(t){return t})||[]},only:function(e){if(!_4(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};hr.Component=vp;hr.Fragment=lV;hr.Profiler=uV;hr.PureComponent=y4;hr.StrictMode=cV;hr.Suspense=pV;hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wV;hr.act=rI;hr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=XD({},e.props),a=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=w4.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)ZD.call(t,c)&&!eI.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Uv,type:e.type,key:a,ref:i,props:n,_owner:s}};hr.createContext=function(e){return e={$$typeof:fV,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:dV,_context:e},e.Consumer=e};hr.createElement=tI;hr.createFactory=function(e){var t=tI.bind(null,e);return t.type=e,t};hr.createRef=function(){return{current:null}};hr.forwardRef=function(e){return{$$typeof:hV,render:e}};hr.isValidElement=_4;hr.lazy=function(e){return{$$typeof:gV,_payload:{_status:-1,_result:e},_init:bV}};hr.memo=function(e,t){return{$$typeof:mV,type:e,compare:t===void 0?null:t}};hr.startTransition=function(e){var t=cy.transition;cy.transition={};try{e()}finally{cy.transition=t}};hr.unstable_act=rI;hr.useCallback=function(e,t){return Bi.current.useCallback(e,t)};hr.useContext=function(e){return Bi.current.useContext(e)};hr.useDebugValue=function(){};hr.useDeferredValue=function(e){return Bi.current.useDeferredValue(e)};hr.useEffect=function(e,t){return Bi.current.useEffect(e,t)};hr.useId=function(){return Bi.current.useId()};hr.useImperativeHandle=function(e,t,r){return Bi.current.useImperativeHandle(e,t,r)};hr.useInsertionEffect=function(e,t){return Bi.current.useInsertionEffect(e,t)};hr.useLayoutEffect=function(e,t){return Bi.current.useLayoutEffect(e,t)};hr.useMemo=function(e,t){return Bi.current.useMemo(e,t)};hr.useReducer=function(e,t,r){return Bi.current.useReducer(e,t,r)};hr.useRef=function(e){return Bi.current.useRef(e)};hr.useState=function(e){return Bi.current.useState(e)};hr.useSyncExternalStore=function(e,t,r){return Bi.current.useSyncExternalStore(e,t,r)};hr.useTransition=function(){return Bi.current.useTransition()};hr.version="18.3.1";KD.exports=hr;var D=KD.exports;const ye=Dr(D),_V=VD({__proto__:null,default:ye},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NV=D,SV=Symbol.for("react.element"),jV=Symbol.for("react.fragment"),AV=Object.prototype.hasOwnProperty,EV=NV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TV={key:!0,ref:!0,__self:!0,__source:!0};function nI(e,t,r){var n,a={},i=null,s=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)AV.call(t,n)&&!TV.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:SV,type:e,key:i,ref:s,props:a,_owner:EV.current}}B2.Fragment=jV;B2.jsx=nI;B2.jsxs=nI;GD.exports=B2;var o=GD.exports,GN={},aI={exports:{}},Is={},iI={exports:{}},sI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(X,oe){var we=X.length;X.push(oe);e:for(;0<we;){var _e=we-1>>>1,k=X[_e];if(0<a(k,oe))X[_e]=oe,X[we]=k,we=_e;else break e}}function r(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var oe=X[0],we=X.pop();if(we!==oe){X[0]=we;e:for(var _e=0,k=X.length,F=k>>>1;_e<F;){var B=2*(_e+1)-1,U=X[B],J=B+1,me=X[J];if(0>a(U,we))J<k&&0>a(me,U)?(X[_e]=me,X[J]=we,_e=J):(X[_e]=U,X[B]=we,_e=B);else if(J<k&&0>a(me,we))X[_e]=me,X[J]=we,_e=J;else break e}}return oe}function a(X,oe){var we=X.sortIndex-oe.sortIndex;return we!==0?we:X.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,f=null,p=3,h=!1,g=!1,m=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(X){for(var oe=r(u);oe!==null;){if(oe.callback===null)n(u);else if(oe.startTime<=X)n(u),oe.sortIndex=oe.expirationTime,t(c,oe);else break;oe=r(u)}}function N(X){if(m=!1,b(X),!g)if(r(c)!==null)g=!0,ie(_);else{var oe=r(u);oe!==null&&re(N,oe.startTime-X)}}function _(X,oe){g=!1,m&&(m=!1,y(A),A=-1),h=!0;var we=p;try{for(b(oe),f=r(c);f!==null&&(!(f.expirationTime>oe)||X&&!O());){var _e=f.callback;if(typeof _e=="function"){f.callback=null,p=f.priorityLevel;var k=_e(f.expirationTime<=oe);oe=e.unstable_now(),typeof k=="function"?f.callback=k:f===r(c)&&n(c),b(oe)}else n(c);f=r(c)}if(f!==null)var F=!0;else{var B=r(u);B!==null&&re(N,B.startTime-oe),F=!1}return F}finally{f=null,p=we,h=!1}}var E=!1,j=null,A=-1,T=5,P=-1;function O(){return!(e.unstable_now()-P<T)}function R(){if(j!==null){var X=e.unstable_now();P=X;var oe=!0;try{oe=j(!0,X)}finally{oe?I():(E=!1,j=null)}}else E=!1}var I;if(typeof v=="function")I=function(){v(R)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Y=z.port2;z.port1.onmessage=R,I=function(){Y.postMessage(null)}}else I=function(){x(R,0)};function ie(X){j=X,E||(E=!0,I())}function re(X,oe){A=x(function(){X(e.unstable_now())},oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_continueExecution=function(){g||h||(g=!0,ie(_))},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(X){switch(p){case 1:case 2:case 3:var oe=3;break;default:oe=p}var we=p;p=oe;try{return X()}finally{p=we}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(X,oe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var we=p;p=X;try{return oe()}finally{p=we}},e.unstable_scheduleCallback=function(X,oe,we){var _e=e.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?_e+we:_e):we=_e,X){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=we+k,X={id:d++,callback:oe,priorityLevel:X,startTime:we,expirationTime:k,sortIndex:-1},we>_e?(X.sortIndex=we,t(u,X),r(c)===null&&X===r(u)&&(m?(y(A),A=-1):m=!0,re(N,we-_e))):(X.sortIndex=k,t(c,X),g||h||(g=!0,ie(_))),X},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(X){var oe=p;return function(){var we=p;p=oe;try{return X.apply(this,arguments)}finally{p=we}}}})(sI);iI.exports=sI;var CV=iI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kV=D,Rs=CV;function et(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oI=new Set,wg={};function Ff(e,t){O0(e,t),O0(e+"Capture",t)}function O0(e,t){for(wg[e]=t,e=0;e<t.length;e++)oI.add(t[e])}var _c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),KN=Object.prototype.hasOwnProperty,OV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dC={},fC={};function PV(e){return KN.call(fC,e)?!0:KN.call(dC,e)?!1:OV.test(e)?fC[e]=!0:(dC[e]=!0,!1)}function LV(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function RV(e,t,r,n){if(t===null||typeof t>"u"||LV(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ui(e,t,r,n,a,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var ei={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ei[e]=new Ui(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ei[t]=new Ui(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ei[e]=new Ui(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ei[e]=new Ui(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ei[e]=new Ui(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ei[e]=new Ui(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ei[e]=new Ui(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ei[e]=new Ui(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ei[e]=new Ui(e,5,!1,e.toLowerCase(),null,!1,!1)});var N4=/[\-:]([a-z])/g;function S4(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(N4,S4);ei[t]=new Ui(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(N4,S4);ei[t]=new Ui(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(N4,S4);ei[t]=new Ui(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ei[e]=new Ui(e,1,!1,e.toLowerCase(),null,!1,!1)});ei.xlinkHref=new Ui("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ei[e]=new Ui(e,1,!1,e.toLowerCase(),null,!0,!0)});function j4(e,t,r,n){var a=ei.hasOwnProperty(t)?ei[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(RV(t,r,a,n)&&(r=null),n||a===null?PV(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Rc=kV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,t1=Symbol.for("react.element"),kh=Symbol.for("react.portal"),Oh=Symbol.for("react.fragment"),A4=Symbol.for("react.strict_mode"),YN=Symbol.for("react.profiler"),lI=Symbol.for("react.provider"),cI=Symbol.for("react.context"),E4=Symbol.for("react.forward_ref"),XN=Symbol.for("react.suspense"),JN=Symbol.for("react.suspense_list"),T4=Symbol.for("react.memo"),cu=Symbol.for("react.lazy"),uI=Symbol.for("react.offscreen"),hC=Symbol.iterator;function mm(e){return e===null||typeof e!="object"?null:(e=hC&&e[hC]||e["@@iterator"],typeof e=="function"?e:null)}var Cn=Object.assign,Z_;function Fm(e){if(Z_===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Z_=t&&t[1]||""}return`
`+Z_+e}var e5=!1;function t5(e,t){if(!e||e5)return"";e5=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),s=a.length-1,l=i.length-1;1<=s&&0<=l&&a[s]!==i[l];)l--;for(;1<=s&&0<=l;s--,l--)if(a[s]!==i[l]){if(s!==1||l!==1)do if(s--,l--,0>l||a[s]!==i[l]){var c=`
`+a[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=l);break}}}finally{e5=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Fm(e):""}function DV(e){switch(e.tag){case 5:return Fm(e.type);case 16:return Fm("Lazy");case 13:return Fm("Suspense");case 19:return Fm("SuspenseList");case 0:case 2:case 15:return e=t5(e.type,!1),e;case 11:return e=t5(e.type.render,!1),e;case 1:return e=t5(e.type,!0),e;default:return""}}function QN(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Oh:return"Fragment";case kh:return"Portal";case YN:return"Profiler";case A4:return"StrictMode";case XN:return"Suspense";case JN:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case cI:return(e.displayName||"Context")+".Consumer";case lI:return(e._context.displayName||"Context")+".Provider";case E4:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case T4:return t=e.displayName||null,t!==null?t:QN(e.type)||"Memo";case cu:t=e._payload,e=e._init;try{return QN(e(t))}catch{}}return null}function IV(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return QN(t);case 8:return t===A4?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Hu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function dI(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function MV(e){var t=dI(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(s){n=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function r1(e){e._valueTracker||(e._valueTracker=MV(e))}function fI(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=dI(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Oy(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ZN(e,t){var r=t.checked;return Cn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function pC(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Hu(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function hI(e,t){t=t.checked,t!=null&&j4(e,"checked",t,!1)}function eS(e,t){hI(e,t);var r=Hu(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?tS(e,t.type,r):t.hasOwnProperty("defaultValue")&&tS(e,t.type,Hu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mC(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function tS(e,t,r){(t!=="number"||Oy(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var $m=Array.isArray;function Xh(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Hu(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function rS(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(et(91));return Cn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gC(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(et(92));if($m(r)){if(1<r.length)throw Error(et(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Hu(r)}}function pI(e,t){var r=Hu(t.value),n=Hu(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function vC(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function mI(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nS(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?mI(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var n1,gI=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(n1=n1||document.createElement("div"),n1.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=n1.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _g(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ym={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FV=["Webkit","ms","Moz","O"];Object.keys(Ym).forEach(function(e){FV.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ym[t]=Ym[e]})});function vI(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ym.hasOwnProperty(e)&&Ym[e]?(""+t).trim():t+"px"}function xI(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=vI(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var $V=Cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function aS(e,t){if(t){if($V[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(et(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(et(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(et(61))}if(t.style!=null&&typeof t.style!="object")throw Error(et(62))}}function iS(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sS=null;function C4(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var oS=null,Jh=null,Qh=null;function xC(e){if(e=Hv(e)){if(typeof oS!="function")throw Error(et(280));var t=e.stateNode;t&&(t=W2(t),oS(e.stateNode,e.type,t))}}function yI(e){Jh?Qh?Qh.push(e):Qh=[e]:Jh=e}function bI(){if(Jh){var e=Jh,t=Qh;if(Qh=Jh=null,xC(e),t)for(e=0;e<t.length;e++)xC(t[e])}}function wI(e,t){return e(t)}function _I(){}var r5=!1;function NI(e,t,r){if(r5)return e(t,r);r5=!0;try{return wI(e,t,r)}finally{r5=!1,(Jh!==null||Qh!==null)&&(_I(),bI())}}function Ng(e,t){var r=e.stateNode;if(r===null)return null;var n=W2(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(et(231,t,typeof r));return r}var lS=!1;if(_c)try{var gm={};Object.defineProperty(gm,"passive",{get:function(){lS=!0}}),window.addEventListener("test",gm,gm),window.removeEventListener("test",gm,gm)}catch{lS=!1}function BV(e,t,r,n,a,i,s,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Xm=!1,Py=null,Ly=!1,cS=null,UV={onError:function(e){Xm=!0,Py=e}};function zV(e,t,r,n,a,i,s,l,c){Xm=!1,Py=null,BV.apply(UV,arguments)}function qV(e,t,r,n,a,i,s,l,c){if(zV.apply(this,arguments),Xm){if(Xm){var u=Py;Xm=!1,Py=null}else throw Error(et(198));Ly||(Ly=!0,cS=u)}}function $f(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function SI(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function yC(e){if($f(e)!==e)throw Error(et(188))}function HV(e){var t=e.alternate;if(!t){if(t=$f(e),t===null)throw Error(et(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return yC(a),e;if(i===n)return yC(a),t;i=i.sibling}throw Error(et(188))}if(r.return!==n.return)r=a,n=i;else{for(var s=!1,l=a.child;l;){if(l===r){s=!0,r=a,n=i;break}if(l===n){s=!0,n=a,r=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===r){s=!0,r=i,n=a;break}if(l===n){s=!0,n=i,r=a;break}l=l.sibling}if(!s)throw Error(et(189))}}if(r.alternate!==n)throw Error(et(190))}if(r.tag!==3)throw Error(et(188));return r.stateNode.current===r?e:t}function jI(e){return e=HV(e),e!==null?AI(e):null}function AI(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=AI(e);if(t!==null)return t;e=e.sibling}return null}var EI=Rs.unstable_scheduleCallback,bC=Rs.unstable_cancelCallback,WV=Rs.unstable_shouldYield,VV=Rs.unstable_requestPaint,Gn=Rs.unstable_now,GV=Rs.unstable_getCurrentPriorityLevel,k4=Rs.unstable_ImmediatePriority,TI=Rs.unstable_UserBlockingPriority,Ry=Rs.unstable_NormalPriority,KV=Rs.unstable_LowPriority,CI=Rs.unstable_IdlePriority,U2=null,wl=null;function YV(e){if(wl&&typeof wl.onCommitFiberRoot=="function")try{wl.onCommitFiberRoot(U2,e,void 0,(e.current.flags&128)===128)}catch{}}var Vo=Math.clz32?Math.clz32:QV,XV=Math.log,JV=Math.LN2;function QV(e){return e>>>=0,e===0?32:31-(XV(e)/JV|0)|0}var a1=64,i1=4194304;function Bm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Dy(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,s=r&268435455;if(s!==0){var l=s&~a;l!==0?n=Bm(l):(i&=s,i!==0&&(n=Bm(i)))}else s=r&~a,s!==0?n=Bm(s):i!==0&&(n=Bm(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Vo(t),a=1<<r,n|=e[r],t&=~a;return n}function ZV(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eG(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-Vo(i),l=1<<s,c=a[s];c===-1?(!(l&r)||l&n)&&(a[s]=ZV(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function uS(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function kI(){var e=a1;return a1<<=1,!(a1&4194240)&&(a1=64),e}function n5(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function zv(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Vo(t),e[t]=r}function tG(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Vo(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function O4(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Vo(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Hr=0;function OI(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var PI,P4,LI,RI,DI,dS=!1,s1=[],Lu=null,Ru=null,Du=null,Sg=new Map,jg=new Map,fu=[],rG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wC(e,t){switch(e){case"focusin":case"focusout":Lu=null;break;case"dragenter":case"dragleave":Ru=null;break;case"mouseover":case"mouseout":Du=null;break;case"pointerover":case"pointerout":Sg.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jg.delete(t.pointerId)}}function vm(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Hv(t),t!==null&&P4(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function nG(e,t,r,n,a){switch(t){case"focusin":return Lu=vm(Lu,e,t,r,n,a),!0;case"dragenter":return Ru=vm(Ru,e,t,r,n,a),!0;case"mouseover":return Du=vm(Du,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Sg.set(i,vm(Sg.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,jg.set(i,vm(jg.get(i)||null,e,t,r,n,a)),!0}return!1}function II(e){var t=Wd(e.target);if(t!==null){var r=$f(t);if(r!==null){if(t=r.tag,t===13){if(t=SI(r),t!==null){e.blockedOn=t,DI(e.priority,function(){LI(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function uy(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=fS(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);sS=n,r.target.dispatchEvent(n),sS=null}else return t=Hv(r),t!==null&&P4(t),e.blockedOn=r,!1;t.shift()}return!0}function _C(e,t,r){uy(e)&&r.delete(t)}function aG(){dS=!1,Lu!==null&&uy(Lu)&&(Lu=null),Ru!==null&&uy(Ru)&&(Ru=null),Du!==null&&uy(Du)&&(Du=null),Sg.forEach(_C),jg.forEach(_C)}function xm(e,t){e.blockedOn===t&&(e.blockedOn=null,dS||(dS=!0,Rs.unstable_scheduleCallback(Rs.unstable_NormalPriority,aG)))}function Ag(e){function t(a){return xm(a,e)}if(0<s1.length){xm(s1[0],e);for(var r=1;r<s1.length;r++){var n=s1[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Lu!==null&&xm(Lu,e),Ru!==null&&xm(Ru,e),Du!==null&&xm(Du,e),Sg.forEach(t),jg.forEach(t),r=0;r<fu.length;r++)n=fu[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<fu.length&&(r=fu[0],r.blockedOn===null);)II(r),r.blockedOn===null&&fu.shift()}var Zh=Rc.ReactCurrentBatchConfig,Iy=!0;function iG(e,t,r,n){var a=Hr,i=Zh.transition;Zh.transition=null;try{Hr=1,L4(e,t,r,n)}finally{Hr=a,Zh.transition=i}}function sG(e,t,r,n){var a=Hr,i=Zh.transition;Zh.transition=null;try{Hr=4,L4(e,t,r,n)}finally{Hr=a,Zh.transition=i}}function L4(e,t,r,n){if(Iy){var a=fS(e,t,r,n);if(a===null)h5(e,t,n,My,r),wC(e,n);else if(nG(a,e,t,r,n))n.stopPropagation();else if(wC(e,n),t&4&&-1<rG.indexOf(e)){for(;a!==null;){var i=Hv(a);if(i!==null&&PI(i),i=fS(e,t,r,n),i===null&&h5(e,t,n,My,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else h5(e,t,n,null,r)}}var My=null;function fS(e,t,r,n){if(My=null,e=C4(n),e=Wd(e),e!==null)if(t=$f(e),t===null)e=null;else if(r=t.tag,r===13){if(e=SI(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return My=e,null}function MI(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(GV()){case k4:return 1;case TI:return 4;case Ry:case KV:return 16;case CI:return 536870912;default:return 16}default:return 16}}var Au=null,R4=null,dy=null;function FI(){if(dy)return dy;var e,t=R4,r=t.length,n,a="value"in Au?Au.value:Au.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===a[i-n];n++);return dy=a.slice(e,1<n?1-n:void 0)}function fy(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function o1(){return!0}function NC(){return!1}function Ms(e){function t(r,n,a,i,s){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?o1:NC,this.isPropagationStopped=NC,this}return Cn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=o1)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=o1)},persist:function(){},isPersistent:o1}),t}var xp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},D4=Ms(xp),qv=Cn({},xp,{view:0,detail:0}),oG=Ms(qv),a5,i5,ym,z2=Cn({},qv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:I4,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ym&&(ym&&e.type==="mousemove"?(a5=e.screenX-ym.screenX,i5=e.screenY-ym.screenY):i5=a5=0,ym=e),a5)},movementY:function(e){return"movementY"in e?e.movementY:i5}}),SC=Ms(z2),lG=Cn({},z2,{dataTransfer:0}),cG=Ms(lG),uG=Cn({},qv,{relatedTarget:0}),s5=Ms(uG),dG=Cn({},xp,{animationName:0,elapsedTime:0,pseudoElement:0}),fG=Ms(dG),hG=Cn({},xp,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),pG=Ms(hG),mG=Cn({},xp,{data:0}),jC=Ms(mG),gG={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vG={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xG={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yG(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xG[e])?!!t[e]:!1}function I4(){return yG}var bG=Cn({},qv,{key:function(e){if(e.key){var t=gG[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=fy(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vG[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:I4,charCode:function(e){return e.type==="keypress"?fy(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fy(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wG=Ms(bG),_G=Cn({},z2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),AC=Ms(_G),NG=Cn({},qv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:I4}),SG=Ms(NG),jG=Cn({},xp,{propertyName:0,elapsedTime:0,pseudoElement:0}),AG=Ms(jG),EG=Cn({},z2,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),TG=Ms(EG),CG=[9,13,27,32],M4=_c&&"CompositionEvent"in window,Jm=null;_c&&"documentMode"in document&&(Jm=document.documentMode);var kG=_c&&"TextEvent"in window&&!Jm,$I=_c&&(!M4||Jm&&8<Jm&&11>=Jm),EC=" ",TC=!1;function BI(e,t){switch(e){case"keyup":return CG.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function UI(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ph=!1;function OG(e,t){switch(e){case"compositionend":return UI(t);case"keypress":return t.which!==32?null:(TC=!0,EC);case"textInput":return e=t.data,e===EC&&TC?null:e;default:return null}}function PG(e,t){if(Ph)return e==="compositionend"||!M4&&BI(e,t)?(e=FI(),dy=R4=Au=null,Ph=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $I&&t.locale!=="ko"?null:t.data;default:return null}}var LG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!LG[e.type]:t==="textarea"}function zI(e,t,r,n){yI(n),t=Fy(t,"onChange"),0<t.length&&(r=new D4("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Qm=null,Eg=null;function RG(e){ZI(e,0)}function q2(e){var t=Dh(e);if(fI(t))return e}function DG(e,t){if(e==="change")return t}var qI=!1;if(_c){var o5;if(_c){var l5="oninput"in document;if(!l5){var kC=document.createElement("div");kC.setAttribute("oninput","return;"),l5=typeof kC.oninput=="function"}o5=l5}else o5=!1;qI=o5&&(!document.documentMode||9<document.documentMode)}function OC(){Qm&&(Qm.detachEvent("onpropertychange",HI),Eg=Qm=null)}function HI(e){if(e.propertyName==="value"&&q2(Eg)){var t=[];zI(t,Eg,e,C4(e)),NI(RG,t)}}function IG(e,t,r){e==="focusin"?(OC(),Qm=t,Eg=r,Qm.attachEvent("onpropertychange",HI)):e==="focusout"&&OC()}function MG(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return q2(Eg)}function FG(e,t){if(e==="click")return q2(t)}function $G(e,t){if(e==="input"||e==="change")return q2(t)}function BG(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xo=typeof Object.is=="function"?Object.is:BG;function Tg(e,t){if(Xo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!KN.call(t,a)||!Xo(e[a],t[a]))return!1}return!0}function PC(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function LC(e,t){var r=PC(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=PC(r)}}function WI(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?WI(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function VI(){for(var e=window,t=Oy();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Oy(e.document)}return t}function F4(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function UG(e){var t=VI(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&WI(r.ownerDocument.documentElement,r)){if(n!==null&&F4(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=LC(r,i);var s=LC(r,n);a&&s&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var zG=_c&&"documentMode"in document&&11>=document.documentMode,Lh=null,hS=null,Zm=null,pS=!1;function RC(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;pS||Lh==null||Lh!==Oy(n)||(n=Lh,"selectionStart"in n&&F4(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Zm&&Tg(Zm,n)||(Zm=n,n=Fy(hS,"onSelect"),0<n.length&&(t=new D4("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Lh)))}function l1(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Rh={animationend:l1("Animation","AnimationEnd"),animationiteration:l1("Animation","AnimationIteration"),animationstart:l1("Animation","AnimationStart"),transitionend:l1("Transition","TransitionEnd")},c5={},GI={};_c&&(GI=document.createElement("div").style,"AnimationEvent"in window||(delete Rh.animationend.animation,delete Rh.animationiteration.animation,delete Rh.animationstart.animation),"TransitionEvent"in window||delete Rh.transitionend.transition);function H2(e){if(c5[e])return c5[e];if(!Rh[e])return e;var t=Rh[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in GI)return c5[e]=t[r];return e}var KI=H2("animationend"),YI=H2("animationiteration"),XI=H2("animationstart"),JI=H2("transitionend"),QI=new Map,DC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qu(e,t){QI.set(e,t),Ff(t,[e])}for(var u5=0;u5<DC.length;u5++){var d5=DC[u5],qG=d5.toLowerCase(),HG=d5[0].toUpperCase()+d5.slice(1);Qu(qG,"on"+HG)}Qu(KI,"onAnimationEnd");Qu(YI,"onAnimationIteration");Qu(XI,"onAnimationStart");Qu("dblclick","onDoubleClick");Qu("focusin","onFocus");Qu("focusout","onBlur");Qu(JI,"onTransitionEnd");O0("onMouseEnter",["mouseout","mouseover"]);O0("onMouseLeave",["mouseout","mouseover"]);O0("onPointerEnter",["pointerout","pointerover"]);O0("onPointerLeave",["pointerout","pointerover"]);Ff("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ff("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ff("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ff("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ff("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ff("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Um="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WG=new Set("cancel close invalid load scroll toggle".split(" ").concat(Um));function IC(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,qV(n,t,void 0,e),e.currentTarget=null}function ZI(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var s=n.length-1;0<=s;s--){var l=n[s],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;IC(a,l,u),i=c}else for(s=0;s<n.length;s++){if(l=n[s],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;IC(a,l,u),i=c}}}if(Ly)throw e=cS,Ly=!1,cS=null,e}function un(e,t){var r=t[yS];r===void 0&&(r=t[yS]=new Set);var n=e+"__bubble";r.has(n)||(e7(t,e,2,!1),r.add(n))}function f5(e,t,r){var n=0;t&&(n|=4),e7(r,e,n,t)}var c1="_reactListening"+Math.random().toString(36).slice(2);function Cg(e){if(!e[c1]){e[c1]=!0,oI.forEach(function(r){r!=="selectionchange"&&(WG.has(r)||f5(r,!1,e),f5(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[c1]||(t[c1]=!0,f5("selectionchange",!1,t))}}function e7(e,t,r,n){switch(MI(t)){case 1:var a=iG;break;case 4:a=sG;break;default:a=L4}r=a.bind(null,t,r,e),a=void 0,!lS||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function h5(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(s===4)for(s=n.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;s=s.return}for(;l!==null;){if(s=Wd(l),s===null)return;if(c=s.tag,c===5||c===6){n=i=s;continue e}l=l.parentNode}}n=n.return}NI(function(){var u=i,d=C4(r),f=[];e:{var p=QI.get(e);if(p!==void 0){var h=D4,g=e;switch(e){case"keypress":if(fy(r)===0)break e;case"keydown":case"keyup":h=wG;break;case"focusin":g="focus",h=s5;break;case"focusout":g="blur",h=s5;break;case"beforeblur":case"afterblur":h=s5;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=SC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=cG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=SG;break;case KI:case YI:case XI:h=fG;break;case JI:h=AG;break;case"scroll":h=oG;break;case"wheel":h=TG;break;case"copy":case"cut":case"paste":h=pG;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=AC}var m=(t&4)!==0,x=!m&&e==="scroll",y=m?p!==null?p+"Capture":null:p;m=[];for(var v=u,b;v!==null;){b=v;var N=b.stateNode;if(b.tag===5&&N!==null&&(b=N,y!==null&&(N=Ng(v,y),N!=null&&m.push(kg(v,N,b)))),x)break;v=v.return}0<m.length&&(p=new h(p,g,null,r,d),f.push({event:p,listeners:m}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",p&&r!==sS&&(g=r.relatedTarget||r.fromElement)&&(Wd(g)||g[Nc]))break e;if((h||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,h?(g=r.relatedTarget||r.toElement,h=u,g=g?Wd(g):null,g!==null&&(x=$f(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(h=null,g=u),h!==g)){if(m=SC,N="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=AC,N="onPointerLeave",y="onPointerEnter",v="pointer"),x=h==null?p:Dh(h),b=g==null?p:Dh(g),p=new m(N,v+"leave",h,r,d),p.target=x,p.relatedTarget=b,N=null,Wd(d)===u&&(m=new m(y,v+"enter",g,r,d),m.target=b,m.relatedTarget=x,N=m),x=N,h&&g)t:{for(m=h,y=g,v=0,b=m;b;b=uh(b))v++;for(b=0,N=y;N;N=uh(N))b++;for(;0<v-b;)m=uh(m),v--;for(;0<b-v;)y=uh(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=uh(m),y=uh(y)}m=null}else m=null;h!==null&&MC(f,p,h,m,!1),g!==null&&x!==null&&MC(f,x,g,m,!0)}}e:{if(p=u?Dh(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var _=DG;else if(CC(p))if(qI)_=$G;else{_=MG;var E=IG}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(_=FG);if(_&&(_=_(e,u))){zI(f,_,r,d);break e}E&&E(e,p,u),e==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&tS(p,"number",p.value)}switch(E=u?Dh(u):window,e){case"focusin":(CC(E)||E.contentEditable==="true")&&(Lh=E,hS=u,Zm=null);break;case"focusout":Zm=hS=Lh=null;break;case"mousedown":pS=!0;break;case"contextmenu":case"mouseup":case"dragend":pS=!1,RC(f,r,d);break;case"selectionchange":if(zG)break;case"keydown":case"keyup":RC(f,r,d)}var j;if(M4)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Ph?BI(e,r)&&(A="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(A="onCompositionStart");A&&($I&&r.locale!=="ko"&&(Ph||A!=="onCompositionStart"?A==="onCompositionEnd"&&Ph&&(j=FI()):(Au=d,R4="value"in Au?Au.value:Au.textContent,Ph=!0)),E=Fy(u,A),0<E.length&&(A=new jC(A,e,null,r,d),f.push({event:A,listeners:E}),j?A.data=j:(j=UI(r),j!==null&&(A.data=j)))),(j=kG?OG(e,r):PG(e,r))&&(u=Fy(u,"onBeforeInput"),0<u.length&&(d=new jC("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=j))}ZI(f,t)})}function kg(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Fy(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Ng(e,r),i!=null&&n.unshift(kg(e,i,a)),i=Ng(e,t),i!=null&&n.push(kg(e,i,a))),e=e.return}return n}function uh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function MC(e,t,r,n,a){for(var i=t._reactName,s=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=Ng(r,i),c!=null&&s.unshift(kg(r,c,l))):a||(c=Ng(r,i),c!=null&&s.push(kg(r,c,l)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var VG=/\r\n?/g,GG=/\u0000|\uFFFD/g;function FC(e){return(typeof e=="string"?e:""+e).replace(VG,`
`).replace(GG,"")}function u1(e,t,r){if(t=FC(t),FC(e)!==t&&r)throw Error(et(425))}function $y(){}var mS=null,gS=null;function vS(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xS=typeof setTimeout=="function"?setTimeout:void 0,KG=typeof clearTimeout=="function"?clearTimeout:void 0,$C=typeof Promise=="function"?Promise:void 0,YG=typeof queueMicrotask=="function"?queueMicrotask:typeof $C<"u"?function(e){return $C.resolve(null).then(e).catch(XG)}:xS;function XG(e){setTimeout(function(){throw e})}function p5(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Ag(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Ag(t)}function Iu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function BC(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var yp=Math.random().toString(36).slice(2),xl="__reactFiber$"+yp,Og="__reactProps$"+yp,Nc="__reactContainer$"+yp,yS="__reactEvents$"+yp,JG="__reactListeners$"+yp,QG="__reactHandles$"+yp;function Wd(e){var t=e[xl];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Nc]||r[xl]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=BC(e);e!==null;){if(r=e[xl])return r;e=BC(e)}return t}e=r,r=e.parentNode}return null}function Hv(e){return e=e[xl]||e[Nc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Dh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(et(33))}function W2(e){return e[Og]||null}var bS=[],Ih=-1;function Zu(e){return{current:e}}function pn(e){0>Ih||(e.current=bS[Ih],bS[Ih]=null,Ih--)}function on(e,t){Ih++,bS[Ih]=e.current,e.current=t}var Wu={},vi=Zu(Wu),Zi=Zu(!1),xf=Wu;function P0(e,t){var r=e.type.contextTypes;if(!r)return Wu;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function es(e){return e=e.childContextTypes,e!=null}function By(){pn(Zi),pn(vi)}function UC(e,t,r){if(vi.current!==Wu)throw Error(et(168));on(vi,t),on(Zi,r)}function t7(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(et(108,IV(e)||"Unknown",a));return Cn({},r,n)}function Uy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wu,xf=vi.current,on(vi,e),on(Zi,Zi.current),!0}function zC(e,t,r){var n=e.stateNode;if(!n)throw Error(et(169));r?(e=t7(e,t,xf),n.__reactInternalMemoizedMergedChildContext=e,pn(Zi),pn(vi),on(vi,e)):pn(Zi),on(Zi,r)}var rc=null,V2=!1,m5=!1;function r7(e){rc===null?rc=[e]:rc.push(e)}function ZG(e){V2=!0,r7(e)}function ed(){if(!m5&&rc!==null){m5=!0;var e=0,t=Hr;try{var r=rc;for(Hr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}rc=null,V2=!1}catch(a){throw rc!==null&&(rc=rc.slice(e+1)),EI(k4,ed),a}finally{Hr=t,m5=!1}}return null}var Mh=[],Fh=0,zy=null,qy=0,Qs=[],Zs=0,yf=null,lc=1,cc="";function Od(e,t){Mh[Fh++]=qy,Mh[Fh++]=zy,zy=e,qy=t}function n7(e,t,r){Qs[Zs++]=lc,Qs[Zs++]=cc,Qs[Zs++]=yf,yf=e;var n=lc;e=cc;var a=32-Vo(n)-1;n&=~(1<<a),r+=1;var i=32-Vo(t)+a;if(30<i){var s=a-a%5;i=(n&(1<<s)-1).toString(32),n>>=s,a-=s,lc=1<<32-Vo(t)+a|r<<a|n,cc=i+e}else lc=1<<i|r<<a|n,cc=e}function $4(e){e.return!==null&&(Od(e,1),n7(e,1,0))}function B4(e){for(;e===zy;)zy=Mh[--Fh],Mh[Fh]=null,qy=Mh[--Fh],Mh[Fh]=null;for(;e===yf;)yf=Qs[--Zs],Qs[Zs]=null,cc=Qs[--Zs],Qs[Zs]=null,lc=Qs[--Zs],Qs[Zs]=null}var Os=null,Cs=null,xn=!1,Bo=null;function a7(e,t){var r=to(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function qC(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Os=e,Cs=Iu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Os=e,Cs=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=yf!==null?{id:lc,overflow:cc}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=to(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Os=e,Cs=null,!0):!1;default:return!1}}function wS(e){return(e.mode&1)!==0&&(e.flags&128)===0}function _S(e){if(xn){var t=Cs;if(t){var r=t;if(!qC(e,t)){if(wS(e))throw Error(et(418));t=Iu(r.nextSibling);var n=Os;t&&qC(e,t)?a7(n,r):(e.flags=e.flags&-4097|2,xn=!1,Os=e)}}else{if(wS(e))throw Error(et(418));e.flags=e.flags&-4097|2,xn=!1,Os=e}}}function HC(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Os=e}function d1(e){if(e!==Os)return!1;if(!xn)return HC(e),xn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vS(e.type,e.memoizedProps)),t&&(t=Cs)){if(wS(e))throw i7(),Error(et(418));for(;t;)a7(e,t),t=Iu(t.nextSibling)}if(HC(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(et(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Cs=Iu(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Cs=null}}else Cs=Os?Iu(e.stateNode.nextSibling):null;return!0}function i7(){for(var e=Cs;e;)e=Iu(e.nextSibling)}function L0(){Cs=Os=null,xn=!1}function U4(e){Bo===null?Bo=[e]:Bo.push(e)}var eK=Rc.ReactCurrentBatchConfig;function bm(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(et(309));var n=r.stateNode}if(!n)throw Error(et(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var l=a.refs;s===null?delete l[i]:l[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(et(284));if(!r._owner)throw Error(et(290,e))}return e}function f1(e,t){throw e=Object.prototype.toString.call(t),Error(et(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function WC(e){var t=e._init;return t(e._payload)}function s7(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function r(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function n(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function a(y,v){return y=Bu(y,v),y.index=0,y.sibling=null,y}function i(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function s(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,v,b,N){return v===null||v.tag!==6?(v=_5(b,y.mode,N),v.return=y,v):(v=a(v,b),v.return=y,v)}function c(y,v,b,N){var _=b.type;return _===Oh?d(y,v,b.props.children,N,b.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===cu&&WC(_)===v.type)?(N=a(v,b.props),N.ref=bm(y,v,b),N.return=y,N):(N=yy(b.type,b.key,b.props,null,y.mode,N),N.ref=bm(y,v,b),N.return=y,N)}function u(y,v,b,N){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=N5(b,y.mode,N),v.return=y,v):(v=a(v,b.children||[]),v.return=y,v)}function d(y,v,b,N,_){return v===null||v.tag!==7?(v=ff(b,y.mode,N,_),v.return=y,v):(v=a(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=_5(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case t1:return b=yy(v.type,v.key,v.props,null,y.mode,b),b.ref=bm(y,null,v),b.return=y,b;case kh:return v=N5(v,y.mode,b),v.return=y,v;case cu:var N=v._init;return f(y,N(v._payload),b)}if($m(v)||mm(v))return v=ff(v,y.mode,b,null),v.return=y,v;f1(y,v)}return null}function p(y,v,b,N){var _=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:l(y,v,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case t1:return b.key===_?c(y,v,b,N):null;case kh:return b.key===_?u(y,v,b,N):null;case cu:return _=b._init,p(y,v,_(b._payload),N)}if($m(b)||mm(b))return _!==null?null:d(y,v,b,N,null);f1(y,b)}return null}function h(y,v,b,N,_){if(typeof N=="string"&&N!==""||typeof N=="number")return y=y.get(b)||null,l(v,y,""+N,_);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case t1:return y=y.get(N.key===null?b:N.key)||null,c(v,y,N,_);case kh:return y=y.get(N.key===null?b:N.key)||null,u(v,y,N,_);case cu:var E=N._init;return h(y,v,b,E(N._payload),_)}if($m(N)||mm(N))return y=y.get(b)||null,d(v,y,N,_,null);f1(v,N)}return null}function g(y,v,b,N){for(var _=null,E=null,j=v,A=v=0,T=null;j!==null&&A<b.length;A++){j.index>A?(T=j,j=null):T=j.sibling;var P=p(y,j,b[A],N);if(P===null){j===null&&(j=T);break}e&&j&&P.alternate===null&&t(y,j),v=i(P,v,A),E===null?_=P:E.sibling=P,E=P,j=T}if(A===b.length)return r(y,j),xn&&Od(y,A),_;if(j===null){for(;A<b.length;A++)j=f(y,b[A],N),j!==null&&(v=i(j,v,A),E===null?_=j:E.sibling=j,E=j);return xn&&Od(y,A),_}for(j=n(y,j);A<b.length;A++)T=h(j,y,A,b[A],N),T!==null&&(e&&T.alternate!==null&&j.delete(T.key===null?A:T.key),v=i(T,v,A),E===null?_=T:E.sibling=T,E=T);return e&&j.forEach(function(O){return t(y,O)}),xn&&Od(y,A),_}function m(y,v,b,N){var _=mm(b);if(typeof _!="function")throw Error(et(150));if(b=_.call(b),b==null)throw Error(et(151));for(var E=_=null,j=v,A=v=0,T=null,P=b.next();j!==null&&!P.done;A++,P=b.next()){j.index>A?(T=j,j=null):T=j.sibling;var O=p(y,j,P.value,N);if(O===null){j===null&&(j=T);break}e&&j&&O.alternate===null&&t(y,j),v=i(O,v,A),E===null?_=O:E.sibling=O,E=O,j=T}if(P.done)return r(y,j),xn&&Od(y,A),_;if(j===null){for(;!P.done;A++,P=b.next())P=f(y,P.value,N),P!==null&&(v=i(P,v,A),E===null?_=P:E.sibling=P,E=P);return xn&&Od(y,A),_}for(j=n(y,j);!P.done;A++,P=b.next())P=h(j,y,A,P.value,N),P!==null&&(e&&P.alternate!==null&&j.delete(P.key===null?A:P.key),v=i(P,v,A),E===null?_=P:E.sibling=P,E=P);return e&&j.forEach(function(R){return t(y,R)}),xn&&Od(y,A),_}function x(y,v,b,N){if(typeof b=="object"&&b!==null&&b.type===Oh&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case t1:e:{for(var _=b.key,E=v;E!==null;){if(E.key===_){if(_=b.type,_===Oh){if(E.tag===7){r(y,E.sibling),v=a(E,b.props.children),v.return=y,y=v;break e}}else if(E.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===cu&&WC(_)===E.type){r(y,E.sibling),v=a(E,b.props),v.ref=bm(y,E,b),v.return=y,y=v;break e}r(y,E);break}else t(y,E);E=E.sibling}b.type===Oh?(v=ff(b.props.children,y.mode,N,b.key),v.return=y,y=v):(N=yy(b.type,b.key,b.props,null,y.mode,N),N.ref=bm(y,v,b),N.return=y,y=N)}return s(y);case kh:e:{for(E=b.key;v!==null;){if(v.key===E)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){r(y,v.sibling),v=a(v,b.children||[]),v.return=y,y=v;break e}else{r(y,v);break}else t(y,v);v=v.sibling}v=N5(b,y.mode,N),v.return=y,y=v}return s(y);case cu:return E=b._init,x(y,v,E(b._payload),N)}if($m(b))return g(y,v,b,N);if(mm(b))return m(y,v,b,N);f1(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(r(y,v.sibling),v=a(v,b),v.return=y,y=v):(r(y,v),v=_5(b,y.mode,N),v.return=y,y=v),s(y)):r(y,v)}return x}var R0=s7(!0),o7=s7(!1),Hy=Zu(null),Wy=null,$h=null,z4=null;function q4(){z4=$h=Wy=null}function H4(e){var t=Hy.current;pn(Hy),e._currentValue=t}function NS(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function e0(e,t){Wy=e,z4=$h=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ji=!0),e.firstContext=null)}function io(e){var t=e._currentValue;if(z4!==e)if(e={context:e,memoizedValue:t,next:null},$h===null){if(Wy===null)throw Error(et(308));$h=e,Wy.dependencies={lanes:0,firstContext:e}}else $h=$h.next=e;return t}var Vd=null;function W4(e){Vd===null?Vd=[e]:Vd.push(e)}function l7(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,W4(t)):(r.next=a.next,a.next=r),t.interleaved=r,Sc(e,n)}function Sc(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var uu=!1;function V4(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function c7(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function pc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mu(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,wr&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Sc(e,r)}return a=n.interleaved,a===null?(t.next=t,W4(n)):(t.next=a.next,a.next=t),n.interleaved=t,Sc(e,r)}function hy(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,O4(e,r)}}function VC(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=s:i=i.next=s,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Vy(e,t,r,n){var a=e.updateQueue;uu=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,s===null?i=u:s.next=u,s=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==s&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;s=0,d=u=c=null,l=i;do{var p=l.lane,h=l.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,m=l;switch(p=t,h=r,m.tag){case 1:if(g=m.payload,typeof g=="function"){f=g.call(h,f,p);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,p=typeof g=="function"?g.call(h,f,p):g,p==null)break e;f=Cn({},f,p);break e;case 2:uu=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[l]:p.push(l))}else h={eventTime:h,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,s|=p;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;p=l,l=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do s|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);wf|=s,e.lanes=s,e.memoizedState=f}}function GC(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(et(191,a));a.call(n)}}}var Wv={},_l=Zu(Wv),Pg=Zu(Wv),Lg=Zu(Wv);function Gd(e){if(e===Wv)throw Error(et(174));return e}function G4(e,t){switch(on(Lg,t),on(Pg,e),on(_l,Wv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:nS(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=nS(t,e)}pn(_l),on(_l,t)}function D0(){pn(_l),pn(Pg),pn(Lg)}function u7(e){Gd(Lg.current);var t=Gd(_l.current),r=nS(t,e.type);t!==r&&(on(Pg,e),on(_l,r))}function K4(e){Pg.current===e&&(pn(_l),pn(Pg))}var jn=Zu(0);function Gy(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var g5=[];function Y4(){for(var e=0;e<g5.length;e++)g5[e]._workInProgressVersionPrimary=null;g5.length=0}var py=Rc.ReactCurrentDispatcher,v5=Rc.ReactCurrentBatchConfig,bf=0,En=null,wa=null,ka=null,Ky=!1,eg=!1,Rg=0,tK=0;function ii(){throw Error(et(321))}function X4(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Xo(e[r],t[r]))return!1;return!0}function J4(e,t,r,n,a,i){if(bf=i,En=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,py.current=e===null||e.memoizedState===null?iK:sK,e=r(n,a),eg){i=0;do{if(eg=!1,Rg=0,25<=i)throw Error(et(301));i+=1,ka=wa=null,t.updateQueue=null,py.current=oK,e=r(n,a)}while(eg)}if(py.current=Yy,t=wa!==null&&wa.next!==null,bf=0,ka=wa=En=null,Ky=!1,t)throw Error(et(300));return e}function Q4(){var e=Rg!==0;return Rg=0,e}function hl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ka===null?En.memoizedState=ka=e:ka=ka.next=e,ka}function so(){if(wa===null){var e=En.alternate;e=e!==null?e.memoizedState:null}else e=wa.next;var t=ka===null?En.memoizedState:ka.next;if(t!==null)ka=t,wa=e;else{if(e===null)throw Error(et(310));wa=e,e={memoizedState:wa.memoizedState,baseState:wa.baseState,baseQueue:wa.baseQueue,queue:wa.queue,next:null},ka===null?En.memoizedState=ka=e:ka=ka.next=e}return ka}function Dg(e,t){return typeof t=="function"?t(e):t}function x5(e){var t=so(),r=t.queue;if(r===null)throw Error(et(311));r.lastRenderedReducer=e;var n=wa,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var s=a.next;a.next=i.next,i.next=s}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=s=null,c=null,u=i;do{var d=u.lane;if((bf&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,s=n):c=c.next=f,En.lanes|=d,wf|=d}u=u.next}while(u!==null&&u!==i);c===null?s=n:c.next=l,Xo(n,t.memoizedState)||(Ji=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,En.lanes|=i,wf|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function y5(e){var t=so(),r=t.queue;if(r===null)throw Error(et(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var s=a=a.next;do i=e(i,s.action),s=s.next;while(s!==a);Xo(i,t.memoizedState)||(Ji=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function d7(){}function f7(e,t){var r=En,n=so(),a=t(),i=!Xo(n.memoizedState,a);if(i&&(n.memoizedState=a,Ji=!0),n=n.queue,Z4(m7.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||ka!==null&&ka.memoizedState.tag&1){if(r.flags|=2048,Ig(9,p7.bind(null,r,n,a,t),void 0,null),Ia===null)throw Error(et(349));bf&30||h7(r,t,a)}return a}function h7(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=En.updateQueue,t===null?(t={lastEffect:null,stores:null},En.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function p7(e,t,r,n){t.value=r,t.getSnapshot=n,g7(t)&&v7(e)}function m7(e,t,r){return r(function(){g7(t)&&v7(e)})}function g7(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Xo(e,r)}catch{return!0}}function v7(e){var t=Sc(e,1);t!==null&&Go(t,e,1,-1)}function KC(e){var t=hl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dg,lastRenderedState:e},t.queue=e,e=e.dispatch=aK.bind(null,En,e),[t.memoizedState,e]}function Ig(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=En.updateQueue,t===null?(t={lastEffect:null,stores:null},En.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function x7(){return so().memoizedState}function my(e,t,r,n){var a=hl();En.flags|=e,a.memoizedState=Ig(1|t,r,void 0,n===void 0?null:n)}function G2(e,t,r,n){var a=so();n=n===void 0?null:n;var i=void 0;if(wa!==null){var s=wa.memoizedState;if(i=s.destroy,n!==null&&X4(n,s.deps)){a.memoizedState=Ig(t,r,i,n);return}}En.flags|=e,a.memoizedState=Ig(1|t,r,i,n)}function YC(e,t){return my(8390656,8,e,t)}function Z4(e,t){return G2(2048,8,e,t)}function y7(e,t){return G2(4,2,e,t)}function b7(e,t){return G2(4,4,e,t)}function w7(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _7(e,t,r){return r=r!=null?r.concat([e]):null,G2(4,4,w7.bind(null,t,e),r)}function e3(){}function N7(e,t){var r=so();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&X4(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function S7(e,t){var r=so();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&X4(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function j7(e,t,r){return bf&21?(Xo(r,t)||(r=kI(),En.lanes|=r,wf|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ji=!0),e.memoizedState=r)}function rK(e,t){var r=Hr;Hr=r!==0&&4>r?r:4,e(!0);var n=v5.transition;v5.transition={};try{e(!1),t()}finally{Hr=r,v5.transition=n}}function A7(){return so().memoizedState}function nK(e,t,r){var n=$u(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},E7(e))T7(t,r);else if(r=l7(e,t,r,n),r!==null){var a=Mi();Go(r,e,n,a),C7(r,t,n)}}function aK(e,t,r){var n=$u(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(E7(e))T7(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,l=i(s,r);if(a.hasEagerState=!0,a.eagerState=l,Xo(l,s)){var c=t.interleaved;c===null?(a.next=a,W4(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=l7(e,t,a,n),r!==null&&(a=Mi(),Go(r,e,n,a),C7(r,t,n))}}function E7(e){var t=e.alternate;return e===En||t!==null&&t===En}function T7(e,t){eg=Ky=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function C7(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,O4(e,r)}}var Yy={readContext:io,useCallback:ii,useContext:ii,useEffect:ii,useImperativeHandle:ii,useInsertionEffect:ii,useLayoutEffect:ii,useMemo:ii,useReducer:ii,useRef:ii,useState:ii,useDebugValue:ii,useDeferredValue:ii,useTransition:ii,useMutableSource:ii,useSyncExternalStore:ii,useId:ii,unstable_isNewReconciler:!1},iK={readContext:io,useCallback:function(e,t){return hl().memoizedState=[e,t===void 0?null:t],e},useContext:io,useEffect:YC,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,my(4194308,4,w7.bind(null,t,e),r)},useLayoutEffect:function(e,t){return my(4194308,4,e,t)},useInsertionEffect:function(e,t){return my(4,2,e,t)},useMemo:function(e,t){var r=hl();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=hl();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=nK.bind(null,En,e),[n.memoizedState,e]},useRef:function(e){var t=hl();return e={current:e},t.memoizedState=e},useState:KC,useDebugValue:e3,useDeferredValue:function(e){return hl().memoizedState=e},useTransition:function(){var e=KC(!1),t=e[0];return e=rK.bind(null,e[1]),hl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=En,a=hl();if(xn){if(r===void 0)throw Error(et(407));r=r()}else{if(r=t(),Ia===null)throw Error(et(349));bf&30||h7(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,YC(m7.bind(null,n,i,e),[e]),n.flags|=2048,Ig(9,p7.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=hl(),t=Ia.identifierPrefix;if(xn){var r=cc,n=lc;r=(n&~(1<<32-Vo(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Rg++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=tK++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sK={readContext:io,useCallback:N7,useContext:io,useEffect:Z4,useImperativeHandle:_7,useInsertionEffect:y7,useLayoutEffect:b7,useMemo:S7,useReducer:x5,useRef:x7,useState:function(){return x5(Dg)},useDebugValue:e3,useDeferredValue:function(e){var t=so();return j7(t,wa.memoizedState,e)},useTransition:function(){var e=x5(Dg)[0],t=so().memoizedState;return[e,t]},useMutableSource:d7,useSyncExternalStore:f7,useId:A7,unstable_isNewReconciler:!1},oK={readContext:io,useCallback:N7,useContext:io,useEffect:Z4,useImperativeHandle:_7,useInsertionEffect:y7,useLayoutEffect:b7,useMemo:S7,useReducer:y5,useRef:x7,useState:function(){return y5(Dg)},useDebugValue:e3,useDeferredValue:function(e){var t=so();return wa===null?t.memoizedState=e:j7(t,wa.memoizedState,e)},useTransition:function(){var e=y5(Dg)[0],t=so().memoizedState;return[e,t]},useMutableSource:d7,useSyncExternalStore:f7,useId:A7,unstable_isNewReconciler:!1};function Po(e,t){if(e&&e.defaultProps){t=Cn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function SS(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Cn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var K2={isMounted:function(e){return(e=e._reactInternals)?$f(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Mi(),a=$u(e),i=pc(n,a);i.payload=t,r!=null&&(i.callback=r),t=Mu(e,i,a),t!==null&&(Go(t,e,a,n),hy(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Mi(),a=$u(e),i=pc(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Mu(e,i,a),t!==null&&(Go(t,e,a,n),hy(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Mi(),n=$u(e),a=pc(r,n);a.tag=2,t!=null&&(a.callback=t),t=Mu(e,a,n),t!==null&&(Go(t,e,n,r),hy(t,e,n))}};function XC(e,t,r,n,a,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,s):t.prototype&&t.prototype.isPureReactComponent?!Tg(r,n)||!Tg(a,i):!0}function k7(e,t,r){var n=!1,a=Wu,i=t.contextType;return typeof i=="object"&&i!==null?i=io(i):(a=es(t)?xf:vi.current,n=t.contextTypes,i=(n=n!=null)?P0(e,a):Wu),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=K2,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function JC(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&K2.enqueueReplaceState(t,t.state,null)}function jS(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},V4(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=io(i):(i=es(t)?xf:vi.current,a.context=P0(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(SS(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&K2.enqueueReplaceState(a,a.state,null),Vy(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function I0(e,t){try{var r="",n=t;do r+=DV(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function b5(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function AS(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var lK=typeof WeakMap=="function"?WeakMap:Map;function O7(e,t,r){r=pc(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Jy||(Jy=!0,IS=n),AS(e,t)},r}function P7(e,t,r){r=pc(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){AS(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){AS(e,t),typeof n!="function"&&(Fu===null?Fu=new Set([this]):Fu.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function QC(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new lK;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=_K.bind(null,e,t,r),t.then(e,e))}function ZC(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ek(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=pc(-1,1),t.tag=2,Mu(r,t,1))),r.lanes|=1),e)}var cK=Rc.ReactCurrentOwner,Ji=!1;function Ei(e,t,r,n){t.child=e===null?o7(t,null,r,n):R0(t,e.child,r,n)}function tk(e,t,r,n,a){r=r.render;var i=t.ref;return e0(t,a),n=J4(e,t,r,n,i,a),r=Q4(),e!==null&&!Ji?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,jc(e,t,a)):(xn&&r&&$4(t),t.flags|=1,Ei(e,t,n,a),t.child)}function rk(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!l3(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,L7(e,t,i,n,a)):(e=yy(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var s=i.memoizedProps;if(r=r.compare,r=r!==null?r:Tg,r(s,n)&&e.ref===t.ref)return jc(e,t,a)}return t.flags|=1,e=Bu(i,n),e.ref=t.ref,e.return=t,t.child=e}function L7(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(Tg(i,n)&&e.ref===t.ref)if(Ji=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Ji=!0);else return t.lanes=e.lanes,jc(e,t,a)}return ES(e,t,r,n,a)}function R7(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},on(Uh,bs),bs|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,on(Uh,bs),bs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,on(Uh,bs),bs|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,on(Uh,bs),bs|=n;return Ei(e,t,a,r),t.child}function D7(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ES(e,t,r,n,a){var i=es(r)?xf:vi.current;return i=P0(t,i),e0(t,a),r=J4(e,t,r,n,i,a),n=Q4(),e!==null&&!Ji?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,jc(e,t,a)):(xn&&n&&$4(t),t.flags|=1,Ei(e,t,r,a),t.child)}function nk(e,t,r,n,a){if(es(r)){var i=!0;Uy(t)}else i=!1;if(e0(t,a),t.stateNode===null)gy(e,t),k7(t,r,n),jS(t,r,n,a),n=!0;else if(e===null){var s=t.stateNode,l=t.memoizedProps;s.props=l;var c=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=io(u):(u=es(r)?xf:vi.current,u=P0(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==n||c!==u)&&JC(t,s,n,u),uu=!1;var p=t.memoizedState;s.state=p,Vy(t,n,s,a),c=t.memoizedState,l!==n||p!==c||Zi.current||uu?(typeof d=="function"&&(SS(t,r,d,n),c=t.memoizedState),(l=uu||XC(t,r,l,n,p,c,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),s.props=n,s.state=c,s.context=u,n=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,c7(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Po(t.type,l),s.props=u,f=t.pendingProps,p=s.context,c=r.contextType,typeof c=="object"&&c!==null?c=io(c):(c=es(r)?xf:vi.current,c=P0(t,c));var h=r.getDerivedStateFromProps;(d=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==f||p!==c)&&JC(t,s,n,c),uu=!1,p=t.memoizedState,s.state=p,Vy(t,n,s,a);var g=t.memoizedState;l!==f||p!==g||Zi.current||uu?(typeof h=="function"&&(SS(t,r,h,n),g=t.memoizedState),(u=uu||XC(t,r,u,n,p,g,c)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,g,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,g,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),s.props=n,s.state=g,s.context=c,n=u):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return TS(e,t,r,n,i,a)}function TS(e,t,r,n,a,i){D7(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return a&&zC(t,r,!1),jc(e,t,i);n=t.stateNode,cK.current=t;var l=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=R0(t,e.child,null,i),t.child=R0(t,null,l,i)):Ei(e,t,l,i),t.memoizedState=n.state,a&&zC(t,r,!0),t.child}function I7(e){var t=e.stateNode;t.pendingContext?UC(e,t.pendingContext,t.pendingContext!==t.context):t.context&&UC(e,t.context,!1),G4(e,t.containerInfo)}function ak(e,t,r,n,a){return L0(),U4(a),t.flags|=256,Ei(e,t,r,n),t.child}var CS={dehydrated:null,treeContext:null,retryLane:0};function kS(e){return{baseLanes:e,cachePool:null,transitions:null}}function M7(e,t,r){var n=t.pendingProps,a=jn.current,i=!1,s=(t.flags&128)!==0,l;if((l=s)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),on(jn,a&1),e===null)return _S(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,i?(n=t.mode,i=t.child,s={mode:"hidden",children:s},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=J2(s,n,0,null),e=ff(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=kS(r),t.memoizedState=CS,e):t3(t,s));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return uK(e,t,s,n,l,a,r);if(i){i=n.fallback,s=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(s&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Bu(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Bu(l,i):(i=ff(i,s,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,s=e.child.memoizedState,s=s===null?kS(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~r,t.memoizedState=CS,n}return i=e.child,e=i.sibling,n=Bu(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function t3(e,t){return t=J2({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function h1(e,t,r,n){return n!==null&&U4(n),R0(t,e.child,null,r),e=t3(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function uK(e,t,r,n,a,i,s){if(r)return t.flags&256?(t.flags&=-257,n=b5(Error(et(422))),h1(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=J2({mode:"visible",children:n.children},a,0,null),i=ff(i,a,s,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&R0(t,e.child,null,s),t.child.memoizedState=kS(s),t.memoizedState=CS,i);if(!(t.mode&1))return h1(e,t,s,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(et(419)),n=b5(i,n,void 0),h1(e,t,s,n)}if(l=(s&e.childLanes)!==0,Ji||l){if(n=Ia,n!==null){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|s)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Sc(e,a),Go(n,e,a,-1))}return o3(),n=b5(Error(et(421))),h1(e,t,s,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=NK.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Cs=Iu(a.nextSibling),Os=t,xn=!0,Bo=null,e!==null&&(Qs[Zs++]=lc,Qs[Zs++]=cc,Qs[Zs++]=yf,lc=e.id,cc=e.overflow,yf=t),t=t3(t,n.children),t.flags|=4096,t)}function ik(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),NS(e.return,t,r)}function w5(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function F7(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Ei(e,t,n.children,r),n=jn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ik(e,r,t);else if(e.tag===19)ik(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(on(jn,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Gy(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),w5(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Gy(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}w5(t,!0,r,null,i);break;case"together":w5(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function gy(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function jc(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),wf|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(et(153));if(t.child!==null){for(e=t.child,r=Bu(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Bu(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function dK(e,t,r){switch(t.tag){case 3:I7(t),L0();break;case 5:u7(t);break;case 1:es(t.type)&&Uy(t);break;case 4:G4(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;on(Hy,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(on(jn,jn.current&1),t.flags|=128,null):r&t.child.childLanes?M7(e,t,r):(on(jn,jn.current&1),e=jc(e,t,r),e!==null?e.sibling:null);on(jn,jn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return F7(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),on(jn,jn.current),n)break;return null;case 22:case 23:return t.lanes=0,R7(e,t,r)}return jc(e,t,r)}var $7,OS,B7,U7;$7=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};OS=function(){};B7=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Gd(_l.current);var i=null;switch(r){case"input":a=ZN(e,a),n=ZN(e,n),i=[];break;case"select":a=Cn({},a,{value:void 0}),n=Cn({},n,{value:void 0}),i=[];break;case"textarea":a=rS(e,a),n=rS(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=$y)}aS(r,n);var s;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(wg.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(wg.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&un("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};U7=function(e,t,r,n){r!==n&&(t.flags|=4)};function wm(e,t){if(!xn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function si(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function fK(e,t,r){var n=t.pendingProps;switch(B4(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return si(t),null;case 1:return es(t.type)&&By(),si(t),null;case 3:return n=t.stateNode,D0(),pn(Zi),pn(vi),Y4(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(d1(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bo!==null&&($S(Bo),Bo=null))),OS(e,t),si(t),null;case 5:K4(t);var a=Gd(Lg.current);if(r=t.type,e!==null&&t.stateNode!=null)B7(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(et(166));return si(t),null}if(e=Gd(_l.current),d1(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[xl]=t,n[Og]=i,e=(t.mode&1)!==0,r){case"dialog":un("cancel",n),un("close",n);break;case"iframe":case"object":case"embed":un("load",n);break;case"video":case"audio":for(a=0;a<Um.length;a++)un(Um[a],n);break;case"source":un("error",n);break;case"img":case"image":case"link":un("error",n),un("load",n);break;case"details":un("toggle",n);break;case"input":pC(n,i),un("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},un("invalid",n);break;case"textarea":gC(n,i),un("invalid",n)}aS(r,i),a=null;for(var s in i)if(i.hasOwnProperty(s)){var l=i[s];s==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&u1(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&u1(n.textContent,l,e),a=["children",""+l]):wg.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&un("scroll",n)}switch(r){case"input":r1(n),mC(n,i,!0);break;case"textarea":r1(n),vC(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=$y)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=mI(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[xl]=t,e[Og]=n,$7(e,t,!1,!1),t.stateNode=e;e:{switch(s=iS(r,n),r){case"dialog":un("cancel",e),un("close",e),a=n;break;case"iframe":case"object":case"embed":un("load",e),a=n;break;case"video":case"audio":for(a=0;a<Um.length;a++)un(Um[a],e);a=n;break;case"source":un("error",e),a=n;break;case"img":case"image":case"link":un("error",e),un("load",e),a=n;break;case"details":un("toggle",e),a=n;break;case"input":pC(e,n),a=ZN(e,n),un("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Cn({},n,{value:void 0}),un("invalid",e);break;case"textarea":gC(e,n),a=rS(e,n),un("invalid",e);break;default:a=n}aS(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?xI(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&gI(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&_g(e,c):typeof c=="number"&&_g(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(wg.hasOwnProperty(i)?c!=null&&i==="onScroll"&&un("scroll",e):c!=null&&j4(e,i,c,s))}switch(r){case"input":r1(e),mC(e,n,!1);break;case"textarea":r1(e),vC(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Hu(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Xh(e,!!n.multiple,i,!1):n.defaultValue!=null&&Xh(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=$y)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return si(t),null;case 6:if(e&&t.stateNode!=null)U7(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(et(166));if(r=Gd(Lg.current),Gd(_l.current),d1(t)){if(n=t.stateNode,r=t.memoizedProps,n[xl]=t,(i=n.nodeValue!==r)&&(e=Os,e!==null))switch(e.tag){case 3:u1(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&u1(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[xl]=t,t.stateNode=n}return si(t),null;case 13:if(pn(jn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xn&&Cs!==null&&t.mode&1&&!(t.flags&128))i7(),L0(),t.flags|=98560,i=!1;else if(i=d1(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(et(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(et(317));i[xl]=t}else L0(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;si(t),i=!1}else Bo!==null&&($S(Bo),Bo=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||jn.current&1?Sa===0&&(Sa=3):o3())),t.updateQueue!==null&&(t.flags|=4),si(t),null);case 4:return D0(),OS(e,t),e===null&&Cg(t.stateNode.containerInfo),si(t),null;case 10:return H4(t.type._context),si(t),null;case 17:return es(t.type)&&By(),si(t),null;case 19:if(pn(jn),i=t.memoizedState,i===null)return si(t),null;if(n=(t.flags&128)!==0,s=i.rendering,s===null)if(n)wm(i,!1);else{if(Sa!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Gy(e),s!==null){for(t.flags|=128,wm(i,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return on(jn,jn.current&1|2),t.child}e=e.sibling}i.tail!==null&&Gn()>M0&&(t.flags|=128,n=!0,wm(i,!1),t.lanes=4194304)}else{if(!n)if(e=Gy(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),wm(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!xn)return si(t),null}else 2*Gn()-i.renderingStartTime>M0&&r!==1073741824&&(t.flags|=128,n=!0,wm(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(r=i.last,r!==null?r.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Gn(),t.sibling=null,r=jn.current,on(jn,n?r&1|2:r&1),t):(si(t),null);case 22:case 23:return s3(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?bs&1073741824&&(si(t),t.subtreeFlags&6&&(t.flags|=8192)):si(t),null;case 24:return null;case 25:return null}throw Error(et(156,t.tag))}function hK(e,t){switch(B4(t),t.tag){case 1:return es(t.type)&&By(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return D0(),pn(Zi),pn(vi),Y4(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return K4(t),null;case 13:if(pn(jn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(et(340));L0()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pn(jn),null;case 4:return D0(),null;case 10:return H4(t.type._context),null;case 22:case 23:return s3(),null;case 24:return null;default:return null}}var p1=!1,fi=!1,pK=typeof WeakSet=="function"?WeakSet:Set,vt=null;function Bh(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){In(e,t,n)}else r.current=null}function PS(e,t,r){try{r()}catch(n){In(e,t,n)}}var sk=!1;function mK(e,t){if(mS=Iy,e=VI(),F4(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var s=0,l=-1,c=-1,u=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==r||a!==0&&f.nodeType!==3||(l=s+a),f!==i||n!==0&&f.nodeType!==3||(c=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)p=f,f=h;for(;;){if(f===e)break t;if(p===r&&++u===a&&(l=s),p===i&&++d===n&&(c=s),(h=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=h}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(gS={focusedElem:e,selectionRange:r},Iy=!1,vt=t;vt!==null;)if(t=vt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,vt=e;else for(;vt!==null;){t=vt;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,x=g.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Po(t.type,m),x);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(N){In(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,vt=e;break}vt=t.return}return g=sk,sk=!1,g}function tg(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&PS(t,r,i)}a=a.next}while(a!==n)}}function Y2(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function LS(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function z7(e){var t=e.alternate;t!==null&&(e.alternate=null,z7(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[xl],delete t[Og],delete t[yS],delete t[JG],delete t[QG])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function q7(e){return e.tag===5||e.tag===3||e.tag===4}function ok(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||q7(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function RS(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=$y));else if(n!==4&&(e=e.child,e!==null))for(RS(e,t,r),e=e.sibling;e!==null;)RS(e,t,r),e=e.sibling}function DS(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(DS(e,t,r),e=e.sibling;e!==null;)DS(e,t,r),e=e.sibling}var Ka=null,Io=!1;function nu(e,t,r){for(r=r.child;r!==null;)H7(e,t,r),r=r.sibling}function H7(e,t,r){if(wl&&typeof wl.onCommitFiberUnmount=="function")try{wl.onCommitFiberUnmount(U2,r)}catch{}switch(r.tag){case 5:fi||Bh(r,t);case 6:var n=Ka,a=Io;Ka=null,nu(e,t,r),Ka=n,Io=a,Ka!==null&&(Io?(e=Ka,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ka.removeChild(r.stateNode));break;case 18:Ka!==null&&(Io?(e=Ka,r=r.stateNode,e.nodeType===8?p5(e.parentNode,r):e.nodeType===1&&p5(e,r),Ag(e)):p5(Ka,r.stateNode));break;case 4:n=Ka,a=Io,Ka=r.stateNode.containerInfo,Io=!0,nu(e,t,r),Ka=n,Io=a;break;case 0:case 11:case 14:case 15:if(!fi&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&PS(r,t,s),a=a.next}while(a!==n)}nu(e,t,r);break;case 1:if(!fi&&(Bh(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){In(r,t,l)}nu(e,t,r);break;case 21:nu(e,t,r);break;case 22:r.mode&1?(fi=(n=fi)||r.memoizedState!==null,nu(e,t,r),fi=n):nu(e,t,r);break;default:nu(e,t,r)}}function lk(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new pK),t.forEach(function(n){var a=SK.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Ao(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,s=t,l=s;e:for(;l!==null;){switch(l.tag){case 5:Ka=l.stateNode,Io=!1;break e;case 3:Ka=l.stateNode.containerInfo,Io=!0;break e;case 4:Ka=l.stateNode.containerInfo,Io=!0;break e}l=l.return}if(Ka===null)throw Error(et(160));H7(i,s,a),Ka=null,Io=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){In(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)W7(t,e),t=t.sibling}function W7(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ao(t,e),ll(e),n&4){try{tg(3,e,e.return),Y2(3,e)}catch(m){In(e,e.return,m)}try{tg(5,e,e.return)}catch(m){In(e,e.return,m)}}break;case 1:Ao(t,e),ll(e),n&512&&r!==null&&Bh(r,r.return);break;case 5:if(Ao(t,e),ll(e),n&512&&r!==null&&Bh(r,r.return),e.flags&32){var a=e.stateNode;try{_g(a,"")}catch(m){In(e,e.return,m)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,s=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&hI(a,i),iS(l,s);var u=iS(l,i);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];d==="style"?xI(a,f):d==="dangerouslySetInnerHTML"?gI(a,f):d==="children"?_g(a,f):j4(a,d,f,u)}switch(l){case"input":eS(a,i);break;case"textarea":pI(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?Xh(a,!!i.multiple,h,!1):p!==!!i.multiple&&(i.defaultValue!=null?Xh(a,!!i.multiple,i.defaultValue,!0):Xh(a,!!i.multiple,i.multiple?[]:"",!1))}a[Og]=i}catch(m){In(e,e.return,m)}}break;case 6:if(Ao(t,e),ll(e),n&4){if(e.stateNode===null)throw Error(et(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(m){In(e,e.return,m)}}break;case 3:if(Ao(t,e),ll(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ag(t.containerInfo)}catch(m){In(e,e.return,m)}break;case 4:Ao(t,e),ll(e);break;case 13:Ao(t,e),ll(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(a3=Gn())),n&4&&lk(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(fi=(u=fi)||d,Ao(t,e),fi=u):Ao(t,e),ll(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(vt=e,d=e.child;d!==null;){for(f=vt=d;vt!==null;){switch(p=vt,h=p.child,p.tag){case 0:case 11:case 14:case 15:tg(4,p,p.return);break;case 1:Bh(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){In(n,r,m)}}break;case 5:Bh(p,p.return);break;case 22:if(p.memoizedState!==null){uk(f);continue}}h!==null?(h.return=p,vt=h):uk(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=vI("display",s))}catch(m){In(e,e.return,m)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){In(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ao(t,e),ll(e),n&4&&lk(e);break;case 21:break;default:Ao(t,e),ll(e)}}function ll(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(q7(r)){var n=r;break e}r=r.return}throw Error(et(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(_g(a,""),n.flags&=-33);var i=ok(e);DS(e,i,a);break;case 3:case 4:var s=n.stateNode.containerInfo,l=ok(e);RS(e,l,s);break;default:throw Error(et(161))}}catch(c){In(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gK(e,t,r){vt=e,V7(e)}function V7(e,t,r){for(var n=(e.mode&1)!==0;vt!==null;){var a=vt,i=a.child;if(a.tag===22&&n){var s=a.memoizedState!==null||p1;if(!s){var l=a.alternate,c=l!==null&&l.memoizedState!==null||fi;l=p1;var u=fi;if(p1=s,(fi=c)&&!u)for(vt=a;vt!==null;)s=vt,c=s.child,s.tag===22&&s.memoizedState!==null?dk(a):c!==null?(c.return=s,vt=c):dk(a);for(;i!==null;)vt=i,V7(i),i=i.sibling;vt=a,p1=l,fi=u}ck(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,vt=i):ck(e)}}function ck(e){for(;vt!==null;){var t=vt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:fi||Y2(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!fi)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Po(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&GC(t,i,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}GC(t,s,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Ag(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}fi||t.flags&512&&LS(t)}catch(p){In(t,t.return,p)}}if(t===e){vt=null;break}if(r=t.sibling,r!==null){r.return=t.return,vt=r;break}vt=t.return}}function uk(e){for(;vt!==null;){var t=vt;if(t===e){vt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,vt=r;break}vt=t.return}}function dk(e){for(;vt!==null;){var t=vt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Y2(4,t)}catch(c){In(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){In(t,a,c)}}var i=t.return;try{LS(t)}catch(c){In(t,i,c)}break;case 5:var s=t.return;try{LS(t)}catch(c){In(t,s,c)}}}catch(c){In(t,t.return,c)}if(t===e){vt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,vt=l;break}vt=t.return}}var vK=Math.ceil,Xy=Rc.ReactCurrentDispatcher,r3=Rc.ReactCurrentOwner,no=Rc.ReactCurrentBatchConfig,wr=0,Ia=null,la=null,Qa=0,bs=0,Uh=Zu(0),Sa=0,Mg=null,wf=0,X2=0,n3=0,rg=null,Xi=null,a3=0,M0=1/0,ec=null,Jy=!1,IS=null,Fu=null,m1=!1,Eu=null,Qy=0,ng=0,MS=null,vy=-1,xy=0;function Mi(){return wr&6?Gn():vy!==-1?vy:vy=Gn()}function $u(e){return e.mode&1?wr&2&&Qa!==0?Qa&-Qa:eK.transition!==null?(xy===0&&(xy=kI()),xy):(e=Hr,e!==0||(e=window.event,e=e===void 0?16:MI(e.type)),e):1}function Go(e,t,r,n){if(50<ng)throw ng=0,MS=null,Error(et(185));zv(e,r,n),(!(wr&2)||e!==Ia)&&(e===Ia&&(!(wr&2)&&(X2|=r),Sa===4&&hu(e,Qa)),ts(e,n),r===1&&wr===0&&!(t.mode&1)&&(M0=Gn()+500,V2&&ed()))}function ts(e,t){var r=e.callbackNode;eG(e,t);var n=Dy(e,e===Ia?Qa:0);if(n===0)r!==null&&bC(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&bC(r),t===1)e.tag===0?ZG(fk.bind(null,e)):r7(fk.bind(null,e)),YG(function(){!(wr&6)&&ed()}),r=null;else{switch(OI(n)){case 1:r=k4;break;case 4:r=TI;break;case 16:r=Ry;break;case 536870912:r=CI;break;default:r=Ry}r=eM(r,G7.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function G7(e,t){if(vy=-1,xy=0,wr&6)throw Error(et(327));var r=e.callbackNode;if(t0()&&e.callbackNode!==r)return null;var n=Dy(e,e===Ia?Qa:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Zy(e,n);else{t=n;var a=wr;wr|=2;var i=Y7();(Ia!==e||Qa!==t)&&(ec=null,M0=Gn()+500,df(e,t));do try{bK();break}catch(l){K7(e,l)}while(!0);q4(),Xy.current=i,wr=a,la!==null?t=0:(Ia=null,Qa=0,t=Sa)}if(t!==0){if(t===2&&(a=uS(e),a!==0&&(n=a,t=FS(e,a))),t===1)throw r=Mg,df(e,0),hu(e,n),ts(e,Gn()),r;if(t===6)hu(e,n);else{if(a=e.current.alternate,!(n&30)&&!xK(a)&&(t=Zy(e,n),t===2&&(i=uS(e),i!==0&&(n=i,t=FS(e,i))),t===1))throw r=Mg,df(e,0),hu(e,n),ts(e,Gn()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(et(345));case 2:Pd(e,Xi,ec);break;case 3:if(hu(e,n),(n&130023424)===n&&(t=a3+500-Gn(),10<t)){if(Dy(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Mi(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=xS(Pd.bind(null,e,Xi,ec),t);break}Pd(e,Xi,ec);break;case 4:if(hu(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var s=31-Vo(n);i=1<<s,s=t[s],s>a&&(a=s),n&=~i}if(n=a,n=Gn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*vK(n/1960))-n,10<n){e.timeoutHandle=xS(Pd.bind(null,e,Xi,ec),n);break}Pd(e,Xi,ec);break;case 5:Pd(e,Xi,ec);break;default:throw Error(et(329))}}}return ts(e,Gn()),e.callbackNode===r?G7.bind(null,e):null}function FS(e,t){var r=rg;return e.current.memoizedState.isDehydrated&&(df(e,t).flags|=256),e=Zy(e,t),e!==2&&(t=Xi,Xi=r,t!==null&&$S(t)),e}function $S(e){Xi===null?Xi=e:Xi.push.apply(Xi,e)}function xK(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Xo(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hu(e,t){for(t&=~n3,t&=~X2,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Vo(t),n=1<<r;e[r]=-1,t&=~n}}function fk(e){if(wr&6)throw Error(et(327));t0();var t=Dy(e,0);if(!(t&1))return ts(e,Gn()),null;var r=Zy(e,t);if(e.tag!==0&&r===2){var n=uS(e);n!==0&&(t=n,r=FS(e,n))}if(r===1)throw r=Mg,df(e,0),hu(e,t),ts(e,Gn()),r;if(r===6)throw Error(et(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pd(e,Xi,ec),ts(e,Gn()),null}function i3(e,t){var r=wr;wr|=1;try{return e(t)}finally{wr=r,wr===0&&(M0=Gn()+500,V2&&ed())}}function _f(e){Eu!==null&&Eu.tag===0&&!(wr&6)&&t0();var t=wr;wr|=1;var r=no.transition,n=Hr;try{if(no.transition=null,Hr=1,e)return e()}finally{Hr=n,no.transition=r,wr=t,!(wr&6)&&ed()}}function s3(){bs=Uh.current,pn(Uh)}function df(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,KG(r)),la!==null)for(r=la.return;r!==null;){var n=r;switch(B4(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&By();break;case 3:D0(),pn(Zi),pn(vi),Y4();break;case 5:K4(n);break;case 4:D0();break;case 13:pn(jn);break;case 19:pn(jn);break;case 10:H4(n.type._context);break;case 22:case 23:s3()}r=r.return}if(Ia=e,la=e=Bu(e.current,null),Qa=bs=t,Sa=0,Mg=null,n3=X2=wf=0,Xi=rg=null,Vd!==null){for(t=0;t<Vd.length;t++)if(r=Vd[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var s=i.next;i.next=a,n.next=s}r.pending=n}Vd=null}return e}function K7(e,t){do{var r=la;try{if(q4(),py.current=Yy,Ky){for(var n=En.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Ky=!1}if(bf=0,ka=wa=En=null,eg=!1,Rg=0,r3.current=null,r===null||r.return===null){Sa=1,Mg=t,la=null;break}e:{var i=e,s=r.return,l=r,c=t;if(t=Qa,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=ZC(s);if(h!==null){h.flags&=-257,ek(h,s,l,i,t),h.mode&1&&QC(i,u,t),t=h,c=u;var g=t.updateQueue;if(g===null){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}else{if(!(t&1)){QC(i,u,t),o3();break e}c=Error(et(426))}}else if(xn&&l.mode&1){var x=ZC(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),ek(x,s,l,i,t),U4(I0(c,l));break e}}i=c=I0(c,l),Sa!==4&&(Sa=2),rg===null?rg=[i]:rg.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=O7(i,c,t);VC(i,y);break e;case 1:l=c;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Fu===null||!Fu.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=P7(i,l,t);VC(i,N);break e}}i=i.return}while(i!==null)}J7(r)}catch(_){t=_,la===r&&r!==null&&(la=r=r.return);continue}break}while(!0)}function Y7(){var e=Xy.current;return Xy.current=Yy,e===null?Yy:e}function o3(){(Sa===0||Sa===3||Sa===2)&&(Sa=4),Ia===null||!(wf&268435455)&&!(X2&268435455)||hu(Ia,Qa)}function Zy(e,t){var r=wr;wr|=2;var n=Y7();(Ia!==e||Qa!==t)&&(ec=null,df(e,t));do try{yK();break}catch(a){K7(e,a)}while(!0);if(q4(),wr=r,Xy.current=n,la!==null)throw Error(et(261));return Ia=null,Qa=0,Sa}function yK(){for(;la!==null;)X7(la)}function bK(){for(;la!==null&&!WV();)X7(la)}function X7(e){var t=Z7(e.alternate,e,bs);e.memoizedProps=e.pendingProps,t===null?J7(e):la=t,r3.current=null}function J7(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=hK(r,t),r!==null){r.flags&=32767,la=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Sa=6,la=null;return}}else if(r=fK(r,t,bs),r!==null){la=r;return}if(t=t.sibling,t!==null){la=t;return}la=t=e}while(t!==null);Sa===0&&(Sa=5)}function Pd(e,t,r){var n=Hr,a=no.transition;try{no.transition=null,Hr=1,wK(e,t,r,n)}finally{no.transition=a,Hr=n}return null}function wK(e,t,r,n){do t0();while(Eu!==null);if(wr&6)throw Error(et(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(et(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(tG(e,i),e===Ia&&(la=Ia=null,Qa=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||m1||(m1=!0,eM(Ry,function(){return t0(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=no.transition,no.transition=null;var s=Hr;Hr=1;var l=wr;wr|=4,r3.current=null,mK(e,r),W7(r,e),UG(gS),Iy=!!mS,gS=mS=null,e.current=r,gK(r),VV(),wr=l,Hr=s,no.transition=i}else e.current=r;if(m1&&(m1=!1,Eu=e,Qy=a),i=e.pendingLanes,i===0&&(Fu=null),YV(r.stateNode),ts(e,Gn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Jy)throw Jy=!1,e=IS,IS=null,e;return Qy&1&&e.tag!==0&&t0(),i=e.pendingLanes,i&1?e===MS?ng++:(ng=0,MS=e):ng=0,ed(),null}function t0(){if(Eu!==null){var e=OI(Qy),t=no.transition,r=Hr;try{if(no.transition=null,Hr=16>e?16:e,Eu===null)var n=!1;else{if(e=Eu,Eu=null,Qy=0,wr&6)throw Error(et(331));var a=wr;for(wr|=4,vt=e.current;vt!==null;){var i=vt,s=i.child;if(vt.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(vt=u;vt!==null;){var d=vt;switch(d.tag){case 0:case 11:case 15:tg(8,d,i)}var f=d.child;if(f!==null)f.return=d,vt=f;else for(;vt!==null;){d=vt;var p=d.sibling,h=d.return;if(z7(d),d===u){vt=null;break}if(p!==null){p.return=h,vt=p;break}vt=h}}}var g=i.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var x=m.sibling;m.sibling=null,m=x}while(m!==null)}}vt=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,vt=s;else e:for(;vt!==null;){if(i=vt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:tg(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,vt=y;break e}vt=i.return}}var v=e.current;for(vt=v;vt!==null;){s=vt;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,vt=b;else e:for(s=v;vt!==null;){if(l=vt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Y2(9,l)}}catch(_){In(l,l.return,_)}if(l===s){vt=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,vt=N;break e}vt=l.return}}if(wr=a,ed(),wl&&typeof wl.onPostCommitFiberRoot=="function")try{wl.onPostCommitFiberRoot(U2,e)}catch{}n=!0}return n}finally{Hr=r,no.transition=t}}return!1}function hk(e,t,r){t=I0(r,t),t=O7(e,t,1),e=Mu(e,t,1),t=Mi(),e!==null&&(zv(e,1,t),ts(e,t))}function In(e,t,r){if(e.tag===3)hk(e,e,r);else for(;t!==null;){if(t.tag===3){hk(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Fu===null||!Fu.has(n))){e=I0(r,e),e=P7(t,e,1),t=Mu(t,e,1),e=Mi(),t!==null&&(zv(t,1,e),ts(t,e));break}}t=t.return}}function _K(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Mi(),e.pingedLanes|=e.suspendedLanes&r,Ia===e&&(Qa&r)===r&&(Sa===4||Sa===3&&(Qa&130023424)===Qa&&500>Gn()-a3?df(e,0):n3|=r),ts(e,t)}function Q7(e,t){t===0&&(e.mode&1?(t=i1,i1<<=1,!(i1&130023424)&&(i1=4194304)):t=1);var r=Mi();e=Sc(e,t),e!==null&&(zv(e,t,r),ts(e,r))}function NK(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Q7(e,r)}function SK(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(et(314))}n!==null&&n.delete(t),Q7(e,r)}var Z7;Z7=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Zi.current)Ji=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ji=!1,dK(e,t,r);Ji=!!(e.flags&131072)}else Ji=!1,xn&&t.flags&1048576&&n7(t,qy,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;gy(e,t),e=t.pendingProps;var a=P0(t,vi.current);e0(t,r),a=J4(null,t,n,e,a,r);var i=Q4();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,es(n)?(i=!0,Uy(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,V4(t),a.updater=K2,t.stateNode=a,a._reactInternals=t,jS(t,n,e,r),t=TS(null,t,n,!0,i,r)):(t.tag=0,xn&&i&&$4(t),Ei(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(gy(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=AK(n),e=Po(n,e),a){case 0:t=ES(null,t,n,e,r);break e;case 1:t=nk(null,t,n,e,r);break e;case 11:t=tk(null,t,n,e,r);break e;case 14:t=rk(null,t,n,Po(n.type,e),r);break e}throw Error(et(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Po(n,a),ES(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Po(n,a),nk(e,t,n,a,r);case 3:e:{if(I7(t),e===null)throw Error(et(387));n=t.pendingProps,i=t.memoizedState,a=i.element,c7(e,t),Vy(t,n,null,r);var s=t.memoizedState;if(n=s.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=I0(Error(et(423)),t),t=ak(e,t,n,r,a);break e}else if(n!==a){a=I0(Error(et(424)),t),t=ak(e,t,n,r,a);break e}else for(Cs=Iu(t.stateNode.containerInfo.firstChild),Os=t,xn=!0,Bo=null,r=o7(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(L0(),n===a){t=jc(e,t,r);break e}Ei(e,t,n,r)}t=t.child}return t;case 5:return u7(t),e===null&&_S(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,s=a.children,vS(n,a)?s=null:i!==null&&vS(n,i)&&(t.flags|=32),D7(e,t),Ei(e,t,s,r),t.child;case 6:return e===null&&_S(t),null;case 13:return M7(e,t,r);case 4:return G4(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=R0(t,null,n,r):Ei(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Po(n,a),tk(e,t,n,a,r);case 7:return Ei(e,t,t.pendingProps,r),t.child;case 8:return Ei(e,t,t.pendingProps.children,r),t.child;case 12:return Ei(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,s=a.value,on(Hy,n._currentValue),n._currentValue=s,i!==null)if(Xo(i.value,s)){if(i.children===a.children&&!Zi.current){t=jc(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){s=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=pc(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),NS(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(et(341));s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),NS(s,r,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}Ei(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,e0(t,r),a=io(a),n=n(a),t.flags|=1,Ei(e,t,n,r),t.child;case 14:return n=t.type,a=Po(n,t.pendingProps),a=Po(n.type,a),rk(e,t,n,a,r);case 15:return L7(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Po(n,a),gy(e,t),t.tag=1,es(n)?(e=!0,Uy(t)):e=!1,e0(t,r),k7(t,n,a),jS(t,n,a,r),TS(null,t,n,!0,e,r);case 19:return F7(e,t,r);case 22:return R7(e,t,r)}throw Error(et(156,t.tag))};function eM(e,t){return EI(e,t)}function jK(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function to(e,t,r,n){return new jK(e,t,r,n)}function l3(e){return e=e.prototype,!(!e||!e.isReactComponent)}function AK(e){if(typeof e=="function")return l3(e)?1:0;if(e!=null){if(e=e.$$typeof,e===E4)return 11;if(e===T4)return 14}return 2}function Bu(e,t){var r=e.alternate;return r===null?(r=to(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function yy(e,t,r,n,a,i){var s=2;if(n=e,typeof e=="function")l3(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Oh:return ff(r.children,a,i,t);case A4:s=8,a|=8;break;case YN:return e=to(12,r,t,a|2),e.elementType=YN,e.lanes=i,e;case XN:return e=to(13,r,t,a),e.elementType=XN,e.lanes=i,e;case JN:return e=to(19,r,t,a),e.elementType=JN,e.lanes=i,e;case uI:return J2(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case lI:s=10;break e;case cI:s=9;break e;case E4:s=11;break e;case T4:s=14;break e;case cu:s=16,n=null;break e}throw Error(et(130,e==null?e:typeof e,""))}return t=to(s,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function ff(e,t,r,n){return e=to(7,e,n,t),e.lanes=r,e}function J2(e,t,r,n){return e=to(22,e,n,t),e.elementType=uI,e.lanes=r,e.stateNode={isHidden:!1},e}function _5(e,t,r){return e=to(6,e,null,t),e.lanes=r,e}function N5(e,t,r){return t=to(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function EK(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=n5(0),this.expirationTimes=n5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=n5(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function c3(e,t,r,n,a,i,s,l,c){return e=new EK(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=to(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},V4(i),e}function TK(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kh,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function tM(e){if(!e)return Wu;e=e._reactInternals;e:{if($f(e)!==e||e.tag!==1)throw Error(et(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(es(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(et(171))}if(e.tag===1){var r=e.type;if(es(r))return t7(e,r,t)}return t}function rM(e,t,r,n,a,i,s,l,c){return e=c3(r,n,!0,e,a,i,s,l,c),e.context=tM(null),r=e.current,n=Mi(),a=$u(r),i=pc(n,a),i.callback=t??null,Mu(r,i,a),e.current.lanes=a,zv(e,a,n),ts(e,n),e}function Q2(e,t,r,n){var a=t.current,i=Mi(),s=$u(a);return r=tM(r),t.context===null?t.context=r:t.pendingContext=r,t=pc(i,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Mu(a,t,s),e!==null&&(Go(e,a,s,i),hy(e,a,s)),s}function eb(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function pk(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function u3(e,t){pk(e,t),(e=e.alternate)&&pk(e,t)}function CK(){return null}var nM=typeof reportError=="function"?reportError:function(e){console.error(e)};function d3(e){this._internalRoot=e}Z2.prototype.render=d3.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(et(409));Q2(e,t,null,null)};Z2.prototype.unmount=d3.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;_f(function(){Q2(null,e,null,null)}),t[Nc]=null}};function Z2(e){this._internalRoot=e}Z2.prototype.unstable_scheduleHydration=function(e){if(e){var t=RI();e={blockedOn:null,target:e,priority:t};for(var r=0;r<fu.length&&t!==0&&t<fu[r].priority;r++);fu.splice(r,0,e),r===0&&II(e)}};function f3(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ew(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mk(){}function kK(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=eb(s);i.call(u)}}var s=rM(t,n,e,0,null,!1,!1,"",mk);return e._reactRootContainer=s,e[Nc]=s.current,Cg(e.nodeType===8?e.parentNode:e),_f(),s}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=eb(c);l.call(u)}}var c=c3(e,0,!1,null,null,!1,!1,"",mk);return e._reactRootContainer=c,e[Nc]=c.current,Cg(e.nodeType===8?e.parentNode:e),_f(function(){Q2(t,c,r,n)}),c}function tw(e,t,r,n,a){var i=r._reactRootContainer;if(i){var s=i;if(typeof a=="function"){var l=a;a=function(){var c=eb(s);l.call(c)}}Q2(t,s,e,a)}else s=kK(r,t,e,a,n);return eb(s)}PI=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Bm(t.pendingLanes);r!==0&&(O4(t,r|1),ts(t,Gn()),!(wr&6)&&(M0=Gn()+500,ed()))}break;case 13:_f(function(){var n=Sc(e,1);if(n!==null){var a=Mi();Go(n,e,1,a)}}),u3(e,1)}};P4=function(e){if(e.tag===13){var t=Sc(e,134217728);if(t!==null){var r=Mi();Go(t,e,134217728,r)}u3(e,134217728)}};LI=function(e){if(e.tag===13){var t=$u(e),r=Sc(e,t);if(r!==null){var n=Mi();Go(r,e,t,n)}u3(e,t)}};RI=function(){return Hr};DI=function(e,t){var r=Hr;try{return Hr=e,t()}finally{Hr=r}};oS=function(e,t,r){switch(t){case"input":if(eS(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=W2(n);if(!a)throw Error(et(90));fI(n),eS(n,a)}}}break;case"textarea":pI(e,r);break;case"select":t=r.value,t!=null&&Xh(e,!!r.multiple,t,!1)}};wI=i3;_I=_f;var OK={usingClientEntryPoint:!1,Events:[Hv,Dh,W2,yI,bI,i3]},_m={findFiberByHostInstance:Wd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PK={bundleType:_m.bundleType,version:_m.version,rendererPackageName:_m.rendererPackageName,rendererConfig:_m.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=jI(e),e===null?null:e.stateNode},findFiberByHostInstance:_m.findFiberByHostInstance||CK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var g1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!g1.isDisabled&&g1.supportsFiber)try{U2=g1.inject(PK),wl=g1}catch{}}Is.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OK;Is.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f3(t))throw Error(et(200));return TK(e,t,null,r)};Is.createRoot=function(e,t){if(!f3(e))throw Error(et(299));var r=!1,n="",a=nM;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=c3(e,1,!1,null,null,r,!1,n,a),e[Nc]=t.current,Cg(e.nodeType===8?e.parentNode:e),new d3(t)};Is.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(et(188)):(e=Object.keys(e).join(","),Error(et(268,e)));return e=jI(t),e=e===null?null:e.stateNode,e};Is.flushSync=function(e){return _f(e)};Is.hydrate=function(e,t,r){if(!ew(t))throw Error(et(200));return tw(null,e,t,!0,r)};Is.hydrateRoot=function(e,t,r){if(!f3(e))throw Error(et(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",s=nM;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=rM(t,null,e,1,r??null,a,!1,i,s),e[Nc]=t.current,Cg(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Z2(t)};Is.render=function(e,t,r){if(!ew(t))throw Error(et(200));return tw(null,e,t,!1,r)};Is.unmountComponentAtNode=function(e){if(!ew(e))throw Error(et(40));return e._reactRootContainer?(_f(function(){tw(null,null,e,!1,function(){e._reactRootContainer=null,e[Nc]=null})}),!0):!1};Is.unstable_batchedUpdates=i3;Is.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ew(r))throw Error(et(200));if(e==null||e._reactInternals===void 0)throw Error(et(38));return tw(e,t,r,!1,n)};Is.version="18.3.1-next-f1338f8080-20240426";function aM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aM)}catch(e){console.error(e)}}aM(),aI.exports=Is;var LK=aI.exports,gk=LK;GN.createRoot=gk.createRoot,GN.hydrateRoot=gk.hydrateRoot;var bp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},RK={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},vu,x4,DD,DK=(DD=class{constructor(){It(this,vu,RK);It(this,x4,!1)}setTimeoutProvider(e){ft(this,vu,e)}setTimeout(e,t){return xe(this,vu).setTimeout(e,t)}clearTimeout(e){xe(this,vu).clearTimeout(e)}setInterval(e,t){return xe(this,vu).setInterval(e,t)}clearInterval(e){xe(this,vu).clearInterval(e)}},vu=new WeakMap,x4=new WeakMap,DD),Kd=new DK;function IK(e){setTimeout(e,0)}var Nf=typeof window>"u"||"Deno"in globalThis;function Ti(){}function MK(e,t){return typeof e=="function"?e(t):e}function BS(e){return typeof e=="number"&&e>=0&&e!==1/0}function iM(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Uu(e,t){return typeof e=="function"?e(t):e}function Js(e,t){return typeof e=="function"?e(t):e}function vk(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:s,stale:l}=e;if(s){if(n){if(t.queryHash!==h3(s,t.options))return!1}else if(!Fg(t.queryKey,s))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function xk(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Sf(t.options.mutationKey)!==Sf(i))return!1}else if(!Fg(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function h3(e,t){return((t==null?void 0:t.queryKeyHashFn)||Sf)(e)}function Sf(e){return JSON.stringify(e,(t,r)=>US(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Fg(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Fg(e[r],t[r])):!1}var FK=Object.prototype.hasOwnProperty;function sM(e,t){if(e===t)return e;const r=yk(e)&&yk(t);if(!r&&!(US(e)&&US(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),s=i.length,l=r?new Array(s):{};let c=0;for(let u=0;u<s;u++){const d=r?u:i[u],f=e[d],p=t[d];if(f===p){l[d]=f,(r?u<a:FK.call(e,d))&&c++;continue}if(f===null||p===null||typeof f!="object"||typeof p!="object"){l[d]=p;continue}const h=sM(f,p);l[d]=h,h===f&&c++}return a===s&&c===a?e:l}function tb(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function yk(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function US(e){if(!bk(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!bk(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function bk(e){return Object.prototype.toString.call(e)==="[object Object]"}function $K(e){return new Promise(t=>{Kd.setTimeout(t,e)})}function zS(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?sM(e,t):t}function BK(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function UK(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var p3=Symbol();function oM(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===p3?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function lM(e,t){return typeof e=="function"?e(...t):!!e}var tf,xu,y0,ID,zK=(ID=class extends bp{constructor(){super();It(this,tf);It(this,xu);It(this,y0);ft(this,y0,t=>{if(!Nf&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){xe(this,xu)||this.setEventListener(xe(this,y0))}onUnsubscribe(){var t;this.hasListeners()||((t=xe(this,xu))==null||t.call(this),ft(this,xu,void 0))}setEventListener(t){var r;ft(this,y0,t),(r=xe(this,xu))==null||r.call(this),ft(this,xu,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){xe(this,tf)!==t&&(ft(this,tf,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof xe(this,tf)=="boolean"?xe(this,tf):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},tf=new WeakMap,xu=new WeakMap,y0=new WeakMap,ID),m3=new zK;function qS(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var qK=IK;function HK(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=qK;const i=l=>{t?e.push(l):a(()=>{r(l)})},s=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||s()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var _a=HK(),b0,yu,w0,MD,WK=(MD=class extends bp{constructor(){super();It(this,b0,!0);It(this,yu);It(this,w0);ft(this,w0,t=>{if(!Nf&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){xe(this,yu)||this.setEventListener(xe(this,w0))}onUnsubscribe(){var t;this.hasListeners()||((t=xe(this,yu))==null||t.call(this),ft(this,yu,void 0))}setEventListener(t){var r;ft(this,w0,t),(r=xe(this,yu))==null||r.call(this),ft(this,yu,t(this.setOnline.bind(this)))}setOnline(t){xe(this,b0)!==t&&(ft(this,b0,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return xe(this,b0)}},b0=new WeakMap,yu=new WeakMap,w0=new WeakMap,MD),rb=new WK;function VK(e){return Math.min(1e3*2**e,3e4)}function cM(e){return(e??"online")==="online"?rb.isOnline():!0}var HS=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function uM(e){let t=!1,r=0,n;const a=qS(),i=()=>a.status!=="pending",s=m=>{var x;if(!i()){const y=new HS(m);p(y),(x=e.onCancel)==null||x.call(e,y)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>m3.isFocused()&&(e.networkMode==="always"||rb.isOnline())&&e.canRun(),d=()=>cM(e.networkMode)&&e.canRun(),f=m=>{i()||(n==null||n(),a.resolve(m))},p=m=>{i()||(n==null||n(),a.reject(m))},h=()=>new Promise(m=>{var x;n=y=>{(i()||u())&&m(y)},(x=e.onPause)==null||x.call(e)}).then(()=>{var m;n=void 0,i()||(m=e.onContinue)==null||m.call(e)}),g=()=>{if(i())return;let m;const x=r===0?e.initialPromise:void 0;try{m=x??e.fn()}catch(y){m=Promise.reject(y)}Promise.resolve(m).then(f).catch(y=>{var E;if(i())return;const v=e.retry??(Nf?0:3),b=e.retryDelay??VK,N=typeof b=="function"?b(r,y):b,_=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,y);if(t||!_){p(y);return}r++,(E=e.onFail)==null||E.call(e,r,y),$K(N).then(()=>u()?void 0:h()).then(()=>{t?p(y):g()})})};return{promise:a,status:()=>a.status,cancel:s,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?g():h().then(g),a)}}var rf,FD,dM=(FD=class{constructor(){It(this,rf)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),BS(this.gcTime)&&ft(this,rf,Kd.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Nf?1/0:5*60*1e3))}clearGcTimeout(){xe(this,rf)&&(Kd.clearTimeout(xe(this,rf)),ft(this,rf,void 0))}},rf=new WeakMap,FD),nf,_0,Ys,af,Ta,Iv,sf,Ro,Zl,$D,GK=($D=class extends dM{constructor(t){super();It(this,Ro);It(this,nf);It(this,_0);It(this,Ys);It(this,af);It(this,Ta);It(this,Iv);It(this,sf);ft(this,sf,!1),ft(this,Iv,t.defaultOptions),this.setOptions(t.options),this.observers=[],ft(this,af,t.client),ft(this,Ys,xe(this,af).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ft(this,nf,_k(this.options)),this.state=t.state??xe(this,nf),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=xe(this,Ta))==null?void 0:t.promise}setOptions(t){if(this.options={...xe(this,Iv),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=_k(this.options);r.data!==void 0&&(this.setState(wk(r.data,r.dataUpdatedAt)),ft(this,nf,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&xe(this,Ys).remove(this)}setData(t,r){const n=zS(this.state.data,t,this.options);return ur(this,Ro,Zl).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){ur(this,Ro,Zl).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=xe(this,Ta))==null?void 0:n.promise;return(a=xe(this,Ta))==null||a.cancel(t),r?r.then(Ti).catch(Ti):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(xe(this,nf))}isActive(){return this.observers.some(t=>Js(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===p3||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Uu(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!iM(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=xe(this,Ta))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=xe(this,Ta))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),xe(this,Ys).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(xe(this,Ta)&&(xe(this,sf)?xe(this,Ta).cancel({revert:!0}):xe(this,Ta).cancelRetry()),this.scheduleGc()),xe(this,Ys).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ur(this,Ro,Zl).call(this,{type:"invalidate"})}async fetch(t,r){var c,u,d,f,p,h,g,m,x,y,v,b;if(this.state.fetchStatus!=="idle"&&((c=xe(this,Ta))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(xe(this,Ta))return xe(this,Ta).continueRetry(),xe(this,Ta).promise}if(t&&this.setOptions(t),!this.options.queryFn){const N=this.observers.find(_=>_.options.queryFn);N&&this.setOptions(N.options)}const n=new AbortController,a=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(ft(this,sf,!0),n.signal)})},i=()=>{const N=oM(this.options,r),E=(()=>{const j={client:xe(this,af),queryKey:this.queryKey,meta:this.meta};return a(j),j})();return ft(this,sf,!1),this.options.persister?this.options.persister(N,E,this):N(E)},l=(()=>{const N={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:xe(this,af),state:this.state,fetchFn:i};return a(N),N})();(u=this.options.behavior)==null||u.onFetch(l,this),ft(this,_0,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&ur(this,Ro,Zl).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),ft(this,Ta,uM({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:N=>{N instanceof HS&&N.revert&&this.setState({...xe(this,_0),fetchStatus:"idle"}),n.abort()},onFail:(N,_)=>{ur(this,Ro,Zl).call(this,{type:"failed",failureCount:N,error:_})},onPause:()=>{ur(this,Ro,Zl).call(this,{type:"pause"})},onContinue:()=>{ur(this,Ro,Zl).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const N=await xe(this,Ta).start();if(N===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(N),(h=(p=xe(this,Ys).config).onSuccess)==null||h.call(p,N,this),(m=(g=xe(this,Ys).config).onSettled)==null||m.call(g,N,this.state.error,this),N}catch(N){if(N instanceof HS){if(N.silent)return xe(this,Ta).promise;if(N.revert){if(this.state.data===void 0)throw N;return this.state.data}}throw ur(this,Ro,Zl).call(this,{type:"error",error:N}),(y=(x=xe(this,Ys).config).onError)==null||y.call(x,N,this),(b=(v=xe(this,Ys).config).onSettled)==null||b.call(v,this.state.data,N,this),N}finally{this.scheduleGc()}}},nf=new WeakMap,_0=new WeakMap,Ys=new WeakMap,af=new WeakMap,Ta=new WeakMap,Iv=new WeakMap,sf=new WeakMap,Ro=new WeakSet,Zl=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...fM(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...wk(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ft(this,_0,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),_a.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),xe(this,Ys).notify({query:this,type:"updated",action:t})})},$D);function fM(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:cM(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function wk(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function _k(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Gi,gr,Mv,ji,of,N0,ac,bu,Fv,S0,j0,lf,cf,wu,A0,Rr,zm,WS,VS,GS,KS,YS,XS,JS,hM,BD,KK=(BD=class extends bp{constructor(t,r){super();It(this,Rr);It(this,Gi);It(this,gr);It(this,Mv);It(this,ji);It(this,of);It(this,N0);It(this,ac);It(this,bu);It(this,Fv);It(this,S0);It(this,j0);It(this,lf);It(this,cf);It(this,wu);It(this,A0,new Set);this.options=r,ft(this,Gi,t),ft(this,bu,null),ft(this,ac,qS()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(xe(this,gr).addObserver(this),Nk(xe(this,gr),this.options)?ur(this,Rr,zm).call(this):this.updateResult(),ur(this,Rr,KS).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return QS(xe(this,gr),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return QS(xe(this,gr),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ur(this,Rr,YS).call(this),ur(this,Rr,XS).call(this),xe(this,gr).removeObserver(this)}setOptions(t){const r=this.options,n=xe(this,gr);if(this.options=xe(this,Gi).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Js(this.options.enabled,xe(this,gr))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ur(this,Rr,JS).call(this),xe(this,gr).setOptions(this.options),r._defaulted&&!tb(this.options,r)&&xe(this,Gi).getQueryCache().notify({type:"observerOptionsUpdated",query:xe(this,gr),observer:this});const a=this.hasListeners();a&&Sk(xe(this,gr),n,this.options,r)&&ur(this,Rr,zm).call(this),this.updateResult(),a&&(xe(this,gr)!==n||Js(this.options.enabled,xe(this,gr))!==Js(r.enabled,xe(this,gr))||Uu(this.options.staleTime,xe(this,gr))!==Uu(r.staleTime,xe(this,gr)))&&ur(this,Rr,WS).call(this);const i=ur(this,Rr,VS).call(this);a&&(xe(this,gr)!==n||Js(this.options.enabled,xe(this,gr))!==Js(r.enabled,xe(this,gr))||i!==xe(this,wu))&&ur(this,Rr,GS).call(this,i)}getOptimisticResult(t){const r=xe(this,Gi).getQueryCache().build(xe(this,Gi),t),n=this.createResult(r,t);return XK(this,n)&&(ft(this,ji,n),ft(this,N0,this.options),ft(this,of,xe(this,gr).state)),n}getCurrentResult(){return xe(this,ji)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&xe(this,ac).status==="pending"&&xe(this,ac).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){xe(this,A0).add(t)}getCurrentQuery(){return xe(this,gr)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=xe(this,Gi).defaultQueryOptions(t),n=xe(this,Gi).getQueryCache().build(xe(this,Gi),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return ur(this,Rr,zm).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),xe(this,ji)))}createResult(t,r){var T;const n=xe(this,gr),a=this.options,i=xe(this,ji),s=xe(this,of),l=xe(this,N0),u=t!==n?t.state:xe(this,Mv),{state:d}=t;let f={...d},p=!1,h;if(r._optimisticResults){const P=this.hasListeners(),O=!P&&Nk(t,r),R=P&&Sk(t,n,r,a);(O||R)&&(f={...f,...fM(d.data,t.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:g,errorUpdatedAt:m,status:x}=f;h=f.data;let y=!1;if(r.placeholderData!==void 0&&h===void 0&&x==="pending"){let P;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(P=i.data,y=!0):P=typeof r.placeholderData=="function"?r.placeholderData((T=xe(this,j0))==null?void 0:T.state.data,xe(this,j0)):r.placeholderData,P!==void 0&&(x="success",h=zS(i==null?void 0:i.data,P,r),p=!0)}if(r.select&&h!==void 0&&!y)if(i&&h===(s==null?void 0:s.data)&&r.select===xe(this,Fv))h=xe(this,S0);else try{ft(this,Fv,r.select),h=r.select(h),h=zS(i==null?void 0:i.data,h,r),ft(this,S0,h),ft(this,bu,null)}catch(P){ft(this,bu,P)}xe(this,bu)&&(g=xe(this,bu),h=xe(this,S0),m=Date.now(),x="error");const v=f.fetchStatus==="fetching",b=x==="pending",N=x==="error",_=b&&v,E=h!==void 0,A={status:x,fetchStatus:f.fetchStatus,isPending:b,isSuccess:x==="success",isError:N,isInitialLoading:_,isLoading:_,data:h,dataUpdatedAt:f.dataUpdatedAt,error:g,errorUpdatedAt:m,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:v,isRefetching:v&&!b,isLoadingError:N&&!E,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:N&&E,isStale:g3(t,r),refetch:this.refetch,promise:xe(this,ac),isEnabled:Js(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const P=I=>{A.status==="error"?I.reject(A.error):A.data!==void 0&&I.resolve(A.data)},O=()=>{const I=ft(this,ac,A.promise=qS());P(I)},R=xe(this,ac);switch(R.status){case"pending":t.queryHash===n.queryHash&&P(R);break;case"fulfilled":(A.status==="error"||A.data!==R.value)&&O();break;case"rejected":(A.status!=="error"||A.error!==R.reason)&&O();break}}return A}updateResult(){const t=xe(this,ji),r=this.createResult(xe(this,gr),this.options);if(ft(this,of,xe(this,gr).state),ft(this,N0,this.options),xe(this,of).data!==void 0&&ft(this,j0,xe(this,gr)),tb(r,t))return;ft(this,ji,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!xe(this,A0).size)return!0;const s=new Set(i??xe(this,A0));return this.options.throwOnError&&s.add("error"),Object.keys(xe(this,ji)).some(l=>{const c=l;return xe(this,ji)[c]!==t[c]&&s.has(c)})};ur(this,Rr,hM).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ur(this,Rr,KS).call(this)}},Gi=new WeakMap,gr=new WeakMap,Mv=new WeakMap,ji=new WeakMap,of=new WeakMap,N0=new WeakMap,ac=new WeakMap,bu=new WeakMap,Fv=new WeakMap,S0=new WeakMap,j0=new WeakMap,lf=new WeakMap,cf=new WeakMap,wu=new WeakMap,A0=new WeakMap,Rr=new WeakSet,zm=function(t){ur(this,Rr,JS).call(this);let r=xe(this,gr).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Ti)),r},WS=function(){ur(this,Rr,YS).call(this);const t=Uu(this.options.staleTime,xe(this,gr));if(Nf||xe(this,ji).isStale||!BS(t))return;const n=iM(xe(this,ji).dataUpdatedAt,t)+1;ft(this,lf,Kd.setTimeout(()=>{xe(this,ji).isStale||this.updateResult()},n))},VS=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(xe(this,gr)):this.options.refetchInterval)??!1},GS=function(t){ur(this,Rr,XS).call(this),ft(this,wu,t),!(Nf||Js(this.options.enabled,xe(this,gr))===!1||!BS(xe(this,wu))||xe(this,wu)===0)&&ft(this,cf,Kd.setInterval(()=>{(this.options.refetchIntervalInBackground||m3.isFocused())&&ur(this,Rr,zm).call(this)},xe(this,wu)))},KS=function(){ur(this,Rr,WS).call(this),ur(this,Rr,GS).call(this,ur(this,Rr,VS).call(this))},YS=function(){xe(this,lf)&&(Kd.clearTimeout(xe(this,lf)),ft(this,lf,void 0))},XS=function(){xe(this,cf)&&(Kd.clearInterval(xe(this,cf)),ft(this,cf,void 0))},JS=function(){const t=xe(this,Gi).getQueryCache().build(xe(this,Gi),this.options);if(t===xe(this,gr))return;const r=xe(this,gr);ft(this,gr,t),ft(this,Mv,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},hM=function(t){_a.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(xe(this,ji))}),xe(this,Gi).getQueryCache().notify({query:xe(this,gr),type:"observerResultsUpdated"})})},BD);function YK(e,t){return Js(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Nk(e,t){return YK(e,t)||e.state.data!==void 0&&QS(e,t,t.refetchOnMount)}function QS(e,t,r){if(Js(t.enabled,e)!==!1&&Uu(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&g3(e,t)}return!1}function Sk(e,t,r,n){return(e!==t||Js(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&g3(e,r)}function g3(e,t){return Js(t.enabled,e)!==!1&&e.isStaleByTime(Uu(t.staleTime,e))}function XK(e,t){return!tb(e.getCurrentResult(),t)}function jk(e){return{onFetch:(t,r)=>{var d,f,p,h,g;const n=t.options,a=(p=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((h=t.state.data)==null?void 0:h.pages)||[],s=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let m=!1;const x=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},y=oM(t.options,t.fetchOptions),v=async(b,N,_)=>{if(m)return Promise.reject();if(N==null&&b.pages.length)return Promise.resolve(b);const j=(()=>{const O={client:t.client,queryKey:t.queryKey,pageParam:N,direction:_?"backward":"forward",meta:t.options.meta};return x(O),O})(),A=await y(j),{maxPages:T}=t.options,P=_?UK:BK;return{pages:P(b.pages,A,T),pageParams:P(b.pageParams,N,T)}};if(a&&i.length){const b=a==="backward",N=b?JK:Ak,_={pages:i,pageParams:s},E=N(n,_);l=await v(_,E,b)}else{const b=e??i.length;do{const N=c===0?s[0]??n.initialPageParam:Ak(n,l);if(c>0&&N==null)break;l=await v(l,N),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var m,x;return(x=(m=t.options).persister)==null?void 0:x.call(m,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function Ak(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function JK(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var $v,ml,Ai,uf,gl,lu,UD,QK=(UD=class extends dM{constructor(t){super();It(this,gl);It(this,$v);It(this,ml);It(this,Ai);It(this,uf);ft(this,$v,t.client),this.mutationId=t.mutationId,ft(this,Ai,t.mutationCache),ft(this,ml,[]),this.state=t.state||pM(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){xe(this,ml).includes(t)||(xe(this,ml).push(t),this.clearGcTimeout(),xe(this,Ai).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ft(this,ml,xe(this,ml).filter(r=>r!==t)),this.scheduleGc(),xe(this,Ai).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){xe(this,ml).length||(this.state.status==="pending"?this.scheduleGc():xe(this,Ai).remove(this))}continue(){var t;return((t=xe(this,uf))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,l,c,u,d,f,p,h,g,m,x,y,v,b,N,_,E,j,A,T;const r=()=>{ur(this,gl,lu).call(this,{type:"continue"})},n={client:xe(this,$v),meta:this.options.meta,mutationKey:this.options.mutationKey};ft(this,uf,uM({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(P,O)=>{ur(this,gl,lu).call(this,{type:"failed",failureCount:P,error:O})},onPause:()=>{ur(this,gl,lu).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>xe(this,Ai).canRun(this)}));const a=this.state.status==="pending",i=!xe(this,uf).canStart();try{if(a)r();else{ur(this,gl,lu).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(s=xe(this,Ai).config).onMutate)==null?void 0:l.call(s,t,this,n));const O=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,n));O!==this.state.context&&ur(this,gl,lu).call(this,{type:"pending",context:O,variables:t,isPaused:i})}const P=await xe(this,uf).start();return await((f=(d=xe(this,Ai).config).onSuccess)==null?void 0:f.call(d,P,t,this.state.context,this,n)),await((h=(p=this.options).onSuccess)==null?void 0:h.call(p,P,t,this.state.context,n)),await((m=(g=xe(this,Ai).config).onSettled)==null?void 0:m.call(g,P,null,this.state.variables,this.state.context,this,n)),await((y=(x=this.options).onSettled)==null?void 0:y.call(x,P,null,t,this.state.context,n)),ur(this,gl,lu).call(this,{type:"success",data:P}),P}catch(P){try{throw await((b=(v=xe(this,Ai).config).onError)==null?void 0:b.call(v,P,t,this.state.context,this,n)),await((_=(N=this.options).onError)==null?void 0:_.call(N,P,t,this.state.context,n)),await((j=(E=xe(this,Ai).config).onSettled)==null?void 0:j.call(E,void 0,P,this.state.variables,this.state.context,this,n)),await((T=(A=this.options).onSettled)==null?void 0:T.call(A,void 0,P,t,this.state.context,n)),P}finally{ur(this,gl,lu).call(this,{type:"error",error:P})}}finally{xe(this,Ai).runNext(this)}}},$v=new WeakMap,ml=new WeakMap,Ai=new WeakMap,uf=new WeakMap,gl=new WeakSet,lu=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),_a.batch(()=>{xe(this,ml).forEach(n=>{n.onMutationUpdate(t)}),xe(this,Ai).notify({mutation:this,type:"updated",action:t})})},UD);function pM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ic,Do,Bv,zD,ZK=(zD=class extends bp{constructor(t={}){super();It(this,ic);It(this,Do);It(this,Bv);this.config=t,ft(this,ic,new Set),ft(this,Do,new Map),ft(this,Bv,0)}build(t,r,n){const a=new QK({client:t,mutationCache:this,mutationId:++Qx(this,Bv)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){xe(this,ic).add(t);const r=v1(t);if(typeof r=="string"){const n=xe(this,Do).get(r);n?n.push(t):xe(this,Do).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(xe(this,ic).delete(t)){const r=v1(t);if(typeof r=="string"){const n=xe(this,Do).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&xe(this,Do).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=v1(t);if(typeof r=="string"){const n=xe(this,Do).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=v1(t);if(typeof r=="string"){const a=(n=xe(this,Do).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){_a.batch(()=>{xe(this,ic).forEach(t=>{this.notify({type:"removed",mutation:t})}),xe(this,ic).clear(),xe(this,Do).clear()})}getAll(){return Array.from(xe(this,ic))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>xk(r,n))}findAll(t={}){return this.getAll().filter(r=>xk(t,r))}notify(t){_a.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return _a.batch(()=>Promise.all(t.map(r=>r.continue().catch(Ti))))}},ic=new WeakMap,Do=new WeakMap,Bv=new WeakMap,zD);function v1(e){var t;return(t=e.options.scope)==null?void 0:t.id}var sc,_u,Ki,oc,wc,by,ZS,qD,eY=(qD=class extends bp{constructor(r,n){super();It(this,wc);It(this,sc);It(this,_u);It(this,Ki);It(this,oc);ft(this,sc,r),this.setOptions(n),this.bindMethods(),ur(this,wc,by).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=xe(this,sc).defaultMutationOptions(r),tb(this.options,n)||xe(this,sc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:xe(this,Ki),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Sf(n.mutationKey)!==Sf(this.options.mutationKey)?this.reset():((a=xe(this,Ki))==null?void 0:a.state.status)==="pending"&&xe(this,Ki).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=xe(this,Ki))==null||r.removeObserver(this)}onMutationUpdate(r){ur(this,wc,by).call(this),ur(this,wc,ZS).call(this,r)}getCurrentResult(){return xe(this,_u)}reset(){var r;(r=xe(this,Ki))==null||r.removeObserver(this),ft(this,Ki,void 0),ur(this,wc,by).call(this),ur(this,wc,ZS).call(this)}mutate(r,n){var a;return ft(this,oc,n),(a=xe(this,Ki))==null||a.removeObserver(this),ft(this,Ki,xe(this,sc).getMutationCache().build(xe(this,sc),this.options)),xe(this,Ki).addObserver(this),xe(this,Ki).execute(r)}},sc=new WeakMap,_u=new WeakMap,Ki=new WeakMap,oc=new WeakMap,wc=new WeakSet,by=function(){var n;const r=((n=xe(this,Ki))==null?void 0:n.state)??pM();ft(this,_u,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},ZS=function(r){_a.batch(()=>{var n,a,i,s,l,c,u,d;if(xe(this,oc)&&this.hasListeners()){const f=xe(this,_u).variables,p=xe(this,_u).context,h={client:xe(this,sc),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(n=xe(this,oc)).onSuccess)==null||a.call(n,r.data,f,p,h),(s=(i=xe(this,oc)).onSettled)==null||s.call(i,r.data,null,f,p,h)):(r==null?void 0:r.type)==="error"&&((c=(l=xe(this,oc)).onError)==null||c.call(l,r.error,f,p,h),(d=(u=xe(this,oc)).onSettled)==null||d.call(u,void 0,r.error,f,p,h))}this.listeners.forEach(f=>{f(xe(this,_u))})})},qD),vl,HD,tY=(HD=class extends bp{constructor(t={}){super();It(this,vl);this.config=t,ft(this,vl,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??h3(a,r);let s=this.get(i);return s||(s=new GK({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(s)),s}add(t){xe(this,vl).has(t.queryHash)||(xe(this,vl).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=xe(this,vl).get(t.queryHash);r&&(t.destroy(),r===t&&xe(this,vl).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){_a.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return xe(this,vl).get(t)}getAll(){return[...xe(this,vl).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>vk(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>vk(t,n)):r}notify(t){_a.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){_a.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){_a.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},vl=new WeakMap,HD),Rn,Nu,Su,E0,T0,ju,C0,k0,WD,rY=(WD=class{constructor(e={}){It(this,Rn);It(this,Nu);It(this,Su);It(this,E0);It(this,T0);It(this,ju);It(this,C0);It(this,k0);ft(this,Rn,e.queryCache||new tY),ft(this,Nu,e.mutationCache||new ZK),ft(this,Su,e.defaultOptions||{}),ft(this,E0,new Map),ft(this,T0,new Map),ft(this,ju,0)}mount(){Qx(this,ju)._++,xe(this,ju)===1&&(ft(this,C0,m3.subscribe(async e=>{e&&(await this.resumePausedMutations(),xe(this,Rn).onFocus())})),ft(this,k0,rb.subscribe(async e=>{e&&(await this.resumePausedMutations(),xe(this,Rn).onOnline())})))}unmount(){var e,t;Qx(this,ju)._--,xe(this,ju)===0&&((e=xe(this,C0))==null||e.call(this),ft(this,C0,void 0),(t=xe(this,k0))==null||t.call(this),ft(this,k0,void 0))}isFetching(e){return xe(this,Rn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return xe(this,Nu).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=xe(this,Rn).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=xe(this,Rn).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Uu(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return xe(this,Rn).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=xe(this,Rn).get(n.queryHash),i=a==null?void 0:a.state.data,s=MK(t,i);if(s!==void 0)return xe(this,Rn).build(this,n).setData(s,{...r,manual:!0})}setQueriesData(e,t,r){return _a.batch(()=>xe(this,Rn).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=xe(this,Rn).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=xe(this,Rn);_a.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=xe(this,Rn);return _a.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=_a.batch(()=>xe(this,Rn).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(Ti).catch(Ti)}invalidateQueries(e,t={}){return _a.batch(()=>(xe(this,Rn).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=_a.batch(()=>xe(this,Rn).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Ti)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Ti)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=xe(this,Rn).build(this,t);return r.isStaleByTime(Uu(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ti).catch(Ti)}fetchInfiniteQuery(e){return e.behavior=jk(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ti).catch(Ti)}ensureInfiniteQueryData(e){return e.behavior=jk(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return rb.isOnline()?xe(this,Nu).resumePausedMutations():Promise.resolve()}getQueryCache(){return xe(this,Rn)}getMutationCache(){return xe(this,Nu)}getDefaultOptions(){return xe(this,Su)}setDefaultOptions(e){ft(this,Su,e)}setQueryDefaults(e,t){xe(this,E0).set(Sf(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...xe(this,E0).values()],r={};return t.forEach(n=>{Fg(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){xe(this,T0).set(Sf(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...xe(this,T0).values()],r={};return t.forEach(n=>{Fg(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...xe(this,Su).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=h3(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===p3&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...xe(this,Su).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){xe(this,Rn).clear(),xe(this,Nu).clear()}},Rn=new WeakMap,Nu=new WeakMap,Su=new WeakMap,E0=new WeakMap,T0=new WeakMap,ju=new WeakMap,C0=new WeakMap,k0=new WeakMap,WD),mM=D.createContext(void 0),St=e=>{const t=D.useContext(mM);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},nY=({client:e,children:t})=>(D.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(mM.Provider,{value:e,children:t})),gM=D.createContext(!1),aY=()=>D.useContext(gM);gM.Provider;function iY(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var sY=D.createContext(iY()),oY=()=>D.useContext(sY),lY=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},cY=e=>{D.useEffect(()=>{e.clearReset()},[e])},uY=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||lM(r,[e.error,n])),dY=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},fY=(e,t)=>e.isLoading&&e.isFetching&&!t,hY=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Ek=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function pY(e,t,r){var f,p,h,g,m;const n=aY(),a=oY(),i=St(),s=i.defaultQueryOptions(e);(p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,s),s._optimisticResults=n?"isRestoring":"optimistic",dY(s),lY(s,a),cY(a);const l=!i.getQueryCache().get(s.queryHash),[c]=D.useState(()=>new t(i,s)),u=c.getOptimisticResult(s),d=!n&&e.subscribed!==!1;if(D.useSyncExternalStore(D.useCallback(x=>{const y=d?c.subscribe(_a.batchCalls(x)):Ti;return c.updateResult(),y},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),D.useEffect(()=>{c.setOptions(s)},[s,c]),hY(s,u))throw Ek(s,c,a);if(uY({result:u,errorResetBoundary:a,throwOnError:s.throwOnError,query:i.getQueryCache().get(s.queryHash),suspense:s.suspense}))throw u.error;if((g=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||g.call(h,s,u),s.experimental_prefetchInRender&&!Nf&&fY(u,n)){const x=l?Ek(s,c,a):(m=i.getQueryCache().get(s.queryHash))==null?void 0:m.promise;x==null||x.catch(Ti).finally(()=>{c.updateResult()})}return s.notifyOnChangeProps?u:c.trackResult(u)}function Mt(e,t){return pY(e,KK)}function Et(e,t){const r=St(),[n]=D.useState(()=>new eY(r,e));D.useEffect(()=>{n.setOptions(e)},[n,e]);const a=D.useSyncExternalStore(D.useCallback(s=>n.subscribe(_a.batchCalls(s)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=D.useCallback((s,l)=>{n.mutate(s,l).catch(Ti)},[n]);if(a.error&&lM(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const mY={},Tk=e=>{let t;const r=new Set,n=(d,f)=>{const p=typeof d=="function"?d(t):d;if(!Object.is(p,t)){const h=t;t=f??(typeof p!="object"||p===null)?p:Object.assign({},t,p),r.forEach(g=>g(t,h))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(mY?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,c);return c},gY=e=>e?Tk(e):Tk;var vM={exports:{}},xM={},yM={exports:{}},bM={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0=D;function vY(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xY=typeof Object.is=="function"?Object.is:vY,yY=F0.useState,bY=F0.useEffect,wY=F0.useLayoutEffect,_Y=F0.useDebugValue;function NY(e,t){var r=t(),n=yY({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return wY(function(){a.value=r,a.getSnapshot=t,S5(a)&&i({inst:a})},[e,r,t]),bY(function(){return S5(a)&&i({inst:a}),e(function(){S5(a)&&i({inst:a})})},[e]),_Y(r),r}function S5(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!xY(e,r)}catch{return!0}}function SY(e,t){return t()}var jY=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?SY:NY;bM.useSyncExternalStore=F0.useSyncExternalStore!==void 0?F0.useSyncExternalStore:jY;yM.exports=bM;var AY=yM.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rw=D,EY=AY;function TY(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var CY=typeof Object.is=="function"?Object.is:TY,kY=EY.useSyncExternalStore,OY=rw.useRef,PY=rw.useEffect,LY=rw.useMemo,RY=rw.useDebugValue;xM.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=OY(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=LY(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),a!==void 0&&s.hasValue){var g=s.value;if(a(g,h))return f=g}return f=h}if(g=f,CY(d,h))return g;var m=n(h);return a!==void 0&&a(g,m)?(d=h,g):(d=h,f=m)}var u=!1,d,f,p=r===void 0?null:r;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,r,n,a]);var l=kY(e,i[0],i[1]);return PY(function(){s.hasValue=!0,s.value=l},[l]),RY(l),l};vM.exports=xM;var DY=vM.exports;const IY=Dr(DY),wM={},{useDebugValue:MY}=ye,{useSyncExternalStoreWithSelector:FY}=IY;let Ck=!1;const $Y=e=>e;function BY(e,t=$Y,r){(wM?"production":void 0)!=="production"&&r&&!Ck&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Ck=!0);const n=FY(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return MY(n),n}const kk=e=>{(wM?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?gY(e):e,r=(n,a)=>BY(t,n,a);return Object.assign(r,t),r},nw=e=>e?kk(e):kk,UY=e=>{try{const t=window.AudioContext||window.webkitAudioContext;if(!t)return;const r=new t,n=r.createOscillator(),a=r.createGain();switch(n.connect(a),a.connect(r.destination),e){case"success":n.frequency.setValueAtTime(880,r.currentTime),n.frequency.setValueAtTime(1108.73,r.currentTime+.1),a.gain.setValueAtTime(.3,r.currentTime),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.3),n.start(r.currentTime),n.stop(r.currentTime+.3);break;case"error":n.frequency.setValueAtTime(220,r.currentTime),n.frequency.setValueAtTime(196,r.currentTime+.15),a.gain.setValueAtTime(.3,r.currentTime),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.4),n.start(r.currentTime),n.stop(r.currentTime+.4);break;case"warning":n.frequency.setValueAtTime(440,r.currentTime),a.gain.setValueAtTime(.2,r.currentTime),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.2),n.start(r.currentTime),n.stop(r.currentTime+.2);break;case"info":n.frequency.setValueAtTime(523.25,r.currentTime),a.gain.setValueAtTime(.15,r.currentTime),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.15),n.start(r.currentTime),n.stop(r.currentTime+.15);break}}catch{}},Vv=nw(e=>({toasts:[],addToast:t=>{const r=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,n={...t,id:r,duration:t.duration??5e3};UY(t.type),e(a=>({toasts:[...a.toasts,n]})),setTimeout(()=>{e(a=>({toasts:a.toasts.filter(i=>i.id!==r)}))},n.duration)},removeToast:t=>e(r=>({toasts:r.toasts.filter(n=>n.id!==t)})),clearAll:()=>e({toasts:[]})})),$i=(e,t,r)=>{Vv.getState().addToast({type:"success",title:e,message:t,createdBy:r})},Pi=(e,t)=>{Vv.getState().addToast({type:"error",title:e,message:t,duration:8e3})},zY=(e,t)=>{Vv.getState().addToast({type:"warning",title:e,message:t})},qY={users:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"}),calendar:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"}),clipboard:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25z"}),megaphone:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 110-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 01-1.44-4.282m3.102.069a18.03 18.03 0 01-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 018.835 2.535M10.34 6.66a23.847 23.847 0 008.835-2.535m0 0A23.74 23.74 0 0018.795 3m.38 1.125a23.91 23.91 0 011.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 001.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 010 3.46"}),clock:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}),key:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"}),inbox:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 13.5h3.86a2.25 2.25 0 012.012 1.244l.256.512a2.25 2.25 0 002.013 1.244h3.218a2.25 2.25 0 002.013-1.244l.256-.512a2.25 2.25 0 012.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 00-2.15-1.588H6.911a2.25 2.25 0 00-2.15 1.588L2.35 13.177a2.25 2.25 0 00-.1.661z"}),sparkles:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"}),truck:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}),"check-circle":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),tag:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),eye:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),gauge:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6l4 2m6-2a10 10 0 11-20 0 10 10 0 0120 0z"}),image:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"}),home:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}),"chevron-down":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}),"chevron-right":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}),menu:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}),x:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}),search:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"}),bell:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"}),logout:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}),settings:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),building:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}),layers:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.429 9.75L2.25 12l4.179 2.25m0-4.5l5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-4.179 2.25m0 0L21.75 12l-4.179 2.25m0 0l4.179 2.25L12 21.75 2.25 16.5l4.179-2.25m11.142 0l-5.571 3-5.571-3"}),droplet:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3.75c-3.314 0-6 4.03-6 9a6 6 0 1012 0c0-4.97-2.686-9-6-9z"}),spray:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23.693L5 15.5m14.8-.2a2.251 2.251 0 01.45 2.574l-.788 1.576a2.25 2.25 0 01-2.45 1.186l-6.09-1.218a5.227 5.227 0 01-2.842-1.61l-.91-1.014a2.25 2.25 0 01-.218-2.692l1.55-2.58"}),brush:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}),info:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}),"alert-circle":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}),"alert-triangle":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"}),check:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}),"x-circle":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),trash:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}),activity:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"}),user:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"}),plus:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}),package:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"}),"file-text":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}),"bar-chart":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"}),edit:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}),send:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}),upload:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}),file:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}),"calendar-range":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008zM12 15h.008v.008H12V15zm0 2.25h.008v.008H12v-.008zM9.75 15h.008v.008H9.75V15zm0 2.25h.008v.008H9.75v-.008zM7.5 15h.008v.008H7.5V15zm0 2.25h.008v.008H7.5v-.008zm6.75-4.5h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V15zm0 2.25h.008v.008h-.008v-.008zm2.25-4.5h.008v.008H16.5v-.008zm0 2.25h.008v.008H16.5V15z"}),"chevron-left":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}),"user-x":o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M22 10.5h-6m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"}),download:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}),loader:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}),sun:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"}),moon:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"}),palmtree:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21v-8.25M15.75 21H8.25M12 12.75c0 0-4.5-3-4.5-6.375A4.5 4.5 0 0112 2.25a4.5 4.5 0 014.5 4.125c0 3.375-4.5 6.375-4.5 6.375z"}),wrench:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"}),save:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"})},Z=({name:e,className:t="",size:r=24})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:r,height:r,className:t,children:qY[e]}),HY=({toast:e})=>{const{removeToast:t}=Vv(),r={success:"bg-gradient-to-r from-success-500 to-success-600",error:"bg-gradient-to-r from-danger-500 to-danger-600",warning:"bg-gradient-to-r from-warning-500 to-warning-600",info:"bg-gradient-to-r from-brand-500 to-brand-600"},n={success:"check-circle",error:"alert-circle",warning:"alert-triangle",info:"info"};return o.jsxs("div",{className:`${r[e.type]} text-white rounded-xl shadow-2xl p-4 min-w-[320px] max-w-[420px] animate-slide-in-right flex items-start gap-3`,style:{animation:"slideInRight 0.3s ease-out"},children:[o.jsx("div",{className:"flex-shrink-0 mt-0.5",children:o.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:o.jsx(Z,{name:n[e.type],size:22,className:"text-white"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"flex items-center gap-2 mb-1",children:o.jsx("h4",{className:"font-bold text-base",children:e.title})}),o.jsx("p",{className:"text-sm text-white/90 leading-relaxed",children:e.message}),e.createdBy&&o.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-white/80",children:[o.jsx(Z,{name:"user",size:14}),o.jsxs("span",{children:["Registrado por: ",o.jsx("strong",{className:"text-white",children:e.createdBy})]})]})]}),o.jsx("button",{onClick:()=>t(e.id),className:"flex-shrink-0 p-1 hover:bg-white/20 rounded-lg transition-colors",children:o.jsx(Z,{name:"x",size:18,className:"text-white/80"})})]})},WY=()=>{const{toasts:e}=Vv();return e.length===0?null:o.jsxs(o.Fragment,{children:[o.jsx("style",{children:`
        @keyframes slideInRight {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
      `}),o.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3",children:e.map(t=>o.jsx(HY,{toast:t},t.id))})]})},VY=({children:e})=>{const[t]=D.useState(()=>new rY({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:6e4}}}));return o.jsxs(nY,{client:t,children:[e,o.jsx(WY,{})]})};/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $g(){return $g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$g.apply(this,arguments)}var Tu;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Tu||(Tu={}));const Ok="popstate";function GY(e){e===void 0&&(e={});function t(a,i){let{pathname:s="/",search:l="",hash:c=""}=Bf(a.location.hash.substr(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),ej("",{pathname:s,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){let s=a.document.querySelector("base"),l="";if(s&&s.getAttribute("href")){let c=a.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof i=="string"?i:nb(i))}function n(a,i){aw(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return YY(t,r,n,e)}function Tn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function aw(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function KY(){return Math.random().toString(36).substr(2,8)}function Pk(e,t){return{usr:e.state,key:e.key,idx:t}}function ej(e,t,r,n){return r===void 0&&(r=null),$g({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Bf(t):t,{state:r,key:t&&t.key||n||KY()})}function nb(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Bf(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function YY(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,s=a.history,l=Tu.Pop,c=null,u=d();u==null&&(u=0,s.replaceState($g({},s.state,{idx:u}),""));function d(){return(s.state||{idx:null}).idx}function f(){l=Tu.Pop;let x=d(),y=x==null?null:x-u;u=x,c&&c({action:l,location:m.location,delta:y})}function p(x,y){l=Tu.Push;let v=ej(m.location,x,y);r&&r(v,x),u=d()+1;let b=Pk(v,u),N=m.createHref(v);try{s.pushState(b,"",N)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;a.location.assign(N)}i&&c&&c({action:l,location:m.location,delta:1})}function h(x,y){l=Tu.Replace;let v=ej(m.location,x,y);r&&r(v,x),u=d();let b=Pk(v,u),N=m.createHref(v);s.replaceState(b,"",N),i&&c&&c({action:l,location:m.location,delta:0})}function g(x){let y=a.location.origin!=="null"?a.location.origin:a.location.href,v=typeof x=="string"?x:nb(x);return v=v.replace(/ $/,"%20"),Tn(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return l},get location(){return e(a,s)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Ok,f),c=x,()=>{a.removeEventListener(Ok,f),c=null}},createHref(x){return t(a,x)},createURL:g,encodeLocation(x){let y=g(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:h,go(x){return s.go(x)}};return m}var Lk;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Lk||(Lk={}));function XY(e,t,r){return r===void 0&&(r="/"),JY(e,t,r)}function JY(e,t,r,n){let a=typeof t=="string"?Bf(t):t,i=$0(a.pathname||"/",r);if(i==null)return null;let s=_M(e);QY(s);let l=null;for(let c=0;l==null&&c<s.length;++c){let u=cX(i);l=oX(s[c],u)}return l}function _M(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,s,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};c.relativePath.startsWith("/")&&(Tn(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=zu([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Tn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),_M(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:iX(u,i.index),routesMeta:d})};return e.forEach((i,s)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,s);else for(let c of NM(i.path))a(i,s,c)}),t}function NM(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let s=NM(n.join("/")),l=[];return l.push(...s.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...s),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function QY(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:sX(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const ZY=/^:[\w-]+$/,eX=3,tX=2,rX=1,nX=10,aX=-2,Rk=e=>e==="*";function iX(e,t){let r=e.split("/"),n=r.length;return r.some(Rk)&&(n+=aX),t&&(n+=tX),r.filter(a=>!Rk(a)).reduce((a,i)=>a+(ZY.test(i)?eX:i===""?rX:nX),n)}function sX(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function oX(e,t,r){let{routesMeta:n}=e,a={},i="/",s=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=tj({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!f)return null;Object.assign(a,f.params),s.push({params:a,pathname:zu([i,f.pathname]),pathnameBase:pX(zu([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=zu([i,f.pathnameBase]))}return s}function tj(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=lX(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:p,isOptional:h}=d;if(p==="*"){let m=l[f]||"";s=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const g=l[f];return h&&!g?u[p]=void 0:u[p]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:s,pattern:e}}function lX(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),aw(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function cX(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return aw(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function $0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const uX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dX=e=>uX.test(e);function fX(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Bf(e):e,i;if(r)if(dX(r))i=r;else{if(r.includes("//")){let s=r;r=r.replace(/\/\/+/g,"/"),aw(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+r))}r.startsWith("/")?i=Dk(r.substring(1),"/"):i=Dk(r,t)}else i=t;return{pathname:i,search:mX(n),hash:gX(a)}}function Dk(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function j5(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hX(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function v3(e,t){let r=hX(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function x3(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Bf(e):(a=$g({},e),Tn(!a.pathname||!a.pathname.includes("?"),j5("?","pathname","search",a)),Tn(!a.pathname||!a.pathname.includes("#"),j5("#","pathname","hash",a)),Tn(!a.search||!a.search.includes("#"),j5("#","search","hash",a)));let i=e===""||a.pathname==="",s=i?"/":a.pathname,l;if(s==null)l=r;else{let f=t.length-1;if(!n&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),f-=1;a.pathname=p.join("/")}l=f>=0?t[f]:"/"}let c=fX(a,l),u=s&&s!=="/"&&s.endsWith("/"),d=(i||s===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const zu=e=>e.join("/").replace(/\/\/+/g,"/"),pX=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),mX=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,gX=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function vX(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const SM=["post","put","patch","delete"];new Set(SM);const xX=["get",...SM];new Set(xX);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bg(){return Bg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bg.apply(this,arguments)}const iw=D.createContext(null),jM=D.createContext(null),Dc=D.createContext(null),sw=D.createContext(null),Ic=D.createContext({outlet:null,matches:[],isDataRoute:!1}),AM=D.createContext(null);function yX(e,t){let{relative:r}=t===void 0?{}:t;wp()||Tn(!1);let{basename:n,navigator:a}=D.useContext(Dc),{hash:i,pathname:s,search:l}=ow(e,{relative:r}),c=s;return n!=="/"&&(c=s==="/"?n:zu([n,s])),a.createHref({pathname:c,search:l,hash:i})}function wp(){return D.useContext(sw)!=null}function Uf(){return wp()||Tn(!1),D.useContext(sw).location}function EM(e){D.useContext(Dc).static||D.useLayoutEffect(e)}function y3(){let{isDataRoute:e}=D.useContext(Ic);return e?RX():bX()}function bX(){wp()||Tn(!1);let e=D.useContext(iw),{basename:t,future:r,navigator:n}=D.useContext(Dc),{matches:a}=D.useContext(Ic),{pathname:i}=Uf(),s=JSON.stringify(v3(a,r.v7_relativeSplatPath)),l=D.useRef(!1);return EM(()=>{l.current=!0}),D.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=x3(u,JSON.parse(s),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:zu([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,s,i,e])}const wX=D.createContext(null);function _X(e){let t=D.useContext(Ic).outlet;return t&&D.createElement(wX.Provider,{value:e},t)}function ow(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=D.useContext(Dc),{matches:a}=D.useContext(Ic),{pathname:i}=Uf(),s=JSON.stringify(v3(a,n.v7_relativeSplatPath));return D.useMemo(()=>x3(e,JSON.parse(s),i,r==="path"),[e,s,i,r])}function NX(e,t){return SX(e,t)}function SX(e,t,r,n){wp()||Tn(!1);let{navigator:a}=D.useContext(Dc),{matches:i}=D.useContext(Ic),s=i[i.length-1],l=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let u=Uf(),d;if(t){var f;let x=typeof t=="string"?Bf(t):t;c==="/"||(f=x.pathname)!=null&&f.startsWith(c)||Tn(!1),d=x}else d=u;let p=d.pathname||"/",h=p;if(c!=="/"){let x=c.replace(/^\//,"").split("/");h="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let g=XY(e,{pathname:h}),m=CX(g&&g.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:zu([c,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:zu([c,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,r,n);return t&&m?D.createElement(sw.Provider,{value:{location:Bg({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Tu.Pop}},m):m}function jX(){let e=LX(),t=vX(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},t),r?D.createElement("pre",{style:a},r):null,null)}const AX=D.createElement(jX,null);class EX extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?D.createElement(Ic.Provider,{value:this.props.routeContext},D.createElement(AM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function TX(e){let{routeContext:t,match:r,children:n}=e,a=D.useContext(iw);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),D.createElement(Ic.Provider,{value:t},n)}function CX(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=s.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Tn(!1),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:p,errors:h}=r,g=f.route.loader&&p[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||g){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,p)=>{let h,g=!1,m=null,x=null;r&&(h=l&&f.route.id?l[f.route.id]:void 0,m=f.route.errorElement||AX,c&&(u<0&&p===0?(DX("route-fallback"),g=!0,x=null):u===p&&(g=!0,x=f.route.hydrateFallbackElement||null)));let y=t.concat(s.slice(0,p+1)),v=()=>{let b;return h?b=m:g?b=x:f.route.Component?b=D.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,D.createElement(TX,{match:f,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?D.createElement(EX,{location:r.location,revalidation:r.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var TM=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(TM||{}),CM=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(CM||{});function kX(e){let t=D.useContext(iw);return t||Tn(!1),t}function OX(e){let t=D.useContext(jM);return t||Tn(!1),t}function PX(e){let t=D.useContext(Ic);return t||Tn(!1),t}function kM(e){let t=PX(),r=t.matches[t.matches.length-1];return r.route.id||Tn(!1),r.route.id}function LX(){var e;let t=D.useContext(AM),r=OX(),n=kM();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function RX(){let{router:e}=kX(TM.UseNavigateStable),t=kM(CM.UseNavigateStable),r=D.useRef(!1);return EM(()=>{r.current=!0}),D.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Bg({fromRouteId:t},i)))},[e,t])}const Ik={};function DX(e,t,r){Ik[e]||(Ik[e]=!0)}function IX(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function OM(e){let{to:t,replace:r,state:n,relative:a}=e;wp()||Tn(!1);let{future:i,static:s}=D.useContext(Dc),{matches:l}=D.useContext(Ic),{pathname:c}=Uf(),u=y3(),d=x3(t,v3(l,i.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(d);return D.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:a}),[u,f,a,r,n]),null}function PM(e){return _X(e.context)}function Wn(e){Tn(!1)}function MX(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Tu.Pop,navigator:i,static:s=!1,future:l}=e;wp()&&Tn(!1);let c=t.replace(/^\/*/,"/"),u=D.useMemo(()=>({basename:c,navigator:i,static:s,future:Bg({v7_relativeSplatPath:!1},l)}),[c,l,i,s]);typeof n=="string"&&(n=Bf(n));let{pathname:d="/",search:f="",hash:p="",state:h=null,key:g="default"}=n,m=D.useMemo(()=>{let x=$0(d,c);return x==null?null:{location:{pathname:x,search:f,hash:p,state:h,key:g},navigationType:a}},[c,d,f,p,h,g,a]);return m==null?null:D.createElement(Dc.Provider,{value:u},D.createElement(sw.Provider,{children:r,value:m}))}function FX(e){let{children:t,location:r}=e;return NX(rj(t),r)}new Promise(()=>{});function rj(e,t){t===void 0&&(t=[]);let r=[];return D.Children.forEach(e,(n,a)=>{if(!D.isValidElement(n))return;let i=[...t,a];if(n.type===D.Fragment){r.push.apply(r,rj(n.props.children,i));return}n.type!==Wn&&Tn(!1),!n.props.index||!n.props.children||Tn(!1);let s={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=rj(n.props.children,i)),r.push(s)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ab(){return ab=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ab.apply(this,arguments)}function LM(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function $X(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function BX(e,t){return e.button===0&&(!t||t==="_self")&&!$X(e)}const UX=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zX=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],qX="6";try{window.__reactRouterVersion=qX}catch{}const HX=D.createContext({isTransitioning:!1}),WX="startTransition",Mk=_V[WX];function VX(e){let{basename:t,children:r,future:n,window:a}=e,i=D.useRef();i.current==null&&(i.current=GY({window:a,v5Compat:!0}));let s=i.current,[l,c]=D.useState({action:s.action,location:s.location}),{v7_startTransition:u}=n||{},d=D.useCallback(f=>{u&&Mk?Mk(()=>c(f)):c(f)},[c,u]);return D.useLayoutEffect(()=>s.listen(d),[s,d]),D.useEffect(()=>IX(n),[n]),D.createElement(MX,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:s,future:n})}const GX=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",KX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YX=D.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:s,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,p=LM(t,UX),{basename:h}=D.useContext(Dc),g,m=!1;if(typeof u=="string"&&KX.test(u)&&(g=u,GX))try{let b=new URL(window.location.href),N=u.startsWith("//")?new URL(b.protocol+u):new URL(u),_=$0(N.pathname,h);N.origin===b.origin&&_!=null?u=_+N.search+N.hash:m=!0}catch{}let x=yX(u,{relative:a}),y=QX(u,{replace:s,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function v(b){n&&n(b),b.defaultPrevented||y(b)}return D.createElement("a",ab({},p,{href:g||x,onClick:m||i?n:v,ref:r,target:c}))}),XX=D.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:a=!1,className:i="",end:s=!1,style:l,to:c,viewTransition:u,children:d}=t,f=LM(t,zX),p=ow(c,{relative:f.relative}),h=Uf(),g=D.useContext(jM),{navigator:m,basename:x}=D.useContext(Dc),y=g!=null&&ZX(p)&&u===!0,v=m.encodeLocation?m.encodeLocation(p).pathname:p.pathname,b=h.pathname,N=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;a||(b=b.toLowerCase(),N=N?N.toLowerCase():null,v=v.toLowerCase()),N&&x&&(N=$0(N,x)||N);const _=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let E=b===v||!s&&b.startsWith(v)&&b.charAt(_)==="/",j=N!=null&&(N===v||!s&&N.startsWith(v)&&N.charAt(v.length)==="/"),A={isActive:E,isPending:j,isTransitioning:y},T=E?n:void 0,P;typeof i=="function"?P=i(A):P=[i,E?"active":null,j?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(A):l;return D.createElement(YX,ab({},f,{"aria-current":T,className:P,ref:r,style:O,to:c,viewTransition:u}),typeof d=="function"?d(A):d)});var nj;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(nj||(nj={}));var Fk;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Fk||(Fk={}));function JX(e){let t=D.useContext(iw);return t||Tn(!1),t}function QX(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:s,viewTransition:l}=t===void 0?{}:t,c=y3(),u=Uf(),d=ow(e,{relative:s});return D.useCallback(f=>{if(BX(f,r)){f.preventDefault();let p=n!==void 0?n:nb(u)===nb(d);c(e,{replace:p,state:a,preventScrollReset:i,relative:s,viewTransition:l})}},[u,c,d,n,a,r,e,i,s,l])}function ZX(e,t){t===void 0&&(t={});let r=D.useContext(HX);r==null&&Tn(!1);let{basename:n}=JX(nj.useViewTransitionState),a=ow(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=$0(r.currentLocation.pathname,n)||r.currentLocation.pathname,s=$0(r.nextLocation.pathname,n)||r.nextLocation.pathname;return tj(a.pathname,s)!=null||tj(a.pathname,i)!=null}let x1=null;const eJ=(e,t)=>({supervisorName:e,terminalCode:t,startedAt:new Date().toISOString()}),ib={startSession:async(e,t)=>(x1=eJ(e,t),x1),getSession:async()=>x1,logout:async()=>{x1=null}},_r=nw(e=>({session:null,setSession:t=>e({session:t}),clearSession:()=>e({session:null}),hydrateSession:async()=>{const t=await ib.getSession();e({session:t})}})),aj=["EL_ROBLE","LA_REINA","MARIA_ANGELICA","EL_DESCANSO"],Vu={EL_ROBLE:"El Roble",LA_REINA:"La Reina",MARIA_ANGELICA:"Mara Anglica",EL_DESCANSO:"El Descanso",EL_SALTO:"El Salto",LO_ECHEVERS:"Lo Echevers",COLO_COLO:"Colo Colo"},b3=[{code:"GRUPO_ROBLE",name:"Grupo El Roble",members:aj}],ns=Object.entries(Vu).map(([e,t])=>({value:e,label:t})),tJ=b3.map(e=>({value:e.code,label:e.name})),RM={mode:"ALL"},zi=e=>{if(e.mode==="ALL"||!e.value)return Object.keys(Vu);if(e.mode==="TERMINAL"){const r=e.value;return aj.includes(r)?aj:[r]}const t=b3.find(r=>r.code===e.value);return t?t.members:Object.keys(Vu)},rJ=(e,t)=>{const r=zi(t);return e.filter(n=>r.includes(n.terminal))},fr=e=>{if(Vu[e])return Vu[e];const t=b3.find(r=>r.code===e);return(t==null?void 0:t.name)??String(e)},Xt=nw(e=>({context:RM,setContext:t=>e({context:t})})),nJ=()=>{const e=y3(),t=_r(f=>f.setSession),r=_r(f=>f.session),n=Xt(f=>f.setContext),[a,i]=D.useState(""),[s,l]=D.useState("EL_ROBLE"),[c,u]=D.useState(!1);D.useEffect(()=>{r&&e("/personal")},[r,e]);const d=async f=>{f.preventDefault(),u(!0);const p=await ib.startSession(a,s);t(p),n({mode:"TERMINAL",value:s}),e("/personal")};return o.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-dark-900 via-dark-800 to-brand-900",children:[o.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-brand-500/30 rounded-full blur-3xl animate-float"}),o.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent-500/20 rounded-full blur-3xl animate-float",style:{animationDelay:"1s"}}),o.jsx("div",{className:"absolute top-1/2 right-1/3 w-64 h-64 bg-brand-600/20 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),o.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})]}),o.jsxs("div",{className:"relative z-10 w-full max-w-lg px-4 animate-slide-up",children:[o.jsx("div",{className:"flex justify-center mb-8",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br from-brand-500 to-brand-700 shadow-brand-lg",children:o.jsx("span",{className:"text-3xl font-bold text-white",children:"A"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-2xl font-bold text-white",children:"Asiss"}),o.jsx("span",{className:"text-sm text-slate-400",children:"Dashboard de Logstica"})]})]})}),o.jsxs("div",{className:"card-glass p-8 md:p-10",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Bienvenido"}),o.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Ingresa tus datos para acceder al panel de control"})]}),o.jsxs("form",{onSubmit:d,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nombre del Supervisor"}),o.jsxs("div",{className:"relative",children:[o.jsx(Z,{name:"users",size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"}),o.jsx("input",{type:"text",className:"input pl-10",value:a,onChange:f=>i(f.target.value),placeholder:"Ej: Ana Prez",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsxs("div",{className:"relative",children:[o.jsx(Z,{name:"building",size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none z-10"}),o.jsx("select",{className:"input pl-10 appearance-none cursor-pointer",value:s,onChange:f=>l(f.target.value),style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2394a3b8'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px",paddingRight:"40px"},children:ns.map(f=>o.jsx("option",{value:f.value,children:f.label},f.value))})]})]}),o.jsx("button",{type:"submit",disabled:c||!a,className:"btn btn-primary w-full py-3.5 text-base",children:c?o.jsxs("span",{className:"flex items-center justify-center gap-2",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Iniciando sesin..."]}):o.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Entrar al Dashboard",o.jsx(Z,{name:"chevron-right",size:18})]})})]}),o.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200",children:o.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-slate-500",children:[o.jsx(Z,{name:"check-circle",size:14,className:"text-success-500"}),o.jsx("span",{children:"Conexin segura  Datos protegidos"})]})})]}),o.jsx("p",{className:"mt-6 text-center text-xs text-slate-500",children:"Versin 2.0   2024 Asiss"})]})]})},$k=[{label:"Operacin",icon:"building",items:[{label:"Personal",to:"/personal",icon:"users"},{label:"Reuniones",to:"/reuniones",icon:"calendar"},{label:"Tareas",to:"/tareas",icon:"clipboard"},{label:"Informativos",to:"/informativos",icon:"megaphone"},{label:"Asistencia",to:"/asistencia",icon:"clock"},{label:"Credenciales",to:"/credenciales",icon:"key"},{label:"Solicitudes",to:"/solicitudes",icon:"inbox"},{label:"SRL",to:"/srl",icon:"wrench"}]},{label:"Aseo",icon:"sparkles",items:[{label:"Interior",to:"/aseo/interior",icon:"droplet"},{label:"Exterior",to:"/aseo/exterior",icon:"spray"},{label:"Rodillo",to:"/aseo/rodillo",icon:"brush"}]},{label:"Insumos",icon:"package",items:[{label:"Solicitudes",to:"/insumos",icon:"file-text"}]},{label:"MiniCheck",icon:"check-circle",items:[{label:"Extintor",to:"/minicheck/extintor",icon:"check-circle"},{label:"Tag",to:"/minicheck/tag",icon:"tag"},{label:"Mobileye",to:"/minicheck/mobileye",icon:"eye"},{label:"Odmetro",to:"/minicheck/odometro",icon:"gauge"},{label:"Publicidad",to:"/minicheck/publicidad",icon:"image"}]},{label:"Flota",icon:"truck",items:[{label:"Estado de Flota",to:"/estado-flota",icon:"truck"}]}],aJ=({isOpen:e,onClose:t})=>{const r=Uf(),[n,a]=D.useState(()=>{const l=$k.find(c=>c.items.some(u=>r.pathname.startsWith(u.to)));return l?[l.label]:["Operacin"]}),i=l=>{a(c=>c.includes(l)?c.filter(u=>u!==l):[...c,l])},s=l=>l.items.some(c=>r.pathname.startsWith(c.to));return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`${e?"fixed":"hidden"} inset-0 z-40 bg-black/60 backdrop-blur-sm md:hidden`,onClick:t}),o.jsx("aside",{className:`${e?"translate-x-0":"-translate-x-full"} fixed inset-y-0 left-0 z-50 w-72 transform transition-transform duration-300 ease-out md:translate-x-0`,children:o.jsxs("div",{className:"flex h-full flex-col bg-gradient-to-b from-dark-800 to-dark-900",children:[o.jsxs("div",{className:"flex items-center gap-3 px-6 py-5 border-b border-white/10",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-brand-500 to-brand-700 shadow-brand",children:o.jsx("span",{className:"text-lg font-bold text-white",children:"A"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-sm font-bold text-white",children:"Asiss"}),o.jsx("span",{className:"text-xs text-slate-400",children:"Dashboard Logstica"})]}),o.jsx("button",{onClick:t,className:"ml-auto rounded-lg p-1.5 text-slate-400 hover:bg-white/10 hover:text-white md:hidden",children:o.jsx(Z,{name:"x",size:20})})]}),o.jsx("nav",{className:"flex-1 overflow-y-auto custom-scrollbar px-3 py-4 space-y-1",children:$k.map(l=>{const c=n.includes(l.label),u=s(l);return o.jsxs("div",{className:"mb-1",children:[o.jsxs("button",{onClick:()=>i(l.label),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 group ${u?"bg-white/10 text-white":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[o.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-lg transition-all duration-200 ${u?"bg-gradient-to-br from-brand-500 to-brand-600 text-white shadow-brand":"bg-white/5 text-slate-400 group-hover:bg-white/10 group-hover:text-slate-200"}`,children:o.jsx(Z,{name:l.icon,size:18})}),o.jsx("span",{className:"flex-1 text-left text-sm font-semibold",children:l.label}),o.jsx(Z,{name:"chevron-down",size:16,className:`transition-transform duration-200 ${c?"rotate-0":"-rotate-90"}`})]}),o.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-out ${c?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:o.jsx("div",{className:"mt-1 ml-4 pl-4 border-l border-white/10 space-y-0.5",children:l.items.map(d=>o.jsxs(XX,{to:d.to,onClick:t,className:({isActive:f})=>`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-all duration-200 ${f?"bg-brand-500/20 text-brand-300 font-medium":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[o.jsx(Z,{name:d.icon,size:16}),o.jsx("span",{children:d.label})]},d.to))})})]},l.label)})}),o.jsx("div",{className:"border-t border-white/10 px-4 py-4",children:o.jsxs("div",{className:"flex items-center gap-3 px-2",children:[o.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-gradient-to-br from-accent-400 to-accent-600 text-white text-sm font-bold",children:"S"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-white truncate",children:"Supervisor"}),o.jsx("p",{className:"text-xs text-slate-400",children:"Terminal Activo"})]})]})})]})})]})},A5=new Set;let y1=[];const iJ=()=>crypto.randomUUID(),Bk={subscribeNotifications:e=>(A5.add(e),()=>A5.delete(e)),publishNotification:e=>{const t={id:e.id??iJ(),createdAt:e.createdAt??new Date().toISOString(),...e};return y1=[t,...y1].slice(0,50),A5.forEach(r=>r(t)),t},getNotifications:()=>y1,clear:()=>{y1=[]}},sJ=nw(e=>({items:[],last:void 0,addNotification:t=>e(r=>({items:[t,...r.items],last:t})),setAll:t=>e({items:t}),clear:()=>e({items:[],last:void 0})})),pi=e=>(typeof e=="string"?new Date(e):e).toLocaleDateString("es-CL",{year:"numeric",month:"short",day:"numeric"}),oJ=()=>{const{items:e,addNotification:t,setAll:r,last:n}=sJ(),[a,i]=D.useState(!1),[s,l]=D.useState(!1);return D.useEffect(()=>{r(Bk.getNotifications());const c=Bk.subscribeNotifications(u=>{t(u),l(!0),setTimeout(()=>l(!1),3500)});return()=>c()},[t,r]),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{type:"button",className:"btn btn-secondary h-10",onClick:()=>i(c=>!c),children:[o.jsxs("span",{className:"relative inline-flex items-center",children:[o.jsx("svg",{className:"h-5 w-5 text-slate-600",fill:"none",stroke:"currentColor",strokeWidth:"1.8",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14 17h5l-1.405-1.405A2.032 2.032 0 0117 14.158V11a5.002 5.002 0 00-3-4.584V6a2 2 0 10-4 0v.416A5.002 5.002 0 007 11v3.159c0 .538-.214 1.055-.595 1.436L5 17h5m4 0v1a3 3 0 11-6 0v-1m6 0H8"})}),e.length>0&&o.jsx("span",{className:"absolute -right-2 -top-2 flex h-5 min-w-[20px] items-center justify-center rounded-full bg-brand-500 px-1 text-xs font-bold text-white",children:e.length})]}),o.jsx("span",{className:"hidden text-sm font-semibold text-slate-700 sm:inline",children:"Alertas"})]}),a&&o.jsxs("div",{className:"absolute right-0 z-30 mt-2 w-80 rounded-lg border border-slate-200 bg-white shadow-lg",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[o.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Notificaciones"}),o.jsx("button",{className:"text-xs text-brand-600 hover:underline",onClick:()=>i(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"max-h-80 space-y-2 overflow-y-auto px-4 pb-4",children:[e.length===0&&o.jsx("p",{className:"text-sm text-slate-500",children:"Sin notificaciones por ahora."}),e.map(c=>o.jsxs("div",{className:"rounded-md border border-slate-100 bg-slate-50 p-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[o.jsx("span",{className:"font-semibold capitalize",children:c.level}),o.jsx("span",{children:pi(c.createdAt)})]}),o.jsx("p",{className:"text-sm font-semibold text-slate-800",children:c.title}),o.jsx("p",{className:"text-sm text-slate-600",children:c.message})]},c.id))]})]}),s&&n&&o.jsxs("div",{className:"fixed bottom-4 right-4 z-40 max-w-sm rounded-md border border-slate-200 bg-white px-4 py-3 shadow-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-xs font-semibold uppercase text-brand-700",children:n.level}),o.jsx("button",{onClick:()=>l(!1),className:"text-xs text-slate-500 hover:text-slate-700",children:"Cerrar"})]}),o.jsx("p",{className:"text-sm font-semibold text-slate-900",children:n.title}),o.jsx("p",{className:"text-sm text-slate-700",children:n.message})]})]})},lJ=({onMenuToggle:e})=>{var i;const t=Xt(s=>s.context),r=_r(s=>s.session),n=_r(s=>s.clearSession),a=()=>t.mode==="ALL"?"Todos los terminales":t.mode==="TERMINAL"&&t.value?fr(t.value):"Terminal";return o.jsx("header",{className:"header px-4 md:px-6",children:o.jsxs("div",{className:"flex w-full items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:e,className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-100 text-slate-600 transition-all hover:bg-slate-200 md:hidden","aria-label":"Abrir men",children:o.jsx(Z,{name:"menu",size:20})}),o.jsxs("div",{className:"hidden md:block",children:[o.jsx("h1",{className:"text-lg font-bold text-slate-900",children:"Dashboard"}),o.jsx("p",{className:"text-xs text-slate-500",children:a()})]})]}),o.jsx("div",{className:"hidden lg:flex flex-1 max-w-md mx-8",children:o.jsxs("div",{className:"relative w-full",children:[o.jsx(Z,{name:"search",size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),o.jsx("input",{type:"search",placeholder:"Buscar en el dashboard...",className:"w-full rounded-xl border border-slate-200 bg-slate-50 py-2.5 pl-10 pr-4 text-sm transition-all placeholder:text-slate-400 focus:border-brand-500 focus:bg-white focus:outline-none focus:ring-2 focus:ring-brand-500/20"})]})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"md:hidden",children:o.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-brand-50 px-3 py-1.5",children:[o.jsx(Z,{name:"building",size:14,className:"text-brand-600"}),o.jsx("span",{className:"text-xs font-semibold text-brand-700",children:t.mode==="ALL"?"Todos":(i=t.value)==null?void 0:i.split("_").pop()})]})}),o.jsx(oJ,{}),r&&o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"hidden sm:flex items-center gap-3 rounded-xl border border-slate-200 bg-white px-3 py-2 shadow-sm",children:[o.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-brand-500 to-brand-600 text-white text-sm font-bold",children:r.supervisorName.charAt(0).toUpperCase()}),o.jsxs("div",{className:"hidden md:flex flex-col leading-tight",children:[o.jsx("span",{className:"text-sm font-semibold text-slate-900",children:r.supervisorName}),o.jsx("span",{className:"text-xs text-slate-500",children:fr(r.terminalCode)})]}),o.jsx("button",{onClick:()=>{n(),ib.logout()},className:"ml-1 rounded-lg p-1.5 text-slate-400 transition-colors hover:bg-slate-100 hover:text-danger-600",title:"Cerrar sesin",children:o.jsx(Z,{name:"logout",size:18})})]}),o.jsx("button",{onClick:()=>{n(),ib.logout()},className:"sm:hidden flex h-10 w-10 items-center justify-center rounded-xl bg-slate-100 text-slate-600 transition-all hover:bg-danger-100 hover:text-danger-600",title:"Cerrar sesin",children:o.jsx(Z,{name:"logout",size:20})})]})]})]})})},cJ=({onClick:e,isOpen:t})=>o.jsx("button",{onClick:e,className:`
                fixed bottom-6 right-6 z-50
                w-14 h-14 rounded-full
                bg-gradient-to-br from-slate-700 to-slate-900
                text-white shadow-lg
                flex items-center justify-center
                transition-all duration-300 ease-out
                hover:scale-110 hover:shadow-xl
                active:scale-95
                focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2
                ${t?"rotate-45 bg-red-600":""}
            `,title:"Asis Command","aria-label":"Abrir Asis Command",children:o.jsx(Z,{name:t?"x":"settings",className:"w-6 h-6"})});var ij=function(e,t){return ij=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},ij(e,t)};function DM(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ij(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var sb=function(){return sb=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},sb.apply(this,arguments)};function _p(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function IM(e,t,r,n){var a=arguments.length,i=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(i=(a<3?s(i):a>3?s(t,r,i):s(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function MM(e,t){return function(r,n){t(r,n,e)}}function FM(e,t,r,n,a,i){function s(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f,p=!1,h=r.length-1;h>=0;h--){var g={};for(var m in n)g[m]=m==="access"?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(y){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(y||null))};var x=(0,r[h])(l==="accessor"?{get:d.get,set:d.set}:d[c],g);if(l==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(f=s(x.get))&&(d.get=f),(f=s(x.set))&&(d.set=f),(f=s(x.init))&&a.unshift(f)}else(f=s(x))&&(l==="field"?a.unshift(f):d[c]=f)}u&&Object.defineProperty(u,n.name,d),p=!0}function $M(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function BM(e){return typeof e=="symbol"?e:"".concat(e)}function UM(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function zM(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function xt(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function qM(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=l(0),s.throw=l(1),s.return=l(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var lw=Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function HM(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&lw(t,e,r)}function ob(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function w3(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(l){s={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function WM(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(w3(arguments[t]));return e}function VM(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var i=arguments[t],s=0,l=i.length;s<l;s++,a++)n[a]=i[s];return n}function GM(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function B0(e){return this instanceof B0?(this.v=e,this):new B0(e)}function KM(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),a[Symbol.asyncIterator]=function(){return this},a;function s(h){return function(g){return Promise.resolve(g).then(h,f)}}function l(h,g){n[h]&&(a[h]=function(m){return new Promise(function(x,y){i.push([h,m,x,y])>1||c(h,m)})},g&&(a[h]=g(a[h])))}function c(h,g){try{u(n[h](g))}catch(m){p(i[0][3],m)}}function u(h){h.value instanceof B0?Promise.resolve(h.value.v).then(d,f):p(i[0][2],h)}function d(h){c("next",h)}function f(h){c("throw",h)}function p(h,g){h(g),i.shift(),i.length&&c(i[0][0],i[0][1])}}function YM(e){var t,r;return t={},n("next"),n("throw",function(a){throw a}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(a,i){t[a]=e[a]?function(s){return(r=!r)?{value:B0(e[a](s)),done:!1}:i?i(s):s}:i}}function XM(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof ob=="function"?ob(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(s){return new Promise(function(l,c){s=e[i](s),a(l,c,s.done,s.value)})}}function a(i,s,l,c){Promise.resolve(c).then(function(u){i({value:u,done:l})},s)}}function JM(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var uJ=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},sj=function(e){return sj=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},sj(e)};function QM(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=sj(e),n=0;n<r.length;n++)r[n]!=="default"&&lw(t,e,r[n]);return uJ(t,e),t}function ZM(e){return e&&e.__esModule?e:{default:e}}function eF(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function tF(e,t,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}function rF(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function nF(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var dJ=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function aF(e){function t(i){e.error=e.hasError?new dJ(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;function a(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(a,function(s){return t(s),a()})}else n|=1}catch(s){t(s)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function iF(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,a,i,s){return n?t?".jsx":".js":a&&(!i||!s)?r:a+i+"."+s.toLowerCase()+"js"}):e}const fJ={__extends:DM,__assign:sb,__rest:_p,__decorate:IM,__param:MM,__esDecorate:FM,__runInitializers:$M,__propKey:BM,__setFunctionName:UM,__metadata:zM,__awaiter:xt,__generator:qM,__createBinding:lw,__exportStar:HM,__values:ob,__read:w3,__spread:WM,__spreadArrays:VM,__spreadArray:GM,__await:B0,__asyncGenerator:KM,__asyncDelegator:YM,__asyncValues:XM,__makeTemplateObject:JM,__importStar:QM,__importDefault:ZM,__classPrivateFieldGet:eF,__classPrivateFieldSet:tF,__classPrivateFieldIn:rF,__addDisposableResource:nF,__disposeResources:aF,__rewriteRelativeImportExtension:iF},hJ=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:nF,get __assign(){return sb},__asyncDelegator:YM,__asyncGenerator:KM,__asyncValues:XM,__await:B0,__awaiter:xt,__classPrivateFieldGet:eF,__classPrivateFieldIn:rF,__classPrivateFieldSet:tF,__createBinding:lw,__decorate:IM,__disposeResources:aF,__esDecorate:FM,__exportStar:HM,__extends:DM,__generator:qM,__importDefault:ZM,__importStar:QM,__makeTemplateObject:JM,__metadata:zM,__param:MM,__propKey:BM,__read:w3,__rest:_p,__rewriteRelativeImportExtension:iF,__runInitializers:$M,__setFunctionName:UM,__spread:WM,__spreadArray:GM,__spreadArrays:VM,__values:ob,default:fJ},Symbol.toStringTag,{value:"Module"})),pJ=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class cw extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class sF extends cw{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class oj extends cw{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class lj extends cw{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var lb;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(lb||(lb={}));class mJ{constructor(t,{headers:r={},customFetch:n,region:a=lb.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=pJ(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return xt(this,arguments,void 0,function*(r,n={}){var a;let i,s;try{const{headers:l,method:c,body:u,signal:d,timeout:f}=n;let p={},{region:h}=n;h||(h=this.region);const g=new URL(`${this.url}/${r}`);h&&h!=="any"&&(p["x-region"]=h,g.searchParams.set("forceFunctionRegion",h));let m;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",m=u):typeof u=="string"?(p["Content-Type"]="text/plain",m=u):typeof FormData<"u"&&u instanceof FormData?m=u:(p["Content-Type"]="application/json",m=JSON.stringify(u)):m=u;let x=d;f&&(s=new AbortController,i=setTimeout(()=>s.abort(),f),d?(x=s.signal,d.addEventListener("abort",()=>s.abort())):x=s.signal);const y=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:m,signal:x}).catch(_=>{throw new sF(_)}),v=y.headers.get("x-relay-error");if(v&&v==="true")throw new oj(y);if(!y.ok)throw new lj(y);let b=((a=y.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),N;return b==="application/json"?N=yield y.json():b==="application/octet-stream"||b==="application/pdf"?N=yield y.blob():b==="text/event-stream"?N=y:b==="multipart/form-data"?N=yield y.formData():N=yield y.text(),{data:N,error:null,response:y}}catch(l){return{data:null,error:l,response:l instanceof lj||l instanceof oj?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var Oi={};const Np=sV(hJ);var b1={},w1={},_1={},N1={},S1={},j1={},Uk;function oF(){if(Uk)return j1;Uk=1,Object.defineProperty(j1,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return j1.default=e,j1}var zk;function lF(){if(zk)return S1;zk=1,Object.defineProperty(S1,"__esModule",{value:!0});const t=Np.__importDefault(oF());class r{constructor(a){var i,s;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(i=a.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=a.signal,this.isMaybeSingle=(s=a.isMaybeSingle)!==null&&s!==void 0?s:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=new Headers(this.headers),this.headers.set(a,i),this}then(a,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let l=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,f,p;let h=null,g=null,m=null,x=c.status,y=c.statusText;if(c.ok){if(this.method!=="HEAD"){const _=await c.text();_===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?g=_:g=JSON.parse(_))}const b=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),N=(f=c.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");b&&N&&N.length>1&&(m=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(h={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,m=null,x=406,y="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const b=await c.text();try{h=JSON.parse(b),Array.isArray(h)&&c.status===404&&(g=[],h=null,x=200,y="OK")}catch{c.status===404&&b===""?(x=204,y="No Content"):h={message:b}}if(h&&this.isMaybeSingle&&(!((p=h==null?void 0:h.details)===null||p===void 0)&&p.includes("0 rows"))&&(h=null,x=200,y="OK"),h&&this.shouldThrowOnError)throw new t.default(h)}return{error:h,data:g,count:m,status:x,statusText:y}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,f,p,h,g;let m="";const x=c==null?void 0:c.cause;if(x){const y=(u=x==null?void 0:x.message)!==null&&u!==void 0?u:"",v=(d=x==null?void 0:x.code)!==null&&d!==void 0?d:"";m=`${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"FetchError"}: ${c==null?void 0:c.message}`,m+=`

Caused by: ${(p=x==null?void 0:x.name)!==null&&p!==void 0?p:"Error"}: ${y}`,v&&(m+=` (${v})`),x!=null&&x.stack&&(m+=`
${x.stack}`)}else m=(h=c==null?void 0:c.stack)!==null&&h!==void 0?h:"";return{error:{message:`${(g=c==null?void 0:c.name)!==null&&g!==void 0?g:"FetchError"}: ${c==null?void 0:c.message}`,details:m,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(a,i)}returns(){return this}overrideTypes(){return this}}return S1.default=r,S1}var qk;function cF(){if(qk)return N1;qk=1,Object.defineProperty(N1,"__esModule",{value:!0});const t=Np.__importDefault(lF());class r extends t.default{select(a){let i=!1;const s=(a??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:i=!0,nullsFirst:s,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${a}.${i?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:s=i}={}){const l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,i,{foreignTable:s,referencedTable:l=s}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(u,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:i=!1,settings:s=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var d;const f=[a?"analyze":null,i?"verbose":null,s?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),p=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${p}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return N1.default=r,N1}var Hk;function _3(){if(Hk)return _1;Hk=1,Object.defineProperty(_1,"__esModule",{value:!0});const t=Np.__importDefault(cF()),r=new RegExp("[,()]");class n extends t.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}regexMatch(i,s){return this.url.searchParams.append(i,`match.${s}`),this}regexIMatch(i,s){return this.url.searchParams.append(i,`imatch.${s}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}isDistinct(i,s){return this.url.searchParams.append(i,`isdistinct.${s}`),this}in(i,s){const l=Array.from(new Set(s)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${u}fts${d}.${s}`),this}match(i){return Object.entries(i).forEach(([s,l])=>{this.url.searchParams.append(s,`eq.${l}`)}),this}not(i,s,l){return this.url.searchParams.append(i,`not.${s}.${l}`),this}or(i,{foreignTable:s,referencedTable:l=s}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,s,l){return this.url.searchParams.append(i,`${s}.${l}`),this}}return _1.default=n,_1}var Wk;function uF(){if(Wk)return w1;Wk=1,Object.defineProperty(w1,"__esModule",{value:!0});const t=Np.__importDefault(_3());class r{constructor(a,{headers:i={},schema:s,fetch:l}){this.url=a,this.headers=new Headers(i),this.schema=s,this.fetch=l}select(a,i){const{head:s=!1,count:l}=i??{},c=s?"HEAD":"GET";let u=!1;const d=(a??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:s=!0}={}){var l;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const u=a.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:s=!1,count:l,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const f=a.reduce((p,h)=>p.concat(Object.keys(h)),[]);if(f.length>0){const p=[...new Set(f)].map(h=>`"${h}"`);this.url.searchParams.set("columns",p.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(a,{count:i}={}){var s;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:a}={}){var i;const s="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return w1.default=r,w1}var Vk;function gJ(){if(Vk)return b1;Vk=1,Object.defineProperty(b1,"__esModule",{value:!0});const e=Np,t=e.__importDefault(uF()),r=e.__importDefault(_3());class n{constructor(i,{headers:s={},schema:l,fetch:c}={}){this.url=i,this.headers=new Headers(s),this.schemaName=l,this.fetch=c}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const s=new URL(`${this.url}/${i}`);return new t.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,s={},{head:l=!1,get:c=!1,count:u}={}){var d;let f;const p=new URL(`${this.url}/rpc/${i}`);let h;l||c?(f=l?"HEAD":"GET",Object.entries(s).filter(([m,x])=>x!==void 0).map(([m,x])=>[m,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([m,x])=>{p.searchParams.append(m,x)})):(f="POST",h=s);const g=new Headers(this.headers);return u&&g.set("Prefer",`count=${u}`),new r.default({method:f,url:p,headers:g,schema:this.schemaName,body:h,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return b1.default=n,b1}Object.defineProperty(Oi,"__esModule",{value:!0});var dF=Oi.PostgrestError=wF=Oi.PostgrestBuilder=yF=Oi.PostgrestTransformBuilder=vF=Oi.PostgrestFilterBuilder=mF=Oi.PostgrestQueryBuilder=hF=Oi.PostgrestClient=void 0;const Sp=Np,fF=Sp.__importDefault(gJ());var hF=Oi.PostgrestClient=fF.default;const pF=Sp.__importDefault(uF());var mF=Oi.PostgrestQueryBuilder=pF.default;const gF=Sp.__importDefault(_3());var vF=Oi.PostgrestFilterBuilder=gF.default;const xF=Sp.__importDefault(cF());var yF=Oi.PostgrestTransformBuilder=xF.default;const bF=Sp.__importDefault(lF());var wF=Oi.PostgrestBuilder=bF.default;const _F=Sp.__importDefault(oF());dF=Oi.PostgrestError=_F.default;var NF=Oi.default={PostgrestClient:fF.default,PostgrestQueryBuilder:pF.default,PostgrestFilterBuilder:gF.default,PostgrestTransformBuilder:xF.default,PostgrestBuilder:bF.default,PostgrestError:_F.default};const vJ=VD({__proto__:null,get PostgrestBuilder(){return wF},get PostgrestClient(){return hF},get PostgrestError(){return dF},get PostgrestFilterBuilder(){return vF},get PostgrestQueryBuilder(){return mF},get PostgrestTransformBuilder(){return yF},default:NF},[Oi]),{PostgrestClient:xJ,PostgrestQueryBuilder:t$e,PostgrestFilterBuilder:r$e,PostgrestTransformBuilder:n$e,PostgrestBuilder:a$e,PostgrestError:yJ}=NF||vJ;class SF{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const bJ="2.87.3",wJ=`realtime-js/${bJ}`,jF="1.0.0",_J="2.0.0",Gk=jF,cj=1e4,NJ=1e3,SJ=100;var Bd;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Bd||(Bd={}));var aa;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(aa||(aa={}));var Mo;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Mo||(Mo={}));var uj;(function(e){e.websocket="websocket"})(uj||(uj={}));var Ud;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ud||(Ud={}));class jJ{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},s=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(t,r,n){var a,i;const s=t.topic,l=(a=t.ref)!==null&&a!==void 0?a:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const p=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+s.length+u.length+f.length,h=new ArrayBuffer(this.HEADER_LENGTH+p);let g=new DataView(h),m=0;g.setUint8(m++,this.KINDS.userBroadcastPush),g.setUint8(m++,c.length),g.setUint8(m++,l.length),g.setUint8(m++,s.length),g.setUint8(m++,u.length),g.setUint8(m++,f.length),g.setUint8(m++,r),Array.from(c,y=>g.setUint8(m++,y.charCodeAt(0))),Array.from(l,y=>g.setUint8(m++,y.charCodeAt(0))),Array.from(s,y=>g.setUint8(m++,y.charCodeAt(0))),Array.from(u,y=>g.setUint8(m++,y.charCodeAt(0))),Array.from(f,y=>g.setUint8(m++,y.charCodeAt(0)));var x=new Uint8Array(h.byteLength+n.byteLength);return x.set(new Uint8Array(h),0),x.set(new Uint8Array(n),h.byteLength),x.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,i,s,l,c]=n;return r({join_ref:a,ref:i,topic:s,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),s=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+a));c=c+a;const d=n.decode(t.slice(c,c+i));c=c+i;const f=n.decode(t.slice(c,c+s));c=c+s;const p=t.slice(c,t.byteLength),h=l===this.JSON_ENCODING?JSON.parse(n.decode(p)):p,g={type:this.BROADCAST_EVENT,event:d,payload:h};return s>0&&(g.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class AF{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var rn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(rn||(rn={}));const Kk=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,s)=>(i[s]=AJ(s,e,t,a),i),{}):{}},AJ=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,s=r[e];return i&&!n.includes(i)?EF(i,s):dj(s)},EF=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return kJ(t,r)}switch(e){case rn.bool:return EJ(t);case rn.float4:case rn.float8:case rn.int2:case rn.int4:case rn.int8:case rn.numeric:case rn.oid:return TJ(t);case rn.json:case rn.jsonb:return CJ(t);case rn.timestamp:return OJ(t);case rn.abstime:case rn.date:case rn.daterange:case rn.int4range:case rn.int8range:case rn.money:case rn.reltime:case rn.text:case rn.time:case rn.timestamptz:case rn.timetz:case rn.tsrange:case rn.tstzrange:return dj(t);default:return dj(t)}},dj=e=>e,EJ=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},TJ=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},CJ=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},kJ=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const s=e.slice(1,r);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(l=>EF(t,l))}return e},OJ=e=>typeof e=="string"?e.replace(" ","T"):e,TF=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class E5{constructor(t,r,n={},a=cj){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var fj;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(fj||(fj={}));class r0{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:s,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=r0.syncState(this.state,a,i,s),this.pendingDiffs.forEach(c=>{this.state=r0.syncDiff(this.state,c,i,s)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:s,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=r0.syncDiff(this.state,a,i,s),l())}),this.onJoin((a,i,s)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:s})}),this.onLeave((a,i,s)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),s=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{s[u]||(c[u]=d)}),this.map(s,(u,d)=>{const f=i[u];if(f){const p=d.map(x=>x.presence_ref),h=f.map(x=>x.presence_ref),g=d.filter(x=>h.indexOf(x.presence_ref)<0),m=f.filter(x=>p.indexOf(x.presence_ref)<0);g.length>0&&(l[u]=g),m.length>0&&(c[u]=m)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:s}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(h=>h.presence_ref),p=d.filter(h=>f.indexOf(h.presence_ref)<0);t[l].unshift(...p)}n(l,d,c)}),this.map(s,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var hj;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(hj||(hj={}));var n0;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(n0||(n0={}));var pl;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(pl||(pl={}));const PJ=aa;class Yd{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=aa.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new E5(this,Mo.join,this.params,this.timeout),this.rejoinTimer=new AF(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=aa.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=aa.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=aa.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=aa.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=aa.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Mo.reply,{},(s,l)=>{this._trigger(this._replyEventName(l),s)}),this.presence=new r0(this),this.broadcastEndpointURL=TF(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==aa.closed){const{config:{broadcast:s,presence:l,private:c}}=this.params,u=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[n0.PRESENCE]&&this.bindings[n0.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},p={broadcast:s,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(pl.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(pl.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:h})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),h===void 0){t==null||t(pl.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,x=(g=m==null?void 0:m.length)!==null&&g!==void 0?g:0,y=[];for(let v=0;v<x;v++){const b=m[v],{filter:{event:N,schema:_,table:E,filter:j}}=b,A=h&&h[v];if(A&&A.event===N&&Yd.isFilterValueEqual(A.schema,_)&&Yd.isFilterValueEqual(A.table,E)&&Yd.isFilterValueEqual(A.filter,j))y.push(Object.assign(Object.assign({},b),{id:A.id}));else{this.unsubscribe(),this.state=aa.errored,t==null||t(pl.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(pl.SUBSCRIBED);return}}).receive("error",h=>{this.state=aa.errored,t==null||t(pl.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(pl.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===aa.joined&&t===n0.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:s}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var s,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(s=this.params)===null||s===void 0?void 0:s.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=aa.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Mo.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new E5(this,Mo.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=aa.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),s=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),s}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new E5(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>SJ){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const s=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Mo;if(n&&[l,c,u,d].indexOf(s)>=0&&n!==this._joinRef())return;let p=this._onMessage(s,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(h=>{var g,m,x;return((g=h.filter)===null||g===void 0?void 0:g.event)==="*"||((x=(m=h.filter)===null||m===void 0?void 0:m.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===s}).map(h=>h.callback(p,n)):(i=this.bindings[s])===null||i===void 0||i.filter(h=>{var g,m,x,y,v,b;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in h){const N=h.id,_=(g=h.filter)===null||g===void 0?void 0:g.event;return N&&((m=r.ids)===null||m===void 0?void 0:m.includes(N))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const N=(v=(y=h==null?void 0:h.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return N==="*"||N===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===s}).map(h=>{if(typeof p=="object"&&"ids"in p){const g=p.data,{schema:m,table:x,commit_timestamp:y,type:v,errors:b}=g;p=Object.assign(Object.assign({},{schema:m,table:x,commit_timestamp:y,eventType:v,new:{},old:{},errors:b}),this._getPayloadRecords(g))}h.callback(p,n)})}_isClosed(){return this.state===aa.closed}_isJoined(){return this.state===aa.joined}_isJoining(){return this.state===aa.joining}_isLeaving(){return this.state===aa.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Yd.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Mo.close,{},t)}_onError(t){this._on(Mo.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=aa.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Kk(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Kk(t.columns,t.old_record)),r}}const T5=()=>{},A1={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},LJ=[1e3,2e3,5e3,1e4],RJ=1e4,DJ=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class CF{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=cj,this.transport=null,this.heartbeatIntervalMs=A1.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=T5,this.ref=0,this.reconnectTimer=null,this.vsn=Gk,this.logger=T5,this.conn=null,this.sendBuffer=[],this.serializer=new jJ,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${uj.websocket}`,this.httpEndpoint=TF(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=SF.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Bd.connecting:return Ud.Connecting;case Bd.open:return Ud.Open;case Bd.closing:return Ud.Closing;default:return Ud.Closed}}isConnected(){return this.connectionState()===Ud.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new Yd(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,s=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(NJ,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},A1.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:s}=r,l=s?`(${s})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,s)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Bd.open||this.conn.readyState===Bd.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Mo.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([DJ],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:wJ};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(Mo.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new AF(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},A1.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,s,l,c,u,d,f,p,h;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:cj,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:A1.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:T5,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Gk,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:g=>LJ[g-1]||RJ,this.vsn){case jF:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(g,m)=>m(JSON.stringify(g)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(g,m)=>m(JSON.parse(g));break;case _J:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class uw extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Nn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class IJ extends uw{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class pj extends uw{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const N3=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),MJ=()=>Response,mj=e=>{if(Array.isArray(e))return e.map(r=>mj(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=mj(n)}),t},FJ=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},$J=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),C5=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},BJ=(e,t,r)=>xt(void 0,void 0,void 0,function*(){const n=yield MJ();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const i=e.status||500,s=(a==null?void 0:a.statusCode)||i+"";t(new IJ(C5(a),i,s))}).catch(a=>{t(new pj(C5(a),a))}):t(new pj(C5(e),e))}),UJ=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(FJ(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Gv(e,t,r,n,a,i){return xt(this,void 0,void 0,function*(){return new Promise((s,l)=>{e(r,UJ(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>BJ(c,l,n))})})}function Ug(e,t,r,n){return xt(this,void 0,void 0,function*(){return Gv(e,"GET",t,r,n)})}function Lo(e,t,r,n,a){return xt(this,void 0,void 0,function*(){return Gv(e,"POST",t,n,a,r)})}function gj(e,t,r,n,a){return xt(this,void 0,void 0,function*(){return Gv(e,"PUT",t,n,a,r)})}function zJ(e,t,r,n){return xt(this,void 0,void 0,function*(){return Gv(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function S3(e,t,r,n,a){return xt(this,void 0,void 0,function*(){return Gv(e,"DELETE",t,n,a,r)})}class qJ{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return xt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nn(t))return{data:null,error:t};throw t}})}}var kF;class HJ{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[kF]="BlobDownloadBuilder",this.promise=null}asStream(){return new qJ(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return xt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nn(t))return{data:null,error:t};throw t}})}}kF=Symbol.toStringTag;const WJ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Yk={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class VJ{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=N3(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return xt(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},Yk),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",s.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${s.cacheControl}`,l["content-type"]=s.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!s.duplex&&(s.duplex="half")),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(t=="PUT"?gj:Lo)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Nn(i))return{data:null,error:i};throw i}})}upload(t,r,n){return xt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return xt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),s=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${s}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Yk.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield gj(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Nn(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return xt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield Lo(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),s=new URL(this.url+i.url),l=s.searchParams.get("token");if(!l)throw new uw("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}update(t,r,n){return xt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return xt(this,void 0,void 0,function*(){try{return{data:yield Lo(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nn(a))return{data:null,error:a};throw a}})}copy(t,r,n){return xt(this,void 0,void 0,function*(){try{return{data:{path:(yield Lo(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nn(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return xt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Lo(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nn(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return xt(this,void 0,void 0,function*(){try{const a=yield Lo(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nn(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),s=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>Ug(this.fetch,`${this.url}/${a}/${l}${s}`,{headers:this.headers,noResolveJson:!0});return new HJ(c,this.shouldThrowOnError)}info(t){return xt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Ug(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:mj(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}exists(t){return xt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield zJ(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n)&&n instanceof pj){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return xt(this,void 0,void 0,function*(){try{return{data:yield S3(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}list(t,r,n){return xt(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},WJ),r),{prefix:t||""});return{data:yield Lo(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nn(a))return{data:null,error:a};throw a}})}listV2(t,r){return xt(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Lo(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const OF="2.87.3",PF={"X-Client-Info":`storage-js/${OF}`};class GJ{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},PF),r),this.fetch=N3(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return xt(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield Ug(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}getBucket(t){return xt(this,void 0,void 0,function*(){try{return{data:yield Ug(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}createBucket(t){return xt(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Lo(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nn(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return xt(this,void 0,void 0,function*(){try{return{data:yield gj(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}emptyBucket(t){return xt(this,void 0,void 0,function*(){try{return{data:yield Lo(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return xt(this,void 0,void 0,function*(){try{return{data:yield S3(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var zg=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function KJ(e,t,r){const n=new URL(t,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&n.searchParams.set(a,i);return n.toString()}async function YJ(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function XJ(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:a,body:i,headers:s}){const l=KJ(e.baseUrl,n,a),c=await YJ(e.auth),u=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...s},body:i?JSON.stringify(i):void 0}),d=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),p=f&&d?JSON.parse(d):d;if(!u.ok){const h=f?p:void 0,g=h==null?void 0:h.error;throw new zg((g==null?void 0:g.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:g==null?void 0:g.type,icebergCode:g==null?void 0:g.code,details:h})}return{status:u.status,headers:u.headers,data:p}}}}function E1(e){return e.join("")}var JJ=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:E1(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${E1(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${E1(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${E1(e.namespace)}`}),!0}catch(t){if(t instanceof zg&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof zg&&r.status===409)return;throw r}}};function dh(e){return e.join("")}var QJ=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${dh(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${dh(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${dh(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${dh(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${dh(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${dh(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof zg&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof zg&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},ZJ=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=XJ({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new JJ(this.client,t),this.tableOps=new QJ(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class eQ{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},PF),r),this.fetch=N3(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return xt(this,void 0,void 0,function*(){try{return{data:yield Lo(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}listBuckets(t){return xt(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Ug(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return xt(this,void 0,void 0,function*(){try{return{data:yield S3(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}from(t){if(!$J(t))throw new uw("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new ZJ({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>xt(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(i,s){const l=i[s];return typeof l!="function"?l:(...c)=>xt(this,void 0,void 0,function*(){try{return{data:yield l.apply(i,c),error:null}}catch(u){if(n)throw u;return{data:null,error:u}}})}})}}const j3={"X-Client-Info":`storage-js/${OF}`,"Content-Type":"application/json"};class LF extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function As(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class k5 extends LF{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class tQ extends LF{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var Xk;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Xk||(Xk={}));const A3=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),rQ=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Jk=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),nQ=(e,t,r)=>xt(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e.status||500,i=e;if(typeof i.json=="function")i.json().then(s=>{const l=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||a+"";t(new k5(Jk(s),a,l))}).catch(()=>{const s=a+"",l=i.statusText||`HTTP ${a} error`;t(new k5(l,a,s))});else{const s=a+"",l=i.statusText||`HTTP ${a} error`;t(new k5(l,a,s))}}else t(new tQ(Jk(e),e))}),aQ=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(rQ(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function iQ(e,t,r,n,a,i){return xt(this,void 0,void 0,function*(){return new Promise((s,l)=>{e(r,aQ(t,n,a,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>s(c)).catch(c=>nQ(c,l,n))})})}function Es(e,t,r,n,a){return xt(this,void 0,void 0,function*(){return iQ(e,"POST",t,n,a,r)})}class sQ{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},j3),r),this.fetch=A3(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return xt(this,void 0,void 0,function*(){try{return{data:(yield Es(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(As(r))return{data:null,error:r};throw r}})}getIndex(t,r){return xt(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(As(n))return{data:null,error:n};throw n}})}listIndexes(t){return xt(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(As(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return xt(this,void 0,void 0,function*(){try{return{data:(yield Es(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(As(n))return{data:null,error:n};throw n}})}}class oQ{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},j3),r),this.fetch=A3(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return xt(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Es(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(As(r))return{data:null,error:r};throw r}})}getVectors(t){return xt(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(As(r))return{data:null,error:r};throw r}})}listVectors(t){return xt(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Es(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(As(r))return{data:null,error:r};throw r}})}queryVectors(t){return xt(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(As(r))return{data:null,error:r};throw r}})}deleteVectors(t){return xt(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Es(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(As(r))return{data:null,error:r};throw r}})}}class lQ{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},j3),r),this.fetch=A3(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return xt(this,void 0,void 0,function*(){try{return{data:(yield Es(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(As(r))return{data:null,error:r};throw r}})}getBucket(t){return xt(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(As(r))return{data:null,error:r};throw r}})}listBuckets(){return xt(this,arguments,void 0,function*(t={}){try{return{data:yield Es(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(As(r))return{data:null,error:r};throw r}})}deleteBucket(t){return xt(this,void 0,void 0,function*(){try{return{data:(yield Es(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(As(r))return{data:null,error:r};throw r}})}}class cQ extends lQ{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new uQ(this.url,this.headers,t,this.fetch)}createBucket(t){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return xt(this,void 0,void 0,function*(){return r.createBucket.call(this,t)})}getBucket(t){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return xt(this,void 0,void 0,function*(){return r.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return xt(this,arguments,void 0,function*(r={}){return t.listBuckets.call(this,r)})}deleteBucket(t){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return xt(this,void 0,void 0,function*(){return r.deleteBucket.call(this,t)})}}class uQ extends sQ{constructor(t,r,n,a){super(t,r,a),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return xt(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return xt(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return xt(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return xt(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new dQ(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class dQ extends oQ{constructor(t,r,n,a,i){super(t,r,i),this.vectorBucketName=n,this.indexName=a}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return xt(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return xt(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return xt(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return xt(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return xt(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class fQ extends GJ{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new VJ(this.url,this.headers,t,this.fetch)}get vectors(){return new cQ(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new eQ(this.url+"/iceberg",this.headers,this.fetch)}}const hQ="2.87.3";let qm="";typeof Deno<"u"?qm="deno":typeof document<"u"?qm="web":typeof navigator<"u"&&navigator.product==="ReactNative"?qm="react-native":qm="node";const pQ={"X-Client-Info":`supabase-js-${qm}/${hQ}`},mQ={headers:pQ},gQ={schema:"public"},vQ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},xQ={},yQ=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),bQ=()=>Headers,wQ=(e,t,r)=>{const n=yQ(r),a=bQ();return async(i,s)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new a(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},s),{headers:u}))}};function _Q(e){return e.endsWith("/")?e:e+"/"}function NQ(e,t){var r,n;const{db:a,auth:i,realtime:s,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,p={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),s),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function SQ(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(_Q(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const RF="2.87.3",jh=30*1e3,vj=3,O5=vj*jh,jQ="http://localhost:9999",AQ="supabase.auth.token",EQ={"X-Client-Info":`gotrue-js/${RF}`},xj="X-Supabase-Api-Version",DF={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},TQ=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,CQ=10*60*1e3;class U0 extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function kt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class IF extends U0{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function MF(e){return kt(e)&&e.name==="AuthApiError"}class pu extends U0{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class kl extends U0{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Vi extends kl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function FF(e){return kt(e)&&e.name==="AuthSessionMissingError"}class Ld extends kl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hm extends kl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Wm extends kl{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $F(e){return kt(e)&&e.name==="AuthImplicitGrantRedirectError"}class yj extends kl{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class BF extends kl{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}function kQ(e){return kt(e)&&e.name==="AuthPKCECodeVerifierMissingError"}class cb extends kl{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function wy(e){return kt(e)&&e.name==="AuthRetryableFetchError"}class bj extends kl{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}function OQ(e){return kt(e)&&e.name==="AuthWeakPasswordError"}class ub extends kl{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const db="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Qk=` 	
\r=`.split(""),PQ=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Qk.length;t+=1)e[Qk[t].charCodeAt(0)]=-2;for(let t=0;t<db.length;t+=1)e[db[t].charCodeAt(0)]=t;return e})();function Zk(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(db[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(db[n]),t.queuedBits-=6}}function UF(e,t,r){const n=PQ[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function eO(e){const t=[],r=s=>{t.push(String.fromCodePoint(s))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=s=>{DQ(s,n,r)};for(let s=0;s<e.length;s+=1)UF(e.charCodeAt(s),a,i);return t.join("")}function LQ(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function RQ(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}LQ(n,t)}}function DQ(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function a0(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)UF(e.charCodeAt(a),r,n);return new Uint8Array(t)}function IQ(e){const t=[];return RQ(e,r=>t.push(r)),new Uint8Array(t)}function Xd(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>Zk(a,r,n)),Zk(null,r,n),t.join("")}function MQ(e){return Math.round(Date.now()/1e3)+e}function FQ(){return Symbol("auth-callback")}const Wa=()=>typeof window<"u"&&typeof document<"u",Sd={tested:!1,writable:!1},zF=()=>{if(!Wa())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Sd.tested)return Sd.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Sd.tested=!0,Sd.writable=!0}catch{Sd.tested=!0,Sd.writable=!1}return Sd.writable};function $Q(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const qF=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),BQ=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ah=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},jd=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ha=async(e,t)=>{await e.removeItem(t)};class dw{constructor(){this.promise=new dw.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}dw.promiseConstructor=Promise;function P5(e){const t=e.split(".");if(t.length!==3)throw new ub("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!TQ.test(t[n]))throw new ub("JWT not in base64url format");return{header:JSON.parse(eO(t[0])),payload:JSON.parse(eO(t[1])),signature:a0(t[2]),raw:{header:t[0],payload:t[1]}}}async function UQ(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function zQ(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const s=await e(i);if(!t(i,null,s)){n(s);return}}catch(s){if(!t(i,s)){a(s);return}}})()})}function qQ(e){return("0"+e.toString(16)).substr(-2)}function HQ(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,qQ).join("")}async function WQ(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function VQ(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await WQ(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function fh(e,t,r=!1){const n=HQ();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Ah(e,`${t}-code-verifier`,a);const i=await VQ(n);return[i,n===i?"plain":"s256"]}const GQ=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function KQ(e){const t=e.headers.get(xj);if(!t||!t.match(GQ))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function YQ(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function XQ(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const JQ=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function hh(e){if(!JQ.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function L5(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function QQ(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function tO(e){return JSON.parse(JSON.stringify(e))}const Rd=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ZQ=[502,503,504];async function rO(e){var t;if(!BQ(e))throw new cb(Rd(e),0);if(ZQ.includes(e.status))throw new cb(Rd(e),e.status);let r;try{r=await e.json()}catch(i){throw new pu(Rd(i),i)}let n;const a=KQ(e);if(a&&a.getTime()>=DF["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new bj(Rd(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Vi}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0))throw new bj(Rd(r),e.status,r.weak_password.reasons);throw new IF(Rd(r),e.status||500,n)}const eZ=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Wt(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[xj]||(i[xj]=DF["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const s=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(s.redirect_to=n.redirectTo);const l=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await tZ(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function tZ(e,t,r,n,a,i){const s=eZ(t,n,a,i);let l;try{l=await e(r,Object.assign({},s))}catch(c){throw console.error(c),new cb(Rd(c),0)}if(l.ok||await rO(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await rO(c)}}function Oo(e){var t;let r=null;aZ(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=MQ(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function nO(e){const t=Oo(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function mu(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function rZ(e){return{data:e,error:null}}function nZ(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,s=_p(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},s);return{data:{properties:l,user:c},error:null}}function aO(e){return e}function aZ(e){return e.access_token&&e.refresh_token&&e.expires_in}const _y=["global","local","others"];class E3{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=qF(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=_y[0]){if(_y.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_y.join(", ")}`);try{return await Wt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(kt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Wt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:mu})}catch(n){if(kt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=_p(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Wt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:nZ,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(kt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Wt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:mu})}catch(r){if(kt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,s,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Wt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:aO});if(d.error)throw d.error;const f=await d.json(),p=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);u[`${x}Page`]=m}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(kt(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){hh(t);try{return await Wt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:mu})}catch(r){if(kt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){hh(t);try{return await Wt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:mu})}catch(n){if(kt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){hh(t);try{return await Wt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:mu})}catch(n){if(kt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){hh(t.userId);try{const{data:r,error:n}=await Wt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(kt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){hh(t.userId),hh(t.id);try{return{data:await Wt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(kt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,s,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Wt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:aO});if(d.error)throw d.error;const f=await d.json(),p=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);u[`${x}Page`]=m}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(kt(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Wt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(kt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Wt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(kt(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Wt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(kt(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Wt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(kt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Wt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(kt(r))return{data:null,error:r};throw r}}}function iO(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Dd={debug:!!(globalThis&&zF()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class T3 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class HF extends T3{}class iZ extends T3{}async function WF(e,t,r){Dd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Dd.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Dd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Dd.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Dd.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new HF(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Dd.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const sO={};async function sZ(e,t,r){var n;const a=(n=sO[e])!==null&&n!==void 0?n:Promise.resolve(),i=Promise.race([a.catch(()=>null),t>=0?new Promise((s,l)=>{setTimeout(()=>{l(new iZ(`Acquiring process lock with name "${e}" timed out`))},t)}):null].filter(s=>s)).catch(s=>{if(s&&s.isAcquireTimeout)throw s;return null}).then(async()=>await r());return sO[e]=i.catch(async s=>{if(s&&s.isAcquireTimeout)return await a,null;throw s}),await i}function oZ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function VF(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function lZ(e){return parseInt(e,16)}function cZ(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function uZ(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:s,notBefore:l,requestId:c,resources:u,scheme:d,uri:f,version:p}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const h=VF(e.address),g=d?`${d}://${n}`:n,m=e.statement?`${e.statement}
`:"",x=`${g} wants you to sign in with your Ethereum account:
${h}

${m}`;let y=`URI: ${f}
Version: ${p}
Chain ID: ${r}${s?`
Nonce: ${s}`:""}
Issued At: ${i.toISOString()}`;if(a&&(y+=`
Expiration Time: ${a.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),u){let v=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);v+=`
- ${b}`}y+=v}return`${x}
${y}`}class oa extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class fb extends oa{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function dZ({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new oa({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new oa({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new oa({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new oa({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new oa({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new oa({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new oa({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new oa({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(GF(s)){if(i.rp.id!==s)return new oa({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new oa({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new oa({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new oa({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new oa({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function fZ({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new oa({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new oa({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(GF(n)){if(r.rpId!==n)return new oa({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new oa({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new oa({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new oa({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class hZ{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const pZ=new hZ;function mZ(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=_p(e,["challenge","user","excludeCredentials"]),i=a0(t).buffer,s=Object.assign(Object.assign({},r),{id:a0(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:s});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:a0(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function gZ(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=_p(e,["challenge","allowCredentials"]),a=a0(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let s=0;s<r.length;s++){const l=r[s];i.allowCredentials[s]=Object.assign(Object.assign({},l),{id:a0(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function vZ(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Xd(new Uint8Array(e.response.attestationObject)),clientDataJSON:Xd(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function xZ(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Xd(new Uint8Array(a.authenticatorData)),clientDataJSON:Xd(new Uint8Array(a.clientDataJSON)),signature:Xd(new Uint8Array(a.signature)),userHandle:a.userHandle?Xd(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function GF(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function oO(){var e,t;return!!(Wa()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function yZ(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new fb("Browser returned unexpected credential type",t)}:{data:null,error:new fb("Empty credential response",t)}}catch(t){return{data:null,error:dZ({error:t,options:e})}}}async function bZ(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new fb("Browser returned unexpected credential type",t)}:{data:null,error:new fb("Empty credential response",t)}}catch(t){return{data:null,error:fZ({error:t,options:e})}}}const wZ={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},_Z={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function hb(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const s=a[i];if(s!==void 0)if(Array.isArray(s))n[i]=s;else if(r(s))n[i]=s;else if(t(s)){const l=n[i];t(l)?n[i]=hb(l,s):n[i]=hb(s)}else n[i]=s}return n}function NZ(e,t){return hb(wZ,e,t||{})}function SZ(e,t){return hb(_Z,e,t||{})}class jZ{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){try{const{data:s,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!s)return{data:null,error:l};const c=a??pZ.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=NZ(s.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:f}=await yZ({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=SZ(s.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:f}=await bZ(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(s){return kt(s)?{data:null,error:s}:{data:null,error:new pu("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new U0("rpId is required for WebAuthn authentication")};try{if(!oO())return{data:null,error:new pu("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!s)return{data:null,error:l};const{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(s){return kt(s)?{data:null,error:s}:{data:null,error:new pu("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new U0("rpId is required for WebAuthn registration")};try{if(!oO())return{data:null,error:new pu("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(s){return kt(s)?{data:null,error:s}:{data:null,error:new pu("Unexpected error in register",s)}}}}oZ();const AZ={url:jQ,storageKey:AQ,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:EQ,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function lO(e,t,r){return await r()}const ph={};class z0{get jwks(){var t,r;return(r=(t=ph[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ph[this.storageKey]=Object.assign(Object.assign({},ph[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ph[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ph[this.storageKey]=Object.assign(Object.assign({},ph[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},AZ),t);if(this.storageKey=i.storageKey,this.instanceID=(r=z0.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,z0.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Wa()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new E3({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=qF(i.fetch),this.lock=i.lock||lO,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Wa()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=WF:this.lock=lO,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new jZ(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:zF()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=iO(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=iO(this.memoryStorage)),Wa()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${RF}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Wa()&&(r=$Q(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Wa()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),$F(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:s,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",s,"redirect type",l),await this._saveSession(s),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return kt(r)?this._returnResult({error:r}):this._returnResult({error:new pu("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await Wt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Oo}),{data:s,error:l}=i;if(l||!s)return this._returnResult({data:{user:null,session:null},error:l});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(kt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:d,password:f,options:p}=t;let h=null,g=null;this.flowType==="pkce"&&([h,g]=await fh(this.storage,this.storageKey)),i=await Wt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:h,code_challenge_method:g},xform:Oo})}else if("phone"in t){const{phone:d,password:f,options:p}=t;i=await Wt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(a=p==null?void 0:p.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Oo})}else throw new Hm("You must provide either an email or phone number and a password");const{data:s,error:l}=i;if(l||!s)return await Ha(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await Ha(this.storage,`${this.storageKey}-code-verifier`),kt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:s,options:l}=t;r=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:nO})}else if("phone"in t){const{phone:i,password:s,options:l}=t;r=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:nO})}else throw new Hm("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new Ld;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(kt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,s,l,c,u,d,f,p;let h,g;if("message"in t)h=t.message,g=t.signature;else{const{chain:m,wallet:x,statement:y,options:v}=t;let b;if(Wa())if(typeof x=="object")b=x;else{const T=window;if("ethereum"in T&&typeof T.ethereum=="object"&&"request"in T.ethereum&&typeof T.ethereum.request=="function")b=T.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=x}const N=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href),_=await b.request({method:"eth_requestAccounts"}).then(T=>T).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=VF(_[0]);let j=(n=v==null?void 0:v.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!j){const T=await b.request({method:"eth_chainId"});j=lZ(T)}const A={domain:N.host,address:E,statement:y,uri:N.href,version:"1",chainId:j,nonce:(a=v==null?void 0:v.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(s=(i=v==null?void 0:v.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(l=v==null?void 0:v.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=v==null?void 0:v.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=v==null?void 0:v.signInWithEthereum)===null||d===void 0?void 0:d.resources};h=uZ(A),g=await b.request({method:"personal_sign",params:[cZ(h),E]})}try{const{data:m,error:x}=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:g},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Oo});if(x)throw x;if(!m||!m.session||!m.user){const y=new Ld;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:x})}catch(m){if(kt(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithSolana(t){var r,n,a,i,s,l,c,u,d,f,p,h;let g,m;if("message"in t)g=t.message,m=t.signature;else{const{chain:x,wallet:y,statement:v,options:b}=t;let N;if(Wa())if(typeof y=="object")N=y;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))N=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=y}const _=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in N&&N.signIn){const E=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),v?{statement:v}:null));let j;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")j=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)j=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)g=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),m=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${_.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(a=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const E=await N.signMessage(new TextEncoder().encode(g),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=E}}try{const{data:x,error:y}=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Xd(m)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Oo});if(y)throw y;if(!x||!x.session||!x.user){const v=new Ld;return this._returnResult({data:{user:null,session:null},error:v})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:y})}catch(x){if(kt(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(t){const r=await jd(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new BF;const{data:i,error:s}=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Oo});if(await Ha(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!i||!i.session||!i.user){const l=new Ld;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:s})}catch(i){if(await Ha(this.storage,`${this.storageKey}-code-verifier`),kt(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:s}=t,l=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Oo}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Ld;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(kt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,i,s;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await fh(this.storage,this.storageKey));const{error:f}=await Wt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await Wt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(s=c==null?void 0:c.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Hm("You must provide either an email or phone number.")}catch(l){if(await Ha(this.storage,`${this.storageKey}-code-verifier`),kt(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:s,error:l}=await Wt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Oo});if(l)throw l;if(!s)throw new Error("An error occurred on token verification.");const c=s.session,u=s.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(kt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,i,s;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await fh(this.storage,this.storageKey));const u=await Wt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:rZ});return!((i=u.data)===null||i===void 0)&&i.url&&Wa()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await Ha(this.storage,`${this.storageKey}-code-verifier`),kt(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Vi;const{error:a}=await Wt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(kt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:s}=await Wt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:s,error:l}=await Wt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:l})}throw new Hm("You must provide either an email or phone number and a type")}catch(r){if(kt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await jd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<O5:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const s=await jd(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=L5()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};t.user=QQ(t.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Wt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:mu}):await this._useSession(async r=>{var n,a,i;const{data:s,error:l}=r;if(l)throw l;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vi}:await Wt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:mu})})}catch(r){if(kt(r))return FF(r)&&(await this._removeSession(),await Ha(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Vi;const s=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await fh(this.storage,this.storageKey));const{data:u,error:d}=await Wt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:s.access_token,xform:mu});if(d)throw d;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(n){if(await Ha(this.storage,`${this.storageKey}-code-verifier`),kt(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Vi;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:s}=P5(t.access_token);if(s.exp&&(n=s.exp,a=n<=r),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(kt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:s,error:l}=r;if(l)throw l;t=(n=s.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Vi;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(kt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Wa())throw new Wm("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Wm(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new yj("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Wm("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new yj("No code detected.");const{data:v,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:s,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!s||!u)throw new Wm("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let p=d+f;c&&(p=parseInt(c));const h=p-d;h*1e3<=jh&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${f}s`);const g=p-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,p,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,p,d);const{data:m,error:x}=await this._getUser(i);if(x)throw x;const y={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:p,refresh_token:s,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(n){if(kt(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await jd(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const s=(n=a.session)===null||n===void 0?void 0:n.access_token;if(s){const{error:l}=await this.admin.signOut(s,t);if(l&&!(MF(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Ha(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=FQ(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:s}=r;if(s)throw s;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await fh(this.storage,this.storageKey,!0));try{return await Wt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Ha(this.storage,`${this.storageKey}-code-verifier`),kt(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(kt(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var s,l,c,u,d;const{data:f,error:p}=i;if(p)throw p;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Wt(this.fetch,"GET",h,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return Wa()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(kt(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:s,provider:l,token:c,access_token:u,nonce:d}=t,f=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Oo}),{data:p,error:h}=f;return h?this._returnResult({data:{user:null,session:null},error:h}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new Ld}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:h}))}catch(a){if(await Ha(this.storage,`${this.storageKey}-code-verifier`),kt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)throw s;return await Wt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(kt(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await zQ(async a=>(a>0&&await UQ(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Wt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Oo})),(a,i)=>{const s=200*Math.pow(2,a);return i&&wy(i)&&Date.now()+s-n<jh})}catch(n){if(this._debug(r,"error",n),kt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Wa()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await jd(this.storage,this.storageKey);if(a&&this.userStorage){let s=await jd(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:a.user},await Ah(this.userStorage,this.storageKey+"-user",s)),a.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:L5()}else if(a&&!a.user&&!a.user){const s=await jd(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(a.user=s.user,await Ha(this.storage,this.storageKey+"-user"),await Ah(this.storage,this.storageKey,a)):a.user=L5()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<O5;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${O5}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:s}=await this._callRefreshToken(a.refresh_token);s&&(console.error(s),wy(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:l}=await this._getUser(a.access_token);!l&&(s!=null&&s.user)?(a.user=s.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Vi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new dw;const{data:i,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!i.session)throw new Vi;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),kt(i)){const s={data:null,error:i};return wy(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],s=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(s),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ha(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Ah(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=tO(a);await Ah(this.storage,this.storageKey,i)}else{const a=tO(r);await Ah(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ha(this.storage,this.storageKey),await Ha(this.storage,this.storageKey+"-code-verifier"),await Ha(this.storage,this.storageKey+"-user"),this.userStorage&&await Ha(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Wa()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),jh);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/jh);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${jh}ms, refresh threshold is ${vj} ticks`),a<=vj&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof T3)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Wa()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,s]=await fh(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(s)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await Wt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(kt(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await Wt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(kt(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?vZ(t.webauthn.credential_response):xZ(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await Wt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(kt(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const s=await Wt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(s.error)return s;const{data:l}=s;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:mZ(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:gZ(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(kt(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=P5(n.access_token);let s=null;i.aal&&(s=i.aal);let l=s;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:s,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Wt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Vi})})}catch(r){if(kt(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Vi});const s=await Wt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&Wa()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(kt(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Vi});const s=await Wt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&Wa()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(kt(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Wt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Vi})})}catch(t){if(kt(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(await Wt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Vi})})}catch(r){if(kt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+CQ>a)return n;const{data:i,error:s}=await Wt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:h,error:g}=await this.getSession();if(g||!h.session)return this._returnResult({data:null,error:g});n=h.session.access_token}const{header:a,payload:i,signature:s,raw:{header:l,payload:c}}=P5(n);r!=null&&r.allowExpired||YQ(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:h}=await this.getUser(n);if(h)throw h;return{data:{claims:i,header:a,signature:s},error:null}}const d=XQ(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,s,IQ(`${l}.${c}`)))throw new ub("Invalid JWT signature");return{data:{claims:i,header:a,signature:s},error:null}}catch(n){if(kt(n))return this._returnResult({data:null,error:n});throw n}}}z0.nextInstanceID={};const EZ=E3,KF=z0;class TZ extends KF{constructor(t){super(t)}}class YF{constructor(t,r,n){var a,i,s;this.supabaseUrl=t,this.supabaseKey=r;const l=SQ(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:gQ,realtime:xQ,auth:Object.assign(Object.assign({},vQ),{storageKey:c}),global:mQ},d=NQ(n??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=d.auth)!==null&&s!==void 0?s:{},this.headers,d.global.fetch),this.fetch=wQ(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new xJ(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new fQ(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new mJ(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:s,flowType:l,lock:c,debug:u,throwOnError:d},f,p){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new TZ({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),f),storageKey:s,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:l,lock:c,debug:u,throwOnError:d,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new CF(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const CZ=(e,t,r)=>new YF(e,t,r);function kZ(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}kZ()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const OZ=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:EZ,AuthApiError:IF,AuthClient:KF,AuthError:U0,AuthImplicitGrantRedirectError:Wm,AuthInvalidCredentialsError:Hm,AuthInvalidJwtError:ub,AuthInvalidTokenResponseError:Ld,AuthPKCECodeVerifierMissingError:BF,AuthPKCEGrantCodeExchangeError:yj,AuthRetryableFetchError:cb,AuthSessionMissingError:Vi,AuthUnknownError:pu,AuthWeakPasswordError:bj,CustomAuthError:kl,get FunctionRegion(){return lb},FunctionsError:cw,FunctionsFetchError:sF,FunctionsHttpError:lj,FunctionsRelayError:oj,GoTrueAdminApi:E3,GoTrueClient:z0,NavigatorLockAcquireTimeoutError:HF,PostgrestError:yJ,REALTIME_CHANNEL_STATES:PJ,get REALTIME_LISTEN_TYPES(){return n0},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return hj},get REALTIME_PRESENCE_LISTEN_EVENTS(){return fj},get REALTIME_SUBSCRIBE_STATES(){return pl},RealtimeChannel:Yd,RealtimeClient:CF,RealtimePresence:r0,SIGN_OUT_SCOPES:_y,SupabaseClient:YF,WebSocketFactory:SF,createClient:CZ,isAuthApiError:MF,isAuthError:kt,isAuthImplicitGrantRedirectError:$F,isAuthPKCECodeVerifierMissingError:kQ,isAuthRetryableFetchError:wy,isAuthSessionMissingError:FF,isAuthWeakPasswordError:OQ,lockInternals:Dd,navigatorLock:WF,processLock:sZ},Symbol.toStringTag,{value:"Module"})),{createClient:XF}=OZ,PZ="https://kzslhhctjfxsdvcrqvvs.supabase.co",JF="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt6c2xoaGN0amZ4c2R2Y3JxdnZzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4NDAzODQsImV4cCI6MjA4MTQxNjM4NH0.NQ1maFD5Nl8y-5TxJFjeSdhOSzOi-6Hd8o4VcrmLUKo",Se=XF(PZ,JF,{auth:{persistSession:!1,autoRefreshToken:!1},realtime:{params:{eventsPerSecond:10}}}),rr=()=>!!JF,LZ="https://kzslhhctjfxsdvcrqvvs.supabase.co/functions/v1/send-email",cO="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt6c2xoaGN0amZ4c2R2Y3JxdnZzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4NDAzODQsImV4cCI6MjA4MTQxNjM4NH0.NQ1maFD5Nl8y-5TxJFjeSdhOSzOi-6Hd8o4VcrmLUKo",oo={sendEmail:async e=>{const t=await fetch(LZ,{method:"POST",headers:{"Content-Type":"application/json",apikey:cO,Authorization:`Bearer ${cO}`},body:JSON.stringify(e)});if(!t.ok){const n=await t.text();throw new Error(`Email send failed: ${t.status} ${n}`)}const r=await t.json();return{accepted:r.accepted??!0,messageId:r.messageId??"pending"}}},RZ=Object.freeze(Object.defineProperty({__proto__:null,emailService:oo},Symbol.toStringTag,{value:"Module"}));async function DZ(e=20,t){if(!rr())return[];let r=Se.from("asis_command_logs").select("*").order("created_at",{ascending:!1}).limit(e);t&&(r=r.eq("executed_by",t));const{data:n,error:a}=await r;return a?(console.error("fetchCommandLogs error:",a.message),[]):n||[]}async function IZ(e){if(!rr())return null;const{data:t,error:r}=await Se.from("asis_command_logs").insert(e).select().single();return r?(console.error("createCommandLog error:",r.message),null):t}async function MZ(e){if(!rr()||!e)return null;const t=[e,e.replace(/-/g,""),e.replace(/\./g,"").replace(/-/g,"")];for(const r of t){const{data:n,error:a}=await Se.from("staff").select("id, rut, nombre, cargo, terminal_code, horario, status").or(`rut.eq.${r},rut.ilike.%${r}%`).limit(1).single();if(n&&!a)return n}return null}async function FZ(e,t,r,n,a){if(!rr())return{success:!1,error:"Supabase no configurado"};const{data:i,error:s}=await Se.from("staff").select("*").eq("id",e).single();if(s||!i)return{success:!1,error:"Personal no encontrado"};const l=new Date(t+"T12:00:00"),c=new Date(r+"T12:00:00");let u=0,d=0;const f=new Date(l);for(;f<=c;){u++;const h=f.getDay();h!==0&&h!==6&&d++,f.setDate(f.getDate()+1)}const{error:p}=await Se.from("attendance_vacaciones").insert({staff_id:e,rut:i.rut,nombre:i.nombre,cargo:i.cargo,terminal_code:i.terminal_code,turno:i.turno||"DIA",start_date:t,end_date:r,return_date:r,calendar_days:u,business_days:d,note:n,created_by_supervisor:a,auth_status:"PENDIENTE"});if(p)return{success:!1,error:p.message};try{await oo.sendEmail({audience:"manual",manualRecipients:["rrhh@informacionasiss.cl"],subject:`Solicitud de Vacaciones - ${i.nombre}`,body:`Se ha generado una SOLICITUD DE VACACIONES:

Nombre: ${i.nombre}
RUT: ${i.rut}
Cargo: ${i.cargo}
Terminal: ${i.terminal_code}

Desde: ${t}
Hasta: ${r}
Das Hbiles: ${d}
Das Corridos: ${u}

Nota: ${n}

Solicitado por: ${a}
Estado: PENDIENTE DE APROBACIN

Sistema Asis Command`,module:"asistencia"})}catch(h){console.error("Error sending vacation email:",h)}return{success:!0}}async function $Z(e,t,r,n,a){if(!rr())return{success:!1,error:"Supabase no configurado"};const{error:i}=await Se.from("attendance_licenses").insert({staff_id:e,start_date:t,end_date:r,note:n,created_by:a});return i?{success:!1,error:i.message}:{success:!0}}async function BZ(e,t,r,n,a,i){if(!rr())return{success:!1,error:"Supabase no configurado"};const{error:s}=await Se.from("attendance_permissions").insert({staff_id:e,start_date:t,end_date:r,permission_type:n,note:a,created_by:i});return s?{success:!1,error:s.message}:{success:!0}}async function uO(e,t,r,n,a,i,s){if(!rr())return{success:!1,error:"Supabase no configurado"};const l=n==="LLEGADA"?"ENTRADA":"SALIDA",{error:c}=await Se.from("attendance_autorizaciones").insert({rut:t.rut,nombre:t.nombre,cargo:t.cargo,terminal_code:t.terminal_code,turno:t.horario.split(" ")[0]||"DIA",horario:t.horario,authorization_date:r,entry_or_exit:l,motivo:i,created_by_supervisor:s,auth_status:"AUTORIZADO",authorized_by:s,authorized_at:new Date().toISOString()});return c?{success:!1,error:c.message}:{success:!0}}async function UZ(e,t,r,n,a){if(!rr())return{success:!1,error:"Supabase no configurado"};const{error:i}=await Se.from("attendance_cambios_dia").insert({rut:e.rut,nombre:e.nombre,terminal_code:e.terminal_code,date:new Date().toISOString().split("T")[0],day_off_date:t,day_on_date:r,document_path:`Motivo: ${n}`,created_by_supervisor:a,auth_status:"PENDIENTE"});return i?{success:!1,error:i.message}:{success:!0}}async function zZ(e,t,r,n){if(!rr())return{success:!1,error:"Supabase no configurado"};const{error:a}=await Se.from("attendance_no_marcaciones").insert({rut:e.rut,nombre:e.nombre,terminal_code:e.terminal_code,date:t,observations:r,incident_state:"INFORMADA",created_by_supervisor:n,auth_status:"PENDIENTE"});return a?{success:!1,error:a.message}:{success:!0}}async function qZ(e,t,r,n){if(!rr())return{success:!1,error:"Supabase no configurado"};const{error:a}=await Se.from("attendance_sin_credenciales").insert({rut:e.rut,nombre:e.nombre,terminal_code:e.terminal_code,date:t,observacion:r,cargo:e.cargo,created_by_supervisor:n,auth_status:"PENDIENTE"});return a?{success:!1,error:a.message}:{success:!0}}const Ny={VACACIONES:"Vacaciones",LICENCIA:"Licencia Mdica",PERMISO:"Permiso",AUTORIZACION_LLEGADA:"Autorizacin Llegada Tarda",AUTORIZACION_SALIDA:"Autorizacin Salida Anticipada",CAMBIO_DIA:"Cambio de Da",NO_MARCACION:"No Marcacin",SIN_CREDENCIAL:"Sin Credencial",UNKNOWN:"Comando no reconocido"},HZ={VACACIONES:"attendance_vacaciones",LICENCIA:"attendance_licenses",PERMISO:"attendance_permissions",AUTORIZACION_LLEGADA:"attendance_autorizaciones",AUTORIZACION_SALIDA:"attendance_autorizaciones",CAMBIO_DIA:"attendance_cambios_dia",NO_MARCACION:"attendance_no_marcaciones",SIN_CREDENCIAL:"attendance_sin_credenciales",UNKNOWN:null},WZ=[{label:"Vacaciones",template:"vacaciones para [RUT] desde [fecha] por [das] das",intent:"VACACIONES"},{label:"Licencia",template:"licencia para [RUT] desde [fecha] hasta [fecha]",intent:"LICENCIA"},{label:"Permiso",template:"permiso para [RUT] el [fecha] de [hora] a [hora]",intent:"PERMISO"},{label:"Llegada tarda",template:"llegada tarda [RUT] el [fecha] a las [hora]",intent:"AUTORIZACION_LLEGADA"},{label:"Salida anticipada",template:"salida anticipada [RUT] el [fecha] a las [hora]",intent:"AUTORIZACION_SALIDA"},{label:"Cambio de da",template:"cambio de da [RUT] del [da] al [da]",intent:"CAMBIO_DIA"}];function qg(e){if(!e)return"";let t=e.replace(/\./g,"").replace(/\s/g,"").toUpperCase();return!t.includes("-")&&t.length>1&&(t=t.slice(0,-1)+"-"+t.slice(-1)),t}function dO(e){const r=qg(e).match(/^(\d{7,8})-?([\dkK])$/i);if(!r)return!1;const n=r[1],a=r[2].toUpperCase();let i=0,s=2;for(let u=n.length-1;u>=0;u--)i+=parseInt(n[u],10)*s,s=s===7?2:s+1;const l=i%11,c=l===0?"0":l===1?"K":String(11-l);return a===c}function VZ(e){if(!e)return null;const t=[/\b(\d{1,2}\.?\d{3}\.?\d{3}-?[\dkK])\b/gi,/\brut\s*:?\s*(\d{1,2}\.?\d{3}\.?\d{3}-?[\dkK])\b/gi,/\bpara\s+(\d{1,2}\.?\d{3}\.?\d{3}-?[\dkK])\b/gi];for(const a of t){const i=e.matchAll(a);for(const s of i){const l=s[1],c=qg(l);if(dO(c))return c}}const r=/\b(\d{7,8})[\s-]?([\dkK])\b/gi,n=e.matchAll(r);for(const a of n){const i=a[1]+"-"+a[2];if(dO(i))return qg(i)}return null}function GZ(e){const r=qg(e).match(/^(\d+)-?([\dkK])$/i);if(!r)return e;const n=r[1],a=r[2];return`${n.replace(/\B(?=(\d{3})+(?!\d))/g,".")}-${a}`}function au(e){const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`}function R5(e,t){const r=new Date(e);return r.setDate(r.getDate()+t),r}function KZ(e){const t=new Date(e);return t.setHours(0,0,0,0),t}const YZ=()=>KZ(new Date),XZ={enero:0,febrero:1,marzo:2,abril:3,mayo:4,junio:5,julio:6,agosto:7,septiembre:8,octubre:9,noviembre:10,diciembre:11,ene:0,feb:1,mar:2,abr:3,may:4,jun:5,jul:6,ago:7,sep:8,oct:9,nov:10,dic:11};function fO(e,t){const r=new Date(e),n=r.getDay();let a=t-n;return a<=0&&(a+=7),r.setDate(r.getDate()+a),r}const JZ={domingo:0,lunes:1,martes:2,mircoles:3,miercoles:3,jueves:4,viernes:5,sbado:6,sabado:6};function Ad(e){if(!e)return null;const t=e.toLowerCase().trim(),r=YZ();if(/\bhoy\b/.test(t))return au(r);if(/\bma[n]ana\b/.test(t))return au(R5(r,1));if(/\bpasado\s+ma[n]ana\b/.test(t))return au(R5(r,2));for(const[l,c]of Object.entries(JZ)){if(new RegExp(`\\bpr[o]ximo\\s+${l}\\b`,"i").test(t)){let u=fO(r,c);return(u.getTime()-r.getTime())/(1e3*60*60*24)<1&&(u=R5(u,7)),au(u)}if(new RegExp(`\\b(el|este)\\s+${l}\\b`,"i").test(t)||new RegExp(`\\b${l}\\b`).test(t))return au(fO(r,c))}const n=t.match(/\b(\d{4})-(\d{2})-(\d{2})\b/);if(n)return n[0];const a=t.match(/\b(\d{1,2})\s+de\s+(\w+)(?:\s+de\s+(\d{4}))?\b/);if(a){const l=parseInt(a[1],10),c=a[2],u=XZ[c];if(u!==void 0){let d=a[3]?parseInt(a[3],10):r.getFullYear();const f=new Date(d,u,l);return!a[3]&&f<r&&(d+=1),au(new Date(d,u,l))}}const i=t.match(/\b(\d{1,2})[\/\-.](\d{1,2})[\/\-.](\d{2,4})\b/);if(i){const l=parseInt(i[1],10),c=parseInt(i[2],10)-1;let u=parseInt(i[3],10);return u<100&&(u+=2e3),au(new Date(u,c,l))}const s=t.match(/\b(\d{1,2})[\/\-.](\d{1,2})\b/);if(s){const l=parseInt(s[1],10),c=parseInt(s[2],10)-1;let u=r.getFullYear();return new Date(u,c,l)<r&&(u+=1),au(new Date(u,c,l))}return null}function QZ(e){if(!e)return{startDate:null,endDate:null};const t=e.toLowerCase(),r=t.match(/desde\s+(.+?)\s+hasta\s+(.+?)(?:\s|$)/);if(r)return{startDate:Ad(r[1]),endDate:Ad(r[2])};const n=t.match(/del?\s+(.+?)\s+al?\s+(.+?)(?:\s|$)/);if(n)return{startDate:Ad(n[1]),endDate:Ad(n[2])};const a=t.match(/desde\s+(.+?)(?:\s+por|\s+durante|$)/);if(a)return{startDate:Ad(a[1]),endDate:null};const i=t.match(/\bel\s+(.+?)(?:\s+a\s+las|\s+motivo|$)/);if(i){const l=Ad(i[1]);return{startDate:l,endDate:l}}return{startDate:Ad(e),endDate:null}}function D5(e){if(!e)return null;const t=e.toLowerCase(),r=t.match(/\b(\d{1,2}):(\d{2})\b/);if(r){const a=parseInt(r[1],10),i=parseInt(r[2],10);if(a>=0&&a<=23&&i>=0&&i<=59)return`${a.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`}const n=t.match(/a\s+las?\s+(\d{1,2})(?:\s*(?:hrs?|horas?))?/);if(n){const a=parseInt(n[1],10);if(a>=0&&a<=23)return`${a.toString().padStart(2,"0")}:00`}return null}function ZZ(e){if(!e)return{startTime:null,endTime:null};const t=e.toLowerCase(),r=t.match(/(\d{1,2}:\d{2})\s*[-a]\s*(\d{1,2}:\d{2})/);if(r)return{startTime:D5(r[1]),endTime:D5(r[2])};const n=t.match(/de\s+(\d{1,2})\s+a\s+(\d{1,2})/);if(n){const i=parseInt(n[1],10),s=parseInt(n[2],10);if(i>=0&&i<=23&&s>=0&&s<=23)return{startTime:`${i.toString().padStart(2,"0")}:00`,endTime:`${s.toString().padStart(2,"0")}:00`}}return{startTime:D5(e),endTime:null}}function eee(e){const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`}function tee(e){if(!e)return null;const t=e.toLowerCase(),r=t.match(/(?:por|durante)?\s*(\d+)\s*d[i]as?/i);if(r)return parseInt(r[1],10);const n=t.match(/(?:por|durante)?\s*(?:una|(\d+))\s*semanas?/i);if(n)return(n[1]?parseInt(n[1],10):1)*7;const a=t.match(/(?:por|durante)?\s*(?:un|(\d+))\s*mes(?:es)?/i);return a?(a[1]?parseInt(a[1],10):1)*30:null}function ree(e,t){const r=new Date(e+"T12:00:00");return r.setDate(r.getDate()+t-1),eee(r)}const nee=[{intent:"VACACIONES",patterns:[/\bvacaciones\b/i,/\bvacaci[o]n\b/i,/\bferiado\s+legal\b/i],priority:10},{intent:"LICENCIA",patterns:[/\blicencia\b/i,/\blicencia\s+m[e]dica\b/i,/\blic\.\s*m[e]dica\b/i],priority:10},{intent:"PERMISO",patterns:[/\bpermiso\b/i,/\bpermiso\s+administrativo\b/i,/\bpermiso\s+personal\b/i],priority:9},{intent:"AUTORIZACION_LLEGADA",patterns:[/\bllegada\s+tard[i]a\b/i,/\bautorizaci[o]n\s+(?:de\s+)?llegada\b/i,/\blleg[o]\s+tarde\b/i,/\batraso\b/i,/\bentrada\s+tard[i]a\b/i],priority:8},{intent:"AUTORIZACION_SALIDA",patterns:[/\bsalida\s+anticipada\b/i,/\bautorizaci[o]n\s+(?:de\s+)?salida\b/i,/\bsalir\s+temprano\b/i,/\bsalir\s+antes\b/i,/\bretiro\s+anticipado\b/i],priority:8},{intent:"CAMBIO_DIA",patterns:[/\bcambio\s+de\s+d[i]a\b/i,/\bcambiar\s+(?:el\s+)?d[i]a\b/i,/\bintercambio\s+de\s+d[i]a\b/i,/\bmover\s+(?:el\s+)?turno\b/i],priority:7},{intent:"NO_MARCACION",patterns:[/\bno\s+marcaci[o]n\b/i,/\bno\s+marc[o]\b/i,/\bsin\s+marcaci[o]n\b/i,/\bolvid[o]\s+marcar\b/i,/\bfalt[o]\s+marca\b/i],priority:6},{intent:"SIN_CREDENCIAL",patterns:[/\bsin\s+credencial\b/i,/\bolvid[o]\s+(?:la\s+)?credencial\b/i,/\bno\s+tiene\s+credencial\b/i,/\bcredencial\s+olvidada\b/i],priority:5}];function aee(e){var n,a;if(!e)return{intent:"UNKNOWN",confidence:0};const t=e.toLowerCase(),r=[...nee].sort((i,s)=>s.priority-i.priority);for(const{intent:i,patterns:s}of r)for(const l of s)if(l.test(t)){const c=((a=(n=t.match(l))==null?void 0:n[0])==null?void 0:a.length)??0,u=Math.min(.9+c/e.length*.1,1);return{intent:i,confidence:u}}return{intent:"UNKNOWN",confidence:0}}function iee(e){if(!e)return null;const t=e.toLowerCase(),r=t.match(/(?:por\s+)?motivo\s*:?\s*(?:de\s+)?(.+?)(?:\.|$)/i);if(r)return r[1].trim();const n=t.match(/raz[o]n\s*:?\s*(.+?)(?:\.|$)/i);if(n)return n[1].trim();const a=t.match(/nota\s*:?\s*(.+?)(?:\.|$)/i);return a?a[1].trim():null}function see(e){const t=[],{intent:r,confidence:n}=aee(e),a=VZ(e),i=a?qg(a):null;!i&&r!=="UNKNOWN"&&t.push("No se encontr un RUT vlido en el comando");const{startDate:s,endDate:l}=QZ(e);!s&&r!=="UNKNOWN"&&t.push("No se pudo determinar la fecha de inicio");const c=tee(e);let u=l;s&&c?u=ree(s,c):s&&!u&&(u=s);const{startTime:d,endTime:f}=ZZ(e),p=iee(e);return{intent:r,rut:a,rutNormalized:i,startDate:s,endDate:u,startTime:d,endTime:f,durationDays:c,reason:p,rawText:e,confidence:n,errors:t,isValid:t.length===0}}function oee(e){const t=[...e.errors];return e.intent==="UNKNOWN"&&t.push("No se reconoci el tipo de comando. Intenta con: vacaciones, licencia, permiso, llegada tarda, salida anticipada"),e.rutNormalized||t.push("Se requiere un RUT vlido"),e.startDate||t.push("Se requiere una fecha de inicio"),(e.intent==="VACACIONES"||e.intent==="LICENCIA")&&(e.endDate||t.push('Se requiere una fecha de trmino o duracin (ej: "por 5 das")')),(e.intent==="AUTORIZACION_LLEGADA"||e.intent==="AUTORIZACION_SALIDA")&&(e.startTime||t.push('Se requiere una hora (ej: "a las 09:30")')),{isValid:t.length===0,errors:t}}const QF={logs:e=>["asisCommand","logs",e],emailSettings:()=>["asisCommand","emailSettings"],person:e=>["asisCommand","person",e]},lee=e=>Mt({queryKey:QF.logs(e),queryFn:()=>DZ(20,e),staleTime:3e4}),cee=e=>Mt({queryKey:QF.person(e||""),queryFn:()=>e?MZ(e):null,enabled:!!e}),uee=()=>{const e=St();return Et({mutationFn:IZ,onSuccess:()=>{e.invalidateQueries({queryKey:["asisCommand","logs"]})}})},dee=()=>{const e=St(),t=uee();return Et({mutationFn:async({parsed:r,person:n,executedBy:a,terminalCode:i})=>{let s;switch(r.intent){case"VACACIONES":s=await FZ(n.id,r.startDate,r.endDate,r.reason||"Registrado via Asis Command",a);break;case"LICENCIA":s=await $Z(n.id,r.startDate,r.endDate,r.reason||"Registrado via Asis Command",a);break;case"PERMISO":s=await BZ(n.id,r.startDate,r.endDate,"PERSONAL",r.reason||"Registrado via Asis Command",a);break;case"AUTORIZACION_LLEGADA":s=await uO(n.id,n,r.startDate,"LLEGADA",r.startTime||"00:00",r.reason||"Llegada Tarde",a);break;case"AUTORIZACION_SALIDA":s=await uO(n.id,n,r.startDate,"SALIDA",r.startTime||"00:00",r.reason||"Salida Anticipada",a);break;case"CAMBIO_DIA":const l=r.startDate,c=r.endDate&&r.endDate!==r.startDate?r.endDate:r.startDate;s=await UZ(n,l,c,r.reason||"Cambio solicitado",a);break;case"NO_MARCACION":s=await zZ(n,r.startDate,r.reason||"No marc asistencia",a);break;case"SIN_CREDENCIAL":s=await qZ(n,r.startDate,r.reason||"Sin credencial fsica",a);break;default:s={success:!1,error:`Intent ${r.intent} no implementado an`}}if(await t.mutateAsync({command_text:r.rawText,parsed_intent:r.intent,payload_json:{person:{id:n.id,rut:n.rut,nombre:n.nombre},startDate:r.startDate,endDate:r.endDate,reason:r.reason},executed_by:a,terminal_code:i,status:s.success?"OK":"ERROR",error_message:s.error}),!s.success)throw new Error(s.error);return s},onSuccess:()=>{e.invalidateQueries({queryKey:["asistencia2026"]})}})};function fee(e,t){const{isValid:r}=oee(e),n=[];(t==null?void 0:t.status)==="DESVINCULADO"&&n.push("Esta persona est DESVINCULADA del sistema");let i=Ny[e.intent];return e.startDate&&e.endDate&&e.startDate!==e.endDate?i+=` del ${e.startDate} al ${e.endDate}`:e.startDate&&(i+=` el ${e.startDate}`),e.startTime&&(i+=` a las ${e.startTime}`),{parsedCommand:e,person:t,personNotFound:e.rutNormalized!==null&&t===null,action:i,targetTable:HZ[e.intent],emailRecipients:[],warnings:n,canExecute:r&&t!==null&&t.status!=="DESVINCULADO"}}const hee=({isOpen:e,onClose:t})=>{const r=_r(T=>T.session),n=Xt(T=>T.context),[a,i]=D.useState(""),[s,l]=D.useState(null),[c,u]=D.useState(null),[d,f]=D.useState(!1),[p,h]=D.useState(null),[g,m]=D.useState(null),x=D.useRef(null),{data:y=[]}=lee(r==null?void 0:r.supervisorName),{data:v,isLoading:b}=cee((s==null?void 0:s.rutNormalized)||null),N=dee();D.useEffect(()=>{e&&x.current&&setTimeout(()=>{var T;return(T=x.current)==null?void 0:T.focus()},300)},[e]),D.useEffect(()=>{if(a.trim().length>5){const T=see(a);l(T)}else l(null),u(null)},[a]),D.useEffect(()=>{if(s){const T=fee(s,v||null);u(T)}},[s,v]);const _=T=>{var P;i(T),(P=x.current)==null||P.focus()},E=()=>{!(c!=null&&c.canExecute)||!v||!r||f(!0)},j=async()=>{if(!(!s||!v||!r)){m(null),h(null);try{await N.mutateAsync({parsed:s,person:v,executedBy:r.supervisorName,terminalCode:String(n??"")}),h(`${Ny[s.intent]} registrado correctamente para ${v.nombre}`),i(""),l(null),u(null),f(!1),setTimeout(()=>h(null),5e3)}catch(T){m(T instanceof Error?T.message:"Error al ejecutar comando")}}},A=()=>{f(!1),m(null)};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`
                    fixed inset-0 bg-black/30 z-40
                    transition-opacity duration-300
                    ${e?"opacity-100":"opacity-0 pointer-events-none"}
                `,onClick:t}),o.jsxs("div",{className:`
                    fixed top-0 right-0 h-full z-50
                    w-full sm:w-[400px] max-w-full
                    bg-white shadow-2xl
                    transform transition-transform duration-300 ease-out
                    ${e?"translate-x-0":"translate-x-full"}
                    flex flex-col
                `,children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-slate-50",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Z,{name:"settings",className:"w-5 h-5 text-slate-700"}),o.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Asis Command"})]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-200 rounded-lg transition-colors",children:o.jsx(Z,{name:"x",className:"w-5 h-5"})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[p&&o.jsxs("div",{className:"p-3 bg-emerald-50 border border-emerald-200 rounded-lg text-emerald-800 text-sm flex items-start gap-2",children:[o.jsx(Z,{name:"check-circle",className:"w-5 h-5 flex-shrink-0 mt-0.5"}),o.jsx("span",{children:p})]}),g&&o.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm flex items-start gap-2",children:[o.jsx(Z,{name:"alert-circle",className:"w-5 h-5 flex-shrink-0 mt-0.5"}),o.jsx("span",{children:g})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xs font-medium text-slate-500 uppercase mb-2",children:"Acciones rpidas"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:WZ.map(T=>o.jsx("button",{onClick:()=>_(T.template),className:"px-3 py-1.5 text-sm bg-slate-100 hover:bg-slate-200 rounded-full transition-colors",children:T.label},T.label))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase mb-2 block",children:"Escribe tu comando"}),o.jsx("textarea",{ref:x,value:a,onChange:T=>i(T.target.value),placeholder:"Ej: vacaciones para 18866264-1 desde el lunes por 5 das",className:"w-full p-3 border border-slate-300 rounded-lg resize-none focus:ring-2 focus:ring-slate-500 focus:border-transparent",rows:3}),s&&!s.isValid&&o.jsx("div",{className:"animate-fade-in-up",children:o.jsxs("div",{className:"flex gap-2 mt-2 overflow-x-auto pb-2",children:[!s.startDate&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-xs text-slate-400 py-1",children:"Sugerencias:"}),o.jsx("button",{onClick:()=>i(T=>`${T} hoy`),className:"px-2 py-0.5 text-xs bg-indigo-50 text-indigo-700 rounded-md border border-indigo-100 hover:bg-indigo-100 transition-colors",children:"Hoy"}),o.jsx("button",{onClick:()=>i(T=>`${T} maana`),className:"px-2 py-0.5 text-xs bg-indigo-50 text-indigo-700 rounded-md border border-indigo-100 hover:bg-indigo-100 transition-colors",children:"Maana"}),o.jsx("button",{onClick:()=>i(T=>`${T} el lunes`),className:"px-2 py-0.5 text-xs bg-indigo-50 text-indigo-700 rounded-md border border-indigo-100 hover:bg-indigo-100 transition-colors",children:"El lunes"})]}),s.startDate&&!s.durationDays&&!s.endDate&&["VACACIONES","LICENCIA"].includes(s.intent)&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>i(T=>`${T} por 1 da`),className:"px-2 py-0.5 text-xs bg-indigo-50 text-indigo-700 rounded-md border border-indigo-100 hover:bg-indigo-100 transition-colors",children:"1 da"}),o.jsx("button",{onClick:()=>i(T=>`${T} por 5 das`),className:"px-2 py-0.5 text-xs bg-indigo-50 text-indigo-700 rounded-md border border-indigo-100 hover:bg-indigo-100 transition-colors",children:"5 das"})]})]})})]}),c&&s&&s.intent!=="UNKNOWN"&&o.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl shadow-sm space-y-3 animate-slide-up",children:[o.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-slate-100",children:[o.jsxs("h3",{className:"font-medium text-slate-800 flex items-center gap-2",children:[o.jsx(Z,{name:"file-text",className:"w-4 h-4 text-indigo-500"}),"Vista previa"]}),o.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full font-medium transition-all duration-300 ${c.canExecute?"bg-emerald-100 text-emerald-700 shadow-sm":"bg-amber-50 text-amber-700"}`,children:c.canExecute?"Listo para ejecutar":"Faltan datos"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-y-3 gap-x-4 text-sm mt-2",children:[o.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[o.jsx("span",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider block mb-0.5",children:"Accin"}),o.jsx("div",{className:"font-medium text-slate-800 bg-slate-50 px-2 py-1 rounded inline-block",children:Ny[s.intent]})]}),o.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[o.jsx("span",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider block mb-0.5",children:"RUT"}),o.jsx("div",{className:"font-mono text-slate-700",children:s.rutNormalized?GZ(s.rutNormalized):o.jsx("span",{className:"text-slate-300",children:"-"})})]}),v?o.jsx(o.Fragment,{children:o.jsxs("div",{className:"col-span-2 bg-indigo-50/50 p-2 rounded-lg border border-indigo-50 flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold text-xs",children:v.nombre.charAt(0)}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-slate-800 text-sm",children:v.nombre}),o.jsx("div",{className:"text-xs text-indigo-600 font-medium",children:v.cargo})]})]})}):b&&o.jsxs("div",{className:"col-span-2 text-slate-500 flex items-center gap-2 py-2 animate-pulse",children:[o.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-slate-300 border-t-indigo-500 animate-spin"}),"Buscando persona..."]}),c.personNotFound&&o.jsxs("div",{className:"col-span-2 p-2 bg-red-50 text-red-700 text-xs rounded-lg border border-red-100 flex items-center gap-2",children:[o.jsx(Z,{name:"user-x",className:"w-4 h-4"}),"No encontramos a esta persona en la base de datos."]}),o.jsxs("div",{className:"col-span-2 grid grid-cols-2 gap-4 pt-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider block mb-0.5",children:"Desde"}),o.jsx("div",{className:"text-slate-800",children:s.startDate||o.jsx("span",{className:"text-slate-300",children:"-"})}),s.startTime&&o.jsx("div",{className:"text-xs text-slate-500 mt-0.5",children:s.startTime})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider block mb-0.5",children:"Hasta"}),o.jsx("div",{className:"text-slate-800",children:s.endDate||o.jsx("span",{className:"text-slate-300",children:"-"})}),s.endTime&&o.jsx("div",{className:"text-xs text-slate-500 mt-0.5",children:s.endTime})]})]}),s.durationDays&&o.jsx("div",{className:"col-span-2 pt-1",children:o.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2 py-1 bg-slate-100 text-slate-600 rounded text-xs font-medium",children:[o.jsx(Z,{name:"clock",className:"w-3 h-3"}),"Duracin: ",s.durationDays," das"]})})]}),s.errors.length>0&&o.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-100 rounded-lg space-y-1",children:s.errors.map((T,P)=>o.jsxs("div",{className:"flex items-center gap-2 text-xs text-red-700 font-medium",children:[o.jsx(Z,{name:"x-circle",className:"w-3.5 h-3.5"}),T]},P))}),c.warnings.length>0&&o.jsx("div",{className:"mt-3 p-3 bg-amber-50 border border-amber-100 rounded-lg space-y-1",children:c.warnings.map((T,P)=>o.jsxs("div",{className:"flex items-center gap-2 text-xs text-amber-700 font-medium",children:[o.jsx(Z,{name:"alert-triangle",className:"w-3.5 h-3.5"}),T]},P))}),!d&&o.jsx("button",{onClick:E,disabled:!c.canExecute||N.isPending,className:`
                                        w-full py-3 rounded-xl font-semibold shadow-sm transition-all duration-200 transform active:scale-[0.98]
                                        ${c.canExecute?"bg-indigo-600 text-white hover:bg-indigo-700 shadow-indigo-200 hover:shadow-indigo-300":"bg-slate-100 text-slate-400 cursor-not-allowed"}
                                        flex items-center justify-center gap-2 mt-4
                                    `,children:N.isPending?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Procesando..."]}):o.jsxs(o.Fragment,{children:["Ejecutar Comando ",o.jsx(Z,{name:"chevron-right",className:"w-4 h-4"})]})}),d&&o.jsxs("div",{className:"flex gap-3 mt-4 animate-fade-in",children:[o.jsx("button",{onClick:A,className:"flex-1 py-3 rounded-xl font-medium border border-slate-200 text-slate-600 hover:bg-slate-50 hover:text-slate-800 transition-colors",children:"Cancelar"}),o.jsx("button",{onClick:j,disabled:N.isPending,className:"flex-1 py-3 rounded-xl font-semibold bg-emerald-600 text-white hover:bg-emerald-700 shadow-lg shadow-emerald-200 hover:shadow-emerald-300 transition-all transform active:scale-[0.98] flex items-center justify-center gap-2",children:N.isPending?"Guardando...":"Confirmar Todo"})]})]}),y.length>0&&!s&&o.jsxs("div",{className:"animate-fade-in delay-100",children:[o.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 px-1",children:"Historial reciente"}),o.jsx("div",{className:"space-y-2",children:y.slice(0,8).map(T=>o.jsxs("div",{className:"group p-3 bg-white border border-slate-100 rounded-xl cursor-pointer hover:border-indigo-200 hover:shadow-md hover:shadow-indigo-50 transition-all duration-200",onClick:()=>i(T.command_text),children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"font-medium text-slate-700 group-hover:text-indigo-700 transition-colors",children:T.parsed_intent?Ny[T.parsed_intent]:"Comando"}),o.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded-full ${T.status==="OK"?"bg-emerald-50 text-emerald-600":"bg-red-50 text-red-600"}`,children:T.status==="OK"?"EXITOSO":"FALLIDO"})]}),o.jsx("div",{className:"text-xs text-slate-500 truncate font-mono bg-slate-50 p-1.5 rounded group-hover:bg-indigo-50/50 transition-colors",children:T.command_text})]},T.id))})]})]}),o.jsx("div",{className:"p-4 border-t bg-slate-50/80 backdrop-blur-sm text-center",children:o.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Asis Command AI v1.0  Escribe en lenguaje natural"})})]})]})},pee=()=>{const[e,t]=D.useState(!1),r=()=>{t(a=>!a)},n=()=>{t(!1)};return o.jsxs(o.Fragment,{children:[o.jsx(cJ,{onClick:r,isOpen:e}),o.jsx(hee,{isOpen:e,onClose:n})]})},mee=()=>{const[e,t]=D.useState(!1);return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-slate-100 to-slate-50",children:[o.jsxs("div",{className:"flex",children:[o.jsx(aJ,{isOpen:e,onClose:()=>t(!1)}),o.jsxs("div",{className:"flex min-h-screen flex-1 flex-col md:ml-72",children:[o.jsx(lJ,{onMenuToggle:()=>t(r=>!r)}),o.jsx("main",{className:"flex-1 px-4 pb-8 pt-6 md:px-8",children:o.jsx("div",{className:"animate-fade-in",children:o.jsx(PM,{})})}),o.jsx("footer",{className:"border-t border-slate-200 bg-white/50 px-4 py-4 md:px-8",children:o.jsxs("div",{className:"flex flex-col items-center justify-between gap-2 text-xs text-slate-500 sm:flex-row",children:[o.jsx("p",{children:" 2024 Asiss  Dashboard de Operaciones y Logstica"}),o.jsxs("p",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-success-500 animate-pulse"}),"Sistema operativo"]})]})})]})]}),o.jsx(pee,{})]})},Bn=({label:e="Cargando..."})=>o.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"h-12 w-12 rounded-full border-[3px] border-slate-200"}),o.jsx("div",{className:"absolute inset-0 h-12 w-12 rounded-full border-[3px] border-transparent border-t-brand-500 animate-spin"})]}),o.jsx("p",{className:"mt-4 text-sm font-medium text-slate-600",children:e})]}),bn=({title:e,description:t,actions:r})=>o.jsxs("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 md:text-3xl",children:e}),t&&o.jsx("p",{className:"mt-1 text-sm text-slate-500",children:t})]}),r&&o.jsx("div",{className:"flex flex-wrap items-center gap-3",children:r})]}),gee=({value:e,onChange:t,label:r="Terminal actual"})=>{const n=e.mode==="ALL"?"ALL":e.mode==="GROUP"?`GROUP:${e.value}`:`TERMINAL:${e.value}`,a=i=>{const s=i.target.value;if(s==="ALL"){t(RM);return}if(s.startsWith("GROUP:")){const c=s.replace("GROUP:","");t({mode:"GROUP",value:c});return}const l=s.replace("TERMINAL:","");t({mode:"TERMINAL",value:l})};return o.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-600",children:[o.jsx("span",{className:"mb-1",children:r}),o.jsxs("select",{value:n,onChange:a,className:"input min-w-[200px]","aria-label":"Selector de terminal",children:[o.jsx("option",{value:"ALL",children:"Todos"}),o.jsx("optgroup",{label:"Terminales",children:ns.map(i=>o.jsx("option",{value:`TERMINAL:${i.value}`,children:i.label},i.value))}),o.jsx("optgroup",{label:"Grupos",children:tJ.map(i=>o.jsx("option",{value:`GROUP:${i.value}`,children:i.label},i.value))})]})]})},Fs=({terminalContext:e,onTerminalChange:t,children:r})=>o.jsx("div",{className:"card p-4 mb-6",children:o.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(gee,{value:e,onChange:t})}),r&&o.jsx("div",{className:"flex flex-wrap items-end gap-3 border-t border-slate-100 pt-4 lg:border-0 lg:pt-0",children:r})]})}),ri=({message:e="Ha ocurrido un error",onRetry:t})=>o.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border border-danger-200 bg-danger-50/50 px-6 py-12 text-center",children:[o.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-danger-100 mb-4",children:o.jsx("svg",{className:"h-7 w-7 text-danger-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})})}),o.jsx("p",{className:"text-sm font-semibold text-danger-700",children:e}),o.jsx("p",{className:"mt-1 text-xs text-danger-600 max-w-xs",children:"Por favor intenta de nuevo o contacta soporte si el problema persiste."}),t&&o.jsxs("button",{onClick:t,className:"mt-4 btn btn-secondary text-danger-700 border-danger-300 hover:bg-danger-100",children:[o.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reintentar"]})]}),Ma=({onExportView:e,onExportAll:t})=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:e,className:"btn btn-secondary text-sm",children:[o.jsx(Z,{name:"clipboard",size:16}),o.jsx("span",{className:"hidden sm:inline",children:"Exportar Vista"}),o.jsx("span",{className:"sm:hidden",children:"Vista"})]}),o.jsxs("button",{onClick:t,className:"btn btn-primary text-sm",children:[o.jsx(Z,{name:"layers",size:16}),o.jsx("span",{className:"hidden sm:inline",children:"Exportar Todo"}),o.jsx("span",{className:"sm:hidden",children:"Todo"})]})]});/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var pb={};pb.version="0.18.5";var ZF=1252,vee=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],e$=function(e){vee.indexOf(e)!=-1&&(ZF=e)};function xee(){e$(1252)}var Hg=function(e){e$(e)};function yee(){Hg(1200),xee()}var T1=function(t){return String.fromCharCode(t)},hO=function(t){return String.fromCharCode(t)},mb,Cu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Wg(e){for(var t="",r=0,n=0,a=0,i=0,s=0,l=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),i=r>>2,n=e.charCodeAt(u++),s=(r&3)<<4|n>>4,a=e.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),t+=Cu.charAt(i)+Cu.charAt(s)+Cu.charAt(l)+Cu.charAt(c);return t}function Ac(e){var t="",r=0,n=0,a=0,i=0,s=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)i=Cu.indexOf(e.charAt(u++)),s=Cu.indexOf(e.charAt(u++)),r=i<<2|s>>4,t+=String.fromCharCode(r),l=Cu.indexOf(e.charAt(u++)),n=(s&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=Cu.indexOf(e.charAt(u++)),a=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var Cr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Mc=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function jf(e){return Cr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function pO(e){return Cr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var zo=function(t){return Cr?Mc(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function fw(e){if(typeof ArrayBuffer>"u")return zo(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Kv(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function bee(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}var Xa=Cr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Mc(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function wee(e){for(var t=[],r=0,n=e.length+250,a=jf(e.length+255),i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s<128)a[r++]=s;else if(s<2048)a[r++]=192|s>>6&31,a[r++]=128|s&63;else if(s>=55296&&s<57344){s=(s&1023)+64;var l=e.charCodeAt(++i)&1023;a[r++]=240|s>>8&7,a[r++]=128|s>>2&63,a[r++]=128|l>>6&15|(s&3)<<4,a[r++]=128|l&63}else a[r++]=224|s>>12&15,a[r++]=128|s>>6&63,a[r++]=128|s&63;r>n&&(t.push(a.slice(0,r)),r=0,a=jf(65535),n=65530)}return t.push(a.slice(0,r)),Xa(t)}var ag=/\u0000/g,C1=/[\u0001-\u0006]/g;function i0(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Ho(e,t){var r=""+e;return r.length>=t?r:Mn("0",t-r.length)+r}function C3(e,t){var r=""+e;return r.length>=t?r:Mn(" ",t-r.length)+r}function gb(e,t){var r=""+e;return r.length>=t?r:r+Mn(" ",t-r.length)}function _ee(e,t){var r=""+Math.round(e);return r.length>=t?r:Mn("0",t-r.length)+r}function Nee(e,t){var r=""+e;return r.length>=t?r:Mn("0",t-r.length)+r}var mO=Math.pow(2,32);function mh(e,t){if(e>mO||e<-mO)return _ee(e,t);var r=Math.round(e);return Nee(r,t)}function vb(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var gO=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],I5=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function See(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var $n={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},vO={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},jee={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function xb(e,t,r){for(var n=e<0?-1:1,a=e*n,i=0,s=1,l=0,c=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),l=f*s+i,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),i=s,s=l,c=u,u=d;if(d>t&&(u>t?(d=c,l=i):(d=u,l=s)),!r)return[0,n*l,d];var p=Math.floor(n*l/d);return[p,n*l-p*d,d]}function k1(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),i=0,s=[],l={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)s=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)s=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),s=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),n<60&&(i=(i+6)%7),r&&(i=Pee(c,s))}return l.y=s[0],l.m=s[1],l.d=s[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=i,l}var t$=new Date(1899,11,31,0,0,0),Aee=t$.getTime(),Eee=new Date(1900,2,1,0,0,0);function r$(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Eee&&(r+=24*60*60*1e3),(r-(Aee+(e.getTimezoneOffset()-t$.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function k3(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Tee(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Cee(e){var t=e<0?12:11,r=k3(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function kee(e){var t=k3(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Oee(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Cee(e):t===10?r=e.toFixed(10).substr(0,12):r=kee(e),k3(Tee(r.toUpperCase()))}function wj(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Oee(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Gu(14,r$(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Pee(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Lee(e,t,r,n){var a="",i=0,s=0,l=r.y,c,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return I5[r.m-1][1];case 5:return I5[r.m-1][0];default:return I5[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return gO[r.q][0];default:return gO[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Ho(r.S,t.length):(n>=2?s=n===3?1e3:100:s=n===1?10:1,i=Math.round(s*(r.S+r.u)),i>=60*s&&(i=0),t==="s"?i===0?"0":""+i/s:(a=Ho(i,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?Ho(c,u):"";return d}function ku(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var n$=/%/g;function Ree(e,t,r){var n=t.replace(n$,""),a=t.length-n.length;return mc(e,n,r*Math.pow(10,2*a))+Mn("%",a)}function Dee(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return mc(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function a$(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+a$(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),r.indexOf("e")===-1){var s=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+i):r+="E+"+(s-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+i)%a)+"."+d.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var i$=/# (\?+)( ?)\/( ?)(\d+)/;function Iee(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),i=Math.floor(a/n),s=a-i*n,l=n;return r+(i===0?"":""+i)+" "+(s===0?Mn(" ",e[1].length+1+e[4].length):C3(s,e[1].length)+e[2]+"/"+e[3]+Ho(l,e[4].length))}function Mee(e,t,r){return r+(t===0?"":""+t)+Mn(" ",e[1].length+2+e[4].length)}var s$=/^#*0*\.([0#]+)/,o$=/\).*[0#]/,l$=/\(###\) ###\\?-####/;function Ci(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function xO(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function yO(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Fee(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function $ee(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Ks(e,t,r){if(e.charCodeAt(0)===40&&!t.match(o$)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Ks("n",n,r):"("+Ks("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Dee(e,t,r);if(t.indexOf("%")!==-1)return Ree(e,t,r);if(t.indexOf("E")!==-1)return a$(t,r);if(t.charCodeAt(0)===36)return"$"+Ks(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,s,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+mh(c,t.length);if(t.match(/^[#?]+$/))return a=mh(r,0),a==="0"&&(a=""),a.length>t.length?a:Ci(t.substr(0,t.length-a.length))+a;if(i=t.match(i$))return Iee(i,c,u);if(t.match(/^#+0+$/))return u+mh(c,t.length-t.indexOf("0"));if(i=t.match(s$))return a=xO(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Ci(i[1])).replace(/\.$/,"."+Ci(i[1])).replace(/\.(\d*)$/,function(g,m){return"."+m+Mn("0",Ci(i[1]).length-m.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+xO(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+ku(mh(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Ks(e,t,-r):ku(""+(Math.floor(r)+Fee(r,i[1].length)))+"."+Ho(yO(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Ks(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=i0(Ks(e,t.replace(/[\\-]/g,""),r)),s=0,i0(i0(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return s<a.length?a.charAt(s++):g==="0"?"0":""}));if(t.match(l$))return a=Ks(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(i[4].length,7),l=xb(c,Math.pow(10,s)-1,!1),a=""+u,d=mc("n",i[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+i[2]+"/"+i[3],d=gb(l[2],s),d.length<i[4].length&&(d=Ci(i[4].substr(i[4].length-d.length))+d),a+=d,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(i[1].length,i[4].length),7),l=xb(c,Math.pow(10,s)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?C3(l[1],s)+i[2]+"/"+i[3]+gb(l[2],s):Mn(" ",2*s+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=mh(r,0),t.length<=a.length?a:Ci(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),s=a.indexOf(".");var f=t.indexOf(".")-s,p=t.length-a.length-f;return Ci(t.substr(0,f)+a+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return s=yO(r,i[1].length),r<0?"-"+Ks(e,t,-r):ku($ee(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Ho(0,3-g.length):"")+g})+"."+Ho(s,i[1].length);switch(t){case"###,##0.00":return Ks(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var h=ku(mh(c,0));return h!=="0"?u+h:"";case"###,###.00":return Ks(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Ks(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Bee(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return mc(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Uee(e,t,r){var n=t.replace(n$,""),a=t.length-n.length;return mc(e,n,r*Math.pow(10,2*a))+Mn("%",a)}function c$(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+c$(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),!r.match(/[Ee]/)){var s=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+i):r+="E+"+(s-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+i)%a)+"."+d.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function ul(e,t,r){if(e.charCodeAt(0)===40&&!t.match(o$)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ul("n",n,r):"("+ul("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Bee(e,t,r);if(t.indexOf("%")!==-1)return Uee(e,t,r);if(t.indexOf("E")!==-1)return c$(t,r);if(t.charCodeAt(0)===36)return"$"+ul(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,s,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Ho(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:Ci(t.substr(0,t.length-a.length))+a;if(i=t.match(i$))return Mee(i,c,u);if(t.match(/^#+0+$/))return u+Ho(c,t.length-t.indexOf("0"));if(i=t.match(s$))return a=(""+r).replace(/^([^\.]+)$/,"$1."+Ci(i[1])).replace(/\.$/,"."+Ci(i[1])),a=a.replace(/\.(\d*)$/,function(g,m){return"."+m+Mn("0",Ci(i[1]).length-m.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+ku(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ul(e,t,-r):ku(""+r)+"."+Mn("0",i[1].length);if(i=t.match(/^#,#*,#0/))return ul(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=i0(ul(e,t.replace(/[\\-]/g,""),r)),s=0,i0(i0(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return s<a.length?a.charAt(s++):g==="0"?"0":""}));if(t.match(l$))return a=ul(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(i[4].length,7),l=xb(c,Math.pow(10,s)-1,!1),a=""+u,d=mc("n",i[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+i[2]+"/"+i[3],d=gb(l[2],s),d.length<i[4].length&&(d=Ci(i[4].substr(i[4].length-d.length))+d),a+=d,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(i[1].length,i[4].length),7),l=xb(c,Math.pow(10,s)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?C3(l[1],s)+i[2]+"/"+i[3]+gb(l[2],s):Mn(" ",2*s+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:Ci(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),s=a.indexOf(".");var f=t.indexOf(".")-s,p=t.length-a.length-f;return Ci(t.substr(0,f)+a+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+ul(e,t,-r):ku(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Ho(0,3-g.length):"")+g})+"."+Ho(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var h=ku(""+c);return h!=="0"?u+h:"";default:if(t.match(/\.[0#?]*$/))return ul(e,t.slice(0,t.lastIndexOf(".")),r)+Ci(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function mc(e,t,r){return(r|0)===r?ul(e,t,r):Ks(e,t,r)}function zee(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var u$=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function d$(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":vb(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(u$))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function qee(e,t,r,n){for(var a=[],i="",s=0,l="",c="t",u,d,f,p="H";s<e.length;)switch(l=e.charAt(s)){case"G":if(!vb(e,s))throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"G",v:"General"},s+=7;break;case'"':for(i="";(f=e.charCodeAt(++s))!==34&&s<e.length;)i+=String.fromCharCode(f);a[a.length]={t:"t",v:i},++s;break;case"\\":var h=e.charAt(++s),g=h==="("||h===")"?h:"t";a[a.length]={t:g,v:h},++s;break;case"_":a[a.length]={t:"t",v:" "},s+=2;break;case"@":a[a.length]={t:"T",v:t},++s;break;case"B":case"b":if(e.charAt(s+1)==="1"||e.charAt(s+1)==="2"){if(u==null&&(u=k1(t,r,e.charAt(s+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(s,2)},c=l,s+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=k1(t,r),u==null))return"";for(i=l;++s<e.length&&e.charAt(s).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=p),a[a.length]={t:l,v:i},c=l;break;case"A":case"a":case"":var m={t:l,v:l};if(u==null&&(u=k1(t,r)),e.substr(s,3).toUpperCase()==="A/P"?(u!=null&&(m.v=u.H>=12?"P":"A"),m.t="T",p="h",s+=3):e.substr(s,5).toUpperCase()==="AM/PM"?(u!=null&&(m.v=u.H>=12?"PM":"AM"),m.t="T",s+=5,p="h"):e.substr(s,5).toUpperCase()==="/"?(u!=null&&(m.v=u.H>=12?"":""),m.t="T",s+=5,p="h"):(m.t="t",++s),u==null&&m.t==="T")return"";a[a.length]=m,c=l;break;case"[":for(i=l;e.charAt(s++)!=="]"&&s<e.length;)i+=e.charAt(s);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(u$)){if(u==null&&(u=k1(t,r),u==null))return"";a[a.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",d$(e)||(a[a.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=l;++s<e.length&&(l=e.charAt(s))==="0";)i+=l;a[a.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++s<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(s))>-1;)i+=l;a[a.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++s)===l;)i+=l;a[a.length]={t:l,v:i},c=l;break;case"*":++s,(e.charAt(s)==" "||e.charAt(s)=="*")&&++s;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;s<e.length&&"0123456789".indexOf(e.charAt(++s))>-1;)i+=e.charAt(s);a[a.length]={t:"D",v:i};break;case" ":a[a.length]={t:l,v:l},++s;break;case"$":a[a.length]={t:"t",v:"$"},++s;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"t",v:l},++s;break}var x=0,y=0,v;for(s=a.length-1,c="t";s>=0;--s)switch(a[s].t){case"h":case"H":a[s].t=p,c="h",x<1&&(x=1);break;case"s":(v=a[s].v.match(/\.0+$/))&&(y=Math.max(y,v[0].length-1)),x<3&&(x=3);case"d":case"y":case"M":case"e":c=a[s].t;break;case"m":c==="s"&&(a[s].t="M",x<2&&(x=2));break;case"X":break;case"Z":x<1&&a[s].v.match(/[Hh]/)&&(x=1),x<2&&a[s].v.match(/[Mm]/)&&(x=2),x<3&&a[s].v.match(/[Ss]/)&&(x=3)}switch(x){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",N;for(s=0;s<a.length;++s)switch(a[s].t){case"t":case"T":case" ":case"D":break;case"X":a[s].v="",a[s].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[s].v=Lee(a[s].t.charCodeAt(0),a[s].v,u,y),a[s].t="t";break;case"n":case"?":for(N=s+1;a[N]!=null&&((l=a[N].t)==="?"||l==="D"||(l===" "||l==="t")&&a[N+1]!=null&&(a[N+1].t==="?"||a[N+1].t==="t"&&a[N+1].v==="/")||a[s].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[N].v==="/"||a[N].v===" "&&a[N+1]!=null&&a[N+1].t=="?"));)a[s].v+=a[N].v,a[N]={v:"",t:";"},++N;b+=a[s].v,s=N-1;break;case"G":a[s].t="t",a[s].v=wj(t,r);break}var _="",E,j;if(b.length>0){b.charCodeAt(0)==40?(E=t<0&&b.charCodeAt(0)===45?-t:t,j=mc("n",b,E)):(E=t<0&&n>1?-t:t,j=mc("n",b,E),E<0&&a[0]&&a[0].t=="t"&&(j=j.substr(1),a[0].v="-"+a[0].v)),N=j.length-1;var A=a.length;for(s=0;s<a.length;++s)if(a[s]!=null&&a[s].t!="t"&&a[s].v.indexOf(".")>-1){A=s;break}var T=a.length;if(A===a.length&&j.indexOf("E")===-1){for(s=a.length-1;s>=0;--s)a[s]==null||"n?".indexOf(a[s].t)===-1||(N>=a[s].v.length-1?(N-=a[s].v.length,a[s].v=j.substr(N+1,a[s].v.length)):N<0?a[s].v="":(a[s].v=j.substr(0,N+1),N=-1),a[s].t="t",T=s);N>=0&&T<a.length&&(a[T].v=j.substr(0,N+1)+a[T].v)}else if(A!==a.length&&j.indexOf("E")===-1){for(N=j.indexOf(".")-1,s=A;s>=0;--s)if(!(a[s]==null||"n?".indexOf(a[s].t)===-1)){for(d=a[s].v.indexOf(".")>-1&&s===A?a[s].v.indexOf(".")-1:a[s].v.length-1,_=a[s].v.substr(d+1);d>=0;--d)N>=0&&(a[s].v.charAt(d)==="0"||a[s].v.charAt(d)==="#")&&(_=j.charAt(N--)+_);a[s].v=_,a[s].t="t",T=s}for(N>=0&&T<a.length&&(a[T].v=j.substr(0,N+1)+a[T].v),N=j.indexOf(".")+1,s=A;s<a.length;++s)if(!(a[s]==null||"n?(".indexOf(a[s].t)===-1&&s!==A)){for(d=a[s].v.indexOf(".")>-1&&s===A?a[s].v.indexOf(".")+1:0,_=a[s].v.substr(0,d);d<a[s].v.length;++d)N<j.length&&(_+=j.charAt(N++));a[s].v=_,a[s].t="t",T=s}}}for(s=0;s<a.length;++s)a[s]!=null&&"n?".indexOf(a[s].t)>-1&&(E=n>1&&t<0&&s>0&&a[s-1].v==="-"?-t:t,a[s].v=mc(a[s].t,a[s].v,E),a[s].t="t");var P="";for(s=0;s!==a.length;++s)a[s]!=null&&(P+=a[s].v);return P}var bO=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function wO(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function Hee(e,t){var r=zee(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var s=r[0].match(bO),l=r[1].match(bO);return wO(t,s)?[n,r[0]]:wO(t,l)?[n,r[1]]:[n,r[s!=null&&l!=null?2:1]]}return[n,i]}function Gu(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:$n)[e],n==null&&(n=r.table&&r.table[vO[e]]||$n[vO[e]]),n==null&&(n=jee[e]||"General");break}if(vb(n,0))return wj(t,r);t instanceof Date&&(t=r$(t,r.date1904));var a=Hee(n,t);if(vb(a[1]))return wj(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return qee(a[1],t,r,a[0])}function f$(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if($n[r]==null){t<0&&(t=r);continue}if($n[r]==e){t=r;break}}t<0&&(t=391)}return $n[t]=e,t}function hw(e){for(var t=0;t!=392;++t)e[t]!==void 0&&f$(e[t],t)}function pw(){$n=See()}var h$=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Wee(e){var t=typeof e=="number"?$n[e]:e;return t=t.replace(h$,"(\\d+)"),new RegExp("^"+t+"$")}function Vee(e,t,r){var n=-1,a=-1,i=-1,s=-1,l=-1,c=-1;(t.match(h$)||[]).forEach(function(f,p){var h=parseInt(r[p+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=h;break;case"d":i=h;break;case"h":s=h;break;case"s":c=h;break;case"m":s>=0?l=h:a=h;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return s==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&i==-1?d:u+"T"+d}var Gee=function(){var e={};e.version="1.2.0";function t(){for(var j=0,A=new Array(256),T=0;T!=256;++T)j=T,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,A[T]=j;return typeof Int32Array<"u"?new Int32Array(A):A}var r=t();function n(j){var A=0,T=0,P=0,O=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(P=0;P!=256;++P)O[P]=j[P];for(P=0;P!=256;++P)for(T=j[P],A=256+P;A<4096;A+=256)T=O[A]=T>>>8^j[T&255];var R=[];for(P=1;P!=16;++P)R[P-1]=typeof Int32Array<"u"?O.subarray(P*256,P*256+256):O.slice(P*256,P*256+256);return R}var a=n(r),i=a[0],s=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=a[6],p=a[7],h=a[8],g=a[9],m=a[10],x=a[11],y=a[12],v=a[13],b=a[14];function N(j,A){for(var T=A^-1,P=0,O=j.length;P<O;)T=T>>>8^r[(T^j.charCodeAt(P++))&255];return~T}function _(j,A){for(var T=A^-1,P=j.length-15,O=0;O<P;)T=b[j[O++]^T&255]^v[j[O++]^T>>8&255]^y[j[O++]^T>>16&255]^x[j[O++]^T>>>24]^m[j[O++]]^g[j[O++]]^h[j[O++]]^p[j[O++]]^f[j[O++]]^d[j[O++]]^u[j[O++]]^c[j[O++]]^l[j[O++]]^s[j[O++]]^i[j[O++]]^r[j[O++]];for(P+=15;O<P;)T=T>>>8^r[(T^j[O++])&255];return~T}function E(j,A){for(var T=A^-1,P=0,O=j.length,R=0,I=0;P<O;)R=j.charCodeAt(P++),R<128?T=T>>>8^r[(T^R)&255]:R<2048?(T=T>>>8^r[(T^(192|R>>6&31))&255],T=T>>>8^r[(T^(128|R&63))&255]):R>=55296&&R<57344?(R=(R&1023)+64,I=j.charCodeAt(P++)&1023,T=T>>>8^r[(T^(240|R>>8&7))&255],T=T>>>8^r[(T^(128|R>>2&63))&255],T=T>>>8^r[(T^(128|I>>6&15|(R&3)<<4))&255],T=T>>>8^r[(T^(128|I&63))&255]):(T=T>>>8^r[(T^(224|R>>12&15))&255],T=T>>>8^r[(T^(128|R>>6&63))&255],T=T>>>8^r[(T^(128|R&63))&255]);return~T}return e.table=r,e.bstr=N,e.buf=_,e.str=E,e}(),Kr=function(){var t={};t.version="1.2.1";function r(W,de){for(var ne=W.split("/"),se=de.split("/"),fe=0,pe=0,Te=Math.min(ne.length,se.length);fe<Te;++fe){if(pe=ne[fe].length-se[fe].length)return pe;if(ne[fe]!=se[fe])return ne[fe]<se[fe]?-1:1}return ne.length-se.length}function n(W){if(W.charAt(W.length-1)=="/")return W.slice(0,-1).indexOf("/")===-1?W:n(W.slice(0,-1));var de=W.lastIndexOf("/");return de===-1?W:W.slice(0,de+1)}function a(W){if(W.charAt(W.length-1)=="/")return a(W.slice(0,-1));var de=W.lastIndexOf("/");return de===-1?W:W.slice(de+1)}function i(W,de){typeof de=="string"&&(de=new Date(de));var ne=de.getHours();ne=ne<<6|de.getMinutes(),ne=ne<<5|de.getSeconds()>>>1,W.write_shift(2,ne);var se=de.getFullYear()-1980;se=se<<4|de.getMonth()+1,se=se<<5|de.getDate(),W.write_shift(2,se)}function s(W){var de=W.read_shift(2)&65535,ne=W.read_shift(2)&65535,se=new Date,fe=ne&31;ne>>>=5;var pe=ne&15;ne>>>=4,se.setMilliseconds(0),se.setFullYear(ne+1980),se.setMonth(pe-1),se.setDate(fe);var Te=de&31;de>>>=5;var De=de&63;return de>>>=6,se.setHours(de),se.setMinutes(De),se.setSeconds(Te<<1),se}function l(W){_s(W,0);for(var de={},ne=0;W.l<=W.length-4;){var se=W.read_shift(2),fe=W.read_shift(2),pe=W.l+fe,Te={};switch(se){case 21589:ne=W.read_shift(1),ne&1&&(Te.mtime=W.read_shift(4)),fe>5&&(ne&2&&(Te.atime=W.read_shift(4)),ne&4&&(Te.ctime=W.read_shift(4))),Te.mtime&&(Te.mt=new Date(Te.mtime*1e3));break}W.l=pe,de[se]=Te}return de}var c;function u(){return c||(c={})}function d(W,de){if(W[0]==80&&W[1]==75)return Ge(W,de);if((W[0]|32)==109&&(W[1]|32)==105)return mt(W,de);if(W.length<512)throw new Error("CFB file size "+W.length+" < 512");var ne=3,se=512,fe=0,pe=0,Te=0,De=0,Ce=0,ke=[],Re=W.slice(0,512);_s(Re,0);var Je=f(Re);switch(ne=Je[0],ne){case 3:se=512;break;case 4:se=4096;break;case 0:if(Je[1]==0)return Ge(W,de);default:throw new Error("Major Version: Expected 3 or 4 saw "+ne)}se!==512&&(Re=W.slice(0,se),_s(Re,28));var nt=W.slice(0,se);p(Re,ne);var dt=Re.read_shift(4,"i");if(ne===3&&dt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+dt);Re.l+=4,Te=Re.read_shift(4,"i"),Re.l+=4,Re.chk("00100000","Mini Stream Cutoff Size: "),De=Re.read_shift(4,"i"),fe=Re.read_shift(4,"i"),Ce=Re.read_shift(4,"i"),pe=Re.read_shift(4,"i");for(var tt=-1,ct=0;ct<109&&(tt=Re.read_shift(4,"i"),!(tt<0));++ct)ke[ct]=tt;var Vt=h(W,se);x(Ce,pe,Vt,se,ke);var Gr=v(Vt,Te,ke,se);Gr[Te].name="!Directory",fe>0&&De!==I&&(Gr[De].name="!MiniFAT"),Gr[ke[0]].name="!FAT",Gr.fat_addrs=ke,Gr.ssz=se;var pr={},On=[],tl=[],bo=[];b(Te,Gr,Vt,On,fe,pr,tl,De),g(tl,bo,On),On.shift();var rl={FileIndex:tl,FullPaths:bo};return de&&de.raw&&(rl.raw={header:nt,sectors:Vt}),rl}function f(W){if(W[W.l]==80&&W[W.l+1]==75)return[0,0];W.chk(z,"Header Signature: "),W.l+=16;var de=W.read_shift(2,"u");return[W.read_shift(2,"u"),de]}function p(W,de){var ne=9;switch(W.l+=2,ne=W.read_shift(2)){case 9:if(de!=3)throw new Error("Sector Shift: Expected 9 saw "+ne);break;case 12:if(de!=4)throw new Error("Sector Shift: Expected 12 saw "+ne);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ne)}W.chk("0600","Mini Sector Shift: "),W.chk("000000000000","Reserved: ")}function h(W,de){for(var ne=Math.ceil(W.length/de)-1,se=[],fe=1;fe<ne;++fe)se[fe-1]=W.slice(fe*de,(fe+1)*de);return se[ne-1]=W.slice(ne*de),se}function g(W,de,ne){for(var se=0,fe=0,pe=0,Te=0,De=0,Ce=ne.length,ke=[],Re=[];se<Ce;++se)ke[se]=Re[se]=se,de[se]=ne[se];for(;De<Re.length;++De)se=Re[De],fe=W[se].L,pe=W[se].R,Te=W[se].C,ke[se]===se&&(fe!==-1&&ke[fe]!==fe&&(ke[se]=ke[fe]),pe!==-1&&ke[pe]!==pe&&(ke[se]=ke[pe])),Te!==-1&&(ke[Te]=se),fe!==-1&&se!=ke[se]&&(ke[fe]=ke[se],Re.lastIndexOf(fe)<De&&Re.push(fe)),pe!==-1&&se!=ke[se]&&(ke[pe]=ke[se],Re.lastIndexOf(pe)<De&&Re.push(pe));for(se=1;se<Ce;++se)ke[se]===se&&(pe!==-1&&ke[pe]!==pe?ke[se]=ke[pe]:fe!==-1&&ke[fe]!==fe&&(ke[se]=ke[fe]));for(se=1;se<Ce;++se)if(W[se].type!==0){if(De=se,De!=ke[De])do De=ke[De],de[se]=de[De]+"/"+de[se];while(De!==0&&ke[De]!==-1&&De!=ke[De]);ke[se]=-1}for(de[0]+="/",se=1;se<Ce;++se)W[se].type!==2&&(de[se]+="/")}function m(W,de,ne){for(var se=W.start,fe=W.size,pe=[],Te=se;ne&&fe>0&&Te>=0;)pe.push(de.slice(Te*R,Te*R+R)),fe-=R,Te=zd(ne,Te*4);return pe.length===0?Be(0):Xa(pe).slice(0,W.size)}function x(W,de,ne,se,fe){var pe=I;if(W===I){if(de!==0)throw new Error("DIFAT chain shorter than expected")}else if(W!==-1){var Te=ne[W],De=(se>>>2)-1;if(!Te)return;for(var Ce=0;Ce<De&&(pe=zd(Te,Ce*4))!==I;++Ce)fe.push(pe);x(zd(Te,se-4),de-1,ne,se,fe)}}function y(W,de,ne,se,fe){var pe=[],Te=[];fe||(fe=[]);var De=se-1,Ce=0,ke=0;for(Ce=de;Ce>=0;){fe[Ce]=!0,pe[pe.length]=Ce,Te.push(W[Ce]);var Re=ne[Math.floor(Ce*4/se)];if(ke=Ce*4&De,se<4+ke)throw new Error("FAT boundary crossed: "+Ce+" 4 "+se);if(!W[Re])break;Ce=zd(W[Re],ke)}return{nodes:pe,data:CO([Te])}}function v(W,de,ne,se){var fe=W.length,pe=[],Te=[],De=[],Ce=[],ke=se-1,Re=0,Je=0,nt=0,dt=0;for(Re=0;Re<fe;++Re)if(De=[],nt=Re+de,nt>=fe&&(nt-=fe),!Te[nt]){Ce=[];var tt=[];for(Je=nt;Je>=0;){tt[Je]=!0,Te[Je]=!0,De[De.length]=Je,Ce.push(W[Je]);var ct=ne[Math.floor(Je*4/se)];if(dt=Je*4&ke,se<4+dt)throw new Error("FAT boundary crossed: "+Je+" 4 "+se);if(!W[ct]||(Je=zd(W[ct],dt),tt[Je]))break}pe[nt]={nodes:De,data:CO([Ce])}}return pe}function b(W,de,ne,se,fe,pe,Te,De){for(var Ce=0,ke=se.length?2:0,Re=de[W].data,Je=0,nt=0,dt;Je<Re.length;Je+=128){var tt=Re.slice(Je,Je+128);_s(tt,64),nt=tt.read_shift(2),dt=D3(tt,0,nt-ke),se.push(dt);var ct={name:dt,type:tt.read_shift(1),color:tt.read_shift(1),L:tt.read_shift(4,"i"),R:tt.read_shift(4,"i"),C:tt.read_shift(4,"i"),clsid:tt.read_shift(16),state:tt.read_shift(4,"i"),start:0,size:0},Vt=tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2);Vt!==0&&(ct.ct=N(tt,tt.l-8));var Gr=tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2);Gr!==0&&(ct.mt=N(tt,tt.l-8)),ct.start=tt.read_shift(4,"i"),ct.size=tt.read_shift(4,"i"),ct.size<0&&ct.start<0&&(ct.size=ct.type=0,ct.start=I,ct.name=""),ct.type===5?(Ce=ct.start,fe>0&&Ce!==I&&(de[Ce].name="!StreamData")):ct.size>=4096?(ct.storage="fat",de[ct.start]===void 0&&(de[ct.start]=y(ne,ct.start,de.fat_addrs,de.ssz)),de[ct.start].name=ct.name,ct.content=de[ct.start].data.slice(0,ct.size)):(ct.storage="minifat",ct.size<0?ct.size=0:Ce!==I&&ct.start!==I&&de[Ce]&&(ct.content=m(ct,de[Ce].data,(de[De]||{}).data))),ct.content&&_s(ct.content,0),pe[dt]=ct,Te.push(ct)}}function N(W,de){return new Date((Ss(W,de+4)/1e7*Math.pow(2,32)+Ss(W,de)/1e7-11644473600)*1e3)}function _(W,de){return u(),d(c.readFileSync(W),de)}function E(W,de){var ne=de&&de.type;switch(ne||Cr&&Buffer.isBuffer(W)&&(ne="buffer"),ne||"base64"){case"file":return _(W,de);case"base64":return d(zo(Ac(W)),de);case"binary":return d(zo(W),de)}return d(W,de)}function j(W,de){var ne=de||{},se=ne.root||"Root Entry";if(W.FullPaths||(W.FullPaths=[]),W.FileIndex||(W.FileIndex=[]),W.FullPaths.length!==W.FileIndex.length)throw new Error("inconsistent CFB structure");W.FullPaths.length===0&&(W.FullPaths[0]=se+"/",W.FileIndex[0]={name:se,type:5}),ne.CLSID&&(W.FileIndex[0].clsid=ne.CLSID),A(W)}function A(W){var de="Sh33tJ5";if(!Kr.find(W,"/"+de)){var ne=Be(4);ne[0]=55,ne[1]=ne[3]=50,ne[2]=54,W.FileIndex.push({name:de,type:2,content:ne,size:4,L:69,R:69,C:69}),W.FullPaths.push(W.FullPaths[0]+de),T(W)}}function T(W,de){j(W);for(var ne=!1,se=!1,fe=W.FullPaths.length-1;fe>=0;--fe){var pe=W.FileIndex[fe];switch(pe.type){case 0:se?ne=!0:(W.FileIndex.pop(),W.FullPaths.pop());break;case 1:case 2:case 5:se=!0,isNaN(pe.R*pe.L*pe.C)&&(ne=!0),pe.R>-1&&pe.L>-1&&pe.R==pe.L&&(ne=!0);break;default:ne=!0;break}}if(!(!ne&&!de)){var Te=new Date(1987,1,19),De=0,Ce=Object.create?Object.create(null):{},ke=[];for(fe=0;fe<W.FullPaths.length;++fe)Ce[W.FullPaths[fe]]=!0,W.FileIndex[fe].type!==0&&ke.push([W.FullPaths[fe],W.FileIndex[fe]]);for(fe=0;fe<ke.length;++fe){var Re=n(ke[fe][0]);se=Ce[Re],se||(ke.push([Re,{name:a(Re).replace("/",""),type:1,clsid:ie,ct:Te,mt:Te,content:null}]),Ce[Re]=!0)}for(ke.sort(function(dt,tt){return r(dt[0],tt[0])}),W.FullPaths=[],W.FileIndex=[],fe=0;fe<ke.length;++fe)W.FullPaths[fe]=ke[fe][0],W.FileIndex[fe]=ke[fe][1];for(fe=0;fe<ke.length;++fe){var Je=W.FileIndex[fe],nt=W.FullPaths[fe];if(Je.name=a(nt).replace("/",""),Je.L=Je.R=Je.C=-(Je.color=1),Je.size=Je.content?Je.content.length:0,Je.start=0,Je.clsid=Je.clsid||ie,fe===0)Je.C=ke.length>1?1:-1,Je.size=0,Je.type=5;else if(nt.slice(-1)=="/"){for(De=fe+1;De<ke.length&&n(W.FullPaths[De])!=nt;++De);for(Je.C=De>=ke.length?-1:De,De=fe+1;De<ke.length&&n(W.FullPaths[De])!=n(nt);++De);Je.R=De>=ke.length?-1:De,Je.type=1}else n(W.FullPaths[fe+1]||"")==n(nt)&&(Je.R=fe+1),Je.type=2}}}function P(W,de){var ne=de||{};if(ne.fileType=="mad")return xo(W,ne);switch(T(W),ne.fileType){case"zip":return wt(W,ne)}var se=function(dt){for(var tt=0,ct=0,Vt=0;Vt<dt.FileIndex.length;++Vt){var Gr=dt.FileIndex[Vt];if(Gr.content){var pr=Gr.content.length;pr>0&&(pr<4096?tt+=pr+63>>6:ct+=pr+511>>9)}}for(var On=dt.FullPaths.length+3>>2,tl=tt+7>>3,bo=tt+127>>7,rl=tl+ct+On+bo,$s=rl+127>>7,Uc=$s<=109?0:Math.ceil(($s-109)/127);rl+$s+Uc+127>>7>$s;)Uc=++$s<=109?0:Math.ceil(($s-109)/127);var Zn=[1,Uc,$s,bo,On,ct,tt,0];return dt.FileIndex[0].size=tt<<6,Zn[7]=(dt.FileIndex[0].start=Zn[0]+Zn[1]+Zn[2]+Zn[3]+Zn[4]+Zn[5])+(Zn[6]+7>>3),Zn}(W),fe=Be(se[7]<<9),pe=0,Te=0;{for(pe=0;pe<8;++pe)fe.write_shift(1,Y[pe]);for(pe=0;pe<8;++pe)fe.write_shift(2,0);for(fe.write_shift(2,62),fe.write_shift(2,3),fe.write_shift(2,65534),fe.write_shift(2,9),fe.write_shift(2,6),pe=0;pe<3;++pe)fe.write_shift(2,0);for(fe.write_shift(4,0),fe.write_shift(4,se[2]),fe.write_shift(4,se[0]+se[1]+se[2]+se[3]-1),fe.write_shift(4,0),fe.write_shift(4,4096),fe.write_shift(4,se[3]?se[0]+se[1]+se[2]-1:I),fe.write_shift(4,se[3]),fe.write_shift(-4,se[1]?se[0]-1:I),fe.write_shift(4,se[1]),pe=0;pe<109;++pe)fe.write_shift(-4,pe<se[2]?se[1]+pe:-1)}if(se[1])for(Te=0;Te<se[1];++Te){for(;pe<236+Te*127;++pe)fe.write_shift(-4,pe<se[2]?se[1]+pe:-1);fe.write_shift(-4,Te===se[1]-1?I:Te+1)}var De=function(dt){for(Te+=dt;pe<Te-1;++pe)fe.write_shift(-4,pe+1);dt&&(++pe,fe.write_shift(-4,I))};for(Te=pe=0,Te+=se[1];pe<Te;++pe)fe.write_shift(-4,re.DIFSECT);for(Te+=se[2];pe<Te;++pe)fe.write_shift(-4,re.FATSECT);De(se[3]),De(se[4]);for(var Ce=0,ke=0,Re=W.FileIndex[0];Ce<W.FileIndex.length;++Ce)Re=W.FileIndex[Ce],Re.content&&(ke=Re.content.length,!(ke<4096)&&(Re.start=Te,De(ke+511>>9)));for(De(se[6]+7>>3);fe.l&511;)fe.write_shift(-4,re.ENDOFCHAIN);for(Te=pe=0,Ce=0;Ce<W.FileIndex.length;++Ce)Re=W.FileIndex[Ce],Re.content&&(ke=Re.content.length,!(!ke||ke>=4096)&&(Re.start=Te,De(ke+63>>6)));for(;fe.l&511;)fe.write_shift(-4,re.ENDOFCHAIN);for(pe=0;pe<se[4]<<2;++pe){var Je=W.FullPaths[pe];if(!Je||Je.length===0){for(Ce=0;Ce<17;++Ce)fe.write_shift(4,0);for(Ce=0;Ce<3;++Ce)fe.write_shift(4,-1);for(Ce=0;Ce<12;++Ce)fe.write_shift(4,0);continue}Re=W.FileIndex[pe],pe===0&&(Re.start=Re.size?Re.start-1:I);var nt=pe===0&&ne.root||Re.name;if(ke=2*(nt.length+1),fe.write_shift(64,nt,"utf16le"),fe.write_shift(2,ke),fe.write_shift(1,Re.type),fe.write_shift(1,Re.color),fe.write_shift(-4,Re.L),fe.write_shift(-4,Re.R),fe.write_shift(-4,Re.C),Re.clsid)fe.write_shift(16,Re.clsid,"hex");else for(Ce=0;Ce<4;++Ce)fe.write_shift(4,0);fe.write_shift(4,Re.state||0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,Re.start),fe.write_shift(4,Re.size),fe.write_shift(4,0)}for(pe=1;pe<W.FileIndex.length;++pe)if(Re=W.FileIndex[pe],Re.size>=4096)if(fe.l=Re.start+1<<9,Cr&&Buffer.isBuffer(Re.content))Re.content.copy(fe,fe.l,0,Re.size),fe.l+=Re.size+511&-512;else{for(Ce=0;Ce<Re.size;++Ce)fe.write_shift(1,Re.content[Ce]);for(;Ce&511;++Ce)fe.write_shift(1,0)}for(pe=1;pe<W.FileIndex.length;++pe)if(Re=W.FileIndex[pe],Re.size>0&&Re.size<4096)if(Cr&&Buffer.isBuffer(Re.content))Re.content.copy(fe,fe.l,0,Re.size),fe.l+=Re.size+63&-64;else{for(Ce=0;Ce<Re.size;++Ce)fe.write_shift(1,Re.content[Ce]);for(;Ce&63;++Ce)fe.write_shift(1,0)}if(Cr)fe.l=fe.length;else for(;fe.l<fe.length;)fe.write_shift(1,0);return fe}function O(W,de){var ne=W.FullPaths.map(function(Ce){return Ce.toUpperCase()}),se=ne.map(function(Ce){var ke=Ce.split("/");return ke[ke.length-(Ce.slice(-1)=="/"?2:1)]}),fe=!1;de.charCodeAt(0)===47?(fe=!0,de=ne[0].slice(0,-1)+de):fe=de.indexOf("/")!==-1;var pe=de.toUpperCase(),Te=fe===!0?ne.indexOf(pe):se.indexOf(pe);if(Te!==-1)return W.FileIndex[Te];var De=!pe.match(C1);for(pe=pe.replace(ag,""),De&&(pe=pe.replace(C1,"!")),Te=0;Te<ne.length;++Te)if((De?ne[Te].replace(C1,"!"):ne[Te]).replace(ag,"")==pe||(De?se[Te].replace(C1,"!"):se[Te]).replace(ag,"")==pe)return W.FileIndex[Te];return null}var R=64,I=-2,z="d0cf11e0a1b11ae1",Y=[208,207,17,224,161,177,26,225],ie="00000000000000000000000000000000",re={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:I,FREESECT:-1,HEADER_SIGNATURE:z,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ie,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function X(W,de,ne){u();var se=P(W,ne);c.writeFileSync(de,se)}function oe(W){for(var de=new Array(W.length),ne=0;ne<W.length;++ne)de[ne]=String.fromCharCode(W[ne]);return de.join("")}function we(W,de){var ne=P(W,de);switch(de&&de.type||"buffer"){case"file":return u(),c.writeFileSync(de.filename,ne),ne;case"binary":return typeof ne=="string"?ne:oe(ne);case"base64":return Wg(typeof ne=="string"?ne:oe(ne));case"buffer":if(Cr)return Buffer.isBuffer(ne)?ne:Mc(ne);case"array":return typeof ne=="string"?zo(ne):ne}return ne}var _e;function k(W){try{var de=W.InflateRaw,ne=new de;if(ne._processChunk(new Uint8Array([3,0]),ne._finishFlushFlag),ne.bytesRead)_e=W;else throw new Error("zlib does not expose bytesRead")}catch(se){console.error("cannot use native zlib: "+(se.message||se))}}function F(W,de){if(!_e)return Nr(W,de);var ne=_e.InflateRaw,se=new ne,fe=se._processChunk(W.slice(W.l),se._finishFlushFlag);return W.l+=se.bytesRead,fe}function B(W){return _e?_e.deflateRawSync(W):qt(W)}var U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],me=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function K(W){var de=(W<<1|W<<11)&139536|(W<<5|W<<15)&558144;return(de>>16|de>>8|de)&255}for(var te=typeof Uint8Array<"u",le=te?new Uint8Array(256):[],ve=0;ve<256;++ve)le[ve]=K(ve);function ge(W,de){var ne=le[W&255];return de<=8?ne>>>8-de:(ne=ne<<8|le[W>>8&255],de<=16?ne>>>16-de:(ne=ne<<8|le[W>>16&255],ne>>>24-de))}function Me(W,de){var ne=de&7,se=de>>>3;return(W[se]|(ne<=6?0:W[se+1]<<8))>>>ne&3}function Fe(W,de){var ne=de&7,se=de>>>3;return(W[se]|(ne<=5?0:W[se+1]<<8))>>>ne&7}function ee(W,de){var ne=de&7,se=de>>>3;return(W[se]|(ne<=4?0:W[se+1]<<8))>>>ne&15}function Pe(W,de){var ne=de&7,se=de>>>3;return(W[se]|(ne<=3?0:W[se+1]<<8))>>>ne&31}function Ie(W,de){var ne=de&7,se=de>>>3;return(W[se]|(ne<=1?0:W[se+1]<<8))>>>ne&127}function Qe(W,de,ne){var se=de&7,fe=de>>>3,pe=(1<<ne)-1,Te=W[fe]>>>se;return ne<8-se||(Te|=W[fe+1]<<8-se,ne<16-se)||(Te|=W[fe+2]<<16-se,ne<24-se)||(Te|=W[fe+3]<<24-se),Te&pe}function $e(W,de,ne){var se=de&7,fe=de>>>3;return se<=5?W[fe]|=(ne&7)<<se:(W[fe]|=ne<<se&255,W[fe+1]=(ne&7)>>8-se),de+3}function it(W,de,ne){var se=de&7,fe=de>>>3;return ne=(ne&1)<<se,W[fe]|=ne,de+1}function st(W,de,ne){var se=de&7,fe=de>>>3;return ne<<=se,W[fe]|=ne&255,ne>>>=8,W[fe+1]=ne,de+8}function ut(W,de,ne){var se=de&7,fe=de>>>3;return ne<<=se,W[fe]|=ne&255,ne>>>=8,W[fe+1]=ne&255,W[fe+2]=ne>>>8,de+16}function pt(W,de){var ne=W.length,se=2*ne>de?2*ne:de+5,fe=0;if(ne>=de)return W;if(Cr){var pe=pO(se);if(W.copy)W.copy(pe);else for(;fe<W.length;++fe)pe[fe]=W[fe];return pe}else if(te){var Te=new Uint8Array(se);if(Te.set)Te.set(W);else for(;fe<ne;++fe)Te[fe]=W[fe];return Te}return W.length=se,W}function Bt(W){for(var de=new Array(W),ne=0;ne<W;++ne)de[ne]=0;return de}function ht(W,de,ne){var se=1,fe=0,pe=0,Te=0,De=0,Ce=W.length,ke=te?new Uint16Array(32):Bt(32);for(pe=0;pe<32;++pe)ke[pe]=0;for(pe=Ce;pe<ne;++pe)W[pe]=0;Ce=W.length;var Re=te?new Uint16Array(Ce):Bt(Ce);for(pe=0;pe<Ce;++pe)ke[fe=W[pe]]++,se<fe&&(se=fe),Re[pe]=0;for(ke[0]=0,pe=1;pe<=se;++pe)ke[pe+16]=De=De+ke[pe-1]<<1;for(pe=0;pe<Ce;++pe)De=W[pe],De!=0&&(Re[pe]=ke[De+16]++);var Je=0;for(pe=0;pe<Ce;++pe)if(Je=W[pe],Je!=0)for(De=ge(Re[pe],se)>>se-Je,Te=(1<<se+4-Je)-1;Te>=0;--Te)de[De|Te<<Je]=Je&15|pe<<4;return se}var $t=te?new Uint16Array(512):Bt(512),Jt=te?new Uint16Array(32):Bt(32);if(!te){for(var At=0;At<512;++At)$t[At]=0;for(At=0;At<32;++At)Jt[At]=0}(function(){for(var W=[],de=0;de<32;de++)W.push(5);ht(W,Jt,32);var ne=[];for(de=0;de<=143;de++)ne.push(8);for(;de<=255;de++)ne.push(9);for(;de<=279;de++)ne.push(7);for(;de<=287;de++)ne.push(8);ht(ne,$t,288)})();var bt=function(){for(var de=te?new Uint8Array(32768):[],ne=0,se=0;ne<me.length-1;++ne)for(;se<me[ne+1];++se)de[se]=ne;for(;se<32768;++se)de[se]=29;var fe=te?new Uint8Array(259):[];for(ne=0,se=0;ne<J.length-1;++ne)for(;se<J[ne+1];++se)fe[se]=ne;function pe(De,Ce){for(var ke=0;ke<De.length;){var Re=Math.min(65535,De.length-ke),Je=ke+Re==De.length;for(Ce.write_shift(1,+Je),Ce.write_shift(2,Re),Ce.write_shift(2,~Re&65535);Re-- >0;)Ce[Ce.l++]=De[ke++]}return Ce.l}function Te(De,Ce){for(var ke=0,Re=0,Je=te?new Uint16Array(32768):[];Re<De.length;){var nt=Math.min(65535,De.length-Re);if(nt<10){for(ke=$e(Ce,ke,+(Re+nt==De.length)),ke&7&&(ke+=8-(ke&7)),Ce.l=ke/8|0,Ce.write_shift(2,nt),Ce.write_shift(2,~nt&65535);nt-- >0;)Ce[Ce.l++]=De[Re++];ke=Ce.l*8;continue}ke=$e(Ce,ke,+(Re+nt==De.length)+2);for(var dt=0;nt-- >0;){var tt=De[Re];dt=(dt<<5^tt)&32767;var ct=-1,Vt=0;if((ct=Je[dt])&&(ct|=Re&-32768,ct>Re&&(ct-=32768),ct<Re))for(;De[ct+Vt]==De[Re+Vt]&&Vt<250;)++Vt;if(Vt>2){tt=fe[Vt],tt<=22?ke=st(Ce,ke,le[tt+1]>>1)-1:(st(Ce,ke,3),ke+=5,st(Ce,ke,le[tt-23]>>5),ke+=3);var Gr=tt<8?0:tt-4>>2;Gr>0&&(ut(Ce,ke,Vt-J[tt]),ke+=Gr),tt=de[Re-ct],ke=st(Ce,ke,le[tt]>>3),ke-=3;var pr=tt<4?0:tt-2>>1;pr>0&&(ut(Ce,ke,Re-ct-me[tt]),ke+=pr);for(var On=0;On<Vt;++On)Je[dt]=Re&32767,dt=(dt<<5^De[Re])&32767,++Re;nt-=Vt-1}else tt<=143?tt=tt+48:ke=it(Ce,ke,1),ke=st(Ce,ke,le[tt]),Je[dt]=Re&32767,++Re}ke=st(Ce,ke,0)-1}return Ce.l=(ke+7)/8|0,Ce.l}return function(Ce,ke){return Ce.length<8?pe(Ce,ke):Te(Ce,ke)}}();function qt(W){var de=Be(50+Math.floor(W.length*1.1)),ne=bt(W,de);return de.slice(0,ne)}var gt=te?new Uint16Array(32768):Bt(32768),Ut=te?new Uint16Array(32768):Bt(32768),Qt=te?new Uint16Array(128):Bt(128),Zt=1,er=1;function Ir(W,de){var ne=Pe(W,de)+257;de+=5;var se=Pe(W,de)+1;de+=5;var fe=ee(W,de)+4;de+=4;for(var pe=0,Te=te?new Uint8Array(19):Bt(19),De=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ce=1,ke=te?new Uint8Array(8):Bt(8),Re=te?new Uint8Array(8):Bt(8),Je=Te.length,nt=0;nt<fe;++nt)Te[U[nt]]=pe=Fe(W,de),Ce<pe&&(Ce=pe),ke[pe]++,de+=3;var dt=0;for(ke[0]=0,nt=1;nt<=Ce;++nt)Re[nt]=dt=dt+ke[nt-1]<<1;for(nt=0;nt<Je;++nt)(dt=Te[nt])!=0&&(De[nt]=Re[dt]++);var tt=0;for(nt=0;nt<Je;++nt)if(tt=Te[nt],tt!=0){dt=le[De[nt]]>>8-tt;for(var ct=(1<<7-tt)-1;ct>=0;--ct)Qt[dt|ct<<tt]=tt&7|nt<<3}var Vt=[];for(Ce=1;Vt.length<ne+se;)switch(dt=Qt[Ie(W,de)],de+=dt&7,dt>>>=3){case 16:for(pe=3+Me(W,de),de+=2,dt=Vt[Vt.length-1];pe-- >0;)Vt.push(dt);break;case 17:for(pe=3+Fe(W,de),de+=3;pe-- >0;)Vt.push(0);break;case 18:for(pe=11+Ie(W,de),de+=7;pe-- >0;)Vt.push(0);break;default:Vt.push(dt),Ce<dt&&(Ce=dt);break}var Gr=Vt.slice(0,ne),pr=Vt.slice(ne);for(nt=ne;nt<286;++nt)Gr[nt]=0;for(nt=se;nt<30;++nt)pr[nt]=0;return Zt=ht(Gr,gt,286),er=ht(pr,Ut,30),de}function Pt(W,de){if(W[0]==3&&!(W[1]&3))return[jf(de),2];for(var ne=0,se=0,fe=pO(de||1<<18),pe=0,Te=fe.length>>>0,De=0,Ce=0;!(se&1);){if(se=Fe(W,ne),ne+=3,se>>>1)se>>1==1?(De=9,Ce=5):(ne=Ir(W,ne),De=Zt,Ce=er);else{ne&7&&(ne+=8-(ne&7));var ke=W[ne>>>3]|W[(ne>>>3)+1]<<8;if(ne+=32,ke>0)for(!de&&Te<pe+ke&&(fe=pt(fe,pe+ke),Te=fe.length);ke-- >0;)fe[pe++]=W[ne>>>3],ne+=8;continue}for(;;){!de&&Te<pe+32767&&(fe=pt(fe,pe+32767),Te=fe.length);var Re=Qe(W,ne,De),Je=se>>>1==1?$t[Re]:gt[Re];if(ne+=Je&15,Je>>>=4,!(Je>>>8&255))fe[pe++]=Je;else{if(Je==256)break;Je-=257;var nt=Je<8?0:Je-4>>2;nt>5&&(nt=0);var dt=pe+J[Je];nt>0&&(dt+=Qe(W,ne,nt),ne+=nt),Re=Qe(W,ne,Ce),Je=se>>>1==1?Jt[Re]:Ut[Re],ne+=Je&15,Je>>>=4;var tt=Je<4?0:Je-2>>1,ct=me[Je];for(tt>0&&(ct+=Qe(W,ne,tt),ne+=tt),!de&&Te<dt&&(fe=pt(fe,dt+100),Te=fe.length);pe<dt;)fe[pe]=fe[pe-ct],++pe}}}return de?[fe,ne+7>>>3]:[fe.slice(0,pe),ne+7>>>3]}function Nr(W,de){var ne=W.slice(W.l||0),se=Pt(ne,de);return W.l+=se[1],se[0]}function Ft(W,de){if(W)typeof console<"u"&&console.error(de);else throw new Error(de)}function Ge(W,de){var ne=W;_s(ne,0);var se=[],fe=[],pe={FileIndex:se,FullPaths:fe};j(pe,{root:de.root});for(var Te=ne.length-4;(ne[Te]!=80||ne[Te+1]!=75||ne[Te+2]!=5||ne[Te+3]!=6)&&Te>=0;)--Te;ne.l=Te+4,ne.l+=4;var De=ne.read_shift(2);ne.l+=6;var Ce=ne.read_shift(4);for(ne.l=Ce,Te=0;Te<De;++Te){ne.l+=20;var ke=ne.read_shift(4),Re=ne.read_shift(4),Je=ne.read_shift(2),nt=ne.read_shift(2),dt=ne.read_shift(2);ne.l+=8;var tt=ne.read_shift(4),ct=l(ne.slice(ne.l+Je,ne.l+Je+nt));ne.l+=Je+nt+dt;var Vt=ne.l;ne.l=tt+4,We(ne,ke,Re,pe,ct),ne.l=Vt}return pe}function We(W,de,ne,se,fe){W.l+=2;var pe=W.read_shift(2),Te=W.read_shift(2),De=s(W);if(pe&8257)throw new Error("Unsupported ZIP encryption");for(var Ce=W.read_shift(4),ke=W.read_shift(4),Re=W.read_shift(4),Je=W.read_shift(2),nt=W.read_shift(2),dt="",tt=0;tt<Je;++tt)dt+=String.fromCharCode(W[W.l++]);if(nt){var ct=l(W.slice(W.l,W.l+nt));(ct[21589]||{}).mt&&(De=ct[21589].mt),((fe||{})[21589]||{}).mt&&(De=fe[21589].mt)}W.l+=nt;var Vt=W.slice(W.l,W.l+ke);switch(Te){case 8:Vt=F(W,Re);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Te)}var Gr=!1;pe&8&&(Ce=W.read_shift(4),Ce==134695760&&(Ce=W.read_shift(4),Gr=!0),ke=W.read_shift(4),Re=W.read_shift(4)),ke!=de&&Ft(Gr,"Bad compressed size: "+de+" != "+ke),Re!=ne&&Ft(Gr,"Bad uncompressed size: "+ne+" != "+Re),ni(se,dt,Vt,{unsafe:!0,mt:De})}function wt(W,de){var ne=de||{},se=[],fe=[],pe=Be(1),Te=ne.compression?8:0,De=0,Ce=0,ke=0,Re=0,Je=0,nt=W.FullPaths[0],dt=nt,tt=W.FileIndex[0],ct=[],Vt=0;for(Ce=1;Ce<W.FullPaths.length;++Ce)if(dt=W.FullPaths[Ce].slice(nt.length),tt=W.FileIndex[Ce],!(!tt.size||!tt.content||dt=="Sh33tJ5")){var Gr=Re,pr=Be(dt.length);for(ke=0;ke<dt.length;++ke)pr.write_shift(1,dt.charCodeAt(ke)&127);pr=pr.slice(0,pr.l),ct[Je]=Gee.buf(tt.content,0);var On=tt.content;Te==8&&(On=B(On)),pe=Be(30),pe.write_shift(4,67324752),pe.write_shift(2,20),pe.write_shift(2,De),pe.write_shift(2,Te),tt.mt?i(pe,tt.mt):pe.write_shift(4,0),pe.write_shift(-4,ct[Je]),pe.write_shift(4,On.length),pe.write_shift(4,tt.content.length),pe.write_shift(2,pr.length),pe.write_shift(2,0),Re+=pe.length,se.push(pe),Re+=pr.length,se.push(pr),Re+=On.length,se.push(On),pe=Be(46),pe.write_shift(4,33639248),pe.write_shift(2,0),pe.write_shift(2,20),pe.write_shift(2,De),pe.write_shift(2,Te),pe.write_shift(4,0),pe.write_shift(-4,ct[Je]),pe.write_shift(4,On.length),pe.write_shift(4,tt.content.length),pe.write_shift(2,pr.length),pe.write_shift(2,0),pe.write_shift(2,0),pe.write_shift(2,0),pe.write_shift(2,0),pe.write_shift(4,0),pe.write_shift(4,Gr),Vt+=pe.l,fe.push(pe),Vt+=pr.length,fe.push(pr),++Je}return pe=Be(22),pe.write_shift(4,101010256),pe.write_shift(2,0),pe.write_shift(2,0),pe.write_shift(2,Je),pe.write_shift(2,Je),pe.write_shift(4,Vt),pe.write_shift(4,Re),pe.write_shift(2,0),Xa([Xa(se),Xa(fe),pe])}var Dt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function vr(W,de){if(W.ctype)return W.ctype;var ne=W.name||"",se=ne.match(/\.([^\.]+)$/);return se&&Dt[se[1]]||de&&(se=(ne=de).match(/[\.\\]([^\.\\])+$/),se&&Dt[se[1]])?Dt[se[1]]:"application/octet-stream"}function vo(W){for(var de=Wg(W),ne=[],se=0;se<de.length;se+=76)ne.push(de.slice(se,se+76));return ne.join(`\r
`)+`\r
`}function kn(W){var de=W.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ke){var Re=ke.charCodeAt(0).toString(16).toUpperCase();return"="+(Re.length==1?"0"+Re:Re)});de=de.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),de.charAt(0)==`
`&&(de="=0D"+de.slice(1)),de=de.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ne=[],se=de.split(`\r
`),fe=0;fe<se.length;++fe){var pe=se[fe];if(pe.length==0){ne.push("");continue}for(var Te=0;Te<pe.length;){var De=76,Ce=pe.slice(Te,Te+De);Ce.charAt(De-1)=="="?De--:Ce.charAt(De-2)=="="?De-=2:Ce.charAt(De-3)=="="&&(De-=3),Ce=pe.slice(Te,Te+De),Te+=De,Te<pe.length&&(Ce+="="),ne.push(Ce)}}return ne.join(`\r
`)}function Ea(W){for(var de=[],ne=0;ne<W.length;++ne){for(var se=W[ne];ne<=W.length&&se.charAt(se.length-1)=="=";)se=se.slice(0,se.length-1)+W[++ne];de.push(se)}for(var fe=0;fe<de.length;++fe)de[fe]=de[fe].replace(/[=][0-9A-Fa-f]{2}/g,function(pe){return String.fromCharCode(parseInt(pe.slice(1),16))});return zo(de.join(`\r
`))}function xi(W,de,ne){for(var se="",fe="",pe="",Te,De=0;De<10;++De){var Ce=de[De];if(!Ce||Ce.match(/^\s*$/))break;var ke=Ce.match(/^(.*?):\s*([^\s].*)$/);if(ke)switch(ke[1].toLowerCase()){case"content-location":se=ke[2].trim();break;case"content-type":pe=ke[2].trim();break;case"content-transfer-encoding":fe=ke[2].trim();break}}switch(++De,fe.toLowerCase()){case"base64":Te=zo(Ac(de.slice(De).join("")));break;case"quoted-printable":Te=Ea(de.slice(De));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+fe)}var Re=ni(W,se.slice(ne.length),Te,{unsafe:!0});pe&&(Re.ctype=pe)}function mt(W,de){if(oe(W.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ne=de&&de.root||"",se=(Cr&&Buffer.isBuffer(W)?W.toString("binary"):oe(W)).split(`\r
`),fe=0,pe="";for(fe=0;fe<se.length;++fe)if(pe=se[fe],!!/^Content-Location:/i.test(pe)&&(pe=pe.slice(pe.indexOf("file")),ne||(ne=pe.slice(0,pe.lastIndexOf("/")+1)),pe.slice(0,ne.length)!=ne))for(;ne.length>0&&(ne=ne.slice(0,ne.length-1),ne=ne.slice(0,ne.lastIndexOf("/")+1),pe.slice(0,ne.length)!=ne););var Te=(se[1]||"").match(/boundary="(.*?)"/);if(!Te)throw new Error("MAD cannot find boundary");var De="--"+(Te[1]||""),Ce=[],ke=[],Re={FileIndex:Ce,FullPaths:ke};j(Re);var Je,nt=0;for(fe=0;fe<se.length;++fe){var dt=se[fe];dt!==De&&dt!==De+"--"||(nt++&&xi(Re,se.slice(Je,fe),ne),Je=fe)}return Re}function xo(W,de){var ne=de||{},se=ne.boundary||"SheetJS";se="------="+se;for(var fe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+se.slice(2)+'"',"","",""],pe=W.FullPaths[0],Te=pe,De=W.FileIndex[0],Ce=1;Ce<W.FullPaths.length;++Ce)if(Te=W.FullPaths[Ce].slice(pe.length),De=W.FileIndex[Ce],!(!De.size||!De.content||Te=="Sh33tJ5")){Te=Te.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Vt){return"_x"+Vt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Vt){return"_u"+Vt.charCodeAt(0).toString(16)+"_"});for(var ke=De.content,Re=Cr&&Buffer.isBuffer(ke)?ke.toString("binary"):oe(ke),Je=0,nt=Math.min(1024,Re.length),dt=0,tt=0;tt<=nt;++tt)(dt=Re.charCodeAt(tt))>=32&&dt<128&&++Je;var ct=Je>=nt*4/5;fe.push(se),fe.push("Content-Location: "+(ne.root||"file:///C:/SheetJS/")+Te),fe.push("Content-Transfer-Encoding: "+(ct?"quoted-printable":"base64")),fe.push("Content-Type: "+vr(De,Te)),fe.push(""),fe.push(ct?kn(Re):vo(Re))}return fe.push(se+`--\r
`),fe.join(`\r
`)}function yo(W){var de={};return j(de,W),de}function ni(W,de,ne,se){var fe=se&&se.unsafe;fe||j(W);var pe=!fe&&Kr.find(W,de);if(!pe){var Te=W.FullPaths[0];de.slice(0,Te.length)==Te?Te=de:(Te.slice(-1)!="/"&&(Te+="/"),Te=(Te+de).replace("//","/")),pe={name:a(de),type:2},W.FileIndex.push(pe),W.FullPaths.push(Te),fe||Kr.utils.cfb_gc(W)}return pe.content=ne,pe.size=ne?ne.length:0,se&&(se.CLSID&&(pe.clsid=se.CLSID),se.mt&&(pe.mt=se.mt),se.ct&&(pe.ct=se.ct)),pe}function qi(W,de){j(W);var ne=Kr.find(W,de);if(ne){for(var se=0;se<W.FileIndex.length;++se)if(W.FileIndex[se]==ne)return W.FileIndex.splice(se,1),W.FullPaths.splice(se,1),!0}return!1}function gn(W,de,ne){j(W);var se=Kr.find(W,de);if(se){for(var fe=0;fe<W.FileIndex.length;++fe)if(W.FileIndex[fe]==se)return W.FileIndex[fe].name=a(ne),W.FullPaths[fe]=ne,!0}return!1}function Qn(W){T(W,!0)}return t.find=O,t.read=E,t.parse=d,t.write=we,t.writeFile=X,t.utils={cfb_new:yo,cfb_add:ni,cfb_del:qi,cfb_mov:gn,cfb_gc:Qn,ReadShift:sg,CheckField:O$,prep_blob:_s,bconcat:Xa,use_zlib:k,_deflateRaw:qt,_inflateRaw:Nr,consts:re},t}();function Kee(e){return typeof e=="string"?fw(e):Array.isArray(e)?bee(e):e}function Yv(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=fw(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Gg(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([Kee(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var s=document.createElement("a");if(s.download!=null)return s.download=e,s.href=i,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=Kv(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function ti(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function _O(e,t){for(var r=[],n=ti(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function O3(e){for(var t=[],r=ti(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function mw(e){for(var t=[],r=ti(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function Yee(e){for(var t=[],r=ti(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var yb=new Date(1899,11,30,0,0,0);function as(e,t){var r=e.getTime(),n=yb.getTime()+(e.getTimezoneOffset()-yb.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var p$=new Date,Xee=yb.getTime()+(p$.getTimezoneOffset()-yb.getTimezoneOffset())*6e4,NO=p$.getTimezoneOffset();function m$(e){var t=new Date;return t.setTime(e*24*60*60*1e3+Xee),t.getTimezoneOffset()!==NO&&t.setTime(t.getTime()+(t.getTimezoneOffset()-NO)*6e4),t}var SO=new Date("2017-02-19T19:06:09.000Z"),g$=isNaN(SO.getFullYear())?new Date("2/19/17"):SO,Jee=g$.getFullYear()==2017;function Fi(e,t){var r=new Date(e);if(Jee)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(g$.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function gw(e,t){if(Cr&&Buffer.isBuffer(e))return e.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function is(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=is(e[r]));return t}function Mn(e,t){for(var r="";r.length<t;)r+=e;return r}function gc(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var Qee=["january","february","march","april","may","june","july","august","september","october","november","december"];function Vg(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var s=e.toLowerCase();if(s.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(s=s.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),s.length>3&&Qee.indexOf(s)==-1)return r}else if(s.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}function dr(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return Cr?n=Mc(r):n=wee(r),Kr.utils.cfb_add(e,t,n)}Kr.utils.cfb_add(e,t,r)}else e.file(t,r)}function P3(){return Kr.utils.cfb_new()}var da=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Zee={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},L3=O3(Zee),R3=/[&<>'"]/g,ete=/[\u0000-\u0008\u000b-\u001f]/g;function qr(e){var t=e+"";return t.replace(R3,function(r){return L3[r]}).replace(ete,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function jO(e){return qr(e).replace(/ /g,"_x0020_")}var v$=/[\u0000-\u001f]/g;function tte(e){var t=e+"";return t.replace(R3,function(r){return L3[r]}).replace(/\n/g,"<br/>").replace(v$,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function rte(e){var t=e+"";return t.replace(R3,function(r){return L3[r]}).replace(v$,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function nte(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function ate(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function M5(e){for(var t="",r=0,n=0,a=0,i=0,s=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){s=(n&31)<<6,s|=a&63,t+=String.fromCharCode(s);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|i&63);continue}s=e.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(i&63)<<6|s&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function AO(e){var t=jf(2*e.length),r,n,a=1,i=0,s=0,l;for(n=0;n<e.length;n+=a)a=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,s=55296+(r>>>10&1023),r=56320+(r&1023)),s!==0&&(t[i++]=s&255,t[i++]=s>>>8,s=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function EO(e){return Mc(e,"binary").toString("utf8")}var O1="foo bar baz",ig=Cr&&(EO(O1)==M5(O1)&&EO||AO(O1)==M5(O1)&&AO)||M5,Gg=Cr?function(e){return Mc(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},ite=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),x$=/(^\s|\s$|\n)/;function Ja(e,t){return"<"+e+(t.match(x$)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Kg(e){return ti(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function at(e,t,r){return"<"+e+(r!=null?Kg(r):"")+(t!=null?(t.match(x$)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function _j(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function ste(e,t){switch(typeof e){case"string":var r=at("vt:lpwstr",qr(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return at((e|0)==e?"vt:i4":"vt:r8",qr(String(e)));case"boolean":return at("vt:bool",e?"true":"false")}if(e instanceof Date)return at("vt:filetime",_j(e));throw new Error("Unable to serialize "+e)}var La={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},jp=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Ns={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function ote(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,i=5;i>=0;--i)a=a*256+e[t+i];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function lte(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,i=0,s=n?-t:t;isFinite(s)?s==0?a=i=0:(a=Math.floor(Math.log(s)/Math.LN2),i=s*Math.pow(2,52-a),a<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?a=-1022:(i-=Math.pow(2,52),a+=1023)):(a=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(a&15)<<4|i&15,e[r+7]=a>>4|n}var TO=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,i=e[0][n].length;a<i;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},CO=Cr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Mc(t)})):TO(e)}:TO,kO=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(Vm(e,a)));return n.join("").replace(ag,"")},D3=Cr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(ag,""):kO(e,t,r)}:kO,OO=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},y$=Cr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):OO(e,t,r)}:OO,PO=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(Eh(e,a)));return n.join("")},Xv=Cr?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):PO(t,r,n)}:PO,b$=function(e,t){var r=Ss(e,t);return r>0?Xv(e,t+4,t+4+r-1):""},w$=b$,_$=function(e,t){var r=Ss(e,t);return r>0?Xv(e,t+4,t+4+r-1):""},N$=_$,S$=function(e,t){var r=2*Ss(e,t);return r>0?Xv(e,t+4,t+4+r-1):""},j$=S$,A$=function(t,r){var n=Ss(t,r);return n>0?D3(t,r+4,r+4+n):""},E$=A$,T$=function(e,t){var r=Ss(e,t);return r>0?Xv(e,t+4,t+4+r):""},C$=T$,k$=function(e,t){return ote(e,t)},bb=k$,I3=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Cr&&(w$=function(t,r){if(!Buffer.isBuffer(t))return b$(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},N$=function(t,r){if(!Buffer.isBuffer(t))return _$(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},j$=function(t,r){if(!Buffer.isBuffer(t))return S$(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},E$=function(t,r){if(!Buffer.isBuffer(t))return A$(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},C$=function(t,r){if(!Buffer.isBuffer(t))return T$(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},bb=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):k$(t,r)},I3=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Eh=function(e,t){return e[t]},Vm=function(e,t){return e[t+1]*256+e[t]},cte=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Ss=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},zd=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},ute=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function sg(e,t){var r="",n,a,i=[],s,l,c,u;switch(t){case"dbcs":if(u=this.l,Cr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(Vm(this,u)),u+=2;e*=2;break;case"utf8":r=Xv(this,this.l,this.l+e);break;case"utf16le":e*=2,r=D3(this,this.l,this.l+e);break;case"wstr":return sg.call(this,e,"dbcs");case"lpstr-ansi":r=w$(this,this.l),e=4+Ss(this,this.l);break;case"lpstr-cp":r=N$(this,this.l),e=4+Ss(this,this.l);break;case"lpwstr":r=j$(this,this.l),e=4+2*Ss(this,this.l);break;case"lpp4":e=4+Ss(this,this.l),r=E$(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Ss(this,this.l),r=C$(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(s=Eh(this,this.l+e++))!==0;)i.push(T1(s));r=i.join("");break;case"_wstr":for(e=0,r="";(s=Vm(this,this.l+e))!==0;)i.push(T1(s)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return s=Eh(this,u),this.l=u+1,l=sg.call(this,e-c,s?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(T1(Vm(this,u))),u+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return s=Eh(this,u),this.l=u+1,l=sg.call(this,e-c,s?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(T1(Eh(this,u))),u+=1}r=i.join("");break;default:switch(e){case 1:return n=Eh(this,this.l),this.l++,n;case 2:return n=(t==="i"?cte:Vm)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(n=(e>0?zd:ute)(this,this.l),this.l+=4,n):(a=Ss(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=bb(this,this.l):a=bb([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=y$(this,this.l,e);break}}return this.l+=e,r}var dte=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},fte=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},hte=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function pte(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)hte(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var s=t.charCodeAt(a);this[this.l++]=s&255,this[this.l++]=s>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,dte(this,t,this.l);break;case 8:if(n=8,r==="f"){lte(this,t,this.l);break}case 16:break;case-4:n=4,fte(this,t,this.l);break}return this.l+=n,this}function O$(e,t){var r=y$(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function _s(e,t){e.l=t,e.read_shift=sg,e.chk=O$,e.write_shift=pte}function Al(e,t){e.l+=t}function Be(e){var t=jf(e);return _s(t,0),t}function rs(){var e=[],t=Cr?256:2048,r=function(u){var d=Be(u);return _s(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},s=function(){return a(),Xa(e)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:l,end:s,_bufs:e}}function Ke(e,t,r,n){var a=+t,i;if(!isNaN(a)){n||(n=ooe[a].p||(r||[]).length||0),i=1+(a>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var s=e.next(i);a<=127?s.write_shift(1,a):(s.write_shift(1,(a&127)+128),s.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)s.write_shift(1,(n&127)+128),n>>=7;else{s.write_shift(1,n);break}n>0&&I3(r)&&e.push(r)}}function og(e,t,r){var n=is(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function LO(e,t,r){var n=is(e);return n.s=og(n.s,t.s,r),n.e=og(n.e,t.s,r),n}function lg(e,t){if(e.cRel&&e.c<0)for(e=is(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=is(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Wr(e);return!e.cRel&&e.cRel!=null&&(r=vte(r)),!e.rRel&&e.rRel!=null&&(r=mte(r)),r}function F5(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+mi(e.s.c)+":"+(e.e.cRel?"":"$")+mi(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Za(e.s.r)+":"+(e.e.rRel?"":"$")+Za(e.e.r):lg(e.s,t.biff)+":"+lg(e.e,t.biff)}function M3(e){return parseInt(gte(e),10)-1}function Za(e){return""+(e+1)}function mte(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function gte(e){return e.replace(/\$(\d+)$/,"$1")}function F3(e){for(var t=xte(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function mi(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function vte(e){return e.replace(/^([A-Z])/,"$$$1")}function xte(e){return e.replace(/^\$([A-Z])/,"$1")}function yte(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ra(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Wr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Ds(e){var t=e.indexOf(":");return t==-1?{s:Ra(e),e:Ra(e)}:{s:Ra(e.slice(0,t)),e:Ra(e.slice(t+1))}}function ca(e,t){return typeof t>"u"||typeof t=="number"?ca(e.s,e.e):(typeof e!="string"&&(e=Wr(e)),typeof t!="string"&&(t=Wr(t)),e==t?e:e+":"+t)}function mn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,i=e.length;for(r=0;n<i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===i||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function RO(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Gu(e.z,r?as(t):t)}catch{}try{return e.w=Gu((e.XF||{}).numFmtId||(r?14:0),r?as(t):t)}catch{return""+t}}function Ec(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Jv[e.v]||e.v:t==null?RO(e,e.v):RO(e,t))}function zf(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function P$(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,i=e||(a?[]:{}),s=0,l=0;if(i&&n.origin!=null){if(typeof n.origin=="number")s=n.origin;else{var c=typeof n.origin=="string"?Ra(n.origin):n.origin;s=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var d=mn(i["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),s==-1&&(u.e.r=s=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=t[f].length;++p)if(!(typeof t[f][p]>"u")){var h={v:t[f][p]},g=s+f,m=l+p;if(u.s.r>g&&(u.s.r=g),u.s.c>m&&(u.s.c=m),u.e.r<g&&(u.e.r=g),u.e.c<m&&(u.e.c=m),t[f][p]&&typeof t[f][p]=="object"&&!Array.isArray(t[f][p])&&!(t[f][p]instanceof Date))h=t[f][p];else if(Array.isArray(h.v)&&(h.f=t[f][p][1],h.v=h.v[0]),h.v===null)if(h.f)h.t="n";else if(n.nullError)h.t="e",h.v=0;else if(n.sheetStubs)h.t="z";else continue;else typeof h.v=="number"?h.t="n":typeof h.v=="boolean"?h.t="b":h.v instanceof Date?(h.z=n.dateNF||$n[14],n.cellDates?(h.t="d",h.w=Gu(h.z,as(h.v))):(h.t="n",h.v=as(h.v),h.w=Gu(h.z,h.v))):h.t="s";if(a)i[g]||(i[g]=[]),i[g][m]&&i[g][m].z&&(h.z=i[g][m].z),i[g][m]=h;else{var x=Wr({c:m,r:g});i[x]&&i[x].z&&(h.z=i[x].z),i[x]=h}}}return u.s.c<1e7&&(i["!ref"]=ca(u)),i}function Ap(e,t){return P$(null,e,t)}function bte(e){return e.read_shift(4,"i")}function Ko(e,t){return t||(t=Be(4)),t.write_shift(4,e),t}function gi(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Da(e,t){var r=!1;return t==null&&(r=!0,t=Be(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function wte(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function _te(e,t){return t||(t=Be(4)),t.write_shift(2,0),t.write_shift(2,0),t}function $3(e,t){var r=e.l,n=e.read_shift(1),a=gi(e),i=[],s={t:a,h:a};if(n&1){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(wte(e));s.r=i}else s.r=[{ich:0,ifnt:0}];return e.l=r+t,s}function Nte(e,t){var r=!1;return t==null&&(r=!0,t=Be(15+4*e.t.length)),t.write_shift(1,0),Da(e.t,t),r?t.slice(0,t.l):t}var Ste=$3;function jte(e,t){var r=!1;return t==null&&(r=!0,t=Be(23+4*e.t.length)),t.write_shift(1,1),Da(e.t,t),t.write_shift(4,1),_te({},t),r?t.slice(0,t.l):t}function ho(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function qf(e,t){return t==null&&(t=Be(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Hf(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Wf(e,t){return t==null&&(t=Be(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Ate=gi,L$=Da;function B3(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function wb(e,t){var r=!1;return t==null&&(r=!0,t=Be(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Ete=gi,Nj=B3,U3=wb;function R$(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?bb([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):zd(t,0)>>2;return r?a/100:a}function D$(e,t){t==null&&(t=Be(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function I$(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function Tte(e,t){return t||(t=Be(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Vf=I$,Ep=Tte;function Tp(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Af(e,t){return(t||Be(8)).write_shift(8,e,"f")}function Cte(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),i=e.read_shift(2,"i"),s=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=Fte[a];u&&(t.rgb=WO(u));break;case 2:t.rgb=WO([s,l,c]);break;case 3:t.theme=a;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function _b(e,t){if(t||(t=Be(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function kte(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Ote(e,t){t||(t=Be(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}var M$=2,ys=3,P1=11,Nb=19,L1=64,Pte=65,Lte=71,Rte=4108,Dte=4126,Ya=80,DO={1:{n:"CodePage",t:M$},2:{n:"Category",t:Ya},3:{n:"PresentationFormat",t:Ya},4:{n:"ByteCount",t:ys},5:{n:"LineCount",t:ys},6:{n:"ParagraphCount",t:ys},7:{n:"SlideCount",t:ys},8:{n:"NoteCount",t:ys},9:{n:"HiddenCount",t:ys},10:{n:"MultimediaClipCount",t:ys},11:{n:"ScaleCrop",t:P1},12:{n:"HeadingPairs",t:Rte},13:{n:"TitlesOfParts",t:Dte},14:{n:"Manager",t:Ya},15:{n:"Company",t:Ya},16:{n:"LinksUpToDate",t:P1},17:{n:"CharacterCount",t:ys},19:{n:"SharedDoc",t:P1},22:{n:"HyperlinksChanged",t:P1},23:{n:"AppVersion",t:ys,p:"version"},24:{n:"DigSig",t:Pte},26:{n:"ContentType",t:Ya},27:{n:"ContentStatus",t:Ya},28:{n:"Language",t:Ya},29:{n:"Version",t:Ya},255:{},2147483648:{n:"Locale",t:Nb},2147483651:{n:"Behavior",t:Nb},1919054434:{}},IO={1:{n:"CodePage",t:M$},2:{n:"Title",t:Ya},3:{n:"Subject",t:Ya},4:{n:"Author",t:Ya},5:{n:"Keywords",t:Ya},6:{n:"Comments",t:Ya},7:{n:"Template",t:Ya},8:{n:"LastAuthor",t:Ya},9:{n:"RevNumber",t:Ya},10:{n:"EditTime",t:L1},11:{n:"LastPrinted",t:L1},12:{n:"CreatedDate",t:L1},13:{n:"ModifiedDate",t:L1},14:{n:"PageCount",t:ys},15:{n:"WordCount",t:ys},16:{n:"CharCount",t:ys},17:{n:"Thumbnail",t:Lte},18:{n:"Application",t:Ya},19:{n:"DocSecurity",t:ys},255:{},2147483648:{n:"Locale",t:Nb},2147483651:{n:"Behavior",t:Nb},1919054434:{}};function Ite(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Mte=Ite([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Fte=is(Mte),Jv={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},$te={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},R1={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function F$(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function $$(e,t){var r=Yee($te),n=[],a;n[n.length]=da,n[n.length]=at("Types",null,{xmlns:La.CT,"xmlns:xsd":La.xsd,"xmlns:xsi":La.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return at("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=at("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:R1[c][t.bookType]||R1[c].xlsx}))},s=function(c){(e[c]||[]).forEach(function(u){n[n.length]=at("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:R1[c][t.bookType]||R1[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(u){n[n.length]=at("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return i("workbooks"),s("sheets"),s("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),s("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Sr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function B$(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function s0(e){var t=[da,at("Relationships",null,{xmlns:La.RELS})];return ti(e["!id"]).forEach(function(r){t[t.length]=at("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Ur(e,t,r,n,a,i){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[Sr.HLINK,Sr.XPATH,Sr.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}function Bte(e){var t=[da];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function MO(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function Ute(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function zte(e){var t=[da];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(MO(e[r][0],e[r][1])),t.push(Ute("",e[r][0]));return t.push(MO("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function U$(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+pb.version+"</meta:generator></office:meta></office:document-meta>"}var hf=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function $5(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=qr(t),n[n.length]=r?at(e,t,r):Ja(e,t))}function z$(e,t){var r=t||{},n=[da,at("cp:coreProperties",null,{"xmlns:cp":La.CORE_PROPS,"xmlns:dc":La.dc,"xmlns:dcterms":La.dcterms,"xmlns:dcmitype":La.dcmitype,"xmlns:xsi":La.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&$5("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:_j(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&$5("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:_j(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var i=0;i!=hf.length;++i){var s=hf[i],l=r.Props&&r.Props[s[1]]!=null?r.Props[s[1]]:e?e[s[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&$5(s[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var o0=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],q$=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function H$(e){var t=[],r=at;return e||(e={}),e.Application="SheetJS",t[t.length]=da,t[t.length]=at("Properties",null,{xmlns:La.EXT_PROPS,"xmlns:vt":La.vt}),o0.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=qr(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+qr(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function W$(e){var t=[da,at("Properties",null,{xmlns:La.CUST_PROPS,"xmlns:vt":La.vt})];if(!e)return t.join("");var r=1;return ti(e).forEach(function(a){++r,t[t.length]=at("property",ste(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:qr(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var FO={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function qte(e,t){var r=[];return ti(FO).map(function(n){for(var a=0;a<hf.length;++a)if(hf[a][1]==n)return hf[a];for(a=0;a<o0.length;++a)if(o0[a][1]==n)return o0[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(Ja(FO[n[1]]||n[1],a))}}),at("DocumentProperties",r.join(""),{xmlns:Ns.o})}function Hte(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&ti(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var s=0;s<hf.length;++s)if(i==hf[s][1])return;for(s=0;s<o0.length;++s)if(i==o0[s][1])return;for(s=0;s<r.length;++s)if(i==r[s])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(at(jO(i),l,{"dt:dt":c}))}}),t&&ti(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var s=t[i],l="string";typeof s=="number"?(l="float",s=String(s)):s===!0||s===!1?(l="boolean",s=s?"1":"0"):s instanceof Date?(l="dateTime.tz",s=s.toISOString()):s=String(s),a.push(at(jO(i),s,{"dt:dt":l}))}}),"<"+n+' xmlns="'+Ns.o+'">'+a.join("")+"</"+n+">"}function Wte(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),a+=i);var s=Be(8);return s.write_shift(4,n),s.write_shift(4,a),s}function $O(e,t){var r=Be(4),n=Be(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Be(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=Wte(t);break;case 31:case 80:for(n=Be(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Xa([r,n])}var V$=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Vte(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function BO(e,t,r){var n=Be(8),a=[],i=[],s=8,l=0,c=Be(8),u=Be(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),i.push(c),a.push(u),s+=8+c.length,!t){u=Be(8),u.write_shift(4,0),a.unshift(u);var d=[Be(4)];for(d[0].write_shift(4,e.length),l=0;l<e.length;++l){var f=e[l][0];for(c=Be(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Xa(d),i.unshift(c),s+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(V$.indexOf(e[l][0])>-1||q$.indexOf(e[l][0])>-1)&&e[l][1]!=null){var p=e[l][1],h=0;if(t){h=+t[e[l][0]];var g=r[h];if(g.p=="version"&&typeof p=="string"){var m=p.split(".");p=(+m[0]<<16)+(+m[1]||0)}c=$O(g.t,p)}else{var x=Vte(p);x==-1&&(x=31,p=String(p)),c=$O(x,p)}i.push(c),u=Be(8),u.write_shift(4,t?h:2+l),a.push(u),s+=8+c.length}var y=8*(i.length+1);for(l=0;l<i.length;++l)a[l].write_shift(4,y),y+=i[l].length;return n.write_shift(4,s),n.write_shift(4,i.length),Xa([n].concat(a).concat(i))}function UO(e,t,r,n,a,i){var s=Be(a?68:48),l=[s];s.write_shift(2,65534),s.write_shift(2,0),s.write_shift(4,842412599),s.write_shift(16,Kr.utils.consts.HEADER_CLSID,"hex"),s.write_shift(4,a?2:1),s.write_shift(16,t,"hex"),s.write_shift(4,a?68:48);var c=BO(e,r,n);if(l.push(c),a){var u=BO(a,null,null);s.write_shift(16,i,"hex"),s.write_shift(4,68+c.length),l.push(u)}return Xa(l)}function Gte(e,t){t||(t=Be(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function Kte(e,t){return e.read_shift(t)===1}function ki(e,t){return t||(t=Be(2)),t.write_shift(2,+!!e),t}function G$(e){return e.read_shift(2,"u")}function Xs(e,t){return t||(t=Be(2)),t.write_shift(2,e),t}function K$(e,t,r){return r||(r=Be(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function Y$(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var s=n?e.read_shift(n,a):"";return s}function Yte(e){var t=e.t||"",r=Be(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Be(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return Xa(a)}function Xte(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function Jte(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Xte(e,n,r)}function Qte(e,t,r){if(r.biff>5)return Jte(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function X$(e,t,r){return r||(r=Be(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function zO(e,t){t||(t=Be(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function Zte(e){var t=Be(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),i=a>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var s=[8,6815827,6619237,4849780,83];for(r=0;r<s.length;++r)t.write_shift(4,s[r]);if(i==28)n=n.slice(1),zO(n,t);else if(i&2){for(s="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));var l=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&zO(a>-1?n.slice(a+1):"",t)}else{for(s="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function Ef(e,t,r,n){return n||(n=Be(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function ere(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),i=e.read_shift(n,"i"),s=e.read_shift(n,"i");return[a,i,s]}function tre(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function J$(e,t){return t||(t=Be(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function z3(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Be(a);return i.write_shift(2,n),i.write_shift(2,t),a>4&&i.write_shift(2,29282),a>6&&i.write_shift(2,1997),a>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function rre(e,t){var r=!t||t.biff==8,n=Be(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function nre(e,t){var r=!t||t.biff>=8?2:1,n=Be(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function are(e,t){var r=Be(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=Yte(e[a]);var i=Xa([r].concat(n));return i.parts=[r.length].concat(n.map(function(s){return s.length})),i}function ire(){var e=Be(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function sre(e){var t=Be(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function ore(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,i=Be(a);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function lre(e,t,r,n){var a=Be(10);return Ef(e,t,n,a),a.write_shift(4,r),a}function cre(e,t,r,n,a){var i=!a||a.biff==8,s=Be(8+ +i+(1+i)*r.length);return Ef(e,t,n,s),s.write_shift(2,r.length),i&&s.write_shift(1,1),s.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),s}function ure(e,t,r,n){var a=r&&r.biff==5;n||(n=Be(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}function dre(e,t){var r=t.biff==8||!t.biff?4:2,n=Be(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function qO(e,t,r,n){var a=r&&r.biff==5;n||(n=Be(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&a&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function fre(e){var t=Be(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function hre(e,t,r,n,a,i){var s=Be(8);return Ef(e,t,n,s),K$(r,i,s),s}function pre(e,t,r,n){var a=Be(14);return Ef(e,t,n,a),Af(r,a),a}function mre(e,t,r){if(r.biff<8)return gre(e,t,r);for(var n=[],a=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(ere(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function gre(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=Y$(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function vre(e){var t=Be(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)J$(e[r],t);return t}function xre(e){var t=Be(24),r=Ra(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Xa([t,Zte(e[1])])}function yre(e){var t=e[1].Tooltip,r=Be(10+2*(t.length+1));r.write_shift(2,2048);var n=Ra(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function bre(e){return e||(e=Be(4)),e.write_shift(2,1),e.write_shift(2,1),e}function wre(e,t,r){if(!r.cellStyles)return Al(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),i=e.read_shift(n),s=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:i,w:s,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function _re(e,t){var r=Be(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function Nre(e){for(var t=Be(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}function Sre(e,t,r){var n=Be(15);return Zv(n,e,t),n.write_shift(8,r,"f"),n}function jre(e,t,r){var n=Be(9);return Zv(n,e,t),n.write_shift(2,r),n}var Are=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=O3({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=jf(1);switch(c.type){case"base64":d=zo(Ac(l));break;case"binary":d=zo(l);break;case"buffer":case"array":d=l;break}_s(d,0);var f=d.read_shift(1),p=!!(f&136),h=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:h=!0,p=!0;break;case 49:h=!0,p=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var m=0,x=521;f==2&&(m=d.read_shift(2)),d.l+=3,f!=2&&(m=d.read_shift(4)),m>1048576&&(m=1e6),f!=2&&(x=d.read_shift(2));var y=d.read_shift(2),v=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(v=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var b=[],N={},_=Math.min(d.length,f==2?521:x-10-(h?264:0)),E=g?32:11;d.l<_&&d[d.l]!=13;)switch(N={},N.name=mb.utils.decode(v,d.slice(d.l,d.l+E)).replace(/[\u0000\r\n].*$/g,""),d.l+=E,N.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(N.offset=d.read_shift(4)),N.len=d.read_shift(1),f==2&&(N.offset=d.read_shift(2)),N.dec=d.read_shift(1),N.name.length&&b.push(N),f!=2&&(d.l+=g?13:14),N.type){case"B":(!h||N.len!=8)&&c.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+N.type)}if(d[d.l]!==13&&(d.l=x-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=x;var j=0,A=0;for(u[0]=[],A=0;A!=b.length;++A)u[0][A]=b[A].name;for(;m-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++j]=[],A=0,A=0;A!=b.length;++A){var T=d.slice(d.l,d.l+b[A].len);d.l+=b[A].len,_s(T,0);var P=mb.utils.decode(v,T);switch(b[A].type){case"C":P.trim().length&&(u[j][A]=P.replace(/\s+$/,""));break;case"D":P.length===8?u[j][A]=new Date(+P.slice(0,4),+P.slice(4,6)-1,+P.slice(6,8)):u[j][A]=P;break;case"F":u[j][A]=parseFloat(P.trim());break;case"+":case"I":u[j][A]=g?T.read_shift(-4,"i")^2147483648:T.read_shift(4,"i");break;case"L":switch(P.trim().toUpperCase()){case"Y":case"T":u[j][A]=!0;break;case"N":case"F":u[j][A]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+P+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[j][A]="##MEMO##"+(g?parseInt(P.trim(),10):T.read_shift(4));break;case"N":P=P.replace(/\u0000/g,"").trim(),P&&P!="."&&(u[j][A]=+P||0);break;case"@":u[j][A]=new Date(T.read_shift(-8,"f")-621356832e5);break;case"T":u[j][A]=new Date((T.read_shift(4)-2440588)*864e5+T.read_shift(4));break;case"Y":u[j][A]=T.read_shift(4,"i")/1e4+T.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[j][A]=-T.read_shift(-8,"f");break;case"B":if(h&&b[A].len==8){u[j][A]=T.read_shift(8,"f");break}case"G":case"P":T.l+=b[A].len;break;case"0":if(b[A].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[A].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=b,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=Ap(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(l,c){try{return zf(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function s(l,c){var u=c||{};if(+u.codepage>=0&&Hg(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=rs(),f=Tb(l,{header:1,raw:!0,cellDates:!0}),p=f[0],h=f.slice(1),g=l["!cols"]||[],m=0,x=0,y=0,v=1;for(m=0;m<p.length;++m){if(((g[m]||{}).DBF||{}).name){p[m]=g[m].DBF.name,++y;continue}if(p[m]!=null){if(++y,typeof p[m]=="number"&&(p[m]=p[m].toString(10)),typeof p[m]!="string")throw new Error("DBF Invalid column name "+p[m]+" |"+typeof p[m]+"|");if(p.indexOf(p[m])!==m){for(x=0;x<1024;++x)if(p.indexOf(p[m]+"_"+x)==-1){p[m]+="_"+x;break}}}}var b=mn(l["!ref"]),N=[],_=[],E=[];for(m=0;m<=b.e.c-b.s.c;++m){var j="",A="",T=0,P=[];for(x=0;x<h.length;++x)h[x][m]!=null&&P.push(h[x][m]);if(P.length==0||p[m]==null){N[m]="?";continue}for(x=0;x<P.length;++x){switch(typeof P[x]){case"number":A="B";break;case"string":A="C";break;case"boolean":A="L";break;case"object":A=P[x]instanceof Date?"D":"C";break;default:A="C"}T=Math.max(T,String(P[x]).length),j=j&&j!=A?"C":A}T>250&&(T=250),A=((g[m]||{}).DBF||{}).type,A=="C"&&g[m].DBF.len>T&&(T=g[m].DBF.len),j=="B"&&A=="N"&&(j="N",E[m]=g[m].DBF.dec,T=g[m].DBF.len),_[m]=j=="C"||A=="N"?T:i[j]||0,v+=_[m],N[m]=j}var O=d.next(32);for(O.write_shift(4,318902576),O.write_shift(4,h.length),O.write_shift(2,296+32*y),O.write_shift(2,v),m=0;m<4;++m)O.write_shift(4,0);for(O.write_shift(4,0|(+t[ZF]||3)<<8),m=0,x=0;m<p.length;++m)if(p[m]!=null){var R=d.next(32),I=(p[m].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);R.write_shift(1,I,"sbcs"),R.write_shift(1,N[m]=="?"?"C":N[m],"sbcs"),R.write_shift(4,x),R.write_shift(1,_[m]||i[N[m]]||0),R.write_shift(1,E[m]||0),R.write_shift(1,2),R.write_shift(4,0),R.write_shift(1,0),R.write_shift(4,0),R.write_shift(4,0),x+=_[m]||i[N[m]]||0}var z=d.next(264);for(z.write_shift(4,13),m=0;m<65;++m)z.write_shift(4,0);for(m=0;m<h.length;++m){var Y=d.next(v);for(Y.write_shift(1,0),x=0;x<p.length;++x)if(p[x]!=null)switch(N[x]){case"L":Y.write_shift(1,h[m][x]==null?63:h[m][x]?84:70);break;case"B":Y.write_shift(8,h[m][x]||0,"f");break;case"N":var ie="0";for(typeof h[m][x]=="number"&&(ie=h[m][x].toFixed(E[x]||0)),y=0;y<_[x]-ie.length;++y)Y.write_shift(1,32);Y.write_shift(1,ie,"sbcs");break;case"D":h[m][x]?(Y.write_shift(4,("0000"+h[m][x].getFullYear()).slice(-4),"sbcs"),Y.write_shift(2,("00"+(h[m][x].getMonth()+1)).slice(-2),"sbcs"),Y.write_shift(2,("00"+h[m][x].getDate()).slice(-2),"sbcs")):Y.write_shift(8,"00000000","sbcs");break;case"C":var re=String(h[m][x]!=null?h[m][x]:"").slice(0,_[x]);for(Y.write_shift(1,re,"sbcs"),y=0;y<_[x]-re.length;++y)Y.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:s}}(),Ere=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+ti(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,h){var g=e[h];return typeof g=="number"?hO(g):g},n=function(p,h,g){var m=h.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return m==59?p:hO(m)};e["|"]=254;function a(p,h){switch(h.type){case"base64":return i(Ac(p),h);case"binary":return i(p,h);case"buffer":return i(Cr&&Buffer.isBuffer(p)?p.toString("binary"):Kv(p),h);case"array":return i(gw(p),h)}throw new Error("Unrecognized type "+h.type)}function i(p,h){var g=p.split(/[\n\r]+/),m=-1,x=-1,y=0,v=0,b=[],N=[],_=null,E={},j=[],A=[],T=[],P=0,O;for(+h.codepage>=0&&Hg(+h.codepage);y!==g.length;++y){P=0;var R=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),I=R.replace(/;;/g,"\0").split(";").map(function(U){return U.replace(/\u0000/g,";")}),z=I[0],Y;if(R.length>0)switch(z){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":I[1].charAt(0)=="P"&&N.push(R.slice(3).replace(/;;/g,";"));break;case"C":var ie=!1,re=!1,X=!1,oe=!1,we=-1,_e=-1;for(v=1;v<I.length;++v)switch(I[v].charAt(0)){case"A":break;case"X":x=parseInt(I[v].slice(1))-1,re=!0;break;case"Y":for(m=parseInt(I[v].slice(1))-1,re||(x=0),O=b.length;O<=m;++O)b[O]=[];break;case"K":Y=I[v].slice(1),Y.charAt(0)==='"'?Y=Y.slice(1,Y.length-1):Y==="TRUE"?Y=!0:Y==="FALSE"?Y=!1:isNaN(gc(Y))?isNaN(Vg(Y).getDate())||(Y=Fi(Y)):(Y=gc(Y),_!==null&&d$(_)&&(Y=m$(Y))),ie=!0;break;case"E":oe=!0;var k=jne(I[v].slice(1),{r:m,c:x});b[m][x]=[b[m][x],k];break;case"S":X=!0,b[m][x]=[b[m][x],"S5S"];break;case"G":break;case"R":we=parseInt(I[v].slice(1))-1;break;case"C":_e=parseInt(I[v].slice(1))-1;break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+R)}if(ie&&(b[m][x]&&b[m][x].length==2?b[m][x][0]=Y:b[m][x]=Y,_=null),X){if(oe)throw new Error("SYLK shared formula cannot have own formula");var F=we>-1&&b[we][_e];if(!F||!F[1])throw new Error("SYLK shared formula cannot find base");b[m][x][1]=Ane(F[1],{r:m-we,c:x-_e})}break;case"F":var B=0;for(v=1;v<I.length;++v)switch(I[v].charAt(0)){case"X":x=parseInt(I[v].slice(1))-1,++B;break;case"Y":for(m=parseInt(I[v].slice(1))-1,O=b.length;O<=m;++O)b[O]=[];break;case"M":P=parseInt(I[v].slice(1))/20;break;case"F":break;case"G":break;case"P":_=N[parseInt(I[v].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(T=I[v].slice(1).split(" "),O=parseInt(T[0],10);O<=parseInt(T[1],10);++O)P=parseInt(T[2],10),A[O-1]=P===0?{hidden:!0}:{wch:P},q3(A[O-1]);break;case"C":x=parseInt(I[v].slice(1))-1,A[x]||(A[x]={});break;case"R":m=parseInt(I[v].slice(1))-1,j[m]||(j[m]={}),P>0?(j[m].hpt=P,j[m].hpx=r9(P)):P===0&&(j[m].hidden=!0);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+R)}B<1&&(_=null);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+R)}}return j.length>0&&(E["!rows"]=j),A.length>0&&(E["!cols"]=A),h&&h.sheetRows&&(b=b.slice(0,h.sheetRows)),[b,E]}function s(p,h){var g=a(p,h),m=g[0],x=g[1],y=Ap(m,h);return ti(x).forEach(function(v){y[v]=x[v]}),y}function l(p,h){return zf(s(p,h),h)}function c(p,h,g,m){var x="C;Y"+(g+1)+";X"+(m+1)+";K";switch(p.t){case"n":x+=p.v||0,p.f&&!p.F&&(x+=";E"+W3(p.f,{r:g,c:m}));break;case"b":x+=p.v?"TRUE":"FALSE";break;case"e":x+=p.w||p.v;break;case"d":x+='"'+(p.w||p.v)+'"';break;case"s":x+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return x}function u(p,h){h.forEach(function(g,m){var x="F;W"+(m+1)+" "+(m+1)+" ";g.hidden?x+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=Sb(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=jb(g.wpx)),typeof g.wch=="number"&&(x+=Math.round(g.wch))),x.charAt(x.length-1)!=" "&&p.push(x)})}function d(p,h){h.forEach(function(g,m){var x="F;";g.hidden?x+="M0;":g.hpt?x+="M"+20*g.hpt+";":g.hpx&&(x+="M"+20*Ab(g.hpx)+";"),x.length>2&&p.push(x+"R"+(m+1))})}function f(p,h){var g=["ID;PWXL;N;E"],m=[],x=mn(p["!ref"]),y,v=Array.isArray(p),b=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),p["!cols"]&&u(g,p["!cols"]),p["!rows"]&&d(g,p["!rows"]),g.push("B;Y"+(x.e.r-x.s.r+1)+";X"+(x.e.c-x.s.c+1)+";D"+[x.s.c,x.s.r,x.e.c,x.e.r].join(" "));for(var N=x.s.r;N<=x.e.r;++N)for(var _=x.s.c;_<=x.e.c;++_){var E=Wr({r:N,c:_});y=v?(p[N]||[])[_]:p[E],!(!y||y.v==null&&(!y.f||y.F))&&m.push(c(y,p,N,_))}return g.join(b)+b+m.join(b)+b+"E"+b}return{to_workbook:l,to_sheet:s,from_sheet:f}}(),Tre=function(){function e(i,s){switch(s.type){case"base64":return t(Ac(i),s);case"binary":return t(i,s);case"buffer":return t(Cr&&Buffer.isBuffer(i)?i.toString("binary"):Kv(i),s);case"array":return t(gw(i),s)}throw new Error("Unrecognized type "+s.type)}function t(i,s){for(var l=i.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var p=l[d].trim().split(","),h=p[0],g=p[1];++d;for(var m=l[d]||"";(m.match(/["]/g)||[]).length&1&&d<l.length-1;)m+=`
`+l[++d];switch(m=m.trim(),+h){case-1:if(m==="BOT"){f[++c]=[],u=0;continue}else if(m!=="EOD")throw new Error("Unrecognized DIF special command "+m);break;case 0:m==="TRUE"?f[c][u]=!0:m==="FALSE"?f[c][u]=!1:isNaN(gc(g))?isNaN(Vg(g).getDate())?f[c][u]=g:f[c][u]=Fi(g):f[c][u]=gc(g),++u;break;case 1:m=m.slice(1,m.length-1),m=m.replace(/""/g,'"'),m&&m.match(/^=".*"$/)&&(m=m.slice(2,-1)),f[c][u++]=m!==""?m:null;break}if(m==="EOD")break}}return s&&s.sheetRows&&(f=f.slice(0,s.sheetRows)),f}function r(i,s){return Ap(e(i,s),s)}function n(i,s){return zf(r(i,s),s)}var a=function(){var i=function(c,u,d,f,p){c.push(u),c.push(d+","+f),c.push('"'+p.replace(/"/g,'""')+'"')},s=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=mn(c["!ref"]),f,p=Array.isArray(c);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,d.e.r-d.s.r+1,""),i(u,"TUPLES",0,d.e.c-d.s.c+1,""),i(u,"DATA",0,0,"");for(var h=d.s.r;h<=d.e.r;++h){s(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var m=Wr({r:h,c:g});if(f=p?(c[h]||[])[g]:c[m],!f){s(u,1,0,"");continue}switch(f.t){case"n":var x=f.w;!x&&f.v!=null&&(x=f.v),x==null?f.f&&!f.F?s(u,1,0,"="+f.f):s(u,1,0,""):s(u,0,x,"V");break;case"b":s(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":s(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Gu(f.z||$n[14],as(Fi(f.v)))),s(u,0,f.w,"V");break;default:s(u,1,0,"")}}}s(u,-1,0,"EOD");var y=`\r
`,v=u.join(y);return v}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),Q$=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,p){for(var h=f.split(`
`),g=-1,m=-1,x=0,y=[];x!==h.length;++x){var v=h[x].trim().split(":");if(v[0]==="cell"){var b=Ra(v[1]);if(y.length<=b.r)for(g=y.length;g<=b.r;++g)y[g]||(y[g]=[]);switch(g=b.r,m=b.c,v[2]){case"t":y[g][m]=e(v[3]);break;case"v":y[g][m]=+v[3];break;case"vtf":var N=v[v.length-1];case"vtc":switch(v[3]){case"nl":y[g][m]=!!+v[4];break;default:y[g][m]=+v[4];break}v[2]=="vtf"&&(y[g][m]=[y[g][m],N])}}}return p&&p.sheetRows&&(y=y.slice(0,p.sheetRows)),y}function n(f,p){return Ap(r(f,p),p)}function a(f,p){return zf(n(f,p),p)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),s=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var p=[],h=[],g,m="",x=Ds(f["!ref"]),y=Array.isArray(f),v=x.s.r;v<=x.e.r;++v)for(var b=x.s.c;b<=x.e.c;++b)if(m=Wr({r:v,c:b}),g=y?(f[v]||[])[b]:f[m],!(!g||g.v==null||g.t==="z")){switch(h=["cell",m,"t"],g.t){case"s":case"str":h.push(t(g.v));break;case"n":g.f?(h[2]="vtf",h[3]="n",h[4]=g.v,h[5]=t(g.f)):(h[2]="v",h[3]=g.v);break;case"b":h[2]="vt"+(g.f?"f":"c"),h[3]="nl",h[4]=g.v?"1":"0",h[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var N=as(Fi(g.v));h[2]="vtc",h[3]="nd",h[4]=""+N,h[5]=g.w||Gu(g.z||$n[14],N);break;case"e":continue}p.push(h.join(":"))}return p.push("sheet:c:"+(x.e.c-x.s.c+1)+":r:"+(x.e.r-x.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function d(f){return[i,s,l,s,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),Cre=function(){function e(d,f,p,h,g){g.raw?f[p][h]=d:d===""||(d==="TRUE"?f[p][h]=!0:d==="FALSE"?f[p][h]=!1:isNaN(gc(d))?isNaN(Vg(d).getDate())?f[p][h]=d:f[p][h]=Fi(d):f[p][h]=gc(d))}function t(d,f){var p=f||{},h=[];if(!d||d.length===0)return h;for(var g=d.split(/[\r\n]/),m=g.length-1;m>=0&&g[m].length===0;)--m;for(var x=10,y=0,v=0;v<=m;++v)y=g[v].indexOf(" "),y==-1?y=g[v].length:y++,x=Math.max(x,y);for(v=0;v<=m;++v){h[v]=[];var b=0;for(e(g[v].slice(0,x).trim(),h,v,b,p),b=1;b<=(g[v].length-x)/10+1;++b)e(g[v].slice(x+(b-1)*10,x+b*10).trim(),h,v,b,p)}return p.sheetRows&&(h=h.slice(0,p.sheetRows)),h}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},p=!1,h=0,g=0;h<d.length;++h)(g=d.charCodeAt(h))==34?p=!p:!p&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&g.push([f[h],h]);if(!g.length){f=n;for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&g.push([f[h],h])}return g.sort(function(m,x){return m[0]-x[0]||n[m[1]]-n[x[1]]}),r[g.pop()[1]]||44}function i(d,f){var p=f||{},h="",g=p.dense?[]:{},m={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(h=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(h=d.charAt(4),d=d.slice(6)):h=a(d.slice(0,1024)):p&&p.FS?h=p.FS:h=a(d.slice(0,1024));var x=0,y=0,v=0,b=0,N=0,_=h.charCodeAt(0),E=!1,j=0,A=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var T=p.dateNF!=null?Wee(p.dateNF):null;function P(){var O=d.slice(b,N),R={};if(O.charAt(0)=='"'&&O.charAt(O.length-1)=='"'&&(O=O.slice(1,-1).replace(/""/g,'"')),O.length===0)R.t="z";else if(p.raw)R.t="s",R.v=O;else if(O.trim().length===0)R.t="s",R.v=O;else if(O.charCodeAt(0)==61)O.charCodeAt(1)==34&&O.charCodeAt(O.length-1)==34?(R.t="s",R.v=O.slice(2,-1).replace(/""/g,'"')):Ene(O)?(R.t="n",R.f=O.slice(1)):(R.t="s",R.v=O);else if(O=="TRUE")R.t="b",R.v=!0;else if(O=="FALSE")R.t="b",R.v=!1;else if(!isNaN(v=gc(O)))R.t="n",p.cellText!==!1&&(R.w=O),R.v=v;else if(!isNaN(Vg(O).getDate())||T&&O.match(T)){R.z=p.dateNF||$n[14];var I=0;T&&O.match(T)&&(O=Vee(O,p.dateNF,O.match(T)||[]),I=1),p.cellDates?(R.t="d",R.v=Fi(O,I)):(R.t="n",R.v=as(Fi(O,I))),p.cellText!==!1&&(R.w=Gu(R.z,R.v instanceof Date?as(R.v):R.v)),p.cellNF||delete R.z}else R.t="s",R.v=O;if(R.t=="z"||(p.dense?(g[x]||(g[x]=[]),g[x][y]=R):g[Wr({c:y,r:x})]=R),b=N+1,A=d.charCodeAt(b),m.e.c<y&&(m.e.c=y),m.e.r<x&&(m.e.r=x),j==_)++y;else if(y=0,++x,p.sheetRows&&p.sheetRows<=x)return!0}e:for(;N<d.length;++N)switch(j=d.charCodeAt(N)){case 34:A===34&&(E=!E);break;case _:case 10:case 13:if(!E&&P())break e;break}return N-b>0&&P(),g["!ref"]=ca(m),g}function s(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?i(d,f):Ap(t(d,f),f)}function l(d,f){var p="",h=f.type=="string"?[0,0,0,0]:Uoe(d,f);switch(f.type){case"base64":p=Ac(d);break;case"binary":p=d;break;case"buffer":f.codepage==65001?p=d.toString("utf8"):f.codepage&&typeof mb<"u"||(p=Cr&&Buffer.isBuffer(d)?d.toString("binary"):Kv(d));break;case"array":p=gw(d);break;case"string":p=d;break;default:throw new Error("Unrecognized type "+f.type)}return h[0]==239&&h[1]==187&&h[2]==191?p=ig(p.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?p=ig(p):f.type=="binary"&&typeof mb<"u",p.slice(0,19)=="socialcalc:version:"?Q$.to_sheet(f.type=="string"?p:ig(p),f):s(p,f)}function c(d,f){return zf(l(d,f),f)}function u(d){for(var f=[],p=mn(d["!ref"]),h,g=Array.isArray(d),m=p.s.r;m<=p.e.r;++m){for(var x=[],y=p.s.c;y<=p.e.c;++y){var v=Wr({r:m,c:y});if(h=g?(d[m]||[])[y]:d[v],!h||h.v==null){x.push("          ");continue}for(var b=(h.w||(Ec(h),h.w)||"").slice(0,10);b.length<10;)b+=" ";x.push(b+(y===0?" ":""))}f.push(x.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}(),HO=function(){function e(k,F,B){if(k){_s(k,k.l||0);for(var U=B.Enum||we;k.l<k.length;){var J=k.read_shift(2),me=U[J]||U[65535],K=k.read_shift(2),te=k.l+K,le=me.f&&me.f(k,K,B);if(k.l=te,F(le,me,J))return}}}function t(k,F){switch(F.type){case"base64":return r(zo(Ac(k)),F);case"binary":return r(zo(k),F);case"buffer":case"array":return r(k,F)}throw"Unsupported type "+F.type}function r(k,F){if(!k)return k;var B=F||{},U=B.dense?[]:{},J="Sheet1",me="",K=0,te={},le=[],ve=[],ge={s:{r:0,c:0},e:{r:0,c:0}},Me=B.sheetRows||0;if(k[2]==0&&(k[3]==8||k[3]==9)&&k.length>=16&&k[14]==5&&k[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(k[2]==2)B.Enum=we,e(k,function(Ie,Qe,$e){switch($e){case 0:B.vers=Ie,Ie>=4096&&(B.qpro=!0);break;case 6:ge=Ie;break;case 204:Ie&&(me=Ie);break;case 222:me=Ie;break;case 15:case 51:B.qpro||(Ie[1].v=Ie[1].v.slice(1));case 13:case 14:case 16:$e==14&&(Ie[2]&112)==112&&(Ie[2]&15)>1&&(Ie[2]&15)<15&&(Ie[1].z=B.dateNF||$n[14],B.cellDates&&(Ie[1].t="d",Ie[1].v=m$(Ie[1].v))),B.qpro&&Ie[3]>K&&(U["!ref"]=ca(ge),te[J]=U,le.push(J),U=B.dense?[]:{},ge={s:{r:0,c:0},e:{r:0,c:0}},K=Ie[3],J=me||"Sheet"+(K+1),me="");var it=B.dense?(U[Ie[0].r]||[])[Ie[0].c]:U[Wr(Ie[0])];if(it){it.t=Ie[1].t,it.v=Ie[1].v,Ie[1].z!=null&&(it.z=Ie[1].z),Ie[1].f!=null&&(it.f=Ie[1].f);break}B.dense?(U[Ie[0].r]||(U[Ie[0].r]=[]),U[Ie[0].r][Ie[0].c]=Ie[1]):U[Wr(Ie[0])]=Ie[1];break}},B);else if(k[2]==26||k[2]==14)B.Enum=_e,k[2]==14&&(B.qpro=!0,k.l=0),e(k,function(Ie,Qe,$e){switch($e){case 204:J=Ie;break;case 22:Ie[1].v=Ie[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ie[3]>K&&(U["!ref"]=ca(ge),te[J]=U,le.push(J),U=B.dense?[]:{},ge={s:{r:0,c:0},e:{r:0,c:0}},K=Ie[3],J="Sheet"+(K+1)),Me>0&&Ie[0].r>=Me)break;B.dense?(U[Ie[0].r]||(U[Ie[0].r]=[]),U[Ie[0].r][Ie[0].c]=Ie[1]):U[Wr(Ie[0])]=Ie[1],ge.e.c<Ie[0].c&&(ge.e.c=Ie[0].c),ge.e.r<Ie[0].r&&(ge.e.r=Ie[0].r);break;case 27:Ie[14e3]&&(ve[Ie[14e3][0]]=Ie[14e3][1]);break;case 1537:ve[Ie[0]]=Ie[1],Ie[0]==K&&(J=Ie[1]);break}},B);else throw new Error("Unrecognized LOTUS BOF "+k[2]);if(U["!ref"]=ca(ge),te[me||J]=U,le.push(me||J),!ve.length)return{SheetNames:le,Sheets:te};for(var Fe={},ee=[],Pe=0;Pe<ve.length;++Pe)te[le[Pe]]?(ee.push(ve[Pe]||le[Pe]),Fe[ve[Pe]]=te[ve[Pe]]||te[le[Pe]]):(ee.push(ve[Pe]),Fe[ve[Pe]]={"!ref":"A1"});return{SheetNames:ee,Sheets:Fe}}function n(k,F){var B=F||{};if(+B.codepage>=0&&Hg(+B.codepage),B.type=="string")throw new Error("Cannot write WK1 to JS string");var U=rs(),J=mn(k["!ref"]),me=Array.isArray(k),K=[];ot(U,0,i(1030)),ot(U,6,c(J));for(var te=Math.min(J.e.r,8191),le=J.s.r;le<=te;++le)for(var ve=Za(le),ge=J.s.c;ge<=J.e.c;++ge){le===J.s.r&&(K[ge]=mi(ge));var Me=K[ge]+ve,Fe=me?(k[le]||[])[ge]:k[Me];if(!(!Fe||Fe.t=="z"))if(Fe.t=="n")(Fe.v|0)==Fe.v&&Fe.v>=-32768&&Fe.v<=32767?ot(U,13,h(le,ge,Fe.v)):ot(U,14,m(le,ge,Fe.v));else{var ee=Ec(Fe);ot(U,15,f(le,ge,ee.slice(0,239)))}}return ot(U,1),U.end()}function a(k,F){var B=F||{};if(+B.codepage>=0&&Hg(+B.codepage),B.type=="string")throw new Error("Cannot write WK3 to JS string");var U=rs();ot(U,0,s(k));for(var J=0,me=0;J<k.SheetNames.length;++J)(k.Sheets[k.SheetNames[J]]||{})["!ref"]&&ot(U,27,oe(k.SheetNames[J],me++));var K=0;for(J=0;J<k.SheetNames.length;++J){var te=k.Sheets[k.SheetNames[J]];if(!(!te||!te["!ref"])){for(var le=mn(te["!ref"]),ve=Array.isArray(te),ge=[],Me=Math.min(le.e.r,8191),Fe=le.s.r;Fe<=Me;++Fe)for(var ee=Za(Fe),Pe=le.s.c;Pe<=le.e.c;++Pe){Fe===le.s.r&&(ge[Pe]=mi(Pe));var Ie=ge[Pe]+ee,Qe=ve?(te[Fe]||[])[Pe]:te[Ie];if(!(!Qe||Qe.t=="z"))if(Qe.t=="n")ot(U,23,P(Fe,Pe,K,Qe.v));else{var $e=Ec(Qe);ot(U,22,j(Fe,Pe,K,$e.slice(0,239)))}}++K}}return ot(U,1),U.end()}function i(k){var F=Be(2);return F.write_shift(2,k),F}function s(k){var F=Be(26);F.write_shift(2,4096),F.write_shift(2,4),F.write_shift(4,0);for(var B=0,U=0,J=0,me=0;me<k.SheetNames.length;++me){var K=k.SheetNames[me],te=k.Sheets[K];if(!(!te||!te["!ref"])){++J;var le=Ds(te["!ref"]);B<le.e.r&&(B=le.e.r),U<le.e.c&&(U=le.e.c)}}return B>8191&&(B=8191),F.write_shift(2,B),F.write_shift(1,J),F.write_shift(1,U),F.write_shift(2,0),F.write_shift(2,0),F.write_shift(1,1),F.write_shift(1,2),F.write_shift(4,0),F.write_shift(4,0),F}function l(k,F,B){var U={s:{c:0,r:0},e:{c:0,r:0}};return F==8&&B.qpro?(U.s.c=k.read_shift(1),k.l++,U.s.r=k.read_shift(2),U.e.c=k.read_shift(1),k.l++,U.e.r=k.read_shift(2),U):(U.s.c=k.read_shift(2),U.s.r=k.read_shift(2),F==12&&B.qpro&&(k.l+=2),U.e.c=k.read_shift(2),U.e.r=k.read_shift(2),F==12&&B.qpro&&(k.l+=2),U.s.c==65535&&(U.s.c=U.e.c=U.s.r=U.e.r=0),U)}function c(k){var F=Be(8);return F.write_shift(2,k.s.c),F.write_shift(2,k.s.r),F.write_shift(2,k.e.c),F.write_shift(2,k.e.r),F}function u(k,F,B){var U=[{c:0,r:0},{t:"n",v:0},0,0];return B.qpro&&B.vers!=20768?(U[0].c=k.read_shift(1),U[3]=k.read_shift(1),U[0].r=k.read_shift(2),k.l+=2):(U[2]=k.read_shift(1),U[0].c=k.read_shift(2),U[0].r=k.read_shift(2)),U}function d(k,F,B){var U=k.l+F,J=u(k,F,B);if(J[1].t="s",B.vers==20768){k.l++;var me=k.read_shift(1);return J[1].v=k.read_shift(me,"utf8"),J}return B.qpro&&k.l++,J[1].v=k.read_shift(U-k.l,"cstr"),J}function f(k,F,B){var U=Be(7+B.length);U.write_shift(1,255),U.write_shift(2,F),U.write_shift(2,k),U.write_shift(1,39);for(var J=0;J<U.length;++J){var me=B.charCodeAt(J);U.write_shift(1,me>=128?95:me)}return U.write_shift(1,0),U}function p(k,F,B){var U=u(k,F,B);return U[1].v=k.read_shift(2,"i"),U}function h(k,F,B){var U=Be(7);return U.write_shift(1,255),U.write_shift(2,F),U.write_shift(2,k),U.write_shift(2,B,"i"),U}function g(k,F,B){var U=u(k,F,B);return U[1].v=k.read_shift(8,"f"),U}function m(k,F,B){var U=Be(13);return U.write_shift(1,255),U.write_shift(2,F),U.write_shift(2,k),U.write_shift(8,B,"f"),U}function x(k,F,B){var U=k.l+F,J=u(k,F,B);if(J[1].v=k.read_shift(8,"f"),B.qpro)k.l=U;else{var me=k.read_shift(2);N(k.slice(k.l,k.l+me),J),k.l+=me}return J}function y(k,F,B){var U=F&32768;return F&=-32769,F=(U?k:0)+(F>=8192?F-16384:F),(U?"":"$")+(B?mi(F):Za(F))}var v={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function N(k,F){_s(k,0);for(var B=[],U=0,J="",me="",K="",te="";k.l<k.length;){var le=k[k.l++];switch(le){case 0:B.push(k.read_shift(8,"f"));break;case 1:me=y(F[0].c,k.read_shift(2),!0),J=y(F[0].r,k.read_shift(2),!1),B.push(me+J);break;case 2:{var ve=y(F[0].c,k.read_shift(2),!0),ge=y(F[0].r,k.read_shift(2),!1);me=y(F[0].c,k.read_shift(2),!0),J=y(F[0].r,k.read_shift(2),!1),B.push(ve+ge+":"+me+J)}break;case 3:if(k.l<k.length){console.error("WK1 premature formula end");return}break;case 4:B.push("("+B.pop()+")");break;case 5:B.push(k.read_shift(2));break;case 6:{for(var Me="";le=k[k.l++];)Me+=String.fromCharCode(le);B.push('"'+Me.replace(/"/g,'""')+'"')}break;case 8:B.push("-"+B.pop());break;case 23:B.push("+"+B.pop());break;case 22:B.push("NOT("+B.pop()+")");break;case 20:case 21:te=B.pop(),K=B.pop(),B.push(["AND","OR"][le-20]+"("+K+","+te+")");break;default:if(le<32&&b[le])te=B.pop(),K=B.pop(),B.push(K+b[le]+te);else if(v[le]){if(U=v[le][1],U==69&&(U=k[k.l++]),U>B.length){console.error("WK1 bad formula parse 0x"+le.toString(16)+":|"+B.join("|")+"|");return}var Fe=B.slice(-U);B.length-=U,B.push(v[le][0]+"("+Fe.join(",")+")")}else return le<=7?console.error("WK1 invalid opcode "+le.toString(16)):le<=24?console.error("WK1 unsupported op "+le.toString(16)):le<=30?console.error("WK1 invalid opcode "+le.toString(16)):le<=115?console.error("WK1 unsupported function opcode "+le.toString(16)):console.error("WK1 unrecognized opcode "+le.toString(16))}}B.length==1?F[1].f=""+B[0]:console.error("WK1 bad formula parse |"+B.join("|")+"|")}function _(k){var F=[{c:0,r:0},{t:"n",v:0},0];return F[0].r=k.read_shift(2),F[3]=k[k.l++],F[0].c=k[k.l++],F}function E(k,F){var B=_(k);return B[1].t="s",B[1].v=k.read_shift(F-4,"cstr"),B}function j(k,F,B,U){var J=Be(6+U.length);J.write_shift(2,k),J.write_shift(1,B),J.write_shift(1,F),J.write_shift(1,39);for(var me=0;me<U.length;++me){var K=U.charCodeAt(me);J.write_shift(1,K>=128?95:K)}return J.write_shift(1,0),J}function A(k,F){var B=_(k);B[1].v=k.read_shift(2);var U=B[1].v>>1;if(B[1].v&1)switch(U&7){case 0:U=(U>>3)*5e3;break;case 1:U=(U>>3)*500;break;case 2:U=(U>>3)/20;break;case 3:U=(U>>3)/200;break;case 4:U=(U>>3)/2e3;break;case 5:U=(U>>3)/2e4;break;case 6:U=(U>>3)/16;break;case 7:U=(U>>3)/64;break}return B[1].v=U,B}function T(k,F){var B=_(k),U=k.read_shift(4),J=k.read_shift(4),me=k.read_shift(2);if(me==65535)return U===0&&J===3221225472?(B[1].t="e",B[1].v=15):U===0&&J===3489660928?(B[1].t="e",B[1].v=42):B[1].v=0,B;var K=me&32768;return me=(me&32767)-16446,B[1].v=(1-K*2)*(J*Math.pow(2,me+32)+U*Math.pow(2,me)),B}function P(k,F,B,U){var J=Be(14);if(J.write_shift(2,k),J.write_shift(1,B),J.write_shift(1,F),U==0)return J.write_shift(4,0),J.write_shift(4,0),J.write_shift(2,65535),J;var me=0,K=0,te=0,le=0;return U<0&&(me=1,U=-U),K=Math.log2(U)|0,U/=Math.pow(2,K-31),le=U>>>0,le&2147483648||(U/=2,++K,le=U>>>0),U-=le,le|=2147483648,le>>>=0,U*=Math.pow(2,32),te=U>>>0,J.write_shift(4,te),J.write_shift(4,le),K+=16383+(me?32768:0),J.write_shift(2,K),J}function O(k,F){var B=T(k);return k.l+=F-14,B}function R(k,F){var B=_(k),U=k.read_shift(4);return B[1].v=U>>6,B}function I(k,F){var B=_(k),U=k.read_shift(8,"f");return B[1].v=U,B}function z(k,F){var B=I(k);return k.l+=F-10,B}function Y(k,F){return k[k.l+F-1]==0?k.read_shift(F,"cstr"):""}function ie(k,F){var B=k[k.l++];B>F-1&&(B=F-1);for(var U="";U.length<B;)U+=String.fromCharCode(k[k.l++]);return U}function re(k,F,B){if(!(!B.qpro||F<21)){var U=k.read_shift(1);k.l+=17,k.l+=1,k.l+=2;var J=k.read_shift(F-21,"cstr");return[U,J]}}function X(k,F){for(var B={},U=k.l+F;k.l<U;){var J=k.read_shift(2);if(J==14e3){for(B[J]=[0,""],B[J][0]=k.read_shift(2);k[k.l];)B[J][1]+=String.fromCharCode(k[k.l]),k.l++;k.l++}}return B}function oe(k,F){var B=Be(5+k.length);B.write_shift(2,14e3),B.write_shift(2,F);for(var U=0;U<k.length;++U){var J=k.charCodeAt(U);B[B.l++]=J>127?95:J}return B[B.l++]=0,B}var we={0:{n:"BOF",f:G$},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:x},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Y},222:{n:"SHEETNAMELP",f:ie},65535:{n:""}},_e={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:E},23:{n:"NUMBER17",f:T},24:{n:"NUMBER18",f:A},25:{n:"FORMULA19",f:O},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:X},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:R},38:{n:"??"},39:{n:"NUMBER27",f:I},40:{n:"FORMULA28",f:z},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Y},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:re},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}(),kre=/^\s|\s$|[\t\n\r]/;function Z$(e,t){if(!t.bookSST)return"";var r=[da];r[r.length]=at("sst",null,{xmlns:jp[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],i="<si>";a.r?i+=a.r:(i+="<t",a.t||(a.t=""),a.t.match(kre)&&(i+=' xml:space="preserve"'),i+=">"+qr(a.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Ore(e){return[e.read_shift(4),e.read_shift(4)]}function Pre(e,t){return t||(t=Be(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var Lre=Nte;function Rre(e){var t=rs();Ke(t,159,Pre(e));for(var r=0;r<e.length;++r)Ke(t,19,Lre(e[r]));return Ke(t,160),t.end()}function Dre(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function e9(e){var t=0,r,n=Dre(e),a=n.length+1,i,s,l,c,u;for(r=jf(a),r[0]=n.length,i=1;i!=a;++i)r[i]=n[i-1];for(i=a-1;i>=0;--i)s=r[i],l=t&16384?1:0,c=t<<1&32767,u=l|c,t=u^s;return t^52811}var Ire=function(){function e(a,i){switch(i.type){case"base64":return t(Ac(a),i);case"binary":return t(a,i);case"buffer":return t(Cr&&Buffer.isBuffer(a)?a.toString("binary"):Kv(a),i);case"array":return t(gw(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){var s=i||{},l=s.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var p=/\\\w+\b/g,h=0,g,m=-1;g=p.exec(d);){switch(g[0]){case"\\cell":var x=d.slice(h,p.lastIndex-g[0].length);if(x[0]==" "&&(x=x.slice(1)),++m,x.length){var y={v:x,t:"s"};Array.isArray(l)?l[f][m]=y:l[Wr({r:f,c:m})]=y}break}h=p.lastIndex}m>u.e.c&&(u.e.c=m)}),l["!ref"]=ca(u),l}function r(a,i){return zf(e(a,i),i)}function n(a){for(var i=["{\\rtf1\\ansi"],s=mn(a["!ref"]),l,c=Array.isArray(a),u=s.s.r;u<=s.e.r;++u){i.push("\\trowd\\trautofit1");for(var d=s.s.c;d<=s.e.c;++d)i.push("\\cellx"+(d+1));for(i.push("\\pard\\intbl"),d=s.s.c;d<=s.e.c;++d){var f=Wr({r:u,c:d});l=c?(a[u]||[])[d]:a[f],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(Ec(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function WO(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}var Mre=6,vc=Mre;function Sb(e){return Math.floor((e+Math.round(128/vc)/256)*vc)}function jb(e){return Math.floor((e-5)/vc*100+.5)/100}function Sj(e){return Math.round((e*vc+5)/vc*256)/256}function q3(e){e.width?(e.wpx=Sb(e.width),e.wch=jb(e.wpx),e.MDW=vc):e.wpx?(e.wch=jb(e.wpx),e.width=Sj(e.wch),e.MDW=vc):typeof e.wch=="number"&&(e.width=Sj(e.wch),e.wpx=Sb(e.width),e.MDW=vc),e.customWidth&&delete e.customWidth}var Fre=96,t9=Fre;function Ab(e){return e*96/t9}function r9(e){return e*t9/96}function $re(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=at("numFmt",null,{numFmtId:n,formatCode:qr(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=at("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function Bre(e){var t=[];return t[t.length]=at("cellXfs",null),e.forEach(function(r){t[t.length]=at("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=at("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function n9(e,t){var r=[da,at("styleSheet",null,{xmlns:jp[0],"xmlns:vt":La.vt})],n;return e.SSF&&(n=$re(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=Bre(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Ure(e,t){var r=e.read_shift(2),n=gi(e);return[r,n]}function zre(e,t,r){r||(r=Be(6+4*t.length)),r.write_shift(2,e),Da(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function qre(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=kte(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var s=e.read_shift(1);s!=0&&(n.underline=s);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=Cte(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=gi(e),n}function Hre(e,t){t||(t=Be(25+4*32)),t.write_shift(2,e.sz*20),Ote(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),_b(e.color,t);var n=0;return n=2,t.write_shift(1,n),Da(e.name,t),t.length>t.l?t.slice(0,t.l):t}var Wre=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],B5,Vre=Al;function VO(e,t){t||(t=Be(4*3+8*7+16*1)),B5||(B5=O3(Wre));var r=B5[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(_b({auto:1},t),_b({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Gre(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function a9(e,t,r){r||(r=Be(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Nm(e,t){return t||(t=Be(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Kre=Al;function Yre(e,t){return t||(t=Be(51)),t.write_shift(1,0),Nm(null,t),Nm(null,t),Nm(null,t),Nm(null,t),Nm(null,t),t.length>t.l?t.slice(0,t.l):t}function Xre(e,t){return t||(t=Be(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),wb(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function Jre(e,t,r){var n=Be(2052);return n.write_shift(4,e),wb(t,n),wb(r,n),n.length>n.l?n.slice(0,n.l):n}function Qre(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(Ke(e,615,Ko(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Ke(e,44,zre(a,t[a]))}),Ke(e,616))}}function Zre(e){var t=1;Ke(e,611,Ko(t)),Ke(e,43,Hre({sz:12,color:{theme:1},name:"Calibri",family:2})),Ke(e,612)}function ene(e){var t=2;Ke(e,603,Ko(t)),Ke(e,45,VO({patternType:"none"})),Ke(e,45,VO({patternType:"gray125"})),Ke(e,604)}function tne(e){var t=1;Ke(e,613,Ko(t)),Ke(e,46,Yre()),Ke(e,614)}function rne(e){var t=1;Ke(e,626,Ko(t)),Ke(e,47,a9({numFmtId:0},65535)),Ke(e,627)}function nne(e,t){Ke(e,617,Ko(t.length)),t.forEach(function(r){Ke(e,47,a9(r,0))}),Ke(e,618)}function ane(e){var t=1;Ke(e,619,Ko(t)),Ke(e,48,Xre({xfId:0,name:"Normal"})),Ke(e,620)}function ine(e){var t=0;Ke(e,505,Ko(t)),Ke(e,506)}function sne(e){var t=0;Ke(e,508,Jre(t,"TableStyleMedium9","PivotStyleMedium4")),Ke(e,509)}function one(e,t){var r=rs();return Ke(r,278),Qre(r,e.SSF),Zre(r),ene(r),tne(r),rne(r),nne(r,t.cellXfs),ane(r),ine(r),sne(r),Ke(r,279),r.end()}function i9(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[da];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function lne(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:gi(e)}}function cne(e){var t=Be(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Da(e.name,t),t.slice(0,t.l)}function une(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function dne(e){var t=Be(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function fne(e,t){var r=Be(8+2*t.length);return r.write_shift(4,e),Da(t,r),r.slice(0,r.l)}function hne(e){return e.l+=4,e.read_shift(4)!=0}function pne(e,t){var r=Be(8);return r.write_shift(4,e),r.write_shift(4,1),r}function mne(){var e=rs();return Ke(e,332),Ke(e,334,Ko(1)),Ke(e,335,cne({name:"XLDAPR",version:12e4,flags:3496657072})),Ke(e,336),Ke(e,339,fne(1,"XLDAPR")),Ke(e,52),Ke(e,35,Ko(514)),Ke(e,4096,Ko(0)),Ke(e,4097,Xs(1)),Ke(e,36),Ke(e,53),Ke(e,340),Ke(e,337,pne(1)),Ke(e,51,dne([[1,0]])),Ke(e,338),Ke(e,333),e.end()}function s9(){var e=[da];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function gne(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Wr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}var zh=1024;function o9(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[at("xml",null,{"xmlns:v":Ns.v,"xmlns:o":Ns.o,"xmlns:x":Ns.x,"xmlns:mv":Ns.mv}).replace(/\/>/,">"),at("o:shapelayout",at("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),at("v:shapetype",[at("v:stroke",null,{joinstyle:"miter"}),at("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];zh<e*1e3;)zh+=1e3;return t.forEach(function(i){var s=Ra(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?at("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=at("v:fill",c,l),d={on:"t",obscured:"t"};++zh,a=a.concat(["<v:shape"+Kg({id:"_x0000_s"+zh,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,at("v:shadow",null,d),at("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ja("x:Anchor",[s.c+1,0,s.r+1,0,s.c+3,20,s.r+5,20].join(",")),Ja("x:AutoFill","False"),Ja("x:Row",String(s.r)),Ja("x:Column",String(s.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function l9(e){var t=[da,at("comments",null,{xmlns:jp[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var i=qr(a.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(qr(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),i.length<=1)t.push(Ja("t",qr(i[0]||"")));else{for(var s=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)s+=`Reply:
    `+i[l]+`
`;t.push(Ja("t",qr(s)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function vne(e,t,r){var n=[da,at("ThreadedComments",null,{xmlns:La.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var i="";(a[1]||[]).forEach(function(s,l){if(!s.T){delete s.ID;return}s.a&&t.indexOf(s.a)==-1&&t.push(s.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,s.ID=c.id,s.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),n.push(at("threadedComment",Ja("text",s.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function xne(e){var t=[da,at("personList",null,{xmlns:La.TCMNT,"xmlns:x":jp[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(at("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function yne(e){var t={};t.iauthor=e.read_shift(4);var r=Vf(e);return t.rfx=r.s,t.ref=Wr(r.s),e.l+=16,t}function bne(e,t){return t==null&&(t=Be(36)),t.write_shift(4,e[1].iauthor),Ep(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var wne=gi;function _ne(e){return Da(e.slice(0,54))}function Nne(e){var t=rs(),r=[];return Ke(t,628),Ke(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Ke(t,632,_ne(a.a)))})}),Ke(t,631),Ke(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var i={s:Ra(n[0]),e:Ra(n[0])};Ke(t,635,bne([i,a])),a.t&&a.t.length>0&&Ke(t,637,jte(a)),Ke(t,636),delete a.iauthor})}),Ke(t,634),Ke(t,629),t.end()}function Sne(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Kr.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var c9=["xlsb","xlsm","xlam","biff8","xla"],jne=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,i,s){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,d=s.length>0?parseInt(s,10)|0:0;return l?d+=t.c:--d,c?u+=t.r:--u,a+(l?"":"$")+mi(d)+(c?"":"$")+Za(u)}return function(a,i){return t=i,a.replace(e,r)}}(),H3=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,W3=function(){return function(t,r){return t.replace(H3,function(n,a,i,s,l,c){var u=F3(s)-(i?0:r.c),d=M3(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",p=u==0?"":i?u+1:"["+u+"]";return a+"R"+f+"C"+p})}}();function Ane(e,t){return e.replace(H3,function(r,n,a,i,s,l){return n+(a=="$"?a+i:mi(F3(i)+t.c))+(s=="$"?s+l:Za(M3(l)+t.r))})}function Ene(e){return e.length!=1}function na(e){e.l+=1}function Ku(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function u9(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return d9(e);r.biff==12&&(n=4)}var a=e.read_shift(n),i=e.read_shift(n),s=Ku(e),l=Ku(e);return{s:{r:a,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function d9(e){var t=Ku(e),r=Ku(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function Tne(e,t,r){if(r.biff<8)return d9(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),i=Ku(e),s=Ku(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:s[0],cRel:s[1],rRel:s[2]}}}function f9(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return Cne(e);var n=e.read_shift(r&&r.biff==12?4:2),a=Ku(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function Cne(e){var t=Ku(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function kne(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function One(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return Pne(e);var a=e.read_shift(n>=12?4:2),i=e.read_shift(2),s=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;a>524287;)a-=1048576;if(s==1)for(;i>8191;)i=i-16384;return{r:a,c:i,cRel:s,rRel:l}}function Pne(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function Lne(e,t,r){var n=(e[e.l++]&96)>>5,a=u9(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function Rne(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var s=u9(e,i,r);return[n,a,s]}function Dne(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Ine(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,a]}function Mne(e,t,r){var n=(e[e.l++]&96)>>5,a=Tne(e,t-1,r);return[n,a]}function Fne(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function GO(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function $ne(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],i=0;i<=n;++i)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function Bne(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Une(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function zne(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function qne(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function h9(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Hne(e){return e.read_shift(2),h9(e)}function Wne(e){return e.read_shift(2),h9(e)}function Vne(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=f9(e,0,r);return[n,a]}function Gne(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=One(e,0,r);return[n,a]}function Kne(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=f9(e,0,r);return[n,a,i]}function Yne(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[Yae[a],g9[a],n]}function Xne(e,t,r){var n=e[e.l++],a=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:Jne(e);return[a,(i[0]===0?g9:Kae)[i[1]]]}function Jne(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Qne(e,t,r){e.l+=r&&r.biff==2?3:4}function Zne(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function eae(e){return e.l++,Jv[e.read_shift(1)]}function tae(e){return e.l++,e.read_shift(2)}function rae(e){return e.l++,e.read_shift(1)!==0}function nae(e){return e.l++,Tp(e)}function aae(e,t,r){return e.l++,Y$(e,t-1,r)}function iae(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Kte(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Jv[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Tp(e);break;case 2:r[1]=Qte(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function sae(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],i=0;i!=n;++i)a.push((r.biff==12?Vf:tre)(e));return a}function oae(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var i=0,s=[];i!=n&&(s[i]=[]);++i)for(var l=0;l!=a;++l)s[i][l]=iae(e,r.biff);return s}function lae(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,i=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function cae(e,t,r){if(r.biff==5)return uae(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),i=e.read_shift(4);return[n,a,i]}function uae(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function dae(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function fae(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function hae(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function pae(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,a]}var mae=Al,gae=Al,vae=Al;function Qv(e,t,r){return e.l+=2,[kne(e)]}function V3(e){return e.l+=6,[]}var xae=Qv,yae=V3,bae=V3,wae=Qv;function p9(e){return e.l+=2,[G$(e),e.read_shift(2)&1]}var _ae=Qv,Nae=p9,Sae=V3,jae=Qv,Aae=Qv,Eae=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Tae(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),i=e.read_shift(2),s=Eae[r>>2&31];return{ixti:t,coltype:r&3,rt:s,idx:n,c:a,C:i}}function Cae(e){return e.l+=2,[e.read_shift(4)]}function kae(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Oae(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Pae(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Lae(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Rae(e){return e.l+=4,[0,0]}var KO={1:{n:"PtgExp",f:Zne},2:{n:"PtgTbl",f:vae},3:{n:"PtgAdd",f:na},4:{n:"PtgSub",f:na},5:{n:"PtgMul",f:na},6:{n:"PtgDiv",f:na},7:{n:"PtgPower",f:na},8:{n:"PtgConcat",f:na},9:{n:"PtgLt",f:na},10:{n:"PtgLe",f:na},11:{n:"PtgEq",f:na},12:{n:"PtgGe",f:na},13:{n:"PtgGt",f:na},14:{n:"PtgNe",f:na},15:{n:"PtgIsect",f:na},16:{n:"PtgUnion",f:na},17:{n:"PtgRange",f:na},18:{n:"PtgUplus",f:na},19:{n:"PtgUminus",f:na},20:{n:"PtgPercent",f:na},21:{n:"PtgParen",f:na},22:{n:"PtgMissArg",f:na},23:{n:"PtgStr",f:aae},26:{n:"PtgSheet",f:kae},27:{n:"PtgEndSheet",f:Oae},28:{n:"PtgErr",f:eae},29:{n:"PtgBool",f:rae},30:{n:"PtgInt",f:tae},31:{n:"PtgNum",f:nae},32:{n:"PtgArray",f:Fne},33:{n:"PtgFunc",f:Yne},34:{n:"PtgFuncVar",f:Xne},35:{n:"PtgName",f:lae},36:{n:"PtgRef",f:Vne},37:{n:"PtgArea",f:Lne},38:{n:"PtgMemArea",f:dae},39:{n:"PtgMemErr",f:mae},40:{n:"PtgMemNoMem",f:gae},41:{n:"PtgMemFunc",f:fae},42:{n:"PtgRefErr",f:hae},43:{n:"PtgAreaErr",f:Dne},44:{n:"PtgRefN",f:Gne},45:{n:"PtgAreaN",f:Mne},46:{n:"PtgMemAreaN",f:Pae},47:{n:"PtgMemNoMemN",f:Lae},57:{n:"PtgNameX",f:cae},58:{n:"PtgRef3d",f:Kne},59:{n:"PtgArea3d",f:Rne},60:{n:"PtgRefErr3d",f:pae},61:{n:"PtgAreaErr3d",f:Ine},255:{}},Dae={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Iae={1:{n:"PtgElfLel",f:p9},2:{n:"PtgElfRw",f:jae},3:{n:"PtgElfCol",f:xae},6:{n:"PtgElfRwV",f:Aae},7:{n:"PtgElfColV",f:wae},10:{n:"PtgElfRadical",f:_ae},11:{n:"PtgElfRadicalS",f:Sae},13:{n:"PtgElfColS",f:yae},15:{n:"PtgElfColSV",f:bae},16:{n:"PtgElfRadicalLel",f:Nae},25:{n:"PtgList",f:Tae},29:{n:"PtgSxName",f:Cae},255:{}},Mae={0:{n:"PtgAttrNoop",f:Rae},1:{n:"PtgAttrSemi",f:qne},2:{n:"PtgAttrIf",f:Une},4:{n:"PtgAttrChoose",f:$ne},8:{n:"PtgAttrGoto",f:Bne},16:{n:"PtgAttrSum",f:Qne},32:{n:"PtgAttrBaxcel",f:GO},33:{n:"PtgAttrBaxcel",f:GO},64:{n:"PtgAttrSpace",f:Hne},65:{n:"PtgAttrSpaceSemi",f:Wne},128:{n:"PtgAttrIfError",f:zne},255:{}};function Fae(e,t,r,n){if(n.biff<8)return Al(e,t);for(var a=e.l+t,i=[],s=0;s!==r.length;++s)switch(r[s][0]){case"PtgArray":r[s][1]=oae(e,0,n),i.push(r[s][1]);break;case"PtgMemArea":r[s][2]=sae(e,r[s][1],n),i.push(r[s][2]);break;case"PtgExp":n&&n.biff==12&&(r[s][1][1]=e.read_shift(4),i.push(r[s][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[s][0]}return t=a-e.l,t!==0&&i.push(Al(e,t)),i}function $ae(e,t,r){for(var n=e.l+t,a,i,s=[];n!=e.l;)t=n-e.l,i=e[e.l],a=KO[i]||KO[Dae[i]],(i===24||i===25)&&(a=(i===24?Iae:Mae)[e[e.l+1]]),!a||!a.f?Al(e,t):s.push([a.n,a.f(e,t,r)]);return s}function Bae(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],i=0;i<n.length;++i){var s=n[i];if(s)switch(s[0]){case 2:a.push('"'+s[1].replace(/"/g,'""')+'"');break;default:a.push(s[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var Uae={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function zae(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function m9(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function YO(e,t,r){var n=m9(e,t,r);return n=="#REF"?n:zae(n,r)}function q0(e,t,r,n,a){var i=a&&a.biff||8,s={s:{c:0,r:0}},l=[],c,u,d,f=0,p=0,h,g="";if(!e[0]||!e[0][0])return"";for(var m=-1,x="",y=0,v=e[0].length;y<v;++y){var b=e[0][y];switch(b[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),m>=0){switch(e[0][m][1][0]){case 0:x=Mn(" ",e[0][m][1][1]);break;case 1:x=Mn("\r",e[0][m][1][1]);break;default:if(x="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}u=u+x,m=-1}l.push(u+Uae[b[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=og(b[1][1],s,a),l.push(lg(d,i));break;case"PtgRefN":d=r?og(b[1][1],r,a):b[1][1],l.push(lg(d,i));break;case"PtgRef3d":f=b[1][1],d=og(b[1][2],s,a),g=YO(n,f,a),l.push(g+"!"+lg(d,i));break;case"PtgFunc":case"PtgFuncVar":var N=b[1][0],_=b[1][1];N||(N=0),N&=127;var E=N==0?[]:l.slice(-N);l.length-=N,_==="User"&&(_=E.shift()),l.push(_+"("+E.join(",")+")");break;case"PtgBool":l.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(b[1]);break;case"PtgNum":l.push(String(b[1]));break;case"PtgStr":l.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(b[1]);break;case"PtgAreaN":h=LO(b[1][1],r?{s:r}:s,a),l.push(F5(h,a));break;case"PtgArea":h=LO(b[1][1],s,a),l.push(F5(h,a));break;case"PtgArea3d":f=b[1][1],h=b[1][2],g=YO(n,f,a),l.push(g+"!"+F5(h,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=b[1][2];var j=(n.names||[])[p-1]||(n[0]||[])[p],A=j?j.Name:"SH33TJSNAME"+String(p);A&&A.slice(0,6)=="_xlfn."&&!a.xlfn&&(A=A.slice(6)),l.push(A);break;case"PtgNameX":var T=b[1][1];p=b[1][2];var P;if(a.biff<=5)T<0&&(T=-T),n[T]&&(P=n[T][p]);else{var O="";if(((n[T]||[])[0]||[])[0]==14849||(((n[T]||[])[0]||[])[0]==1025?n[T][p]&&n[T][p].itab>0&&(O=n.SheetNames[n[T][p].itab-1]+"!"):O=n.SheetNames[p-1]+"!"),n[T]&&n[T][p])O+=n[T][p].Name;else if(n[0]&&n[0][p])O+=n[0][p].Name;else{var R=(m9(n,T,a)||"").split(";;");R[p-1]?O=R[p-1]:O+="SH33TJSERRX"}l.push(O);break}P||(P={Name:"SH33TJSERRY"}),l.push(P.Name);break;case"PtgParen":var I="(",z=")";if(m>=0){switch(x="",e[0][m][1][0]){case 2:I=Mn(" ",e[0][m][1][1])+I;break;case 3:I=Mn("\r",e[0][m][1][1])+I;break;case 4:z=Mn(" ",e[0][m][1][1])+z;break;case 5:z=Mn("\r",e[0][m][1][1])+z;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}m=-1}l.push(I+l.pop()+z);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var Y={c:r.c,r:r.r};if(n.sharedf[Wr(d)]){var ie=n.sharedf[Wr(d)];l.push(q0(ie,s,Y,n,a))}else{var re=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(q0(u[1],s,Y,n,a)),re=!0;break}re||l.push(b[1])}break;case"PtgArray":l.push("{"+Bae(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":m=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var X=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&m>=0&&X.indexOf(e[0][y][0])==-1){b=e[0][m];var oe=!0;switch(b[1][0]){case 4:oe=!1;case 0:x=Mn(" ",b[1][1]);break;case 5:oe=!1;case 1:x=Mn("\r",b[1][1]);break;default:if(x="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}l.push((oe?x:"")+l.pop()+(oe?"":x)),m=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function qae(e){if(e==null){var t=Be(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Af(e);return Af(0)}function Hae(e,t,r,n,a){var i=Ef(t,r,a),s=qae(e.v),l=Be(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=Be(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Xa([i,s,l,u]);return f}function vw(e,t,r){var n=e.read_shift(4),a=$ae(e,n,r),i=e.read_shift(4),s=i>0?Fae(e,i,a,r):null;return[a,s]}var Wae=vw,xw=vw,Vae=vw,Gae=vw,Kae={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},g9={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Yae={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Xae(e){var t="of:="+e.replace(H3,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function Jae(e){return e.replace(/\./,"!")}var cg=typeof Map<"u";function G3(e,t,r){var n=0,a=e.length;if(r){if(cg?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=cg?r.get(t):r[t];n<i.length;++n)if(e[i[n]].t===t)return e.Count++,i[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(cg?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function yw(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(vc=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=jb(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=Sj(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function v9(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function td(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,i=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){f$(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=i;++a)if(e[a].numFmtId===n)return a;return e[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function Qae(e,t,r){if(e&&e["!ref"]){var n=mn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function Zae(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+ca(e[r])+'"/>';return t+"</mergeCells>"}function eie(e,t,r,n,a){var i=!1,s={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,s.codeName=Gg(qr(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),l=(l||"")+at("outlinePr",null,u)}!i&&!l||(a[a.length]=at("sheetPr",l,s))}var tie=["objects","scenarios","selectLockedCells","selectUnlockedCells"],rie=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function nie(e){var t={sheet:1};return tie.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),rie.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=e9(e.password).toString(16).toUpperCase()),at("sheetProtection",null,t)}function aie(e){return v9(e),at("pageMargins",null,e)}function iie(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=at("col",null,yw(a,n)));return r[r.length]="</cols>",r.join("")}function sie(e,t,r,n){var a=typeof e.ref=="string"?e.ref:ca(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,s=Ds(a);s.s.r==s.e.r&&(s.e.r=Ds(t["!ref"]).e.r,a=ca(s));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),at("autoFilter",null,{ref:a})}function oie(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),at("sheetViews",at("sheetView",null,a),{})}function lie(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",i=e.t,s=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=Jv[e.v];break;case"d":n&&n.cellDates?a=Fi(e.v,-1).toISOString():(e=is(e),e.t="n",a=""+(e.v=as(Fi(e.v)))),typeof e.z>"u"&&(e.z=$n[14]);break;default:a=e.v;break}var l=Ja("v",qr(a)),c={r:t},u=td(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Ja("v",""+G3(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=s),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=at("f",qr(e.f),d)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),at("c",l,c)}function cie(e,t,r,n){var a=[],i=[],s=mn(e["!ref"]),l="",c,u="",d=[],f=0,p=0,h=e["!rows"],g=Array.isArray(e),m={r:u},x,y=-1;for(p=s.s.c;p<=s.e.c;++p)d[p]=mi(p);for(f=s.s.r;f<=s.e.r;++f){for(i=[],u=Za(f),p=s.s.c;p<=s.e.c;++p){c=d[p]+u;var v=g?(e[f]||[])[p]:e[c];v!==void 0&&(l=lie(v,c,e,t))!=null&&i.push(l)}(i.length>0||h&&h[f])&&(m={r:u},h&&h[f]&&(x=h[f],x.hidden&&(m.hidden=1),y=-1,x.hpx?y=Ab(x.hpx):x.hpt&&(y=x.hpt),y>-1&&(m.ht=y,m.customHeight=1),x.level&&(m.outlineLevel=x.level)),a[a.length]=at("row",i.join(""),m))}if(h)for(;f<h.length;++f)h&&h[f]&&(m={r:f+1},x=h[f],x.hidden&&(m.hidden=1),y=-1,x.hpx?y=Ab(x.hpx):x.hpt&&(y=x.hpt),y>-1&&(m.ht=y,m.customHeight=1),x.level&&(m.outlineLevel=x.level),a[a.length]=at("row","",m));return a.join("")}function x9(e,t,r,n){var a=[da,at("worksheet",null,{xmlns:jp[0],"xmlns:r":La.r})],i=r.SheetNames[e],s=0,l="",c=r.Sheets[i];c==null&&(c={});var u=c["!ref"]||"A1",d=mn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=ca(d)}n||(n={}),c["!comments"]=[];var f=[];eie(c,r,e,t,a),a[a.length]=at("dimension",null,{ref:u}),a[a.length]=oie(c,t,e,r),t.sheetFormat&&(a[a.length]=at("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=iie(c,c["!cols"])),a[s=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=cie(c,t),l.length>0&&(a[a.length]=l)),a.length>s+1&&(a[a.length]="</sheetData>",a[s]=a[s].replace("/>",">")),c["!protect"]&&(a[a.length]=nie(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=sie(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=Zae(c["!merges"]));var p=-1,h,g=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(m){m[1].Target&&(h={ref:m[0]},m[1].Target.charAt(0)!="#"&&(g=Ur(n,-1,qr(m[1].Target).replace(/#.*$/,""),Sr.HLINK),h["r:id"]="rId"+g),(p=m[1].Target.indexOf("#"))>-1&&(h.location=qr(m[1].Target.slice(p+1))),m[1].Tooltip&&(h.tooltip=qr(m[1].Tooltip)),a[a.length]=at("hyperlink",null,h))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=aie(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=Ja("ignoredErrors",at("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=Ur(n,-1,"../drawings/drawing"+(e+1)+".xml",Sr.DRAW),a[a.length]=at("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=f),c["!comments"].length>0&&(g=Ur(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Sr.VML),a[a.length]=at("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function uie(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=a/20),r}function die(e,t,r){var n=Be(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var i=320;a.hpx?i=Ab(a.hpx)*20:a.hpt&&(i=a.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var s=0;a.level&&(s|=a.level),a.hidden&&(s|=16),(a.hpx||a.hpt)&&(s|=32),n.write_shift(1,s),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,p=-1,h=d<<10;h<d+1<<10;++h){u.c=h;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Wr(u)];g&&(f<0&&(f=h),p=h)}f<0||(++l,n.write_shift(4,f),n.write_shift(4,p))}var m=n.l;return n.l=c,n.write_shift(4,l),n.l=m,n.length>n.l?n.slice(0,n.l):n}function fie(e,t,r,n){var a=die(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&Ke(e,0,a)}var hie=Vf,pie=Ep;function mie(){}function gie(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=Ate(e),r}function vie(e,t,r){r==null&&(r=Be(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return _b({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),L$(e,r),r.slice(0,r.l)}function xie(e){var t=ho(e);return[t]}function yie(e,t,r){return r==null&&(r=Be(8)),qf(t,r)}function bie(e){var t=Hf(e);return[t]}function wie(e,t,r){return r==null&&(r=Be(4)),Wf(t,r)}function _ie(e){var t=ho(e),r=e.read_shift(1);return[t,r,"b"]}function Nie(e,t,r){return r==null&&(r=Be(9)),qf(t,r),r.write_shift(1,e.v?1:0),r}function Sie(e){var t=Hf(e),r=e.read_shift(1);return[t,r,"b"]}function jie(e,t,r){return r==null&&(r=Be(5)),Wf(t,r),r.write_shift(1,e.v?1:0),r}function Aie(e){var t=ho(e),r=e.read_shift(1);return[t,r,"e"]}function Eie(e,t,r){return r==null&&(r=Be(9)),qf(t,r),r.write_shift(1,e.v),r}function Tie(e){var t=Hf(e),r=e.read_shift(1);return[t,r,"e"]}function Cie(e,t,r){return r==null&&(r=Be(8)),Wf(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function kie(e){var t=ho(e),r=e.read_shift(4);return[t,r,"s"]}function Oie(e,t,r){return r==null&&(r=Be(12)),qf(t,r),r.write_shift(4,t.v),r}function Pie(e){var t=Hf(e),r=e.read_shift(4);return[t,r,"s"]}function Lie(e,t,r){return r==null&&(r=Be(8)),Wf(t,r),r.write_shift(4,t.v),r}function Rie(e){var t=ho(e),r=Tp(e);return[t,r,"n"]}function Die(e,t,r){return r==null&&(r=Be(16)),qf(t,r),Af(e.v,r),r}function Iie(e){var t=Hf(e),r=Tp(e);return[t,r,"n"]}function Mie(e,t,r){return r==null&&(r=Be(12)),Wf(t,r),Af(e.v,r),r}function Fie(e){var t=ho(e),r=R$(e);return[t,r,"n"]}function $ie(e,t,r){return r==null&&(r=Be(12)),qf(t,r),D$(e.v,r),r}function Bie(e){var t=Hf(e),r=R$(e);return[t,r,"n"]}function Uie(e,t,r){return r==null&&(r=Be(8)),Wf(t,r),D$(e.v,r),r}function zie(e){var t=ho(e),r=$3(e);return[t,r,"is"]}function qie(e){var t=ho(e),r=gi(e);return[t,r,"str"]}function Hie(e,t,r){return r==null&&(r=Be(12+4*e.v.length)),qf(t,r),Da(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Wie(e){var t=Hf(e),r=gi(e);return[t,r,"str"]}function Vie(e,t,r){return r==null&&(r=Be(8+4*e.v.length)),Wf(t,r),Da(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Gie(e,t,r){var n=e.l+t,a=ho(e);a.r=r["!row"];var i=e.read_shift(1),s=[a,i,"b"];if(r.cellFormula){e.l+=2;var l=xw(e,n-e.l,r);s[3]=q0(l,null,a,r.supbooks,r)}else e.l=n;return s}function Kie(e,t,r){var n=e.l+t,a=ho(e);a.r=r["!row"];var i=e.read_shift(1),s=[a,i,"e"];if(r.cellFormula){e.l+=2;var l=xw(e,n-e.l,r);s[3]=q0(l,null,a,r.supbooks,r)}else e.l=n;return s}function Yie(e,t,r){var n=e.l+t,a=ho(e);a.r=r["!row"];var i=Tp(e),s=[a,i,"n"];if(r.cellFormula){e.l+=2;var l=xw(e,n-e.l,r);s[3]=q0(l,null,a,r.supbooks,r)}else e.l=n;return s}function Xie(e,t,r){var n=e.l+t,a=ho(e);a.r=r["!row"];var i=gi(e),s=[a,i,"str"];if(r.cellFormula){e.l+=2;var l=xw(e,n-e.l,r);s[3]=q0(l,null,a,r.supbooks,r)}else e.l=n;return s}var Jie=Vf,Qie=Ep;function Zie(e,t){return t==null&&(t=Be(4)),t.write_shift(4,e),t}function ese(e,t){var r=e.l+t,n=Vf(e),a=B3(e),i=gi(e),s=gi(e),l=gi(e);e.l=r;var c={rfx:n,relId:a,loc:i,display:l};return s&&(c.Tooltip=s),c}function tse(e,t){var r=Be(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Ep({s:Ra(e[0]),e:Ra(e[0])},r),U3("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return Da(a||"",r),Da(e[1].Tooltip||"",r),Da("",r),r.slice(0,r.l)}function rse(){}function nse(e,t,r){var n=e.l+t,a=I$(e),i=e.read_shift(1),s=[a];if(s[2]=i,r.cellFormula){var l=Wae(e,n-e.l,r);s[1]=l}else e.l=n;return s}function ase(e,t,r){var n=e.l+t,a=Vf(e),i=[a];if(r.cellFormula){var s=Gae(e,n-e.l,r);i[1]=s,e.l=n}else e.l=n;return i}function ise(e,t,r){r==null&&(r=Be(18));var n=yw(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var y9=["left","right","top","bottom","header","footer"];function sse(e){var t={};return y9.forEach(function(r){t[r]=Tp(e)}),t}function ose(e,t){return t==null&&(t=Be(6*8)),v9(e),y9.forEach(function(r){Af(e[r],t)}),t}function lse(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function cse(e,t,r){r==null&&(r=Be(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function use(e){var t=Be(24);return t.write_shift(4,4),t.write_shift(4,1),Ep(e,t),t}function dse(e,t){return t==null&&(t=Be(16*4+2)),t.write_shift(2,e.password?e9(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function fse(){}function hse(){}function pse(e,t,r,n,a,i,s){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=is(t),t.z=t.z||$n[14],t.v=as(Fi(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:n};switch(c.s=td(a.cellXfs,t,a),t.l&&i["!links"].push([Wr(c),t.l]),t.c&&i["!comments"].push([Wr(c),t.c]),t.t){case"s":case"str":return a.bookSST?(l=G3(a.Strings,t.v,a.revStrings),c.t="s",c.v=l,s?Ke(e,18,Lie(t,c)):Ke(e,7,Oie(t,c))):(c.t="str",s?Ke(e,17,Vie(t,c)):Ke(e,6,Hie(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?s?Ke(e,13,Uie(t,c)):Ke(e,2,$ie(t,c)):s?Ke(e,16,Mie(t,c)):Ke(e,5,Die(t,c)),!0;case"b":return c.t="b",s?Ke(e,15,jie(t,c)):Ke(e,4,Nie(t,c)),!0;case"e":return c.t="e",s?Ke(e,14,Cie(t,c)):Ke(e,3,Eie(t,c)),!0}return s?Ke(e,12,wie(t,c)):Ke(e,1,yie(t,c)),!0}function mse(e,t,r,n){var a=mn(t["!ref"]||"A1"),i,s="",l=[];Ke(e,145);var c=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){s=Za(d),fie(e,t,a,d);var f=!1;if(d<=a.e.r)for(var p=a.s.c;p<=a.e.c;++p){d===a.s.r&&(l[p]=mi(p)),i=l[p]+s;var h=c?(t[d]||[])[p]:t[i];if(!h){f=!1;continue}f=pse(e,h,d,p,n,t,f)}}Ke(e,146)}function gse(e,t){!t||!t["!merges"]||(Ke(e,177,Zie(t["!merges"].length)),t["!merges"].forEach(function(r){Ke(e,176,Qie(r))}),Ke(e,178))}function vse(e,t){!t||!t["!cols"]||(Ke(e,390),t["!cols"].forEach(function(r,n){r&&Ke(e,60,ise(n,r))}),Ke(e,391))}function xse(e,t){!t||!t["!ref"]||(Ke(e,648),Ke(e,649,use(mn(t["!ref"]))),Ke(e,650))}function yse(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=Ur(r,-1,n[1].Target.replace(/#.*$/,""),Sr.HLINK);Ke(e,494,tse(n,a))}}),delete t["!links"]}function bse(e,t,r,n){if(t["!comments"].length>0){var a=Ur(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Sr.VML);Ke(e,551,U3("rId"+a)),t["!legacy"]=a}}function wse(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],i=typeof a.ref=="string"?a.ref:ca(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,l=Ds(i);l.s.r==l.e.r&&(l.e.r=Ds(t["!ref"]).e.r,i=ca(l));for(var c=0;c<s.length;++c){var u=s[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+i;break}}c==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),Ke(e,161,Ep(mn(i))),Ke(e,162)}}function _se(e,t,r){Ke(e,133),Ke(e,137,cse(t,r)),Ke(e,138),Ke(e,134)}function Nse(e,t){t["!protect"]&&Ke(e,535,dse(t["!protect"]))}function Sse(e,t,r,n){var a=rs(),i=r.SheetNames[e],s=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=mn(s["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return s["!links"]=[],s["!comments"]=[],Ke(a,129),(r.vbaraw||s["!outline"])&&Ke(a,147,vie(l,s["!outline"])),Ke(a,148,pie(c)),_se(a,s,r.Workbook),vse(a,s),mse(a,s,e,t),Nse(a,s),wse(a,s,r,e),gse(a,s),yse(a,s,n),s["!margins"]&&Ke(a,476,ose(s["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&xse(a,s),bse(a,s,e,n),Ke(a,130),a.end()}function jse(e,t){e.l+=10;var r=gi(e);return{name:r}}var Ase=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function Ese(e){return!e.Workbook||!e.Workbook.WBProps?"false":ate(e.Workbook.WBProps.date1904)?"true":"false"}var Tse="][*?/\\".split("");function b9(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Tse.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Cse(e,t,r){e.forEach(function(n,a){b9(n);for(var i=0;i<a;++i)if(n==e[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var s=t&&t[a]&&t[a].CodeName||n;if(s.charCodeAt(0)==95&&s.length>22)throw new Error("Bad Code Name: Worksheet"+s)}})}function kse(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];Cse(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)Qae(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}function w9(e){var t=[da];t[t.length]=at("workbook",null,{xmlns:jp[0],"xmlns:r":La.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(Ase.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=at("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],i=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!a[i]||!a[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var s={name:qr(e.SheetNames[i].slice(0,31))};if(s.sheetId=""+(i+1),s["r:id"]="rId"+(i+1),a[i])switch(a[i].Hidden){case 1:s.state="hidden";break;case 2:s.state="veryHidden";break}t[t.length]=at("sheet",null,s)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=at("definedName",qr(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function Ose(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=Nj(e),r.name=gi(e),r}function Pse(e,t){return t||(t=Be(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),U3(e.strRelID,t),Da(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function Lse(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?gi(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Rse(e,t){t||(t=Be(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),L$(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function Dse(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),i=Ete(e),s=Vae(e,0,r),l=B3(e);e.l=n;var c={Name:i,Ptg:s};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function Ise(e,t){Ke(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Ke(e,156,Pse(a))}Ke(e,144)}function Mse(e,t){t||(t=Be(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Da("SheetJS",t),Da(pb.version,t),Da(pb.version,t),Da("7262",t),t.length>t.l?t.slice(0,t.l):t}function Fse(e,t){t||(t=Be(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function $se(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&i==-1&&(i=n);i>a||(Ke(e,135),Ke(e,158,Fse(a)),Ke(e,136))}}function Bse(e,t){var r=rs();return Ke(r,131),Ke(r,128,Mse()),Ke(r,153,Rse(e.Workbook&&e.Workbook.WBProps||null)),$se(r,e),Ise(r,e),Ke(r,132),r.end()}function Use(e,t,r){return(t.slice(-4)===".bin"?Bse:w9)(e)}function zse(e,t,r,n,a){return(t.slice(-4)===".bin"?Sse:x9)(e,r,n,a)}function qse(e,t,r){return(t.slice(-4)===".bin"?one:n9)(e,r)}function Hse(e,t,r){return(t.slice(-4)===".bin"?Rre:Z$)(e,r)}function Wse(e,t,r){return(t.slice(-4)===".bin"?Nne:l9)(e)}function Vse(e){return(e.slice(-4)===".bin"?mne:s9)()}function Gse(e,t){var r=[];return e.Props&&r.push(qte(e.Props,t)),e.Custprops&&r.push(Hte(e.Props,e.Custprops)),r.join("")}function Kse(){return""}function Yse(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var i=[];i.push(at("NumberFormat",null,{"ss:Format":qr($n[n.numFmtId])}));var s={"ss:ID":"s"+(21+a)};r.push(at("Style",i.join(""),s))}),at("Styles",r.join(""))}function _9(e){return at("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+W3(e.Ref,{r:0,c:0})})}function Xse(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(_9(a)))}return at("Names",r.join(""))}function Jse(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,i=[],s=0;s<a.length;++s){var l=a[s];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(_9(l)))}return i.join("")}function Qse(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(at("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(at("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(at("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(at("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(Ja("ProtectContents","True")),e["!protect"].objects&&a.push(Ja("ProtectObjects","True")),e["!protect"].scenarios&&a.push(Ja("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(Ja("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(Ja("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(s){e["!protect"][s[0]]&&a.push("<"+s[1]+"/>")})),a.length==0?"":at("WorksheetOptions",a.join(""),{xmlns:Ns.x})}function Zse(e){return e.map(function(t){var r=nte(t.t||""),n=at("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return at("Comment",n,{"ss:Author":t.a})}).join("")}function eoe(e,t,r,n,a,i,s){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+qr(W3(e.f,s))),e.F&&e.F.slice(0,t.length)==t){var c=Ra(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==s.r?"":"["+(c.r-s.r)+"]")+"C"+(c.c==s.c?"":"["+(c.c-s.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=qr(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=qr(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=s.c||u[d].s.r!=s.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",p="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",p=String(e.v);break;case"b":f="Boolean",p=e.v?"1":"0";break;case"e":f="Error",p=Jv[e.v];break;case"d":f="DateTime",p=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||$n[14]);break;case"s":f="String",p=rte(e.v||"");break}var h=td(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+h),l["ss:Index"]=s.c+1;var g=e.v!=null?p:"",m=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(m+=Zse(e.c)),at("Cell",m,l)}function toe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=r9(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function roe(e,t,r,n){if(!e["!ref"])return"";var a=mn(e["!ref"]),i=e["!merges"]||[],s=0,l=[];e["!cols"]&&e["!cols"].forEach(function(x,y){q3(x);var v=!!x.width,b=yw(y,x),N={"ss:Index":y+1};v&&(N["ss:Width"]=Sb(b.width)),x.hidden&&(N["ss:Hidden"]="1"),l.push(at("Column",null,N))});for(var c=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[toe(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var p=!1;for(s=0;s!=i.length;++s)if(!(i[s].s.c>f)&&!(i[s].s.r>u)&&!(i[s].e.c<f)&&!(i[s].e.r<u)){(i[s].s.c!=f||i[s].s.r!=u)&&(p=!0);break}if(!p){var h={r:u,c:f},g=Wr(h),m=c?(e[u]||[])[f]:e[g];d.push(eoe(m,g,e,t,r,n,h))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function noe(e,t,r){var n=[],a=r.SheetNames[e],i=r.Sheets[a],s=i?Jse(i,t,e,r):"";return s.length>0&&n.push("<Names>"+s+"</Names>"),s=i?roe(i,t,e,r):"",s.length>0&&n.push("<Table>"+s+"</Table>"),n.push(Qse(i,t,e,r)),n.join("")}function aoe(e,t){t||(t={}),e.SSF||(e.SSF=is($n)),e.SSF&&(pw(),hw(e.SSF),t.revssf=mw(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],td(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Gse(e,t)),r.push(Kse()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(at("Worksheet",noe(n,t,e),{"ss:Name":qr(e.SheetNames[n])}));return r[2]=Yse(e,t),r[3]=Xse(e),da+at("Workbook",r.join(""),{xmlns:Ns.ss,"xmlns:o":Ns.o,"xmlns:x":Ns.x,"xmlns:ss":Ns.ss,"xmlns:dt":Ns.dt,"xmlns:html":Ns.html})}var U5={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function ioe(e,t){var r=[],n=[],a=[],i=0,s,l=_O(DO,"n"),c=_O(IO,"n");if(e.Props)for(s=ti(e.Props),i=0;i<s.length;++i)(Object.prototype.hasOwnProperty.call(l,s[i])?r:Object.prototype.hasOwnProperty.call(c,s[i])?n:a).push([s[i],e.Props[s[i]]]);if(e.Custprops)for(s=ti(e.Custprops),i=0;i<s.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},s[i])||(Object.prototype.hasOwnProperty.call(l,s[i])?r:Object.prototype.hasOwnProperty.call(c,s[i])?n:a).push([s[i],e.Custprops[s[i]]]);var u=[];for(i=0;i<a.length;++i)V$.indexOf(a[i][0])>-1||q$.indexOf(a[i][0])>-1||a[i][1]!=null&&u.push(a[i]);n.length&&Kr.utils.cfb_add(t,"/SummaryInformation",UO(n,U5.SI,c,IO)),(r.length||u.length)&&Kr.utils.cfb_add(t,"/DocumentSummaryInformation",UO(r,U5.DSI,l,DO,u.length?u:null,U5.UDI))}function soe(e,t){var r=t||{},n=Kr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Kr.utils.cfb_add(n,a,N9(e,r)),r.biff==8&&(e.Props||e.Custprops)&&ioe(e,n),r.biff==8&&e.vbaraw&&Sne(n,Kr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var ooe={0:{f:uie},1:{f:xie},2:{f:Fie},3:{f:Aie},4:{f:_ie},5:{f:Rie},6:{f:qie},7:{f:kie},8:{f:Xie},9:{f:Yie},10:{f:Gie},11:{f:Kie},12:{f:bie},13:{f:Bie},14:{f:Tie},15:{f:Sie},16:{f:Iie},17:{f:Wie},18:{f:Pie},19:{f:$3},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Dse},40:{},42:{},43:{f:qre},44:{f:Ure},45:{f:Vre},46:{f:Kre},47:{f:Gre},48:{},49:{f:bte},50:{},51:{f:une},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:wre},62:{f:zie},63:{f:gne},64:{f:fse},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Al,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:lse},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:gie},148:{f:hie,p:16},151:{f:rse},152:{},153:{f:Lse},154:{},155:{},156:{f:Ose},157:{},158:{},159:{T:1,f:Ore},160:{T:-1},161:{T:1,f:Vf},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Jie},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:lne},336:{T:-1},337:{f:hne,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Nj},357:{},358:{},359:{},360:{T:1},361:{},362:{f:mre},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:nse},427:{f:ase},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:sse},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:mie},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:ese},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Nj},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:wne},633:{T:1},634:{T:-1},635:{T:1,f:yne},636:{T:-1},637:{f:Ste},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:jse},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:hse},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function ot(e,t,r,n){var a=t;if(!isNaN(a)){var i=n||(r||[]).length||0,s=e.next(4);s.write_shift(2,a),s.write_shift(2,i),i>0&&I3(r)&&e.push(r)}}function loe(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return ot(e,t,r,a);var i=t;if(!isNaN(i)){for(var s=r.parts||[],l=0,c=0,u=0;u+(s[l]||8224)<=8224;)u+=s[l]||8224,l++;var d=e.next(4);for(d.write_shift(2,i),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(s[l]||8224)<=8224;)u+=s[l]||8224,l++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function Zv(e,t,r){return e||(e=Be(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function coe(e,t,r,n){var a=Be(9);return Zv(a,e,t),K$(r,n||"b",a),a}function uoe(e,t,r){var n=Be(8+2*r.length);return Zv(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function doe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?as(Fi(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?ot(e,2,jre(r,n,a)):ot(e,3,Sre(r,n,a));return;case"b":case"e":ot(e,5,coe(r,n,t.v,t.t));return;case"s":case"str":ot(e,4,uoe(r,n,(t.v||"").slice(0,255)));return}ot(e,1,Zv(null,r,n))}function foe(e,t,r,n){var a=Array.isArray(t),i=mn(t["!ref"]||"A1"),s,l="",c=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),s=ca(i)}for(var u=i.s.r;u<=i.e.r;++u){l=Za(u);for(var d=i.s.c;d<=i.e.c;++d){u===i.s.r&&(c[d]=mi(d)),s=c[d]+l;var f=a?(t[u]||[])[d]:t[s];f&&doe(e,f,u,d)}}}function hoe(e,t){for(var r=t||{},n=rs(),a=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(a=i);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return ot(n,r.biff==4?1033:r.biff==3?521:9,z3(e,16,r)),foe(n,e.Sheets[e.SheetNames[a]],a,r),ot(n,10),n.end()}function poe(e,t,r){ot(e,49,ore({sz:12,name:"Arial"},r))}function moe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&ot(e,1054,ure(a,t[a],r))})}function goe(e,t){var r=Be(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),ot(e,2151,r),r=Be(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),J$(mn(t["!ref"]||"A1"),r),r.write_shift(4,4),ot(e,2152,r)}function voe(e,t){for(var r=0;r<16;++r)ot(e,224,qO({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){ot(e,224,qO(n,0,t))})}function xoe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];ot(e,440,xre(n)),n[1].Tooltip&&ot(e,2048,yre(n))}delete t["!links"]}function yoe(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&ot(e,125,_re(yw(a,n),a))})}}function boe(e,t,r,n,a){var i=16+td(a.cellXfs,t,a);if(t.v==null&&!t.bf){ot(e,513,Ef(r,n,i));return}if(t.bf)ot(e,6,Hae(t,r,n,a,i));else switch(t.t){case"d":case"n":var s=t.t=="d"?as(Fi(t.v)):t.v;ot(e,515,pre(r,n,s,i));break;case"b":case"e":ot(e,517,hre(r,n,t.v,i,a,t.t));break;case"s":case"str":if(a.bookSST){var l=G3(a.Strings,t.v,a.revStrings);ot(e,253,lre(r,n,l,i))}else ot(e,516,cre(r,n,(t.v||"").slice(0,255),i,a));break;default:ot(e,513,Ef(r,n,i))}}function woe(e,t,r){var n=rs(),a=r.SheetNames[e],i=r.Sheets[a]||{},s=(r||{}).Workbook||{},l=(s.Sheets||[])[e]||{},c=Array.isArray(i),u=t.biff==8,d,f="",p=[],h=mn(i["!ref"]||"A1"),g=u?65536:16384;if(h.e.c>255||h.e.r>=g){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");h.e.c=Math.min(h.e.c,255),h.e.r=Math.min(h.e.c,g-1)}ot(n,2057,z3(r,16,t)),ot(n,13,Xs(1)),ot(n,12,Xs(100)),ot(n,15,ki(!0)),ot(n,17,ki(!1)),ot(n,16,Af(.001)),ot(n,95,ki(!0)),ot(n,42,ki(!1)),ot(n,43,ki(!1)),ot(n,130,Xs(1)),ot(n,128,fre()),ot(n,131,ki(!1)),ot(n,132,ki(!1)),u&&yoe(n,i["!cols"]),ot(n,512,dre(h,t)),u&&(i["!links"]=[]);for(var m=h.s.r;m<=h.e.r;++m){f=Za(m);for(var x=h.s.c;x<=h.e.c;++x){m===h.s.r&&(p[x]=mi(x)),d=p[x]+f;var y=c?(i[m]||[])[x]:i[d];y&&(boe(n,y,m,x,t),u&&y.l&&i["!links"].push([d,y.l]))}}var v=l.CodeName||l.name||a;return u&&ot(n,574,sre((s.Views||[])[0])),u&&(i["!merges"]||[]).length&&ot(n,229,vre(i["!merges"])),u&&xoe(n,i),ot(n,442,X$(v)),u&&goe(n,i),ot(n,10),n.end()}function _oe(e,t,r){var n=rs(),a=(e||{}).Workbook||{},i=a.Sheets||[],s=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(ot(n,2057,z3(e,5,r)),r.bookType=="xla"&&ot(n,135),ot(n,225,l?Xs(1200):null),ot(n,193,Gte(2)),c&&ot(n,191),c&&ot(n,192),ot(n,226),ot(n,92,rre("SheetJS",r)),ot(n,66,Xs(l?1200:1252)),l&&ot(n,353,Xs(0)),l&&ot(n,448),ot(n,317,Nre(e.SheetNames.length)),l&&e.vbaraw&&ot(n,211),l&&e.vbaraw){var u=s.CodeName||"ThisWorkbook";ot(n,442,X$(u))}ot(n,156,Xs(17)),ot(n,25,ki(!1)),ot(n,18,ki(!1)),ot(n,19,Xs(0)),l&&ot(n,431,ki(!1)),l&&ot(n,444,Xs(0)),ot(n,61,ire()),ot(n,64,ki(!1)),ot(n,141,Xs(0)),ot(n,34,ki(Ese(e)=="true")),ot(n,14,ki(!0)),l&&ot(n,439,ki(!1)),ot(n,218,Xs(0)),poe(n,e,r),moe(n,e.SSF,r),voe(n,r),l&&ot(n,352,ki(!1));var d=n.end(),f=rs();l&&ot(f,140,bre()),l&&r.Strings&&loe(f,252,are(r.Strings)),ot(f,10);var p=f.end(),h=rs(),g=0,m=0;for(m=0;m<e.SheetNames.length;++m)g+=(l?12:11)+(l?2:1)*e.SheetNames[m].length;var x=d.length+g+p.length;for(m=0;m<e.SheetNames.length;++m){var y=i[m]||{};ot(h,133,nre({pos:x,hs:y.Hidden||0,dt:0,name:e.SheetNames[m]},r)),x+=t[m].length}var v=h.end();if(g!=v.length)throw new Error("BS8 "+g+" != "+v.length);var b=[];return d.length&&b.push(d),v.length&&b.push(v),p.length&&b.push(p),Xa(b)}function Noe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=is($n)),e&&e.SSF&&(pw(),hw(e.SSF),r.revssf=mw(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,K3(r),r.cellXfs=[],td(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=woe(a,r,e);return n.unshift(_oe(e,n,r)),Xa(n)}function N9(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Ds(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return Noe(e,t);case 4:case 3:case 2:return hoe(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function Soe(e,t,r,n){for(var a=e["!merges"]||[],i=[],s=t.s.c;s<=t.e.c;++s){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>s)&&!(a[u].e.r<r||a[u].e.c<s)){if(a[u].s.r<r||a[u].s.c<s){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=Wr({r,c:s}),f=n.dense?(e[r]||[])[s]:e[d],p=f&&f.v!=null&&(f.h||tte(f.w||(Ec(f),f.w)||""))||"",h={};l>1&&(h.rowspan=l),c>1&&(h.colspan=c),n.editable?p='<span contenteditable="true">'+p+"</span>":f&&(h["data-t"]=f&&f.t||"z",f.v!=null&&(h["data-v"]=f.v),f.z!=null&&(h["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+f.l.Target+'">'+p+"</a>")),h.id=(n.id||"sjs")+"-"+d,i.push(at("td",p,h))}}var g="<tr>";return g+i.join("")+"</tr>"}var joe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Aoe="</body></html>";function Eoe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function S9(e,t){var r=t||{},n=r.header!=null?r.header:joe,a=r.footer!=null?r.footer:Aoe,i=[n],s=Ds(e["!ref"]);r.dense=Array.isArray(e),i.push(Eoe(e,s,r));for(var l=s.s.r;l<=s.e.r;++l)i.push(Soe(e,s,l,r));return i.push("</table>"+a),i.join("")}function j9(e,t,r){var n=r||{},a=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var s=typeof n.origin=="string"?Ra(n.origin):n.origin;a=s.r,i=s.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:i}};if(e["!ref"]){var d=Ds(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],p=0,h=e["!rows"]||(e["!rows"]=[]),g=0,m=0,x=0,y=0,v=0,b=0;for(e["!cols"]||(e["!cols"]=[]);g<l.length&&m<c;++g){var N=l[g];if(XO(N)){if(n.display)continue;h[m]={hidden:!0}}var _=N.children;for(x=y=0;x<_.length;++x){var E=_[x];if(!(n.display&&XO(E))){var j=E.hasAttribute("data-v")?E.getAttribute("data-v"):E.hasAttribute("v")?E.getAttribute("v"):ite(E.innerHTML),A=E.getAttribute("data-z")||E.getAttribute("z");for(p=0;p<f.length;++p){var T=f[p];T.s.c==y+i&&T.s.r<m+a&&m+a<=T.e.r&&(y=T.e.c+1-i,p=-1)}b=+E.getAttribute("colspan")||1,((v=+E.getAttribute("rowspan")||1)>1||b>1)&&f.push({s:{r:m+a,c:y+i},e:{r:m+a+(v||1)-1,c:y+i+(b||1)-1}});var P={t:"s",v:j},O=E.getAttribute("data-t")||E.getAttribute("t")||"";j!=null&&(j.length==0?P.t=O||"z":n.raw||j.trim().length==0||O=="s"||(j==="TRUE"?P={t:"b",v:!0}:j==="FALSE"?P={t:"b",v:!1}:isNaN(gc(j))?isNaN(Vg(j).getDate())||(P={t:"d",v:Fi(j)},n.cellDates||(P={t:"n",v:as(P.v)}),P.z=n.dateNF||$n[14]):P={t:"n",v:gc(j)})),P.z===void 0&&A!=null&&(P.z=A);var R="",I=E.getElementsByTagName("A");if(I&&I.length)for(var z=0;z<I.length&&!(I[z].hasAttribute("href")&&(R=I[z].getAttribute("href"),R.charAt(0)!="#"));++z);R&&R.charAt(0)!="#"&&(P.l={Target:R}),n.dense?(e[m+a]||(e[m+a]=[]),e[m+a][y+i]=P):e[Wr({c:y+i,r:m+a})]=P,u.e.c<y+i&&(u.e.c=y+i),y+=b}}++m}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,m-1+a),e["!ref"]=ca(u),m>=c&&(e["!fullref"]=ca((u.e.r=l.length-g+m-1+a,u))),e}function A9(e,t){var r=t||{},n=r.dense?[]:{};return j9(n,e,t)}function Toe(e,t){return zf(A9(e,t),t)}function XO(e){var t="",r=Coe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Coe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var koe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Kg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return da+t}}(),JO=function(){var e=function(i){return qr(i).replace(/  +/g,function(s){return'<text:s text:c="'+s.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,s,l){var c=[];c.push('      <table:table table:name="'+qr(s.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=Ds(i["!ref"]||"A1"),p=i["!merges"]||[],h=0,g=Array.isArray(i);if(i["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(i["!cols"][d]?' table:style-name="co'+i["!cols"][d].ods+'"':"")+`></table:table-column>
`);var m="",x=i["!rows"]||[];for(u=0;u<f.s.r;++u)m=x[u]?' table:style-name="ro'+x[u].ods+'"':"",c.push("        <table:table-row"+m+`></table:table-row>
`);for(;u<=f.e.r;++u){for(m=x[u]?' table:style-name="ro'+x[u].ods+'"':"",c.push("        <table:table-row"+m+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var y=!1,v={},b="";for(h=0;h!=p.length;++h)if(!(p[h].s.c>d)&&!(p[h].s.r>u)&&!(p[h].e.c<d)&&!(p[h].e.r<u)){(p[h].s.c!=d||p[h].s.r!=u)&&(y=!0),v["table:number-columns-spanned"]=p[h].e.c-p[h].s.c+1,v["table:number-rows-spanned"]=p[h].e.r-p[h].s.r+1;break}if(y){c.push(r);continue}var N=Wr({r:u,c:d}),_=g?(i[u]||[])[d]:i[N];if(_&&_.f&&(v["table:formula"]=qr(Xae(_.f)),_.F&&_.F.slice(0,N.length)==N)){var E=Ds(_.F);v["table:number-matrix-columns-spanned"]=E.e.c-E.s.c+1,v["table:number-matrix-rows-spanned"]=E.e.r-E.s.r+1}if(!_){c.push(t);continue}switch(_.t){case"b":b=_.v?"TRUE":"FALSE",v["office:value-type"]="boolean",v["office:boolean-value"]=_.v?"true":"false";break;case"n":b=_.w||String(_.v||0),v["office:value-type"]="float",v["office:value"]=_.v||0;break;case"s":case"str":b=_.v==null?"":_.v,v["office:value-type"]="string";break;case"d":b=_.w||Fi(_.v).toISOString(),v["office:value-type"]="date",v["office:date-value"]=Fi(_.v).toISOString(),v["table:style-name"]="ce1";break;default:c.push(t);continue}var j=e(b);if(_.l&&_.l.Target){var A=_.l.Target;A=A.charAt(0)=="#"?"#"+Jae(A.slice(1)):A,A.charAt(0)!="#"&&!A.match(/^\w+:/)&&(A="../"+A),j=at("text:a",j,{"xlink:href":A.replace(/&/g,"&amp;")})}c.push("          "+at("table:table-cell",at("text:p",j,{}),v)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(i,s){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;s.SheetNames.map(function(u){return s.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;q3(f),f.ods=l;var p=u["!cols"][d].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;s.SheetNames.map(function(u){return s.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(s,l){var c=[da],u=Kg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Kg({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(U$().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,s),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=s.SheetNames.length;++f)c.push(n(s.Sheets[s.SheetNames[f]],s,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function E9(e,t){if(t.bookType=="fods")return JO(e,t);var r=P3(),n="",a=[],i=[];return n="mimetype",dr(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",dr(r,n,JO(e,t)),a.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",dr(r,n,koe(e,t)),a.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",dr(r,n,da+U$()),a.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",dr(r,n,zte(i)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",dr(r,n,Bte(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Eb(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Ooe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):zo(Gg(e))}function Poe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Yu(e){var t=e.reduce(function(a,i){return a+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function Loe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var i=0;a>=1;++i,a/=256)e[t+i]=a&255;e[t+15]|=r>=0?0:128}function Yg(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function Br(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function l0(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function ba(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=Yg(e,r),i=a&7;a=Math.floor(a/8);var s=0,l;if(a==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:s=4,l=e.slice(r[0],r[0]+s),r[0]+=s;break;case 1:s=8,l=e.slice(r[0],r[0]+s),r[0]+=s;break;case 2:s=Yg(e,r),l=e.slice(r[0],r[0]+s),r[0]+=s;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:i};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function Va(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(Br(n*8+a.type)),a.type==2&&t.push(Br(a.data.length)),t.push(a.data))})}),Yu(t)}function Eo(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=Yg(e,n),i=ba(e.slice(n[0],n[0]+a));n[0]+=a;var s={id:l0(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=ba(l.data),u=l0(c[3][0].data);s.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=i[3])!=null&&t[0]&&(s.merge=l0(i[3][0].data)>>>0>0),r.push(s)}return r}function gh(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:Br(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Br(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(s){a.push(s.data),s.meta[3]=[{type:0,data:Br(s.data.length)}],n[2].push({data:Va(s.meta),type:2})});var i=Va(n);t.push(Br(i.length)),t.push(i),a.forEach(function(s){return t.push(s)})}),Yu(t)}function Roe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=Yg(t,r),a=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var s=t[r[0]++]>>2;if(s<60)++s;else{var l=s-59;s=t[r[0]],l>1&&(s|=t[r[0]+1]<<8),l>2&&(s|=t[r[0]+2]<<16),l>3&&(s|=t[r[0]+3]<<24),s>>>=0,s++,r[0]+=l}a.push(t.slice(r[0],r[0]+s)),r[0]+=s;continue}else{var c=0,u=0;if(i==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Yu(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=Yu(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function To(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Roe(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Yu(t)}function vh(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var i=Br(n),s=i.length;t.push(i),n<=60?(s++,t.push(new Uint8Array([n-1<<2]))):n<=256?(s+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(s+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(s+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(s+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),s+=n,a[0]=0,a[1]=s&255,a[2]=s>>8&255,a[3]=s>>16&255,r+=n}return Yu(t)}function z5(e,t){var r=new Uint8Array(32),n=Eb(r),a=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,Loe(r,a,e.v),i|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),i|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,i,!0),r.slice(0,a)}function q5(e,t){var r=new Uint8Array(32),n=Eb(r),a=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),i|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),i|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,i,!0),r.slice(0,a)}function iu(e){var t=ba(e);return Yg(t[1][0].data)}function Doe(e,t,r){var n,a,i,s;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((s=(i=e[8])==null?void 0:i[0])==null?void 0:s.data)&&l0(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=Eb(e[7][0].data),d=0,f=[],p=Eb(e[4][0].data),h=0,g=[],m=0;m<t.length;++m){if(t[m]==null){u.setUint16(m*2,65535,!0),p.setUint16(m*2,65535);continue}u.setUint16(m*2,d,!0),p.setUint16(m*2,h,!0);var x,y;switch(typeof t[m]){case"string":x=z5({t:"s",v:t[m]},r),y=q5({t:"s",v:t[m]},r);break;case"number":x=z5({t:"n",v:t[m]},r),y=q5({t:"n",v:t[m]},r);break;case"boolean":x=z5({t:"b",v:t[m]},r),y=q5({t:"b",v:t[m]},r);break;default:throw new Error("Unsupported value "+t[m])}f.push(x),d+=x.length,g.push(y),h+=y.length,++c}for(e[2][0].data=Br(c);m<e[7][0].data.length/2;++m)u.setUint16(m*2,65535,!0),p.setUint16(m*2,65535,!0);return e[6][0].data=Yu(f),e[3][0].data=Yu(g),c}function Ioe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Ds(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(ca(n)));var i=Tb(r,{range:n,header:1}),s=["~Sh33tJ5~"];i.forEach(function(F){return F.forEach(function(B){typeof B=="string"&&s.push(B)})});var l={},c=[],u=Kr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(F,B){return[F,u.FullPaths[B]]}).forEach(function(F){var B=F[0],U=F[1];if(B.type==2&&B.name.match(/\.iwa/)){var J=B.content,me=To(J),K=Eo(me);K.forEach(function(te){c.push(te.id),l[te.id]={deps:[],location:U,type:l0(te.messages[0].meta[1][0].data)}})}}),c.sort(function(F,B){return F-B});var d=c.filter(function(F){return F>1}).map(function(F){return[F,Br(F)]});u.FileIndex.map(function(F,B){return[F,u.FullPaths[B]]}).forEach(function(F){var B=F[0];if(F[1],!!B.name.match(/\.iwa/)){var U=Eo(To(B.content));U.forEach(function(J){J.messages.forEach(function(me){d.forEach(function(K){J.messages.some(function(te){return l0(te.meta[1][0].data)!=11006&&Poe(te.data,K[1])})&&l[K[0]].deps.push(J.id)})})})}});for(var f=Kr.find(u,l[1].location),p=Eo(To(f.content)),h,g=0;g<p.length;++g){var m=p[g];m.id==1&&(h=m)}var x=iu(ba(h.messages[0].data)[1][0].data);for(f=Kr.find(u,l[x].location),p=Eo(To(f.content)),g=0;g<p.length;++g)m=p[g],m.id==x&&(h=m);for(x=iu(ba(h.messages[0].data)[2][0].data),f=Kr.find(u,l[x].location),p=Eo(To(f.content)),g=0;g<p.length;++g)m=p[g],m.id==x&&(h=m);for(x=iu(ba(h.messages[0].data)[2][0].data),f=Kr.find(u,l[x].location),p=Eo(To(f.content)),g=0;g<p.length;++g)m=p[g],m.id==x&&(h=m);var y=ba(h.messages[0].data);{y[6][0].data=Br(n.e.r+1),y[7][0].data=Br(n.e.c+1);var v=iu(y[46][0].data),b=Kr.find(u,l[v].location),N=Eo(To(b.content));{for(var _=0;_<N.length&&N[_].id!=v;++_);if(N[_].id!=v)throw"Bad ColumnRowUIDMapArchive";var E=ba(N[_].messages[0].data);E[1]=[],E[2]=[],E[3]=[];for(var j=0;j<=n.e.c;++j){var A=[];A[1]=A[2]=[{type:0,data:Br(j+420690)}],E[1].push({type:2,data:Va(A)}),E[2].push({type:0,data:Br(j)}),E[3].push({type:0,data:Br(j)})}E[4]=[],E[5]=[],E[6]=[];for(var T=0;T<=n.e.r;++T)A=[],A[1]=A[2]=[{type:0,data:Br(T+726270)}],E[4].push({type:2,data:Va(A)}),E[5].push({type:0,data:Br(T)}),E[6].push({type:0,data:Br(T)});N[_].messages[0].data=Va(E)}b.content=vh(gh(N)),b.size=b.content.length,delete y[46];var P=ba(y[4][0].data);{P[7][0].data=Br(n.e.r+1);var O=ba(P[1][0].data),R=iu(O[2][0].data);b=Kr.find(u,l[R].location),N=Eo(To(b.content));{if(N[0].id!=R)throw"Bad HeaderStorageBucket";var I=ba(N[0].messages[0].data);for(T=0;T<i.length;++T){var z=ba(I[2][0].data);z[1][0].data=Br(T),z[4][0].data=Br(i[T].length),I[2][T]={type:I[2][0].type,data:Va(z)}}N[0].messages[0].data=Va(I)}b.content=vh(gh(N)),b.size=b.content.length;var Y=iu(P[2][0].data);b=Kr.find(u,l[Y].location),N=Eo(To(b.content));{if(N[0].id!=Y)throw"Bad HeaderStorageBucket";for(I=ba(N[0].messages[0].data),j=0;j<=n.e.c;++j)z=ba(I[2][0].data),z[1][0].data=Br(j),z[4][0].data=Br(n.e.r+1),I[2][j]={type:I[2][0].type,data:Va(z)};N[0].messages[0].data=Va(I)}b.content=vh(gh(N)),b.size=b.content.length;var ie=iu(P[4][0].data);(function(){for(var F=Kr.find(u,l[ie].location),B=Eo(To(F.content)),U,J=0;J<B.length;++J){var me=B[J];me.id==ie&&(U=me)}var K=ba(U.messages[0].data);{K[3]=[];var te=[];s.forEach(function(ge,Me){te[1]=[{type:0,data:Br(Me)}],te[2]=[{type:0,data:Br(1)}],te[3]=[{type:2,data:Ooe(ge)}],K[3].push({type:2,data:Va(te)})})}U.messages[0].data=Va(K);var le=gh(B),ve=vh(le);F.content=ve,F.size=F.content.length})();var re=ba(P[3][0].data);{var X=re[1][0];delete re[2];var oe=ba(X.data);{var we=iu(oe[2][0].data);(function(){for(var F=Kr.find(u,l[we].location),B=Eo(To(F.content)),U,J=0;J<B.length;++J){var me=B[J];me.id==we&&(U=me)}var K=ba(U.messages[0].data);{delete K[6],delete re[7];var te=new Uint8Array(K[5][0].data);K[5]=[];for(var le=0,ve=0;ve<=n.e.r;++ve){var ge=ba(te);le+=Doe(ge,i[ve],s),ge[1][0].data=Br(ve),K[5].push({data:Va(ge),type:2})}K[1]=[{type:0,data:Br(n.e.c+1)}],K[2]=[{type:0,data:Br(n.e.r+1)}],K[3]=[{type:0,data:Br(le)}],K[4]=[{type:0,data:Br(n.e.r+1)}]}U.messages[0].data=Va(K);var Me=gh(B),Fe=vh(Me);F.content=Fe,F.size=F.content.length})()}X.data=Va(oe)}P[3][0].data=Va(re)}y[4][0].data=Va(P)}h.messages[0].data=Va(y);var _e=gh(p),k=vh(_e);return f.content=k,f.size=f.content.length,u}function Moe(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function K3(e){Moe([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function Foe(e,t){return t.bookType=="ods"?E9(e,t):t.bookType=="numbers"?Ioe(e,t):t.bookType=="xlsb"?$oe(e,t):Boe(e,t)}function $oe(e,t){zh=1024,e&&!e.SSF&&(e.SSF=is($n)),e&&e.SSF&&(pw(),hw(e.SSF),t.revssf=mw(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,cg?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=c9.indexOf(t.bookType)>-1,a=F$();K3(t=t||{});var i=P3(),s="",l=0;if(t.cellXfs=[],td(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),s="docProps/core.xml",dr(i,s,z$(e.Props,t)),a.coreprops.push(s),Ur(t.rels,2,s,Sr.CORE_PROPS),s="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,dr(i,s,H$(e.Props)),a.extprops.push(s),Ur(t.rels,3,s,Sr.EXT_PROPS),e.Custprops!==e.Props&&ti(e.Custprops||{}).length>0&&(s="docProps/custom.xml",dr(i,s,W$(e.Custprops)),a.custprops.push(s),Ur(t.rels,4,s,Sr.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var d={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],p=(f||{})["!type"]||"sheet";switch(p){case"chart":default:s="xl/worksheets/sheet"+l+"."+r,dr(i,s,zse(l-1,s,t,e,d)),a.sheets.push(s),Ur(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Sr.WS[0])}if(f){var h=f["!comments"],g=!1,m="";h&&h.length>0&&(m="xl/comments"+l+"."+r,dr(i,m,Wse(h,m)),a.comments.push(m),Ur(d,-1,"../comments"+l+"."+r,Sr.CMNT),g=!0),f["!legacy"]&&g&&dr(i,"xl/drawings/vmlDrawing"+l+".vml",o9(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&dr(i,B$(s),s0(d))}return t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+r,dr(i,s,Hse(t.Strings,s,t)),a.strs.push(s),Ur(t.wbrels,-1,"sharedStrings."+r,Sr.SST)),s="xl/workbook."+r,dr(i,s,Use(e,s)),a.workbooks.push(s),Ur(t.rels,1,s,Sr.WB),s="xl/theme/theme1.xml",dr(i,s,i9(e.Themes,t)),a.themes.push(s),Ur(t.wbrels,-1,"theme/theme1.xml",Sr.THEME),s="xl/styles."+r,dr(i,s,qse(e,s,t)),a.styles.push(s),Ur(t.wbrels,-1,"styles."+r,Sr.STY),e.vbaraw&&n&&(s="xl/vbaProject.bin",dr(i,s,e.vbaraw),a.vba.push(s),Ur(t.wbrels,-1,"vbaProject.bin",Sr.VBA)),s="xl/metadata."+r,dr(i,s,Vse(s)),a.metadata.push(s),Ur(t.wbrels,-1,"metadata."+r,Sr.XLMETA),dr(i,"[Content_Types].xml",$$(a,t)),dr(i,"_rels/.rels",s0(t.rels)),dr(i,"xl/_rels/workbook."+r+".rels",s0(t.wbrels)),delete t.revssf,delete t.ssf,i}function Boe(e,t){zh=1024,e&&!e.SSF&&(e.SSF=is($n)),e&&e.SSF&&(pw(),hw(e.SSF),t.revssf=mw(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,cg?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=c9.indexOf(t.bookType)>-1,a=F$();K3(t=t||{});var i=P3(),s="",l=0;if(t.cellXfs=[],td(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),s="docProps/core.xml",dr(i,s,z$(e.Props,t)),a.coreprops.push(s),Ur(t.rels,2,s,Sr.CORE_PROPS),s="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,dr(i,s,H$(e.Props)),a.extprops.push(s),Ur(t.rels,3,s,Sr.EXT_PROPS),e.Custprops!==e.Props&&ti(e.Custprops||{}).length>0&&(s="docProps/custom.xml",dr(i,s,W$(e.Custprops)),a.custprops.push(s),Ur(t.rels,4,s,Sr.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},p=e.Sheets[e.SheetNames[l-1]],h=(p||{})["!type"]||"sheet";switch(h){case"chart":default:s="xl/worksheets/sheet"+l+"."+r,dr(i,s,x9(l-1,t,e,f)),a.sheets.push(s),Ur(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Sr.WS[0])}if(p){var g=p["!comments"],m=!1,x="";if(g&&g.length>0){var y=!1;g.forEach(function(v){v[1].forEach(function(b){b.T==!0&&(y=!0)})}),y&&(x="xl/threadedComments/threadedComment"+l+"."+r,dr(i,x,vne(g,d,t)),a.threadedcomments.push(x),Ur(f,-1,"../threadedComments/threadedComment"+l+"."+r,Sr.TCMNT)),x="xl/comments"+l+"."+r,dr(i,x,l9(g)),a.comments.push(x),Ur(f,-1,"../comments"+l+"."+r,Sr.CMNT),m=!0}p["!legacy"]&&m&&dr(i,"xl/drawings/vmlDrawing"+l+".vml",o9(l,p["!comments"])),delete p["!comments"],delete p["!legacy"]}f["!id"].rId1&&dr(i,B$(s),s0(f))}return t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+r,dr(i,s,Z$(t.Strings,t)),a.strs.push(s),Ur(t.wbrels,-1,"sharedStrings."+r,Sr.SST)),s="xl/workbook."+r,dr(i,s,w9(e)),a.workbooks.push(s),Ur(t.rels,1,s,Sr.WB),s="xl/theme/theme1.xml",dr(i,s,i9(e.Themes,t)),a.themes.push(s),Ur(t.wbrels,-1,"theme/theme1.xml",Sr.THEME),s="xl/styles."+r,dr(i,s,n9(e,t)),a.styles.push(s),Ur(t.wbrels,-1,"styles."+r,Sr.STY),e.vbaraw&&n&&(s="xl/vbaProject.bin",dr(i,s,e.vbaraw),a.vba.push(s),Ur(t.wbrels,-1,"vbaProject.bin",Sr.VBA)),s="xl/metadata."+r,dr(i,s,s9()),a.metadata.push(s),Ur(t.wbrels,-1,"metadata."+r,Sr.XLMETA),d.length>1&&(s="xl/persons/person.xml",dr(i,s,xne(d)),a.people.push(s),Ur(t.wbrels,-1,"persons/person.xml",Sr.PEOPLE)),dr(i,"[Content_Types].xml",$$(a,t)),dr(i,"_rels/.rels",s0(t.rels)),dr(i,"xl/_rels/workbook."+r+".rels",s0(t.wbrels)),delete t.revssf,delete t.ssf,i}function Uoe(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Ac(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function T9(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Yv(t.file,Kr.write(e,{type:Cr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Kr.write(e,t)}function zoe(e,t){var r=is(t||{}),n=Foe(e,r);return qoe(n,r)}function qoe(e,t){var r={},n=Cr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?Kr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(fw(a))}return t.password&&typeof encrypt_agile<"u"?T9(encrypt_agile(a,t.password),t):t.type==="file"?Yv(t.file,a):t.type=="string"?ig(a):a}function Hoe(e,t){var r=t||{},n=soe(e,r);return T9(n,r)}function dl(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Wg(Gg(n));case"binary":return Gg(n);case"string":return e;case"file":return Yv(t.file,n,"utf8");case"buffer":return Cr?Mc(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):dl(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Woe(e,t){switch(t.type){case"base64":return Wg(e);case"binary":return e;case"string":return e;case"file":return Yv(t.file,e,"binary");case"buffer":return Cr?Mc(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function D1(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?Wg(r):t.type=="string"?ig(r):r;case"file":return Yv(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function C9(e,t){yee(),kse(e);var r=is(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=C9(e,r);return r.type="array",fw(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return dl(aoe(e,r),r);case"slk":case"sylk":return dl(Ere.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return dl(S9(e.Sheets[e.SheetNames[a]],r),r);case"txt":return Woe(O9(e.Sheets[e.SheetNames[a]],r),r);case"csv":return dl(Y3(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return dl(Tre.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return D1(Are.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return dl(Cre.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return dl(Ire.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return dl(Q$.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return dl(E9(e,r),r);case"wk1":return D1(HO.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return D1(HO.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),D1(N9(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Hoe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return zoe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function Voe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function k9(e,t,r){var n={};return n.type="file",n.file=t,Voe(n),C9(e,n)}function Goe(e,t,r,n,a,i,s,l){var c=Za(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,p=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!s||e[r])for(var h=t.s.c;h<=t.e.c;++h){var g=s?e[r][h]:e[n[h]+c];if(g===void 0||g.t===void 0){if(u===void 0)continue;i[h]!=null&&(p[i[h]]=u);continue}var m=g.v;switch(g.t){case"z":if(m==null)break;continue;case"e":m=m==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(i[h]!=null){if(m==null)if(g.t=="e"&&m===null)p[i[h]]=null;else if(u!==void 0)p[i[h]]=u;else if(d&&m===null)p[i[h]]=null;else continue;else p[i[h]]=d&&(g.t!=="n"||g.t==="n"&&l.rawNumbers!==!1)?m:Ec(g,m,l);m!=null&&(f=!1)}}return{row:p,isempty:f}}function Tb(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,i=[],s=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=mn(d);break;case"number":c=mn(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=Za(c.s.r),p=[],h=[],g=0,m=0,x=Array.isArray(e),y=c.s.r,v=0,b={};x&&!e[y]&&(e[y]=[]);var N=u.skipHidden&&e["!cols"]||[],_=u.skipHidden&&e["!rows"]||[];for(v=c.s.c;v<=c.e.c;++v)if(!(N[v]||{}).hidden)switch(p[v]=mi(v),r=x?e[y][v]:e[p[v]+f],n){case 1:i[v]=v-c.s.c;break;case 2:i[v]=p[v];break;case 3:i[v]=u.header[v-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=s=Ec(r,null,u),m=b[s]||0,!m)b[s]=1;else{do l=s+"_"+m++;while(b[l]);b[s]=m,b[l]=1}i[v]=l}for(y=c.s.r+a;y<=c.e.r;++y)if(!(_[y]||{}).hidden){var E=Goe(e,c,y,p,n,i,x,u);(E.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(h[g++]=E.row)}return h.length=g,h}var QO=/"/g;function Koe(e,t,r,n,a,i,s,l){for(var c=!0,u=[],d="",f=Za(r),p=t.s.c;p<=t.e.c;++p)if(n[p]){var h=l.dense?(e[r]||[])[p]:e[n[p]+f];if(h==null)d="";else if(h.v!=null){c=!1,d=""+(l.rawNumbers&&h.t=="n"?h.v:Ec(h,null,l));for(var g=0,m=0;g!==d.length;++g)if((m=d.charCodeAt(g))===a||m===i||m===34||l.forceQuotes){d='"'+d.replace(QO,'""')+'"';break}d=="ID"&&(d='"ID"')}else h.f!=null&&!h.F?(c=!1,d="="+h.f,d.indexOf(",")>=0&&(d='"'+d.replace(QO,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(s)}function Y3(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=mn(e["!ref"]),i=n.FS!==void 0?n.FS:",",s=i.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var p=n.skipHidden&&e["!cols"]||[],h=n.skipHidden&&e["!rows"]||[],g=a.s.c;g<=a.e.c;++g)(p[g]||{}).hidden||(f[g]=mi(g));for(var m=0,x=a.s.r;x<=a.e.r;++x)(h[x]||{}).hidden||(d=Koe(e,a,x,f,s,c,i,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((m++?l:"")+d)));return delete n.dense,r.join("")}function O9(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=Y3(e,t);return r}function Yoe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=mn(e["!ref"]),i="",s=[],l,c=[],u=Array.isArray(e);for(l=a.s.c;l<=a.e.c;++l)s[l]=mi(l);for(var d=a.s.r;d<=a.e.r;++d)for(i=Za(d),l=a.s.c;l<=a.e.c;++l)if(t=s[l]+i,r=u?(e[d]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function P9(e,t,r){var n=r||{},a=+!n.skipHeader,i=e||{},s=0,l=0;if(i&&n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var c=typeof n.origin=="string"?Ra(n.origin):n.origin;s=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:s+t.length-1+a}};if(i["!ref"]){var f=mn(i["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),s==-1&&(s=f.e.r+1,d.e.r=s+t.length-1+a)}else s==-1&&(s=0,d.e.r=t.length-1+a);var p=n.header||[],h=0;t.forEach(function(m,x){ti(m).forEach(function(y){(h=p.indexOf(y))==-1&&(p[h=p.length]=y);var v=m[y],b="z",N="",_=Wr({c:l+h,r:s+x+a});u=Xg(i,_),v&&typeof v=="object"&&!(v instanceof Date)?i[_]=v:(typeof v=="number"?b="n":typeof v=="boolean"?b="b":typeof v=="string"?b="s":v instanceof Date?(b="d",n.cellDates||(b="n",v=as(v)),N=n.dateNF||$n[14]):v===null&&n.nullError&&(b="e",v=0),u?(u.t=b,u.v=v,delete u.w,delete u.R,N&&(u.z=N)):i[_]=u={t:b,v},N&&(u.z=N))})}),d.e.c=Math.max(d.e.c,l+p.length-1);var g=Za(s);if(a)for(h=0;h<p.length;++h)i[mi(h+l)+g]={t:"s",v:p[h]};return i["!ref"]=ca(d),i}function Xoe(e,t){return P9(null,e,t)}function Xg(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Ra(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Xg(e,Wr(t)):Xg(e,Wr({r:t,c:r||0}))}function Joe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function Qoe(){return{SheetNames:[],Sheets:{}}}function Zoe(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);a=i&&+i[2]||0;var s=i&&i[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=s+a)!=-1;++a);}if(b9(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function ele(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=Joe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function tle(e,t){return e.z=t,e}function L9(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function rle(e,t,r){return L9(e,"#"+t,r)}function nle(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function ale(e,t,r,n){for(var a=typeof t!="string"?t:mn(t),i=typeof t=="string"?t:ca(t),s=a.s.r;s<=a.e.r;++s)for(var l=a.s.c;l<=a.e.c;++l){var c=Xg(e,s,l);c.t="n",c.F=i,delete c.v,s==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var ia={encode_col:mi,encode_row:Za,encode_cell:Wr,encode_range:ca,decode_col:F3,decode_row:M3,split_cell:yte,decode_cell:Ra,decode_range:Ds,format_cell:Ec,sheet_add_aoa:P$,sheet_add_json:P9,sheet_add_dom:j9,aoa_to_sheet:Ap,json_to_sheet:Xoe,table_to_sheet:A9,table_to_book:Toe,sheet_to_csv:Y3,sheet_to_txt:O9,sheet_to_json:Tb,sheet_to_html:S9,sheet_to_formulae:Yoe,sheet_to_row_object_array:Tb,sheet_get_cell:Xg,book_new:Qoe,book_append_sheet:Zoe,book_set_sheet_visibility:ele,cell_set_number_format:tle,cell_set_hyperlink:L9,cell_set_internal_link:rle,cell_add_comment:nle,sheet_set_array_formula:ale,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Er=({filename:e,sheetName:t,rows:r,columns:n})=>{const a=e.endsWith(".xlsx")?e:`${e}.xlsx`,i=n.map(u=>u.header),s=r.map(u=>n.map(d=>(d.value?d.value(u):u[d.key])??"")),l=ia.aoa_to_sheet([i,...s]),c=ia.book_new();ia.book_append_sheet(c,l,t),k9(c,a)},rd=e=>e.replace(/[.\-\s]/g,"").toUpperCase(),Jn=e=>{const t=rd(e);if(t.length<2)return t;const r=t.slice(0,-1),n=t.slice(-1);return`${r.replace(/\B(?=(\d{3})+(?!\d))/g,".")}-${n}`},ile=e=>{const t=e.replace(/\D/g,"");let r=0,n=2;for(let i=t.length-1;i>=0;i--)r+=parseInt(t[i],10)*n,n=n===7?2:n+1;const a=11-r%11;return a===11?"0":a===10?"K":String(a)},jj=e=>{if(!e||e.trim()==="")return{valid:!1,error:"RUT es requerido"};const t=rd(e);if(!/^\d{7,9}[0-9K]$/i.test(t))return{valid:!1,error:"Formato de RUT invlido"};const r=t.slice(0,-1),n=t.slice(-1).toUpperCase(),a=ile(r);return n!==a?{valid:!1,error:"Dgito verificador invlido"}:{valid:!0}},H0=[{value:"conductor",label:"Conductor"},{value:"inspector_patio",label:"Inspector Patio"},{value:"cleaner",label:"Cleaner"},{value:"planillero",label:"Planillero"},{value:"supervisor",label:"Supervisor"}],sle=[{value:"todos",label:"Todos"},{value:"ACTIVO",label:"Activo"},{value:"DESVINCULADO",label:"Desvinculado"}],R9=async(e,t)=>{if(!rr())return console.warn("Supabase not configured, returning empty array"),[];const r=zi(e);let n=Se.from("staff").select(`
      *,
      staff_admonitions(count)
    `).in("terminal_code",r).order("nombre",{ascending:!0});if(t!=null&&t.status&&t.status!=="todos"&&(n=n.eq("status",t.status)),t!=null&&t.cargo&&t.cargo!=="todos"&&(n=n.eq("cargo",t.cargo)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}const{data:a,error:i}=await n;if(i)throw console.error("Error fetching staff:",i),i;return(a||[]).map(s=>{var l,c;return{...s,admonition_count:((c=(l=s.staff_admonitions)==null?void 0:l[0])==null?void 0:c.count)??0}})},ole=async e=>{const t=rd(e),{data:r,error:n}=await Se.from("staff").select("*").eq("rut",t).single();if(n){if(n.code==="PGRST116")return null;throw n}return r},lle=async e=>{var n,a,i,s,l,c;const{data:t,error:r}=await Se.from("staff").insert({rut:rd(e.rut),nombre:e.nombre.trim(),cargo:e.cargo,terminal_code:e.terminal_code,turno:e.turno.trim(),horario:e.horario.trim(),contacto:e.contacto.trim(),email:((n=e.email)==null?void 0:n.trim())||null,talla_polera:((a=e.talla_polera)==null?void 0:a.trim())||null,talla_chaqueta:((i=e.talla_chaqueta)==null?void 0:i.trim())||null,talla_pantalon:((s=e.talla_pantalon)==null?void 0:s.trim())||null,talla_zapato_seguridad:((l=e.talla_zapato_seguridad)==null?void 0:l.trim())||null,talla_chaleco_reflectante:((c=e.talla_chaleco_reflectante)==null?void 0:c.trim())||null}).select().single();if(r)throw r.code==="23505"?new Error("Ya existe un trabajador con ese RUT"):r;return t},cle=async(e,t)=>{var i,s,l,c,u,d;const r={};t.rut!==void 0&&(r.rut=rd(t.rut)),t.nombre!==void 0&&(r.nombre=t.nombre.trim()),t.cargo!==void 0&&(r.cargo=t.cargo),t.terminal_code!==void 0&&(r.terminal_code=t.terminal_code),t.turno!==void 0&&(r.turno=t.turno.trim()),t.horario!==void 0&&(r.horario=t.horario.trim()),t.contacto!==void 0&&(r.contacto=t.contacto.trim()),t.email!==void 0&&(r.email=((i=t.email)==null?void 0:i.trim())||null),t.talla_polera!==void 0&&(r.talla_polera=((s=t.talla_polera)==null?void 0:s.trim())||null),t.talla_chaqueta!==void 0&&(r.talla_chaqueta=((l=t.talla_chaqueta)==null?void 0:l.trim())||null),t.talla_pantalon!==void 0&&(r.talla_pantalon=((c=t.talla_pantalon)==null?void 0:c.trim())||null),t.talla_zapato_seguridad!==void 0&&(r.talla_zapato_seguridad=((u=t.talla_zapato_seguridad)==null?void 0:u.trim())||null),t.talla_chaleco_reflectante!==void 0&&(r.talla_chaleco_reflectante=((d=t.talla_chaleco_reflectante)==null?void 0:d.trim())||null);const{data:n,error:a}=await Se.from("staff").update(r).eq("id",e).select().single();if(a)throw a;return n},ule=async(e,t)=>{const{data:r,error:n}=await Se.from("staff").update({status:"DESVINCULADO",terminated_at:new Date().toISOString(),termination_comment:t.trim()}).eq("id",e).select().single();if(n)throw n;return r},dle=async e=>{const{data:t,error:r}=await Se.from("staff").update({suspended:!0}).eq("id",e).select().single();if(r)throw r;return t},fle=async e=>{const{data:t,error:r}=await Se.from("staff").update({suspended:!1}).eq("id",e).select().single();if(r)throw r;return t},hle=async e=>{const t=zi(e),{data:r,error:n}=await Se.from("staff").select("id, cargo, terminal_code, suspended").eq("status","ACTIVO").in("terminal_code",t);if(n)throw n;const a=new Date().toISOString().split("T")[0],i=(r||[]).map(g=>g.id),{data:s}=await Se.from("attendance_licenses").select("staff_id").in("staff_id",i).lte("start_date",a).gte("end_date",a),l=new Set((s||[]).map(g=>g.staff_id)),{data:c}=await Se.from("staff_caps").select("*").eq("scope_code","ER_LR"),u=new Map;(c||[]).forEach(g=>{u.set(g.cargo,g.max_q)});const d=new Map;H0.forEach(g=>d.set(g.value,{count:0,withLicenses:0,suspended:0})),(r||[]).forEach(g=>{const m=g.cargo,x=d.get(m)||{count:0,withLicenses:0,suspended:0};x.count++,l.has(g.id)&&x.withLicenses++,g.suspended&&x.suspended++,d.set(m,x)});const f=H0.map(g=>{const m=d.get(g.value)||{count:0,withLicenses:0,suspended:0},x=m.count-m.suspended;return{cargo:g.value,count:m.count,max_q:u.get(g.value)??null,with_licenses:m.withLicenses,suspended:m.suspended,effective_count:x}}),p=new Map;t.forEach(g=>p.set(g,0)),(r||[]).forEach(g=>{const m=p.get(g.terminal_code)||0;p.set(g.terminal_code,m+1)});const h=t.map(g=>({terminal_code:g,count:p.get(g)||0}));return{byCargo:f,byTerminal:h,total:(r==null?void 0:r.length)||0}},ple=async(e,t,r,n)=>{const a=n.name.split(".").pop(),i=`staff/${e}/admonitions/${Date.now()}.${a}`,{error:s}=await Se.storage.from("staff-docs").upload(i,n);if(s)throw console.error("Upload error:",s),new Error("Error al subir el documento");const{data:l,error:c}=await Se.from("staff_admonitions").insert({staff_id:e,reason:t.trim(),admonition_date:r,document_path:i}).select().single();if(c)throw c;return l},mle=(e,t)=>{const r=Se.channel("staff-changes").on("postgres_changes",{event:"*",schema:"public",table:"staff"},n=>{e({eventType:n.eventType,new:n.new,old:n.old})}).on("postgres_changes",{event:"INSERT",schema:"public",table:"staff_admonitions"},n=>{t({eventType:n.eventType,new:n.new})}).subscribe();return()=>{Se.removeChannel(r)}},Lr={all:["staff"],lists:()=>[...Lr.all,"list"],list:(e,t)=>[...Lr.lists(),e,t],details:()=>[...Lr.all,"detail"],detail:e=>[...Lr.details(),e],counts:e=>[...Lr.all,"counts",e],caps:()=>[...Lr.all,"caps"],admonitions:e=>[...Lr.all,"admonitions",e]},D9=(e,t)=>Mt({queryKey:Lr.list(e,t),queryFn:()=>R9(e,t)}),gle=e=>Mt({queryKey:Lr.counts(e),queryFn:()=>hle(e)}),vle=()=>{const e=St();return Et({mutationFn:t=>lle(t),onSuccess:()=>{e.invalidateQueries({queryKey:Lr.lists()}),e.invalidateQueries({queryKey:Lr.counts({})})}})},xle=()=>{const e=St();return Et({mutationFn:({id:t,values:r})=>cle(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:Lr.lists()}),e.invalidateQueries({queryKey:Lr.detail(t.id)}),e.invalidateQueries({queryKey:Lr.counts({})})}})},yle=()=>{const e=St();return Et({mutationFn:({id:t,comment:r})=>ule(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:Lr.lists()}),e.invalidateQueries({queryKey:Lr.detail(t.id)}),e.invalidateQueries({queryKey:Lr.counts({})})}})},ble=()=>{const e=St();return Et({mutationFn:t=>dle(t),onSuccess:t=>{e.invalidateQueries({queryKey:Lr.lists()}),e.invalidateQueries({queryKey:Lr.detail(t.id)}),e.invalidateQueries({queryKey:Lr.counts({})})}})},wle=()=>{const e=St();return Et({mutationFn:t=>fle(t),onSuccess:t=>{e.invalidateQueries({queryKey:Lr.lists()}),e.invalidateQueries({queryKey:Lr.detail(t.id)}),e.invalidateQueries({queryKey:Lr.counts({})})}})},_le=()=>{const e=St();return Et({mutationFn:({staffId:t,reason:r,admonitionDate:n,file:a})=>ple(t,r,n,a),onSuccess:t=>{e.invalidateQueries({queryKey:Lr.admonitions(t.staff_id)}),e.invalidateQueries({queryKey:Lr.lists()})}})},Nle=e=>{const t=St();D.useEffect(()=>mle(n=>{console.log("Staff change:",n.eventType),t.invalidateQueries({queryKey:Lr.lists()}),t.invalidateQueries({queryKey:Lr.counts(e)}),n.new&&t.invalidateQueries({queryKey:Lr.detail(n.new.id)})},n=>{console.log("Admonition change:",n.eventType),n.new&&(t.invalidateQueries({queryKey:Lr.admonitions(n.new.staff_id)}),t.invalidateQueries({queryKey:Lr.lists()}))}),[t,e])},Sle=e=>({conductor:"calendar",inspector_patio:"clipboard",cleaner:"check-circle",planillero:"layers",supervisor:"users"})[e]||"users",jle=e=>{var t;return((t=H0.find(r=>r.value===e))==null?void 0:t.label)||e},Ale=({terminalContext:e})=>{const{data:t,isLoading:r}=gle(e);if(r)return o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6",children:[...Array(5)].map((a,i)=>o.jsxs("div",{className:"card p-4 animate-pulse",children:[o.jsx("div",{className:"h-4 bg-slate-200 rounded w-20 mb-2"}),o.jsx("div",{className:"h-8 bg-slate-200 rounded w-16"})]},i))});if(!t)return null;const n=e.mode==="ALL"||e.mode==="TERMINAL"&&(e.value==="EL_ROBLE"||e.value==="LA_REINA");return o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide mb-3",children:["Personal por Cargo ",n&&"(ER-LR)"]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:t.byCargo.map(a=>{const i=a.effective_count,s=a.max_q&&i>a.max_q,l=a.max_q&&i<=a.max_q,c=a.max_q?i/a.max_q*100:0;return o.jsxs("div",{className:`card p-4 transition-all ${s?"border-red-300 bg-red-50":l?"border-green-300 bg-green-50":""}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-slate-100",children:o.jsx(Z,{name:Sle(a.cargo),size:18,className:"text-slate-600"})}),o.jsx("span",{className:"text-xs font-semibold text-slate-600 uppercase",children:jle(a.cargo)})]}),o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("span",{className:`text-2xl font-bold ${s?"text-red-600":l?"text-green-600":"text-slate-900"}`,children:i}),a.max_q&&o.jsxs("span",{className:"text-sm text-slate-500",children:["/ ",a.max_q]})]}),a.suspended>0&&o.jsxs("div",{className:"mt-2 text-xs text-slate-600 space-y-0.5",children:[o.jsxs("div",{children:["Total: ",a.count]}),o.jsxs("div",{children:["Suspendidos: ",a.suspended]}),o.jsxs("div",{className:"font-semibold pt-0.5 border-t border-slate-200",children:["Efectivo: ",i]})]}),a.max_q&&o.jsx("div",{className:"mt-2 h-1.5 bg-slate-200 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full transition-all ${s?"bg-red-500":"bg-green-500"}`,style:{width:`${Math.min(c,100)}%`}})})]},a.cargo)})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide mb-3",children:"Personal por Terminal"}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.byTerminal.map(a=>o.jsxs("div",{className:"card px-4 py-3 flex items-center gap-3",children:[o.jsx(Z,{name:"building",size:18,className:"text-slate-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-slate-500",children:fr(a.terminal_code)}),o.jsx("p",{className:"text-lg font-bold text-slate-900",children:a.count})]})]},a.terminal_code)),o.jsxs("div",{className:"card px-4 py-3 flex items-center gap-3 bg-brand-50 border-brand-200",children:[o.jsx(Z,{name:"users",size:18,className:"text-brand-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-brand-600 font-semibold",children:"Total"}),o.jsx("p",{className:"text-lg font-bold text-brand-700",children:t.total})]})]})]})]})]})},Ele=e=>{var t;return((t=H0.find(r=>r.value===e))==null?void 0:t.label)||e},Tle=({staff:e,onEdit:t,onOffboard:r,onAdmonish:n,onSuspend:a,onUnsuspend:i})=>e.length?o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"table-header-cell",children:"RUT"}),o.jsx("th",{scope:"col",className:"table-header-cell",children:"Nombre"}),o.jsx("th",{scope:"col",className:"table-header-cell",children:"Cargo"}),o.jsx("th",{scope:"col",className:"table-header-cell",children:"Terminal"}),o.jsx("th",{scope:"col",className:"table-header-cell",children:"Turno"}),o.jsx("th",{scope:"col",className:"table-header-cell",children:"Horario"}),o.jsx("th",{scope:"col",className:"table-header-cell",children:"Contacto"}),o.jsx("th",{scope:"col",className:"table-header-cell",children:"Estado"}),o.jsx("th",{scope:"col",className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:e.map(s=>{const l=s.status==="DESVINCULADO",c=s.suspended;return o.jsxs("tr",{className:`table-row ${l?"bg-danger-50 hover:bg-danger-100":c?"bg-yellow-50/50 text-slate-500":""}`,children:[o.jsx("td",{className:"table-cell font-mono text-sm",children:Jn(s.rut)}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`font-medium ${c?"line-through decoration-slate-400 text-slate-500":"text-slate-900"}`,children:s.nombre}),c&&o.jsx("span",{className:"badge badge-warning text-xs",title:"Trabajador suspendido temporalmente",children:" Suspendido"}),s.admonition_count>0&&o.jsxs("span",{className:"badge badge-warning text-xs",title:`${s.admonition_count} amonestacin(es)`,children:[" ",s.admonition_count]})]})}),o.jsx("td",{className:"table-cell",children:Ele(s.cargo)}),o.jsx("td",{className:"table-cell",children:fr(s.terminal_code)}),o.jsx("td",{className:"table-cell",children:s.turno}),o.jsx("td",{className:"table-cell font-mono text-xs",children:s.horario}),o.jsx("td",{className:"table-cell text-sm",children:s.contacto}),o.jsx("td",{className:"table-cell",children:o.jsx("span",{className:`badge ${l?"badge-danger":c?"badge-warning":"badge-success"}`,children:l?"DESVINCULADO":c?"SUSPENDIDO":"ACTIVO"})}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[!l&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>t(s),className:"btn btn-ghost btn-icon text-slate-600 hover:text-brand-600",title:"Modificar",children:o.jsx(Z,{name:"clipboard",size:16})}),c?o.jsx("button",{onClick:()=>i(s),className:"btn btn-ghost btn-icon text-yellow-600 hover:text-green-600",title:"Reactivar",children:o.jsx(Z,{name:"check-circle",size:16})}):o.jsx("button",{onClick:()=>a(s),className:"btn btn-ghost btn-icon text-slate-600 hover:text-yellow-600",title:"Suspender temporalmente",children:o.jsx(Z,{name:"x-circle",size:16})}),o.jsx("button",{onClick:()=>n(s),className:"btn btn-ghost btn-icon text-slate-600 hover:text-warning-600",title:"Amonestar",children:o.jsx(Z,{name:"megaphone",size:16})}),o.jsx("button",{onClick:()=>r(s),className:"btn btn-ghost btn-icon text-slate-600 hover:text-danger-600",title:"Desvincular",children:o.jsx(Z,{name:"logout",size:16})})]}),l&&o.jsx("span",{className:"text-xs text-danger-600",children:s.terminated_at?new Date(s.terminated_at).toLocaleDateString("es-CL"):"Desvinculado"})]})})]},s.id)})})]})}):o.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50/50 px-6 py-12 text-center",children:[o.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-slate-100 mb-4",children:o.jsx(Z,{name:"users",size:28,className:"text-slate-400"})}),o.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"No hay personal registrado"}),o.jsx("p",{className:"mt-1 text-xs text-slate-500 max-w-xs",children:'Comienza agregando trabajadores con el botn "Nuevo Trabajador"'})]}),Cle=["Maana","Tarde","Noche","Rotativo"],H5=["XS","S","M","L","XL","XXL","XXXL"],kle=["36","38","40","42","44","46","48","50","52","54","56","58","60"],Ole=["35","36","37","38","39","40","41","42","43","44","45","46"],ZO=e=>e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e):!0,Ple=({initialData:e,onSubmit:t,onCancel:r,isLoading:n})=>{const[a,i]=D.useState({rut:"",nombre:"",cargo:"conductor",terminal_code:"EL_ROBLE",turno:"Maana",horario:"08:00-18:00",contacto:"",email:"",talla_polera:"",talla_chaqueta:"",talla_pantalon:"",talla_zapato_seguridad:"",talla_chaleco_reflectante:""}),[s,l]=D.useState(null),[c,u]=D.useState(null),[d,f]=D.useState(""),[p,h]=D.useState(!1);D.useEffect(()=>{if(e){i({rut:e.rut,nombre:e.nombre,cargo:e.cargo,terminal_code:e.terminal_code,turno:e.turno,horario:e.horario,contacto:e.contacto,email:e.email||"",talla_polera:e.talla_polera||"",talla_chaqueta:e.talla_chaqueta||"",talla_pantalon:e.talla_pantalon||"",talla_zapato_seguridad:e.talla_zapato_seguridad||"",talla_chaleco_reflectante:e.talla_chaleco_reflectante||""}),f(Jn(e.rut));const N=e.email||e.talla_polera||e.talla_chaqueta||e.talla_pantalon||e.talla_zapato_seguridad||e.talla_chaleco_reflectante;h(!!N)}},[e]);const g=N=>{f(N);const _=jj(N);_.valid?(l(null),i(E=>({...E,rut:rd(N)}))):l(_.error||null)},m=()=>{a.rut&&f(Jn(a.rut))},x=N=>{i(_=>({..._,email:N})),N&&!ZO(N)?u("Formato de correo invlido"):u(null)},y=N=>{N.preventDefault();const _=jj(a.rut);if(!_.valid){l(_.error||"RUT invlido");return}if(a.email&&!ZO(a.email)){u("Formato de correo invlido");return}t(a)},v=!!e,b=(N,_,E)=>o.jsxs("div",{children:[o.jsx("label",{className:"label",children:N}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",className:"input",list:`${_}-options`,value:a[_]||"",onChange:j=>i(A=>({...A,[_]:j.target.value})),placeholder:"Seleccionar o escribir..."}),o.jsx("datalist",{id:`${_}-options`,children:E.map(j=>o.jsx("option",{value:j},j))})]})]});return o.jsxs("form",{onSubmit:y,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"RUT"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",className:`input ${s?"border-danger-500 focus:ring-danger-500":""}`,value:d,onChange:N=>g(N.target.value),onBlur:m,placeholder:"12.345.678-9",disabled:v,required:!0}),v&&o.jsx(Z,{name:"key",size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"})]}),s&&o.jsx("p",{className:"mt-1 text-xs text-danger-600",children:s}),v&&o.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"El RUT no puede modificarse"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nombre Completo"}),o.jsx("input",{type:"text",className:"input",value:a.nombre,onChange:N=>i(_=>({..._,nombre:N.target.value})),placeholder:"Juan Prez Gonzlez",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cargo"}),o.jsx("select",{className:"input",value:a.cargo,onChange:N=>i(_=>({..._,cargo:N.target.value})),required:!0,children:H0.map(N=>o.jsx("option",{value:N.value,children:N.label},N.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsx("select",{className:"input",value:a.terminal_code,onChange:N=>i(_=>({..._,terminal_code:N.target.value})),required:!0,children:ns.map(N=>o.jsx("option",{value:N.value,children:N.label},N.value))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Turno"}),o.jsx("select",{className:"input",value:a.turno,onChange:N=>i(_=>({..._,turno:N.target.value})),required:!0,children:Cle.map(N=>o.jsx("option",{value:N,children:N},N))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Horario"}),o.jsx("input",{type:"text",className:"input",value:a.horario,onChange:N=>i(_=>({..._,horario:N.target.value})),placeholder:"08:00-18:00",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Contacto"}),o.jsx("input",{type:"text",className:"input",value:a.contacto,onChange:N=>i(_=>({..._,contacto:N.target.value})),placeholder:"Telfono o email",required:!0})]}),o.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[o.jsxs("button",{type:"button",onClick:()=>h(!p),className:"w-full flex items-center justify-between px-4 py-3 bg-slate-50 hover:bg-slate-100 transition-colors",children:[o.jsxs("span",{className:"font-medium text-slate-700 flex items-center gap-2",children:[o.jsx(Z,{name:"tag",size:18}),"Tallas y Correo"]}),o.jsx(Z,{name:"chevron-down",size:18,className:`text-slate-500 transition-transform ${p?"rotate-180":""}`})]}),p&&o.jsxs("div",{className:"p-4 space-y-4 bg-white",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Correo Electrnico"}),o.jsx("input",{type:"email",className:`input ${c?"border-danger-500 focus:ring-danger-500":""}`,value:a.email||"",onChange:N=>x(N.target.value),placeholder:"trabajador@ejemplo.com"}),c&&o.jsx("p",{className:"mt-1 text-xs text-danger-600",children:c})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[b("Talla Polera","talla_polera",H5),b("Talla Chaqueta","talla_chaqueta",H5),b("Talla Pantaln","talla_pantalon",kle),b("Talla Zapato de Seguridad","talla_zapato_seguridad",Ole),b("Talla Chaleco Reflectante","talla_chaleco_reflectante",H5)]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n||!!s||!!c,children:n?o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Guardando..."]}):v?"Guardar Cambios":"Crear Trabajador"})]})]})},Lle=({staffName:e,onConfirm:t,onCancel:r,isLoading:n})=>{const[a,i]=D.useState(""),s=l=>{l.preventDefault(),a.trim()&&t(a.trim())};return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),o.jsxs("div",{className:"relative w-full max-w-md card p-6 animate-scale-in",children:[o.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[o.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-danger-100",children:o.jsx(Z,{name:"logout",size:24,className:"text-danger-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Desvincular Trabajador"}),o.jsxs("p",{className:"text-sm text-slate-600",children:["Ests seguro que deseas desvincular a ",o.jsx("strong",{children:e}),"?"]})]})]}),o.jsx("div",{className:"mb-4 p-3 rounded-lg bg-warning-50 border border-warning-200",children:o.jsxs("p",{className:"text-sm text-warning-800",children:[o.jsx("strong",{children:" Esta accin es irreversible."})," El trabajador quedar marcado como desvinculado y no podr ser eliminado del sistema."]})}),o.jsxs("form",{onSubmit:s,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"label",children:"Motivo de Desvinculacin *"}),o.jsx("textarea",{className:"input min-h-[100px]",value:a,onChange:l=>i(l.target.value),placeholder:"Describe el motivo de la desvinculacin...",required:!0})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-danger",disabled:n||!a.trim(),children:n?o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Procesando..."]}):"Confirmar Desvinculacin"})]})]})]})]})},Rle=({staffName:e,onConfirm:t,onCancel:r,isLoading:n})=>{const[a,i]=D.useState(""),[s,l]=D.useState(new Date().toISOString().split("T")[0]),[c,u]=D.useState(null),[d,f]=D.useState(!1),p=D.useRef(null),h=v=>{v.preventDefault(),a.trim()&&s&&c&&t(a.trim(),s,c)},g=v=>{v.preventDefault(),v.stopPropagation(),v.type==="dragenter"||v.type==="dragover"?f(!0):v.type==="dragleave"&&f(!1)},m=v=>{v.preventDefault(),v.stopPropagation(),f(!1),v.dataTransfer.files&&v.dataTransfer.files[0]&&u(v.dataTransfer.files[0])},x=v=>{v.target.files&&v.target.files[0]&&u(v.target.files[0])},y=()=>{u(null),p.current&&(p.current.value="")};return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),o.jsxs("div",{className:"relative w-full max-w-lg card p-6 animate-scale-in",children:[o.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[o.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-warning-100",children:o.jsx(Z,{name:"megaphone",size:24,className:"text-warning-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Registrar Amonestacin"}),o.jsxs("p",{className:"text-sm text-slate-600",children:["Amonestacin para ",o.jsx("strong",{children:e})]})]})]}),o.jsxs("form",{onSubmit:h,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Motivo de la Amonestacin *"}),o.jsx("textarea",{className:"input min-h-[80px]",value:a,onChange:v=>i(v.target.value),placeholder:"Describe el motivo de la amonestacin...",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha de Amonestacin *"}),o.jsx("input",{type:"date",className:"input",value:s,onChange:v=>l(v.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Documento Adjunto *"}),o.jsxs("div",{className:`border-2 border-dashed rounded-xl p-6 text-center transition-all ${d?"border-brand-500 bg-brand-50":c?"border-success-300 bg-success-50":"border-slate-300 hover:border-slate-400"}`,onDragEnter:g,onDragLeave:g,onDragOver:g,onDrop:m,children:[o.jsx("input",{ref:p,type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:x,className:"hidden",id:"admonition-file"}),c?o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsx(Z,{name:"check-circle",size:24,className:"text-success-600"}),o.jsxs("div",{className:"text-left",children:[o.jsx("p",{className:"text-sm font-medium text-slate-900",children:c.name}),o.jsxs("p",{className:"text-xs text-slate-500",children:[(c.size/1024).toFixed(1)," KB"]})]}),o.jsx("button",{type:"button",onClick:y,className:"ml-4 text-danger-600 hover:text-danger-700",children:o.jsx(Z,{name:"x",size:20})})]}):o.jsxs("label",{htmlFor:"admonition-file",className:"cursor-pointer flex flex-col items-center gap-2",children:[o.jsx(Z,{name:"image",size:32,className:"text-slate-400"}),o.jsxs("p",{className:"text-sm text-slate-600",children:[o.jsx("span",{className:"font-semibold text-brand-600",children:"Haz clic para subir"})," ","o arrastra el archivo aqu"]}),o.jsx("p",{className:"text-xs text-slate-400",children:"PDF, JPG, PNG (mx. 10MB)"})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n||!a.trim()||!s||!c,children:n?o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Guardando..."]}):"Registrar Amonestacin"})]})]})]})]})},Dle=()=>{const e=Xt(j=>j.context),t=Xt(j=>j.setContext),[r,n]=D.useState({status:"todos",cargo:"todos"}),[a,i]=D.useState({type:"none"}),s=D9(e,r),l=vle(),c=xle(),u=yle(),d=ble(),f=wle(),p=_le();Nle(e);const h=[{key:"rut",header:"RUT",value:j=>Jn(j.rut)},{key:"nombre",header:"NOMBRE",value:j=>j.nombre},{key:"cargo",header:"CARGO",value:j=>j.cargo},{key:"terminal_code",header:"TERMINAL",value:j=>fr(j.terminal_code)},{key:"turno",header:"TURNO",value:j=>j.turno},{key:"horario",header:"HORARIO",value:j=>j.horario},{key:"contacto",header:"CONTACTO",value:j=>j.contacto},{key:"email",header:"CORREO",value:j=>j.email||""},{key:"talla_polera",header:"TALLA_POLERA",value:j=>j.talla_polera||""},{key:"talla_chaqueta",header:"TALLA_CHAQUETA",value:j=>j.talla_chaqueta||""},{key:"talla_pantalon",header:"TALLA_PANTALON",value:j=>j.talla_pantalon||""},{key:"talla_zapato_seguridad",header:"TALLA_ZAPATO_SEGURIDAD",value:j=>j.talla_zapato_seguridad||""},{key:"talla_chaleco_reflectante",header:"TALLA_CHALECO_REFLECTANTE",value:j=>j.talla_chaleco_reflectante||""},{key:"status",header:"ESTADO",value:j=>j.status},{key:"terminated_at",header:"FECHA_DESVINCULACION",value:j=>j.terminated_at?new Date(j.terminated_at).toLocaleDateString("es-CL"):""},{key:"termination_comment",header:"COMENTARIO_DESVINCULACION",value:j=>j.termination_comment||""}],g=()=>{s.data&&Er({filename:"personal_vista",sheetName:"Personal",rows:s.data,columns:h})},m=()=>{s.data&&Er({filename:"personal_completo",sheetName:"Personal",rows:s.data,columns:h})},x=async j=>{try{await l.mutateAsync(j),i({type:"none"})}catch(A){console.error("Error creating staff:",A),alert(A instanceof Error?A.message:"Error al crear trabajador")}},y=async j=>{if(a.type==="edit")try{await c.mutateAsync({id:a.staff.id,values:j}),i({type:"none"})}catch(A){console.error("Error updating staff:",A),alert(A instanceof Error?A.message:"Error al actualizar trabajador")}},v=async j=>{if(a.type==="offboard")try{await u.mutateAsync({id:a.staff.id,comment:j}),i({type:"none"})}catch(A){console.error("Error offboarding staff:",A),alert(A instanceof Error?A.message:"Error al desvincular trabajador")}},b=async(j,A,T)=>{if(a.type==="admonish")try{await p.mutateAsync({staffId:a.staff.id,reason:j,admonitionDate:A,file:T}),i({type:"none"})}catch(P){console.error("Error creating admonition:",P),alert(P instanceof Error?P.message:"Error al registrar amonestacin")}},N=async j=>{if(confirm(`Suspender temporalmente a ${j.nombre}?`))try{await d.mutateAsync(j.id)}catch(A){console.error("Error suspending staff:",A),alert(A instanceof Error?A.message:"Error al suspender trabajador")}},_=async j=>{try{await f.mutateAsync(j.id)}catch(A){console.error("Error unsuspending staff:",A),alert(A instanceof Error?A.message:"Error al reactivar trabajador")}},E=()=>i({type:"none"});return o.jsxs("div",{className:"space-y-4",children:[o.jsx(bn,{title:"Personal",description:"Gestin del equipo operativo por terminal.",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary",onClick:()=>i({type:"create"}),children:[o.jsx(Z,{name:"users",size:18}),"Nuevo Trabajador"]}),o.jsx(Ma,{onExportView:g,onExportAll:m})]})}),o.jsx(Ale,{terminalContext:e}),o.jsxs(Fs,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:r.status,onChange:j=>n(A=>({...A,status:j.target.value})),children:sle.map(j=>o.jsx("option",{value:j.value,children:j.label},j.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Cargo"}),o.jsxs("select",{className:"input",value:r.cargo||"todos",onChange:j=>n(A=>({...A,cargo:j.target.value})),children:[o.jsx("option",{value:"todos",children:"Todos"}),H0.map(j=>o.jsx("option",{value:j.value,children:j.label},j.value))]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"RUT o nombre",value:r.search??"",onChange:j=>n(A=>({...A,search:j.target.value}))})]})]}),s.isLoading&&o.jsx(Bn,{label:"Cargando personal..."}),s.isError&&o.jsx(ri,{onRetry:()=>s.refetch()}),!s.isLoading&&!s.isError&&o.jsx(Tle,{staff:s.data||[],onEdit:j=>i({type:"edit",staff:j}),onOffboard:j=>i({type:"offboard",staff:j}),onAdmonish:j=>i({type:"admonish",staff:j}),onSuspend:N,onUnsuspend:_}),(a.type==="create"||a.type==="edit")&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:E}),o.jsxs("div",{className:"relative w-full max-w-2xl card p-6 animate-scale-in max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-xl font-bold text-slate-900",children:a.type==="create"?"Nuevo Trabajador":"Editar Trabajador"}),o.jsx("button",{onClick:E,className:"text-slate-400 hover:text-slate-600",children:o.jsx(Z,{name:"x",size:24})})]}),o.jsx(Ple,{initialData:a.type==="edit"?a.staff:null,onSubmit:a.type==="create"?x:y,onCancel:E,isLoading:l.isPending||c.isPending})]})]}),a.type==="offboard"&&o.jsx(Lle,{staffName:a.staff.nombre,onConfirm:v,onCancel:E,isLoading:u.isPending}),a.type==="admonish"&&o.jsx(Rle,{staffName:a.staff.nombre,onConfirm:b,onCancel:E,isLoading:p.isPending})]})},Ile=async(e,t)=>{if(!rr())return[];const r=zi(e);let n=Se.from("meetings").select(`
            *,
            meeting_invitees(count),
            meeting_files(count),
            meeting_actions(count)
        `).in("terminal_code",r).order("starts_at",{ascending:!1});if(t!=null&&t.status&&t.status!=="todos"&&(n=n.eq("status",t.status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.ilike("title",s)}t!=null&&t.date_from&&(n=n.gte("starts_at",t.date_from)),t!=null&&t.date_to&&(n=n.lte("starts_at",t.date_to+"T23:59:59"));const{data:a,error:i}=await n;if(i)throw i;return(a||[]).map(s=>{var l,c,u,d,f,p;return{...s,invitees_count:((c=(l=s.meeting_invitees)==null?void 0:l[0])==null?void 0:c.count)||0,files_count:((d=(u=s.meeting_files)==null?void 0:u[0])==null?void 0:d.count)||0,actions_count:((p=(f=s.meeting_actions)==null?void 0:f[0])==null?void 0:p.count)||0}})},I9=async e=>{const{data:t,error:r}=await Se.from("meetings").select("*").eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t},Mle=async(e,t)=>{const{data:r,error:n}=await Se.from("meetings").insert({title:e.title,terminal_code:e.terminal_code,starts_at:e.starts_at,duration_minutes:e.duration_minutes,location:e.location||null,meeting_link:e.meeting_link||null,agenda_json:e.agenda_json||[],created_by_supervisor:t}).select().single();if(n)throw Pi("Error al crear reunin","No se pudo guardar la reunin"),n;return e.invitees.length>0&&await F9(r.id,e.invitees),$i("Reunin creada",`"${e.title}" programada correctamente`,t),r},Fle=async(e,t)=>{const r={};t.title!==void 0&&(r.title=t.title),t.terminal_code!==void 0&&(r.terminal_code=t.terminal_code),t.starts_at!==void 0&&(r.starts_at=t.starts_at),t.duration_minutes!==void 0&&(r.duration_minutes=t.duration_minutes),t.location!==void 0&&(r.location=t.location||null),t.meeting_link!==void 0&&(r.meeting_link=t.meeting_link||null),t.agenda_json!==void 0&&(r.agenda_json=t.agenda_json);const{data:n,error:a}=await Se.from("meetings").update(r).eq("id",e).select().single();if(a)throw a;return n},$le=async(e,t,r)=>{const n={status:t};r&&(n.cancel_reason=r);const{error:a}=await Se.from("meetings").update(n).eq("id",e);if(a)throw a},Ble=async(e,t)=>{const{error:r}=await Se.from("meetings").update({minutes_text:t}).eq("id",e);if(r)throw r},M9=async e=>{const{data:t,error:r}=await Se.from("meeting_invitees").select("*").eq("meeting_id",e).order("invitee_name");if(r)throw r;return t||[]},F9=async(e,t)=>{const r=t.map(a=>({meeting_id:e,staff_id:a.staff_id||null,invitee_name:a.invitee_name,invitee_email:a.invitee_email||null})),{error:n}=await Se.from("meeting_invitees").insert(r);if(n)throw n},e6=async(e,t)=>{const{error:r}=await Se.from("meeting_invitees").update({notification_status:t,notified_at:t==="ENVIADO"?new Date().toISOString():null}).eq("id",e);if(r)throw r},Ule=async e=>{const{data:t,error:r}=await Se.from("meeting_files").select("*").eq("meeting_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},zle=async(e,t,r)=>{const n=t.name.split(".").pop(),a=`meetings/${e}/${Date.now()}.${n}`,{error:i}=await Se.storage.from("meeting-files").upload(a,t);if(i)throw Pi("Error al subir archivo",i.message),i;const{data:s,error:l}=await Se.from("meeting_files").insert({meeting_id:e,storage_path:a,file_name:t.name,mime_type:t.type,size_bytes:t.size,uploaded_by:r}).select().single();if(l)throw l;return s},qle=async(e,t)=>{await Se.storage.from("meeting-files").remove([t]);const{error:r}=await Se.from("meeting_files").delete().eq("id",e);if(r)throw r},Hle=async e=>{const{data:t,error:r}=await Se.storage.from("meeting-files").createSignedUrl(e,3600);if(r)throw r;return t.signedUrl},Wle=async e=>{const{data:t,error:r}=await Se.from("meeting_actions").select("*").eq("meeting_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},Vle=async(e,t)=>{const{data:r,error:n}=await Se.from("meeting_actions").insert({meeting_id:e,description:t.description,responsible_staff_id:t.responsible_staff_id||null,responsible_name:t.responsible_name||null,due_date:t.due_date||null}).select().single();if(n)throw n;return r},Gle=async(e,t)=>{const{data:r,error:n}=await Se.from("meeting_actions").update(t).eq("id",e).select().single();if(n)throw n;return r},Kle=async e=>{const{error:t}=await Se.from("meeting_actions").delete().eq("id",e);if(t)throw t},$9=async(e,t)=>{const{data:r,error:n}=await Se.from("meeting_email_settings").select("*").eq("scope_type",e).eq("scope_code",t).single();if(n){if(n.code==="PGRST116")return null;throw n}return r},Yle=async e=>{const{error:t}=await Se.from("meeting_email_settings").upsert(e,{onConflict:"scope_type,scope_code"});if(t)throw t},Xle=async(e,t,r)=>{var c;const n=await $9("GLOBAL","ALL");if(!(n!=null&&n.enabled))return;const a=new Date(e.starts_at),i=a.toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),s=a.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"}),l=e.agenda_json.map((u,d)=>`${d+1}. ${u.text}`).join(`
`)||"Sin agenda definida";for(const u of t)if(u.invitee_email)try{const d=n.subject_template.replace("{{title}}",e.title),f=n.body_template.replace("{{invitee_name}}",u.invitee_name).replace("{{title}}",e.title).replace("{{date}}",i).replace("{{time}}",s).replace("{{duration}}",e.duration_minutes.toString()).replace("{{location}}",e.location||e.meeting_link||"Por confirmar").replace("{{agenda}}",l).replace("{{organizer}}",r);await oo.sendEmail({audience:"manual",manualRecipients:[u.invitee_email],cc:((c=n.cc_emails)==null?void 0:c.split(",").map(p=>p.trim()).filter(Boolean))||[],subject:d,body:f.replace(/\n/g,"<br>")}),await e6(u.id,"ENVIADO")}catch(d){console.error("Error sending invitation:",d),await e6(u.id,"ERROR")}},Jle=async()=>{const{data:e,error:t}=await Se.from("staff").select("id, nombre, email, terminal_code").eq("cargo","Supervisor").eq("status","ACTIVO").order("nombre");if(t)throw t;return e||[]},kr={all:["meetings"],list:(e,t)=>[...kr.all,"list",e,t],detail:e=>[...kr.all,"detail",e],invitees:e=>[...kr.all,"invitees",e],files:e=>[...kr.all,"files",e],actions:e=>[...kr.all,"actions",e],supervisors:["supervisors"],emailSettings:e=>[...kr.all,"emailSettings",e]},X3=e=>{const t=Xt(n=>n.context),r=t.mode==="ALL"?"ALL":t.value||"ALL";return Mt({queryKey:kr.list(r,e),queryFn:()=>Ile(t,e)})},Qle=e=>Mt({queryKey:kr.detail(e||""),queryFn:()=>I9(e),enabled:!!e}),B9=()=>{const e=St(),t=_r(r=>r.session);return Et({mutationFn:r=>Mle(r,(t==null?void 0:t.supervisorName)||""),onSuccess:()=>{e.invalidateQueries({queryKey:kr.all})}})},Zle=()=>{const e=St();return Et({mutationFn:({id:t,values:r})=>Fle(t,r),onSuccess:(t,{id:r})=>{e.invalidateQueries({queryKey:kr.all}),e.invalidateQueries({queryKey:kr.detail(r)})}})},ece=()=>{const e=St();return Et({mutationFn:({id:t,status:r,reason:n})=>$le(t,r,n),onSuccess:()=>{e.invalidateQueries({queryKey:kr.all})}})},tce=()=>{const e=St();return Et({mutationFn:({id:t,minutes:r})=>Ble(t,r),onSuccess:(t,{id:r})=>{e.invalidateQueries({queryKey:kr.detail(r)})}})},U9=e=>Mt({queryKey:kr.invitees(e||""),queryFn:()=>M9(e),enabled:!!e}),rce=()=>{const e=St();return Et({mutationFn:({meetingId:t,invitees:r})=>F9(t,r),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:kr.invitees(r)}),e.invalidateQueries({queryKey:kr.all})}})},nce=e=>Mt({queryKey:kr.files(e||""),queryFn:()=>Ule(e),enabled:!!e}),ace=()=>{const e=St(),t=_r(r=>r.session);return Et({mutationFn:({meetingId:r,file:n})=>zle(r,n,(t==null?void 0:t.supervisorName)||""),onSuccess:(r,{meetingId:n})=>{e.invalidateQueries({queryKey:kr.files(n)}),e.invalidateQueries({queryKey:kr.all})}})},ice=()=>{const e=St();return Et({mutationFn:({id:t,storagePath:r,meetingId:n})=>qle(t,r),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:kr.files(r)}),e.invalidateQueries({queryKey:kr.all})}})},sce=e=>Mt({queryKey:kr.actions(e||""),queryFn:()=>Wle(e),enabled:!!e}),oce=()=>{const e=St();return Et({mutationFn:({meetingId:t,values:r})=>Vle(t,r),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:kr.actions(r)}),e.invalidateQueries({queryKey:kr.all})}})},lce=()=>{const e=St();return Et({mutationFn:({id:t,meetingId:r,values:n})=>Gle(t,n),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:kr.actions(r)})}})},cce=()=>{const e=St();return Et({mutationFn:({id:t,meetingId:r})=>Kle(t),onSuccess:(t,{meetingId:r})=>{e.invalidateQueries({queryKey:kr.actions(r)}),e.invalidateQueries({queryKey:kr.all})}})},uce=()=>Mt({queryKey:kr.supervisors,queryFn:Jle,staleTime:5*60*1e3}),dce=(e,t)=>Mt({queryKey:kr.emailSettings(`${e}-${t}`),queryFn:()=>$9(e,t)}),fce=()=>{const e=St();return Et({mutationFn:t=>Yle(t),onSuccess:()=>{e.invalidateQueries({queryKey:kr.all})}})},hce=()=>{const e=St(),t=_r(r=>r.session);return Et({mutationFn:async({meetingId:r})=>{const n=await I9(r),a=await M9(r);n&&a.length>0&&await Xle(n,a,(t==null?void 0:t.supervisorName)||"")},onSuccess:(r,{meetingId:n})=>{e.invalidateQueries({queryKey:kr.invitees(n)})}})},pce=["ISAAC AVILA","CLAUDIO ARRIAGADA","CRISTIAN LURASCHI"],I1=e=>e.toUpperCase().trim().replace(/\s+/g," "),z9=e=>{const t=I1(e);return pce.some(r=>I1(r)===t||t.includes(I1(r))||I1(r).includes(t))},mce=[{value:"todos",label:"Todos"},{value:"PROGRAMADA",label:"Programada"},{value:"REALIZADA",label:"Realizada"},{value:"CANCELADA",label:"Cancelada"}],gce=({value:e,onChange:t,existingInvitees:r=[]})=>{const n=uce(),[a,i]=D.useState(""),[s,l]=D.useState(!1),[c,u]=D.useState(""),[d,f]=D.useState(""),p=new Set([...r.map(y=>y.staff_id).filter(Boolean),...e.map(y=>y.staff_id).filter(Boolean)]),h=D.useMemo(()=>{if(!n.data)return[];const y=a.toLowerCase();return n.data.filter(v=>!p.has(v.id)).filter(v=>v.nombre.toLowerCase().includes(y)||(v.email||"").toLowerCase().includes(y)).slice(0,8)},[n.data,a,p]),g=y=>{t([...e,{staff_id:y.id,invitee_name:y.nombre,invitee_email:y.email||void 0}]),i(""),l(!1)},m=()=>{d.trim()&&(t([...e,{invitee_name:d.trim(),invitee_email:c.trim()||void 0}]),f(""),u(""))},x=y=>{t(e.filter((v,b)=>b!==y))};return o.jsxs("div",{className:"space-y-3",children:[r.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Ya invitados:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(y=>o.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1 bg-slate-100 rounded-full text-sm",children:[o.jsx(Z,{name:"user",size:14,className:"text-slate-400"}),o.jsx("span",{children:y.invitee_name})]},y.id))})]}),e.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:e.map((y,v)=>o.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1 bg-brand-100 text-brand-800 rounded-full text-sm",children:[o.jsx(Z,{name:"user",size:14}),o.jsx("span",{children:y.invitee_name}),o.jsx("button",{type:"button",onClick:()=>x(v),className:"ml-1 hover:text-brand-600",children:o.jsx(Z,{name:"x",size:14})})]},v))}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",className:"input",value:a,onChange:y=>{i(y.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Buscar supervisor por nombre o correo..."}),s&&h.length>0&&o.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.map(y=>o.jsxs("button",{type:"button",onClick:()=>g(y),className:"w-full px-4 py-2 text-left hover:bg-slate-50 border-b last:border-b-0 border-slate-100",children:[o.jsx("div",{className:"font-medium text-slate-800",children:y.nombre}),y.email&&o.jsx("div",{className:"text-sm text-slate-500",children:y.email})]},y.id))})]}),o.jsxs("div",{className:"border-t pt-3",children:[o.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Agregar invitado externo:"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-2",children:[o.jsx("input",{type:"text",className:"input flex-1",value:d,onChange:y=>f(y.target.value),placeholder:"Nombre"}),o.jsx("input",{type:"email",className:"input flex-1",value:c,onChange:y=>u(y.target.value),placeholder:"Correo (opcional)"}),o.jsx("button",{type:"button",onClick:m,className:"btn btn-secondary shrink-0",disabled:!d.trim(),children:o.jsx(Z,{name:"plus",size:18})})]})]})]})},t6=({meeting:e,onClose:t,onSuccess:r})=>{const n=Xt(v=>v.context),a=B9(),i=Zle(),s=U9((e==null?void 0:e.id)||null),l=rce(),[c,u]=D.useState({title:"",terminal_code:n.mode==="TERMINAL"?n.value:"EL_ROBLE",starts_at:"",duration_minutes:60,location:"",meeting_link:"",agenda_json:[],invitees:[]}),[d,f]=D.useState("");D.useEffect(()=>{e&&u({title:e.title,terminal_code:e.terminal_code,starts_at:e.starts_at.slice(0,16),duration_minutes:e.duration_minutes,location:e.location||"",meeting_link:e.meeting_link||"",agenda_json:e.agenda_json||[],invitees:[]})},[e]);const p=()=>{if(!d.trim())return;const v={id:crypto.randomUUID(),text:d.trim()};u(b=>({...b,agenda_json:[...b.agenda_json,v]})),f("")},h=v=>{u(b=>({...b,agenda_json:b.agenda_json.filter(N=>N.id!==v)}))},g=v=>{u(b=>({...b,invitees:v}))},m=async v=>{v.preventDefault();try{e?(await i.mutateAsync({id:e.id,values:c}),c.invitees.length>0&&await l.mutateAsync({meetingId:e.id,invitees:c.invitees})):await a.mutateAsync(c),r()}catch(b){console.error("Error saving meeting:",b)}},x=c.title&&c.starts_at&&c.terminal_code,y=a.isPending||i.isPending;return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),o.jsxs("div",{className:"relative w-full max-w-2xl bg-white rounded-2xl shadow-2xl max-h-[90vh] overflow-hidden",children:[o.jsx("div",{className:"bg-brand-600 text-white p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-xl font-bold",children:e?"Editar Reunin":"Nueva Reunin"}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg",children:o.jsx(Z,{name:"x",size:24})})]})}),o.jsxs("form",{onSubmit:m,className:"p-6 overflow-y-auto max-h-[calc(90vh-180px)]",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Ttulo de la reunin"}),o.jsx("input",{type:"text",className:"input",value:c.title,onChange:v=>u(b=>({...b,title:v.target.value})),placeholder:"Ej: Reunin de coordinacin semanal",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsx("select",{className:"input",value:c.terminal_code,onChange:v=>u(b=>({...b,terminal_code:v.target.value})),required:!0,children:ns.map(v=>o.jsx("option",{value:v.value,children:v.label},v.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha y hora"}),o.jsx("input",{type:"datetime-local",className:"input",value:c.starts_at,onChange:v=>u(b=>({...b,starts_at:v.target.value})),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Duracin (minutos)"}),o.jsxs("select",{className:"input",value:c.duration_minutes,onChange:v=>u(b=>({...b,duration_minutes:Number(v.target.value)})),children:[o.jsx("option",{value:30,children:"30 minutos"}),o.jsx("option",{value:60,children:"1 hora"}),o.jsx("option",{value:90,children:"1.5 horas"}),o.jsx("option",{value:120,children:"2 horas"}),o.jsx("option",{value:180,children:"3 horas"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Lugar / Sala"}),o.jsx("input",{type:"text",className:"input",value:c.location,onChange:v=>u(b=>({...b,location:v.target.value})),placeholder:"Ej: Sala de reuniones"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Link de videollamada (opcional)"}),o.jsx("input",{type:"url",className:"input",value:c.meeting_link,onChange:v=>u(b=>({...b,meeting_link:v.target.value})),placeholder:"https://meet.google.com/..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Agenda"}),o.jsxs("div",{className:"space-y-2",children:[c.agenda_json.map((v,b)=>o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-2 rounded-lg",children:[o.jsxs("span",{className:"font-medium text-slate-500",children:[b+1,"."]}),o.jsx("span",{className:"flex-1",children:v.text}),o.jsx("button",{type:"button",onClick:()=>h(v.id),className:"text-red-500 hover:text-red-700",children:o.jsx(Z,{name:"x",size:16})})]},v.id)),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",className:"input flex-1",value:d,onChange:v=>f(v.target.value),placeholder:"Agregar punto a la agenda",onKeyDown:v=>v.key==="Enter"&&(v.preventDefault(),p())}),o.jsx("button",{type:"button",onClick:p,className:"btn btn-secondary",children:o.jsx(Z,{name:"plus",size:18})})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Invitados (supervisores)"}),o.jsx(gce,{value:c.invitees,onChange:g,existingInvitees:s.data||[]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-6 mt-6 border-t",children:[o.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:!x||y,className:"btn btn-primary",children:y?"Guardando...":e?"Actualizar":"Crear Reunin"})]})]})]})]})},vce=({meetingTitle:e,onConfirm:t,onCancel:r,isLoading:n})=>{const[a,i]=D.useState("");return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),o.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 animate-scale-in",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:o.jsx(Z,{name:"alert-triangle",size:24,className:"text-red-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Cancelar Reunin"}),o.jsx("p",{className:"text-sm text-slate-500",children:e})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"label",children:"Motivo de cancelacin"}),o.jsx("textarea",{className:"input min-h-[100px] resize-none",value:a,onChange:s=>i(s.target.value),placeholder:"Indique el motivo por el cual se cancela esta reunin...",required:!0})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Volver"}),o.jsx("button",{onClick:()=>t(a),disabled:!a.trim()||n,className:"btn bg-red-600 hover:bg-red-700 text-white",children:n?"Cancelando...":"Confirmar Cancelacin"})]})]})]})},xce=({onOpenMeeting:e})=>{const t=Xt(_=>_.context),r=Xt(_=>_.setContext),n=_r(_=>_.session),a=(n==null?void 0:n.supervisorName)??"",i=z9(a),[s,l]=D.useState({status:"todos"}),[c,u]=D.useState(!1),[d,f]=D.useState(null),[p,h]=D.useState(null),g=X3(s);B9();const m=ece(),x=[{key:"starts_at",header:"Fecha/Hora",value:_=>y(_.starts_at)},{key:"title",header:"Ttulo",value:_=>_.title},{key:"terminal",header:"Terminal",value:_=>fr(_.terminal_code)},{key:"status",header:"Estado",value:_=>_.status},{key:"duration",header:"Duracin (min)",value:_=>_.duration_minutes.toString()},{key:"invitees",header:"Invitados",value:_=>_.invitees_count.toString()},{key:"location",header:"Lugar",value:_=>_.location||_.meeting_link||""}],y=_=>{const E=new Date(_);return E.toLocaleDateString("es-CL",{day:"2-digit",month:"short",year:"numeric"})+" "+E.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})},v=_=>{switch(_){case"REALIZADA":return o.jsx("span",{className:"badge badge-success",children:_});case"CANCELADA":return o.jsx("span",{className:"badge badge-danger",children:_});default:return o.jsx("span",{className:"badge badge-warning",children:_})}},b=async _=>{p&&(await m.mutateAsync({id:p.id,status:"CANCELADA",reason:_}),h(null))},N=async _=>{await m.mutateAsync({id:_.id,status:"REALIZADA"})};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(bn,{title:"Reuniones",description:"Gestin de reuniones y seguimiento de acuerdos",actions:o.jsxs("div",{className:"flex gap-2",children:[i&&o.jsxs("button",{className:"btn btn-primary",onClick:()=>u(!0),children:[o.jsx(Z,{name:"plus",size:18})," Nueva Reunin"]}),o.jsx(Ma,{onExportView:()=>Er({filename:"reuniones",sheetName:"Reuniones",rows:g.data||[],columns:x}),onExportAll:()=>Er({filename:"reuniones_all",sheetName:"Reuniones",rows:g.data||[],columns:x})})]})}),o.jsxs(Fs,{terminalContext:t,onTerminalChange:r,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:s.status,onChange:_=>l(E=>({...E,status:_.target.value})),children:mce.map(_=>o.jsx("option",{value:_.value,children:_.label},_.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"Ttulo de reunin",value:s.search??"",onChange:_=>l(E=>({...E,search:_.target.value}))})]})]}),g.isLoading&&o.jsx(Bn,{label:"Cargando reuniones..."}),g.isError&&o.jsx(ri,{onRetry:()=>g.refetch()}),!g.isLoading&&!g.isError&&o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{className:"table-header-cell",children:"Fecha/Hora"}),o.jsx("th",{className:"table-header-cell",children:"Ttulo"}),o.jsx("th",{className:"table-header-cell",children:"Terminal"}),o.jsx("th",{className:"table-header-cell",children:"Estado"}),o.jsx("th",{className:"table-header-cell text-center",children:"Inv."}),o.jsx("th",{className:"table-header-cell text-center",children:"Tareas"}),o.jsx("th",{className:"table-header-cell text-center",children:"Adj."}),o.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:(g.data||[]).length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"table-cell text-center text-slate-500 py-8",children:"No hay reuniones registradas"})}):(g.data||[]).map(_=>o.jsxs("tr",{className:"table-row cursor-pointer hover:bg-slate-50",onClick:()=>e(_.id),children:[o.jsx("td",{className:"table-cell text-sm",children:y(_.starts_at)}),o.jsx("td",{className:"table-cell font-medium",children:_.title}),o.jsx("td",{className:"table-cell text-sm",children:fr(_.terminal_code)}),o.jsx("td",{className:"table-cell",children:v(_.status)}),o.jsx("td",{className:"table-cell text-center",children:o.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-sm font-medium",children:_.invitees_count})}),o.jsx("td",{className:"table-cell text-center",children:o.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-sm font-medium",children:_.actions_count})}),o.jsx("td",{className:"table-cell text-center",children:o.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-sm font-medium",children:_.files_count})}),o.jsx("td",{className:"table-cell",onClick:E=>E.stopPropagation(),children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[o.jsx("button",{onClick:()=>e(_.id),className:"btn btn-ghost btn-icon",title:"Ver detalle",children:o.jsx(Z,{name:"eye",size:16})}),i&&_.status==="PROGRAMADA"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>f(_),className:"btn btn-ghost btn-icon",title:"Editar",children:o.jsx(Z,{name:"edit",size:16})}),o.jsx("button",{onClick:()=>N(_),className:"btn btn-ghost btn-icon text-success-600",title:"Marcar realizada",children:o.jsx(Z,{name:"check-circle",size:16})}),o.jsx("button",{onClick:()=>h(_),className:"btn btn-ghost btn-icon text-danger-600",title:"Cancelar",children:o.jsx(Z,{name:"x-circle",size:16})})]})]})})]},_.id))})]})}),c&&o.jsx(t6,{onClose:()=>u(!1),onSuccess:()=>u(!1)}),d&&o.jsx(t6,{meeting:d,onClose:()=>f(null),onSuccess:()=>f(null)}),p&&o.jsx(vce,{meetingTitle:p.title,onConfirm:b,onCancel:()=>h(null),isLoading:m.isPending})]})},yce=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],bce=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],wce=({onOpenMeeting:e})=>{const t=new Date,[r,n]=D.useState(t.getFullYear()),[a,i]=D.useState(t.getMonth()),[s,l]=D.useState(null),c=X3({status:"todos"}),u=D.useMemo(()=>{const y=new Date(r,a,1),b=new Date(r,a+1,0).getDate();let N=y.getDay();const _=[];for(let E=0;E<N;E++)_.push(null);for(let E=1;E<=b;E++)_.push(E);return _},[r,a]),d=y=>{if(!c.data)return[];const v=`${r}-${String(a+1).padStart(2,"0")}-${String(y).padStart(2,"0")}`;return c.data.filter(b=>b.starts_at.startsWith(v))},f=D.useMemo(()=>{if(!c.data)return[];const y=new Date().toISOString();return c.data.filter(v=>v.status==="PROGRAMADA"&&v.starts_at>=y).sort((v,b)=>v.starts_at.localeCompare(b.starts_at)).slice(0,5)},[c.data]),p=s?d(parseInt(s.split("-")[2])):[],h=()=>{a===0?(i(11),n(r-1)):i(a-1)},g=()=>{a===11?(i(0),n(r+1)):i(a+1)},m=y=>new Date(y).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"}),x=y=>{switch(y){case"REALIZADA":return"bg-green-500";case"CANCELADA":return"bg-red-500";default:return"bg-brand-500"}};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(bn,{title:"Agenda",description:"Vista de calendario de reuniones"}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 card p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("button",{onClick:h,className:"btn btn-ghost btn-icon",children:o.jsx(Z,{name:"chevron-right",size:20,className:"rotate-180"})}),o.jsxs("h3",{className:"text-lg font-bold text-slate-800",children:[yce[a]," ",r]}),o.jsx("button",{onClick:g,className:"btn btn-ghost btn-icon",children:o.jsx(Z,{name:"chevron-right",size:20})})]}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:bce.map(y=>o.jsx("div",{className:"text-center text-xs font-semibold text-slate-500 py-2",children:y},y))}),o.jsx("div",{className:"grid grid-cols-7 gap-1",children:u.map((y,v)=>{if(y===null)return o.jsx("div",{className:"h-16"},`e-${v}`);const b=d(y),N=`${r}-${String(a+1).padStart(2,"0")}-${String(y).padStart(2,"0")}`,_=y===t.getDate()&&a===t.getMonth()&&r===t.getFullYear(),E=s===N;return o.jsxs("button",{onClick:()=>l(N),className:`h-16 rounded-lg border text-left p-1 transition-all ${E?"border-brand-500 bg-brand-50":"border-transparent hover:bg-slate-50"} ${_?"ring-2 ring-brand-400":""}`,children:[o.jsx("span",{className:`text-sm font-medium ${_?"text-brand-600":"text-slate-700"}`,children:y}),o.jsxs("div",{className:"mt-1 space-y-0.5",children:[b.slice(0,2).map(j=>o.jsx("div",{className:`h-1 rounded ${x(j.status)}`},j.id)),b.length>2&&o.jsxs("span",{className:"text-[10px] text-slate-500",children:["+",b.length-2]})]})]},y)})}),s&&o.jsxs("div",{className:"mt-4 pt-4 border-t",children:[o.jsxs("h4",{className:"font-semibold text-slate-700 mb-2",children:["Reuniones del ",new Date(s+"T12:00:00").toLocaleDateString("es-CL",{day:"numeric",month:"long"})]}),p.length===0?o.jsx("p",{className:"text-sm text-slate-500",children:"Sin reuniones programadas"}):o.jsx("div",{className:"space-y-2",children:p.map(y=>o.jsx("button",{onClick:()=>e(y.id),className:"w-full text-left p-3 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`w-2 h-2 rounded-full ${x(y.status)}`}),o.jsx("span",{className:"font-medium",children:y.title}),o.jsx("span",{className:"text-sm text-slate-500 ml-auto",children:m(y.starts_at)})]})},y.id))})]})]}),o.jsxs("div",{className:"card p-6",children:[o.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[o.jsx(Z,{name:"clock",size:18})," Prximas reuniones"]}),f.length===0?o.jsx("p",{className:"text-sm text-slate-500",children:"Sin reuniones prximas"}):o.jsx("div",{className:"space-y-3",children:f.map(y=>o.jsxs("button",{onClick:()=>e(y.id),className:"w-full text-left p-3 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors",children:[o.jsx("div",{className:"font-medium text-slate-800",children:y.title}),o.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:[new Date(y.starts_at).toLocaleDateString("es-CL",{day:"numeric",month:"short"})," - ",m(y.starts_at)]}),o.jsx("div",{className:"text-xs text-slate-400 mt-1",children:fr(y.terminal_code)})]},y.id))})]})]})]})},_ce=({onOpenMeeting:e})=>{const t=Xt(c=>c.context),r=Xt(c=>c.setContext),[n,a]=D.useState({status:"REALIZADA"}),i=X3(n),s=(i.data||[]).filter(c=>c.minutes_text),l=[{key:"date",header:"Fecha",value:c=>new Date(c.starts_at).toLocaleDateString("es-CL")},{key:"title",header:"Ttulo",value:c=>c.title},{key:"terminal",header:"Terminal",value:c=>fr(c.terminal_code)},{key:"minutes",header:"Minuta",value:c=>c.minutes_text||""}];return o.jsxs("div",{className:"space-y-4",children:[o.jsx(bn,{title:"Minutas y Reportes",description:"Registro de minutas de reuniones realizadas",actions:o.jsx(Ma,{onExportView:()=>Er({filename:"minutas",sheetName:"Minutas",rows:s,columns:l}),onExportAll:()=>Er({filename:"minutas_all",sheetName:"Minutas",rows:s,columns:l})})}),o.jsx(Fs,{terminalContext:t,onTerminalChange:r,children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"Ttulo de reunin",value:n.search??"",onChange:c=>a(u=>({...u,search:c.target.value}))})]})}),i.isLoading&&o.jsx(Bn,{label:"Cargando minutas..."}),!i.isLoading&&s.length===0&&o.jsxs("div",{className:"card p-8 text-center text-slate-500",children:[o.jsx(Z,{name:"file-text",size:48,className:"mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"No hay minutas registradas"})]}),o.jsx("div",{className:"grid gap-4",children:s.map(c=>o.jsxs("div",{className:"card p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>e(c.id),children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-slate-800",children:c.title}),o.jsxs("div",{className:"text-sm text-slate-500",children:[new Date(c.starts_at).toLocaleDateString("es-CL",{day:"numeric",month:"long",year:"numeric"})," - ",fr(c.terminal_code)]})]}),o.jsx("span",{className:"badge badge-success",children:c.status})]}),o.jsx("div",{className:"text-sm text-slate-600 line-clamp-3 bg-slate-50 p-3 rounded-lg",children:c.minutes_text})]},c.id))})]})},Nce=()=>{const e=dce("GLOBAL","ALL"),t=fce(),[r,n]=D.useState(!0),[a,i]=D.useState(""),[s,l]=D.useState(""),[c,u]=D.useState("");D.useEffect(()=>{e.data&&(n(e.data.enabled),i(e.data.cc_emails||""),l(e.data.subject_template),u(e.data.body_template))},[e.data]);const d=async()=>{await t.mutateAsync({scope_type:"GLOBAL",scope_code:"ALL",enabled:r,cc_emails:a||null,subject_template:s,body_template:c})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(bn,{title:"Configuracin",description:"Ajustes de correo y notificaciones para reuniones"}),o.jsxs("div",{className:"card p-6 max-w-2xl",children:[o.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[o.jsx(Z,{name:"send",size:18})," Configuracin de Correos"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-slate-800",children:"Notificaciones por correo"}),o.jsx("div",{className:"text-sm text-slate-500",children:"Enviar invitaciones automticas al crear reuniones"})]}),o.jsx("button",{onClick:()=>n(!r),className:`relative w-12 h-6 rounded-full transition-colors ${r?"bg-brand-600":"bg-slate-300"}`,children:o.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${r?"left-7":"left-1"}`})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Correos en copia (CC)"}),o.jsx("input",{type:"text",className:"input",value:a,onChange:f=>i(f.target.value),placeholder:"correo1@ejemplo.cl, correo2@ejemplo.cl"}),o.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Separar mltiples correos con coma"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Plantilla de asunto"}),o.jsx("input",{type:"text",className:"input",value:s,onChange:f=>l(f.target.value)}),o.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Variables: ","{{title}}"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Plantilla de cuerpo"}),o.jsx("textarea",{className:"input min-h-[200px] font-mono text-sm",value:c,onChange:f=>u(f.target.value)}),o.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Variables: ","{{invitee_name}}, {{title}}, {{date}}, {{time}}, {{duration}}, {{location}}, {{agenda}}, {{organizer}}"]})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t",children:o.jsx("button",{onClick:d,disabled:t.isPending,className:"btn btn-primary",children:t.isPending?"Guardando...":"Guardar Configuracin"})})]})]})]})},Sce=({meetingId:e,onClose:t})=>{const r=_r(I=>I.session),n=(r==null?void 0:r.supervisorName)??"",a=z9(n),[i,s]=D.useState("info"),[l,c]=D.useState(""),[u,d]=D.useState(!0),f=Qle(e),p=U9(e),h=nce(e),g=sce(e),m=tce(),x=hce(),y=ace(),v=ice(),b=oce(),N=lce(),_=cce(),E=f.data;D.useState(()=>{E!=null&&E.minutes_text&&c(E.minutes_text)});const j=async()=>{await m.mutateAsync({id:e,minutes:l}),d(!0)},A=async I=>{var Y;const z=(Y=I.target.files)==null?void 0:Y[0];z&&(await y.mutateAsync({meetingId:e,file:z}),I.target.value="")},T=async(I,z)=>{const Y=await Hle(I);window.open(Y,"_blank")},P=I=>{const z=new Date(I);return z.toLocaleDateString("es-CL",{weekday:"long",day:"numeric",month:"long",year:"numeric"})+" a las "+z.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})},O=I=>{switch(I){case"REALIZADA":return o.jsx("span",{className:"badge badge-success",children:I});case"CANCELADA":return o.jsx("span",{className:"badge badge-danger",children:I});default:return o.jsx("span",{className:"badge badge-warning",children:I})}};if(f.isLoading)return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:o.jsx(Bn,{label:"Cargando reunin..."})});if(!E)return null;const R=[{id:"info",label:"Info",icon:"info"},{id:"agenda",label:"Agenda",icon:"clipboard"},{id:"invitees",label:"Invitados",icon:"users"},{id:"minutes",label:"Minuta",icon:"file-text"},{id:"actions",label:"Acuerdos",icon:"check-circle"},{id:"files",label:"Archivos",icon:"file"}];return o.jsx("div",{className:"fixed inset-0 z-50 flex bg-black/50 backdrop-blur-sm",children:o.jsxs("div",{className:"w-full h-full bg-white flex flex-col lg:flex-row animate-scale-in",children:[o.jsxs("div",{className:"lg:w-64 bg-slate-50 border-b lg:border-b-0 lg:border-r border-slate-200 p-4 flex lg:flex-col gap-2 overflow-x-auto lg:overflow-visible shrink-0",children:[R.map(I=>o.jsxs("button",{onClick:()=>s(I.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all whitespace-nowrap ${i===I.id?"bg-brand-600 text-white":"text-slate-600 hover:bg-slate-200"}`,children:[o.jsx(Z,{name:I.icon,size:18}),o.jsx("span",{className:"hidden lg:inline",children:I.label})]},I.id)),o.jsxs("button",{onClick:t,className:"mt-auto flex items-center gap-2 px-4 py-2 rounded-lg text-slate-600 hover:bg-slate-200",children:[o.jsx(Z,{name:"x",size:18})," ",o.jsx("span",{className:"hidden lg:inline",children:"Cerrar"})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[o.jsx("div",{className:"mb-6 pb-4 border-b",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:E.title}),o.jsx("p",{className:"text-slate-500 mt-1",children:P(E.starts_at)})]}),O(E.status)]})}),i==="info"&&o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Terminal"}),o.jsx("div",{className:"font-medium",children:fr(E.terminal_code)})]}),o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Duracin"}),o.jsxs("div",{className:"font-medium",children:[E.duration_minutes," minutos"]})]}),o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Lugar"}),o.jsx("div",{className:"font-medium",children:E.location||"No especificado"})]}),o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Link"}),E.meeting_link?o.jsx("a",{href:E.meeting_link,target:"_blank",rel:"noopener noreferrer",className:"text-brand-600 hover:underline",children:"Unirse a la reunin"}):o.jsx("div",{className:"font-medium",children:"No disponible"})]}),o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg md:col-span-2",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Organizado por"}),o.jsx("div",{className:"font-medium",children:E.created_by_supervisor})]})]}),i==="agenda"&&o.jsx("div",{className:"space-y-2",children:E.agenda_json.length===0?o.jsx("p",{className:"text-slate-500",children:"Sin agenda definida"}):E.agenda_json.map((I,z)=>o.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 p-3 rounded-lg",children:[o.jsx("span",{className:"w-6 h-6 rounded-full bg-brand-100 text-brand-600 flex items-center justify-center text-sm font-bold",children:z+1}),o.jsx("span",{className:"flex-1",children:I.text})]},I.id))}),i==="invitees"&&o.jsxs("div",{className:"space-y-4",children:[a&&o.jsxs("button",{onClick:()=>x.mutate({meetingId:e}),disabled:x.isPending,className:"btn btn-secondary",children:[o.jsx(Z,{name:"send",size:16})," ",x.isPending?"Enviando...":"Reenviar invitaciones"]}),o.jsx("div",{className:"space-y-2",children:(p.data||[]).map(I=>o.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:I.invitee_name}),I.invitee_email&&o.jsx("div",{className:"text-sm text-slate-500",children:I.invitee_email})]}),o.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${I.notification_status==="ENVIADO"?"bg-green-100 text-green-700":I.notification_status==="ERROR"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:I.notification_status})]},I.id))})]}),i==="minutes"&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("textarea",{className:"input min-h-[300px] font-mono",value:l,onChange:I=>{c(I.target.value),d(!1)},placeholder:"Escriba la minuta de la reunin aqu...",disabled:!a}),a&&o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:j,disabled:u||m.isPending,className:"btn btn-primary",children:m.isPending?"Guardando...":"Guardar Minuta"}),u&&o.jsx("span",{className:"text-sm text-green-600",children:"Guardado"})]})]}),i==="actions"&&o.jsx(jce,{actions:g.data||[],meetingId:e,canManage:a,onCreate:I=>b.mutate({meetingId:e,values:I}),onUpdate:(I,z)=>N.mutate({id:I,meetingId:e,values:z}),onDelete:I=>_.mutate({id:I,meetingId:e})}),i==="files"&&o.jsxs("div",{className:"space-y-4",children:[a&&o.jsxs("label",{className:"btn btn-secondary cursor-pointer inline-flex items-center gap-2",children:[o.jsx(Z,{name:"upload",size:16})," Subir archivo",o.jsx("input",{type:"file",className:"hidden",accept:".pdf,.png,.jpg,.jpeg,.doc,.docx",onChange:A})]}),o.jsx("div",{className:"space-y-2",children:(h.data||[]).map(I=>o.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Z,{name:"file",size:20,className:"text-slate-400"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:I.file_name}),o.jsxs("div",{className:"text-xs text-slate-500",children:[(I.size_bytes/1024).toFixed(1)," KB"]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>T(I.storage_path,I.file_name),className:"btn btn-ghost btn-icon",children:o.jsx(Z,{name:"eye",size:16})}),a&&o.jsx("button",{onClick:()=>v.mutate({id:I.id,storagePath:I.storage_path,meetingId:e}),className:"btn btn-ghost btn-icon text-red-500",children:o.jsx(Z,{name:"trash",size:16})})]})]},I.id))})]})]})]})})},jce=({actions:e,canManage:t,onCreate:r,onUpdate:n,onDelete:a})=>{const[i,s]=D.useState(""),[l,c]=D.useState(""),[u,d]=D.useState(""),f=()=>{i.trim()&&(r({description:i,responsible_name:l||void 0,due_date:u||void 0}),s(""),c(""),d(""))};return o.jsxs("div",{className:"space-y-4",children:[t&&o.jsxs("div",{className:"space-y-2 bg-slate-50 p-4 rounded-lg",children:[o.jsx("input",{className:"input",value:i,onChange:p=>s(p.target.value),placeholder:"Descripcin del acuerdo"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("input",{className:"input",value:l,onChange:p=>c(p.target.value),placeholder:"Responsable"}),o.jsx("input",{type:"date",className:"input",value:u,onChange:p=>d(p.target.value)})]}),o.jsxs("button",{onClick:f,className:"btn btn-primary",disabled:!i.trim(),children:[o.jsx(Z,{name:"plus",size:16})," Agregar Acuerdo"]})]}),o.jsx("div",{className:"space-y-2",children:e.map(p=>o.jsxs("div",{className:"flex items-start gap-3 bg-slate-50 p-3 rounded-lg",children:[o.jsx("button",{onClick:()=>n(p.id,{status:p.status==="CUMPLIDO"?"PENDIENTE":"CUMPLIDO"}),className:`mt-0.5 w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 ${p.status==="CUMPLIDO"?"bg-green-500 border-green-500 text-white":"border-slate-300"}`,disabled:!t,children:p.status==="CUMPLIDO"&&o.jsx(Z,{name:"check",size:12})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:p.status==="CUMPLIDO"?"line-through text-slate-400":"",children:p.description}),o.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:[p.responsible_name&&o.jsx("span",{children:p.responsible_name}),p.due_date&&o.jsx("span",{className:"ml-2",children:new Date(p.due_date).toLocaleDateString("es-CL")})]})]}),t&&o.jsx("button",{onClick:()=>a(p.id),className:"text-red-500 hover:text-red-700",children:o.jsx(Z,{name:"trash",size:16})})]},p.id))})]})},Ace=[{id:"agenda",label:"Agenda",icon:"calendar"},{id:"reuniones",label:"Reuniones",icon:"users"},{id:"minutas",label:"Minutas",icon:"file-text"},{id:"config",label:"Configuracin",icon:"settings"}],Ece=()=>{const[e,t]=D.useState("reuniones"),[r,n]=D.useState(null),a=l=>{n(l)},i=()=>{n(null)},s=()=>{switch(e){case"agenda":return o.jsx(wce,{onOpenMeeting:a});case"reuniones":return o.jsx(xce,{onOpenMeeting:a});case"minutas":return o.jsx(_ce,{onOpenMeeting:a});case"config":return o.jsx(Nce,{});default:return null}};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 border-b border-slate-200 pb-4",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:Ace.map(l=>o.jsxs("button",{onClick:()=>t(l.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${e===l.id?"bg-brand-600 text-white shadow-md":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[o.jsx(Z,{name:l.icon,size:18}),o.jsx("span",{className:"hidden sm:inline",children:l.label})]},l.id))})}),s(),r&&o.jsx(Sce,{meetingId:r,onClose:i})]})},Tce=async(e,t,r)=>{if(!rr())return[];const n=zi(e);let a=Se.from("tasks").select("*").in("terminal_code",n).order("updated_at",{ascending:!1});if(t!=null&&t.status&&t.status!=="todos"&&(a=a.eq("status",t.status)),t!=null&&t.priority&&t.priority!=="todos"&&(a=a.eq("priority",t.priority)),t!=null&&t.search){const l=`%${t.search}%`;a=a.or(`title.ilike.${l},description.ilike.${l}`)}t!=null&&t.assigned_to_name&&(a=a.ilike("assigned_to_name",`%${t.assigned_to_name}%`)),t!=null&&t.date_from&&(a=a.gte("created_at",t.date_from)),t!=null&&t.date_to&&(a=a.lte("created_at",t.date_to+"T23:59:59")),t!=null&&t.due_from&&(a=a.gte("due_at",t.due_from)),t!=null&&t.due_to&&(a=a.lte("due_at",t.due_to+"T23:59:59")),t!=null&&t.only_mine&&r&&(a=a.ilike("assigned_to_name",`%${r}%`));const{data:i,error:s}=await a;if(s)throw s;return i||[]},J3=async e=>{const{data:t,error:r}=await Se.from("tasks").select("*").eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t},Cce=async e=>{const t=zi(e),r=new Date().toISOString(),{data:n,error:a}=await Se.from("tasks").select("status, due_at").in("terminal_code",t);if(a)throw a;const i=n||[];return{pending:i.filter(s=>s.status==="PENDIENTE").length,inProgress:i.filter(s=>s.status==="EN_CURSO").length,completed:i.filter(s=>s.status==="TERMINADO").length,evaluated:i.filter(s=>s.status==="EVALUADO").length,rejected:i.filter(s=>s.status==="RECHAZADO").length,overdue:i.filter(s=>s.due_at&&s.due_at<r&&!["EVALUADO","RECHAZADO"].includes(s.status)).length}},kce=async(e,t)=>{const{data:r,error:n}=await Se.from("tasks").insert({title:e.title,description:e.description||null,terminal_code:e.terminal_code,priority:e.priority,assigned_to_staff_id:e.assigned_to_staff_id||null,assigned_to_name:e.assigned_to_name,assigned_to_email:e.assigned_to_email||null,created_by_supervisor:t,due_at:e.due_at||null,period_start:e.period_start||null,period_end:e.period_end||null}).select().single();if(n)throw Pi("Error al crear tarea","No se pudo guardar la tarea"),n;return $i("Tarea creada",`"${e.title}" asignada a ${e.assigned_to_name}`,t),e.assigned_to_email&&await Q3("assigned",r),r},Oce=async(e,t)=>{const r={};t.title!==void 0&&(r.title=t.title),t.description!==void 0&&(r.description=t.description||null),t.terminal_code!==void 0&&(r.terminal_code=t.terminal_code),t.priority!==void 0&&(r.priority=t.priority),t.assigned_to_staff_id!==void 0&&(r.assigned_to_staff_id=t.assigned_to_staff_id||null),t.assigned_to_name!==void 0&&(r.assigned_to_name=t.assigned_to_name),t.assigned_to_email!==void 0&&(r.assigned_to_email=t.assigned_to_email||null),t.due_at!==void 0&&(r.due_at=t.due_at||null),t.period_start!==void 0&&(r.period_start=t.period_start||null),t.period_end!==void 0&&(r.period_end=t.period_end||null);const{data:n,error:a}=await Se.from("tasks").update(r).eq("id",e).select().single();if(a)throw a;return n},Pce=async(e,t,r)=>{const{error:n}=await Se.from("tasks").update({status:t}).eq("id",e);if(n)throw n;const a=await J3(e);a!=null&&a.assigned_to_email&&await Q3("status_change",a)},Lce=async(e,t,r,n,a)=>{const i={status:t?"EVALUADO":"RECHAZADO",evaluated_by:r,evaluated_at:new Date().toISOString()};t&&n&&(i.evaluation_note=n),!t&&a&&(i.rejected_reason=a);const{error:s}=await Se.from("tasks").update(i).eq("id",e);if(s)throw s;const l=await J3(e);l!=null&&l.assigned_to_email&&await Q3(t?"evaluated_ok":"evaluated_reject",l),$i(t?"Tarea evaluada":"Tarea rechazada",t?"La tarea ha sido aceptada":"La tarea ha sido devuelta",r)},Rce=async e=>{const{data:t,error:r}=await Se.from("task_comments").select("*").eq("task_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},Dce=async(e,t,r)=>{const{data:n,error:a}=await Se.from("task_comments").insert({task_id:e,author_name:r,body:t}).select().single();if(a)throw a;return n},Ice=async e=>{const{data:t,error:r}=await Se.from("task_attachments").select("*").eq("task_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},Mce=async(e,t,r)=>{const n=t.name.split(".").pop(),a=`tasks/${e}/${Date.now()}.${n}`,{error:i}=await Se.storage.from("task-files").upload(a,t);if(i)throw Pi("Error al subir archivo",i.message),i;const{data:s,error:l}=await Se.from("task_attachments").insert({task_id:e,type:"FILE",storage_path:a,file_name:t.name,mime_type:t.type,size_bytes:t.size,created_by:r}).select().single();if(l)throw l;return s},Fce=async(e,t,r,n)=>{const{data:a,error:i}=await Se.from("task_attachments").insert({task_id:e,type:"URL",url:t,file_name:r,created_by:n}).select().single();if(i)throw i;return a},$ce=async(e,t)=>{t&&await Se.storage.from("task-files").remove([t]);const{error:r}=await Se.from("task_attachments").delete().eq("id",e);if(r)throw r},Bce=async e=>{const{data:t,error:r}=await Se.storage.from("task-files").createSignedUrl(e,3600);if(r)throw r;return t.signedUrl},q9=async(e,t)=>{const{data:r,error:n}=await Se.from("task_email_settings").select("*").eq("scope_type",e).eq("scope_code",t).single();if(n){if(n.code==="PGRST116")return null;throw n}return r},Uce=async e=>{const{error:t}=await Se.from("task_email_settings").upsert(e,{onConflict:"scope_type,scope_code"});if(t)throw t},Q3=async(e,t,r)=>{var a;const n=await q9("GLOBAL","ALL");if(!(!(n!=null&&n.enabled)||!t.assigned_to_email))try{const i=n.subject_templates[e]||"",s=n.body_templates[e]||"",l=c=>c.replace(/\{\{title\}\}/g,t.title).replace(/\{\{description\}\}/g,t.description||"").replace(/\{\{assigned_name\}\}/g,t.assigned_to_name).replace(/\{\{status\}\}/g,t.status).replace(/\{\{priority\}\}/g,t.priority).replace(/\{\{due_date\}\}/g,t.due_at?new Date(t.due_at).toLocaleDateString("es-CL"):"Sin fecha").replace(/\{\{creator\}\}/g,t.created_by_supervisor).replace(/\{\{reason\}\}/g,t.rejected_reason||"");await oo.sendEmail({audience:"manual",manualRecipients:[t.assigned_to_email],cc:((a=n.cc_emails)==null?void 0:a.split(",").map(c=>c.trim()).filter(Boolean))||[],subject:l(i),body:l(s).replace(/\n/g,"<br>")})}catch(i){console.error("Error sending task email:",i)}},zce=async()=>{const{data:e,error:t}=await Se.from("staff").select("id, nombre, email, cargo, terminal_code").eq("status","ACTIVO").order("nombre");if(t)throw t;return e||[]},An={all:["tasks"],list:(e,t)=>[...An.all,"list",e,t],detail:e=>[...An.all,"detail",e],kpis:e=>[...An.all,"kpis",e],comments:e=>[...An.all,"comments",e],attachments:e=>[...An.all,"attachments",e],staff:["staff-for-assignment"],emailSettings:e=>[...An.all,"emailSettings",e]},bw=e=>{const t=Xt(a=>a.context),r=_r(a=>a.session),n=t.mode==="ALL"?"ALL":t.value||"ALL";return Mt({queryKey:An.list(n,e),queryFn:()=>Tce(t,e,r==null?void 0:r.supervisorName)})},qce=e=>Mt({queryKey:An.detail(e||""),queryFn:()=>J3(e),enabled:!!e}),Hce=()=>{const e=Xt(r=>r.context),t=e.mode==="ALL"?"ALL":e.value||"ALL";return Mt({queryKey:An.kpis(t),queryFn:()=>Cce(e)})},Wce=()=>{const e=St(),t=_r(r=>r.session);return Et({mutationFn:r=>kce(r,(t==null?void 0:t.supervisorName)||""),onSuccess:()=>{e.invalidateQueries({queryKey:An.all})}})},Vce=()=>{const e=St();return Et({mutationFn:({id:t,values:r})=>Oce(t,r),onSuccess:(t,{id:r})=>{e.invalidateQueries({queryKey:An.all}),e.invalidateQueries({queryKey:An.detail(r)})}})},H9=()=>{const e=St(),t=_r(r=>r.session);return Et({mutationFn:({id:r,status:n})=>Pce(r,n,(t==null?void 0:t.supervisorName)||""),onSuccess:()=>{e.invalidateQueries({queryKey:An.all})}})},Gce=()=>{const e=St(),t=_r(r=>r.session);return Et({mutationFn:({id:r,accepted:n,note:a,reason:i})=>Lce(r,n,(t==null?void 0:t.supervisorName)||"",a,i),onSuccess:()=>{e.invalidateQueries({queryKey:An.all})}})},Kce=e=>Mt({queryKey:An.comments(e||""),queryFn:()=>Rce(e),enabled:!!e}),Yce=()=>{const e=St(),t=_r(r=>r.session);return Et({mutationFn:({taskId:r,body:n})=>Dce(r,n,(t==null?void 0:t.supervisorName)||""),onSuccess:(r,{taskId:n})=>{e.invalidateQueries({queryKey:An.comments(n)})}})},Xce=e=>Mt({queryKey:An.attachments(e||""),queryFn:()=>Ice(e),enabled:!!e}),Jce=()=>{const e=St(),t=_r(r=>r.session);return Et({mutationFn:({taskId:r,file:n})=>Mce(r,n,(t==null?void 0:t.supervisorName)||""),onSuccess:(r,{taskId:n})=>{e.invalidateQueries({queryKey:An.attachments(n)})}})},Qce=()=>{const e=St(),t=_r(r=>r.session);return Et({mutationFn:({taskId:r,url:n,label:a})=>Fce(r,n,a,(t==null?void 0:t.supervisorName)||""),onSuccess:(r,{taskId:n})=>{e.invalidateQueries({queryKey:An.attachments(n)})}})},Zce=()=>{const e=St();return Et({mutationFn:({id:t,storagePath:r,taskId:n})=>$ce(t,r),onSuccess:(t,{taskId:r})=>{e.invalidateQueries({queryKey:An.attachments(r)})}})},eue=()=>Mt({queryKey:An.staff,queryFn:zce,staleTime:5*60*1e3}),tue=(e,t)=>Mt({queryKey:An.emailSettings(`${e}-${t}`),queryFn:()=>q9(e,t)}),rue=()=>{const e=St();return Et({mutationFn:t=>Uce(t),onSuccess:()=>{e.invalidateQueries({queryKey:An.all})}})},nue=["ISAAC AVILA","CLAUDIO ARRIAGADA","CRISTIAN LURASCHI"],qh=e=>e.toUpperCase().trim().replace(/\s+/g," "),Cb=e=>{const t=qh(e);return nue.some(r=>qh(r)===t||t.includes(qh(r))||qh(r).includes(t))},W9=(e,t)=>qh(e)===qh(t),V9=(e,t,r)=>{if(t)return["PENDIENTE","EN_CURSO","TERMINADO","EVALUADO","RECHAZADO"];if(r)switch(e){case"PENDIENTE":return["EN_CURSO"];case"EN_CURSO":return["TERMINADO"];case"RECHAZADO":return["EN_CURSO"];default:return[]}return[]},aue=[{value:"todos",label:"Todos"},{value:"PENDIENTE",label:"Pendiente"},{value:"EN_CURSO",label:"En Curso"},{value:"TERMINADO",label:"Terminado"},{value:"EVALUADO",label:"Evaluado"},{value:"RECHAZADO",label:"Rechazado"}],Z3=[{value:"BAJA",label:"Baja",color:"bg-slate-100 text-slate-700"},{value:"MEDIA",label:"Media",color:"bg-blue-100 text-blue-700"},{value:"ALTA",label:"Alta",color:"bg-amber-100 text-amber-700"},{value:"CRITICA",label:"Critica",color:"bg-red-100 text-red-700"}],iue=["PENDIENTE","EN_CURSO","TERMINADO","EVALUADO","RECHAZADO"],eE=e=>{switch(e){case"PENDIENTE":return"bg-slate-100 text-slate-700 border-slate-300";case"EN_CURSO":return"bg-blue-100 text-blue-700 border-blue-300";case"TERMINADO":return"bg-amber-100 text-amber-700 border-amber-300";case"EVALUADO":return"bg-green-100 text-green-700 border-green-300";case"RECHAZADO":return"bg-red-100 text-red-700 border-red-300"}},Jg=e=>{var t;return((t=Z3.find(r=>r.value===e))==null?void 0:t.color)||""},Aj=({task:e,onClose:t,onSuccess:r})=>{const n=Xt(v=>v.context),a=Wce(),i=Vce(),s=eue(),[l,c]=D.useState({title:"",description:"",terminal_code:n.mode==="TERMINAL"?n.value:"EL_ROBLE",priority:"MEDIA",assigned_to_name:"",assigned_to_email:"",due_at:"",period_start:"",period_end:""}),[u,d]=D.useState(""),[f,p]=D.useState(!1);D.useEffect(()=>{var v;e&&c({title:e.title,description:e.description||"",terminal_code:e.terminal_code,priority:e.priority,assigned_to_staff_id:e.assigned_to_staff_id||void 0,assigned_to_name:e.assigned_to_name,assigned_to_email:e.assigned_to_email||"",due_at:((v=e.due_at)==null?void 0:v.slice(0,16))||"",period_start:e.period_start||"",period_end:e.period_end||""})},[e]);const h=(s.data||[]).filter(v=>v.nombre.toLowerCase().includes(u.toLowerCase())).slice(0,8),g=v=>{c(b=>({...b,assigned_to_staff_id:v.id,assigned_to_name:v.nombre,assigned_to_email:v.email||""})),d(""),p(!1)},m=async v=>{v.preventDefault();try{e?await i.mutateAsync({id:e.id,values:l}):await a.mutateAsync(l),r()}catch(b){console.error("Error saving task:",b)}},x=l.title&&l.assigned_to_name&&l.terminal_code,y=a.isPending||i.isPending;return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),o.jsxs("div",{className:"relative w-full max-w-2xl bg-white rounded-2xl shadow-2xl max-h-[90vh] overflow-hidden",children:[o.jsx("div",{className:"bg-brand-600 text-white p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-xl font-bold",children:e?"Editar Tarea":"Nueva Tarea"}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg",children:o.jsx(Z,{name:"x",size:24})})]})}),o.jsxs("form",{onSubmit:m,className:"p-6 overflow-y-auto max-h-[calc(90vh-180px)]",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Ttulo"}),o.jsx("input",{type:"text",className:"input",value:l.title,onChange:v=>c(b=>({...b,title:v.target.value})),placeholder:"Descripcin breve de la tarea",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Descripcin"}),o.jsx("textarea",{className:"input min-h-[80px]",value:l.description,onChange:v=>c(b=>({...b,description:v.target.value})),placeholder:"Detalles adicionales..."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsx("select",{className:"input",value:l.terminal_code,onChange:v=>c(b=>({...b,terminal_code:v.target.value})),required:!0,children:ns.map(v=>o.jsx("option",{value:v.value,children:v.label},v.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Prioridad"}),o.jsx("select",{className:"input",value:l.priority,onChange:v=>c(b=>({...b,priority:v.target.value})),children:Z3.map(v=>o.jsx("option",{value:v.value,children:v.label},v.value))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Asignar a"}),o.jsxs("div",{className:"relative",children:[l.assigned_to_name&&o.jsxs("div",{className:"mb-2 inline-flex items-center gap-2 px-3 py-1 bg-brand-100 text-brand-800 rounded-full text-sm",children:[o.jsx(Z,{name:"user",size:14}),o.jsx("span",{children:l.assigned_to_name}),o.jsx("button",{type:"button",onClick:()=>c(v=>({...v,assigned_to_staff_id:void 0,assigned_to_name:"",assigned_to_email:""})),className:"hover:text-brand-600",children:o.jsx(Z,{name:"x",size:14})})]}),o.jsx("input",{type:"text",className:"input",value:u,onChange:v=>{d(v.target.value),p(!0)},onFocus:()=>p(!0),placeholder:"Buscar personal..."}),f&&h.length>0&&o.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.map(v=>o.jsxs("button",{type:"button",onClick:()=>g(v),className:"w-full px-4 py-2 text-left hover:bg-slate-50 border-b last:border-b-0",children:[o.jsx("div",{className:"font-medium text-sm",children:v.nombre}),o.jsxs("div",{className:"text-xs text-slate-500",children:[v.cargo," - ",v.terminal_code]})]},v.id))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Correo del asignado (opcional)"}),o.jsx("input",{type:"email",className:"input",value:l.assigned_to_email,onChange:v=>c(b=>({...b,assigned_to_email:v.target.value})),placeholder:"correo@ejemplo.cl"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Vencimiento"}),o.jsx("input",{type:"datetime-local",className:"input",value:l.due_at,onChange:v=>c(b=>({...b,due_at:v.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Periodo desde"}),o.jsx("input",{type:"date",className:"input",value:l.period_start,onChange:v=>c(b=>({...b,period_start:v.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Periodo hasta"}),o.jsx("input",{type:"date",className:"input",value:l.period_end,onChange:v=>c(b=>({...b,period_end:v.target.value}))})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-6 mt-6 border-t",children:[o.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:!x||y,className:"btn btn-primary",children:y?"Guardando...":e?"Actualizar":"Crear Tarea"})]})]})]})]})},sue={PENDIENTE:"Pendiente",EN_CURSO:"En Curso",TERMINADO:"Terminado",EVALUADO:"Evaluado",RECHAZADO:"Rechazado"},oue=({onOpenTask:e})=>{const t=_r(m=>m.session),r=(t==null?void 0:t.supervisorName)??"",n=Cb(r),[a,i]=D.useState(!1),[s,l]=D.useState(null),c=bw(),u=H9(),d=m=>(c.data||[]).filter(x=>x.status===m),f=m=>{l(m)},p=m=>{m.preventDefault()},h=async m=>{if(!s||s.status===m){l(null);return}const x=Cb(r),y=W9(r,s.assigned_to_name);if(!V9(s.status,x,y).includes(m)){l(null);return}await u.mutateAsync({id:s.id,status:m}),l(null)},g=m=>{if(!m)return null;const x=new Date(m),v=x<new Date;return o.jsx("span",{className:`text-xs ${v?"text-red-600 font-medium":"text-slate-500"}`,children:x.toLocaleDateString("es-CL",{day:"2-digit",month:"short"})})};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(bn,{title:"Tablero de Tareas",description:"Vista Kanban con arrastrar y soltar",actions:n&&o.jsxs("button",{className:"btn btn-primary",onClick:()=>i(!0),children:[o.jsx(Z,{name:"plus",size:18})," Nueva Tarea"]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 overflow-x-auto pb-4",children:iue.map(m=>o.jsxs("div",{className:"bg-slate-100 rounded-xl p-3 min-h-[400px]",onDragOver:p,onDrop:()=>h(m),children:[o.jsxs("div",{className:`flex items-center justify-between mb-3 px-2 py-1 rounded-lg ${eE(m)}`,children:[o.jsx("span",{className:"font-semibold text-sm",children:sue[m]}),o.jsx("span",{className:"text-xs font-medium px-2 py-0.5 bg-white/50 rounded-full",children:d(m).length})]}),o.jsx("div",{className:"space-y-2",children:d(m).map(x=>o.jsxs("div",{draggable:!0,onDragStart:()=>f(x),onClick:()=>e(x.id),className:`bg-white rounded-lg p-3 shadow-sm cursor-pointer hover:shadow-md transition-shadow border-l-4 ${(s==null?void 0:s.id)===x.id?"opacity-50":""}`,style:{borderLeftColor:x.priority==="CRITICA"?"#ef4444":x.priority==="ALTA"?"#f59e0b":x.priority==="MEDIA"?"#3b82f6":"#94a3b8"},children:[o.jsx("div",{className:"font-medium text-sm text-slate-800 line-clamp-2",children:x.title}),o.jsxs("div",{className:"flex items-center justify-between mt-2",children:[o.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${Jg(x.priority)}`,children:x.priority}),g(x.due_at)]}),o.jsx("div",{className:"text-xs text-slate-500 mt-2 truncate",children:x.assigned_to_name})]},x.id))})]},m))}),a&&o.jsx(Aj,{onClose:()=>i(!1),onSuccess:()=>i(!1)})]})},lue=({onOpenTask:e})=>{const t=Xt(m=>m.context),r=Xt(m=>m.setContext),n=_r(m=>m.session),a=(n==null?void 0:n.supervisorName)??"",i=Cb(a),[s,l]=D.useState({status:"todos",priority:"todos"}),[c,u]=D.useState(!1),[d,f]=D.useState(null),p=bw(s),h=[{key:"due_at",header:"Vencimiento",value:m=>m.due_at?new Date(m.due_at).toLocaleDateString("es-CL"):""},{key:"title",header:"Ttulo",value:m=>m.title},{key:"terminal",header:"Terminal",value:m=>fr(m.terminal_code)},{key:"priority",header:"Prioridad",value:m=>m.priority},{key:"assigned",header:"Asignado",value:m=>m.assigned_to_name},{key:"status",header:"Estado",value:m=>m.status},{key:"created",header:"Creado",value:m=>new Date(m.created_at).toLocaleDateString("es-CL")}],g=m=>{if(!m)return"-";const x=new Date(m),v=x<new Date;return o.jsx("span",{className:v?"text-red-600 font-medium":"",children:x.toLocaleDateString("es-CL",{day:"2-digit",month:"short"})})};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(bn,{title:"Lista de Tareas",description:"Vista de tabla con filtros avanzados",actions:o.jsxs("div",{className:"flex gap-2",children:[i&&o.jsxs("button",{className:"btn btn-primary",onClick:()=>u(!0),children:[o.jsx(Z,{name:"plus",size:18})," Nueva Tarea"]}),o.jsx(Ma,{onExportView:()=>Er({filename:"tareas",sheetName:"Tareas",rows:p.data||[],columns:h}),onExportAll:()=>Er({filename:"tareas_all",sheetName:"Tareas",rows:p.data||[],columns:h})})]})}),o.jsxs(Fs,{terminalContext:t,onTerminalChange:r,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:s.status,onChange:m=>l(x=>({...x,status:m.target.value})),children:aue.map(m=>o.jsx("option",{value:m.value,children:m.label},m.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Prioridad"}),o.jsxs("select",{className:"input",value:s.priority,onChange:m=>l(x=>({...x,priority:m.target.value})),children:[o.jsx("option",{value:"todos",children:"Todas"}),Z3.map(m=>o.jsx("option",{value:m.value,children:m.label},m.value))]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"Ttulo o descripcin",value:s.search??"",onChange:m=>l(x=>({...x,search:m.target.value}))})]}),o.jsx("div",{className:"flex items-end",children:o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:s.only_mine||!1,onChange:m=>l(x=>({...x,only_mine:m.target.checked})),className:"w-4 h-4 rounded"}),o.jsx("span",{className:"text-sm",children:"Solo mis tareas"})]})})]}),p.isLoading&&o.jsx(Bn,{label:"Cargando tareas..."}),p.isError&&o.jsx(ri,{onRetry:()=>p.refetch()}),!p.isLoading&&!p.isError&&o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{className:"table-header-cell",children:"Vence"}),o.jsx("th",{className:"table-header-cell",children:"Ttulo"}),o.jsx("th",{className:"table-header-cell",children:"Terminal"}),o.jsx("th",{className:"table-header-cell",children:"Prioridad"}),o.jsx("th",{className:"table-header-cell",children:"Asignado"}),o.jsx("th",{className:"table-header-cell",children:"Estado"}),o.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:(p.data||[]).length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"table-cell text-center text-slate-500 py-8",children:"No hay tareas"})}):(p.data||[]).map(m=>o.jsxs("tr",{className:"table-row cursor-pointer hover:bg-slate-50",onClick:()=>e(m.id),children:[o.jsx("td",{className:"table-cell text-sm",children:g(m.due_at)}),o.jsx("td",{className:"table-cell font-medium",children:m.title}),o.jsx("td",{className:"table-cell text-sm",children:fr(m.terminal_code)}),o.jsx("td",{className:"table-cell",children:o.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Jg(m.priority)}`,children:m.priority})}),o.jsx("td",{className:"table-cell text-sm",children:m.assigned_to_name}),o.jsx("td",{className:"table-cell",children:o.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${eE(m.status)}`,children:m.status})}),o.jsx("td",{className:"table-cell",onClick:x=>x.stopPropagation(),children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[o.jsx("button",{onClick:()=>e(m.id),className:"btn btn-ghost btn-icon",title:"Ver",children:o.jsx(Z,{name:"eye",size:16})}),i&&o.jsx("button",{onClick:()=>f(m),className:"btn btn-ghost btn-icon",title:"Editar",children:o.jsx(Z,{name:"edit",size:16})})]})})]},m.id))})]})}),c&&o.jsx(Aj,{onClose:()=>u(!1),onSuccess:()=>u(!1)}),d&&o.jsx(Aj,{task:d,onClose:()=>f(null),onSuccess:()=>f(null)})]})},cue=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],uue=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],due=({onOpenTask:e})=>{const t=new Date,[r,n]=D.useState(t.getFullYear()),[a,i]=D.useState(t.getMonth()),[s,l]=D.useState(null),c=bw(),u=D.useMemo(()=>{const g=new Date(r,a,1),x=new Date(r,a+1,0).getDate(),y=g.getDay(),v=[];for(let b=0;b<y;b++)v.push(null);for(let b=1;b<=x;b++)v.push(b);return v},[r,a]),d=g=>{if(!c.data)return[];const m=`${r}-${String(a+1).padStart(2,"0")}-${String(g).padStart(2,"0")}`;return c.data.filter(x=>x.due_at&&x.due_at.startsWith(m)?!0:x.period_start&&x.period_end?m>=x.period_start&&m<=x.period_end:!1)},f=s?d(parseInt(s.split("-")[2])):[],p=()=>{a===0?(i(11),n(r-1)):i(a-1)},h=()=>{a===11?(i(0),n(r+1)):i(a+1)};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(bn,{title:"Calendario de Tareas",description:"Vista mensual con vencimientos y periodos"}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 card p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("button",{onClick:p,className:"btn btn-ghost btn-icon",children:o.jsx(Z,{name:"chevron-right",size:20,className:"rotate-180"})}),o.jsxs("h3",{className:"text-lg font-bold text-slate-800",children:[cue[a]," ",r]}),o.jsx("button",{onClick:h,className:"btn btn-ghost btn-icon",children:o.jsx(Z,{name:"chevron-right",size:20})})]}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:uue.map(g=>o.jsx("div",{className:"text-center text-xs font-semibold text-slate-500 py-2",children:g},g))}),o.jsx("div",{className:"grid grid-cols-7 gap-1",children:u.map((g,m)=>{if(g===null)return o.jsx("div",{className:"h-20"},`e-${m}`);const x=d(g),y=`${r}-${String(a+1).padStart(2,"0")}-${String(g).padStart(2,"0")}`,v=g===t.getDate()&&a===t.getMonth()&&r===t.getFullYear(),b=s===y;return o.jsxs("button",{onClick:()=>l(y),className:`h-20 rounded-lg border text-left p-1 transition-all ${b?"border-brand-500 bg-brand-50":"border-transparent hover:bg-slate-50"} ${v?"ring-2 ring-brand-400":""}`,children:[o.jsx("span",{className:`text-sm font-medium ${v?"text-brand-600":"text-slate-700"}`,children:g}),o.jsxs("div",{className:"mt-1 space-y-0.5 overflow-hidden",children:[x.slice(0,2).map(N=>o.jsx("div",{className:`text-[10px] px-1 rounded truncate ${Jg(N.priority)}`,children:N.title},N.id)),x.length>2&&o.jsxs("span",{className:"text-[10px] text-slate-500",children:["+",x.length-2]})]})]},g)})})]}),o.jsxs("div",{className:"card p-6",children:[o.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[o.jsx(Z,{name:"clipboard",size:18}),s?`Tareas: ${new Date(s+"T12:00:00").toLocaleDateString("es-CL",{day:"numeric",month:"long"})}`:"Selecciona un da"]}),s===null?o.jsx("p",{className:"text-sm text-slate-500",children:"Haz clic en un da para ver las tareas"}):f.length===0?o.jsx("p",{className:"text-sm text-slate-500",children:"Sin tareas para este da"}):o.jsx("div",{className:"space-y-2",children:f.map(g=>o.jsxs("button",{onClick:()=>e(g.id),className:"w-full text-left p-3 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors",children:[o.jsx("div",{className:"font-medium text-sm",children:g.title}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${Jg(g.priority)}`,children:g.priority}),o.jsx("span",{className:"text-xs text-slate-500",children:g.assigned_to_name})]})]},g.id))})]})]})]})},fue=()=>{const e=Hce();bw();const t=e.data,r=[{key:"metric",header:"Mtrica",value:i=>i.metric},{key:"value",header:"Valor",value:i=>i.value.toString()}],n=t?[{metric:"Pendientes",value:t.pending},{metric:"En Curso",value:t.inProgress},{metric:"Terminadas",value:t.completed},{metric:"Evaluadas",value:t.evaluated},{metric:"Rechazadas",value:t.rejected},{metric:"Vencidas",value:t.overdue}]:[],a=({label:i,value:s,icon:l,color:c})=>o.jsx("div",{className:`card p-4 border-l-4 ${c}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold text-slate-800",children:s}),o.jsx("div",{className:"text-sm text-slate-500",children:i})]}),o.jsx("div",{className:"p-3 bg-slate-100 rounded-full",children:o.jsx(Z,{name:l,size:24,className:"text-slate-600"})})]})});return e.isLoading?o.jsx(Bn,{label:"Cargando reportes..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsx(bn,{title:"Reportes de Tareas",description:"KPIs y mtricas de rendimiento",actions:o.jsx(Ma,{onExportView:()=>Er({filename:"reporte_tareas",sheetName:"KPIs",rows:n,columns:r}),onExportAll:()=>Er({filename:"reporte_tareas",sheetName:"KPIs",rows:n,columns:r})})}),t&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[o.jsx(a,{label:"Pendientes",value:t.pending,icon:"clock",color:"border-slate-400"}),o.jsx(a,{label:"En Curso",value:t.inProgress,icon:"activity",color:"border-blue-500"}),o.jsx(a,{label:"Terminadas",value:t.completed,icon:"check",color:"border-amber-500"}),o.jsx(a,{label:"Evaluadas",value:t.evaluated,icon:"check-circle",color:"border-green-500"}),o.jsx(a,{label:"Rechazadas",value:t.rejected,icon:"x-circle",color:"border-red-500"}),o.jsx(a,{label:"Vencidas",value:t.overdue,icon:"alert-triangle",color:"border-orange-500"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"card p-6",children:[o.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Distribucin por Estado"}),o.jsx("div",{className:"space-y-3",children:[{label:"Pendientes",value:t.pending,color:"bg-slate-400"},{label:"En Curso",value:t.inProgress,color:"bg-blue-500"},{label:"Terminadas",value:t.completed,color:"bg-amber-500"},{label:"Evaluadas",value:t.evaluated,color:"bg-green-500"},{label:"Rechazadas",value:t.rejected,color:"bg-red-500"}].map(i=>{const s=t.pending+t.inProgress+t.completed+t.evaluated+t.rejected,l=s>0?i.value/s*100:0;return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{children:i.label}),o.jsx("span",{className:"font-medium",children:i.value})]}),o.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full ${i.color} rounded-full`,style:{width:`${l}%`}})})]},i.label)})})]}),o.jsxs("div",{className:"card p-6",children:[o.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Resumen General"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded-lg",children:[o.jsx("span",{className:"text-slate-600",children:"Total de tareas"}),o.jsx("span",{className:"text-xl font-bold text-brand-600",children:t.pending+t.inProgress+t.completed+t.evaluated+t.rejected})]}),o.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded-lg",children:[o.jsx("span",{className:"text-slate-600",children:"Tasa de cumplimiento"}),o.jsx("span",{className:"text-xl font-bold text-green-600",children:(()=>{const i=t.evaluated,s=t.pending+t.inProgress+t.completed+t.evaluated;return s>0?`${Math.round(i/s*100)}%`:"0%"})()})]}),o.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50 rounded-lg",children:[o.jsx("span",{className:"text-slate-600",children:"Requieren atencin"}),o.jsx("span",{className:"text-xl font-bold text-red-600",children:t.overdue+t.rejected})]})]})]})]})]})]})},hue=()=>{const e=tue("GLOBAL","ALL"),t=rue(),[r,n]=D.useState(!0),[a,i]=D.useState(""),[s,l]=D.useState({assigned:"Nueva tarea asignada: {{title}}",status_change:"Tarea actualizada: {{title}}",overdue:"Tarea vencida: {{title}}",evaluated_ok:"Tarea evaluada: {{title}}",evaluated_reject:"Tarea rechazada: {{title}}"}),[c,u]=D.useState({assigned:"",status_change:"",overdue:"",evaluated_ok:"",evaluated_reject:""});D.useEffect(()=>{e.data&&(n(e.data.enabled),i(e.data.cc_emails||""),l(e.data.subject_templates),u(e.data.body_templates))},[e.data]);const d=async()=>{await t.mutateAsync({scope_type:"GLOBAL",scope_code:"ALL",enabled:r,cc_emails:a||null,subject_templates:s,body_templates:c})},f=[{key:"assigned",label:"Al asignar tarea"},{key:"status_change",label:"Cambio de estado"},{key:"overdue",label:"Tarea vencida"},{key:"evaluated_ok",label:"Tarea aceptada"},{key:"evaluated_reject",label:"Tarea rechazada"}];return o.jsxs("div",{className:"space-y-6",children:[o.jsx(bn,{title:"Configuracin",description:"Ajustes de correo y notificaciones para tareas"}),o.jsxs("div",{className:"card p-6 max-w-3xl",children:[o.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[o.jsx(Z,{name:"send",size:18})," Configuracin de Correos"]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-slate-800",children:"Notificaciones por correo"}),o.jsx("div",{className:"text-sm text-slate-500",children:"Enviar correos al asignar, cambiar estado o evaluar tareas"})]}),o.jsx("button",{onClick:()=>n(!r),className:`relative w-12 h-6 rounded-full transition-colors ${r?"bg-brand-600":"bg-slate-300"}`,children:o.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${r?"left-7":"left-1"}`})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Correos en copia (CC)"}),o.jsx("input",{type:"text",className:"input",value:a,onChange:p=>i(p.target.value),placeholder:"correo1@ejemplo.cl, correo2@ejemplo.cl"}),o.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Separar mltiples correos con coma"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"font-medium text-slate-700",children:"Plantillas de correo"}),o.jsxs("p",{className:"text-xs text-slate-500",children:["Variables: ","{{title}}, {{description}}, {{assigned_name}}, {{status}}, {{priority}}, {{due_date}}, {{creator}}, {{reason}}"]}),f.map(({key:p,label:h})=>o.jsxs("div",{className:"border rounded-lg p-4",children:[o.jsx("div",{className:"font-medium text-sm text-slate-700 mb-2",children:h}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("input",{type:"text",className:"input text-sm",placeholder:"Asunto",value:s[p],onChange:g=>l(m=>({...m,[p]:g.target.value}))}),o.jsx("textarea",{className:"input min-h-[80px] text-sm font-mono",placeholder:"Cuerpo del correo",value:c[p],onChange:g=>u(m=>({...m,[p]:g.target.value}))})]})]},p))]}),o.jsx("div",{className:"flex justify-end pt-4 border-t",children:o.jsx("button",{onClick:d,disabled:t.isPending,className:"btn btn-primary",children:t.isPending?"Guardando...":"Guardar Configuracin"})})]})]})]})},pue=({mode:e,taskTitle:t,onConfirm:r,onCancel:n,isLoading:a})=>{const[i,s]=D.useState(""),l=e==="accept";return o.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:n}),o.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 animate-scale-in",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:`p-3 rounded-full ${l?"bg-green-100":"bg-red-100"}`,children:o.jsx(Z,{name:l?"check-circle":"x-circle",size:24,className:l?"text-green-600":"text-red-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800",children:l?"Aceptar Tarea":"Rechazar Tarea"}),o.jsx("p",{className:"text-sm text-slate-500",children:t})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"label",children:l?"Nota de evaluacin (opcional)":"Motivo de rechazo"}),o.jsx("textarea",{className:"input min-h-[100px] resize-none",value:i,onChange:c=>s(c.target.value),placeholder:l?"Comentario sobre la tarea completada...":"Indique por qu se rechaza la tarea...",required:!l})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",children:"Cancelar"}),o.jsx("button",{onClick:()=>r(l?i:void 0,l?void 0:i),disabled:!l&&!i.trim()||a,className:`btn ${l?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"} text-white`,children:a?"Procesando...":l?"Aceptar":"Rechazar"})]})]})]})},mue=({taskId:e,onClose:t})=>{const r=_r(re=>re.session),n=(r==null?void 0:r.supervisorName)??"",a=Cb(n),[i,s]=D.useState("info"),[l,c]=D.useState(""),[u,d]=D.useState(null),[f,p]=D.useState({url:"",label:""}),h=qce(e),g=Kce(e),m=Xce(e),x=Yce(),y=Jce(),v=Qce(),b=Zce(),N=H9(),_=Gce(),E=h.data,j=E?W9(n,E.assigned_to_name):!1,A=E?V9(E.status,a,j):[],T=async re=>{await N.mutateAsync({id:e,status:re})},P=async()=>{l.trim()&&(await x.mutateAsync({taskId:e,body:l}),c(""))},O=async re=>{var oe;const X=(oe=re.target.files)==null?void 0:oe[0];X&&(await y.mutateAsync({taskId:e,file:X}),re.target.value="")},R=async()=>{f.url.trim()&&(await v.mutateAsync({taskId:e,url:f.url,label:f.label||f.url}),p({url:"",label:""}))},I=async re=>{const X=await Bce(re);window.open(X,"_blank")},z=async(re,X,oe)=>{await _.mutateAsync({id:e,accepted:re,note:X,reason:oe}),d(null)};if(h.isLoading)return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:o.jsx(Bn,{label:"Cargando tarea..."})});if(!E)return null;const Y=re=>new Date(re).toLocaleString("es-CL"),ie=[{id:"info",label:"Info",icon:"info"},{id:"comments",label:"Comentarios",icon:"clipboard"},{id:"attachments",label:"Adjuntos",icon:"file"}];return o.jsxs("div",{className:"fixed inset-0 z-50 flex bg-black/50 backdrop-blur-sm",children:[o.jsxs("div",{className:"w-full h-full bg-white flex flex-col lg:flex-row animate-scale-in",children:[o.jsxs("div",{className:"lg:w-64 bg-slate-50 border-b lg:border-b-0 lg:border-r border-slate-200 p-4 flex lg:flex-col gap-2 overflow-x-auto lg:overflow-visible shrink-0",children:[ie.map(re=>o.jsxs("button",{onClick:()=>s(re.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all whitespace-nowrap ${i===re.id?"bg-brand-600 text-white":"text-slate-600 hover:bg-slate-200"}`,children:[o.jsx(Z,{name:re.icon,size:18}),o.jsx("span",{className:"hidden lg:inline",children:re.label})]},re.id)),o.jsxs("button",{onClick:t,className:"mt-auto flex items-center gap-2 px-4 py-2 rounded-lg text-slate-600 hover:bg-slate-200",children:[o.jsx(Z,{name:"x",size:18})," ",o.jsx("span",{className:"hidden lg:inline",children:"Cerrar"})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[o.jsxs("div",{className:"mb-6 pb-4 border-b",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:E.title}),o.jsx("p",{className:"text-slate-500 mt-1",children:E.description||"Sin descripcin"})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${Jg(E.priority)}`,children:E.priority}),o.jsx("span",{className:`px-3 py-1 rounded-full text-sm border ${eE(E.status)}`,children:E.status})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[A.filter(re=>re!==E.status&&!["EVALUADO","RECHAZADO"].includes(re)).map(re=>o.jsxs("button",{onClick:()=>T(re),className:"btn btn-secondary text-sm",disabled:N.isPending,children:["Cambiar a ",re]},re)),a&&E.status==="TERMINADO"&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>d("accept"),className:"btn bg-green-600 hover:bg-green-700 text-white text-sm",children:[o.jsx(Z,{name:"check-circle",size:16})," Aceptar"]}),o.jsxs("button",{onClick:()=>d("reject"),className:"btn bg-red-600 hover:bg-red-700 text-white text-sm",children:[o.jsx(Z,{name:"x-circle",size:16})," Rechazar"]})]})]})]}),i==="info"&&o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Terminal"}),o.jsx("div",{className:"font-medium",children:fr(E.terminal_code)})]}),o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Asignado a"}),o.jsx("div",{className:"font-medium",children:E.assigned_to_name})]}),o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Vencimiento"}),o.jsx("div",{className:"font-medium",children:E.due_at?Y(E.due_at):"Sin fecha"})]}),o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Creado por"}),o.jsx("div",{className:"font-medium",children:E.created_by_supervisor})]}),E.evaluated_by&&o.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg md:col-span-2",children:[o.jsx("div",{className:"text-sm text-slate-500",children:"Evaluado por"}),o.jsxs("div",{className:"font-medium",children:[E.evaluated_by," - ",E.evaluated_at?Y(E.evaluated_at):""]}),E.evaluation_note&&o.jsx("div",{className:"text-sm text-slate-600 mt-1",children:E.evaluation_note})]}),E.rejected_reason&&o.jsxs("div",{className:"bg-red-50 p-4 rounded-lg md:col-span-2 border border-red-200",children:[o.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Motivo de rechazo"}),o.jsx("div",{className:"text-red-700 mt-1",children:E.rejected_reason})]})]}),i==="comments"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("textarea",{className:"input flex-1 min-h-[80px]",value:l,onChange:re=>c(re.target.value),placeholder:"Agregar comentario o actualizacin..."}),o.jsx("button",{onClick:P,disabled:!l.trim()||x.isPending,className:"btn btn-primary self-end",children:o.jsx(Z,{name:"send",size:16})})]}),o.jsx("div",{className:"space-y-3",children:(g.data||[]).map(re=>o.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"font-medium text-slate-700",children:re.author_name}),o.jsx("span",{className:"text-slate-400",children:new Date(re.created_at).toLocaleString("es-CL")})]}),o.jsx("div",{className:"mt-2 text-slate-600",children:re.body})]},re.id))})]}),i==="attachments"&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:o.jsxs("label",{className:"btn btn-secondary cursor-pointer inline-flex items-center gap-2",children:[o.jsx(Z,{name:"upload",size:16})," Subir archivo",o.jsx("input",{type:"file",className:"hidden",accept:".pdf,.png,.jpg,.jpeg,.xlsx",onChange:O})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 p-3 bg-slate-50 rounded-lg",children:[o.jsx("input",{type:"url",className:"input flex-1",placeholder:"URL",value:f.url,onChange:re=>p(X=>({...X,url:re.target.value}))}),o.jsx("input",{type:"text",className:"input flex-1",placeholder:"Etiqueta (opcional)",value:f.label,onChange:re=>p(X=>({...X,label:re.target.value}))}),o.jsx("button",{onClick:R,disabled:!f.url,className:"btn btn-secondary shrink-0",children:o.jsx(Z,{name:"plus",size:16})})]}),o.jsx("div",{className:"space-y-2",children:(m.data||[]).map(re=>o.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Z,{name:re.type==="URL"?"activity":"file",size:20,className:"text-slate-400"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-sm",children:re.file_name}),re.size_bytes&&o.jsxs("div",{className:"text-xs text-slate-500",children:[(re.size_bytes/1024).toFixed(1)," KB"]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[re.type==="FILE"&&re.storage_path&&o.jsx("button",{onClick:()=>I(re.storage_path),className:"btn btn-ghost btn-icon",children:o.jsx(Z,{name:"eye",size:16})}),re.type==="URL"&&re.url&&o.jsx("a",{href:re.url,target:"_blank",rel:"noopener noreferrer",className:"btn btn-ghost btn-icon",children:o.jsx(Z,{name:"eye",size:16})}),o.jsx("button",{onClick:()=>b.mutate({id:re.id,storagePath:re.storage_path,taskId:e}),className:"btn btn-ghost btn-icon text-red-500",children:o.jsx(Z,{name:"trash",size:16})})]})]},re.id))})]})]})]}),u&&o.jsx(pue,{mode:u,taskTitle:E.title,onConfirm:(re,X)=>z(u==="accept",re,X),onCancel:()=>d(null),isLoading:_.isPending})]})},gue=[{id:"kanban",label:"Tablero",icon:"layers"},{id:"lista",label:"Lista",icon:"clipboard"},{id:"calendario",label:"Calendario",icon:"calendar"},{id:"reportes",label:"Reportes",icon:"bar-chart"},{id:"config",label:"Configuracin",icon:"settings"}],vue=()=>{const[e,t]=D.useState("kanban"),[r,n]=D.useState(null),a=l=>{n(l)},i=()=>{n(null)},s=()=>{switch(e){case"kanban":return o.jsx(oue,{onOpenTask:a});case"lista":return o.jsx(lue,{onOpenTask:a});case"calendario":return o.jsx(due,{onOpenTask:a});case"reportes":return o.jsx(fue,{});case"config":return o.jsx(hue,{});default:return null}};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 border-b border-slate-200 pb-4",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:gue.map(l=>o.jsxs("button",{onClick:()=>t(l.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${e===l.id?"bg-brand-600 text-white shadow-md":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[o.jsx(Z,{name:l.icon,size:18}),o.jsx("span",{className:"hidden sm:inline",children:l.label})]},l.id))})}),s(),r&&o.jsx(mue,{taskId:r,onClose:i})]})},nd=({columns:e,rows:t,emptyMessage:r="Sin resultados"})=>t.length?o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsx("tr",{children:e.map(n=>o.jsx("th",{scope:"col",className:"table-header-cell",children:n.header},n.key))})}),o.jsx("tbody",{className:"table-body",children:t.map((n,a)=>o.jsx("tr",{className:"table-row",children:e.map(i=>o.jsx("td",{className:"table-cell",children:i.render?i.render(n):n[i.key]},i.key))},a))})]})}):o.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50/50 px-6 py-12 text-center",children:[o.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-slate-100 mb-3",children:o.jsx("svg",{className:"h-6 w-6 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),o.jsx("p",{className:"text-sm font-medium text-slate-600",children:r}),o.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"No hay datos para mostrar en este momento"})]}),ad=({label:e="Sin datos",description:t})=>o.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50/50 px-6 py-12 text-center",children:[o.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-slate-100 mb-4",children:o.jsx("svg",{className:"h-7 w-7 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),o.jsx("p",{className:"text-sm font-semibold text-slate-700",children:e}),t&&o.jsx("p",{className:"mt-1 text-xs text-slate-500 max-w-xs",children:t})]}),tE=(e,t)=>({list:async({terminalContext:r,filters:n,scope:a})=>{const i=rJ(e,r);return a==="all"?i:t?i.filter(s=>t(s,n)):i}}),xue=[{id:"i-1",titulo:"Actualizacin de protocolos",fecha:"2023-12-02",enviadoPor:"Equipo Seguridad",alcance:"todos",terminal:"EL_ROBLE"},{id:"i-2",titulo:"Corte programado",fecha:"2023-12-03",enviadoPor:"Operaciones",alcance:"terminal",terminal:"LA_REINA"},{id:"i-3",titulo:"Campaa de seguridad",fecha:"2023-12-01",enviadoPor:"Prevencin",alcance:"segmentado",terminal:"EL_SALTO"}],r6=tE(xue,(e,t)=>t!=null&&t.alcance&&t.alcance!=="todos"?e.alcance===t.alcance:!0),yue=()=>{var P;const e=Xt(O=>O.context),t=Xt(O=>O.setContext),[r,n]=D.useState({alcance:"todos"}),[a,i]=D.useState("todos"),[s,l]=D.useState("EL_ROBLE"),[c,u]=D.useState(""),[d,f]=D.useState(""),[p,h]=D.useState(""),[g,m]=D.useState(!1),[x,y]=D.useState(""),[v,b]=D.useState(""),N=Mt({queryKey:["informativos",e,r],queryFn:()=>r6.list({terminalContext:e,filters:r,scope:"view"})}),_=D.useMemo(()=>[{key:"titulo",header:"Ttulo"},{key:"enviadoPor",header:"Enviado por"},{key:"alcance",header:"Alcance",render:O=>o.jsx("span",{className:"badge",children:O.alcance}),value:O=>O.alcance},{key:"fecha",header:"Fecha",render:O=>pi(O.fecha),value:O=>pi(O.fecha)},{key:"terminal",header:"Terminal",render:O=>fr(O.terminal),value:O=>fr(O.terminal)}],[]),E=_.map(O=>({key:O.key,header:O.header,value:R=>O.value?O.value(R):R[O.key]})),j=()=>{N.data&&Er({filename:"informativos_vista",sheetName:"Informativos",rows:N.data,columns:E})},A=async()=>{const O=await r6.list({terminalContext:e,scope:"all"});Er({filename:"informativos_completo",sheetName:"Informativos",rows:O,columns:E})},T=async()=>{b(""),m(!0);try{const O=await oo.sendEmail({audience:a,terminalCodes:a==="por_terminal"?[s]:void 0,manualRecipients:a==="manual"?c.split(",").map(R=>R.trim()).filter(Boolean):void 0,subject:d,body:p});y(`Correo enviado (${O.messageId})`),f(""),h(""),u("")}catch(O){b(O.message)}finally{m(!1)}};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(bn,{title:"Informativos",description:"Comunicaciones internas con opciones de envo por terminal.",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"btn btn-primary",children:"Nuevo informativo"}),o.jsx(Ma,{onExportView:j,onExportAll:A})]})}),o.jsx(Fs,{terminalContext:e,onTerminalChange:t,children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Alcance"}),o.jsxs("select",{className:"input",value:r.alcance,onChange:O=>n({alcance:O.target.value}),children:[o.jsx("option",{value:"todos",children:"Todos"}),o.jsx("option",{value:"terminal",children:"Por terminal"}),o.jsx("option",{value:"segmentado",children:"Segmentado"})]})]})}),N.isLoading&&o.jsx(Bn,{}),N.isError&&o.jsx(ri,{onRetry:N.refetch}),!N.isLoading&&!N.isError&&o.jsxs(o.Fragment,{children:[!((P=N.data)!=null&&P.length)&&o.jsx(ad,{description:"No hay informativos con los filtros actuales."}),N.data&&N.data.length>0&&o.jsx(nd,{columns:_,rows:N.data})]}),o.jsxs("div",{className:"card p-4",children:[o.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-base font-semibold text-slate-900",children:"Enviar correo interno"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Mdulo preparado para conectar a Edge Function."})]}),o.jsxs("div",{className:"flex flex-col items-end gap-1 text-right",children:[x&&o.jsx("span",{className:"badge",children:x}),v&&o.jsx("span",{className:"text-xs font-semibold text-red-600",children:v})]})]}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"label",children:"Destinatarios"}),o.jsxs("select",{className:"input",value:a,onChange:O=>i(O.target.value),children:[o.jsx("option",{value:"todos",children:"Todos"}),o.jsx("option",{value:"por_terminal",children:"Por terminal"}),o.jsx("option",{value:"manual",children:"Lista manual"})]})]}),a==="por_terminal"&&o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"label",children:"Terminal objetivo"}),o.jsx("select",{className:"input",value:s,onChange:O=>l(O.target.value),children:ns.map(O=>o.jsx("option",{value:O.value,children:O.label},O.value))})]}),a==="manual"&&o.jsxs("div",{className:"space-y-1 md:col-span-2",children:[o.jsx("label",{className:"label",children:"Correos (separados por coma)"}),o.jsx("input",{className:"input",value:c,onChange:O=>u(O.target.value),placeholder:"correo1@dominio.com, correo2@dominio.com"})]}),o.jsxs("div",{className:"md:col-span-3 grid gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"label",children:"Asunto"}),o.jsx("input",{className:"input",value:d,onChange:O=>f(O.target.value)})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"label",children:"Mensaje"}),o.jsx("textarea",{className:"input min-h-[120px]",value:p,onChange:O=>h(O.target.value),placeholder:"Contenido del correo"})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{className:"btn btn-primary",onClick:T,disabled:g||!d||!p,children:g?"Enviando...":"Enviar (mock)"})})]})]})]})]})},bue=["ISAAC AVILA","CLAUDIO ARRIAGADA","CRISTIAN LURASCHI"],wue={EL_ROBLE:"CRISTIAN LURASCHI",LA_REINA:"CRISTIAN LURASCHI"},id=e=>e.trim().replace(/\s+/g," ").toUpperCase(),ex=e=>{const t=id(e);return bue.includes(t)},_ue=e=>wue[e]??"",tx=({data:e,isLoading:t})=>{if(t)return o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[...Array(4)].map((n,a)=>o.jsxs("div",{className:"card p-4 animate-pulse",children:[o.jsx("div",{className:"h-4 bg-slate-200 rounded w-24 mb-2"}),o.jsx("div",{className:"h-8 bg-slate-200 rounded w-12"})]},a))});if(!e)return null;const r=[{label:"Pendientes Hoy",value:e.pendingToday,icon:"clock",bgClass:"bg-warning-50 border-warning-200",textClass:"text-warning-700",iconClass:"text-warning-500"},{label:"Pendientes Total",value:e.pendingTotal,icon:"inbox",bgClass:"bg-orange-50 border-orange-200",textClass:"text-orange-700",iconClass:"text-orange-500"},{label:"Autorizados (30d)",value:e.authorizedRange,icon:"check-circle",bgClass:"bg-success-50 border-success-200",textClass:"text-success-700",iconClass:"text-success-500"},{label:"Rechazados (30d)",value:e.rejectedRange,icon:"x",bgClass:"bg-danger-50 border-danger-200",textClass:"text-danger-700",iconClass:"text-danger-500"}];return o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:r.map(n=>o.jsxs("div",{className:`card p-4 ${n.bgClass}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Z,{name:n.icon,size:18,className:n.iconClass}),o.jsx("span",{className:"text-xs font-semibold text-slate-600 uppercase",children:n.label})]}),o.jsx("p",{className:`text-2xl font-bold ${n.textClass}`,children:n.value})]},n.label))})},El=({mode:e,itemName:t,onConfirm:r,onCancel:n,isLoading:a})=>{const[i,s]=D.useState(""),l=u=>{u.preventDefault(),!(e==="reject"&&!i.trim())&&r(i.trim()||void 0)},c=e==="authorize";return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:n}),o.jsxs("div",{className:"relative w-full max-w-md card p-6 animate-scale-in",children:[o.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[o.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-full ${c?"bg-success-100":"bg-danger-100"}`,children:o.jsx(Z,{name:c?"check-circle":"x",size:24,className:c?"text-success-600":"text-danger-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:c?"Autorizar Registro":"Rechazar Registro"}),o.jsx("p",{className:"text-sm text-slate-600",children:c?`Confirmas la autorizacin de "${t}"?`:`Confirmas el rechazo de "${t}"?`})]})]}),o.jsxs("form",{onSubmit:l,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"label",children:c?"Comentario (opcional)":"Motivo del rechazo *"}),o.jsx("textarea",{className:"input min-h-[80px]",value:i,onChange:u=>s(u.target.value),placeholder:c?"Agregar comentario...":"Describe el motivo del rechazo...",required:!c})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",disabled:a,children:"Cancelar"}),o.jsx("button",{type:"submit",className:`btn ${c?"btn-success":"btn-danger"}`,disabled:a||!c&&!i.trim(),children:a?o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Procesando..."]}):c?"Autorizar":"Rechazar"})]})]})]})]})},ww=({value:e,onChange:t,onStaffFound:r,disabled:n})=>{const[a,i]=D.useState(""),[s,l]=D.useState(!1),[c,u]=D.useState(null),[d,f]=D.useState(!1);D.useEffect(()=>{e&&i(Jn(e))},[e]);const p=m=>{if(i(m),u(null),f(!1),jj(m).valid){const y=rd(m);t(y),h(y)}else t(""),r(null)},h=async m=>{l(!0);try{const x=await ole(m);x?(f(!0),r(x)):(u("RUT no encontrado en Personal"),r(null))}catch{u("Error al buscar RUT"),r(null)}finally{l(!1)}},g=()=>{e&&i(Jn(e))};return o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"RUT"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",className:`input pr-10 ${c?"border-danger-500":d?"border-success-500":""}`,value:a,onChange:m=>p(m.target.value),onBlur:g,placeholder:"12.345.678-9",disabled:n}),o.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:s?o.jsxs("svg",{className:"animate-spin h-4 w-4 text-slate-400",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):d?o.jsx(Z,{name:"check-circle",size:18,className:"text-success-500"}):c?o.jsx(Z,{name:"x",size:18,className:"text-danger-500"}):o.jsx(Z,{name:"search",size:18,className:"text-slate-400"})})]}),c&&o.jsx("p",{className:"mt-1 text-xs text-danger-600",children:c}),d&&o.jsx("p",{className:"mt-1 text-xs text-success-600",children:"Datos cargados desde Personal"})]})},Nue=({initialData:e,supervisorName:t,onSubmit:r,onCancel:n,isLoading:a})=>{const[i,s]=D.useState({rut:"",nombre:"",area:"Logstica",cargo:"",jefe_terminal:"",terminal_code:"EL_ROBLE",cabezal:"",incident_state:"",schedule_in_out:"",date:new Date().toISOString().split("T")[0],time_range:"",observations:"",informed_by:t,...e});D.useEffect(()=>{const u=_ue(i.terminal_code);u&&s(d=>({...d,jefe_terminal:u}))},[i.terminal_code]);const l=u=>{u&&s(d=>({...d,nombre:u.nombre,cargo:u.cargo,terminal_code:u.terminal_code}))},c=u=>{u.preventDefault(),r(i)};return o.jsxs("form",{onSubmit:c,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(ww,{value:i.rut,onChange:u=>s(d=>({...d,rut:u})),onStaffFound:l,disabled:!!(e!=null&&e.rut)}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nombre"}),o.jsx("input",{type:"text",className:"input",value:i.nombre,onChange:u=>s(d=>({...d,nombre:u.target.value})),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"rea"}),o.jsx("input",{type:"text",className:"input",value:i.area,onChange:u=>s(d=>({...d,area:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cargo"}),o.jsx("input",{type:"text",className:"input",value:i.cargo,onChange:u=>s(d=>({...d,cargo:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsx("select",{className:"input",value:i.terminal_code,onChange:u=>s(d=>({...d,terminal_code:u.target.value})),required:!0,children:ns.map(u=>o.jsx("option",{value:u.value,children:u.label},u.value))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Jefe de Terminal"}),o.jsx("input",{type:"text",className:"input",value:i.jefe_terminal,onChange:u=>s(d=>({...d,jefe_terminal:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cabezal"}),o.jsx("input",{type:"text",className:"input",value:i.cabezal,onChange:u=>s(d=>({...d,cabezal:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Estado (Incidente)"}),o.jsx("input",{type:"text",className:"input",value:i.incident_state,onChange:u=>s(d=>({...d,incident_state:u.target.value}))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Horario Entrada/Salida"}),o.jsx("input",{type:"text",className:"input",value:i.schedule_in_out,onChange:u=>s(d=>({...d,schedule_in_out:u.target.value})),placeholder:"08:00-18:00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha"}),o.jsx("input",{type:"date",className:"input",value:i.date,onChange:u=>s(d=>({...d,date:u.target.value})),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Horario (Rango)"}),o.jsx("input",{type:"text",className:"input",value:i.time_range,onChange:u=>s(d=>({...d,time_range:u.target.value})),placeholder:"10:00-14:00"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Observaciones"}),o.jsx("textarea",{className:"input min-h-[80px]",value:i.observations,onChange:u=>s(d=>({...d,observations:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Informado Por"}),o.jsx("input",{type:"text",className:"input",value:i.informed_by,onChange:u=>s(d=>({...d,informed_by:u.target.value}))})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[o.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",disabled:a,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?"Guardando...":e?"Guardar Cambios":"Crear Registro"})]})]})},rE=async e=>{const{data:t,error:r}=await Se.from("app_configuration").select("value").eq("key",e).single();return r?(r.code==="PGRST116"||console.error(`Error fetching config ${e}:`,r),null):t.value},Sue=async(e,t,r)=>{const{error:n}=await Se.from("app_configuration").upsert({key:e,value:t,description:r},{onConflict:"key"});if(n)throw console.error(`Error updating config ${e}:`,n),n},jue=async(e,t)=>{if(!rr())return[];const r=zi(e);let n=Se.from("attendance_no_marcaciones").select("*").in("terminal_code",r).order("date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}t!=null&&t.date_from&&(n=n.gte("date",t.date_from)),t!=null&&t.date_to&&(n=n.lte("date",t.date_to));const{data:a,error:i}=await n;if(i)throw i;return a||[]},Aue=async(e,t)=>{const{data:r,error:n}=await Se.from("attendance_no_marcaciones").insert({...e,created_by_supervisor:id(t)}).select().single();if(n)throw Pi("Error al crear registro","No se pudo guardar el registro de No Marcacin"),n;try{await rx("No Marcaciones",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.date,createdBy:t,details:{rea:e.area||"",Cargo:e.cargo||"","Jefe Terminal":e.jefe_terminal||"",Observaciones:e.observations||""}}),$i("Registro creado exitosamente",`No Marcacin para ${e.nombre} guardado y correo enviado`,t)}catch{$i("Registro creado",`No Marcacin para ${e.nombre} guardado (correo no enviado)`,t)}return r},Eue=async(e,t)=>{const{data:r,error:n}=await Se.from("attendance_no_marcaciones").update(t).eq("id",e).select().single();if(n)throw n;return r},Tue=async(e,t)=>{if(!rr())return[];const r=zi(e);let n=Se.from("attendance_sin_credenciales").select("*").in("terminal_code",r).order("date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}const{data:a,error:i}=await n;if(i)throw i;return a||[]},Cue=async(e,t)=>{const{data:r,error:n}=await Se.from("attendance_sin_credenciales").insert({...e,created_by_supervisor:id(t)}).select().single();if(n)throw Pi("Error al crear registro","No se pudo guardar el registro de Sin Credenciales"),n;try{await rx("Sin Credenciales",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.date,createdBy:t,details:{Cabezal:e.cabezal||"",Horario:`${e.start_time||""} - ${e.end_time||""}`,Cargo:e.cargo||"","Supervisor Autoriza":e.supervisor_autoriza||""}}),$i("Registro creado exitosamente",`Sin Credenciales para ${e.nombre} guardado y correo enviado`,t)}catch{$i("Registro creado",`Sin Credenciales para ${e.nombre} guardado (correo no enviado)`,t)}return r},kue=async(e,t)=>{const{data:r,error:n}=await Se.from("attendance_sin_credenciales").update(t).eq("id",e).select().single();if(n)throw n;return r},Oue=async(e,t)=>{if(!rr())return[];const r=zi(e);let n=Se.from("attendance_cambios_dia").select("*").in("terminal_code",r).order("date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}const{data:a,error:i}=await n;if(i)throw i;return a||[]},Pue=async(e,t)=>{let r=null;if(e.document){const u=e.document.name.split(".").pop(),d=`cambios-dia/${Date.now()}.${u}`,{error:f}=await Se.storage.from("attendance-docs").upload(d,e.document);if(f)throw console.error("Storage Upload Error Detail:",f),Pi("Error al subir documento","Verifica que el archivo sea imagen o PDF y menor a 5MB"),new Error(`Error al subir documento: ${f.message}`);r=d}const{document:n,...a}=e,i={...a,document_path:r,created_by_supervisor:id(t)};["day_off_date","day_on_date","prog_start","prog_end","reprogram_start","reprogram_end","day_off_start","day_off_end","day_on_start","day_on_end"].forEach(u=>{i[u]===""&&(i[u]=null)});const{data:l,error:c}=await Se.from("attendance_cambios_dia").insert(i).select().single();if(c)throw Pi("Error al crear registro","No se pudo guardar el registro de Cambio de Da"),c;try{let u="No adjunto";if(r){const{data:d}=Se.storage.from("attendance-docs").getPublicUrl(r);u=`<a href="${d.publicUrl}" target="_blank" style="color: #2563eb; text-decoration: underline; font-weight: 700;">Ver Documento Adjunto</a>`}await rx("Cambios de Da",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.date,createdBy:t,details:{"Jornada Programada":`${e.prog_start||""} - ${e.prog_end||""}`,"Da No Trabaja":e.day_off_date||"","Da Trabaja":e.day_on_date||"",Documento:u}}),$i("Registro creado exitosamente",`Cambio de Da para ${e.nombre} guardado y correo enviado`,t)}catch{$i("Registro creado",`Cambio de Da para ${e.nombre} guardado (correo no enviado)`,t)}return l},Lue=async(e,t)=>{const{document:r,...n}=t,a={...n};["day_off_date","day_on_date","prog_start","prog_end","reprogram_start","reprogram_end","day_off_start","day_off_end","day_on_start","day_on_end"].forEach(c=>{a[c]===""&&(a[c]=null)});const{data:s,error:l}=await Se.from("attendance_cambios_dia").update(a).eq("id",e).select().single();if(l)throw l;return s},Rue=async e=>{const{data:t,error:r}=await Se.storage.from("attendance-docs").createSignedUrl(e,3600);if(r)throw r;return t.signedUrl},Due=async(e,t)=>{if(!rr())return[];const r=zi(e);let n=Se.from("attendance_autorizaciones").select("*").in("terminal_code",r).order("authorization_date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}const{data:a,error:i}=await n;if(i)throw i;return a||[]},Iue=async(e,t)=>{const{data:r,error:n}=await Se.from("attendance_autorizaciones").insert({...e,created_by_supervisor:id(t)}).select().single();if(n)throw Pi("Error al crear registro","No se pudo guardar la autorizacin"),n;try{await rx("Autorizaciones",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.authorization_date,createdBy:t,details:{Tipo:e.entry_or_exit==="ENTRADA"?"Llegada Tarda":"Retiro Anticipado",Horario:e.horario||"",Turno:e.turno||"",Motivo:e.motivo||""}}),$i("Registro creado exitosamente",`Autorizacin para ${e.nombre} guardada y correo enviado`,t)}catch{$i("Registro creado",`Autorizacin para ${e.nombre} guardada (correo no enviado)`,t)}return r},Mue=async(e,t)=>{const{data:r,error:n}=await Se.from("attendance_autorizaciones").update(t).eq("id",e).select().single();if(n)throw n;return r},Fue=async(e,t,r)=>{const{error:n}=await Se.from(e).update({auth_status:"AUTORIZADO",authorized_by:id(r),authorized_at:new Date().toISOString()}).eq("id",t);if(n)throw n},$ue=async(e,t,r,n)=>{const{error:a}=await Se.from(e).update({auth_status:"RECHAZADO",authorized_by:id(r),authorized_at:new Date().toISOString(),rejection_reason:n}).eq("id",t);if(a)throw a},Bue=async(e,t,r="date")=>{if(!rr())return{pendingToday:0,pendingTotal:0,authorizedRange:0,rejectedRange:0};const n=zi(t),a=new Date().toISOString().split("T")[0],{count:i}=await Se.from(e).select("*",{count:"exact",head:!0}).in("terminal_code",n).eq("auth_status","PENDIENTE").eq(r,a),{count:s}=await Se.from(e).select("*",{count:"exact",head:!0}).in("terminal_code",n).eq("auth_status","PENDIENTE"),l=new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],{count:c}=await Se.from(e).select("*",{count:"exact",head:!0}).in("terminal_code",n).eq("auth_status","AUTORIZADO").gte(r,l),{count:u}=await Se.from(e).select("*",{count:"exact",head:!0}).in("terminal_code",n).eq("auth_status","RECHAZADO").gte(r,l);return{pendingToday:i??0,pendingTotal:s??0,authorizedRange:c??0,rejectedRange:u??0}},Uue=(e,t)=>{const r=Se.channel("attendance-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_no_marcaciones"},()=>e("attendance_no_marcaciones")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_no_marcaciones"},()=>t("attendance_no_marcaciones")).on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_sin_credenciales"},()=>e("attendance_sin_credenciales")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_sin_credenciales"},()=>t("attendance_sin_credenciales")).on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_cambios_dia"},()=>e("attendance_cambios_dia")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_cambios_dia"},()=>t("attendance_cambios_dia")).on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_autorizaciones"},()=>e("attendance_autorizaciones")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_autorizaciones"},()=>t("attendance_autorizaciones")).on("postgres_changes",{event:"INSERT",schema:"public",table:"attendance_vacaciones"},()=>e("attendance_vacaciones")).on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendance_vacaciones"},()=>t("attendance_vacaciones")).subscribe();return()=>{Se.removeChannel(r)}},nE=(e,t)=>{const r=new Date(e+"T12:00:00"),n=new Date(t+"T12:00:00");let a=0;const i=new Date(r);for(;i<=n;){const s=i.getDay();s!==0&&s!==6&&a++,i.setDate(i.getDate()+1)}return a},aE=(e,t)=>{const r=new Date(e+"T12:00:00"),n=new Date(t+"T12:00:00"),a=Math.abs(n.getTime()-r.getTime());return Math.ceil(a/(1e3*60*60*24))+1},zue=async(e,t,r)=>{const{count:n,error:a}=await Se.from("staff").select("*",{count:"exact",head:!0}).eq("cargo",e).eq("terminal_code",t).eq("turno",r).eq("status","ACTIVO");if(a)throw a;return n??0},G9=async(e,t,r,n,a,i)=>{let s=Se.from("attendance_vacaciones").select("*").eq("cargo",e).eq("terminal_code",t).eq("turno",r).in("auth_status",["PENDIENTE","AUTORIZADO"]).lte("start_date",a).gte("end_date",n);i&&(s=s.neq("rut",i));const{data:l,error:c}=await s;if(c)throw c;const u=await zue(e,t,r),d=new Set((l==null?void 0:l.map(h=>h.rut))||[]).size,f=u-d-1;let p=0;if(l&&l.length>0){const h=new Date(n),g=new Date(a);for(const m of l){const x=new Date(m.start_date),y=new Date(m.end_date),v=new Date(Math.max(h.getTime(),x.getTime())),b=new Date(Math.min(g.getTime(),y.getTime())),N=Math.ceil((b.getTime()-v.getTime())/(1e3*60*60*24))+1;N>p&&(p=N)}}return{hasConflict:((l==null?void 0:l.length)??0)>0,conflictingVacations:(l||[]).map(h=>({nombre:h.nombre,cargo:h.cargo,turno:h.turno,start_date:h.start_date,end_date:h.end_date})),totalStaffCount:u,availableStaffCount:Math.max(0,f),overlappingDays:p}},que=async(e,t)=>{if(!rr())return[];const r=zi(e);let n=Se.from("attendance_vacaciones").select("*").in("terminal_code",r).order("start_date",{ascending:!1});if(t!=null&&t.auth_status&&t.auth_status!=="todos"&&(n=n.eq("auth_status",t.auth_status)),t!=null&&t.search){const s=`%${t.search}%`;n=n.or(`nombre.ilike.${s},rut.ilike.${s}`)}t!=null&&t.date_from&&(n=n.gte("start_date",t.date_from)),t!=null&&t.date_to&&(n=n.lte("end_date",t.date_to));const{data:a,error:i}=await n;if(i)throw i;return a||[]},Hue=async(e,t)=>{const r=aE(e.start_date,e.end_date),n=nE(e.start_date,e.end_date),a=await G9(e.cargo,e.terminal_code,e.turno,e.start_date,e.end_date),i=a.hasConflict?`${a.conflictingVacations.length} persona(s) en misma posicin en vacaciones. Disponibles: ${a.availableStaffCount}/${a.totalStaffCount}`:null,{data:s,error:l}=await Se.from("attendance_vacaciones").insert({rut:e.rut,nombre:e.nombre,cargo:e.cargo,terminal_code:e.terminal_code,turno:e.turno,start_date:e.start_date,end_date:e.end_date,return_date:e.return_date,calendar_days:r,business_days:n,has_conflict:a.hasConflict,conflict_authorized:e.conflict_authorized,conflict_details:i,created_by_supervisor:id(t)}).select().single();if(l)throw Pi("Error al crear registro","No se pudo guardar la solicitud de vacaciones"),l;try{const c=a.hasConflict?`<strong style="color: #dc2626;">ADVERTENCIA:</strong> ${i}`:"Sin conflictos detectados";await rx("Vacaciones",{rut:e.rut,nombre:e.nombre,terminal:e.terminal_code,date:e.start_date,createdBy:t,details:{"Fecha Inicio":e.start_date,"Fecha Trmino":e.end_date,"Fecha Vuelta":e.return_date,"Das Calendario":r.toString(),"Das a Descontar":n.toString(),Conflictos:c}}),$i("Solicitud de vacaciones creada",`Vacaciones para ${e.nombre} (${n} das hbiles) registradas`,t)}catch{$i("Solicitud creada",`Vacaciones para ${e.nombre} registradas (correo no enviado)`,t)}return s},Wue=async(e,t)=>{const r={...t};t.start_date&&t.end_date&&(r.calendar_days=aE(t.start_date,t.end_date),r.business_days=nE(t.start_date,t.end_date));const{data:n,error:a}=await Se.from("attendance_vacaciones").update(r).eq("id",e).select().single();if(a)throw a;return n},K9="isaac.avila@transdev.cl",Yi={check:`<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="28" cy="28" r="26" fill="#dcfce7" stroke="#22c55e" stroke-width="3"/>
        <path d="M18 28L24 34L38 20" stroke="#16a34a" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,x:`<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="28" cy="28" r="26" fill="#fee2e2" stroke="#ef4444" stroke-width="3"/>
        <path d="M20 20L36 36M36 20L20 36" stroke="#dc2626" stroke-width="4" stroke-linecap="round"/>
    </svg>`,clock:`<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="28" cy="28" r="26" fill="#fef3c7" stroke="#f59e0b" stroke-width="3"/>
        <circle cx="28" cy="28" r="3" fill="#d97706"/>
        <path d="M28 16V28L36 33" stroke="#d97706" stroke-width="3" stroke-linecap="round"/>
    </svg>`,user:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="9" cy="5" r="3.5" stroke="#64748b" stroke-width="1.5"/>
        <path d="M2 16C2 12.686 5.13401 10 9 10C12.866 10 16 12.686 16 16" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,id:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="1.5" y="3.5" width="15" height="11" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <circle cx="6" cy="8" r="1.5" stroke="#64748b" stroke-width="1"/>
        <path d="M4 12C4 10.8954 4.89543 10 6 10C7.10457 10 8 10.8954 8 12" stroke="#64748b" stroke-width="1"/>
        <path d="M10.5 7.5H14.5M10.5 10H13" stroke="#64748b" stroke-width="1.2" stroke-linecap="round"/>
    </svg>`,building:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M2 16V3.5C2 3.22386 2.22386 3 2.5 3H9.5C9.77614 3 10 3.22386 10 3.5V16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M10 7H14.5C14.7761 7 15 7.22386 15 7.5V16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M5 6H7M5 9H7M5 12H7M12 10H13M12 13H13" stroke="#64748b" stroke-width="1.2" stroke-linecap="round"/>
        <path d="M1 16H17" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,calendar:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="2" y="3.5" width="14" height="12" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <path d="M2 7H16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M5.5 1.5V4.5M12.5 1.5V4.5" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`},Y9=e=>new Date(e+"T12:00:00").toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Uo=(e,t,r,n=!1)=>`
    <tr>
        <td style="padding: 12px 16px; border-bottom: 1px solid #e2e8f0; width: 40%; vertical-align: middle;">
            <table role="presentation" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="padding-right: 12px; vertical-align: middle;">${e}</td>
                    <td style="font-size: 11px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">${t}</td>
                </tr>
            </table>
        </td>
        <td style="padding: 12px 16px; border-bottom: 1px solid #e2e8f0; font-size: 14px; font-weight: ${n?"700":"500"}; color: ${n?"#0f172a":"#334155"}; text-align: right;">${r}</td>
    </tr>
`,X9=async(e,t,r,n,a,i,s)=>{const l=e==="AUTORIZADO",c=l?"#16a34a":"#dc2626",u=l?"#f0fdf4":"#fef2f2",d=l?"#bbf7d0":"#fecaca",f=l?Yi.check:Yi.x,p=`${t} ${e} - ${n}`,h=`
        <!-- Status Banner -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
            <tr>
                <td style="background: ${u}; border: 1px solid ${d}; border-radius: 12px; padding: 24px; text-align: center;">
                    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                        <tr>
                            <td align="center" style="padding-bottom: 8px;">
                                ${f}
                            </td>
                        </tr>
                        <tr>
                            <td align="center">
                                <span style="font-size: 11px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 4px;">Estado del Registro</span>
                                <span style="font-size: 20px; font-weight: 800; color: ${c}; letter-spacing: -0.5px;">${e}</span>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
        
        <!-- Data Table -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate;">
            ${Uo(Yi.id,"Subseccin",t,!0)}
            ${Uo(Yi.id,"RUT",Jn(r))}
            ${Uo(Yi.user,"Trabajador",n)}
            ${Uo(Yi.building,"Terminal",fr(a))}
            ${Uo(Yi.calendar,"Fecha",Y9(i))}
            ${s?Uo(Yi.id,"Motivo",s,!0):""}
        </table>
    `.trim(),g=await rE("email_notifications"),m=g!=null&&g.to&&g.to.length>0?g.to:[K9],x=(g==null?void 0:g.cc)||[];try{await oo.sendEmail({audience:"manual",manualRecipients:m,cc:x,subject:p,body:h})}catch(y){console.error("Error sending authorization email:",y)}},rx=async(e,t)=>{const r=t.details?Object.entries(t.details).filter(([c,u])=>u&&u.trim()).map(([c,u])=>Uo(Yi.id,c,u)).join(""):"",n=`Nuevo Registro: ${e}`,a=`
        <!-- Worker Name Header -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
            <tr>
                <td align="center">
                    <h2 style="margin: 0; font-size: 24px; font-weight: 800; color: #0f172a;">${t.nombre}</h2>
                </td>
            </tr>
        </table>
        
        <!-- Status Banner -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
            <tr>
                <td style="background: #fffbeb; border: 1px solid #fde68a; border-radius: 12px; padding: 24px; text-align: center;">
                    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                        <tr>
                            <td align="center" style="padding-bottom: 8px;">
                                ${Yi.clock}
                            </td>
                        </tr>
                        <tr>
                            <td align="center">
                                <span style="font-size: 11px; font-weight: 700; color: #92400e; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 4px;">Estado del Registro</span>
                                <span style="font-size: 18px; font-weight: 800; color: #b45309; letter-spacing: -0.5px;">PENDIENTE DE AUTORIZACIN</span>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
        
        <!-- Subsection Badge -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
            <tr>
                <td align="center">
                    <span style="display: inline-block; padding: 8px 20px; background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 100px; color: #2563eb; font-size: 12px; font-weight: 700; letter-spacing: 0.5px; text-transform: uppercase;">${e}</span>
                </td>
            </tr>
        </table>
        
        <!-- Data Table -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate;">
            ${Uo(Yi.id,"RUT",Jn(t.rut))}
            ${Uo(Yi.user,"Trabajador",t.nombre,!0)}
            ${Uo(Yi.building,"Terminal",fr(t.terminal))}
            ${Uo(Yi.calendar,"Fecha",Y9(t.date))}
            ${r}
        </table>
        
        <!-- Registered By -->
        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-top: 24px;">
            <tr>
                <td style="padding: 16px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px;">
                    <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
                        <tr>
                            <td width="40" style="padding-right: 12px; vertical-align: middle;">
                                <div style="width: 40px; height: 40px; background: #2563eb; border-radius: 50%; text-align: center; line-height: 40px; color: white; font-weight: 700; font-size: 16px;">${t.createdBy.charAt(0)}</div>
                            </td>
                            <td style="vertical-align: middle;">
                                <span style="display: block; font-size: 10px; color: #64748b; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 2px;">Registrado por</span>
                                <span style="display: block; font-size: 14px; font-weight: 700; color: #0f172a;">${t.createdBy}</span>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    `.trim(),i=await rE("email_notifications"),s=i!=null&&i.to&&i.to.length>0?i.to:[K9],l=(i==null?void 0:i.cc)||[];try{await oo.sendEmail({audience:"manual",manualRecipients:s,cc:l,subject:n,body:a})}catch(c){console.error("Error sending record created email:",c)}},nx=[{value:"todos",label:"Todos"},{value:"PENDIENTE",label:"Pendiente"},{value:"AUTORIZADO",label:"Autorizado"},{value:"RECHAZADO",label:"Rechazado"}],J9=[{value:"ENTRADA",label:"Llegada Tarda"},{value:"SALIDA",label:"Retiro Anticipado"}],Q9={"asistencia-2026":"Asistencia 2026","no-marcaciones":"No Marcaciones","sin-credenciales":"Sin Credenciales","cambios-dia":"Cambios de Da",autorizaciones:"Autorizaciones",vacaciones:"Vacaciones"},sn={all:["attendance"],noMarcaciones:(e,t)=>[...sn.all,"no-marcaciones",e,t],sinCredenciales:(e,t)=>[...sn.all,"sin-credenciales",e,t],cambiosDia:(e,t)=>[...sn.all,"cambios-dia",e,t],autorizaciones:(e,t)=>[...sn.all,"autorizaciones",e,t],vacaciones:(e,t)=>[...sn.all,"vacaciones",e,t],kpis:(e,t)=>[...sn.all,"kpis",e,t]},Vue=(e,t)=>Mt({queryKey:sn.noMarcaciones(e,t),queryFn:()=>jue(e,t)}),Gue=(e,t)=>Mt({queryKey:sn.sinCredenciales(e,t),queryFn:()=>Tue(e,t)}),Kue=(e,t)=>Mt({queryKey:sn.cambiosDia(e,t),queryFn:()=>Oue(e,t)}),Yue=(e,t)=>Mt({queryKey:sn.autorizaciones(e,t),queryFn:()=>Due(e,t)}),Xue=(e,t)=>Mt({queryKey:sn.vacaciones(e,t),queryFn:()=>que(e,t)}),iE={"asistencia-2026":"attendance_marks","no-marcaciones":"attendance_no_marcaciones","sin-credenciales":"attendance_sin_credenciales","cambios-dia":"attendance_cambios_dia",autorizaciones:"attendance_autorizaciones",vacaciones:"attendance_vacaciones"},Jue={"asistencia-2026":"mark_date","no-marcaciones":"date","sin-credenciales":"date","cambios-dia":"date",autorizaciones:"authorization_date",vacaciones:"start_date"},ax=(e,t)=>Mt({queryKey:sn.kpis(e,t),queryFn:()=>Bue(iE[e],t,Jue[e])}),Que=()=>{const e=St();return Et({mutationFn:({values:t,createdBy:r})=>Aue(t,r),onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},Zue=()=>{const e=St();return Et({mutationFn:({values:t,createdBy:r})=>Cue(t,r),onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},ede=()=>{const e=St();return Et({mutationFn:({values:t,createdBy:r})=>Pue(t,r),onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},tde=()=>{const e=St();return Et({mutationFn:({values:t,createdBy:r})=>Iue(t,r),onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},rde=()=>{const e=St();return Et({mutationFn:({values:t,createdBy:r})=>Hue(t,r),onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},nde=()=>{const e=St();return Et({mutationFn:({id:t,values:r})=>Eue(t,r),onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},ade=()=>{const e=St();return Et({mutationFn:({id:t,values:r})=>kue(t,r),onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},ide=()=>{const e=St();return Et({mutationFn:({id:t,values:r})=>Lue(t,r),onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},sde=()=>{const e=St();return Et({mutationFn:({id:t,values:r})=>Mue(t,r),onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},ode=()=>{const e=St();return Et({mutationFn:({id:t,values:r})=>Wue(t,r),onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},ix=()=>{const e=St();return Et({mutationFn:async({subsection:t,id:r,authorizedBy:n,rut:a,nombre:i,terminal:s,date:l})=>{await Fue(iE[t],r,n),await X9("AUTORIZADO",Q9[t],a,i,s,l)},onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},sx=()=>{const e=St();return Et({mutationFn:async({subsection:t,id:r,authorizedBy:n,reason:a,rut:i,nombre:s,terminal:l,date:c})=>{await $ue(iE[t],r,n,a),await X9("RECHAZADO",Q9[t],i,s,l,c,a)},onSuccess:()=>e.invalidateQueries({queryKey:sn.all})})},ox=()=>{const e=St();D.useEffect(()=>{const t=Uue(()=>e.invalidateQueries({queryKey:sn.all}),()=>e.invalidateQueries({queryKey:sn.all}));return()=>{t()}},[e])},lde=()=>{const e=Xt(_=>_.context),t=Xt(_=>_.setContext),r=_r(_=>_.session),n=(r==null?void 0:r.supervisorName)??"",a=ex(n),[i,s]=D.useState({auth_status:"todos"}),[l,c]=D.useState({type:"none"}),u=Vue(e,i),d=ax("no-marcaciones",e),f=Que(),p=nde(),h=ix(),g=sx();ox();const m=[{key:"rut",header:"RUT",value:_=>Jn(_.rut)},{key:"nombre",header:"Nombre",value:_=>_.nombre},{key:"area",header:"rea",value:_=>_.area},{key:"cargo",header:"Cargo",value:_=>_.cargo},{key:"jefe_terminal",header:"Jefe Terminal",value:_=>_.jefe_terminal},{key:"terminal",header:"Terminal",value:_=>fr(_.terminal_code)},{key:"cabezal",header:"Cabezal",value:_=>_.cabezal},{key:"incident_state",header:"Estado",value:_=>_.incident_state},{key:"date",header:"Fecha",value:_=>_.date},{key:"auth_status",header:"Autorizacin",value:_=>_.auth_status}],x=async _=>{await f.mutateAsync({values:_,createdBy:n}),c({type:"none"})},y=async _=>{l.type==="edit"&&(await p.mutateAsync({id:l.record.id,values:_}),c({type:"none"}))},v=async()=>{if(l.type!=="authorize")return;const _=l.record;await h.mutateAsync({subsection:"no-marcaciones",id:_.id,authorizedBy:n,rut:_.rut,nombre:_.nombre,terminal:_.terminal_code,date:_.date}),c({type:"none"})},b=async _=>{if(l.type!=="reject"||!_)return;const E=l.record;await g.mutateAsync({subsection:"no-marcaciones",id:E.id,authorizedBy:n,reason:_,rut:E.rut,nombre:E.nombre,terminal:E.terminal_code,date:E.date}),c({type:"none"})},N=_=>{switch(_){case"AUTORIZADO":return o.jsx("span",{className:"badge badge-success",children:_});case"RECHAZADO":return o.jsx("span",{className:"badge badge-danger",children:_});default:return o.jsx("span",{className:"badge badge-warning",children:_})}};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(bn,{title:"No Marcaciones",description:"Registros de no marcacin de personal",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[o.jsx(Z,{name:"clipboard",size:18})," Nuevo Registro"]}),o.jsx(Ma,{onExportView:()=>Er({filename:"no_marcaciones",sheetName:"Datos",rows:u.data||[],columns:m}),onExportAll:()=>Er({filename:"no_marcaciones_all",sheetName:"Datos",rows:u.data||[],columns:m})})]})}),o.jsx(tx,{data:d.data,isLoading:d.isLoading}),o.jsxs(Fs,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:i.auth_status,onChange:_=>s(E=>({...E,auth_status:_.target.value})),children:nx.map(_=>o.jsx("option",{value:_.value,children:_.label},_.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:_=>s(E=>({...E,search:_.target.value}))})]})]}),u.isLoading&&o.jsx(Bn,{label:"Cargando registros..."}),u.isError&&o.jsx(ri,{onRetry:()=>u.refetch()}),!u.isLoading&&!u.isError&&o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{className:"table-header-cell",children:"RUT"}),o.jsx("th",{className:"table-header-cell",children:"Nombre"}),o.jsx("th",{className:"table-header-cell",children:"Terminal"}),o.jsx("th",{className:"table-header-cell",children:"Fecha"}),o.jsx("th",{className:"table-header-cell",children:"Estado"}),o.jsx("th",{className:"table-header-cell",children:"Autorizacin"}),o.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:(u.data||[]).map(_=>o.jsxs("tr",{className:"table-row",children:[o.jsx("td",{className:"table-cell font-mono text-sm",children:Jn(_.rut)}),o.jsx("td",{className:"table-cell font-medium",children:_.nombre}),o.jsx("td",{className:"table-cell",children:fr(_.terminal_code)}),o.jsx("td",{className:"table-cell",children:_.date}),o.jsx("td",{className:"table-cell",children:_.incident_state||"-"}),o.jsx("td",{className:"table-cell",children:N(_.auth_status)}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[_.auth_status==="PENDIENTE"&&o.jsx("button",{onClick:()=>c({type:"edit",record:_}),className:"btn btn-ghost btn-icon",title:"Editar",children:o.jsx(Z,{name:"clipboard",size:16})}),a&&_.auth_status==="PENDIENTE"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>c({type:"authorize",record:_}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:o.jsx(Z,{name:"check-circle",size:16})}),o.jsx("button",{onClick:()=>c({type:"reject",record:_}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:o.jsx(Z,{name:"x",size:16})})]})]})})]},_.id))})]})}),(l.type==="create"||l.type==="edit")&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),o.jsxs("div",{className:"relative w-full max-w-3xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-xl font-bold",children:l.type==="create"?"Nuevo Registro":"Editar Registro"}),o.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:o.jsx(Z,{name:"x",size:24})})]}),o.jsx(Nue,{initialData:l.type==="edit"?{...l.record,area:l.record.area??"Logstica",cargo:l.record.cargo??"",jefe_terminal:l.record.jefe_terminal??"",cabezal:l.record.cabezal??"",incident_state:l.record.incident_state??"",schedule_in_out:l.record.schedule_in_out??"",time_range:l.record.time_range??"",observations:l.record.observations??"",informed_by:l.record.informed_by??n}:void 0,supervisorName:n,onSubmit:l.type==="create"?x:y,onCancel:()=>c({type:"none"}),isLoading:f.isPending||p.isPending})]})]}),l.type==="authorize"&&o.jsx(El,{mode:"authorize",itemName:l.record.nombre,onConfirm:v,onCancel:()=>c({type:"none"}),isLoading:h.isPending}),l.type==="reject"&&o.jsx(El,{mode:"reject",itemName:l.record.nombre,onConfirm:b,onCancel:()=>c({type:"none"}),isLoading:g.isPending})]})},cde=({initialData:e,supervisorName:t,onSubmit:r,onCancel:n,isLoading:a})=>{const[i,s]=D.useState({rut:"",nombre:"",terminal_code:"EL_ROBLE",cabezal:"",date:new Date().toISOString().split("T")[0],start_time:"",end_time:"",cargo:"",supervisor_autoriza:t,area:"Logstica",responsable:"",observacion:"",...e}),l=u=>{if(u){const[d,f]=(u.horario||"").split("-"),p=(d==null?void 0:d.trim())||"",h=(f==null?void 0:f.trim())||"";s(g=>({...g,nombre:u.nombre,cargo:u.cargo,terminal_code:u.terminal_code,start_time:p,end_time:h}))}},c=u=>{u.preventDefault(),r(i)};return o.jsxs("form",{onSubmit:c,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(ww,{value:i.rut,onChange:u=>s(d=>({...d,rut:u})),onStaffFound:l,disabled:!!(e!=null&&e.rut)}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nombre"}),o.jsx("input",{type:"text",className:"input",value:i.nombre,onChange:u=>s(d=>({...d,nombre:u.target.value})),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsx("select",{className:"input",value:i.terminal_code,onChange:u=>s(d=>({...d,terminal_code:u.target.value})),required:!0,children:ns.map(u=>o.jsx("option",{value:u.value,children:u.label},u.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cabezal"}),o.jsx("input",{type:"text",className:"input",value:i.cabezal,onChange:u=>s(d=>({...d,cabezal:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha"}),o.jsx("input",{type:"date",className:"input",value:i.date,onChange:u=>s(d=>({...d,date:u.target.value})),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Hora Inicio"}),o.jsx("input",{type:"time",className:"input",value:i.start_time,onChange:u=>s(d=>({...d,start_time:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Hora Fin"}),o.jsx("input",{type:"time",className:"input",value:i.end_time,onChange:u=>s(d=>({...d,end_time:u.target.value}))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cargo"}),o.jsx("input",{type:"text",className:"input",value:i.cargo,onChange:u=>s(d=>({...d,cargo:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Supervisor Autoriza"}),o.jsx("input",{type:"text",className:"input",value:i.supervisor_autoriza,onChange:u=>s(d=>({...d,supervisor_autoriza:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"rea"}),o.jsx("input",{type:"text",className:"input",value:i.area,onChange:u=>s(d=>({...d,area:u.target.value}))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Responsable"}),o.jsx("input",{type:"text",className:"input",value:i.responsable,onChange:u=>s(d=>({...d,responsable:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Observacin"}),o.jsx("textarea",{className:"input min-h-[80px]",value:i.observacion,onChange:u=>s(d=>({...d,observacion:u.target.value}))})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[o.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",disabled:a,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?"Guardando...":e?"Guardar Cambios":"Crear Registro"})]})]})},ude=()=>{const e=Xt(_=>_.context),t=Xt(_=>_.setContext),r=_r(_=>_.session),n=(r==null?void 0:r.supervisorName)??"",a=ex(n),[i,s]=D.useState({auth_status:"todos"}),[l,c]=D.useState({type:"none"}),u=Gue(e,i),d=ax("sin-credenciales",e),f=Zue(),p=ade(),h=ix(),g=sx();ox();const m=[{key:"rut",header:"RUT",value:_=>Jn(_.rut)},{key:"nombre",header:"Nombre",value:_=>_.nombre},{key:"terminal",header:"Terminal",value:_=>fr(_.terminal_code)},{key:"cabezal",header:"Cabezal",value:_=>_.cabezal},{key:"date",header:"Fecha",value:_=>_.date},{key:"start_time",header:"Hora Inicio",value:_=>_.start_time},{key:"end_time",header:"Hora Fin",value:_=>_.end_time},{key:"cargo",header:"Cargo",value:_=>_.cargo},{key:"supervisor_autoriza",header:"Supervisor Autoriza",value:_=>_.supervisor_autoriza},{key:"auth_status",header:"Autorizacin",value:_=>_.auth_status}],x=async _=>{await f.mutateAsync({values:_,createdBy:n}),c({type:"none"})},y=async _=>{l.type==="edit"&&(await p.mutateAsync({id:l.record.id,values:_}),c({type:"none"}))},v=async()=>{if(l.type!=="authorize")return;const _=l.record;await h.mutateAsync({subsection:"sin-credenciales",id:_.id,authorizedBy:n,rut:_.rut,nombre:_.nombre,terminal:_.terminal_code,date:_.date}),c({type:"none"})},b=async _=>{if(l.type!=="reject"||!_)return;const E=l.record;await g.mutateAsync({subsection:"sin-credenciales",id:E.id,authorizedBy:n,reason:_,rut:E.rut,nombre:E.nombre,terminal:E.terminal_code,date:E.date}),c({type:"none"})},N=_=>{switch(_){case"AUTORIZADO":return o.jsx("span",{className:"badge badge-success",children:_});case"RECHAZADO":return o.jsx("span",{className:"badge badge-danger",children:_});default:return o.jsx("span",{className:"badge badge-warning",children:_})}};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(bn,{title:"Sin Credenciales",description:"Registros de personal sin credencial",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[o.jsx(Z,{name:"key",size:18})," Nuevo Registro"]}),o.jsx(Ma,{onExportView:()=>Er({filename:"sin_credenciales",sheetName:"Datos",rows:u.data||[],columns:m}),onExportAll:()=>Er({filename:"sin_credenciales_all",sheetName:"Datos",rows:u.data||[],columns:m})})]})}),o.jsx(tx,{data:d.data,isLoading:d.isLoading}),o.jsxs(Fs,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:i.auth_status,onChange:_=>s(E=>({...E,auth_status:_.target.value})),children:nx.map(_=>o.jsx("option",{value:_.value,children:_.label},_.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:_=>s(E=>({...E,search:_.target.value}))})]})]}),u.isLoading&&o.jsx(Bn,{label:"Cargando registros..."}),u.isError&&o.jsx(ri,{onRetry:()=>u.refetch()}),!u.isLoading&&!u.isError&&o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{className:"table-header-cell",children:"RUT"}),o.jsx("th",{className:"table-header-cell",children:"Nombre"}),o.jsx("th",{className:"table-header-cell",children:"Terminal"}),o.jsx("th",{className:"table-header-cell",children:"Cabezal"}),o.jsx("th",{className:"table-header-cell",children:"Fecha"}),o.jsx("th",{className:"table-header-cell",children:"Hora"}),o.jsx("th",{className:"table-header-cell",children:"Autorizacin"}),o.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:(u.data||[]).map(_=>o.jsxs("tr",{className:"table-row",children:[o.jsx("td",{className:"table-cell font-mono text-sm",children:Jn(_.rut)}),o.jsx("td",{className:"table-cell font-medium",children:_.nombre}),o.jsx("td",{className:"table-cell",children:fr(_.terminal_code)}),o.jsx("td",{className:"table-cell",children:_.cabezal||"-"}),o.jsx("td",{className:"table-cell",children:_.date}),o.jsxs("td",{className:"table-cell",children:[_.start_time," - ",_.end_time]}),o.jsx("td",{className:"table-cell",children:N(_.auth_status)}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[_.auth_status==="PENDIENTE"&&o.jsx("button",{onClick:()=>c({type:"edit",record:_}),className:"btn btn-ghost btn-icon",title:"Editar",children:o.jsx(Z,{name:"clipboard",size:16})}),a&&_.auth_status==="PENDIENTE"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>c({type:"authorize",record:_}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:o.jsx(Z,{name:"check-circle",size:16})}),o.jsx("button",{onClick:()=>c({type:"reject",record:_}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:o.jsx(Z,{name:"x",size:16})})]})]})})]},_.id))})]})}),(l.type==="create"||l.type==="edit")&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),o.jsxs("div",{className:"relative w-full max-w-3xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-xl font-bold",children:l.type==="create"?"Nuevo Registro":"Editar Registro"}),o.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:o.jsx(Z,{name:"x",size:24})})]}),o.jsx(cde,{initialData:l.type==="edit"?{...l.record,cabezal:l.record.cabezal??"",start_time:l.record.start_time??"",end_time:l.record.end_time??"",cargo:l.record.cargo??"",supervisor_autoriza:l.record.supervisor_autoriza??"",area:l.record.area??"",responsable:l.record.responsable??"",observacion:l.record.observacion??""}:void 0,supervisorName:n,onSubmit:l.type==="create"?x:y,onCancel:()=>c({type:"none"}),isLoading:f.isPending||p.isPending})]})]}),l.type==="authorize"&&o.jsx(El,{mode:"authorize",itemName:l.record.nombre,onConfirm:v,onCancel:()=>c({type:"none"}),isLoading:h.isPending}),l.type==="reject"&&o.jsx(El,{mode:"reject",itemName:l.record.nombre,onConfirm:b,onCancel:()=>c({type:"none"}),isLoading:g.isPending})]})},dde=({initialData:e,onSubmit:t,onCancel:r,isLoading:n})=>{const a=D.useRef(null),[i,s]=D.useState({rut:"",nombre:"",terminal_code:"EL_ROBLE",cabezal:"",date:new Date().toISOString().split("T")[0],prog_start:"",prog_end:"",reprogram_start:"",reprogram_end:"",day_off_date:"",day_off_start:"",day_off_end:"",day_on_date:"",day_on_start:"",day_on_end:"",document:null,...e}),l=u=>{if(u){const[d,f]=(u.horario||"").split("-"),p=(d==null?void 0:d.trim())||"",h=(f==null?void 0:f.trim())||"";s(g=>({...g,nombre:u.nombre,terminal_code:u.terminal_code,prog_start:p,prog_end:h,day_off_start:p,day_off_end:h,day_on_start:p,day_on_end:h}))}},c=u=>{u.preventDefault(),t(i)};return o.jsxs("form",{onSubmit:c,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(ww,{value:i.rut,onChange:u=>s(d=>({...d,rut:u})),onStaffFound:l,disabled:!!(e!=null&&e.rut)}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nombre"}),o.jsx("input",{type:"text",className:"input",value:i.nombre,onChange:u=>s(d=>({...d,nombre:u.target.value})),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsx("select",{className:"input",value:i.terminal_code,onChange:u=>s(d=>({...d,terminal_code:u.target.value})),required:!0,children:ns.map(u=>o.jsx("option",{value:u.value,children:u.label},u.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cabezal"}),o.jsx("input",{type:"text",className:"input",value:i.cabezal,onChange:u=>s(d=>({...d,cabezal:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha Registro"}),o.jsx("input",{type:"date",className:"input",value:i.date,onChange:u=>s(d=>({...d,date:u.target.value})),required:!0})]})]}),o.jsxs("div",{className:"card p-4 bg-brand-50 border-brand-200",children:[o.jsx("h4",{className:"font-semibold text-brand-800 mb-3",children:"Jornada Programada (desde Personal)"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Entrada"}),o.jsx("input",{type:"text",className:"input bg-brand-100 font-medium",value:i.prog_start,onChange:u=>s(d=>({...d,prog_start:u.target.value})),placeholder:"--:--",readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Salida"}),o.jsx("input",{type:"text",className:"input bg-brand-100 font-medium",value:i.prog_end,onChange:u=>s(d=>({...d,prog_end:u.target.value})),placeholder:"--:--",readOnly:!0})]})]})]}),o.jsxs("div",{className:"card p-4 bg-slate-50",children:[o.jsx("h4",{className:"font-semibold text-slate-700 mb-3",children:"Da Programado (No Trabaja)"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha"}),o.jsx("input",{type:"date",className:"input",value:i.day_off_date,onChange:u=>s(d=>({...d,day_off_date:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Inicio"}),o.jsx("input",{type:"text",className:"input font-medium",value:i.day_off_start,onChange:u=>s(d=>({...d,day_off_start:u.target.value})),placeholder:"--:--"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Trmino"}),o.jsx("input",{type:"text",className:"input font-medium",value:i.day_off_end,onChange:u=>s(d=>({...d,day_off_end:u.target.value})),placeholder:"--:--"})]})]})]}),o.jsxs("div",{className:"card p-4 bg-success-50 border-success-200",children:[o.jsx("h4",{className:"font-semibold text-success-800 mb-3",children:"Da ReProgramado (Trabaja)"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha"}),o.jsx("input",{type:"date",className:"input",value:i.day_on_date,onChange:u=>s(d=>({...d,day_on_date:u.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Inicio"}),o.jsx("input",{type:"text",className:"input font-medium",value:i.day_on_start,onChange:u=>s(d=>({...d,day_on_start:u.target.value})),placeholder:"--:--"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Trmino"}),o.jsx("input",{type:"text",className:"input font-medium",value:i.day_on_end,onChange:u=>s(d=>({...d,day_on_end:u.target.value})),placeholder:"--:--"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Documento Adjunto (opcional)"}),o.jsxs("div",{className:"border-2 border-dashed rounded-xl p-4 text-center",children:[o.jsx("input",{ref:a,type:"file",accept:".pdf,.jpg,.jpeg,.png",className:"hidden",onChange:u=>s(d=>{var f;return{...d,document:((f=u.target.files)==null?void 0:f[0])||null}})}),i.document?o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsx(Z,{name:"check-circle",size:20,className:"text-success-600"}),o.jsx("span",{className:"text-sm",children:i.document.name}),o.jsx("button",{type:"button",onClick:()=>{s(u=>({...u,document:null})),a.current&&(a.current.value="")},className:"text-danger-600",children:o.jsx(Z,{name:"x",size:18})})]}):o.jsxs("button",{type:"button",onClick:()=>{var u;return(u=a.current)==null?void 0:u.click()},className:"btn btn-secondary",children:[o.jsx(Z,{name:"image",size:18})," Seleccionar Archivo"]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Guardando...":e?"Guardar Cambios":"Crear Registro"})]})]})},fde=()=>{const e=Xt(E=>E.context),t=Xt(E=>E.setContext),r=_r(E=>E.session),n=(r==null?void 0:r.supervisorName)??"",a=ex(n),[i,s]=D.useState({auth_status:"todos"}),[l,c]=D.useState({type:"none"}),u=Kue(e,i),d=ax("cambios-dia",e),f=ede(),p=ide(),h=ix(),g=sx();ox();const m=[{key:"rut",header:"RUT",value:E=>Jn(E.rut)},{key:"nombre",header:"Nombre",value:E=>E.nombre},{key:"terminal",header:"Terminal",value:E=>fr(E.terminal_code)},{key:"cabezal",header:"Cabezal",value:E=>E.cabezal},{key:"date",header:"Fecha",value:E=>E.date},{key:"prog_start",header:"Prog. Inicio",value:E=>E.prog_start},{key:"prog_end",header:"Prog. Fin",value:E=>E.prog_end},{key:"reprogram_start",header:"Reprog. Inicio",value:E=>E.reprogram_start},{key:"reprogram_end",header:"Reprog. Fin",value:E=>E.reprogram_end},{key:"auth_status",header:"Autorizacin",value:E=>E.auth_status}],x=async E=>{await f.mutateAsync({values:E,createdBy:n}),c({type:"none"})},y=async E=>{l.type==="edit"&&(await p.mutateAsync({id:l.record.id,values:E}),c({type:"none"}))},v=async()=>{if(l.type!=="authorize")return;const E=l.record;await h.mutateAsync({subsection:"cambios-dia",id:E.id,authorizedBy:n,rut:E.rut,nombre:E.nombre,terminal:E.terminal_code,date:E.date}),c({type:"none"})},b=async E=>{if(l.type!=="reject"||!E)return;const j=l.record;await g.mutateAsync({subsection:"cambios-dia",id:j.id,authorizedBy:n,reason:E,rut:j.rut,nombre:j.nombre,terminal:j.terminal_code,date:j.date}),c({type:"none"})},N=async E=>{try{const j=await Rue(E);window.open(j,"_blank")}catch(j){console.error("Error getting document URL:",j)}},_=E=>{switch(E){case"AUTORIZADO":return o.jsx("span",{className:"badge badge-success",children:E});case"RECHAZADO":return o.jsx("span",{className:"badge badge-danger",children:E});default:return o.jsx("span",{className:"badge badge-warning",children:E})}};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(bn,{title:"Cambios de Da",description:"Reprogramaciones de jornada laboral",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[o.jsx(Z,{name:"calendar",size:18})," Nuevo Registro"]}),o.jsx(Ma,{onExportView:()=>Er({filename:"cambios_dia",sheetName:"Datos",rows:u.data||[],columns:m}),onExportAll:()=>Er({filename:"cambios_dia_all",sheetName:"Datos",rows:u.data||[],columns:m})})]})}),o.jsx(tx,{data:d.data,isLoading:d.isLoading}),o.jsxs(Fs,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:i.auth_status,onChange:E=>s(j=>({...j,auth_status:E.target.value})),children:nx.map(E=>o.jsx("option",{value:E.value,children:E.label},E.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:E=>s(j=>({...j,search:E.target.value}))})]})]}),u.isLoading&&o.jsx(Bn,{label:"Cargando registros..."}),u.isError&&o.jsx(ri,{onRetry:()=>u.refetch()}),!u.isLoading&&!u.isError&&o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{className:"table-header-cell",children:"RUT"}),o.jsx("th",{className:"table-header-cell",children:"Nombre"}),o.jsx("th",{className:"table-header-cell",children:"Terminal"}),o.jsx("th",{className:"table-header-cell",children:"Fecha"}),o.jsx("th",{className:"table-header-cell",children:"Jornada Prog."}),o.jsx("th",{className:"table-header-cell",children:"Jornada Reprog."}),o.jsx("th",{className:"table-header-cell",children:"Doc"}),o.jsx("th",{className:"table-header-cell",children:"Autorizacin"}),o.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:(u.data||[]).map(E=>o.jsxs("tr",{className:"table-row",children:[o.jsx("td",{className:"table-cell font-mono text-sm",children:Jn(E.rut)}),o.jsx("td",{className:"table-cell font-medium",children:E.nombre}),o.jsx("td",{className:"table-cell",children:fr(E.terminal_code)}),o.jsx("td",{className:"table-cell",children:E.date}),o.jsxs("td",{className:"table-cell text-xs",children:[E.prog_start," - ",E.prog_end]}),o.jsxs("td",{className:"table-cell text-xs",children:[E.reprogram_start," - ",E.reprogram_end]}),o.jsx("td",{className:"table-cell",children:E.document_path?o.jsx("button",{onClick:()=>N(E.document_path),className:"text-brand-600 hover:underline",children:o.jsx(Z,{name:"image",size:16})}):"-"}),o.jsx("td",{className:"table-cell",children:_(E.auth_status)}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[E.auth_status==="PENDIENTE"&&o.jsx("button",{onClick:()=>c({type:"edit",record:E}),className:"btn btn-ghost btn-icon",title:"Editar",children:o.jsx(Z,{name:"clipboard",size:16})}),a&&E.auth_status==="PENDIENTE"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>c({type:"authorize",record:E}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:o.jsx(Z,{name:"check-circle",size:16})}),o.jsx("button",{onClick:()=>c({type:"reject",record:E}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:o.jsx(Z,{name:"x",size:16})})]})]})})]},E.id))})]})}),(l.type==="create"||l.type==="edit")&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),o.jsxs("div",{className:"relative w-full max-w-4xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-xl font-bold",children:l.type==="create"?"Nuevo Registro":"Editar Registro"}),o.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:o.jsx(Z,{name:"x",size:24})})]}),o.jsx(dde,{initialData:l.type==="edit"?{...l.record,cabezal:l.record.cabezal??"",prog_start:l.record.prog_start??"",prog_end:l.record.prog_end??"",reprogram_start:l.record.reprogram_start??"",reprogram_end:l.record.reprogram_end??"",day_off_date:l.record.day_off_date??"",day_off_start:l.record.day_off_start??"",day_off_end:l.record.day_off_end??"",day_on_date:l.record.day_on_date??"",day_on_start:l.record.day_on_start??"",day_on_end:l.record.day_on_end??"",document:null}:void 0,onSubmit:l.type==="create"?x:y,onCancel:()=>c({type:"none"}),isLoading:f.isPending||p.isPending})]})]}),l.type==="authorize"&&o.jsx(El,{mode:"authorize",itemName:l.record.nombre,onConfirm:v,onCancel:()=>c({type:"none"}),isLoading:h.isPending}),l.type==="reject"&&o.jsx(El,{mode:"reject",itemName:l.record.nombre,onConfirm:b,onCancel:()=>c({type:"none"}),isLoading:g.isPending})]})},hde=({initialData:e,onSubmit:t,onCancel:r,isLoading:n})=>{const[a,i]=D.useState({rut:"",nombre:"",cargo:"",terminal_code:"EL_ROBLE",turno:"",horario:"",authorization_date:new Date().toISOString().split("T")[0],entry_or_exit:"ENTRADA",motivo:"",...e}),s=c=>{c&&i(u=>({...u,nombre:c.nombre,cargo:c.cargo,terminal_code:c.terminal_code,turno:c.turno,horario:c.horario}))},l=c=>{c.preventDefault(),t(a)};return o.jsxs("form",{onSubmit:l,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(ww,{value:a.rut,onChange:c=>i(u=>({...u,rut:c})),onStaffFound:s,disabled:!!(e!=null&&e.rut)}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nombre"}),o.jsx("input",{type:"text",className:"input",value:a.nombre,onChange:c=>i(u=>({...u,nombre:c.target.value})),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cargo"}),o.jsx("input",{type:"text",className:"input",value:a.cargo,onChange:c=>i(u=>({...u,cargo:c.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Terminal"}),o.jsx("select",{className:"input",value:a.terminal_code,onChange:c=>i(u=>({...u,terminal_code:c.target.value})),required:!0,children:ns.map(c=>o.jsx("option",{value:c.value,children:c.label},c.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Turno"}),o.jsx("input",{type:"text",className:"input",value:a.turno,onChange:c=>i(u=>({...u,turno:c.target.value}))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Horario"}),o.jsx("input",{type:"text",className:"input",value:a.horario,onChange:c=>i(u=>({...u,horario:c.target.value})),placeholder:"08:00-18:00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha de Autorizacin"}),o.jsx("input",{type:"date",className:"input",value:a.authorization_date,onChange:c=>i(u=>({...u,authorization_date:c.target.value})),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Tipo"}),o.jsx("select",{className:"input",value:a.entry_or_exit,onChange:c=>i(u=>({...u,entry_or_exit:c.target.value})),required:!0,children:J9.map(c=>o.jsx("option",{value:c.value,children:c.label},c.value))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Motivo"}),o.jsx("textarea",{className:"input min-h-[80px]",value:a.motivo,onChange:c=>i(u=>({...u,motivo:c.target.value})),placeholder:"Describe el motivo de la autorizacin...",required:!0})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Guardando...":e?"Guardar Cambios":"Crear Registro"})]})]})},pde=()=>{const e=Xt(j=>j.context),t=Xt(j=>j.setContext),r=_r(j=>j.session),n=(r==null?void 0:r.supervisorName)??"",a=ex(n),[i,s]=D.useState({auth_status:"todos"}),[l,c]=D.useState({type:"none"}),u=Yue(e,i),d=ax("autorizaciones",e),f=tde(),p=sde(),h=ix(),g=sx();ox();const m=j=>{var A;return((A=J9.find(T=>T.value===j))==null?void 0:A.label)||j},x=[{key:"rut",header:"RUT",value:j=>Jn(j.rut)},{key:"nombre",header:"Nombre",value:j=>j.nombre},{key:"cargo",header:"Cargo",value:j=>j.cargo},{key:"terminal",header:"Terminal",value:j=>fr(j.terminal_code)},{key:"turno",header:"Turno",value:j=>j.turno},{key:"horario",header:"Horario",value:j=>j.horario},{key:"authorization_date",header:"Fecha",value:j=>j.authorization_date},{key:"entry_or_exit",header:"Tipo",value:j=>m(j.entry_or_exit)},{key:"motivo",header:"Motivo",value:j=>j.motivo},{key:"auth_status",header:"Autorizacin",value:j=>j.auth_status}],y=async j=>{await f.mutateAsync({values:j,createdBy:n}),c({type:"none"})},v=async j=>{l.type==="edit"&&(await p.mutateAsync({id:l.record.id,values:j}),c({type:"none"}))},b=async()=>{if(l.type!=="authorize")return;const j=l.record;await h.mutateAsync({subsection:"autorizaciones",id:j.id,authorizedBy:n,rut:j.rut,nombre:j.nombre,terminal:j.terminal_code,date:j.authorization_date}),c({type:"none"})},N=async j=>{if(l.type!=="reject"||!j)return;const A=l.record;await g.mutateAsync({subsection:"autorizaciones",id:A.id,authorizedBy:n,reason:j,rut:A.rut,nombre:A.nombre,terminal:A.terminal_code,date:A.authorization_date}),c({type:"none"})},_=j=>{switch(j){case"AUTORIZADO":return o.jsx("span",{className:"badge badge-success",children:j});case"RECHAZADO":return o.jsx("span",{className:"badge badge-danger",children:j});default:return o.jsx("span",{className:"badge badge-warning",children:j})}},E=j=>j==="ENTRADA"?o.jsx("span",{className:"badge bg-blue-100 text-blue-700",children:"Llegada Tarda"}):o.jsx("span",{className:"badge bg-purple-100 text-purple-700",children:"Retiro Anticipado"});return o.jsxs("div",{className:"space-y-4",children:[o.jsx(bn,{title:"Autorizaciones",description:"Retiros anticipados y llegadas tardas",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[o.jsx(Z,{name:"check-circle",size:18})," Nueva Solicitud"]}),o.jsx(Ma,{onExportView:()=>Er({filename:"autorizaciones",sheetName:"Datos",rows:u.data||[],columns:x}),onExportAll:()=>Er({filename:"autorizaciones_all",sheetName:"Datos",rows:u.data||[],columns:x})})]})}),o.jsx(tx,{data:d.data,isLoading:d.isLoading}),o.jsxs(Fs,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:i.auth_status,onChange:j=>s(A=>({...A,auth_status:j.target.value})),children:nx.map(j=>o.jsx("option",{value:j.value,children:j.label},j.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:j=>s(A=>({...A,search:j.target.value}))})]})]}),u.isLoading&&o.jsx(Bn,{label:"Cargando registros..."}),u.isError&&o.jsx(ri,{onRetry:()=>u.refetch()}),!u.isLoading&&!u.isError&&o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{className:"table-header-cell",children:"RUT"}),o.jsx("th",{className:"table-header-cell",children:"Nombre"}),o.jsx("th",{className:"table-header-cell",children:"Terminal"}),o.jsx("th",{className:"table-header-cell",children:"Fecha"}),o.jsx("th",{className:"table-header-cell",children:"Tipo"}),o.jsx("th",{className:"table-header-cell",children:"Motivo"}),o.jsx("th",{className:"table-header-cell",children:"Autorizacin"}),o.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:(u.data||[]).map(j=>o.jsxs("tr",{className:"table-row",children:[o.jsx("td",{className:"table-cell font-mono text-sm",children:Jn(j.rut)}),o.jsx("td",{className:"table-cell font-medium",children:j.nombre}),o.jsx("td",{className:"table-cell",children:fr(j.terminal_code)}),o.jsx("td",{className:"table-cell",children:j.authorization_date}),o.jsx("td",{className:"table-cell",children:E(j.entry_or_exit)}),o.jsx("td",{className:"table-cell max-w-[200px] truncate",title:j.motivo,children:j.motivo}),o.jsx("td",{className:"table-cell",children:_(j.auth_status)}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[j.auth_status==="PENDIENTE"&&o.jsx("button",{onClick:()=>c({type:"edit",record:j}),className:"btn btn-ghost btn-icon",title:"Editar",children:o.jsx(Z,{name:"clipboard",size:16})}),a&&j.auth_status==="PENDIENTE"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>c({type:"authorize",record:j}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:o.jsx(Z,{name:"check-circle",size:16})}),o.jsx("button",{onClick:()=>c({type:"reject",record:j}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:o.jsx(Z,{name:"x",size:16})})]})]})})]},j.id))})]})}),(l.type==="create"||l.type==="edit")&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),o.jsxs("div",{className:"relative w-full max-w-3xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-xl font-bold",children:l.type==="create"?"Nueva Solicitud":"Editar Solicitud"}),o.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:o.jsx(Z,{name:"x",size:24})})]}),o.jsx(hde,{initialData:l.type==="edit"?{...l.record,cargo:l.record.cargo??"",turno:l.record.turno??"",horario:l.record.horario??""}:void 0,onSubmit:l.type==="create"?y:v,onCancel:()=>c({type:"none"}),isLoading:f.isPending||p.isPending})]})]}),l.type==="authorize"&&o.jsx(El,{mode:"authorize",itemName:l.record.nombre,onConfirm:b,onCancel:()=>c({type:"none"}),isLoading:h.isPending}),l.type==="reject"&&o.jsx(El,{mode:"reject",itemName:l.record.nombre,onConfirm:N,onCancel:()=>c({type:"none"}),isLoading:g.isPending})]})},W5=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],mde=["Lun","Mar","Mi","Jue","Vie","Sb","Dom"],gde=({isOpen:e,onClose:t,vacaciones:r})=>{const n=new Date,[a,i]=D.useState(n.getFullYear()),[s,l]=D.useState(n.getMonth()),[c,u]=D.useState(null),[d,f]=D.useState("todos"),[p,h]=D.useState("todos"),g=D.useMemo(()=>{const A=new Set;return r.forEach(T=>A.add(T.cargo)),Array.from(A).sort()},[r]),m=D.useMemo(()=>r.filter(A=>!(d!=="todos"&&A.terminal_code!==d||p!=="todos"&&A.cargo!==p)),[r,d,p]),x=D.useMemo(()=>{const A=new Date(a,s,1),P=new Date(a,s+1,0).getDate();let O=A.getDay()-1;O<0&&(O=6);const R=[];for(let I=0;I<O;I++)R.push(null);for(let I=1;I<=P;I++)R.push(I);return R},[a,s]),y=A=>{const T=`${a}-${String(s+1).padStart(2,"0")}-${String(A).padStart(2,"0")}`;return m.filter(P=>T>=P.start_date&&T<=P.end_date)},v=c?y(c):[],b=()=>{s===0?(l(11),i(a-1)):l(s-1),u(null)},N=()=>{s===11?(l(0),i(a+1)):l(s+1),u(null)},_=()=>{i(n.getFullYear()),l(n.getMonth()),u(n.getDate())};if(!e)return null;const E=A=>A===n.getDate()&&s===n.getMonth()&&a===n.getFullYear(),j=A=>A%7===5||A%7===6;return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),o.jsxs("div",{className:"relative w-full max-w-5xl bg-white rounded-2xl shadow-2xl max-h-[90vh] overflow-hidden animate-scale-in",children:[o.jsxs("div",{className:"bg-gradient-to-r from-brand-600 to-brand-700 text-white p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-3",children:[o.jsx(Z,{name:"calendar",size:28}),"Calendario de Vacaciones"]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:o.jsx(Z,{name:"x",size:24})})]}),o.jsxs("div",{className:"flex flex-wrap gap-4",children:[o.jsxs("div",{className:"flex-1 min-w-[180px]",children:[o.jsx("label",{className:"text-white/70 text-xs font-medium block mb-1",children:"Terminal"}),o.jsxs("select",{className:"w-full px-3 py-2 rounded-lg bg-white/20 text-white border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50",value:d,onChange:A=>f(A.target.value),children:[o.jsx("option",{value:"todos",className:"text-slate-800",children:"Todos los terminales"}),ns.map(A=>o.jsx("option",{value:A.value,className:"text-slate-800",children:A.label},A.value))]})]}),o.jsxs("div",{className:"flex-1 min-w-[180px]",children:[o.jsx("label",{className:"text-white/70 text-xs font-medium block mb-1",children:"Cargo"}),o.jsxs("select",{className:"w-full px-3 py-2 rounded-lg bg-white/20 text-white border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50",value:p,onChange:A=>h(A.target.value),children:[o.jsx("option",{value:"todos",className:"text-slate-800",children:"Todos los cargos"}),g.map(A=>o.jsx("option",{value:A,className:"text-slate-800",children:A},A))]})]})]})]}),o.jsxs("div",{className:"flex flex-col lg:flex-row",children:[o.jsxs("div",{className:"flex-1 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("button",{onClick:b,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsx(Z,{name:"chevron-right",size:24,className:"rotate-180"})}),o.jsxs("div",{className:"text-center",children:[o.jsxs("h3",{className:"text-xl font-bold text-slate-800",children:[W5[s]," ",a]}),o.jsx("button",{onClick:_,className:"text-sm text-brand-600 hover:text-brand-700 font-medium mt-1",children:"Ir a hoy"})]}),o.jsx("button",{onClick:N,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsx(Z,{name:"chevron-right",size:24})})]}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:mde.map((A,T)=>o.jsx("div",{className:`text-center text-sm font-semibold py-2 ${T>=5?"text-slate-400":"text-slate-600"}`,children:A},A))}),o.jsx("div",{className:"grid grid-cols-7 gap-1",children:x.map((A,T)=>{if(A===null)return o.jsx("div",{className:"h-16"},`empty-${T}`);const P=y(A),O=P.length>0,R=c===A,I=E(A),z=j(T);return o.jsxs("button",{onClick:()=>u(A),className:`
                                            h-16 rounded-lg border-2 transition-all text-left p-1 relative
                                            ${R?"border-brand-500 bg-brand-50 shadow-md":"border-transparent"}
                                            ${I?"ring-2 ring-brand-400 ring-offset-1":""}
                                            ${z?"bg-slate-50":"bg-white"}
                                            ${O?"hover:border-brand-300":"hover:bg-slate-50"}
                                        `,children:[o.jsx("span",{className:`
                                            text-sm font-semibold
                                            ${I?"text-brand-600":z?"text-slate-400":"text-slate-700"}
                                        `,children:A}),O&&o.jsxs("div",{className:"mt-1 space-y-0.5",children:[P.slice(0,2).map((Y,ie)=>o.jsx("div",{className:"text-[10px] bg-amber-100 text-amber-800 rounded px-1 truncate font-medium",title:`${Y.nombre} - ${Y.cargo}`,children:Y.nombre.split(" ")[0]},ie)),P.length>2&&o.jsxs("div",{className:"text-[10px] text-amber-600 font-medium px-1",children:["+",P.length-2," ms"]})]})]},A)})}),o.jsxs("div",{className:"flex items-center gap-6 mt-6 text-sm text-slate-600",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 bg-amber-100 rounded border border-amber-200"}),o.jsx("span",{children:"Con vacaciones"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 bg-slate-50 rounded border border-slate-200"}),o.jsx("span",{children:"Fin de semana"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 rounded ring-2 ring-brand-400 ring-offset-1"}),o.jsx("span",{children:"Hoy"})]})]})]}),o.jsxs("div",{className:"lg:w-80 border-t lg:border-t-0 lg:border-l border-slate-200 bg-slate-50 p-6",children:[o.jsxs("h4",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[o.jsx(Z,{name:"users",size:18}),c?o.jsxs(o.Fragment,{children:["Vacaciones: ",c," ",W5[s]]}):o.jsx(o.Fragment,{children:"Selecciona un da"})]}),c===null?o.jsxs("div",{className:"text-center py-8 text-slate-400",children:[o.jsx(Z,{name:"calendar",size:48,className:"mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"Haz clic en un da para ver quin est de vacaciones"})]}):v.length===0?o.jsxs("div",{className:"text-center py-8 text-slate-400",children:[o.jsx(Z,{name:"check-circle",size:48,className:"mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"Sin vacaciones registradas para este da"})]}):o.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:v.map((A,T)=>o.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200 shadow-sm",children:[o.jsx("div",{className:"font-semibold text-slate-800",children:A.nombre}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Z,{name:"tag",size:14,className:"text-slate-400"}),A.cargo]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(Z,{name:"building",size:14,className:"text-slate-400"}),Vu[A.terminal_code]||A.terminal_code]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(Z,{name:"clock",size:14,className:"text-slate-400"}),A.turno]})]}),o.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-100 text-xs text-slate-500",children:[A.start_date,"  ",A.end_date,o.jsxs("span",{className:"ml-2 font-medium text-brand-600",children:["(",A.business_days," das hbiles)"]})]})]},T))}),m.length>0&&o.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-200",children:[o.jsxs("div",{className:"text-xs text-slate-500 uppercase font-semibold mb-2",children:["Resumen ",W5[s]]}),o.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[o.jsx("div",{className:"text-2xl font-bold text-brand-600",children:m.filter(A=>{const T=`${a}-${String(s+1).padStart(2,"0")}-01`,P=`${a}-${String(s+1).padStart(2,"0")}-31`;return A.end_date>=T&&A.start_date<=P}).length}),o.jsx("div",{className:"text-sm text-slate-600",children:"personas con vacaciones"})]})]})]})]})]})]})},vde=({initialData:e,onSubmit:t,onCancel:r,isLoading:n})=>{const a=Xt(A=>A.context),i=D9(a),[s,l]=D.useState(""),[c,u]=D.useState(null),[d,f]=D.useState(!1),[p,h]=D.useState({rut:"",nombre:"",cargo:"",terminal_code:"",turno:"",start_date:"",end_date:"",return_date:"",conflict_authorized:!1}),[g,m]=D.useState(null),[x,y]=D.useState(!1),v=D.useMemo(()=>!p.start_date||!p.end_date?0:aE(p.start_date,p.end_date),[p.start_date,p.end_date]),b=D.useMemo(()=>!p.start_date||!p.end_date?0:nE(p.start_date,p.end_date),[p.start_date,p.end_date]);D.useEffect(()=>{e&&(h({rut:e.rut,nombre:e.nombre,cargo:e.cargo,terminal_code:e.terminal_code,turno:e.turno,start_date:e.start_date,end_date:e.end_date,return_date:e.return_date,conflict_authorized:e.conflict_authorized}),l(Jn(e.rut)))},[e]);const N=D.useMemo(()=>{if(!s||!i.data)return[];const A=rd(s).toLowerCase();return i.data.filter(T=>T.status==="ACTIVO").filter(T=>T.rut.toLowerCase().includes(A)||T.nombre.toLowerCase().includes(A)).slice(0,8)},[s,i.data]);D.useEffect(()=>{(async()=>{if(!p.cargo||!p.terminal_code||!p.turno||!p.start_date||!p.end_date){m(null);return}y(!0);try{const T=await G9(p.cargo,p.terminal_code,p.turno,p.start_date,p.end_date,e==null?void 0:e.rut);m(T)}catch(T){console.error("Error checking conflicts:",T)}finally{y(!1)}})()},[p.cargo,p.terminal_code,p.turno,p.start_date,p.end_date,e==null?void 0:e.rut]),D.useEffect(()=>{if(p.end_date){const A=new Date(p.end_date+"T12:00:00");for(A.setDate(A.getDate()+1);A.getDay()===0||A.getDay()===6;)A.setDate(A.getDate()+1);h(T=>({...T,return_date:A.toISOString().split("T")[0]}))}},[p.end_date]);const _=A=>{u(A),l(Jn(A.rut)),h(T=>({...T,rut:A.rut,nombre:A.nombre,cargo:A.cargo,terminal_code:A.terminal_code,turno:A.turno})),f(!1)},E=async A=>{A.preventDefault(),await t(p)},j=p.rut&&p.start_date&&p.end_date&&p.return_date&&(!(g!=null&&g.hasConflict)||p.conflict_authorized);return o.jsxs("form",{onSubmit:E,className:"space-y-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx("label",{className:"label",children:"Buscar Trabajador por RUT"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",className:"input pr-10",placeholder:"Ingrese RUT o nombre...",value:s,onChange:A=>{l(A.target.value),f(!0)},onFocus:()=>f(!0)}),o.jsx(Z,{name:"search",size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"})]}),d&&N.length>0&&o.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:N.map(A=>o.jsx("button",{type:"button",onClick:()=>_(A),className:"w-full px-4 py-3 text-left hover:bg-slate-50 border-b last:border-b-0 border-slate-100",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-slate-800",children:A.nombre}),o.jsx("div",{className:"text-sm text-slate-500 font-mono",children:Jn(A.rut)})]}),o.jsxs("div",{className:"text-right text-sm text-slate-500",children:[o.jsx("div",{children:A.cargo}),o.jsx("div",{children:A.turno})]})]})},A.id))}),d&&s&&N.length===0&&i.data&&o.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg p-4 text-slate-500 text-sm",children:"No se encontraron trabajadores activos"})]}),c&&o.jsx("div",{className:"bg-brand-50 border border-brand-200 rounded-lg p-4",children:o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500 block",children:"Nombre"}),o.jsx("span",{className:"font-semibold text-slate-800",children:c.nombre})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500 block",children:"Cargo"}),o.jsx("span",{className:"font-semibold text-slate-800",children:c.cargo})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500 block",children:"Terminal"}),o.jsx("span",{className:"font-semibold text-slate-800",children:Vu[c.terminal_code]||c.terminal_code})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500 block",children:"Turno"}),o.jsx("span",{className:"font-semibold text-slate-800",children:c.turno})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha Inicio"}),o.jsx("input",{type:"date",className:"input",value:p.start_date,onChange:A=>h(T=>({...T,start_date:A.target.value})),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha Trmino"}),o.jsx("input",{type:"date",className:"input",value:p.end_date,min:p.start_date,onChange:A=>h(T=>({...T,end_date:A.target.value})),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Fecha Vuelta"}),o.jsx("input",{type:"date",className:"input",value:p.return_date,min:p.end_date,onChange:A=>h(T=>({...T,return_date:A.target.value})),required:!0})]})]}),p.start_date&&p.end_date&&o.jsx("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-slate-700",children:v}),o.jsx("div",{className:"text-sm text-slate-500",children:"Das calendario"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-brand-600",children:b}),o.jsx("div",{className:"text-sm text-slate-500",children:"Das a descontar"}),o.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"(sin sbados ni domingos)"})]})]})}),x&&o.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4 text-center text-slate-500",children:[o.jsx(Z,{name:"clock",size:20,className:"inline-block mr-2 animate-spin"}),"Verificando disponibilidad..."]}),(g==null?void 0:g.hasConflict)&&!x&&o.jsx("div",{className:"bg-amber-50 border border-amber-300 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Z,{name:"alert-triangle",size:24,className:"text-amber-600 shrink-0 mt-0.5"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-semibold text-amber-800 mb-2",children:"Conflicto de Personal Detectado"}),o.jsxs("p",{className:"text-sm text-amber-700 mb-3",children:["Hay ",g.conflictingVacations.length," persona(s) del mismo cargo, terminal y turno con vacaciones en fechas solapadas."]}),o.jsx("div",{className:"bg-white/50 rounded p-3 mb-3",children:o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-amber-700",children:"Personal total:"}),o.jsx("span",{className:"font-bold ml-2",children:g.totalStaffCount})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-amber-700",children:"Disponibles:"}),o.jsx("span",{className:"font-bold ml-2 text-amber-800",children:g.availableStaffCount})]})]})}),o.jsxs("div",{className:"text-sm text-amber-700 mb-3",children:[o.jsx("strong",{children:"En vacaciones:"}),o.jsx("ul",{className:"mt-1 space-y-1",children:g.conflictingVacations.map((A,T)=>o.jsxs("li",{children:[" ",A.nombre," (",A.start_date," al ",A.end_date,")"]},T))})]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:p.conflict_authorized,onChange:A=>h(T=>({...T,conflict_authorized:A.target.checked})),className:"w-4 h-4 text-amber-600 border-amber-300 rounded focus:ring-amber-500"}),o.jsx("span",{className:"text-sm font-medium text-amber-800",children:"Autorizo esta solicitud a pesar del conflicto"})]})]})]})}),g&&!g.hasConflict&&!x&&p.start_date&&p.end_date&&o.jsxs("div",{className:"bg-green-50 border border-green-300 rounded-lg p-4 flex items-center gap-3",children:[o.jsx(Z,{name:"check-circle",size:24,className:"text-green-600"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-green-800",children:"Sin conflictos"}),o.jsxs("span",{className:"text-green-700 text-sm ml-2",children:["(",g.availableStaffCount+1," de ",g.totalStaffCount," disponibles despus de esta solicitud)"]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:!j||n,className:"btn btn-primary",children:n?"Guardando...":e?"Actualizar":"Solicitar Vacaciones"})]})]})},xde=()=>{const e=Xt(A=>A.context),t=Xt(A=>A.setContext),r=_r(A=>A.session),n=(r==null?void 0:r.supervisorName)??"",a=ex(n),[i,s]=D.useState({auth_status:"todos"}),[l,c]=D.useState({type:"none"}),[u,d]=D.useState(!1),f=Xue(e,i),p=ax("vacaciones",e),h=rde(),g=ode(),m=ix(),x=sx();ox();const y=[{key:"rut",header:"RUT",value:A=>Jn(A.rut)},{key:"nombre",header:"Nombre",value:A=>A.nombre},{key:"cargo",header:"Cargo",value:A=>A.cargo},{key:"terminal",header:"Terminal",value:A=>fr(A.terminal_code)},{key:"turno",header:"Turno",value:A=>A.turno},{key:"start_date",header:"Fecha Inicio",value:A=>A.start_date},{key:"end_date",header:"Fecha Trmino",value:A=>A.end_date},{key:"return_date",header:"Fecha Vuelta",value:A=>A.return_date},{key:"calendar_days",header:"Das Calendario",value:A=>A.calendar_days.toString()},{key:"business_days",header:"Das Hbiles",value:A=>A.business_days.toString()},{key:"has_conflict",header:"Conflicto",value:A=>A.has_conflict?"S":"No"},{key:"auth_status",header:"Estado",value:A=>A.auth_status}],v=async A=>{await h.mutateAsync({values:A,createdBy:n}),c({type:"none"})},b=async A=>{l.type==="edit"&&(await g.mutateAsync({id:l.record.id,values:A}),c({type:"none"}))},N=async()=>{if(l.type!=="authorize")return;const A=l.record;await m.mutateAsync({subsection:"vacaciones",id:A.id,authorizedBy:n,rut:A.rut,nombre:A.nombre,terminal:A.terminal_code,date:A.start_date}),c({type:"none"})},_=async A=>{if(l.type!=="reject"||!A)return;const T=l.record;await x.mutateAsync({subsection:"vacaciones",id:T.id,authorizedBy:n,reason:A,rut:T.rut,nombre:T.nombre,terminal:T.terminal_code,date:T.start_date}),c({type:"none"})},E=A=>{switch(A){case"AUTORIZADO":return o.jsx("span",{className:"badge badge-success",children:A});case"RECHAZADO":return o.jsx("span",{className:"badge badge-danger",children:A});default:return o.jsx("span",{className:"badge badge-warning",children:A})}},j=A=>new Date(A+"T12:00:00").toLocaleDateString("es-CL",{day:"2-digit",month:"short"});return o.jsxs("div",{className:"space-y-4",children:[o.jsx(bn,{title:"Vacaciones",description:"Gestin inteligente de vacaciones con deteccin de conflictos",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{className:"btn btn-secondary",onClick:()=>d(!0),children:[o.jsx(Z,{name:"calendar",size:18})," Calendario"]}),o.jsxs("button",{className:"btn btn-primary",onClick:()=>c({type:"create"}),children:[o.jsx(Z,{name:"plus",size:18})," Nueva Solicitud"]}),o.jsx(Ma,{onExportView:()=>Er({filename:"vacaciones",sheetName:"Datos",rows:f.data||[],columns:y}),onExportAll:()=>Er({filename:"vacaciones_all",sheetName:"Datos",rows:f.data||[],columns:y})})]})}),o.jsx(tx,{data:p.data,isLoading:p.isLoading}),o.jsxs(Fs,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsx("select",{className:"input",value:i.auth_status,onChange:A=>s(T=>({...T,auth_status:A.target.value})),children:nx.map(A=>o.jsx("option",{value:A.value,children:A.label},A.value))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Buscar"}),o.jsx("input",{className:"input",placeholder:"RUT o nombre",value:i.search??"",onChange:A=>s(T=>({...T,search:A.target.value}))})]})]}),f.isLoading&&o.jsx(Bn,{label:"Cargando vacaciones..."}),f.isError&&o.jsx(ri,{onRetry:()=>f.refetch()}),!f.isLoading&&!f.isError&&o.jsx("div",{className:"table-container overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{className:"table-header",children:o.jsxs("tr",{children:[o.jsx("th",{className:"table-header-cell",children:"RUT"}),o.jsx("th",{className:"table-header-cell",children:"Nombre"}),o.jsx("th",{className:"table-header-cell",children:"Cargo/Turno"}),o.jsx("th",{className:"table-header-cell",children:"Perodo"}),o.jsx("th",{className:"table-header-cell text-center",children:"Das"}),o.jsx("th",{className:"table-header-cell",children:"Conflicto"}),o.jsx("th",{className:"table-header-cell",children:"Estado"}),o.jsx("th",{className:"table-header-cell text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"table-body",children:(f.data||[]).length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"table-cell text-center text-slate-500 py-8",children:"No hay solicitudes de vacaciones registradas"})}):(f.data||[]).map(A=>o.jsxs("tr",{className:"table-row",children:[o.jsx("td",{className:"table-cell font-mono text-sm",children:Jn(A.rut)}),o.jsx("td",{className:"table-cell font-medium",children:A.nombre}),o.jsxs("td",{className:"table-cell",children:[o.jsx("div",{className:"text-sm",children:A.cargo}),o.jsx("div",{className:"text-xs text-slate-500",children:A.turno})]}),o.jsxs("td",{className:"table-cell",children:[o.jsxs("div",{className:"text-sm",children:[j(A.start_date)," - ",j(A.end_date)]}),o.jsxs("div",{className:"text-xs text-slate-500",children:["Vuelta: ",j(A.return_date)]})]}),o.jsxs("td",{className:"table-cell text-center",children:[o.jsx("div",{className:"text-lg font-bold text-brand-600",children:A.business_days}),o.jsxs("div",{className:"text-xs text-slate-500",children:[A.calendar_days," cal"]})]}),o.jsx("td",{className:"table-cell",children:A.has_conflict?o.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium ${A.conflict_authorized?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:[o.jsx(Z,{name:"alert-triangle",size:12}),A.conflict_authorized?"Autorizado":"Sin autorizar"]}):o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-700",children:[o.jsx(Z,{name:"check-circle",size:12}),"Sin conflicto"]})}),o.jsx("td",{className:"table-cell",children:E(A.auth_status)}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[A.auth_status==="PENDIENTE"&&o.jsx("button",{onClick:()=>c({type:"edit",record:A}),className:"btn btn-ghost btn-icon",title:"Editar",children:o.jsx(Z,{name:"clipboard",size:16})}),a&&A.auth_status==="PENDIENTE"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>c({type:"authorize",record:A}),className:"btn btn-ghost btn-icon text-success-600",title:"Autorizar",children:o.jsx(Z,{name:"check-circle",size:16})}),o.jsx("button",{onClick:()=>c({type:"reject",record:A}),className:"btn btn-ghost btn-icon text-danger-600",title:"Rechazar",children:o.jsx(Z,{name:"x",size:16})})]})]})})]},A.id))})]})}),(l.type==="create"||l.type==="edit")&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>c({type:"none"})}),o.jsxs("div",{className:"relative w-full max-w-3xl card p-6 max-h-[90vh] overflow-y-auto animate-scale-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-xl font-bold",children:l.type==="create"?"Nueva Solicitud de Vacaciones":"Editar Solicitud"}),o.jsx("button",{onClick:()=>c({type:"none"}),className:"text-slate-400 hover:text-slate-600",children:o.jsx(Z,{name:"x",size:24})})]}),o.jsx(vde,{initialData:l.type==="edit"?l.record:void 0,onSubmit:l.type==="create"?v:b,onCancel:()=>c({type:"none"}),isLoading:h.isPending||g.isPending})]})]}),l.type==="authorize"&&o.jsx(El,{mode:"authorize",itemName:l.record.nombre,onConfirm:N,onCancel:()=>c({type:"none"}),isLoading:m.isPending}),l.type==="reject"&&o.jsx(El,{mode:"reject",itemName:l.record.nombre,onConfirm:_,onCancel:()=>c({type:"none"}),isLoading:x.isPending}),o.jsx(gde,{isOpen:u,onClose:()=>d(!1),vacaciones:f.data||[]})]})};async function yde(){if(!rr())return[];const{data:e,error:t}=await Se.from("shift_types").select("*").order("code");if(t)throw t;return e||[]}async function bde(e,t){if(!rr())return[];let r=Se.from("staff").select("id, rut, nombre, cargo, terminal_code, turno, horario, contacto, status").order("cargo").order("nombre"),n=[];if(t!=null&&t.terminal&&t.terminal!=="ALL"?n=[t.terminal]:n=zi(e),n.length>0&&(r=r.in("terminal_code",n)),t!=null&&t.turno&&t.turno!=="TODOS"&&(t.turno==="DIA"?r=r.or("turno.ilike.%dia%,turno.ilike.%day%,turno.ilike.%maana%,turno.ilike.%morning%,turno.ilike.%tarde%,turno.ilike.%afternoon%,turno.ilike.%rotativ%,turno.ilike.%rotating%"):r=r.or("turno.ilike.%noche%,turno.ilike.%night%")),t!=null&&t.search){const p=`%${t.search}%`;r=r.or(`rut.ilike.${p},nombre.ilike.${p}`)}const{data:a,error:i}=await r;if(i)throw i;const{data:s,error:l}=await Se.from("staff_shifts").select("*");l&&console.warn("fetchStaffWithShifts - Error fetching shifts:",l.message),console.log("fetchStaffWithShifts - Fetched shifts:",(s==null?void 0:s.length)??0);const c=new Map;if(s)for(const p of s)c.set(p.staff_id,p),console.log("Shift loaded:",p.staff_id,"->",p.shift_type_code,p.variant_code);const{data:u}=await Se.from("staff_admonitions").select("staff_id"),d=new Map;if(u)for(const p of u)d.set(p.staff_id,(d.get(p.staff_id)||0)+1);const f=(a||[]).map(p=>{const h=p.id,g=c.get(h);return{id:h,rut:p.rut,nombre:p.nombre,cargo:p.cargo,terminal_code:p.terminal_code,turno:p.turno,horario:p.horario,contacto:p.contacto,status:p.status,shift:g,admonitionCount:d.get(h)||0}});return console.log("fetchStaffWithShifts - Loaded",f.length,"staff, with shifts:",f.filter(p=>p.shift).length),f}async function wde(e){if(!rr())return null;const{data:t,error:r}=await Se.from("staff_shifts").select("*").eq("staff_id",e).single();if(r&&r.code!=="PGRST116")throw r;return t||null}async function _de(e){if(!rr())throw new Error("Supabase not configured");console.log("upsertStaffShift - Attempting insert:",e);const{data:t,error:r}=await Se.from("staff_shifts").upsert({staff_id:e.staff_id,shift_type_code:e.shift_type_code,variant_code:e.variant_code,start_date:e.start_date||"2026-01-01"},{onConflict:"staff_id"}).select().single();if(r)throw console.error("upsertStaffShift - ERROR:",r),r;return console.log("upsertStaffShift - SUCCESS:",t),t}async function Nde(e){if(!rr())return null;try{const{data:t,error:r}=await Se.from("staff_shift_special_templates").select("*").eq("staff_id",e).single();return r&&r.code!=="PGRST116"&&r.code!=="406"?(console.warn("fetchSpecialTemplate error (ignoring):",r.code,r.message),null):t||null}catch(t){return console.warn("fetchSpecialTemplate exception (ignoring):",t),null}}async function Sde(e){if(!rr()||e.length===0)return[];try{const{data:t,error:r}=await Se.from("staff_shift_special_templates").select("*").in("staff_id",e);return r?(console.warn("fetchAllSpecialTemplates error (ignoring):",r.message),[]):t||[]}catch(t){return console.warn("fetchAllSpecialTemplates exception (ignoring):",t),[]}}async function jde(e,t){if(!rr())throw new Error("Supabase not configured");const{data:r,error:n}=await Se.from("staff_shift_special_templates").upsert({staff_id:e,off_days_json:t},{onConflict:"staff_id"}).select().single();if(n)throw n;return r}async function Ade(e,t,r){if(!rr()||e.length===0)return[];const n=`${t}-${String(r+1).padStart(2,"0")}-01`,a=new Date(t,r+1,0).toISOString().split("T")[0],{data:i,error:s}=await Se.from("staff_shift_overrides").select("*").in("staff_id",e).gte("override_date",n).lte("override_date",a);if(s)throw s;return i||[]}async function Ede(e,t,r){if(!rr()||e.length===0)return[];const n=`${t}-${String(r+1).padStart(2,"0")}-01`,a=new Date(t,r+1,0).toISOString().split("T")[0],{data:i,error:s}=await Se.from("attendance_marks").select("*").in("staff_id",e).gte("mark_date",n).lte("mark_date",a);if(s)throw s;return i||[]}async function Tde(e,t){if(!rr())throw new Error("Supabase not configured");const{data:r,error:n}=await Se.from("attendance_marks").upsert({staff_id:e.staff_id,mark_date:e.mark_date,mark:e.mark,note:e.note||null,created_by:t},{onConflict:"staff_id,mark_date"}).select().single();if(n)throw n;return r}async function Cde(e,t,r){if(!rr())throw new Error("Supabase not configured");if(e.length===0)return[];const n=e.map(s=>({staff_id:s,mark_date:t,mark:"P",created_by:r})),{data:a,error:i}=await Se.from("attendance_marks").upsert(n,{onConflict:"staff_id,mark_date"}).select();if(i)throw i;return a||[]}async function kde(e,t,r){if(!rr()||e.length===0)return[];const n=`${t}-${String(r+1).padStart(2,"0")}-01`,a=new Date(t,r+1,0).toISOString().split("T")[0],{data:i,error:s}=await Se.from("attendance_licenses").select("*").in("staff_id",e).or(`start_date.lte.${a},end_date.gte.${n}`);if(s)throw s;return i||[]}async function Ode(e,t){if(!rr())throw new Error("Supabase not configured");let r=null;if(e.document){const i=`${e.staff_id}/${Date.now()}_${e.document.name}`,{error:s}=await Se.storage.from("attendance-docs").upload(i,e.document);if(s)throw s;r=i}const{data:n,error:a}=await Se.from("attendance_licenses").insert({staff_id:e.staff_id,start_date:e.start_date,end_date:e.end_date,note:e.note||null,document_path:r,created_by:t}).select().single();if(a)throw a;return n}async function Pde(e,t,r){if(!rr()||e.length===0)return[];const n=`${t}-${String(r+1).padStart(2,"0")}-01`,a=new Date(t,r+1,0).toISOString().split("T")[0],{data:i,error:s}=await Se.from("attendance_permissions").select("*").in("staff_id",e).or(`start_date.lte.${a},end_date.gte.${n}`);if(s)throw s;return i||[]}async function Lde(e,t){if(!rr())throw new Error("Supabase not configured");const{data:r,error:n}=await Se.from("attendance_permissions").insert({staff_id:e.staff_id,start_date:e.start_date,end_date:e.end_date,permission_type:e.permission_type,note:e.note||null,created_by:t}).select().single();if(n)throw n;return r}async function Rde(e,t,r){if(!rr()||e.length===0)return[];const n=`${t}-${String(r+1).padStart(2,"0")}-01`,a=new Date(t,r+1,0).toISOString().split("T")[0],{data:i,error:s}=await Se.from("staff").select("id, rut").in("id",e);if(s)throw s;const l=(i||[]).map(f=>f.rut),c=Object.fromEntries((i||[]).map(f=>[f.rut,f.id])),{data:u,error:d}=await Se.from("attendance_vacaciones").select("rut, start_date, end_date").in("rut",l).eq("auth_status","AUTORIZADO").or(`start_date.lte.${a},end_date.gte.${n}`);if(d)throw d;return(u||[]).map(f=>({staff_id:c[f.rut],start_date:f.start_date,end_date:f.end_date}))}async function Dde(e,t,r){if(!rr())return{noMarcaciones:[],sinCredenciales:[],cambiosDia:[],autorizaciones:[]};const n=`${t}-${String(r+1).padStart(2,"0")}-01`,a=new Date(t,r+1,0).toISOString().split("T")[0],[i,s,l,c]=await Promise.all([Se.from("attendance_no_marcaciones").select("rut, date").in("terminal_code",e).gte("date",n).lte("date",a),Se.from("attendance_sin_credenciales").select("rut, date").in("terminal_code",e).gte("date",n).lte("date",a),Se.from("attendance_cambios_dia").select("rut, date").in("terminal_code",e).gte("date",n).lte("date",a),Se.from("attendance_autorizaciones").select("rut, authorization_date").in("terminal_code",e).gte("authorization_date",n).lte("authorization_date",a)]);return{noMarcaciones:(i.data||[]).map(u=>({rut:u.rut,date:u.date})),sinCredenciales:(s.data||[]).map(u=>({rut:u.rut,date:u.date})),cambiosDia:(l.data||[]).map(u=>({rut:u.rut,date:u.date})),autorizaciones:(c.data||[]).map(u=>({rut:u.rut,date:u.authorization_date}))}}async function Ide(e,t){if(!rr())throw new Error("Supabase not configured");const{data:r,error:n}=await Se.from("offboarding_requests").insert({staff_id:e.staff_id,staff_rut:e.staff_rut,staff_name:e.staff_name,terminal_code:e.terminal_code,reason:e.reason,requested_by:t,status:"ENVIADA"}).select().single();if(n)throw n;return r}function Mde(e,t,r){const n=[],a=Se.channel("attendance_marks_changes").on("postgres_changes",{event:"*",schema:"public",table:"attendance_marks"},()=>e()).subscribe();n.push(a);const i=Se.channel("attendance_licenses_changes").on("postgres_changes",{event:"*",schema:"public",table:"attendance_licenses"},()=>t()).subscribe();n.push(i);const s=Se.channel("attendance_permissions_changes").on("postgres_changes",{event:"*",schema:"public",table:"attendance_permissions"},()=>r()).subscribe();return n.push(s),()=>{n.forEach(l=>{Se.removeChannel(l)})}}const jr={all:["asistencia2026"],shiftTypes:()=>[...jr.all,"shiftTypes"],staff:()=>[...jr.all,"staff"],staffList:(e,t)=>[...jr.staff(),e,t],staffShift:e=>[...jr.all,"staffShift",e],specialTemplate:e=>[...jr.all,"specialTemplate",e],monthData:()=>[...jr.all,"monthData"],overrides:(e,t,r)=>[...jr.monthData(),"overrides",e.join(","),t,r],marks:(e,t,r)=>[...jr.monthData(),"marks",e.join(","),t,r],licenses:(e,t,r)=>[...jr.monthData(),"licenses",e.join(","),t,r],permissions:(e,t,r)=>[...jr.monthData(),"permissions",e.join(","),t,r],vacations:(e,t,r)=>[...jr.monthData(),"vacations",e.join(","),t,r],incidences:(e,t,r)=>[...jr.monthData(),"incidences",e.join(","),t,r]},sE=()=>Mt({queryKey:jr.shiftTypes(),queryFn:yde}),Fde=(e,t)=>Mt({queryKey:jr.staffList(e,t),queryFn:()=>bde(e,t)}),$de=e=>Mt({queryKey:jr.staffShift(e||""),queryFn:()=>e?wde(e):null,enabled:!!e}),Bde=e=>Mt({queryKey:jr.specialTemplate(e||""),queryFn:()=>e?Nde(e):null,enabled:!!e}),Z9=e=>Mt({queryKey:["asistencia2026","specialTemplates","all",e.join(",")],queryFn:()=>Sde(e),enabled:e.length>0}),Ude=(e,t,r)=>Mt({queryKey:jr.overrides(e,t,r),queryFn:()=>Ade(e,t,r),enabled:e.length>0}),zde=(e,t,r)=>Mt({queryKey:jr.marks(e,t,r),queryFn:()=>Ede(e,t,r),enabled:e.length>0}),qde=(e,t,r)=>Mt({queryKey:jr.licenses(e,t,r),queryFn:()=>kde(e,t,r),enabled:e.length>0}),Hde=(e,t,r)=>Mt({queryKey:jr.permissions(e,t,r),queryFn:()=>Pde(e,t,r),enabled:e.length>0}),Wde=(e,t,r)=>Mt({queryKey:jr.vacations(e,t,r),queryFn:()=>Rde(e,t,r),enabled:e.length>0}),Vde=(e,t,r)=>{const n=zi(e);return Mt({queryKey:jr.incidences(n,t,r),queryFn:()=>Dde(n,t,r)})},Gde=()=>{const e=St();return Et({mutationFn:t=>_de(t),onSuccess:t=>{console.log("useUpsertStaffShift - Invalidating queries for staff_id:",t.staff_id),e.invalidateQueries({queryKey:jr.all})}})},Kde=()=>{const e=St();return Et({mutationFn:({staffId:t,offDays:r})=>jde(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:jr.specialTemplate(t.staff_id)})}})},Yde=()=>{const e=St();return Et({mutationFn:({values:t,createdBy:r})=>Tde(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:jr.monthData()})}})},Xde=()=>{const e=St();return Et({mutationFn:({values:t,createdBy:r})=>Ode(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:jr.monthData()})}})},Jde=()=>{const e=St();return Et({mutationFn:({values:t,createdBy:r})=>Lde(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:jr.monthData()})}})},Qde=()=>{const e=St();return Et({mutationFn:({values:t,requestedBy:r})=>Ide(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:jr.staff()})}})},Zde=()=>{const e=St();return Et({mutationFn:({staffIds:t,date:r,createdBy:n})=>Cde(t,r,n),onSuccess:()=>{e.invalidateQueries({queryKey:jr.monthData()})}})},efe=()=>{const e=St();D.useEffect(()=>Mde(()=>{console.log("Attendance marks changed"),e.invalidateQueries({queryKey:jr.monthData()})},()=>{console.log("Licenses changed"),e.invalidateQueries({queryKey:jr.monthData()})},()=>{console.log("Permissions changed"),e.invalidateQueries({queryKey:jr.monthData()})}),[e])},Sn={OFF:{bg:"bg-slate-100",text:"text-slate-500",border:"border-slate-200"},WORK_DIA:{bg:"bg-sky-50",text:"text-sky-700",border:"border-sky-200"},WORK_NOCHE:{bg:"bg-indigo-50",text:"text-indigo-700",border:"border-indigo-200"},LIC:{bg:"bg-purple-50",text:"text-purple-700",border:"border-purple-200"},VAC:{bg:"bg-teal-50",text:"text-teal-700",border:"border-teal-200"},PER:{bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-200"},PRESENTE:{bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-200"},AUSENTE:{bg:"bg-red-50",text:"text-red-700",border:"border-red-200"},PENDING:{bg:"bg-yellow-50",text:"text-yellow-700",border:"border-yellow-300"},DESVINCULADO:{bg:"bg-slate-50",text:"text-slate-400 line-through",border:"border-slate-200"}},Gm={NM:"bg-yellow-100 text-yellow-800 border-yellow-300",NC:"bg-orange-100 text-orange-800 border-orange-300",CD:"bg-blue-100 text-blue-800 border-blue-300",AUT:"bg-green-100 text-green-800 border-green-300"},tfe={EL_ROBLE:"bg-emerald-600 hover:bg-emerald-700 text-white",LA_REINA:"bg-blue-600 hover:bg-blue-700 text-white",EL_SALTO:"bg-amber-600 hover:bg-amber-700 text-white",LO_ECHEVERS:"bg-purple-600 hover:bg-purple-700 text-white",COLO_COLO:"bg-red-600 hover:bg-red-700 text-white",ALL:"bg-slate-600 hover:bg-slate-700 text-white"},Ed={count:"bg-slate-100 text-slate-700",programmed:"bg-sky-100 text-sky-700",license:"bg-purple-100 text-purple-700",vacation:"bg-teal-100 text-teal-700",permission:"bg-amber-100 text-amber-700",incident:"bg-orange-100 text-orange-700",pending:"bg-red-100 text-red-700"},rfe={SUPERVISOR:"bg-indigo-50/50",INSPECTOR:"bg-sky-50/50",CONDUCTOR:"bg-emerald-50/50",PLANILLERO:"bg-amber-50/50",CLEANER:"bg-slate-50/50"},pf={secondary:"bg-slate-100 hover:bg-slate-200 text-slate-700",success:"bg-emerald-600 hover:bg-emerald-700 text-white",danger:"bg-red-600 hover:bg-red-700 text-white"},nfe=({isOff:e,horario:t,reducido:r=!1,turno:n,mark:a,incidencies:i=[],isToday:s=!1,isDisabled:l=!1,licenseCode:c,vacationCode:u,permissionCode:d,onClick:f})=>{const p=()=>{if(l){const x=Sn.DESVINCULADO;return`${x.bg} ${x.text} border ${x.border}`}if(c){const x=Sn.LIC;return`${x.bg} ${x.text} border ${x.border}`}if(u){const x=Sn.VAC;return`${x.bg} ${x.text} border ${x.border}`}if(d){const x=Sn.PER;return`${x.bg} ${x.text} border ${x.border}`}if(a){const x=a.mark==="P"?Sn.PRESENTE:Sn.AUSENTE;return`${x.bg} ${x.text} border ${x.border}`}if(e){const x=Sn.OFF;return`${x.bg} ${x.text} border ${x.border}`}const m=n==="NOCHE"?Sn.WORK_NOCHE:Sn.WORK_DIA;return`${m.bg} ${m.text} border ${m.border}`},h=()=>{if(c)return o.jsx("span",{className:"text-xs font-bold",children:"LIC"});if(u)return o.jsx("span",{className:"text-xs font-bold",children:"VAC"});if(d)return o.jsx("span",{className:"text-xs font-bold",children:"PER"});if(a)return o.jsx("span",{className:"text-lg font-bold",children:a.mark});if(e)return o.jsx("span",{className:"text-lg font-bold text-slate-500",children:"L"});if(t){const m=afe(t,r);return o.jsx("div",{className:"text-center leading-tight",children:o.jsx("div",{className:`text-[10px] font-semibold ${r?"text-amber-600":""}`,children:m})})}return o.jsx("span",{className:"text-xs font-medium",children:n==="NOCHE"?"N":"D"})},g=i.slice(0,2);return o.jsxs("button",{onClick:f,disabled:l,className:`
                relative w-full h-14 rounded-md transition-all
                flex flex-col items-center justify-center
                ${p()}
                ${s?"ring-2 ring-brand-500 ring-offset-1":""}
                ${l?"cursor-not-allowed opacity-50":"hover:scale-105 cursor-pointer hover:shadow-md"}
            `,children:[h(),g.length>0&&o.jsx("div",{className:"absolute bottom-0.5 left-0.5 right-0.5 flex gap-0.5 justify-center",children:g.map(m=>o.jsx("span",{className:`text-[7px] font-bold px-0.5 rounded ${Gm[m]}`,title:ife(m),children:m},m))})]})};function afe(e,t){if(!e)return"";const r=e.match(/(\d{1,2}):(\d{2})-(\d{1,2}):(\d{2})/);if(!r)return e;const n=parseInt(r[1],10);let a=parseInt(r[3],10);return t&&(a=a===0?23:a-1),`${n.toString().padStart(2,"0")}-${a.toString().padStart(2,"0")}`}function ife(e){return{NM:"No Marcacin",NC:"Sin Credencial",CD:"Cambio de Da",AUT:"Autorizacin"}[e]||e}const eB=new Date(Date.UTC(2025,11,29,12,0,0));function tB(e,t){const r=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate());return Math.floor((n-r)/(1e3*60*60*24))}function sfe(e){const[t,r,n]=e.split("-").map(Number);return new Date(Date.UTC(t,r-1,n,12,0,0))}function ofe(e,t){const r=tB(eB,e);return(Math.floor(r/7)%t+t)%t}function lfe(e){return e.getUTCDay()}function V5(e,t,r){return e>=t&&e<=r}function rB(e,t,r,n,a,i){var c,u;if(i)return i.override_type==="OFF";const s=sfe(e),l=lfe(s);switch(n.type){case"fixed":return((c=n.offDays)==null?void 0:c.includes(l))??!1;case"rotating":{if(!n.weeks||!n.cycle)return!1;let d=ofe(s,n.cycle);r==="CONTRATURNO"&&(d=(d+1)%n.cycle);const f=n.weeks[d];return((u=f==null?void 0:f.offDays)==null?void 0:u.includes(l))??!1}case"manual":{if(!a||!n.cycleDays)return!1;const f=(tB(eB,s)%n.cycleDays+n.cycleDays)%n.cycleDays;return a.off_days_json.includes(f)}default:return!1}}function nB(e){if(!e)return"DIA";const t=e.match(/^(\d{1,2}):(\d{2})/);if(!t)return"DIA";const r=parseInt(t[1],10);return r>=20||r<6?"NOCHE":"DIA"}function cfe(e,t){return new Date(e,t+1,0).getDate()}function ufe(e,t){const r=cfe(e,t),n=[];for(let a=1;a<=r;a++){const i=new Date(e,t,a);n.push(i.toISOString().split("T")[0])}return n}function dfe(e){return new Date(e+"T12:00:00").getDate()}function aB(e){const t=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],r=new Date(e+"T12:00:00");return t[r.getDay()]}function kb(){const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`}function n6(e){return e===kb()}function ffe(e){return e<kb()}function hfe(e){return["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][e]}function Ej(e){const t=new Date(e+"T12:00:00"),r=t.getDay(),n=t.getDate()-r+(r===0?-6:1);return new Date(t.setDate(n)).toISOString().split("T")[0]}function oE(e){const t=[],r=new Date(e+"T12:00:00");for(let n=0;n<7;n++){const a=new Date(r);a.setDate(r.getDate()+n),t.push(a.toISOString().split("T")[0])}return t}function pfe(e){const t=new Date(e+"T12:00:00");return t.setDate(t.getDate()-7),t.toISOString().split("T")[0]}function mfe(e){const t=new Date(e+"T12:00:00");return t.setDate(t.getDate()+7),t.toISOString().split("T")[0]}function a6(e){const t=oE(e),r=new Date(t[0]+"T12:00:00"),n=new Date(t[6]+"T12:00:00"),a=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],i=r.getDate(),s=a[r.getMonth()],l=n.getDate(),c=a[n.getMonth()],u=n.getFullYear();return r.getMonth()===n.getMonth()?`${i} - ${l} ${s} ${u}`:`${i} ${s} - ${l} ${c} ${u}`}function iB(e){const t=oE(e);return[t[0],t[1]]}function gfe(e,t){if(!e)return e;const r=e.match(/(\d{1,2}):(\d{2})-(\d{1,2}):(\d{2})/);if(!r)return e;const n=parseInt(r[1],10),a=r[2],i=r[3],s=r[4];return`${((n+1)%24).toString().padStart(2,"0")}:${a}-${i}:${s}`}const vfe=({isOpen:e,onClose:t,staff:r,date:n,currentMark:a,currentNote:i,incidencies:s=[],onMarkPresent:l,onMarkAbsent:c,onRegisterLicense:u,onRegisterPermission:d,onRequestOffboarding:f,isManager:p=!1})=>{const[h,g]=D.useState("none"),[m,x]=D.useState(n),[y,v]=D.useState(n),[b,N]=D.useState("");if(!e||!r)return null;const _=aB(n),E=new Date(n+"T12:00:00").getDate(),j=r.status==="DESVINCULADO",A=()=>{u(m,y,b||void 0),N(""),g("none")};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 transition-opacity",onClick:t}),o.jsxs("div",{className:"fixed right-0 top-0 h-full w-full max-w-md bg-white shadow-xl z-50 flex flex-col overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-slate-50",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-slate-900",children:r.nombre}),o.jsxs("p",{className:"text-sm text-slate-500",children:[r.rut," | ",r.cargo," | ",_," ",E]})]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-200 rounded-lg transition-colors",children:o.jsx(Z,{name:"x",size:20})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[j&&o.jsxs("div",{className:"p-3 bg-slate-100 rounded-lg text-slate-600 text-sm",children:[o.jsx(Z,{name:"alert-triangle",size:16,className:"inline mr-2"}),"Este trabajador est desvinculado. No se permiten nuevas marcaciones."]}),a&&o.jsxs("div",{className:`p-3 rounded-lg flex items-center gap-2 ${a==="P"?Sn.PRESENTE.bg:Sn.AUSENTE.bg}`,children:[o.jsx(Z,{name:a==="P"?"check-circle":"x-circle",size:20}),o.jsx("span",{className:"font-medium",children:a==="P"?"Presente":"Ausente"}),i&&o.jsxs("span",{className:"text-sm opacity-75",children:["- ",i]})]}),!j&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Marcar asistencia"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:l,className:`flex-1 py-2 rounded-lg font-medium transition-colors ${pf.success}`,children:[o.jsx(Z,{name:"check",size:16,className:"inline mr-1"}),"Presente (P)"]}),o.jsxs("button",{onClick:()=>c(""),className:`flex-1 py-2 rounded-lg font-medium transition-colors ${pf.danger}`,children:[o.jsx(Z,{name:"x",size:16,className:"inline mr-1"}),"Ausente (A)"]})]})]}),!j&&h==="none"&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Registrar"}),o.jsx("div",{className:"flex gap-2",children:o.jsx("button",{onClick:()=>g("license"),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium ${Sn.LIC.bg} ${Sn.LIC.text} border ${Sn.LIC.border}`,children:"Licencia"})})]}),h==="license"&&o.jsxs("div",{className:"space-y-3 p-3 bg-purple-50 rounded-lg border border-purple-100",children:[o.jsx("h4",{className:"text-sm font-medium text-purple-800",children:"Registrar Licencia"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-slate-600",children:"Desde"}),o.jsx("input",{type:"date",value:m,onChange:T=>x(T.target.value),className:"w-full p-2 border rounded-lg text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-slate-600",children:"Hasta"}),o.jsx("input",{type:"date",value:y,onChange:T=>v(T.target.value),className:"w-full p-2 border rounded-lg text-sm"})]})]}),o.jsx("textarea",{value:b,onChange:T=>N(T.target.value),placeholder:"Notas (opcional)",className:"w-full p-2 border rounded-lg text-sm resize-none",rows:2}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:A,className:"flex-1 py-2 rounded-lg font-medium bg-purple-600 text-white",children:"Guardar"}),o.jsx("button",{onClick:()=>g("none"),className:"px-4 py-2 rounded-lg font-medium bg-slate-100 text-slate-600",children:"Cancelar"})]})]}),s.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Incidencias relacionadas"}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.includes("NM")&&o.jsx("span",{className:"px-2 py-1 text-sm bg-yellow-100 text-yellow-800 rounded",children:"No Marcacin"}),s.includes("NC")&&o.jsx("span",{className:"px-2 py-1 text-sm bg-orange-100 text-orange-800 rounded",children:"Sin Credencial"}),s.includes("CD")&&o.jsx("span",{className:"px-2 py-1 text-sm bg-blue-100 text-blue-800 rounded",children:"Cambio de Da"}),s.includes("AUT")&&o.jsx("span",{className:"px-2 py-1 text-sm bg-green-100 text-green-800 rounded",children:"Autorizacin"})]})]}),p&&!j&&f&&o.jsx("div",{className:"pt-4 border-t",children:o.jsxs("button",{onClick:f,className:"w-full py-2 rounded-lg text-sm font-medium text-red-600 border border-red-200 hover:bg-red-50 transition-colors",children:[o.jsx(Z,{name:"user-x",size:16,className:"inline mr-1"}),"Solicitar Desvinculacin"]})})]}),o.jsx("div",{className:"p-4 border-t bg-slate-50",children:o.jsx("button",{onClick:t,className:`w-full py-2 rounded-lg font-medium ${pf.secondary}`,children:"Cerrar"})})]})]})},i6=["SUPERVISOR","INSPECTOR","CONDUCTOR","PLANILLERO","CLEANER"];function xfe(e){return{"5X2_FIJO":{id:"1",code:"5X2_FIJO",name:"5x2 Fijo",pattern_json:{type:"fixed",description:"Lun-Vie trabaja",offDays:[6,0]},created_at:""},"5X2_ROTATIVO":{id:"2",code:"5X2_ROTATIVO",name:"5x2 Rotativo",pattern_json:{type:"rotating",description:"Rotativo 2 semanas",cycle:2,weeks:[{offDays:[3,0]},{offDays:[5,6]}]},created_at:""},"5X2_SUPER":{id:"3",code:"5X2_SUPER",name:"5x2 Super",pattern_json:{type:"rotating",description:"Super 2 semanas",cycle:2,weeks:[{offDays:[3,0]},{offDays:[4,5]}]},created_at:""},ESPECIAL:{id:"4",code:"ESPECIAL",name:"Especial",pattern_json:{type:"manual",description:"Manual 28 dias",cycleDays:28},created_at:""},SUPERVISOR_RELEVO:{id:"5",code:"SUPERVISOR_RELEVO",name:"Supervisor Relevo",pattern_json:{type:"rotating",description:"Sem1: Mi+Dom (2 libres), Sem2: Mi+Vie+Sb (3 libres)",cycle:2,weeks:[{offDays:[3,0]},{offDays:[3,5,6]}]},created_at:""}}[e]}const yfe=({staff:e,shiftTypes:t,marks:r,licenses:n,permissions:a,vacations:i,overrides:s,incidences:l,specialTemplates:c,weekDates:u,isLoading:d=!1,onRequestOffboarding:f,onOpenShiftConfig:p})=>{var we,_e;const h=_r(k=>k.session),[g,m]=D.useState(null),x=Yde(),y=Xde(),v=Jde(),b=Zde(),N=D.useMemo(()=>{const k={};for(const F of i6)k[F]=[];for(const F of e){const B=F.cargo.toUpperCase();let U="CLEANER";B.includes("SUPERVISOR")?U="SUPERVISOR":B.includes("INSPECTOR")?U="INSPECTOR":B.includes("CONDUCTOR")?U="CONDUCTOR":B.includes("PLANILLERO")&&(U="PLANILLERO"),k[U]&&k[U].push(F)}return k},[e]),_=D.useMemo(()=>{const k=new Map;for(const F of r)k.set(`${F.staff_id}-${F.mark_date}`,F);return k},[r]),E=D.useMemo(()=>{const k=new Map;for(const F of t)k.set(F.code,F);return k},[t]),j=D.useMemo(()=>{const k=new Map;for(const F of c)k.set(F.staff_id,F);return k},[c]),A=D.useMemo(()=>{const k=new Map;for(const F of s)k.set(`${F.staff_id}-${F.override_date}`,F);return k},[s]),T=(k,F)=>n.find(B=>B.staff_id===k&&V5(F,B.start_date,B.end_date)),P=(k,F)=>i.find(B=>B.staff_id===k&&V5(F,B.start_date,B.end_date)),O=(k,F)=>a.find(B=>B.staff_id===k&&V5(F,B.start_date,B.end_date)),R=(k,F)=>{const B=[];return l.noMarcaciones.some(U=>U.rut===k&&U.date===F)&&B.push("NM"),l.sinCredenciales.some(U=>U.rut===k&&U.date===F)&&B.push("NC"),l.cambiosDia.some(U=>U.rut===k&&U.date===F)&&B.push("CD"),l.autorizaciones.some(U=>U.rut===k&&U.date===F)&&B.push("AUT"),B},I=(k,F)=>{const B=_.get(`${k.id}-${F}`),U=T(k.id,F),J=P(k.id,F),me=O(k.id,F),K=A.get(`${k.id}-${F}`),te=R(k.rut,F);let le=!1;const ve=k.horario,ge=nB(k.horario),Me=new Date(F+"T12:00:00").getDay();if(k.shift){let Pe=E.get(k.shift.shift_type_code);if(Pe!=null&&Pe.pattern_json||(Pe=xfe(k.shift.shift_type_code)),Pe!=null&&Pe.pattern_json){const Ie=j.get(k.id);le=rB(F,k.shift.shift_type_code,k.shift.variant_code,Pe.pattern_json,Ie,K),F===u[0]&&console.log("getDayStatus -",k.nombre,"shift:",k.shift.shift_type_code,"variant:",k.shift.variant_code,"pattern:",Pe.pattern_json.type,"isOff:",le)}else le=Me===0||Me===6,F===u[0]&&console.log("getDayStatus -",k.nombre,"NO PATTERN FOUND, using default Sat/Sun")}else le=Me===0||Me===6;const ee=iB(u[0]).includes(F)&&!le;return{mark:B,license:U,vacation:J,permission:me,isOff:le,horario:ve,turno:ge,reducido:ee,incidencies:te}},z=()=>{if(!h)return;const k=new Date,F=k.getFullYear(),B=String(k.getMonth()+1).padStart(2,"0"),U=String(k.getDate()).padStart(2,"0"),J=`${F}-${B}-${U}`,me=e.filter(le=>{if(le.status==="DESVINCULADO")return!1;const ve=I(le,J);return!(ve.isOff||ve.license||ve.vacation||ve.permission||ve.mark)});if(me.length===0){alert(`No hay personal pendiente de marcar para hoy (${J})`);return}const K=Array.from(new Set(me.map(le=>le.terminal_code))),te=K.length===1?K[0]:`${K.length} Terminales`;confirm(`Marcar ${me.length} personas de ${te} como PRESENTE para la fecha ${J}?`)&&b.mutate({staffIds:me.map(le=>le.id),date:J,createdBy:h.supervisorName})},Y=()=>{!g||!h||(x.mutate({values:{staff_id:g.staff.id,mark_date:g.date,mark:"P"},createdBy:h.supervisorName}),m(null))},ie=k=>{!g||!h||(x.mutate({values:{staff_id:g.staff.id,mark_date:g.date,mark:"A",note:k},createdBy:h.supervisorName}),m(null))},re=(k,F,B)=>{!g||!h||(y.mutate({values:{staff_id:g.staff.id,start_date:k,end_date:F,note:B},createdBy:h.supervisorName}),m(null))},X=(k,F,B,U)=>{!g||!h||(v.mutate({values:{staff_id:g.staff.id,start_date:k,end_date:F,permission_type:B,note:U},createdBy:h.supervisorName}),m(null))},oe=h&&["Isaac","Claudio","Cristian"].some(k=>{var F;return(F=h.supervisorName)==null?void 0:F.includes(k)});return d?o.jsxs("div",{className:"flex items-center justify-center h-64",children:[o.jsx(Z,{name:"loader",size:24,className:"animate-spin text-brand-600"}),o.jsx("span",{className:"ml-2 text-slate-600",children:"Cargando..."})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-white rounded-lg border shadow-sm overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 border-b",children:[o.jsxs("span",{className:"text-sm text-slate-600",children:[e.length," trabajadores"]}),o.jsxs("button",{onClick:z,disabled:b.isPending,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg font-medium text-sm hover:bg-emerald-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[o.jsx(Z,{name:"check",size:16}),b.isPending?"Marcando...":"Marcar Todos Presente Hoy"]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full border-collapse",children:[o.jsx("thead",{className:"bg-slate-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"sticky left-0 z-10 bg-slate-100 border-b border-r px-3 py-2 text-left min-w-[220px]",children:o.jsx("span",{className:"text-slate-700 font-semibold text-sm",children:"Personal"})}),u.map(k=>{const F=aB(k),B=dfe(k),U=n6(k);return o.jsxs("th",{className:`border-b px-1 py-2 text-center min-w-[70px] ${U?"bg-brand-50":"bg-slate-50"}`,children:[o.jsx("div",{className:"text-xs font-medium text-slate-500",children:F}),o.jsx("div",{className:`text-lg font-bold ${U?"text-brand-600":"text-slate-700"}`,children:B})]},k)})]})}),o.jsx("tbody",{children:i6.map(k=>{const F=N[k]||[];return F.length===0?null:o.jsxs(ye.Fragment,{children:[o.jsx("tr",{className:rfe[k],children:o.jsxs("td",{colSpan:u.length+1,className:"sticky left-0 px-3 py-2 font-semibold text-sm text-slate-700 border-b",children:[k," (",F.length,")"]})}),F.map(B=>{const U=B.status==="DESVINCULADO",J=B.shift?E.get(B.shift.shift_type_code):null;return o.jsxs("tr",{className:`hover:bg-slate-50/50 transition-colors ${U?"bg-slate-50 opacity-60":""}`,children:[o.jsx("td",{className:"sticky left-0 z-10 bg-white border-b border-r px-3 py-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:`font-medium text-sm text-slate-800 truncate ${U?"line-through":""}`,children:B.nombre}),o.jsxs("div",{className:"text-xs text-slate-500 truncate",children:[B.rut," | ",B.horario||"Sin horario",J&&o.jsxs("span",{className:"ml-1 text-brand-600",children:["(",J.name,")"]})]})]}),p&&o.jsx("button",{onClick:()=>p(B),className:"p-1.5 hover:bg-slate-100 rounded text-slate-400 hover:text-brand-600 transition-colors",title:"Configurar turno y das libres",children:o.jsx(Z,{name:"settings",size:16})}),B.admonitionCount&&B.admonitionCount>0&&o.jsx("span",{className:"px-1.5 py-0.5 text-xs font-medium bg-red-100 text-red-700 rounded",children:B.admonitionCount})]})}),u.map(me=>{const K=I(B,me);return o.jsx("td",{className:"border-b p-0.5",children:o.jsx(nfe,{date:me,isOff:K.isOff,horario:K.isOff?void 0:K.horario,reducido:K.reducido,turno:K.turno,mark:K.mark,incidencies:K.incidencies,isToday:n6(me),isDisabled:U,licenseCode:K.license?"LIC":void 0,vacationCode:K.vacation?"VAC":void 0,permissionCode:K.permission?"PER":void 0,onClick:()=>m({staff:B,date:me})})},me)})]},B.id)})]},k)})})]})})]}),o.jsx(vfe,{isOpen:g!==null,onClose:()=>m(null),staff:(g==null?void 0:g.staff)??null,date:(g==null?void 0:g.date)??"",currentMark:g?(we=_.get(`${g.staff.id}-${g.date}`))==null?void 0:we.mark:void 0,currentNote:g?((_e=_.get(`${g.staff.id}-${g.date}`))==null?void 0:_e.note)??void 0:void 0,incidencies:g?R(g.staff.rut,g.date):[],onMarkPresent:Y,onMarkAbsent:ie,onRegisterLicense:re,onRegisterPermission:X,onRegisterVacation:()=>{},onRequestOffboarding:oe&&f&&g?()=>f(g.staff):void 0,isManager:oe??!1})]})},bfe=({kpis:e,isLoading:t})=>{if(t)return o.jsx("div",{className:"flex flex-wrap gap-2",children:[...Array(6)].map((a,i)=>o.jsx("div",{className:"h-8 w-24 bg-slate-100 rounded-lg animate-pulse"},i))});const r=[{label:"Sup",value:e.byPosition.SUPERVISOR},{label:"Insp",value:e.byPosition.INSPECTOR},{label:"Cond",value:e.byPosition.CONDUCTOR},{label:"Plan",value:e.byPosition.PLANILLERO},{label:"Clean",value:e.byPosition.CLEANER}],n=Object.values(e.byPosition).reduce((a,i)=>a+i,0);return o.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[o.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-lg ${Ed.count}`,children:[o.jsx(Z,{name:"users",size:14}),o.jsx("span",{className:"font-medium",children:n}),o.jsx("span",{className:"text-slate-500 hidden sm:inline",children:"Total"})]}),o.jsx("div",{className:"hidden md:flex items-center gap-1",children:r.map(a=>o.jsx("div",{className:"px-2 py-1 rounded bg-slate-50 text-slate-600 font-medium",title:a.label,children:a.value},a.label))}),o.jsx("div",{className:"w-px h-5 bg-slate-200 hidden sm:block"}),o.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-lg ${Ed.programmed}`,children:[o.jsx(Z,{name:"sun",size:14}),o.jsx("span",{className:"font-medium",children:e.programmmedDay}),o.jsx("span",{className:"hidden sm:inline",children:"Da"})]}),o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1.5 rounded-lg bg-indigo-100 text-indigo-700",children:[o.jsx(Z,{name:"moon",size:14}),o.jsx("span",{className:"font-medium",children:e.programmedNight}),o.jsx("span",{className:"hidden sm:inline",children:"Noche"})]}),o.jsx("div",{className:"w-px h-5 bg-slate-200 hidden sm:block"}),e.onLicense>0&&o.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-lg ${Ed.license}`,children:[o.jsx(Z,{name:"file-text",size:14}),o.jsx("span",{className:"font-medium",children:e.onLicense}),o.jsx("span",{className:"hidden sm:inline",children:"Lic"})]}),e.onVacation>0&&o.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-lg ${Ed.vacation}`,children:[o.jsx(Z,{name:"palmtree",size:14}),o.jsx("span",{className:"font-medium",children:e.onVacation}),o.jsx("span",{className:"hidden sm:inline",children:"Vac"})]}),e.onPermission>0&&o.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-lg ${Ed.permission}`,children:[o.jsx(Z,{name:"clock",size:14}),o.jsx("span",{className:"font-medium",children:e.onPermission}),o.jsx("span",{className:"hidden sm:inline",children:"Per"})]}),e.withIncidencies>0&&o.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-lg ${Ed.incident}`,children:[o.jsx(Z,{name:"alert-triangle",size:14}),o.jsx("span",{className:"font-medium",children:e.withIncidencies}),o.jsx("span",{className:"hidden sm:inline",children:"Inc"})]}),e.pendingMarks>0&&o.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-lg ${Ed.pending}`,children:[o.jsx(Z,{name:"alert-circle",size:14}),o.jsx("span",{className:"font-medium",children:e.pendingMarks}),o.jsx("span",{className:"hidden sm:inline",children:"Pend"})]})]})},wfe=()=>{const e=[{label:"Libre (OFF)",colors:Sn.OFF},{label:"Turno Da",colors:Sn.WORK_DIA},{label:"Turno Noche",colors:Sn.WORK_NOCHE},{label:"Presente (P)",colors:Sn.PRESENTE},{label:"Ausente (A)",colors:Sn.AUSENTE},{label:"Licencia (LIC)",colors:Sn.LIC},{label:"Vacaciones (VAC)",colors:Sn.VAC},{label:"Permiso (PER)",colors:Sn.PER},{label:"Pendiente",colors:Sn.PENDING}],t=[{label:"No Marcacin (NM)",className:Gm.NM},{label:"Sin Credencial (NC)",className:Gm.NC},{label:"Cambio Da (CD)",className:Gm.CD},{label:"Autorizacin (AUT)",className:Gm.AUT}];return o.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:[e.map(r=>o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:`w-4 h-4 rounded ${r.colors.bg} ${r.colors.border} border`}),o.jsx("span",{className:"text-slate-600",children:r.label})]},r.label)),o.jsx("div",{className:"w-px h-4 bg-slate-300"}),t.map(r=>{var n;return o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium border ${r.className}`,children:(n=r.label.match(/\((\w+)\)/))==null?void 0:n[1]}),o.jsx("span",{className:"text-slate-600 hidden xl:inline",children:r.label.split(" (")[0]})]},r.label)})]})},_fe="modulepreload",Nfe=function(e,t){return new URL(e,t).href},s6={},ug=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){const s=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(r.map(u=>{if(u=Nfe(u,n),u in s6)return;s6[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!n)for(let g=s.length-1;g>=0;g--){const m=s[g];if(m.href===u&&(!d||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":_fe,d||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((g,m)=>{h.addEventListener("load",g),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return a.then(s=>{for(const l of s||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function zr(e){"@babel/helpers - typeof";return zr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zr(e)}var Jo=Uint8Array,ks=Uint16Array,lE=Int32Array,cE=new Jo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),uE=new Jo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o6=new Jo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sB=function(e,t){for(var r=new ks(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new lE(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},oB=sB(cE,2),Sfe=oB.b,Tj=oB.r;Sfe[28]=258,Tj[258]=28;var jfe=sB(uE,0),l6=jfe.r,Cj=new ks(32768);for(var hn=0;hn<32768;++hn){var su=(hn&43690)>>1|(hn&21845)<<1;su=(su&52428)>>2|(su&13107)<<2,su=(su&61680)>>4|(su&3855)<<4,Cj[hn]=((su&65280)>>8|(su&255)<<8)>>1}var dg=function(e,t,r){for(var n=e.length,a=0,i=new ks(t);a<n;++a)e[a]&&++i[e[a]-1];var s=new ks(t);for(a=1;a<t;++a)s[a]=s[a-1]+i[a-1]<<1;var l;if(r){l=new ks(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=s[e[a]-1]++<<d,p=f|(1<<d)-1;f<=p;++f)l[Cj[f]>>c]=u}else for(l=new ks(n),a=0;a<n;++a)e[a]&&(l[a]=Cj[s[e[a]-1]++]>>15-e[a]);return l},Tf=new Jo(288);for(var hn=0;hn<144;++hn)Tf[hn]=8;for(var hn=144;hn<256;++hn)Tf[hn]=9;for(var hn=256;hn<280;++hn)Tf[hn]=7;for(var hn=280;hn<288;++hn)Tf[hn]=8;var Ob=new Jo(32);for(var hn=0;hn<32;++hn)Ob[hn]=5;var Afe=dg(Tf,9,0),Efe=dg(Ob,5,0),lB=function(e){return(e+7)/8|0},Tfe=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Jo(e.subarray(t,r))},Xl=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Sm=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},G5=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,i=r.slice();if(!a)return{t:uB,l:0};if(a==1){var s=new Jo(r[0].s+1);return s[r[0].s]=1,{t:s,l:1}}r.sort(function(_,E){return _.f-E.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var p=i[0].s,n=1;n<a;++n)i[n].s>p&&(p=i[n].s);var h=new ks(p+1),g=kj(r[d-1],h,0);if(g>t){var n=0,m=0,x=g-t,y=1<<x;for(i.sort(function(E,j){return h[j.s]-h[E.s]||E.f-j.f});n<a;++n){var v=i[n].s;if(h[v]>t)m+=y-(1<<g-h[v]),h[v]=t;else break}for(m>>=x;m>0;){var b=i[n].s;h[b]<t?m-=1<<t-h[b]++-1:++n}for(;n>=0&&m;--n){var N=i[n].s;h[N]==t&&(--h[N],++m)}g=t}return{t:new Jo(h),l:g}},kj=function(e,t,r){return e.s==-1?Math.max(kj(e.l,t,r+1),kj(e.r,t,r+1)):t[e.s]=r},c6=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new ks(++t),n=0,a=e[0],i=1,s=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)s(32754);i>2&&(s(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(s(a),--i;i>6;i-=6)s(8304);i>2&&(s(i-3<<5|8208),i=0)}for(;i--;)s(a);i=1,a=e[l]}return{c:r.subarray(0,n),n:t}},jm=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},cB=function(e,t,r){var n=r.length,a=lB(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<n;++i)e[a+i+4]=r[i];return(a+4+n)*8},u6=function(e,t,r,n,a,i,s,l,c,u,d){Xl(t,d++,r),++a[256];for(var f=G5(a,15),p=f.t,h=f.l,g=G5(i,15),m=g.t,x=g.l,y=c6(p),v=y.c,b=y.n,N=c6(m),_=N.c,E=N.n,j=new ks(19),A=0;A<v.length;++A)++j[v[A]&31];for(var A=0;A<_.length;++A)++j[_[A]&31];for(var T=G5(j,7),P=T.t,O=T.l,R=19;R>4&&!P[o6[R-1]];--R);var I=u+5<<3,z=jm(a,Tf)+jm(i,Ob)+s,Y=jm(a,p)+jm(i,m)+s+14+3*R+jm(j,P)+2*j[16]+3*j[17]+7*j[18];if(c>=0&&I<=z&&I<=Y)return cB(t,d,e.subarray(c,c+u));var ie,re,X,oe;if(Xl(t,d,1+(Y<z)),d+=2,Y<z){ie=dg(p,h,0),re=p,X=dg(m,x,0),oe=m;var we=dg(P,O,0);Xl(t,d,b-257),Xl(t,d+5,E-1),Xl(t,d+10,R-4),d+=14;for(var A=0;A<R;++A)Xl(t,d+3*A,P[o6[A]]);d+=3*R;for(var _e=[v,_],k=0;k<2;++k)for(var F=_e[k],A=0;A<F.length;++A){var B=F[A]&31;Xl(t,d,we[B]),d+=P[B],B>15&&(Xl(t,d,F[A]>>5&127),d+=F[A]>>12)}}else ie=Afe,re=Tf,X=Efe,oe=Ob;for(var A=0;A<l;++A){var U=n[A];if(U>255){var B=U>>18&31;Sm(t,d,ie[B+257]),d+=re[B+257],B>7&&(Xl(t,d,U>>23&31),d+=cE[B]);var J=U&31;Sm(t,d,X[J]),d+=oe[J],J>3&&(Sm(t,d,U>>5&8191),d+=uE[J])}else Sm(t,d,ie[U]),d+=re[U]}return Sm(t,d,ie[256]),d+re[256]},Cfe=new lE([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),uB=new Jo(0),kfe=function(e,t,r,n,a,i){var s=i.z||e.length,l=new Jo(n+s+5*(1+Math.ceil(s/7e3))+a),c=l.subarray(n,l.length-a),u=i.l,d=(i.r||0)&7;if(t){d&&(c[0]=i.r>>3);for(var f=Cfe[t-1],p=f>>13,h=f&8191,g=(1<<r)-1,m=i.p||new ks(32768),x=i.h||new ks(g+1),y=Math.ceil(r/3),v=2*y,b=function(Fe){return(e[Fe]^e[Fe+1]<<y^e[Fe+2]<<v)&g},N=new lE(25e3),_=new ks(288),E=new ks(32),j=0,A=0,T=i.i||0,P=0,O=i.w||0,R=0;T+2<s;++T){var I=b(T),z=T&32767,Y=x[I];if(m[z]=Y,x[I]=z,O<=T){var ie=s-T;if((j>7e3||P>24576)&&(ie>423||!u)){d=u6(e,c,0,N,_,E,A,P,R,T-R,d),P=j=A=0,R=T;for(var re=0;re<286;++re)_[re]=0;for(var re=0;re<30;++re)E[re]=0}var X=2,oe=0,we=h,_e=z-Y&32767;if(ie>2&&I==b(T-_e))for(var k=Math.min(p,ie)-1,F=Math.min(32767,T),B=Math.min(258,ie);_e<=F&&--we&&z!=Y;){if(e[T+X]==e[T+X-_e]){for(var U=0;U<B&&e[T+U]==e[T+U-_e];++U);if(U>X){if(X=U,oe=_e,U>k)break;for(var J=Math.min(_e,U-2),me=0,re=0;re<J;++re){var K=T-_e+re&32767,te=m[K],le=K-te&32767;le>me&&(me=le,Y=K)}}}z=Y,Y=m[z],_e+=z-Y&32767}if(oe){N[P++]=268435456|Tj[X]<<18|l6[oe];var ve=Tj[X]&31,ge=l6[oe]&31;A+=cE[ve]+uE[ge],++_[257+ve],++E[ge],O=T+X,++j}else N[P++]=e[T],++_[e[T]]}}for(T=Math.max(T,O);T<s;++T)N[P++]=e[T],++_[e[T]];d=u6(e,c,u,N,_,E,A,P,R,T-R,d),u||(i.r=d&7|c[d/8|0]<<3,d-=7,i.h=x,i.p=m,i.i=T,i.w=O)}else{for(var T=i.w||0;T<s+u;T+=65535){var Me=T+65535;Me>=s&&(c[d/8|0]=u,Me=s),d=cB(c,d+1,e.subarray(T,Me))}i.i=s}return Tfe(l,0,n+lB(d)+a)},dB=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,i=r.length|0,s=0;s!=i;){for(var l=Math.min(s+2655,i);s<l;++s)a+=n+=r[s];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Ofe=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),s=new Jo(i.length+e.length);s.set(i),s.set(e,i.length),e=s,a.w=i.length}return kfe(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},fB=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Pfe=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=dB();a.p(t.dictionary),fB(e,2,a.d())}};function Oj(e,t){t||(t={});var r=dB();r.p(e);var n=Ofe(e,t,t.dictionary?6:2,4);return Pfe(n,t),fB(n,n.length-4,r.d()),n}var Lfe=typeof TextDecoder<"u"&&new TextDecoder,Rfe=0;try{Lfe.decode(uB,{stream:!0}),Rfe=1}catch{}function Dfe(e){if(Array.isArray(e))return e}function Ife(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function d6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Mfe(e,t){if(e){if(typeof e=="string")return d6(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d6(e,t):void 0}}function Ffe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f6(e,t){return Dfe(e)||Ife(e,t)||Mfe(e,t)||Ffe()}function h6(e,t="utf8"){return new TextDecoder(t).decode(e)}const $fe=new TextEncoder;function Bfe(e){return $fe.encode(e)}const Ufe=1024*8,zfe=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),K5={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class dE{constructor(t=Ufe,r={}){$r(this,"buffer");$r(this,"byteLength");$r(this,"byteOffset");$r(this,"length");$r(this,"offset");$r(this,"lastWrittenByte");$r(this,"littleEndian");$r(this,"_data");$r(this,"_mark");$r(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const a=r.offset?r.offset>>>0:0,i=t.byteLength-a;let s=a;(ArrayBuffer.isView(t)||t instanceof dE)&&(t.byteLength!==t.buffer.byteLength&&(s=t.byteOffset+a),t=t.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=K5[r].BYTES_PER_ELEMENT*t,a=this.byteOffset+this.offset,i=this.buffer.slice(a,a+n);if(this.littleEndian===zfe&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const c=new K5[r](l.buffer);return this.offset+=n,c.reverse(),c}const s=new K5[r](i);return this.offset+=n,s}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return h6(this.readBytes(t))}decodeText(t=1,r="utf8"){return h6(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(Bfe(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Cp(e){let t=e.length;for(;--t>=0;)e[t]=0}const qfe=3,Hfe=258,hB=29,Wfe=256,Vfe=Wfe+1+hB,pB=30,Gfe=512,Kfe=new Array((Vfe+2)*2);Cp(Kfe);const Yfe=new Array(pB*2);Cp(Yfe);const Xfe=new Array(Gfe);Cp(Xfe);const Jfe=new Array(Hfe-qfe+1);Cp(Jfe);const Qfe=new Array(hB);Cp(Qfe);const Zfe=new Array(pB);Cp(Zfe);const ehe=(e,t,r,n)=>{let a=e&65535|0,i=e>>>16&65535|0,s=0;for(;r!==0;){s=r>2e3?2e3:r,r-=s;do a=a+t[n++]|0,i=i+a|0;while(--s);a%=65521,i%=65521}return a|i<<16|0};var Pj=ehe;const the=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},rhe=new Uint32Array(the()),nhe=(e,t,r,n)=>{const a=rhe,i=n+r;e^=-1;for(let s=n;s<i;s++)e=e>>>8^a[(e^t[s])&255];return e^-1};var cl=nhe,Lj={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},mB={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const ahe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var ihe=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)ahe(r,n)&&(e[n]=r[n])}}return e},she=e=>{let t=0;for(let n=0,a=e.length;n<a;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,a=0,i=e.length;n<i;n++){let s=e[n];r.set(s,a),a+=s.length}return r},gB={assign:ihe,flattenChunks:she};let vB=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{vB=!1}const Qg=new Uint8Array(256);for(let e=0;e<256;e++)Qg[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Qg[254]=Qg[254]=1;var ohe=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,a,i,s=e.length,l=0;for(a=0;a<s;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<s&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(l),i=0,a=0;i<l;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<s&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|r&63):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|r&63):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|r&63);return t};const lhe=(e,t)=>{if(t<65534&&e.subarray&&vB)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var che=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,a;const i=new Array(r*2);for(a=0,n=0;n<r;){let s=e[n++];if(s<128){i[a++]=s;continue}let l=Qg[s];if(l>4){i[a++]=65533,n+=l-1;continue}for(s&=l===2?31:l===3?15:7;l>1&&n<r;)s=s<<6|e[n++]&63,l--;if(l>1){i[a++]=65533;continue}s<65536?i[a++]=s:(s-=65536,i[a++]=55296|s>>10&1023,i[a++]=56320|s&1023)}return lhe(i,a)},uhe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+Qg[e[r]]>t?r:t},Rj={string2buf:ohe,buf2string:che,utf8border:uhe};function dhe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var fhe=dhe;const M1=16209,hhe=16191;var phe=function(t,r){let n,a,i,s,l,c,u,d,f,p,h,g,m,x,y,v,b,N,_,E,j,A,T,P;const O=t.state;n=t.next_in,T=t.input,a=n+(t.avail_in-5),i=t.next_out,P=t.output,s=i-(r-t.avail_out),l=i+(t.avail_out-257),c=O.dmax,u=O.wsize,d=O.whave,f=O.wnext,p=O.window,h=O.hold,g=O.bits,m=O.lencode,x=O.distcode,y=(1<<O.lenbits)-1,v=(1<<O.distbits)-1;e:do{g<15&&(h+=T[n++]<<g,g+=8,h+=T[n++]<<g,g+=8),b=m[h&y];t:for(;;){if(N=b>>>24,h>>>=N,g-=N,N=b>>>16&255,N===0)P[i++]=b&65535;else if(N&16){_=b&65535,N&=15,N&&(g<N&&(h+=T[n++]<<g,g+=8),_+=h&(1<<N)-1,h>>>=N,g-=N),g<15&&(h+=T[n++]<<g,g+=8,h+=T[n++]<<g,g+=8),b=x[h&v];r:for(;;){if(N=b>>>24,h>>>=N,g-=N,N=b>>>16&255,N&16){if(E=b&65535,N&=15,g<N&&(h+=T[n++]<<g,g+=8,g<N&&(h+=T[n++]<<g,g+=8)),E+=h&(1<<N)-1,E>c){t.msg="invalid distance too far back",O.mode=M1;break e}if(h>>>=N,g-=N,N=i-s,E>N){if(N=E-N,N>d&&O.sane){t.msg="invalid distance too far back",O.mode=M1;break e}if(j=0,A=p,f===0){if(j+=u-N,N<_){_-=N;do P[i++]=p[j++];while(--N);j=i-E,A=P}}else if(f<N){if(j+=u+f-N,N-=f,N<_){_-=N;do P[i++]=p[j++];while(--N);if(j=0,f<_){N=f,_-=N;do P[i++]=p[j++];while(--N);j=i-E,A=P}}}else if(j+=f-N,N<_){_-=N;do P[i++]=p[j++];while(--N);j=i-E,A=P}for(;_>2;)P[i++]=A[j++],P[i++]=A[j++],P[i++]=A[j++],_-=3;_&&(P[i++]=A[j++],_>1&&(P[i++]=A[j++]))}else{j=i-E;do P[i++]=P[j++],P[i++]=P[j++],P[i++]=P[j++],_-=3;while(_>2);_&&(P[i++]=P[j++],_>1&&(P[i++]=P[j++]))}}else if(N&64){t.msg="invalid distance code",O.mode=M1;break e}else{b=x[(b&65535)+(h&(1<<N)-1)];continue r}break}}else if(N&64)if(N&32){O.mode=hhe;break e}else{t.msg="invalid literal/length code",O.mode=M1;break e}else{b=m[(b&65535)+(h&(1<<N)-1)];continue t}break}}while(n<a&&i<l);_=g>>3,n-=_,g-=_<<3,h&=(1<<g)-1,t.next_in=n,t.next_out=i,t.avail_in=n<a?5+(a-n):5-(n-a),t.avail_out=i<l?257+(l-i):257-(i-l),O.hold=h,O.bits=g};const xh=15,p6=852,m6=592,g6=0,Y5=1,v6=2,mhe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ghe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),vhe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),xhe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),yhe=(e,t,r,n,a,i,s,l)=>{const c=l.bits;let u=0,d=0,f=0,p=0,h=0,g=0,m=0,x=0,y=0,v=0,b,N,_,E,j,A=null,T;const P=new Uint16Array(xh+1),O=new Uint16Array(xh+1);let R=null,I,z,Y;for(u=0;u<=xh;u++)P[u]=0;for(d=0;d<n;d++)P[t[r+d]]++;for(h=c,p=xh;p>=1&&P[p]===0;p--);if(h>p&&(h=p),p===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<p&&P[f]===0;f++);for(h<f&&(h=f),x=1,u=1;u<=xh;u++)if(x<<=1,x-=P[u],x<0)return-1;if(x>0&&(e===g6||p!==1))return-1;for(O[1]=0,u=1;u<xh;u++)O[u+1]=O[u]+P[u];for(d=0;d<n;d++)t[r+d]!==0&&(s[O[t[r+d]]++]=d);if(e===g6?(A=R=s,T=20):e===Y5?(A=mhe,R=ghe,T=257):(A=vhe,R=xhe,T=0),v=0,d=0,u=f,j=i,g=h,m=0,_=-1,y=1<<h,E=y-1,e===Y5&&y>p6||e===v6&&y>m6)return 1;for(;;){I=u-m,s[d]+1<T?(z=0,Y=s[d]):s[d]>=T?(z=R[s[d]-T],Y=A[s[d]-T]):(z=96,Y=0),b=1<<u-m,N=1<<g,f=N;do N-=b,a[j+(v>>m)+N]=I<<24|z<<16|Y|0;while(N!==0);for(b=1<<u-1;v&b;)b>>=1;if(b!==0?(v&=b-1,v+=b):v=0,d++,--P[u]===0){if(u===p)break;u=t[r+s[d]]}if(u>h&&(v&E)!==_){for(m===0&&(m=h),j+=f,g=u-m,x=1<<g;g+m<p&&(x-=P[g+m],!(x<=0));)g++,x<<=1;if(y+=1<<g,e===Y5&&y>p6||e===v6&&y>m6)return 1;_=v&E,a[_]=h<<24|g<<16|j-i|0}}return v!==0&&(a[j+v]=u-m<<24|64<<16|0),l.bits=h,0};var fg=yhe;const bhe=0,xB=1,yB=2,{Z_FINISH:x6,Z_BLOCK:whe,Z_TREES:F1,Z_OK:Cf,Z_STREAM_END:_he,Z_NEED_DICT:Nhe,Z_STREAM_ERROR:lo,Z_DATA_ERROR:bB,Z_MEM_ERROR:wB,Z_BUF_ERROR:She,Z_DEFLATED:y6}=mB,_w=16180,b6=16181,w6=16182,_6=16183,N6=16184,S6=16185,j6=16186,A6=16187,E6=16188,T6=16189,Pb=16190,Jl=16191,X5=16192,C6=16193,J5=16194,k6=16195,O6=16196,P6=16197,L6=16198,$1=16199,B1=16200,R6=16201,D6=16202,I6=16203,M6=16204,F6=16205,Q5=16206,$6=16207,B6=16208,vn=16209,_B=16210,NB=16211,jhe=852,Ahe=592,Ehe=15,The=Ehe,U6=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Che(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Gf=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<_w||t.mode>NB?1:0},SB=e=>{if(Gf(e))return lo;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=_w,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(jhe),t.distcode=t.distdyn=new Int32Array(Ahe),t.sane=1,t.back=-1,Cf},jB=e=>{if(Gf(e))return lo;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,SB(e)},AB=(e,t)=>{let r;if(Gf(e))return lo;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?lo:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,jB(e))},EB=(e,t)=>{if(!e)return lo;const r=new Che;e.state=r,r.strm=e,r.window=null,r.mode=_w;const n=AB(e,t);return n!==Cf&&(e.state=null),n},khe=e=>EB(e,The);let z6=!0,Z5,eN;const Ohe=e=>{if(z6){Z5=new Int32Array(512),eN=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(fg(xB,e.lens,0,288,Z5,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;fg(yB,e.lens,0,32,eN,0,e.work,{bits:5}),z6=!1}e.lencode=Z5,e.lenbits=9,e.distcode=eN,e.distbits=5},TB=(e,t,r,n)=>{let a;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>n&&(a=n),i.window.set(t.subarray(r-n,r-n+a),i.wnext),n-=a,n?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},Phe=(e,t)=>{let r,n,a,i,s,l,c,u,d,f,p,h,g,m,x=0,y,v,b,N,_,E,j,A;const T=new Uint8Array(4);let P,O;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Gf(e)||!e.output||!e.input&&e.avail_in!==0)return lo;r=e.state,r.mode===Jl&&(r.mode=X5),s=e.next_out,a=e.output,c=e.avail_out,i=e.next_in,n=e.input,l=e.avail_in,u=r.hold,d=r.bits,f=l,p=c,A=Cf;e:for(;;)switch(r.mode){case _w:if(r.wrap===0){r.mode=X5;break}for(;d<16;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,T[0]=u&255,T[1]=u>>>8&255,r.check=cl(r.check,T,2,0),u=0,d=0,r.mode=b6;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=vn;break}if((u&15)!==y6){e.msg="unknown compression method",r.mode=vn;break}if(u>>>=4,d-=4,j=(u&15)+8,r.wbits===0&&(r.wbits=j),j>15||j>r.wbits){e.msg="invalid window size",r.mode=vn;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=u&512?T6:Jl,u=0,d=0;break;case b6:for(;d<16;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==y6){e.msg="unknown compression method",r.mode=vn;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=vn;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,r.check=cl(r.check,T,2,0)),u=0,d=0,r.mode=w6;case w6:for(;d<32;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,T[2]=u>>>16&255,T[3]=u>>>24&255,r.check=cl(r.check,T,4,0)),u=0,d=0,r.mode=_6;case _6:for(;d<16;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,r.check=cl(r.check,T,2,0)),u=0,d=0,r.mode=N6;case N6:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,r.check=cl(r.check,T,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=S6;case S6:if(r.flags&1024&&(h=r.length,h>l&&(h=l),h&&(r.head&&(j=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+h),j)),r.flags&512&&r.wrap&4&&(r.check=cl(r.check,n,h,i)),l-=h,i+=h,r.length-=h),r.length))break e;r.length=0,r.mode=j6;case j6:if(r.flags&2048){if(l===0)break e;h=0;do j=n[i+h++],r.head&&j&&r.length<65536&&(r.head.name+=String.fromCharCode(j));while(j&&h<l);if(r.flags&512&&r.wrap&4&&(r.check=cl(r.check,n,h,i)),l-=h,i+=h,j)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=A6;case A6:if(r.flags&4096){if(l===0)break e;h=0;do j=n[i+h++],r.head&&j&&r.length<65536&&(r.head.comment+=String.fromCharCode(j));while(j&&h<l);if(r.flags&512&&r.wrap&4&&(r.check=cl(r.check,n,h,i)),l-=h,i+=h,j)break e}else r.head&&(r.head.comment=null);r.mode=E6;case E6:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){e.msg="header crc mismatch",r.mode=vn;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Jl;break;case T6:for(;d<32;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}e.adler=r.check=U6(u),u=0,d=0,r.mode=Pb;case Pb:if(r.havedict===0)return e.next_out=s,e.avail_out=c,e.next_in=i,e.avail_in=l,r.hold=u,r.bits=d,Nhe;e.adler=r.check=1,r.mode=Jl;case Jl:if(t===whe||t===F1)break e;case X5:if(r.last){u>>>=d&7,d-=d&7,r.mode=Q5;break}for(;d<3;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=C6;break;case 1:if(Ohe(r),r.mode=$1,t===F1){u>>>=2,d-=2;break e}break;case 2:r.mode=O6;break;case 3:e.msg="invalid block type",r.mode=vn}u>>>=2,d-=2;break;case C6:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=vn;break}if(r.length=u&65535,u=0,d=0,r.mode=J5,t===F1)break e;case J5:r.mode=k6;case k6:if(h=r.length,h){if(h>l&&(h=l),h>c&&(h=c),h===0)break e;a.set(n.subarray(i,i+h),s),l-=h,i+=h,c-=h,s+=h,r.length-=h;break}r.mode=Jl;break;case O6:for(;d<14;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=vn;break}r.have=0,r.mode=P6;case P6:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.lens[R[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[R[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,P={bits:r.lenbits},A=fg(bhe,r.lens,0,19,r.lencode,0,r.work,P),r.lenbits=P.bits,A){e.msg="invalid code lengths set",r.mode=vn;break}r.have=0,r.mode=L6;case L6:for(;r.have<r.nlen+r.ndist;){for(;x=r.lencode[u&(1<<r.lenbits)-1],y=x>>>24,v=x>>>16&255,b=x&65535,!(y<=d);){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(b<16)u>>>=y,d-=y,r.lens[r.have++]=b;else{if(b===16){for(O=y+2;d<O;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(u>>>=y,d-=y,r.have===0){e.msg="invalid bit length repeat",r.mode=vn;break}j=r.lens[r.have-1],h=3+(u&3),u>>>=2,d-=2}else if(b===17){for(O=y+3;d<O;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}u>>>=y,d-=y,j=0,h=3+(u&7),u>>>=3,d-=3}else{for(O=y+7;d<O;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}u>>>=y,d-=y,j=0,h=11+(u&127),u>>>=7,d-=7}if(r.have+h>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=vn;break}for(;h--;)r.lens[r.have++]=j}}if(r.mode===vn)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=vn;break}if(r.lenbits=9,P={bits:r.lenbits},A=fg(xB,r.lens,0,r.nlen,r.lencode,0,r.work,P),r.lenbits=P.bits,A){e.msg="invalid literal/lengths set",r.mode=vn;break}if(r.distbits=6,r.distcode=r.distdyn,P={bits:r.distbits},A=fg(yB,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,P),r.distbits=P.bits,A){e.msg="invalid distances set",r.mode=vn;break}if(r.mode=$1,t===F1)break e;case $1:r.mode=B1;case B1:if(l>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=i,e.avail_in=l,r.hold=u,r.bits=d,phe(e,p),s=e.next_out,a=e.output,c=e.avail_out,i=e.next_in,n=e.input,l=e.avail_in,u=r.hold,d=r.bits,r.mode===Jl&&(r.back=-1);break}for(r.back=0;x=r.lencode[u&(1<<r.lenbits)-1],y=x>>>24,v=x>>>16&255,b=x&65535,!(y<=d);){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(v&&!(v&240)){for(N=y,_=v,E=b;x=r.lencode[E+((u&(1<<N+_)-1)>>N)],y=x>>>24,v=x>>>16&255,b=x&65535,!(N+y<=d);){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}u>>>=N,d-=N,r.back+=N}if(u>>>=y,d-=y,r.back+=y,r.length=b,v===0){r.mode=F6;break}if(v&32){r.back=-1,r.mode=Jl;break}if(v&64){e.msg="invalid literal/length code",r.mode=vn;break}r.extra=v&15,r.mode=R6;case R6:if(r.extra){for(O=r.extra;d<O;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=D6;case D6:for(;x=r.distcode[u&(1<<r.distbits)-1],y=x>>>24,v=x>>>16&255,b=x&65535,!(y<=d);){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(!(v&240)){for(N=y,_=v,E=b;x=r.distcode[E+((u&(1<<N+_)-1)>>N)],y=x>>>24,v=x>>>16&255,b=x&65535,!(N+y<=d);){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}u>>>=N,d-=N,r.back+=N}if(u>>>=y,d-=y,r.back+=y,v&64){e.msg="invalid distance code",r.mode=vn;break}r.offset=b,r.extra=v&15,r.mode=I6;case I6:if(r.extra){for(O=r.extra;d<O;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=vn;break}r.mode=M6;case M6:if(c===0)break e;if(h=p-c,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=vn;break}h>r.wnext?(h-=r.wnext,g=r.wsize-h):g=r.wnext-h,h>r.length&&(h=r.length),m=r.window}else m=a,g=s-r.offset,h=r.length;h>c&&(h=c),c-=h,r.length-=h;do a[s++]=m[g++];while(--h);r.length===0&&(r.mode=B1);break;case F6:if(c===0)break e;a[s++]=r.length,c--,r.mode=B1;break;case Q5:if(r.wrap){for(;d<32;){if(l===0)break e;l--,u|=n[i++]<<d,d+=8}if(p-=c,e.total_out+=p,r.total+=p,r.wrap&4&&p&&(e.adler=r.check=r.flags?cl(r.check,a,p,s-p):Pj(r.check,a,p,s-p)),p=c,r.wrap&4&&(r.flags?u:U6(u))!==r.check){e.msg="incorrect data check",r.mode=vn;break}u=0,d=0}r.mode=$6;case $6:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=vn;break}u=0,d=0}r.mode=B6;case B6:A=_he;break e;case vn:A=bB;break e;case _B:return wB;case NB:default:return lo}return e.next_out=s,e.avail_out=c,e.next_in=i,e.avail_in=l,r.hold=u,r.bits=d,(r.wsize||p!==e.avail_out&&r.mode<vn&&(r.mode<Q5||t!==x6))&&TB(e,e.output,e.next_out,p-e.avail_out),f-=e.avail_in,p-=e.avail_out,e.total_in+=f,e.total_out+=p,r.total+=p,r.wrap&4&&p&&(e.adler=r.check=r.flags?cl(r.check,a,p,e.next_out-p):Pj(r.check,a,p,e.next_out-p)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Jl?128:0)+(r.mode===$1||r.mode===J5?256:0),(f===0&&p===0||t===x6)&&A===Cf&&(A=She),A},Lhe=e=>{if(Gf(e))return lo;let t=e.state;return t.window&&(t.window=null),e.state=null,Cf},Rhe=(e,t)=>{if(Gf(e))return lo;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,Cf):lo},Dhe=(e,t)=>{const r=t.length;let n,a,i;return Gf(e)||(n=e.state,n.wrap!==0&&n.mode!==Pb)?lo:n.mode===Pb&&(a=1,a=Pj(a,t,r,0),a!==n.check)?bB:(i=TB(e,t,r,r),i?(n.mode=_B,wB):(n.havedict=1,Cf))};var Ihe=jB,Mhe=AB,Fhe=SB,$he=khe,Bhe=EB,Uhe=Phe,zhe=Lhe,qhe=Rhe,Hhe=Dhe,Whe="pako inflate (from Nodeca project)",nc={inflateReset:Ihe,inflateReset2:Mhe,inflateResetKeep:Fhe,inflateInit:$he,inflateInit2:Bhe,inflate:Uhe,inflateEnd:zhe,inflateGetHeader:qhe,inflateSetDictionary:Hhe,inflateInfo:Whe};function Vhe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Ghe=Vhe;const CB=Object.prototype.toString,{Z_NO_FLUSH:Khe,Z_FINISH:Yhe,Z_OK:Zg,Z_STREAM_END:tN,Z_NEED_DICT:rN,Z_STREAM_ERROR:Xhe,Z_DATA_ERROR:q6,Z_MEM_ERROR:Jhe}=mB;function lx(e){this.options=gB.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new fhe,this.strm.avail_out=0;let r=nc.inflateInit2(this.strm,t.windowBits);if(r!==Zg)throw new Error(Lj[r]);if(this.header=new Ghe,nc.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Rj.string2buf(t.dictionary):CB.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=nc.inflateSetDictionary(this.strm,t.dictionary),r!==Zg)))throw new Error(Lj[r])}lx.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let i,s,l;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?Yhe:Khe,CB.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=nc.inflate(r,s),i===rN&&a&&(i=nc.inflateSetDictionary(r,a),i===Zg?i=nc.inflate(r,s):i===q6&&(i=rN));r.avail_in>0&&i===tN&&r.state.wrap>0&&e[r.next_in]!==0;)nc.inflateReset(r),i=nc.inflate(r,s);switch(i){case Xhe:case q6:case rN:case Jhe:return this.onEnd(i),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||i===tN))if(this.options.to==="string"){let c=Rj.utf8border(r.output,r.next_out),u=r.next_out-c,d=Rj.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===Zg&&l===0)){if(i===tN)return i=nc.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};lx.prototype.onData=function(e){this.chunks.push(e)};lx.prototype.onEnd=function(e){e===Zg&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=gB.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Qhe(e,t){const r=new lx(t);if(r.push(e),r.err)throw r.msg||Lj[r.err];return r.result}var Zhe=lx,e0e=Qhe,t0e={Inflate:Zhe,inflate:e0e};const{Inflate:r0e,inflate:n0e}=t0e;var H6=r0e,a0e=n0e;const kB=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;kB[e]=t}const W6=4294967295;function i0e(e,t,r){let n=e;for(let a=0;a<r;a++)n=kB[(n^t[a])&255]^n>>>8;return n}function s0e(e,t){return(i0e(W6,e,t)^W6)>>>0}function V6(e,t,r){const n=e.readUint32(),a=s0e(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function OB(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function PB(e,t,r,n){let a=0;for(;a<n;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+t[a-n]&255}function LB(e,t,r,n){let a=0;if(r.length===0)for(;a<n;a++)t[a]=e[a];else for(;a<n;a++)t[a]=e[a]+r[a]&255}function RB(e,t,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+(t[i-a]>>1)&255}else{for(;i<a;i++)t[i]=e[i]+(r[i]>>1)&255;for(;i<n;i++)t[i]=e[i]+(t[i-a]+r[i]>>1)&255}}function DB(e,t,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+t[i-a]&255}else{for(;i<a;i++)t[i]=e[i]+r[i]&255;for(;i<n;i++)t[i]=e[i]+o0e(t[i-a],r[i],r[i-a])&255}}function o0e(e,t,r){const n=e+t-r,a=Math.abs(n-e),i=Math.abs(n-t),s=Math.abs(n-r);return a<=i&&a<=s?e:i<=s?t:r}function l0e(e,t,r,n,a,i){switch(e){case 0:OB(t,r,a);break;case 1:PB(t,r,a,i);break;case 2:LB(t,r,n,a);break;case 3:RB(t,r,n,a,i);break;case 4:DB(t,r,n,a,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const c0e=new Uint16Array([255]),u0e=new Uint8Array(c0e.buffer),d0e=u0e[0]===255;function f0e(e){const{data:t,width:r,height:n,channels:a,depth:i}=e,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(i/8)*a,c=new Uint8Array(n*r*l);let u=0;for(let d=0;d<7;d++){const f=s[d],p=Math.ceil((r-f.x)/f.xStep),h=Math.ceil((n-f.y)/f.yStep);if(p<=0||h<=0)continue;const g=p*l,m=new Uint8Array(g);for(let x=0;x<h;x++){const y=t[u++],v=t.subarray(u,u+g);u+=g;const b=new Uint8Array(g);l0e(y,v,b,m,g,l),m.set(b);for(let N=0;N<p;N++){const _=f.x+N*f.xStep,E=f.y+x*f.yStep;if(!(_>=r||E>=n))for(let j=0;j<l;j++)c[(E*r+_)*l+j]=b[N*l+j]}}}if(i===16){const d=new Uint16Array(c.buffer);if(d0e)for(let f=0;f<d.length;f++)d[f]=h0e(d[f]);return d}else return c}function h0e(e){return(e&255)<<8|e>>8&255}const p0e=new Uint16Array([255]),m0e=new Uint8Array(p0e.buffer),g0e=m0e[0]===255,v0e=new Uint8Array(0);function G6(e){const{data:t,width:r,height:n,channels:a,depth:i}=e,s=Math.ceil(i/8)*a,l=Math.ceil(i/8*a*r),c=new Uint8Array(n*l);let u=v0e,d=0,f,p;for(let h=0;h<n;h++){switch(f=t.subarray(d+1,d+1+l),p=c.subarray(h*l,(h+1)*l),t[d]){case 0:OB(f,p,l);break;case 1:PB(f,p,l,s);break;case 2:LB(f,p,u,l);break;case 3:RB(f,p,u,l,s);break;case 4:DB(f,p,u,l,s);break;default:throw new Error(`Unsupported filter: ${t[d]}`)}u=p,d+=l+1}if(i===16){const h=new Uint16Array(c.buffer);if(g0e)for(let g=0;g<h.length;g++)h[g]=x0e(h[g]);return h}else return c}function x0e(e){return(e&255)<<8|e>>8&255}const Sy=Uint8Array.of(137,80,78,71,13,10,26,10);function K6(e){if(!y0e(e.readBytes(Sy.length)))throw new Error("wrong PNG signature")}function y0e(e){if(e.length<Sy.length)return!1;for(let t=0;t<Sy.length;t++)if(e[t]!==Sy[t])return!1;return!0}const b0e="tEXt",w0e=0,IB=new TextDecoder("latin1");function _0e(e){if(S0e(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const N0e=/^[\u0000-\u00FF]*$/;function S0e(e){if(!N0e.test(e))throw new Error("invalid latin1 text")}function j0e(e,t,r){const n=MB(t);e[n]=A0e(t,r-n.length-1)}function MB(e){for(e.mark();e.readByte()!==w0e;);const t=e.offset;e.reset();const r=IB.decode(e.readBytes(t-e.offset-1));return e.skip(1),_0e(r),r}function A0e(e,t){return IB.decode(e.readBytes(t))}const gs={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},nN={UNKNOWN:-1,DEFLATE:0},Y6={UNKNOWN:-1,ADAPTIVE:0},aN={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},U1={NONE:0,BACKGROUND:1,PREVIOUS:2},iN={SOURCE:0,OVER:1};class E0e extends dE{constructor(r,n={}){super(r);$r(this,"_checkCrc");$r(this,"_inflator");$r(this,"_png");$r(this,"_apng");$r(this,"_end");$r(this,"_hasPalette");$r(this,"_palette");$r(this,"_hasTransparency");$r(this,"_transparency");$r(this,"_compressionMethod");$r(this,"_filterMethod");$r(this,"_interlaceMethod");$r(this,"_colorType");$r(this,"_isAnimated");$r(this,"_numberOfFrames");$r(this,"_numberOfPlays");$r(this,"_frames");$r(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new H6,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=nN.UNKNOWN,this._filterMethod=Y6.UNKNOWN,this._interlaceMethod=aN.UNKNOWN,this._colorType=gs.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(K6(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(K6(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case b0e:j0e(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?V6(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?V6(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=T0e(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case gs.GREYSCALE:a=1;break;case gs.TRUECOLOUR:a=3;break;case gs.INDEXED_COLOUR:a=1;break;case gs.GREYSCALE_ALPHA:a=2;break;case gs.TRUECOLOUR_ALPHA:a=4;break;case gs.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==nN.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let i=0;i<n;i++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case gs.GREYSCALE:case gs.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case gs.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case gs.UNKNOWN:case gs.GREYSCALE_ALPHA:case gs.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=MB(this),a=this.readUint8();if(a!==nN.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const i=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:a0e(i)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=G6({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const i=this._apng.frames.at(r-1);this.disposeFrame(a,i,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case U1.NONE:break;case U1.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let s=0;s<this._png.width;s++){const l=(i*r.width+s)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[l+c]=0}break;case U1.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,i=(s,l)=>{const c=((s+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,u=(s*n.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case iN.SOURCE:for(let s=0;s<n.height;s++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=i(s,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case iN.OVER:for(let s=0;s<n.height;s++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=i(s,l);for(let d=0;d<this._png.channels;d++){const f=n.data[u+this._png.channels-1]/a,p=d%(this._png.channels-1)===0?1:n.data[u+d],h=Math.floor(f*p+(1-f)*r.data[c+d]);r.data[c+d]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==Y6.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===aN.NO_INTERLACE)this._png.data=G6({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===aN.ADAM7)this._png.data=f0e({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:U1.NONE,blendOp:iN.SOURCE,data:r}),this._inflator=new H6,this._writingDataChunks=!1}}function T0e(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var X6;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(X6||(X6={}));function C0e(e,t){return new E0e(e,t).decode()}var Gt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function sN(){Gt.console&&typeof Gt.console.log=="function"&&Gt.console.log.apply(Gt.console,arguments)}var Qr={log:sN,warn:function(e){Gt.console&&(typeof Gt.console.warn=="function"?Gt.console.warn.apply(Gt.console,arguments):sN.call(null,arguments))},error:function(e){Gt.console&&(typeof Gt.console.error=="function"?Gt.console.error.apply(Gt.console,arguments):sN(e))}};function oN(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Id(n.response,t,r)},n.onerror=function(){Qr.error("could not download file")},n.send()}function J6(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function z1(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Id=Gt.saveAs||((typeof window>"u"?"undefined":zr(window))!=="object"||window!==Gt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Gt.URL||Gt.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?J6(a.href)?oN(e,t,r):z1(a,a.target="_blank"):z1(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){z1(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(J6(e))oN(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){z1(n)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:zr(i)!=="object"&&(Qr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return oN(e,t,r);var a=e.type==="application/octet-stream",i=/constructor/i.test(Gt.HTMLElement)||Gt.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||a&&i)&&(typeof FileReader>"u"?"undefined":zr(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=s?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(e)}else{var c=Gt.URL||Gt.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function FB(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,s=a.exec(e);s&&(t=i(s),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var jy=Gt.atob.bind(Gt),Q6=Gt.btoa.bind(Gt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function lN(e,t){var r=e[0],n=e[1],a=e[2],i=e[3];r=oi(r,n,a,i,t[0],7,-680876936),i=oi(i,r,n,a,t[1],12,-389564586),a=oi(a,i,r,n,t[2],17,606105819),n=oi(n,a,i,r,t[3],22,-1044525330),r=oi(r,n,a,i,t[4],7,-176418897),i=oi(i,r,n,a,t[5],12,1200080426),a=oi(a,i,r,n,t[6],17,-1473231341),n=oi(n,a,i,r,t[7],22,-45705983),r=oi(r,n,a,i,t[8],7,1770035416),i=oi(i,r,n,a,t[9],12,-1958414417),a=oi(a,i,r,n,t[10],17,-42063),n=oi(n,a,i,r,t[11],22,-1990404162),r=oi(r,n,a,i,t[12],7,1804603682),i=oi(i,r,n,a,t[13],12,-40341101),a=oi(a,i,r,n,t[14],17,-1502002290),r=li(r,n=oi(n,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=li(i,r,n,a,t[6],9,-1069501632),a=li(a,i,r,n,t[11],14,643717713),n=li(n,a,i,r,t[0],20,-373897302),r=li(r,n,a,i,t[5],5,-701558691),i=li(i,r,n,a,t[10],9,38016083),a=li(a,i,r,n,t[15],14,-660478335),n=li(n,a,i,r,t[4],20,-405537848),r=li(r,n,a,i,t[9],5,568446438),i=li(i,r,n,a,t[14],9,-1019803690),a=li(a,i,r,n,t[3],14,-187363961),n=li(n,a,i,r,t[8],20,1163531501),r=li(r,n,a,i,t[13],5,-1444681467),i=li(i,r,n,a,t[2],9,-51403784),a=li(a,i,r,n,t[7],14,1735328473),r=ci(r,n=li(n,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=ci(i,r,n,a,t[8],11,-2022574463),a=ci(a,i,r,n,t[11],16,1839030562),n=ci(n,a,i,r,t[14],23,-35309556),r=ci(r,n,a,i,t[1],4,-1530992060),i=ci(i,r,n,a,t[4],11,1272893353),a=ci(a,i,r,n,t[7],16,-155497632),n=ci(n,a,i,r,t[10],23,-1094730640),r=ci(r,n,a,i,t[13],4,681279174),i=ci(i,r,n,a,t[0],11,-358537222),a=ci(a,i,r,n,t[3],16,-722521979),n=ci(n,a,i,r,t[6],23,76029189),r=ci(r,n,a,i,t[9],4,-640364487),i=ci(i,r,n,a,t[12],11,-421815835),a=ci(a,i,r,n,t[15],16,530742520),r=ui(r,n=ci(n,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=ui(i,r,n,a,t[7],10,1126891415),a=ui(a,i,r,n,t[14],15,-1416354905),n=ui(n,a,i,r,t[5],21,-57434055),r=ui(r,n,a,i,t[12],6,1700485571),i=ui(i,r,n,a,t[3],10,-1894986606),a=ui(a,i,r,n,t[10],15,-1051523),n=ui(n,a,i,r,t[1],21,-2054922799),r=ui(r,n,a,i,t[8],6,1873313359),i=ui(i,r,n,a,t[15],10,-30611744),a=ui(a,i,r,n,t[6],15,-1560198380),n=ui(n,a,i,r,t[13],21,1309151649),r=ui(r,n,a,i,t[4],6,-145523070),i=ui(i,r,n,a,t[11],10,-1120210379),a=ui(a,i,r,n,t[2],15,718787259),n=ui(n,a,i,r,t[9],21,-343485551),e[0]=Ou(r,e[0]),e[1]=Ou(n,e[1]),e[2]=Ou(a,e[2]),e[3]=Ou(i,e[3])}function Nw(e,t,r,n,a,i){return t=Ou(Ou(t,e),Ou(n,i)),Ou(t<<a|t>>>32-a,r)}function oi(e,t,r,n,a,i,s){return Nw(t&r|~t&n,e,t,a,i,s)}function li(e,t,r,n,a,i,s){return Nw(t&n|r&~n,e,t,a,i,s)}function ci(e,t,r,n,a,i,s){return Nw(t^r^n,e,t,a,i,s)}function ui(e,t,r,n,a,i,s){return Nw(r^(t|~n),e,t,a,i,s)}function $B(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)lN(n,k0e(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(lN(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,lN(n,a),n}function k0e(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var Z6="0123456789abcdef".split("");function O0e(e){for(var t="",r=0;r<4;r++)t+=Z6[e>>8*r+4&15]+Z6[e>>8*r&15];return t}function P0e(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Dj(e){return $B(e).map(P0e).join("")}var L0e=function(e){for(var t=0;t<e.length;t++)e[t]=O0e(e[t]);return e.join("")}($B("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ou(e,t){if(L0e){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Ij(e,t){var r,n,a,i;if(e!==r){for(var s=(a=e,i=1+(256/e.length|0),new Array(i+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+s.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=e,n=l}else l=n;var f=t.length,p=0,h=0,g="";for(c=0;c<f;c++)h=(h+(d=l[p=(p+1)%256]))%256,l[p]=l[h],l[h]=d,s=l[(l[p]+l[h])%256],g+=String.fromCharCode(t.charCodeAt(c)^s);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var eP={print:4,modify:8,copy:16,"annot-forms":32};function Th(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(eP.perm!==void 0)throw new Error("Invalid permission: "+l);a+=eP[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),s=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,s),this.P=-(1+(255^a)),this.encryptionKey=Dj(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Ij(this.encryptionKey,this.padding)}function Ch(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);t+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):e[n]}return t}function tP(e){if(zr(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!a],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var s=t[r][i];try{s[0].apply(e,n)}catch(l){Gt.console&&Qr.error("jsPDF PubSub Error",l.message,l)}s[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Lb(e){if(!(this instanceof Lb))return new Lb(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function BB(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function qd(e,t,r,n,a){if(!(this instanceof qd))return new qd(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,BB.call(this,n,a)}function Hh(e,t,r,n,a){if(!(this instanceof Hh))return new Hh(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,BB.call(this,n,a)}function Rt(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],s=[],l=1,c=16,u="S",d=null;zr(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,i=e.compress||e.compressPdf||i,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),s=e.filters||(i===!0?["FlateEncode"]:s),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,p={},h={internal:{},__private__:{}};h.__private__.PubSub=tP;var g="1.3",m=h.__private__.getPdfVersion=function(){return g};h.__private__.setPdfVersion=function(C){g=C};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return x};var y=h.__private__.getPageFormat=function(C){return x[C]};a=a||"a4";var v="compat",b="advanced",N=v;function _(){this.saveGraphicsState(),ee(new mt(qt,0,0,-qt,0,pd()*qt).toString()+" cm"),this.setFontSize(this.getFontSize()/qt),u="n",N=b}function E(){this.restoreGraphicsState(),u="S",N=v}var j=h.__private__.combineFontStyleAndFontWeight=function(C,q){if(C=="bold"&&q=="normal"||C=="bold"&&q==400||C=="normal"&&q=="italic"||C=="bold"&&q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return q&&(C=q==400||q==="normal"?C==="italic"?"italic":"normal":q!=700&&q!=="bold"||C!=="normal"?(q==700?"bold":q)+""+C:"bold"),C};h.advancedAPI=function(C){var q=N===v;return q&&_.call(this),typeof C!="function"||(C(this),q&&E.call(this)),this},h.compatAPI=function(C){var q=N===b;return q&&E.call(this),typeof C!="function"||(C(this),q&&_.call(this)),this},h.isAdvancedAPI=function(){return N===b};var A,T=function(C){if(N!==b)throw new Error(C+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},P=h.roundToPrecision=h.__private__.roundToPrecision=function(C,q){var he=t||q;if(isNaN(C)||isNaN(he))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return C.toFixed(he).replace(/0+$/,"")};A=h.hpf=h.__private__.hpf=typeof c=="number"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return P(C,c)}:c==="smart"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return P(C,C>-1&&C<1?16:5)}:function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return P(C,16)};var O=h.f2=h.__private__.f2=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f2");return P(C,2)},R=h.__private__.f3=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f3");return P(C,3)},I=h.scale=h.__private__.scale=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.scale");return N===v?C*qt:N===b?C:void 0},z=function(C){return I(function(q){return N===v?pd()-q:N===b?q:void 0}(C))};h.__private__.setPrecision=h.setPrecision=function(C){typeof parseInt(C,10)=="number"&&(t=parseInt(C,10))};var Y,ie="00000000000000000000000000000000",re=h.__private__.getFileId=function(){return ie},X=h.__private__.setFileId=function(C){return ie=C!==void 0&&/^[a-fA-F0-9]{32}$/.test(C)?C.toUpperCase():ie.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(fa=new Th(d.userPermissions,d.userPassword,d.ownerPassword,ie)),ie};h.setFileId=function(C){return X(C),this},h.getFileId=function(){return re()};var oe=h.__private__.convertDateToPDFDate=function(C){var q=C.getTimezoneOffset(),he=q<0?"+":"-",be=Math.floor(Math.abs(q/60)),Ae=Math.abs(q%60),He=[he,B(be),"'",B(Ae),"'"].join("");return["D:",C.getFullYear(),B(C.getMonth()+1),B(C.getDate()),B(C.getHours()),B(C.getMinutes()),B(C.getSeconds()),He].join("")},we=h.__private__.convertPDFDateToDate=function(C){var q=parseInt(C.substr(2,4),10),he=parseInt(C.substr(6,2),10)-1,be=parseInt(C.substr(8,2),10),Ae=parseInt(C.substr(10,2),10),He=parseInt(C.substr(12,2),10),Ye=parseInt(C.substr(14,2),10);return new Date(q,he,be,Ae,He,Ye,0)},_e=h.__private__.setCreationDate=function(C){var q;if(C===void 0&&(C=new Date),C instanceof Date)q=oe(C);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(C))throw new Error("Invalid argument passed to jsPDF.setCreationDate");q=C}return Y=q},k=h.__private__.getCreationDate=function(C){var q=Y;return C==="jsDate"&&(q=we(Y)),q};h.setCreationDate=function(C){return _e(C),this},h.getCreationDate=function(C){return k(C)};var F,B=h.__private__.padd2=function(C){return("0"+parseInt(C)).slice(-2)},U=h.__private__.padd2Hex=function(C){return("00"+(C=C.toString())).substr(C.length)},J=0,me=[],K=[],te=0,le=[],ve=[],ge=!1,Me=K;h.__private__.setCustomOutputDestination=function(C){ge=!0,Me=C};var Fe=function(C){ge||(Me=C)};h.__private__.resetCustomOutputDestination=function(){ge=!1,Me=K};var ee=h.__private__.out=function(C){return C=C.toString(),te+=C.length+1,Me.push(C),Me},Pe=h.__private__.write=function(C){return ee(arguments.length===1?C.toString():Array.prototype.join.call(arguments," "))},Ie=h.__private__.getArrayBuffer=function(C){for(var q=C.length,he=new ArrayBuffer(q),be=new Uint8Array(he);q--;)be[q]=C.charCodeAt(q);return he},Qe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return Qe};var $e=e.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(C){return $e=N===b?C/qt:C,this};var it,st=h.__private__.getFontSize=h.getFontSize=function(){return N===v?$e:$e*qt},ut=e.R2L||!1;h.__private__.setR2L=h.setR2L=function(C){return ut=C,this},h.__private__.getR2L=h.getR2L=function(){return ut};var pt,Bt=h.__private__.setZoomMode=function(C){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(C))it=C;else if(isNaN(C)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(C)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+C+'" is not recognized.');it=C}else it=parseInt(C,10)};h.__private__.getZoomMode=function(){return it};var ht,$t=h.__private__.setPageMode=function(C){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(C)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+C+'" is not recognized.');pt=C};h.__private__.getPageMode=function(){return pt};var Jt=h.__private__.setLayoutMode=function(C){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(C)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+C+'" is not recognized.');ht=C};h.__private__.getLayoutMode=function(){return ht},h.__private__.setDisplayMode=h.setDisplayMode=function(C,q,he){return Bt(C),Jt(q),$t(he),this};var At={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(C){if(Object.keys(At).indexOf(C)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return At[C]},h.__private__.getDocumentProperties=function(){return At},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(C){for(var q in At)At.hasOwnProperty(q)&&C[q]&&(At[q]=C[q]);return this},h.__private__.setDocumentProperty=function(C,q){if(Object.keys(At).indexOf(C)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return At[C]=q};var bt,qt,gt,Ut,Qt,Zt={},er={},Ir=[],Pt={},Nr={},Ft={},Ge={},We=null,wt=0,Dt=[],vr=new tP(h),vo=e.hotfixes||[],kn={},Ea={},xi=[],mt=function C(q,he,be,Ae,He,Ye){if(!(this instanceof C))return new C(q,he,be,Ae,He,Ye);isNaN(q)&&(q=1),isNaN(he)&&(he=0),isNaN(be)&&(be=0),isNaN(Ae)&&(Ae=1),isNaN(He)&&(He=0),isNaN(Ye)&&(Ye=0),this._matrix=[q,he,be,Ae,He,Ye]};Object.defineProperty(mt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(mt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(mt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(mt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(mt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(mt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(mt.prototype,"a",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(mt.prototype,"b",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(mt.prototype,"c",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(mt.prototype,"d",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(mt.prototype,"e",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(mt.prototype,"f",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(mt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(mt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(mt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(mt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),mt.prototype.join=function(C){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(C)},mt.prototype.multiply=function(C){var q=C.sx*this.sx+C.shy*this.shx,he=C.sx*this.shy+C.shy*this.sy,be=C.shx*this.sx+C.sy*this.shx,Ae=C.shx*this.shy+C.sy*this.sy,He=C.tx*this.sx+C.ty*this.shx+this.tx,Ye=C.tx*this.shy+C.ty*this.sy+this.ty;return new mt(q,he,be,Ae,He,Ye)},mt.prototype.decompose=function(){var C=this.sx,q=this.shy,he=this.shx,be=this.sy,Ae=this.tx,He=this.ty,Ye=Math.sqrt(C*C+q*q),jt=(C/=Ye)*he+(q/=Ye)*be;he-=C*jt,be-=q*jt;var Ot=Math.sqrt(he*he+be*be);return jt/=Ot,C*(be/=Ot)<q*(he/=Ot)&&(C=-C,q=-q,jt=-jt,Ye=-Ye),{scale:new mt(Ye,0,0,Ot,0,0),translate:new mt(1,0,0,1,Ae,He),rotate:new mt(C,q,-q,C,0,0),skew:new mt(1,0,jt,1,0,0)}},mt.prototype.toString=function(C){return this.join(" ")},mt.prototype.inversed=function(){var C=this.sx,q=this.shy,he=this.shx,be=this.sy,Ae=this.tx,He=this.ty,Ye=1/(C*be-q*he),jt=be*Ye,Ot=-q*Ye,Yt=-he*Ye,sr=C*Ye;return new mt(jt,Ot,Yt,sr,-jt*Ae-Yt*He,-Ot*Ae-sr*He)},mt.prototype.applyToPoint=function(C){var q=C.x*this.sx+C.y*this.shx+this.tx,he=C.x*this.shy+C.y*this.sy+this.ty;return new $l(q,he)},mt.prototype.applyToRectangle=function(C){var q=this.applyToPoint(C),he=this.applyToPoint(new $l(C.x+C.w,C.y+C.h));return new Yp(q.x,q.y,he.x-q.x,he.y-q.y)},mt.prototype.clone=function(){var C=this.sx,q=this.shy,he=this.shx,be=this.sy,Ae=this.tx,He=this.ty;return new mt(C,q,he,be,Ae,He)},h.Matrix=mt;var xo=h.matrixMult=function(C,q){return q.multiply(C)},yo=new mt(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=yo;var ni=function(C,q){if(!Nr[C]){var he=(q instanceof qd?"Sh":"P")+(Object.keys(Pt).length+1).toString(10);q.id=he,Nr[C]=he,Pt[he]=q,vr.publish("addPattern",q)}};h.ShadingPattern=qd,h.TilingPattern=Hh,h.addShadingPattern=function(C,q){return T("addShadingPattern()"),ni(C,q),this},h.beginTilingPattern=function(C){T("beginTilingPattern()"),Xp(C.boundingBox[0],C.boundingBox[1],C.boundingBox[2]-C.boundingBox[0],C.boundingBox[3]-C.boundingBox[1],C.matrix)},h.endTilingPattern=function(C,q){T("endTilingPattern()"),q.stream=ve[F].join(`
`),ni(C,q),vr.publish("endTilingPattern",q),xi.pop().restore()};var qi,gn=h.__private__.newObject=function(){var C=Qn();return W(C,!0),C},Qn=h.__private__.newObjectDeferred=function(){return J++,me[J]=function(){return te},J},W=function(C,q){return q=typeof q=="boolean"&&q,me[C]=te,q&&ee(C+" 0 obj"),C},de=h.__private__.newAdditionalObject=function(){var C={objId:Qn(),content:""};return le.push(C),C},ne=Qn(),se=Qn(),fe=h.__private__.decodeColorString=function(C){var q=C.split(" ");if(q.length!==2||q[1]!=="g"&&q[1]!=="G")q.length!==5||q[4]!=="k"&&q[4]!=="K"||(q=[(1-q[0])*(1-q[3]),(1-q[1])*(1-q[3]),(1-q[2])*(1-q[3]),"r"]);else{var he=parseFloat(q[0]);q=[he,he,he,"r"]}for(var be="#",Ae=0;Ae<3;Ae++)be+=("0"+Math.floor(255*parseFloat(q[Ae])).toString(16)).slice(-2);return be},pe=h.__private__.encodeColorString=function(C){var q;typeof C=="string"&&(C={ch1:C});var he=C.ch1,be=C.ch2,Ae=C.ch3,He=C.ch4,Ye=C.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof he=="string"&&he.charAt(0)!=="#"){var jt=new FB(he);if(jt.ok)he=jt.toHex();else if(!/^\d*\.?\d*$/.test(he))throw new Error('Invalid color "'+he+'" passed to jsPDF.encodeColorString.')}if(typeof he=="string"&&/^#[0-9A-Fa-f]{3}$/.test(he)&&(he="#"+he[1]+he[1]+he[2]+he[2]+he[3]+he[3]),typeof he=="string"&&/^#[0-9A-Fa-f]{6}$/.test(he)){var Ot=parseInt(he.substr(1),16);he=Ot>>16&255,be=Ot>>8&255,Ae=255&Ot}if(be===void 0||He===void 0&&he===be&&be===Ae)q=typeof he=="string"?he+" "+Ye[0]:C.precision===2?O(he/255)+" "+Ye[0]:R(he/255)+" "+Ye[0];else if(He===void 0||zr(He)==="object"){if(He&&!isNaN(He.a)&&He.a===0)return["1.","1.","1.",Ye[1]].join(" ");q=typeof he=="string"?[he,be,Ae,Ye[1]].join(" "):C.precision===2?[O(he/255),O(be/255),O(Ae/255),Ye[1]].join(" "):[R(he/255),R(be/255),R(Ae/255),Ye[1]].join(" ")}else q=typeof he=="string"?[he,be,Ae,He,Ye[2]].join(" "):C.precision===2?[O(he),O(be),O(Ae),O(He),Ye[2]].join(" "):[R(he),R(be),R(Ae),R(He),Ye[2]].join(" ");return q},Te=h.__private__.getFilters=function(){return s},De=h.__private__.putStream=function(C){var q=(C=C||{}).data||"",he=C.filters||Te(),be=C.alreadyAppliedFilters||[],Ae=C.addLength1||!1,He=q.length,Ye=C.objectId,jt=function(ha){return ha};if(d!==null&&Ye===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(jt=fa.encryptor(Ye,0));var Ot={};he===!0&&(he=["FlateEncode"]);var Yt=C.additionalKeyValues||[],sr=(Ot=Rt.API.processDataByFilters!==void 0?Rt.API.processDataByFilters(q,he):{data:q,reverseChain:[]}).reverseChain+(Array.isArray(be)?be.join(" "):be.toString());if(Ot.data.length!==0&&(Yt.push({key:"Length",value:Ot.data.length}),Ae===!0&&Yt.push({key:"Length1",value:He})),sr.length!=0)if(sr.split("/").length-1==1)Yt.push({key:"Filter",value:sr});else{Yt.push({key:"Filter",value:"["+sr+"]"});for(var yr=0;yr<Yt.length;yr+=1)if(Yt[yr].key==="DecodeParms"){for(var _n=[],ta=0;ta<Ot.reverseChain.split("/").length-1;ta+=1)_n.push("null");_n.push(Yt[yr].value),Yt[yr].value="["+_n.join(" ")+"]"}}ee("<<");for(var en=0;en<Yt.length;en++)ee("/"+Yt[en].key+" "+Yt[en].value);ee(">>"),Ot.data.length!==0&&(ee("stream"),ee(jt(Ot.data)),ee("endstream"))},Ce=h.__private__.putPage=function(C){var q=C.number,he=C.data,be=C.objId,Ae=C.contentsObjId;W(be,!0),ee("<</Type /Page"),ee("/Parent "+C.rootDictionaryObjId+" 0 R"),ee("/Resources "+C.resourceDictionaryObjId+" 0 R"),ee("/MediaBox ["+parseFloat(A(C.mediaBox.bottomLeftX))+" "+parseFloat(A(C.mediaBox.bottomLeftY))+" "+A(C.mediaBox.topRightX)+" "+A(C.mediaBox.topRightY)+"]"),C.cropBox!==null&&ee("/CropBox ["+A(C.cropBox.bottomLeftX)+" "+A(C.cropBox.bottomLeftY)+" "+A(C.cropBox.topRightX)+" "+A(C.cropBox.topRightY)+"]"),C.bleedBox!==null&&ee("/BleedBox ["+A(C.bleedBox.bottomLeftX)+" "+A(C.bleedBox.bottomLeftY)+" "+A(C.bleedBox.topRightX)+" "+A(C.bleedBox.topRightY)+"]"),C.trimBox!==null&&ee("/TrimBox ["+A(C.trimBox.bottomLeftX)+" "+A(C.trimBox.bottomLeftY)+" "+A(C.trimBox.topRightX)+" "+A(C.trimBox.topRightY)+"]"),C.artBox!==null&&ee("/ArtBox ["+A(C.artBox.bottomLeftX)+" "+A(C.artBox.bottomLeftY)+" "+A(C.artBox.topRightX)+" "+A(C.artBox.topRightY)+"]"),typeof C.userUnit=="number"&&C.userUnit!==1&&ee("/UserUnit "+C.userUnit),vr.publish("putPage",{objId:be,pageContext:Dt[q],pageNumber:q,page:he}),ee("/Contents "+Ae+" 0 R"),ee(">>"),ee("endobj");var He=he.join(`
`);return N===b&&(He+=`
Q`),W(Ae,!0),De({data:He,filters:Te(),objectId:Ae}),ee("endobj"),be},ke=h.__private__.putPages=function(){var C,q,he=[];for(C=1;C<=wt;C++)Dt[C].objId=Qn(),Dt[C].contentsObjId=Qn();for(C=1;C<=wt;C++)he.push(Ce({number:C,data:ve[C],objId:Dt[C].objId,contentsObjId:Dt[C].contentsObjId,mediaBox:Dt[C].mediaBox,cropBox:Dt[C].cropBox,bleedBox:Dt[C].bleedBox,trimBox:Dt[C].trimBox,artBox:Dt[C].artBox,userUnit:Dt[C].userUnit,rootDictionaryObjId:ne,resourceDictionaryObjId:se}));W(ne,!0),ee("<</Type /Pages");var be="/Kids [";for(q=0;q<wt;q++)be+=he[q]+" 0 R ";ee(be+"]"),ee("/Count "+wt),ee(">>"),ee("endobj"),vr.publish("postPutPages")},Re=function(C){vr.publish("putFont",{font:C,out:ee,newObject:gn,putStream:De}),C.isAlreadyPutted!==!0&&(C.objectNumber=gn(),ee("<<"),ee("/Type /Font"),ee("/BaseFont /"+Ch(C.postScriptName)),ee("/Subtype /Type1"),typeof C.encoding=="string"&&ee("/Encoding /"+C.encoding),ee("/FirstChar 32"),ee("/LastChar 255"),ee(">>"),ee("endobj"))},Je=function(C){C.objectNumber=gn();var q=[];q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Form"}),q.push({key:"BBox",value:"["+[A(C.x),A(C.y),A(C.x+C.width),A(C.y+C.height)].join(" ")+"]"}),q.push({key:"Matrix",value:"["+C.matrix.toString()+"]"});var he=C.pages[1].join(`
`);De({data:he,additionalKeyValues:q,objectId:C.objectNumber}),ee("endobj")},nt=function(C,q){q||(q=21);var he=gn(),be=function(Ye,jt){var Ot,Yt=[],sr=1/(jt-1);for(Ot=0;Ot<1;Ot+=sr)Yt.push(Ot);if(Yt.push(1),Ye[0].offset!=0){var yr={offset:0,color:Ye[0].color};Ye.unshift(yr)}if(Ye[Ye.length-1].offset!=1){var _n={offset:1,color:Ye[Ye.length-1].color};Ye.push(_n)}for(var ta="",en=0,ha=0;ha<Yt.length;ha++){for(Ot=Yt[ha];Ot>Ye[en+1].offset;)en++;var ra=Ye[en].offset,$a=(Ot-ra)/(Ye[en+1].offset-ra),zl=Ye[en].color,_o=Ye[en+1].color;ta+=U(Math.round((1-$a)*zl[0]+$a*_o[0]).toString(16))+U(Math.round((1-$a)*zl[1]+$a*_o[1]).toString(16))+U(Math.round((1-$a)*zl[2]+$a*_o[2]).toString(16))}return ta.trim()}(C.colors,q),Ae=[];Ae.push({key:"FunctionType",value:"0"}),Ae.push({key:"Domain",value:"[0.0 1.0]"}),Ae.push({key:"Size",value:"["+q+"]"}),Ae.push({key:"BitsPerSample",value:"8"}),Ae.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ae.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),De({data:be,additionalKeyValues:Ae,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:he}),ee("endobj"),C.objectNumber=gn(),ee("<< /ShadingType "+C.type),ee("/ColorSpace /DeviceRGB");var He="/Coords ["+A(parseFloat(C.coords[0]))+" "+A(parseFloat(C.coords[1]))+" ";C.type===2?He+=A(parseFloat(C.coords[2]))+" "+A(parseFloat(C.coords[3])):He+=A(parseFloat(C.coords[2]))+" "+A(parseFloat(C.coords[3]))+" "+A(parseFloat(C.coords[4]))+" "+A(parseFloat(C.coords[5])),ee(He+="]"),C.matrix&&ee("/Matrix ["+C.matrix.toString()+"]"),ee("/Function "+he+" 0 R"),ee("/Extend [true true]"),ee(">>"),ee("endobj")},dt=function(C,q){var he=Qn(),be=gn();q.push({resourcesOid:he,objectOid:be}),C.objectNumber=be;var Ae=[];Ae.push({key:"Type",value:"/Pattern"}),Ae.push({key:"PatternType",value:"1"}),Ae.push({key:"PaintType",value:"1"}),Ae.push({key:"TilingType",value:"1"}),Ae.push({key:"BBox",value:"["+C.boundingBox.map(A).join(" ")+"]"}),Ae.push({key:"XStep",value:A(C.xStep)}),Ae.push({key:"YStep",value:A(C.yStep)}),Ae.push({key:"Resources",value:he+" 0 R"}),C.matrix&&Ae.push({key:"Matrix",value:"["+C.matrix.toString()+"]"}),De({data:C.stream,additionalKeyValues:Ae,objectId:C.objectNumber}),ee("endobj")},tt=function(C){for(var q in C.objectNumber=gn(),ee("<<"),C)switch(q){case"opacity":ee("/ca "+O(C[q]));break;case"stroke-opacity":ee("/CA "+O(C[q]))}ee(">>"),ee("endobj")},ct=function(C){W(C.resourcesOid,!0),ee("<<"),ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var q in ee("/Font <<"),Zt)Zt.hasOwnProperty(q)&&(f===!1||f===!0&&p.hasOwnProperty(q))&&ee("/"+q+" "+Zt[q].objectNumber+" 0 R");ee(">>")}(),function(){if(Object.keys(Pt).length>0){for(var q in ee("/Shading <<"),Pt)Pt.hasOwnProperty(q)&&Pt[q]instanceof qd&&Pt[q].objectNumber>=0&&ee("/"+q+" "+Pt[q].objectNumber+" 0 R");vr.publish("putShadingPatternDict"),ee(">>")}}(),function(q){if(Object.keys(Pt).length>0){for(var he in ee("/Pattern <<"),Pt)Pt.hasOwnProperty(he)&&Pt[he]instanceof h.TilingPattern&&Pt[he].objectNumber>=0&&Pt[he].objectNumber<q&&ee("/"+he+" "+Pt[he].objectNumber+" 0 R");vr.publish("putTilingPatternDict"),ee(">>")}}(C.objectOid),function(){if(Object.keys(Ft).length>0){var q;for(q in ee("/ExtGState <<"),Ft)Ft.hasOwnProperty(q)&&Ft[q].objectNumber>=0&&ee("/"+q+" "+Ft[q].objectNumber+" 0 R");vr.publish("putGStateDict"),ee(">>")}}(),function(){for(var q in ee("/XObject <<"),kn)kn.hasOwnProperty(q)&&kn[q].objectNumber>=0&&ee("/"+q+" "+kn[q].objectNumber+" 0 R");vr.publish("putXobjectDict"),ee(">>")}(),ee(">>"),ee("endobj")},Vt=function(C){er[C.fontName]=er[C.fontName]||{},er[C.fontName][C.fontStyle]=C.id},Gr=function(C,q,he,be,Ae){var He={id:"F"+(Object.keys(Zt).length+1).toString(10),postScriptName:C,fontName:q,fontStyle:he,encoding:be,isStandardFont:Ae||!1,metadata:{}};return vr.publish("addFont",{font:He,instance:this}),Zt[He.id]=He,Vt(He),He.id},pr=h.__private__.pdfEscape=h.pdfEscape=function(C,q){return function(he,be){var Ae,He,Ye,jt,Ot,Yt,sr,yr,_n;if(Ye=(be=be||{}).sourceEncoding||"Unicode",Ot=be.outputEncoding,(be.autoencode||Ot)&&Zt[bt].metadata&&Zt[bt].metadata[Ye]&&Zt[bt].metadata[Ye].encoding&&(jt=Zt[bt].metadata[Ye].encoding,!Ot&&Zt[bt].encoding&&(Ot=Zt[bt].encoding),!Ot&&jt.codePages&&(Ot=jt.codePages[0]),typeof Ot=="string"&&(Ot=jt[Ot]),Ot)){for(sr=!1,Yt=[],Ae=0,He=he.length;Ae<He;Ae++)(yr=Ot[he.charCodeAt(Ae)])?Yt.push(String.fromCharCode(yr)):Yt.push(he[Ae]),Yt[Ae].charCodeAt(0)>>8&&(sr=!0);he=Yt.join("")}for(Ae=he.length;sr===void 0&&Ae!==0;)he.charCodeAt(Ae-1)>>8&&(sr=!0),Ae--;if(!sr)return he;for(Yt=be.noBOM?[]:[254,255],Ae=0,He=he.length;Ae<He;Ae++){if((_n=(yr=he.charCodeAt(Ae))>>8)>>8)throw new Error("Character at position "+Ae+" of string '"+he+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Yt.push(_n),Yt.push(yr-(_n<<8))}return String.fromCharCode.apply(void 0,Yt)}(C,q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},On=h.__private__.beginPage=function(C){ve[++wt]=[],Dt[wt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(C[0]),topRightY:Number(C[1])}},rl(wt),Fe(ve[F])},tl=function(C,q){var he,be,Ae;switch(r=q||r,typeof C=="string"&&(he=y(C.toLowerCase()),Array.isArray(he)&&(be=he[0],Ae=he[1])),Array.isArray(C)&&(be=C[0]*qt,Ae=C[1]*qt),isNaN(be)&&(be=a[0],Ae=a[1]),(be>14400||Ae>14400)&&(Qr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),be=Math.min(14400,be),Ae=Math.min(14400,Ae)),a=[be,Ae],r.substr(0,1)){case"l":Ae>be&&(a=[Ae,be]);break;case"p":be>Ae&&(a=[Ae,be])}On(a),tr(Wp),ee(nh),Gp!==0&&ee(Gp+" J"),Kp!==0&&ee(Kp+" j"),vr.publish("addPage",{pageNumber:wt})},bo=function(C){C>0&&C<=wt&&(ve.splice(C,1),Dt.splice(C,1),wt--,F>wt&&(F=wt),this.setPage(F))},rl=function(C){C>0&&C<=wt&&(F=C)},$s=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return ve.length-1},Uc=function(C,q,he){var be,Ae=void 0;return he=he||{},C=C!==void 0?C:Zt[bt].fontName,q=q!==void 0?q:Zt[bt].fontStyle,be=C.toLowerCase(),er[be]!==void 0&&er[be][q]!==void 0?Ae=er[be][q]:er[C]!==void 0&&er[C][q]!==void 0?Ae=er[C][q]:he.disableWarning===!1&&Qr.warn("Unable to look up font label for font '"+C+"', '"+q+"'. Refer to getFontList() for available fonts."),Ae||he.noFallback||(Ae=er.times[q])==null&&(Ae=er.times.normal),Ae},Zn=h.__private__.putInfo=function(){var C=gn(),q=function(be){return be};for(var he in d!==null&&(q=fa.encryptor(C,0)),ee("<<"),ee("/Producer ("+pr(q("jsPDF "+Rt.version))+")"),At)At.hasOwnProperty(he)&&At[he]&&ee("/"+he.substr(0,1).toUpperCase()+he.substr(1)+" ("+pr(q(At[he]))+")");ee("/CreationDate ("+pr(q(Y))+")"),ee(">>"),ee("endobj")},eh=h.__private__.putCatalog=function(C){var q=(C=C||{}).rootDictionaryObjId||ne;switch(gn(),ee("<<"),ee("/Type /Catalog"),ee("/Pages "+q+" 0 R"),it||(it="fullwidth"),it){case"fullwidth":ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ee("/OpenAction [3 0 R /Fit]");break;case"original":ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var he=""+it;he.substr(he.length-1)==="%"&&(it=parseInt(it)/100),typeof it=="number"&&ee("/OpenAction [3 0 R /XYZ null null "+O(it)+"]")}switch(ht||(ht="continuous"),ht){case"continuous":ee("/PageLayout /OneColumn");break;case"single":ee("/PageLayout /SinglePage");break;case"two":case"twoleft":ee("/PageLayout /TwoColumnLeft");break;case"tworight":ee("/PageLayout /TwoColumnRight")}pt&&ee("/PageMode /"+pt),vr.publish("putCatalog"),ee(">>"),ee("endobj")},b_=h.__private__.putTrailer=function(){ee("trailer"),ee("<<"),ee("/Size "+(J+1)),ee("/Root "+J+" 0 R"),ee("/Info "+(J-1)+" 0 R"),d!==null&&ee("/Encrypt "+fa.oid+" 0 R"),ee("/ID [ <"+ie+"> <"+ie+"> ]"),ee(">>")},ea=h.__private__.putHeader=function(){ee("%PDF-"+g),ee("%")},_x=h.__private__.putXRef=function(){var C="0000000000";ee("xref"),ee("0 "+(J+1)),ee("0000000000 65535 f ");for(var q=1;q<=J;q++)typeof me[q]=="function"?ee((C+me[q]()).slice(-10)+" 00000 n "):me[q]!==void 0?ee((C+me[q]).slice(-10)+" 00000 n "):ee("0000000000 00000 n ")},nl=h.__private__.buildDocument=function(){var C;J=0,te=0,K=[],me=[],le=[],ne=Qn(),se=Qn(),Fe(K),vr.publish("buildDocument"),ea(),ke(),function(){vr.publish("putAdditionalObjects");for(var he=0;he<le.length;he++){var be=le[he];W(be.objId,!0),ee(be.content),ee("endobj")}vr.publish("postPutAdditionalObjects")}(),C=[],function(){for(var he in Zt)Zt.hasOwnProperty(he)&&(f===!1||f===!0&&p.hasOwnProperty(he))&&Re(Zt[he])}(),function(){var he;for(he in Ft)Ft.hasOwnProperty(he)&&tt(Ft[he])}(),function(){for(var he in kn)kn.hasOwnProperty(he)&&Je(kn[he])}(),function(he){var be;for(be in Pt)Pt.hasOwnProperty(be)&&(Pt[be]instanceof qd?nt(Pt[be]):Pt[be]instanceof Hh&&dt(Pt[be],he))}(C),vr.publish("putResources"),C.forEach(ct),ct({resourcesOid:se,objectOid:Number.MAX_SAFE_INTEGER}),vr.publish("postPutResources"),d!==null&&(fa.oid=gn(),ee("<<"),ee("/Filter /Standard"),ee("/V "+fa.v),ee("/R "+fa.r),ee("/U <"+fa.toHexString(fa.U)+">"),ee("/O <"+fa.toHexString(fa.O)+">"),ee("/P "+fa.P),ee(">>"),ee("endobj")),Zn(),eh();var q=te;return _x(),b_(),ee("startxref"),ee(""+q),ee("%%EOF"),Fe(ve[F]),K.join(`
`)},th=h.__private__.getBlob=function(C){return new Blob([Ie(C)],{type:"application/pdf"})},Nx=h.output=h.__private__.output=(qi=function(C,q){switch(typeof(q=q||{})=="string"?q={filename:q}:q.filename=q.filename||"generated.pdf",C){case void 0:return nl();case"save":h.save(q.filename);break;case"arraybuffer":return Ie(nl());case"blob":return th(nl());case"bloburi":case"bloburl":if(Gt.URL!==void 0&&typeof Gt.URL.createObjectURL=="function")return Gt.URL&&Gt.URL.createObjectURL(th(nl()))||void 0;Qr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var he="",be=nl();try{he=Q6(be)}catch{he=Q6(unescape(encodeURIComponent(be)))}return"data:application/pdf;filename="+q.filename+";base64,"+he;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Gt)==="[object Window]"){var Ae="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",He=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';q.pdfObjectUrl&&(Ae=q.pdfObjectUrl,He="");var Ye='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ae+'"'+He+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(q)+");<\/script></body></html>",jt=Gt.open();return jt!==null&&jt.document.write(Ye),jt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Gt)==="[object Window]"){var Ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+q.filename+'" width="500px" height="400px" /></body></html>',Yt=Gt.open();if(Yt!==null){Yt.document.write(Ot);var sr=this;Yt.document.documentElement.querySelector("#pdfViewer").onload=function(){Yt.document.title=q.filename,Yt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(sr.output("bloburl"))}}return Yt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Gt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var yr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",q)+'"></iframe></body></html>',_n=Gt.open();if(_n!==null&&(_n.document.write(yr),_n.document.title=q.filename),_n||typeof safari>"u")return _n;break;case"datauri":case"dataurl":return Gt.document.location.href=this.output("datauristring",q);default:return null}},qi.foo=function(){try{return qi.apply(this,arguments)}catch(he){var C=he.stack||"";~C.indexOf(" at ")&&(C=C.split(" at ")[1]);var q="Error in function "+C.split(`
`)[0].split("<")[0]+": "+he.message;if(!Gt.console)throw new Error(q);Gt.console.error(q,he),Gt.alert&&alert(q)}},qi.foo.bar=qi,qi.foo),Bs=function(C){return Array.isArray(vo)===!0&&vo.indexOf(C)>-1};switch(n){case"pt":qt=1;break;case"mm":qt=72/25.4;break;case"cm":qt=72/2.54;break;case"in":qt=72;break;case"px":qt=Bs("px_scaling")==1?.75:96/72;break;case"pc":case"em":qt=12;break;case"ex":qt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);qt=n}var fa=null;_e(),X();var Dl=h.__private__.getPageInfo=h.getPageInfo=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Dt[C].objId,pageNumber:C,pageContext:Dt[C]}},Sx=h.__private__.getPageInfoByObjId=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var q in Dt)if(Dt[q].objId===C)break;return Dl(q)},w_=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:Dt[F].objId,pageNumber:F,pageContext:Dt[F]}};h.addPage=function(){return tl.apply(this,arguments),this},h.setPage=function(){return rl.apply(this,arguments),Fe.call(this,ve[F]),this},h.insertPage=function(C){return this.addPage(),this.movePage(F,C),this},h.movePage=function(C,q){var he,be;if(C>q){he=ve[C],be=Dt[C];for(var Ae=C;Ae>q;Ae--)ve[Ae]=ve[Ae-1],Dt[Ae]=Dt[Ae-1];ve[q]=he,Dt[q]=be,this.setPage(q)}else if(C<q){he=ve[C],be=Dt[C];for(var He=C;He<q;He++)ve[He]=ve[He+1],Dt[He]=Dt[He+1];ve[q]=he,Dt[q]=be,this.setPage(q)}return this},h.deletePage=function(){return bo.apply(this,arguments),this},h.__private__.text=h.text=function(C,q,he,be,Ae){var He,Ye,jt,Ot,Yt,sr,yr,_n,ta,en=(be=be||{}).scope||this;if(typeof C=="number"&&typeof q=="number"&&(typeof he=="string"||Array.isArray(he))){var ha=he;he=q,q=C,C=ha}if(arguments[3]instanceof mt==0?(jt=arguments[4],Ot=arguments[5],zr(yr=arguments[3])==="object"&&yr!==null||(typeof jt=="string"&&(Ot=jt,jt=null),typeof yr=="string"&&(Ot=yr,yr=null),typeof yr=="number"&&(jt=yr,yr=null),be={flags:yr,angle:jt,align:Ot})):(T("The transform parameter of text() with a Matrix value"),ta=Ae),isNaN(q)||isNaN(he)||C==null)throw new Error("Invalid arguments passed to jsPDF.text");if(C.length===0)return en;var ra,$a="",zl=typeof be.lineHeightFactor=="number"?be.lineHeightFactor:dd,_o=en.internal.scaleFactor;function ql(Or){return Or=Or.split("	").join(Array(be.TabLen||9).join(" ")),pr(Or,yr)}function Qp(Or){for(var Xr,zn=Or.concat(),pa=[],Vl=zn.length;Vl--;)typeof(Xr=zn.shift())=="string"?pa.push(Xr):Array.isArray(Or)&&(Xr.length===1||Xr[1]===void 0&&Xr[2]===void 0)?pa.push(Xr[0]):pa.push([Xr[0],Xr[1],Xr[2]]);return pa}function ih(Or,Xr){var zn;if(typeof Or=="string")zn=Xr(Or)[0];else if(Array.isArray(Or)){for(var pa,Vl,lm=Or.concat(),lh=[],Dx=lm.length;Dx--;)typeof(pa=lm.shift())=="string"?lh.push(Xr(pa)[0]):Array.isArray(pa)&&typeof pa[0]=="string"&&(Vl=Xr(pa[0],pa[1],pa[2]),lh.push([Vl[0],Vl[1],Vl[2]]));zn=lh}return zn}var zc=!1,md=!0;if(typeof C=="string")zc=!0;else if(Array.isArray(C)){var gd=C.concat();Ye=[];for(var qc,Ba=gd.length;Ba--;)(typeof(qc=gd.shift())!="string"||Array.isArray(qc)&&typeof qc[0]!="string")&&(md=!1);zc=md}if(zc===!1)throw new Error('Type of text must be string or Array. "'+C+'" is not recognized.');typeof C=="string"&&(C=C.match(/[\r?\n]/)?C.split(/\r\n|\r|\n/g):[C]);var vd=$e/en.internal.scaleFactor,xd=vd*(zl-1);switch(be.baseline){case"bottom":he-=xd;break;case"top":he+=vd-xd;break;case"hanging":he+=vd-2*xd;break;case"middle":he+=vd/2-xd}if((sr=be.maxWidth||0)>0&&(typeof C=="string"?C=en.splitTextToSize(C,sr):Object.prototype.toString.call(C)==="[object Array]"&&(C=C.reduce(function(Or,Xr){return Or.concat(en.splitTextToSize(Xr,sr))},[]))),He={text:C,x:q,y:he,options:be,mutex:{pdfEscape:pr,activeFontKey:bt,fonts:Zt,activeFontSize:$e}},vr.publish("preProcessText",He),C=He.text,jt=(be=He.options).angle,ta instanceof mt==0&&jt&&typeof jt=="number"){jt*=Math.PI/180,be.rotationDirection===0&&(jt=-jt),N===b&&(jt=-jt);var Zp=Math.cos(jt),em=Math.sin(jt);ta=new mt(Zp,em,-em,Zp,0,0)}else jt&&jt instanceof mt&&(ta=jt);N!==b||ta||(ta=yo),(Yt=be.charSpace||Fl)!==void 0&&($a+=A(I(Yt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(_n=be.horizontalScale)!==void 0&&($a+=A(100*_n)+` Tz
`),be.lang;var yi=-1,Hl=be.renderingMode!==void 0?be.renderingMode:be.stroke,sh=en.internal.getCurrentPageInfo().pageContext;switch(Hl){case 0:case!1:case"fill":yi=0;break;case 1:case!0:case"stroke":yi=1;break;case 2:case"fillThenStroke":yi=2;break;case 3:case"invisible":yi=3;break;case 4:case"fillAndAddForClipping":yi=4;break;case 5:case"strokeAndAddPathForClipping":yi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":yi=6;break;case 7:case"addToPathForClipping":yi=7}var Lx=sh.usedRenderingMode!==void 0?sh.usedRenderingMode:-1;yi!==-1?$a+=yi+` Tr
`:Lx!==-1&&($a+=`0 Tr
`),yi!==-1&&(sh.usedRenderingMode=yi),Ot=be.align||"left";var Us,yd=$e*zl,tm=en.internal.pageSize.getWidth(),rm=Zt[bt];Yt=be.charSpace||Fl,sr=be.maxWidth||0,yr=Object.assign({autoencode:!0,noBOM:!0},be.flags);var Hc=[],bd=function(Or){return en.getStringUnitWidth(Or,{font:rm,charSpace:Yt,fontSize:$e,doKerning:!1})*$e/_o};if(Object.prototype.toString.call(C)==="[object Array]"){var ls;Ye=Qp(C),Ot!=="left"&&(Us=Ye.map(bd));var cs,Wc=0;if(Ot==="right"){q-=Us[0],C=[],Ba=Ye.length;for(var Wl=0;Wl<Ba;Wl++)Wl===0?(cs=Il(q),ls=Ml(he)):(cs=I(Wc-Us[Wl]),ls=-yd),C.push([Ye[Wl],cs,ls]),Wc=Us[Wl]}else if(Ot==="center"){q-=Us[0]/2,C=[],Ba=Ye.length;for(var Vc=0;Vc<Ba;Vc++)Vc===0?(cs=Il(q),ls=Ml(he)):(cs=I((Wc-Us[Vc])/2),ls=-yd),C.push([Ye[Vc],cs,ls]),Wc=Us[Vc]}else if(Ot==="left"){C=[],Ba=Ye.length;for(var nm=0;nm<Ba;nm++)C.push(Ye[nm])}else if(Ot==="justify"&&rm.encoding==="Identity-H"){C=[],Ba=Ye.length,sr=sr!==0?sr:tm;for(var oh=0,Un=0;Un<Ba;Un++)if(ls=Un===0?Ml(he):-yd,cs=Un===0?Il(q):oh,Un<Ba-1){var Rx=I((sr-Us[Un])/(Ye[Un].split(" ").length-1)),il=Ye[Un].split(" ");C.push([il[0]+" ",cs,ls]),oh=0;for(var sl=1;sl<il.length;sl++){var am=(bd(il[sl-1]+" "+il[sl])-bd(il[sl]))*_o+Rx;sl==il.length-1?C.push([il[sl],am,0]):C.push([il[sl]+" ",am,0]),oh-=am}}else C.push([Ye[Un],cs,ls]);C.push(["",oh,0])}else{if(Ot!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(C=[],Ba=Ye.length,sr=sr!==0?sr:tm,Un=0;Un<Ba;Un++){ls=Un===0?Ml(he):-yd,cs=Un===0?Il(q):0;var im=Ye[Un].split(" ").length-1,sm=im>0?(sr-Us[Un])/im:0;Un<Ba-1?Hc.push(A(I(sm))):Hc.push(0),C.push([Ye[Un],cs,ls])}}}(typeof be.R2L=="boolean"?be.R2L:ut)===!0&&(C=ih(C,function(Or,Xr,zn){return[Or.split("").reverse().join(""),Xr,zn]})),He={text:C,x:q,y:he,options:be,mutex:{pdfEscape:pr,activeFontKey:bt,fonts:Zt,activeFontSize:$e}},vr.publish("postProcessText",He),C=He.text,ra=He.mutex.isHex||!1;var om=Zt[bt].encoding;om!=="WinAnsiEncoding"&&om!=="StandardEncoding"||(C=ih(C,function(Or,Xr,zn){return[ql(Or),Xr,zn]})),Ye=Qp(C),C=[];for(var Gc,Kc,Yc,wd=Array.isArray(Ye[0])?1:0,Xc="",_d=function(Or,Xr,zn){var pa="";return zn instanceof mt?(zn=typeof be.angle=="number"?xo(zn,new mt(1,0,0,1,Or,Xr)):xo(new mt(1,0,0,1,Or,Xr),zn),N===b&&(zn=xo(new mt(1,0,0,-1,0,0),zn)),pa=zn.join(" ")+` Tm
`):pa=A(Or)+" "+A(Xr)+` Td
`,pa},zs=0;zs<Ye.length;zs++){switch(Xc="",wd){case 1:Yc=(ra?"<":"(")+Ye[zs][0]+(ra?">":")"),Gc=parseFloat(Ye[zs][1]),Kc=parseFloat(Ye[zs][2]);break;case 0:Yc=(ra?"<":"(")+Ye[zs]+(ra?">":")"),Gc=Il(q),Kc=Ml(he)}Hc!==void 0&&Hc[zs]!==void 0&&(Xc=Hc[zs]+` Tw
`),zs===0?C.push(Xc+_d(Gc,Kc,ta)+Yc):wd===0?C.push(Xc+Yc):wd===1&&C.push(Xc+_d(Gc,Kc,ta)+Yc)}C=wd===0?C.join(` Tj
T* `):C.join(` Tj
`),C+=` Tj
`;var ol=`BT
/`;return ol+=bt+" "+$e+` Tf
`,ol+=A($e*zl)+` TL
`,ol+=fd+`
`,ol+=$a,ol+=C,ee(ol+="ET"),p[bt]=!0,en};var __=h.__private__.clip=h.clip=function(C){return ee(C==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return __("evenodd")},h.__private__.discardPath=h.discardPath=function(){return ee("n"),this};var al=h.__private__.isValidStyle=function(C){var q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(C)!==-1&&(q=!0),q};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(C){return al(C)&&(u=C),this};var jx=h.__private__.getStyle=h.getStyle=function(C){var q=u;switch(C){case"D":case"S":q="S";break;case"F":q="f";break;case"FD":case"DF":q="B";break;case"f":case"f*":case"B":case"B*":q=C}return q},Ax=h.close=function(){return ee("h"),this};h.stroke=function(){return ee("S"),this},h.fill=function(C){return rh("f",C),this},h.fillEvenOdd=function(C){return rh("f*",C),this},h.fillStroke=function(C){return rh("B",C),this},h.fillStrokeEvenOdd=function(C){return rh("B*",C),this};var rh=function(C,q){zr(q)==="object"?S_(q,C):ee(C)},ud=function(C){C===null||N===b&&C===void 0||(C=jx(C),ee(C))};function N_(C,q,he,be,Ae){var He=new Hh(q||this.boundingBox,he||this.xStep,be||this.yStep,this.gState,Ae||this.matrix);He.stream=this.stream;var Ye=C+"$$"+this.cloneIndex+++"$$";return ni(Ye,He),He}var S_=function(C,q){var he=Nr[C.key],be=Pt[he];if(be instanceof qd)ee("q"),ee(j_(q)),be.gState&&h.setGState(be.gState),ee(C.matrix.toString()+" cm"),ee("/"+he+" sh"),ee("Q");else if(be instanceof Hh){var Ae=new mt(1,0,0,-1,0,pd());C.matrix&&(Ae=Ae.multiply(C.matrix||yo),he=N_.call(be,C.key,C.boundingBox,C.xStep,C.yStep,Ae).id),ee("q"),ee("/Pattern cs"),ee("/"+he+" scn"),be.gState&&h.setGState(be.gState),ee(q),ee("Q")}},j_=function(C){switch(C){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Hp=h.moveTo=function(C,q){return ee(A(I(C))+" "+A(z(q))+" m"),this},Ex=h.lineTo=function(C,q){return ee(A(I(C))+" "+A(z(q))+" l"),this},wo=h.curveTo=function(C,q,he,be,Ae,He){return ee([A(I(C)),A(z(q)),A(I(he)),A(z(be)),A(I(Ae)),A(z(He)),"c"].join(" ")),this};h.__private__.line=h.line=function(C,q,he,be,Ae){if(isNaN(C)||isNaN(q)||isNaN(he)||isNaN(be)||!al(Ae))throw new Error("Invalid arguments passed to jsPDF.line");return N===v?this.lines([[he-C,be-q]],C,q,[1,1],Ae||"S"):this.lines([[he-C,be-q]],C,q,[1,1]).stroke()},h.__private__.lines=h.lines=function(C,q,he,be,Ae,He){var Ye,jt,Ot,Yt,sr,yr,_n,ta,en,ha,ra,$a;if(typeof C=="number"&&($a=he,he=q,q=C,C=$a),be=be||[1,1],He=He||!1,isNaN(q)||isNaN(he)||!Array.isArray(C)||!Array.isArray(be)||!al(Ae)||typeof He!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Hp(q,he),Ye=be[0],jt=be[1],Yt=C.length,ha=q,ra=he,Ot=0;Ot<Yt;Ot++)(sr=C[Ot]).length===2?(ha=sr[0]*Ye+ha,ra=sr[1]*jt+ra,Ex(ha,ra)):(yr=sr[0]*Ye+ha,_n=sr[1]*jt+ra,ta=sr[2]*Ye+ha,en=sr[3]*jt+ra,ha=sr[4]*Ye+ha,ra=sr[5]*jt+ra,wo(yr,_n,ta,en,ha,ra));return He&&Ax(),ud(Ae),this},h.path=function(C){for(var q=0;q<C.length;q++){var he=C[q],be=he.c;switch(he.op){case"m":Hp(be[0],be[1]);break;case"l":Ex(be[0],be[1]);break;case"c":wo.apply(this,be);break;case"h":Ax()}}return this},h.__private__.rect=h.rect=function(C,q,he,be,Ae){if(isNaN(C)||isNaN(q)||isNaN(he)||isNaN(be)||!al(Ae))throw new Error("Invalid arguments passed to jsPDF.rect");return N===v&&(be=-be),ee([A(I(C)),A(z(q)),A(I(he)),A(I(be)),"re"].join(" ")),ud(Ae),this},h.__private__.triangle=h.triangle=function(C,q,he,be,Ae,He,Ye){if(isNaN(C)||isNaN(q)||isNaN(he)||isNaN(be)||isNaN(Ae)||isNaN(He)||!al(Ye))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[he-C,be-q],[Ae-he,He-be],[C-Ae,q-He]],C,q,[1,1],Ye,!0),this},h.__private__.roundedRect=h.roundedRect=function(C,q,he,be,Ae,He,Ye){if(isNaN(C)||isNaN(q)||isNaN(he)||isNaN(be)||isNaN(Ae)||isNaN(He)||!al(Ye))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var jt=4/3*(Math.SQRT2-1);return Ae=Math.min(Ae,.5*he),He=Math.min(He,.5*be),this.lines([[he-2*Ae,0],[Ae*jt,0,Ae,He-He*jt,Ae,He],[0,be-2*He],[0,He*jt,-Ae*jt,He,-Ae,He],[2*Ae-he,0],[-Ae*jt,0,-Ae,-He*jt,-Ae,-He],[0,2*He-be],[0,-He*jt,Ae*jt,-He,Ae,-He]],C+Ae,q,[1,1],Ye,!0),this},h.__private__.ellipse=h.ellipse=function(C,q,he,be,Ae){if(isNaN(C)||isNaN(q)||isNaN(he)||isNaN(be)||!al(Ae))throw new Error("Invalid arguments passed to jsPDF.ellipse");var He=4/3*(Math.SQRT2-1)*he,Ye=4/3*(Math.SQRT2-1)*be;return Hp(C+he,q),wo(C+he,q-Ye,C+He,q-be,C,q-be),wo(C-He,q-be,C-he,q-Ye,C-he,q),wo(C-he,q+Ye,C-He,q+be,C,q+be),wo(C+He,q+be,C+he,q+Ye,C+he,q),ud(Ae),this},h.__private__.circle=h.circle=function(C,q,he,be){if(isNaN(C)||isNaN(q)||isNaN(he)||!al(be))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(C,q,he,he,be)},h.setFont=function(C,q,he){return he&&(q=j(q,he)),bt=Uc(C,q,{disableWarning:!1}),this};var A_=h.__private__.getFont=h.getFont=function(){return Zt[Uc.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var C,q,he={};for(C in er)if(er.hasOwnProperty(C))for(q in he[C]=[],er[C])er[C].hasOwnProperty(q)&&he[C].push(q);return he},h.addFont=function(C,q,he,be,Ae){var He=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&He.indexOf(arguments[3])!==-1?Ae=arguments[3]:arguments[3]&&He.indexOf(arguments[3])==-1&&(he=j(he,be)),Gr.call(this,C,q,he,Ae=Ae||"Identity-H")};var dd,Wp=e.lineWidth||.200025,E_=h.__private__.getLineWidth=h.getLineWidth=function(){return Wp},tr=h.__private__.setLineWidth=h.setLineWidth=function(C){return Wp=C,ee(A(I(C))+" w"),this};h.__private__.setLineDash=Rt.API.setLineDash=Rt.API.setLineDashPattern=function(C,q){if(C=C||[],q=q||0,isNaN(q)||!Array.isArray(C))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return C=C.map(function(he){return A(I(he))}).join(" "),q=A(I(q)),ee("["+C+"] "+q+" d"),this};var T_=h.__private__.getLineHeight=h.getLineHeight=function(){return $e*dd};h.__private__.getLineHeight=h.getLineHeight=function(){return $e*dd};var C_=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(C){return typeof(C=C||1.15)=="number"&&(dd=C),this},k_=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return dd};C_(e.lineHeight);var Il=h.__private__.getHorizontalCoordinate=function(C){return I(C)},Ml=h.__private__.getVerticalCoordinate=function(C){return N===b?C:Dt[F].mediaBox.topRightY-Dt[F].mediaBox.bottomLeftY-I(C)},O_=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(C){return A(Il(C))},P_=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(C){return A(Ml(C))},nh=e.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return fe(nh)},h.__private__.setStrokeColor=h.setDrawColor=function(C,q,he,be){return nh=pe({ch1:C,ch2:q,ch3:he,ch4:be,pdfColorType:"draw",precision:2}),ee(nh),this};var Vp=e.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return fe(Vp)},h.__private__.setFillColor=h.setFillColor=function(C,q,he,be){return Vp=pe({ch1:C,ch2:q,ch3:he,ch4:be,pdfColorType:"fill",precision:2}),ee(Vp),this};var fd=e.textColor||"0 g",L_=h.__private__.getTextColor=h.getTextColor=function(){return fe(fd)};h.__private__.setTextColor=h.setTextColor=function(C,q,he,be){return fd=pe({ch1:C,ch2:q,ch3:he,ch4:be,pdfColorType:"text",precision:3}),this};var Fl=e.charSpace,R_=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(Fl||0)};h.__private__.setCharSpace=h.setCharSpace=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Fl=C,this};var Gp=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(C){var q=h.CapJoinStyles[C];if(q===void 0)throw new Error("Line cap style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Gp=q,ee(q+" J"),this};var Kp=0;h.__private__.setLineJoin=h.setLineJoin=function(C){var q=h.CapJoinStyles[C];if(q===void 0)throw new Error("Line join style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Kp=q,ee(q+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(C){if(C=C||0,isNaN(C))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ee(A(I(C))+" M"),this},h.GState=Lb,h.setGState=function(C){(C=typeof C=="string"?Ft[Ge[C]]:Tx(null,C)).equals(We)||(ee("/"+C.id+" gs"),We=C)};var Tx=function(C,q){if(!C||!Ge[C]){var he=!1;for(var be in Ft)if(Ft.hasOwnProperty(be)&&Ft[be].equals(q)){he=!0;break}if(he)q=Ft[be];else{var Ae="GS"+(Object.keys(Ft).length+1).toString(10);Ft[Ae]=q,q.id=Ae}return C&&(Ge[C]=q.id),vr.publish("addGState",q),q}};h.addGState=function(C,q){return Tx(C,q),this},h.saveGraphicsState=function(){return ee("q"),Ir.push({key:bt,size:$e,color:fd}),this},h.restoreGraphicsState=function(){ee("Q");var C=Ir.pop();return bt=C.key,$e=C.size,fd=C.color,We=null,this},h.setCurrentTransformationMatrix=function(C){return ee(C.toString()+" cm"),this},h.comment=function(C){return ee("#"+C),this};var $l=function(C,q){var he=C||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return he},set:function(He){isNaN(He)||(he=parseFloat(He))}});var be=q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return be},set:function(He){isNaN(He)||(be=parseFloat(He))}});var Ae="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ae},set:function(He){Ae=He.toString()}}),this},Yp=function(C,q,he,be){$l.call(this,C,q),this.type="rect";var Ae=he||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ae},set:function(Ye){isNaN(Ye)||(Ae=parseFloat(Ye))}});var He=be||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return He},set:function(Ye){isNaN(Ye)||(He=parseFloat(Ye))}}),this},ah=function(){this.page=wt,this.currentPage=F,this.pages=ve.slice(0),this.pagesContext=Dt.slice(0),this.x=gt,this.y=Ut,this.matrix=Qt,this.width=Jp(F),this.height=kx(F),this.outputDestination=Me,this.id="",this.objectNumber=-1};ah.prototype.restore=function(){wt=this.page,F=this.currentPage,Dt=this.pagesContext,ve=this.pages,gt=this.x,Ut=this.y,Qt=this.matrix,Cx(F,this.width),Bl(F,this.height),Me=this.outputDestination};var Xp=function(C,q,he,be,Ae){xi.push(new ah),wt=F=0,ve=[],gt=C,Ut=q,Qt=Ae,On([he,be])};for(var hd in h.beginFormObject=function(C,q,he,be,Ae){return Xp(C,q,he,be,Ae),this},h.endFormObject=function(C){return function(q){if(Ea[q])xi.pop().restore();else{var he=new ah,be="Xo"+(Object.keys(kn).length+1).toString(10);he.id=be,Ea[q]=be,kn[be]=he,vr.publish("addFormObject",he),xi.pop().restore()}}(C),this},h.doFormObject=function(C,q){var he=kn[Ea[C]];return ee("q"),ee(q.toString()+" cm"),ee("/"+he.id+" Do"),ee("Q"),this},h.getFormObject=function(C){var q=kn[Ea[C]];return{x:q.x,y:q.y,width:q.width,height:q.height,matrix:q.matrix}},h.save=function(C,q){return C=C||"generated.pdf",(q=q||{}).returnPromise=q.returnPromise||!1,q.returnPromise===!1?(Id(th(nl()),C),typeof Id.unload=="function"&&Gt.setTimeout&&setTimeout(Id.unload,911),this):new Promise(function(he,be){try{var Ae=Id(th(nl()),C);typeof Id.unload=="function"&&Gt.setTimeout&&setTimeout(Id.unload,911),he(Ae)}catch(He){be(He.message)}})},Rt.API)Rt.API.hasOwnProperty(hd)&&(hd==="events"&&Rt.API.events.length?function(C,q){var he,be,Ae;for(Ae=q.length-1;Ae!==-1;Ae--)he=q[Ae][0],be=q[Ae][1],C.subscribe.apply(C,[he].concat(typeof be=="function"?[be]:be))}(vr,Rt.API.events):h[hd]=Rt.API[hd]);function Jp(C){return Dt[C].mediaBox.topRightX-Dt[C].mediaBox.bottomLeftX}function Cx(C,q){Dt[C].mediaBox.topRightX=q+Dt[C].mediaBox.bottomLeftX}function kx(C){return Dt[C].mediaBox.topRightY-Dt[C].mediaBox.bottomLeftY}function Bl(C,q){Dt[C].mediaBox.topRightY=q+Dt[C].mediaBox.bottomLeftY}var Ul=h.getPageWidth=function(C){return Jp(C=C||F)/qt},Ox=h.setPageWidth=function(C,q){Cx(C,q*qt)},pd=h.getPageHeight=function(C){return kx(C=C||F)/qt},Px=h.setPageHeight=function(C,q){Bl(C,q*qt)};return h.internal={pdfEscape:pr,getStyle:jx,getFont:A_,getFontSize:st,getCharSpace:R_,getTextColor:L_,getLineHeight:T_,getLineHeightFactor:k_,getLineWidth:E_,write:Pe,getHorizontalCoordinate:Il,getVerticalCoordinate:Ml,getCoordinateString:O_,getVerticalCoordinateString:P_,collections:{},newObject:gn,newAdditionalObject:de,newObjectDeferred:Qn,newObjectDeferredBegin:W,getFilters:Te,putStream:De,events:vr,scaleFactor:qt,pageSize:{getWidth:function(){return Ul(F)},setWidth:function(C){Ox(F,C)},getHeight:function(){return pd(F)},setHeight:function(C){Px(F,C)}},encryptionOptions:d,encryption:fa,getEncryptor:function(C){return d!==null?fa.encryptor(C,0):function(q){return q}},output:Nx,getNumberOfPages:$s,get pages(){return ve},out:ee,f2:O,f3:R,getPageInfo:Dl,getPageInfoByObjId:Sx,getCurrentPageInfo:w_,getPDFVersion:m,Point:$l,Rectangle:Yp,Matrix:mt,hasHotfix:Bs},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return Ul(F)},set:function(C){Ox(F,C)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return pd(F)},set:function(C){Px(F,C)},enumerable:!0,configurable:!0}),(function(C){for(var q=0,he=Qe.length;q<he;q++){var be=Gr.call(this,C[q][0],C[q][1],C[q][2],Qe[q][3],!0);f===!1&&(p[be]=!0);var Ae=C[q][0].split("-");Vt({id:be,fontName:Ae[0],fontStyle:Ae[1]||""})}vr.publish("addFonts",{fonts:Zt,dictionary:er})}).call(h,Qe),bt="F1",tl(a,r),vr.publish("initialized"),h}Th.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Th.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Th.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Th.prototype.processOwnerPassword=function(e,t){return Ij(Dj(t).substr(0,5),e)},Th.prototype.encryptor=function(e,t){var r=Dj(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return Ij(r,n)}},Lb.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||zr(e)!==zr(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Rt.API={events:[]},Rt.version="3.0.4";var Dn=Rt.API,fE=1,Kf=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},yh=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},nr=function(e){return e.toFixed(2)},ou=function(e){return e.toFixed(5)};Dn.__acroform__={};var ss=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},rP=function(e){return e*fE},fl=function(e){var t=new zB,r=Nt.internal.getHeight(e)||0,n=Nt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(nr(n)),Number(nr(r))],t},R0e=Dn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},D0e=Dn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},I0e=Dn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Kn=Dn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return I0e(e,t-1)},Yn=Dn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return R0e(e,t-1)},Xn=Dn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return D0e(e,t-1)},M0e=Dn.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],i=e[1],s=e[2],l=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(i+l)||0,c.upperRight_X=r(a+s)||0,c.upperRight_Y=n(i)||0,[Number(nr(c.lowerLeft_X)),Number(nr(c.lowerLeft_Y)),Number(nr(c.upperRight_X)),Number(nr(c.upperRight_Y))]},F0e=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=Mj(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+nr(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=fl(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},Mj=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(O){return O.split(`
`)}):a.map(function(O){return[O]});var i=r,s=Nt.internal.getHeight(e)||0;s=s<0?-s:s;var l=Nt.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(O,R,I){if(O+1<a.length){var z=R+" "+a[O+1][0];return q1(z,e,I).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var u,d,f=q1("3",e,i).height,p=e.multiline?s-i:(s-f)/2,h=p+=2,g=0,m=0,x=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+q1(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var y="",v=0,b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var N=!1;if(a[b].length!==1&&x!==a[b].length-1){if((f+2)*(v+2)+2>s)continue e;y+=a[b][x],N=!0,m=b,b--}else{y=(y+=a[b][x]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var _=parseInt(b),E=c(_,y,i),j=b>=a.length-1;if(E&&!j){y+=" ",x=0;continue}if(E||j){if(j)m=_;else if(e.multiline&&(f+2)*(v+2)+2>s)continue e}else{if(!e.multiline||(f+2)*(v+2)+2>s)continue e;m=_}}for(var A="",T=g;T<=m;T++){var P=a[T];if(e.multiline){if(T===m){A+=P[x]+" ",x=(x+1)%P.length;continue}if(T===g){A+=P[P.length-1]+" ";continue}}A+=P[0]+" "}switch(A=A.substr(A.length-1)==" "?A.substr(0,A.length-1):A,d=q1(A,e,i).width,e.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}t+=nr(u)+" "+nr(h)+` Td
`,t+="("+Kf(A)+`) Tj
`,t+=-nr(u)+` 0 Td
`,h=-(i+2),d=0,g=N?m:m+1,v++,y=""}break}return n.text=t,n.fontSize=i,n},q1=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},$0e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},B0e=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},U0e=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Qo.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify($0e)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");fE=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new qB,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&B0e(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var i=!n;for(var s in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(s)){var l=n[s],c=[],u=l.Rect;if(l.Rect&&(l.Rect=M0e(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Nt.createDefaultAppearanceStream(l),zr(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=F0e(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var p in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(p)){var h=l.appearanceStreamContent[p];if(f+="/"+p+" ",f+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var s in h)if(h.hasOwnProperty(s)){var g=h[s];typeof g=="function"&&(g=g.call(a,l)),f+="/"+s+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=h)=="function"&&(g=g.call(a,l)),f+="/"+s+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}i&&function(m,x){for(var y in m)if(m.hasOwnProperty(y)){var v=y,b=m[y];x.internal.newObjectDeferredBegin(b.objId,!0),zr(b)==="object"&&typeof b.putStream=="function"&&b.putStream(),delete m[v]}}(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},UB=Dn.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(s){return s};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),zr(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+Kf(n(e[i].toString()))+")"):a+=e[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},cN=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+Kf(n(e))+")"},yl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};yl.prototype.toString=function(){return this.objId+" 0 R"},yl.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},yl.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:UB(a,this.objId,this.scope)}):a instanceof yl?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var zB=function(){yl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};ss(zB,yl);var qB=function(){yl.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Kf(r(e))+")"}},set:function(r){e=r}})};ss(qB,yl);var Qo=function e(){yl.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Kn(t,3)},set:function(y){y?this.F=Yn(t,3):this.F=Xn(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Rb)return;i="FieldObject"+e.FieldNum++}var y=function(v){return v};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Kf(y(i))+")"},set:function(y){i=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(y){i=y}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(y){s=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/fE:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof Rb||this instanceof mf))return cN(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Oa==0?cN(p,this.objId,this.scope):p},set:function(y){y=y.toString(),p=this instanceof Oa==0?y.substr(0,1)==="("?yh(y.substr(1,y.length-2)):yh(y):y}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Oa==1?yh(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof Oa==1?"/"+y:y}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Oa==0?cN(h,this.objId,this.scope):h},set:function(y){y=y.toString(),h=this instanceof Oa==0?y.substr(0,1)==="("?yh(y.substr(1,y.length-2)):yh(y):y}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Oa==1?yh(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof Oa==1?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(y){y=!!y,m=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Kn(this.Ff,1)},set:function(y){y?this.Ff=Yn(this.Ff,1):this.Ff=Xn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Kn(this.Ff,2)},set:function(y){y?this.Ff=Yn(this.Ff,2):this.Ff=Xn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Kn(this.Ff,3)},set:function(y){y?this.Ff=Yn(this.Ff,3):this.Ff=Xn(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');x=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(x){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:x=2;break;case"center":case 1:x=1;break;default:x=0}}})};ss(Qo,yl);var c0=function(){Qo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return UB(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(i,s,l){l||(l=1);for(var c,u=[];c=s.exec(i);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Kn(this.Ff,18)},set:function(r){r?this.Ff=Yn(this.Ff,18):this.Ff=Xn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Kn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Yn(this.Ff,19):this.Ff=Xn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Kn(this.Ff,20)},set:function(r){r?(this.Ff=Yn(this.Ff,20),t.sort()):this.Ff=Xn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Kn(this.Ff,22)},set:function(r){r?this.Ff=Yn(this.Ff,22):this.Ff=Xn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Kn(this.Ff,23)},set:function(r){r?this.Ff=Yn(this.Ff,23):this.Ff=Xn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Kn(this.Ff,27)},set:function(r){r?this.Ff=Yn(this.Ff,27):this.Ff=Xn(this.Ff,27)}}),this.hasAppearanceStream=!1};ss(c0,Qo);var u0=function(){c0.call(this),this.fontName="helvetica",this.combo=!1};ss(u0,c0);var d0=function(){u0.call(this),this.combo=!0};ss(d0,u0);var Ay=function(){d0.call(this),this.edit=!0};ss(Ay,d0);var Oa=function(){Qo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Kn(this.Ff,15)},set:function(r){r?this.Ff=Yn(this.Ff,15):this.Ff=Xn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Kn(this.Ff,16)},set:function(r){r?this.Ff=Yn(this.Ff,16):this.Ff=Xn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Kn(this.Ff,17)},set:function(r){r?this.Ff=Yn(this.Ff,17):this.Ff=Xn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Kn(this.Ff,26)},set:function(r){r?this.Ff=Yn(this.Ff,26):this.Ff=Xn(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+Kf(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){zr(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};ss(Oa,Qo);var Ey=function(){Oa.call(this),this.pushButton=!0};ss(Ey,Oa);var f0=function(){Oa.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};ss(f0,Oa);var Rb=function(){var e,t;Qo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,s=[];for(i in s.push("<<"),n)s.push("/"+i+" ("+Kf(a(n[i]))+")");return s.push(">>"),s.join(`
`)},set:function(a){zr(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Nt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ss(Rb,Qo),f0.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},f0.prototype.createOption=function(e){var t=new Rb;return t.Parent=this,t.optionName=e,this.Kids.push(t),z0e.call(this.scope,t),t};var Ty=function(){Oa.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Nt.CheckBox.createAppearanceStream()};ss(Ty,Oa);var mf=function(){Qo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Kn(this.Ff,13)},set:function(t){t?this.Ff=Yn(this.Ff,13):this.Ff=Xn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Kn(this.Ff,21)},set:function(t){t?this.Ff=Yn(this.Ff,21):this.Ff=Xn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Kn(this.Ff,23)},set:function(t){t?this.Ff=Yn(this.Ff,23):this.Ff=Xn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Kn(this.Ff,24)},set:function(t){t?this.Ff=Yn(this.Ff,24):this.Ff=Xn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Kn(this.Ff,25)},set:function(t){t?this.Ff=Yn(this.Ff,25):this.Ff=Xn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Kn(this.Ff,26)},set:function(t){t?this.Ff=Yn(this.Ff,26):this.Ff=Xn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ss(mf,Qo);var Cy=function(){mf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Kn(this.Ff,14)},set:function(e){e?this.Ff=Yn(this.Ff,14):this.Ff=Xn(this.Ff,14)}}),this.password=!0};ss(Cy,mf);var Nt={CheckBox:{createAppearanceStream:function(){return{N:{On:Nt.CheckBox.YesNormal},D:{On:Nt.CheckBox.YesPushDown,Off:Nt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=fl(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=Mj(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+nr(Nt.internal.getWidth(e))+" "+nr(Nt.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+nr(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=fl(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],i=Nt.internal.getHeight(e),s=Nt.internal.getWidth(e),l=Mj(e,e.caption);return a.push("1 g"),a.push("0 0 "+nr(s)+" "+nr(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+nr(s-1)+" "+nr(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+nr(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=fl(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+nr(Nt.internal.getWidth(e))+" "+nr(Nt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Nt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Nt.RadioButton.Circle.YesNormal,t.D[e]=Nt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=fl(e);t.scope=e.scope;var r=[],n=Nt.internal.getWidth(e)<=Nt.internal.getHeight(e)?Nt.internal.getWidth(e)/4:Nt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Nt.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+ou(Nt.internal.getWidth(e)/2)+" "+ou(Nt.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=fl(e);t.scope=e.scope;var r=[],n=Nt.internal.getWidth(e)<=Nt.internal.getHeight(e)?Nt.internal.getWidth(e)/4:Nt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Nt.internal.Bezier_C).toFixed(5)),s=Number((n*Nt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+ou(Nt.internal.getWidth(e)/2)+" "+ou(Nt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+ou(Nt.internal.getWidth(e)/2)+" "+ou(Nt.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=fl(e);t.scope=e.scope;var r=[],n=Nt.internal.getWidth(e)<=Nt.internal.getHeight(e)?Nt.internal.getWidth(e)/4:Nt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Nt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+ou(Nt.internal.getWidth(e)/2)+" "+ou(Nt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Nt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Nt.RadioButton.Cross.YesNormal,t.D[e]=Nt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=fl(e);t.scope=e.scope;var r=[],n=Nt.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+nr(Nt.internal.getWidth(e)-2)+" "+nr(Nt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(nr(n.x1.x)+" "+nr(n.x1.y)+" m"),r.push(nr(n.x2.x)+" "+nr(n.x2.y)+" l"),r.push(nr(n.x4.x)+" "+nr(n.x4.y)+" m"),r.push(nr(n.x3.x)+" "+nr(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=fl(e);t.scope=e.scope;var r=Nt.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+nr(Nt.internal.getWidth(e))+" "+nr(Nt.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+nr(Nt.internal.getWidth(e)-2)+" "+nr(Nt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(nr(r.x1.x)+" "+nr(r.x1.y)+" m"),n.push(nr(r.x2.x)+" "+nr(r.x2.y)+" l"),n.push(nr(r.x4.x)+" "+nr(r.x4.y)+" m"),n.push(nr(r.x3.x)+" "+nr(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=fl(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+nr(Nt.internal.getWidth(e))+" "+nr(Nt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Nt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Nt.internal.getWidth(e),r=Nt.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Nt.internal.getWidth=function(e){var t=0;return zr(e)==="object"&&(t=rP(e.Rect[2])),t},Nt.internal.getHeight=function(e){var t=0;return zr(e)==="object"&&(t=rP(e.Rect[3])),t};var z0e=Dn.addField=function(e){if(U0e(this,e),!(e instanceof Qo))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Dn.AcroFormChoiceField=c0,Dn.AcroFormListBox=u0,Dn.AcroFormComboBox=d0,Dn.AcroFormEditBox=Ay,Dn.AcroFormButton=Oa,Dn.AcroFormPushButton=Ey,Dn.AcroFormRadioButton=f0,Dn.AcroFormCheckBox=Ty,Dn.AcroFormTextField=mf,Dn.AcroFormPasswordField=Cy,Dn.AcroFormAppearance=Nt,Dn.AcroForm={ChoiceField:c0,ListBox:u0,ComboBox:d0,EditBox:Ay,Button:Oa,PushButton:Ey,RadioButton:f0,CheckBox:Ty,TextField:mf,PasswordField:Cy,Appearance:Nt},Rt.AcroForm={ChoiceField:c0,ListBox:u0,ComboBox:d0,EditBox:Ay,Button:Oa,PushButton:Ey,RadioButton:f0,CheckBox:Ty,TextField:mf,PasswordField:Cy,Appearance:Nt};Rt.AcroForm;function HB(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(O,R){var I,z,Y,ie,re,X=r;if((R=R||r)==="RGBA"||O.data!==void 0&&O.data instanceof Uint8ClampedArray&&"height"in O&&"width"in O)return"RGBA";if(E(O))for(re in n)for(Y=n[re],I=0;I<Y.length;I+=1){for(ie=!0,z=0;z<Y[I].length;z+=1)if(Y[I][z]!==void 0&&Y[I][z]!==O[z]){ie=!1;break}if(ie===!0){X=re;break}}else for(re in n)for(Y=n[re],I=0;I<Y.length;I+=1){for(ie=!0,z=0;z<Y[I].length;z+=1)if(Y[I][z]!==void 0&&Y[I][z]!==O.charCodeAt(z)){ie=!1;break}if(ie===!0){X=re;break}}return X===r&&R!==r&&(X=R),X},i=function O(R){for(var I=this.internal.write,z=this.internal.putStream,Y=(0,this.internal.getFilters)();Y.indexOf("FlateEncode")!==-1;)Y.splice(Y.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var ie=[];if(ie.push({key:"Type",value:"/XObject"}),ie.push({key:"Subtype",value:"/Image"}),ie.push({key:"Width",value:R.width}),ie.push({key:"Height",value:R.height}),R.colorSpace===y.INDEXED?ie.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(ie.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===y.DEVICE_CMYK&&ie.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ie.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&ie.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)&&R.transparency.length>0){for(var re="",X=0,oe=R.transparency.length;X<oe;X++)re+=R.transparency[X]+" "+R.transparency[X]+" ";ie.push({key:"Mask",value:"["+re+"]"})}R.sMask!==void 0&&ie.push({key:"SMask",value:R.objectId+1+" 0 R"});var we=R.filter!==void 0?["/"+R.filter]:void 0;if(z({data:R.data,additionalKeyValues:ie,alreadyAppliedFilters:we,objectId:R.objectId}),I("endobj"),"sMask"in R&&R.sMask!==void 0){var _e,k=(_e=R.sMaskBitsPerComponent)!==null&&_e!==void 0?_e:R.bitsPerComponent,F={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:k,data:R.sMask};"filter"in R&&(F.decodeParameters="/Predictor ".concat(R.predictor," /Colors 1 /BitsPerComponent ").concat(k," /Columns ").concat(R.width),F.filter=R.filter),O.call(this,F)}if(R.colorSpace===y.INDEXED){var B=this.internal.newObject();z({data:A(new Uint8Array(R.palette)),objectId:B}),I("endobj")}},s=function(){var O=this.internal.collections[t+"images"];for(var R in O)i.call(this,O[R])},l=function(){var O,R=this.internal.collections[t+"images"],I=this.internal.write;for(var z in R)I("/I"+(O=R[z]).index,O.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var O=this.internal.collections[t+"images"];return c.call(this),O},d=function(){return Object.keys(this.internal.collections[t+"images"]).length},f=function(O){return typeof e["process"+O.toUpperCase()]=="function"},p=function(O){return zr(O)==="object"&&O.nodeType===1},h=function(O,R){if(O.nodeName==="IMG"&&O.hasAttribute("src")){var I=""+O.getAttribute("src");if(I.indexOf("data:image/")===0)return jy(unescape(I).split("base64,").pop());var z=e.loadFile(I,!0);if(z!==void 0)return z}if(O.nodeName==="CANVAS"){if(O.width===0||O.height===0)throw new Error("Given canvas must have data. Canvas width: "+O.width+", height: "+O.height);var Y;switch(R){case"PNG":Y="image/png";break;case"WEBP":Y="image/webp";break;default:Y="image/jpeg"}return jy(O.toDataURL(Y,1).split("base64,").pop())}},g=function(O){var R=this.internal.collections[t+"images"];if(R){for(var I in R)if(O===R[I].alias)return R[I]}},m=function(O,R,I){return O||R||(O=-96,R=-96),O<0&&(O=-1*I.width*72/O/this.internal.scaleFactor),R<0&&(R=-1*I.height*72/R/this.internal.scaleFactor),O===0&&(O=R*I.width/I.height),R===0&&(R=O*I.height/I.width),[O,R]},x=function(O,R,I,z,Y,ie){var re=m.call(this,I,z,Y),X=this.internal.getCoordinateString,oe=this.internal.getVerticalCoordinateString,we=u.call(this);if(I=re[0],z=re[1],we[Y.index]=Y,ie){ie*=Math.PI/180;var _e=Math.cos(ie),k=Math.sin(ie),F=function(U){return U.toFixed(4)},B=[F(_e),F(k),F(-1*k),F(_e),0,0,"cm"]}this.internal.write("q"),ie?(this.internal.write([1,"0","0",1,X(O),oe(R+z),"cm"].join(" ")),this.internal.write(B.join(" ")),this.internal.write([X(I),"0","0",X(z),"0","0","cm"].join(" "))):this.internal.write([X(I),"0","0",X(z),X(O),oe(R+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Y.index+" Do"),this.internal.write("Q")},y=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=e.__addimage__.sHashCode=function(O){var R,I,z=0;if(typeof O=="string")for(I=O.length,R=0;R<I;R++)z=(z<<5)-z+O.charCodeAt(R),z|=0;else if(E(O))for(I=O.byteLength/2,R=0;R<I;R++)z=(z<<5)-z+O[R],z|=0;return z},N=e.__addimage__.validateStringAsBase64=function(O){(O=O||"").toString().trim();var R=!0;return O.length===0&&(R=!1),O.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(O.substr(0,O.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(O.substr(-2))===!1&&(R=!1),R},_=e.__addimage__.extractImageFromDataUrl=function(O){if(O==null||!(O=O.trim()).startsWith("data:"))return null;var R=O.indexOf(",");return R<0?null:O.substring(0,R).trim().endsWith("base64")?O.substring(R+1):null};e.__addimage__.isArrayBuffer=function(O){return O instanceof ArrayBuffer};var E=e.__addimage__.isArrayBufferView=function(O){return O instanceof Int8Array||O instanceof Uint8Array||O instanceof Uint8ClampedArray||O instanceof Int16Array||O instanceof Uint16Array||O instanceof Int32Array||O instanceof Uint32Array||O instanceof Float32Array||O instanceof Float64Array},j=e.__addimage__.binaryStringToUint8Array=function(O){for(var R=O.length,I=new Uint8Array(R),z=0;z<R;z++)I[z]=O.charCodeAt(z);return I},A=e.__addimage__.arrayBufferToBinaryString=function(O){for(var R="",I=E(O)?O:new Uint8Array(O),z=0;z<I.length;z+=8192)R+=String.fromCharCode.apply(null,I.subarray(z,z+8192));return R};e.addImage=function(){var O,R,I,z,Y,ie,re,X,oe;if(typeof arguments[1]=="number"?(R=r,I=arguments[1],z=arguments[2],Y=arguments[3],ie=arguments[4],re=arguments[5],X=arguments[6],oe=arguments[7]):(R=arguments[1],I=arguments[2],z=arguments[3],Y=arguments[4],ie=arguments[5],re=arguments[6],X=arguments[7],oe=arguments[8]),zr(O=arguments[0])==="object"&&!p(O)&&"imageData"in O){var we=O;O=we.imageData,R=we.format||R||r,I=we.x||I||0,z=we.y||z||0,Y=we.w||we.width||Y,ie=we.h||we.height||ie,re=we.alias||re,X=we.compression||X,oe=we.rotation||we.angle||oe}var _e=this.internal.getFilters();if(X===void 0&&_e.indexOf("FlateEncode")!==-1&&(X="SLOW"),isNaN(I)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var k=T.call(this,O,R,re,X);return x.call(this,I,z,Y,ie,k,oe),this};var T=function(O,R,I,z){var Y,ie,re;if(typeof O=="string"&&a(O)===r){O=unescape(O);var X=P(O,!1);(X!==""||(X=e.loadFile(O,!0))!==void 0)&&(O=X)}if(p(O)&&(O=h(O,R)),R=a(O,R),!f(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((re=I)==null||re.length===0)&&(I=function(oe){return typeof oe=="string"||E(oe)?b(oe):E(oe.data)?b(oe.data):null}(O)),(Y=g.call(this,I))||(O instanceof Uint8Array||R==="RGBA"||(ie=O,O=j(O)),Y=this["process"+R.toUpperCase()](O,d.call(this),I,function(oe){return oe&&typeof oe=="string"&&(oe=oe.toUpperCase()),oe in e.image_compression?oe:v.NONE}(z),ie)),!Y)throw new Error("An unknown error occurred whilst processing the image.");return Y},P=e.__addimage__.convertBase64ToBinaryString=function(O,R){R=typeof R!="boolean"||R;var I,z="";if(typeof O=="string"){var Y;I=(Y=_(O))!==null&&Y!==void 0?Y:O;try{z=jy(I)}catch(ie){if(R)throw N(I)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ie.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return z};e.getImageProperties=function(O){var R,I,z="";if(p(O)&&(O=h(O)),typeof O=="string"&&a(O)===r&&((z=P(O,!1))===""&&(z=e.loadFile(O)||""),O=z),I=a(O),!f(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(O instanceof Uint8Array||(O=j(O)),!(R=this["process"+I.toUpperCase()](O)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=I,R}})(Rt.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Rt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,i,s=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){n=u[p];var h=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var m=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(m.objId),v=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+s(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+h(y(n.contents))+")",i+=" /Popup "+x.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+h(y(v))+") >>",m.content=i;var b=m.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+s(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(i+=" /Open true"),i+=" >>",x.content=i,this.internal.write(m.objId,"0 R",x.objId,"0 R");break;case"freetext":a="/Rect ["+s(n.bounds.x)+" "+l(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var N=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+h(g(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var _=this.annotations._nameMap[n.options.name];n.options.pageNumber=_.page,n.options.top=_.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+h(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var E=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+E+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,i,s){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+i)},options:s,type:"link"})},e.textWithLink=function(r,n,a,i){var s,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var d=this.splitTextToSize(r,l).length;s=Math.ceil(u*d)}else l=c,s=u;return this.text(r,n,a,i),a+=.2*u,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,a-u,l,s,i),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Rt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(m){return t[m.charCodeAt(0)]!==void 0},s=e.__arabicParser__.isArabicLetter=function(m){return typeof m=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(m)},l=e.__arabicParser__.isArabicEndLetter=function(m){return s(m)&&i(m)&&t[m.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(m){return s(m)&&a.indexOf(m.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(m){return s(m)&&i(m)&&t[m.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(m){return s(m)&&i(m)&&t[m.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(m){return s(m)&&i(m)&&t[m.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(m){return s(m)&&i(m)&&t[m.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(m){var x=0,y=r,v="",b=0;for(x=0;x<m.length;x+=1)y[m.charCodeAt(x)]!==void 0?(b++,typeof(y=y[m.charCodeAt(x)])=="number"&&(v+=String.fromCharCode(y),y=r,b=0),x===m.length-1&&(y=r,v+=m.charAt(x-(b-1)),x-=b-1,b=0)):(y=r,v+=m.charAt(x-b),x-=b,b=0);return v};e.__arabicParser__.isArabicDiacritic=function(m){return m!==void 0&&n[m.charCodeAt(0)]!==void 0};var p=e.__arabicParser__.getCorrectForm=function(m,x,y){return s(m)?i(m)===!1?-1:!u(m)||!s(x)&&!s(y)||!s(y)&&l(x)||l(m)&&!s(x)||l(m)&&c(x)||l(m)&&l(x)?0:d(m)&&s(x)&&!l(x)&&s(y)&&u(y)?3:l(m)||!s(y)?1:2:-1},h=function(m){var x=0,y=0,v=0,b="",N="",_="",E=(m=m||"").split("\\s+"),j=[];for(x=0;x<E.length;x+=1){for(j.push(""),y=0;y<E[x].length;y+=1)b=E[x][y],N=E[x][y-1],_=E[x][y+1],s(b)?(v=p(b,N,_),j[x]+=v!==-1?String.fromCharCode(t[b.charCodeAt(0)][v]):b):j[x]+=b;j[x]=f(j[x])}return j.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var m,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(x)){var v=0;for(y=[],v=0;v<x.length;v+=1)Array.isArray(x[v])?y.push([h(x[v][0]),x[v][1],x[v][2]]):y.push([h(x[v])]);m=y}else m=h(x);return typeof arguments[0]=="string"?m:(arguments[0].text=m,arguments[0])};e.events.push(["preProcessText",g])}(Rt.API),Rt.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(l){s=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Rt.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(m){c=m}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(m){u=m}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(m){d=m}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(m){f=m}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(m){p=m}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(m){h=m}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(m){g=m}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,h=0,g=0,m=0,x=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(b,N){return b.concat(x.splitTextToSize(N,y))},[])):c=Array.isArray(c)?c:[c];for(var v=0;v<c.length;v++)h<(m=this.getStringUnitWidth(c[v],{font:f})*d)&&(h=m);return h!==0&&(g=c.length),{w:h/=p,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/p,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,p=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,h&&p&&(this.printHeaderRow(c.lineNumber,!0),c.y+=p[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,p){if(n.call(this),!d)throw new Error("No data for PDF table.");var h,g,m,x,y=[],v=[],b=[],N={},_={},E=[],j=[],A=(p=p||{}).autoSize||!1,T=p.printHeaders!==!1,P=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,O=p.margins||Object.assign({width:this.getPageWidth()},t),R=typeof p.padding=="number"?p.padding:3,I=p.headerBackgroundColor||"#c8c8c8",z=p.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=O,this.internal.__cell__.table_font_size=P,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=I,this.internal.__cell__.headerTextColor=z,this.setFontSize(P),f==null)v=y=Object.keys(d[0]),b=y.map(function(){return"left"});else if(Array.isArray(f)&&zr(f[0])==="object")for(y=f.map(function(we){return we.name}),v=f.map(function(we){return we.prompt||we.name||""}),b=f.map(function(we){return we.align||"left"}),h=0;h<f.length;h+=1)_[f[h].name]=.7499990551181103*f[h].width;else Array.isArray(f)&&typeof f[0]=="string"&&(v=y=f,b=y.map(function(){return"left"}));if(A||Array.isArray(f)&&typeof f[0]=="string")for(h=0;h<y.length;h+=1){for(N[x=y[h]]=d.map(function(we){return we[x]}),this.setFont(void 0,"bold"),E.push(this.getTextDimensions(v[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=N[x],this.setFont(void 0,"normal"),m=0;m<g.length;m+=1)E.push(this.getTextDimensions(g[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);_[x]=Math.max.apply(null,E)+R+R,E=[]}if(T){var Y={};for(h=0;h<y.length;h+=1)Y[y[h]]={},Y[y[h]].text=v[h],Y[y[h]].align=b[h];var ie=l.call(this,Y,_);j=y.map(function(we){return new i(c,u,_[we],ie,Y[we].text,void 0,Y[we].align)}),this.setTableHeaderRow(j),this.printHeaderRow(1,!1)}var re=f.reduce(function(we,_e){return we[_e.name]=_e.align,we},{});for(h=0;h<d.length;h+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:h,data:d[h]},this);var X=l.call(this,d[h],_);for(m=0;m<y.length;m+=1){var oe=d[h][y[m]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:h,col:m,data:oe},this),s.call(this,new i(c,u,_[y[m]],X,oe,h+2,re[y[m]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(c).map(function(h){var g=c[h];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[h]-d-d)},this).map(function(h){return this.getLineHeightFactor()*h.length*f/p+d+d},this).reduce(function(h,g){return Math.max(h,g)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){d=this.internal.__cell__.tableHeaderRow[h].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,p.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,d),this.setTextColor(g)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}}(Rt.API);var WB={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},VB=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Fj=HB(VB),GB=[100,200,300,400,500,600,700,800,900],q0e=HB(GB);function uN(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return WB[i=i||"normal"]?i:"normal"}(e.style),n=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(e.weight),a=function(i){return typeof Fj[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function nP(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var H0e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},aP={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function iP(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function sP(e){return e.trimLeft()}function W0e(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function V0e(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var H1,oP,lP,bh,W1,cP,uP,dP,dN=["times"];function fP(e,t,r,n,a){var i=4,s=pP;switch(a){case Rt.API.image_compression.FAST:i=1,s=hP;break;case Rt.API.image_compression.MEDIUM:i=6,s=mP;break;case Rt.API.image_compression.SLOW:i=9,s=gP}e=function(c,u,d,f){for(var p,h=c.length/u,g=new Uint8Array(c.length+h),m=[G0e,hP,pP,mP,gP],x=0;x<h;x+=1){var y=x*u,v=c.subarray(y,y+u);if(f)g.set(f(v,d,p),y+x);else{for(var b=m.length,N=[],_=0;_<b;_+=1)N[_]=m[_](v,d,p);var E=Y0e(N.concat());g.set(N[E],y+x)}p=v}return g}(e,t,Math.ceil(r*n/8),s);var l=Oj(e,{level:i});return Rt.API.__addimage__.arrayBufferToBinaryString(l)}function G0e(e){var t=Array.apply([],e);return t.unshift(0),t}function hP(e,t){var r=e.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var i=e[a-t]||0;n[a+1]=e[a]-i+256&255}return n}function pP(e,t,r){var n=e.length,a=[];a[0]=2;for(var i=0;i<n;i+=1){var s=r&&r[i]||0;a[i+1]=e[i]-s+256&255}return a}function mP(e,t,r){var n=e.length,a=[];a[0]=3;for(var i=0;i<n;i+=1){var s=e[i-t]||0,l=r&&r[i]||0;a[i+1]=e[i]+256-(s+l>>>1)&255}return a}function gP(e,t,r){var n=e.length,a=[];a[0]=4;for(var i=0;i<n;i+=1){var s=K0e(e[i-t]||0,r&&r[i]||0,r&&r[i-t]||0);a[i+1]=e[i]-s+256&255}return a}function K0e(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),a=Math.abs(e-r),i=Math.abs(e+t-r-r);return n<=a&&n<=i?e:a<=i?t:r}function Y0e(e){var t=e.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return t.indexOf(Math.min.apply(null,t))}function fN(e,t,r){var n=t*r,a=Math.floor(n/8),i=16-(n-8*a+r),s=(1<<r)-1;return KB(e,a)>>i&s}function vP(e,t,r,n){var a=r*n,i=Math.floor(a/8),s=16-(a-8*i+n),l=(1<<n)-1,c=(t&l)<<s;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var p=f>>8&255;u.setUint8(d,p)}})(e,i,KB(e,i)&~(l<<s)&65535|c)}function KB(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function X0e(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,s=1<<1+(7&a);e[t++],e[t++];var l=null,c=null;i&&(l=t,c=s,t+=3*s);var u=!0,d=[],f=0,p=null,h=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((O=e[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var m=e[t++];f=e[t++]|e[t++]<<8,p=e[t++],1&m||(p=null),h=m>>2&7,t++;break;case 254:for(;;){if(!((O=e[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var x=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,N=e[t++],_=N>>6&1,E=1<<1+(7&N),j=l,A=c,T=!1;N>>7&&(T=!0,j=t,A=E,t+=3*E);var P=t;for(t++;;){var O;if(!((O=e[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}d.push({x,y,width:v,height:b,has_local_palette:T,palette_offset:j,palette_size:A,data_offset:P,data_length:t-P,transparent_index:p,interlaced:!!_,delay:f,disposal:h});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(R){if(R<0||R>=d.length)throw new Error("Frame index out of range.");return d[R]},this.decodeAndBlitFrameBGRA=function(R,I){var z=this.frameInfo(R),Y=z.width*z.height,ie=new Uint8Array(Y);xP(e,z.data_offset,ie,Y);var re=z.palette_offset,X=z.transparent_index;X===null&&(X=256);var oe=z.width,we=r-oe,_e=oe,k=4*(z.y*r+z.x),F=4*((z.y+z.height)*r+z.x),B=k,U=4*we;z.interlaced===!0&&(U+=4*r*7);for(var J=8,me=0,K=ie.length;me<K;++me){var te=ie[me];if(_e===0&&(_e=oe,(B+=U)>=F&&(U=4*we+4*r*(J-1),B=k+(oe+we)*(J<<1),J>>=1)),te===X)B+=4;else{var le=e[re+3*te],ve=e[re+3*te+1],ge=e[re+3*te+2];I[B++]=ge,I[B++]=ve,I[B++]=le,I[B++]=255}--_e}},this.decodeAndBlitFrameRGBA=function(R,I){var z=this.frameInfo(R),Y=z.width*z.height,ie=new Uint8Array(Y);xP(e,z.data_offset,ie,Y);var re=z.palette_offset,X=z.transparent_index;X===null&&(X=256);var oe=z.width,we=r-oe,_e=oe,k=4*(z.y*r+z.x),F=4*((z.y+z.height)*r+z.x),B=k,U=4*we;z.interlaced===!0&&(U+=4*r*7);for(var J=8,me=0,K=ie.length;me<K;++me){var te=ie[me];if(_e===0&&(_e=oe,(B+=U)>=F&&(U=4*we+4*r*(J-1),B=k+(oe+we)*(J<<1),J>>=1)),te===X)B+=4;else{var le=e[re+3*te],ve=e[re+3*te+1],ge=e[re+3*te+2];I[B++]=le,I[B++]=ve,I[B++]=ge,I[B++]=255}--_e}}}function xP(e,t,r,n){for(var a=e[t++],i=1<<a,s=i+1,l=s+1,c=a+1,u=(1<<c)-1,d=0,f=0,p=0,h=e[t++],g=new Int32Array(4096),m=null;;){for(;d<16&&h!==0;)f|=e[t++]<<d,d+=8,h===1?h=e[t++]:--h;if(d<c)break;var x=f&u;if(f>>=c,d-=c,x!==i){if(x===s)break;for(var y=x<l?x:m,v=0,b=y;b>i;)b=g[b]>>8,++v;var N=b;if(p+v+(y!==x?1:0)>n)return void Qr.log("Warning, gif stream longer than expected.");r[p++]=N;var _=p+=v;for(y!==x&&(r[p++]=N),b=y;v--;)b=g[b],r[--_]=255&b,b>>=8;m!==null&&l<4096&&(g[l++]=m<<8|N,l>=u+1&&c<12&&(++c,u=u<<1|1)),m=x}else l=s+1,u=(1<<(c=a+1))-1,m=null}return p!==n&&Qr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function hN(e){var t,r,n,a,i,s=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),p=new Array(65535),h=new Array(64),g=new Array(64),m=[],x=0,y=7,v=new Array(64),b=new Array(64),N=new Array(64),_=new Array(256),E=new Array(2048),j=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],O=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Y=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ie(k,F){for(var B=0,U=0,J=new Array,me=1;me<=16;me++){for(var K=1;K<=k[me];K++)J[F[U]]=[],J[F[U]][0]=B,J[F[U]][1]=me,U++,B++;B*=2}return J}function re(k){for(var F=k[0],B=k[1]-1;B>=0;)F&1<<B&&(x|=1<<y),B--,--y<0&&(x==255?(X(255),X(0)):X(x),y=7,x=0)}function X(k){m.push(k)}function oe(k){X(k>>8&255),X(255&k)}function we(k,F,B,U,J){for(var me,K=J[0],te=J[240],le=function($e,it){var st,ut,pt,Bt,ht,$t,Jt,At,bt,qt,gt=0;for(bt=0;bt<8;++bt){st=$e[gt],ut=$e[gt+1],pt=$e[gt+2],Bt=$e[gt+3],ht=$e[gt+4],$t=$e[gt+5],Jt=$e[gt+6];var Ut=st+(At=$e[gt+7]),Qt=st-At,Zt=ut+Jt,er=ut-Jt,Ir=pt+$t,Pt=pt-$t,Nr=Bt+ht,Ft=Bt-ht,Ge=Ut+Nr,We=Ut-Nr,wt=Zt+Ir,Dt=Zt-Ir;$e[gt]=Ge+wt,$e[gt+4]=Ge-wt;var vr=.707106781*(Dt+We);$e[gt+2]=We+vr,$e[gt+6]=We-vr;var vo=.382683433*((Ge=Ft+Pt)-(Dt=er+Qt)),kn=.5411961*Ge+vo,Ea=1.306562965*Dt+vo,xi=.707106781*(wt=Pt+er),mt=Qt+xi,xo=Qt-xi;$e[gt+5]=xo+kn,$e[gt+3]=xo-kn,$e[gt+1]=mt+Ea,$e[gt+7]=mt-Ea,gt+=8}for(gt=0,bt=0;bt<8;++bt){st=$e[gt],ut=$e[gt+8],pt=$e[gt+16],Bt=$e[gt+24],ht=$e[gt+32],$t=$e[gt+40],Jt=$e[gt+48];var yo=st+(At=$e[gt+56]),ni=st-At,qi=ut+Jt,gn=ut-Jt,Qn=pt+$t,W=pt-$t,de=Bt+ht,ne=Bt-ht,se=yo+de,fe=yo-de,pe=qi+Qn,Te=qi-Qn;$e[gt]=se+pe,$e[gt+32]=se-pe;var De=.707106781*(Te+fe);$e[gt+16]=fe+De,$e[gt+48]=fe-De;var Ce=.382683433*((se=ne+W)-(Te=gn+ni)),ke=.5411961*se+Ce,Re=1.306562965*Te+Ce,Je=.707106781*(pe=W+gn),nt=ni+Je,dt=ni-Je;$e[gt+40]=dt+ke,$e[gt+24]=dt-ke,$e[gt+8]=nt+Re,$e[gt+56]=nt-Re,gt++}for(bt=0;bt<64;++bt)qt=$e[bt]*it[bt],h[bt]=qt>0?qt+.5|0:qt-.5|0;return h}(k,F),ve=0;ve<64;++ve)g[j[ve]]=le[ve];var ge=g[0]-B;B=g[0],ge==0?re(U[0]):(re(U[p[me=32767+ge]]),re(f[me]));for(var Me=63;Me>0&&g[Me]==0;)Me--;if(Me==0)return re(K),B;for(var Fe,ee=1;ee<=Me;){for(var Pe=ee;g[ee]==0&&ee<=Me;)++ee;var Ie=ee-Pe;if(Ie>=16){Fe=Ie>>4;for(var Qe=1;Qe<=Fe;++Qe)re(te);Ie&=15}me=32767+g[ee],re(J[(Ie<<4)+p[me]]),re(f[me]),ee++}return Me!=63&&re(K),B}function _e(k){k=Math.min(Math.max(k,1),100),i!=k&&(function(F){for(var B=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],U=0;U<64;U++){var J=s((B[U]*F+50)/100);J=Math.min(Math.max(J,1),255),l[j[U]]=J}for(var me=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],K=0;K<64;K++){var te=s((me[K]*F+50)/100);te=Math.min(Math.max(te,1),255),c[j[K]]=te}for(var le=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ve=0,ge=0;ge<8;ge++)for(var Me=0;Me<8;Me++)u[ve]=1/(l[j[ve]]*le[ge]*le[Me]*8),d[ve]=1/(c[j[ve]]*le[ge]*le[Me]*8),ve++}(k<50?Math.floor(5e3/k):Math.floor(200-2*k)),i=k)}this.encode=function(k,F){F&&_e(F),m=new Array,x=0,y=7,oe(65496),oe(65504),oe(16),X(74),X(70),X(73),X(70),X(0),X(1),X(1),X(0),oe(1),oe(1),X(0),X(0),function(){oe(65499),oe(132),X(0);for(var ut=0;ut<64;ut++)X(l[ut]);X(1);for(var pt=0;pt<64;pt++)X(c[pt])}(),function(ut,pt){oe(65472),oe(17),X(8),oe(pt),oe(ut),X(3),X(1),X(17),X(0),X(2),X(17),X(1),X(3),X(17),X(1)}(k.width,k.height),function(){oe(65476),oe(418),X(0);for(var ut=0;ut<16;ut++)X(A[ut+1]);for(var pt=0;pt<=11;pt++)X(T[pt]);X(16);for(var Bt=0;Bt<16;Bt++)X(P[Bt+1]);for(var ht=0;ht<=161;ht++)X(O[ht]);X(1);for(var $t=0;$t<16;$t++)X(R[$t+1]);for(var Jt=0;Jt<=11;Jt++)X(I[Jt]);X(17);for(var At=0;At<16;At++)X(z[At+1]);for(var bt=0;bt<=161;bt++)X(Y[bt])}(),oe(65498),oe(12),X(3),X(1),X(0),X(2),X(17),X(3),X(17),X(0),X(63),X(0);var B=0,U=0,J=0;x=0,y=7,this.encode.displayName="_encode_";for(var me,K,te,le,ve,ge,Me,Fe,ee,Pe=k.data,Ie=k.width,Qe=k.height,$e=4*Ie,it=0;it<Qe;){for(me=0;me<$e;){for(ve=$e*it+me,Me=-1,Fe=0,ee=0;ee<64;ee++)ge=ve+(Fe=ee>>3)*$e+(Me=4*(7&ee)),it+Fe>=Qe&&(ge-=$e*(it+1+Fe-Qe)),me+Me>=$e&&(ge-=me+Me-$e+4),K=Pe[ge++],te=Pe[ge++],le=Pe[ge++],v[ee]=(E[K]+E[te+256|0]+E[le+512|0]>>16)-128,b[ee]=(E[K+768|0]+E[te+1024|0]+E[le+1280|0]>>16)-128,N[ee]=(E[K+1280|0]+E[te+1536|0]+E[le+1792|0]>>16)-128;B=we(v,u,B,t,n),U=we(b,d,U,r,a),J=we(N,d,J,r,a),me+=32}it+=8}if(y>=0){var st=[];st[1]=y+1,st[0]=(1<<y+1)-1,re(st)}return oe(65497),new Uint8Array(m)},e=e||50,function(){for(var k=String.fromCharCode,F=0;F<256;F++)_[F]=k(F)}(),t=ie(A,T),r=ie(R,I),n=ie(P,O),a=ie(z,Y),function(){for(var k=1,F=2,B=1;B<=15;B++){for(var U=k;U<F;U++)p[32767+U]=B,f[32767+U]=[],f[32767+U][1]=B,f[32767+U][0]=U;for(var J=-(F-1);J<=-k;J++)p[32767+J]=B,f[32767+J]=[],f[32767+J][1]=B,f[32767+J][0]=F-1+J;k<<=1,F<<=1}}(),function(){for(var k=0;k<256;k++)E[k]=19595*k,E[k+256|0]=38470*k,E[k+512|0]=7471*k+32768,E[k+768|0]=-11059*k,E[k+1024|0]=-21709*k,E[k+1280|0]=32768*k+8421375,E[k+1536|0]=-27439*k,E[k+1792|0]=-5329*k}(),_e(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Co(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function yP(e){function t(T){if(!T)throw Error("assert :P")}function r(T,P,O){for(var R=0;4>R;R++)if(T[P+R]!=O.charCodeAt(R))return!0;return!1}function n(T,P,O,R,I){for(var z=0;z<I;z++)T[P+z]=O[R+z]}function a(T,P,O,R){for(var I=0;I<R;I++)T[P+I]=O}function i(T){return new Int32Array(T)}function s(T,P){for(var O=[],R=0;R<T;R++)O.push(new P);return O}function l(T,P){var O=[];return function R(I,z,Y){for(var ie=Y[z],re=0;re<ie&&(I.push(Y.length>z+1?[]:new P),!(Y.length<z+1));re++)R(I[re],z+1,Y)}(O,0,T),O}var c=function(){var T=this;function P(w,S){for(var L=1<<S-1>>>0;w&L;)L>>>=1;return L?(w&L-1)+L:w}function O(w,S,L,M,H){t(!(M%L));do w[S+(M-=L)]=H;while(0<M)}function R(w,S,L,M,H){if(t(2328>=H),512>=H)var V=i(512);else if((V=i(H))==null)return 0;return function(G,Q,ae,ce,Ne,Le){var ue,je,Ee=Q,Ue=1<<ae,Oe=i(16),qe=i(16);for(t(Ne!=0),t(ce!=null),t(G!=null),t(0<ae),je=0;je<Ne;++je){if(15<ce[je])return 0;++Oe[ce[je]]}if(Oe[0]==Ne)return 0;for(qe[1]=0,ue=1;15>ue;++ue){if(Oe[ue]>1<<ue)return 0;qe[ue+1]=qe[ue]+Oe[ue]}for(je=0;je<Ne;++je)ue=ce[je],0<ce[je]&&(Le[qe[ue]++]=je);if(qe[15]==1)return(ce=new I).g=0,ce.value=Le[0],O(G,Ee,1,Ue,ce),Ue;var Ve,Ze=-1,Xe=Ue-1,Lt=0,_t=1,or=1,Tt=1<<ae;for(je=0,ue=1,Ne=2;ue<=ae;++ue,Ne<<=1){if(_t+=or<<=1,0>(or-=Oe[ue]))return 0;for(;0<Oe[ue];--Oe[ue])(ce=new I).g=ue,ce.value=Le[je++],O(G,Ee+Lt,Ne,Tt,ce),Lt=P(Lt,ue)}for(ue=ae+1,Ne=2;15>=ue;++ue,Ne<<=1){if(_t+=or<<=1,0>(or-=Oe[ue]))return 0;for(;0<Oe[ue];--Oe[ue]){if(ce=new I,(Lt&Xe)!=Ze){for(Ee+=Tt,Ve=1<<(Ze=ue)-ae;15>Ze&&!(0>=(Ve-=Oe[Ze]));)++Ze,Ve<<=1;Ue+=Tt=1<<(Ve=Ze-ae),G[Q+(Ze=Lt&Xe)].g=Ve+ae,G[Q+Ze].value=Ee-Q-Ze}ce.g=ue-ae,ce.value=Le[je++],O(G,Ee+(Lt>>ae),Ne,Tt,ce),Lt=P(Lt,ue)}}return _t!=2*qe[15]-1?0:Ue}(w,S,L,M,H,V)}function I(){this.value=this.g=0}function z(){this.value=this.g=0}function Y(){this.G=s(5,I),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(bd,z)}function ie(w,S,L,M){t(w!=null),t(S!=null),t(2147483648>M),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=S,w.pa=L,w.Jd=S,w.Yc=L+M,w.Zc=4<=M?L+M-4+1:L,K(w)}function re(w,S){for(var L=0;0<S--;)L|=le(w,128)<<S;return L}function X(w,S){var L=re(w,S);return te(w)?-L:L}function oe(w,S,L,M){var H,V=0;for(t(w!=null),t(S!=null),t(4294967288>M),w.Sb=M,w.Ra=0,w.u=0,w.h=0,4<M&&(M=4),H=0;H<M;++H)V+=S[L+H]<<8*H;w.Ra=V,w.bb=M,w.oa=S,w.pa=L}function we(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Wc-8>>>0,++w.bb,w.u-=8;U(w)&&(w.h=1,w.u=0)}function _e(w,S){if(t(0<=S),!w.h&&S<=cs){var L=B(w)&ls[S];return w.u+=S,we(w),L}return w.h=1,w.u=0}function k(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function B(w){return w.Ra>>>(w.u&Wc-1)>>>0}function U(w){return t(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Wc}function J(w,S){w.u=S,w.h=U(w)}function me(w){w.u>=Wl&&(t(w.u>=Wl),we(w))}function K(w){t(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(t(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function te(w){return re(w,1)}function le(w,S){var L=w.Ca;0>w.b&&K(w);var M=w.b,H=L*S>>>8,V=(w.I>>>M>H)+0;for(V?(L-=H,w.I-=H+1<<M>>>0):L=H+1,M=L,H=0;256<=M;)H+=8,M>>=8;return M=7^H+Vc[M],w.b-=M,w.Ca=(L<<M)-1,V}function ve(w,S,L){w[S+0]=L>>24&255,w[S+1]=L>>16&255,w[S+2]=L>>8&255,w[S+3]=255&L}function ge(w,S){return w[S+0]|w[S+1]<<8}function Me(w,S){return ge(w,S)|w[S+2]<<16}function Fe(w,S){return ge(w,S)|ge(w,S+2)<<16}function ee(w,S){var L=1<<S;return t(w!=null),t(0<S),w.X=i(L),w.X==null?0:(w.Mb=32-S,w.Xa=S,1)}function Pe(w,S){t(w!=null),t(S!=null),t(w.Xa==S.Xa),n(S.X,0,w.X,0,1<<S.Xa)}function Ie(){this.X=[],this.Xa=this.Mb=0}function Qe(w,S,L,M){t(L!=null),t(M!=null);var H=L[0],V=M[0];return H==0&&(H=(w*V+S/2)/S),V==0&&(V=(S*H+w/2)/w),0>=H||0>=V?0:(L[0]=H,M[0]=V,1)}function $e(w,S){return w+(1<<S)-1>>>S}function it(w,S){return((4278255360&w)+(4278255360&S)>>>0&4278255360)+((16711935&w)+(16711935&S)>>>0&16711935)>>>0}function st(w,S){T[S]=function(L,M,H,V,G,Q,ae){var ce;for(ce=0;ce<G;++ce){var Ne=T[w](Q[ae+ce-1],H,V+ce);Q[ae+ce]=it(L[M+ce],Ne)}}}function ut(){this.ud=this.hd=this.jd=0}function pt(w,S){return((4278124286&(w^S))>>>1)+(w&S)>>>0}function Bt(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function ht(w,S){return Bt(w+(w-S+.5>>1))}function $t(w,S,L){return Math.abs(S-L)-Math.abs(w-L)}function Jt(w,S,L,M,H,V,G){for(M=V[G-1],L=0;L<H;++L)V[G+L]=M=it(w[S+L],M)}function At(w,S,L,M,H){var V;for(V=0;V<L;++V){var G=w[S+V],Q=G>>8&255,ae=16711935&(ae=(ae=16711935&G)+((Q<<16)+Q));M[H+V]=(4278255360&G)+ae>>>0}}function bt(w,S){S.jd=255&w,S.hd=w>>8&255,S.ud=w>>16&255}function qt(w,S,L,M,H,V){var G;for(G=0;G<M;++G){var Q=S[L+G],ae=Q>>>8,ce=Q,Ne=255&(Ne=(Ne=Q>>>16)+((w.jd<<24>>24)*(ae<<24>>24)>>>5));ce=255&(ce=(ce+=(w.hd<<24>>24)*(ae<<24>>24)>>>5)+((w.ud<<24>>24)*(Ne<<24>>24)>>>5)),H[V+G]=(4278255360&Q)+(Ne<<16)+ce}}function gt(w,S,L,M,H){T[S]=function(V,G,Q,ae,ce,Ne,Le,ue,je){for(ae=Le;ae<ue;++ae)for(Le=0;Le<je;++Le)ce[Ne++]=H(Q[M(V[G++])])},T[w]=function(V,G,Q,ae,ce,Ne,Le){var ue=8>>V.b,je=V.Ea,Ee=V.K[0],Ue=V.w;if(8>ue)for(V=(1<<V.b)-1,Ue=(1<<ue)-1;G<Q;++G){var Oe,qe=0;for(Oe=0;Oe<je;++Oe)Oe&V||(qe=M(ae[ce++])),Ne[Le++]=H(Ee[qe&Ue]),qe>>=ue}else T["VP8LMapColor"+L](ae,ce,Ee,Ue,Ne,Le,G,Q,je)}}function Ut(w,S,L,M,H){for(L=S+L;S<L;){var V=w[S++];M[H++]=V>>16&255,M[H++]=V>>8&255,M[H++]=255&V}}function Qt(w,S,L,M,H){for(L=S+L;S<L;){var V=w[S++];M[H++]=V>>16&255,M[H++]=V>>8&255,M[H++]=255&V,M[H++]=V>>24&255}}function Zt(w,S,L,M,H){for(L=S+L;S<L;){var V=(G=w[S++])>>16&240|G>>12&15,G=240&G|G>>28&15;M[H++]=V,M[H++]=G}}function er(w,S,L,M,H){for(L=S+L;S<L;){var V=(G=w[S++])>>16&248|G>>13&7,G=G>>5&224|G>>3&31;M[H++]=V,M[H++]=G}}function Ir(w,S,L,M,H){for(L=S+L;S<L;){var V=w[S++];M[H++]=255&V,M[H++]=V>>8&255,M[H++]=V>>16&255}}function Pt(w,S,L,M,H,V){if(V==0)for(L=S+L;S<L;)ve(M,((V=w[S++])[0]>>24|V[1]>>8&65280|V[2]<<8&16711680|V[3]<<24)>>>0),H+=32;else n(M,H,w,S,L)}function Nr(w,S){T[S][0]=T[w+"0"],T[S][1]=T[w+"1"],T[S][2]=T[w+"2"],T[S][3]=T[w+"3"],T[S][4]=T[w+"4"],T[S][5]=T[w+"5"],T[S][6]=T[w+"6"],T[S][7]=T[w+"7"],T[S][8]=T[w+"8"],T[S][9]=T[w+"9"],T[S][10]=T[w+"10"],T[S][11]=T[w+"11"],T[S][12]=T[w+"12"],T[S][13]=T[w+"13"],T[S][14]=T[w+"0"],T[S][15]=T[w+"0"]}function Ft(w){return w==M_||w==F_||w==Ux||w==$_}function Ge(){this.eb=[],this.size=this.A=this.fb=0}function We(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function wt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ge,this.f.kb=new We,this.sd=null}function Dt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function vr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function vo(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function kn(w,S){var L=w.T,M=S.ba.f.RGBA,H=M.eb,V=M.fb+w.ka*M.A,G=Hs[S.ba.S],Q=w.y,ae=w.O,ce=w.f,Ne=w.N,Le=w.ea,ue=w.W,je=S.cc,Ee=S.dc,Ue=S.Mc,Oe=S.Nc,qe=w.ka,Ve=w.ka+w.T,Ze=w.U,Xe=Ze+1>>1;for(qe==0?G(Q,ae,null,null,ce,Ne,Le,ue,ce,Ne,Le,ue,H,V,null,null,Ze):(G(S.ec,S.fc,Q,ae,je,Ee,Ue,Oe,ce,Ne,Le,ue,H,V-M.A,H,V,Ze),++L);qe+2<Ve;qe+=2)je=ce,Ee=Ne,Ue=Le,Oe=ue,Ne+=w.Rc,ue+=w.Rc,V+=2*M.A,G(Q,(ae+=2*w.fa)-w.fa,Q,ae,je,Ee,Ue,Oe,ce,Ne,Le,ue,H,V-M.A,H,V,Ze);return ae+=w.fa,w.j+Ve<w.o?(n(S.ec,S.fc,Q,ae,Ze),n(S.cc,S.dc,ce,Ne,Xe),n(S.Mc,S.Nc,Le,ue,Xe),L--):1&Ve||G(Q,ae,null,null,ce,Ne,Le,ue,ce,Ne,Le,ue,H,V+M.A,null,null,Ze),L}function Ea(w,S,L){var M=w.F,H=[w.J];if(M!=null){var V=w.U,G=S.ba.S,Q=G==Bx||G==Ux;S=S.ba.f.RGBA;var ae=[0],ce=w.ka;ae[0]=w.T,w.Kb&&(ce==0?--ae[0]:(--ce,H[0]-=w.width),w.j+w.ka+w.T==w.o&&(ae[0]=w.o-w.j-ce));var Ne=S.eb;ce=S.fb+ce*S.A,w=OT(M,H[0],w.width,V,ae,Ne,ce+(Q?0:3),S.A),t(L==ae),w&&Ft(G)&&cm(Ne,ce,Q,V,ae,S.A)}return 0}function xi(w){var S=w.ma,L=S.ba.S,M=11>L,H=L==Fx||L==$x||L==Bx||L==I_||L==12||Ft(L);if(S.memory=null,S.Ib=null,S.Jb=null,S.Nd=null,!tm(S.Oa,w,H?11:12))return 0;if(H&&Ft(L)&&Qp(),w.da)alert("todo:use_scaling");else{if(M){if(S.Ib=vo,w.Kb){if(L=w.U+1>>1,S.memory=i(w.U+2*L),S.memory==null)return 0;S.ec=S.memory,S.fc=0,S.cc=S.ec,S.dc=S.fc+w.U,S.Mc=S.cc,S.Nc=S.dc+L,S.Ib=kn,Qp()}}else alert("todo:EmitYUV");H&&(S.Jb=Ea,M&&_o())}if(M&&!GT){for(w=0;256>w;++w)$W[w]=89858*(w-128)+qx>>zx,zW[w]=-22014*(w-128)+qx,UW[w]=-45773*(w-128),BW[w]=113618*(w-128)+qx>>zx;for(w=dm;w<z_;++w)S=76283*(w-16)+qx>>zx,qW[w-dm]=Zn(S,255),HW[w-dm]=Zn(S+8>>4,15);GT=1}return 1}function mt(w){var S=w.ma,L=w.U,M=w.T;return t(!(1&w.ka)),0>=L||0>=M?0:(L=S.Ib(w,S),S.Jb!=null&&S.Jb(w,S,L),S.Dc+=L,1)}function xo(w){w.ma.memory=null}function yo(w,S,L,M){return _e(w,8)!=47?0:(S[0]=_e(w,14)+1,L[0]=_e(w,14)+1,M[0]=_e(w,1),_e(w,3)!=0?0:!w.h)}function ni(w,S){if(4>w)return w+1;var L=w-2>>1;return(2+(1&w)<<L)+_e(S,L)+1}function qi(w,S){return 120<S?S-120:1<=(L=((L=jW[S-1])>>4)*w+(8-(15&L)))?L:1;var L}function gn(w,S,L){var M=B(L),H=w[S+=255&M].g-8;return 0<H&&(J(L,L.u+8),M=B(L),S+=w[S].value,S+=M&(1<<H)-1),J(L,L.u+w[S].g),w[S].value}function Qn(w,S,L){return L.g+=w.g,L.value+=w.value<<S>>>0,t(8>=L.g),w.g}function W(w,S,L){var M=w.xc;return t((S=M==0?0:w.vc[w.md*(L>>M)+(S>>M)])<w.Wb),w.Ya[S]}function de(w,S,L,M){var H=w.ab,V=w.c*S,G=w.C;S=G+S;var Q=L,ae=M;for(M=w.Ta,L=w.Ua;0<H--;){var ce=w.gc[H],Ne=G,Le=S,ue=Q,je=ae,Ee=(ae=M,Q=L,ce.Ea);switch(t(Ne<Le),t(Le<=ce.nc),ce.hc){case 2:Un(ue,je,(Le-Ne)*Ee,ae,Q);break;case 0:var Ue=Ne,Oe=Le,qe=ae,Ve=Q,Ze=(Tt=ce).Ea;Ue==0&&(nm(ue,je,null,null,1,qe,Ve),Jt(ue,je+1,0,0,Ze-1,qe,Ve+1),je+=Ze,Ve+=Ze,++Ue);for(var Xe=1<<Tt.b,Lt=Xe-1,_t=$e(Ze,Tt.b),or=Tt.K,Tt=Tt.w+(Ue>>Tt.b)*_t;Ue<Oe;){var mr=or,ma=Tt,lr=1;for(oh(ue,je,qe,Ve-Ze,1,qe,Ve);lr<Ze;){var Ct=(lr&~Lt)+Xe;Ct>Ze&&(Ct=Ze),(0,im[mr[ma++]>>8&15])(ue,je+ +lr,qe,Ve+lr-Ze,Ct-lr,qe,Ve+lr),lr=Ct}je+=Ze,Ve+=Ze,++Ue&Lt||(Tt+=_t)}Le!=ce.nc&&n(ae,Q-Ee,ae,Q+(Le-Ne-1)*Ee,Ee);break;case 1:for(Ee=ue,Oe=je,Ze=(ue=ce.Ea)-(Ve=ue&~(qe=(je=1<<ce.b)-1)),Ue=$e(ue,ce.b),Xe=ce.K,ce=ce.w+(Ne>>ce.b)*Ue;Ne<Le;){for(Lt=Xe,_t=ce,or=new ut,Tt=Oe+Ve,mr=Oe+ue;Oe<Tt;)bt(Lt[_t++],or),sm(or,Ee,Oe,je,ae,Q),Oe+=je,Q+=je;Oe<mr&&(bt(Lt[_t++],or),sm(or,Ee,Oe,Ze,ae,Q),Oe+=Ze,Q+=Ze),++Ne&qe||(ce+=Ue)}break;case 3:if(ue==ae&&je==Q&&0<ce.b){for(Oe=ae,ue=Ee=Q+(Le-Ne)*Ee-(Ve=(Le-Ne)*$e(ce.Ea,ce.b)),je=ae,qe=Q,Ue=[],Ve=(Ze=Ve)-1;0<=Ve;--Ve)Ue[Ve]=je[qe+Ve];for(Ve=Ze-1;0<=Ve;--Ve)Oe[ue+Ve]=Ue[Ve];Rx(ce,Ne,Le,ae,Ee,ae,Q)}else Rx(ce,Ne,Le,ue,je,ae,Q)}Q=M,ae=L}ae!=L&&n(M,L,Q,ae,V)}function ne(w,S){var L=w.V,M=w.Ba+w.c*w.C,H=S-w.C;if(t(S<=w.l.o),t(16>=H),0<H){var V=w.l,G=w.Ta,Q=w.Ua,ae=V.width;if(de(w,H,L,M),H=Q=[Q],t((L=w.C)<(M=S)),t(V.v<V.va),M>V.o&&(M=V.o),L<V.j){var ce=V.j-L;L=V.j,H[0]+=ce*ae}if(L>=M?L=0:(H[0]+=4*V.v,V.ka=L-V.j,V.U=V.va-V.v,V.T=M-L,L=1),L){if(Q=Q[0],11>(L=w.ca).S){var Ne=L.f.RGBA,Le=(M=L.S,H=V.U,V=V.T,ce=Ne.eb,Ne.A),ue=V;for(Ne=Ne.fb+w.Ma*Ne.A;0<ue--;){var je=G,Ee=Q,Ue=H,Oe=ce,qe=Ne;switch(M){case Mx:om(je,Ee,Ue,Oe,qe);break;case Fx:Gc(je,Ee,Ue,Oe,qe);break;case M_:Gc(je,Ee,Ue,Oe,qe),cm(Oe,qe,0,Ue,1,0);break;case FT:wd(je,Ee,Ue,Oe,qe);break;case $x:Pt(je,Ee,Ue,Oe,qe,1);break;case F_:Pt(je,Ee,Ue,Oe,qe,1),cm(Oe,qe,0,Ue,1,0);break;case Bx:Pt(je,Ee,Ue,Oe,qe,0);break;case Ux:Pt(je,Ee,Ue,Oe,qe,0),cm(Oe,qe,1,Ue,1,0);break;case I_:Kc(je,Ee,Ue,Oe,qe);break;case $_:Kc(je,Ee,Ue,Oe,qe),kT(Oe,qe,Ue,1,0);break;case $T:Yc(je,Ee,Ue,Oe,qe);break;default:t(0)}Q+=ae,Ne+=Le}w.Ma+=V}else alert("todo:EmitRescaledRowsYUVA");t(w.Ma<=L.height)}}w.C=S,t(w.C<=w.i)}function se(w){var S;if(0<w.ua)return 0;for(S=0;S<w.Wb;++S){var L=w.Ya[S].G,M=w.Ya[S].H;if(0<L[1][M[1]+0].g||0<L[2][M[2]+0].g||0<L[3][M[3]+0].g)return 0}return 1}function fe(w,S,L,M,H,V){if(w.Z!=0){var G=w.qd,Q=w.rd;for(t(Qc[w.Z]!=null);S<L;++S)Qc[w.Z](G,Q,M,H,M,H,V),G=M,Q=H,H+=V;w.qd=G,w.rd=Q}}function pe(w,S){var L=w.l.ma,M=L.Z==0||L.Z==1?w.l.j:w.C;if(M=w.C<M?M:w.C,t(S<=w.l.o),S>M){var H=w.l.width,V=L.ca,G=L.tb+H*M,Q=w.V,ae=w.Ba+w.c*M,ce=w.gc;t(w.ab==1),t(ce[0].hc==3),sl(ce[0],M,S,Q,ae,V,G),fe(L,M,S,V,G,H)}w.C=w.Ma=S}function Te(w,S,L,M,H,V,G){var Q=w.$/M,ae=w.$%M,ce=w.m,Ne=w.s,Le=L+w.$,ue=Le;H=L+M*H;var je=L+M*V,Ee=280+Ne.ua,Ue=w.Pb?Q:16777216,Oe=0<Ne.ua?Ne.Wa:null,qe=Ne.wc,Ve=Le<je?W(Ne,ae,Q):null;t(w.C<V),t(je<=H);var Ze=!1;e:for(;;){for(;Ze||Le<je;){var Xe=0;if(Q>=Ue){var Lt=Le-L;t((Ue=w).Pb),Ue.wd=Ue.m,Ue.xd=Lt,0<Ue.s.ua&&Pe(Ue.s.Wa,Ue.s.vb),Ue=Q+EW}if(ae&qe||(Ve=W(Ne,ae,Q)),t(Ve!=null),Ve.Qb&&(S[Le]=Ve.qb,Ze=!0),!Ze)if(me(ce),Ve.jc){Xe=ce,Lt=S;var _t=Le,or=Ve.pd[B(Xe)&bd-1];t(Ve.jc),256>or.g?(J(Xe,Xe.u+or.g),Lt[_t]=or.value,Xe=0):(J(Xe,Xe.u+or.g-256),t(256<=or.value),Xe=or.value),Xe==0&&(Ze=!0)}else Xe=gn(Ve.G[0],Ve.H[0],ce);if(ce.h)break;if(Ze||256>Xe){if(!Ze)if(Ve.nd)S[Le]=(Ve.qb|Xe<<8)>>>0;else{if(me(ce),Ze=gn(Ve.G[1],Ve.H[1],ce),me(ce),Lt=gn(Ve.G[2],Ve.H[2],ce),_t=gn(Ve.G[3],Ve.H[3],ce),ce.h)break;S[Le]=(_t<<24|Ze<<16|Xe<<8|Lt)>>>0}if(Ze=!1,++Le,++ae>=M&&(ae=0,++Q,G!=null&&Q<=V&&!(Q%16)&&G(w,Q),Oe!=null))for(;ue<Le;)Xe=S[ue++],Oe.X[(506832829*Xe&4294967295)>>>Oe.Mb]=Xe}else if(280>Xe){if(Xe=ni(Xe-256,ce),Lt=gn(Ve.G[4],Ve.H[4],ce),me(ce),Lt=qi(M,Lt=ni(Lt,ce)),ce.h)break;if(Le-L<Lt||H-Le<Xe)break e;for(_t=0;_t<Xe;++_t)S[Le+_t]=S[Le+_t-Lt];for(Le+=Xe,ae+=Xe;ae>=M;)ae-=M,++Q,G!=null&&Q<=V&&!(Q%16)&&G(w,Q);if(t(Le<=H),ae&qe&&(Ve=W(Ne,ae,Q)),Oe!=null)for(;ue<Le;)Xe=S[ue++],Oe.X[(506832829*Xe&4294967295)>>>Oe.Mb]=Xe}else{if(!(Xe<Ee))break e;for(Ze=Xe-280,t(Oe!=null);ue<Le;)Xe=S[ue++],Oe.X[(506832829*Xe&4294967295)>>>Oe.Mb]=Xe;Xe=Le,t(!(Ze>>>(Lt=Oe).Xa)),S[Xe]=Lt.X[Ze],Ze=!0}Ze||t(ce.h==U(ce))}if(w.Pb&&ce.h&&Le<H)t(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&Pe(w.s.vb,w.s.Wa);else{if(ce.h)break e;G!=null&&G(w,Q>V?V:Q),w.a=0,w.$=Le-L}return 1}return w.a=3,0}function De(w){t(w!=null),w.vc=null,w.yc=null,w.Ya=null;var S=w.Wa;S!=null&&(S.X=null),w.vb=null,t(w!=null)}function Ce(){var w=new Yt;return w==null?null:(w.a=0,w.xb=zT,Nr("Predictor","VP8LPredictors"),Nr("Predictor","VP8LPredictors_C"),Nr("PredictorAdd","VP8LPredictorsAdd"),Nr("PredictorAdd","VP8LPredictorsAdd_C"),Un=At,sm=qt,om=Ut,Gc=Qt,Kc=Zt,Yc=er,wd=Ir,T.VP8LMapColor32b=il,T.VP8LMapColor8b=am,w)}function ke(w,S,L,M,H){var V=1,G=[w],Q=[S],ae=M.m,ce=M.s,Ne=null,Le=0;e:for(;;){if(L)for(;V&&_e(ae,1);){var ue=G,je=Q,Ee=M,Ue=1,Oe=Ee.m,qe=Ee.gc[Ee.ab],Ve=_e(Oe,2);if(Ee.Oc&1<<Ve)V=0;else{switch(Ee.Oc|=1<<Ve,qe.hc=Ve,qe.Ea=ue[0],qe.nc=je[0],qe.K=[null],++Ee.ab,t(4>=Ee.ab),Ve){case 0:case 1:qe.b=_e(Oe,3)+2,Ue=ke($e(qe.Ea,qe.b),$e(qe.nc,qe.b),0,Ee,qe.K),qe.K=qe.K[0];break;case 3:var Ze,Xe=_e(Oe,8)+1,Lt=16<Xe?0:4<Xe?1:2<Xe?2:3;if(ue[0]=$e(qe.Ea,Lt),qe.b=Lt,Ze=Ue=ke(Xe,1,0,Ee,qe.K)){var _t,or=Xe,Tt=qe,mr=1<<(8>>Tt.b),ma=i(mr);if(ma==null)Ze=0;else{var lr=Tt.K[0],Ct=Tt.w;for(ma[0]=Tt.K[0][0],_t=1;_t<1*or;++_t)ma[_t]=it(lr[Ct+_t],ma[_t-1]);for(;_t<4*mr;++_t)ma[_t]=0;Tt.K[0]=null,Tt.K[0]=ma,Ze=1}}Ue=Ze;break;case 2:break;default:t(0)}V=Ue}}if(G=G[0],Q=Q[0],V&&_e(ae,1)&&!(V=1<=(Le=_e(ae,4))&&11>=Le)){M.a=3;break e}var lt;if(lt=V)t:{var qn,ir,xr,cn=M,Ua=G,bi=Q,Pn=Le,ai=L,wi=cn.m,ga=cn.s,br=[null],Mr=1,Ln=0,Fr=AW[Pn];r:for(;;){if(ai&&_e(wi,1)){var za=_e(wi,3)+2,So=$e(Ua,za),Hn=$e(bi,za),Hi=So*Hn;if(!ke(So,Hn,0,cn,br))break r;for(br=br[0],ga.xc=za,qn=0;qn<Hi;++qn){var Jr=br[qn]>>8&65535;br[qn]=Jr,Jr>=Mr&&(Mr=Jr+1)}}if(wi.h)break r;for(ir=0;5>ir;++ir){var va=BT[ir];!ir&&0<Pn&&(va+=1<<Pn),Ln<va&&(Ln=va)}var ds=s(Mr*Fr,I),_i=Mr,fs=s(_i,Y);if(fs==null)var hs=null;else t(65536>=_i),hs=fs;var Wi=i(Ln);if(hs==null||Wi==null||ds==null){cn.a=1;break r}var ps=ds;for(qn=xr=0;qn<Mr;++qn){var tn=hs[qn],ms=tn.G,jo=tn.H,Nd=0,Kl=1,qa=0;for(ir=0;5>ir;++ir){va=BT[ir],ms[ir]=ps,jo[ir]=xr,!ir&&0<Pn&&(va+=1<<Pn);a:{var Wx,q_=va,Vx=cn,fm=Wi,GW=ps,KW=xr,H_=0,Zc=Vx.m,YW=_e(Zc,1);if(a(fm,0,0,q_),YW){var XW=_e(Zc,1)+1,JW=_e(Zc,1),XT=_e(Zc,JW==0?1:8);fm[XT]=1,XW==2&&(fm[XT=_e(Zc,8)]=1);var Gx=1}else{var JT=i(19),QT=_e(Zc,4)+4;if(19<QT){Vx.a=3;var Kx=0;break a}for(Wx=0;Wx<QT;++Wx)JT[SW[Wx]]=_e(Zc,3);var W_=void 0,hm=void 0,ZT=Vx,QW=JT,Yx=q_,eC=fm,V_=0,eu=ZT.m,tC=8,rC=s(128,I);n:for(;R(rC,0,7,QW,19);){if(_e(eu,1)){var ZW=2+2*_e(eu,3);if((W_=2+_e(eu,ZW))>Yx)break n}else W_=Yx;for(hm=0;hm<Yx&&W_--;){me(eu);var nC=rC[0+(127&B(eu))];J(eu,eu.u+nC.g);var ch=nC.value;if(16>ch)eC[hm++]=ch,ch!=0&&(tC=ch);else{var eV=ch==16,aC=ch-16,tV=_W[aC],iC=_e(eu,wW[aC])+tV;if(hm+iC>Yx)break n;for(var rV=eV?tC:0;0<iC--;)eC[hm++]=rV}}V_=1;break n}V_||(ZT.a=3),Gx=V_}(Gx=Gx&&!Zc.h)&&(H_=R(GW,KW,8,fm,q_)),Gx&&H_!=0?Kx=H_:(Vx.a=3,Kx=0)}if(Kx==0)break r;if(Kl&&NW[ir]==1&&(Kl=ps[xr].g==0),Nd+=ps[xr].g,xr+=Kx,3>=ir){var pm,G_=Wi[0];for(pm=1;pm<va;++pm)Wi[pm]>G_&&(G_=Wi[pm]);qa+=G_}}if(tn.nd=Kl,tn.Qb=0,Kl&&(tn.qb=(ms[3][jo[3]+0].value<<24|ms[1][jo[1]+0].value<<16|ms[2][jo[2]+0].value)>>>0,Nd==0&&256>ms[0][jo[0]+0].value&&(tn.Qb=1,tn.qb+=ms[0][jo[0]+0].value<<8)),tn.jc=!tn.Qb&&6>qa,tn.jc){var Xx,Yl=tn;for(Xx=0;Xx<bd;++Xx){var tu=Xx,ru=Yl.pd[tu],Jx=Yl.G[0][Yl.H[0]+tu];256<=Jx.value?(ru.g=Jx.g+256,ru.value=Jx.value):(ru.g=0,ru.value=0,tu>>=Qn(Jx,8,ru),tu>>=Qn(Yl.G[1][Yl.H[1]+tu],16,ru),tu>>=Qn(Yl.G[2][Yl.H[2]+tu],0,ru),Qn(Yl.G[3][Yl.H[3]+tu],24,ru))}}}ga.vc=br,ga.Wb=Mr,ga.Ya=hs,ga.yc=ds,lt=1;break t}lt=0}if(!(V=lt)){M.a=3;break e}if(0<Le){if(ce.ua=1<<Le,!ee(ce.Wa,Le)){M.a=1,V=0;break e}}else ce.ua=0;var K_=M,sC=G,nV=Q,Y_=K_.s,X_=Y_.xc;if(K_.c=sC,K_.i=nV,Y_.md=$e(sC,X_),Y_.wc=X_==0?-1:(1<<X_)-1,L){M.xb=RW;break e}if((Ne=i(G*Q))==null){M.a=1,V=0;break e}V=(V=Te(M,Ne,0,G,Q,Q,null))&&!ae.h;break e}return V?(H!=null?H[0]=Ne:(t(Ne==null),t(L)),M.$=0,L||De(ce)):De(ce),V}function Re(w,S){var L=w.c*w.i,M=L+S+16*S;return t(w.c<=S),w.V=i(M),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+L+S,1)}function Je(w,S){var L=w.C,M=S-L,H=w.V,V=w.Ba+w.c*L;for(t(S<=w.l.o);0<M;){var G=16<M?16:M,Q=w.l.ma,ae=w.l.width,ce=ae*G,Ne=Q.ca,Le=Q.tb+ae*L,ue=w.Ta,je=w.Ua;de(w,G,H,V),PT(ue,je,Ne,Le,ce),fe(Q,L,L+G,Ne,Le,ae),M-=G,H+=G*w.c,L+=G}t(L==S),w.C=w.Ma=S}function nt(){this.ub=this.yd=this.td=this.Rb=0}function dt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function tt(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function ct(){this.Yb=function(){var w=[];return function S(L,M,H){for(var V=H[M],G=0;G<V&&(L.push(H.length>M+1?[]:0),!(H.length<M+1));G++)S(L[G],M+1,H)}(w,0,[3,11]),w}()}function Vt(){this.jb=i(3),this.Wc=l([4,8],ct),this.Xc=l([4,17],ct)}function Gr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function pr(){this.ld=this.La=this.dd=this.tc=0}function On(){this.Na=this.la=0}function tl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function bo(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function rl(){this.uc=this.M=this.Nb=0,this.wa=Array(new pr),this.Y=0,this.ya=Array(new bo),this.aa=0,this.l=new eh}function $s(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Uc(){this.cb=this.a=0,this.sc="",this.m=new k,this.Od=new nt,this.Kc=new dt,this.ed=new Gr,this.Qa=new tt,this.Ic=this.$c=this.Aa=0,this.D=new rl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,k),this.ia=0,this.pb=s(4,tl),this.Pa=new Vt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new $s),this.Hd=0,this.rb=Array(new On),this.sb=0,this.wa=Array(new pr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new bo),this.L=this.aa=0,this.gd=l([4,2],pr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Zn(w,S){return 0>w?0:w>S?S:w}function eh(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function b_(){var w=new Uc;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,um||(um=th)),w}function ea(w,S,L){return w.a==0&&(w.a=S,w.sc=L,w.cb=0),0}function _x(w,S,L){return 3<=L&&w[S+0]==157&&w[S+1]==1&&w[S+2]==42}function nl(w,S){if(w==null)return 0;if(w.a=0,w.sc="OK",S==null)return ea(w,2,"null VP8Io passed to VP8GetHeaders()");var L=S.data,M=S.w,H=S.ha;if(4>H)return ea(w,7,"Truncated header.");var V=L[M+0]|L[M+1]<<8|L[M+2]<<16,G=w.Od;if(G.Rb=!(1&V),G.td=V>>1&7,G.yd=V>>4&1,G.ub=V>>5,3<G.td)return ea(w,3,"Incorrect keyframe parameters.");if(!G.yd)return ea(w,4,"Frame not displayable.");M+=3,H-=3;var Q=w.Kc;if(G.Rb){if(7>H)return ea(w,7,"cannot parse picture header");if(!_x(L,M,H))return ea(w,3,"Bad code word");Q.c=16383&(L[M+4]<<8|L[M+3]),Q.Td=L[M+4]>>6,Q.i=16383&(L[M+6]<<8|L[M+5]),Q.Ud=L[M+6]>>6,M+=7,H-=7,w.za=Q.c+15>>4,w.Ub=Q.i+15>>4,S.width=Q.c,S.height=Q.i,S.Da=0,S.j=0,S.v=0,S.va=S.width,S.o=S.height,S.da=0,S.ib=S.width,S.hb=S.height,S.U=S.width,S.T=S.height,a((V=w.Pa).jb,0,255,V.jb.length),t((V=w.Qa)!=null),V.Cb=0,V.Bb=0,V.Fb=1,a(V.Zb,0,0,V.Zb.length),a(V.Lb,0,0,V.Lb)}if(G.ub>H)return ea(w,7,"bad partition length");ie(V=w.m,L,M,G.ub),M+=G.ub,H-=G.ub,G.Rb&&(Q.Ld=te(V),Q.Kd=te(V)),Q=w.Qa;var ae,ce=w.Pa;if(t(V!=null),t(Q!=null),Q.Cb=te(V),Q.Cb){if(Q.Bb=te(V),te(V)){for(Q.Fb=te(V),ae=0;4>ae;++ae)Q.Zb[ae]=te(V)?X(V,7):0;for(ae=0;4>ae;++ae)Q.Lb[ae]=te(V)?X(V,6):0}if(Q.Bb)for(ae=0;3>ae;++ae)ce.jb[ae]=te(V)?re(V,8):255}else Q.Bb=0;if(V.Ka)return ea(w,3,"cannot parse segment header");if((Q=w.ed).zd=te(V),Q.Tb=re(V,6),Q.wb=re(V,3),Q.Pc=te(V),Q.Pc&&te(V)){for(ce=0;4>ce;++ce)te(V)&&(Q.vd[ce]=X(V,6));for(ce=0;4>ce;++ce)te(V)&&(Q.od[ce]=X(V,6))}if(w.L=Q.Tb==0?0:Q.zd?1:2,V.Ka)return ea(w,3,"cannot parse filter header");var Ne=H;if(H=ae=M,M=ae+Ne,Q=Ne,w.Xb=(1<<re(w.m,2))-1,Ne<3*(ce=w.Xb))L=7;else{for(ae+=3*ce,Q-=3*ce,Ne=0;Ne<ce;++Ne){var Le=L[H+0]|L[H+1]<<8|L[H+2]<<16;Le>Q&&(Le=Q),ie(w.Jc[+Ne],L,ae,Le),ae+=Le,Q-=Le,H+=3}ie(w.Jc[+ce],L,ae,Q),L=ae<M?0:5}if(L!=0)return ea(w,L,"cannot parse partitions");for(L=re(ae=w.m,7),H=te(ae)?X(ae,4):0,M=te(ae)?X(ae,4):0,Q=te(ae)?X(ae,4):0,ce=te(ae)?X(ae,4):0,ae=te(ae)?X(ae,4):0,Ne=w.Qa,Le=0;4>Le;++Le){if(Ne.Cb){var ue=Ne.Zb[Le];Ne.Fb||(ue+=L)}else{if(0<Le){w.pb[Le]=w.pb[0];continue}ue=L}var je=w.pb[Le];je.Sc[0]=B_[Zn(ue+H,127)],je.Sc[1]=U_[Zn(ue+0,127)],je.Eb[0]=2*B_[Zn(ue+M,127)],je.Eb[1]=101581*U_[Zn(ue+Q,127)]>>16,8>je.Eb[1]&&(je.Eb[1]=8),je.Qc[0]=B_[Zn(ue+ce,117)],je.Qc[1]=U_[Zn(ue+ae,127)],je.lc=ue+ae}if(!G.Rb)return ea(w,4,"Not a key frame.");for(te(V),G=w.Pa,L=0;4>L;++L){for(H=0;8>H;++H)for(M=0;3>M;++M)for(Q=0;11>Q;++Q)ce=le(V,PW[L][H][M][Q])?re(V,8):kW[L][H][M][Q],G.Wc[L][H].Yb[M][Q]=ce;for(H=0;17>H;++H)G.Xc[L][H]=G.Wc[L][LW[H]]}return w.kc=te(V),w.kc&&(w.Bd=re(V,8)),w.cb=1}function th(w,S,L,M,H,V,G){var Q=S[H].Yb[L];for(L=0;16>H;++H){if(!le(w,Q[L+0]))return H;for(;!le(w,Q[L+1]);)if(Q=S[++H].Yb[0],L=0,H==16)return 16;var ae=S[H+1].Yb;if(le(w,Q[L+2])){var ce=w,Ne=0;if(le(ce,(ue=Q)[(Le=L)+3]))if(le(ce,ue[Le+6])){for(Q=0,Le=2*(Ne=le(ce,ue[Le+8]))+(ue=le(ce,ue[Le+9+Ne])),Ne=0,ue=TW[Le];ue[Q];++Q)Ne+=Ne+le(ce,ue[Q]);Ne+=3+(8<<Le)}else le(ce,ue[Le+7])?(Ne=7+2*le(ce,165),Ne+=le(ce,145)):Ne=5+le(ce,159);else Ne=le(ce,ue[Le+4])?3+le(ce,ue[Le+5]):2;Q=ae[2]}else Ne=1,Q=ae[1];ae=G+CW[H],0>(ce=w).b&&K(ce);var Le,ue=ce.b,je=(Le=ce.Ca>>1)-(ce.I>>ue)>>31;--ce.b,ce.Ca+=je,ce.Ca|=1,ce.I-=(Le+1&je)<<ue,V[ae]=((Ne^je)-je)*M[(0<H)+0]}return 16}function Nx(w){var S=w.rb[w.sb-1];S.la=0,S.Na=0,a(w.zc,0,0,w.zc.length),w.ja=0}function Bs(w,S,L,M,H){H=w[S+L+32*M]+(H>>3),w[S+L+32*M]=-256&H?0>H?0:255:H}function fa(w,S,L,M,H,V){Bs(w,S,0,L,M+H),Bs(w,S,1,L,M+V),Bs(w,S,2,L,M-V),Bs(w,S,3,L,M-H)}function Dl(w){return(20091*w>>16)+w}function Sx(w,S,L,M){var H,V=0,G=i(16);for(H=0;4>H;++H){var Q=w[S+0]+w[S+8],ae=w[S+0]-w[S+8],ce=(35468*w[S+4]>>16)-Dl(w[S+12]),Ne=Dl(w[S+4])+(35468*w[S+12]>>16);G[V+0]=Q+Ne,G[V+1]=ae+ce,G[V+2]=ae-ce,G[V+3]=Q-Ne,V+=4,S++}for(H=V=0;4>H;++H)Q=(w=G[V+0]+4)+G[V+8],ae=w-G[V+8],ce=(35468*G[V+4]>>16)-Dl(G[V+12]),Bs(L,M,0,0,Q+(Ne=Dl(G[V+4])+(35468*G[V+12]>>16))),Bs(L,M,1,0,ae+ce),Bs(L,M,2,0,ae-ce),Bs(L,M,3,0,Q-Ne),V++,M+=32}function w_(w,S,L,M){var H=w[S+0]+4,V=35468*w[S+4]>>16,G=Dl(w[S+4]),Q=35468*w[S+1]>>16;fa(L,M,0,H+G,w=Dl(w[S+1]),Q),fa(L,M,1,H+V,w,Q),fa(L,M,2,H-V,w,Q),fa(L,M,3,H-G,w,Q)}function __(w,S,L,M,H){Sx(w,S,L,M),H&&Sx(w,S+16,L,M+4)}function al(w,S,L,M){_d(w,S+0,L,M,1),_d(w,S+32,L,M+128,1)}function jx(w,S,L,M){var H;for(w=w[S+0]+4,H=0;4>H;++H)for(S=0;4>S;++S)Bs(L,M,S,H,w)}function Ax(w,S,L,M){w[S+0]&&Or(w,S+0,L,M),w[S+16]&&Or(w,S+16,L,M+4),w[S+32]&&Or(w,S+32,L,M+128),w[S+48]&&Or(w,S+48,L,M+128+4)}function rh(w,S,L,M){var H,V=i(16);for(H=0;4>H;++H){var G=w[S+0+H]+w[S+12+H],Q=w[S+4+H]+w[S+8+H],ae=w[S+4+H]-w[S+8+H],ce=w[S+0+H]-w[S+12+H];V[0+H]=G+Q,V[8+H]=G-Q,V[4+H]=ce+ae,V[12+H]=ce-ae}for(H=0;4>H;++H)G=(w=V[0+4*H]+3)+V[3+4*H],Q=V[1+4*H]+V[2+4*H],ae=V[1+4*H]-V[2+4*H],ce=w-V[3+4*H],L[M+0]=G+Q>>3,L[M+16]=ce+ae>>3,L[M+32]=G-Q>>3,L[M+48]=ce-ae>>3,M+=64}function ud(w,S,L){var M,H=S-32,V=us,G=255-w[H-1];for(M=0;M<L;++M){var Q,ae=V,ce=G+w[S-1];for(Q=0;Q<L;++Q)w[S+Q]=ae[ce+w[H+Q]];S+=32}}function N_(w,S){ud(w,S,4)}function S_(w,S){ud(w,S,8)}function j_(w,S){ud(w,S,16)}function Hp(w,S){var L;for(L=0;16>L;++L)n(w,S+32*L,w,S-32,16)}function Ex(w,S){var L;for(L=16;0<L;--L)a(w,S,w[S-1],16),S+=32}function wo(w,S,L){var M;for(M=0;16>M;++M)a(S,L+32*M,w,16)}function A_(w,S){var L,M=16;for(L=0;16>L;++L)M+=w[S-1+32*L]+w[S+L-32];wo(M>>5,w,S)}function dd(w,S){var L,M=8;for(L=0;16>L;++L)M+=w[S-1+32*L];wo(M>>4,w,S)}function Wp(w,S){var L,M=8;for(L=0;16>L;++L)M+=w[S+L-32];wo(M>>4,w,S)}function E_(w,S){wo(128,w,S)}function tr(w,S,L){return w+2*S+L+2>>2}function T_(w,S){var L,M=S-32;for(M=new Uint8Array([tr(w[M-1],w[M+0],w[M+1]),tr(w[M+0],w[M+1],w[M+2]),tr(w[M+1],w[M+2],w[M+3]),tr(w[M+2],w[M+3],w[M+4])]),L=0;4>L;++L)n(w,S+32*L,M,0,M.length)}function C_(w,S){var L=w[S-1],M=w[S-1+32],H=w[S-1+64],V=w[S-1+96];ve(w,S+0,16843009*tr(w[S-1-32],L,M)),ve(w,S+32,16843009*tr(L,M,H)),ve(w,S+64,16843009*tr(M,H,V)),ve(w,S+96,16843009*tr(H,V,V))}function k_(w,S){var L,M=4;for(L=0;4>L;++L)M+=w[S+L-32]+w[S-1+32*L];for(M>>=3,L=0;4>L;++L)a(w,S+32*L,M,4)}function Il(w,S){var L=w[S-1+0],M=w[S-1+32],H=w[S-1+64],V=w[S-1-32],G=w[S+0-32],Q=w[S+1-32],ae=w[S+2-32],ce=w[S+3-32];w[S+0+96]=tr(M,H,w[S-1+96]),w[S+1+96]=w[S+0+64]=tr(L,M,H),w[S+2+96]=w[S+1+64]=w[S+0+32]=tr(V,L,M),w[S+3+96]=w[S+2+64]=w[S+1+32]=w[S+0+0]=tr(G,V,L),w[S+3+64]=w[S+2+32]=w[S+1+0]=tr(Q,G,V),w[S+3+32]=w[S+2+0]=tr(ae,Q,G),w[S+3+0]=tr(ce,ae,Q)}function Ml(w,S){var L=w[S+1-32],M=w[S+2-32],H=w[S+3-32],V=w[S+4-32],G=w[S+5-32],Q=w[S+6-32],ae=w[S+7-32];w[S+0+0]=tr(w[S+0-32],L,M),w[S+1+0]=w[S+0+32]=tr(L,M,H),w[S+2+0]=w[S+1+32]=w[S+0+64]=tr(M,H,V),w[S+3+0]=w[S+2+32]=w[S+1+64]=w[S+0+96]=tr(H,V,G),w[S+3+32]=w[S+2+64]=w[S+1+96]=tr(V,G,Q),w[S+3+64]=w[S+2+96]=tr(G,Q,ae),w[S+3+96]=tr(Q,ae,ae)}function O_(w,S){var L=w[S-1+0],M=w[S-1+32],H=w[S-1+64],V=w[S-1-32],G=w[S+0-32],Q=w[S+1-32],ae=w[S+2-32],ce=w[S+3-32];w[S+0+0]=w[S+1+64]=V+G+1>>1,w[S+1+0]=w[S+2+64]=G+Q+1>>1,w[S+2+0]=w[S+3+64]=Q+ae+1>>1,w[S+3+0]=ae+ce+1>>1,w[S+0+96]=tr(H,M,L),w[S+0+64]=tr(M,L,V),w[S+0+32]=w[S+1+96]=tr(L,V,G),w[S+1+32]=w[S+2+96]=tr(V,G,Q),w[S+2+32]=w[S+3+96]=tr(G,Q,ae),w[S+3+32]=tr(Q,ae,ce)}function P_(w,S){var L=w[S+0-32],M=w[S+1-32],H=w[S+2-32],V=w[S+3-32],G=w[S+4-32],Q=w[S+5-32],ae=w[S+6-32],ce=w[S+7-32];w[S+0+0]=L+M+1>>1,w[S+1+0]=w[S+0+64]=M+H+1>>1,w[S+2+0]=w[S+1+64]=H+V+1>>1,w[S+3+0]=w[S+2+64]=V+G+1>>1,w[S+0+32]=tr(L,M,H),w[S+1+32]=w[S+0+96]=tr(M,H,V),w[S+2+32]=w[S+1+96]=tr(H,V,G),w[S+3+32]=w[S+2+96]=tr(V,G,Q),w[S+3+64]=tr(G,Q,ae),w[S+3+96]=tr(Q,ae,ce)}function nh(w,S){var L=w[S-1+0],M=w[S-1+32],H=w[S-1+64],V=w[S-1+96];w[S+0+0]=L+M+1>>1,w[S+2+0]=w[S+0+32]=M+H+1>>1,w[S+2+32]=w[S+0+64]=H+V+1>>1,w[S+1+0]=tr(L,M,H),w[S+3+0]=w[S+1+32]=tr(M,H,V),w[S+3+32]=w[S+1+64]=tr(H,V,V),w[S+3+64]=w[S+2+64]=w[S+0+96]=w[S+1+96]=w[S+2+96]=w[S+3+96]=V}function Vp(w,S){var L=w[S-1+0],M=w[S-1+32],H=w[S-1+64],V=w[S-1+96],G=w[S-1-32],Q=w[S+0-32],ae=w[S+1-32],ce=w[S+2-32];w[S+0+0]=w[S+2+32]=L+G+1>>1,w[S+0+32]=w[S+2+64]=M+L+1>>1,w[S+0+64]=w[S+2+96]=H+M+1>>1,w[S+0+96]=V+H+1>>1,w[S+3+0]=tr(Q,ae,ce),w[S+2+0]=tr(G,Q,ae),w[S+1+0]=w[S+3+32]=tr(L,G,Q),w[S+1+32]=w[S+3+64]=tr(M,L,G),w[S+1+64]=w[S+3+96]=tr(H,M,L),w[S+1+96]=tr(V,H,M)}function fd(w,S){var L;for(L=0;8>L;++L)n(w,S+32*L,w,S-32,8)}function L_(w,S){var L;for(L=0;8>L;++L)a(w,S,w[S-1],8),S+=32}function Fl(w,S,L){var M;for(M=0;8>M;++M)a(S,L+32*M,w,8)}function R_(w,S){var L,M=8;for(L=0;8>L;++L)M+=w[S+L-32]+w[S-1+32*L];Fl(M>>4,w,S)}function Gp(w,S){var L,M=4;for(L=0;8>L;++L)M+=w[S+L-32];Fl(M>>3,w,S)}function Kp(w,S){var L,M=4;for(L=0;8>L;++L)M+=w[S-1+32*L];Fl(M>>3,w,S)}function Tx(w,S){Fl(128,w,S)}function $l(w,S,L){var M=w[S-L],H=w[S+0],V=3*(H-M)+D_[1020+w[S-2*L]-w[S+L]],G=Ix[112+(V+4>>3)];w[S-L]=us[255+M+Ix[112+(V+3>>3)]],w[S+0]=us[255+H-G]}function Yp(w,S,L,M){var H=w[S+0],V=w[S+L];return qs[255+w[S-2*L]-w[S-L]]>M||qs[255+V-H]>M}function ah(w,S,L,M){return 4*qs[255+w[S-L]-w[S+0]]+qs[255+w[S-2*L]-w[S+L]]<=M}function Xp(w,S,L,M,H){var V=w[S-3*L],G=w[S-2*L],Q=w[S-L],ae=w[S+0],ce=w[S+L],Ne=w[S+2*L],Le=w[S+3*L];return 4*qs[255+Q-ae]+qs[255+G-ce]>M?0:qs[255+w[S-4*L]-V]<=H&&qs[255+V-G]<=H&&qs[255+G-Q]<=H&&qs[255+Le-Ne]<=H&&qs[255+Ne-ce]<=H&&qs[255+ce-ae]<=H}function hd(w,S,L,M){var H=2*M+1;for(M=0;16>M;++M)ah(w,S+M,L,H)&&$l(w,S+M,L)}function Jp(w,S,L,M){var H=2*M+1;for(M=0;16>M;++M)ah(w,S+M*L,1,H)&&$l(w,S+M*L,1)}function Cx(w,S,L,M){var H;for(H=3;0<H;--H)hd(w,S+=4*L,L,M)}function kx(w,S,L,M){var H;for(H=3;0<H;--H)Jp(w,S+=4,L,M)}function Bl(w,S,L,M,H,V,G,Q){for(V=2*V+1;0<H--;){if(Xp(w,S,L,V,G))if(Yp(w,S,L,Q))$l(w,S,L);else{var ae=w,ce=S,Ne=L,Le=ae[ce-2*Ne],ue=ae[ce-Ne],je=ae[ce+0],Ee=ae[ce+Ne],Ue=ae[ce+2*Ne],Oe=27*(Ve=D_[1020+3*(je-ue)+D_[1020+Le-Ee]])+63>>7,qe=18*Ve+63>>7,Ve=9*Ve+63>>7;ae[ce-3*Ne]=us[255+ae[ce-3*Ne]+Ve],ae[ce-2*Ne]=us[255+Le+qe],ae[ce-Ne]=us[255+ue+Oe],ae[ce+0]=us[255+je-Oe],ae[ce+Ne]=us[255+Ee-qe],ae[ce+2*Ne]=us[255+Ue-Ve]}S+=M}}function Ul(w,S,L,M,H,V,G,Q){for(V=2*V+1;0<H--;){if(Xp(w,S,L,V,G))if(Yp(w,S,L,Q))$l(w,S,L);else{var ae=w,ce=S,Ne=L,Le=ae[ce-Ne],ue=ae[ce+0],je=ae[ce+Ne],Ee=Ix[112+(4+(Ue=3*(ue-Le))>>3)],Ue=Ix[112+(Ue+3>>3)],Oe=Ee+1>>1;ae[ce-2*Ne]=us[255+ae[ce-2*Ne]+Oe],ae[ce-Ne]=us[255+Le+Ue],ae[ce+0]=us[255+ue-Ee],ae[ce+Ne]=us[255+je-Oe]}S+=M}}function Ox(w,S,L,M,H,V){Bl(w,S,L,1,16,M,H,V)}function pd(w,S,L,M,H,V){Bl(w,S,1,L,16,M,H,V)}function Px(w,S,L,M,H,V){var G;for(G=3;0<G;--G)Ul(w,S+=4*L,L,1,16,M,H,V)}function C(w,S,L,M,H,V){var G;for(G=3;0<G;--G)Ul(w,S+=4,1,L,16,M,H,V)}function q(w,S,L,M,H,V,G,Q){Bl(w,S,H,1,8,V,G,Q),Bl(L,M,H,1,8,V,G,Q)}function he(w,S,L,M,H,V,G,Q){Bl(w,S,1,H,8,V,G,Q),Bl(L,M,1,H,8,V,G,Q)}function be(w,S,L,M,H,V,G,Q){Ul(w,S+4*H,H,1,8,V,G,Q),Ul(L,M+4*H,H,1,8,V,G,Q)}function Ae(w,S,L,M,H,V,G,Q){Ul(w,S+4,1,H,8,V,G,Q),Ul(L,M+4,1,H,8,V,G,Q)}function He(){this.ba=new wt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new vr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ye(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function jt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ot(){this.ua=0,this.Wa=new Ie,this.vb=new Ie,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Y,this.yc=new I}function Yt(){this.xb=this.a=0,this.l=new eh,this.ca=new wt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ot,this.ab=0,this.gc=s(4,jt),this.Oc=0}function sr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new eh,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function yr(w,S,L,M,H,V,G){for(w=w==null?0:w[S+0],S=0;S<G;++S)H[V+S]=w+L[M+S]&255,w=H[V+S]}function _n(w,S,L,M,H,V,G){var Q;if(w==null)yr(null,null,L,M,H,V,G);else for(Q=0;Q<G;++Q)H[V+Q]=w[S+Q]+L[M+Q]&255}function ta(w,S,L,M,H,V,G){if(w==null)yr(null,null,L,M,H,V,G);else{var Q,ae=w[S+0],ce=ae,Ne=ae;for(Q=0;Q<G;++Q)ce=Ne+(ae=w[S+Q])-ce,Ne=L[M+Q]+(-256&ce?0>ce?0:255:ce)&255,ce=ae,H[V+Q]=Ne}}function en(w,S,L,M){var H=S.width,V=S.o;if(t(w!=null&&S!=null),0>L||0>=M||L+M>V)return null;if(!w.Cc){if(w.ga==null){var G;if(w.ga=new sr,(G=w.ga==null)||(G=S.width*S.o,t(w.Gb.length==0),w.Gb=i(G),w.Uc=0,w.Gb==null?G=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,G=1),G=!G),!G){G=w.ga;var Q=w.Fa,ae=w.P,ce=w.qc,Ne=w.mb,Le=w.nb,ue=ae+1,je=ce-1,Ee=G.l;if(t(Q!=null&&Ne!=null&&S!=null),Qc[0]=null,Qc[1]=yr,Qc[2]=_n,Qc[3]=ta,G.ca=Ne,G.tb=Le,G.c=S.width,G.i=S.height,t(0<G.c&&0<G.i),1>=ce)S=0;else if(G.$a=3&Q[ae+0],G.Z=Q[ae+0]>>2&3,G.Lc=Q[ae+0]>>4&3,ae=Q[ae+0]>>6&3,0>G.$a||1<G.$a||4<=G.Z||1<G.Lc||ae)S=0;else if(Ee.put=mt,Ee.ac=xi,Ee.bc=xo,Ee.ma=G,Ee.width=S.width,Ee.height=S.height,Ee.Da=S.Da,Ee.v=S.v,Ee.va=S.va,Ee.j=S.j,Ee.o=S.o,G.$a)e:{t(G.$a==1),S=Ce();t:for(;;){if(S==null){S=0;break e}if(t(G!=null),G.mc=S,S.c=G.c,S.i=G.i,S.l=G.l,S.l.ma=G,S.l.width=G.c,S.l.height=G.i,S.a=0,oe(S.m,Q,ue,je),!ke(G.c,G.i,1,S,null)||(S.ab==1&&S.gc[0].hc==3&&se(S.s)?(G.ic=1,Q=S.c*S.i,S.Ta=null,S.Ua=0,S.V=i(Q),S.Ba=0,S.V==null?(S.a=1,S=0):S=1):(G.ic=0,S=Re(S,G.c)),!S))break t;S=1;break e}G.mc=null,S=0}else S=je>=G.c*G.i;G=!S}if(G)return null;w.ga.Lc!=1?w.Ga=0:M=V-L}t(w.ga!=null),t(L+M<=V);e:{if(S=(Q=w.ga).c,V=Q.l.o,Q.$a==0){if(ue=w.rc,je=w.Vc,Ee=w.Fa,ae=w.P+1+L*S,ce=w.mb,Ne=w.nb+L*S,t(ae<=w.P+w.qc),Q.Z!=0)for(t(Qc[Q.Z]!=null),G=0;G<M;++G)Qc[Q.Z](ue,je,Ee,ae,ce,Ne,S),ue=ce,je=Ne,Ne+=S,ae+=S;else for(G=0;G<M;++G)n(ce,Ne,Ee,ae,S),ue=ce,je=Ne,Ne+=S,ae+=S;w.rc=ue,w.Vc=je}else{if(t(Q.mc!=null),S=L+M,t((G=Q.mc)!=null),t(S<=G.i),G.C>=S)S=1;else if(Q.ic||_o(),Q.ic){Q=G.V,ue=G.Ba,je=G.c;var Ue=G.i,Oe=(Ee=1,ae=G.$/je,ce=G.$%je,Ne=G.m,Le=G.s,G.$),qe=je*Ue,Ve=je*S,Ze=Le.wc,Xe=Oe<Ve?W(Le,ce,ae):null;t(Oe<=qe),t(S<=Ue),t(se(Le));t:for(;;){for(;!Ne.h&&Oe<Ve;){if(ce&Ze||(Xe=W(Le,ce,ae)),t(Xe!=null),me(Ne),256>(Ue=gn(Xe.G[0],Xe.H[0],Ne)))Q[ue+Oe]=Ue,++Oe,++ce>=je&&(ce=0,++ae<=S&&!(ae%16)&&pe(G,ae));else{if(!(280>Ue)){Ee=0;break t}Ue=ni(Ue-256,Ne);var Lt,_t=gn(Xe.G[4],Xe.H[4],Ne);if(me(Ne),!(Oe>=(_t=qi(je,_t=ni(_t,Ne)))&&qe-Oe>=Ue)){Ee=0;break t}for(Lt=0;Lt<Ue;++Lt)Q[ue+Oe+Lt]=Q[ue+Oe+Lt-_t];for(Oe+=Ue,ce+=Ue;ce>=je;)ce-=je,++ae<=S&&!(ae%16)&&pe(G,ae);Oe<Ve&&ce&Ze&&(Xe=W(Le,ce,ae))}t(Ne.h==U(Ne))}pe(G,ae>S?S:ae);break t}!Ee||Ne.h&&Oe<qe?(Ee=0,G.a=Ne.h?5:3):G.$=Oe,S=Ee}else S=Te(G,G.V,G.Ba,G.c,G.i,S,Je);if(!S){M=0;break e}}L+M>=V&&(w.Cc=1),M=1}if(!M)return null;if(w.Cc&&((M=w.ga)!=null&&(M.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+L*H}function ha(w,S,L,M,H,V){for(;0<H--;){var G,Q=w,ae=S+(L?1:0),ce=w,Ne=S+(L?0:3);for(G=0;G<M;++G){var Le=ce[Ne+4*G];Le!=255&&(Le*=32897,Q[ae+4*G+0]=Q[ae+4*G+0]*Le>>23,Q[ae+4*G+1]=Q[ae+4*G+1]*Le>>23,Q[ae+4*G+2]=Q[ae+4*G+2]*Le>>23)}S+=V}}function ra(w,S,L,M,H){for(;0<M--;){var V;for(V=0;V<L;++V){var G=w[S+2*V+0],Q=15&(ce=w[S+2*V+1]),ae=4369*Q,ce=(240&ce|ce>>4)*ae>>16;w[S+2*V+0]=(240&G|G>>4)*ae>>16&240|(15&G|G<<4)*ae>>16>>4&15,w[S+2*V+1]=240&ce|Q}S+=H}}function $a(w,S,L,M,H,V,G,Q){var ae,ce,Ne=255;for(ce=0;ce<H;++ce){for(ae=0;ae<M;++ae){var Le=w[S+ae];V[G+4*ae]=Le,Ne&=Le}S+=L,G+=Q}return Ne!=255}function zl(w,S,L,M,H){var V;for(V=0;V<H;++V)L[M+V]=w[S+V]>>8}function _o(){cm=ha,kT=ra,OT=$a,PT=zl}function ql(w,S,L){T[w]=function(M,H,V,G,Q,ae,ce,Ne,Le,ue,je,Ee,Ue,Oe,qe,Ve,Ze){var Xe,Lt=Ze-1>>1,_t=Q[ae+0]|ce[Ne+0]<<16,or=Le[ue+0]|je[Ee+0]<<16;t(M!=null);var Tt=3*_t+or+131074>>2;for(S(M[H+0],255&Tt,Tt>>16,Ue,Oe),V!=null&&(Tt=3*or+_t+131074>>2,S(V[G+0],255&Tt,Tt>>16,qe,Ve)),Xe=1;Xe<=Lt;++Xe){var mr=Q[ae+Xe]|ce[Ne+Xe]<<16,ma=Le[ue+Xe]|je[Ee+Xe]<<16,lr=_t+mr+or+ma+524296,Ct=lr+2*(mr+or)>>3;Tt=Ct+_t>>1,_t=(lr=lr+2*(_t+ma)>>3)+mr>>1,S(M[H+2*Xe-1],255&Tt,Tt>>16,Ue,Oe+(2*Xe-1)*L),S(M[H+2*Xe-0],255&_t,_t>>16,Ue,Oe+(2*Xe-0)*L),V!=null&&(Tt=lr+or>>1,_t=Ct+ma>>1,S(V[G+2*Xe-1],255&Tt,Tt>>16,qe,Ve+(2*Xe-1)*L),S(V[G+2*Xe+0],255&_t,_t>>16,qe,Ve+(2*Xe+0)*L)),_t=mr,or=ma}1&Ze||(Tt=3*_t+or+131074>>2,S(M[H+Ze-1],255&Tt,Tt>>16,Ue,Oe+(Ze-1)*L),V!=null&&(Tt=3*or+_t+131074>>2,S(V[G+Ze-1],255&Tt,Tt>>16,qe,Ve+(Ze-1)*L)))}}function Qp(){Hs[Mx]=DW,Hs[Fx]=qT,Hs[FT]=IW,Hs[$x]=HT,Hs[Bx]=WT,Hs[I_]=VT,Hs[$T]=MW,Hs[M_]=qT,Hs[F_]=HT,Hs[Ux]=WT,Hs[$_]=VT}function ih(w){return w&-16384?0>w?0:255:w>>FW}function zc(w,S){return ih((19077*w>>8)+(26149*S>>8)-14234)}function md(w,S,L){return ih((19077*w>>8)-(6419*S>>8)-(13320*L>>8)+8708)}function gd(w,S){return ih((19077*w>>8)+(33050*S>>8)-17685)}function qc(w,S,L,M,H){M[H+0]=zc(w,L),M[H+1]=md(w,S,L),M[H+2]=gd(w,S)}function Ba(w,S,L,M,H){M[H+0]=gd(w,S),M[H+1]=md(w,S,L),M[H+2]=zc(w,L)}function vd(w,S,L,M,H){var V=md(w,S,L);S=V<<3&224|gd(w,S)>>3,M[H+0]=248&zc(w,L)|V>>5,M[H+1]=S}function xd(w,S,L,M,H){var V=240&gd(w,S)|15;M[H+0]=240&zc(w,L)|md(w,S,L)>>4,M[H+1]=V}function Zp(w,S,L,M,H){M[H+0]=255,qc(w,S,L,M,H+1)}function em(w,S,L,M,H){Ba(w,S,L,M,H),M[H+3]=255}function yi(w,S,L,M,H){qc(w,S,L,M,H),M[H+3]=255}function Hl(w,S,L){T[w]=function(M,H,V,G,Q,ae,ce,Ne,Le){for(var ue=Ne+(-2&Le)*L;Ne!=ue;)S(M[H+0],V[G+0],Q[ae+0],ce,Ne),S(M[H+1],V[G+0],Q[ae+0],ce,Ne+L),H+=2,++G,++ae,Ne+=2*L;1&Le&&S(M[H+0],V[G+0],Q[ae+0],ce,Ne)}}function sh(w,S,L){return L==0?w==0?S==0?6:5:S==0?4:0:L}function Lx(w,S,L,M,H){switch(w>>>30){case 3:_d(S,L,M,H,0);break;case 2:zs(S,L,M,H);break;case 1:Or(S,L,M,H)}}function Us(w,S){var L,M,H=S.M,V=S.Nb,G=w.oc,Q=w.pc+40,ae=w.oc,ce=w.pc+584,Ne=w.oc,Le=w.pc+600;for(L=0;16>L;++L)G[Q+32*L-1]=129;for(L=0;8>L;++L)ae[ce+32*L-1]=129,Ne[Le+32*L-1]=129;for(0<H?G[Q-1-32]=ae[ce-1-32]=Ne[Le-1-32]=129:(a(G,Q-32-1,127,21),a(ae,ce-32-1,127,9),a(Ne,Le-32-1,127,9)),M=0;M<w.za;++M){var ue=S.ya[S.aa+M];if(0<M){for(L=-1;16>L;++L)n(G,Q+32*L-4,G,Q+32*L+12,4);for(L=-1;8>L;++L)n(ae,ce+32*L-4,ae,ce+32*L+4,4),n(Ne,Le+32*L-4,Ne,Le+32*L+4,4)}var je=w.Gd,Ee=w.Hd+M,Ue=ue.ad,Oe=ue.Hc;if(0<H&&(n(G,Q-32,je[Ee].y,0,16),n(ae,ce-32,je[Ee].f,0,8),n(Ne,Le-32,je[Ee].ea,0,8)),ue.Za){var qe=G,Ve=Q-32+16;for(0<H&&(M>=w.za-1?a(qe,Ve,je[Ee].y[15],4):n(qe,Ve,je[Ee+1].y,0,4)),L=0;4>L;L++)qe[Ve+128+L]=qe[Ve+256+L]=qe[Ve+384+L]=qe[Ve+0+L];for(L=0;16>L;++L,Oe<<=2)qe=G,Ve=Q+KT[L],No[ue.Ob[L]](qe,Ve),Lx(Oe,Ue,16*+L,qe,Ve)}else if(qe=sh(M,H,ue.Ob[0]),Jc[qe](G,Q),Oe!=0)for(L=0;16>L;++L,Oe<<=2)Lx(Oe,Ue,16*+L,G,Q+KT[L]);for(L=ue.Gc,qe=sh(M,H,ue.Dd),Gl[qe](ae,ce),Gl[qe](Ne,Le),Oe=Ue,qe=ae,Ve=ce,255&(ue=0|L)&&(170&ue?ol(Oe,256,qe,Ve):Xr(Oe,256,qe,Ve)),ue=Ne,Oe=Le,255&(L>>=8)&&(170&L?ol(Ue,320,ue,Oe):Xr(Ue,320,ue,Oe)),H<w.Ub-1&&(n(je[Ee].y,0,G,Q+480,16),n(je[Ee].f,0,ae,ce+224,8),n(je[Ee].ea,0,Ne,Le+224,8)),L=8*V*w.B,je=w.sa,Ee=w.ta+16*M+16*V*w.R,Ue=w.qa,ue=w.ra+8*M+L,Oe=w.Ha,qe=w.Ia+8*M+L,L=0;16>L;++L)n(je,Ee+L*w.R,G,Q+32*L,16);for(L=0;8>L;++L)n(Ue,ue+L*w.B,ae,ce+32*L,8),n(Oe,qe+L*w.B,Ne,Le+32*L,8)}}function yd(w,S,L,M,H,V,G,Q,ae){var ce=[0],Ne=[0],Le=0,ue=ae!=null?ae.kd:0,je=ae??new Ye;if(w==null||12>L)return 7;je.data=w,je.w=S,je.ha=L,S=[S],L=[L],je.gb=[je.gb];e:{var Ee=S,Ue=L,Oe=je.gb;if(t(w!=null),t(Ue!=null),t(Oe!=null),Oe[0]=0,12<=Ue[0]&&!r(w,Ee[0],"RIFF")){if(r(w,Ee[0]+8,"WEBP")){Oe=3;break e}var qe=Fe(w,Ee[0]+4);if(12>qe||4294967286<qe){Oe=3;break e}if(ue&&qe>Ue[0]-8){Oe=7;break e}Oe[0]=qe,Ee[0]+=12,Ue[0]-=12}Oe=0}if(Oe!=0)return Oe;for(qe=0<je.gb[0],L=L[0];;){e:{var Ve=w;Ue=S,Oe=L;var Ze=ce,Xe=Ne,Lt=Ee=[0];if((Tt=Le=[Le])[0]=0,8>Oe[0])Oe=7;else{if(!r(Ve,Ue[0],"VP8X")){if(Fe(Ve,Ue[0]+4)!=10){Oe=3;break e}if(18>Oe[0]){Oe=7;break e}var _t=Fe(Ve,Ue[0]+8),or=1+Me(Ve,Ue[0]+12);if(2147483648<=or*(Ve=1+Me(Ve,Ue[0]+15))){Oe=3;break e}Lt!=null&&(Lt[0]=_t),Ze!=null&&(Ze[0]=or),Xe!=null&&(Xe[0]=Ve),Ue[0]+=18,Oe[0]-=18,Tt[0]=1}Oe=0}}if(Le=Le[0],Ee=Ee[0],Oe!=0)return Oe;if(Ue=!!(2&Ee),!qe&&Le)return 3;if(V!=null&&(V[0]=!!(16&Ee)),G!=null&&(G[0]=Ue),Q!=null&&(Q[0]=0),G=ce[0],Ee=Ne[0],Le&&Ue&&ae==null){Oe=0;break}if(4>L){Oe=7;break}if(qe&&Le||!qe&&!Le&&!r(w,S[0],"ALPH")){L=[L],je.na=[je.na],je.P=[je.P],je.Sa=[je.Sa];e:{_t=w,Oe=S,qe=L;var Tt=je.gb;Ze=je.na,Xe=je.P,Lt=je.Sa,or=22,t(_t!=null),t(qe!=null),Ve=Oe[0];var mr=qe[0];for(t(Ze!=null),t(Lt!=null),Ze[0]=null,Xe[0]=null,Lt[0]=0;;){if(Oe[0]=Ve,qe[0]=mr,8>mr){Oe=7;break e}var ma=Fe(_t,Ve+4);if(4294967286<ma){Oe=3;break e}var lr=8+ma+1&-2;if(or+=lr,0<Tt&&or>Tt){Oe=3;break e}if(!r(_t,Ve,"VP8 ")||!r(_t,Ve,"VP8L")){Oe=0;break e}if(mr[0]<lr){Oe=7;break e}r(_t,Ve,"ALPH")||(Ze[0]=_t,Xe[0]=Ve+8,Lt[0]=ma),Ve+=lr,mr-=lr}}if(L=L[0],je.na=je.na[0],je.P=je.P[0],je.Sa=je.Sa[0],Oe!=0)break}L=[L],je.Ja=[je.Ja],je.xa=[je.xa];e:if(Tt=w,Oe=S,qe=L,Ze=je.gb[0],Xe=je.Ja,Lt=je.xa,_t=Oe[0],Ve=!r(Tt,_t,"VP8 "),or=!r(Tt,_t,"VP8L"),t(Tt!=null),t(qe!=null),t(Xe!=null),t(Lt!=null),8>qe[0])Oe=7;else{if(Ve||or){if(Tt=Fe(Tt,_t+4),12<=Ze&&Tt>Ze-12){Oe=3;break e}if(ue&&Tt>qe[0]-8){Oe=7;break e}Xe[0]=Tt,Oe[0]+=8,qe[0]-=8,Lt[0]=or}else Lt[0]=5<=qe[0]&&Tt[_t+0]==47&&!(Tt[_t+4]>>5),Xe[0]=qe[0];Oe=0}if(L=L[0],je.Ja=je.Ja[0],je.xa=je.xa[0],S=S[0],Oe!=0)break;if(4294967286<je.Ja)return 3;if(Q==null||Ue||(Q[0]=je.xa?2:1),G=[G],Ee=[Ee],je.xa){if(5>L){Oe=7;break}Q=G,ue=Ee,Ue=V,w==null||5>L?w=0:5<=L&&w[S+0]==47&&!(w[S+4]>>5)?(qe=[0],Tt=[0],Ze=[0],oe(Xe=new F,w,S,L),yo(Xe,qe,Tt,Ze)?(Q!=null&&(Q[0]=qe[0]),ue!=null&&(ue[0]=Tt[0]),Ue!=null&&(Ue[0]=Ze[0]),w=1):w=0):w=0}else{if(10>L){Oe=7;break}Q=Ee,w==null||10>L||!_x(w,S+3,L-3)?w=0:(ue=w[S+0]|w[S+1]<<8|w[S+2]<<16,Ue=16383&(w[S+7]<<8|w[S+6]),w=16383&(w[S+9]<<8|w[S+8]),1&ue||3<(ue>>1&7)||!(ue>>4&1)||ue>>5>=je.Ja||!Ue||!w?w=0:(G&&(G[0]=Ue),Q&&(Q[0]=w),w=1))}if(!w||(G=G[0],Ee=Ee[0],Le&&(ce[0]!=G||Ne[0]!=Ee)))return 3;ae!=null&&(ae[0]=je,ae.offset=S-ae.w,t(4294967286>S-ae.w),t(ae.offset==ae.ha-L));break}return Oe==0||Oe==7&&Le&&ae==null?(V!=null&&(V[0]|=je.na!=null&&0<je.na.length),M!=null&&(M[0]=G),H!=null&&(H[0]=Ee),0):Oe}function tm(w,S,L){var M=S.width,H=S.height,V=0,G=0,Q=M,ae=H;if(S.Da=w!=null&&0<w.Da,S.Da&&(Q=w.cd,ae=w.bd,V=w.v,G=w.j,11>L||(V&=-2,G&=-2),0>V||0>G||0>=Q||0>=ae||V+Q>M||G+ae>H))return 0;if(S.v=V,S.j=G,S.va=V+Q,S.o=G+ae,S.U=Q,S.T=ae,S.da=w!=null&&0<w.da,S.da){if(!Qe(Q,ae,L=[w.ib],V=[w.hb]))return 0;S.ib=L[0],S.hb=V[0]}return S.ob=w!=null&&w.ob,S.Kb=w==null||!w.Sd,S.da&&(S.ob=S.ib<3*M/4&&S.hb<3*H/4,S.Kb=0),1}function rm(w){if(w==null)return 2;if(11>w.S){var S=w.f.RGBA;S.fb+=(w.height-1)*S.A,S.A=-S.A}else S=w.f.kb,w=w.height,S.O+=(w-1)*S.fa,S.fa=-S.fa,S.N+=(w-1>>1)*S.Ab,S.Ab=-S.Ab,S.W+=(w-1>>1)*S.Db,S.Db=-S.Db,S.F!=null&&(S.J+=(w-1)*S.lb,S.lb=-S.lb);return 0}function Hc(w,S,L,M){if(M==null||0>=w||0>=S)return 2;if(L!=null){if(L.Da){var H=L.cd,V=L.bd,G=-2&L.v,Q=-2&L.j;if(0>G||0>Q||0>=H||0>=V||G+H>w||Q+V>S)return 2;w=H,S=V}if(L.da){if(!Qe(w,S,H=[L.ib],V=[L.hb]))return 2;w=H[0],S=V[0]}}M.width=w,M.height=S;e:{var ae=M.width,ce=M.height;if(w=M.S,0>=ae||0>=ce||!(w>=Mx&&13>w))w=2;else{if(0>=M.Rd&&M.sd==null){G=V=H=S=0;var Ne=(Q=ae*YT[w])*ce;if(11>w||(V=(ce+1)/2*(S=(ae+1)/2),w==12&&(G=(H=ae)*ce)),(ce=i(Ne+2*V+G))==null){w=1;break e}M.sd=ce,11>w?((ae=M.f.RGBA).eb=ce,ae.fb=0,ae.A=Q,ae.size=Ne):((ae=M.f.kb).y=ce,ae.O=0,ae.fa=Q,ae.Fd=Ne,ae.f=ce,ae.N=0+Ne,ae.Ab=S,ae.Cd=V,ae.ea=ce,ae.W=0+Ne+V,ae.Db=S,ae.Ed=V,w==12&&(ae.F=ce,ae.J=0+Ne+2*V),ae.Tc=G,ae.lb=H)}if(S=1,H=M.S,V=M.width,G=M.height,H>=Mx&&13>H)if(11>H)w=M.f.RGBA,S&=(Q=Math.abs(w.A))*(G-1)+V<=w.size,S&=Q>=V*YT[H],S&=w.eb!=null;else{w=M.f.kb,Q=(V+1)/2,Ne=(G+1)/2,ae=Math.abs(w.fa),ce=Math.abs(w.Ab);var Le=Math.abs(w.Db),ue=Math.abs(w.lb),je=ue*(G-1)+V;S&=ae*(G-1)+V<=w.Fd,S&=ce*(Ne-1)+Q<=w.Cd,S=(S&=Le*(Ne-1)+Q<=w.Ed)&ae>=V&ce>=Q&Le>=Q,S&=w.y!=null,S&=w.f!=null,S&=w.ea!=null,H==12&&(S&=ue>=V,S&=je<=w.Tc,S&=w.F!=null)}else S=0;w=S?0:2}}return w!=0||L!=null&&L.fd&&(w=rm(M)),w}var bd=64,ls=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],cs=24,Wc=32,Wl=8,Vc=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];st("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(w){return w},T.Predictor2=function(w,S,L){return S[L+0]},T.Predictor3=function(w,S,L){return S[L+1]},T.Predictor4=function(w,S,L){return S[L-1]},T.Predictor5=function(w,S,L){return pt(pt(w,S[L+1]),S[L+0])},T.Predictor6=function(w,S,L){return pt(w,S[L-1])},T.Predictor7=function(w,S,L){return pt(w,S[L+0])},T.Predictor8=function(w,S,L){return pt(S[L-1],S[L+0])},T.Predictor9=function(w,S,L){return pt(S[L+0],S[L+1])},T.Predictor10=function(w,S,L){return pt(pt(w,S[L-1]),pt(S[L+0],S[L+1]))},T.Predictor11=function(w,S,L){var M=S[L+0];return 0>=$t(M>>24&255,w>>24&255,(S=S[L-1])>>24&255)+$t(M>>16&255,w>>16&255,S>>16&255)+$t(M>>8&255,w>>8&255,S>>8&255)+$t(255&M,255&w,255&S)?M:w},T.Predictor12=function(w,S,L){var M=S[L+0];return(Bt((w>>24&255)+(M>>24&255)-((S=S[L-1])>>24&255))<<24|Bt((w>>16&255)+(M>>16&255)-(S>>16&255))<<16|Bt((w>>8&255)+(M>>8&255)-(S>>8&255))<<8|Bt((255&w)+(255&M)-(255&S)))>>>0},T.Predictor13=function(w,S,L){var M=S[L-1];return(ht((w=pt(w,S[L+0]))>>24&255,M>>24&255)<<24|ht(w>>16&255,M>>16&255)<<16|ht(w>>8&255,M>>8&255)<<8|ht(255&w,255&M))>>>0};var nm=T.PredictorAdd0;T.PredictorAdd1=Jt,st("Predictor2","PredictorAdd2"),st("Predictor3","PredictorAdd3"),st("Predictor4","PredictorAdd4"),st("Predictor5","PredictorAdd5"),st("Predictor6","PredictorAdd6"),st("Predictor7","PredictorAdd7"),st("Predictor8","PredictorAdd8"),st("Predictor9","PredictorAdd9"),st("Predictor10","PredictorAdd10"),st("Predictor11","PredictorAdd11"),st("Predictor12","PredictorAdd12"),st("Predictor13","PredictorAdd13");var oh=T.PredictorAdd2;gt("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),gt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var Un,Rx=T.ColorIndexInverseTransform,il=T.MapARGB,sl=T.VP8LColorIndexInverseTransformAlpha,am=T.MapAlpha,im=T.VP8LPredictorsAdd=[];im.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var sm,om,Gc,Kc,Yc,wd,Xc,_d,zs,ol,Or,Xr,zn,pa,Vl,lm,lh,Dx,ST,jT,AT,ET,TT,CT,cm,kT,OT,PT,LT=i(511),RT=i(2041),DT=i(225),IT=i(767),MT=0,D_=RT,Ix=DT,us=IT,qs=LT,Mx=0,Fx=1,FT=2,$x=3,Bx=4,I_=5,$T=6,M_=7,F_=8,Ux=9,$_=10,wW=[2,3,7],_W=[3,3,11],BT=[280,256,256,256,40],NW=[0,1,1,1,0],SW=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],jW=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],AW=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],EW=8,B_=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],U_=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],um=null,TW=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],CW=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],UT=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],kW=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],OW=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],PW=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],LW=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Jc=[],No=[],Gl=[],RW=1,zT=2,Qc=[],Hs=[];ql("UpsampleRgbLinePair",qc,3),ql("UpsampleBgrLinePair",Ba,3),ql("UpsampleRgbaLinePair",yi,4),ql("UpsampleBgraLinePair",em,4),ql("UpsampleArgbLinePair",Zp,4),ql("UpsampleRgba4444LinePair",xd,2),ql("UpsampleRgb565LinePair",vd,2);var DW=T.UpsampleRgbLinePair,IW=T.UpsampleBgrLinePair,qT=T.UpsampleRgbaLinePair,HT=T.UpsampleBgraLinePair,WT=T.UpsampleArgbLinePair,VT=T.UpsampleRgba4444LinePair,MW=T.UpsampleRgb565LinePair,zx=16,qx=1<<zx-1,dm=-227,z_=482,FW=6,GT=0,$W=i(256),BW=i(256),UW=i(256),zW=i(256),qW=i(z_-dm),HW=i(z_-dm);Hl("YuvToRgbRow",qc,3),Hl("YuvToBgrRow",Ba,3),Hl("YuvToRgbaRow",yi,4),Hl("YuvToBgraRow",em,4),Hl("YuvToArgbRow",Zp,4),Hl("YuvToRgba4444Row",xd,2),Hl("YuvToRgb565Row",vd,2);var KT=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Hx=[0,2,8],WW=[8,7,6,4,4,2,2,2,1,1,1,1],VW=1;this.WebPDecodeRGBA=function(w,S,L,M,H){var V=Fx,G=new He,Q=new wt;G.ba=Q,Q.S=V,Q.width=[Q.width],Q.height=[Q.height];var ae=Q.width,ce=Q.height,Ne=new Dt;if(Ne==null||w==null)var Le=2;else t(Ne!=null),Le=yd(w,S,L,Ne.width,Ne.height,Ne.Pd,Ne.Qd,Ne.format,null);if(Le!=0?ae=0:(ae!=null&&(ae[0]=Ne.width[0]),ce!=null&&(ce[0]=Ne.height[0]),ae=1),ae){Q.width=Q.width[0],Q.height=Q.height[0],M!=null&&(M[0]=Q.width),H!=null&&(H[0]=Q.height);e:{if(M=new eh,(H=new Ye).data=w,H.w=S,H.ha=L,H.kd=1,S=[0],t(H!=null),((w=yd(H.data,H.w,H.ha,null,null,null,S,null,H))==0||w==7)&&S[0]&&(w=4),(S=w)==0){if(t(G!=null),M.data=H.data,M.w=H.w+H.offset,M.ha=H.ha-H.offset,M.put=mt,M.ac=xi,M.bc=xo,M.ma=G,H.xa){if((w=Ce())==null){G=1;break e}if(function(ue,je){var Ee=[0],Ue=[0],Oe=[0];t:for(;;){if(ue==null)return 0;if(je==null)return ue.a=2,0;if(ue.l=je,ue.a=0,oe(ue.m,je.data,je.w,je.ha),!yo(ue.m,Ee,Ue,Oe)){ue.a=3;break t}if(ue.xb=zT,je.width=Ee[0],je.height=Ue[0],!ke(Ee[0],Ue[0],1,ue,null))break t;return 1}return t(ue.a!=0),0}(w,M)){if(M=(S=Hc(M.width,M.height,G.Oa,G.ba))==0){t:{M=w;r:for(;;){if(M==null){M=0;break t}if(t(M.s.yc!=null),t(M.s.Ya!=null),t(0<M.s.Wb),t((L=M.l)!=null),t((H=L.ma)!=null),M.xb!=0){if(M.ca=H.ba,M.tb=H.tb,t(M.ca!=null),!tm(H.Oa,L,$x)){M.a=2;break r}if(!Re(M,L.width)||L.da)break r;if((L.da||Ft(M.ca.S))&&_o(),11>M.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),M.ca.f.kb.F!=null&&_o()),M.Pb&&0<M.s.ua&&M.s.vb.X==null&&!ee(M.s.vb,M.s.Wa.Xa)){M.a=1;break r}M.xb=0}if(!Te(M,M.V,M.Ba,M.c,M.i,L.o,ne))break r;H.Dc=M.Ma,M=1;break t}t(M.a!=0),M=0}M=!M}M&&(S=w.a)}else S=w.a}else{if((w=new b_)==null){G=1;break e}if(w.Fa=H.na,w.P=H.P,w.qc=H.Sa,nl(w,M)){if((S=Hc(M.width,M.height,G.Oa,G.ba))==0){if(w.Aa=0,L=G.Oa,t((H=w)!=null),L!=null){if(0<(ae=0>(ae=L.Md)?0:100<ae?255:255*ae/100)){for(ce=Ne=0;4>ce;++ce)12>(Le=H.pb[ce]).lc&&(Le.ia=ae*WW[0>Le.lc?0:Le.lc]>>3),Ne|=Le.ia;Ne&&(alert("todo:VP8InitRandom"),H.ia=1)}H.Ga=L.Id,100<H.Ga?H.Ga=100:0>H.Ga&&(H.Ga=0)}(function(ue,je){if(ue==null)return 0;if(je==null)return ea(ue,2,"NULL VP8Io parameter in VP8Decode().");if(!ue.cb&&!nl(ue,je))return 0;if(t(ue.cb),je.ac==null||je.ac(je)){je.ob&&(ue.L=0);var Ee=Hx[ue.L];if(ue.L==2?(ue.yb=0,ue.zb=0):(ue.yb=je.v-Ee>>4,ue.zb=je.j-Ee>>4,0>ue.yb&&(ue.yb=0),0>ue.zb&&(ue.zb=0)),ue.Va=je.o+15+Ee>>4,ue.Hb=je.va+15+Ee>>4,ue.Hb>ue.za&&(ue.Hb=ue.za),ue.Va>ue.Ub&&(ue.Va=ue.Ub),0<ue.L){var Ue=ue.ed;for(Ee=0;4>Ee;++Ee){var Oe;if(ue.Qa.Cb){var qe=ue.Qa.Lb[Ee];ue.Qa.Fb||(qe+=Ue.Tb)}else qe=Ue.Tb;for(Oe=0;1>=Oe;++Oe){var Ve=ue.gd[Ee][Oe],Ze=qe;if(Ue.Pc&&(Ze+=Ue.vd[0],Oe&&(Ze+=Ue.od[0])),0<(Ze=0>Ze?0:63<Ze?63:Ze)){var Xe=Ze;0<Ue.wb&&(Xe=4<Ue.wb?Xe>>2:Xe>>1)>9-Ue.wb&&(Xe=9-Ue.wb),1>Xe&&(Xe=1),Ve.dd=Xe,Ve.tc=2*Ze+Xe,Ve.ld=40<=Ze?2:15<=Ze?1:0}else Ve.tc=0;Ve.La=Oe}}}Ee=0}else ea(ue,6,"Frame setup failed"),Ee=ue.a;if(Ee=Ee==0){if(Ee){ue.$c=0,0<ue.Aa||(ue.Ic=VW);t:{Ee=ue.Ic,Ue=4*(Xe=ue.za);var Lt=32*Xe,_t=Xe+1,or=0<ue.L?Xe*(0<ue.Aa?2:1):0,Tt=(ue.Aa==2?2:1)*Xe;if((Ve=Ue+832+(Oe=3*(16*Ee+Hx[ue.L])/2*Lt)+(qe=ue.Fa!=null&&0<ue.Fa.length?ue.Kc.c*ue.Kc.i:0))!=Ve)Ee=0;else{if(Ve>ue.Vb){if(ue.Vb=0,ue.Ec=i(Ve),ue.Fc=0,ue.Ec==null){Ee=ea(ue,1,"no memory during frame initialization.");break t}ue.Vb=Ve}Ve=ue.Ec,Ze=ue.Fc,ue.Ac=Ve,ue.Bc=Ze,Ze+=Ue,ue.Gd=s(Lt,$s),ue.Hd=0,ue.rb=s(_t+1,On),ue.sb=1,ue.wa=or?s(or,pr):null,ue.Y=0,ue.D.Nb=0,ue.D.wa=ue.wa,ue.D.Y=ue.Y,0<ue.Aa&&(ue.D.Y+=Xe),t(!0),ue.oc=Ve,ue.pc=Ze,Ze+=832,ue.ya=s(Tt,bo),ue.aa=0,ue.D.ya=ue.ya,ue.D.aa=ue.aa,ue.Aa==2&&(ue.D.aa+=Xe),ue.R=16*Xe,ue.B=8*Xe,Xe=(Lt=Hx[ue.L])*ue.R,Lt=Lt/2*ue.B,ue.sa=Ve,ue.ta=Ze+Xe,ue.qa=ue.sa,ue.ra=ue.ta+16*Ee*ue.R+Lt,ue.Ha=ue.qa,ue.Ia=ue.ra+8*Ee*ue.B+Lt,ue.$c=0,Ze+=Oe,ue.mb=qe?Ve:null,ue.nb=qe?Ze:null,t(Ze+qe<=ue.Fc+ue.Vb),Nx(ue),a(ue.Ac,ue.Bc,0,Ue),Ee=1}}if(Ee){if(je.ka=0,je.y=ue.sa,je.O=ue.ta,je.f=ue.qa,je.N=ue.ra,je.ea=ue.Ha,je.Vd=ue.Ia,je.fa=ue.R,je.Rc=ue.B,je.F=null,je.J=0,!MT){for(Ee=-255;255>=Ee;++Ee)LT[255+Ee]=0>Ee?-Ee:Ee;for(Ee=-1020;1020>=Ee;++Ee)RT[1020+Ee]=-128>Ee?-128:127<Ee?127:Ee;for(Ee=-112;112>=Ee;++Ee)DT[112+Ee]=-16>Ee?-16:15<Ee?15:Ee;for(Ee=-255;510>=Ee;++Ee)IT[255+Ee]=0>Ee?0:255<Ee?255:Ee;MT=1}Xc=rh,_d=__,ol=al,Or=jx,Xr=Ax,zs=w_,zn=Ox,pa=pd,Vl=q,lm=he,lh=Px,Dx=C,ST=be,jT=Ae,AT=hd,ET=Jp,TT=Cx,CT=kx,No[0]=k_,No[1]=N_,No[2]=T_,No[3]=C_,No[4]=Il,No[5]=O_,No[6]=Ml,No[7]=P_,No[8]=Vp,No[9]=nh,Jc[0]=A_,Jc[1]=j_,Jc[2]=Hp,Jc[3]=Ex,Jc[4]=dd,Jc[5]=Wp,Jc[6]=E_,Gl[0]=R_,Gl[1]=S_,Gl[2]=fd,Gl[3]=L_,Gl[4]=Kp,Gl[5]=Gp,Gl[6]=Tx,Ee=1}else Ee=0}Ee&&(Ee=function(mr,ma){for(mr.M=0;mr.M<mr.Va;++mr.M){var lr,Ct=mr.Jc[mr.M&mr.Xb],lt=mr.m,qn=mr;for(lr=0;lr<qn.za;++lr){var ir=lt,xr=qn,cn=xr.Ac,Ua=xr.Bc+4*lr,bi=xr.zc,Pn=xr.ya[xr.aa+lr];if(xr.Qa.Bb?Pn.$b=le(ir,xr.Pa.jb[0])?2+le(ir,xr.Pa.jb[2]):le(ir,xr.Pa.jb[1]):Pn.$b=0,xr.kc&&(Pn.Ad=le(ir,xr.Bd)),Pn.Za=!le(ir,145)+0,Pn.Za){var ai=Pn.Ob,wi=0;for(xr=0;4>xr;++xr){var ga,br=bi[0+xr];for(ga=0;4>ga;++ga){br=OW[cn[Ua+ga]][br];for(var Mr=UT[le(ir,br[0])];0<Mr;)Mr=UT[2*Mr+le(ir,br[Mr])];br=-Mr,cn[Ua+ga]=br}n(ai,wi,cn,Ua,4),wi+=4,bi[0+xr]=br}}else br=le(ir,156)?le(ir,128)?1:3:le(ir,163)?2:0,Pn.Ob[0]=br,a(cn,Ua,br,4),a(bi,0,br,4);Pn.Dd=le(ir,142)?le(ir,114)?le(ir,183)?1:3:2:0}if(qn.m.Ka)return ea(mr,7,"Premature end-of-partition0 encountered.");for(;mr.ja<mr.za;++mr.ja){if(qn=Ct,ir=(lt=mr).rb[lt.sb-1],cn=lt.rb[lt.sb+lt.ja],lr=lt.ya[lt.aa+lt.ja],Ua=lt.kc?lr.Ad:0)ir.la=cn.la=0,lr.Za||(ir.Na=cn.Na=0),lr.Hc=0,lr.Gc=0,lr.ia=0;else{var Ln,Fr;if(ir=cn,cn=qn,Ua=lt.Pa.Xc,bi=lt.ya[lt.aa+lt.ja],Pn=lt.pb[bi.$b],xr=bi.ad,ai=0,wi=lt.rb[lt.sb-1],br=ga=0,a(xr,ai,0,384),bi.Za)var za=0,So=Ua[3];else{Mr=i(16);var Hn=ir.Na+wi.Na;if(Hn=um(cn,Ua[1],Hn,Pn.Eb,0,Mr,0),ir.Na=wi.Na=(0<Hn)+0,1<Hn)Xc(Mr,0,xr,ai);else{var Hi=Mr[0]+3>>3;for(Mr=0;256>Mr;Mr+=16)xr[ai+Mr]=Hi}za=1,So=Ua[0]}var Jr=15&ir.la,va=15&wi.la;for(Mr=0;4>Mr;++Mr){var ds=1&va;for(Hi=Fr=0;4>Hi;++Hi)Jr=Jr>>1|(ds=(Hn=um(cn,So,Hn=ds+(1&Jr),Pn.Sc,za,xr,ai))>za)<<7,Fr=Fr<<2|(3<Hn?3:1<Hn?2:xr[ai+0]!=0),ai+=16;Jr>>=4,va=va>>1|ds<<7,ga=(ga<<8|Fr)>>>0}for(So=Jr,za=va>>4,Ln=0;4>Ln;Ln+=2){for(Fr=0,Jr=ir.la>>4+Ln,va=wi.la>>4+Ln,Mr=0;2>Mr;++Mr){for(ds=1&va,Hi=0;2>Hi;++Hi)Hn=ds+(1&Jr),Jr=Jr>>1|(ds=0<(Hn=um(cn,Ua[2],Hn,Pn.Qc,0,xr,ai)))<<3,Fr=Fr<<2|(3<Hn?3:1<Hn?2:xr[ai+0]!=0),ai+=16;Jr>>=2,va=va>>1|ds<<5}br|=Fr<<4*Ln,So|=Jr<<4<<Ln,za|=(240&va)<<Ln}ir.la=So,wi.la=za,bi.Hc=ga,bi.Gc=br,bi.ia=43690&br?0:Pn.ia,Ua=!(ga|br)}if(0<lt.L&&(lt.wa[lt.Y+lt.ja]=lt.gd[lr.$b][lr.Za],lt.wa[lt.Y+lt.ja].La|=!Ua),qn.Ka)return ea(mr,7,"Premature end-of-file encountered.")}if(Nx(mr),lt=ma,qn=1,lr=(Ct=mr).D,ir=0<Ct.L&&Ct.M>=Ct.zb&&Ct.M<=Ct.Va,Ct.Aa==0)t:{if(lr.M=Ct.M,lr.uc=ir,Us(Ct,lr),qn=1,lr=(Fr=Ct.D).Nb,ir=(br=Hx[Ct.L])*Ct.R,cn=br/2*Ct.B,Mr=16*lr*Ct.R,Hi=8*lr*Ct.B,Ua=Ct.sa,bi=Ct.ta-ir+Mr,Pn=Ct.qa,xr=Ct.ra-cn+Hi,ai=Ct.Ha,wi=Ct.Ia-cn+Hi,va=(Jr=Fr.M)==0,ga=Jr>=Ct.Va-1,Ct.Aa==2&&Us(Ct,Fr),Fr.uc)for(ds=(Hn=Ct).D.M,t(Hn.D.uc),Fr=Hn.yb;Fr<Hn.Hb;++Fr){za=Fr,So=ds;var _i=(fs=(qa=Hn).D).Nb;Ln=qa.R;var fs=fs.wa[fs.Y+za],hs=qa.sa,Wi=qa.ta+16*_i*Ln+16*za,ps=fs.dd,tn=fs.tc;if(tn!=0)if(t(3<=tn),qa.L==1)0<za&&ET(hs,Wi,Ln,tn+4),fs.La&&CT(hs,Wi,Ln,tn),0<So&&AT(hs,Wi,Ln,tn+4),fs.La&&TT(hs,Wi,Ln,tn);else{var ms=qa.B,jo=qa.qa,Nd=qa.ra+8*_i*ms+8*za,Kl=qa.Ha,qa=qa.Ia+8*_i*ms+8*za;_i=fs.ld,0<za&&(pa(hs,Wi,Ln,tn+4,ps,_i),lm(jo,Nd,Kl,qa,ms,tn+4,ps,_i)),fs.La&&(Dx(hs,Wi,Ln,tn,ps,_i),jT(jo,Nd,Kl,qa,ms,tn,ps,_i)),0<So&&(zn(hs,Wi,Ln,tn+4,ps,_i),Vl(jo,Nd,Kl,qa,ms,tn+4,ps,_i)),fs.La&&(lh(hs,Wi,Ln,tn,ps,_i),ST(jo,Nd,Kl,qa,ms,tn,ps,_i))}}if(Ct.ia&&alert("todo:DitherRow"),lt.put!=null){if(Fr=16*Jr,Jr=16*(Jr+1),va?(lt.y=Ct.sa,lt.O=Ct.ta+Mr,lt.f=Ct.qa,lt.N=Ct.ra+Hi,lt.ea=Ct.Ha,lt.W=Ct.Ia+Hi):(Fr-=br,lt.y=Ua,lt.O=bi,lt.f=Pn,lt.N=xr,lt.ea=ai,lt.W=wi),ga||(Jr-=br),Jr>lt.o&&(Jr=lt.o),lt.F=null,lt.J=null,Ct.Fa!=null&&0<Ct.Fa.length&&Fr<Jr&&(lt.J=en(Ct,lt,Fr,Jr-Fr),lt.F=Ct.mb,lt.F==null&&lt.F.length==0)){qn=ea(Ct,3,"Could not decode alpha data.");break t}Fr<lt.j&&(br=lt.j-Fr,Fr=lt.j,t(!(1&br)),lt.O+=Ct.R*br,lt.N+=Ct.B*(br>>1),lt.W+=Ct.B*(br>>1),lt.F!=null&&(lt.J+=lt.width*br)),Fr<Jr&&(lt.O+=lt.v,lt.N+=lt.v>>1,lt.W+=lt.v>>1,lt.F!=null&&(lt.J+=lt.v),lt.ka=Fr-lt.j,lt.U=lt.va-lt.v,lt.T=Jr-Fr,qn=lt.put(lt))}lr+1!=Ct.Ic||ga||(n(Ct.sa,Ct.ta-ir,Ua,bi+16*Ct.R,ir),n(Ct.qa,Ct.ra-cn,Pn,xr+8*Ct.B,cn),n(Ct.Ha,Ct.Ia-cn,ai,wi+8*Ct.B,cn))}if(!qn)return ea(mr,6,"Output aborted.")}return 1}(ue,je)),je.bc!=null&&je.bc(je),Ee&=1}return Ee?(ue.cb=0,Ee):0})(w,M)||(S=w.a)}}else S=w.a}S==0&&G.Oa!=null&&G.Oa.fd&&(S=rm(G.ba))}G=S}V=G!=0?null:11>V?Q.f.RGBA.eb:Q.f.kb.y}else V=null;return V};var YT=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(T,P){for(var O="",R=0;R<4;R++)O+=String.fromCharCode(T[P++]);return O}function d(T,P){return T[P+0]|T[P+1]<<8}function f(T,P){return(T[P+0]|T[P+1]<<8|T[P+2]<<16)>>>0}function p(T,P){return(T[P+0]|T[P+1]<<8|T[P+2]<<16|T[P+3]<<24)>>>0}new c;var h=[0],g=[0],m=[],x=new c,y=e,v=function(T,P){var O={},R=0,I=!1,z=0,Y=0;if(O.frames=[],!function(k,F){for(var B=0;B<4;B++)if(k[F+B]!="RIFF".charCodeAt(B))return!0;return!1}(T,P)){for(p(T,P+=4),P+=8;P<T.length;){var ie=u(T,P),re=p(T,P+=4);P+=4;var X=re+(1&re);switch(ie){case"VP8 ":case"VP8L":O.frames[R]===void 0&&(O.frames[R]={}),(_e=O.frames[R]).src_off=I?Y:P-8,_e.src_size=z+re+8,R++,I&&(I=!1,z=0,Y=0);break;case"VP8X":(_e=O.header={}).feature_flags=T[P];var oe=P+4;_e.canvas_width=1+f(T,oe),oe+=3,_e.canvas_height=1+f(T,oe),oe+=3;break;case"ALPH":I=!0,z=X+8,Y=P-8;break;case"ANIM":(_e=O.header).bgcolor=p(T,P),oe=P+4,_e.loop_count=d(T,oe),oe+=2;break;case"ANMF":var we,_e;(_e=O.frames[R]={}).offset_x=2*f(T,P),P+=3,_e.offset_y=2*f(T,P),P+=3,_e.width=1+f(T,P),P+=3,_e.height=1+f(T,P),P+=3,_e.duration=f(T,P),P+=3,we=T[P++],_e.dispose=1&we,_e.blend=we>>1&1}ie!="ANMF"&&(P+=X)}return O}}(y,0);v.response=y,v.rgbaoutput=!0,v.dataurl=!1;var b=v.header?v.header:null,N=v.frames?v.frames:null;if(b){b.loop_counter=b.loop_count,h=[b.canvas_height],g=[b.canvas_width];for(var _=0;_<N.length&&N[_].blend!=0;_++);}var E=N[0],j=x.WebPDecodeRGBA(y,E.src_off,E.src_size,g,h);E.rgba=j,E.imgwidth=g[0],E.imgheight=h[0];for(var A=0;A<g[0]*h[0]*4;A++)m[A]=j[A];return this.width=g,this.height=h,this.data=m,this}(function(e){var t,r,n,a,i,s,l,c,u,d=function(k){return k=k||{},this.isStrokeTransparent=k.isStrokeTransparent||!1,this.strokeOpacity=k.strokeOpacity||1,this.strokeStyle=k.strokeStyle||"#000000",this.fillStyle=k.fillStyle||"#000000",this.isFillTransparent=k.isFillTransparent||!1,this.fillOpacity=k.fillOpacity||1,this.font=k.font||"10px sans-serif",this.textBaseline=k.textBaseline||"alphabetic",this.textAlign=k.textAlign||"left",this.lineWidth=k.lineWidth||1,this.lineJoin=k.lineJoin||"miter",this.lineCap=k.lineCap||"butt",this.path=k.path||[],this.transform=k.transform!==void 0?k.transform.clone():new c,this.globalCompositeOperation=k.globalCompositeOperation||"normal",this.globalAlpha=k.globalAlpha||1,this.clip_path=k.clip_path||[],this.currentPoint=k.currentPoint||new s,this.miterLimit=k.miterLimit||10,this.lastPoint=k.lastPoint||new s,this.lineDashOffset=k.lineDashOffset||0,this.lineDash=k.lineDash||[],this.margin=k.margin||[0,0,0,0],this.prevPageLastElemOffset=k.prevPageLastElemOffset||0,this.ignoreClearRect=typeof k.ignoreClearRect!="boolean"||k.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,s=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(k){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var F=k;Object.defineProperty(this,"pdf",{get:function(){return F}});var B=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return B},set:function(ee){B=!!ee}});var U=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return U},set:function(ee){U=!!ee}});var J=0;Object.defineProperty(this,"posX",{get:function(){return J},set:function(ee){isNaN(ee)||(J=ee)}});var me=0;Object.defineProperty(this,"posY",{get:function(){return me},set:function(ee){isNaN(ee)||(me=ee)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(ee){var Pe;typeof ee=="number"?Pe=[ee,ee,ee,ee]:((Pe=new Array(4))[0]=ee[0],Pe[1]=ee.length>=2?ee[1]:Pe[0],Pe[2]=ee.length>=3?ee[2]:Pe[0],Pe[3]=ee.length>=4?ee[3]:Pe[1]),u.margin=Pe}});var K=!1;Object.defineProperty(this,"autoPaging",{get:function(){return K},set:function(ee){K=ee}});var te=0;Object.defineProperty(this,"lastBreak",{get:function(){return te},set:function(ee){te=ee}});var le=[];Object.defineProperty(this,"pageBreaks",{get:function(){return le},set:function(ee){le=ee}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(ee){ee instanceof d&&(u=ee)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(ee){u.path=ee}});var ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return ve},set:function(ee){ve=ee}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ee){var Pe;Pe=p(ee),this.ctx.fillStyle=Pe.style,this.ctx.isFillTransparent=Pe.a===0,this.ctx.fillOpacity=Pe.a,this.pdf.setFillColor(Pe.r,Pe.g,Pe.b,{a:Pe.a}),this.pdf.setTextColor(Pe.r,Pe.g,Pe.b,{a:Pe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ee){var Pe=p(ee);this.ctx.strokeStyle=Pe.style,this.ctx.isStrokeTransparent=Pe.a===0,this.ctx.strokeOpacity=Pe.a,Pe.a===0?this.pdf.setDrawColor(255,255,255):(Pe.a,this.pdf.setDrawColor(Pe.r,Pe.g,Pe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ee){["butt","round","square"].indexOf(ee)!==-1&&(this.ctx.lineCap=ee,this.pdf.setLineCap(ee))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ee){isNaN(ee)||(this.ctx.lineWidth=ee,this.pdf.setLineWidth(ee))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ee){["bevel","round","miter"].indexOf(ee)!==-1&&(this.ctx.lineJoin=ee,this.pdf.setLineJoin(ee))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ee){isNaN(ee)||(this.ctx.miterLimit=ee,this.pdf.setMiterLimit(ee))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ee){this.ctx.textBaseline=ee}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ee){["right","end","center","left","start"].indexOf(ee)!==-1&&(this.ctx.textAlign=ee)}});var ge=null,Me=null,Fe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Fe},set:function(ee){ge=null,Me=null,Fe=ee}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ee){var Pe;if(this.ctx.font=ee,(Pe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(ee))!==null){var Ie=Pe[1];Pe[2];var Qe=Pe[3],$e=Pe[4];Pe[5];var it=Pe[6],st=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec($e)[2];$e=Math.floor(st==="px"?parseFloat($e)*this.pdf.internal.scaleFactor:st==="em"?parseFloat($e)*this.pdf.getFontSize():parseFloat($e)*this.pdf.internal.scaleFactor),this.pdf.setFontSize($e);var ut=function(gt){var Ut,Qt,Zt=[],er=gt.trim();if(er==="")return dN;if(er in aP)return[aP[er]];for(;er!=="";){switch(Qt=null,Ut=(er=sP(er)).charAt(0)){case'"':case"'":Qt=W0e(er.substring(1),Ut);break;default:Qt=V0e(er)}if(Qt===null||(Zt.push(Qt[0]),(er=sP(Qt[1]))!==""&&er.charAt(0)!==","))return dN;er=er.replace(/^,/,"")}return Zt}(it);if(this.fontFaces){var pt=function(gt,Ut){var Qt=gt.getFontList(),Zt=JSON.stringify(Qt);if(ge===null||Me!==Zt){var er=function(Ir){var Pt=[];return Object.keys(Ir).forEach(function(Nr){Ir[Nr].forEach(function(Ft){var Ge=null;switch(Ft){case"bold":Ge={family:Nr,weight:"bold"};break;case"italic":Ge={family:Nr,style:"italic"};break;case"bolditalic":Ge={family:Nr,weight:"bold",style:"italic"};break;case"":case"normal":Ge={family:Nr}}Ge!==null&&(Ge.ref={name:Nr,style:Ft},Pt.push(Ge))})}),Pt}(Qt);ge=function(Ir){for(var Pt={},Nr=0;Nr<Ir.length;++Nr){var Ft=uN(Ir[Nr]),Ge=Ft.family,We=Ft.stretch,wt=Ft.style,Dt=Ft.weight;Pt[Ge]=Pt[Ge]||{},Pt[Ge][We]=Pt[Ge][We]||{},Pt[Ge][We][wt]=Pt[Ge][We][wt]||{},Pt[Ge][We][wt][Dt]=Ft}return Pt}(er.concat(Ut)),Me=Zt}return ge}(this.pdf,this.fontFaces),Bt=ut.map(function(gt){return{family:gt,stretch:"normal",weight:Qe,style:Ie}}),ht=function(gt,Ut,Qt){for(var Zt=(Qt=Qt||{}).defaultFontFamily||"times",er=Object.assign({},H0e,Qt.genericFontFamilies||{}),Ir=null,Pt=null,Nr=0;Nr<Ut.length;++Nr)if(er[(Ir=uN(Ut[Nr])).family]&&(Ir.family=er[Ir.family]),gt.hasOwnProperty(Ir.family)){Pt=gt[Ir.family];break}if(!(Pt=Pt||gt[Zt]))throw new Error("Could not find a font-family for the rule '"+iP(Ir)+"' and default family '"+Zt+"'.");if(Pt=function(Ft,Ge){if(Ge[Ft])return Ge[Ft];var We=Fj[Ft],wt=We<=Fj.normal?-1:1,Dt=nP(Ge,VB,We,wt);if(!Dt)throw new Error("Could not find a matching font-stretch value for "+Ft);return Dt}(Ir.stretch,Pt),Pt=function(Ft,Ge){if(Ge[Ft])return Ge[Ft];for(var We=WB[Ft],wt=0;wt<We.length;++wt)if(Ge[We[wt]])return Ge[We[wt]];throw new Error("Could not find a matching font-style for "+Ft)}(Ir.style,Pt),!(Pt=function(Ft,Ge){if(Ge[Ft])return Ge[Ft];if(Ft===400&&Ge[500])return Ge[500];if(Ft===500&&Ge[400])return Ge[400];var We=q0e[Ft],wt=nP(Ge,GB,We,Ft<400?-1:1);if(!wt)throw new Error("Could not find a matching font-weight for value "+Ft);return wt}(Ir.weight,Pt)))throw new Error("Failed to resolve a font for the rule '"+iP(Ir)+"'.");return Pt}(pt,Bt);this.pdf.setFont(ht.ref.name,ht.ref.style)}else{var $t="";(Qe==="bold"||parseInt(Qe,10)>=700||Ie==="bold")&&($t="bold"),Ie==="italic"&&($t+="italic"),$t.length===0&&($t="normal");for(var Jt="",At={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},bt=0;bt<ut.length;bt++){if(this.pdf.internal.getFont(ut[bt],$t,{noFallback:!0,disableWarning:!0})!==void 0){Jt=ut[bt];break}if($t==="bolditalic"&&this.pdf.internal.getFont(ut[bt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Jt=ut[bt],$t="bold";else if(this.pdf.internal.getFont(ut[bt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Jt=ut[bt],$t="normal";break}}if(Jt===""){for(var qt=0;qt<ut.length;qt++)if(At[ut[qt]]){Jt=At[ut[qt]];break}}Jt=Jt===""?"Times":Jt,this.pdf.setFont(Jt,$t)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ee){this.ctx.globalCompositeOperation=ee}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ee){this.ctx.globalAlpha=ee}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ee){this.ctx.lineDashOffset=ee,_e.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ee){this.ctx.lineDash=ee,_e.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ee){this.ctx.ignoreClearRect=!!ee}})};f.prototype.setLineDash=function(k){this.lineDash=k},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){N.call(this,"fill",!1)},f.prototype.stroke=function(){N.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(k,F){if(isNaN(k)||isNaN(F))throw Qr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var B=this.ctx.transform.applyToPoint(new s(k,F));this.path.push({type:"mt",x:B.x,y:B.y}),this.ctx.lastPoint=new s(k,F)},f.prototype.closePath=function(){var k=new s(0,0),F=0;for(F=this.path.length-1;F!==-1;F--)if(this.path[F].type==="begin"&&zr(this.path[F+1])==="object"&&typeof this.path[F+1].x=="number"){k=new s(this.path[F+1].x,this.path[F+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(k.x,k.y)},f.prototype.lineTo=function(k,F){if(isNaN(k)||isNaN(F))throw Qr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var B=this.ctx.transform.applyToPoint(new s(k,F));this.path.push({type:"lt",x:B.x,y:B.y}),this.ctx.lastPoint=new s(B.x,B.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},f.prototype.quadraticCurveTo=function(k,F,B,U){if(isNaN(B)||isNaN(U)||isNaN(k)||isNaN(F))throw Qr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var J=this.ctx.transform.applyToPoint(new s(B,U)),me=this.ctx.transform.applyToPoint(new s(k,F));this.path.push({type:"qct",x1:me.x,y1:me.y,x:J.x,y:J.y}),this.ctx.lastPoint=new s(J.x,J.y)},f.prototype.bezierCurveTo=function(k,F,B,U,J,me){if(isNaN(J)||isNaN(me)||isNaN(k)||isNaN(F)||isNaN(B)||isNaN(U))throw Qr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var K=this.ctx.transform.applyToPoint(new s(J,me)),te=this.ctx.transform.applyToPoint(new s(k,F)),le=this.ctx.transform.applyToPoint(new s(B,U));this.path.push({type:"bct",x1:te.x,y1:te.y,x2:le.x,y2:le.y,x:K.x,y:K.y}),this.ctx.lastPoint=new s(K.x,K.y)},f.prototype.arc=function(k,F,B,U,J,me){if(isNaN(k)||isNaN(F)||isNaN(B)||isNaN(U)||isNaN(J))throw Qr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(me=!!me,!this.ctx.transform.isIdentity){var K=this.ctx.transform.applyToPoint(new s(k,F));k=K.x,F=K.y;var te=this.ctx.transform.applyToPoint(new s(0,B)),le=this.ctx.transform.applyToPoint(new s(0,0));B=Math.sqrt(Math.pow(te.x-le.x,2)+Math.pow(te.y-le.y,2))}Math.abs(J-U)>=2*Math.PI&&(U=0,J=2*Math.PI),this.path.push({type:"arc",x:k,y:F,radius:B,startAngle:U,endAngle:J,counterclockwise:me})},f.prototype.arcTo=function(k,F,B,U,J){throw new Error("arcTo not implemented.")},f.prototype.rect=function(k,F,B,U){if(isNaN(k)||isNaN(F)||isNaN(B)||isNaN(U))throw Qr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(k,F),this.lineTo(k+B,F),this.lineTo(k+B,F+U),this.lineTo(k,F+U),this.lineTo(k,F),this.lineTo(k+B,F),this.lineTo(k,F)},f.prototype.fillRect=function(k,F,B,U){if(isNaN(k)||isNaN(F)||isNaN(B)||isNaN(U))throw Qr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var J={};this.lineCap!=="butt"&&(J.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(J.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(k,F,B,U),this.fill(),J.hasOwnProperty("lineCap")&&(this.lineCap=J.lineCap),J.hasOwnProperty("lineJoin")&&(this.lineJoin=J.lineJoin)}},f.prototype.strokeRect=function(k,F,B,U){if(isNaN(k)||isNaN(F)||isNaN(B)||isNaN(U))throw Qr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(k,F,B,U),this.stroke())},f.prototype.clearRect=function(k,F,B,U){if(isNaN(k)||isNaN(F)||isNaN(B)||isNaN(U))throw Qr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(k,F,B,U))},f.prototype.save=function(k){k=typeof k!="boolean"||k;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("q");if(this.pdf.setPage(F),k){this.ctx.fontSize=this.pdf.internal.getFontSize();var U=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=U}},f.prototype.restore=function(k){k=typeof k!="boolean"||k;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("Q");this.pdf.setPage(F),k&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(k){var F,B,U,J;if(k.isCanvasGradient===!0&&(k=k.getColor()),!k)return{r:0,g:0,b:0,a:0,style:k};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(k))F=0,B=0,U=0,J=0;else{var me=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(k);if(me!==null)F=parseInt(me[1]),B=parseInt(me[2]),U=parseInt(me[3]),J=1;else if((me=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(k))!==null)F=parseInt(me[1]),B=parseInt(me[2]),U=parseInt(me[3]),J=parseFloat(me[4]);else{if(J=1,typeof k=="string"&&k.charAt(0)!=="#"){var K=new FB(k);k=K.ok?K.toHex():"#000000"}k.length===4?(F=k.substring(1,2),F+=F,B=k.substring(2,3),B+=B,U=k.substring(3,4),U+=U):(F=k.substring(1,3),B=k.substring(3,5),U=k.substring(5,7)),F=parseInt(F,16),B=parseInt(B,16),U=parseInt(U,16)}}return{r:F,g:B,b:U,a:J,style:k}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(k,F,B,U){if(isNaN(F)||isNaN(B)||typeof k!="string")throw Qr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(U=isNaN(U)?void 0:U,!h.call(this)){var J=X(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;R.call(this,{text:k,x:F,y:B,scale:me,angle:J,align:this.textAlign,maxWidth:U})}},f.prototype.strokeText=function(k,F,B,U){if(isNaN(F)||isNaN(B)||typeof k!="string")throw Qr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){U=isNaN(U)?void 0:U;var J=X(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;R.call(this,{text:k,x:F,y:B,scale:me,renderingMode:"stroke",angle:J,align:this.textAlign,maxWidth:U})}},f.prototype.measureText=function(k){if(typeof k!="string")throw Qr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var F=this.pdf,B=this.pdf.internal.scaleFactor,U=F.internal.getFontSize(),J=F.getStringUnitWidth(k)*U/F.internal.scaleFactor;return new function(me){var K=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return K}}),this}({width:J*=Math.round(96*B/72*1e4)/1e4})},f.prototype.scale=function(k,F){if(isNaN(k)||isNaN(F))throw Qr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var B=new c(k,0,0,F,0,0);this.ctx.transform=this.ctx.transform.multiply(B)},f.prototype.rotate=function(k){if(isNaN(k))throw Qr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var F=new c(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0);this.ctx.transform=this.ctx.transform.multiply(F)},f.prototype.translate=function(k,F){if(isNaN(k)||isNaN(F))throw Qr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var B=new c(1,0,0,1,k,F);this.ctx.transform=this.ctx.transform.multiply(B)},f.prototype.transform=function(k,F,B,U,J,me){if(isNaN(k)||isNaN(F)||isNaN(B)||isNaN(U)||isNaN(J)||isNaN(me))throw Qr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var K=new c(k,F,B,U,J,me);this.ctx.transform=this.ctx.transform.multiply(K)},f.prototype.setTransform=function(k,F,B,U,J,me){k=isNaN(k)?1:k,F=isNaN(F)?0:F,B=isNaN(B)?0:B,U=isNaN(U)?1:U,J=isNaN(J)?0:J,me=isNaN(me)?0:me,this.ctx.transform=new c(k,F,B,U,J,me)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(k,F,B,U,J,me,K,te,le){var ve=this.pdf.getImageProperties(k),ge=1,Me=1,Fe=1,ee=1;U!==void 0&&te!==void 0&&(Fe=te/U,ee=le/J,ge=ve.width/U*te/U,Me=ve.height/J*le/J),me===void 0&&(me=F,K=B,F=0,B=0),U!==void 0&&te===void 0&&(te=U,le=J),U===void 0&&te===void 0&&(te=ve.width,le=ve.height);var Pe=this.ctx.transform.decompose(),Ie=X(Pe.rotate.shx),Qe=new c,$e=(Qe=(Qe=(Qe=Qe.multiply(Pe.translate)).multiply(Pe.skew)).multiply(Pe.scale)).applyToRectangle(new l(me-F*Fe,K-B*ee,U*ge,J*Me));if(this.autoPaging){for(var it,st=x.call(this,$e),ut=[],pt=0;pt<st.length;pt+=1)ut.indexOf(st[pt])===-1&&ut.push(st[pt]);b(ut);for(var Bt=ut[0],ht=ut[ut.length-1],$t=Bt;$t<ht+1;$t++){this.pdf.setPage($t);var Jt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],At=$t===1?this.posY+this.margin[0]:this.margin[0],bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],gt=$t===1?0:bt+($t-2)*qt;if(this.ctx.clip_path.length!==0){var Ut=this.path;it=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(it,this.posX+this.margin[3],-gt+At+this.ctx.prevPageLastElemOffset),_.call(this,"fill",!0),this.path=Ut}var Qt=JSON.parse(JSON.stringify($e));Qt=v([Qt],this.posX+this.margin[3],-gt+At+this.ctx.prevPageLastElemOffset)[0];var Zt=($t>Bt||$t<ht)&&m.call(this);Zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Jt,qt,null).clip().discardPath()),this.pdf.addImage(k,"JPEG",Qt.x,Qt.y,Qt.w,Qt.h,null,null,Ie),Zt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(k,"JPEG",$e.x,$e.y,$e.w,$e.h,null,null,Ie)};var x=function(k,F,B){var U=[];F=F||this.pdf.internal.pageSize.width,B=B||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var J=this.posY+this.ctx.prevPageLastElemOffset;switch(k.type){default:case"mt":case"lt":U.push(Math.floor((k.y+J)/B)+1);break;case"arc":U.push(Math.floor((k.y+J-k.radius)/B)+1),U.push(Math.floor((k.y+J+k.radius)/B)+1);break;case"qct":var me=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x,k.y);U.push(Math.floor((me.y+J)/B)+1),U.push(Math.floor((me.y+me.h+J)/B)+1);break;case"bct":var K=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x2,k.y2,k.x,k.y);U.push(Math.floor((K.y+J)/B)+1),U.push(Math.floor((K.y+K.h+J)/B)+1);break;case"rect":U.push(Math.floor((k.y+J)/B)+1),U.push(Math.floor((k.y+k.h+J)/B)+1)}for(var te=0;te<U.length;te+=1)for(;this.pdf.internal.getNumberOfPages()<U[te];)y.call(this);return U},y=function(){var k=this.fillStyle,F=this.strokeStyle,B=this.font,U=this.lineCap,J=this.lineWidth,me=this.lineJoin;this.pdf.addPage(),this.fillStyle=k,this.strokeStyle=F,this.font=B,this.lineCap=U,this.lineWidth=J,this.lineJoin=me},v=function(k,F,B){for(var U=0;U<k.length;U++)switch(k[U].type){case"bct":k[U].x2+=F,k[U].y2+=B;case"qct":k[U].x1+=F,k[U].y1+=B;default:k[U].x+=F,k[U].y+=B}return k},b=function(k){return k.sort(function(F,B){return F-B})},N=function(k,F){var B=this.fillStyle,U=this.strokeStyle,J=this.lineCap,me=this.lineWidth,K=Math.abs(me*this.ctx.transform.scaleX),te=this.lineJoin;if(this.autoPaging){for(var le,ve,ge=JSON.parse(JSON.stringify(this.path)),Me=JSON.parse(JSON.stringify(this.path)),Fe=[],ee=0;ee<Me.length;ee++)if(Me[ee].x!==void 0)for(var Pe=x.call(this,Me[ee]),Ie=0;Ie<Pe.length;Ie+=1)Fe.indexOf(Pe[Ie])===-1&&Fe.push(Pe[Ie]);for(var Qe=0;Qe<Fe.length;Qe++)for(;this.pdf.internal.getNumberOfPages()<Fe[Qe];)y.call(this);b(Fe);for(var $e=Fe[0],it=Fe[Fe.length-1],st=$e;st<it+1;st++){this.pdf.setPage(st),this.fillStyle=B,this.strokeStyle=U,this.lineCap=J,this.lineWidth=K,this.lineJoin=te;var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pt=st===1?this.posY+this.margin[0]:this.margin[0],Bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$t=st===1?0:Bt+(st-2)*ht;if(this.ctx.clip_path.length!==0){var Jt=this.path;le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(le,this.posX+this.margin[3],-$t+pt+this.ctx.prevPageLastElemOffset),_.call(this,k,!0),this.path=Jt}if(ve=JSON.parse(JSON.stringify(ge)),this.path=v(ve,this.posX+this.margin[3],-$t+pt+this.ctx.prevPageLastElemOffset),F===!1||st===0){var At=(st>$e||st<it)&&m.call(this);At&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,ht,null).clip().discardPath()),_.call(this,k,F),At&&this.pdf.restoreGraphicsState()}this.lineWidth=me}this.path=ge}else this.lineWidth=K,_.call(this,k,F),this.lineWidth=me},_=function(k,F){if((k!=="stroke"||F||!g.call(this))&&(k==="stroke"||F||!h.call(this))){for(var B,U,J=[],me=this.path,K=0;K<me.length;K++){var te=me[K];switch(te.type){case"begin":J.push({begin:!0});break;case"close":J.push({close:!0});break;case"mt":J.push({start:te,deltas:[],abs:[]});break;case"lt":var le=J.length;if(me[K-1]&&!isNaN(me[K-1].x)&&(B=[te.x-me[K-1].x,te.y-me[K-1].y],le>0)){for(;le>=0;le--)if(J[le-1].close!==!0&&J[le-1].begin!==!0){J[le-1].deltas.push(B),J[le-1].abs.push(te);break}}break;case"bct":B=[te.x1-me[K-1].x,te.y1-me[K-1].y,te.x2-me[K-1].x,te.y2-me[K-1].y,te.x-me[K-1].x,te.y-me[K-1].y],J[J.length-1].deltas.push(B);break;case"qct":var ve=me[K-1].x+2/3*(te.x1-me[K-1].x),ge=me[K-1].y+2/3*(te.y1-me[K-1].y),Me=te.x+2/3*(te.x1-te.x),Fe=te.y+2/3*(te.y1-te.y),ee=te.x,Pe=te.y;B=[ve-me[K-1].x,ge-me[K-1].y,Me-me[K-1].x,Fe-me[K-1].y,ee-me[K-1].x,Pe-me[K-1].y],J[J.length-1].deltas.push(B);break;case"arc":J.push({deltas:[],abs:[],arc:!0}),Array.isArray(J[J.length-1].abs)&&J[J.length-1].abs.push(te)}}U=F?null:k==="stroke"?"stroke":"fill";for(var Ie=!1,Qe=0;Qe<J.length;Qe++)if(J[Qe].arc)for(var $e=J[Qe].abs,it=0;it<$e.length;it++){var st=$e[it];st.type==="arc"?A.call(this,st.x,st.y,st.radius,st.startAngle,st.endAngle,st.counterclockwise,void 0,F,!Ie):I.call(this,st.x,st.y),Ie=!0}else if(J[Qe].close===!0)this.pdf.internal.out("h"),Ie=!1;else if(J[Qe].begin!==!0){var ut=J[Qe].start.x,pt=J[Qe].start.y;z.call(this,J[Qe].deltas,ut,pt),Ie=!0}U&&T.call(this,U),F&&P.call(this)}},E=function(k){var F=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,B=F*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return k-B;case"top":return k+F-B;case"hanging":return k+F-2*B;case"middle":return k+F/2-B;default:return k}},j=function(k){return k+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var k=function(){};return k.colorStops=[],k.addColorStop=function(F,B){this.colorStops.push([F,B])},k.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},k.isCanvasGradient=!0,k},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(k,F,B,U,J,me,K,te,le){for(var ve=ie.call(this,B,U,J,me),ge=0;ge<ve.length;ge++){var Me=ve[ge];ge===0&&(le?O.call(this,Me.x1+k,Me.y1+F):I.call(this,Me.x1+k,Me.y1+F)),Y.call(this,k,F,Me.x2,Me.y2,Me.x3,Me.y3,Me.x4,Me.y4)}te?P.call(this):T.call(this,K)},T=function(k){switch(k){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},P=function(){this.pdf.clip(),this.pdf.discardPath()},O=function(k,F){this.pdf.internal.out(r(k)+" "+n(F)+" m")},R=function(k){var F;switch(k.align){case"right":case"end":F="right";break;case"center":F="center";break;default:F="left"}var B,U,J,me=this.pdf.getTextDimensions(k.text),K=E.call(this,k.y),te=j.call(this,K)-me.h,le=this.ctx.transform.applyToPoint(new s(k.x,K));if(this.autoPaging){var ve=this.ctx.transform.decompose(),ge=new c;ge=(ge=(ge=ge.multiply(ve.translate)).multiply(ve.skew)).multiply(ve.scale);for(var Me=this.ctx.transform.applyToRectangle(new l(k.x,K,me.w,me.h)),Fe=ge.applyToRectangle(new l(k.x,te,me.w,me.h)),ee=x.call(this,Fe),Pe=[],Ie=0;Ie<ee.length;Ie+=1)Pe.indexOf(ee[Ie])===-1&&Pe.push(ee[Ie]);b(Pe);for(var Qe=Pe[0],$e=Pe[Pe.length-1],it=Qe;it<$e+1;it++){this.pdf.setPage(it);var st=it===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pt=this.pdf.internal.pageSize.height-this.margin[2],Bt=pt-this.margin[0],ht=this.pdf.internal.pageSize.width-this.margin[1],$t=ht-this.margin[3],Jt=it===1?0:ut+(it-2)*Bt;if(this.ctx.clip_path.length!==0){var At=this.path;B=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(B,this.posX+this.margin[3],-1*Jt+st),_.call(this,"fill",!0),this.path=At}var bt=v([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-Jt+st+this.ctx.prevPageLastElemOffset)[0];k.scale>=.01&&(U=this.pdf.internal.getFontSize(),this.pdf.setFontSize(U*k.scale),J=this.lineWidth,this.lineWidth=J*k.scale);var qt=this.autoPaging!=="text";if(qt||bt.y+bt.h<=pt){if(qt||bt.y>=st&&bt.x<=ht){var gt=qt?k.text:this.pdf.splitTextToSize(k.text,k.maxWidth||ht-bt.x)[0],Ut=v([JSON.parse(JSON.stringify(Me))],this.posX+this.margin[3],-Jt+st+this.ctx.prevPageLastElemOffset)[0],Qt=qt&&(it>Qe||it<$e)&&m.call(this);Qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$t,Bt,null).clip().discardPath()),this.pdf.text(gt,Ut.x,Ut.y,{angle:k.angle,align:F,renderingMode:k.renderingMode}),Qt&&this.pdf.restoreGraphicsState()}}else bt.y<pt&&(this.ctx.prevPageLastElemOffset+=pt-bt.y);k.scale>=.01&&(this.pdf.setFontSize(U),this.lineWidth=J)}}else k.scale>=.01&&(U=this.pdf.internal.getFontSize(),this.pdf.setFontSize(U*k.scale),J=this.lineWidth,this.lineWidth=J*k.scale),this.pdf.text(k.text,le.x+this.posX,le.y+this.posY,{angle:k.angle,align:F,renderingMode:k.renderingMode,maxWidth:k.maxWidth}),k.scale>=.01&&(this.pdf.setFontSize(U),this.lineWidth=J)},I=function(k,F,B,U){B=B||0,U=U||0,this.pdf.internal.out(r(k+B)+" "+n(F+U)+" l")},z=function(k,F,B){return this.pdf.lines(k,F,B,null,null)},Y=function(k,F,B,U,J,me,K,te){this.pdf.internal.out([t(a(B+k)),t(i(U+F)),t(a(J+k)),t(i(me+F)),t(a(K+k)),t(i(te+F)),"c"].join(" "))},ie=function(k,F,B,U){for(var J=2*Math.PI,me=Math.PI/2;F>B;)F-=J;var K=Math.abs(B-F);K<J&&U&&(K=J-K);for(var te=[],le=U?-1:1,ve=F;K>1e-5;){var ge=ve+le*Math.min(K,me);te.push(re.call(this,k,ve,ge)),K-=Math.abs(ge-ve),ve=ge}return te},re=function(k,F,B){var U=(B-F)/2,J=k*Math.cos(U),me=k*Math.sin(U),K=J,te=-me,le=K*K+te*te,ve=le+K*J+te*me,ge=4/3*(Math.sqrt(2*le*ve)-ve)/(K*me-te*J),Me=K-ge*te,Fe=te+ge*K,ee=Me,Pe=-Fe,Ie=U+F,Qe=Math.cos(Ie),$e=Math.sin(Ie);return{x1:k*Math.cos(F),y1:k*Math.sin(F),x2:Me*Qe-Fe*$e,y2:Me*$e+Fe*Qe,x3:ee*Qe-Pe*$e,y3:ee*$e+Pe*Qe,x4:k*Math.cos(B),y4:k*Math.sin(B)}},X=function(k){return 180*k/Math.PI},oe=function(k,F,B,U,J,me){var K=k+.5*(B-k),te=F+.5*(U-F),le=J+.5*(B-J),ve=me+.5*(U-me),ge=Math.min(k,J,K,le),Me=Math.max(k,J,K,le),Fe=Math.min(F,me,te,ve),ee=Math.max(F,me,te,ve);return new l(ge,Fe,Me-ge,ee-Fe)},we=function(k,F,B,U,J,me,K,te){var le,ve,ge,Me,Fe,ee,Pe,Ie,Qe,$e,it,st,ut,pt,Bt=B-k,ht=U-F,$t=J-B,Jt=me-U,At=K-J,bt=te-me;for(ve=0;ve<41;ve++)Qe=(Pe=(ge=k+(le=ve/40)*Bt)+le*((Fe=B+le*$t)-ge))+le*(Fe+le*(J+le*At-Fe)-Pe),$e=(Ie=(Me=F+le*ht)+le*((ee=U+le*Jt)-Me))+le*(ee+le*(me+le*bt-ee)-Ie),ve==0?(it=Qe,st=$e,ut=Qe,pt=$e):(it=Math.min(it,Qe),st=Math.min(st,$e),ut=Math.max(ut,Qe),pt=Math.max(pt,$e));return new l(Math.round(it),Math.round(st),Math.round(ut-it),Math.round(pt-st))},_e=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var k,F,B=(k=this.ctx.lineDash,F=this.ctx.lineDashOffset,JSON.stringify({lineDash:k,lineDashOffset:F}));this.prevLineDash!==B&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=B)}}})(Rt.API),function(e){var t=function(s){var l,c,u,d,f,p,h,g,m,x;for(c=[],u=0,d=(s+=l="\0\0\0\0".slice(s.length%4||4)).length;d>u;u+=4)(f=(s.charCodeAt(u)<<24)+(s.charCodeAt(u+1)<<16)+(s.charCodeAt(u+2)<<8)+s.charCodeAt(u+3))!==0?(p=(f=((f=((f=((f=(f-(x=f%85))/85)-(m=f%85))/85)-(g=f%85))/85)-(h=f%85))/85)%85,c.push(p+33,h+33,g+33,m+33,x+33)):c.push(122);return function(y,v){for(var b=v;b>0;b--)y.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(s){var l,c,u,d,f,p=String,h="length",g=255,m="charCodeAt",x="slice",y="replace";for(s[x](-2),s=s[x](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),u=[],d=0,f=(s+=l="uuuuu"[x](s[h]%5||5))[h];f>d;d+=5)c=52200625*(s[m](d)-33)+614125*(s[m](d+1)-33)+7225*(s[m](d+2)-33)+85*(s[m](d+3)-33)+(s[m](d+4)-33),u.push(g&c>>24,g&c>>16,g&c>>8,g&c);return function(v,b){for(var N=b;N>0;N--)v.pop()}(u,l[h]),p.fromCharCode.apply(p,u)},n=function(s){return s.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(s){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),l.test(s)===!1)return"";for(var c="",u=0;u<s.length;u+=2)c+=String.fromCharCode("0x"+(s[u]+s[u+1]));return c},i=function(s){for(var l=new Uint8Array(s.length),c=s.length;c--;)l[c]=s.charCodeAt(c);return(l=Oj(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};e.processDataByFilters=function(s,l){var c=0,u=s||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=t(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(Rt.API),function(e){e.loadFile=function(t,r,n){return function(a,i,s){i=i!==!1,s=typeof s=="function"?s:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,p=0,h=function(g){var m=g.length,x=[],y=String.fromCharCode;for(p=0;p<m;p+=1)x.push(y(255&g.charCodeAt(p)));return x.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(h(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return h(f.responseText)}(a,i,s)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(Rt.API),function(e){function t(){return(Gt.html2canvas?Promise.resolve(Gt.html2canvas):ug(()=>import("./html2canvas.esm-CBrSDip1.js"),[],import.meta.url)).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(Gt.DOMPurify?Promise.resolve(Gt.DOMPurify):ug(()=>import("./purify.es-B9ZVCkUG.js"),[],import.meta.url)).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=zr(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},i=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(l(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},s=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(l,c){return l.__proto__=c||s.prototype,l},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},s.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var g=d[h],m=g.src.find(function(x){return x.format==="truetype"});m&&u.addFont(m.url,g.ref.name,g.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,u.context2d.save(!0),c(this.prop.container,p)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},s.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},s.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},s.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in s.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},s.prototype.get=function(l,c){return this.then(function(){var u=l in s.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},s.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},s.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||Rt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},s.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(p){return u.updateProgress(null,d),p}).then(d,f).then(function(p){return u.updateProgress(1),p})})},s.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:s.convert(Object.assign({},d),Promise.prototype),p=u.call(f,l,c);return s.convert(p,d.__proto__)},s.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},s.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},s.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return s.convert(c,this)},s.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},s.prototype.error=function(l){return this.then(function(){throw new Error(l)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Rt.getPageSize=function(l,c,u){if(zr(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var f,p=(""+u).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var g,m=0,x=0;if(h.hasOwnProperty(p))m=h[p][1]/f,x=h[p][0]/f;else try{m=u[1],x=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",x>m&&(g=x,x=m,m=g);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",m>x&&(g=x,x=m,m=g)}return{width:x,height:m,unit:c,k:f,orientation:l}},e.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(uN):null;var u=new s(c);return c.worker?u:u.from(l).doCallback()}}(Rt.API),Rt.API.addJS=function(e){return lP=e,this.internal.events.subscribe("postPutResources",function(){H1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(H1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),oP=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+lP+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){H1!==void 0&&oP!==void 0&&this.internal.out("/Names <</JavaScript "+H1+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var s=a[i],l=n.exec(s);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(s)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(i=0;i<u;i++){var f=r.internal.newObject();d.push(f);var p=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var h=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<d.length;i++)r.internal.write("(page_"+(i+1)+")"+d[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+h+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,i){var s={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(s),s},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var s=n.children[i];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var l=this.count=this.count_r({count:0},s);if(l>0&&this.line("/Count "+l),s.options&&s.options.pageNumber){var c=r.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])}(Rt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,i,s,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=s||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(f){for(var p,h=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,m={width:0,height:0,numcomponents:1},x=4;x<g;x+=2){if(x+=h,t.indexOf(f.charCodeAt(x+1))!==-1){p=256*f.charCodeAt(x+5)+f.charCodeAt(x+6),m={width:256*f.charCodeAt(x+7)+f.charCodeAt(x+8),height:p,numcomponents:f.charCodeAt(x+9)};break}h=256*f.charCodeAt(x+2)+f.charCodeAt(x+3)}return m}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(Rt.API),Rt.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var a,i=C0e(e,{checkCrc:!0}),s=i.width,l=i.height,c=i.channels,u=i.palette,d=i.depth;a=u&&c===1?function(A){for(var T=A.width,P=A.height,O=A.data,R=A.palette,I=A.depth,z=!1,Y=[],ie=[],re=void 0,X=!1,oe=0,we=0;we<R.length;we++){var _e=f6(R[we],4),k=_e[0],F=_e[1],B=_e[2],U=_e[3];Y.push(k,F,B),U!=null&&(U===0?(oe++,ie.length<1&&ie.push(we)):U<255&&(X=!0))}if(X||oe>1){z=!0,ie=void 0;var J=T*P;re=new Uint8Array(J);for(var me=new DataView(O.buffer),K=0;K<J;K++){var te=fN(me,K,I),le=f6(R[te],4)[3];re[K]=le}}else oe===0&&(ie=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:z?8:void 0,colorBytes:O,alphaBytes:re,needSMask:z,palette:Y,mask:ie}}(i):c===2||c===4?function(A){for(var T=A.data,P=A.width,O=A.height,R=A.channels,I=A.depth,z=R===2?"DeviceGray":"DeviceRGB",Y=R-1,ie=P*O,re=Y,X=ie*re,oe=1*ie,we=Math.ceil(X*I/8),_e=Math.ceil(oe*I/8),k=new Uint8Array(we),F=new Uint8Array(_e),B=new DataView(T.buffer),U=new DataView(k.buffer),J=new DataView(F.buffer),me=!1,K=0;K<ie;K++){for(var te=K*R,le=0;le<re;le++)vP(U,fN(B,te+le,I),K*re+le,I);var ve=fN(B,te+re,I);ve<(1<<I)-1&&(me=!0),vP(J,ve,1*K,I)}return{colorSpace:z,colorsPerPixel:Y,sMaskBitsPerComponent:me?I:void 0,colorBytes:k,alphaBytes:F,needSMask:me}}(i):function(A){var T=A.data,P=A.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:P,colorsPerPixel:P==="DeviceGray"?1:3,colorBytes:T instanceof Uint16Array?function(O){for(var R=O.length,I=new Uint8Array(2*R),z=new DataView(I.buffer,I.byteOffset,I.byteLength),Y=0;Y<R;Y++)z.setUint16(2*Y,O[Y],!1);return I}(T):T,needSMask:!1}}(i);var f,p,h,g=a,m=g.colorSpace,x=g.colorsPerPixel,y=g.sMaskBitsPerComponent,v=g.colorBytes,b=g.alphaBytes,N=g.needSMask,_=g.palette,E=g.mask,j=null;return n!==Rt.API.image_compression.NONE&&typeof Oj=="function"?(j=function(A){var T;switch(A){case Rt.API.image_compression.FAST:T=11;break;case Rt.API.image_compression.MEDIUM:T=13;break;case Rt.API.image_compression.SLOW:T=14;break;default:T=12}return T}(n),f=this.decode.FLATE_DECODE,p="/Predictor ".concat(j," /Colors ").concat(x," /BitsPerComponent ").concat(d," /Columns ").concat(s),e=fP(v,Math.ceil(s*x*d/8),x,d,n),N&&(h=fP(b,Math.ceil(s*y/8),1,y,n))):(f=void 0,p=void 0,e=v,N&&(h=b)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:r,data:e,index:t,filter:f,decodeParameters:p,transparency:E,palette:_,sMask:h,predictor:j,width:s,height:l,bitsPerComponent:d,sMaskBitsPerComponent:y,colorSpace:m}}},function(e){e.processGIF89A=function(t,r,n,a){var i=new X0e(t),s=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:s,height:l},d=new hN(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(Rt.API),Co.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Co.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Qr.log("bit decode error:"+r)}},Co.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[s+4*l]=c.blue,this.data[s+4*l+1]=c.green,this.data[s+4*l+2]=c.red,this.data[s+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Co.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+2*a*4,l=i>>4,c=15&i,u=this.palette[l];if(this.data[s]=u.blue,this.data[s+1]=u.green,this.data[s+2]=u.red,this.data[s+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[s+4]=u.blue,this.data[s+4+1]=u.green,this.data[s+4+2]=u.red,this.data[s+4+3]=255}t!==0&&(this.pos+=4-t)}},Co.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var s=this.palette[a];this.data[i]=s.red,this.data[i+1]=s.green,this.data[i+2]=s.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Co.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,u=i>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=s,this.data[d+3]=u}this.pos+=e}},Co.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(s&t)/t*255|0,c=(s>>5&r)/r*255|0,u=(s>>11)/t*255|0,d=a*this.width*4+4*i;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=e}},Co.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;this.data[s]=i,this.data[s+1]=a,this.data[s+2]=n,this.data[s+3]=255}this.pos+=this.width%4}},Co.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=s}},Co.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var i=new Co(t,!1),s=i.width,l=i.height,c={data:i.getData(),width:s,height:l},u=new hN(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(Rt.API),yP.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var i=new yP(t),s=i.width,l=i.height,c={data:i.getData(),width:s,height:l},u=new hN(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(Rt.API),Rt.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,i=new Uint8Array(a/4*3),s=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],p=n[u+2],h=n[u+3];i[l++]=d,i[l++]=f,i[l++]=p,s[c++]=h}var g=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Rt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},bh=Rt.API,W1=bh.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),s=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,p=0,h=e.length,g=0,m=l[0]||c,x=[];for(r=0;r<h;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?x.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+s*(1e3/i)||0)/1e3):(p=f&&zr(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,x.push((l[n]||m)/c+p)),g=n;return x},cP=bh.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return bh.processArabic&&(e=bh.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:W1.apply(this,arguments).reduce(function(i,s){return i+s},0)},uP=function(e,t,r,n){for(var a=[],i=0,s=e.length,l=0;i!==s&&l+t[i]<r;)l+=t[i],i++;a.push(e.slice(0,i));var c=i;for(l=0;i!==s;)l+t[i]>n&&(a.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&a.push(e.slice(c,i)),a},dP=function(e,t,r){r||(r={});var n,a,i,s,l,c,u,d=[],f=[d],p=r.textIndent||0,h=0,g=0,m=e.split(" "),x=W1.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?m[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),v=[];m.map(function(N){(N=N.split(/\s*\n/)).length>1?v=v.concat(N.map(function(_,E){return(E&&_.length?`
`:"")+_})):v.push(N[0])}),m=v,c=cP.apply(this,[y,r])}for(i=0,s=m.length;i<s;i++){var b=0;if(n=m[i],c&&n[0]==`
`&&(n=n.substr(1),b=1),p+h+(g=(a=W1.apply(this,[n,r])).reduce(function(N,_){return N+_},0))>t||b){if(g>t){for(l=uP.apply(this,[n,a,t-(p+h),t]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);g=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(N,_){return N+_},0)}else d=[n];f.push(d),p=g+c,h=x}else d.push(n),p+=h+g,h=x}return u=c?function(N,_){return(_?y:"")+N.join(" ")}:function(N){return N.join(" ")},f.map(u)},bh.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),p="Unicode";return f.metadata[p]?{widths:f.metadata[p].widths||{0:1},kerning:f.metadata[p].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var s=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(dP.apply(this,[n[l],s,i]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},i=0;i<16;i++)n[r[i]]=t[i],a[t[i]]=r[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},l=e.__fontmetrics__.compress=function(p){var h,g,m,x,y=["{"];for(var v in p){if(h=p[v],isNaN(parseInt(v,10))?g="'"+v+"'":(v=parseInt(v,10),g=(g=s(v).slice(2)).slice(0,-1)+a[g.slice(-1)]),typeof h=="number")h<0?(m=s(h).slice(3),x="-"):(m=s(h).slice(2),x=""),m=x+m.slice(0,-1)+a[m.slice(-1)];else{if(zr(h)!=="object")throw new Error("Don't know what to do with value type "+zr(h)+".");m=l(h)}y.push(g+m)}return y.push("}"),y.join("")},c=e.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,g,m,x,y={},v=1,b=y,N=[],_="",E="",j=p.length-1,A=1;A<j;A+=1)(x=p[A])=="'"?h?(m=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(N.push([b,m]),b={},m=void 0):x=="}"?((g=N.pop())[0][g[1]]=b,m=void 0,b=g[0]):x=="-"?v=-1:m===void 0?n.hasOwnProperty(x)?(_+=n[x],m=parseInt(_,16)*v,v=1,_=""):_+=x:n.hasOwnProperty(x)?(E+=n[x],b[m]=parseInt(E,16)*v,v=1,m=void 0,E=""):E+=x;return y},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(p){var h=p.font,g=f.Unicode[h.postScriptName];g&&(h.metadata.Unicode={},h.metadata.Unicode.widths=g.widths,h.metadata.Unicode.kerning=g.kerning);var m=d.Unicode[h.postScriptName];m&&(h.metadata.Unicode.encoding=m,h.encoding=m.codePages[0])}])}(Rt.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=r.charCodeAt(i);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(s,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(jy(l)),s.metadata=e.API.TTFFont.open(l),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(a,n)}}])}(Rt),Rt.API.addSvgAsImage=function(e,t,r,n,a,i,s,l){if(isNaN(t)||isNaN(r))throw Qr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw Qr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(Gt.canvg?Promise.resolve(Gt.canvg):ug(()=>import("./index.es-Sq3RxCEo.js"),[],import.meta.url)).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(u,e,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(d)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),t,r,n,a,s,l)})},Rt.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},Rt.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,i,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(s),c=[],u=0,d=0,f=0;function p(g,m){var x,y=!1;for(x=0;x<g.length;x+=1)g[x]===m&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var h=l.length;for(f=0;f<h;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(zr(e)==="object"){for(a in e)if(i=e[a],p(l,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&p(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(u=0;u<i.length;u+=1)if(n=!0,i[u].length===1&&typeof i[u][0]=="number")c.push(String(i[u]-1));else if(i[u].length>1){for(d=0;d<i[u].length;d+=1)typeof i[u][d]!="number"&&(n=!1);n===!0&&c.push([i[u][0]-1,i[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,m=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?m.push("/"+g+" /"+r[g].value):m.push("/"+g+" "+r[g].value));m.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+m.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+s.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+i+s+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Rt.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,s){for(var l,c=s.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,p=i.length;f<p;++f){if(l=s.metadata.characterToGlyph(i.charCodeAt(f)),s.metadata.glyIdsUsed.push(l),s.metadata.toUnicode[l]=i.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(s.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(i){var s,l,c,u,d,f,p;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,p=(l=Object.keys(i).sort(function(h,g){return h-g})).length;f<p;f++)s=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[s]!==void 0&&i[s]!==null&&typeof i[s].toString=="function"&&(u=("0000"+i[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),c.push("<"+s+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(s){var l=s.font,c=s.out,u=s.newObject,d=s.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,p=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),h="",g=0;g<p.length;g++)h+=String.fromCharCode(p[g]);var m=u();d({data:h,addLength1:!0,objectId:m}),c("endobj");var x=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Ch(l.fontName)),c("/FontFile2 "+m+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var v=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Ch(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+x+" 0 R"),c("/BaseFont /"+Ch(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+v+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(s){var l=s.font,c=s.out,u=s.newObject,d=s.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,p="",h=0;h<f.length;h++)p+=String.fromCharCode(f[h]);var g=u();d({data:p,addLength1:!0,objectId:g}),c("endobj");var m=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:m}),c("endobj");var x=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Ch(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+m+" 0 R/BaseFont/"+Ch(l.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var s,l=i.text||"",c=i.x,u=i.y,d=i.options||{},f=i.mutex||{},p=f.pdfEscape,h=f.activeFontKey,g=f.fonts,m=h,x="",y=0,v="",b=g[m].encoding;if(g[m].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(v=l,m=h,Array.isArray(l)&&(v=l[0]),y=0;y<v.length;y+=1)g[m].metadata.hasOwnProperty("cmap")&&(s=g[m].metadata.cmap.unicode.codeMap[v[y].charCodeAt(0)]),s||v[y].charCodeAt(0)<256&&g[m].metadata.hasOwnProperty("Unicode")?x+=v[y]:x+="";var N="";return parseInt(m.slice(1))<14||b==="WinAnsiEncoding"?N=p(x,m).split("").map(function(_){return _.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(N=r(x,g[m])),f.isHex=!0,{text:N,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(i){var s=i.text||"",l=[],c={text:s,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(s)){var u=0;for(u=0;u<s.length;u+=1)Array.isArray(s[u])&&s[u].length===3?l.push([a(Object.assign({},c,{text:s[u][0]})).text,s[u][1],s[u][2]]):l.push(a(Object.assign({},c,{text:s[u]})).text);i.text=l}else i.text=a(Object.assign({},c,{text:s})).text}])}(Rt),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Rt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,i,s,l,c,u,d,f=t,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},m={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),v=!1,b=0;this.__bidiEngine__={};var N=function(O){var R=O.charCodeAt(),I=R>>8,z=m[I];return z!==void 0?f[256*z+(255&R)]:I===252||I===253?"AL":y.test(I)?"L":I===8?"R":"N"},_=function(O){for(var R,I=0;I<O.length;I++){if((R=N(O.charAt(I)))==="L")return!1;if(R==="R")return!0}return!1},E=function(O,R,I,z){var Y,ie,re,X,oe=R[z];switch(oe){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":v=!1;break;case"N":case"AN":break;case"EN":v&&(oe="AN");break;case"AL":v=!0,oe="R";break;case"WS":case"BN":oe="N";break;case"CS":z<1||z+1>=R.length||(Y=I[z-1])!=="EN"&&Y!=="AN"||(ie=R[z+1])!=="EN"&&ie!=="AN"?oe="N":v&&(ie="AN"),oe=ie===Y?ie:"N";break;case"ES":oe=(Y=z>0?I[z-1]:"B")==="EN"&&z+1<R.length&&R[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&I[z-1]==="EN"){oe="EN";break}if(v){oe="N";break}for(re=z+1,X=R.length;re<X&&R[re]==="ET";)re++;oe=re<X&&R[re]==="EN"?"EN":"N";break;case"NSM":if(s&&!l){for(X=R.length,re=z+1;re<X&&R[re]==="NSM";)re++;if(re<X){var we=O[z],_e=we>=1425&&we<=2303||we===64286;if(Y=R[re],_e&&(Y==="R"||Y==="AL")){oe="R";break}}}oe=z<1||(Y=R[z-1])==="B"?"N":I[z-1];break;case"B":v=!1,a=!0,oe=b;break;case"S":i=!0,oe="N"}return oe},j=function(O,R,I){var z=O.split("");return I&&A(z,I,{hiLevel:b}),z.reverse(),R&&R.reverse(),z.join("")},A=function(O,R,I){var z,Y,ie,re,X,oe=-1,we=O.length,_e=0,k=[],F=b?h:p,B=[];for(v=!1,a=!1,i=!1,Y=0;Y<we;Y++)B[Y]=N(O[Y]);for(ie=0;ie<we;ie++){if(X=_e,k[ie]=E(O,B,k,ie),z=240&(_e=F[X][g[k[ie]]]),_e&=15,R[ie]=re=F[_e][5],z>0)if(z===16){for(Y=oe;Y<ie;Y++)R[Y]=1;oe=-1}else oe=-1;if(F[_e][6])oe===-1&&(oe=ie);else if(oe>-1){for(Y=oe;Y<ie;Y++)R[Y]=re;oe=-1}B[ie]==="B"&&(R[ie]=0),I.hiLevel|=re}i&&function(U,J,me){for(var K=0;K<me;K++)if(U[K]==="S"){J[K]=b;for(var te=K-1;te>=0&&U[te]==="WS";te--)J[te]=b}}(B,R,we)},T=function(O,R,I,z,Y){if(!(Y.hiLevel<O)){if(O===1&&b===1&&!a)return R.reverse(),void(I&&I.reverse());for(var ie,re,X,oe,we=R.length,_e=0;_e<we;){if(z[_e]>=O){for(X=_e+1;X<we&&z[X]>=O;)X++;for(oe=_e,re=X-1;oe<re;oe++,re--)ie=R[oe],R[oe]=R[re],R[re]=ie,I&&(ie=I[oe],I[oe]=I[re],I[re]=ie);_e=X}_e++}}},P=function(O,R,I){var z=O.split(""),Y={hiLevel:b};return I||(I=[]),A(z,I,Y),function(ie,re,X){if(X.hiLevel!==0&&d)for(var oe,we=0;we<ie.length;we++)re[we]===1&&(oe=x.indexOf(ie[we]))>=0&&(ie[we]=x[oe+1])}(z,I,Y),T(2,z,R,I,Y),T(1,z,R,I,Y),z.join("")};return this.__bidiEngine__.doBidiReorder=function(O,R,I){if(function(Y,ie){if(ie)for(var re=0;re<Y.length;re++)ie[re]=re;l===void 0&&(l=_(Y)),u===void 0&&(u=_(Y))}(O,R),s||!c||u)if(s&&c&&l^u)b=l?1:0,O=j(O,R,I);else if(!s&&c&&u)b=l?1:0,O=P(O,R,I),O=j(O,R);else if(!s||l||c||u){if(s&&!c&&l^u)O=j(O,R),l?(b=0,O=P(O,R,I)):(b=1,O=P(O,R,I),O=j(O,R));else if(s&&l&&!c&&u)b=1,O=P(O,R,I),O=j(O,R);else if(!s&&!c&&l^u){var z=d;l?(b=1,O=P(O,R,I),b=0,d=!1,O=P(O,R,I),d=z):(b=0,O=P(O,R,I),O=j(O,R),b=1,d=!1,O=P(O,R,I),d=z,O=j(O,R))}}else b=0,O=P(O,R,I);else b=l?1:0,O=P(O,R,I);return O},this.__bidiEngine__.setOptions=function(O){O&&(s=O.isInputVisual,c=O.isOutputVisual,l=O.isInputRtl,u=O.isOutputRtl,d=O.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var s=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(s=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?s.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):s.push([r.doBidiReorder(a[l])]);n.text=s}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Rt),Rt.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Xu(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new dpe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new J0e(this.contents),this.head=new Z0e(this),this.name=new ape(this),this.cmap=new YB(this),this.toUnicode={},this.hhea=new epe(this),this.maxp=new ipe(this),this.hmtx=new spe(this),this.post=new rpe(this),this.os2=new tpe(this),this.loca=new upe(this),this.glyf=new ope(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,l,c,u;for(u=[],s=0,l=(c=this.bbox).length;s<l;s++)t=c[s],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,i,s,l;for(s=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=t.charCodeAt(i),s+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return s*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Zo,Xu=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,i,s,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),s=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^s)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*i+65536*s+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,i;for(i=[],n=0,a=t.length;n<a;n++)r=t[n],i.push(this.writeByte(r));return i},e}(),J0e=function(){var e;function t(r){var n,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,i,s,l,c,u,d,f,p,h,g,m;for(m in h=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(h)/c),s=Math.floor(f/c),d=16*h-f,(a=new Xu).writeInt(this.scalarType),a.writeShort(h),a.writeShort(f),a.writeShort(s),a.writeShort(d),i=16*h,u=a.pos+i,l=null,g=[],r)for(p=r[m],a.writeString(m),a.writeInt(e(p)),a.writeInt(u),a.writeInt(p.length),g=g.concat(p),m==="head"&&(l=u),u+=p.length;u%4;)g.push(0),u++;return a.write(g),n=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(n),a.data},e=function(r){var n,a,i,s;for(r=XB.call(r);r.length%4;)r.push(0);for(i=new Xu(r),a=0,n=0,s=r.length;n<s;n=n+=4)a+=i.readUInt32();return 4294967295&a},t}(),Q0e={}.hasOwnProperty,Ol=function(e,t){for(var r in t)Q0e.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Zo=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var Z0e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ol(e,Zo),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Xu).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),bP=function(){function e(t,r){var n,a,i,s,l,c,u,d,f,p,h,g,m,x,y,v,b;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(h=t.readUInt16(),p=h/2,t.pos+=6,i=function(){var N,_;for(_=[],c=N=0;0<=p?N<p:N>p;c=0<=p?++N:--N)_.push(t.readUInt16());return _}(),t.pos+=2,m=function(){var N,_;for(_=[],c=N=0;0<=p?N<p:N>p;c=0<=p?++N:--N)_.push(t.readUInt16());return _}(),u=function(){var N,_;for(_=[],c=N=0;0<=p?N<p:N>p;c=0<=p?++N:--N)_.push(t.readUInt16());return _}(),d=function(){var N,_;for(_=[],c=N=0;0<=p?N<p:N>p;c=0<=p?++N:--N)_.push(t.readUInt16());return _}(),a=(this.length-t.pos+this.offset)/2,l=function(){var N,_;for(_=[],c=N=0;0<=a?N<a:N>a;c=0<=a?++N:--N)_.push(t.readUInt16());return _}(),c=y=0,b=i.length;y<b;c=++y)for(x=i[c],n=v=g=m[c];g<=x?v<=x:v>=x;n=g<=x?++v:--v)d[c]===0?s=n+u[c]:(s=l[d[c]/2+(n-g)-(p-c)]||0)!==0&&(s+=u[c]),this.codeMap[n]=65535&s}t.pos=f}return e.encode=function(t,r){var n,a,i,s,l,c,u,d,f,p,h,g,m,x,y,v,b,N,_,E,j,A,T,P,O,R,I,z,Y,ie,re,X,oe,we,_e,k,F,B,U,J,me,K,te,le,ve,ge;switch(z=new Xu,s=Object.keys(t).sort(function(Me,Fe){return Me-Fe}),r){case"macroman":for(m=0,x=function(){var Me=[];for(g=0;g<256;++g)Me.push(0);return Me}(),v={0:0},i={},Y=0,oe=s.length;Y<oe;Y++)v[te=t[a=s[Y]]]==null&&(v[te]=++m),i[a]={old:t[a],new:v[t[a]]},x[a]=v[t[a]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(x),{charMap:i,subtable:z.data,maxGlyphID:m+1};case"unicode":for(R=[],f=[],b=0,v={},n={},y=u=null,ie=0,we=s.length;ie<we;ie++)v[_=t[a=s[ie]]]==null&&(v[_]=++b),n[a]={old:_,new:v[_]},l=v[_]-a,y!=null&&l===u||(y&&f.push(y),R.push(a),u=l),y=a;for(y&&f.push(y),f.push(65535),R.push(65535),P=2*(T=R.length),A=2*Math.pow(Math.log(T)/Math.LN2,2),p=Math.log(A/2)/Math.LN2,j=2*T-A,c=[],E=[],h=[],g=re=0,_e=R.length;re<_e;g=++re){if(O=R[g],d=f[g],O===65535){c.push(0),E.push(0);break}if(O-(I=n[O].new)>=32768)for(c.push(0),E.push(2*(h.length+T-g)),a=X=O;O<=d?X<=d:X>=d;a=O<=d?++X:--X)h.push(n[a].new);else c.push(I-O),E.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*T+2*h.length),z.writeUInt16(0),z.writeUInt16(P),z.writeUInt16(A),z.writeUInt16(p),z.writeUInt16(j),me=0,k=f.length;me<k;me++)a=f[me],z.writeUInt16(a);for(z.writeUInt16(0),K=0,F=R.length;K<F;K++)a=R[K],z.writeUInt16(a);for(le=0,B=c.length;le<B;le++)l=c[le],z.writeUInt16(l);for(ve=0,U=E.length;ve<U;ve++)N=E[ve],z.writeUInt16(N);for(ge=0,J=h.length;ge<J;ge++)m=h[ge],z.writeUInt16(m);return{charMap:n,subtable:z.data,maxGlyphID:b+1}}},e}(),YB=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ol(e,Zo),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new bP(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,a;return r==null&&(r="macroman"),n=bP.encode(t,r),(a=new Xu).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},e}(),epe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ol(e,Zo),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),tpe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ol(e,Zo),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),rpe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ol(e,Zo),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var s,l,c;for(c=[],i=s=0,l=this.file.maxp.numGlyphs;0<=l?s<l:s>l;i=0<=l?++s:--s)c.push(t.readUInt32());return c}).call(this)}},e}(),npe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},ape=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ol(e,Zo),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,a,i,s,l,c,u,d,f,p;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(c={},i=d=0,f=n.length;d<f;i=++d)a=n[i],t.pos=a.offset,u=t.readString(a.length),s=new npe(u,a),c[p=a.nameID]==null&&(c[p]=[]),c[a.nameID].push(s);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),ipe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ol(e,Zo),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),spe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ol(e,Zo),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,a,i,s,l,c;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)d.push(t.readInt16());return d}(),this.widths=(function(){var u,d,f,p;for(p=[],u=0,d=(f=this.metrics).length;u<d;u++)i=f[u],p.push(i.advance);return p}).call(this),n=this.widths[this.widths.length-1],c=[],r=s=0;0<=a?s<a:s>a;r=0<=a?++s:--s)c.push(this.widths.push(n));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),XB=[].slice,ope=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ol(e,Zo),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,a,i,s,l,c,u,d,f;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,n=i.indexOf(t),(a=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,s=(l=new Xu(r.read(a))).readShort(),u=l.readShort(),f=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[t]=s===-1?new cpe(l,u,f,c,d):new lpe(l,s,u,f,c,d),this.cache[t]))},e.prototype.encode=function(t,r,n){var a,i,s,l,c;for(s=[],i=[],l=0,c=r.length;l<c;l++)a=t[r[l]],i.push(s.length),a&&(s=s.concat(a.encode(n)));return i.push(s.length),{table:s,offsets:i}},e}(),lpe=function(){function e(t,r,n,a,i,s){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=s,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),cpe=function(){function e(t,r,n,a,i){var s,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;l=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&l;)s.pos+=1&l?4:2,128&l?s.pos+=8:64&l?s.pos+=4:8&l&&(s.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Xu(XB.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),upe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ol(e,Zo),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),a=0,i=0,s=0;s<n.length;++s)if(n[s]=a,i<r.length&&r[i]==s){++i,n[s]=a;var l=this.offsets[s],c=this.offsets[s+1]-l;c>0&&(a+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},e}(),dpe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,i;for(r in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,i,s,l,c;for(a={},s=0,l=t.length;s<l;s++)a[i=t[s]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(n=a[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],a[i]=n;return a},e.prototype.encode=function(t,r){var n,a,i,s,l,c,u,d,f,p,h,g,m,x,y;for(a in n=YB.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(t),h={0:0},y=n.charMap)h[(c=y[a]).old]=c.new;for(g in p=n.maxGlyphID,s)g in h||(h[g]=p++);return d=function(v){var b,N;for(b in N={},v)N[v[b]]=b;return N}(h),f=Object.keys(d).sort(function(v,b){return v-b}),m=function(){var v,b,N;for(N=[],v=0,b=f.length;v<b;v++)l=f[v],N.push(d[l]);return N}(),i=this.font.glyf.encode(s,m,h),u=this.font.loca.encode(i.offsets,m),x={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},e}();Rt.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,i,s;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)s=r[a],i.push("/"+a+" "+t.convert(s));return i.push(">>"),i.join(`
`)}return""+r},t}();function JB(e,t,r,n,a){n=n||{};var i=1.15,s=a.internal.scaleFactor,l=a.internal.getFontSize()/s,c=a.getLineHeightFactor?a.getLineHeightFactor():i,u=l*c,d=/\r\n|\r|\n/g,f="",p=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,p=f.length||1),r+=l*(2-i),n.valign==="middle"?r-=p/2*u:n.valign==="bottom"&&(r-=p*u),n.halign==="center"||n.halign==="right"){var h=l;if(n.halign==="center"&&(h*=.5),f&&p>=1){for(var g=0;g<f.length;g++)a.text(f[g],t-a.getStringUnitWidth(f[g])*h,r),r+=u;return a}t-=a.getStringUnitWidth(e)*h}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var wP={},h0=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:wP=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,i;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var s=this.jsPDFDocument.internal.getFont(),l=s.fontStyle,c=s.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(i=this.jsPDFDocument).setDrawColor.apply(i,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,i){return this.jsPDFDocument.rect(t,r,n,a,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return wP||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),$j=function(e,t){return $j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},$j(e,t)};function QB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");$j(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ZB=function(e){QB(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function fpe(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function hpe(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function Db(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(i){return r.getTextWidth(i)}).reduce(function(i,s){return Math.max(i,s)},0);return a}function eU(e,t,r,n){var a=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:i});var s=tU(a,!1);s&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,s)}function tU(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function Sw(e,t){var r,n,a,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function rU(e,t){var r=Sw(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function ppe(e,t,r,n,a){var i={},s=1.3333333333333333,l=pN(t,function(b){return a.getComputedStyle(b).backgroundColor});l!=null&&(i.fillColor=l);var c=pN(t,function(b){return a.getComputedStyle(b).color});c!=null&&(i.textColor=c);var u=gpe(n,r);u&&(i.cellPadding=u);var d="borderTopColor",f=s*r,p=n.borderTopWidth;if(n.borderBottomWidth===p&&n.borderRightWidth===p&&n.borderLeftWidth===p){var h=(parseFloat(p)||0)/f;h&&(i.lineWidth=h)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},i.lineWidth.top||(i.lineWidth.right?d="borderRightColor":i.lineWidth.bottom?d="borderBottomColor":i.lineWidth.left&&(d="borderLeftColor"));var g=pN(t,function(b){return a.getComputedStyle(b)[d]});g!=null&&(i.lineColor=g);var m=["left","right","center","justify"];m.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),m=["middle","bottom","top"],m.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var x=parseInt(n.fontSize||"");isNaN(x)||(i.fontSize=x/s);var y=mpe(n);y&&(i.fontStyle=y);var v=(n.fontFamily||"").toLowerCase();return e.indexOf(v)!==-1&&(i.font=v),i}function mpe(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function pN(e,t){var r=nU(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function nU(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:nU(e.parentElement,t):r}function gpe(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(l){return parseInt(l||"0")/n}),s=Sw(i,0);return a>s.top&&(s.top=a),a>s.bottom&&(s.bottom=a),s}function aU(e,t,r,n,a){var i,s;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],p=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:p};for(var h=0;h<l.rows.length;h++){var g=l.rows[h],m=(s=(i=g==null?void 0:g.parentElement)===null||i===void 0?void 0:i.tagName)===null||s===void 0?void 0:s.toLowerCase(),x=vpe(c,u,r,g,n,a);x&&(m==="thead"?d.push(x):m==="tfoot"?p.push(x):f.push(x))}return{head:d,body:f,foot:p}}function vpe(e,t,r,n,a,i){for(var s=new ZB(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;i&&(d=ppe(e,c,t,u,r)),s.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:xpe(c)})}}var f=r.getComputedStyle(n);if(s.length>0&&(a||f.display!=="none"))return s}function xpe(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function ype(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var i=a[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function uc(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),s=1;s<arguments.length;s++){var l=arguments[s];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(i[c]=l[c])}return i}function iU(e,t){var r=new h0(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();ype(a,n,t);var i=uc({},a,n,t),s;typeof window<"u"&&(s=window);var l=bpe(a,n,t),c=wpe(a,n,t),u=_pe(r,i),d=Spe(r,i,s);return{id:t.tableId,content:d,hooks:c,styles:l,settings:u}}function bpe(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=uc({},u,d,f)}else{var p=[e,t,r],h=p.map(function(g){return g[c]||{}});n[c]=uc({},h[0],h[1],h[2])}},i=0,s=Object.keys(n);i<s.length;i++){var l=s[i];a(l)}return n}function wpe(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,s=n;i<s.length;i++){var l=s[i];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function _pe(e,t){var r,n,a,i,s,l,c,u,d,f,p,h,g=Sw(t.margin,40/e.scaleFactor()),m=(r=Npe(e,t.startY))!==null&&r!==void 0?r:g.top,x;t.showFoot===!0?x="everyPage":t.showFoot===!1?x="never":x=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var v=(i=t.useCss)!==null&&i!==void 0?i:!1,b=t.theme||(v?"plain":"striped"),N=!!t.horizontalPageBreak,_=(s=t.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:v,theme:b,startY:m,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:x,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(p=t.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:N,horizontalPageBreakRepeat:_,horizontalPageBreakBehaviour:(h=t.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function Npe(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),i=!1;if(r&&r.startPageNumber){var s=r.startPageNumber+r.pageNumber-1;i=s===a}return typeof t=="number"?t:(t==null||t===!1)&&i&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function Spe(e,t,r){var n=t.head||[],a=t.body||[],i=t.foot||[];if(t.html){var s=t.includeHiddenHtml;if(r){var l=aU(e,t.html,r,s,t.useCss)||{};n=l.head||n,a=l.body||n,i=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||jpe(n,a,i);return{columns:c,head:n,body:a,foot:i}}function jpe(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var s=1,l;Array.isArray(n)?l=n[parseInt(i)]:l=n[i],typeof l=="object"&&!Array.isArray(l)&&(s=(l==null?void 0:l.colSpan)||1);for(var c=0;c<s;c++){var u=void 0;Array.isArray(n)?u=a.length:u=i+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var Bj=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),Ape=function(e){QB(t,e);function t(r,n,a,i,s,l){var c=e.call(this,r,n,l)||this;return c.cell=a,c.row=i,c.column=s,c.section=i.section,c}return t}(Bj),Epe=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,i,s){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new Ape(t,this,n,a,i,s),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var i=a[n];i(new Bj(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var i=a[n];i(new Bj(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,i){return a+i.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),sU=function(){function e(t,r,n,a,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof ZB&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var i;return Math.max(n,((i=r.cells[a.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,i){var s=n.cells[i.index];if(!s)return 0;var l=r.getLineHeight(s.styles.fontSize),c=s.padding("vertical"),u=c+l;return u>a?u:a},0)},e}(),oU=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var s=i!=null?""+i:"",l=/\r\n|\r|\n/g;this.text=s.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,i=n*a+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=Sw(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),Tpe=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var i=a[n],s=i.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(r=Math.max(r,s.styles.cellWidth))}return r},e}();function Cpe(e,t){kpe(e,t);var r=[],n=0;t.columns.forEach(function(i){var s=i.getMaxCustomCellWidth(t);s?i.width=s:(i.width=i.wrappedWidth,r.push(i)),n+=i.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=Uj(r,a,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),a&&(a=Uj(r,a,function(i){return i.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),Ppe(t),Lpe(t,e),Ope(t)}function kpe(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=rU(e,t);t.allRows().forEach(function(i){for(var s=0,l=t.columns;s<l.length;s++){var c=l[s],u=i.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,i,c,null);var f=u.padding("horizontal");u.contentWidth=Db(u.text,u.styles,e)+f;var p=Db(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=p+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var h=10/r;u.minWidth=u.styles.minCellWidth||h,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(i){for(var s=0,l=t.columns;s<l.length;s++){var c=l[s],u=i.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function Uj(e,t,r){for(var n=t,a=e.reduce(function(h,g){return h+g.wrappedWidth},0),i=0;i<e.length;i++){var s=e[i],l=s.wrappedWidth/a,c=n*l,u=s.width+c,d=r(s),f=u<d?d:u;t-=f-s.width,s.width=f}if(t=Math.round(t*1e10)/1e10,t){var p=e.filter(function(h){return t<0?h.width>r(h):!0});p.length&&(t=Uj(p,t,r))}return t}function Ope(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var i=n[a],s=0,l=e.columns;s<l.length;s++){var c=l[s],u=t[c.index];if(r>1)r--,delete i.cells[c.index];else if(u)u.cell.height+=i.height,r=u.cell.colSpan,delete i.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=i.cells[c.index];if(!d)continue;if(d.height=i.height,d.rowSpan>1){var f=n.length-a,p=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:p,row:i}}}}}function Ppe(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,i=0,s=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(s-=1,s>1&&e.columns[l+1])i+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+i}else{var u=n.cells[c.index];if(!u)continue;if(s=u.colSpan,i=0,u.colSpan>1){a=u,i+=c.width;continue}u.width=c.width+i}}}function Lpe(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var i=a[n],s=0,l=e.columns;s<l.length;s++){var c=l[s],u=i.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=_P(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=_P(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var p=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<p*u.rowSpan?r={height:p,count:u.rowSpan}:r&&r.count>0&&r.height>p&&(p=r.height),p>i.height&&(i.height=p)}}r.count--}}function _P(e,t,r,n,a){return e.map(function(i){return Rpe(i,t,r,n,a)})}function Rpe(e,t,r,n,a){var i=1e4*n.scaleFactor();if(t=Math.ceil(t*i)/i,t>=Db(e,r,n))return e;for(;t<Db(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function lU(e,t){var r=new h0(e),n=Dpe(t,r.scaleFactor()),a=new Epe(t,n);return Cpe(r,a),r.applyStyles(r.userStyles),a}function Dpe(e,t){var r=e.content,n=Mpe(r.columns);if(r.head.length===0){var a=NP(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=NP(n,"foot");a&&r.foot.push(a)}var i=e.settings.theme,s=e.styles;return{columns:n,head:mN("head",r.head,n,s,i,t),body:mN("body",r.body,n,s,i,t),foot:mN("foot",r.foot,n,s,i,t)}}function mN(e,t,r,n,a,i){var s={},l=t.map(function(c,u){for(var d=0,f={},p=0,h=0,g=0,m=r;g<m.length;g++){var x=m[g];if(s[x.index]==null||s[x.index].left===0)if(h===0){var y=void 0;Array.isArray(c)?y=c[x.index-p-d]:y=c[x.dataKey];var v={};typeof y=="object"&&!Array.isArray(y)&&(v=(y==null?void 0:y.styles)||{});var b=Fpe(e,x,u,a,n,i,v),N=new oU(y,b,e);f[x.dataKey]=N,f[x.index]=N,h=N.colSpan-1,s[x.index]={left:N.rowSpan-1,times:h}}else h--,p++;else s[x.index].left--,h=s[x.index].times,d++}return new sU(c,u,e,f)});return l}function NP(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=Ipe(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function Ipe(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function Mpe(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new Tpe(a,t,r)})}function Fpe(e,t,r,n,a,i,s){var l=hpe(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var u=uc({},l.table,l[e],a.styles,c),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},p=e==="body"&&r%2===0?uc({},l.alternateRow,a.alternateRowStyles):{},h=fpe(i),g=uc({},h,u,p,f);return uc(g,s)}function $pe(e,t,r){var n;r===void 0&&(r={});var a=rU(e,t),i=new Map,s=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(p){var h=t.columns.find(function(g){return g.dataKey===p||g.index===p});h&&!i.has(h.index)&&(i.set(h.index,!0),s.push(h.index),l.push(t.columns[h.index]),a-=h.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(i.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,s.push(d),l.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:s,columns:l,lastIndex:d-1}}function Bpe(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=$pe(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function cU(e,t){var r=t.settings,n=r.startY,a=r.margin,i={x:a.left,y:n},s=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=n+a.bottom+s;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(p,h){return p+h.height},0);l+=u}var d=new h0(e);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(dU(d),i.y=a.top),t.callWillDrawPageHooks(d,i);var f=uc({},i);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?Upe(d,t,f,i):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(p){return Tc(d,t,p,i,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(p,h){var g=h===t.body.length-1;Ib(d,t,p,g,f,i,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(p){return Tc(d,t,p,i,t.columns)})),eU(d,t,f,i),t.callEndPageHooks(d,i),t.finalY=i.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function Upe(e,t,r,n){var a=Bpe(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?hg(e,t,r,n,u.columns,!0):SP(e,t,n,u.columns),zpe(e,t,r,n,u.columns),gN(e,t,n,u.columns)});else for(var s=-1,l=a[0],c=function(){var u=s;if(l){e.applyStyles(e.userStyles);var d=l.columns;s>=0?hg(e,t,r,n,d,!0):SP(e,t,n,d),u=jP(e,t,s+1,n,d),gN(e,t,n,d)}var f=u-s;a.slice(1).forEach(function(p){e.applyStyles(e.userStyles),hg(e,t,r,n,p.columns,!0),jP(e,t,s+1,n,p.columns,f),gN(e,t,n,p.columns)}),s=u};s<t.body.length-1;)c()}function SP(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(i){return Tc(e,t,i,r,n)})}function zpe(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(i,s){var l=s===t.body.length-1;Ib(e,t,i,l,r,n,a)})}function jP(e,t,r,n,a,i){e.applyStyles(e.userStyles),i=i??t.body.length;var s=Math.min(r+i,t.body.length),l=-1;return t.body.slice(r,s).forEach(function(c,u){var d=r+u===t.body.length-1,f=uU(e,t,d,n);c.canEntireRowFit(f,a)&&(Tc(e,t,c,n,a),l=r+u)}),l}function gN(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(i){return Tc(e,t,i,r,n)})}function qpe(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),i=Math.floor((t-a)/n);return Math.max(0,i)}function Hpe(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var i=0,s=0,l=r.columns;s<l.length;s++){var c=l[s],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new oU(u.raw,u.styles,u.section);d=uc(d,u),d.text=[];var f=qpe(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var p=n.scaleFactor(),h=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(p,h),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(p,h),d.contentHeight>i&&(i=d.contentHeight),a[c.index]=d}}var g=new sU(e.raw,-1,e.section,a,!0);g.height=i;for(var m=0,x=r.columns;m<x.length;m++){var c=x[m],d=g.cells[c.index];d&&(d.height=g.height);var u=e.cells[c.index];u&&(u.height=e.height)}return g}function Wpe(e,t,r,n){var a=e.pageSize().height,i=n.settings.margin,s=i.top+i.bottom,l=a-s;t.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>l;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function Ib(e,t,r,n,a,i,s){var l=uU(e,t,n,i);if(r.canEntireRowFit(l,s))Tc(e,t,r,i,s);else if(Wpe(e,r,l,t)){var c=Hpe(r,l,t,e);Tc(e,t,r,i,s),hg(e,t,a,i,s),Ib(e,t,c,n,a,i,s)}else hg(e,t,a,i,s),Ib(e,t,r,n,a,i,s)}function Tc(e,t,r,n,a){n.x=t.settings.margin.left;for(var i=0,s=a;i<s.length;i++){var l=s[i],c=r.cells[l.index];if(!c){n.x+=l.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}Vpe(e,c,n);var d=c.getTextPos();JB(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function Vpe(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=tU(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),Gpe(e,t,r,n.lineWidth))}function Gpe(e,t,r,n){var a,i,s,l;n.top&&(a=r.x,i=r.y,s=r.x+t.width,l=r.y,n.right&&(s+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,i,s,l)),n.bottom&&(a=r.x,i=r.y+t.height,s=r.x+t.width,l=r.y+t.height,n.right&&(s+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,i,s,l)),n.left&&(a=r.x,i=r.y,s=r.x,l=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,a,i,s,l)),n.right&&(a=r.x+t.width,i=r.y,s=r.x+t.width,l=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,a,i,s,l));function c(u,d,f,p,h){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,p,h,"S")}}function uU(e,t,r,n){var a=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function hg(e,t,r,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(l){return Tc(e,t,l,n,a)}),t.callEndPageHooks(e,n);var s=t.settings.margin;eU(e,t,r,n),dU(e),t.pageNumber++,n.x=s.left,n.y=s.top,r.y=s.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return Tc(e,t,l,n,a)}),e.applyStyles(e.userStyles))}function dU(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function Kpe(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=iU(this,n),i=lU(this,a);return cU(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){JB(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return h0.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){h0.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new h0(this),i=aU(a,t,window,r,!1),s=i.head,l=i.body,c=((n=s[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var vN;function Ype(e,t){var r=iU(e,t),n=lU(e,r);cU(e,n)}try{if(typeof window<"u"&&window){var AP=window,EP=AP.jsPDF||((vN=AP.jspdf)===null||vN===void 0?void 0:vN.jsPDF);EP&&Kpe(EP)}}catch(e){console.error("Could not apply autoTable plugin",e)}const Xpe=({isOpen:e,onClose:t,staff:r,marks:n,licenses:a,permissions:i,vacations:s,incidences:l,year:c,month:u})=>{const[d,f]=D.useState(""),[p,h]=D.useState(u),[g,m]=D.useState(c),[x,y]=D.useState(!1),{data:v=[]}=sE(),b=D.useMemo(()=>r.map(P=>P.id),[r]),{data:N=[]}=Z9(b),_=D.useMemo(()=>{const P=new Map;for(const O of v)P.set(O.code,O);return P},[v]),E=D.useMemo(()=>{const P=new Map;for(const O of N)P.set(O.staff_id,O);return P},[N]),j=r.find(P=>P.rut===d),A=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];if(!e)return null;const T=async()=>{if(j){y(!0);try{const P=new Rt({orientation:"landscape",unit:"mm",format:"letter"}),O=P.internal.pageSize.getWidth(),R=P.internal.pageSize.getHeight(),I=10,z={headerBg:[240,240,240],textMain:[0,0,0],textLight:[80,80,80],border:[0,0,0],bgOff:[235,235,235],bgAlert:[50,50,50],bgWarning:[200,200,200],bgWhite:[255,255,255]};P.setFillColor(0,0,0),P.rect(0,0,O,18,"F"),P.setTextColor(255,255,255),P.setFontSize(14),P.setFont("helvetica","bold"),P.text("ASISTENCIA MENSUAL",I,10),P.setFontSize(8),P.setFont("helvetica","normal"),P.text("REPORTE OFICIAL",I,15),P.setFontSize(11),P.text(`${hfe(p).toUpperCase()} ${g}`,O-I,10,{align:"right"}),P.setFontSize(7),P.text("Ley 40 Horas",O-I,15,{align:"right"});const Y=22;P.setDrawColor(...z.border),P.setLineWidth(.2),P.rect(I,Y,O-2*I,18,"S"),P.setTextColor(...z.textMain),P.setFontSize(10),P.setFont("helvetica","bold"),P.text(j.nombre.toUpperCase(),I+4,Y+6),P.setFontSize(8),P.setFont("helvetica","normal"),P.text(`RUT: ${j.rut}`,I+120,Y+6),P.setFontSize(8),P.text("CARGO:",I+4,Y+12),P.setFont("helvetica","bold"),P.text(j.cargo.substring(0,25),I+18,Y+12),P.setFont("helvetica","normal"),P.text("TERMINAL:",I+70,Y+12),P.setFont("helvetica","bold"),P.text(j.terminal_code,I+88,Y+12),P.setFont("helvetica","normal");const ie=j.shift?_.get(j.shift.shift_type_code):null;P.text("TURNO:",I+120,Y+12),P.setFont("helvetica","bold"),P.text((ie==null?void 0:ie.name)||"Base",I+135,Y+12),P.setFont("helvetica","normal"),P.text("HORARIO:",I+180,Y+12),P.setFont("helvetica","bold"),P.text(j.horario||"N/A",I+198,Y+12);const re=ufe(g,p),X=[];let oe=[];const _e=new Date(re[0]+"T12:00:00").getDay(),k=_e===0?6:_e-1;for(let ve=0;ve<k;ve++)oe.push("");for(const ve of re)oe.push(ve),oe.length===7&&(X.push(oe),oe=[]);if(oe.length>0){for(;oe.length<7;)oe.push("");X.push(oe)}const F={noMark:new Set(l.noMarcaciones.filter(ve=>ve.rut===j.rut).map(ve=>ve.date)),noCred:new Set(l.sinCredenciales.filter(ve=>ve.rut===j.rut).map(ve=>ve.date)),dayChange:new Map(l.cambiosDia.filter(ve=>ve.rut===j.rut).map(ve=>[ve.date,ve])),auth:new Set(l.autorizaciones.filter(ve=>ve.rut===j.rut).map(ve=>ve.date))},B=[];for(const ve of X){const ge=[],Me=ve.find(Pe=>Pe!=="")||"",Fe=Me?Ej(Me):"",ee=Fe?iB(Fe):[];for(const Pe of ve){if(!Pe){ge.push("");continue}const Ie=new Date(Pe+"T12:00:00");let $e=`${Ie.getDate()}`,it="",st=!1,ut=!1,pt="";if(j.shift){const Ut=ie==null?void 0:ie.pattern_json;if(Ut){const Qt=E.get(j.id);ut=rB(Pe,j.shift.shift_type_code,j.shift.variant_code,Ut,Qt)}}else{const Ut=Ie.getDay();ut=Ut===0||Ut===6}if(!ut){const Ut=ee.includes(Pe);let Qt=j.horario||"10:00-20:00";Ut&&(Qt=gfe(Qt,!0)),pt=Qt.replace("-","-")}const Bt=F.dayChange.get(Pe),ht=a.some(Ut=>Ut.staff_id===j.id&&Pe>=Ut.start_date&&Pe<=Ut.end_date),$t=s.some(Ut=>Ut.staff_id===j.id&&Pe>=Ut.start_date&&Pe<=Ut.end_date),Jt=i.some(Ut=>Ut.staff_id===j.id&&Pe>=Ut.start_date&&Pe<=Ut.end_date),At=F.noMark.has(Pe),bt=F.noCred.has(Pe),qt=F.auth.has(Pe),gt=n.find(Ut=>Ut.staff_id===j.id&&Ut.mark_date===Pe);if(Bt)it="CAMBIO DA";else if(ht)it="LICENCIA";else if($t)it="VACACIONES";else if(Jt)it="PERMISO";else if(At)it="NO MARCACIN";else if(bt)it="SIN CREDENCIAL";else if(ut)it="LIBRE";else if(gt)gt.mark==="P"?it="PRESENTE":gt.mark==="A"&&(it="AUSENTE");else{const Ut=new Date().toISOString().split("T")[0];Pe<Ut&&(it="AUSENTE")}qt&&(it+=`
(AUTORIZADO)`),!ut&&pt&&!["LICENCIA","VACACIONES"].includes(it)&&($e+=`
${pt}`),it&&($e+=`
${it}`),ge.push($e)}B.push(ge)}Ype(P,{startY:45,head:[["LUN","MAR","MI","JUE","VIE","SB","DOM"]],body:B,theme:"grid",headStyles:{fillColor:[0,0,0],textColor:[255,255,255],fontSize:8,fontStyle:"bold",halign:"center",cellPadding:2,lineWidth:.1},styles:{fontSize:7,cellPadding:2,halign:"center",valign:"middle",minCellHeight:16,lineColor:[0,0,0],lineWidth:.1,textColor:[0,0,0],overflow:"linebreak"},columnStyles:{},didParseCell:ve=>{const ge=ve.cell.text.join(`
`).toUpperCase();ve.cell.styles.fillColor=[255,255,255],ge.includes("LIBRE")?ve.cell.styles.fillColor=z.bgOff:ge.includes("NO MARCACIN")||ge.includes("AUSENTE")?(ve.cell.styles.fillColor=z.bgAlert,ve.cell.styles.textColor=[255,255,255],ve.cell.styles.fontStyle="bold"):ge.includes("SIN CREDENCIAL")?(ve.cell.styles.fillColor=z.bgWarning,ve.cell.styles.fontStyle="bold"):ge.includes("LICENCIA")||ge.includes("VACACIONES")?ve.cell.styles.fontStyle="bold":ge.includes("PRESENTE")&&(ve.cell.styles.textColor=[0,0,0])},margin:{left:I,right:I,bottom:20}});const U=R-15;P.setDrawColor(0,0,0),P.setLineWidth(.5),P.line(I,U-5,O-I,U-5),P.setFontSize(7),P.setFont("helvetica","normal");const J=U,me=35;let K=I;const te=(ve,ge,Me)=>{ge&&(P.setFillColor(...ge),P.rect(K,J-2,3,3,"F")),P.rect(K,J-2,3,3,"S"),P.setTextColor(...Me),P.text(ve,K+5,J),K+=me};te("Da Libre",z.bgOff,z.textMain),te("No Marca/Ausente",z.bgAlert,z.textMain),te("Sin Credencial",z.bgWarning,z.textMain),te("Asistencia OK",z.bgWhite,z.textMain),P.setTextColor(80,80,80),P.text(`Generado: ${new Date().toLocaleString("es-CL")}`,O-I,J,{align:"right"});const le=`Asistencia_${j.rut.replace(/\./g,"")}_${A[p]}_${g}.pdf`;P.save(le)}catch(P){console.error("Error generating PDF:",P),alert("Error al generar el PDF")}finally{y(!1)}}};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-slate-50",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Exportar PDF Mensual"}),o.jsx("p",{className:"text-sm text-slate-500",children:"Reporte Compacto (1 Hoja)"})]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-200 rounded-lg transition-colors text-slate-500",children:o.jsx(Z,{name:"x",size:20})})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Trabajador"}),o.jsxs("select",{value:d,onChange:P=>f(P.target.value),className:"w-full px-4 py-2.5 bg-white border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-shadow",children:[o.jsx("option",{value:"",children:"-- Seleccionar Trabajador --"}),r.map(P=>o.jsx("option",{value:P.rut,children:P.nombre},P.rut))]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Mes"}),o.jsx("select",{value:p,onChange:P=>h(Number(P.target.value)),className:"w-full px-4 py-2.5 bg-white border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",children:A.map((P,O)=>o.jsx("option",{value:O,children:P},O))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ao"}),o.jsxs("select",{value:g,onChange:P=>m(Number(P.target.value)),className:"w-full px-4 py-2.5 bg-white border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:2025,children:"2025"}),o.jsx("option",{value:2026,children:"2026"}),o.jsx("option",{value:2027,children:"2027"})]})]})]}),j&&o.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-xl",children:[o.jsx("div",{className:"text-sm font-medium text-center text-gray-600 mb-2",children:"Vista Previa de Datos"}),o.jsxs("div",{className:"grid grid-cols-2 gap-y-2 text-xs",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-bold",children:"Incidencias:"})," ",l.noMarcaciones.filter(P=>P.rut===j.rut).length]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold",children:"Licencias:"})," ",a.filter(P=>P.staff_id===j.id).length]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold",children:"Marcas:"})," ",n.filter(P=>P.staff_id===j.id).length]})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t bg-slate-50",children:[o.jsx("button",{onClick:t,className:"px-5 py-2.5 text-sm font-medium text-slate-600 hover:text-slate-800 hover:bg-slate-200 rounded-lg transition-colors",children:"Cancelar"}),o.jsx("button",{onClick:T,disabled:!d||x,className:"px-5 py-2.5 text-sm font-bold text-white bg-slate-900 hover:bg-slate-800 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed shadow-lg transition-all flex items-center gap-2",children:x?o.jsxs(o.Fragment,{children:[o.jsx(Z,{name:"loader",size:18,className:"animate-spin"}),"Generando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Z,{name:"download",size:18}),"Generar PDF"]})})]})]})})},Jpe=({isOpen:e,onClose:t,staff:r,onSubmit:n,isSubmitting:a=!1})=>{const[i,s]=D.useState("");if(!e||!r)return null;const l=c=>{c.preventDefault(),i.trim()&&n(i.trim())};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 transition-opacity",onClick:t}),o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[o.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[o.jsx(Z,{name:"user-x",size:20}),o.jsx("h3",{className:"font-semibold",children:"Solicitar Desvinculacin"})]}),o.jsx("button",{onClick:t,className:"p-1 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsx(Z,{name:"x",size:20})})]}),o.jsxs("form",{onSubmit:l,className:"p-4 space-y-4",children:[o.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[o.jsx("p",{className:"font-medium text-slate-800",children:r.nombre}),o.jsxs("p",{className:"text-sm text-slate-500",children:[r.rut," | ",r.cargo," | ",r.terminal_code]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Motivo de la desvinculacin *"}),o.jsx("textarea",{value:i,onChange:c=>s(c.target.value),placeholder:"Describa detalladamente el motivo de la solicitud...",className:"w-full p-3 border rounded-lg text-sm resize-none focus:ring-2 focus:ring-brand-500 focus:border-transparent",rows:4,required:!0,disabled:a})]}),o.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg text-sm text-amber-800 flex gap-2",children:[o.jsx(Z,{name:"info",size:16,className:"shrink-0 mt-0.5"}),o.jsx("p",{children:"Esta solicitud ser enviada por correo al rea de RRHH para su evaluacin. El trabajador seguir activo hasta que se apruebe."})]}),o.jsxs("div",{className:"flex gap-2 pt-2",children:[o.jsx("button",{type:"button",onClick:t,disabled:a,className:`flex-1 py-2 rounded-lg font-medium ${pf.secondary}`,children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:!i.trim()||a,className:`flex-1 py-2 rounded-lg font-medium ${pf.danger} disabled:opacity-50`,children:a?o.jsxs(o.Fragment,{children:[o.jsx(Z,{name:"loader",size:16,className:"inline animate-spin mr-1"}),"Enviando..."]}):"Enviar solicitud"})]})]})]})})]})},Qpe=[{value:"PRINCIPAL",label:"Turno Normal"},{value:"CONTRATURNO",label:"Contraturno"}],Zpe=[{id:"1",code:"5X2_FIJO",name:"5x2 Fijo",pattern_json:{type:"fixed",description:"Lunes a Viernes trabaja, Sbado y Domingo libre",offDays:[6,0]},created_at:""},{id:"2",code:"5X2_ROTATIVO",name:"5x2 Rotativo",pattern_json:{type:"rotating",description:"Semana 1: Mircoles+Domingo libre. Semana 2: Viernes+Sbado libre",cycle:2,weeks:[{offDays:[3,0]},{offDays:[5,6]}]},created_at:""},{id:"3",code:"5X2_SUPER",name:"5x2 Super",pattern_json:{type:"rotating",description:"Semana 1: Mircoles+Domingo libre. Semana 2: Jueves+Viernes libre",cycle:2,weeks:[{offDays:[3,0]},{offDays:[4,5]}]},created_at:""},{id:"4",code:"ESPECIAL",name:"Especial (Manual)",pattern_json:{type:"manual",description:"Plantilla de 28 das definida manualmente",cycleDays:28},created_at:""}],eme=({isOpen:e,onClose:t,staff:r,onSuccess:n})=>{var A;const{data:a=[]}=sE(),{data:i}=$de((r==null?void 0:r.id)??null),{data:s}=Bde((r==null?void 0:r.id)??null),l=a.length>0?a:Zpe,c=Gde(),u=Kde(),[d,f]=D.useState("5X2_FIJO"),[p,h]=D.useState("PRINCIPAL"),[g,m]=D.useState([]),[x,y]=D.useState(null),[v,b]=D.useState(!1);if(D.useEffect(()=>{i?(f(i.shift_type_code),h(i.variant_code)):(f("5X2_FIJO"),h("PRINCIPAL")),m(s?s.off_days_json:[]),y(null),b(!1)},[i,s,r==null?void 0:r.id]),!e||!r)return null;const N=async()=>{y(null),b(!1);try{console.log("Saving shift:",{staff_id:r.id,shift_type_code:d,variant_code:p}),await c.mutateAsync({staff_id:r.id,shift_type_code:d,variant_code:p,start_date:"2026-01-01"}),d==="ESPECIAL"&&g.length>0&&await u.mutateAsync({staffId:r.id,offDays:g}),b(!0),n&&n(),setTimeout(()=>{t()},1e3)}catch(T){console.error("Error saving shift:",T);const P=T instanceof Error?T.message:"Error desconocido al guardar";y(P)}},_=T=>{m(P=>P.includes(T)?P.filter(O=>O!==T):[...P,T])},E=c.isPending||u.isPending,j=l.find(T=>T.code===d);return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gradient-to-r from-brand-600 to-brand-500 text-white rounded-t-xl",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Configurar Turno"}),o.jsx("p",{className:"text-sm text-brand-100",children:r.nombre})]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:o.jsx(Z,{name:"x",size:20})})]}),x&&o.jsxs("div",{className:"mx-4 mt-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[o.jsx(Z,{name:"alert-circle",size:18,className:"text-red-600 mt-0.5"}),o.jsx("div",{className:"text-sm text-red-700",children:x})]}),v&&o.jsxs("div",{className:"mx-4 mt-4 p-3 bg-emerald-50 border border-emerald-200 rounded-lg flex items-center gap-2",children:[o.jsx(Z,{name:"check-circle",size:18,className:"text-emerald-600"}),o.jsx("div",{className:"text-sm text-emerald-700 font-medium",children:"Turno guardado correctamente!"})]}),o.jsxs("div",{className:"p-4 space-y-6",children:[i&&o.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[o.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Turno actual asignado:"}),o.jsxs("div",{className:"font-medium text-slate-800",children:[((A=l.find(T=>T.code===i.shift_type_code))==null?void 0:A.name)||i.shift_type_code," - ",i.variant_code]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Turno"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.map(T=>{var P;return o.jsxs("button",{onClick:()=>f(T.code),className:`p-3 rounded-lg border text-left transition-all ${d===T.code?"border-brand-500 bg-brand-50 text-brand-700 ring-2 ring-brand-500/30":"border-slate-200 hover:border-slate-300 hover:bg-slate-50"}`,children:[o.jsx("div",{className:"font-medium text-sm",children:T.name}),o.jsx("div",{className:"text-xs text-slate-500 mt-1",children:((P=T.pattern_json)==null?void 0:P.description)||""})]},T.code)})})]}),(d==="5X2_ROTATIVO"||d==="5X2_SUPER")&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Variante (Semana de inicio)"}),o.jsx("div",{className:"flex gap-2",children:Qpe.map(T=>o.jsx("button",{onClick:()=>h(T.value),className:`flex-1 px-4 py-2 rounded-lg border text-sm font-medium transition-all ${p===T.value?"border-brand-500 bg-brand-50 text-brand-700 ring-2 ring-brand-500/30":"border-slate-200 hover:border-slate-300"}`,children:T.label},T.value))})]}),j&&d!=="ESPECIAL"&&o.jsx("div",{className:"p-3 bg-amber-50 rounded-lg border border-amber-200",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Z,{name:"calendar",size:16,className:"text-amber-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-amber-800",children:"Das Libres"}),o.jsx("div",{className:"text-xs text-amber-700",children:tme(j,p)})]})]})}),d==="ESPECIAL"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Das Libres (ciclo 28 das)"}),o.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Haz clic en los das que sern libres en el ciclo de 4 semanas"}),o.jsx("div",{className:"space-y-2 p-3 bg-slate-50 rounded-lg",children:[0,1,2,3].map(T=>o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs("span",{className:"text-xs text-slate-500 w-16 font-medium",children:["Sem ",T+1,":"]}),o.jsx("div",{className:"flex gap-1 flex-1",children:[0,1,2,3,4,5,6].map(P=>{const O=T*7+P,R=g.includes(O),I=["L","M","X","J","V","S","D"][P];return o.jsx("button",{onClick:()=>_(O),className:`w-9 h-9 rounded text-xs font-bold transition-all ${R?"bg-slate-700 text-white shadow-sm":"bg-emerald-100 text-emerald-700 hover:bg-emerald-200"}`,children:I},O)})})]},T))}),o.jsxs("p",{className:"text-xs text-slate-600 mt-2 font-medium",children:[g.length," das libres seleccionados por ciclo"]})]})]}),o.jsxs("div",{className:"flex justify-between items-center gap-3 p-4 border-t bg-slate-50 rounded-b-xl",children:[o.jsx("div",{className:"text-xs text-slate-500",children:"Los cambios aplican para todo el ao 2026"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:t,disabled:E,className:"px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-200 rounded-lg transition-colors",children:"Cancelar"}),o.jsxs("button",{onClick:N,disabled:E||v,className:"px-5 py-2 text-sm font-medium text-white bg-brand-600 hover:bg-brand-700 rounded-lg disabled:opacity-50 flex items-center gap-2 transition-colors shadow-sm",children:[E&&o.jsx(Z,{name:"loader",size:16,className:"animate-spin"}),v?"Guardado!":"Guardar Turno"]})]})]})]})})};function tme(e,t){const r=e.pattern_json;if(!r)return"";const n=["Domingo","Lunes","Martes","Mircoles","Jueves","Viernes","Sbado"];if(r.type==="fixed"&&r.offDays)return`Libre: ${r.offDays.map(i=>n[i]).join(" y ")} (todas las semanas)`;if(r.type==="rotating"&&r.weeks){const a=[];return r.weeks.forEach((i,s)=>{const l=t==="CONTRATURNO"?(s+1)%r.weeks.length:s,c=i.offDays.map(u=>n[u]).join(" + ");a.push(`Semana ${l+1}: ${c}`)}),a.join(" | ")}return r.description||""}const rme=[{value:"ALL",label:"Todos"},{value:"EL_ROBLE",label:"El Roble"},{value:"LA_REINA",label:"La Reina"},{value:"MARIA_ANGELICA",label:"Mara Anglica"},{value:"EL_DESCANSO",label:"El Descanso"}],nme=[{value:"TODOS",label:"Todos"},{value:"DIA",label:"Da"},{value:"NOCHE",label:"Noche"}],ame=()=>{const e=Xt(K=>K.context),t=_r(K=>K.session),r=kb(),[n,a]=D.useState(()=>Ej(r)),i=D.useMemo(()=>oE(n),[n]),s=new Date(i[3]+"T12:00:00"),l=s.getMonth(),c=s.getFullYear(),[u,d]=D.useState({month:l,year:c,terminal:"ALL",turno:"TODOS",search:""}),[f,p]=D.useState(!1),[h,g]=D.useState(null),[m,x]=D.useState(null);efe();const{data:y=[],isLoading:v}=sE(),{data:b=[],isLoading:N}=Fde(e,u),_=D.useMemo(()=>b.map(K=>K.id),[b]),{data:E=[],isLoading:j}=zde(_,c,l),{data:A=[],isLoading:T}=qde(_,c,l),{data:P=[],isLoading:O}=Hde(_,c,l),{data:R=[],isLoading:I}=Wde(_,c,l),{data:z=[],isLoading:Y}=Ude(_,c,l),{data:ie,isLoading:re}=Vde(e,c,l),{data:X=[]}=Z9(_),oe=Qde(),we=v||N||j||T||O||I||Y||re,_e=D.useMemo(()=>{const K={SUPERVISOR:0,INSPECTOR:0,CONDUCTOR:0,PLANILLERO:0,CLEANER:0};let te=0,le=0,ve=0,ge=0,Me=0,Fe=0,ee=0;const Pe=kb(),Ie=new Set;ie&&(ie.noMarcaciones.forEach(Qe=>Ie.add(Qe.rut)),ie.sinCredenciales.forEach(Qe=>Ie.add(Qe.rut)),ie.cambiosDia.forEach(Qe=>Ie.add(Qe.rut)),ie.autorizaciones.forEach(Qe=>Ie.add(Qe.rut)));for(const Qe of b){const $e=Qe.cargo.toUpperCase();$e.includes("SUPERVISOR")?K.SUPERVISOR++:$e.includes("INSPECTOR")?K.INSPECTOR++:$e.includes("CONDUCTOR")?K.CONDUCTOR++:$e.includes("PLANILLERO")?K.PLANILLERO++:K.CLEANER++,nB(Qe.horario)==="DIA"?te++:le++;const st=A.some(ht=>ht.staff_id===Qe.id&&Pe>=ht.start_date&&Pe<=ht.end_date),ut=R.some(ht=>ht.staff_id===Qe.id&&Pe>=ht.start_date&&Pe<=ht.end_date),pt=P.some(ht=>ht.staff_id===Qe.id&&Pe>=ht.start_date&&Pe<=ht.end_date);st&&ve++,ut&&ge++,pt&&Me++,Ie.has(Qe.rut)&&Fe++;const Bt=E.filter(ht=>ht.staff_id===Qe.id);for(const ht of i){if(!ffe(ht))continue;const $t=Bt.some(At=>At.mark_date===ht),Jt=A.some(At=>At.staff_id===Qe.id&&ht>=At.start_date&&ht<=At.end_date)||R.some(At=>At.staff_id===Qe.id&&ht>=At.start_date&&ht<=At.end_date)||P.some(At=>At.staff_id===Qe.id&&ht>=At.start_date&&ht<=At.end_date);if(!$t&&!Jt){ee++;break}}}return{byPosition:K,programmmedDay:te,programmedNight:le,onLicense:ve,onVacation:ge,onPermission:Me,withIncidencies:Fe,pendingMarks:ee}},[b,E,A,P,R,ie,i]),k=()=>a(pfe(n)),F=()=>a(mfe(n)),B=()=>a(Ej(r)),U=K=>{d(te=>({...te,terminal:K}))},J=()=>{var Ut,Qt,Zt,er,Ir,Pt,Nr,Ft;const K=ia.book_new(),te=a6(n),le=Ge=>{const We=new Date(Ge+"T12:00:00");return`${["Dom","Lun","Mar","Mi","Jue","Vie","Sb"][We.getDay()]} ${We.getDate()}/${We.getMonth()+1}`},ve=(Ge,We)=>{const wt=E.find(mt=>mt.staff_id===Ge.id&&mt.mark_date===We),Dt=A.some(mt=>mt.staff_id===Ge.id&&We>=mt.start_date&&We<=mt.end_date),vr=R.some(mt=>mt.staff_id===Ge.id&&We>=mt.start_date&&We<=mt.end_date),vo=P.some(mt=>mt.staff_id===Ge.id&&We>=mt.start_date&&We<=mt.end_date);if(Dt)return"LIC";if(vr)return"VAC";if(vo)return"PER";if(wt)return wt.mark;const kn=new Date(We+"T12:00:00").getDay(),Ea=Ge.shift?y.find(mt=>mt.code===Ge.shift.shift_type_code):null;let xi=kn===0||kn===6;return Ea!=null&&Ea.pattern_json&&Ea.pattern_json.type==="fixed"&&Ea.pattern_json.offDays&&(xi=Ea.pattern_json.offDays.includes(kn)),xi?"L":"-"},ge=b.map(Ge=>{const We={RUT:Ge.rut,Nombre:Ge.nombre,Cargo:Ge.cargo,Terminal:Ge.terminal_code,Horario:Ge.horario||""};for(const wt of i)We[le(wt)]=ve(Ge,wt);return We}),Me=ia.json_to_sheet(ge);Me["!cols"]=[{wch:12},{wch:30},{wch:15},{wch:12},{wch:12},...i.map(()=>({wch:10}))],ia.book_append_sheet(K,Me,"Asistencia Semanal");const Fe=((Qt=(Ut=ie==null?void 0:ie.sinCredenciales)==null?void 0:Ut.filter(Ge=>i.includes(Ge.date)))==null?void 0:Qt.map(Ge=>{const We=b.find(wt=>wt.rut===Ge.rut);return{Fecha:Ge.date,RUT:Ge.rut,Nombre:(We==null?void 0:We.nombre)||"N/A",Cargo:(We==null?void 0:We.cargo)||"N/A",Terminal:(We==null?void 0:We.terminal_code)||"N/A"}}))||[],ee=ia.json_to_sheet(Fe.length>0?Fe:[{Info:"Sin registros esta semana"}]);ia.book_append_sheet(K,ee,"Sin Credencial");const Pe=((er=(Zt=ie==null?void 0:ie.noMarcaciones)==null?void 0:Zt.filter(Ge=>i.includes(Ge.date)))==null?void 0:er.map(Ge=>{const We=b.find(wt=>wt.rut===Ge.rut);return{Fecha:Ge.date,RUT:Ge.rut,Nombre:(We==null?void 0:We.nombre)||"N/A",Cargo:(We==null?void 0:We.cargo)||"N/A",Terminal:(We==null?void 0:We.terminal_code)||"N/A"}}))||[],Ie=ia.json_to_sheet(Pe.length>0?Pe:[{Info:"Sin registros esta semana"}]);ia.book_append_sheet(K,Ie,"No Marcacin");const Qe=((Pt=(Ir=ie==null?void 0:ie.cambiosDia)==null?void 0:Ir.filter(Ge=>i.includes(Ge.date)))==null?void 0:Pt.map(Ge=>{const We=b.find(wt=>wt.rut===Ge.rut);return{Fecha:Ge.date,RUT:Ge.rut,Nombre:(We==null?void 0:We.nombre)||"N/A",Cargo:(We==null?void 0:We.cargo)||"N/A",Terminal:(We==null?void 0:We.terminal_code)||"N/A"}}))||[],$e=ia.json_to_sheet(Qe.length>0?Qe:[{Info:"Sin registros esta semana"}]);ia.book_append_sheet(K,$e,"Cambios de Da");const it=((Ft=(Nr=ie==null?void 0:ie.autorizaciones)==null?void 0:Nr.filter(Ge=>i.includes(Ge.date)))==null?void 0:Ft.map(Ge=>{const We=b.find(wt=>wt.rut===Ge.rut);return{Fecha:Ge.date,RUT:Ge.rut,Nombre:(We==null?void 0:We.nombre)||"N/A",Cargo:(We==null?void 0:We.cargo)||"N/A",Terminal:(We==null?void 0:We.terminal_code)||"N/A"}}))||[],st=ia.json_to_sheet(it.length>0?it:[{Info:"Sin registros esta semana"}]);ia.book_append_sheet(K,st,"Autorizaciones");const ut=R.filter(Ge=>i.some(We=>We>=Ge.start_date&&We<=Ge.end_date)).map(Ge=>{const We=b.find(wt=>wt.id===Ge.staff_id);return{RUT:(We==null?void 0:We.rut)||"N/A",Nombre:(We==null?void 0:We.nombre)||"N/A",Cargo:(We==null?void 0:We.cargo)||"N/A",Terminal:(We==null?void 0:We.terminal_code)||"N/A",Inicio:Ge.start_date,Fin:Ge.end_date}}),pt=ia.json_to_sheet(ut.length>0?ut:[{Info:"Sin vacaciones esta semana"}]);ia.book_append_sheet(K,pt,"Vacaciones");const Bt=A.filter(Ge=>i.some(We=>We>=Ge.start_date&&We<=Ge.end_date)).map(Ge=>{const We=b.find(wt=>wt.id===Ge.staff_id);return{RUT:(We==null?void 0:We.rut)||"N/A",Nombre:(We==null?void 0:We.nombre)||"N/A",Cargo:(We==null?void 0:We.cargo)||"N/A",Terminal:(We==null?void 0:We.terminal_code)||"N/A",Inicio:Ge.start_date,Fin:Ge.end_date,Nota:Ge.note||""}}),ht=ia.json_to_sheet(Bt.length>0?Bt:[{Info:"Sin licencias esta semana"}]);ia.book_append_sheet(K,ht,"Licencias");const $t=b.reduce((Ge,We)=>Ge+i.filter(wt=>ve(We,wt)==="P").length,0),Jt=b.reduce((Ge,We)=>Ge+i.filter(wt=>ve(We,wt)==="A").length,0),At=b.reduce((Ge,We)=>Ge+i.filter(wt=>ve(We,wt)==="-").length,0),bt=[{Concepto:"Semana",Valor:te},{Concepto:"Total Personal",Valor:b.length.toString()},{Concepto:"Marcas Presente",Valor:$t.toString()},{Concepto:"Marcas Ausente",Valor:Jt.toString()},{Concepto:"Marcas Pendientes",Valor:At.toString()},{Concepto:"Vacaciones Activas",Valor:ut.length.toString()},{Concepto:"Licencias Activas",Valor:Bt.length.toString()},{Concepto:"Sin Credencial",Valor:Fe.length.toString()},{Concepto:"No Marcacin",Valor:Pe.length.toString()},{Concepto:"Cambios de Da",Valor:Qe.length.toString()},{Concepto:"Autorizaciones",Valor:it.length.toString()}],qt=ia.json_to_sheet(bt);qt["!cols"]=[{wch:20},{wch:30}],ia.book_append_sheet(K,qt,"Resumen");const gt=`Asistencia_${te.replace(/\s/g,"_").replace(/\//g,"-")}.xlsx`;k9(K,gt)},me=async K=>{if(!(!h||!t))try{await oe.mutateAsync({values:{staff_id:h.id,staff_rut:h.rut,staff_name:h.nombre,terminal_code:h.terminal_code,reason:K},requestedBy:t.supervisorName}),await oo.sendEmail({audience:"manual",manualRecipients:["rrhh@empresa.cl"],subject:`Solicitud de Desvinculacin - ${h.nombre}`,body:`Se ha solicitado la desvinculacin del trabajador:

Nombre: ${h.nombre}
RUT: ${h.rut}
Cargo: ${h.cargo}
Terminal: ${h.terminal_code}

Motivo:
${K}

Solicitado por: ${t.supervisorName}
Fecha: ${new Date().toLocaleString("es-CL")}`,module:"asistencia"}),g(null)}catch(te){console.error("Error creating offboarding request:",te)}};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-white rounded-lg border p-4 space-y-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:k,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Semana anterior",children:o.jsx(Z,{name:"chevron-left",size:20})}),o.jsx("div",{className:"text-center min-w-[180px]",children:o.jsx("div",{className:"font-semibold text-slate-800",children:a6(n)})}),o.jsx("button",{onClick:F,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Semana siguiente",children:o.jsx(Z,{name:"chevron-right",size:20})}),o.jsx("button",{onClick:B,className:"px-3 py-1.5 text-xs font-medium bg-brand-100 text-brand-700 rounded-lg hover:bg-brand-200",children:"Hoy"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:rme.map(K=>o.jsx("button",{onClick:()=>U(K.value),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${u.terminal===K.value?tfe[K.value]:"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:K.label},K.value))})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[o.jsx("div",{className:"flex gap-1 bg-slate-100 rounded-lg p-1",children:nme.map(K=>o.jsx("button",{onClick:()=>d(te=>({...te,turno:K.value})),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${u.turno===K.value?"bg-white text-slate-800 shadow-sm":"text-slate-600 hover:text-slate-800"}`,children:K.label},K.value))}),o.jsxs("div",{className:"relative flex-1 max-w-xs",children:[o.jsx(Z,{name:"search",size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),o.jsx("input",{type:"text",value:u.search,onChange:K=>d(te=>({...te,search:K.target.value})),placeholder:"Buscar RUT o nombre...",className:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-brand-500 focus:border-transparent"})]}),o.jsxs("div",{className:"flex gap-2 ml-auto",children:[o.jsxs("button",{onClick:()=>p(!0),className:`px-3 py-2 rounded-lg text-sm font-medium flex items-center gap-1 ${pf.secondary}`,children:[o.jsx(Z,{name:"file-text",size:16}),o.jsx("span",{className:"hidden sm:inline",children:"PDF por RUT"})]}),o.jsxs("button",{onClick:J,className:`px-3 py-2 rounded-lg text-sm font-medium flex items-center gap-1 ${pf.secondary}`,children:[o.jsx(Z,{name:"download",size:16}),o.jsx("span",{className:"hidden sm:inline",children:"Exportar XLSX"})]})]})]}),o.jsx(bfe,{kpis:_e,isLoading:we})]}),o.jsx("div",{className:"bg-white rounded-lg border p-3",children:o.jsx(wfe,{})}),o.jsx(yfe,{staff:b,shiftTypes:y,marks:E,licenses:A,permissions:P,vacations:R,overrides:z,incidences:ie||{noMarcaciones:[],sinCredenciales:[],cambiosDia:[],autorizaciones:[]},specialTemplates:X,weekDates:i,isLoading:we,onRequestOffboarding:K=>g(K),onOpenShiftConfig:K=>x(K)}),o.jsx(Xpe,{isOpen:f,onClose:()=>p(!1),staff:b,marks:E,licenses:A,permissions:P,vacations:R,incidences:ie||{noMarcaciones:[],sinCredenciales:[],cambiosDia:[],autorizaciones:[]},year:c,month:l}),o.jsx(Jpe,{isOpen:h!==null,onClose:()=>g(null),staff:h,onSubmit:me,isSubmitting:oe.isPending}),o.jsx(eme,{isOpen:m!==null,onClose:()=>x(null),staff:m})]})},TP="email_notifications",ime=({isOpen:e,onClose:t})=>{const[r,n]=D.useState({to:[],cc:[]}),[a,i]=D.useState(!0),[s,l]=D.useState(!1),[c,u]=D.useState(""),[d,f]=D.useState("");D.useEffect(()=>{e&&p()},[e]);const p=async()=>{i(!0);try{const v=await rE(TP);n(v||{to:["isaac.avila@transdev.cl"],cc:[]})}catch(v){console.error("Error loading config:",v),Pi("Error","No se pudo cargar la configuracin")}finally{i(!1)}},h=async()=>{l(!0);try{await Sue(TP,r,"Configuracin de destinatarios para notificaciones"),$i("Configuracin guardada","Los correos se enviarn a los nuevos destinatarios"),t()}catch(v){console.error("Error saving config:",v),Pi("Error","No se pudo guardar la configuracin")}finally{l(!1)}},g=v=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v),m=v=>{const b=v==="to"?c:d,N=v==="to"?u:f,_=b.trim();if(_){if(!g(_)){Pi("Email invlido","Por favor ingresa un correo electrnico vlido");return}if(r[v].includes(_)){Pi("Email duplicado","Este correo ya est en la lista");return}n(E=>({...E,[v]:[...E[v],_]})),N("")}},x=(v,b)=>{n(N=>({...N,[v]:N[v].filter(_=>_!==b)}))},y=(v,b)=>{v.key==="Enter"&&(v.preventDefault(),m(b))};return e?o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),o.jsxs("div",{className:"relative w-full max-w-lg card p-6 animate-scale-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6 border-b pb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-brand-100 p-2 rounded-lg text-brand-600",children:o.jsx(Z,{name:"settings",size:24})}),o.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Configuracin de Correos"})]}),o.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600",children:o.jsx(Z,{name:"x",size:24})})]}),a?o.jsx("div",{className:"py-12 flex justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"label mb-2 flex justify-between",children:[o.jsx("span",{children:"Destinatarios Principales (Para)"}),o.jsx("span",{className:"text-xs font-normal text-slate-500",children:"Reciben el correo directamente"})]}),o.jsxs("div",{className:"flex gap-2 mb-3",children:[o.jsx("input",{type:"email",className:"input flex-1",placeholder:"ejemplo@transdev.cl",value:c,onChange:v=>u(v.target.value),onKeyDown:v=>y(v,"to")}),o.jsx("button",{type:"button",onClick:()=>m("to"),className:"btn btn-secondary px-3",disabled:!c.trim(),children:o.jsx(Z,{name:"plus",size:18})})]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 min-h-[60px] border border-slate-200 flex flex-wrap gap-2",children:[r.to.length===0&&o.jsx("span",{className:"text-sm text-slate-400 italic self-center w-full text-center",children:"Sin destinatarios"}),r.to.map(v=>o.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white border border-slate-200 rounded-full text-sm font-medium text-slate-700 shadow-sm",children:[v,o.jsx("button",{onClick:()=>x("to",v),className:"text-slate-400 hover:text-danger-500 ml-1",children:o.jsx(Z,{name:"x",size:14})})]},v))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"label mb-2 flex justify-between",children:[o.jsx("span",{children:"En Copia (CC)"}),o.jsx("span",{className:"text-xs font-normal text-slate-500",children:"Reciben una copia"})]}),o.jsxs("div",{className:"flex gap-2 mb-3",children:[o.jsx("input",{type:"email",className:"input flex-1",placeholder:"jefe@transdev.cl",value:d,onChange:v=>f(v.target.value),onKeyDown:v=>y(v,"cc")}),o.jsx("button",{type:"button",onClick:()=>m("cc"),className:"btn btn-secondary px-3",disabled:!d.trim(),children:o.jsx(Z,{name:"plus",size:18})})]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 min-h-[60px] border border-slate-200 flex flex-wrap gap-2",children:[r.cc.length===0&&o.jsx("span",{className:"text-sm text-slate-400 italic self-center w-full text-center",children:"Sin copias"}),r.cc.map(v=>o.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white border border-slate-200 rounded-full text-sm font-medium text-slate-700 shadow-sm",children:[v,o.jsx("button",{onClick:()=>x("cc",v),className:"text-slate-400 hover:text-danger-500 ml-1",children:o.jsx(Z,{name:"x",size:14})})]},v))]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t mt-4",children:[o.jsx("button",{onClick:t,className:"btn btn-secondary",disabled:s,children:"Cancelar"}),o.jsx("button",{onClick:h,className:"btn btn-primary min-w-[120px]",disabled:s,children:s?"Guardando...":"Guardar Cambios"})]})]})]})]}):null},sme=[{id:"asistencia-2026",label:"Asistencia 2026",icon:"calendar-range"},{id:"no-marcaciones",label:"No Marcaciones",icon:"clock"},{id:"sin-credenciales",label:"Sin Credenciales",icon:"key"},{id:"cambios-dia",label:"Cambios de Da",icon:"calendar"},{id:"autorizaciones",label:"Autorizaciones",icon:"check-circle"},{id:"vacaciones",label:"Vacaciones",icon:"sparkles"}],ome=()=>{const[e,t]=D.useState("asistencia-2026"),[r,n]=D.useState(!1),a=()=>{switch(e){case"asistencia-2026":return o.jsx(ame,{});case"no-marcaciones":return o.jsx(lde,{});case"sin-credenciales":return o.jsx(ude,{});case"cambios-dia":return o.jsx(fde,{});case"autorizaciones":return o.jsx(pde,{});case"vacaciones":return o.jsx(xde,{});default:return null}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 border-b border-slate-200 pb-4",children:[o.jsx("div",{className:"flex flex-wrap gap-2",children:sme.map(i=>o.jsxs("button",{onClick:()=>t(i.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${e===i.id?"bg-brand-600 text-white shadow-md":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[o.jsx(Z,{name:i.icon,size:18}),o.jsx("span",{className:"hidden sm:inline",children:i.label})]},i.id))}),o.jsxs("button",{onClick:()=>n(!0),className:"btn btn-secondary text-sm flex items-center gap-2 shrink-0",children:[o.jsx(Z,{name:"settings",size:16}),o.jsx("span",{children:"Configurar Correos"})]})]}),a(),o.jsx(ime,{isOpen:r,onClose:()=>n(!1)})]})};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lme=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cme=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),CP=e=>{const t=cme(e);return t.charAt(0).toUpperCase()+t.slice(1)},fU=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),ume=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dme={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fme=D.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:s,...l},c)=>D.createElement("svg",{ref:c,...dme,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:fU("lucide",a),...!i&&!ume(l)&&{"aria-hidden":"true"},...l},[...s.map(([u,d])=>D.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=(e,t)=>{const r=D.forwardRef(({className:n,...a},i)=>D.createElement(fme,{ref:i,iconNode:t,className:fU(`lucide-${lme(CP(e))}`,`lucide-${e}`,n),...a}));return r.displayName=CP(e),r};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hme=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],pme=wn("calendar",hme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mme=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],gme=wn("circle-alert",mme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vme=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],hU=wn("clock",vme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xme=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],ev=wn("credit-card",xme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yme=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],pU=wn("dollar-sign",yme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bme=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],wme=wn("download",bme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _me=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Nme=wn("eye",_me);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sme=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],jme=wn("file-text",Sme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ame=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Eme=wn("funnel",Ame);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tme=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],mU=wn("mail",Tme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cme=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],gU=wn("plus",Cme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kme=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Ome=wn("printer",kme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pme=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],vU=wn("rotate-ccw",Pme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lme=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Rme=wn("save",Lme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dme=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ime=wn("search",Dme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mme=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Fme=wn("send",Mme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $me=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Bme=wn("settings",$me);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ume=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],zme=wn("square-pen",Ume);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qme=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Hme=wn("trash-2",qme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wme=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Vme=wn("trending-up",Wme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gme=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],jw=wn("triangle-alert",Gme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kme=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Yme=wn("upload",Kme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xme=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Jme=wn("user",Xme);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qme=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Cc=wn("x",Qme),Ju=["El Roble","La Reina","Maria Angelica"],xU=[{value:"PERDIDA",label:"Perdida"},{value:"DETERIORO",label:"Deterioro"}],Zme=[{value:"ASIGNADA",label:"Asignada"},{value:"RECUPERADA",label:"Recuperada"},{value:"CERRADA",label:"Cerrada"},{value:"CANCELADA",label:"Cancelada"}],ege=[{value:"LIBRE",label:"Libre"},{value:"ASIGNADA",label:"Asignada"},{value:"INACTIVA",label:"Inactiva"}],Am=({title:e,value:t,subtitle:r,icon:n,colorClass:a="bg-slate-50 text-slate-600"})=>o.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:e}),o.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-1",children:t}),r&&o.jsx("p",{className:"text-xs text-slate-500 mt-1",children:r})]}),o.jsx("div",{className:`p-2 rounded-lg ${a}`,children:n})]})}),tge=({kpis:e,isLoading:t})=>{if(t)return o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:Array.from({length:5}).map((a,i)=>o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm animate-pulse",children:[o.jsx("div",{className:"h-4 bg-slate-200 rounded w-24 mb-2"}),o.jsx("div",{className:"h-8 bg-slate-200 rounded w-16"})]},i))});const r=Ju.reduce((a,i)=>a+(e.availableByTerminal[i]||0),0),n=Ju.map(a=>`${a.split(" ")[0]}: ${e.availableByTerminal[a]||0}`).join(" | ");return o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[o.jsx(Am,{title:"Disponibles",value:r,subtitle:n,icon:o.jsx(ev,{className:"w-5 h-5"}),colorClass:"bg-emerald-50 text-emerald-600"}),o.jsx(Am,{title:"Prestamos Activos",value:e.activeLoans,icon:o.jsx(hU,{className:"w-5 h-5"}),colorClass:"bg-blue-50 text-blue-600"}),o.jsx(Am,{title:"Atrasados (+7d)",value:e.overdueLoans,icon:o.jsx(jw,{className:"w-5 h-5"}),colorClass:e.overdueLoans>0?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-400"}),o.jsx(Am,{title:"Tiempo Promedio",value:`${e.avgReturnDays} dias`,subtitle:"Ultimos 30 dias",icon:o.jsx(Vme,{className:"w-5 h-5"}),colorClass:"bg-indigo-50 text-indigo-600"}),o.jsx(Am,{title:"Descuentos",value:`$${e.totalDiscounts.toLocaleString("es-CL")}`,icon:o.jsx(pU,{className:"w-5 h-5"}),colorClass:"bg-violet-50 text-violet-600"})]})};function yU(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=yU(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function cr(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=yU(e))&&(n&&(n+=" "),n+=t);return n}var rge=Array.isArray,os=rge,nge=typeof Zx=="object"&&Zx&&Zx.Object===Object&&Zx,bU=nge,age=bU,ige=typeof self=="object"&&self&&self.Object===Object&&self,sge=age||ige||Function("return this")(),Pl=sge,oge=Pl,lge=oge.Symbol,cx=lge,kP=cx,wU=Object.prototype,cge=wU.hasOwnProperty,uge=wU.toString,Em=kP?kP.toStringTag:void 0;function dge(e){var t=cge.call(e,Em),r=e[Em];try{e[Em]=void 0;var n=!0}catch{}var a=uge.call(e);return n&&(t?e[Em]=r:delete e[Em]),a}var fge=dge,hge=Object.prototype,pge=hge.toString;function mge(e){return pge.call(e)}var gge=mge,OP=cx,vge=fge,xge=gge,yge="[object Null]",bge="[object Undefined]",PP=OP?OP.toStringTag:void 0;function wge(e){return e==null?e===void 0?bge:yge:PP&&PP in Object(e)?vge(e):xge(e)}var Fc=wge;function _ge(e){return e!=null&&typeof e=="object"}var $c=_ge,Nge=Fc,Sge=$c,jge="[object Symbol]";function Age(e){return typeof e=="symbol"||Sge(e)&&Nge(e)==jge}var kp=Age,Ege=os,Tge=kp,Cge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kge=/^\w*$/;function Oge(e,t){if(Ege(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Tge(e)?!0:kge.test(e)||!Cge.test(e)||t!=null&&e in Object(t)}var hE=Oge;function Pge(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var sd=Pge;const Op=Dr(sd);var Lge=Fc,Rge=sd,Dge="[object AsyncFunction]",Ige="[object Function]",Mge="[object GeneratorFunction]",Fge="[object Proxy]";function $ge(e){if(!Rge(e))return!1;var t=Lge(e);return t==Ige||t==Mge||t==Dge||t==Fge}var pE=$ge;const Kt=Dr(pE);var Bge=Pl,Uge=Bge["__core-js_shared__"],zge=Uge,xN=zge,LP=function(){var e=/[^.]+$/.exec(xN&&xN.keys&&xN.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function qge(e){return!!LP&&LP in e}var Hge=qge,Wge=Function.prototype,Vge=Wge.toString;function Gge(e){if(e!=null){try{return Vge.call(e)}catch{}try{return e+""}catch{}}return""}var _U=Gge,Kge=pE,Yge=Hge,Xge=sd,Jge=_U,Qge=/[\\^$.*+?()[\]{}|]/g,Zge=/^\[object .+?Constructor\]$/,eve=Function.prototype,tve=Object.prototype,rve=eve.toString,nve=tve.hasOwnProperty,ave=RegExp("^"+rve.call(nve).replace(Qge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ive(e){if(!Xge(e)||Yge(e))return!1;var t=Kge(e)?ave:Zge;return t.test(Jge(e))}var sve=ive;function ove(e,t){return e==null?void 0:e[t]}var lve=ove,cve=sve,uve=lve;function dve(e,t){var r=uve(e,t);return cve(r)?r:void 0}var Yf=dve,fve=Yf,hve=fve(Object,"create"),Aw=hve,RP=Aw;function pve(){this.__data__=RP?RP(null):{},this.size=0}var mve=pve;function gve(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var vve=gve,xve=Aw,yve="__lodash_hash_undefined__",bve=Object.prototype,wve=bve.hasOwnProperty;function _ve(e){var t=this.__data__;if(xve){var r=t[e];return r===yve?void 0:r}return wve.call(t,e)?t[e]:void 0}var Nve=_ve,Sve=Aw,jve=Object.prototype,Ave=jve.hasOwnProperty;function Eve(e){var t=this.__data__;return Sve?t[e]!==void 0:Ave.call(t,e)}var Tve=Eve,Cve=Aw,kve="__lodash_hash_undefined__";function Ove(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Cve&&t===void 0?kve:t,this}var Pve=Ove,Lve=mve,Rve=vve,Dve=Nve,Ive=Tve,Mve=Pve;function Pp(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Pp.prototype.clear=Lve;Pp.prototype.delete=Rve;Pp.prototype.get=Dve;Pp.prototype.has=Ive;Pp.prototype.set=Mve;var Fve=Pp;function $ve(){this.__data__=[],this.size=0}var Bve=$ve;function Uve(e,t){return e===t||e!==e&&t!==t}var mE=Uve,zve=mE;function qve(e,t){for(var r=e.length;r--;)if(zve(e[r][0],t))return r;return-1}var Ew=qve,Hve=Ew,Wve=Array.prototype,Vve=Wve.splice;function Gve(e){var t=this.__data__,r=Hve(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Vve.call(t,r,1),--this.size,!0}var Kve=Gve,Yve=Ew;function Xve(e){var t=this.__data__,r=Yve(t,e);return r<0?void 0:t[r][1]}var Jve=Xve,Qve=Ew;function Zve(e){return Qve(this.__data__,e)>-1}var exe=Zve,txe=Ew;function rxe(e,t){var r=this.__data__,n=txe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var nxe=rxe,axe=Bve,ixe=Kve,sxe=Jve,oxe=exe,lxe=nxe;function Lp(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Lp.prototype.clear=axe;Lp.prototype.delete=ixe;Lp.prototype.get=sxe;Lp.prototype.has=oxe;Lp.prototype.set=lxe;var Tw=Lp,cxe=Yf,uxe=Pl,dxe=cxe(uxe,"Map"),gE=dxe,DP=Fve,fxe=Tw,hxe=gE;function pxe(){this.size=0,this.__data__={hash:new DP,map:new(hxe||fxe),string:new DP}}var mxe=pxe;function gxe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var vxe=gxe,xxe=vxe;function yxe(e,t){var r=e.__data__;return xxe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Cw=yxe,bxe=Cw;function wxe(e){var t=bxe(this,e).delete(e);return this.size-=t?1:0,t}var _xe=wxe,Nxe=Cw;function Sxe(e){return Nxe(this,e).get(e)}var jxe=Sxe,Axe=Cw;function Exe(e){return Axe(this,e).has(e)}var Txe=Exe,Cxe=Cw;function kxe(e,t){var r=Cxe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Oxe=kxe,Pxe=mxe,Lxe=_xe,Rxe=jxe,Dxe=Txe,Ixe=Oxe;function Rp(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Rp.prototype.clear=Pxe;Rp.prototype.delete=Lxe;Rp.prototype.get=Rxe;Rp.prototype.has=Dxe;Rp.prototype.set=Ixe;var vE=Rp,NU=vE,Mxe="Expected a function";function xE(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Mxe);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var s=e.apply(this,n);return r.cache=i.set(a,s)||i,s};return r.cache=new(xE.Cache||NU),r}xE.Cache=NU;var SU=xE;const Fxe=Dr(SU);var $xe=SU,Bxe=500;function Uxe(e){var t=$xe(e,function(n){return r.size===Bxe&&r.clear(),n}),r=t.cache;return t}var zxe=Uxe,qxe=zxe,Hxe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wxe=/\\(\\)?/g,Vxe=qxe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Hxe,function(r,n,a,i){t.push(a?i.replace(Wxe,"$1"):n||r)}),t}),Gxe=Vxe;function Kxe(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var yE=Kxe,IP=cx,Yxe=yE,Xxe=os,Jxe=kp,MP=IP?IP.prototype:void 0,FP=MP?MP.toString:void 0;function jU(e){if(typeof e=="string")return e;if(Xxe(e))return Yxe(e,jU)+"";if(Jxe(e))return FP?FP.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Qxe=jU,Zxe=Qxe;function e1e(e){return e==null?"":Zxe(e)}var AU=e1e,t1e=os,r1e=hE,n1e=Gxe,a1e=AU;function i1e(e,t){return t1e(e)?e:r1e(e,t)?[e]:n1e(a1e(e))}var EU=i1e,s1e=kp;function o1e(e){if(typeof e=="string"||s1e(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var kw=o1e,l1e=EU,c1e=kw;function u1e(e,t){t=l1e(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[c1e(t[r++])];return r&&r==n?e:void 0}var bE=u1e,d1e=bE;function f1e(e,t,r){var n=e==null?void 0:d1e(e,t);return n===void 0?r:n}var TU=f1e;const Ps=Dr(TU);function h1e(e){return e==null}var p1e=h1e;const ar=Dr(p1e);var m1e=Fc,g1e=os,v1e=$c,x1e="[object String]";function y1e(e){return typeof e=="string"||!g1e(e)&&v1e(e)&&m1e(e)==x1e}var b1e=y1e;const kf=Dr(b1e);var CU={exports:{}},Vr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wE=Symbol.for("react.element"),_E=Symbol.for("react.portal"),Ow=Symbol.for("react.fragment"),Pw=Symbol.for("react.strict_mode"),Lw=Symbol.for("react.profiler"),Rw=Symbol.for("react.provider"),Dw=Symbol.for("react.context"),w1e=Symbol.for("react.server_context"),Iw=Symbol.for("react.forward_ref"),Mw=Symbol.for("react.suspense"),Fw=Symbol.for("react.suspense_list"),$w=Symbol.for("react.memo"),Bw=Symbol.for("react.lazy"),_1e=Symbol.for("react.offscreen"),kU;kU=Symbol.for("react.module.reference");function po(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case wE:switch(e=e.type,e){case Ow:case Lw:case Pw:case Mw:case Fw:return e;default:switch(e=e&&e.$$typeof,e){case w1e:case Dw:case Iw:case Bw:case $w:case Rw:return e;default:return t}}case _E:return t}}}Vr.ContextConsumer=Dw;Vr.ContextProvider=Rw;Vr.Element=wE;Vr.ForwardRef=Iw;Vr.Fragment=Ow;Vr.Lazy=Bw;Vr.Memo=$w;Vr.Portal=_E;Vr.Profiler=Lw;Vr.StrictMode=Pw;Vr.Suspense=Mw;Vr.SuspenseList=Fw;Vr.isAsyncMode=function(){return!1};Vr.isConcurrentMode=function(){return!1};Vr.isContextConsumer=function(e){return po(e)===Dw};Vr.isContextProvider=function(e){return po(e)===Rw};Vr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===wE};Vr.isForwardRef=function(e){return po(e)===Iw};Vr.isFragment=function(e){return po(e)===Ow};Vr.isLazy=function(e){return po(e)===Bw};Vr.isMemo=function(e){return po(e)===$w};Vr.isPortal=function(e){return po(e)===_E};Vr.isProfiler=function(e){return po(e)===Lw};Vr.isStrictMode=function(e){return po(e)===Pw};Vr.isSuspense=function(e){return po(e)===Mw};Vr.isSuspenseList=function(e){return po(e)===Fw};Vr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ow||e===Lw||e===Pw||e===Mw||e===Fw||e===_1e||typeof e=="object"&&e!==null&&(e.$$typeof===Bw||e.$$typeof===$w||e.$$typeof===Rw||e.$$typeof===Dw||e.$$typeof===Iw||e.$$typeof===kU||e.getModuleId!==void 0)};Vr.typeOf=po;CU.exports=Vr;var N1e=CU.exports,S1e=Fc,j1e=$c,A1e="[object Number]";function E1e(e){return typeof e=="number"||j1e(e)&&S1e(e)==A1e}var OU=E1e;const T1e=Dr(OU);var C1e=OU;function k1e(e){return C1e(e)&&e!=+e}var O1e=k1e;const ux=Dr(O1e);var Li=function(t){return t===0?0:t>0?1:-1},Jd=function(t){return kf(t)&&t.indexOf("%")===t.length-1},rt=function(t){return T1e(t)&&!ux(t)},P1e=function(t){return ar(t)},ja=function(t){return rt(t)||kf(t)},L1e=0,Dp=function(t){var r=++L1e;return"".concat(t||"").concat(r)},Ri=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!rt(t)&&!kf(t))return n;var i;if(Jd(t)){var s=t.indexOf("%");i=r*parseFloat(t.slice(0,s))/100}else i=+t;return ux(i)&&(i=n),a&&i>r&&(i=r),i},gu=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},R1e=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},js=function(t,r){return rt(t)&&rt(r)?function(n){return t+n*(r-t)}:function(){return r}};function Mb(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Ps(n,t))===r})}var D1e=function(t,r){return rt(t)&&rt(r)?t-r:kf(t)&&kf(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function p0(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function zj(e){"@babel/helpers - typeof";return zj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zj(e)}var I1e=["viewBox","children"],M1e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],$P=["points","pathLength"],yN={svg:I1e,polygon:$P,polyline:$P},NE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Fb=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(D.isValidElement(t)&&(n=t.props),!Op(n))return null;var a={};return Object.keys(n).forEach(function(i){NE.includes(i)&&(a[i]=r||function(s){return n[i](n,s)})}),a},F1e=function(t,r,n){return function(a){return t(r,n,a),null}},Of=function(t,r,n){if(!Op(t)||zj(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var s=t[i];NE.includes(i)&&typeof s=="function"&&(a||(a={}),a[i]=F1e(s,r,n))}),a},$1e=["children"],B1e=["children"];function BP(e,t){if(e==null)return{};var r=U1e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function U1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function qj(e){"@babel/helpers - typeof";return qj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qj(e)}var UP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},xc=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},zP=null,bN=null,SE=function e(t){if(t===zP&&Array.isArray(bN))return bN;var r=[];return D.Children.forEach(t,function(n){ar(n)||(N1e.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),bN=r,zP=t,r};function Ls(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return xc(a)}):n=[xc(t)],SE(e).forEach(function(a){var i=Ps(a,"type.displayName")||Ps(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function ws(e,t){var r=Ls(e,t);return r&&r[0]}var qP=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!rt(n)||n<=0||!rt(a)||a<=0)},z1e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],q1e=function(t){return t&&t.type&&kf(t.type)&&z1e.indexOf(t.type)>=0},H1e=function(t){return t&&qj(t)==="object"&&"clipDot"in t},W1e=function(t,r,n,a){var i,s=(i=yN==null?void 0:yN[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Kt(t)&&(a&&s.includes(r)||M1e.includes(r))||n&&NE.includes(r)},zt=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(D.isValidElement(t)&&(a=t.props),!Op(a))return null;var i={};return Object.keys(a).forEach(function(s){var l;W1e((l=a)===null||l===void 0?void 0:l[s],s,r,n)&&(i[s]=a[s])}),i},Hj=function e(t,r){if(t===r)return!0;var n=D.Children.count(t);if(n!==D.Children.count(r))return!1;if(n===0)return!0;if(n===1)return HP(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],s=r[a];if(Array.isArray(i)||Array.isArray(s)){if(!e(i,s))return!1}else if(!HP(i,s))return!1}return!0},HP=function(t,r){if(ar(t)&&ar(r))return!0;if(!ar(t)&&!ar(r)){var n=t.props||{},a=n.children,i=BP(n,$1e),s=r.props||{},l=s.children,c=BP(s,B1e);return a&&l?p0(i,c)&&Hj(a,l):!a&&!l?p0(i,c):!1}return!1},WP=function(t,r){var n=[],a={};return SE(t).forEach(function(i,s){if(q1e(i))n.push(i);else if(i){var l=xc(i.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var f=u(i,l,s);n.push(f),a[l]=!0}}}),n},V1e=function(t){var r=t&&t.type;return r&&UP[r]?UP[r]:null},G1e=function(t,r){return SE(r).indexOf(t)},K1e=["children","width","height","viewBox","className","style","title","desc"];function Wj(){return Wj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wj.apply(this,arguments)}function Y1e(e,t){if(e==null)return{};var r=X1e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function X1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Vj(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,s=e.style,l=e.title,c=e.desc,u=Y1e(e,K1e),d=a||{width:r,height:n,x:0,y:0},f=cr("recharts-surface",i);return ye.createElement("svg",Wj({},zt(u,!0,"svg"),{className:f,width:r,height:n,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),ye.createElement("title",null,l),ye.createElement("desc",null,c),t)}var J1e=["children","className"];function Gj(){return Gj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gj.apply(this,arguments)}function Q1e(e,t){if(e==null)return{};var r=Z1e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Z1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Ar=ye.forwardRef(function(e,t){var r=e.children,n=e.className,a=Q1e(e,J1e),i=cr("recharts-layer",n);return ye.createElement("g",Gj({className:i},zt(a,!0),{ref:t}),r)}),Yo=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function eye(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var tye=eye,rye=tye;function nye(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:rye(e,t,r)}var aye=nye,iye="\\ud800-\\udfff",sye="\\u0300-\\u036f",oye="\\ufe20-\\ufe2f",lye="\\u20d0-\\u20ff",cye=sye+oye+lye,uye="\\ufe0e\\ufe0f",dye="\\u200d",fye=RegExp("["+dye+iye+cye+uye+"]");function hye(e){return fye.test(e)}var PU=hye;function pye(e){return e.split("")}var mye=pye,LU="\\ud800-\\udfff",gye="\\u0300-\\u036f",vye="\\ufe20-\\ufe2f",xye="\\u20d0-\\u20ff",yye=gye+vye+xye,bye="\\ufe0e\\ufe0f",wye="["+LU+"]",Kj="["+yye+"]",Yj="\\ud83c[\\udffb-\\udfff]",_ye="(?:"+Kj+"|"+Yj+")",RU="[^"+LU+"]",DU="(?:\\ud83c[\\udde6-\\uddff]){2}",IU="[\\ud800-\\udbff][\\udc00-\\udfff]",Nye="\\u200d",MU=_ye+"?",FU="["+bye+"]?",Sye="(?:"+Nye+"(?:"+[RU,DU,IU].join("|")+")"+FU+MU+")*",jye=FU+MU+Sye,Aye="(?:"+[RU+Kj+"?",Kj,DU,IU,wye].join("|")+")",Eye=RegExp(Yj+"(?="+Yj+")|"+Aye+jye,"g");function Tye(e){return e.match(Eye)||[]}var Cye=Tye,kye=mye,Oye=PU,Pye=Cye;function Lye(e){return Oye(e)?Pye(e):kye(e)}var Rye=Lye,Dye=aye,Iye=PU,Mye=Rye,Fye=AU;function $ye(e){return function(t){t=Fye(t);var r=Iye(t)?Mye(t):void 0,n=r?r[0]:t.charAt(0),a=r?Dye(r,1).join(""):t.slice(1);return n[e]()+a}}var Bye=$ye,Uye=Bye,zye=Uye("toUpperCase"),qye=zye;const Uw=Dr(qye);function an(e){return function(){return e}}const $U=Math.cos,$b=Math.sin,el=Math.sqrt,Bb=Math.PI,zw=2*Bb,Xj=Math.PI,Jj=2*Xj,Md=1e-6,Hye=Jj-Md;function BU(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Wye(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return BU;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class Vye{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?BU:Wye(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,s){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,l=this._y1,c=n-t,u=a-r,d=s-t,f=l-r,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>Md)if(!(Math.abs(f*c-u*d)>Md)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let h=n-s,g=a-l,m=c*c+u*u,x=h*h+g*g,y=Math.sqrt(m),v=Math.sqrt(p),b=i*Math.tan((Xj-Math.acos((m+p-x)/(2*y*v)))/2),N=b/v,_=b/y;Math.abs(N-1)>Md&&this._append`L${t+N*d},${r+N*f}`,this._append`A${i},${i},0,0,${+(f*h>d*g)},${this._x1=t+_*c},${this._y1=r+_*u}`}}arc(t,r,n,a,i,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^s,p=s?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Md||Math.abs(this._y1-d)>Md)&&this._append`L${u},${d}`,n&&(p<0&&(p=p%Jj+Jj),p>Hye?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:p>Md&&this._append`A${n},${n},0,${+(p>=Xj)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function jE(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Vye(t)}function AE(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function UU(e){this._context=e}UU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function qw(e){return new UU(e)}function zU(e){return e[0]}function qU(e){return e[1]}function HU(e,t){var r=an(!0),n=null,a=qw,i=null,s=jE(l);e=typeof e=="function"?e:e===void 0?zU:an(e),t=typeof t=="function"?t:t===void 0?qU:an(t);function l(c){var u,d=(c=AE(c)).length,f,p=!1,h;for(n==null&&(i=a(h=s())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(f,u,c),+t(f,u,c));if(h)return i=null,h+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:an(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:an(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:an(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function V1(e,t,r){var n=null,a=an(!0),i=null,s=qw,l=null,c=jE(u);e=typeof e=="function"?e:e===void 0?zU:an(+e),t=typeof t=="function"?t:an(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?qU:an(+r);function u(f){var p,h,g,m=(f=AE(f)).length,x,y=!1,v,b=new Array(m),N=new Array(m);for(i==null&&(l=s(v=c())),p=0;p<=m;++p){if(!(p<m&&a(x=f[p],p,f))===y)if(y=!y)h=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=p-1;g>=h;--g)l.point(b[g],N[g]);l.lineEnd(),l.areaEnd()}y&&(b[p]=+e(x,p,f),N[p]=+t(x,p,f),l.point(n?+n(x,p,f):b[p],r?+r(x,p,f):N[p]))}if(v)return l=null,v+""||null}function d(){return HU().defined(a).curve(s).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:an(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:an(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:an(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:an(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:an(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:an(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:an(!!f),u):a},u.curve=function(f){return arguments.length?(s=f,i!=null&&(l=s(i)),u):s},u.context=function(f){return arguments.length?(f==null?i=l=null:l=s(i=f),u):i},u}class WU{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Gye(e){return new WU(e,!0)}function Kye(e){return new WU(e,!1)}const EE={draw(e,t){const r=el(t/Bb);e.moveTo(r,0),e.arc(0,0,r,0,zw)}},Yye={draw(e,t){const r=el(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},VU=el(1/3),Xye=VU*2,Jye={draw(e,t){const r=el(t/Xye),n=r*VU;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Qye={draw(e,t){const r=el(t),n=-r/2;e.rect(n,n,r,r)}},Zye=.8908130915292852,GU=$b(Bb/10)/$b(7*Bb/10),ebe=$b(zw/10)*GU,tbe=-$U(zw/10)*GU,rbe={draw(e,t){const r=el(t*Zye),n=ebe*r,a=tbe*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const s=zw*i/5,l=$U(s),c=$b(s);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},wN=el(3),nbe={draw(e,t){const r=-el(t/(wN*3));e.moveTo(0,r*2),e.lineTo(-wN*r,-r),e.lineTo(wN*r,-r),e.closePath()}},Ws=-.5,Vs=el(3)/2,Qj=1/el(12),abe=(Qj/2+1)*3,ibe={draw(e,t){const r=el(t/abe),n=r/2,a=r*Qj,i=n,s=r*Qj+r,l=-i,c=s;e.moveTo(n,a),e.lineTo(i,s),e.lineTo(l,c),e.lineTo(Ws*n-Vs*a,Vs*n+Ws*a),e.lineTo(Ws*i-Vs*s,Vs*i+Ws*s),e.lineTo(Ws*l-Vs*c,Vs*l+Ws*c),e.lineTo(Ws*n+Vs*a,Ws*a-Vs*n),e.lineTo(Ws*i+Vs*s,Ws*s-Vs*i),e.lineTo(Ws*l+Vs*c,Ws*c-Vs*l),e.closePath()}};function sbe(e,t){let r=null,n=jE(a);e=typeof e=="function"?e:an(e||EE),t=typeof t=="function"?t:an(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:an(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:an(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Ub(){}function zb(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function KU(e){this._context=e}KU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:zb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:zb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function obe(e){return new KU(e)}function YU(e){this._context=e}YU.prototype={areaStart:Ub,areaEnd:Ub,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:zb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lbe(e){return new YU(e)}function XU(e){this._context=e}XU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:zb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cbe(e){return new XU(e)}function JU(e){this._context=e}JU.prototype={areaStart:Ub,areaEnd:Ub,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function ube(e){return new JU(e)}function VP(e){return e<0?-1:1}function GP(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),s=(r-e._y1)/(a||n<0&&-0),l=(i*a+s*n)/(n+a);return(VP(i)+VP(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(l))||0}function KP(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function _N(e,t,r){var n=e._x0,a=e._y0,i=e._x1,s=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,s-l*r,i,s)}function qb(e){this._context=e}qb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_N(this,this._t0,KP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,_N(this,KP(this,r=GP(this,e,t)),r);break;default:_N(this,this._t0,r=GP(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function QU(e){this._context=new ZU(e)}(QU.prototype=Object.create(qb.prototype)).point=function(e,t){qb.prototype.point.call(this,t,e)};function ZU(e){this._context=e}ZU.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function dbe(e){return new qb(e)}function fbe(e){return new QU(e)}function ez(e){this._context=e}ez.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=YP(e),a=YP(t),i=0,s=1;s<r;++i,++s)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function YP(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),s=new Array(r);for(a[0]=0,i[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,s[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,s[t]-=n*s[t-1];for(a[r-1]=s[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(s[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function hbe(e){return new ez(e)}function Hw(e,t){this._context=e,this._t=t}Hw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function pbe(e){return new Hw(e,.5)}function mbe(e){return new Hw(e,0)}function gbe(e){return new Hw(e,1)}function W0(e,t){if((s=e.length)>1)for(var r=1,n,a,i=e[t[0]],s,l=i.length;r<s;++r)for(a=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Zj(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function vbe(e,t){return e[t]}function xbe(e){const t=[];return t.key=e,t}function ybe(){var e=an([]),t=Zj,r=W0,n=vbe;function a(i){var s=Array.from(e.apply(this,arguments),xbe),l,c=s.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(s[l][u]=[0,+n(f,s[l].key,u,i)]).data=f;for(l=0,d=AE(t(s));l<c;++l)s[d[l]].index=l;return r(s,d),s}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:an(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:an(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?Zj:typeof i=="function"?i:an(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??W0,a):r},a}function bbe(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,s;a<i;++a){for(s=r=0;r<n;++r)s+=e[r][a][1]||0;if(s)for(r=0;r<n;++r)e[r][a][1]/=s}W0(e,t)}}function wbe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var s=0,l=0;s<a;++s)l+=e[s][r][1]||0;n[r][1]+=n[r][0]=-l/2}W0(e,t)}}function _be(e,t){if(!(!((s=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,s;n<i;++n){for(var l=0,c=0,u=0;l<s;++l){for(var d=e[t[l]],f=d[n][1]||0,p=d[n-1][1]||0,h=(f-p)/2,g=0;g<l;++g){var m=e[t[g]],x=m[n][1]||0,y=m[n-1][1]||0;h+=x-y}c+=f,u+=h*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,W0(e,t)}}function tv(e){"@babel/helpers - typeof";return tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tv(e)}var Nbe=["type","size","sizeType"];function eA(){return eA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eA.apply(this,arguments)}function XP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function JP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XP(Object(r),!0).forEach(function(n){Sbe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sbe(e,t,r){return t=jbe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jbe(e){var t=Abe(e,"string");return tv(t)=="symbol"?t:t+""}function Abe(e,t){if(tv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(tv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ebe(e,t){if(e==null)return{};var r=Tbe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Tbe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var tz={symbolCircle:EE,symbolCross:Yye,symbolDiamond:Jye,symbolSquare:Qye,symbolStar:rbe,symbolTriangle:nbe,symbolWye:ibe},Cbe=Math.PI/180,kbe=function(t){var r="symbol".concat(Uw(t));return tz[r]||EE},Obe=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*Cbe;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Pbe=function(t,r){tz["symbol".concat(Uw(t))]=r},TE=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,s=t.sizeType,l=s===void 0?"area":s,c=Ebe(t,Nbe),u=JP(JP({},c),{},{type:n,size:i,sizeType:l}),d=function(){var x=kbe(n),y=sbe().type(x).size(Obe(i,l,n));return y()},f=u.className,p=u.cx,h=u.cy,g=zt(u,!0);return p===+p&&h===+h&&i===+i?ye.createElement("path",eA({},g,{className:cr("recharts-symbols",f),transform:"translate(".concat(p,", ").concat(h,")"),d:d()})):null};TE.registerSymbol=Pbe;function V0(e){"@babel/helpers - typeof";return V0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V0(e)}function tA(){return tA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tA.apply(this,arguments)}function QP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Lbe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QP(Object(r),!0).forEach(function(n){rv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dbe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nz(n.key),n)}}function Ibe(e,t,r){return t&&Dbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mbe(e,t,r){return t=Hb(t),Fbe(e,rz()?Reflect.construct(t,r||[],Hb(e).constructor):t.apply(e,r))}function Fbe(e,t){if(t&&(V0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $be(e)}function $be(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rz=function(){return!!e})()}function Hb(e){return Hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hb(e)}function Bbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rA(e,t)}function rA(e,t){return rA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},rA(e,t)}function rv(e,t,r){return t=nz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nz(e){var t=Ube(e,"string");return V0(t)=="symbol"?t:t+""}function Ube(e,t){if(V0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(V0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Gs=32,CE=function(e){function t(){return Rbe(this,t),Mbe(this,t,arguments)}return Bbe(t,e),Ibe(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=Gs/2,s=Gs/6,l=Gs/3,c=n.inactive?a:n.color;if(n.type==="plainline")return ye.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Gs,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return ye.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Gs,"M").concat(2*l,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return ye.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Gs/8,"h").concat(Gs,"v").concat(Gs*3/4,"h").concat(-Gs,"z"),className:"recharts-legend-icon"});if(ye.isValidElement(n.legendIcon)){var u=Lbe({},n);return delete u.legendIcon,ye.cloneElement(n.legendIcon,u)}return ye.createElement(TE,{fill:c,cx:i,cy:i,size:Gs,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,s=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:Gs,height:Gs},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(h,g){var m=h.formatter||c,x=cr(rv(rv({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",h.inactive));if(h.type==="none")return null;var y=Kt(h.value)?null:h.value;Yo(!Kt(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var v=h.inactive?u:h.color;return ye.createElement("li",tA({className:x,style:f,key:"legend-item-".concat(g)},Of(n.props,h,g)),ye.createElement(Vj,{width:s,height:s,viewBox:d,style:p},n.renderIcon(h)),ye.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},m?m(y,h,g):y))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,s=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?s:"left"};return ye.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(D.PureComponent);rv(CE,"displayName","Legend");rv(CE,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var zbe=Tw;function qbe(){this.__data__=new zbe,this.size=0}var Hbe=qbe;function Wbe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var Vbe=Wbe;function Gbe(e){return this.__data__.get(e)}var Kbe=Gbe;function Ybe(e){return this.__data__.has(e)}var Xbe=Ybe,Jbe=Tw,Qbe=gE,Zbe=vE,e2e=200;function t2e(e,t){var r=this.__data__;if(r instanceof Jbe){var n=r.__data__;if(!Qbe||n.length<e2e-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Zbe(n)}return r.set(e,t),this.size=r.size,this}var r2e=t2e,n2e=Tw,a2e=Hbe,i2e=Vbe,s2e=Kbe,o2e=Xbe,l2e=r2e;function Ip(e){var t=this.__data__=new n2e(e);this.size=t.size}Ip.prototype.clear=a2e;Ip.prototype.delete=i2e;Ip.prototype.get=s2e;Ip.prototype.has=o2e;Ip.prototype.set=l2e;var az=Ip,c2e="__lodash_hash_undefined__";function u2e(e){return this.__data__.set(e,c2e),this}var d2e=u2e;function f2e(e){return this.__data__.has(e)}var h2e=f2e,p2e=vE,m2e=d2e,g2e=h2e;function Wb(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new p2e;++t<r;)this.add(e[t])}Wb.prototype.add=Wb.prototype.push=m2e;Wb.prototype.has=g2e;var iz=Wb;function v2e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var sz=v2e;function x2e(e,t){return e.has(t)}var oz=x2e,y2e=iz,b2e=sz,w2e=oz,_2e=1,N2e=2;function S2e(e,t,r,n,a,i){var s=r&_2e,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var f=-1,p=!0,h=r&N2e?new y2e:void 0;for(i.set(e,t),i.set(t,e);++f<l;){var g=e[f],m=t[f];if(n)var x=s?n(m,g,f,t,e,i):n(g,m,f,e,t,i);if(x!==void 0){if(x)continue;p=!1;break}if(h){if(!b2e(t,function(y,v){if(!w2e(h,v)&&(g===y||a(g,y,r,n,i)))return h.push(v)})){p=!1;break}}else if(!(g===m||a(g,m,r,n,i))){p=!1;break}}return i.delete(e),i.delete(t),p}var lz=S2e,j2e=Pl,A2e=j2e.Uint8Array,E2e=A2e;function T2e(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var C2e=T2e;function k2e(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var kE=k2e,ZP=cx,e8=E2e,O2e=mE,P2e=lz,L2e=C2e,R2e=kE,D2e=1,I2e=2,M2e="[object Boolean]",F2e="[object Date]",$2e="[object Error]",B2e="[object Map]",U2e="[object Number]",z2e="[object RegExp]",q2e="[object Set]",H2e="[object String]",W2e="[object Symbol]",V2e="[object ArrayBuffer]",G2e="[object DataView]",t8=ZP?ZP.prototype:void 0,NN=t8?t8.valueOf:void 0;function K2e(e,t,r,n,a,i,s){switch(r){case G2e:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case V2e:return!(e.byteLength!=t.byteLength||!i(new e8(e),new e8(t)));case M2e:case F2e:case U2e:return O2e(+e,+t);case $2e:return e.name==t.name&&e.message==t.message;case z2e:case H2e:return e==t+"";case B2e:var l=L2e;case q2e:var c=n&D2e;if(l||(l=R2e),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;n|=I2e,s.set(e,t);var d=P2e(l(e),l(t),n,a,i,s);return s.delete(e),d;case W2e:if(NN)return NN.call(e)==NN.call(t)}return!1}var Y2e=K2e;function X2e(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var cz=X2e,J2e=cz,Q2e=os;function Z2e(e,t,r){var n=t(e);return Q2e(e)?n:J2e(n,r(e))}var ewe=Z2e;function twe(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[a++]=s)}return i}var rwe=twe;function nwe(){return[]}var awe=nwe,iwe=rwe,swe=awe,owe=Object.prototype,lwe=owe.propertyIsEnumerable,r8=Object.getOwnPropertySymbols,cwe=r8?function(e){return e==null?[]:(e=Object(e),iwe(r8(e),function(t){return lwe.call(e,t)}))}:swe,uwe=cwe;function dwe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var fwe=dwe,hwe=Fc,pwe=$c,mwe="[object Arguments]";function gwe(e){return pwe(e)&&hwe(e)==mwe}var vwe=gwe,n8=vwe,xwe=$c,uz=Object.prototype,ywe=uz.hasOwnProperty,bwe=uz.propertyIsEnumerable,wwe=n8(function(){return arguments}())?n8:function(e){return xwe(e)&&ywe.call(e,"callee")&&!bwe.call(e,"callee")},OE=wwe,Vb={exports:{}};function _we(){return!1}var Nwe=_we;Vb.exports;(function(e,t){var r=Pl,n=Nwe,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===a,l=s?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(Vb,Vb.exports);var dz=Vb.exports,Swe=9007199254740991,jwe=/^(?:0|[1-9]\d*)$/;function Awe(e,t){var r=typeof e;return t=t??Swe,!!t&&(r=="number"||r!="symbol"&&jwe.test(e))&&e>-1&&e%1==0&&e<t}var PE=Awe,Ewe=9007199254740991;function Twe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ewe}var LE=Twe,Cwe=Fc,kwe=LE,Owe=$c,Pwe="[object Arguments]",Lwe="[object Array]",Rwe="[object Boolean]",Dwe="[object Date]",Iwe="[object Error]",Mwe="[object Function]",Fwe="[object Map]",$we="[object Number]",Bwe="[object Object]",Uwe="[object RegExp]",zwe="[object Set]",qwe="[object String]",Hwe="[object WeakMap]",Wwe="[object ArrayBuffer]",Vwe="[object DataView]",Gwe="[object Float32Array]",Kwe="[object Float64Array]",Ywe="[object Int8Array]",Xwe="[object Int16Array]",Jwe="[object Int32Array]",Qwe="[object Uint8Array]",Zwe="[object Uint8ClampedArray]",e_e="[object Uint16Array]",t_e="[object Uint32Array]",dn={};dn[Gwe]=dn[Kwe]=dn[Ywe]=dn[Xwe]=dn[Jwe]=dn[Qwe]=dn[Zwe]=dn[e_e]=dn[t_e]=!0;dn[Pwe]=dn[Lwe]=dn[Wwe]=dn[Rwe]=dn[Vwe]=dn[Dwe]=dn[Iwe]=dn[Mwe]=dn[Fwe]=dn[$we]=dn[Bwe]=dn[Uwe]=dn[zwe]=dn[qwe]=dn[Hwe]=!1;function r_e(e){return Owe(e)&&kwe(e.length)&&!!dn[Cwe(e)]}var n_e=r_e;function a_e(e){return function(t){return e(t)}}var fz=a_e,Gb={exports:{}};Gb.exports;(function(e,t){var r=bU,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,s=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();e.exports=l})(Gb,Gb.exports);var i_e=Gb.exports,s_e=n_e,o_e=fz,a8=i_e,i8=a8&&a8.isTypedArray,l_e=i8?o_e(i8):s_e,hz=l_e,c_e=fwe,u_e=OE,d_e=os,f_e=dz,h_e=PE,p_e=hz,m_e=Object.prototype,g_e=m_e.hasOwnProperty;function v_e(e,t){var r=d_e(e),n=!r&&u_e(e),a=!r&&!n&&f_e(e),i=!r&&!n&&!a&&p_e(e),s=r||n||a||i,l=s?c_e(e.length,String):[],c=l.length;for(var u in e)(t||g_e.call(e,u))&&!(s&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||h_e(u,c)))&&l.push(u);return l}var x_e=v_e,y_e=Object.prototype;function b_e(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||y_e;return e===r}var w_e=b_e;function __e(e,t){return function(r){return e(t(r))}}var pz=__e,N_e=pz,S_e=N_e(Object.keys,Object),j_e=S_e,A_e=w_e,E_e=j_e,T_e=Object.prototype,C_e=T_e.hasOwnProperty;function k_e(e){if(!A_e(e))return E_e(e);var t=[];for(var r in Object(e))C_e.call(e,r)&&r!="constructor"&&t.push(r);return t}var O_e=k_e,P_e=pE,L_e=LE;function R_e(e){return e!=null&&L_e(e.length)&&!P_e(e)}var dx=R_e,D_e=x_e,I_e=O_e,M_e=dx;function F_e(e){return M_e(e)?D_e(e):I_e(e)}var Ww=F_e,$_e=ewe,B_e=uwe,U_e=Ww;function z_e(e){return $_e(e,U_e,B_e)}var q_e=z_e,s8=q_e,H_e=1,W_e=Object.prototype,V_e=W_e.hasOwnProperty;function G_e(e,t,r,n,a,i){var s=r&H_e,l=s8(e),c=l.length,u=s8(t),d=u.length;if(c!=d&&!s)return!1;for(var f=c;f--;){var p=l[f];if(!(s?p in t:V_e.call(t,p)))return!1}var h=i.get(e),g=i.get(t);if(h&&g)return h==t&&g==e;var m=!0;i.set(e,t),i.set(t,e);for(var x=s;++f<c;){p=l[f];var y=e[p],v=t[p];if(n)var b=s?n(v,y,p,t,e,i):n(y,v,p,e,t,i);if(!(b===void 0?y===v||a(y,v,r,n,i):b)){m=!1;break}x||(x=p=="constructor")}if(m&&!x){var N=e.constructor,_=t.constructor;N!=_&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof _=="function"&&_ instanceof _)&&(m=!1)}return i.delete(e),i.delete(t),m}var K_e=G_e,Y_e=Yf,X_e=Pl,J_e=Y_e(X_e,"DataView"),Q_e=J_e,Z_e=Yf,e5e=Pl,t5e=Z_e(e5e,"Promise"),r5e=t5e,n5e=Yf,a5e=Pl,i5e=n5e(a5e,"Set"),mz=i5e,s5e=Yf,o5e=Pl,l5e=s5e(o5e,"WeakMap"),c5e=l5e,nA=Q_e,aA=gE,iA=r5e,sA=mz,oA=c5e,gz=Fc,Mp=_U,o8="[object Map]",u5e="[object Object]",l8="[object Promise]",c8="[object Set]",u8="[object WeakMap]",d8="[object DataView]",d5e=Mp(nA),f5e=Mp(aA),h5e=Mp(iA),p5e=Mp(sA),m5e=Mp(oA),Fd=gz;(nA&&Fd(new nA(new ArrayBuffer(1)))!=d8||aA&&Fd(new aA)!=o8||iA&&Fd(iA.resolve())!=l8||sA&&Fd(new sA)!=c8||oA&&Fd(new oA)!=u8)&&(Fd=function(e){var t=gz(e),r=t==u5e?e.constructor:void 0,n=r?Mp(r):"";if(n)switch(n){case d5e:return d8;case f5e:return o8;case h5e:return l8;case p5e:return c8;case m5e:return u8}return t});var g5e=Fd,SN=az,v5e=lz,x5e=Y2e,y5e=K_e,f8=g5e,h8=os,p8=dz,b5e=hz,w5e=1,m8="[object Arguments]",g8="[object Array]",G1="[object Object]",_5e=Object.prototype,v8=_5e.hasOwnProperty;function N5e(e,t,r,n,a,i){var s=h8(e),l=h8(t),c=s?g8:f8(e),u=l?g8:f8(t);c=c==m8?G1:c,u=u==m8?G1:u;var d=c==G1,f=u==G1,p=c==u;if(p&&p8(e)){if(!p8(t))return!1;s=!0,d=!1}if(p&&!d)return i||(i=new SN),s||b5e(e)?v5e(e,t,r,n,a,i):x5e(e,t,c,r,n,a,i);if(!(r&w5e)){var h=d&&v8.call(e,"__wrapped__"),g=f&&v8.call(t,"__wrapped__");if(h||g){var m=h?e.value():e,x=g?t.value():t;return i||(i=new SN),a(m,x,r,n,i)}}return p?(i||(i=new SN),y5e(e,t,r,n,a,i)):!1}var S5e=N5e,j5e=S5e,x8=$c;function vz(e,t,r,n,a){return e===t?!0:e==null||t==null||!x8(e)&&!x8(t)?e!==e&&t!==t:j5e(e,t,r,n,vz,a)}var RE=vz,A5e=az,E5e=RE,T5e=1,C5e=2;function k5e(e,t,r,n){var a=r.length,i=a,s=!n;if(e==null)return!i;for(e=Object(e);a--;){var l=r[a];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=r[a];var c=l[0],u=e[c],d=l[1];if(s&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new A5e;if(n)var p=n(u,d,c,e,t,f);if(!(p===void 0?E5e(d,u,T5e|C5e,n,f):p))return!1}}return!0}var O5e=k5e,P5e=sd;function L5e(e){return e===e&&!P5e(e)}var xz=L5e,R5e=xz,D5e=Ww;function I5e(e){for(var t=D5e(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,R5e(a)]}return t}var M5e=I5e;function F5e(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var yz=F5e,$5e=O5e,B5e=M5e,U5e=yz;function z5e(e){var t=B5e(e);return t.length==1&&t[0][2]?U5e(t[0][0],t[0][1]):function(r){return r===e||$5e(r,e,t)}}var q5e=z5e;function H5e(e,t){return e!=null&&t in Object(e)}var W5e=H5e,V5e=EU,G5e=OE,K5e=os,Y5e=PE,X5e=LE,J5e=kw;function Q5e(e,t,r){t=V5e(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var s=J5e(t[n]);if(!(i=e!=null&&r(e,s)))break;e=e[s]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&X5e(a)&&Y5e(s,a)&&(K5e(e)||G5e(e)))}var Z5e=Q5e,eNe=W5e,tNe=Z5e;function rNe(e,t){return e!=null&&tNe(e,t,eNe)}var nNe=rNe,aNe=RE,iNe=TU,sNe=nNe,oNe=hE,lNe=xz,cNe=yz,uNe=kw,dNe=1,fNe=2;function hNe(e,t){return oNe(e)&&lNe(t)?cNe(uNe(e),t):function(r){var n=iNe(r,e);return n===void 0&&n===t?sNe(r,e):aNe(t,n,dNe|fNe)}}var pNe=hNe;function mNe(e){return e}var Fp=mNe;function gNe(e){return function(t){return t==null?void 0:t[e]}}var vNe=gNe,xNe=bE;function yNe(e){return function(t){return xNe(t,e)}}var bNe=yNe,wNe=vNe,_Ne=bNe,NNe=hE,SNe=kw;function jNe(e){return NNe(e)?wNe(SNe(e)):_Ne(e)}var ANe=jNe,ENe=q5e,TNe=pNe,CNe=Fp,kNe=os,ONe=ANe;function PNe(e){return typeof e=="function"?e:e==null?CNe:typeof e=="object"?kNe(e)?TNe(e[0],e[1]):ENe(e):ONe(e)}var Ll=PNe;function LNe(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var bz=LNe;function RNe(e){return e!==e}var DNe=RNe;function INe(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var MNe=INe,FNe=bz,$Ne=DNe,BNe=MNe;function UNe(e,t,r){return t===t?BNe(e,t,r):FNe(e,$Ne,r)}var zNe=UNe,qNe=zNe;function HNe(e,t){var r=e==null?0:e.length;return!!r&&qNe(e,t,0)>-1}var WNe=HNe;function VNe(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var GNe=VNe;function KNe(){}var YNe=KNe,jN=mz,XNe=YNe,JNe=kE,QNe=1/0,ZNe=jN&&1/JNe(new jN([,-0]))[1]==QNe?function(e){return new jN(e)}:XNe,eSe=ZNe,tSe=iz,rSe=WNe,nSe=GNe,aSe=oz,iSe=eSe,sSe=kE,oSe=200;function lSe(e,t,r){var n=-1,a=rSe,i=e.length,s=!0,l=[],c=l;if(r)s=!1,a=nSe;else if(i>=oSe){var u=t?null:iSe(e);if(u)return sSe(u);s=!1,a=aSe,c=new tSe}else c=t?[]:l;e:for(;++n<i;){var d=e[n],f=t?t(d):d;if(d=r||d!==0?d:0,s&&f===f){for(var p=c.length;p--;)if(c[p]===f)continue e;t&&c.push(f),l.push(d)}else a(c,f,r)||(c!==l&&c.push(f),l.push(d))}return l}var cSe=lSe,uSe=Ll,dSe=cSe;function fSe(e,t){return e&&e.length?dSe(e,uSe(t)):[]}var hSe=fSe;const y8=Dr(hSe);function wz(e,t,r){return t===!0?y8(e,r):Kt(t)?y8(e,t):e}function G0(e){"@babel/helpers - typeof";return G0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G0(e)}var pSe=["ref"];function b8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ql(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b8(Object(r),!0).forEach(function(n){Vw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Nz(n.key),n)}}function gSe(e,t,r){return t&&w8(e.prototype,t),r&&w8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vSe(e,t,r){return t=Kb(t),xSe(e,_z()?Reflect.construct(t,r||[],Kb(e).constructor):t.apply(e,r))}function xSe(e,t){if(t&&(G0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ySe(e)}function ySe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_z=function(){return!!e})()}function Kb(e){return Kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kb(e)}function bSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lA(e,t)}function lA(e,t){return lA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},lA(e,t)}function Vw(e,t,r){return t=Nz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nz(e){var t=wSe(e,"string");return G0(t)=="symbol"?t:t+""}function wSe(e,t){if(G0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(G0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _Se(e,t){if(e==null)return{};var r=NSe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function NSe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function SSe(e){return e.value}function jSe(e,t){if(ye.isValidElement(e))return ye.cloneElement(e,t);if(typeof e=="function")return ye.createElement(e,t);t.ref;var r=_Se(t,pSe);return ye.createElement(CE,r)}var _8=1,Nl=function(e){function t(){var r;mSe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=vSe(this,t,[].concat(a)),Vw(r,"lastBoundingBox",{width:-1,height:-1}),r}return bSe(t,e),gSe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>_8||Math.abs(a.height-this.lastBoundingBox.height)>_8)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ql({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,s=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,p;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(s==="center"&&i==="vertical"){var h=this.getBBoxSnapshot();f={left:((u||0)-h.width)/2}}else f=s==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();p={top:((d||0)-g.height)/2}}else p=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Ql(Ql({},f),p)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,s=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=Ql(Ql({position:"absolute",width:s||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return ye.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(h){n.wrapperNode=h}},jSe(i,Ql(Ql({},this.props),{},{payload:wz(d,u,SSe)})))}}],[{key:"getWithHeight",value:function(n,a){var i=Ql(Ql({},this.defaultProps),n.props),s=i.layout;return s==="vertical"&&rt(n.props.height)?{height:n.props.height}:s==="horizontal"?{width:n.props.width||a}:null}}])}(D.PureComponent);Vw(Nl,"displayName","Legend");Vw(Nl,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var N8=cx,ASe=OE,ESe=os,S8=N8?N8.isConcatSpreadable:void 0;function TSe(e){return ESe(e)||ASe(e)||!!(S8&&e&&e[S8])}var CSe=TSe,kSe=cz,OSe=CSe;function Sz(e,t,r,n,a){var i=-1,s=e.length;for(r||(r=OSe),a||(a=[]);++i<s;){var l=e[i];t>0&&r(l)?t>1?Sz(l,t-1,r,n,a):kSe(a,l):n||(a[a.length]=l)}return a}var jz=Sz;function PSe(e){return function(t,r,n){for(var a=-1,i=Object(t),s=n(t),l=s.length;l--;){var c=s[e?l:++a];if(r(i[c],c,i)===!1)break}return t}}var LSe=PSe,RSe=LSe,DSe=RSe(),ISe=DSe,MSe=ISe,FSe=Ww;function $Se(e,t){return e&&MSe(e,t,FSe)}var Az=$Se,BSe=dx;function USe(e,t){return function(r,n){if(r==null)return r;if(!BSe(r))return e(r,n);for(var a=r.length,i=t?a:-1,s=Object(r);(t?i--:++i<a)&&n(s[i],i,s)!==!1;);return r}}var zSe=USe,qSe=Az,HSe=zSe,WSe=HSe(qSe),DE=WSe,VSe=DE,GSe=dx;function KSe(e,t){var r=-1,n=GSe(e)?Array(e.length):[];return VSe(e,function(a,i,s){n[++r]=t(a,i,s)}),n}var Ez=KSe;function YSe(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var XSe=YSe,j8=kp;function JSe(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=j8(e),s=t!==void 0,l=t===null,c=t===t,u=j8(t);if(!l&&!u&&!i&&e>t||i&&s&&c&&!l&&!u||n&&s&&c||!r&&c||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||l&&r&&a||!s&&a||!c)return-1}return 0}var QSe=JSe,ZSe=QSe;function eje(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,s=a.length,l=r.length;++n<s;){var c=ZSe(a[n],i[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var tje=eje,AN=yE,rje=bE,nje=Ll,aje=Ez,ije=XSe,sje=fz,oje=tje,lje=Fp,cje=os;function uje(e,t,r){t.length?t=AN(t,function(i){return cje(i)?function(s){return rje(s,i.length===1?i[0]:i)}:i}):t=[lje];var n=-1;t=AN(t,sje(nje));var a=aje(e,function(i,s,l){var c=AN(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return ije(a,function(i,s){return oje(i,s,r)})}var dje=uje;function fje(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var hje=fje,pje=hje,A8=Math.max;function mje(e,t,r){return t=A8(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=A8(n.length-t,0),s=Array(i);++a<i;)s[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(s),pje(e,this,l)}}var gje=mje;function vje(e){return function(){return e}}var xje=vje,yje=Yf,bje=function(){try{var e=yje(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Tz=bje,wje=xje,E8=Tz,_je=Fp,Nje=E8?function(e,t){return E8(e,"toString",{configurable:!0,enumerable:!1,value:wje(t),writable:!0})}:_je,Sje=Nje,jje=800,Aje=16,Eje=Date.now;function Tje(e){var t=0,r=0;return function(){var n=Eje(),a=Aje-(n-r);if(r=n,a>0){if(++t>=jje)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Cje=Tje,kje=Sje,Oje=Cje,Pje=Oje(kje),Lje=Pje,Rje=Fp,Dje=gje,Ije=Lje;function Mje(e,t){return Ije(Dje(e,t,Rje),e+"")}var Fje=Mje,$je=mE,Bje=dx,Uje=PE,zje=sd;function qje(e,t,r){if(!zje(r))return!1;var n=typeof t;return(n=="number"?Bje(r)&&Uje(t,r.length):n=="string"&&t in r)?$je(r[t],e):!1}var Gw=qje,Hje=jz,Wje=dje,Vje=Fje,T8=Gw,Gje=Vje(function(e,t){if(e==null)return[];var r=t.length;return r>1&&T8(e,t[0],t[1])?t=[]:r>2&&T8(t[0],t[1],t[2])&&(t=[t[0]]),Wje(e,Hje(t,1),[])}),Kje=Gje;const IE=Dr(Kje);function nv(e){"@babel/helpers - typeof";return nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nv(e)}function cA(){return cA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cA.apply(this,arguments)}function Yje(e,t){return Zje(e)||Qje(e,t)||Jje(e,t)||Xje()}function Xje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jje(e,t){if(e){if(typeof e=="string")return C8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C8(e,t)}}function C8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qje(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function Zje(e){if(Array.isArray(e))return e}function k8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function EN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k8(Object(r),!0).forEach(function(n){eAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eAe(e,t,r){return t=tAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tAe(e){var t=rAe(e,"string");return nv(t)=="symbol"?t:t+""}function rAe(e,t){if(nv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(nv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nAe(e){return Array.isArray(e)&&ja(e[0])&&ja(e[1])?e.join(" ~ "):e}var aAe=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,s=t.itemStyle,l=s===void 0?{}:s,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,p=t.itemSorter,h=t.wrapperClassName,g=t.labelClassName,m=t.label,x=t.labelFormatter,y=t.accessibilityLayer,v=y===void 0?!1:y,b=function(){if(d&&d.length){var R={padding:0,margin:0},I=(p?IE(d,p):d).map(function(z,Y){if(z.type==="none")return null;var ie=EN({display:"block",paddingTop:4,paddingBottom:4,color:z.color||"#000"},l),re=z.formatter||f||nAe,X=z.value,oe=z.name,we=X,_e=oe;if(re&&we!=null&&_e!=null){var k=re(X,oe,z,Y,d);if(Array.isArray(k)){var F=Yje(k,2);we=F[0],_e=F[1]}else we=k}return ye.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Y),style:ie},ja(_e)?ye.createElement("span",{className:"recharts-tooltip-item-name"},_e):null,ja(_e)?ye.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,ye.createElement("span",{className:"recharts-tooltip-item-value"},we),ye.createElement("span",{className:"recharts-tooltip-item-unit"},z.unit||""))});return ye.createElement("ul",{className:"recharts-tooltip-item-list",style:R},I)}return null},N=EN({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),_=EN({margin:0},u),E=!ar(m),j=E?m:"",A=cr("recharts-default-tooltip",h),T=cr("recharts-tooltip-label",g);E&&x&&d!==void 0&&d!==null&&(j=x(m,d));var P=v?{role:"status","aria-live":"assertive"}:{};return ye.createElement("div",cA({className:A,style:N},P),ye.createElement("p",{className:T,style:_},ye.isValidElement(j)?j:"".concat(j)),b())};function av(e){"@babel/helpers - typeof";return av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},av(e)}function K1(e,t,r){return t=iAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iAe(e){var t=sAe(e,"string");return av(t)=="symbol"?t:t+""}function sAe(e,t){if(av(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(av(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tm="recharts-tooltip-wrapper",oAe={visibility:"hidden"};function lAe(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return cr(Tm,K1(K1(K1(K1({},"".concat(Tm,"-right"),rt(r)&&t&&rt(t.x)&&r>=t.x),"".concat(Tm,"-left"),rt(r)&&t&&rt(t.x)&&r<t.x),"".concat(Tm,"-bottom"),rt(n)&&t&&rt(t.y)&&n>=t.y),"".concat(Tm,"-top"),rt(n)&&t&&rt(t.y)&&n<t.y))}function O8(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,s=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&rt(i[n]))return i[n];var d=r[n]-l-a,f=r[n]+a;if(t[n])return s[n]?d:f;if(s[n]){var p=d,h=c[n];return p<h?Math.max(f,c[n]):Math.max(d,c[n])}var g=f+l,m=c[n]+u;return g>m?Math.max(d,c[n]):Math.max(f,c[n])}function cAe(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function uAe(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,s=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return s.height>0&&s.width>0&&r?(d=O8({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),f=O8({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=cAe({translateX:d,translateY:f,useTranslate3d:l})):u=oAe,{cssProperties:u,cssClasses:lAe({translateX:d,translateY:f,coordinate:r})}}function K0(e){"@babel/helpers - typeof";return K0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K0(e)}function P8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function L8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P8(Object(r),!0).forEach(function(n){dA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fAe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kz(n.key),n)}}function hAe(e,t,r){return t&&fAe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pAe(e,t,r){return t=Yb(t),mAe(e,Cz()?Reflect.construct(t,r||[],Yb(e).constructor):t.apply(e,r))}function mAe(e,t){if(t&&(K0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gAe(e)}function gAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cz=function(){return!!e})()}function Yb(e){return Yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yb(e)}function vAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uA(e,t)}function uA(e,t){return uA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},uA(e,t)}function dA(e,t,r){return t=kz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kz(e){var t=xAe(e,"string");return K0(t)=="symbol"?t:t+""}function xAe(e,t){if(K0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(K0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var R8=1,yAe=function(e){function t(){var r;dAe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=pAe(this,t,[].concat(a)),dA(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),dA(r,"handleKeyDown",function(s){if(s.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return vAe(t,e),hAe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>R8||Math.abs(n.height-this.state.lastBoundingBox.height)>R8)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,p=a.isAnimationActive,h=a.offset,g=a.position,m=a.reverseDirection,x=a.useTranslate3d,y=a.viewBox,v=a.wrapperStyle,b=uAe({allowEscapeViewBox:s,coordinate:d,offsetTopLeft:h,position:g,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:y}),N=b.cssClasses,_=b.cssProperties,E=L8(L8({transition:p&&i?"transform ".concat(l,"ms ").concat(c):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},v);return ye.createElement("div",{tabIndex:-1,className:N,style:E,ref:function(A){n.wrapperNode=A}},u)}}])}(D.PureComponent),bAe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Xf={isSsr:bAe()};function Y0(e){"@babel/helpers - typeof";return Y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y0(e)}function D8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function I8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D8(Object(r),!0).forEach(function(n){ME(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _Ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Pz(n.key),n)}}function NAe(e,t,r){return t&&_Ae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function SAe(e,t,r){return t=Xb(t),jAe(e,Oz()?Reflect.construct(t,r||[],Xb(e).constructor):t.apply(e,r))}function jAe(e,t){if(t&&(Y0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AAe(e)}function AAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Oz=function(){return!!e})()}function Xb(e){return Xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xb(e)}function EAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fA(e,t)}function fA(e,t){return fA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},fA(e,t)}function ME(e,t,r){return t=Pz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pz(e){var t=TAe(e,"string");return Y0(t)=="symbol"?t:t+""}function TAe(e,t){if(Y0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Y0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function CAe(e){return e.dataKey}function kAe(e,t){return ye.isValidElement(e)?ye.cloneElement(e,t):typeof e=="function"?ye.createElement(e,t):ye.createElement(aAe,t)}var Vn=function(e){function t(){return wAe(this,t),SAe(this,t,arguments)}return EAe(t,e),NAe(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,p=a.isAnimationActive,h=a.offset,g=a.payload,m=a.payloadUniqBy,x=a.position,y=a.reverseDirection,v=a.useTranslate3d,b=a.viewBox,N=a.wrapperStyle,_=g??[];f&&_.length&&(_=wz(g.filter(function(j){return j.value!=null&&(j.hide!==!0||n.props.includeHidden)}),m,CAe));var E=_.length>0;return ye.createElement(yAe,{allowEscapeViewBox:s,animationDuration:l,animationEasing:c,isAnimationActive:p,active:i,coordinate:d,hasPayload:E,offset:h,position:x,reverseDirection:y,useTranslate3d:v,viewBox:b,wrapperStyle:N},kAe(u,I8(I8({},this.props),{},{payload:_})))}}])}(D.PureComponent);ME(Vn,"displayName","Tooltip");ME(Vn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Xf.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var OAe=Pl,PAe=function(){return OAe.Date.now()},LAe=PAe,RAe=/\s/;function DAe(e){for(var t=e.length;t--&&RAe.test(e.charAt(t)););return t}var IAe=DAe,MAe=IAe,FAe=/^\s+/;function $Ae(e){return e&&e.slice(0,MAe(e)+1).replace(FAe,"")}var BAe=$Ae,UAe=BAe,M8=sd,zAe=kp,F8=NaN,qAe=/^[-+]0x[0-9a-f]+$/i,HAe=/^0b[01]+$/i,WAe=/^0o[0-7]+$/i,VAe=parseInt;function GAe(e){if(typeof e=="number")return e;if(zAe(e))return F8;if(M8(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=M8(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=UAe(e);var r=HAe.test(e);return r||WAe.test(e)?VAe(e.slice(2),r?2:8):qAe.test(e)?F8:+e}var Lz=GAe,KAe=sd,TN=LAe,$8=Lz,YAe="Expected a function",XAe=Math.max,JAe=Math.min;function QAe(e,t,r){var n,a,i,s,l,c,u=0,d=!1,f=!1,p=!0;if(typeof e!="function")throw new TypeError(YAe);t=$8(t)||0,KAe(r)&&(d=!!r.leading,f="maxWait"in r,i=f?XAe($8(r.maxWait)||0,t):i,p="trailing"in r?!!r.trailing:p);function h(E){var j=n,A=a;return n=a=void 0,u=E,s=e.apply(A,j),s}function g(E){return u=E,l=setTimeout(y,t),d?h(E):s}function m(E){var j=E-c,A=E-u,T=t-j;return f?JAe(T,i-A):T}function x(E){var j=E-c,A=E-u;return c===void 0||j>=t||j<0||f&&A>=i}function y(){var E=TN();if(x(E))return v(E);l=setTimeout(y,m(E))}function v(E){return l=void 0,p&&n?h(E):(n=a=void 0,s)}function b(){l!==void 0&&clearTimeout(l),u=0,n=c=a=l=void 0}function N(){return l===void 0?s:v(TN())}function _(){var E=TN(),j=x(E);if(n=arguments,a=this,c=E,j){if(l===void 0)return g(c);if(f)return clearTimeout(l),l=setTimeout(y,t),h(c)}return l===void 0&&(l=setTimeout(y,t)),s}return _.cancel=b,_.flush=N,_}var ZAe=QAe,e4e=ZAe,t4e=sd,r4e="Expected a function";function n4e(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(r4e);return t4e(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),e4e(e,t,{leading:n,maxWait:t,trailing:a})}var a4e=n4e;const Rz=Dr(a4e);function iv(e){"@babel/helpers - typeof";return iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iv(e)}function B8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Y1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B8(Object(r),!0).forEach(function(n){i4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i4e(e,t,r){return t=s4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s4e(e){var t=o4e(e,"string");return iv(t)=="symbol"?t:t+""}function o4e(e,t){if(iv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(iv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function l4e(e,t){return f4e(e)||d4e(e,t)||u4e(e,t)||c4e()}function c4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u4e(e,t){if(e){if(typeof e=="string")return U8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U8(e,t)}}function U8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d4e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function f4e(e){if(Array.isArray(e))return e}var ao=D.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,s=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,p=e.maxHeight,h=e.children,g=e.debounce,m=g===void 0?0:g,x=e.id,y=e.className,v=e.onResize,b=e.style,N=b===void 0?{}:b,_=D.useRef(null),E=D.useRef();E.current=v,D.useImperativeHandle(t,function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})});var j=D.useState({containerWidth:a.width,containerHeight:a.height}),A=l4e(j,2),T=A[0],P=A[1],O=D.useCallback(function(I,z){P(function(Y){var ie=Math.round(I),re=Math.round(z);return Y.containerWidth===ie&&Y.containerHeight===re?Y:{containerWidth:ie,containerHeight:re}})},[]);D.useEffect(function(){var I=function(oe){var we,_e=oe[0].contentRect,k=_e.width,F=_e.height;O(k,F),(we=E.current)===null||we===void 0||we.call(E,k,F)};m>0&&(I=Rz(I,m,{trailing:!0,leading:!1}));var z=new ResizeObserver(I),Y=_.current.getBoundingClientRect(),ie=Y.width,re=Y.height;return O(ie,re),z.observe(_.current),function(){z.disconnect()}},[O,m]);var R=D.useMemo(function(){var I=T.containerWidth,z=T.containerHeight;if(I<0||z<0)return null;Yo(Jd(s)||Jd(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,c),Yo(!r||r>0,"The aspect(%s) must be greater than zero.",r);var Y=Jd(s)?I:s,ie=Jd(c)?z:c;r&&r>0&&(Y?ie=Y/r:ie&&(Y=ie*r),p&&ie>p&&(ie=p)),Yo(Y>0||ie>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Y,ie,s,c,d,f,r);var re=!Array.isArray(h)&&xc(h.type).endsWith("Chart");return ye.Children.map(h,function(X){return ye.isValidElement(X)?D.cloneElement(X,Y1({width:Y,height:ie},re?{style:Y1({height:"100%",width:"100%",maxHeight:ie,maxWidth:Y},X.props.style)}:{})):X})},[r,h,c,p,f,d,T,s]);return ye.createElement("div",{id:x?"".concat(x):void 0,className:cr("recharts-responsive-container",y),style:Y1(Y1({},N),{},{width:s,height:c,minWidth:d,minHeight:f,maxHeight:p}),ref:_},R)}),Rl=function(t){return null};Rl.displayName="Cell";function sv(e){"@babel/helpers - typeof";return sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sv(e)}function z8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z8(Object(r),!0).forEach(function(n){h4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function h4e(e,t,r){return t=p4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p4e(e){var t=m4e(e,"string");return sv(t)=="symbol"?t:t+""}function m4e(e,t){if(sv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wh={widthCache:{},cacheCount:0},g4e=2e3,v4e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},q8="recharts_measurement_span";function x4e(e){var t=hA({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var pg=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Xf.isSsr)return{width:0,height:0};var n=x4e(r),a=JSON.stringify({text:t,copyStyle:n});if(wh.widthCache[a])return wh.widthCache[a];try{var i=document.getElementById(q8);i||(i=document.createElement("span"),i.setAttribute("id",q8),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var s=hA(hA({},v4e),n);Object.assign(i.style,s),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return wh.widthCache[a]=c,++wh.cacheCount>g4e&&(wh.cacheCount=0,wh.widthCache={}),c}catch{return{width:0,height:0}}},y4e=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function ov(e){"@babel/helpers - typeof";return ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ov(e)}function Jb(e,t){return N4e(e)||_4e(e,t)||w4e(e,t)||b4e()}function b4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w4e(e,t){if(e){if(typeof e=="string")return H8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H8(e,t)}}function H8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _4e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function N4e(e){if(Array.isArray(e))return e}function S4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A4e(n.key),n)}}function j4e(e,t,r){return t&&W8(e.prototype,t),r&&W8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function A4e(e){var t=E4e(e,"string");return ov(t)=="symbol"?t:t+""}function E4e(e,t){if(ov(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ov(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var V8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,G8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,T4e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,C4e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Dz={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},k4e=Object.keys(Dz),Wh="NaN";function O4e(e,t){return e*Dz[t]}var X1=function(){function e(t,r){S4e(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!T4e.test(r)&&(this.num=NaN,this.unit=""),k4e.includes(r)&&(this.num=O4e(t,r),this.unit="px")}return j4e(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=C4e.exec(r))!==null&&n!==void 0?n:[],i=Jb(a,3),s=i[1],l=i[2];return new e(parseFloat(s),l??"")}}])}();function Iz(e){if(e.includes(Wh))return Wh;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=V8.exec(t))!==null&&r!==void 0?r:[],a=Jb(n,4),i=a[1],s=a[2],l=a[3],c=X1.parse(i??""),u=X1.parse(l??""),d=s==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Wh;t=t.replace(V8,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,p=(f=G8.exec(t))!==null&&f!==void 0?f:[],h=Jb(p,4),g=h[1],m=h[2],x=h[3],y=X1.parse(g??""),v=X1.parse(x??""),b=m==="+"?y.add(v):y.subtract(v);if(b.isNaN())return Wh;t=t.replace(G8,b.toString())}return t}var K8=/\(([^()]*)\)/;function P4e(e){for(var t=e;t.includes("(");){var r=K8.exec(t),n=Jb(r,2),a=n[1];t=t.replace(K8,Iz(a))}return t}function L4e(e){var t=e.replace(/\s+/g,"");return t=P4e(t),t=Iz(t),t}function R4e(e){try{return L4e(e)}catch{return Wh}}function CN(e){var t=R4e(e.slice(5,-1));return t===Wh?"":t}var D4e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],I4e=["dx","dy","angle","className","breakAll"];function pA(){return pA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pA.apply(this,arguments)}function Y8(e,t){if(e==null)return{};var r=M4e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function M4e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function X8(e,t){return U4e(e)||B4e(e,t)||$4e(e,t)||F4e()}function F4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $4e(e,t){if(e){if(typeof e=="string")return J8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J8(e,t)}}function J8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function B4e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function U4e(e){if(Array.isArray(e))return e}var Mz=/[ \f\n\r\t\v\u2028\u2029]+/,Fz=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];ar(r)||(n?i=r.toString().split(""):i=r.toString().split(Mz));var s=i.map(function(c){return{word:c,width:pg(c,a).width}}),l=n?0:pg("",a).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},z4e=function(t,r,n,a,i){var s=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=rt(s),f=l,p=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y.reduce(function(ie,re){var X=re.word,oe=re.width,we=ie[ie.length-1];if(we&&(a==null||i||we.width+oe+n<Number(a)))we.words.push(X),we.width+=oe+n;else{var _e={words:[X],width:oe};ie.push(_e)}return ie},[])},h=p(r),g=function(Y){return Y.reduce(function(ie,re){return ie.width>re.width?ie:re})};if(!d)return h;for(var m="",x=function(Y){var ie=f.slice(0,Y),re=Fz({breakAll:u,style:c,children:ie+m}).wordsWithComputedWidth,X=p(re),oe=X.length>s||g(X).width>Number(a);return[oe,X]},y=0,v=f.length-1,b=0,N;y<=v&&b<=f.length-1;){var _=Math.floor((y+v)/2),E=_-1,j=x(E),A=X8(j,2),T=A[0],P=A[1],O=x(_),R=X8(O,1),I=R[0];if(!T&&!I&&(y=_+1),T&&I&&(v=_-1),!T&&I){N=P;break}b++}return N||h},Q8=function(t){var r=ar(t)?[]:t.toString().split(Mz);return[{words:r}]},q4e=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,s=t.breakAll,l=t.maxLines;if((r||n)&&!Xf.isSsr){var c,u,d=Fz({breakAll:s,children:a,style:i});if(d){var f=d.wordsWithComputedWidth,p=d.spaceWidth;c=f,u=p}else return Q8(a);return z4e({breakAll:s,children:a,maxLines:l,style:i},c,u,r,n)}return Q8(a)},Z8="#808080",Pf=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,s=t.lineHeight,l=s===void 0?"1em":s,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,p=t.textAnchor,h=p===void 0?"start":p,g=t.verticalAnchor,m=g===void 0?"end":g,x=t.fill,y=x===void 0?Z8:x,v=Y8(t,D4e),b=D.useMemo(function(){return q4e({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:f,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,f,v.style,v.width]),N=v.dx,_=v.dy,E=v.angle,j=v.className,A=v.breakAll,T=Y8(v,I4e);if(!ja(n)||!ja(i))return null;var P=n+(rt(N)?N:0),O=i+(rt(_)?_:0),R;switch(m){case"start":R=CN("calc(".concat(u,")"));break;case"middle":R=CN("calc(".concat((b.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:R=CN("calc(".concat(b.length-1," * -").concat(l,")"));break}var I=[];if(f){var z=b[0].width,Y=v.width;I.push("scale(".concat((rt(Y)?Y/z:1)/z,")"))}return E&&I.push("rotate(".concat(E,", ").concat(P,", ").concat(O,")")),I.length&&(T.transform=I.join(" ")),ye.createElement("text",pA({},zt(T,!0),{x:P,y:O,className:cr("recharts-text",j),textAnchor:h,fill:y.includes("url")?Z8:y}),b.map(function(ie,re){var X=ie.words.join(A?"":" ");return ye.createElement("tspan",{x:P,dy:re===0?R:l,key:"".concat(X,"-").concat(re)},X)}))};function qu(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function H4e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function FE(e){let t,r,n;e.length!==2?(t=qu,r=(l,c)=>qu(e(l),c),n=(l,c)=>e(l)-c):(t=e===qu||e===H4e?e:W4e,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:s,right:i}}function W4e(){return 0}function $z(e){return e===null?NaN:+e}function*V4e(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const G4e=FE(qu),fx=G4e.right;FE($z).center;class eL extends Map{constructor(t,r=X4e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(tL(this,t))}has(t){return super.has(tL(this,t))}set(t,r){return super.set(K4e(this,t),r)}delete(t){return super.delete(Y4e(this,t))}}function tL({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function K4e({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Y4e({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function X4e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function J4e(e=qu){if(e===qu)return Bz;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Bz(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Q4e=Math.sqrt(50),Z4e=Math.sqrt(10),e3e=Math.sqrt(2);function Qb(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),s=i>=Q4e?10:i>=Z4e?5:i>=e3e?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/s,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*s,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?Qb(e,t,r*2):[l,c,u]}function mA(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,s]=n?Qb(t,e,r):Qb(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(s<0)for(let u=0;u<l;++u)c[u]=(i-u)/-s;else for(let u=0;u<l;++u)c[u]=(i-u)*s;else if(s<0)for(let u=0;u<l;++u)c[u]=(a+u)/-s;else for(let u=0;u<l;++u)c[u]=(a+u)*s;return c}function gA(e,t,r){return t=+t,e=+e,r=+r,Qb(e,t,r)[2]}function vA(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?gA(t,e,r):gA(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function rL(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function nL(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Uz(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?Bz:J4e(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),h=Math.max(r,Math.floor(t-u*f/c+p)),g=Math.min(n,Math.floor(t+(c-u)*f/c+p));Uz(e,t,h,g,a)}const i=e[t];let s=r,l=n;for(Cm(e,r,t),a(e[n],i)>0&&Cm(e,r,n);s<l;){for(Cm(e,s,l),++s,--l;a(e[s],i)<0;)++s;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?Cm(e,r,l):(++l,Cm(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Cm(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function t3e(e,t,r){if(e=Float64Array.from(V4e(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return nL(e);if(t>=1)return rL(e);var n,a=(n-1)*t,i=Math.floor(a),s=rL(Uz(e,i).subarray(0,i+1)),l=nL(e.subarray(i+1));return s+(l-s)*(a-i)}}function r3e(e,t,r=$z){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),s=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return s+(l-s)*(a-i)}}function n3e(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function mo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Bc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const xA=Symbol("implicit");function $E(){var e=new eL,t=[],r=[],n=xA;function a(i){let s=e.get(i);if(s===void 0){if(n!==xA)return n;e.set(i,s=t.push(i)-1)}return r[s%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new eL;for(const s of i)e.has(s)||e.set(s,t.push(s)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return $E(t,r).unknown(n)},mo.apply(a,arguments),a}function lv(){var e=$E().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,s,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var p=t().length,h=a<n,g=h?a:n,m=h?n:a;i=(m-g)/Math.max(1,p-c+u*2),l&&(i=Math.floor(i)),g+=(m-g-i*(p-c))*d,s=i*(1-c),l&&(g=Math.round(g),s=Math.round(s));var x=n3e(p).map(function(y){return g+i*y});return r(h?x.reverse():x)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([n,a]=p,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(p){return[n,a]=p,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(p){return arguments.length?(l=!!p,f()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),f()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),f()):c},e.paddingOuter=function(p){return arguments.length?(u=+p,f()):u},e.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},e.copy=function(){return lv(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},mo.apply(f(),arguments)}function zz(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return zz(t())},e}function mg(){return zz(lv.apply(null,arguments).paddingInner(1))}function BE(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function qz(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function hx(){}var cv=.7,Zb=1/cv,m0="\\s*([+-]?\\d+)\\s*",uv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",a3e=/^#([0-9a-f]{3,8})$/,i3e=new RegExp(`^rgb\\(${m0},${m0},${m0}\\)$`),s3e=new RegExp(`^rgb\\(${Sl},${Sl},${Sl}\\)$`),o3e=new RegExp(`^rgba\\(${m0},${m0},${m0},${uv}\\)$`),l3e=new RegExp(`^rgba\\(${Sl},${Sl},${Sl},${uv}\\)$`),c3e=new RegExp(`^hsl\\(${uv},${Sl},${Sl}\\)$`),u3e=new RegExp(`^hsla\\(${uv},${Sl},${Sl},${uv}\\)$`),aL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};BE(hx,dv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:iL,formatHex:iL,formatHex8:d3e,formatHsl:f3e,formatRgb:sL,toString:sL});function iL(){return this.rgb().formatHex()}function d3e(){return this.rgb().formatHex8()}function f3e(){return Hz(this).formatHsl()}function sL(){return this.rgb().formatRgb()}function dv(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=a3e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?oL(t):r===3?new Qi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?J1(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?J1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=i3e.exec(e))?new Qi(t[1],t[2],t[3],1):(t=s3e.exec(e))?new Qi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=o3e.exec(e))?J1(t[1],t[2],t[3],t[4]):(t=l3e.exec(e))?J1(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=c3e.exec(e))?uL(t[1],t[2]/100,t[3]/100,1):(t=u3e.exec(e))?uL(t[1],t[2]/100,t[3]/100,t[4]):aL.hasOwnProperty(e)?oL(aL[e]):e==="transparent"?new Qi(NaN,NaN,NaN,0):null}function oL(e){return new Qi(e>>16&255,e>>8&255,e&255,1)}function J1(e,t,r,n){return n<=0&&(e=t=r=NaN),new Qi(e,t,r,n)}function h3e(e){return e instanceof hx||(e=dv(e)),e?(e=e.rgb(),new Qi(e.r,e.g,e.b,e.opacity)):new Qi}function yA(e,t,r,n){return arguments.length===1?h3e(e):new Qi(e,t,r,n??1)}function Qi(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}BE(Qi,yA,qz(hx,{brighter(e){return e=e==null?Zb:Math.pow(Zb,e),new Qi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?cv:Math.pow(cv,e),new Qi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Qi(gf(this.r),gf(this.g),gf(this.b),e2(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lL,formatHex:lL,formatHex8:p3e,formatRgb:cL,toString:cL}));function lL(){return`#${Qd(this.r)}${Qd(this.g)}${Qd(this.b)}`}function p3e(){return`#${Qd(this.r)}${Qd(this.g)}${Qd(this.b)}${Qd((isNaN(this.opacity)?1:this.opacity)*255)}`}function cL(){const e=e2(this.opacity);return`${e===1?"rgb(":"rgba("}${gf(this.r)}, ${gf(this.g)}, ${gf(this.b)}${e===1?")":`, ${e})`}`}function e2(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function gf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Qd(e){return e=gf(e),(e<16?"0":"")+e.toString(16)}function uL(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new qo(e,t,r,n)}function Hz(e){if(e instanceof qo)return new qo(e.h,e.s,e.l,e.opacity);if(e instanceof hx||(e=dv(e)),!e)return new qo;if(e instanceof qo)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),s=NaN,l=i-a,c=(i+a)/2;return l?(t===i?s=(r-n)/l+(r<n)*6:r===i?s=(n-t)/l+2:s=(t-r)/l+4,l/=c<.5?i+a:2-i-a,s*=60):l=c>0&&c<1?0:s,new qo(s,l,c,e.opacity)}function m3e(e,t,r,n){return arguments.length===1?Hz(e):new qo(e,t,r,n??1)}function qo(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}BE(qo,m3e,qz(hx,{brighter(e){return e=e==null?Zb:Math.pow(Zb,e),new qo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?cv:Math.pow(cv,e),new qo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Qi(kN(e>=240?e-240:e+120,a,n),kN(e,a,n),kN(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new qo(dL(this.h),Q1(this.s),Q1(this.l),e2(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=e2(this.opacity);return`${e===1?"hsl(":"hsla("}${dL(this.h)}, ${Q1(this.s)*100}%, ${Q1(this.l)*100}%${e===1?")":`, ${e})`}`}}));function dL(e){return e=(e||0)%360,e<0?e+360:e}function Q1(e){return Math.max(0,Math.min(1,e||0))}function kN(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const UE=e=>()=>e;function g3e(e,t){return function(r){return e+r*t}}function v3e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function x3e(e){return(e=+e)==1?Wz:function(t,r){return r-t?v3e(t,r,e):UE(isNaN(t)?r:t)}}function Wz(e,t){var r=t-e;return r?g3e(e,r):UE(isNaN(e)?t:e)}const fL=function e(t){var r=x3e(t);function n(a,i){var s=r((a=yA(a)).r,(i=yA(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),u=Wz(a.opacity,i.opacity);return function(d){return a.r=s(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function y3e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function b3e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function w3e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),s;for(s=0;s<n;++s)a[s]=$p(e[s],t[s]);for(;s<r;++s)i[s]=t[s];return function(l){for(s=0;s<n;++s)i[s]=a[s](l);return i}}function _3e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function t2(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function N3e(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=$p(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var bA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ON=new RegExp(bA.source,"g");function S3e(e){return function(){return e}}function j3e(e){return function(t){return e(t)+""}}function A3e(e,t){var r=bA.lastIndex=ON.lastIndex=0,n,a,i,s=-1,l=[],c=[];for(e=e+"",t=t+"";(n=bA.exec(e))&&(a=ON.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[s]?l[s]+=i:l[++s]=i),(n=n[0])===(a=a[0])?l[s]?l[s]+=a:l[++s]=a:(l[++s]=null,c.push({i:s,x:t2(n,a)})),r=ON.lastIndex;return r<t.length&&(i=t.slice(r),l[s]?l[s]+=i:l[++s]=i),l.length<2?c[0]?j3e(c[0].x):S3e(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function $p(e,t){var r=typeof t,n;return t==null||r==="boolean"?UE(t):(r==="number"?t2:r==="string"?(n=dv(t))?(t=n,fL):A3e:t instanceof dv?fL:t instanceof Date?_3e:b3e(t)?y3e:Array.isArray(t)?w3e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?N3e:t2)(e,t)}function zE(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function E3e(e,t){t===void 0&&(t=e,e=$p);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(s){var l=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return i[l](s-l)}}function T3e(e){return function(){return e}}function r2(e){return+e}var hL=[0,1];function Di(e){return e}function wA(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:T3e(isNaN(t)?NaN:.5)}function C3e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function k3e(e,t,r){var n=e[0],a=e[1],i=t[0],s=t[1];return a<n?(n=wA(a,n),i=r(s,i)):(n=wA(n,a),i=r(i,s)),function(l){return i(n(l))}}function O3e(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)a[s]=wA(e[s],e[s+1]),i[s]=r(t[s],t[s+1]);return function(l){var c=fx(e,l,1,n)-1;return i[c](a[c](l))}}function px(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Kw(){var e=hL,t=hL,r=$p,n,a,i,s=Di,l,c,u;function d(){var p=Math.min(e.length,t.length);return s!==Di&&(s=C3e(e[0],e[p-1])),l=p>2?O3e:k3e,c=u=null,f}function f(p){return p==null||isNaN(p=+p)?i:(c||(c=l(e.map(n),t,r)))(n(s(p)))}return f.invert=function(p){return s(a((u||(u=l(t,e.map(n),t2)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,r2),d()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),r=zE,d()},f.clamp=function(p){return arguments.length?(s=p?!0:Di,d()):s!==Di},f.interpolate=function(p){return arguments.length?(r=p,d()):r},f.unknown=function(p){return arguments.length?(i=p,f):i},function(p,h){return n=p,a=h,d()}}function qE(){return Kw()(Di,Di)}function P3e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function n2(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function X0(e){return e=n2(Math.abs(e)),e?e[1]:NaN}function L3e(e,t){return function(r,n){for(var a=r.length,i=[],s=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[s=(s+1)%e.length];return i.reverse().join(t)}}function R3e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var D3e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fv(e){if(!(t=D3e.exec(e)))throw new Error("invalid format: "+e);var t;return new HE({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}fv.prototype=HE.prototype;function HE(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}HE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function I3e(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var Vz;function M3e(e,t){var r=n2(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(Vz=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=n.length;return i===s?n:i>s?n+new Array(i-s+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+n2(e,Math.max(0,t+i-1))[0]}function pL(e,t){var r=n2(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const mL={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:P3e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>pL(e*100,t),r:pL,s:M3e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function gL(e){return e}var vL=Array.prototype.map,xL=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function F3e(e){var t=e.grouping===void 0||e.thousands===void 0?gL:L3e(vL.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?gL:R3e(vL.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=fv(f);var p=f.fill,h=f.align,g=f.sign,m=f.symbol,x=f.zero,y=f.width,v=f.comma,b=f.precision,N=f.trim,_=f.type;_==="n"?(v=!0,_="g"):mL[_]||(b===void 0&&(b=12),N=!0,_="g"),(x||p==="0"&&h==="=")&&(x=!0,p="0",h="=");var E=m==="$"?r:m==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",j=m==="$"?n:/[%p]/.test(_)?s:"",A=mL[_],T=/[defgprs%]/.test(_);b=b===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function P(O){var R=E,I=j,z,Y,ie;if(_==="c")I=A(O)+I,O="";else{O=+O;var re=O<0||1/O<0;if(O=isNaN(O)?c:A(Math.abs(O),b),N&&(O=I3e(O)),re&&+O==0&&g!=="+"&&(re=!1),R=(re?g==="("?g:l:g==="-"||g==="("?"":g)+R,I=(_==="s"?xL[8+Vz/3]:"")+I+(re&&g==="("?")":""),T){for(z=-1,Y=O.length;++z<Y;)if(ie=O.charCodeAt(z),48>ie||ie>57){I=(ie===46?a+O.slice(z+1):O.slice(z))+I,O=O.slice(0,z);break}}}v&&!x&&(O=t(O,1/0));var X=R.length+O.length+I.length,oe=X<y?new Array(y-X+1).join(p):"";switch(v&&x&&(O=t(oe+O,oe.length?y-I.length:1/0),oe=""),h){case"<":O=R+O+I+oe;break;case"=":O=R+oe+O+I;break;case"^":O=oe.slice(0,X=oe.length>>1)+R+O+I+oe.slice(X);break;default:O=oe+R+O+I;break}return i(O)}return P.toString=function(){return f+""},P}function d(f,p){var h=u((f=fv(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(X0(p)/3)))*3,m=Math.pow(10,-g),x=xL[8+g/3];return function(y){return h(m*y)+x}}return{format:u,formatPrefix:d}}var Z1,WE,Gz;$3e({thousands:",",grouping:[3],currency:["$",""]});function $3e(e){return Z1=F3e(e),WE=Z1.format,Gz=Z1.formatPrefix,Z1}function B3e(e){return Math.max(0,-X0(Math.abs(e)))}function U3e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(X0(t)/3)))*3-X0(Math.abs(e)))}function z3e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,X0(t)-X0(e))+1}function Kz(e,t,r,n){var a=vA(e,t,r),i;switch(n=fv(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=U3e(a,s))&&(n.precision=i),Gz(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=z3e(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=B3e(a))&&(n.precision=i-(n.type==="%")*2);break}}return WE(n)}function od(e){var t=e.domain;return e.ticks=function(r){var n=t();return mA(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return Kz(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,s=n[a],l=n[i],c,u,d=10;for(l<s&&(u=s,s=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=gA(s,l,r),u===c)return n[a]=s,n[i]=l,t(n);if(u>0)s=Math.floor(s/u)*u,l=Math.ceil(l/u)*u;else if(u<0)s=Math.ceil(s*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function a2(){var e=qE();return e.copy=function(){return px(e,a2())},mo.apply(e,arguments),od(e)}function Yz(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,r2),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return Yz(e).unknown(t)},e=arguments.length?Array.from(e,r2):[0,1],od(r)}function Xz(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],s;return i<a&&(s=r,r=n,n=s,s=a,a=i,i=s),e[r]=t.floor(a),e[n]=t.ceil(i),e}function yL(e){return Math.log(e)}function bL(e){return Math.exp(e)}function q3e(e){return-Math.log(-e)}function H3e(e){return-Math.exp(-e)}function W3e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function V3e(e){return e===10?W3e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function G3e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function wL(e){return(t,r)=>-e(-t,r)}function VE(e){const t=e(yL,bL),r=t.domain;let n=10,a,i;function s(){return a=G3e(n),i=V3e(n),r()[0]<0?(a=wL(a),i=wL(i),e(q3e,H3e)):e(yL,bL),t}return t.base=function(l){return arguments.length?(n=+l,s()):n},t.domain=function(l){return arguments.length?(r(l),s()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let p=a(u),h=a(d),g,m;const x=l==null?10:+l;let y=[];if(!(n%1)&&h-p<x){if(p=Math.floor(p),h=Math.ceil(h),u>0){for(;p<=h;++p)for(g=1;g<n;++g)if(m=p<0?g/i(-p):g*i(p),!(m<u)){if(m>d)break;y.push(m)}}else for(;p<=h;++p)for(g=n-1;g>=1;--g)if(m=p>0?g/i(-p):g*i(p),!(m<u)){if(m>d)break;y.push(m)}y.length*2<x&&(y=mA(u,d,x))}else y=mA(p,h,Math.min(h-p,x)).map(i);return f?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=fv(c)).precision==null&&(c.trim=!0),c=WE(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(Xz(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function Jz(){const e=VE(Kw()).domain([1,10]);return e.copy=()=>px(e,Jz()).base(e.base()),mo.apply(e,arguments),e}function _L(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function NL(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function GE(e){var t=1,r=e(_L(t),NL(t));return r.constant=function(n){return arguments.length?e(_L(t=+n),NL(t)):t},od(r)}function Qz(){var e=GE(Kw());return e.copy=function(){return px(e,Qz()).constant(e.constant())},mo.apply(e,arguments)}function SL(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function K3e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Y3e(e){return e<0?-e*e:e*e}function KE(e){var t=e(Di,Di),r=1;function n(){return r===1?e(Di,Di):r===.5?e(K3e,Y3e):e(SL(r),SL(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},od(t)}function YE(){var e=KE(Kw());return e.copy=function(){return px(e,YE()).exponent(e.exponent())},mo.apply(e,arguments),e}function X3e(){return YE.apply(null,arguments).exponent(.5)}function jL(e){return Math.sign(e)*e*e}function J3e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Zz(){var e=qE(),t=[0,1],r=!1,n;function a(i){var s=J3e(e(i));return isNaN(s)?n:r?Math.round(s):s}return a.invert=function(i){return e.invert(jL(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,r2)).map(jL)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return Zz(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},mo.apply(a,arguments),od(a)}function eq(){var e=[],t=[],r=[],n;function a(){var s=0,l=Math.max(1,t.length);for(r=new Array(l-1);++s<l;)r[s-1]=r3e(e,s/l);return i}function i(s){return s==null||isNaN(s=+s)?n:t[fx(r,s)]}return i.invertExtent=function(s){var l=t.indexOf(s);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let l of s)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(qu),a()},i.range=function(s){return arguments.length?(t=Array.from(s),a()):t.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return eq().domain(e).range(t).unknown(n)},mo.apply(i,arguments)}function tq(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function s(c){return c!=null&&c<=c?a[fx(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},s.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},s.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},s.unknown=function(c){return arguments.length&&(i=c),s},s.thresholds=function(){return n.slice()},s.copy=function(){return tq().domain([e,t]).range(a).unknown(i)},mo.apply(od(s),arguments)}function rq(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[fx(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var s=t.indexOf(i);return[e[s-1],e[s]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return rq().domain(e).range(t).unknown(r)},mo.apply(a,arguments)}const PN=new Date,LN=new Date;function Aa(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const s=a(i),l=a.ceil(i);return i-s<l-i?s:l},a.offset=(i,s)=>(t(i=new Date(+i),s==null?1:Math.floor(s)),i),a.range=(i,s,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<s)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<s);return c},a.filter=i=>Aa(s=>{if(s>=s)for(;e(s),!i(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;t(s,-1),!i(s););else for(;--l>=0;)for(;t(s,1),!i(s););}),r&&(a.count=(i,s)=>(PN.setTime(+i),LN.setTime(+s),e(PN),e(LN),Math.floor(r(PN,LN))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?s=>n(s)%i===0:s=>a.count(0,s)%i===0):a)),a}const i2=Aa(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);i2.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Aa(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):i2);i2.range;const dc=1e3,ro=dc*60,fc=ro*60,kc=fc*24,XE=kc*7,AL=kc*30,RN=kc*365,Zd=Aa(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*dc)},(e,t)=>(t-e)/dc,e=>e.getUTCSeconds());Zd.range;const JE=Aa(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*dc)},(e,t)=>{e.setTime(+e+t*ro)},(e,t)=>(t-e)/ro,e=>e.getMinutes());JE.range;const QE=Aa(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ro)},(e,t)=>(t-e)/ro,e=>e.getUTCMinutes());QE.range;const ZE=Aa(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*dc-e.getMinutes()*ro)},(e,t)=>{e.setTime(+e+t*fc)},(e,t)=>(t-e)/fc,e=>e.getHours());ZE.range;const eT=Aa(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*fc)},(e,t)=>(t-e)/fc,e=>e.getUTCHours());eT.range;const mx=Aa(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ro)/kc,e=>e.getDate()-1);mx.range;const Yw=Aa(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/kc,e=>e.getUTCDate()-1);Yw.range;const nq=Aa(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/kc,e=>Math.floor(e/kc));nq.range;function Jf(e){return Aa(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*ro)/XE)}const Xw=Jf(0),s2=Jf(1),Q3e=Jf(2),Z3e=Jf(3),J0=Jf(4),eEe=Jf(5),tEe=Jf(6);Xw.range;s2.range;Q3e.range;Z3e.range;J0.range;eEe.range;tEe.range;function Qf(e){return Aa(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/XE)}const Jw=Qf(0),o2=Qf(1),rEe=Qf(2),nEe=Qf(3),Q0=Qf(4),aEe=Qf(5),iEe=Qf(6);Jw.range;o2.range;rEe.range;nEe.range;Q0.range;aEe.range;iEe.range;const tT=Aa(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());tT.range;const rT=Aa(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());rT.range;const Oc=Aa(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Oc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Aa(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Oc.range;const Pc=Aa(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Pc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Aa(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Pc.range;function aq(e,t,r,n,a,i){const s=[[Zd,1,dc],[Zd,5,5*dc],[Zd,15,15*dc],[Zd,30,30*dc],[i,1,ro],[i,5,5*ro],[i,15,15*ro],[i,30,30*ro],[a,1,fc],[a,3,3*fc],[a,6,6*fc],[a,12,12*fc],[n,1,kc],[n,2,2*kc],[r,1,XE],[t,1,AL],[t,3,3*AL],[e,1,RN]];function l(u,d,f){const p=d<u;p&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:c(u,d,f),g=h?h.range(u,+d+1):[];return p?g.reverse():g}function c(u,d,f){const p=Math.abs(d-u)/f,h=FE(([,,x])=>x).right(s,p);if(h===s.length)return e.every(vA(u/RN,d/RN,f));if(h===0)return i2.every(Math.max(vA(u,d,f),1));const[g,m]=s[p/s[h-1][2]<s[h][2]/p?h-1:h];return g.every(m)}return[l,c]}const[sEe,oEe]=aq(Pc,rT,Jw,nq,eT,QE),[lEe,cEe]=aq(Oc,tT,Xw,mx,ZE,JE);function DN(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function IN(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function km(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function uEe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,s=e.shortDays,l=e.months,c=e.shortMonths,u=Om(a),d=Pm(a),f=Om(i),p=Pm(i),h=Om(s),g=Pm(s),m=Om(l),x=Pm(l),y=Om(c),v=Pm(c),b={a:re,A:X,b:oe,B:we,c:null,d:PL,e:PL,f:LEe,g:qEe,G:WEe,H:kEe,I:OEe,j:PEe,L:iq,m:REe,M:DEe,p:_e,q:k,Q:DL,s:IL,S:IEe,u:MEe,U:FEe,V:$Ee,w:BEe,W:UEe,x:null,X:null,y:zEe,Y:HEe,Z:VEe,"%":RL},N={a:F,A:B,b:U,B:J,c:null,d:LL,e:LL,f:XEe,g:sTe,G:lTe,H:GEe,I:KEe,j:YEe,L:oq,m:JEe,M:QEe,p:me,q:K,Q:DL,s:IL,S:ZEe,u:eTe,U:tTe,V:rTe,w:nTe,W:aTe,x:null,X:null,y:iTe,Y:oTe,Z:cTe,"%":RL},_={a:P,A:O,b:R,B:I,c:z,d:kL,e:kL,f:AEe,g:CL,G:TL,H:OL,I:OL,j:_Ee,L:jEe,m:wEe,M:NEe,p:T,q:bEe,Q:TEe,s:CEe,S:SEe,u:mEe,U:gEe,V:vEe,w:pEe,W:xEe,x:Y,X:ie,y:CL,Y:TL,Z:yEe,"%":EEe};b.x=E(r,b),b.X=E(n,b),b.c=E(t,b),N.x=E(r,N),N.X=E(n,N),N.c=E(t,N);function E(te,le){return function(ve){var ge=[],Me=-1,Fe=0,ee=te.length,Pe,Ie,Qe;for(ve instanceof Date||(ve=new Date(+ve));++Me<ee;)te.charCodeAt(Me)===37&&(ge.push(te.slice(Fe,Me)),(Ie=EL[Pe=te.charAt(++Me)])!=null?Pe=te.charAt(++Me):Ie=Pe==="e"?" ":"0",(Qe=le[Pe])&&(Pe=Qe(ve,Ie)),ge.push(Pe),Fe=Me+1);return ge.push(te.slice(Fe,Me)),ge.join("")}}function j(te,le){return function(ve){var ge=km(1900,void 0,1),Me=A(ge,te,ve+="",0),Fe,ee;if(Me!=ve.length)return null;if("Q"in ge)return new Date(ge.Q);if("s"in ge)return new Date(ge.s*1e3+("L"in ge?ge.L:0));if(le&&!("Z"in ge)&&(ge.Z=0),"p"in ge&&(ge.H=ge.H%12+ge.p*12),ge.m===void 0&&(ge.m="q"in ge?ge.q:0),"V"in ge){if(ge.V<1||ge.V>53)return null;"w"in ge||(ge.w=1),"Z"in ge?(Fe=IN(km(ge.y,0,1)),ee=Fe.getUTCDay(),Fe=ee>4||ee===0?o2.ceil(Fe):o2(Fe),Fe=Yw.offset(Fe,(ge.V-1)*7),ge.y=Fe.getUTCFullYear(),ge.m=Fe.getUTCMonth(),ge.d=Fe.getUTCDate()+(ge.w+6)%7):(Fe=DN(km(ge.y,0,1)),ee=Fe.getDay(),Fe=ee>4||ee===0?s2.ceil(Fe):s2(Fe),Fe=mx.offset(Fe,(ge.V-1)*7),ge.y=Fe.getFullYear(),ge.m=Fe.getMonth(),ge.d=Fe.getDate()+(ge.w+6)%7)}else("W"in ge||"U"in ge)&&("w"in ge||(ge.w="u"in ge?ge.u%7:"W"in ge?1:0),ee="Z"in ge?IN(km(ge.y,0,1)).getUTCDay():DN(km(ge.y,0,1)).getDay(),ge.m=0,ge.d="W"in ge?(ge.w+6)%7+ge.W*7-(ee+5)%7:ge.w+ge.U*7-(ee+6)%7);return"Z"in ge?(ge.H+=ge.Z/100|0,ge.M+=ge.Z%100,IN(ge)):DN(ge)}}function A(te,le,ve,ge){for(var Me=0,Fe=le.length,ee=ve.length,Pe,Ie;Me<Fe;){if(ge>=ee)return-1;if(Pe=le.charCodeAt(Me++),Pe===37){if(Pe=le.charAt(Me++),Ie=_[Pe in EL?le.charAt(Me++):Pe],!Ie||(ge=Ie(te,ve,ge))<0)return-1}else if(Pe!=ve.charCodeAt(ge++))return-1}return ge}function T(te,le,ve){var ge=u.exec(le.slice(ve));return ge?(te.p=d.get(ge[0].toLowerCase()),ve+ge[0].length):-1}function P(te,le,ve){var ge=h.exec(le.slice(ve));return ge?(te.w=g.get(ge[0].toLowerCase()),ve+ge[0].length):-1}function O(te,le,ve){var ge=f.exec(le.slice(ve));return ge?(te.w=p.get(ge[0].toLowerCase()),ve+ge[0].length):-1}function R(te,le,ve){var ge=y.exec(le.slice(ve));return ge?(te.m=v.get(ge[0].toLowerCase()),ve+ge[0].length):-1}function I(te,le,ve){var ge=m.exec(le.slice(ve));return ge?(te.m=x.get(ge[0].toLowerCase()),ve+ge[0].length):-1}function z(te,le,ve){return A(te,t,le,ve)}function Y(te,le,ve){return A(te,r,le,ve)}function ie(te,le,ve){return A(te,n,le,ve)}function re(te){return s[te.getDay()]}function X(te){return i[te.getDay()]}function oe(te){return c[te.getMonth()]}function we(te){return l[te.getMonth()]}function _e(te){return a[+(te.getHours()>=12)]}function k(te){return 1+~~(te.getMonth()/3)}function F(te){return s[te.getUTCDay()]}function B(te){return i[te.getUTCDay()]}function U(te){return c[te.getUTCMonth()]}function J(te){return l[te.getUTCMonth()]}function me(te){return a[+(te.getUTCHours()>=12)]}function K(te){return 1+~~(te.getUTCMonth()/3)}return{format:function(te){var le=E(te+="",b);return le.toString=function(){return te},le},parse:function(te){var le=j(te+="",!1);return le.toString=function(){return te},le},utcFormat:function(te){var le=E(te+="",N);return le.toString=function(){return te},le},utcParse:function(te){var le=j(te+="",!0);return le.toString=function(){return te},le}}}var EL={"-":"",_:" ",0:"0"},Fa=/^\s*\d+/,dEe=/^%/,fEe=/[\\^$*+?|[\]().{}]/g;function Tr(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function hEe(e){return e.replace(fEe,"\\$&")}function Om(e){return new RegExp("^(?:"+e.map(hEe).join("|")+")","i")}function Pm(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function pEe(e,t,r){var n=Fa.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function mEe(e,t,r){var n=Fa.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function gEe(e,t,r){var n=Fa.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function vEe(e,t,r){var n=Fa.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function xEe(e,t,r){var n=Fa.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function TL(e,t,r){var n=Fa.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function CL(e,t,r){var n=Fa.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function yEe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function bEe(e,t,r){var n=Fa.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function wEe(e,t,r){var n=Fa.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function kL(e,t,r){var n=Fa.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function _Ee(e,t,r){var n=Fa.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function OL(e,t,r){var n=Fa.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function NEe(e,t,r){var n=Fa.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function SEe(e,t,r){var n=Fa.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function jEe(e,t,r){var n=Fa.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function AEe(e,t,r){var n=Fa.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function EEe(e,t,r){var n=dEe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function TEe(e,t,r){var n=Fa.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function CEe(e,t,r){var n=Fa.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function PL(e,t){return Tr(e.getDate(),t,2)}function kEe(e,t){return Tr(e.getHours(),t,2)}function OEe(e,t){return Tr(e.getHours()%12||12,t,2)}function PEe(e,t){return Tr(1+mx.count(Oc(e),e),t,3)}function iq(e,t){return Tr(e.getMilliseconds(),t,3)}function LEe(e,t){return iq(e,t)+"000"}function REe(e,t){return Tr(e.getMonth()+1,t,2)}function DEe(e,t){return Tr(e.getMinutes(),t,2)}function IEe(e,t){return Tr(e.getSeconds(),t,2)}function MEe(e){var t=e.getDay();return t===0?7:t}function FEe(e,t){return Tr(Xw.count(Oc(e)-1,e),t,2)}function sq(e){var t=e.getDay();return t>=4||t===0?J0(e):J0.ceil(e)}function $Ee(e,t){return e=sq(e),Tr(J0.count(Oc(e),e)+(Oc(e).getDay()===4),t,2)}function BEe(e){return e.getDay()}function UEe(e,t){return Tr(s2.count(Oc(e)-1,e),t,2)}function zEe(e,t){return Tr(e.getFullYear()%100,t,2)}function qEe(e,t){return e=sq(e),Tr(e.getFullYear()%100,t,2)}function HEe(e,t){return Tr(e.getFullYear()%1e4,t,4)}function WEe(e,t){var r=e.getDay();return e=r>=4||r===0?J0(e):J0.ceil(e),Tr(e.getFullYear()%1e4,t,4)}function VEe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Tr(t/60|0,"0",2)+Tr(t%60,"0",2)}function LL(e,t){return Tr(e.getUTCDate(),t,2)}function GEe(e,t){return Tr(e.getUTCHours(),t,2)}function KEe(e,t){return Tr(e.getUTCHours()%12||12,t,2)}function YEe(e,t){return Tr(1+Yw.count(Pc(e),e),t,3)}function oq(e,t){return Tr(e.getUTCMilliseconds(),t,3)}function XEe(e,t){return oq(e,t)+"000"}function JEe(e,t){return Tr(e.getUTCMonth()+1,t,2)}function QEe(e,t){return Tr(e.getUTCMinutes(),t,2)}function ZEe(e,t){return Tr(e.getUTCSeconds(),t,2)}function eTe(e){var t=e.getUTCDay();return t===0?7:t}function tTe(e,t){return Tr(Jw.count(Pc(e)-1,e),t,2)}function lq(e){var t=e.getUTCDay();return t>=4||t===0?Q0(e):Q0.ceil(e)}function rTe(e,t){return e=lq(e),Tr(Q0.count(Pc(e),e)+(Pc(e).getUTCDay()===4),t,2)}function nTe(e){return e.getUTCDay()}function aTe(e,t){return Tr(o2.count(Pc(e)-1,e),t,2)}function iTe(e,t){return Tr(e.getUTCFullYear()%100,t,2)}function sTe(e,t){return e=lq(e),Tr(e.getUTCFullYear()%100,t,2)}function oTe(e,t){return Tr(e.getUTCFullYear()%1e4,t,4)}function lTe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Q0(e):Q0.ceil(e),Tr(e.getUTCFullYear()%1e4,t,4)}function cTe(){return"+0000"}function RL(){return"%"}function DL(e){return+e}function IL(e){return Math.floor(+e/1e3)}var _h,cq,uq;uTe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function uTe(e){return _h=uEe(e),cq=_h.format,_h.parse,uq=_h.utcFormat,_h.utcParse,_h}function dTe(e){return new Date(e)}function fTe(e){return e instanceof Date?+e:+new Date(+e)}function nT(e,t,r,n,a,i,s,l,c,u){var d=qE(),f=d.invert,p=d.domain,h=u(".%L"),g=u(":%S"),m=u("%I:%M"),x=u("%I %p"),y=u("%a %d"),v=u("%b %d"),b=u("%B"),N=u("%Y");function _(E){return(c(E)<E?h:l(E)<E?g:s(E)<E?m:i(E)<E?x:n(E)<E?a(E)<E?y:v:r(E)<E?b:N)(E)}return d.invert=function(E){return new Date(f(E))},d.domain=function(E){return arguments.length?p(Array.from(E,fTe)):p().map(dTe)},d.ticks=function(E){var j=p();return e(j[0],j[j.length-1],E??10)},d.tickFormat=function(E,j){return j==null?_:u(j)},d.nice=function(E){var j=p();return(!E||typeof E.range!="function")&&(E=t(j[0],j[j.length-1],E??10)),E?p(Xz(j,E)):d},d.copy=function(){return px(d,nT(e,t,r,n,a,i,s,l,c,u))},d}function hTe(){return mo.apply(nT(lEe,cEe,Oc,tT,Xw,mx,ZE,JE,Zd,cq).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function pTe(){return mo.apply(nT(sEe,oEe,Pc,rT,Jw,Yw,eT,QE,Zd,uq).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Qw(){var e=0,t=1,r,n,a,i,s=Di,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:s(a===0?.5:(f=(i(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(p){var h,g;return arguments.length?([h,g]=p,s=f(h,g),u):[s(0),s(1)]}}return u.range=d($p),u.rangeRound=d(zE),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function ld(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function dq(){var e=od(Qw()(Di));return e.copy=function(){return ld(e,dq())},Bc.apply(e,arguments)}function fq(){var e=VE(Qw()).domain([1,10]);return e.copy=function(){return ld(e,fq()).base(e.base())},Bc.apply(e,arguments)}function hq(){var e=GE(Qw());return e.copy=function(){return ld(e,hq()).constant(e.constant())},Bc.apply(e,arguments)}function aT(){var e=KE(Qw());return e.copy=function(){return ld(e,aT()).exponent(e.exponent())},Bc.apply(e,arguments)}function mTe(){return aT.apply(null,arguments).exponent(.5)}function pq(){var e=[],t=Di;function r(n){if(n!=null&&!isNaN(n=+n))return t((fx(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(qu),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>t3e(e,i/n))},r.copy=function(){return pq(t).domain(e)},Bc.apply(r,arguments)}function Zw(){var e=0,t=.5,r=1,n=1,a,i,s,l,c,u=Di,d,f=!1,p;function h(m){return isNaN(m=+m)?p:(m=.5+((m=+d(m))-i)*(n*m<n*i?l:c),u(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,r]=m,a=d(e=+e),i=d(t=+t),s=d(r=+r),l=a===i?0:.5/(i-a),c=i===s?0:.5/(s-i),n=i<a?-1:1,h):[e,t,r]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(u=m,h):u};function g(m){return function(x){var y,v,b;return arguments.length?([y,v,b]=x,u=E3e(m,[y,v,b]),h):[u(0),u(.5),u(1)]}}return h.range=g($p),h.rangeRound=g(zE),h.unknown=function(m){return arguments.length?(p=m,h):p},function(m){return d=m,a=m(e),i=m(t),s=m(r),l=a===i?0:.5/(i-a),c=i===s?0:.5/(s-i),n=i<a?-1:1,h}}function mq(){var e=od(Zw()(Di));return e.copy=function(){return ld(e,mq())},Bc.apply(e,arguments)}function gq(){var e=VE(Zw()).domain([.1,1,10]);return e.copy=function(){return ld(e,gq()).base(e.base())},Bc.apply(e,arguments)}function vq(){var e=GE(Zw());return e.copy=function(){return ld(e,vq()).constant(e.constant())},Bc.apply(e,arguments)}function iT(){var e=KE(Zw());return e.copy=function(){return ld(e,iT()).exponent(e.exponent())},Bc.apply(e,arguments)}function gTe(){return iT.apply(null,arguments).exponent(.5)}const ML=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:lv,scaleDiverging:mq,scaleDivergingLog:gq,scaleDivergingPow:iT,scaleDivergingSqrt:gTe,scaleDivergingSymlog:vq,scaleIdentity:Yz,scaleImplicit:xA,scaleLinear:a2,scaleLog:Jz,scaleOrdinal:$E,scalePoint:mg,scalePow:YE,scaleQuantile:eq,scaleQuantize:tq,scaleRadial:Zz,scaleSequential:dq,scaleSequentialLog:fq,scaleSequentialPow:aT,scaleSequentialQuantile:pq,scaleSequentialSqrt:mTe,scaleSequentialSymlog:hq,scaleSqrt:X3e,scaleSymlog:Qz,scaleThreshold:rq,scaleTime:hTe,scaleUtc:pTe,tickFormat:Kz},Symbol.toStringTag,{value:"Module"}));var vTe=kp;function xTe(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],s=t(i);if(s!=null&&(l===void 0?s===s&&!vTe(s):r(s,l)))var l=s,c=i}return c}var e_=xTe;function yTe(e,t){return e>t}var xq=yTe,bTe=e_,wTe=xq,_Te=Fp;function NTe(e){return e&&e.length?bTe(e,_Te,wTe):void 0}var STe=NTe;const t_=Dr(STe);function jTe(e,t){return e<t}var yq=jTe,ATe=e_,ETe=yq,TTe=Fp;function CTe(e){return e&&e.length?ATe(e,TTe,ETe):void 0}var kTe=CTe;const r_=Dr(kTe);var OTe=yE,PTe=Ll,LTe=Ez,RTe=os;function DTe(e,t){var r=RTe(e)?OTe:LTe;return r(e,PTe(t))}var ITe=DTe,MTe=jz,FTe=ITe;function $Te(e,t){return MTe(FTe(e,t),1)}var BTe=$Te;const UTe=Dr(BTe);var zTe=RE;function qTe(e,t){return zTe(e,t)}var HTe=qTe;const gx=Dr(HTe);var Bp=1e9,WTe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},oT,yn=!0,co="[DecimalError] ",vf=co+"Invalid argument: ",sT=co+"Exponent out of range: ",Up=Math.floor,$d=Math.pow,VTe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ts,Ca=1e7,fn=7,bq=9007199254740991,l2=Up(bq/fn),yt={};yt.absoluteValue=yt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};yt.comparedTo=yt.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};yt.decimalPlaces=yt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*fn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};yt.dividedBy=yt.div=function(e){return yc(this,new this.constructor(e))};yt.dividedToIntegerBy=yt.idiv=function(e){var t=this,r=t.constructor;return Zr(yc(t,new r(e),0,1),r.precision)};yt.equals=yt.eq=function(e){return!this.cmp(e)};yt.exponent=function(){return ua(this)};yt.greaterThan=yt.gt=function(e){return this.cmp(e)>0};yt.greaterThanOrEqualTo=yt.gte=function(e){return this.cmp(e)>=0};yt.isInteger=yt.isint=function(){return this.e>this.d.length-2};yt.isNegative=yt.isneg=function(){return this.s<0};yt.isPositive=yt.ispos=function(){return this.s>0};yt.isZero=function(){return this.s===0};yt.lessThan=yt.lt=function(e){return this.cmp(e)<0};yt.lessThanOrEqualTo=yt.lte=function(e){return this.cmp(e)<1};yt.logarithm=yt.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Ts))throw Error(co+"NaN");if(r.s<1)throw Error(co+(r.s?"NaN":"-Infinity"));return r.eq(Ts)?new n(0):(yn=!1,t=yc(hv(r,i),hv(e,i),i),yn=!0,Zr(t,a))};yt.minus=yt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Nq(t,e):wq(t,(e.s=-e.s,e))};yt.modulo=yt.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(co+"NaN");return r.s?(yn=!1,t=yc(r,e,0,1).times(e),yn=!0,r.minus(t)):Zr(new n(r),a)};yt.naturalExponential=yt.exp=function(){return _q(this)};yt.naturalLogarithm=yt.ln=function(){return hv(this)};yt.negated=yt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};yt.plus=yt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?wq(t,e):Nq(t,(e.s=-e.s,e))};yt.precision=yt.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(vf+e);if(t=ua(a)+1,n=a.d.length-1,r=n*fn+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};yt.squareRoot=yt.sqrt=function(){var e,t,r,n,a,i,s,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(co+"NaN")}for(e=ua(l),yn=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=bl(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Up((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=s=r+3;;)if(i=n,n=i.plus(yc(l,i,s+2)).times(.5),bl(i.d).slice(0,s)===(t=bl(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),a==s&&t=="4999"){if(Zr(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;s+=4}return yn=!0,Zr(n,r)};yt.times=yt.mul=function(e){var t,r,n,a,i,s,l,c,u,d=this,f=d.constructor,p=d.d,h=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=p.length,u=h.length,c<u&&(i=p,p=h,h=i,s=c,c=u,u=s),i=[],s=c+u,n=s;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=i[a]+h[n]*p[a-n-1]+t,i[a--]=l%Ca|0,t=l/Ca|0;i[a]=(i[a]+t)%Ca|0}for(;!i[--s];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,yn?Zr(e,f.precision):e};yt.toDecimalPlaces=yt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Tl(e,0,Bp),t===void 0?t=n.rounding:Tl(t,0,8),Zr(r,e+ua(r)+1,t))};yt.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Lf(n,!0):(Tl(e,0,Bp),t===void 0?t=a.rounding:Tl(t,0,8),n=Zr(new a(n),e+1,t),r=Lf(n,!0,e+1)),r};yt.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?Lf(a):(Tl(e,0,Bp),t===void 0?t=i.rounding:Tl(t,0,8),n=Zr(new i(a),e+ua(a)+1,t),r=Lf(n.abs(),!1,e+ua(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};yt.toInteger=yt.toint=function(){var e=this,t=e.constructor;return Zr(new t(e),ua(e)+1,t.rounding)};yt.toNumber=function(){return+this};yt.toPower=yt.pow=function(e){var t,r,n,a,i,s,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Ts);if(l=new c(l),!l.s){if(e.s<1)throw Error(co+"Infinity");return l}if(l.eq(Ts))return l;if(n=c.precision,e.eq(Ts))return Zr(l,n);if(t=e.e,r=e.d.length-1,s=t>=r,i=l.s,s){if((r=d<0?-d:d)<=bq){for(a=new c(Ts),t=Math.ceil(n/fn+4),yn=!1;r%2&&(a=a.times(l),$L(a.d,t)),r=Up(r/2),r!==0;)l=l.times(l),$L(l.d,t);return yn=!0,e.s<0?new c(Ts).div(a):Zr(a,n)}}else if(i<0)throw Error(co+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,yn=!1,a=e.times(hv(l,n+u)),yn=!0,a=_q(a),a.s=i,a};yt.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=ua(a),n=Lf(a,r<=i.toExpNeg||r>=i.toExpPos)):(Tl(e,1,Bp),t===void 0?t=i.rounding:Tl(t,0,8),a=Zr(new i(a),e,t),r=ua(a),n=Lf(a,e<=r||r<=i.toExpNeg,e)),n};yt.toSignificantDigits=yt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Tl(e,1,Bp),t===void 0?t=n.rounding:Tl(t,0,8)),Zr(new n(r),e,t)};yt.toString=yt.valueOf=yt.val=yt.toJSON=yt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ua(e),r=e.constructor;return Lf(e,t<=r.toExpNeg||t>=r.toExpPos)};function wq(e,t){var r,n,a,i,s,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),yn?Zr(t,f):t;if(c=e.d,u=t.d,s=e.e,a=t.e,c=c.slice(),i=s-a,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,a=s,l=c.length),s=Math.ceil(f/fn),l=s>l?s+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/Ca|0,c[i]%=Ca;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,yn?Zr(t,f):t}function Tl(e,t,r){if(e!==~~e||e<t||e>r)throw Error(vf+e)}function bl(e){var t,r,n,a=e.length-1,i="",s=e[0];if(a>0){for(i+=s,t=1;t<a;t++)n=e[t]+"",r=fn-n.length,r&&(i+=du(r)),i+=n;s=e[t],n=s+"",r=fn-n.length,r&&(i+=du(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}var yc=function(){function e(n,a){var i,s=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+s,n[l]=i%Ca|0,s=i/Ca|0;return s&&n.unshift(s),n}function t(n,a,i,s){var l,c;if(i!=s)c=i>s?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,i){for(var s=0;i--;)n[i]-=s,s=n[i]<a[i]?1:0,n[i]=s*Ca+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,s){var l,c,u,d,f,p,h,g,m,x,y,v,b,N,_,E,j,A,T=n.constructor,P=n.s==a.s?1:-1,O=n.d,R=a.d;if(!n.s)return new T(n);if(!a.s)throw Error(co+"Division by zero");for(c=n.e-a.e,j=R.length,_=O.length,h=new T(P),g=h.d=[],u=0;R[u]==(O[u]||0);)++u;if(R[u]>(O[u]||0)&&--c,i==null?v=i=T.precision:s?v=i+(ua(n)-ua(a))+1:v=i,v<0)return new T(0);if(v=v/fn+2|0,u=0,j==1)for(d=0,R=R[0],v++;(u<_||d)&&v--;u++)b=d*Ca+(O[u]||0),g[u]=b/R|0,d=b%R|0;else{for(d=Ca/(R[0]+1)|0,d>1&&(R=e(R,d),O=e(O,d),j=R.length,_=O.length),N=j,m=O.slice(0,j),x=m.length;x<j;)m[x++]=0;A=R.slice(),A.unshift(0),E=R[0],R[1]>=Ca/2&&++E;do d=0,l=t(R,m,j,x),l<0?(y=m[0],j!=x&&(y=y*Ca+(m[1]||0)),d=y/E|0,d>1?(d>=Ca&&(d=Ca-1),f=e(R,d),p=f.length,x=m.length,l=t(f,m,p,x),l==1&&(d--,r(f,j<p?A:R,p))):(d==0&&(l=d=1),f=R.slice()),p=f.length,p<x&&f.unshift(0),r(m,f,x),l==-1&&(x=m.length,l=t(R,m,j,x),l<1&&(d++,r(m,j<x?A:R,x))),x=m.length):l===0&&(d++,m=[0]),g[u++]=d,l&&m[0]?m[x++]=O[N]||0:(m=[O[N]],x=1);while((N++<_||m[0]!==void 0)&&v--)}return g[0]||g.shift(),h.e=c,Zr(h,s?i+ua(h)+1:i)}}();function _q(e,t){var r,n,a,i,s,l,c=0,u=0,d=e.constructor,f=d.precision;if(ua(e)>16)throw Error(sT+ua(e));if(!e.s)return new d(Ts);for(yn=!1,l=f,s=new d(.03125);e.abs().gte(.1);)e=e.times(s),u+=5;for(n=Math.log($d(2,u))/Math.LN10*2+5|0,l+=n,r=a=i=new d(Ts),d.precision=l;;){if(a=Zr(a.times(e),l),r=r.times(++c),s=i.plus(yc(a,r,l)),bl(s.d).slice(0,l)===bl(i.d).slice(0,l)){for(;u--;)i=Zr(i.times(i),l);return d.precision=f,t==null?(yn=!0,Zr(i,f)):i}i=s}}function ua(e){for(var t=e.e*fn,r=e.d[0];r>=10;r/=10)t++;return t}function MN(e,t,r){if(t>e.LN10.sd())throw yn=!0,r&&(e.precision=r),Error(co+"LN10 precision limit exceeded");return Zr(new e(e.LN10),t)}function du(e){for(var t="";e--;)t+="0";return t}function hv(e,t){var r,n,a,i,s,l,c,u,d,f=1,p=10,h=e,g=h.d,m=h.constructor,x=m.precision;if(h.s<1)throw Error(co+(h.s?"NaN":"-Infinity"));if(h.eq(Ts))return new m(0);if(t==null?(yn=!1,u=x):u=t,h.eq(10))return t==null&&(yn=!0),MN(m,u);if(u+=p,m.precision=u,r=bl(g),n=r.charAt(0),i=ua(h),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(e),r=bl(h.d),n=r.charAt(0),f++;i=ua(h),n>1?(h=new m("0."+r),i++):h=new m(n+"."+r.slice(1))}else return c=MN(m,u+2,x).times(i+""),h=hv(new m(n+"."+r.slice(1)),u-p).plus(c),m.precision=x,t==null?(yn=!0,Zr(h,x)):h;for(l=s=h=yc(h.minus(Ts),h.plus(Ts),u),d=Zr(h.times(h),u),a=3;;){if(s=Zr(s.times(d),u),c=l.plus(yc(s,new m(a),u)),bl(c.d).slice(0,u)===bl(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(MN(m,u+2,x).times(i+""))),l=yc(l,new m(f),u),m.precision=x,t==null?(yn=!0,Zr(l,x)):l;l=c,a+=2}}function FL(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Up(r/fn),e.d=[],n=(r+1)%fn,r<0&&(n+=fn),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=fn;n<a;)e.d.push(+t.slice(n,n+=fn));t=t.slice(n),n=fn-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),yn&&(e.e>l2||e.e<-l2))throw Error(sT+r)}else e.s=0,e.e=0,e.d=[0];return e}function Zr(e,t,r){var n,a,i,s,l,c,u,d,f=e.d;for(s=1,i=f[0];i>=10;i/=10)s++;if(n=t-s,n<0)n+=fn,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/fn),i=f.length,d>=i)return e;for(u=i=f[d],s=1;i>=10;i/=10)s++;n%=fn,a=n-fn+s}if(r!==void 0&&(i=$d(10,s-a-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/$d(10,s-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=ua(e),f.length=1,t=t-i-1,f[0]=$d(10,(fn-t%fn)%fn),e.e=Up(-t/fn)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=$d(10,fn-n),f[d]=a>0?(u/$d(10,s-a)%$d(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==Ca&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=Ca)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(yn&&(e.e>l2||e.e<-l2))throw Error(sT+ua(e));return e}function Nq(e,t){var r,n,a,i,s,l,c,u,d,f,p=e.constructor,h=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),yn?Zr(t,h):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),s=u-n,s){for(d=s<0,d?(r=c,s=-s,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(h/fn),l)+2,s>a&&(s=a,r.length=1),r.reverse(),a=s;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}s=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>s;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=Ca-1;--c[i],c[a]+=Ca}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,yn?Zr(t,h):t):new p(0)}function Lf(e,t,r){var n,a=ua(e),i=bl(e.d),s=i.length;return t?(r&&(n=r-s)>0?i=i.charAt(0)+"."+i.slice(1)+du(n):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+du(-a-1)+i,r&&(n=r-s)>0&&(i+=du(n))):a>=s?(i+=du(a+1-s),r&&(n=r-a-1)>0&&(i=i+"."+du(n))):((n=a+1)<s&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-s)>0&&(a+1===s&&(i+="."),i+=du(n))),e.s<0?"-"+i:i}function $L(e,t){if(e.length>t)return e.length=t,!0}function Sq(e){var t,r,n;function a(i){var s=this;if(!(s instanceof a))return new a(i);if(s.constructor=a,i instanceof a){s.s=i.s,s.e=i.e,s.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(vf+i);if(i>0)s.s=1;else if(i<0)i=-i,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(i===~~i&&i<1e7){s.e=0,s.d=[i];return}return FL(s,i.toString())}else if(typeof i!="string")throw Error(vf+i);if(i.charCodeAt(0)===45?(i=i.slice(1),s.s=-1):s.s=1,VTe.test(i))FL(s,i);else throw Error(vf+i)}if(a.prototype=yt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=Sq,a.config=a.set=GTe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function GTe(e){if(!e||typeof e!="object")throw Error(co+"Object expected");var t,r,n,a=["precision",1,Bp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Up(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(vf+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(vf+r+": "+n);return this}var oT=Sq(WTe);Ts=new oT(1);const Yr=oT;function KTe(e){return QTe(e)||JTe(e)||XTe(e)||YTe()}function YTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XTe(e,t){if(e){if(typeof e=="string")return _A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _A(e,t)}}function JTe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function QTe(e){if(Array.isArray(e))return _A(e)}function _A(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ZTe=function(t){return t},jq={},Aq=function(t){return t===jq},BL=function(t){return function r(){return arguments.length===0||arguments.length===1&&Aq(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},eCe=function e(t,r){return t===1?r:BL(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=a.filter(function(l){return l!==jq}).length;return s>=t?r.apply(void 0,a):e(t-s,BL(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(f){return Aq(f)?c.shift():f});return r.apply(void 0,KTe(d).concat(c))}))})},n_=function(t){return eCe(t.length,t)},NA=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},tCe=n_(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),rCe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return ZTe;var a=r.reverse(),i=a[0],s=a.slice(1);return function(){return s.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},SA=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},Eq=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function nCe(e){var t;return e===0?t=1:t=Math.floor(new Yr(e).abs().log(10).toNumber())+1,t}function aCe(e,t,r){for(var n=new Yr(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var iCe=n_(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),sCe=n_(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),oCe=n_(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const a_={rangeStep:aCe,getDigitCount:nCe,interpolateNumber:iCe,uninterpolateNumber:sCe,uninterpolateTruncation:oCe};function jA(e){return uCe(e)||cCe(e)||Tq(e)||lCe()}function lCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cCe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function uCe(e){if(Array.isArray(e))return AA(e)}function pv(e,t){return hCe(e)||fCe(e,t)||Tq(e,t)||dCe()}function dCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tq(e,t){if(e){if(typeof e=="string")return AA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AA(e,t)}}function AA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fCe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var s=e[Symbol.iterator](),l;!(n=(l=s.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&s.return!=null&&s.return()}finally{if(a)throw i}}return r}}function hCe(e){if(Array.isArray(e))return e}function Cq(e){var t=pv(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function kq(e,t,r){if(e.lte(0))return new Yr(0);var n=a_.getDigitCount(e.toNumber()),a=new Yr(10).pow(n),i=e.div(a),s=n!==1?.05:.1,l=new Yr(Math.ceil(i.div(s).toNumber())).add(r).mul(s),c=l.mul(a);return t?c:new Yr(Math.ceil(c))}function pCe(e,t,r){var n=1,a=new Yr(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Yr(10).pow(a_.getDigitCount(e)-1),a=new Yr(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Yr(Math.floor(e)))}else e===0?a=new Yr(Math.floor((t-1)/2)):r||(a=new Yr(Math.floor(e)));var s=Math.floor((t-1)/2),l=rCe(tCe(function(c){return a.add(new Yr(c-s).mul(n)).toNumber()}),NA);return l(0,t)}function Oq(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Yr(0),tickMin:new Yr(0),tickMax:new Yr(0)};var i=kq(new Yr(t).sub(e).div(r-1),n,a),s;e<=0&&t>=0?s=new Yr(0):(s=new Yr(e).add(t).div(2),s=s.sub(new Yr(s).mod(i)));var l=Math.ceil(s.sub(e).div(i).toNumber()),c=Math.ceil(new Yr(t).sub(s).div(i).toNumber()),u=l+c+1;return u>r?Oq(e,t,r,n,a+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:s.sub(new Yr(l).mul(i)),tickMax:s.add(new Yr(c).mul(i))})}function mCe(e){var t=pv(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(a,2),l=Cq([r,n]),c=pv(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(jA(NA(0,a-1).map(function(){return 1/0}))):[].concat(jA(NA(0,a-1).map(function(){return-1/0})),[d]);return r>n?SA(f):f}if(u===d)return pCe(u,a,i);var p=Oq(u,d,s,i),h=p.step,g=p.tickMin,m=p.tickMax,x=a_.rangeStep(g,m.add(new Yr(.1).mul(h)),h);return r>n?SA(x):x}function gCe(e,t){var r=pv(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Cq([n,a]),l=pv(s,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var d=Math.max(t,2),f=kq(new Yr(u).sub(c).div(d-1),i,0),p=[].concat(jA(a_.rangeStep(new Yr(c),new Yr(u).sub(new Yr(.99).mul(f)),f)),[u]);return n>a?SA(p):p}var vCe=Eq(mCe),xCe=Eq(gCe),yCe="Invariant failed";function Rf(e,t){throw new Error(yCe)}var bCe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Z0(e){"@babel/helpers - typeof";return Z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z0(e)}function c2(){return c2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c2.apply(this,arguments)}function wCe(e,t){return jCe(e)||SCe(e,t)||NCe(e,t)||_Ce()}function _Ce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NCe(e,t){if(e){if(typeof e=="string")return UL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UL(e,t)}}function UL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function SCe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function jCe(e){if(Array.isArray(e))return e}function ACe(e,t){if(e==null)return{};var r=ECe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ECe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function TCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CCe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Rq(n.key),n)}}function kCe(e,t,r){return t&&CCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function OCe(e,t,r){return t=u2(t),PCe(e,Pq()?Reflect.construct(t,r||[],u2(e).constructor):t.apply(e,r))}function PCe(e,t){if(t&&(Z0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LCe(e)}function LCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pq=function(){return!!e})()}function u2(e){return u2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},u2(e)}function RCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EA(e,t)}function EA(e,t){return EA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},EA(e,t)}function Lq(e,t,r){return t=Rq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rq(e){var t=DCe(e,"string");return Z0(t)=="symbol"?t:t+""}function DCe(e,t){if(Z0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Z0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var vx=function(e){function t(){return TCe(this,t),OCe(this,t,arguments)}return RCe(t,e),kCe(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,s=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,p=ACe(n,bCe),h=zt(p,!1);this.props.direction==="x"&&d.type!=="number"&&Rf();var g=c.map(function(m){var x=u(m,l),y=x.x,v=x.y,b=x.value,N=x.errorVal;if(!N)return null;var _=[],E,j;if(Array.isArray(N)){var A=wCe(N,2);E=A[0],j=A[1]}else E=j=N;if(i==="vertical"){var T=d.scale,P=v+a,O=P+s,R=P-s,I=T(b-E),z=T(b+j);_.push({x1:z,y1:O,x2:z,y2:R}),_.push({x1:I,y1:P,x2:z,y2:P}),_.push({x1:I,y1:O,x2:I,y2:R})}else if(i==="horizontal"){var Y=f.scale,ie=y+a,re=ie-s,X=ie+s,oe=Y(b-E),we=Y(b+j);_.push({x1:re,y1:we,x2:X,y2:we}),_.push({x1:ie,y1:oe,x2:ie,y2:we}),_.push({x1:re,y1:oe,x2:X,y2:oe})}return ye.createElement(Ar,c2({className:"recharts-errorBar",key:"bar-".concat(_.map(function(_e){return"".concat(_e.x1,"-").concat(_e.x2,"-").concat(_e.y1,"-").concat(_e.y2)}))},h),_.map(function(_e){return ye.createElement("line",c2({},_e,{key:"line-".concat(_e.x1,"-").concat(_e.x2,"-").concat(_e.y1,"-").concat(_e.y2)}))}))});return ye.createElement(Ar,{className:"recharts-errorBars"},g)}}])}(ye.Component);Lq(vx,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Lq(vx,"displayName","ErrorBar");function mv(e){"@babel/helpers - typeof";return mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mv(e)}function zL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Td(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zL(Object(r),!0).forEach(function(n){ICe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ICe(e,t,r){return t=MCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MCe(e){var t=FCe(e,"string");return mv(t)=="symbol"?t:t+""}function FCe(e,t){if(mv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(mv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dq=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,s=ws(r,Nl);if(!s)return null;var l=Nl.defaultProps,c=l!==void 0?Td(Td({},l),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:i==="children"?u=(n||[]).reduce(function(d,f){var p=f.item,h=f.props,g=h.sectors||h.data||[];return d.concat(g.map(function(m){return{type:s.props.iconType||p.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):u=(n||[]).map(function(d){var f=d.item,p=f.type.defaultProps,h=p!==void 0?Td(Td({},p),f.props):{},g=h.dataKey,m=h.name,x=h.legendType,y=h.hide;return{inactive:y,dataKey:g,type:c.iconType||x||"square",color:lT(f),value:m||g,payload:h}}),Td(Td(Td({},c),Nl.getWithHeight(s,a)),{},{payload:u,item:s})};function gv(e){"@babel/helpers - typeof";return gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gv(e)}function qL(e){return zCe(e)||UCe(e)||BCe(e)||$Ce()}function $Ce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BCe(e,t){if(e){if(typeof e=="string")return TA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TA(e,t)}}function UCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function zCe(e){if(Array.isArray(e))return TA(e)}function TA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function HL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HL(Object(r),!0).forEach(function(n){g0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g0(e,t,r){return t=qCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qCe(e){var t=HCe(e,"string");return gv(t)=="symbol"?t:t+""}function HCe(e,t){if(gv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Na(e,t,r){return ar(e)||ar(t)?r:ja(t)?Ps(e,t,r):Kt(t)?t(e):r}function gg(e,t,r,n){var a=UTe(e,function(l){return Na(l,t)});if(r==="number"){var i=a.filter(function(l){return rt(l)||parseFloat(l)});return i.length?[r_(i),t_(i)]:[1/0,-1/0]}var s=n?a.filter(function(l){return!ar(l)}):a;return s.map(function(l){return ja(l)||l instanceof Date?l:""})}var WCe=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,f=a[u].coordinate,p=u>=l-1?a[0].coordinate:a[u+1].coordinate,h=void 0;if(Li(f-d)!==Li(p-f)){var g=[];if(Li(p-f)===Li(c[1]-c[0])){h=p;var m=f+c[1]-c[0];g[0]=Math.min(m,(m+d)/2),g[1]=Math.max(m,(m+d)/2)}else{h=d;var x=p+c[1]-c[0];g[0]=Math.min(f,(x+f)/2),g[1]=Math.max(f,(x+f)/2)}var y=[Math.min(f,(h+f)/2),Math.max(f,(h+f)/2)];if(t>y[0]&&t<=y[1]||t>=g[0]&&t<=g[1]){s=a[u].index;break}}else{var v=Math.min(d,p),b=Math.max(d,p);if(t>(v+f)/2&&t<=(b+f)/2){s=a[u].index;break}}}else for(var N=0;N<l;N++)if(N===0&&t<=(n[N].coordinate+n[N+1].coordinate)/2||N>0&&N<l-1&&t>(n[N].coordinate+n[N-1].coordinate)/2&&t<=(n[N].coordinate+n[N+1].coordinate)/2||N===l-1&&t>(n[N].coordinate+n[N-1].coordinate)/2){s=n[N].index;break}return s},lT=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Fn(Fn({},t.type.defaultProps),t.props):t.props,s=i.stroke,l=i.fill,c;switch(a){case"Line":c=s;break;case"Area":case"Radar":c=s&&s!=="none"?s:l;break;default:c=l;break}return c},VCe=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var s={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,f=Object.keys(d),p=0,h=f.length;p<h;p++){var g=d[f[p]],m=g.items,x=g.cateAxisId,y=m.filter(function(j){return xc(j.type).indexOf("Bar")>=0});if(y&&y.length){var v=y[0].type.defaultProps,b=v!==void 0?Fn(Fn({},v),y[0].props):y[0].props,N=b.barSize,_=b[x];s[_]||(s[_]=[]);var E=ar(N)?r:N;s[_].push({item:y[0],stackList:y.slice(1),barSize:ar(E)?void 0:Ri(E,n,0)})}}return s},GCe=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,s=i===void 0?[]:i,l=t.maxBarSize,c=s.length;if(c<1)return null;var u=Ri(r,a,0,!0),d,f=[];if(s[0].barSize===+s[0].barSize){var p=!1,h=a/c,g=s.reduce(function(N,_){return N+_.barSize||0},0);g+=(c-1)*u,g>=a&&(g-=(c-1)*u,u=0),g>=a&&h>0&&(p=!0,h*=.9,g=c*h);var m=(a-g)/2>>0,x={offset:m-u,size:0};d=s.reduce(function(N,_){var E={item:_.item,position:{offset:x.offset+x.size+u,size:p?h:_.barSize}},j=[].concat(qL(N),[E]);return x=j[j.length-1].position,_.stackList&&_.stackList.length&&_.stackList.forEach(function(A){j.push({item:A,position:x})}),j},f)}else{var y=Ri(n,a,0,!0);a-2*y-(c-1)*u<=0&&(u=0);var v=(a-2*y-(c-1)*u)/c;v>1&&(v>>=0);var b=l===+l?Math.min(v,l):v;d=s.reduce(function(N,_,E){var j=[].concat(qL(N),[{item:_.item,position:{offset:y+(v+u)*E+(v-b)/2,size:b}}]);return _.stackList&&_.stackList.length&&_.stackList.forEach(function(A){j.push({item:A,position:j[j.length-1].position})}),j},f)}return d},KCe=function(t,r,n,a){var i=n.children,s=n.width,l=n.margin,c=s-(l.left||0)-(l.right||0),u=Dq({children:i,legendWidth:c});if(u){var d=a||{},f=d.width,p=d.height,h=u.align,g=u.verticalAlign,m=u.layout;if((m==="vertical"||m==="horizontal"&&g==="middle")&&h!=="center"&&rt(t[h]))return Fn(Fn({},t),{},g0({},h,t[h]+(f||0)));if((m==="horizontal"||m==="vertical"&&h==="center")&&g!=="middle"&&rt(t[g]))return Fn(Fn({},t),{},g0({},g,t[g]+(p||0)))}return t},YCe=function(t,r,n){return ar(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},Iq=function(t,r,n,a,i){var s=r.props.children,l=Ls(s,vx).filter(function(u){return YCe(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=Na(d,n);if(ar(f))return u;var p=Array.isArray(f)?[r_(f),t_(f)]:[f,f],h=c.reduce(function(g,m){var x=Na(d,m,0),y=p[0]-Math.abs(Array.isArray(x)?x[0]:x),v=p[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(y,g[0]),Math.max(v,g[1])]},[1/0,-1/0]);return[Math.min(h[0],u[0]),Math.max(h[1],u[1])]},[1/0,-1/0])}return null},XCe=function(t,r,n,a,i){var s=r.map(function(l){return Iq(t,l,n,i,a)}).filter(function(l){return!ar(l)});return s&&s.length?s.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},Mq=function(t,r,n,a,i){var s=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&Iq(t,c,u,a)||gg(t,u,n,i)});if(n==="number")return s.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return s.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},Fq=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},$q=function(t,r,n,a){if(a)return t.map(function(c){return c.coordinate});var i,s,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(s=!0),c.coordinate});return i||l.push(r),s||l.push(n),l},hc=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,s=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&s==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Li(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var p=i?i.indexOf(f):f;return{coordinate:a(p)+u,value:f,offset:u}});return d.filter(function(f){return!ux(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,p){return{coordinate:a(f)+u,value:f,index:p,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,p){return{coordinate:a(f)+u,value:i?i[f]:f,index:p,offset:u}})},FN=new WeakMap,ey=function(t,r){if(typeof r!="function")return t;FN.has(t)||FN.set(t,new WeakMap);var n=FN.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},Bq=function(t,r,n){var a=t.scale,i=t.type,s=t.layout,l=t.axisType;if(a==="auto")return s==="radial"&&l==="radiusAxis"?{scale:lv(),realScaleType:"band"}:s==="radial"&&l==="angleAxis"?{scale:a2(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:mg(),realScaleType:"point"}:i==="category"?{scale:lv(),realScaleType:"band"}:{scale:a2(),realScaleType:"linear"};if(kf(a)){var c="scale".concat(Uw(a));return{scale:(ML[c]||mg)(),realScaleType:ML[c]?c:"point"}}return Kt(a)?{scale:a}:{scale:mg(),realScaleType:"point"}},WL=1e-4,Uq=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-WL,s=Math.max(a[0],a[1])+WL,l=t(r[0]),c=t(r[n-1]);(l<i||l>s||c<i||c>s)&&t.domain([r[0],r[n-1]])}},JCe=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},QCe=function(t,r){if(!r||r.length!==2||!rt(r[0])||!rt(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!rt(t[0])||t[0]<n)&&(i[0]=n),(!rt(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},ZCe=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,s=0,l=0;l<r;++l){var c=ux(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=s,t[l][n][1]=s+c,s=t[l][n][1])}},eke=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,s=0;s<r;++s){var l=ux(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=i,t[s][n][1]=i+l,i=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},tke={sign:ZCe,expand:bbe,none:W0,silhouette:wbe,wiggle:_be,positive:eke},rke=function(t,r,n){var a=r.map(function(l){return l.props.dataKey}),i=tke[n],s=ybe().keys(a).value(function(l,c){return+Na(l,c,0)}).order(Zj).offset(i);return s(t)},nke=function(t,r,n,a,i,s){if(!t)return null;var l=s?r.reverse():r,c={},u=l.reduce(function(f,p){var h,g=(h=p.type)!==null&&h!==void 0&&h.defaultProps?Fn(Fn({},p.type.defaultProps),p.props):p.props,m=g.stackId,x=g.hide;if(x)return f;var y=g[n],v=f[y]||{hasStack:!1,stackGroups:{}};if(ja(m)){var b=v.stackGroups[m]||{numericAxisId:n,cateAxisId:a,items:[]};b.items.push(p),v.hasStack=!0,v.stackGroups[m]=b}else v.stackGroups[Dp("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[p]};return Fn(Fn({},f),{},g0({},y,v))},c),d={};return Object.keys(u).reduce(function(f,p){var h=u[p];if(h.hasStack){var g={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(m,x){var y=h.stackGroups[x];return Fn(Fn({},m),{},g0({},x,{numericAxisId:n,cateAxisId:a,items:y.items,stackedData:rke(t,y.items,i)}))},g)}return Fn(Fn({},f),{},g0({},p,h))},d)},zq=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,s=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=vCe(u,i,l);return t.domain([r_(d),t_(d)]),{niceTicks:d}}if(i&&a==="number"){var f=t.domain(),p=xCe(f,i,l);return{niceTicks:p}}return null};function VL(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,s=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ar(a[t.dataKey])){var l=Mb(r,"value",a[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Na(a,ar(s)?t.dataKey:s);return ar(c)?null:t.scale(c)}var GL=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,s=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=Na(s,r.dataKey,r.domain[l]);return ar(c)?null:r.scale(c)-i/2+a},ake=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},ike=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Fn(Fn({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(ja(i)){var s=r[i];if(s){var l=s.items.indexOf(t);return l>=0?s.stackedData[l]:null}}return null},ske=function(t){return t.reduce(function(r,n){return[r_(n.concat([r[0]]).filter(rt)),t_(n.concat([r[1]]).filter(rt))]},[1/0,-1/0])},qq=function(t,r,n){return Object.keys(t).reduce(function(a,i){var s=t[i],l=s.stackedData,c=l.reduce(function(u,d){var f=ske(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},KL=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,YL=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,CA=function(t,r,n){if(Kt(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(rt(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(KL.test(t[0])){var i=+KL.exec(t[0])[1];a[0]=r[0]-i}else Kt(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(rt(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(YL.test(t[1])){var s=+YL.exec(t[1])[1];a[1]=r[1]+s}else Kt(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},d2=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=IE(r,function(f){return f.coordinate}),s=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},XL=function(t,r,n){return!t||!t.length||gx(t,Ps(n,"type.defaultProps.domain"))?r:t},Hq=function(t,r){var n=t.type.defaultProps?Fn(Fn({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,s=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return Fn(Fn({},zt(t,!1)),{},{dataKey:a,unit:s,formatter:l,name:i||a,color:lT(t),value:Na(r,a),type:c,payload:r,chartType:u,hide:d})};function vv(e){"@babel/helpers - typeof";return vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vv(e)}function JL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JL(Object(r),!0).forEach(function(n){Wq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wq(e,t,r){return t=oke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oke(e){var t=lke(e,"string");return vv(t)=="symbol"?t:t+""}function lke(e,t){if(vv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cke(e,t){return hke(e)||fke(e,t)||dke(e,t)||uke()}function uke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dke(e,t){if(e){if(typeof e=="string")return QL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QL(e,t)}}function QL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fke(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function hke(e){if(Array.isArray(e))return e}var f2=Math.PI/180,pke=function(t){return t*180/Math.PI},ln=function(t,r,n,a){return{x:t+Math.cos(-f2*a)*n,y:r+Math.sin(-f2*a)*n}},Vq=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},mke=function(t,r,n,a,i){var s=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=Ri(t.cx,s,s/2),f=Ri(t.cy,l,l/2),p=Vq(s,l,n),h=Ri(t.innerRadius,p,0),g=Ri(t.outerRadius,p,p*.8),m=Object.keys(r);return m.reduce(function(x,y){var v=r[y],b=v.domain,N=v.reversed,_;if(ar(v.range))a==="angleAxis"?_=[c,u]:a==="radiusAxis"&&(_=[h,g]),N&&(_=[_[1],_[0]]);else{_=v.range;var E=_,j=cke(E,2);c=j[0],u=j[1]}var A=Bq(v,i),T=A.realScaleType,P=A.scale;P.domain(b).range(_),Uq(P);var O=zq(P,tc(tc({},v),{},{realScaleType:T})),R=tc(tc(tc({},v),O),{},{range:_,radius:g,realScaleType:T,scale:P,cx:d,cy:f,innerRadius:h,outerRadius:g,startAngle:c,endAngle:u});return tc(tc({},x),{},Wq({},y,R))},{})},gke=function(t,r){var n=t.x,a=t.y,i=r.x,s=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-s,2))},vke=function(t,r){var n=t.x,a=t.y,i=r.cx,s=r.cy,l=gke({x:n,y:a},{x:i,y:s});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return a>s&&(u=2*Math.PI-u),{radius:l,angle:pke(u),angleInRadian:u}},xke=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),s=Math.min(a,i);return{startAngle:r-s*360,endAngle:n-s*360}},yke=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),s=Math.floor(a/360),l=Math.min(i,s);return t+l*360},ZL=function(t,r){var n=t.x,a=t.y,i=vke({x:n,y:a},r),s=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(s<c||s>u)return!1;if(s===0)return!0;var d=xke(r),f=d.startAngle,p=d.endAngle,h=l,g;if(f<=p){for(;h>p;)h-=360;for(;h<f;)h+=360;g=h>=f&&h<=p}else{for(;h>f;)h-=360;for(;h<p;)h+=360;g=h>=p&&h<=f}return g?tc(tc({},r),{},{radius:s,angle:yke(h,r)}):null},Gq=function(t){return!D.isValidElement(t)&&!Kt(t)&&typeof t!="boolean"?t.className:""};function xv(e){"@babel/helpers - typeof";return xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xv(e)}var bke=["offset"];function wke(e){return jke(e)||Ske(e)||Nke(e)||_ke()}function _ke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nke(e,t){if(e){if(typeof e=="string")return kA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kA(e,t)}}function Ske(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jke(e){if(Array.isArray(e))return kA(e)}function kA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ake(e,t){if(e==null)return{};var r=Eke(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Eke(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function eR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ya(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eR(Object(r),!0).forEach(function(n){Tke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tke(e,t,r){return t=Cke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cke(e){var t=kke(e,"string");return xv(t)=="symbol"?t:t+""}function kke(e,t){if(xv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yv(){return yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yv.apply(this,arguments)}var Oke=function(t){var r=t.value,n=t.formatter,a=ar(t.children)?r:t.children;return Kt(n)?n(a):a},Pke=function(t,r){var n=Li(r-t),a=Math.min(Math.abs(r-t),360);return n*a},Lke=function(t,r,n){var a=t.position,i=t.viewBox,s=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,p=c.outerRadius,h=c.startAngle,g=c.endAngle,m=c.clockWise,x=(f+p)/2,y=Pke(h,g),v=y>=0?1:-1,b,N;a==="insideStart"?(b=h+v*s,N=m):a==="insideEnd"?(b=g-v*s,N=!m):a==="end"&&(b=g+v*s,N=m),N=y<=0?N:!N;var _=ln(u,d,x,b),E=ln(u,d,x,b+(N?1:-1)*359),j="M".concat(_.x,",").concat(_.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(N?0:1,`,
    `).concat(E.x,",").concat(E.y),A=ar(t.id)?Dp("recharts-radial-line-"):t.id;return ye.createElement("text",yv({},n,{dominantBaseline:"central",className:cr("recharts-radial-bar-label",l)}),ye.createElement("defs",null,ye.createElement("path",{id:A,d:j})),ye.createElement("textPath",{xlinkHref:"#".concat(A)},r))},Rke=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,s=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,p=(d+f)/2;if(a==="outside"){var h=ln(s,l,u+n,p),g=h.x,m=h.y;return{x:g,y:m,textAnchor:g>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(c+u)/2,y=ln(s,l,x,p),v=y.x,b=y.y;return{x:v,y:b,textAnchor:"middle",verticalAnchor:"middle"}},Dke=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,s=r,l=s.x,c=s.y,u=s.width,d=s.height,f=d>=0?1:-1,p=f*a,h=f>0?"end":"start",g=f>0?"start":"end",m=u>=0?1:-1,x=m*a,y=m>0?"end":"start",v=m>0?"start":"end";if(i==="top"){var b={x:l+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:h};return ya(ya({},b),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var N={x:l+u/2,y:c+d+p,textAnchor:"middle",verticalAnchor:g};return ya(ya({},N),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(i==="left"){var _={x:l-x,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return ya(ya({},_),n?{width:Math.max(_.x-n.x,0),height:d}:{})}if(i==="right"){var E={x:l+u+x,y:c+d/2,textAnchor:v,verticalAnchor:"middle"};return ya(ya({},E),n?{width:Math.max(n.x+n.width-E.x,0),height:d}:{})}var j=n?{width:u,height:d}:{};return i==="insideLeft"?ya({x:l+x,y:c+d/2,textAnchor:v,verticalAnchor:"middle"},j):i==="insideRight"?ya({x:l+u-x,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},j):i==="insideTop"?ya({x:l+u/2,y:c+p,textAnchor:"middle",verticalAnchor:g},j):i==="insideBottom"?ya({x:l+u/2,y:c+d-p,textAnchor:"middle",verticalAnchor:h},j):i==="insideTopLeft"?ya({x:l+x,y:c+p,textAnchor:v,verticalAnchor:g},j):i==="insideTopRight"?ya({x:l+u-x,y:c+p,textAnchor:y,verticalAnchor:g},j):i==="insideBottomLeft"?ya({x:l+x,y:c+d-p,textAnchor:v,verticalAnchor:h},j):i==="insideBottomRight"?ya({x:l+u-x,y:c+d-p,textAnchor:y,verticalAnchor:h},j):Op(i)&&(rt(i.x)||Jd(i.x))&&(rt(i.y)||Jd(i.y))?ya({x:l+Ri(i.x,u),y:c+Ri(i.y,d),textAnchor:"end",verticalAnchor:"end"},j):ya({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},j)},Ike=function(t){return"cx"in t&&rt(t.cx)};function Pa(e){var t=e.offset,r=t===void 0?5:t,n=Ake(e,bke),a=ya({offset:r},n),i=a.viewBox,s=a.position,l=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,p=a.textBreakAll;if(!i||ar(l)&&ar(c)&&!D.isValidElement(u)&&!Kt(u))return null;if(D.isValidElement(u))return D.cloneElement(u,a);var h;if(Kt(u)){if(h=D.createElement(u,a),D.isValidElement(h))return h}else h=Oke(a);var g=Ike(i),m=zt(a,!0);if(g&&(s==="insideStart"||s==="insideEnd"||s==="end"))return Lke(a,h,m);var x=g?Rke(a):Dke(a);return ye.createElement(Pf,yv({className:cr("recharts-label",f)},m,x,{breakAll:p}),h)}Pa.displayName="Label";var Kq=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,s=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,p=t.y,h=t.top,g=t.left,m=t.width,x=t.height,y=t.clockWise,v=t.labelViewBox;if(v)return v;if(rt(m)&&rt(x)){if(rt(f)&&rt(p))return{x:f,y:p,width:m,height:x};if(rt(h)&&rt(g))return{x:h,y:g,width:m,height:x}}return rt(f)&&rt(p)?{x:f,y:p,width:0,height:0}:rt(r)&&rt(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:s||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:y}:t.viewBox?t.viewBox:{}},Mke=function(t,r){return t?t===!0?ye.createElement(Pa,{key:"label-implicit",viewBox:r}):ja(t)?ye.createElement(Pa,{key:"label-implicit",viewBox:r,value:t}):D.isValidElement(t)?t.type===Pa?D.cloneElement(t,{key:"label-implicit",viewBox:r}):ye.createElement(Pa,{key:"label-implicit",content:t,viewBox:r}):Kt(t)?ye.createElement(Pa,{key:"label-implicit",content:t,viewBox:r}):Op(t)?ye.createElement(Pa,yv({viewBox:r},t,{key:"label-implicit"})):null:null},Fke=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=Kq(t),s=Ls(a,Pa).map(function(c,u){return D.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return s;var l=Mke(t.label,r||i);return[l].concat(wke(s))};Pa.parseViewBox=Kq;Pa.renderCallByParent=Fke;function $ke(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Bke=$ke;const Uke=Dr(Bke);function bv(e){"@babel/helpers - typeof";return bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bv(e)}var zke=["valueAccessor"],qke=["data","dataKey","clockWise","id","textBreakAll"];function Hke(e){return Kke(e)||Gke(e)||Vke(e)||Wke()}function Wke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vke(e,t){if(e){if(typeof e=="string")return OA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OA(e,t)}}function Gke(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Kke(e){if(Array.isArray(e))return OA(e)}function OA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h2(){return h2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h2.apply(this,arguments)}function tR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tR(Object(r),!0).forEach(function(n){Yke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yke(e,t,r){return t=Xke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xke(e){var t=Jke(e,"string");return bv(t)=="symbol"?t:t+""}function Jke(e,t){if(bv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nR(e,t){if(e==null)return{};var r=Qke(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Qke(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Zke=function(t){return Array.isArray(t.value)?Uke(t.value):t.value};function bc(e){var t=e.valueAccessor,r=t===void 0?Zke:t,n=nR(e,zke),a=n.data,i=n.dataKey,s=n.clockWise,l=n.id,c=n.textBreakAll,u=nR(n,qke);return!a||!a.length?null:ye.createElement(Ar,{className:"recharts-label-list"},a.map(function(d,f){var p=ar(i)?r(d,f):Na(d&&d.payload,i),h=ar(l)?{}:{id:"".concat(l,"-").concat(f)};return ye.createElement(Pa,h2({},zt(d,!0),u,h,{parentViewBox:d.parentViewBox,value:p,textBreakAll:c,viewBox:Pa.parseViewBox(ar(s)?d:rR(rR({},d),{},{clockWise:s})),key:"label-".concat(f),index:f}))}))}bc.displayName="LabelList";function eOe(e,t){return e?e===!0?ye.createElement(bc,{key:"labelList-implicit",data:t}):ye.isValidElement(e)||Kt(e)?ye.createElement(bc,{key:"labelList-implicit",data:t,content:e}):Op(e)?ye.createElement(bc,h2({data:t},e,{key:"labelList-implicit"})):null:null}function tOe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=Ls(n,bc).map(function(s,l){return D.cloneElement(s,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var i=eOe(e.label,t);return[i].concat(Hke(a))}bc.renderCallByParent=tOe;function wv(e){"@babel/helpers - typeof";return wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wv(e)}function PA(){return PA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},PA.apply(this,arguments)}function aR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function iR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aR(Object(r),!0).forEach(function(n){rOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rOe(e,t,r){return t=nOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nOe(e){var t=aOe(e,"string");return wv(t)=="symbol"?t:t+""}function aOe(e,t){if(wv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iOe=function(t,r){var n=Li(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},ty=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,s=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,f=Math.asin(c/d)/f2,p=u?i:i+s*f,h=ln(r,n,d,p),g=ln(r,n,a,p),m=u?i-s*f:i,x=ln(r,n,d*Math.cos(f*f2),m);return{center:h,circleTangency:g,lineTangency:x,theta:f}},Yq=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,s=t.startAngle,l=t.endAngle,c=iOe(s,l),u=s+c,d=ln(r,n,i,s),f=ln(r,n,i,u),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(s>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var h=ln(r,n,a,s),g=ln(r,n,a,u);p+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(s<=u),`,
            `).concat(h.x,",").concat(h.y," Z")}else p+="L ".concat(r,",").concat(n," Z");return p},sOe=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,s=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=Li(d-u),p=ty({cx:r,cy:n,radius:i,angle:u,sign:f,cornerRadius:s,cornerIsExternal:c}),h=p.circleTangency,g=p.lineTangency,m=p.theta,x=ty({cx:r,cy:n,radius:i,angle:d,sign:-f,cornerRadius:s,cornerIsExternal:c}),y=x.circleTangency,v=x.lineTangency,b=x.theta,N=c?Math.abs(u-d):Math.abs(u-d)-m-b;if(N<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):Yq({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var _="M ".concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(N>180),",").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
  `);if(a>0){var E=ty({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),j=E.circleTangency,A=E.lineTangency,T=E.theta,P=ty({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),O=P.circleTangency,R=P.lineTangency,I=P.theta,z=c?Math.abs(u-d):Math.abs(u-d)-T-I;if(z<0&&s===0)return"".concat(_,"L").concat(r,",").concat(n,"Z");_+="L".concat(R.x,",").concat(R.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(z>180),",").concat(+(f>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,"Z")}else _+="L".concat(r,",").concat(n,"Z");return _},oOe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Xq=function(t){var r=iR(iR({},oOe),t),n=r.cx,a=r.cy,i=r.innerRadius,s=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,p=r.className;if(s<i||d===f)return null;var h=cr("recharts-sector",p),g=s-i,m=Ri(l,g,0,!0),x;return m>0&&Math.abs(d-f)<360?x=sOe({cx:n,cy:a,innerRadius:i,outerRadius:s,cornerRadius:Math.min(m,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):x=Yq({cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:d,endAngle:f}),ye.createElement("path",PA({},zt(r,!0),{className:h,d:x,role:"img"}))};function _v(e){"@babel/helpers - typeof";return _v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_v(e)}function LA(){return LA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LA.apply(this,arguments)}function sR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function oR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sR(Object(r),!0).forEach(function(n){lOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lOe(e,t,r){return t=cOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cOe(e){var t=uOe(e,"string");return _v(t)=="symbol"?t:t+""}function uOe(e,t){if(_v(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_v(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lR={curveBasisClosed:lbe,curveBasisOpen:cbe,curveBasis:obe,curveBumpX:Gye,curveBumpY:Kye,curveLinearClosed:ube,curveLinear:qw,curveMonotoneX:dbe,curveMonotoneY:fbe,curveNatural:hbe,curveStep:pbe,curveStepAfter:gbe,curveStepBefore:mbe},ry=function(t){return t.x===+t.x&&t.y===+t.y},Lm=function(t){return t.x},Rm=function(t){return t.y},dOe=function(t,r){if(Kt(t))return t;var n="curve".concat(Uw(t));return(n==="curveMonotone"||n==="curveBump")&&r?lR["".concat(n).concat(r==="vertical"?"Y":"X")]:lR[n]||qw},fOe=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,s=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=dOe(n,l),f=u?i.filter(function(m){return ry(m)}):i,p;if(Array.isArray(s)){var h=u?s.filter(function(m){return ry(m)}):s,g=f.map(function(m,x){return oR(oR({},m),{},{base:h[x]})});return l==="vertical"?p=V1().y(Rm).x1(Lm).x0(function(m){return m.base.x}):p=V1().x(Lm).y1(Rm).y0(function(m){return m.base.y}),p.defined(ry).curve(d),p(g)}return l==="vertical"&&rt(s)?p=V1().y(Rm).x1(Lm).x0(s):rt(s)?p=V1().x(Lm).y1(Rm).y0(s):p=HU().x(Lm).y(Rm),p.defined(ry).curve(d),p(f)},p2=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var s=n&&n.length?fOe(t):a;return D.createElement("path",LA({},zt(t,!1),Fb(t),{className:cr("recharts-curve",r),d:s,ref:i}))},Jq={exports:{}},hOe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",pOe=hOe,mOe=pOe;function Qq(){}function Zq(){}Zq.resetWarningCache=Qq;var gOe=function(){function e(n,a,i,s,l,c){if(c!==mOe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Zq,resetWarningCache:Qq};return r.PropTypes=r,r};Jq.exports=gOe();var vOe=Jq.exports;const Pr=Dr(vOe),{getOwnPropertyNames:xOe,getOwnPropertySymbols:yOe}=Object,{hasOwnProperty:bOe}=Object.prototype;function $N(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function ny(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);const{cache:i}=a,s=i.get(r),l=i.get(n);if(s&&l)return s===n&&l===r;i.set(r,n),i.set(n,r);const c=e(r,n,a);return i.delete(r),i.delete(n),c}}function wOe(e){return e!=null?e[Symbol.toStringTag]:void 0}function cR(e){return xOe(e).concat(yOe(e))}const _Oe=Object.hasOwn||((e,t)=>bOe.call(e,t));function Zf(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const NOe="__v",SOe="__o",jOe="_owner",{getOwnPropertyDescriptor:uR,keys:dR}=Object;function AOe(e,t){return e.byteLength===t.byteLength&&m2(new Uint8Array(e),new Uint8Array(t))}function EOe(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function TOe(e,t){return e.byteLength===t.byteLength&&m2(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function COe(e,t){return Zf(e.getTime(),t.getTime())}function kOe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function OOe(e,t){return e===t}function fR(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.entries();let s,l,c=0;for(;(s=i.next())&&!s.done;){const u=t.entries();let d=!1,f=0;for(;(l=u.next())&&!l.done;){if(a[f]){f++;continue}const p=s.value,h=l.value;if(r.equals(p[0],h[0],c,f,e,t,r)&&r.equals(p[1],h[1],p[0],h[0],e,t,r)){d=a[f]=!0;break}f++}if(!d)return!1;c++}return!0}const POe=Zf;function LOe(e,t,r){const n=dR(e);let a=n.length;if(dR(t).length!==a)return!1;for(;a-- >0;)if(!eH(e,t,r,n[a]))return!1;return!0}function Dm(e,t,r){const n=cR(e);let a=n.length;if(cR(t).length!==a)return!1;let i,s,l;for(;a-- >0;)if(i=n[a],!eH(e,t,r,i)||(s=uR(e,i),l=uR(t,i),(s||l)&&(!s||!l||s.configurable!==l.configurable||s.enumerable!==l.enumerable||s.writable!==l.writable)))return!1;return!0}function ROe(e,t){return Zf(e.valueOf(),t.valueOf())}function DOe(e,t){return e.source===t.source&&e.flags===t.flags}function hR(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.values();let s,l;for(;(s=i.next())&&!s.done;){const c=t.values();let u=!1,d=0;for(;(l=c.next())&&!l.done;){if(!a[d]&&r.equals(s.value,l.value,s.value,l.value,e,t,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function m2(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function IOe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function eH(e,t,r,n){return(n===jOe||n===SOe||n===NOe)&&(e.$$typeof||t.$$typeof)?!0:_Oe(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const MOe="[object ArrayBuffer]",FOe="[object Arguments]",$Oe="[object Boolean]",BOe="[object DataView]",UOe="[object Date]",zOe="[object Error]",qOe="[object Map]",HOe="[object Number]",WOe="[object Object]",VOe="[object RegExp]",GOe="[object Set]",KOe="[object String]",YOe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},XOe="[object URL]",JOe=Object.prototype.toString;function QOe({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:s,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:d,areSetsEqual:f,areTypedArraysEqual:p,areUrlsEqual:h,unknownTagComparators:g}){return function(x,y,v){if(x===y)return!0;if(x==null||y==null)return!1;const b=typeof x;if(b!==typeof y)return!1;if(b!=="object")return b==="number"?l(x,y,v):b==="function"?i(x,y,v):!1;const N=x.constructor;if(N!==y.constructor)return!1;if(N===Object)return c(x,y,v);if(Array.isArray(x))return t(x,y,v);if(N===Date)return n(x,y,v);if(N===RegExp)return d(x,y,v);if(N===Map)return s(x,y,v);if(N===Set)return f(x,y,v);const _=JOe.call(x);if(_===UOe)return n(x,y,v);if(_===VOe)return d(x,y,v);if(_===qOe)return s(x,y,v);if(_===GOe)return f(x,y,v);if(_===WOe)return typeof x.then!="function"&&typeof y.then!="function"&&c(x,y,v);if(_===XOe)return h(x,y,v);if(_===zOe)return a(x,y,v);if(_===FOe)return c(x,y,v);if(YOe[_])return p(x,y,v);if(_===MOe)return e(x,y,v);if(_===BOe)return r(x,y,v);if(_===$Oe||_===HOe||_===KOe)return u(x,y,v);if(g){let E=g[_];if(!E){const j=wOe(x);j&&(E=g[j])}if(E)return E(x,y,v)}return!1}}function ZOe({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:AOe,areArraysEqual:r?Dm:EOe,areDataViewsEqual:TOe,areDatesEqual:COe,areErrorsEqual:kOe,areFunctionsEqual:OOe,areMapsEqual:r?$N(fR,Dm):fR,areNumbersEqual:POe,areObjectsEqual:r?Dm:LOe,arePrimitiveWrappersEqual:ROe,areRegExpsEqual:DOe,areSetsEqual:r?$N(hR,Dm):hR,areTypedArraysEqual:r?$N(m2,Dm):m2,areUrlsEqual:IOe,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const a=ny(n.areArraysEqual),i=ny(n.areMapsEqual),s=ny(n.areObjectsEqual),l=ny(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:l})}return n}function e6e(e){return function(t,r,n,a,i,s,l){return e(t,r,l)}}function t6e({circular:e,comparator:t,createState:r,equals:n,strict:a}){if(r)return function(l,c){const{cache:u=e?new WeakMap:void 0,meta:d}=r();return t(l,c,{cache:u,equals:n,meta:d,strict:a})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(l,c){return t(l,c,i)}}const r6e=cd();cd({strict:!0});cd({circular:!0});cd({circular:!0,strict:!0});cd({createInternalComparator:()=>Zf});cd({strict:!0,createInternalComparator:()=>Zf});cd({circular:!0,createInternalComparator:()=>Zf});cd({circular:!0,createInternalComparator:()=>Zf,strict:!0});function cd(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:a=!1}=e,i=ZOe(e),s=QOe(i),l=r?r(s):e6e(s);return t6e({circular:t,comparator:s,createState:n,equals:l,strict:a})}function n6e(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function pR(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):n6e(a)};requestAnimationFrame(n)}function RA(e){"@babel/helpers - typeof";return RA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},RA(e)}function a6e(e){return l6e(e)||o6e(e)||s6e(e)||i6e()}function i6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s6e(e,t){if(e){if(typeof e=="string")return mR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mR(e,t)}}function mR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o6e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function l6e(e){if(Array.isArray(e))return e}function c6e(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var s=i,l=a6e(s),c=l[0],u=l.slice(1);if(typeof c=="number"){pR(a.bind(null,u),c);return}a(c),pR(a.bind(null,u));return}RA(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Nv(e){"@babel/helpers - typeof";return Nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nv(e)}function gR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gR(Object(r),!0).forEach(function(n){tH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tH(e,t,r){return t=u6e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u6e(e){var t=d6e(e,"string");return Nv(t)==="symbol"?t:String(t)}function d6e(e,t){if(Nv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var f6e=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},h6e=function(t){return t},p6e=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},vg=function(t,r){return Object.keys(r).reduce(function(n,a){return vR(vR({},n),{},tH({},a,t(a,r[a])))},{})},xR=function(t,r,n){return t.map(function(a){return"".concat(p6e(a)," ").concat(r,"ms ").concat(n)}).join(",")};function m6e(e,t){return x6e(e)||v6e(e,t)||rH(e,t)||g6e()}function g6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v6e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function x6e(e){if(Array.isArray(e))return e}function y6e(e){return _6e(e)||w6e(e)||rH(e)||b6e()}function b6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rH(e,t){if(e){if(typeof e=="string")return DA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DA(e,t)}}function w6e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _6e(e){if(Array.isArray(e))return DA(e)}function DA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g2=1e-4,nH=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},aH=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},yR=function(t,r){return function(n){var a=nH(t,r);return aH(a,n)}},N6e=function(t,r){return function(n){var a=nH(t,r),i=[].concat(y6e(a.map(function(s,l){return s*l}).slice(1)),[0]);return aH(i,n)}},bR=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],s=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,s=1,l=1;break;case"ease":a=.25,i=.1,s=.25,l=1;break;case"ease-in":a=.42,i=0,s=1,l=1;break;case"ease-out":a=.42,i=0,s=.58,l=1;break;case"ease-in-out":a=0,i=0,s=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),d=m6e(u,4);a=d[0],i=d[1],s=d[2],l=d[3]}}}var f=yR(a,s),p=yR(i,l),h=N6e(a,s),g=function(y){return y>1?1:y<0?0:y},m=function(y){for(var v=y>1?1:y,b=v,N=0;N<8;++N){var _=f(b)-v,E=h(b);if(Math.abs(_-v)<g2||E<g2)return p(b);b=g(b-_/E)}return p(b)};return m.isStepper=!1,m},S6e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,s=t.dt,l=s===void 0?17:s,c=function(d,f,p){var h=-(d-f)*n,g=p*i,m=p+(h-g)*l/1e3,x=p*l/1e3+d;return Math.abs(x-f)<g2&&Math.abs(m)<g2?[f,0]:[x,m]};return c.isStepper=!0,c.dt=l,c},j6e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return bR(a);case"spring":return S6e();default:if(a.split("(")[0]==="cubic-bezier")return bR(a)}return typeof a=="function"?a:null};function Sv(e){"@babel/helpers - typeof";return Sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sv(e)}function wR(e){return T6e(e)||E6e(e)||iH(e)||A6e()}function A6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E6e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function T6e(e){if(Array.isArray(e))return MA(e)}function _R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ga(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_R(Object(r),!0).forEach(function(n){IA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_R(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IA(e,t,r){return t=C6e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C6e(e){var t=k6e(e,"string");return Sv(t)==="symbol"?t:String(t)}function k6e(e,t){if(Sv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function O6e(e,t){return R6e(e)||L6e(e,t)||iH(e,t)||P6e()}function P6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iH(e,t){if(e){if(typeof e=="string")return MA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MA(e,t)}}function MA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L6e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function R6e(e){if(Array.isArray(e))return e}var v2=function(t,r,n){return t+(r-t)*n},FA=function(t){var r=t.from,n=t.to;return r!==n},D6e=function e(t,r,n){var a=vg(function(i,s){if(FA(s)){var l=t(s.from,s.to,s.velocity),c=O6e(l,2),u=c[0],d=c[1];return Ga(Ga({},s),{},{from:u,velocity:d})}return s},r);return n<1?vg(function(i,s){return FA(s)?Ga(Ga({},s),{},{velocity:v2(s.velocity,a[i].velocity,n),from:v2(s.from,a[i].from,n)}):s},r):e(t,a,n-1)};const I6e=function(e,t,r,n,a){var i=f6e(e,t),s=i.reduce(function(x,y){return Ga(Ga({},x),{},IA({},y,[e[y],t[y]]))},{}),l=i.reduce(function(x,y){return Ga(Ga({},x),{},IA({},y,{from:e[y],velocity:0,to:t[y]}))},{}),c=-1,u,d,f=function(){return null},p=function(){return vg(function(y,v){return v.from},l)},h=function(){return!Object.values(l).filter(FA).length},g=function(y){u||(u=y);var v=y-u,b=v/r.dt;l=D6e(r,l,b),a(Ga(Ga(Ga({},e),t),p())),u=y,h()||(c=requestAnimationFrame(f))},m=function(y){d||(d=y);var v=(y-d)/n,b=vg(function(_,E){return v2.apply(void 0,wR(E).concat([r(v)]))},s);if(a(Ga(Ga(Ga({},e),t),b)),v<1)c=requestAnimationFrame(f);else{var N=vg(function(_,E){return v2.apply(void 0,wR(E).concat([r(1)]))},s);a(Ga(Ga(Ga({},e),t),N))}};return f=r.isStepper?g:m,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function ep(e){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ep(e)}var M6e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function F6e(e,t){if(e==null)return{};var r=$6e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $6e(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function BN(e){return q6e(e)||z6e(e)||U6e(e)||B6e()}function B6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U6e(e,t){if(e){if(typeof e=="string")return $A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $A(e,t)}}function z6e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function q6e(e){if(Array.isArray(e))return $A(e)}function $A(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function NR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ko(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NR(Object(r),!0).forEach(function(n){Km(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Km(e,t,r){return t=sH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W6e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sH(n.key),n)}}function V6e(e,t,r){return t&&W6e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sH(e){var t=G6e(e,"string");return ep(t)==="symbol"?t:String(t)}function G6e(e,t){if(ep(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ep(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BA(e,t)}function BA(e,t){return BA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},BA(e,t)}function Y6e(e){var t=X6e();return function(){var n=x2(e),a;if(t){var i=x2(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return UA(this,a)}}function UA(e,t){if(t&&(ep(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zA(e)}function zA(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X6e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function x2(e){return x2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},x2(e)}var Cl=function(e){K6e(r,e);var t=Y6e(r);function r(n,a){var i;H6e(this,r),i=t.call(this,n,a);var s=i.props,l=s.isActive,c=s.attributeName,u=s.from,d=s.to,f=s.steps,p=s.children,h=s.duration;if(i.handleStyleChange=i.handleStyleChange.bind(zA(i)),i.changeStyle=i.changeStyle.bind(zA(i)),!l||h<=0)return i.state={style:{}},typeof p=="function"&&(i.state={style:d}),UA(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof p=="function")return i.state={style:u},UA(i);i.state={style:c?Km({},c,u):u}}else i.state={style:{}};return i}return V6e(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,s=a.canBegin;this.mounted=!0,!(!i||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,s=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,p=this.state.style;if(l){if(!s){var h={style:c?Km({},c,d):d};this.state&&p&&(c&&p[c]!==d||!c&&p!==d)&&this.setState(h);return}if(!(r6e(a.to,d)&&a.canBegin&&a.isActive)){var g=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=g||u?f:a.to;if(this.state&&p){var x={style:c?Km({},c,m):m};(c&&p[c]!==m||!c&&p!==m)&&this.setState(x)}this.runAnimation(ko(ko({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,s=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,p=a.onAnimationStart,h=I6e(s,l,j6e(u),c,this.changeStyle),g=function(){i.stopJSAnimation=h()};this.manager.start([p,d,g,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,s=a.steps,l=a.begin,c=a.onAnimationStart,u=s[0],d=u.style,f=u.duration,p=f===void 0?0:f,h=function(m,x,y){if(y===0)return m;var v=x.duration,b=x.easing,N=b===void 0?"ease":b,_=x.style,E=x.properties,j=x.onAnimationEnd,A=y>0?s[y-1]:x,T=E||Object.keys(_);if(typeof N=="function"||N==="spring")return[].concat(BN(m),[i.runJSAnimation.bind(i,{from:A.style,to:_,duration:v,easing:N}),v]);var P=xR(T,v,N),O=ko(ko(ko({},A.style),_),{},{transition:P});return[].concat(BN(m),[O,v,j]).filter(h6e)};return this.manager.start([c].concat(BN(s.reduce(h,[d,Math.max(p,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=c6e());var i=a.begin,s=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,p=a.steps,h=a.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof h=="function"||u==="spring"){this.runJSAnimation(a);return}if(p.length>1){this.runStepAnimation(a);return}var m=l?Km({},l,c):c,x=xR(Object.keys(m),s,u);g.start([d,i,ko(ko({},m),{},{transition:x}),s,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var s=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=F6e(a,M6e),u=D.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||s<=0)return i;var f=function(h){var g=h.props,m=g.style,x=m===void 0?{}:m,y=g.className,v=D.cloneElement(h,ko(ko({},c),{},{style:ko(ko({},x),d),className:y}));return v};return u===1?f(D.Children.only(i)):ye.createElement("div",null,D.Children.map(i,function(p){return f(p)}))}}]),r}(D.PureComponent);Cl.displayName="Animate";Cl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Cl.propTypes={from:Pr.oneOfType([Pr.object,Pr.string]),to:Pr.oneOfType([Pr.object,Pr.string]),attributeName:Pr.string,duration:Pr.number,begin:Pr.number,easing:Pr.oneOfType([Pr.string,Pr.func]),steps:Pr.arrayOf(Pr.shape({duration:Pr.number.isRequired,style:Pr.object.isRequired,easing:Pr.oneOfType([Pr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Pr.func]),properties:Pr.arrayOf("string"),onAnimationEnd:Pr.func})),children:Pr.oneOfType([Pr.node,Pr.func]),isActive:Pr.bool,canBegin:Pr.bool,onAnimationEnd:Pr.func,shouldReAnimate:Pr.bool,onAnimationStart:Pr.func,onAnimationReStart:Pr.func};function jv(e){"@babel/helpers - typeof";return jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jv(e)}function y2(){return y2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y2.apply(this,arguments)}function J6e(e,t){return tPe(e)||ePe(e,t)||Z6e(e,t)||Q6e()}function Q6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z6e(e,t){if(e){if(typeof e=="string")return SR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SR(e,t)}}function SR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ePe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function tPe(e){if(Array.isArray(e))return e}function jR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function AR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jR(Object(r),!0).forEach(function(n){rPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rPe(e,t,r){return t=nPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nPe(e){var t=aPe(e,"string");return jv(t)=="symbol"?t:t+""}function aPe(e,t){if(jv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ER=function(t,r,n,a,i){var s=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(s>0&&i instanceof Array){for(var f=[0,0,0,0],p=0,h=4;p<h;p++)f[p]=i[p]>s?s:i[p];d="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*f[1])),d+="L ".concat(t+n,",").concat(r+a-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-c*f[2],",").concat(r+a)),d+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-l*f[3])),d+="Z"}else if(s>0&&i===+i&&i>0){var g=Math.min(s,i);d="M ".concat(t,",").concat(r+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+c*g,",").concat(r,`
            L `).concat(t+n-c*g,",").concat(r,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*g,`
            L `).concat(t+n,",").concat(r+a-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+n-c*g,",").concat(r+a,`
            L `).concat(t+c*g,",").concat(r+a,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(r+a-l*g," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},iPe=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,s=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),f=Math.min(s,s+c),p=Math.max(s,s+c);return n>=u&&n<=d&&a>=f&&a<=p}return!1},sPe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},cT=function(t){var r=AR(AR({},sPe),t),n=D.useRef(),a=D.useState(-1),i=J6e(a,2),s=i[0],l=i[1];D.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var N=n.current.getTotalLength();N&&l(N)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,p=r.radius,h=r.className,g=r.animationEasing,m=r.animationDuration,x=r.animationBegin,y=r.isAnimationActive,v=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var b=cr("recharts-rectangle",h);return v?ye.createElement(Cl,{canBegin:s>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:m,animationEasing:g,isActive:v},function(N){var _=N.width,E=N.height,j=N.x,A=N.y;return ye.createElement(Cl,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:m,isActive:y,easing:g},ye.createElement("path",y2({},zt(r,!0),{className:b,d:ER(j,A,_,E,p),ref:n})))}):ye.createElement("path",y2({},zt(r,!0),{className:b,d:ER(c,u,d,f,p)}))},oPe=["points","className","baseLinePoints","connectNulls"];function Vh(){return Vh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vh.apply(this,arguments)}function lPe(e,t){if(e==null)return{};var r=cPe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function cPe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function TR(e){return hPe(e)||fPe(e)||dPe(e)||uPe()}function uPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dPe(e,t){if(e){if(typeof e=="string")return qA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qA(e,t)}}function fPe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hPe(e){if(Array.isArray(e))return qA(e)}function qA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var CR=function(t){return t&&t.x===+t.x&&t.y===+t.y},pPe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){CR(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),CR(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},xg=function(t,r){var n=pPe(t);r&&(n=[n.reduce(function(i,s){return[].concat(TR(i),TR(s))},[])]);var a=n.map(function(i){return i.reduce(function(s,l,c){return"".concat(s).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},mPe=function(t,r,n){var a=xg(t,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(xg(r.reverse(),n).slice(1))},gPe=function(t){var r=t.points,n=t.className,a=t.baseLinePoints,i=t.connectNulls,s=lPe(t,oPe);if(!r||!r.length)return null;var l=cr("recharts-polygon",n);if(a&&a.length){var c=s.stroke&&s.stroke!=="none",u=mPe(r,a,i);return ye.createElement("g",{className:l},ye.createElement("path",Vh({},zt(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),c?ye.createElement("path",Vh({},zt(s,!0),{fill:"none",d:xg(r,i)})):null,c?ye.createElement("path",Vh({},zt(s,!0),{fill:"none",d:xg(a,i)})):null)}var d=xg(r,i);return ye.createElement("path",Vh({},zt(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",className:l,d}))};function HA(){return HA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},HA.apply(this,arguments)}var i_=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,s=cr("recharts-dot",i);return r===+r&&n===+n&&a===+a?D.createElement("circle",HA({},zt(t,!1),Fb(t),{className:s,cx:r,cy:n,r:a})):null};function Av(e){"@babel/helpers - typeof";return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Av(e)}var vPe=["x","y","top","left","width","height","className"];function WA(){return WA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},WA.apply(this,arguments)}function kR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xPe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kR(Object(r),!0).forEach(function(n){yPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yPe(e,t,r){return t=bPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bPe(e){var t=wPe(e,"string");return Av(t)=="symbol"?t:t+""}function wPe(e,t){if(Av(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Av(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _Pe(e,t){if(e==null)return{};var r=NPe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function NPe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var SPe=function(t,r,n,a,i,s){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(s,",").concat(r,"h").concat(n)},jPe=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,s=t.top,l=s===void 0?0:s,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,p=t.height,h=p===void 0?0:p,g=t.className,m=_Pe(t,vPe),x=xPe({x:n,y:i,top:l,left:u,width:f,height:h},m);return!rt(n)||!rt(i)||!rt(f)||!rt(h)||!rt(l)||!rt(u)?null:ye.createElement("path",WA({},zt(x,!0),{className:cr("recharts-cross",g),d:SPe(n,i,f,h,l,u)}))},APe=e_,EPe=xq,TPe=Ll;function CPe(e,t){return e&&e.length?APe(e,TPe(t),EPe):void 0}var kPe=CPe;const OPe=Dr(kPe);var PPe=e_,LPe=Ll,RPe=yq;function DPe(e,t){return e&&e.length?PPe(e,LPe(t),RPe):void 0}var IPe=DPe;const MPe=Dr(IPe);var FPe=["cx","cy","angle","ticks","axisLine"],$Pe=["ticks","tick","angle","tickFormatter","stroke"];function tp(e){"@babel/helpers - typeof";return tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tp(e)}function yg(){return yg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yg.apply(this,arguments)}function OR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OR(Object(r),!0).forEach(function(n){s_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PR(e,t){if(e==null)return{};var r=BPe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function BPe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function UPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lH(n.key),n)}}function zPe(e,t,r){return t&&LR(e.prototype,t),r&&LR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function qPe(e,t,r){return t=b2(t),HPe(e,oH()?Reflect.construct(t,r||[],b2(e).constructor):t.apply(e,r))}function HPe(e,t){if(t&&(tp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WPe(e)}function WPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oH=function(){return!!e})()}function b2(e){return b2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},b2(e)}function VPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VA(e,t)}function VA(e,t){return VA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},VA(e,t)}function s_(e,t,r){return t=lH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lH(e){var t=GPe(e,"string");return tp(t)=="symbol"?t:t+""}function GPe(e,t){if(tp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(tp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var o_=function(e){function t(){return UPe(this,t),qPe(this,t,arguments)}return VPe(t,e),zPe(t,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,s=i.angle,l=i.cx,c=i.cy;return ln(l,c,a,s)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.angle,l=n.ticks,c=OPe(l,function(d){return d.coordinate||0}),u=MPe(l,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.angle,l=n.ticks,c=n.axisLine,u=PR(n,FPe),d=l.reduce(function(g,m){return[Math.min(g[0],m.coordinate),Math.max(g[1],m.coordinate)]},[1/0,-1/0]),f=ln(a,i,d[0],s),p=ln(a,i,d[1],s),h=Cd(Cd(Cd({},zt(u,!1)),{},{fill:"none"},zt(c,!1)),{},{x1:f.x,y1:f.y,x2:p.x,y2:p.y});return ye.createElement("line",yg({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,s=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=PR(a,$Pe),f=this.getTickTextAnchor(),p=zt(d,!1),h=zt(s,!1),g=i.map(function(m,x){var y=n.getTickValueCoord(m),v=Cd(Cd(Cd(Cd({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(y.x,", ").concat(y.y,")")},p),{},{stroke:"none",fill:u},h),{},{index:x},y),{},{payload:m});return ye.createElement(Ar,yg({className:cr("recharts-polar-radius-axis-tick",Gq(s)),key:"tick-".concat(m.coordinate)},Of(n.props,m,x)),t.renderTickItem(s,v,c?c(m.value,x):m.value))});return ye.createElement(Ar,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,s=n.tick;return!a||!a.length?null:ye.createElement(Ar,{className:cr("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),s&&this.renderTicks(),Pa.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var s;return ye.isValidElement(n)?s=ye.cloneElement(n,a):Kt(n)?s=n(a):s=ye.createElement(Pf,yg({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),s}}])}(D.PureComponent);s_(o_,"displayName","PolarRadiusAxis");s_(o_,"axisType","radiusAxis");s_(o_,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function rp(e){"@babel/helpers - typeof";return rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rp(e)}function Hd(){return Hd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hd.apply(this,arguments)}function RR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RR(Object(r),!0).forEach(function(n){l_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uH(n.key),n)}}function YPe(e,t,r){return t&&DR(e.prototype,t),r&&DR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function XPe(e,t,r){return t=w2(t),JPe(e,cH()?Reflect.construct(t,r||[],w2(e).constructor):t.apply(e,r))}function JPe(e,t){if(t&&(rp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QPe(e)}function QPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cH=function(){return!!e})()}function w2(e){return w2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},w2(e)}function ZPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GA(e,t)}function GA(e,t){return GA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},GA(e,t)}function l_(e,t,r){return t=uH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uH(e){var t=e8e(e,"string");return rp(t)=="symbol"?t:t+""}function e8e(e,t){if(rp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var t8e=Math.PI/180,IR=1e-5,c_=function(e){function t(){return KPe(this,t),XPe(this,t,arguments)}return ZPe(t,e),YPe(t,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,s=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,f=ln(i,s,l,n.coordinate),p=ln(i,s,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:p.x,y2:p.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*t8e),s;return i>IR?s=a==="outer"?"start":"end":i<-IR?s=a==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.radius,l=n.axisLine,c=n.axisLineType,u=kd(kd({},zt(this.props,!1)),{},{fill:"none"},zt(l,!1));if(c==="circle")return ye.createElement(i_,Hd({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:s}));var d=this.props.ticks,f=d.map(function(p){return ln(a,i,s,p.coordinate)});return ye.createElement(gPe,Hd({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,s=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=zt(this.props,!1),f=zt(s,!1),p=kd(kd({},d),{},{fill:"none"},zt(l,!1)),h=i.map(function(g,m){var x=n.getTickLineCoord(g),y=n.getTickTextAnchor(g),v=kd(kd(kd({textAnchor:y},d),{},{stroke:"none",fill:u},f),{},{index:m,payload:g,x:x.x2,y:x.y2});return ye.createElement(Ar,Hd({className:cr("recharts-polar-angle-axis-tick",Gq(s)),key:"tick-".concat(g.coordinate)},Of(n.props,g,m)),l&&ye.createElement("line",Hd({className:"recharts-polar-angle-axis-tick-line"},p,x)),s&&t.renderTickItem(s,v,c?c(g.value,m):g.value))});return ye.createElement(Ar,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,s=n.axisLine;return i<=0||!a||!a.length?null:ye.createElement(Ar,{className:cr("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var s;return ye.isValidElement(n)?s=ye.cloneElement(n,a):Kt(n)?s=n(a):s=ye.createElement(Pf,Hd({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),s}}])}(D.PureComponent);l_(c_,"displayName","PolarAngleAxis");l_(c_,"axisType","angleAxis");l_(c_,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var r8e=pz,n8e=r8e(Object.getPrototypeOf,Object),a8e=n8e,i8e=Fc,s8e=a8e,o8e=$c,l8e="[object Object]",c8e=Function.prototype,u8e=Object.prototype,dH=c8e.toString,d8e=u8e.hasOwnProperty,f8e=dH.call(Object);function h8e(e){if(!o8e(e)||i8e(e)!=l8e)return!1;var t=s8e(e);if(t===null)return!0;var r=d8e.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&dH.call(r)==f8e}var p8e=h8e;const m8e=Dr(p8e);var g8e=Fc,v8e=$c,x8e="[object Boolean]";function y8e(e){return e===!0||e===!1||v8e(e)&&g8e(e)==x8e}var b8e=y8e;const w8e=Dr(b8e);function Ev(e){"@babel/helpers - typeof";return Ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ev(e)}function _2(){return _2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_2.apply(this,arguments)}function _8e(e,t){return A8e(e)||j8e(e,t)||S8e(e,t)||N8e()}function N8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S8e(e,t){if(e){if(typeof e=="string")return MR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MR(e,t)}}function MR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j8e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function A8e(e){if(Array.isArray(e))return e}function FR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $R(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FR(Object(r),!0).forEach(function(n){E8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function E8e(e,t,r){return t=T8e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T8e(e){var t=C8e(e,"string");return Ev(t)=="symbol"?t:t+""}function C8e(e,t){if(Ev(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ev(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BR=function(t,r,n,a,i){var s=n-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-s/2,",").concat(r+i),l+="L ".concat(t+n-s/2-a,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},k8e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},O8e=function(t){var r=$R($R({},k8e),t),n=D.useRef(),a=D.useState(-1),i=_8e(a,2),s=i[0],l=i[1];D.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var b=n.current.getTotalLength();b&&l(b)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,p=r.height,h=r.className,g=r.animationEasing,m=r.animationDuration,x=r.animationBegin,y=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||p!==+p||d===0&&f===0||p===0)return null;var v=cr("recharts-trapezoid",h);return y?ye.createElement(Cl,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:p,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:p,x:c,y:u},duration:m,animationEasing:g,isActive:y},function(b){var N=b.upperWidth,_=b.lowerWidth,E=b.height,j=b.x,A=b.y;return ye.createElement(Cl,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:m,easing:g},ye.createElement("path",_2({},zt(r,!0),{className:v,d:BR(j,A,N,_,E),ref:n})))}):ye.createElement("g",null,ye.createElement("path",_2({},zt(r,!0),{className:v,d:BR(c,u,d,f,p)})))},P8e=["option","shapeType","propTransformer","activeClassName","isActive"];function Tv(e){"@babel/helpers - typeof";return Tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tv(e)}function L8e(e,t){if(e==null)return{};var r=R8e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function R8e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function UR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function N2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UR(Object(r),!0).forEach(function(n){D8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function D8e(e,t,r){return t=I8e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I8e(e){var t=M8e(e,"string");return Tv(t)=="symbol"?t:t+""}function M8e(e,t){if(Tv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F8e(e,t){return N2(N2({},t),e)}function $8e(e,t){return e==="symbols"}function zR(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return ye.createElement(cT,r);case"trapezoid":return ye.createElement(O8e,r);case"sector":return ye.createElement(Xq,r);case"symbols":if($8e(t))return ye.createElement(TE,r);break;default:return null}}function B8e(e){return D.isValidElement(e)?e.props:e}function fH(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?F8e:n,i=e.activeClassName,s=i===void 0?"recharts-active-shape":i,l=e.isActive,c=L8e(e,P8e),u;if(D.isValidElement(t))u=D.cloneElement(t,N2(N2({},c),B8e(t)));else if(Kt(t))u=t(c);else if(m8e(t)&&!w8e(t)){var d=a(t,c);u=ye.createElement(zR,{shapeType:r,elementProps:d})}else{var f=c;u=ye.createElement(zR,{shapeType:r,elementProps:f})}return l?ye.createElement(Ar,{className:s},u):u}function u_(e,t){return t!=null&&"trapezoids"in e.props}function d_(e,t){return t!=null&&"sectors"in e.props}function Cv(e,t){return t!=null&&"points"in e.props}function U8e(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function z8e(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function q8e(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function H8e(e,t){var r;return u_(e,t)?r=U8e:d_(e,t)?r=z8e:Cv(e,t)&&(r=q8e),r}function W8e(e,t){var r;return u_(e,t)?r="trapezoids":d_(e,t)?r="sectors":Cv(e,t)&&(r="points"),r}function V8e(e,t){if(u_(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(d_(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Cv(e,t)?t.payload:{}}function G8e(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=W8e(r,t),i=V8e(r,t),s=n.filter(function(c,u){var d=gx(i,c),f=r.props[a].filter(function(g){var m=H8e(r,t);return m(g,t)}),p=r.props[a].indexOf(f[f.length-1]),h=u===p;return d&&h}),l=n.indexOf(s[s.length-1]);return l}var ky;function np(e){"@babel/helpers - typeof";return np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},np(e)}function Gh(){return Gh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gh.apply(this,arguments)}function qR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qR(Object(r),!0).forEach(function(n){eo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pH(n.key),n)}}function Y8e(e,t,r){return t&&HR(e.prototype,t),r&&HR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function X8e(e,t,r){return t=S2(t),J8e(e,hH()?Reflect.construct(t,r||[],S2(e).constructor):t.apply(e,r))}function J8e(e,t){if(t&&(np(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q8e(e)}function Q8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hH=function(){return!!e})()}function S2(e){return S2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},S2(e)}function Z8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KA(e,t)}function KA(e,t){return KA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},KA(e,t)}function eo(e,t,r){return t=pH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pH(e){var t=eLe(e,"string");return np(t)=="symbol"?t:t+""}function eLe(e,t){if(np(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(np(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var go=function(e){function t(r){var n;return K8e(this,t),n=X8e(this,t,[r]),eo(n,"pieRef",null),eo(n,"sectorRefs",[]),eo(n,"id",Dp("recharts-pie-")),eo(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Kt(a)&&a()}),eo(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Kt(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return Z8e(t,e),Y8e(t,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,d=zt(this.props,!1),f=zt(s,!1),p=zt(l,!1),h=s&&s.offsetRadius||20,g=n.map(function(m,x){var y=(m.startAngle+m.endAngle)/2,v=ln(m.cx,m.cy,m.outerRadius+h,y),b=nn(nn(nn(nn({},d),m),{},{stroke:"none"},f),{},{index:x,textAnchor:t.getTextAnchor(v.x,m.cx)},v),N=nn(nn(nn(nn({},d),m),{},{fill:"none",stroke:m.fill},p),{},{index:x,points:[ln(m.cx,m.cy,m.outerRadius,y),v]}),_=c;return ar(c)&&ar(u)?_="value":ar(c)&&(_=u),ye.createElement(Ar,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(x)},l&&t.renderLabelLineItem(l,N,"line"),t.renderLabelItem(s,b,Na(m,_)))});return ye.createElement(Ar,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,s=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=a.isActiveIndex(d),p=c&&a.hasActiveIndex()?c:null,h=f?s:p,g=nn(nn({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return ye.createElement(Ar,Gh({ref:function(x){x&&!a.sectorRefs.includes(x)&&a.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},Of(a.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),ye.createElement(fH,Gh({option:h,isActive:f,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,s=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state,p=f.prevSectors,h=f.prevIsAnimationActive;return ye.createElement(Cl,{begin:l,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var m=g.t,x=[],y=i&&i[0],v=y.startAngle;return i.forEach(function(b,N){var _=p&&p[N],E=N>0?Ps(b,"paddingAngle",0):0;if(_){var j=js(_.endAngle-_.startAngle,b.endAngle-b.startAngle),A=nn(nn({},b),{},{startAngle:v+E,endAngle:v+j(m)+E});x.push(A),v=A.endAngle}else{var T=b.endAngle,P=b.startAngle,O=js(0,T-P),R=O(m),I=nn(nn({},b),{},{startAngle:v+E,endAngle:v+R+E});x.push(I),v=I.endAngle}}),ye.createElement(Ar,null,n.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var s=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[s].focus(),a.setState({sectorToFocus:s});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,s=this.state.prevSectors;return i&&a&&a.length&&(!s||!gx(s,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,s=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,f=a.innerRadius,p=a.outerRadius,h=a.isAnimationActive,g=this.state.isAnimationFinished;if(i||!s||!s.length||!rt(u)||!rt(d)||!rt(f)||!rt(p))return null;var m=cr("recharts-pie",l);return ye.createElement(Ar,{tabIndex:this.props.rootTabIndex,className:m,ref:function(y){n.pieRef=y}},this.renderSectors(),c&&this.renderLabels(s),Pa.renderCallByParent(this.props,null,!1),(!h||g)&&bc.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(ye.isValidElement(n))return ye.cloneElement(n,a);if(Kt(n))return n(a);var s=cr("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return ye.createElement(p2,Gh({},a,{key:i,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(n,a,i){if(ye.isValidElement(n))return ye.cloneElement(n,a);var s=i;if(Kt(n)&&(s=n(a),ye.isValidElement(s)))return s;var l=cr("recharts-pie-label-text",typeof n!="boolean"&&!Kt(n)?n.className:"");return ye.createElement(Pf,Gh({},a,{alignmentBaseline:"middle",className:l}),s)}}])}(D.PureComponent);ky=go;eo(go,"displayName","Pie");eo(go,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Xf.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});eo(go,"parseDeltaAngle",function(e,t){var r=Li(t-e),n=Math.min(Math.abs(t-e),360);return r*n});eo(go,"getRealPieData",function(e){var t=e.data,r=e.children,n=zt(e,!1),a=Ls(r,Rl);return t&&t.length?t.map(function(i,s){return nn(nn(nn({payload:i},n),i),a&&a[s]&&a[s].props)}):a&&a.length?a.map(function(i){return nn(nn({},n),i.props)}):[]});eo(go,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,i=t.height,s=Vq(a,i),l=n+Ri(e.cx,a,a/2),c=r+Ri(e.cy,i,i/2),u=Ri(e.innerRadius,s,0),d=Ri(e.outerRadius,s,s*.8),f=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});eo(go,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?nn(nn({},t.type.defaultProps),t.props):t.props,a=ky.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,s=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,p=n.tooltipType,h=Math.abs(n.minAngle),g=ky.parseCoordinateOfPie(n,r),m=ky.parseDeltaAngle(s,l),x=Math.abs(m),y=u;ar(u)&&ar(f)?(Yo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y="value"):ar(u)&&(Yo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y=f);var v=a.filter(function(A){return Na(A,y,0)!==0}).length,b=(x>=360?v:v-1)*c,N=x-v*h-b,_=a.reduce(function(A,T){var P=Na(T,y,0);return A+(rt(P)?P:0)},0),E;if(_>0){var j;E=a.map(function(A,T){var P=Na(A,y,0),O=Na(A,d,T),R=(rt(P)?P:0)/_,I;T?I=j.endAngle+Li(m)*c*(P!==0?1:0):I=s;var z=I+Li(m)*((P!==0?h:0)+R*N),Y=(I+z)/2,ie=(g.innerRadius+g.outerRadius)/2,re=[{name:O,value:P,payload:A,dataKey:y,type:p}],X=ln(g.cx,g.cy,ie,Y);return j=nn(nn(nn({percent:R,cornerRadius:i,name:O,tooltipPayload:re,midAngle:Y,middleRadius:ie,tooltipPosition:X},A),g),{},{value:Na(A,y),startAngle:I,endAngle:z,payload:A,paddingAngle:Li(m)*c}),j})}return nn(nn({},g),{},{sectors:E,data:a})});var tLe=Math.ceil,rLe=Math.max;function nLe(e,t,r,n){for(var a=-1,i=rLe(tLe((t-e)/(r||1)),0),s=Array(i);i--;)s[n?i:++a]=e,e+=r;return s}var aLe=nLe,iLe=Lz,WR=1/0,sLe=17976931348623157e292;function oLe(e){if(!e)return e===0?e:0;if(e=iLe(e),e===WR||e===-WR){var t=e<0?-1:1;return t*sLe}return e===e?e:0}var mH=oLe,lLe=aLe,cLe=Gw,UN=mH;function uLe(e){return function(t,r,n){return n&&typeof n!="number"&&cLe(t,r,n)&&(r=n=void 0),t=UN(t),r===void 0?(r=t,t=0):r=UN(r),n=n===void 0?t<r?1:-1:UN(n),lLe(t,r,n,e)}}var dLe=uLe,fLe=dLe,hLe=fLe(),pLe=hLe;const j2=Dr(pLe);function kv(e){"@babel/helpers - typeof";return kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kv(e)}function VR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function GR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VR(Object(r),!0).forEach(function(n){gH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gH(e,t,r){return t=mLe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mLe(e){var t=gLe(e,"string");return kv(t)=="symbol"?t:t+""}function gLe(e,t){if(kv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vLe=["Webkit","Moz","O","ms"],xLe=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=vLe.reduce(function(i,s){return GR(GR({},i),{},gH({},s+n,r))},{});return a[t]=r,a};function ap(e){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ap(e)}function A2(){return A2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A2.apply(this,arguments)}function KR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KR(Object(r),!0).forEach(function(n){xs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xH(n.key),n)}}function bLe(e,t,r){return t&&YR(e.prototype,t),r&&YR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function wLe(e,t,r){return t=E2(t),_Le(e,vH()?Reflect.construct(t,r||[],E2(e).constructor):t.apply(e,r))}function _Le(e,t){if(t&&(ap(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NLe(e)}function NLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vH=function(){return!!e})()}function E2(e){return E2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},E2(e)}function SLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YA(e,t)}function YA(e,t){return YA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},YA(e,t)}function xs(e,t,r){return t=xH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xH(e){var t=jLe(e,"string");return ap(t)=="symbol"?t:t+""}function jLe(e,t){if(ap(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ALe=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,s=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=mg().domain(j2(0,c)).range([i,i+s-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},XR=function(t){return t.changedTouches&&!!t.changedTouches.length},ip=function(e){function t(r){var n;return yLe(this,t),n=wLe(this,t,[r]),xs(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),xs(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),xs(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,s=a.onDragEnd,l=a.startIndex;s==null||s({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),xs(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),xs(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),xs(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),xs(n,"handleSlideDragStart",function(a){var i=XR(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return SLe(t,e),bLe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,s=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(a,i),p=Math.max(a,i),h=t.getIndexInRange(s,f),g=t.getIndexInRange(s,p);return{startIndex:h-h%c,endIndex:g===d?d:g-g%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,s=a.tickFormatter,l=a.dataKey,c=Na(i[n],l,n);return Kt(s)?s(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,s=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,p=c.startIndex,h=c.endIndex,g=c.onChange,m=n.pageX-i;m>0?m=Math.min(m,u+d-f-l,u+d-f-s):m<0&&(m=Math.max(m,u-s,u-l));var x=this.getIndex({startX:s+m,endX:l+m});(x.startIndex!==p||x.endIndex!==h)&&g&&g(x),this.setState({startX:s+m,endX:l+m,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=XR(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,s=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[s],d=this.props,f=d.x,p=d.width,h=d.travellerWidth,g=d.onChange,m=d.gap,x=d.data,y={startX:this.state.startX,endX:this.state.endX},v=n.pageX-i;v>0?v=Math.min(v,f+p-h-u):v<0&&(v=Math.max(v,f-u)),y[s]=u+v;var b=this.getIndex(y),N=b.startIndex,_=b.endIndex,E=function(){var A=x.length-1;return s==="startX"&&(l>c?N%m===0:_%m===0)||l<c&&_===A||s==="endX"&&(l>c?_%m===0:N%m===0)||l>c&&_===A};this.setState(xs(xs({},s,u+v),"brushMoveStartX",n.pageX),function(){g&&E()&&g(b)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,s=this.state,l=s.scaleValues,c=s.startX,u=s.endX,d=this.state[a],f=l.indexOf(d);if(f!==-1){var p=f+n;if(!(p===-1||p>=l.length)){var h=l[p];a==="startX"&&h>=u||a==="endX"&&h<=c||this.setState(xs({},a,h),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,l=n.height,c=n.fill,u=n.stroke;return ye.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:s,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=D.Children.only(u);return f?ye.cloneElement(f,{x:a,y:i,width:s,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,s,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,p=c.traveller,h=c.ariaLabel,g=c.data,m=c.startIndex,x=c.endIndex,y=Math.max(n,this.props.x),v=zN(zN({},zt(this.props,!1)),{},{x:y,y:u,width:d,height:f}),b=h||"Min value: ".concat((i=g[m])===null||i===void 0?void 0:i.name,", Max value: ").concat((s=g[x])===null||s===void 0?void 0:s.name);return ye.createElement(Ar,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(_){["ArrowLeft","ArrowRight"].includes(_.key)&&(_.preventDefault(),_.stopPropagation(),l.handleTravellerMoveKeyboard(_.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(p,v))}},{key:"renderSlide",value:function(n,a){var i=this.props,s=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return ye.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:s,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,s=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,p=d.endX,h=5,g={pointerEvents:"none",fill:u};return ye.createElement(Ar,{className:"recharts-brush-texts"},ye.createElement(Pf,A2({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,p)-h,y:s+l/2},g),this.getTextOfTick(a)),ye.createElement(Pf,A2({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,p)+c+h,y:s+l/2},g),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,s=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,p=this.state,h=p.startX,g=p.endX,m=p.isTextActive,x=p.isSlideMoving,y=p.isTravellerMoving,v=p.isTravellerFocused;if(!a||!a.length||!rt(l)||!rt(c)||!rt(u)||!rt(d)||u<=0||d<=0)return null;var b=cr("recharts-brush",i),N=ye.Children.count(s)===1,_=xLe("userSelect","none");return ye.createElement(Ar,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:_},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(h,g),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(g,"endX"),(m||x||y||v||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,s=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return ye.createElement(ye.Fragment,null,ye.createElement("rect",{x:a,y:i,width:s,height:l,fill:c,stroke:"none"}),ye.createElement("line",{x1:a+1,y1:u,x2:a+s-1,y2:u,fill:"none",stroke:"#fff"}),ye.createElement("line",{x1:a+1,y1:u+2,x2:a+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return ye.isValidElement(n)?i=ye.cloneElement(n,a):Kt(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,s=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return zN({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:s},i&&i.length?ALe({data:i,width:s,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(s!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+s-c]);var p=a.scale.domain().map(function(h){return a.scale(h)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:s,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,s=0,l=i-1;l-s>1;){var c=Math.floor((s+l)/2);n[c]>a?l=c:s=c}return a>=n[l]?l:s}}])}(D.PureComponent);xs(ip,"displayName","Brush");xs(ip,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var ELe=DE;function TLe(e,t){var r;return ELe(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var CLe=TLe,kLe=sz,OLe=Ll,PLe=CLe,LLe=os,RLe=Gw;function DLe(e,t,r){var n=LLe(e)?kLe:PLe;return r&&RLe(e,t,r)&&(t=void 0),n(e,OLe(t))}var ILe=DLe;const MLe=Dr(ILe);var jl=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},JR=Tz;function FLe(e,t,r){t=="__proto__"&&JR?JR(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var $Le=FLe,BLe=$Le,ULe=Az,zLe=Ll;function qLe(e,t){var r={};return t=zLe(t),ULe(e,function(n,a,i){BLe(r,a,t(n,a,i))}),r}var HLe=qLe;const WLe=Dr(HLe);function VLe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var GLe=VLe,KLe=DE;function YLe(e,t){var r=!0;return KLe(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var XLe=YLe,JLe=GLe,QLe=XLe,ZLe=Ll,eRe=os,tRe=Gw;function rRe(e,t,r){var n=eRe(e)?JLe:QLe;return r&&tRe(e,t,r)&&(t=void 0),n(e,ZLe(t))}var nRe=rRe;const yH=Dr(nRe);var aRe=["x","y"];function Ov(e){"@babel/helpers - typeof";return Ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ov(e)}function XA(){return XA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},XA.apply(this,arguments)}function QR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Im(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QR(Object(r),!0).forEach(function(n){iRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iRe(e,t,r){return t=sRe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sRe(e){var t=oRe(e,"string");return Ov(t)=="symbol"?t:t+""}function oRe(e,t){if(Ov(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ov(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lRe(e,t){if(e==null)return{};var r=cRe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function cRe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function uRe(e,t){var r=e.x,n=e.y,a=lRe(e,aRe),i="".concat(r),s=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),p=parseInt(f,10);return Im(Im(Im(Im(Im({},t),a),s?{x:s}:{}),c?{y:c}:{}),{},{height:d,width:p,name:t.name,radius:t.radius})}function ZR(e){return ye.createElement(fH,XA({shapeType:"rectangle",propTransformer:uRe,activeClassName:"recharts-active-bar"},e))}var dRe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=rt(n)||P1e(n);return i?t(n,a):(i||Rf(),r)}},fRe=["value","background"],bH;function sp(e){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sp(e)}function hRe(e,t){if(e==null)return{};var r=pRe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pRe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function T2(){return T2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T2.apply(this,arguments)}function eD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eD(Object(r),!0).forEach(function(n){Pu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_H(n.key),n)}}function gRe(e,t,r){return t&&tD(e.prototype,t),r&&tD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vRe(e,t,r){return t=C2(t),xRe(e,wH()?Reflect.construct(t,r||[],C2(e).constructor):t.apply(e,r))}function xRe(e,t){if(t&&(sp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yRe(e)}function yRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wH=function(){return!!e})()}function C2(e){return C2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},C2(e)}function bRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JA(e,t)}function JA(e,t){return JA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},JA(e,t)}function Pu(e,t,r){return t=_H(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _H(e){var t=wRe(e,"string");return sp(t)=="symbol"?t:t+""}function wRe(e,t){if(sp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ii=function(e){function t(){var r;mRe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=vRe(this,t,[].concat(a)),Pu(r,"state",{isAnimationFinished:!1}),Pu(r,"id",Dp("recharts-bar-")),Pu(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),s&&s()}),Pu(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),s&&s()}),r}return bRe(t,e),gRe(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,s=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=zt(this.props,!1);return n&&n.map(function(f,p){var h=p===c,g=h?u:s,m=sa(sa(sa({},d),f),{},{isActive:h,option:g,index:p,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return ye.createElement(Ar,T2({className:"recharts-bar-rectangle"},Of(a.props,f,p),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(p)}),ye.createElement(ZR,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,s=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,p=this.state.prevData;return ye.createElement(Cl,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var g=h.t,m=i.map(function(x,y){var v=p&&p[y];if(v){var b=js(v.x,x.x),N=js(v.y,x.y),_=js(v.width,x.width),E=js(v.height,x.height);return sa(sa({},x),{},{x:b(g),y:N(g),width:_(g),height:E(g)})}if(s==="horizontal"){var j=js(0,x.height),A=j(g);return sa(sa({},x),{},{y:x.y+x.height-A,height:A})}var T=js(0,x.width),P=T(g);return sa(sa({},x),{},{width:P})});return ye.createElement(Ar,null,n.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,s=this.state.prevData;return i&&a&&a.length&&(!s||!gx(s,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,s=a.dataKey,l=a.activeIndex,c=zt(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,p=hRe(u,fRe);if(!f)return null;var h=sa(sa(sa(sa(sa({},p),{},{fill:"#eee"},f),c),Of(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:s,index:d,className:"recharts-bar-background-rectangle"});return ye.createElement(ZR,T2({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},h))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=Ls(d,vx);if(!f)return null;var p=u==="vertical"?s[0].height/2:s[0].width/2,h=function(x,y){var v=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:v,errorVal:Na(x,y)}},g={clipPath:n?"url(#clipPath-".concat(a,")"):null};return ye.createElement(Ar,g,f.map(function(m){return ye.cloneElement(m,{key:"error-bar-".concat(a,"-").concat(m.props.dataKey),data:s,xAxis:l,yAxis:c,layout:u,offset:p,dataPointFormatter:h})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,s=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,p=n.height,h=n.isAnimationActive,g=n.background,m=n.id;if(a||!i||!i.length)return null;var x=this.state.isAnimationFinished,y=cr("recharts-bar",s),v=l&&l.allowDataOverflow,b=c&&c.allowDataOverflow,N=v||b,_=ar(m)?this.id:m;return ye.createElement(Ar,{className:y},v||b?ye.createElement("defs",null,ye.createElement("clipPath",{id:"clipPath-".concat(_)},ye.createElement("rect",{x:v?u:u-f/2,y:b?d:d-p/2,width:v?f:f*2,height:b?p:p*2}))):null,ye.createElement(Ar,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(_,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,_),(!h||x)&&bc.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(D.PureComponent);bH=Ii;Pu(Ii,"displayName","Bar");Pu(Ii,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Xf.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Pu(Ii,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,s=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,p=e.offset,h=JCe(n,r);if(!h)return null;var g=t.layout,m=r.type.defaultProps,x=m!==void 0?sa(sa({},m),r.props):r.props,y=x.dataKey,v=x.children,b=x.minPointSize,N=g==="horizontal"?s:i,_=u?N.scale.domain():null,E=ake({numericAxis:N}),j=Ls(v,Rl),A=f.map(function(T,P){var O,R,I,z,Y,ie;u?O=QCe(u[d+P],_):(O=Na(T,y),Array.isArray(O)||(O=[E,O]));var re=dRe(b,bH.defaultProps.minPointSize)(O[1],P);if(g==="horizontal"){var X,oe=[s.scale(O[0]),s.scale(O[1])],we=oe[0],_e=oe[1];R=GL({axis:i,ticks:l,bandSize:a,offset:h.offset,entry:T,index:P}),I=(X=_e??we)!==null&&X!==void 0?X:void 0,z=h.size;var k=we-_e;if(Y=Number.isNaN(k)?0:k,ie={x:R,y:s.y,width:z,height:s.height},Math.abs(re)>0&&Math.abs(Y)<Math.abs(re)){var F=Li(Y||re)*(Math.abs(re)-Math.abs(Y));I-=F,Y+=F}}else{var B=[i.scale(O[0]),i.scale(O[1])],U=B[0],J=B[1];if(R=U,I=GL({axis:s,ticks:c,bandSize:a,offset:h.offset,entry:T,index:P}),z=J-U,Y=h.size,ie={x:i.x,y:I,width:i.width,height:Y},Math.abs(re)>0&&Math.abs(z)<Math.abs(re)){var me=Li(z||re)*(Math.abs(re)-Math.abs(z));z+=me}}return sa(sa(sa({},T),{},{x:R,y:I,width:z,height:Y,value:u?O:O[1],payload:T,background:ie},j&&j[P]&&j[P].props),{},{tooltipPayload:[Hq(r,T)],tooltipPosition:{x:R+z/2,y:I+Y/2}})});return sa({data:A,layout:g},p)});function Pv(e){"@babel/helpers - typeof";return Pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pv(e)}function _Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,NH(n.key),n)}}function NRe(e,t,r){return t&&rD(e.prototype,t),r&&rD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function nD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nD(Object(r),!0).forEach(function(n){f_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f_(e,t,r){return t=NH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NH(e){var t=SRe(e,"string");return Pv(t)=="symbol"?t:t+""}function SRe(e,t){if(Pv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SH=function(t,r,n,a,i){var s=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},p=!!ws(u,Ii);return d.reduce(function(h,g){var m=r[g],x=m.orientation,y=m.domain,v=m.padding,b=v===void 0?{}:v,N=m.mirror,_=m.reversed,E="".concat(x).concat(N?"Mirror":""),j,A,T,P,O;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var R=y[1]-y[0],I=1/0,z=m.categoricalDomain.sort(D1e);if(z.forEach(function(B,U){U>0&&(I=Math.min((B||0)-(z[U-1]||0),I))}),Number.isFinite(I)){var Y=I/R,ie=m.layout==="vertical"?n.height:n.width;if(m.padding==="gap"&&(j=Y*ie/2),m.padding==="no-gap"){var re=Ri(t.barCategoryGap,Y*ie),X=Y*ie/2;j=X-re-(X-re)/ie*re}}}a==="xAxis"?A=[n.left+(b.left||0)+(j||0),n.left+n.width-(b.right||0)-(j||0)]:a==="yAxis"?A=c==="horizontal"?[n.top+n.height-(b.bottom||0),n.top+(b.top||0)]:[n.top+(b.top||0)+(j||0),n.top+n.height-(b.bottom||0)-(j||0)]:A=m.range,_&&(A=[A[1],A[0]]);var oe=Bq(m,i,p),we=oe.scale,_e=oe.realScaleType;we.domain(y).range(A),Uq(we);var k=zq(we,Fo(Fo({},m),{},{realScaleType:_e}));a==="xAxis"?(O=x==="top"&&!N||x==="bottom"&&N,T=n.left,P=f[E]-O*m.height):a==="yAxis"&&(O=x==="left"&&!N||x==="right"&&N,T=f[E]-O*m.width,P=n.top);var F=Fo(Fo(Fo({},m),k),{},{realScaleType:_e,x:T,y:P,scale:we,width:a==="xAxis"?n.width:m.width,height:a==="yAxis"?n.height:m.height});return F.bandSize=d2(F,k),!m.hide&&a==="xAxis"?f[E]+=(O?-1:1)*F.height:m.hide||(f[E]+=(O?-1:1)*F.width),Fo(Fo({},h),{},f_({},g,F))},{})},jH=function(t,r){var n=t.x,a=t.y,i=r.x,s=r.y;return{x:Math.min(n,i),y:Math.min(a,s),width:Math.abs(i-n),height:Math.abs(s-a)}},jRe=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return jH({x:r,y:n},{x:a,y:i})},AH=function(){function e(t){_Re(this,e),this.scale=t}return NRe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();f_(AH,"EPS",1e-4);var uT=function(t){var r=Object.keys(t).reduce(function(n,a){return Fo(Fo({},n),{},f_({},a,AH.create(t[a])))},{});return Fo(Fo({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.bandAware,l=i.position;return WLe(a,function(c,u){return r[u].apply(c,{bandAware:s,position:l})})},isInRange:function(a){return yH(a,function(i,s){return r[s].isInRange(i)})}})};function ARe(e){return(e%180+180)%180}var ERe=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=ARe(a),s=i*Math.PI/180,l=Math.atan(n/r),c=s>l&&s<Math.PI-l?n/Math.sin(s):r/Math.cos(s);return Math.abs(c)},TRe=Ll,CRe=dx,kRe=Ww;function ORe(e){return function(t,r,n){var a=Object(t);if(!CRe(t)){var i=TRe(r);t=kRe(t),r=function(l){return i(a[l],l,a)}}var s=e(t,r,n);return s>-1?a[i?t[s]:s]:void 0}}var PRe=ORe,LRe=mH;function RRe(e){var t=LRe(e),r=t%1;return t===t?r?t-r:t:0}var DRe=RRe,IRe=bz,MRe=Ll,FRe=DRe,$Re=Math.max;function BRe(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:FRe(r);return a<0&&(a=$Re(n+a,0)),IRe(e,MRe(t),a)}var URe=BRe,zRe=PRe,qRe=URe,HRe=zRe(qRe),WRe=HRe;const VRe=Dr(WRe);var GRe=Fxe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),dT=D.createContext(void 0),fT=D.createContext(void 0),EH=D.createContext(void 0),TH=D.createContext({}),CH=D.createContext(void 0),kH=D.createContext(0),OH=D.createContext(0),aD=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,s=t.clipPathId,l=t.children,c=t.width,u=t.height,d=GRe(i);return ye.createElement(dT.Provider,{value:n},ye.createElement(fT.Provider,{value:a},ye.createElement(TH.Provider,{value:i},ye.createElement(EH.Provider,{value:d},ye.createElement(CH.Provider,{value:s},ye.createElement(kH.Provider,{value:u},ye.createElement(OH.Provider,{value:c},l)))))))},KRe=function(){return D.useContext(CH)},PH=function(t){var r=D.useContext(dT);r==null&&Rf();var n=r[t];return n==null&&Rf(),n},YRe=function(){var t=D.useContext(dT);return gu(t)},XRe=function(){var t=D.useContext(fT),r=VRe(t,function(n){return yH(n.domain,Number.isFinite)});return r||gu(t)},LH=function(t){var r=D.useContext(fT);r==null&&Rf();var n=r[t];return n==null&&Rf(),n},JRe=function(){var t=D.useContext(EH);return t},QRe=function(){return D.useContext(TH)},hT=function(){return D.useContext(OH)},pT=function(){return D.useContext(kH)};function op(e){"@babel/helpers - typeof";return op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},op(e)}function ZRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eDe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DH(n.key),n)}}function tDe(e,t,r){return t&&eDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rDe(e,t,r){return t=k2(t),nDe(e,RH()?Reflect.construct(t,r||[],k2(e).constructor):t.apply(e,r))}function nDe(e,t){if(t&&(op(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aDe(e)}function aDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RH=function(){return!!e})()}function k2(e){return k2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},k2(e)}function iDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QA(e,t)}function QA(e,t){return QA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},QA(e,t)}function iD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iD(Object(r),!0).forEach(function(n){mT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mT(e,t,r){return t=DH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DH(e){var t=sDe(e,"string");return op(t)=="symbol"?t:t+""}function sDe(e,t){if(op(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(op(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function oDe(e,t){return dDe(e)||uDe(e,t)||cDe(e,t)||lDe()}function lDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cDe(e,t){if(e){if(typeof e=="string")return oD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oD(e,t)}}function oD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function uDe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function dDe(e){if(Array.isArray(e))return e}function ZA(){return ZA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ZA.apply(this,arguments)}var fDe=function(t,r){var n;return ye.isValidElement(t)?n=ye.cloneElement(t,r):Kt(t)?n=t(r):n=ye.createElement("line",ZA({},r,{className:"recharts-reference-line-line"})),n},hDe=function(t,r,n,a,i,s,l,c,u){var d=i.x,f=i.y,p=i.width,h=i.height;if(n){var g=u.y,m=t.y.apply(g,{position:s});if(jl(u,"discard")&&!t.y.isInRange(m))return null;var x=[{x:d+p,y:m},{x:d,y:m}];return c==="left"?x.reverse():x}if(r){var y=u.x,v=t.x.apply(y,{position:s});if(jl(u,"discard")&&!t.x.isInRange(v))return null;var b=[{x:v,y:f+h},{x:v,y:f}];return l==="top"?b.reverse():b}if(a){var N=u.segment,_=N.map(function(E){return t.apply(E,{position:s})});return jl(u,"discard")&&MLe(_,function(E){return!t.isInRange(E)})?null:_}return null};function pDe(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,s=e.shape,l=e.className,c=e.alwaysShow,u=KRe(),d=PH(a),f=LH(i),p=JRe();if(!u||!p)return null;Yo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=uT({x:d.scale,y:f.scale}),g=ja(t),m=ja(r),x=n&&n.length===2,y=hDe(h,g,m,x,p,e.position,d.orientation,f.orientation,e);if(!y)return null;var v=oDe(y,2),b=v[0],N=b.x,_=b.y,E=v[1],j=E.x,A=E.y,T=jl(e,"hidden")?"url(#".concat(u,")"):void 0,P=sD(sD({clipPath:T},zt(e,!0)),{},{x1:N,y1:_,x2:j,y2:A});return ye.createElement(Ar,{className:cr("recharts-reference-line",l)},fDe(s,P),Pa.renderCallByParent(e,jRe({x1:N,y1:_,x2:j,y2:A})))}var gT=function(e){function t(){return ZRe(this,t),rDe(this,t,arguments)}return iDe(t,e),tDe(t,[{key:"render",value:function(){return ye.createElement(pDe,this.props)}}])}(ye.Component);mT(gT,"displayName","ReferenceLine");mT(gT,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function e4(){return e4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e4.apply(this,arguments)}function lp(e){"@babel/helpers - typeof";return lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lp(e)}function lD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lD(Object(r),!0).forEach(function(n){h_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gDe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MH(n.key),n)}}function vDe(e,t,r){return t&&gDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xDe(e,t,r){return t=O2(t),yDe(e,IH()?Reflect.construct(t,r||[],O2(e).constructor):t.apply(e,r))}function yDe(e,t){if(t&&(lp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bDe(e)}function bDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IH=function(){return!!e})()}function O2(e){return O2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},O2(e)}function wDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t4(e,t)}function t4(e,t){return t4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},t4(e,t)}function h_(e,t,r){return t=MH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MH(e){var t=_De(e,"string");return lp(t)=="symbol"?t:t+""}function _De(e,t){if(lp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(lp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var NDe=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,s=uT({x:a.scale,y:i.scale}),l=s.apply({x:r,y:n},{bandAware:!0});return jl(t,"discard")&&!s.isInRange(l)?null:l},p_=function(e){function t(){return mDe(this,t),xDe(this,t,arguments)}return wDe(t,e),vDe(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,s=n.r,l=n.alwaysShow,c=n.clipPathId,u=ja(a),d=ja(i);if(Yo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=NDe(this.props);if(!f)return null;var p=f.x,h=f.y,g=this.props,m=g.shape,x=g.className,y=jl(this.props,"hidden")?"url(#".concat(c,")"):void 0,v=cD(cD({clipPath:y},zt(this.props,!0)),{},{cx:p,cy:h});return ye.createElement(Ar,{className:cr("recharts-reference-dot",x)},t.renderDot(m,v),Pa.renderCallByParent(this.props,{x:p-s,y:h-s,width:2*s,height:2*s}))}}])}(ye.Component);h_(p_,"displayName","ReferenceDot");h_(p_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});h_(p_,"renderDot",function(e,t){var r;return ye.isValidElement(e)?r=ye.cloneElement(e,t):Kt(e)?r=e(t):r=ye.createElement(i_,e4({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function r4(){return r4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r4.apply(this,arguments)}function cp(e){"@babel/helpers - typeof";return cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cp(e)}function uD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uD(Object(r),!0).forEach(function(n){m_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jDe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$H(n.key),n)}}function ADe(e,t,r){return t&&jDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function EDe(e,t,r){return t=P2(t),TDe(e,FH()?Reflect.construct(t,r||[],P2(e).constructor):t.apply(e,r))}function TDe(e,t){if(t&&(cp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CDe(e)}function CDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FH=function(){return!!e})()}function P2(e){return P2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},P2(e)}function kDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n4(e,t)}function n4(e,t){return n4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},n4(e,t)}function m_(e,t,r){return t=$H(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $H(e){var t=ODe(e,"string");return cp(t)=="symbol"?t:t+""}function ODe(e,t){if(cp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var PDe=function(t,r,n,a,i){var s=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var p=uT({x:d.scale,y:f.scale}),h={x:t?p.x.apply(s,{position:"start"}):p.x.rangeMin,y:n?p.y.apply(c,{position:"start"}):p.y.rangeMin},g={x:r?p.x.apply(l,{position:"end"}):p.x.rangeMax,y:a?p.y.apply(u,{position:"end"}):p.y.rangeMax};return jl(i,"discard")&&(!p.isInRange(h)||!p.isInRange(g))?null:jH(h,g)},g_=function(e){function t(){return SDe(this,t),EDe(this,t,arguments)}return kDe(t,e),ADe(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,s=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;Yo(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=ja(a),p=ja(i),h=ja(s),g=ja(l),m=this.props.shape;if(!f&&!p&&!h&&!g&&!m)return null;var x=PDe(f,p,h,g,this.props);if(!x&&!m)return null;var y=jl(this.props,"hidden")?"url(#".concat(d,")"):void 0;return ye.createElement(Ar,{className:cr("recharts-reference-area",c)},t.renderRect(m,dD(dD({clipPath:y},zt(this.props,!0)),x)),Pa.renderCallByParent(this.props,x))}}])}(ye.Component);m_(g_,"displayName","ReferenceArea");m_(g_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});m_(g_,"renderRect",function(e,t){var r;return ye.isValidElement(e)?r=ye.cloneElement(e,t):Kt(e)?r=e(t):r=ye.createElement(cT,r4({},t,{className:"recharts-reference-area-rect"})),r});function BH(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function LDe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return ERe(n,r)}function RDe(e,t,r){var n=r==="width",a=e.x,i=e.y,s=e.width,l=e.height;return t===1?{start:n?a:i,end:n?a+s:i+l}:{start:n?a+s:i+l,end:n?a:i}}function L2(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function DDe(e,t){return BH(e,t+1)}function IDe(e,t,r,n,a){for(var i=(n||[]).slice(),s=t.start,l=t.end,c=0,u=1,d=s,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:BH(n,u)};var m=c,x,y=function(){return x===void 0&&(x=r(g,m)),x},v=g.coordinate,b=c===0||L2(e,v,y,d,l);b||(c=0,d=s,u+=1),b&&(d=v+e*(y()/2+a),c+=u)},p;u<=i.length;)if(p=f(),p)return p.v;return[]}function Lv(e){"@babel/helpers - typeof";return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lv(e)}function fD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function di(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fD(Object(r),!0).forEach(function(n){MDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MDe(e,t,r){return t=FDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FDe(e){var t=$De(e,"string");return Lv(t)=="symbol"?t:t+""}function $De(e,t){if(Lv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BDe(e,t,r,n,a){for(var i=(n||[]).slice(),s=i.length,l=t.start,c=t.end,u=function(p){var h=i[p],g,m=function(){return g===void 0&&(g=r(h,p)),g};if(p===s-1){var x=e*(h.coordinate+e*m()/2-c);i[p]=h=di(di({},h),{},{tickCoord:x>0?h.coordinate-x*e:h.coordinate})}else i[p]=h=di(di({},h),{},{tickCoord:h.coordinate});var y=L2(e,h.tickCoord,m,l,c);y&&(c=h.tickCoord-e*(m()/2+a),i[p]=di(di({},h),{},{isShow:!0}))},d=s-1;d>=0;d--)u(d);return i}function UDe(e,t,r,n,a,i){var s=(n||[]).slice(),l=s.length,c=t.start,u=t.end;if(i){var d=n[l-1],f=r(d,l-1),p=e*(d.coordinate+e*f/2-u);s[l-1]=d=di(di({},d),{},{tickCoord:p>0?d.coordinate-p*e:d.coordinate});var h=L2(e,d.tickCoord,function(){return f},c,u);h&&(u=d.tickCoord-e*(f/2+a),s[l-1]=di(di({},d),{},{isShow:!0}))}for(var g=i?l-1:l,m=function(v){var b=s[v],N,_=function(){return N===void 0&&(N=r(b,v)),N};if(v===0){var E=e*(b.coordinate-e*_()/2-c);s[v]=b=di(di({},b),{},{tickCoord:E<0?b.coordinate-E*e:b.coordinate})}else s[v]=b=di(di({},b),{},{tickCoord:b.coordinate});var j=L2(e,b.tickCoord,_,c,u);j&&(c=b.tickCoord+e*(_()/2+a),s[v]=di(di({},b),{},{isShow:!0}))},x=0;x<g;x++)m(x);return s}function vT(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,s=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!a||!a.length||!n)return[];if(rt(c)||Xf.isSsr)return DDe(a,typeof c=="number"&&rt(c)?c:0);var p=[],h=l==="top"||l==="bottom"?"width":"height",g=d&&h==="width"?pg(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},m=function(b,N){var _=Kt(u)?u(b.value,N):b.value;return h==="width"?LDe(pg(_,{fontSize:t,letterSpacing:r}),g,f):pg(_,{fontSize:t,letterSpacing:r})[h]},x=a.length>=2?Li(a[1].coordinate-a[0].coordinate):1,y=RDe(i,x,h);return c==="equidistantPreserveStart"?IDe(x,y,m,a,s):(c==="preserveStart"||c==="preserveStartEnd"?p=UDe(x,y,m,a,s,c==="preserveStartEnd"):p=BDe(x,y,m,a,s),p.filter(function(v){return v.isShow}))}var zDe=["viewBox"],qDe=["viewBox"],HDe=["ticks"];function up(e){"@babel/helpers - typeof";return up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},up(e)}function Kh(){return Kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kh.apply(this,arguments)}function hD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hD(Object(r),!0).forEach(function(n){xT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qN(e,t){if(e==null)return{};var r=WDe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function WDe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function VDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zH(n.key),n)}}function GDe(e,t,r){return t&&pD(e.prototype,t),r&&pD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function KDe(e,t,r){return t=R2(t),YDe(e,UH()?Reflect.construct(t,r||[],R2(e).constructor):t.apply(e,r))}function YDe(e,t){if(t&&(up(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XDe(e)}function XDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UH=function(){return!!e})()}function R2(e){return R2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},R2(e)}function JDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a4(e,t)}function a4(e,t){return a4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},a4(e,t)}function xT(e,t,r){return t=zH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zH(e){var t=QDe(e,"string");return up(t)=="symbol"?t:t+""}function QDe(e,t){if(up(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(up(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zp=function(e){function t(r){var n;return VDe(this,t),n=KDe(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return JDe(t,e),GDe(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,s=qN(n,zDe),l=this.props,c=l.viewBox,u=qN(l,qDe);return!p0(i,c)||!p0(s,u)||!p0(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,s=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,p=a.tickMargin,h,g,m,x,y,v,b=f?-1:1,N=n.tickSize||d,_=rt(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":h=g=n.coordinate,x=s+ +!f*c,m=x-b*N,v=m-b*p,y=_;break;case"left":m=x=n.coordinate,g=i+ +!f*l,h=g-b*N,y=h-b*p,v=_;break;case"right":m=x=n.coordinate,g=i+ +f*l,h=g+b*N,y=h+b*p,v=_;break;default:h=g=n.coordinate,x=s+ +f*c,m=x+b*N,v=m+b*p,y=_;break}return{line:{x1:h,y1:m,x2:g,y2:x},tick:{x:y,y:v}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s;switch(a){case"left":s=i?"start":"end";break;case"right":s=i?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s="end";switch(a){case"left":case"right":s="middle";break;case"top":s=i?"start":"end";break;default:s=i?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=xa(xa(xa({},zt(this.props,!1)),zt(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!u||c==="bottom"&&u);f=xa(xa({},f),{},{x1:a,y1:i+p*l,x2:a+s,y2:i+p*l})}else{var h=+(c==="left"&&!u||c==="right"&&u);f=xa(xa({},f),{},{x1:a+h*s,y1:i,x2:a+h*s,y2:i+l})}return ye.createElement("line",Kh({},f,{className:cr("recharts-cartesian-axis-line",Ps(d,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var s=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,p=l.unit,h=vT(xa(xa({},this.props),{},{ticks:n}),a,i),g=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),x=zt(this.props,!1),y=zt(d,!1),v=xa(xa({},x),{},{fill:"none"},zt(c,!1)),b=h.map(function(N,_){var E=s.getTickLineCoord(N),j=E.line,A=E.tick,T=xa(xa(xa(xa({textAnchor:g,verticalAnchor:m},x),{},{stroke:"none",fill:u},y),A),{},{index:_,payload:N,visibleTicksCount:h.length,tickFormatter:f});return ye.createElement(Ar,Kh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},Of(s.props,N,_)),c&&ye.createElement("line",Kh({},v,j,{className:cr("recharts-cartesian-axis-tick-line",Ps(c,"className"))})),d&&t.renderTickItem(d,T,"".concat(Kt(f)?f(N.value,_):N.value).concat(p||"")))});return ye.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,s=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,p=f.ticks,h=qN(f,HDe),g=p;return Kt(c)&&(g=p&&p.length>0?c(this.props):c(h)),s<=0||l<=0||!g||!g.length?null:ye.createElement(Ar,{className:cr("recharts-cartesian-axis",u),ref:function(x){n.layerReference=x}},i&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),Pa.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var s,l=cr(a.className,"recharts-cartesian-axis-tick-value");return ye.isValidElement(n)?s=ye.cloneElement(n,xa(xa({},a),{},{className:l})):Kt(n)?s=n(xa(xa({},a),{},{className:l})):s=ye.createElement(Pf,Kh({},a,{className:"recharts-cartesian-axis-tick-value"}),i),s}}])}(D.Component);xT(zp,"displayName","CartesianAxis");xT(zp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var ZDe=["x1","y1","x2","y2","key"],eIe=["offset"];function Df(e){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Df(e)}function mD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mD(Object(r),!0).forEach(function(n){tIe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tIe(e,t,r){return t=rIe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rIe(e){var t=nIe(e,"string");return Df(t)=="symbol"?t:t+""}function nIe(e,t){if(Df(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ef(){return ef=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ef.apply(this,arguments)}function gD(e,t){if(e==null)return{};var r=aIe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function aIe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var iIe=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,s=t.width,l=t.height,c=t.ry;return ye.createElement("rect",{x:a,y:i,ry:c,width:s,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function qH(e,t){var r;if(ye.isValidElement(e))r=ye.cloneElement(e,t);else if(Kt(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,s=t.y2,l=t.key,c=gD(t,ZDe),u=zt(c,!1);u.offset;var d=gD(u,eIe);r=ye.createElement("line",ef({},d,{x1:n,y1:a,x2:i,y2:s,fill:"none",key:l}))}return r}function sIe(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(l,c){var u=hi(hi({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return qH(a,u)});return ye.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function oIe(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(l,c){var u=hi(hi({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return qH(a,u)});return ye.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function lIe(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,s=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(p){return Math.round(p+a-a)}).sort(function(p,h){return p-h});a!==d[0]&&d.unshift(0);var f=d.map(function(p,h){var g=!d[h+1],m=g?a+s-p:d[h+1]-p;if(m<=0)return null;var x=h%t.length;return ye.createElement("rect",{key:"react-".concat(h),y:p,x:n,height:m,width:i,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ye.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function cIe(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,s=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(p){return Math.round(p+i-i)}).sort(function(p,h){return p-h});i!==d[0]&&d.unshift(0);var f=d.map(function(p,h){var g=!d[h+1],m=g?i+l-p:d[h+1]-p;if(m<=0)return null;var x=h%n.length;return ye.createElement("rect",{key:"react-".concat(h),x:p,y:s,width:m,height:c,stroke:"none",fill:n[x],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return ye.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var uIe=function(t,r){var n=t.xAxis,a=t.width,i=t.height,s=t.offset;return $q(vT(hi(hi(hi({},zp.defaultProps),n),{},{ticks:hc(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.left,s.left+s.width,r)},dIe=function(t,r){var n=t.yAxis,a=t.width,i=t.height,s=t.offset;return $q(vT(hi(hi(hi({},zp.defaultProps),n),{},{ticks:hc(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.top,s.top+s.height,r)},Nh={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Lc(e){var t,r,n,a,i,s,l=hT(),c=pT(),u=QRe(),d=hi(hi({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Nh.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Nh.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Nh.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Nh.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Nh.vertical,verticalFill:(s=e.verticalFill)!==null&&s!==void 0?s:Nh.verticalFill,x:rt(e.x)?e.x:u.left,y:rt(e.y)?e.y:u.top,width:rt(e.width)?e.width:u.width,height:rt(e.height)?e.height:u.height}),f=d.x,p=d.y,h=d.width,g=d.height,m=d.syncWithTicks,x=d.horizontalValues,y=d.verticalValues,v=YRe(),b=XRe();if(!rt(h)||h<=0||!rt(g)||g<=0||!rt(f)||f!==+f||!rt(p)||p!==+p)return null;var N=d.verticalCoordinatesGenerator||uIe,_=d.horizontalCoordinatesGenerator||dIe,E=d.horizontalPoints,j=d.verticalPoints;if((!E||!E.length)&&Kt(_)){var A=x&&x.length,T=_({yAxis:b?hi(hi({},b),{},{ticks:A?x:b.ticks}):void 0,width:l,height:c,offset:u},A?!0:m);Yo(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Df(T),"]")),Array.isArray(T)&&(E=T)}if((!j||!j.length)&&Kt(N)){var P=y&&y.length,O=N({xAxis:v?hi(hi({},v),{},{ticks:P?y:v.ticks}):void 0,width:l,height:c,offset:u},P?!0:m);Yo(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Df(O),"]")),Array.isArray(O)&&(j=O)}return ye.createElement("g",{className:"recharts-cartesian-grid"},ye.createElement(iIe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),ye.createElement(sIe,ef({},d,{offset:u,horizontalPoints:E,xAxis:v,yAxis:b})),ye.createElement(oIe,ef({},d,{offset:u,verticalPoints:j,xAxis:v,yAxis:b})),ye.createElement(lIe,ef({},d,{horizontalPoints:E})),ye.createElement(cIe,ef({},d,{verticalPoints:j})))}Lc.displayName="CartesianGrid";var fIe=["type","layout","connectNulls","ref"],hIe=["key"];function dp(e){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dp(e)}function vD(e,t){if(e==null)return{};var r=pIe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pIe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function bg(){return bg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bg.apply(this,arguments)}function xD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xD(Object(r),!0).forEach(function(n){$o(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sh(e){return xIe(e)||vIe(e)||gIe(e)||mIe()}function mIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gIe(e,t){if(e){if(typeof e=="string")return i4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i4(e,t)}}function vIe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xIe(e){if(Array.isArray(e))return i4(e)}function i4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WH(n.key),n)}}function bIe(e,t,r){return t&&yD(e.prototype,t),r&&yD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function wIe(e,t,r){return t=D2(t),_Ie(e,HH()?Reflect.construct(t,r||[],D2(e).constructor):t.apply(e,r))}function _Ie(e,t){if(t&&(dp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NIe(e)}function NIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HH=function(){return!!e})()}function D2(e){return D2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},D2(e)}function SIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s4(e,t)}function s4(e,t){return s4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},s4(e,t)}function $o(e,t,r){return t=WH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WH(e){var t=jIe(e,"string");return dp(t)=="symbol"?t:t+""}function jIe(e,t){if(dp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var xx=function(e){function t(){var r;yIe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=wIe(this,t,[].concat(a)),$o(r,"state",{isAnimationFinished:!0,totalLength:0}),$o(r,"generateSimpleStrokeDasharray",function(s,l){return"".concat(l,"px ").concat(s-l,"px")}),$o(r,"getStrokeDasharray",function(s,l,c){var u=c.reduce(function(y,v){return y+v});if(!u)return r.generateSimpleStrokeDasharray(l,s);for(var d=Math.floor(s/u),f=s%u,p=l-s,h=[],g=0,m=0;g<c.length;m+=c[g],++g)if(m+c[g]>f){h=[].concat(Sh(c.slice(0,g)),[f-m]);break}var x=h.length%2===0?[0,p]:[p];return[].concat(Sh(t.repeat(c,d)),Sh(h),x).map(function(y){return"".concat(y,"px")}).join(", ")}),$o(r,"id",Dp("recharts-line-")),$o(r,"pathRef",function(s){r.mainCurve=s}),$o(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),$o(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return SIe(t,e),bIe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.points,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=Ls(d,vx);if(!f)return null;var p=function(m,x){return{x:m.x,y:m.y,value:m.value,errorVal:Na(m.payload,x)}},h={clipPath:n?"url(#clipPath-".concat(a,")"):null};return ye.createElement(Ar,h,f.map(function(g){return ye.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:s,xAxis:l,yAxis:c,layout:u,dataPointFormatter:p})}))}},{key:"renderDots",value:function(n,a,i){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=zt(this.props,!1),p=zt(c,!0),h=u.map(function(m,x){var y=vs(vs(vs({key:"dot-".concat(x),r:3},f),p),{},{index:x,cx:m.x,cy:m.y,value:m.value,dataKey:d,payload:m.payload,points:u});return t.renderDotItem(c,y)}),g={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return ye.createElement(Ar,bg({className:"recharts-line-dots",key:"dots"},g),h)}},{key:"renderCurveStatically",value:function(n,a,i,s){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var f=vD(l,fIe),p=vs(vs(vs({},zt(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},s),{},{type:c,layout:u,connectNulls:d});return ye.createElement(p2,bg({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,s=this.props,l=s.points,c=s.strokeDasharray,u=s.isAnimationActive,d=s.animationBegin,f=s.animationDuration,p=s.animationEasing,h=s.animationId,g=s.animateNewValues,m=s.width,x=s.height,y=this.state,v=y.prevPoints,b=y.totalLength;return ye.createElement(Cl,{begin:d,duration:f,isActive:u,easing:p,from:{t:0},to:{t:1},key:"line-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(N){var _=N.t;if(v){var E=v.length/l.length,j=l.map(function(R,I){var z=Math.floor(I*E);if(v[z]){var Y=v[z],ie=js(Y.x,R.x),re=js(Y.y,R.y);return vs(vs({},R),{},{x:ie(_),y:re(_)})}if(g){var X=js(m*2,R.x),oe=js(x/2,R.y);return vs(vs({},R),{},{x:X(_),y:oe(_)})}return vs(vs({},R),{},{x:R.x,y:R.y})});return i.renderCurveStatically(j,n,a)}var A=js(0,b),T=A(_),P;if(c){var O="".concat(c).split(/[,\s]+/gim).map(function(R){return parseFloat(R)});P=i.getStrokeDasharray(T,b,O)}else P=i.generateSimpleStrokeDasharray(b,T);return i.renderCurveStatically(l,n,a,{strokeDasharray:P})})}},{key:"renderCurve",value:function(n,a){var i=this.props,s=i.points,l=i.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&s&&s.length&&(!u&&d>0||!gx(u,s))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(s,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,s=a.dot,l=a.points,c=a.className,u=a.xAxis,d=a.yAxis,f=a.top,p=a.left,h=a.width,g=a.height,m=a.isAnimationActive,x=a.id;if(i||!l||!l.length)return null;var y=this.state.isAnimationFinished,v=l.length===1,b=cr("recharts-line",c),N=u&&u.allowDataOverflow,_=d&&d.allowDataOverflow,E=N||_,j=ar(x)?this.id:x,A=(n=zt(s,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},T=A.r,P=T===void 0?3:T,O=A.strokeWidth,R=O===void 0?2:O,I=H1e(s)?s:{},z=I.clipDot,Y=z===void 0?!0:z,ie=P*2+R;return ye.createElement(Ar,{className:b},N||_?ye.createElement("defs",null,ye.createElement("clipPath",{id:"clipPath-".concat(j)},ye.createElement("rect",{x:N?p:p-h/2,y:_?f:f-g/2,width:N?h:h*2,height:_?g:g*2})),!Y&&ye.createElement("clipPath",{id:"clipPath-dots-".concat(j)},ye.createElement("rect",{x:p-ie/2,y:f-ie/2,width:h+ie,height:g+ie}))):null,!v&&this.renderCurve(E,j),this.renderErrorBar(E,j),(v||s)&&this.renderDots(E,Y,j),(!m||y)&&bc.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(Sh(n),[0]):n,s=[],l=0;l<a;++l)s=[].concat(Sh(s),Sh(i));return s}},{key:"renderDotItem",value:function(n,a){var i;if(ye.isValidElement(n))i=ye.cloneElement(n,a);else if(Kt(n))i=n(a);else{var s=a.key,l=vD(a,hIe),c=cr("recharts-line-dot",typeof n!="boolean"?n.className:"");i=ye.createElement(i_,bg({key:s},l,{className:c}))}return i}}])}(D.PureComponent);$o(xx,"displayName","Line");$o(xx,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Xf.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});$o(xx,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,s=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,f=c.map(function(p,h){var g=Na(p,s);return d==="horizontal"?{x:VL({axis:r,ticks:a,bandSize:l,entry:p,index:h}),y:ar(g)?null:n.scale(g),value:g,payload:p}:{x:ar(g)?null:r.scale(g),y:VL({axis:n,ticks:i,bandSize:l,entry:p,index:h}),value:g,payload:p}});return vs({points:f,layout:d},u)});function fp(e){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fp(e)}function AIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EIe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KH(n.key),n)}}function TIe(e,t,r){return t&&EIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function CIe(e,t,r){return t=I2(t),kIe(e,VH()?Reflect.construct(t,r||[],I2(e).constructor):t.apply(e,r))}function kIe(e,t){if(t&&(fp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OIe(e)}function OIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VH=function(){return!!e})()}function I2(e){return I2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},I2(e)}function PIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o4(e,t)}function o4(e,t){return o4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},o4(e,t)}function GH(e,t,r){return t=KH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KH(e){var t=LIe(e,"string");return fp(t)=="symbol"?t:t+""}function LIe(e,t){if(fp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function l4(){return l4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l4.apply(this,arguments)}function RIe(e){var t=e.xAxisId,r=hT(),n=pT(),a=PH(t);return a==null?null:D.createElement(zp,l4({},a,{className:cr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(s){return hc(s,!0)}}))}var uo=function(e){function t(){return AIe(this,t),CIe(this,t,arguments)}return PIe(t,e),TIe(t,[{key:"render",value:function(){return D.createElement(RIe,this.props)}}])}(D.Component);GH(uo,"displayName","XAxis");GH(uo,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function hp(e){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hp(e)}function DIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IIe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JH(n.key),n)}}function MIe(e,t,r){return t&&IIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function FIe(e,t,r){return t=M2(t),$Ie(e,YH()?Reflect.construct(t,r||[],M2(e).constructor):t.apply(e,r))}function $Ie(e,t){if(t&&(hp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BIe(e)}function BIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YH=function(){return!!e})()}function M2(e){return M2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},M2(e)}function UIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c4(e,t)}function c4(e,t){return c4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},c4(e,t)}function XH(e,t,r){return t=JH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JH(e){var t=zIe(e,"string");return hp(t)=="symbol"?t:t+""}function zIe(e,t){if(hp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function u4(){return u4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u4.apply(this,arguments)}var qIe=function(t){var r=t.yAxisId,n=hT(),a=pT(),i=LH(r);return i==null?null:D.createElement(zp,u4({},i,{className:cr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return hc(l,!0)}}))},fo=function(e){function t(){return DIe(this,t),FIe(this,t,arguments)}return UIe(t,e),MIe(t,[{key:"render",value:function(){return D.createElement(qIe,this.props)}}])}(D.Component);XH(fo,"displayName","YAxis");XH(fo,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function bD(e){return GIe(e)||VIe(e)||WIe(e)||HIe()}function HIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WIe(e,t){if(e){if(typeof e=="string")return d4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d4(e,t)}}function VIe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function GIe(e){if(Array.isArray(e))return d4(e)}function d4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f4=function(t,r,n,a,i){var s=Ls(t,gT),l=Ls(t,p_),c=[].concat(bD(s),bD(l)),u=Ls(t,g_),d="".concat(a,"Id"),f=a[0],p=r;if(c.length&&(p=c.reduce(function(m,x){if(x.props[d]===n&&jl(x.props,"extendDomain")&&rt(x.props[f])){var y=x.props[f];return[Math.min(m[0],y),Math.max(m[1],y)]}return m},p)),u.length){var h="".concat(f,"1"),g="".concat(f,"2");p=u.reduce(function(m,x){if(x.props[d]===n&&jl(x.props,"extendDomain")&&rt(x.props[h])&&rt(x.props[g])){var y=x.props[h],v=x.props[g];return[Math.min(m[0],y,v),Math.max(m[1],y,v)]}return m},p)}return i&&i.length&&(p=i.reduce(function(m,x){return rt(x)?[Math.min(m[0],x),Math.max(m[1],x)]:m},p)),p},QH={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new a(d,f||c,p),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],h]:c._events[g].push(h):(c._events[g]=h,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,h=f.length,g=new Array(h);p<h;p++)g[p]=f[p].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,p,h,g){var m=r?r+u:u;if(!this._events[m])return!1;var x=this._events[m],y=arguments.length,v,b;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),y){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,p),!0;case 5:return x.fn.call(x.context,d,f,p,h),!0;case 6:return x.fn.call(x.context,d,f,p,h,g),!0}for(b=1,v=new Array(y-1);b<y;b++)v[b-1]=arguments[b];x.fn.apply(x.context,v)}else{var N=x.length,_;for(b=0;b<N;b++)switch(x[b].once&&this.removeListener(u,x[b].fn,void 0,!0),y){case 1:x[b].fn.call(x[b].context);break;case 2:x[b].fn.call(x[b].context,d);break;case 3:x[b].fn.call(x[b].context,d,f);break;case 4:x[b].fn.call(x[b].context,d,f,p);break;default:if(!v)for(_=1,v=new Array(y-1);_<y;_++)v[_-1]=arguments[_];x[b].fn.apply(x[b].context,v)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,p){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return s(this,h),this;var g=this._events[h];if(g.fn)g.fn===d&&(!p||g.once)&&(!f||g.context===f)&&s(this,h);else{for(var m=0,x=[],y=g.length;m<y;m++)(g[m].fn!==d||p&&!g[m].once||f&&g[m].context!==f)&&x.push(g[m]);x.length?this._events[h]=x.length===1?x[0]:x:s(this,h)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&s(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(QH);var KIe=QH.exports;const YIe=Dr(KIe);var HN=new YIe,WN="recharts.syncMouseEvents";function Rv(e){"@babel/helpers - typeof";return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rv(e)}function XIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JIe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZH(n.key),n)}}function QIe(e,t,r){return t&&JIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function VN(e,t,r){return t=ZH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZH(e){var t=ZIe(e,"string");return Rv(t)=="symbol"?t:t+""}function ZIe(e,t){if(Rv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var e7e=function(){function e(){XIe(this,e),VN(this,"activeIndex",0),VN(this,"coordinateList",[]),VN(this,"layout","horizontal")}return QIe(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,s=r.container,l=s===void 0?null:s,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,p=r.mouseHandlerCallback,h=p===void 0?null:p;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,s=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+c+u,p=s+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:p})}}}])}();function t7e(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&rt(n)&&rt(a))return!0}return!1}function r7e(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function eW(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,s=ln(t,r,n,a),l=ln(t,r,n,i);return{points:[s,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function n7e(e,t,r){var n,a,i,s;if(e==="horizontal")n=t.x,i=n,a=r.top,s=r.top+r.height;else if(e==="vertical")a=t.y,s=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,p=ln(l,c,u,f),h=ln(l,c,d,f);n=p.x,a=p.y,i=h.x,s=h.y}else return eW(t);return[{x:n,y:a},{x:i,y:s}]}function Dv(e){"@babel/helpers - typeof";return Dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dv(e)}function wD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ay(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wD(Object(r),!0).forEach(function(n){a7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a7e(e,t,r){return t=i7e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i7e(e){var t=s7e(e,"string");return Dv(t)=="symbol"?t:t+""}function s7e(e,t){if(Dv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function o7e(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,s=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,p=e.chartName,h=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!h||!i||!s||p!=="ScatterChart"&&a!=="axis")return null;var g,m=p2;if(p==="ScatterChart")g=s,m=jPe;else if(p==="BarChart")g=r7e(f,s,c,d),m=cT;else if(f==="radial"){var x=eW(s),y=x.cx,v=x.cy,b=x.radius,N=x.startAngle,_=x.endAngle;g={cx:y,cy:v,startAngle:N,endAngle:_,innerRadius:b,outerRadius:b},m=Xq}else g={points:n7e(f,s,c)},m=p2;var E=ay(ay(ay(ay({stroke:"#ccc",pointerEvents:"none"},c),g),zt(h,!1)),{},{payload:l,payloadIndex:u,className:cr("recharts-tooltip-cursor",h.className)});return D.isValidElement(h)?D.cloneElement(h,E):D.createElement(m,E)}var l7e=["item"],c7e=["children","className","width","height","style","compact","title","desc"];function pp(e){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pp(e)}function Yh(){return Yh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yh.apply(this,arguments)}function _D(e,t){return f7e(e)||d7e(e,t)||rW(e,t)||u7e()}function u7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d7e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function f7e(e){if(Array.isArray(e))return e}function ND(e,t){if(e==null)return{};var r=h7e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function h7e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function p7e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m7e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nW(n.key),n)}}function g7e(e,t,r){return t&&m7e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function v7e(e,t,r){return t=F2(t),x7e(e,tW()?Reflect.construct(t,r||[],F2(e).constructor):t.apply(e,r))}function x7e(e,t){if(t&&(pp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y7e(e)}function y7e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tW=function(){return!!e})()}function F2(e){return F2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},F2(e)}function b7e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h4(e,t)}function h4(e,t){return h4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},h4(e,t)}function mp(e){return N7e(e)||_7e(e)||rW(e)||w7e()}function w7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rW(e,t){if(e){if(typeof e=="string")return p4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p4(e,t)}}function _7e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function N7e(e){if(Array.isArray(e))return p4(e)}function p4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function SD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ze(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SD(Object(r),!0).forEach(function(n){Ht(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ht(e,t,r){return t=nW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nW(e){var t=S7e(e,"string");return pp(t)=="symbol"?t:t+""}function S7e(e,t){if(pp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var j7e={xAxis:["bottom","top"],yAxis:["left","right"]},A7e={width:"100%",height:"100%"},aW={x:0,y:0};function iy(e){return e}var E7e=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},T7e=function(t,r,n,a){var i=r.find(function(d){return d&&d.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var s=i.coordinate,l=a.radius;return ze(ze(ze({},a),ln(a.cx,a.cy,l,s)),{},{angle:s,radius:l})}var c=i.coordinate,u=a.angle;return ze(ze(ze({},a),ln(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return aW},v_=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,s=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(mp(l),mp(u)):l},[]);return s.length>0?s:t&&t.length&&rt(a)&&rt(i)?t.slice(a,i+1):[]};function iW(e){return e==="number"?[0,"auto"]:void 0}var m4=function(t,r,n,a){var i=t.graphicalItems,s=t.tooltipAxis,l=v_(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var p;if(s.dataKey&&!s.allowDuplicatedCategory){var h=f===void 0?l:f;p=Mb(h,s.dataKey,a)}else p=f&&f[n]||l[n];return p?[].concat(mp(c),[Hq(u,p)]):c},[])},jD=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},s=E7e(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=WCe(s,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,p=m4(t,r,d,f),h=T7e(n,l,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:p,activeCoordinate:h}}return null},C7e=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,s=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,p=t.stackOffset,h=Fq(d,i);return n.reduce(function(g,m){var x,y=m.type.defaultProps!==void 0?ze(ze({},m.type.defaultProps),m.props):m.props,v=y.type,b=y.dataKey,N=y.allowDataOverflow,_=y.allowDuplicatedCategory,E=y.scale,j=y.ticks,A=y.includeHidden,T=y[s];if(g[T])return g;var P=v_(t.data,{graphicalItems:a.filter(function(k){var F,B=s in k.props?k.props[s]:(F=k.type.defaultProps)===null||F===void 0?void 0:F[s];return B===T}),dataStartIndex:c,dataEndIndex:u}),O=P.length,R,I,z;t7e(y.domain,N,v)&&(R=CA(y.domain,null,N),h&&(v==="number"||E!=="auto")&&(z=gg(P,b,"category")));var Y=iW(v);if(!R||R.length===0){var ie,re=(ie=y.domain)!==null&&ie!==void 0?ie:Y;if(b){if(R=gg(P,b,v),v==="category"&&h){var X=R1e(R);_&&X?(I=R,R=j2(0,O)):_||(R=XL(re,R,m).reduce(function(k,F){return k.indexOf(F)>=0?k:[].concat(mp(k),[F])},[]))}else if(v==="category")_?R=R.filter(function(k){return k!==""&&!ar(k)}):R=XL(re,R,m).reduce(function(k,F){return k.indexOf(F)>=0||F===""||ar(F)?k:[].concat(mp(k),[F])},[]);else if(v==="number"){var oe=XCe(P,a.filter(function(k){var F,B,U=s in k.props?k.props[s]:(F=k.type.defaultProps)===null||F===void 0?void 0:F[s],J="hide"in k.props?k.props.hide:(B=k.type.defaultProps)===null||B===void 0?void 0:B.hide;return U===T&&(A||!J)}),b,i,d);oe&&(R=oe)}h&&(v==="number"||E!=="auto")&&(z=gg(P,b,"category"))}else h?R=j2(0,O):l&&l[T]&&l[T].hasStack&&v==="number"?R=p==="expand"?[0,1]:qq(l[T].stackGroups,c,u):R=Mq(P,a.filter(function(k){var F=s in k.props?k.props[s]:k.type.defaultProps[s],B="hide"in k.props?k.props.hide:k.type.defaultProps.hide;return F===T&&(A||!B)}),v,d,!0);if(v==="number")R=f4(f,R,T,i,j),re&&(R=CA(re,R,N));else if(v==="category"&&re){var we=re,_e=R.every(function(k){return we.indexOf(k)>=0});_e&&(R=we)}}return ze(ze({},g),{},Ht({},T,ze(ze({},y),{},{axisType:i,domain:R,categoricalDomain:z,duplicateDomain:I,originalDomain:(x=y.domain)!==null&&x!==void 0?x:Y,isCategorical:h,layout:d})))},{})},k7e=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,s=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,p=v_(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),h=p.length,g=Fq(d,i),m=-1;return n.reduce(function(x,y){var v=y.type.defaultProps!==void 0?ze(ze({},y.type.defaultProps),y.props):y.props,b=v[s],N=iW("number");if(!x[b]){m++;var _;return g?_=j2(0,h):l&&l[b]&&l[b].hasStack?(_=qq(l[b].stackGroups,c,u),_=f4(f,_,b,i)):(_=CA(N,Mq(p,n.filter(function(E){var j,A,T=s in E.props?E.props[s]:(j=E.type.defaultProps)===null||j===void 0?void 0:j[s],P="hide"in E.props?E.props.hide:(A=E.type.defaultProps)===null||A===void 0?void 0:A.hide;return T===b&&!P}),"number",d),a.defaultProps.allowDataOverflow),_=f4(f,_,b,i)),ze(ze({},x),{},Ht({},b,ze(ze({axisType:i},a.defaultProps),{},{hide:!0,orientation:Ps(j7e,"".concat(i,".").concat(m%2),null),domain:_,originalDomain:N,isCategorical:g,layout:d})))}return x},{})},O7e=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,s=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(a,"Id"),p=Ls(d,i),h={};return p&&p.length?h=C7e(t,{axes:p,graphicalItems:s,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):s&&s.length&&(h=k7e(t,{Axis:i,graphicalItems:s,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),h},P7e=function(t){var r=gu(t),n=hc(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:IE(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:d2(r,n)}},AD=function(t){var r=t.children,n=t.defaultShowTooltip,a=ws(r,ip),i=0,s=0;return t.data&&t.data.length!==0&&(s=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(s=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},L7e=function(t){return!t||!t.length?!1:t.some(function(r){var n=xc(r&&r.type);return n&&n.indexOf("Bar")>=0})},ED=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},R7e=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,s=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,p=n.margin||{},h=ws(f,ip),g=ws(f,Nl),m=Object.keys(c).reduce(function(_,E){var j=c[E],A=j.orientation;return!j.mirror&&!j.hide?ze(ze({},_),{},Ht({},A,_[A]+j.width)):_},{left:p.left||0,right:p.right||0}),x=Object.keys(s).reduce(function(_,E){var j=s[E],A=j.orientation;return!j.mirror&&!j.hide?ze(ze({},_),{},Ht({},A,Ps(_,"".concat(A))+j.height)):_},{top:p.top||0,bottom:p.bottom||0}),y=ze(ze({},x),m),v=y.bottom;h&&(y.bottom+=h.props.height||ip.defaultProps.height),g&&r&&(y=KCe(y,a,n,r));var b=u-y.left-y.right,N=d-y.top-y.bottom;return ze(ze({brushBottom:v},y),{},{width:Math.max(b,0),height:Math.max(N,0)})},D7e=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},yT=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,s=t.validateTooltipEventTypes,l=s===void 0?["axis"]:s,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,p=function(y,v){var b=v.graphicalItems,N=v.stackGroups,_=v.offset,E=v.updateId,j=v.dataStartIndex,A=v.dataEndIndex,T=y.barSize,P=y.layout,O=y.barGap,R=y.barCategoryGap,I=y.maxBarSize,z=ED(P),Y=z.numericAxisName,ie=z.cateAxisName,re=L7e(b),X=[];return b.forEach(function(oe,we){var _e=v_(y.data,{graphicalItems:[oe],dataStartIndex:j,dataEndIndex:A}),k=oe.type.defaultProps!==void 0?ze(ze({},oe.type.defaultProps),oe.props):oe.props,F=k.dataKey,B=k.maxBarSize,U=k["".concat(Y,"Id")],J=k["".concat(ie,"Id")],me={},K=c.reduce(function(st,ut){var pt=v["".concat(ut.axisType,"Map")],Bt=k["".concat(ut.axisType,"Id")];pt&&pt[Bt]||ut.axisType==="zAxis"||Rf();var ht=pt[Bt];return ze(ze({},st),{},Ht(Ht({},ut.axisType,ht),"".concat(ut.axisType,"Ticks"),hc(ht)))},me),te=K[ie],le=K["".concat(ie,"Ticks")],ve=N&&N[U]&&N[U].hasStack&&ike(oe,N[U].stackGroups),ge=xc(oe.type).indexOf("Bar")>=0,Me=d2(te,le),Fe=[],ee=re&&VCe({barSize:T,stackGroups:N,totalSize:D7e(K,ie)});if(ge){var Pe,Ie,Qe=ar(B)?I:B,$e=(Pe=(Ie=d2(te,le,!0))!==null&&Ie!==void 0?Ie:Qe)!==null&&Pe!==void 0?Pe:0;Fe=GCe({barGap:O,barCategoryGap:R,bandSize:$e!==Me?$e:Me,sizeList:ee[J],maxBarSize:Qe}),$e!==Me&&(Fe=Fe.map(function(st){return ze(ze({},st),{},{position:ze(ze({},st.position),{},{offset:st.position.offset-$e/2})})}))}var it=oe&&oe.type&&oe.type.getComposedData;it&&X.push({props:ze(ze({},it(ze(ze({},K),{},{displayedData:_e,props:y,dataKey:F,item:oe,bandSize:Me,barPosition:Fe,offset:_,stackedData:ve,layout:P,dataStartIndex:j,dataEndIndex:A}))),{},Ht(Ht(Ht({key:oe.key||"item-".concat(we)},Y,K[Y]),ie,K[ie]),"animationId",E)),childIndex:G1e(oe,y.children),item:oe})}),X},h=function(y,v){var b=y.props,N=y.dataStartIndex,_=y.dataEndIndex,E=y.updateId;if(!qP({props:b}))return null;var j=b.children,A=b.layout,T=b.stackOffset,P=b.data,O=b.reverseStackOrder,R=ED(A),I=R.numericAxisName,z=R.cateAxisName,Y=Ls(j,n),ie=nke(P,Y,"".concat(I,"Id"),"".concat(z,"Id"),T,O),re=c.reduce(function(k,F){var B="".concat(F.axisType,"Map");return ze(ze({},k),{},Ht({},B,O7e(b,ze(ze({},F),{},{graphicalItems:Y,stackGroups:F.axisType===I&&ie,dataStartIndex:N,dataEndIndex:_}))))},{}),X=R7e(ze(ze({},re),{},{props:b,graphicalItems:Y}),v==null?void 0:v.legendBBox);Object.keys(re).forEach(function(k){re[k]=d(b,re[k],X,k.replace("Map",""),r)});var oe=re["".concat(z,"Map")],we=P7e(oe),_e=p(b,ze(ze({},re),{},{dataStartIndex:N,dataEndIndex:_,updateId:E,graphicalItems:Y,stackGroups:ie,offset:X}));return ze(ze({formattedGraphicalItems:_e,graphicalItems:Y,offset:X,stackGroups:ie},we),re)},g=function(x){function y(v){var b,N,_;return p7e(this,y),_=v7e(this,y,[v]),Ht(_,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ht(_,"accessibilityManager",new e7e),Ht(_,"handleLegendBBoxUpdate",function(E){if(E){var j=_.state,A=j.dataStartIndex,T=j.dataEndIndex,P=j.updateId;_.setState(ze({legendBBox:E},h({props:_.props,dataStartIndex:A,dataEndIndex:T,updateId:P},ze(ze({},_.state),{},{legendBBox:E}))))}}),Ht(_,"handleReceiveSyncEvent",function(E,j,A){if(_.props.syncId===E){if(A===_.eventEmitterSymbol&&typeof _.props.syncMethod!="function")return;_.applySyncEvent(j)}}),Ht(_,"handleBrushChange",function(E){var j=E.startIndex,A=E.endIndex;if(j!==_.state.dataStartIndex||A!==_.state.dataEndIndex){var T=_.state.updateId;_.setState(function(){return ze({dataStartIndex:j,dataEndIndex:A},h({props:_.props,dataStartIndex:j,dataEndIndex:A,updateId:T},_.state))}),_.triggerSyncEvent({dataStartIndex:j,dataEndIndex:A})}}),Ht(_,"handleMouseEnter",function(E){var j=_.getMouseInfo(E);if(j){var A=ze(ze({},j),{},{isTooltipActive:!0});_.setState(A),_.triggerSyncEvent(A);var T=_.props.onMouseEnter;Kt(T)&&T(A,E)}}),Ht(_,"triggeredAfterMouseMove",function(E){var j=_.getMouseInfo(E),A=j?ze(ze({},j),{},{isTooltipActive:!0}):{isTooltipActive:!1};_.setState(A),_.triggerSyncEvent(A);var T=_.props.onMouseMove;Kt(T)&&T(A,E)}),Ht(_,"handleItemMouseEnter",function(E){_.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),Ht(_,"handleItemMouseLeave",function(){_.setState(function(){return{isTooltipActive:!1}})}),Ht(_,"handleMouseMove",function(E){E.persist(),_.throttleTriggeredAfterMouseMove(E)}),Ht(_,"handleMouseLeave",function(E){_.throttleTriggeredAfterMouseMove.cancel();var j={isTooltipActive:!1};_.setState(j),_.triggerSyncEvent(j);var A=_.props.onMouseLeave;Kt(A)&&A(j,E)}),Ht(_,"handleOuterEvent",function(E){var j=V1e(E),A=Ps(_.props,"".concat(j));if(j&&Kt(A)){var T,P;/.*touch.*/i.test(j)?P=_.getMouseInfo(E.changedTouches[0]):P=_.getMouseInfo(E),A((T=P)!==null&&T!==void 0?T:{},E)}}),Ht(_,"handleClick",function(E){var j=_.getMouseInfo(E);if(j){var A=ze(ze({},j),{},{isTooltipActive:!0});_.setState(A),_.triggerSyncEvent(A);var T=_.props.onClick;Kt(T)&&T(A,E)}}),Ht(_,"handleMouseDown",function(E){var j=_.props.onMouseDown;if(Kt(j)){var A=_.getMouseInfo(E);j(A,E)}}),Ht(_,"handleMouseUp",function(E){var j=_.props.onMouseUp;if(Kt(j)){var A=_.getMouseInfo(E);j(A,E)}}),Ht(_,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&_.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),Ht(_,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&_.handleMouseDown(E.changedTouches[0])}),Ht(_,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&_.handleMouseUp(E.changedTouches[0])}),Ht(_,"handleDoubleClick",function(E){var j=_.props.onDoubleClick;if(Kt(j)){var A=_.getMouseInfo(E);j(A,E)}}),Ht(_,"handleContextMenu",function(E){var j=_.props.onContextMenu;if(Kt(j)){var A=_.getMouseInfo(E);j(A,E)}}),Ht(_,"triggerSyncEvent",function(E){_.props.syncId!==void 0&&HN.emit(WN,_.props.syncId,E,_.eventEmitterSymbol)}),Ht(_,"applySyncEvent",function(E){var j=_.props,A=j.layout,T=j.syncMethod,P=_.state.updateId,O=E.dataStartIndex,R=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)_.setState(ze({dataStartIndex:O,dataEndIndex:R},h({props:_.props,dataStartIndex:O,dataEndIndex:R,updateId:P},_.state)));else if(E.activeTooltipIndex!==void 0){var I=E.chartX,z=E.chartY,Y=E.activeTooltipIndex,ie=_.state,re=ie.offset,X=ie.tooltipTicks;if(!re)return;if(typeof T=="function")Y=T(X,E);else if(T==="value"){Y=-1;for(var oe=0;oe<X.length;oe++)if(X[oe].value===E.activeLabel){Y=oe;break}}var we=ze(ze({},re),{},{x:re.left,y:re.top}),_e=Math.min(I,we.x+we.width),k=Math.min(z,we.y+we.height),F=X[Y]&&X[Y].value,B=m4(_.state,_.props.data,Y),U=X[Y]?{x:A==="horizontal"?X[Y].coordinate:_e,y:A==="horizontal"?k:X[Y].coordinate}:aW;_.setState(ze(ze({},E),{},{activeLabel:F,activeCoordinate:U,activePayload:B,activeTooltipIndex:Y}))}else _.setState(E)}),Ht(_,"renderCursor",function(E){var j,A=_.state,T=A.isTooltipActive,P=A.activeCoordinate,O=A.activePayload,R=A.offset,I=A.activeTooltipIndex,z=A.tooltipAxisBandSize,Y=_.getTooltipEventType(),ie=(j=E.props.active)!==null&&j!==void 0?j:T,re=_.props.layout,X=E.key||"_recharts-cursor";return ye.createElement(o7e,{key:X,activeCoordinate:P,activePayload:O,activeTooltipIndex:I,chartName:r,element:E,isActive:ie,layout:re,offset:R,tooltipAxisBandSize:z,tooltipEventType:Y})}),Ht(_,"renderPolarAxis",function(E,j,A){var T=Ps(E,"type.axisType"),P=Ps(_.state,"".concat(T,"Map")),O=E.type.defaultProps,R=O!==void 0?ze(ze({},O),E.props):E.props,I=P&&P[R["".concat(T,"Id")]];return D.cloneElement(E,ze(ze({},I),{},{className:cr(T,I.className),key:E.key||"".concat(j,"-").concat(A),ticks:hc(I,!0)}))}),Ht(_,"renderPolarGrid",function(E){var j=E.props,A=j.radialLines,T=j.polarAngles,P=j.polarRadius,O=_.state,R=O.radiusAxisMap,I=O.angleAxisMap,z=gu(R),Y=gu(I),ie=Y.cx,re=Y.cy,X=Y.innerRadius,oe=Y.outerRadius;return D.cloneElement(E,{polarAngles:Array.isArray(T)?T:hc(Y,!0).map(function(we){return we.coordinate}),polarRadius:Array.isArray(P)?P:hc(z,!0).map(function(we){return we.coordinate}),cx:ie,cy:re,innerRadius:X,outerRadius:oe,key:E.key||"polar-grid",radialLines:A})}),Ht(_,"renderLegend",function(){var E=_.state.formattedGraphicalItems,j=_.props,A=j.children,T=j.width,P=j.height,O=_.props.margin||{},R=T-(O.left||0)-(O.right||0),I=Dq({children:A,formattedGraphicalItems:E,legendWidth:R,legendContent:u});if(!I)return null;var z=I.item,Y=ND(I,l7e);return D.cloneElement(z,ze(ze({},Y),{},{chartWidth:T,chartHeight:P,margin:O,onBBoxUpdate:_.handleLegendBBoxUpdate}))}),Ht(_,"renderTooltip",function(){var E,j=_.props,A=j.children,T=j.accessibilityLayer,P=ws(A,Vn);if(!P)return null;var O=_.state,R=O.isTooltipActive,I=O.activeCoordinate,z=O.activePayload,Y=O.activeLabel,ie=O.offset,re=(E=P.props.active)!==null&&E!==void 0?E:R;return D.cloneElement(P,{viewBox:ze(ze({},ie),{},{x:ie.left,y:ie.top}),active:re,label:Y,payload:re?z:[],coordinate:I,accessibilityLayer:T})}),Ht(_,"renderBrush",function(E){var j=_.props,A=j.margin,T=j.data,P=_.state,O=P.offset,R=P.dataStartIndex,I=P.dataEndIndex,z=P.updateId;return D.cloneElement(E,{key:E.key||"_recharts-brush",onChange:ey(_.handleBrushChange,E.props.onChange),data:T,x:rt(E.props.x)?E.props.x:O.left,y:rt(E.props.y)?E.props.y:O.top+O.height+O.brushBottom-(A.bottom||0),width:rt(E.props.width)?E.props.width:O.width,startIndex:R,endIndex:I,updateId:"brush-".concat(z)})}),Ht(_,"renderReferenceElement",function(E,j,A){if(!E)return null;var T=_,P=T.clipPathId,O=_.state,R=O.xAxisMap,I=O.yAxisMap,z=O.offset,Y=E.type.defaultProps||{},ie=E.props,re=ie.xAxisId,X=re===void 0?Y.xAxisId:re,oe=ie.yAxisId,we=oe===void 0?Y.yAxisId:oe;return D.cloneElement(E,{key:E.key||"".concat(j,"-").concat(A),xAxis:R[X],yAxis:I[we],viewBox:{x:z.left,y:z.top,width:z.width,height:z.height},clipPathId:P})}),Ht(_,"renderActivePoints",function(E){var j=E.item,A=E.activePoint,T=E.basePoint,P=E.childIndex,O=E.isRange,R=[],I=j.props.key,z=j.item.type.defaultProps!==void 0?ze(ze({},j.item.type.defaultProps),j.item.props):j.item.props,Y=z.activeDot,ie=z.dataKey,re=ze(ze({index:P,dataKey:ie,cx:A.x,cy:A.y,r:4,fill:lT(j.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},zt(Y,!1)),Fb(Y));return R.push(y.renderActiveDot(Y,re,"".concat(I,"-activePoint-").concat(P))),T?R.push(y.renderActiveDot(Y,ze(ze({},re),{},{cx:T.x,cy:T.y}),"".concat(I,"-basePoint-").concat(P))):O&&R.push(null),R}),Ht(_,"renderGraphicChild",function(E,j,A){var T=_.filterFormatItem(E,j,A);if(!T)return null;var P=_.getTooltipEventType(),O=_.state,R=O.isTooltipActive,I=O.tooltipAxis,z=O.activeTooltipIndex,Y=O.activeLabel,ie=_.props.children,re=ws(ie,Vn),X=T.props,oe=X.points,we=X.isRange,_e=X.baseLine,k=T.item.type.defaultProps!==void 0?ze(ze({},T.item.type.defaultProps),T.item.props):T.item.props,F=k.activeDot,B=k.hide,U=k.activeBar,J=k.activeShape,me=!!(!B&&R&&re&&(F||U||J)),K={};P!=="axis"&&re&&re.props.trigger==="click"?K={onClick:ey(_.handleItemMouseEnter,E.props.onClick)}:P!=="axis"&&(K={onMouseLeave:ey(_.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:ey(_.handleItemMouseEnter,E.props.onMouseEnter)});var te=D.cloneElement(E,ze(ze({},T.props),K));function le(ut){return typeof I.dataKey=="function"?I.dataKey(ut.payload):null}if(me)if(z>=0){var ve,ge;if(I.dataKey&&!I.allowDuplicatedCategory){var Me=typeof I.dataKey=="function"?le:"payload.".concat(I.dataKey.toString());ve=Mb(oe,Me,Y),ge=we&&_e&&Mb(_e,Me,Y)}else ve=oe==null?void 0:oe[z],ge=we&&_e&&_e[z];if(J||U){var Fe=E.props.activeIndex!==void 0?E.props.activeIndex:z;return[D.cloneElement(E,ze(ze(ze({},T.props),K),{},{activeIndex:Fe})),null,null]}if(!ar(ve))return[te].concat(mp(_.renderActivePoints({item:T,activePoint:ve,basePoint:ge,childIndex:z,isRange:we})))}else{var ee,Pe=(ee=_.getItemByXY(_.state.activeCoordinate))!==null&&ee!==void 0?ee:{graphicalItem:te},Ie=Pe.graphicalItem,Qe=Ie.item,$e=Qe===void 0?E:Qe,it=Ie.childIndex,st=ze(ze(ze({},T.props),K),{},{activeIndex:it});return[D.cloneElement($e,st),null,null]}return we?[te,null,null]:[te,null]}),Ht(_,"renderCustomized",function(E,j,A){return D.cloneElement(E,ze(ze({key:"recharts-customized-".concat(A)},_.props),_.state))}),Ht(_,"renderMap",{CartesianGrid:{handler:iy,once:!0},ReferenceArea:{handler:_.renderReferenceElement},ReferenceLine:{handler:iy},ReferenceDot:{handler:_.renderReferenceElement},XAxis:{handler:iy},YAxis:{handler:iy},Brush:{handler:_.renderBrush,once:!0},Bar:{handler:_.renderGraphicChild},Line:{handler:_.renderGraphicChild},Area:{handler:_.renderGraphicChild},Radar:{handler:_.renderGraphicChild},RadialBar:{handler:_.renderGraphicChild},Scatter:{handler:_.renderGraphicChild},Pie:{handler:_.renderGraphicChild},Funnel:{handler:_.renderGraphicChild},Tooltip:{handler:_.renderCursor,once:!0},PolarGrid:{handler:_.renderPolarGrid,once:!0},PolarAngleAxis:{handler:_.renderPolarAxis},PolarRadiusAxis:{handler:_.renderPolarAxis},Customized:{handler:_.renderCustomized}}),_.clipPathId="".concat((b=v.id)!==null&&b!==void 0?b:Dp("recharts"),"-clip"),_.throttleTriggeredAfterMouseMove=Rz(_.triggeredAfterMouseMove,(N=v.throttleDelay)!==null&&N!==void 0?N:1e3/60),_.state={},_}return b7e(y,x),g7e(y,[{key:"componentDidMount",value:function(){var b,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,N=b.children,_=b.data,E=b.height,j=b.layout,A=ws(N,Vn);if(A){var T=A.props.defaultIndex;if(!(typeof T!="number"||T<0||T>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[T]&&this.state.tooltipTicks[T].value,O=m4(this.state,_,T,P),R=this.state.tooltipTicks[T].coordinate,I=(this.state.offset.top+E)/2,z=j==="horizontal",Y=z?{x:R,y:I}:{y:R,x:I},ie=this.state.formattedGraphicalItems.find(function(X){var oe=X.item;return oe.type.name==="Scatter"});ie&&(Y=ze(ze({},Y),ie.props.points[T].tooltipPosition),O=ie.props.points[T].tooltipPayload);var re={activeTooltipIndex:T,isTooltipActive:!0,activeLabel:P,activePayload:O,activeCoordinate:Y};this.setState(re),this.renderCursor(A),this.accessibilityManager.setIndex(T)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var _,E;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function(b){Hj([ws(b.children,Vn)],[ws(this.props.children,Vn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=ws(this.props.children,Vn);if(b&&typeof b.props.shared=="boolean"){var N=b.props.shared?"axis":"item";return l.indexOf(N)>=0?N:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var N=this.container,_=N.getBoundingClientRect(),E=y4e(_),j={chartX:Math.round(b.pageX-E.left),chartY:Math.round(b.pageY-E.top)},A=_.width/N.offsetWidth||1,T=this.inRange(j.chartX,j.chartY,A);if(!T)return null;var P=this.state,O=P.xAxisMap,R=P.yAxisMap,I=this.getTooltipEventType(),z=jD(this.state,this.props.data,this.props.layout,T);if(I!=="axis"&&O&&R){var Y=gu(O).scale,ie=gu(R).scale,re=Y&&Y.invert?Y.invert(j.chartX):null,X=ie&&ie.invert?ie.invert(j.chartY):null;return ze(ze({},j),{},{xValue:re,yValue:X},z)}return z?ze(ze({},j),z):null}},{key:"inRange",value:function(b,N){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,j=b/_,A=N/_;if(E==="horizontal"||E==="vertical"){var T=this.state.offset,P=j>=T.left&&j<=T.left+T.width&&A>=T.top&&A<=T.top+T.height;return P?{x:j,y:A}:null}var O=this.state,R=O.angleAxisMap,I=O.radiusAxisMap;if(R&&I){var z=gu(R);return ZL({x:j,y:A},z)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,N=this.getTooltipEventType(),_=ws(b,Vn),E={};_&&N==="axis"&&(_.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var j=Fb(this.props,this.handleOuterEvent);return ze(ze({},j),E)}},{key:"addListener",value:function(){HN.on(WN,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){HN.removeListener(WN,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,N,_){for(var E=this.state.formattedGraphicalItems,j=0,A=E.length;j<A;j++){var T=E[j];if(T.item===b||T.props.key===b.key||N===xc(T.item.type)&&_===T.childIndex)return T}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,N=this.state.offset,_=N.left,E=N.top,j=N.height,A=N.width;return ye.createElement("defs",null,ye.createElement("clipPath",{id:b},ye.createElement("rect",{x:_,y:E,height:j,width:A})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(N,_){var E=_D(_,2),j=E[0],A=E[1];return ze(ze({},N),{},Ht({},j,A.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(N,_){var E=_D(_,2),j=E[0],A=E[1];return ze(ze({},N),{},Ht({},j,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[b])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(b){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[b])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(b){var N=this.state,_=N.formattedGraphicalItems,E=N.activeItem;if(_&&_.length)for(var j=0,A=_.length;j<A;j++){var T=_[j],P=T.props,O=T.item,R=O.type.defaultProps!==void 0?ze(ze({},O.type.defaultProps),O.props):O.props,I=xc(O.type);if(I==="Bar"){var z=(P.data||[]).find(function(X){return iPe(b,X)});if(z)return{graphicalItem:T,payload:z}}else if(I==="RadialBar"){var Y=(P.data||[]).find(function(X){return ZL(b,X)});if(Y)return{graphicalItem:T,payload:Y}}else if(u_(T,E)||d_(T,E)||Cv(T,E)){var ie=G8e({graphicalItem:T,activeTooltipItem:E,itemData:R.data}),re=R.activeIndex===void 0?ie:R.activeIndex;return{graphicalItem:ze(ze({},T),{},{childIndex:re}),payload:Cv(T,E)?R.data[ie]:T.props.data[ie]}}}return null}},{key:"render",value:function(){var b=this;if(!qP(this))return null;var N=this.props,_=N.children,E=N.className,j=N.width,A=N.height,T=N.style,P=N.compact,O=N.title,R=N.desc,I=ND(N,c7e),z=zt(I,!1);if(P)return ye.createElement(aD,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ye.createElement(Vj,Yh({},z,{width:j,height:A,title:O,desc:R}),this.renderClipPath(),WP(_,this.renderMap)));if(this.props.accessibilityLayer){var Y,ie;z.tabIndex=(Y=this.props.tabIndex)!==null&&Y!==void 0?Y:0,z.role=(ie=this.props.role)!==null&&ie!==void 0?ie:"application",z.onKeyDown=function(X){b.accessibilityManager.keyboardEvent(X)},z.onFocus=function(){b.accessibilityManager.focus()}}var re=this.parseEventsOfWrapper();return ye.createElement(aD,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ye.createElement("div",Yh({className:cr("recharts-wrapper",E),style:ze({position:"relative",cursor:"default",width:j,height:A},T)},re,{ref:function(oe){b.container=oe}}),ye.createElement(Vj,Yh({},z,{width:j,height:A,title:O,desc:R,style:A7e}),this.renderClipPath(),WP(_,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(D.Component);Ht(g,"displayName",r),Ht(g,"defaultProps",ze({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Ht(g,"getDerivedStateFromProps",function(x,y){var v=x.dataKey,b=x.data,N=x.children,_=x.width,E=x.height,j=x.layout,A=x.stackOffset,T=x.margin,P=y.dataStartIndex,O=y.dataEndIndex;if(y.updateId===void 0){var R=AD(x);return ze(ze(ze({},R),{},{updateId:0},h(ze(ze({props:x},R),{},{updateId:0}),y)),{},{prevDataKey:v,prevData:b,prevWidth:_,prevHeight:E,prevLayout:j,prevStackOffset:A,prevMargin:T,prevChildren:N})}if(v!==y.prevDataKey||b!==y.prevData||_!==y.prevWidth||E!==y.prevHeight||j!==y.prevLayout||A!==y.prevStackOffset||!p0(T,y.prevMargin)){var I=AD(x),z={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},Y=ze(ze({},jD(y,b,j)),{},{updateId:y.updateId+1}),ie=ze(ze(ze({},I),z),Y);return ze(ze(ze({},ie),h(ze({props:x},ie),y)),{},{prevDataKey:v,prevData:b,prevWidth:_,prevHeight:E,prevLayout:j,prevStackOffset:A,prevMargin:T,prevChildren:N})}if(!Hj(N,y.prevChildren)){var re,X,oe,we,_e=ws(N,ip),k=_e&&(re=(X=_e.props)===null||X===void 0?void 0:X.startIndex)!==null&&re!==void 0?re:P,F=_e&&(oe=(we=_e.props)===null||we===void 0?void 0:we.endIndex)!==null&&oe!==void 0?oe:O,B=k!==P||F!==O,U=!ar(b),J=U&&!B?y.updateId:y.updateId+1;return ze(ze({updateId:J},h(ze(ze({props:x},y),{},{updateId:J,dataStartIndex:k,dataEndIndex:F}),y)),{},{prevChildren:N,dataStartIndex:k,dataEndIndex:F})}return null}),Ht(g,"renderActiveDot",function(x,y,v){var b;return D.isValidElement(x)?b=D.cloneElement(x,y):Kt(x)?b=x(y):b=ye.createElement(i_,y),ye.createElement(Ar,{className:"recharts-active-dot",key:v},b)});var m=D.forwardRef(function(y,v){return ye.createElement(g,Yh({},y,{ref:v}))});return m.displayName=g.displayName,m},I7e=yT({chartName:"LineChart",GraphicalChild:xx,axisComponents:[{axisType:"xAxis",AxisComp:uo},{axisType:"yAxis",AxisComp:fo}],formatAxisMap:SH}),If=yT({chartName:"BarChart",GraphicalChild:Ii,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:uo},{axisType:"yAxis",AxisComp:fo}],formatAxisMap:SH}),x_=yT({chartName:"PieChart",GraphicalChild:go,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:c_},{axisType:"radiusAxis",AxisComp:o_}],formatAxisMap:mke,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Mm={ASIGNADA:"#3b82f6",RECUPERADA:"#8b5cf6",CERRADA:"#6b7280",PERDIDA:"#ef4444",DETERIORO:"#f97316"},M7e=({loans:e})=>{const t=D.useMemo(()=>{const a={},i=new Date;for(let s=7;s>=0;s--){const l=new Date(i);l.setDate(l.getDate()-s*7);const c=`S${8-s}`;a[c]=0}return e.forEach(s=>{const l=new Date(s.issued_at),c=Math.floor((i.getTime()-l.getTime())/(1e3*60*60*24*7));if(c>=0&&c<8){const u=`S${8-c}`;a[u]!==void 0&&a[u]++}}),Object.entries(a).map(([s,l])=>({week:s,count:l}))},[e]),r=D.useMemo(()=>{const a=e.filter(s=>s.reason==="PERDIDA").length,i=e.filter(s=>s.reason==="DETERIORO").length;return[{name:"Perdida",value:a,color:Mm.PERDIDA},{name:"Deterioro",value:i,color:Mm.DETERIORO}].filter(s=>s.value>0)},[e]),n=D.useMemo(()=>Ju.map(a=>{const i=e.filter(s=>{var l;return((l=s.backup_cards)==null?void 0:l.inventory_terminal)===a});return{terminal:a.split(" ")[0],ASIGNADA:i.filter(s=>s.status==="ASIGNADA").length,RECUPERADA:i.filter(s=>s.status==="RECUPERADA").length,CERRADA:i.filter(s=>s.status==="CERRADA").length}}),[e]);return o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Prestamos por Semana"}),o.jsx("div",{className:"h-48",children:o.jsx(ao,{width:"100%",height:"100%",children:o.jsxs(If,{data:t,children:[o.jsx(Lc,{strokeDasharray:"3 3",vertical:!1}),o.jsx(uo,{dataKey:"week",tick:{fontSize:11}}),o.jsx(fo,{tick:{fontSize:11},allowDecimals:!1}),o.jsx(Vn,{}),o.jsx(Ii,{dataKey:"count",name:"Prestamos",fill:"#3b82f6",radius:[4,4,0,0]})]})})})]}),o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Motivo de Solicitud"}),o.jsx("div",{className:"h-48",children:r.length>0?o.jsx(ao,{width:"100%",height:"100%",children:o.jsxs(x_,{children:[o.jsx(go,{data:r,cx:"50%",cy:"50%",innerRadius:40,outerRadius:70,paddingAngle:2,dataKey:"value",label:({name:a,percent:i})=>`${a} ${(i*100).toFixed(0)}%`,labelLine:!1,children:r.map((a,i)=>o.jsx(Rl,{fill:a.color},`cell-${i}`))}),o.jsx(Vn,{})]})}):o.jsx("div",{className:"h-full flex items-center justify-center text-slate-400 text-sm",children:"Sin datos"})})]}),o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Estado por Terminal"}),o.jsx("div",{className:"h-48",children:o.jsx(ao,{width:"100%",height:"100%",children:o.jsxs(If,{data:n,layout:"vertical",children:[o.jsx(Lc,{strokeDasharray:"3 3",horizontal:!1}),o.jsx(uo,{type:"number",tick:{fontSize:11},allowDecimals:!1}),o.jsx(fo,{type:"category",dataKey:"terminal",tick:{fontSize:11},width:60}),o.jsx(Vn,{}),o.jsx(Nl,{wrapperStyle:{fontSize:10}}),o.jsx(Ii,{dataKey:"ASIGNADA",name:"Asignada",stackId:"a",fill:Mm.ASIGNADA}),o.jsx(Ii,{dataKey:"RECUPERADA",name:"Recuperada",stackId:"a",fill:Mm.RECUPERADA}),o.jsx(Ii,{dataKey:"CERRADA",name:"Cerrada",stackId:"a",fill:Mm.CERRADA})]})})})]})]})},$2=e=>e.replace(/[.\-\s]/g,"").toUpperCase(),Mf=e=>{const t=$2(e);if(t.length<2)return t;const r=t.slice(0,-1),n=t.slice(-1);return`${r.replace(/\B(?=(\d{3})+(?!\d))/g,".")}-${n}`},TD=e=>{const t=$2(e);if(t.length<8||t.length>9)return!1;const r=t.slice(0,-1),n=t.slice(-1);if(!/^\d+$/.test(r))return!1;let a=0,i=2;for(let c=r.length-1;c>=0;c--)a+=parseInt(r[c])*i,i=i===7?2:i+1;const s=a%11,l=s===0?"0":s===1?"K":String(11-s);return n===l},F7e=({status:e,isOverdue:t})=>{const r="inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded-full";if(t&&e==="ASIGNADA")return o.jsxs("span",{className:`${r} bg-amber-100 text-amber-800`,children:[o.jsx(jw,{className:"w-3 h-3"}),"ATRASADA"]});const n={ASIGNADA:"bg-blue-100 text-blue-800",RECUPERADA:"bg-emerald-100 text-emerald-800",CERRADA:"bg-slate-100 text-slate-700",CANCELADA:"bg-red-100 text-red-800"};return o.jsx("span",{className:`${r} ${n[e]||"bg-slate-100 text-slate-700"}`,children:e})},$7e=({reason:e})=>{const t={PERDIDA:"bg-red-50 text-red-700",DETERIORO:"bg-orange-50 text-orange-700"};return o.jsx("span",{className:`inline-block px-2 py-0.5 text-xs font-medium rounded ${t[e]||""}`,children:e==="PERDIDA"?"Perdida":"Deterioro"})},B7e=({loans:e,onView:t,onEdit:r,onRecover:n,onCancel:a,onResendEmails:i})=>{const s=D.useMemo(()=>{const l=new Date;return e.map(c=>{const u=new Date(c.issued_at),d=Math.floor((l.getTime()-u.getTime())/(1e3*60*60*24));return{...c,daysPassed:d,isOverdue:c.status==="ASIGNADA"&&d>c.alert_after_days}})},[e]);return e.length===0?o.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:o.jsx("p",{className:"text-slate-500",children:"No se encontraron prestamos con los filtros seleccionados."})}):o.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[o.jsx("thead",{className:"bg-slate-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Trabajador"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"RUT"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Terminal"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Tarjeta"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Motivo"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Entrega"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Dias"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Estado"}),o.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:s.map(l=>{var c,u;return o.jsxs("tr",{className:`hover:bg-slate-50 ${l.isOverdue?"bg-amber-50/50":""}`,children:[o.jsxs("td",{className:"px-4 py-3 whitespace-nowrap",children:[o.jsx("p",{className:"text-sm font-medium text-slate-900",children:l.person_name}),o.jsx("p",{className:"text-xs text-slate-500",children:l.person_cargo||"-"})]}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-700",children:Mf(l.person_rut)}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-700",children:l.person_terminal}),o.jsxs("td",{className:"px-4 py-3 whitespace-nowrap",children:[o.jsx("p",{className:"text-sm font-mono text-slate-900",children:((c=l.backup_cards)==null?void 0:c.card_number)||"-"}),o.jsx("p",{className:"text-xs text-slate-500",children:(u=l.backup_cards)==null?void 0:u.inventory_terminal})]}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsx($7e,{reason:l.reason})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-700",children:new Date(l.issued_at).toLocaleDateString("es-CL")}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsxs("span",{className:`text-sm font-medium ${l.isOverdue?"text-amber-600":"text-slate-700"}`,children:[l.daysPassed,"d"]})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsx(F7e,{status:l.status,isOverdue:l.isOverdue})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[o.jsx("button",{onClick:()=>t(l),className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded",title:"Ver detalle",children:o.jsx(Nme,{className:"w-4 h-4"})}),l.status==="ASIGNADA"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>r(l),className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded",title:"Editar",children:o.jsx(zme,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>n(l),className:"p-1.5 text-slate-400 hover:text-emerald-600 hover:bg-emerald-50 rounded",title:"Marcar recuperada",children:o.jsx(vU,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>a(l),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Cancelar",children:o.jsx(Cc,{className:"w-4 h-4"})})]}),o.jsx("button",{onClick:()=>i(l),className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded",title:"Reenviar correos",children:o.jsx(mU,{className:"w-4 h-4"})})]})})]},l.id)})})]})})})},U7e=async(e,t)=>{let r=Se.from("backup_cards").select("*").order("card_number",{ascending:!0});e&&e!=="TODAS"&&(r=r.eq("status",e)),t&&(r=r.eq("inventory_terminal",t));const{data:n,error:a}=await r;if(a)throw a;return n},z7e=async e=>{let t=Se.from("backup_cards").select("*").eq("status","LIBRE").order("card_number");e&&(t=t.eq("inventory_terminal",e));const{data:r,error:n}=await t;if(n)throw n;return r},q7e=async e=>{const{data:t,error:r}=await Se.from("backup_cards").insert({card_number:e.card_number,inventory_terminal:e.inventory_terminal,notes:e.notes||null,status:"LIBRE"}).select().single();if(r)throw r;return t},H7e=async e=>{const{error:t}=await Se.from("backup_cards").update({status:"INACTIVA"}).eq("id",e);if(t)throw t},W7e=async e=>{let t=Se.from("backup_loans").select("*, backup_cards(*)").order("issued_at",{ascending:!1});e&&(e.search&&(t=t.or(`person_rut.ilike.%${e.search}%,person_name.ilike.%${e.search}%`)),e.terminal&&(t=t.eq("person_terminal",e.terminal)),e.status&&e.status!=="TODAS"&&(t=t.eq("status",e.status)),e.reason&&e.reason!=="TODAS"&&(t=t.eq("reason",e.reason)),e.dateFrom&&(t=t.gte("issued_at",e.dateFrom)),e.dateTo&&(t=t.lte("issued_at",e.dateTo+"T23:59:59")));const{data:r,error:n}=await t;if(n)throw n;return r},V7e=async e=>{const{data:t,error:r}=await Se.from("backup_loans").insert({card_id:e.card_id,person_rut:e.person_rut,person_name:e.person_name,person_cargo:e.person_cargo||null,person_terminal:e.person_terminal,person_turno:e.person_turno||null,person_horario:e.person_horario||null,person_contacto:e.person_contacto||null,boss_email:e.worker_email||null,reason:e.reason,requested_at:e.requested_at,discount_amount:e.discount_amount,discount_applied:e.discount_applied,created_by_supervisor:e.created_by_supervisor,status:"ASIGNADA"}).select("*, backup_cards(*)").single();if(r)throw r;const{error:n}=await Se.from("backup_cards").update({status:"ASIGNADA"}).eq("id",e.card_id);if(n)throw n;return t},G7e=async(e,t,r)=>{const{data:n,error:a}=await Se.from("backup_loans").select("card_id").eq("id",e).single();if(a)throw a;const{error:i}=await Se.from("backup_loans").update({status:"CERRADA",recovered_at:t,closed_at:new Date().toISOString()}).eq("id",e);if(i)throw i;const{error:s}=await Se.from("backup_cards").update({status:"LIBRE"}).eq("id",n.card_id);if(s)throw s},K7e=async(e,t)=>{const{data:r,error:n}=await Se.from("backup_loans").select("card_id").eq("id",e).single();if(n)throw n;const{error:a}=await Se.from("backup_loans").update({status:"CANCELADA",cancel_reason:t,closed_at:new Date().toISOString()}).eq("id",e);if(a)throw a;const{error:i}=await Se.from("backup_cards").update({status:"LIBRE"}).eq("id",r.card_id);if(i)throw i},Y7e=async e=>{const{error:t}=await Se.from("backup_loans").update({emails_sent_at:new Date().toISOString()}).eq("id",e);if(t)throw t},sW=async()=>{const{data:e,error:t}=await Se.from("backup_email_settings").select("*").order("scope_type",{ascending:!1});if(t)throw t;return e},X7e=async e=>{const{data:t,error:r}=await Se.from("backup_email_settings").upsert(e,{onConflict:"scope_type,scope_code"}).select().single();if(r)throw r;return t},J7e=async()=>{const{data:e,error:t}=await Se.from("backup_cards").select("inventory_terminal, status");if(t)throw t;const r={"El Roble":0,"La Reina":0,"Maria Angelica":0};e==null||e.forEach(h=>{if(h.status==="LIBRE"){const g=h.inventory_terminal;Ju.includes(g)&&r[g]++}});const{data:n,error:a}=await Se.from("backup_loans").select("id, issued_at, alert_after_days, discount_amount, discount_applied").eq("status","ASIGNADA");if(a)throw a;const i=new Date;let s=0,l=0;n==null||n.forEach(h=>{const g=new Date(h.issued_at);Math.floor((i.getTime()-g.getTime())/(1e3*60*60*24))>h.alert_after_days&&s++,h.discount_applied&&(l+=h.discount_amount)});const c=new Date;c.setDate(c.getDate()-30);const{data:u,error:d}=await Se.from("backup_loans").select("issued_at, recovered_at, discount_amount, discount_applied").in("status",["RECUPERADA","CERRADA"]).gte("closed_at",c.toISOString());if(d)throw d;let f=0,p=0;return u==null||u.forEach(h=>{if(h.recovered_at){const g=new Date(h.issued_at),m=new Date(h.recovered_at),x=Math.floor((m.getTime()-g.getTime())/(1e3*60*60*24));f+=x,p++}h.discount_applied&&(l+=h.discount_amount)}),{availableByTerminal:r,activeLoans:(n==null?void 0:n.length)||0,overdueLoans:s,avgReturnDays:p>0?Math.round(f/p):0,totalDiscounts:l}},Ni={user:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="9" cy="5" r="3.5" stroke="#64748b" stroke-width="1.5"/>
        <path d="M2 16C2 12.686 5.13401 10 9 10C12.866 10 16 12.686 16 16" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,id:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="1.5" y="3.5" width="15" height="11" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <circle cx="6" cy="8" r="1.5" stroke="#64748b" stroke-width="1"/>
        <path d="M4 12C4 10.8954 4.89543 10 6 10C7.10457 10 8 10.8954 8 12" stroke="#64748b" stroke-width="1"/>
        <path d="M10.5 7.5H14.5M10.5 10H13" stroke="#64748b" stroke-width="1.2" stroke-linecap="round"/>
    </svg>`,building:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M2 16V3.5C2 3.22386 2.22386 3 2.5 3H9.5C9.77614 3 10 3.22386 10 3.5V16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M10 7H14.5C14.7761 7 15 7.22386 15 7.5V16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M5 6H7M5 9H7M5 12H7M12 10H13M12 13H13" stroke="#64748b" stroke-width="1.2" stroke-linecap="round"/>
        <path d="M1 16H17" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,calendar:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="2" y="3.5" width="14" height="12" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <path d="M2 7H16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M5.5 1.5V4.5M12.5 1.5V4.5" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,card:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="1" y="3" width="16" height="12" rx="2" stroke="#64748b" stroke-width="1.5"/>
        <path d="M1 7H17" stroke="#64748b" stroke-width="1.5"/>
        <path d="M4 11H8" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,warning:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M9 6V10M9 12.5V13" stroke="#f59e0b" stroke-width="1.5" stroke-linecap="round"/>
        <path d="M3 15L9 3L15 15H3Z" stroke="#f59e0b" stroke-width="1.5" stroke-linejoin="round"/>
    </svg>`,money:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="9" cy="9" r="7" stroke="#64748b" stroke-width="1.5"/>
        <path d="M9 5V13M11 7H7.5C6.67157 7 6 7.67157 6 8.5C6 9.32843 6.67157 10 7.5 10H10.5C11.3284 10 12 10.6716 12 11.5C12 12.3284 11.3284 13 10.5 13H6" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,supervisor:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="9" cy="6" r="3" stroke="#64748b" stroke-width="1.5"/>
        <path d="M3 16C3 13.2386 5.68629 11 9 11C12.3137 11 15 13.2386 15 16" stroke="#64748b" stroke-width="1.5"/>
        <path d="M9 3L10 1.5L11 3" stroke="#f59e0b" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`},Si=(e,t,r,n=!1)=>`
    <tr>
        <td style="padding: 14px 16px; border-bottom: 1px solid #e2e8f0; width: 40%; vertical-align: middle;">
            <table role="presentation" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="padding-right: 12px; vertical-align: middle;">${e}</td>
                    <td style="font-size: 11px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">${t}</td>
                </tr>
            </table>
        </td>
        <td style="padding: 14px 16px; border-bottom: 1px solid #e2e8f0; font-size: 14px; font-weight: ${n?"700":"500"}; color: ${n?"#0f172a":"#334155"}; text-align: right;">${r}</td>
    </tr>
`,Q7e=e=>new Date(e).toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Z7e=async(e,t,r,n)=>{var f;const a=((f=e.backup_cards)==null?void 0:f.card_number)||"N/A",i=e.person_terminal,s=e.reason==="PERDIDA"?"Prdida de Credencial":"Deterioro de Credencial",l=Q7e(e.issued_at),c=n?[n]:void 0,u=e.reason==="PERDIDA"?"#ef4444":"#f59e0b",d=e.reason==="PERDIDA"?"#fef2f2":"#fffbeb";try{const p=`Solicitud Nueva Credencial - ${e.person_name}`,h=`
            <!-- Status Banner -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td style="background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 12px; padding: 24px; text-align: center;">
                        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                            <tr>
                                <td align="center" style="padding-bottom: 8px;">
                                    <svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="28" cy="28" r="26" fill="#dbeafe" stroke="#3b82f6" stroke-width="3"/>
                                        <rect x="18" y="20" width="20" height="16" rx="2" stroke="#2563eb" stroke-width="2.5"/>
                                        <circle cx="24" cy="27" r="3" stroke="#2563eb" stroke-width="2"/>
                                        <path d="M20 33C20 31 21.5 29 24 29C26.5 29 28 31 28 33" stroke="#2563eb" stroke-width="2"/>
                                        <path d="M31 25H35M31 29H34" stroke="#2563eb" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                </td>
                            </tr>
                            <tr>
                                <td align="center">
                                    <span style="font-size: 11px; font-weight: 700; color: #1e40af; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 4px;">Accin Requerida</span>
                                    <span style="font-size: 20px; font-weight: 800; color: #1d4ed8; letter-spacing: -0.5px;">SOLICITUD DE NUEVA CREDENCIAL</span>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
            
            <!-- Reason Badge -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td align="center">
                        <span style="display: inline-block; padding: 8px 20px; background: ${d}; border: 1px solid ${u}; border-radius: 100px; color: ${u}; font-size: 12px; font-weight: 700; letter-spacing: 0.5px; text-transform: uppercase;">${s}</span>
                    </td>
                </tr>
            </table>
            
            <!-- Worker Data Section -->
            <p style="margin: 0 0 12px 0; font-size: 12px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">Datos del Trabajador</p>
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate; margin-bottom: 24px;">
                ${Si(Ni.user,"Nombre",e.person_name,!0)}
                ${Si(Ni.id,"RUT",e.person_rut)}
                ${Si(Ni.building,"Terminal",i)}
                ${Si(Ni.id,"Cargo",e.person_cargo||"No especificado")}
            </table>
            
            <!-- Backup Info Section -->
            <p style="margin: 0 0 12px 0; font-size: 12px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">Informacin del Respaldo</p>
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate; margin-bottom: 24px;">
                ${Si(Ni.card,"Tarjeta Asignada",`N ${a}`,!0)}
                ${Si(Ni.calendar,"Fecha Solicitud",e.requested_at)}
                ${Si(Ni.supervisor,"Supervisor Entrega",e.created_by_supervisor)}
            </table>
            
            <!-- Action Message -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 16px;">
                <tr>
                    <td style="padding: 20px; background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 12px;">
                        <p style="margin: 0; font-size: 14px; color: #166534; font-weight: 600; text-align: center;">
                             Por favor proceder con la emisin de una nueva credencial para este trabajador.
                        </p>
                    </td>
                </tr>
            </table>
            
            ${n?`
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="padding: 12px 16px; background: #fef3c7; border: 1px solid #fde68a; border-radius: 8px;">
                        <p style="margin: 0; font-size: 13px; color: #92400e; font-weight: 500;">
                             <strong>Documento adjunto:</strong> Autorizacin de descuento firmada
                        </p>
                    </td>
                </tr>
            </table>
            `:""}
        `.trim();await oo.sendEmail({audience:"manual",manualRecipients:[t],cc:r?r.split(",").map(x=>x.trim()).filter(Boolean):void 0,subject:p,body:h,attachments:c,module:"credenciales"});const g=`Notificacin Credencial Respaldo - ${e.person_name}`,m=`
            <!-- Status Banner -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td style="background: #fef3c7; border: 1px solid #fde68a; border-radius: 12px; padding: 24px; text-align: center;">
                        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                            <tr>
                                <td align="center" style="padding-bottom: 8px;">
                                    <svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="28" cy="28" r="26" fill="#fef9c3" stroke="#eab308" stroke-width="3"/>
                                        <path d="M28 18V32M28 36V38" stroke="#ca8a04" stroke-width="4" stroke-linecap="round"/>
                                    </svg>
                                </td>
                            </tr>
                            <tr>
                                <td align="center">
                                    <span style="font-size: 11px; font-weight: 700; color: #92400e; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 4px;">Notificacin Importante</span>
                                    <span style="font-size: 18px; font-weight: 800; color: #b45309; letter-spacing: -0.5px;">CREDENCIAL DE RESPALDO ASIGNADA</span>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
            
            <!-- Intro Message -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td style="padding: 16px 20px; background: #f8fafc; border-radius: 12px;">
                        <p style="margin: 0; font-size: 14px; color: #475569; line-height: 1.6;">
                            Se le informa que el trabajador a su cargo <strong style="color: #0f172a;">${e.person_name}</strong> utilizar una tarjeta de respaldo mientras se gestiona una nueva credencial.
                        </p>
                    </td>
                </tr>
            </table>
            
            <!-- Worker Data Section -->
            <p style="margin: 0 0 12px 0; font-size: 12px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">Datos del Trabajador</p>
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate; margin-bottom: 24px;">
                ${Si(Ni.user,"Nombre",e.person_name,!0)}
                ${Si(Ni.id,"RUT",e.person_rut)}
                ${Si(Ni.building,"Terminal",i)}
                ${Si(Ni.id,"Cargo",e.person_cargo||"No especificado")}
            </table>
            
            <!-- Backup Info Section -->
            <p style="margin: 0 0 12px 0; font-size: 12px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px;">Informacin del Respaldo</p>
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; border-spacing: 0; border-collapse: separate; margin-bottom: 24px;">
                ${Si(Ni.card,"Tarjeta Asignada",`N ${a}`,!0)}
                ${Si(Ni.warning,"Motivo",s)}
                ${Si(Ni.calendar,"Fecha de Entrega",l)}
                ${e.discount_applied?Si(Ni.money,"Descuento Aplicado",`$${e.discount_amount.toLocaleString("es-CL")} (1 cuota)`,!0):""}
            </table>
            
            <!-- Important Notice -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 16px;">
                <tr>
                    <td style="padding: 20px; background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 12px;">
                        <p style="margin: 0; font-size: 14px; color: #1e40af; font-weight: 500; text-align: center;">
                             Una vez que el trabajador reciba su nueva credencial, deber devolver la tarjeta de respaldo.
                        </p>
                    </td>
                </tr>
            </table>
            
            ${n?`
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="margin-bottom: 24px;">
                <tr>
                    <td style="padding: 12px 16px; background: #fef3c7; border: 1px solid #fde68a; border-radius: 8px;">
                        <p style="margin: 0; font-size: 13px; color: #92400e; font-weight: 500;">
                             <strong>Documento adjunto:</strong> Autorizacin de descuento firmada
                        </p>
                    </td>
                </tr>
            </table>
            `:""}
            
            <!-- Signature -->
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="padding-top: 16px; border-top: 1px solid #e2e8f0;">
                        <p style="margin: 0; font-size: 14px; color: #64748b;">Saludos cordiales,</p>
                        <p style="margin: 4px 0 0 0; font-size: 14px; font-weight: 700; color: #0f172a;">Gestin de Personal</p>
                    </td>
                </tr>
            </table>
        `.trim();return e.boss_email&&await oo.sendEmail({audience:"manual",manualRecipients:[e.boss_email],subject:g,body:m,module:"credenciales"}),await Y7e(e.id),{success:!0}}catch(p){return console.error("Error sending backup emails:",p),{success:!1,error:p instanceof Error?p.message:"Error desconocido al enviar correos"}}},eMe=({isOpen:e,onClose:t,onSubmit:r,isLoading:n,supervisorName:a})=>{const i=D.useRef(null),[s,l]=D.useState({person_rut:"",person_name:"",person_cargo:"",person_terminal:"EL_ROBLE",person_turno:"",person_horario:"",person_contacto:"",worker_email:"",reason:"PERDIDA",requested_at:new Date().toISOString().split("T")[0],card_id:"",discount_applied:!0,discount_amount:5e3,send_emails:!0,created_by_supervisor:a}),[c,u]=D.useState(""),[d,f]=D.useState(""),{data:p=[]}=Mt({queryKey:["backup-cards-available",c],queryFn:()=>z7e(c||void 0),enabled:e}),h=async()=>{const x=$2(s.person_rut);if(!x)return;if(!TD(x)){f("RUT invalido");return}f("");const{data:y}=await Se.from("staff").select("nombre, cargo, terminal_code, turno, horario, contacto").eq("rut",x).single();l(y?v=>({...v,person_rut:Mf(x),person_name:y.nombre,person_cargo:y.cargo||"",person_terminal:y.terminal_code||"EL_ROBLE",person_turno:y.turno||"",person_horario:y.horario||"",person_contacto:y.contacto||""}):v=>({...v,person_rut:Mf(x)}))},g=async x=>{if(x.preventDefault(),!TD($2(s.person_rut))){f("RUT invalido");return}await r(s,m)},m=()=>{const x=window.open("","_blank");if(x){const y=new Date().toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"});x.document.write(`
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autorizacin de Descuento - ${s.person_name||"RBU"}</title>
    <style>
        @page { size: letter; margin: 15mm 20mm; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: Arial, Helvetica, sans-serif;
            background-color: white;
            padding: 0;
            color: #000;
            font-size: 12px;
            line-height: 1.4;
        }

        .page {
            width: 100%;
            max-width: 210mm;
            margin: 0 auto;
        }

        /* Header Styles */
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 5px;
            padding-bottom: 5px;
            border-bottom: 3px solid black;
        }

        /* Logo RBU con camion CSS */
        .logo-container {
            position: relative;
            width: 150px;
            height: 50px;
        }
        .truck-body {
            border: 4px solid #003399;
            border-radius: 8px;
            width: 120px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            top: 0;
            left: 0;
            background: white;
            z-index: 2;
        }
        .truck-cab {
            position: absolute;
            top: 5px;
            right: 15px;
            width: 25px;
            height: 35px;
            border-top: 4px solid #003399;
            border-right: 4px solid #003399;
            border-radius: 0 5px 0 0;
        }
        .logo-text {
            color: #cc0000;
            font-weight: 900;
            font-size: 32px;
            font-family: 'Arial Black', Arial, sans-serif;
            letter-spacing: -2px;
        }
        .wheel {
            width: 12px;
            height: 12px;
            border: 4px solid #003399;
            border-radius: 50%;
            position: absolute;
            bottom: -5px;
            background: white;
            z-index: 3;
        }
        .w1 { left: 20px; }
        .w2 { left: 90px; }

        .rbu-santiago {
            color: #cc0000;
            font-weight: bold;
            font-size: 14px;
        }

        .title-bar {
            background-color: black;
            color: white;
            text-align: center;
            padding: 8px 0;
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 25px;
        }

        /* Form Fields */
        .field-row {
            display: flex;
            margin-bottom: 20px;
            align-items: flex-end;
        }
        
        .field-label {
            font-weight: bold;
            font-size: 11px;
            white-space: nowrap;
            margin-right: 10px;
        }

        .field-line {
            border-bottom: 2px solid black;
            flex-grow: 1;
            min-height: 18px;
            padding-left: 5px;
            font-size: 12px;
        }

        .rut-row {
            display: flex;
            justify-content: space-between;
        }
        
        .rut-container {
            display: flex;
            width: 38%;
            align-items: flex-end;
        }
        
        .cargo-container {
            display: flex;
            width: 55%;
            align-items: flex-end;
        }

        /* Authorization Text */
        .auth-text {
            text-align: center;
            font-weight: bold;
            margin: 25px 0;
            font-size: 13px;
            letter-spacing: 0.5px;
        }

        .amount-row {
            display: flex;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 12px;
            gap: 20px;
        }

        .concept-row {
            margin-left: 30px;
            margin-bottom: 5px;
            font-size: 13px;
        }
        .desc-small {
            font-size: 10px;
            margin-left: 30px;
            margin-bottom: 18px;
            color: #555;
        }

        /* Right aligned details */
        .details-right {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            margin-right: 20px;
        }
        
        .detail-item {
            display: flex;
            align-items: flex-end;
            margin-bottom: 8px;
            width: 280px;
            justify-content: flex-end;
        }
        
        .detail-item label {
            font-size: 11px;
            margin-right: 10px;
        }
        
        .detail-value {
            border-bottom: 2px solid black;
            width: 110px;
            text-align: right;
            font-weight: bold;
            font-size: 14px;
            padding-bottom: 2px;
            padding-right: 5px;
        }

        /* Signature & Date */
        .sig-date-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-top: 30px;
            margin-bottom: 10px;
            font-style: italic;
            font-size: 11px;
            font-weight: bold;
        }
        .date-val {
            font-size: 12px;
            font-style: normal;
        }

        .signature-line {
            border-bottom: 2px solid black;
            width: 200px;
            margin-top: 40px;
        }

        .legal-text {
            font-size: 9px;
            text-align: justify;
            line-height: 1.3;
            margin: 15px 0;
            padding-top: 10px;
            border-top: 1px solid #ccc;
        }

        /* Observations Box */
        .obs-header {
            background-color: #333;
            color: white;
            font-weight: bold;
            text-align: center;
            font-size: 11px;
            padding: 4px;
            border: 2px solid black;
            border-bottom: none;
        }
        .obs-box {
            border: 2px solid black;
            height: 50px;
            margin-bottom: 30px;
        }

        /* Footer */
        .footer-line {
            border-top: 3px solid black;
            padding-top: 8px;
            text-align: center;
            font-size: 10px;
            font-weight: bold;
            margin-top: 20px;
        }
        .company-name {
            text-align: right;
            font-weight: bold;
            margin-top: 15px;
            font-size: 11px;
            border-bottom: 2px solid black;
            display: inline-block;
            float: right;
            padding-bottom: 2px;
            text-decoration: underline;
        }

        /* Bottom Detail Section */
        .bottom-detail-title {
            text-align: center;
            font-style: italic;
            font-weight: bold;
            font-size: 14px;
            margin-top: 30px;
            margin-bottom: 10px;
            clear: both;
        }
        
        .bottom-table {
            width: 100%;
            font-size: 11px;
            overflow: hidden;
        }
        .bt-left { 
            float: left; 
            font-weight: bold;
        }
        .bt-right { 
            float: right; 
            text-align: center;
        }
        .costo-header {
            font-weight: bold;
            font-size: 10px;
            margin-bottom: 3px;
            color: #555;
        }

        @media print {
            body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
        }
    </style>
</head>
<body>

    <div class="page">
        <div class="header-top">
            <div class="logo-container">
                <div class="truck-cab"></div>
                <div class="truck-body">
                    <span class="logo-text">RBU</span>
                </div>
                <div class="wheel w1"></div>
                <div class="wheel w2"></div>
            </div>
            <div class="rbu-santiago">RBU Santiago.</div>
        </div>

        <div class="title-bar">
            Autorizacin de Descuento
        </div>

        <div class="field-row">
            <span class="field-label">NOMBRE DEL<br>TRABAJADOR:</span>
            <div class="field-line">${s.person_name||""}</div>
        </div>

        <div class="field-row rut-row">
            <div class="rut-container">
                <span class="field-label">RUT :</span>
                <div class="field-line">${s.person_rut||""}</div>
            </div>
            <div class="cargo-container">
                <span class="field-label">Cargo desempeado:</span>
                <div class="field-line">${s.person_cargo||""}</div>
            </div>
        </div>

        <div class="auth-text">
            EL TRABAJADOR INDIVIDUALIZADO AUTORIZA EN ESTE ACTO
        </div>

        <div class="amount-row">
            <span>EL DESCUENTO DE:</span>
            <span>$</span>
            <span>${s.discount_amount.toLocaleString("es-CL")}</span>
        </div>

        <div class="concept-row">
            <strong>POR CONCEPTO DE:</strong> &nbsp; ${s.reason==="PERDIDA"?"Prdida Credencial":"Deterioro Credencial"}
        </div>
        <div class="desc-small">Descripcin : Tarjeta de acceso vehicular</div>

        <div class="details-right">
            <div class="detail-item">
                <label>A descontar en:</label>
                <div class="detail-value">1 Cuota</div>
            </div>
            <div class="detail-item">
                <label>A contar de:</label>
                <div class="detail-value" style="font-style: italic; font-size: 12px;">Mes en curso</div>
            </div>
            <div class="detail-item">
                <label>Valor de cada cuota:</label>
                <div class="detail-value">$ ${s.discount_amount.toLocaleString("es-CL")}</div>
            </div>
        </div>

        <div class="sig-date-row">
            <div>
                <span>Firma y Rut del trabajador</span>
                <div class="signature-line"></div>
            </div>
            <span>Fecha : &nbsp; <span class="date-val"><strong>${y}</strong></span></span>
        </div>

        <div class="legal-text">
            El trabajador, mediante el presente instrumento, otorga mandato expreso a REDBUS URBANO S.A. para que descuente de sus remuneraciones en las cuotas y plazos indicados la suma indicada en este acto. Asimismo faculta expresamente a REDBUS URBANO S.A., para que en el evento de que por cualquier causa se pusiese trmino al contrato de trabajo, descuente el total del saldo adeudado de las indemnizaciones a que tenga derecho y/o otros emolumentos que pudiere tener derecho al trmino de la relacin laboral.
        </div>

        <div class="obs-header">Observaciones</div>
        <div class="obs-box"></div>

        <div class="footer-line">
            Av. El Salto 4651, Huechuraba, Santiago.<br>
            Fono: (56 2) 4881800 &nbsp;&nbsp; Fax: (56 2) 4881818
        </div>

        <div style="overflow: hidden; margin-top: 15px;">
            <div class="company-name">REDBUS URBANO S.A.</div>
        </div>

        <div class="bottom-detail-title">Detalle Descuento</div>
        
        <div class="bottom-table">
            <span class="bt-left">${s.reason==="PERDIDA"?"Prdida Credencial":"Deterioro Credencial"}</span>
            <div class="bt-right">
                <div class="costo-header">COSTO</div>
                <div><strong>$${s.discount_amount.toLocaleString("es-CL")}</strong></div>
            </div>
        </div>

    </div>

</body>
</html>
            `),x.document.close(),setTimeout(()=>x.print(),300)}};return D.useEffect(()=>{e&&(l({person_rut:"",person_name:"",person_cargo:"",person_terminal:"EL_ROBLE",person_turno:"",person_horario:"",person_contacto:"",worker_email:"",reason:"PERDIDA",requested_at:new Date().toISOString().split("T")[0],card_id:"",discount_applied:!0,discount_amount:5e3,send_emails:!0,created_by_supervisor:a}),f(""),u(""))},[e,a]),e?o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:t}),o.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between z-10",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Nuevo Prestamo de Respaldo"}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(Cc,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Datos del Trabajador"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"RUT"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",className:`input pr-10 ${d?"border-red-500":""}`,value:s.person_rut,onChange:x=>l(y=>({...y,person_rut:x.target.value})),onBlur:h,placeholder:"12.345.678-9",required:!0}),o.jsx(Ime,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"})]}),d&&o.jsx("p",{className:"text-xs text-red-500 mt-1",children:d})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nombre"}),o.jsx("input",{type:"text",className:"input",value:s.person_name,onChange:x=>l(y=>({...y,person_name:x.target.value})),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Cargo"}),o.jsx("input",{type:"text",className:"input",value:s.person_cargo,onChange:x=>l(y=>({...y,person_cargo:x.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Terminal"}),o.jsx("select",{className:"input",value:s.person_terminal,onChange:x=>l(y=>({...y,person_terminal:x.target.value})),required:!0,children:ns.map(x=>o.jsx("option",{value:x.value,children:x.label},x.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Turno"}),o.jsx("input",{type:"text",className:"input",value:s.person_turno,onChange:x=>l(y=>({...y,person_turno:x.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Horario"}),o.jsx("input",{type:"text",className:"input",value:s.person_horario,onChange:x=>l(y=>({...y,person_horario:x.target.value})),placeholder:"08:00-18:00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contacto"}),o.jsx("input",{type:"text",className:"input",value:s.person_contacto,onChange:x=>l(y=>({...y,person_contacto:x.target.value}))})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:["Correo ",o.jsx("span",{className:"text-slate-400 font-normal",children:"(opcional)"})]}),o.jsx("input",{type:"email",className:"input",value:s.worker_email,onChange:x=>l(y=>({...y,worker_email:x.target.value})),placeholder:"Para notificar cuando llegue su credencial"})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Solicitud"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Motivo"}),o.jsx("select",{className:"input",value:s.reason,onChange:x=>l(y=>({...y,reason:x.target.value})),required:!0,children:xU.map(x=>o.jsx("option",{value:x.value,children:x.label},x.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Fecha Solicitud"}),o.jsx("input",{type:"date",className:"input",value:s.requested_at,onChange:x=>l(y=>({...y,requested_at:x.target.value})),required:!0})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Tarjeta de Respaldo"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Terminal de Inventario"}),o.jsxs("select",{className:"input",value:c,onChange:x=>{u(x.target.value),l(y=>({...y,card_id:""}))},children:[o.jsx("option",{value:"",children:"Todos"}),Ju.map(x=>o.jsx("option",{value:x,children:x},x))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Tarjeta Disponible"}),o.jsxs("select",{className:"input",value:s.card_id,onChange:x=>l(y=>({...y,card_id:x.target.value})),required:!0,children:[o.jsx("option",{value:"",children:"Seleccionar tarjeta..."}),p.map(x=>o.jsxs("option",{value:x.id,children:[x.card_number," (",x.inventory_terminal,")"]},x.id))]}),p.length===0&&o.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"No hay tarjetas disponibles"})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Descuento"}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:s.discount_applied,onChange:x=>l(y=>({...y,discount_applied:x.target.checked})),className:"w-4 h-4 rounded border-slate-300"}),o.jsxs("span",{className:"text-sm text-slate-700",children:["Aplicar descuento de $",s.discount_amount.toLocaleString("es-CL")," (1 cuota)"]})]}),s.discount_applied&&o.jsxs("span",{className:"text-xs text-slate-500 italic flex items-center gap-1",children:[o.jsx(Ome,{className:"w-3 h-3"}),"Se imprimir automticamente al crear"]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Notificaciones"}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:s.send_emails,onChange:x=>l(y=>({...y,send_emails:x.target.checked})),className:"w-4 h-4 rounded border-slate-300"}),o.jsx("span",{className:"text-sm text-slate-700",children:"Enviar correos al crear"})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[o.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",disabled:n,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n||!s.card_id,children:n?"Guardando...":"Crear Prestamo"})]})]}),o.jsx("div",{ref:i,className:"hidden"})]})})]}):null},tMe=({isOpen:e,loan:t,onClose:r})=>{var i,s;if(!e||!t)return null;const n=l=>l?new Date(l).toLocaleDateString("es-CL",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",a=Math.floor((new Date().getTime()-new Date(t.issued_at).getTime())/(1e3*60*60*24));return o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:r}),o.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between z-10",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Detalle del Prestamo"}),o.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(Cc,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[o.jsx(Jme,{className:"w-4 h-4"}),"Trabajador"]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Nombre:"}),o.jsx("span",{className:"text-sm font-medium text-slate-900",children:t.person_name})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"RUT:"}),o.jsx("span",{className:"text-sm font-medium text-slate-900",children:Mf(t.person_rut)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Cargo:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.person_cargo||"-"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Terminal:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.person_terminal})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Turno:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.person_turno||"-"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Horario:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.person_horario||"-"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Contacto:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.person_contacto||"-"})]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[o.jsx(ev,{className:"w-4 h-4"}),"Tarjeta de Respaldo"]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Numero:"}),o.jsx("span",{className:"text-sm font-mono font-medium text-slate-900",children:((i=t.backup_cards)==null?void 0:i.card_number)||"-"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Terminal Inventario:"}),o.jsx("span",{className:"text-sm text-slate-900",children:((s=t.backup_cards)==null?void 0:s.inventory_terminal)||"-"})]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[o.jsx(pme,{className:"w-4 h-4"}),"Solicitud"]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Motivo:"}),o.jsx("span",{className:`text-sm font-medium px-2 py-0.5 rounded ${t.reason==="PERDIDA"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:t.reason==="PERDIDA"?"Perdida":"Deterioro"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Fecha Solicitud:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.requested_at})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Fecha Entrega:"}),o.jsx("span",{className:"text-sm text-slate-900",children:n(t.issued_at)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Dias Transcurridos:"}),o.jsxs("span",{className:`text-sm font-medium ${a>t.alert_after_days?"text-amber-600":"text-slate-900"}`,children:[a," dias"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Estado:"}),o.jsx("span",{className:`text-sm font-medium px-2 py-0.5 rounded ${t.status==="ASIGNADA"?"bg-blue-100 text-blue-700":t.status==="CERRADA"?"bg-slate-100 text-slate-700":t.status==="CANCELADA"?"bg-red-100 text-red-700":"bg-emerald-100 text-emerald-700"}`,children:t.status})]}),t.recovered_at&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Recuperada:"}),o.jsx("span",{className:"text-sm text-slate-900",children:n(t.recovered_at)})]}),t.cancel_reason&&o.jsxs("div",{className:"pt-2 border-t border-slate-200",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Motivo Cancelacion:"}),o.jsx("p",{className:"text-sm text-slate-900 mt-1",children:t.cancel_reason})]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[o.jsx(pU,{className:"w-4 h-4"}),"Descuento"]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Aplicado:"}),o.jsx("span",{className:`text-sm font-medium ${t.discount_applied?"text-emerald-600":"text-slate-500"}`,children:t.discount_applied?"Si":"No"})]}),t.discount_applied&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Monto:"}),o.jsxs("span",{className:"text-sm font-medium text-slate-900",children:["$",t.discount_amount.toLocaleString("es-CL")]})]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-3",children:[o.jsx(hU,{className:"w-4 h-4"}),"Auditoria"]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Creado por:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.created_by_supervisor})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Creado:"}),o.jsx("span",{className:"text-sm text-slate-900",children:n(t.created_at)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Correo Trabajador:"}),o.jsx("span",{className:"text-sm text-slate-900",children:t.boss_email||"-"})]}),t.emails_sent_at&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Emails Enviados:"}),o.jsx("span",{className:"text-sm text-slate-900",children:n(t.emails_sent_at)})]})]})]})]}),o.jsx("div",{className:"border-t border-slate-200 px-6 py-4 flex justify-end",children:o.jsx("button",{onClick:r,className:"btn btn-secondary",children:"Cerrar"})})]})})]})},rMe=({isOpen:e,loan:t,onClose:r,onSubmit:n,isLoading:a})=>{var d;const[i,s]=D.useState(new Date().toISOString().split("T")[0]),[l,c]=D.useState(""),u=async f=>{f.preventDefault(),t&&(await n(t.id,i,l),c(""))};return!e||!t?null:o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:r}),o.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-md",children:[o.jsxs("div",{className:"border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(vU,{className:"w-5 h-5 text-emerald-600"}),o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Marcar como Recuperada"})]}),o.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(Cc,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("form",{onSubmit:u,className:"p-6 space-y-4",children:[o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[o.jsxs("p",{className:"text-sm text-slate-600",children:[o.jsx("span",{className:"font-medium",children:"Trabajador:"})," ",t.person_name]}),o.jsxs("p",{className:"text-sm text-slate-600",children:[o.jsx("span",{className:"font-medium",children:"RUT:"})," ",Mf(t.person_rut)]}),o.jsxs("p",{className:"text-sm text-slate-600",children:[o.jsx("span",{className:"font-medium",children:"Tarjeta:"})," ",(d=t.backup_cards)==null?void 0:d.card_number]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Fecha de Devolucion"}),o.jsx("input",{type:"date",className:"input",value:i,onChange:f=>s(f.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Observacion (opcional)"}),o.jsx("textarea",{className:"input min-h-[80px]",value:l,onChange:f=>c(f.target.value),placeholder:"Notas adicionales..."})]}),o.jsx("p",{className:"text-sm text-slate-500",children:"Al confirmar, la tarjeta sera liberada y quedara disponible para nuevos prestamos."}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:a,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary bg-emerald-600 hover:bg-emerald-700",disabled:a,children:a?"Procesando...":"Confirmar Devolucion"})]})]})]})})]})},nMe=({isOpen:e,loan:t,onClose:r,onSubmit:n,isLoading:a})=>{var c;const[i,s]=D.useState(""),l=async u=>{u.preventDefault(),!(!t||!i.trim())&&(await n(t.id,i.trim()),s(""))};return!e||!t?null:o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:r}),o.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-md",children:[o.jsxs("div",{className:"border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(jw,{className:"w-5 h-5 text-red-600"}),o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Cancelar Prestamo"})]}),o.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(Cc,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("form",{onSubmit:l,className:"p-6 space-y-4",children:[o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[o.jsx("p",{className:"text-sm text-red-800 font-medium mb-2",children:"Esta accion no se puede deshacer."}),o.jsxs("p",{className:"text-sm text-red-700",children:["El prestamo a ",t.person_name," (tarjeta ",(c=t.backup_cards)==null?void 0:c.card_number,") sera cancelado y la tarjeta sera liberada."]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Motivo de cancelacion (obligatorio)"}),o.jsx("textarea",{className:"input min-h-[100px]",value:i,onChange:u=>s(u.target.value),placeholder:"Explique por que se cancela este prestamo...",required:!0})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[o.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:a,children:"Volver"}),o.jsx("button",{type:"submit",className:"btn btn-primary bg-red-600 hover:bg-red-700",disabled:a||!i.trim(),children:a?"Cancelando...":"Confirmar Cancelacion"})]})]})]})})]})},aMe=({isOpen:e,onClose:t})=>{const r=St(),[n,a]=D.useState(!1),[i,s]=D.useState(""),[l,c]=D.useState(""),[u,d]=D.useState({card_number:"",inventory_terminal:"El Roble",notes:""}),{data:f=[],isLoading:p}=Mt({queryKey:["backup-cards",i,l],queryFn:()=>U7e(l||void 0,i||void 0),enabled:e}),h=Et({mutationFn:q7e,onSuccess:()=>{r.invalidateQueries({queryKey:["backup-cards"]}),a(!1),d({card_number:"",inventory_terminal:"El Roble",notes:""})}}),g=Et({mutationFn:H7e,onSuccess:()=>{r.invalidateQueries({queryKey:["backup-cards"]})}}),m=v=>{v.preventDefault(),h.mutate(u)},x=v=>{confirm(`Desactivar tarjeta ${v.card_number}?`)&&g.mutate(v.id)};if(!e)return null;const y={LIBRE:"bg-emerald-100 text-emerald-800",ASIGNADA:"bg-blue-100 text-blue-800",INACTIVA:"bg-slate-100 text-slate-600"};return o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:t}),o.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[85vh] flex flex-col",children:[o.jsxs("div",{className:"border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ev,{className:"w-5 h-5 text-slate-600"}),o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Inventario de Tarjetas"})]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(Cc,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("div",{className:"p-4 border-b border-slate-100 flex flex-wrap items-center gap-3",children:[o.jsxs("select",{className:"input w-auto",value:i,onChange:v=>s(v.target.value),children:[o.jsx("option",{value:"",children:"Todos los terminales"}),Ju.map(v=>o.jsx("option",{value:v,children:v},v))]}),o.jsxs("select",{className:"input w-auto",value:l,onChange:v=>c(v.target.value),children:[o.jsx("option",{value:"",children:"Todos los estados"}),ege.map(v=>o.jsx("option",{value:v.value,children:v.label},v.value))]}),o.jsx("div",{className:"flex-1"}),o.jsxs("button",{onClick:()=>a(!n),className:"btn btn-primary flex items-center gap-2",children:[o.jsx(gU,{className:"w-4 h-4"}),"Agregar Tarjeta"]})]}),n&&o.jsxs("form",{onSubmit:m,className:"p-4 bg-slate-50 border-b border-slate-100",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Numero de Tarjeta"}),o.jsx("input",{type:"text",className:"input",value:u.card_number,onChange:v=>d(b=>({...b,card_number:v.target.value})),placeholder:"Ej: TR-001",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Terminal"}),o.jsx("select",{className:"input",value:u.inventory_terminal,onChange:v=>d(b=>({...b,inventory_terminal:v.target.value})),children:Ju.map(v=>o.jsx("option",{value:v,children:v},v))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Notas (opcional)"}),o.jsx("input",{type:"text",className:"input",value:u.notes,onChange:v=>d(b=>({...b,notes:v.target.value}))})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[o.jsx("button",{type:"button",onClick:()=>a(!1),className:"btn btn-secondary text-sm",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary text-sm",disabled:h.isPending,children:h.isPending?"Guardando...":"Guardar"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:p?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):f.length===0?o.jsx("div",{className:"text-center py-8 text-slate-500",children:"No hay tarjetas registradas"}):o.jsx("div",{className:"space-y-2",children:f.map(v=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ev,{className:"w-5 h-5 text-slate-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-slate-900",children:v.card_number}),o.jsx("p",{className:"text-xs text-slate-500",children:v.inventory_terminal})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${y[v.status]||""}`,children:v.status}),v.status!=="INACTIVA"&&v.status!=="ASIGNADA"&&o.jsx("button",{onClick:()=>x(v),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Desactivar",children:o.jsx(Hme,{className:"w-4 h-4"})})]})]},v.id))})}),o.jsx("div",{className:"border-t border-slate-200 px-6 py-4 flex justify-end",children:o.jsx("button",{onClick:t,className:"btn btn-secondary",children:"Cerrar"})})]})})]})},iMe=({isOpen:e,onClose:t})=>{const r=St(),[n,a]=D.useState("GLOBAL"),[i,s]=D.useState({manager_email:"",cc_emails:"",subject_manager:"Solicitud de Nueva Credencial",subject_boss:"Notificacion de Credencial de Respaldo",enabled:!0}),{data:l=[],isLoading:c}=Mt({queryKey:["backup-email-settings"],queryFn:sW,enabled:e}),u=Et({mutationFn:X7e,onSuccess:()=>{r.invalidateQueries({queryKey:["backup-email-settings"]})}});D.useEffect(()=>{const f=l.find(p=>n==="GLOBAL"?p.scope_type==="GLOBAL":p.scope_code===n);s(f?{manager_email:f.manager_email,cc_emails:f.cc_emails||"",subject_manager:f.subject_manager,subject_boss:f.subject_boss,enabled:f.enabled}:{manager_email:"",cc_emails:"",subject_manager:"Solicitud de Nueva Credencial",subject_boss:"Notificacion de Credencial de Respaldo",enabled:!0})},[n,l]);const d=f=>{f.preventDefault(),u.mutate({scope_type:n==="GLOBAL"?"GLOBAL":"TERMINAL",scope_code:n,...i})};return e?o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:t}),o.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-lg",children:[o.jsxs("div",{className:"border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(mU,{className:"w-5 h-5 text-slate-600"}),o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Configuracion de Correos"})]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(Cc,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Configurar para:"}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx("button",{type:"button",onClick:()=>a("GLOBAL"),className:`px-3 py-1.5 text-sm rounded-lg border ${n==="GLOBAL"?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:"Global"}),Ju.map(f=>o.jsx("button",{type:"button",onClick:()=>a(f),className:`px-3 py-1.5 text-sm rounded-lg border ${n===f?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:f},f))]})]}),c?o.jsx("div",{className:"flex justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o.jsxs("form",{onSubmit:d,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Email del Gestor (crear credencial)"}),o.jsx("input",{type:"email",className:"input",value:i.manager_email,onChange:f=>s(p=>({...p,manager_email:f.target.value})),placeholder:"gestor@empresa.cl",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"CC (opcional, separar por coma)"}),o.jsx("input",{type:"text",className:"input",value:i.cc_emails,onChange:f=>s(p=>({...p,cc_emails:f.target.value})),placeholder:"copia1@empresa.cl, copia2@empresa.cl"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asunto para Gestor"}),o.jsx("input",{type:"text",className:"input",value:i.subject_manager,onChange:f=>s(p=>({...p,subject_manager:f.target.value})),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asunto para Jefatura"}),o.jsx("input",{type:"text",className:"input",value:i.subject_boss,onChange:f=>s(p=>({...p,subject_boss:f.target.value})),required:!0})]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:i.enabled,onChange:f=>s(p=>({...p,enabled:f.target.checked})),className:"w-4 h-4 rounded border-slate-300"}),o.jsx("span",{className:"text-sm text-slate-700",children:"Envio habilitado"})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[o.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",children:"Cerrar"}),o.jsxs("button",{type:"submit",className:"btn btn-primary flex items-center gap-2",disabled:u.isPending,children:[o.jsx(Rme,{className:"w-4 h-4"}),u.isPending?"Guardando...":"Guardar"]})]}),u.isSuccess&&o.jsx("p",{className:"text-sm text-emerald-600 text-center",children:"Configuracion guardada correctamente"})]})]})]})})]}):null},sMe=({isOpen:e,loan:t,managerEmail:r,workerEmail:n,cc:a,onClose:i,onSubmit:s,isLoading:l})=>{const c=D.useRef(null),[u,d]=D.useState(null),[f,p]=D.useState(null),[h,g]=D.useState(""),m=N=>{var j;const _=(j=N.target.files)==null?void 0:j[0];if(!_)return;if(!["application/pdf","image/png","image/jpeg"].includes(_.type)){g("Solo se permiten archivos PDF, PNG o JPG");return}if(_.size>5*1024*1024){g("El archivo no puede superar 5MB");return}if(g(""),d(_),_.type.startsWith("image/")){const A=new FileReader;A.onload=T=>{var P;return p((P=T.target)==null?void 0:P.result)},A.readAsDataURL(_)}else p(null)},x=async()=>{if(!u){g("Debe adjuntar el documento firmado");return}const N=new FileReader;N.onload=async _=>{var j;const E=((j=_.target)==null?void 0:j.result).split(",")[1];await s({filename:`autorizacion_descuento_${(t==null?void 0:t.person_rut)||"firmado"}.${u.name.split(".").pop()}`,content:E})},N.readAsDataURL(u)},y=async()=>{await s(null)},v=()=>{d(null),p(null),g("")},b=()=>{v(),i()};return!e||!t?null:o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:b}),o.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-lg",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Adjuntar Documento Firmado"}),o.jsx("button",{onClick:b,className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(Cc,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[o.jsxs("p",{className:"text-sm text-blue-800",children:[o.jsx("strong",{children:"Trabajador:"})," ",t.person_name," (",Mf(t.person_rut),")"]}),o.jsx("p",{className:"text-sm text-blue-800 mt-1",children:o.jsx("strong",{children:"Se enviar correo a:"})}),o.jsxs("ul",{className:"text-xs text-blue-700 mt-1 list-disc list-inside",children:[o.jsxs("li",{children:["Gestor de credenciales: ",r," ",o.jsx("span",{className:"text-blue-500",children:"(con adjunto)"})]}),n&&o.jsxs("li",{children:["Notificacin trabajador: ",n]}),a&&o.jsxs("li",{children:["CC: ",a]})]})]}),o.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[o.jsx(gme,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-amber-800",children:"Importante"}),o.jsx("p",{className:"text-xs text-amber-700",children:"Adjunte el documento de autorizacin de descuento firmado por el trabajador. Este se enviar SOLO al gestor de credenciales."})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Documento Firmado (PDF, PNG, JPG)"}),o.jsx("input",{type:"file",ref:c,onChange:m,accept:".pdf,.png,.jpg,.jpeg",className:"hidden"}),u?o.jsx("div",{className:"border border-slate-200 rounded-lg p-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[f?o.jsx("img",{src:f,alt:"Preview",className:"w-16 h-16 object-cover rounded"}):o.jsx("div",{className:"w-16 h-16 bg-red-50 rounded flex items-center justify-center",children:o.jsx(jme,{className:"w-8 h-8 text-red-500"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:u.name}),o.jsxs("p",{className:"text-xs text-slate-500",children:[(u.size/1024).toFixed(1)," KB"]})]}),o.jsx("button",{type:"button",onClick:()=>{d(null),p(null)},className:"p-1 hover:bg-slate-100 rounded",children:o.jsx(Cc,{className:"w-4 h-4 text-slate-500"})})]})}):o.jsxs("button",{type:"button",onClick:()=>{var N;return(N=c.current)==null?void 0:N.click()},className:"w-full border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:border-blue-400 hover:bg-blue-50/50 transition-colors",children:[o.jsx(Yme,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Haga clic para seleccionar archivo"}),o.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Max 5MB"})]}),h&&o.jsx("p",{className:"text-xs text-red-500 mt-2",children:h})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-slate-200 bg-slate-50 rounded-b-xl",children:[o.jsx("button",{type:"button",onClick:y,className:"text-sm text-slate-500 hover:text-slate-700",disabled:l,children:"Enviar sin adjunto"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",onClick:b,className:"btn btn-secondary",disabled:l,children:"Cancelar"}),o.jsx("button",{type:"button",onClick:x,className:"btn btn-primary flex items-center gap-2",disabled:l||!u,children:l?"Enviando...":o.jsxs(o.Fragment,{children:[o.jsx(Fme,{className:"w-4 h-4"}),"Enviar Correos"]})})]})]})]})})]})},oMe=()=>{var B,U,J,me;const e=St(),t=Xt(K=>K.context),r=Xt(K=>K.setContext),n=_r(K=>K.session),[a,i]=D.useState({status:"TODAS",reason:"TODAS",alertsOnly:!1}),[s,l]=D.useState(!1),[c,u]=D.useState(!1),[d,f]=D.useState(!1),[p,h]=D.useState(null),[g,m]=D.useState(!1),[x,y]=D.useState(!1),[v,b]=D.useState(!1),[N,_]=D.useState(!1),[E,j]=D.useState(null),[A,T]=D.useState(!1),P=Mt({queryKey:["backup-loans",a],queryFn:()=>W7e(a)}),O=Mt({queryKey:["backup-kpis"],queryFn:J7e}),R=Mt({queryKey:["backup-email-settings"],queryFn:sW}),I=Et({mutationFn:async K=>({loan:await V7e(K),sendEmails:K.send_emails}),onSuccess:({loan:K,sendEmails:te})=>{e.invalidateQueries({queryKey:["backup-loans"]}),e.invalidateQueries({queryKey:["backup-kpis"]}),e.invalidateQueries({queryKey:["backup-cards"]}),l(!1),te&&(j(K),_(!0))}}),z=Et({mutationFn:({id:K,recoveredAt:te,observation:le})=>G7e(K,te),onSuccess:()=>{e.invalidateQueries({queryKey:["backup-loans"]}),e.invalidateQueries({queryKey:["backup-kpis"]}),e.invalidateQueries({queryKey:["backup-cards"]}),y(!1),h(null)}}),Y=Et({mutationFn:({id:K,reason:te})=>K7e(K,te),onSuccess:()=>{e.invalidateQueries({queryKey:["backup-loans"]}),e.invalidateQueries({queryKey:["backup-kpis"]}),e.invalidateQueries({queryKey:["backup-cards"]}),b(!1),h(null)}}),ie=D.useMemo(()=>{var te;let K=P.data||[];if(t.mode!=="ALL"&&t.value){const le=(te=ns.find(ve=>ve.value===t.value))==null?void 0:te.label;le&&(K=K.filter(ve=>ve.person_terminal===t.value||ve.person_terminal===le))}if(a.alertsOnly){const le=new Date;K=K.filter(ve=>{if(ve.status!=="ASIGNADA")return!1;const ge=new Date(ve.issued_at);return Math.floor((le.getTime()-ge.getTime())/(1e3*60*60*24))>ve.alert_after_days})}return K},[P.data,t,a.alertsOnly]),re=K=>{h(K),m(!0)},X=K=>{re(K)},oe=K=>{h(K),y(!0)},we=K=>{h(K),b(!0)},_e=K=>{j(K),_(!0)},k=async K=>{var ve;if(!E)return;const te=(ve=R.data)==null?void 0:ve.find(ge=>ge.scope_code===E.person_terminal||ge.scope_type==="GLOBAL");if(!te){zY("Configuracin requerida",'Configure los correos primero en el botn "Correos"'),_(!1),j(null);return}T(!0);const le=await Z7e(E,te.manager_email,te.cc_emails||void 0,K);T(!1),le.success?($i("Correos enviados","Los correos de notificacin fueron enviados correctamente",E.person_name),e.invalidateQueries({queryKey:["backup-loans"]})):Pi("Error al enviar correos",le.error||"Error desconocido"),_(!1),j(null)},F=()=>{if(!ie.length)return;const K=new Date,te=ie.map(le=>{var Me;const ve=new Date(le.issued_at),ge=Math.floor((K.getTime()-ve.getTime())/(1e3*60*60*24));return{rut:Mf(le.person_rut),nombre:le.person_name,cargo:le.person_cargo||"",terminal:le.person_terminal,tarjeta:((Me=le.backup_cards)==null?void 0:Me.card_number)||"",motivo:le.reason==="PERDIDA"?"Perdida":"Deterioro",fecha_entrega:new Date(le.issued_at).toLocaleDateString("es-CL"),dias:ge,estado:le.status,descuento:le.discount_applied?le.discount_amount:0,correo_trabajador:le.boss_email||"",creado_por:le.created_by_supervisor}});Er({filename:`prestamos_respaldo_${new Date().toISOString().split("T")[0]}`,sheetName:"Prestamos",rows:te,columns:[{key:"rut",header:"RUT"},{key:"nombre",header:"Nombre"},{key:"cargo",header:"Cargo"},{key:"terminal",header:"Terminal"},{key:"tarjeta",header:"Tarjeta"},{key:"motivo",header:"Motivo"},{key:"fecha_entrega",header:"Fecha Entrega"},{key:"dias",header:"Dias"},{key:"estado",header:"Estado"},{key:"descuento",header:"Descuento"},{key:"email_jefatura",header:"Email Jefatura"},{key:"creado_por",header:"Creado Por"}]})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(bn,{title:"Credenciales de Respaldo",description:"Control de prestamo de tarjetas de respaldo",actions:o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs("button",{onClick:()=>f(!0),className:"btn btn-secondary flex items-center gap-2",children:[o.jsx(Bme,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Correos"})]}),o.jsxs("button",{onClick:()=>u(!0),className:"btn btn-secondary flex items-center gap-2",children:[o.jsx(ev,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Tarjetas"})]}),o.jsxs("button",{onClick:F,className:"btn btn-secondary flex items-center gap-2",children:[o.jsx(wme,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"XLSX"})]}),o.jsxs("button",{onClick:()=>l(!0),className:"btn btn-primary flex items-center gap-2",children:[o.jsx(gU,{className:"w-4 h-4"}),"Nuevo Prestamo"]})]})}),o.jsx(tge,{kpis:O.data||{availableByTerminal:{"El Roble":0,"La Reina":0,"Maria Angelica":0},activeLoans:0,overdueLoans:0,avgReturnDays:0,totalDiscounts:0},isLoading:O.isLoading}),!P.isLoading&&P.data&&P.data.length>0&&o.jsx(M7e,{loans:P.data}),o.jsxs("div",{className:"bg-white px-3 py-2 rounded-lg border border-slate-200 shadow-sm flex flex-wrap items-center gap-2",children:[o.jsx(Eme,{className:"w-4 h-4 text-slate-400 flex-shrink-0"}),o.jsx("input",{type:"text",className:"h-8 px-2 text-sm border border-slate-200 rounded-md w-32 focus:outline-none focus:ring-1 focus:ring-blue-400",placeholder:"RUT/Nombre...",value:a.search||"",onChange:K=>i(te=>({...te,search:K.target.value}))}),o.jsxs("select",{className:"h-8 px-2 text-sm border border-slate-200 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-400",value:t.value||"",onChange:K=>{K.target.value?r({mode:"TERMINAL",value:K.target.value}):r({mode:"ALL"})},children:[o.jsx("option",{value:"",children:"Terminal"}),ns.map(K=>o.jsx("option",{value:K.value,children:K.label},K.value))]}),o.jsxs("select",{className:"h-8 px-2 text-sm border border-slate-200 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-400",value:a.status||"TODAS",onChange:K=>i(te=>({...te,status:K.target.value})),children:[o.jsx("option",{value:"TODAS",children:"Estado"}),Zme.map(K=>o.jsx("option",{value:K.value,children:K.label},K.value))]}),o.jsxs("select",{className:"h-8 px-2 text-sm border border-slate-200 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-400",value:a.reason||"TODAS",onChange:K=>i(te=>({...te,reason:K.target.value})),children:[o.jsx("option",{value:"TODAS",children:"Motivo"}),xU.map(K=>o.jsx("option",{value:K.value,children:K.label},K.value))]}),o.jsxs("label",{className:"flex items-center gap-1 cursor-pointer text-xs text-slate-600 whitespace-nowrap",children:[o.jsx("input",{type:"checkbox",checked:a.alertsOnly||!1,onChange:K=>i(te=>({...te,alertsOnly:K.target.checked})),className:"w-3.5 h-3.5 rounded border-slate-300"}),o.jsx(jw,{className:"w-3.5 h-3.5 text-amber-500"}),"Atrasados"]}),o.jsx("div",{className:"h-4 w-px bg-slate-200 hidden sm:block"}),o.jsx("input",{type:"date",className:"h-8 px-2 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400",value:a.dateFrom||"",onChange:K=>i(te=>({...te,dateFrom:K.target.value})),title:"Desde"}),o.jsx("span",{className:"text-slate-400 text-xs",children:"-"}),o.jsx("input",{type:"date",className:"h-8 px-2 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400",value:a.dateTo||"",onChange:K=>i(te=>({...te,dateTo:K.target.value})),title:"Hasta"})]}),P.isLoading&&o.jsx(Bn,{label:"Cargando prestamos..."}),P.isError&&o.jsx(ri,{message:"Error al cargar prestamos",onRetry:P.refetch}),!P.isLoading&&!P.isError&&o.jsx(B7e,{loans:ie,onView:re,onEdit:X,onRecover:oe,onCancel:we,onResendEmails:_e}),o.jsx(eMe,{isOpen:s,onClose:()=>l(!1),onSubmit:async(K,te)=>{await I.mutateAsync(K),K.discount_applied&&te()},isLoading:I.isPending,supervisorName:(n==null?void 0:n.supervisorName)||"Supervisor"}),o.jsx(tMe,{isOpen:g,loan:p,onClose:()=>{m(!1),h(null)}}),o.jsx(rMe,{isOpen:x,loan:p,onClose:()=>{y(!1),h(null)},onSubmit:async(K,te,le)=>{await z.mutateAsync({id:K,recoveredAt:te,observation:le})},isLoading:z.isPending}),o.jsx(nMe,{isOpen:v,loan:p,onClose:()=>{b(!1),h(null)},onSubmit:async(K,te)=>{await Y.mutateAsync({id:K,reason:te})},isLoading:Y.isPending}),o.jsx(aMe,{isOpen:c,onClose:()=>u(!1)}),o.jsx(iMe,{isOpen:d,onClose:()=>f(!1)}),o.jsx(sMe,{isOpen:N,loan:E,managerEmail:((U=(B=R.data)==null?void 0:B.find(K=>K.scope_code===(E==null?void 0:E.person_terminal)||K.scope_type==="GLOBAL"))==null?void 0:U.manager_email)||"",workerEmail:(E==null?void 0:E.boss_email)||"",cc:((me=(J=R.data)==null?void 0:J.find(K=>K.scope_code===(E==null?void 0:E.person_terminal)||K.scope_type==="GLOBAL"))==null?void 0:me.cc_emails)||void 0,onClose:()=>{_(!1),j(null)},onSubmit:k,isLoading:A})]})},lMe=[{id:"s-1",solicitante:"Ana Prez",tipo:"Materiales",fecha:"2023-12-04",estado:"abierta",terminal:"EL_ROBLE"},{id:"s-2",solicitante:"Carlos Vega",tipo:"Personal",fecha:"2023-12-03",estado:"en_proceso",terminal:"LA_REINA"},{id:"s-3",solicitante:"Laura Soto",tipo:"Tecnologa",fecha:"2023-12-02",estado:"cerrada",terminal:"EL_SALTO"}],CD=tE(lMe,(e,t)=>t!=null&&t.estado&&t.estado!=="todas"?e.estado===t.estado:!0),cMe=()=>{const e=Xt(y=>y.context),t=Xt(y=>y.setContext),[r,n]=D.useState({estado:"todas"}),[a,i]=D.useState(""),[s,l]=D.useState(""),[c,u]=D.useState([]),d=Mt({queryKey:["solicitudes",e,r],queryFn:()=>CD.list({terminalContext:e,filters:r,scope:"view"})}),f=D.useMemo(()=>[...d.data??[],...c],[d.data,c]),p=D.useMemo(()=>[{key:"tipo",header:"Tipo"},{key:"solicitante",header:"Solicitante"},{key:"estado",header:"Estado",render:y=>o.jsx("span",{className:"badge capitalize",children:y.estado}),value:y=>y.estado},{key:"fecha",header:"Fecha"},{key:"terminal",header:"Terminal",render:y=>fr(y.terminal),value:y=>fr(y.terminal)}],[]),h=p.map(y=>({key:y.key,header:y.header,value:v=>y.value?y.value(v):v[y.key]})),g=()=>{Er({filename:"solicitudes_vista",sheetName:"Solicitudes",rows:f,columns:h})},m=async()=>{const y=await CD.list({terminalContext:e,scope:"all"});Er({filename:"solicitudes_completo",sheetName:"Solicitudes",rows:y,columns:h})},x=()=>{const y={id:`local-${Date.now()}`,solicitante:s,tipo:a,estado:"abierta",fecha:new Date().toISOString().slice(0,10),terminal:e.value??"EL_ROBLE"};u(v=>[y,...v]),l(""),i("")};return o.jsxs("div",{className:"space-y-4",children:[o.jsx(bn,{title:"Solicitudes",description:"Formulario universal para requerimientos",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"btn btn-primary",onClick:()=>{var y;return(y=document.getElementById("solicitud-form"))==null?void 0:y.scrollIntoView({behavior:"smooth"})},children:"Nueva solicitud"}),o.jsx(Ma,{onExportView:g,onExportAll:m})]})}),o.jsx(Fs,{terminalContext:e,onTerminalChange:t,children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsxs("select",{className:"input",value:r.estado,onChange:y=>n({estado:y.target.value}),children:[o.jsx("option",{value:"todas",children:"Todas"}),o.jsx("option",{value:"abierta",children:"Abierta"}),o.jsx("option",{value:"en_proceso",children:"En proceso"}),o.jsx("option",{value:"cerrada",children:"Cerrada"})]})]})}),o.jsxs("div",{className:"card p-4",id:"solicitud-form",children:[o.jsx("p",{className:"mb-3 text-sm font-semibold text-slate-900",children:"Crear nueva solicitud"}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"label",children:"Solicitante"}),o.jsx("input",{className:"input",value:s,onChange:y=>l(y.target.value)})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"label",children:"Tipo"}),o.jsx("input",{className:"input",value:a,onChange:y=>i(y.target.value),placeholder:"Ej: Materiales"})]}),o.jsx("div",{className:"flex items-end justify-end",children:o.jsx("button",{className:"btn btn-primary",onClick:x,disabled:!s||!a,children:"Registrar (mock)"})})]})]}),d.isLoading&&o.jsx(Bn,{}),d.isError&&o.jsx(ri,{onRetry:d.refetch}),!d.isLoading&&!d.isError&&o.jsxs(o.Fragment,{children:[!f.length&&o.jsx(ad,{description:"Sin solicitudes"}),f.length>0&&o.jsx(nd,{columns:p,rows:f})]})]})},yx=({terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:l,children:c})=>o.jsxs(Fs,{terminalContext:e,onTerminalChange:t,children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Buscar PPU"}),o.jsx("input",{type:"text",className:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700 outline-none focus:border-brand-500 focus:ring-1 focus:ring-brand-500 w-32 lg:w-40",placeholder:"PPU...",value:r,onChange:u=>n(u.target.value)})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Desde"}),o.jsx("input",{type:"date",className:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700 outline-none focus:border-brand-500 w-full",value:a,onChange:u=>i(u.target.value)})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Hasta"}),o.jsx("input",{type:"date",className:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700 outline-none focus:border-brand-500 w-full",value:s,onChange:u=>l(u.target.value)})]}),c]}),bx=({items:e})=>o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:e.map((t,r)=>o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:t.label}),o.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:t.value}),t.subtext&&o.jsx("p",{className:"text-xs text-slate-400 mt-1 font-medium",children:t.subtext})]}),t.icon&&o.jsx("div",{className:`p-2 rounded-lg ${t.colorClass||"bg-slate-100 text-slate-600"}`,children:o.jsx(Z,{name:t.icon,size:20})})]},r))}),uMe="https://wvcplgwemvqhvtstlqmt.supabase.co",oW="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind2Y3BsZ3dlbXZxaHZ0c3RscW10Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAzNjIyMDUsImV4cCI6MjA3NTkzODIwNX0.K1YOv5lRn9fOous3AyG2gPxsQBzqOXRfYHgrCmO5zxk",dMe=XF(uMe,oW,{auth:{persistSession:!1,autoRefreshToken:!1},realtime:{params:{eventsPerSecond:10}}}),fMe=()=>!!oW,wx=async(e,t)=>{if(!fMe())return[];let r=dMe.from(e).select("*");if(t.terminalContext&&t.terminalContext.mode!=="ALL"){const c=zi(t.terminalContext).map(u=>Vu[u]).filter(Boolean);c.length>0&&(r=r.in("terminal",c))}t.search&&(r=r.ilike("bus_ppu",`%${t.search}%`)),t.dateFrom&&(r=r.gte("created_at",t.dateFrom)),t.dateTo&&(r=r.lte("created_at",t.dateTo));const n=t.sortBy||"updated_at",a=t.sortOrder||"desc";r=r.order(n,{ascending:a==="asc"});const{data:i,error:s}=await r;if(s)throw console.error(`Error fetching ${e}:`,s),s;return i},hMe=e=>wx("extintores",e),pMe=e=>wx("tags",e),mMe=e=>wx("mobileye",e),gMe=e=>wx("odometro",e),vMe=e=>wx("publicidad",e),xMe=e=>Mt({queryKey:["minicheck","extintores",e],queryFn:()=>hMe(e)}),yMe=e=>Mt({queryKey:["minicheck","tags",e],queryFn:()=>pMe(e)}),bMe=e=>Mt({queryKey:["minicheck","mobileye",e],queryFn:()=>mMe(e)}),wMe=e=>Mt({queryKey:["minicheck","odometros",e],queryFn:()=>gMe(e)}),_Me=e=>Mt({queryKey:["minicheck","publicidad",e],queryFn:()=>vMe(e)}),NMe=()=>{const e=Xt(v=>v.context),t=Xt(v=>v.setContext),[r,n]=D.useState(""),[a,i]=D.useState(""),[s,l]=D.useState(""),c=D.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:p}=xMe(c),h=D.useMemo(()=>{if(!u)return[];const v=u.length,b=u.filter(E=>E.certificacion==="VENCIDA").length,N=u.filter(E=>!E.tiene).length,_=u.filter(E=>E.presion==="BAJA_CARGA").length;return[{label:"Total Registros",value:v,icon:"clipboard"},{label:"Vencidos",value:b,icon:"alert-triangle",colorClass:"bg-red-50 text-red-600"},{label:"Sin Extintor",value:N,icon:"x",colorClass:"bg-orange-50 text-orange-600"},{label:"Presin Baja",value:_,icon:"activity",colorClass:"bg-yellow-50 text-yellow-600"}]},[u]),g=D.useMemo(()=>{if(!u)return[];const v=u.filter(N=>N.certificacion==="VIGENTE").length,b=u.filter(N=>N.certificacion==="VENCIDA").length;return[{name:"VIGENTE",value:v,color:"#10b981"},{name:"VENCIDA",value:b,color:"#ef4444"}]},[u]),m=[{key:"bus_ppu",header:"PPU",value:v=>v.bus_ppu},{key:"terminal",header:"Terminal",render:v=>fr(v.terminal),value:v=>v.terminal},{key:"tiene",header:"Tiene",render:v=>o.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${v.tiene?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.tiene?"S":"NO"}),value:v=>v.tiene?"SI":"NO"},{key:"certificacion",header:"Certificacin",render:v=>o.jsx("span",{className:`text-xs font-bold ${v.certificacion==="VIGENTE"?"text-green-600":"text-red-600"}`,children:v.certificacion||"-"}),value:v=>v.certificacion||"-"},{key:"vencimiento_mes",header:"Vencimiento",render:v=>v.vencimiento_mes&&v.vencimiento_anio?`${v.vencimiento_mes}/${v.vencimiento_anio}`:"-",value:v=>`${v.vencimiento_mes}/${v.vencimiento_anio}`},{key:"presion",header:"Presin",value:v=>v.presion||"-"},{key:"cilindro",header:"Cilindro OK",render:v=>v.cilindro?"S":"No",value:v=>v.cilindro?"S":"No"},{key:"updated_at",header:"Actualizado",render:v=>pi(v.updated_at),value:v=>pi(v.updated_at)}],x=m.map(v=>({header:v.header,key:v.key,value:v.value})),y=()=>{u&&Er({filename:`minicheck_extintor_${new Date().toISOString().split("T")[0]}`,sheetName:"Extintores",rows:u,columns:x})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(bn,{title:"Control de Extintores",description:"Validacin de estado y vencimiento de extintores",actions:o.jsx("div",{className:"flex gap-2",children:o.jsx(Ma,{onExportView:y,onExportAll:y})})}),o.jsx(yx,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:l}),d&&o.jsx(Bn,{label:"Cargando extintores..."}),f&&o.jsx(ri,{message:"No se pudieron obtener los registros de extintores.",onRetry:p}),!d&&!f&&o.jsxs(o.Fragment,{children:[o.jsx(bx,{items:h}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80",children:[o.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-4",children:"Estado Certificacin"}),o.jsx(ao,{width:"100%",height:"100%",children:o.jsxs(If,{data:g,children:[o.jsx(Lc,{strokeDasharray:"3 3",vertical:!1}),o.jsx(uo,{dataKey:"name",tick:{fontSize:10}}),o.jsx(fo,{tick:{fontSize:10}}),o.jsx(Vn,{}),o.jsx(Ii,{dataKey:"value",name:"Cantidad",radius:[4,4,0,0],children:g.map((v,b)=>o.jsx(Rl,{fill:v.color},`cell-${b}`))})]})})]}),o.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?o.jsx(nd,{columns:m,rows:u}):o.jsx(ad,{label:"Sin registros",description:"No se encontraron extintores con los filtros seleccionados."})})]})]})]})},SMe=()=>{const e=Xt(v=>v.context),t=Xt(v=>v.setContext),[r,n]=D.useState(""),[a,i]=D.useState(""),[s,l]=D.useState(""),c=D.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:p}=yMe(c),h=D.useMemo(()=>{if(!u)return[];const v=u.length,b=u.filter(_=>!_.tiene).length,N=u.filter(_=>_.serie&&_.serie.trim().length>0).length;return[{label:"Total Registros",value:v,icon:"clipboard"},{label:"Sin TAG",value:b,icon:"alert-circle",colorClass:"bg-red-50 text-red-600"},{label:"Serie Informada",value:N,icon:"check",colorClass:"bg-blue-50 text-blue-600"}]},[u]),g=D.useMemo(()=>{if(!u)return[];const v=u.filter(N=>N.tiene).length,b=u.filter(N=>!N.tiene).length;return[{name:"Con TAG",value:v,color:"#10b981"},{name:"Sin TAG",value:b,color:"#ef4444"}]},[u]),m=[{key:"bus_ppu",header:"PPU",value:v=>v.bus_ppu},{key:"terminal",header:"Terminal",render:v=>fr(v.terminal),value:v=>v.terminal},{key:"tiene",header:"Tiene TAG",render:v=>o.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${v.tiene?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.tiene?"S":"NO"}),value:v=>v.tiene?"SI":"NO"},{key:"serie",header:"N Serie",value:v=>v.serie||"-"},{key:"observacion",header:"Observacin",value:v=>v.observacion||""},{key:"updated_at",header:"Actualizado",render:v=>pi(v.updated_at),value:v=>pi(v.updated_at)}],x=m.map(v=>({header:v.header,key:v.key,value:v.value})),y=()=>{u&&Er({filename:`minicheck_tag_${new Date().toISOString().split("T")[0]}`,sheetName:"Tags",rows:u,columns:x})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(bn,{title:"Control de TAG",description:"Verificacin de dispositivos TAG",actions:o.jsx("div",{className:"flex gap-2",children:o.jsx(Ma,{onExportView:y,onExportAll:y})})}),o.jsx(yx,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:l}),d&&o.jsx(Bn,{label:"Cargando tags..."}),f&&o.jsx(ri,{message:"No se pudieron cargar los datos.",onRetry:p}),!d&&!f&&o.jsxs(o.Fragment,{children:[o.jsx(bx,{items:h}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80 flex flex-col items-center justify-center",children:[o.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-2 w-full text-left",children:"Distribucin"}),o.jsx(ao,{width:"100%",height:"100%",children:o.jsxs(x_,{children:[o.jsx(go,{data:g,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:g.map((v,b)=>o.jsx(Rl,{fill:v.color},`cell-${b}`))}),o.jsx(Vn,{}),o.jsx(Nl,{})]})})]}),o.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?o.jsx(nd,{columns:m,rows:u}):o.jsx(ad,{label:"Sin registros",description:"No se encontraron datos."})})]})]})]})},jMe=()=>{const e=Xt(b=>b.context),t=Xt(b=>b.setContext),[r,n]=D.useState(""),[a,i]=D.useState(""),[s,l]=D.useState(""),c=D.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:p}=bMe(c),h=b=>b.consola&&b.sensor_frontal&&b.sensor_izq&&b.sensor_der,g=D.useMemo(()=>{if(!u)return[];const b=u.length,N=u.filter(E=>!h(E)).length,_=u.filter(E=>E.alerta_izq||E.alerta_der).length;return[{label:"Total Registros",value:b,icon:"clipboard"},{label:"Falla Sensores",value:N,icon:"alert-triangle",colorClass:"bg-red-50 text-red-600"},{label:"Alertas Activas",value:_,icon:"bell",colorClass:"bg-yellow-50 text-yellow-600"}]},[u]),m=D.useMemo(()=>{if(!u)return[];const b=u.filter(_=>h(_)).length,N=u.filter(_=>!h(_)).length;return[{name:"Sensores OK",value:b,color:"#10b981"},{name:"Falla",value:N,color:"#ef4444"}]},[u]),x=[{key:"bus_ppu",header:"PPU",value:b=>b.bus_ppu},{key:"terminal",header:"Terminal",render:b=>fr(b.terminal),value:b=>b.terminal},{key:"bus_marca",header:"Marca",value:b=>b.bus_marca||"-"},{key:"consola",header:"Consola",render:b=>b.consola?o.jsx(Z,{name:"check",size:16,className:"text-green-500"}):o.jsx(Z,{name:"x",size:16,className:"text-red-500"}),value:b=>b.consola?"OK":"Falla"},{key:"id",header:"Sensores OK?",render:b=>{const N=h(b);return o.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${N?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:N?"S":"NO"})},value:b=>h(b)?"S":"NO"},{key:"id",header:"Alertas",render:b=>{const N=[];return b.alerta_izq&&N.push("IZQ"),b.alerta_der&&N.push("DER"),N.length>0?o.jsx("span",{className:"text-red-600 font-bold text-xs",children:N.join(", ")}):"-"},value:b=>{const N=[];return b.alerta_izq&&N.push("IZQ"),b.alerta_der&&N.push("DER"),N.join(", ")}},{key:"updated_at",header:"Actualizado",render:b=>pi(b.updated_at),value:b=>pi(b.updated_at)}],y=x.map(b=>({header:b.header,key:b.key,value:b.value})),v=()=>{u&&Er({filename:`minicheck_mobileye_${new Date().toISOString().split("T")[0]}`,sheetName:"Mobileye",rows:u,columns:y})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(bn,{title:"Control Mobileye",description:"Estado de sensores y cmaras Mobileye",actions:o.jsx("div",{className:"flex gap-2",children:o.jsx(Ma,{onExportView:v,onExportAll:v})})}),o.jsx(yx,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:l}),d&&o.jsx(Bn,{label:"Cargando Mobileye..."}),f&&o.jsx(ri,{message:"No se pudieron cargar los datos.",onRetry:p}),!d&&!f&&o.jsxs(o.Fragment,{children:[o.jsx(bx,{items:g}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80",children:[o.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-4",children:"Estado General Sensores"}),o.jsx(ao,{width:"100%",height:"100%",children:o.jsxs(If,{data:m,children:[o.jsx(Lc,{strokeDasharray:"3 3",vertical:!1}),o.jsx(uo,{dataKey:"name",tick:{fontSize:10}}),o.jsx(fo,{tick:{fontSize:10}}),o.jsx(Vn,{}),o.jsx(Ii,{dataKey:"value",name:"Cantidad",radius:[4,4,0,0],children:m.map((b,N)=>o.jsx(Rl,{fill:b.color},`cell-${N}`))})]})})]}),o.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?o.jsx(nd,{columns:x,rows:u}):o.jsx(ad,{label:"Sin registros",description:"No se encontraron datos."})})]})]})]})},AMe=()=>{const e=Xt(v=>v.context),t=Xt(v=>v.setContext),[r,n]=D.useState(""),[a,i]=D.useState(""),[s,l]=D.useState(""),c=D.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:p}=wMe(c),h=D.useMemo(()=>{if(!u)return[];const v=u.length,b=u.filter(_=>_.estado==="INCONSISTENTE").length,N=u.filter(_=>_.estado==="NO_FUNCIONA").length;return[{label:"Total Registros",value:v,icon:"clipboard"},{label:"Inconsistentes",value:b,icon:"alert-triangle",colorClass:"bg-yellow-50 text-yellow-600"},{label:"No Funciona",value:N,icon:"x-circle",colorClass:"bg-red-50 text-red-600"}]},[u]),g=D.useMemo(()=>{if(!u)return[];const v=u.filter(_=>_.estado==="OK").length,b=u.filter(_=>_.estado==="INCONSISTENTE").length,N=u.filter(_=>_.estado==="NO_FUNCIONA").length;return[{name:"OK",value:v,color:"#10b981"},{name:"INCONSISTENTE",value:b,color:"#f59e0b"},{name:"NO FUNCIONA",value:N,color:"#ef4444"}].filter(_=>_.value>0)},[u]),m=[{key:"bus_ppu",header:"PPU",value:v=>v.bus_ppu},{key:"terminal",header:"Terminal",render:v=>fr(v.terminal),value:v=>v.terminal},{key:"lectura",header:"Lectura",value:v=>v.lectura.toLocaleString("es-CL")},{key:"estado",header:"Estado",render:v=>{let b="bg-gray-100 text-gray-800";return v.estado==="OK"&&(b="bg-green-100 text-green-800"),v.estado==="INCONSISTENTE"&&(b="bg-yellow-100 text-yellow-800"),v.estado==="NO_FUNCIONA"&&(b="bg-red-100 text-red-800"),o.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${b}`,children:v.estado})},value:v=>v.estado},{key:"observacion",header:"Observacin",value:v=>v.observacion||""},{key:"updated_at",header:"Actualizado",render:v=>pi(v.updated_at),value:v=>pi(v.updated_at)}],x=m.map(v=>({header:v.header,key:v.key,value:v.value})),y=()=>{u&&Er({filename:`minicheck_odometro_${new Date().toISOString().split("T")[0]}`,sheetName:"Odometros",rows:u,columns:x})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(bn,{title:"Control Odmetro",description:"Lecturas y estado de odmetros",actions:o.jsx("div",{className:"flex gap-2",children:o.jsx(Ma,{onExportView:y,onExportAll:y})})}),o.jsx(yx,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:l}),d&&o.jsx(Bn,{label:"Cargando Odmetros..."}),f&&o.jsx(ri,{message:"No se pudieron cargar los datos.",onRetry:p}),!d&&!f&&o.jsxs(o.Fragment,{children:[o.jsx(bx,{items:h}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80 flex flex-col items-center justify-center",children:[o.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-2 w-full text-left",children:"Distribucin Estados"}),o.jsx(ao,{width:"100%",height:"100%",children:o.jsxs(x_,{children:[o.jsx(go,{data:g,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:g.map((v,b)=>o.jsx(Rl,{fill:v.color},`cell-${b}`))}),o.jsx(Vn,{}),o.jsx(Nl,{})]})})]}),o.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?o.jsx(nd,{columns:m,rows:u}):o.jsx(ad,{label:"Sin registros",description:"No se encontraron datos."})})]})]})]})},EMe=()=>{const e=Xt(v=>v.context),t=Xt(v=>v.setContext),[r,n]=D.useState(""),[a,i]=D.useState(""),[s,l]=D.useState(""),c=D.useMemo(()=>({terminalContext:e,search:r,dateFrom:a||void 0,dateTo:s||void 0}),[e,r,a,s]),{data:u,isLoading:d,isError:f,refetch:p}=_Me(c),h=D.useMemo(()=>{if(!u)return[];const v=u.length,b=u.filter(E=>E.danio).length,N=u.filter(E=>E.residuos).length,_=u.filter(E=>!E.tiene).length;return[{label:"Total Registros",value:v,icon:"clipboard"},{label:"Con Dao",value:b,icon:"alert-triangle",colorClass:"bg-red-50 text-red-600"},{label:"Con Residuos",value:N,icon:"trash",colorClass:"bg-orange-50 text-orange-600"},{label:"Sin Publicidad",value:_,icon:"x-circle",colorClass:"bg-gray-50 text-gray-600"}]},[u]),g=D.useMemo(()=>{if(!u)return[];const v=u.filter(_=>_.danio).length,b=u.filter(_=>_.residuos).length,N=u.filter(_=>!_.tiene).length;return[{name:"Con Dao",value:v,color:"#ef4444"},{name:"Con Residuos",value:b,color:"#f97316"},{name:"Sin Pub.",value:N,color:"#64748b"}]},[u]),m=[{key:"bus_ppu",header:"PPU",value:v=>v.bus_ppu},{key:"terminal",header:"Terminal",render:v=>fr(v.terminal),value:v=>v.terminal},{key:"tiene",header:"Tiene",render:v=>v.tiene?o.jsx("span",{className:"text-green-600 font-bold",children:"S"}):o.jsx("span",{className:"text-gray-400",children:"NO"}),value:v=>v.tiene?"SI":"NO"},{key:"danio",header:"Dao",render:v=>v.danio?o.jsx("span",{className:"px-2 py-0.5 rounded bg-red-100 text-red-800 text-xs font-bold",children:"S"}):o.jsx("span",{className:"text-gray-400",children:"-"}),value:v=>v.danio?"SI":"NO"},{key:"residuos",header:"Residuos",render:v=>v.residuos?o.jsx("span",{className:"px-2 py-0.5 rounded bg-orange-100 text-orange-800 text-xs font-bold",children:"S"}):o.jsx("span",{className:"text-gray-400",children:"-"}),value:v=>v.residuos?"SI":"NO"},{key:"nombre_publicidad",header:"Nombre",value:v=>v.nombre_publicidad||"-"},{key:"updated_at",header:"Actualizado",render:v=>pi(v.updated_at),value:v=>pi(v.updated_at)}],x=m.map(v=>({header:v.header,key:v.key,value:v.value})),y=()=>{u&&Er({filename:`minicheck_publicidad_${new Date().toISOString().split("T")[0]}`,sheetName:"Publicidad",rows:u,columns:x})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(bn,{title:"Control Publicidad",description:"Estado de publicidad en buses",actions:o.jsx("div",{className:"flex gap-2",children:o.jsx(Ma,{onExportView:y,onExportAll:y})})}),o.jsx(yx,{terminalContext:e,onTerminalChange:t,search:r,onSearchChange:n,dateFrom:a,onDateFromChange:i,dateTo:s,onDateToChange:l}),d&&o.jsx(Bn,{label:"Cargando publicidad..."}),f&&o.jsx(ri,{message:"No se pudieron cargar los datos.",onRetry:p}),!d&&!f&&o.jsxs(o.Fragment,{children:[o.jsx(bx,{items:h}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm lg:col-span-1 h-80",children:[o.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-4",children:"Problemas Detectados"}),o.jsx(ao,{width:"100%",height:"100%",children:o.jsxs(If,{data:g,children:[o.jsx(Lc,{strokeDasharray:"3 3",vertical:!1}),o.jsx(uo,{dataKey:"name",tick:{fontSize:10}}),o.jsx(fo,{tick:{fontSize:10}}),o.jsx(Vn,{}),o.jsx(Ii,{dataKey:"value",name:"Cantidad",radius:[4,4,0,0],children:g.map((v,b)=>o.jsx(Rl,{fill:v.color},`cell-${b}`))})]})})]}),o.jsx("div",{className:"lg:col-span-2",children:u&&u.length>0?o.jsx(nd,{columns:m,rows:u}):o.jsx(ad,{label:"Sin registros",description:"No se encontraron datos."})})]})]})]})},TMe=[{ppu:"ABCD12",modelo:"Camin 3/4",estado:"operativo",odometro:123400,proximaMantencion:"2024-01-15",terminal:"EL_ROBLE"},{ppu:"EFGH34",modelo:"Furgn",estado:"en_taller",odometro:88400,proximaMantencion:"2024-02-01",terminal:"LA_REINA"},{ppu:"IJKL56",modelo:"Tracto",estado:"fuera_servicio",odometro:23e4,proximaMantencion:"2024-01-30",terminal:"EL_SALTO"}],kD=tE(TMe,(e,t)=>t!=null&&t.estado&&t.estado!=="todos"?e.estado===t.estado:!0),CMe=()=>{const e=Xt(g=>g.context),t=Xt(g=>g.setContext),[r,n]=D.useState({estado:"todos"}),[a,i]=D.useState(""),s=Mt({queryKey:["flota",e,r],queryFn:()=>kD.list({terminalContext:e,filters:r,scope:"view"})}),l=s.data??[],c=D.useMemo(()=>[{key:"ppu",header:"PPU"},{key:"modelo",header:"Modelo"},{key:"estado",header:"Estado",render:g=>o.jsx("span",{className:"badge capitalize",children:g.estado}),value:g=>g.estado},{key:"odometro",header:"Odmetro"},{key:"proximaMantencion",header:"Mantencin",render:g=>pi(g.proximaMantencion),value:g=>pi(g.proximaMantencion)},{key:"terminal",header:"Terminal",render:g=>fr(g.terminal),value:g=>fr(g.terminal)}],[]),u=c.map(g=>({key:g.key,header:g.header,value:m=>g.value?g.value(m):m[g.key]})),d=()=>{Er({filename:"flota_vista",sheetName:"Flota",rows:l,columns:u})},f=async()=>{const g=await kD.list({terminalContext:e,scope:"all"});Er({filename:"flota_completo",sheetName:"Flota",rows:g,columns:u})},p=D.useMemo(()=>{const g={};return l.forEach(m=>{g[m.estado]=(g[m.estado]??0)+1}),Object.entries(g).map(([m,x])=>({estado:m,count:x}))},[l]),h=l.find(g=>g.ppu===a)??l[0];return o.jsxs("div",{className:"space-y-4",children:[o.jsx(bn,{title:"Estado de Flota",description:"Vista por PPU con ficha y grficas",actions:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"btn btn-primary",children:"Agregar unidad"}),o.jsx(Ma,{onExportView:d,onExportAll:f})]})}),o.jsx(Fs,{terminalContext:e,onTerminalChange:t,children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"label",children:"Estado"}),o.jsxs("select",{className:"input",value:r.estado,onChange:g=>n({estado:g.target.value}),children:[o.jsx("option",{value:"todos",children:"Todos"}),o.jsx("option",{value:"operativo",children:"Operativo"}),o.jsx("option",{value:"en_taller",children:"En taller"}),o.jsx("option",{value:"fuera_servicio",children:"Fuera de servicio"})]})]})}),s.isLoading&&o.jsx(Bn,{}),s.isError&&o.jsx(ri,{onRetry:s.refetch}),!s.isLoading&&!s.isError&&l.length===0&&o.jsx(ad,{description:"Sin unidades"}),!s.isLoading&&!s.isError&&l.length>0&&o.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[o.jsx("div",{className:"md:col-span-2 space-y-3",children:o.jsx(nd,{columns:c,rows:l})}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"card p-4",children:[o.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Resumen por estado"}),o.jsx("div",{className:"mt-2 h-48",children:o.jsx(ao,{width:"100%",height:"100%",children:o.jsxs(If,{data:p,children:[o.jsx(Lc,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),o.jsx(uo,{dataKey:"estado",tick:{fontSize:12}}),o.jsx(fo,{allowDecimals:!1}),o.jsx(Vn,{}),o.jsx(Ii,{dataKey:"count",fill:"#3c5eff",radius:[6,6,0,0]})]})})})]}),h&&o.jsxs("div",{className:"card p-4",children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[o.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Ficha rpida"}),o.jsx("select",{className:"input w-32",value:h.ppu,onChange:g=>i(g.target.value),children:l.map(g=>o.jsx("option",{value:g.ppu,children:g.ppu},g.ppu))})]}),o.jsxs("dl",{className:"space-y-2 text-sm text-slate-700",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("dt",{className:"font-semibold",children:"Modelo"}),o.jsx("dd",{children:h.modelo})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("dt",{className:"font-semibold",children:"Estado"}),o.jsx("dd",{className:"badge capitalize",children:h.estado})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("dt",{className:"font-semibold",children:"Odmetro"}),o.jsx("dd",{children:h.odometro.toLocaleString("es-CL")})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("dt",{className:"font-semibold",children:"Prxima mantencin"}),o.jsx("dd",{children:pi(h.proximaMantencion)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("dt",{className:"font-semibold",children:"Terminal"}),o.jsx("dd",{children:fr(h.terminal)})]})]})]})]})]})]})},gp={TERMINAL:["El Roble"],CABEZAL:["El Descanso","Aeropuerto","Intermodal La Cisterna"]},v0=e=>{const t={};return e.forEach(r=>{t[r.supply_id]=(t[r.supply_id]||0)+r.quantity}),t},x0=(e,t,r,n)=>e.filter(a=>a.location_type===t&&a.location_name===r&&n.includes(a.period)),kMe=(e,t)=>{const r={},n=x0(e,"TERMINAL","El Roble",["DAY"]),a=v0(n);Object.entries(a).forEach(([l,c])=>{r[l]=(r[l]||0)+c*5});const i=x0(e,"TERMINAL","El Roble",["NIGHT"]),s=v0(i);return Object.entries(s).forEach(([l,c])=>{r[l]=(r[l]||0)+c*4}),gp.CABEZAL.forEach(l=>{const c=x0(e,"CABEZAL",l,["DAY"]),u=v0(c);Object.entries(u).forEach(([d,f])=>{r[d]=(r[d]||0)+f*5})}),lW(r,t)},OMe=(e,t)=>{const r={},n=x0(e,"TERMINAL","El Roble",["DAY"]),a=v0(n);Object.entries(a).forEach(([l,c])=>{r[l]=(r[l]||0)+c*2});const i=x0(e,"TERMINAL","El Roble",["NIGHT"]),s=v0(i);return Object.entries(s).forEach(([l,c])=>{r[l]=(r[l]||0)+c*3}),gp.CABEZAL.forEach(l=>{const c=x0(e,"CABEZAL",l,["WEEKEND"]),u=v0(c);Object.entries(u).forEach(([d,f])=>{r[d]=(r[d]||0)+f*2})}),lW(r,t)},lW=(e,t)=>{const r=new Map(t.map(n=>[n.id,n]));return Object.entries(e).filter(([,n])=>n>0).map(([n,a])=>{var i;return{supply_id:n,supply_name:((i=r.get(n))==null?void 0:i.name)||"Desconocido",quantity:a}}).sort((n,a)=>n.supply_name.localeCompare(a.supply_name))},PMe=()=>{const e=new Date().getDay();return e===1?"SEMANA":e===5?"FIN_SEMANA":"EXTRA"},LMe=(e,t)=>{if(!t)return null;const r=new Date(e);return r.setDate(r.getDate()+t),r},g4=(e,t=3)=>{if(!e)return!1;const r=new Date(e),n=new Date;return Math.ceil((r.getTime()-n.getTime())/(1e3*60*60*24))<=t},v4=e=>({SEMANA:"Semana",FIN_SEMANA:"Fin de Semana",EXTRA:"Extra"})[e]||e,OD=e=>e==="PENDIENTE"?"Pendiente":"Retirado",y_=async()=>{if(!rr())return[];const{data:e,error:t}=await Se.from("supplies").select("*").order("name");if(t)throw console.error("Error fetching supplies:",t),t;return e||[]},RMe=async e=>{const{data:t,error:r}=await Se.from("supplies").insert(e).select().single();if(r)throw console.error("Error creating supply:",r),r;return t},DMe=async(e,t)=>{const{data:r,error:n}=await Se.from("supplies").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating supply:",n),n;return r},IMe=async e=>{const{error:t}=await Se.from("supplies").delete().eq("id",e);if(t)throw console.error("Error deleting supply:",t),t},cW=async()=>{if(!rr())return[];const{data:e,error:t}=await Se.from("supply_consumption_profiles").select("*").order("location_type").order("location_name").order("period");if(t)throw console.error("Error fetching consumption profiles:",t),t;return e||[]},MMe=async e=>{const{data:t,error:r}=await Se.from("supply_consumption_profiles").upsert(e,{onConflict:"location_type,location_name,period,supply_id"}).select().single();if(r)throw console.error("Error upserting consumption profile:",r),r;return t},uW=async e=>{if(!rr())return[];let t=Se.from("supply_requests").select("*").order("requested_at",{ascending:!1});e!=null&&e.status&&(t=t.eq("status",e.status)),e!=null&&e.terminal&&(t=t.eq("terminal",e.terminal));const{data:r,error:n}=await t;if(n)throw console.error("Error fetching supply requests:",n),n;return r||[]},FMe=async e=>{if(!rr())return null;const{data:t,error:r}=await Se.from("supply_requests").select("*").eq("id",e).single();if(r)throw console.error("Error fetching supply request:",r),r;const{data:n,error:a}=await Se.from("supply_request_items").select("*, supply:supplies(*)").eq("request_id",e);if(a)throw console.error("Error fetching request items:",a),a;return{...t,items:n||[]}},$Me=async(e,t,r)=>{const{data:n,error:a}=await Se.from("supply_requests").insert({terminal:e.terminal,request_type:e.request_type,created_by:t,consumption_snapshot:r}).select().single();if(a)throw console.error("Error creating supply request:",a),a;const i=e.items.filter(s=>s.quantity>0).map(s=>({request_id:n.id,supply_id:s.supply_id,quantity:s.quantity,is_extra:s.is_extra}));if(i.length>0){const{error:s}=await Se.from("supply_request_items").insert(i);if(s)throw console.error("Error creating request items:",s),s}try{await BMe(n,r||{})}catch(s){console.error("Error sending request email:",s)}return n},BMe=async(e,t)=>{let r;e.request_type==="SEMANA"?r="MONDAY":e.request_type==="FIN_SEMANA"?r="FRIDAY":r="MANUAL";const{data:n,error:a}=await Se.from("supply_email_settings").select("*").eq("trigger",r).eq("enabled",!0).single();if(a||!n){console.log(`No enabled email settings found for trigger: ${r}`);return}if(!n.recipients){console.log(`No recipients configured for trigger: ${r}`);return}const i=Object.entries(t).map(([u,d])=>`<tr><td style="padding: 8px; border-bottom: 1px solid #e2e8f0;">${u}</td><td style="padding: 8px; border-bottom: 1px solid #e2e8f0; text-align: center;">${d}</td></tr>`).join(""),s=Object.values(t).reduce((u,d)=>u+d,0),l=`
        <p><strong>Terminal:</strong> ${e.terminal}</p>
        <p><strong>Tipo:</strong> ${e.request_type==="SEMANA"?"Semanal":e.request_type==="FIN_SEMANA"?"Fin de Semana":"Extra"}</p>
        <p><strong>Solicitado por:</strong> ${e.created_by}</p>
        <p><strong>Fecha:</strong> ${new Date(e.requested_at).toLocaleString("es-CL")}</p>
        
        <table style="width: 100%; border-collapse: collapse; margin-top: 16px;">
            <thead>
                <tr style="background-color: #f8fafc;">
                    <th style="padding: 10px; text-align: left; border-bottom: 2px solid #e2e8f0;">Insumo</th>
                    <th style="padding: 10px; text-align: center; border-bottom: 2px solid #e2e8f0;">Cantidad</th>
                </tr>
            </thead>
            <tbody>
                ${i}
            </tbody>
            <tfoot>
                <tr style="background-color: #f8fafc; font-weight: bold;">
                    <td style="padding: 10px;">TOTAL</td>
                    <td style="padding: 10px; text-align: center;">${s} unidades</td>
                </tr>
            </tfoot>
        </table>
        
        ${n.body?`<div style="margin-top: 24px;">${n.body}</div>`:""}
    `,{emailService:c}=await ug(async()=>{const{emailService:u}=await Promise.resolve().then(()=>RZ);return{emailService:u}},void 0,import.meta.url);await c.sendEmail({audience:"manual",manualRecipients:n.recipients.split(",").map(u=>u.trim()),subject:n.subject,body:l,module:"informativos"})},UMe=async e=>{const{data:t,error:r}=await Se.from("supply_requests").update({status:"RETIRADO",retrieved_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw console.error("Error marking request as retrieved:",r),r;return t},zMe=async e=>{const{error:t}=await Se.from("supply_requests").delete().eq("id",e);if(t)throw console.error("Error deleting supply request:",t),t},qMe=async(e,t)=>{const r=t.name.split(".").pop(),a=`receipts/${`${e}_${Date.now()}.${r}`}`,{error:i}=await Se.storage.from("supply-receipts").upload(a,t);if(i)throw console.error("Error uploading receipt:",i),i;const{error:s}=await Se.from("supply_requests").update({receipt_path:a}).eq("id",e);if(s)throw console.error("Error updating receipt path:",s),s;return a},HMe=async e=>{const{data:t}=await Se.storage.from("supply-receipts").createSignedUrl(e,3600);return(t==null?void 0:t.signedUrl)||""},WMe=async()=>{if(!rr())return[];const{data:e,error:t}=await Se.from("supply_deliveries").select("*, supply:supplies(*)").order("delivered_at",{ascending:!1});if(t)throw console.error("Error fetching deliveries with supplies:",t),t;return e||[]},VMe=async(e,t,r)=>{const n=new Date,a=LMe(n,r),{data:i,error:s}=await Se.from("supply_deliveries").insert({...e,created_by:t,delivered_at:n.toISOString(),next_delivery_at:(a==null?void 0:a.toISOString())||null}).select().single();if(s)throw console.error("Error creating delivery:",s),s;return i},dW=async()=>{if(!rr())return[];const{data:e,error:t}=await Se.from("supply_email_settings").select("*").order("trigger");if(t)throw console.error("Error fetching email settings:",t),t;return e||[]},PD=async(e,t)=>{const{data:r,error:n}=await Se.from("supply_email_settings").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating email settings:",n),n;return r},GMe=async(e,t)=>{const{data:r,error:n}=await Se.from("supply_email_settings").insert({trigger:e,...t}).select().single();if(n)throw console.error("Error creating email settings:",n),n;return r},KMe=async()=>{const e=await dW();if(e.length>0)return e;const t=[{trigger:"MONDAY",recipients:"",subject:"Solicitud Semanal de Insumos",body:"",enabled:!0},{trigger:"FRIDAY",recipients:"",subject:"Solicitud Fin de Semana - Insumos",body:"",enabled:!0},{trigger:"MANUAL",recipients:"",subject:"Solicitud Manual de Insumos",body:"",enabled:!0}],r=[];for(const n of t)try{const a=await GMe(n.trigger,{recipients:n.recipients,subject:n.subject,body:n.body,enabled:n.enabled});r.push(a)}catch(a){console.error(`Error creating default email setting for ${n.trigger}:`,a)}return r},YMe=async()=>{if(!rr())return{pending:0,retrieved:0};const{data:e,error:t}=await Se.from("supply_requests").select("status");if(t)throw console.error("Error fetching request stats:",t),t;const r=(e==null?void 0:e.filter(a=>a.status==="PENDIENTE").length)||0,n=(e==null?void 0:e.filter(a=>a.status==="RETIRADO").length)||0;return{pending:r,retrieved:n}},XMe=async(e=7)=>{if(!rr())return[];const t=new Date;t.setDate(t.getDate()+e);const{data:r,error:n}=await Se.from("supply_deliveries").select("*, supply:supplies(*)").not("next_delivery_at","is",null).lte("next_delivery_at",t.toISOString()).order("next_delivery_at");if(n)throw console.error("Error fetching upcoming deliveries:",n),n;return r||[]},JMe=()=>{const[e,t]=D.useState({supplies:[],requestStats:{pending:0,retrieved:0},upcomingDeliveries:[],recentRequests:[]}),[r,n]=D.useState(!0);D.useEffect(()=>{(async()=>{try{const[s,l,c,u]=await Promise.all([y_(),YMe(),XMe(7),uW()]);t({supplies:s,requestStats:l,upcomingDeliveries:c,recentRequests:u.slice(0,5)})}catch(s){console.error("Error loading dashboard stats:",s)}finally{n(!1)}})()},[]),e.supplies.filter(i=>i.min_stock>0&&i.min_stock>0);const a=e.upcomingDeliveries.filter(i=>g4(i.next_delivery_at,3));return r?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[o.jsx("div",{className:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-brand-100 text-brand-600",children:o.jsx(Z,{name:"package",size:22})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Insumos"}),o.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.supplies.length})]})]})}),o.jsx("div",{className:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-warning-100 text-warning-600",children:o.jsx(Z,{name:"clock",size:22})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Pendientes"}),o.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.requestStats.pending})]})]})}),o.jsx("div",{className:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-success-100 text-success-600",children:o.jsx(Z,{name:"check-circle",size:22})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Retiradas"}),o.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.requestStats.retrieved})]})]})}),o.jsx("div",{className:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`flex h-11 w-11 items-center justify-center rounded-xl ${a.length>0?"bg-danger-100 text-danger-600":"bg-slate-100 text-slate-500"}`,children:o.jsx(Z,{name:"alert-triangle",size:22})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Alertas"}),o.jsx("p",{className:"text-2xl font-bold text-slate-800",children:a.length})]})]})})]}),o.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-4",children:[o.jsx("h3",{className:"font-semibold text-slate-800",children:"Solicitudes Recientes"}),o.jsx(Z,{name:"file-text",size:18,className:"text-slate-400"})]}),o.jsx("div",{className:"divide-y divide-slate-100",children:e.recentRequests.length===0?o.jsx("div",{className:"px-5 py-8 text-center text-sm text-slate-500",children:"No hay solicitudes registradas"}):e.recentRequests.map(i=>o.jsxs("div",{className:"flex items-center gap-4 px-5 py-3.5",children:[o.jsx("div",{className:`flex h-9 w-9 items-center justify-center rounded-lg ${i.status==="PENDIENTE"?"bg-warning-100 text-warning-600":"bg-success-100 text-success-600"}`,children:o.jsx(Z,{name:i.status==="PENDIENTE"?"clock":"check",size:16})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("p",{className:"text-sm font-medium text-slate-800 truncate",children:[v4(i.request_type)," - ",i.terminal]}),o.jsx("p",{className:"text-xs text-slate-500",children:new Date(i.requested_at).toLocaleDateString("es-CL")})]}),o.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${i.status==="PENDIENTE"?"bg-warning-100 text-warning-700":"bg-success-100 text-success-700"}`,children:i.status==="PENDIENTE"?"Pendiente":"Retirado"})]},i.id))})]}),o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-4",children:[o.jsx("h3",{className:"font-semibold text-slate-800",children:"Entregas Proximas"}),o.jsx(Z,{name:"calendar",size:18,className:"text-slate-400"})]}),o.jsx("div",{className:"divide-y divide-slate-100",children:e.upcomingDeliveries.length===0?o.jsx("div",{className:"px-5 py-8 text-center text-sm text-slate-500",children:"No hay entregas programadas"}):e.upcomingDeliveries.slice(0,5).map(i=>{const s=g4(i.next_delivery_at,3);return o.jsxs("div",{className:"flex items-center gap-4 px-5 py-3.5",children:[o.jsx("div",{className:`flex h-9 w-9 items-center justify-center rounded-lg ${s?"bg-danger-100 text-danger-600":"bg-slate-100 text-slate-600"}`,children:o.jsx(Z,{name:"user",size:16})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-slate-800 truncate",children:i.staff_name}),o.jsx("p",{className:"text-xs text-slate-500",children:i.next_delivery_at?new Date(i.next_delivery_at).toLocaleDateString("es-CL"):"Sin fecha"})]}),s&&o.jsx("span",{className:"inline-flex items-center rounded-full bg-danger-100 px-2.5 py-0.5 text-xs font-medium text-danger-700",children:"Vencida"})]},i.id)})})]})]}),o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-4",children:[o.jsx("h3",{className:"font-semibold text-slate-800",children:"Catalogo de Insumos"}),o.jsxs("span",{className:"text-sm text-slate-500",children:[e.supplies.length," insumos"]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("th",{className:"px-5 py-3",children:"Nombre"}),o.jsx("th",{className:"px-5 py-3",children:"Unidad"}),o.jsx("th",{className:"px-5 py-3 text-center",children:"Vida Util"}),o.jsx("th",{className:"px-5 py-3 text-center",children:"Stock Min"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:e.supplies.map(i=>o.jsxs("tr",{className:"hover:bg-slate-50",children:[o.jsx("td",{className:"px-5 py-3 text-sm font-medium text-slate-800",children:i.name}),o.jsx("td",{className:"px-5 py-3 text-sm text-slate-600",children:i.unit}),o.jsx("td",{className:"px-5 py-3 text-center text-sm text-slate-600",children:i.life_days?`${i.life_days} dias`:"-"}),o.jsx("td",{className:"px-5 py-3 text-center text-sm text-slate-600",children:i.min_stock>0?i.min_stock:"-"})]},i.id))})]})})]})]})},QMe=({onSuccess:e,onCancel:t})=>{const r=_r(j=>j.session),[n,a]=D.useState([]),[i,s]=D.useState([]),[l,c]=D.useState(!0),[u,d]=D.useState(!1),[f,p]=D.useState(gp.TERMINAL[0]),[h,g]=D.useState(PMe()),[m,x]=D.useState([]),[y,v]=D.useState({supply_id:"",quantity:0});D.useEffect(()=>{(async()=>{try{const[A,T]=await Promise.all([y_(),cW()]);a(A),s(T)}catch(A){console.error("Error loading form data:",A)}finally{c(!1)}})()},[]),D.useEffect(()=>{if(n.length===0||i.length===0)return;let j;h==="SEMANA"?j=kMe(i,n):h==="FIN_SEMANA"?j=OMe(i,n):j=[],x(j.map(A=>({...A,is_extra:!1})))},[h,n,i]);const b=(j,A)=>{x(T=>T.map(P=>P.supply_id===j?{...P,quantity:Math.max(0,A)}:P))},N=()=>{if(!y.supply_id||y.quantity<=0)return;const j=n.find(T=>T.id===y.supply_id);if(!j)return;const A=m.find(T=>T.supply_id===y.supply_id);x(A?T=>T.map(P=>P.supply_id===y.supply_id?{...P,quantity:P.quantity+y.quantity}:P):T=>[...T,{supply_id:y.supply_id,supply_name:j.name,quantity:y.quantity,is_extra:!0}]),v({supply_id:"",quantity:0})},_=j=>{x(A=>A.filter(T=>T.supply_id!==j))},E=async()=>{const j=m.filter(A=>A.quantity>0);if(j.length===0){alert("Debe agregar al menos un insumo");return}d(!0);try{const A={};j.forEach(T=>{A[T.supply_name]=T.quantity}),await $Me({terminal:f,request_type:h,items:j.map(T=>({supply_id:T.supply_id,quantity:T.quantity,is_extra:T.is_extra}))},(r==null?void 0:r.supervisorName)||"Usuario",A),e()}catch(A){console.error("Error creating request:",A),alert("Error al crear la solicitud")}finally{d(!1)}};return l?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Terminal"}),o.jsx("select",{value:f,onChange:j=>p(j.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:gp.TERMINAL.map(j=>o.jsx("option",{value:j,children:j},j))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Tipo de Solicitud"}),o.jsxs("select",{value:h,onChange:j=>g(j.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:[o.jsx("option",{value:"SEMANA",children:"Semana (Lun-Vie)"}),o.jsx("option",{value:"FIN_SEMANA",children:"Fin de Semana"}),o.jsx("option",{value:"EXTRA",children:"Extra"})]})]})]}),h!=="EXTRA"&&o.jsx("div",{className:"rounded-lg bg-brand-50 p-3 text-sm text-brand-700",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Z,{name:"info",size:18,className:"mt-0.5 flex-shrink-0"}),o.jsx("p",{children:h==="SEMANA"?"Calculo automatico para Lunes a Viernes incluyendo noches de lunes a jueves.":"Calculo automatico para Viernes noche, Sabado y Domingo completos."})]})}),o.jsx("div",{className:"rounded-lg border border-slate-200 overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-slate-50 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("th",{className:"px-4 py-2",children:"Insumo"}),o.jsx("th",{className:"px-4 py-2 text-right w-24",children:"Cantidad"}),o.jsx("th",{className:"px-4 py-2 w-12"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:m.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"px-4 py-6 text-center text-slate-500",children:"No hay insumos. Agregue items extra."})}):m.map(j=>o.jsxs("tr",{children:[o.jsxs("td",{className:"px-4 py-2 text-slate-800",children:[j.supply_name,j.is_extra&&o.jsx("span",{className:"ml-2 text-xs text-brand-500",children:"(extra)"})]}),o.jsx("td",{className:"px-4 py-2",children:o.jsx("input",{type:"number",min:"0",value:j.quantity,onChange:A=>b(j.supply_id,parseInt(A.target.value)||0),className:"w-full rounded border border-slate-300 px-2 py-1 text-right text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})}),o.jsx("td",{className:"px-4 py-2 text-center",children:o.jsx("button",{onClick:()=>_(j.supply_id),className:"rounded p-1 text-slate-400 hover:bg-danger-100 hover:text-danger-600",children:o.jsx(Z,{name:"x",size:16})})})]},j.supply_id))})]})}),o.jsxs("div",{className:"rounded-lg border border-dashed border-slate-300 p-4",children:[o.jsx("p",{className:"mb-3 text-sm font-medium text-slate-700",children:"Agregar insumo extra"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("select",{value:y.supply_id,onChange:j=>v(A=>({...A,supply_id:j.target.value})),className:"flex-1 rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:[o.jsx("option",{value:"",children:"Seleccionar insumo..."}),n.filter(j=>!m.some(A=>A.supply_id===j.id)).map(j=>o.jsx("option",{value:j.id,children:j.name},j.id))]}),o.jsx("input",{type:"number",min:"1",placeholder:"Cant.",value:y.quantity||"",onChange:j=>v(A=>({...A,quantity:parseInt(j.target.value)||0})),className:"w-20 rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"}),o.jsx("button",{onClick:N,disabled:!y.supply_id||y.quantity<=0,className:"rounded-lg bg-slate-100 px-3 py-2 text-slate-600 hover:bg-slate-200 disabled:opacity-50",children:o.jsx(Z,{name:"plus",size:18})})]})]}),o.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-slate-50 px-4 py-3",children:[o.jsxs("span",{className:"text-sm font-medium text-slate-600",children:["Total items: ",m.filter(j=>j.quantity>0).length]}),o.jsxs("span",{className:"text-sm font-bold text-slate-800",children:[m.reduce((j,A)=>j+A.quantity,0)," unidades"]})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:t,className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),o.jsxs("button",{onClick:E,disabled:u||m.filter(j=>j.quantity>0).length===0,className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[u&&o.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Crear Solicitud"]})]})]})},ZMe=({onRefresh:e})=>{const[t,r]=D.useState([]),[n,a]=D.useState(!0),[i,s]=D.useState(!1),[l,c]=D.useState(null),[u,d]=D.useState(!1),[f,p]=D.useState("ALL"),[h,g]=D.useState(null),[m,x]=D.useState(null),[y,v]=D.useState(!1),[b,N]=D.useState(null),_=async()=>{try{a(!0);const I=await uW(f!=="ALL"?{status:f}:void 0);r(I)}catch(I){console.error("Error loading requests:",I)}finally{a(!1)}};D.useEffect(()=>{_()},[f]);const E=async I=>{try{const z=await FMe(I);c(z),d(!0)}catch(z){console.error("Error loading request detail:",z)}},j=I=>{g(I),x(null),N(null)},A=async()=>{if(!(!h||!m)){v(!0),N(null);try{await qMe(h,m),await UMe(h),g(null),x(null),await _(),e==null||e()}catch(I){console.error("Error closing request:",I);const z=I instanceof Error?I.message:"Error desconocido";z.includes("Bucket not found")||z.includes("not found")?N('El bucket de almacenamiento no existe. Contacte al administrador para crear el bucket "supply-receipts" en Supabase Storage.'):z.includes("security")||z.includes("policy")?N("Error de permisos. Verifique las polticas del bucket en Supabase."):N(`Error al cerrar solicitud: ${z}`)}finally{v(!1)}}},T=I=>{var Y;const z=(Y=I.target.files)==null?void 0:Y[0];if(z){if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(z.type)){N("Tipo de archivo no vlido. Use PDF, JPG o PNG.");return}if(z.size>5*1024*1024){N("El archivo excede 5MB.");return}x(z),N(null)}},P=async I=>{if(confirm("Eliminar esta solicitud?"))try{await zMe(I),await _(),e==null||e()}catch(z){console.error("Error deleting request:",z)}},O=async I=>{try{const z=await HMe(I);window.open(z,"_blank")}catch(z){console.error("Error getting receipt URL:",z)}},R=()=>{s(!1),_(),e==null||e()};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>p("ALL"),className:`rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${f==="ALL"?"bg-brand-500 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Todas"}),o.jsx("button",{onClick:()=>p("PENDIENTE"),className:`rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${f==="PENDIENTE"?"bg-warning-500 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Pendientes"}),o.jsx("button",{onClick:()=>p("RETIRADO"),className:`rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${f==="RETIRADO"?"bg-success-500 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Retiradas"})]}),o.jsxs("button",{onClick:()=>s(!0),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 transition-colors",children:[o.jsx(Z,{name:"plus",size:18}),o.jsx("span",{children:"Nueva Solicitud"})]})]}),o.jsx("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:n?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):t.length===0?o.jsxs("div",{className:"px-5 py-12 text-center",children:[o.jsx(Z,{name:"inbox",size:40,className:"mx-auto text-slate-300 mb-3"}),o.jsx("p",{className:"text-sm text-slate-500",children:"No hay solicitudes registradas"})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("th",{className:"px-4 py-3",children:"Fecha"}),o.jsx("th",{className:"px-4 py-3",children:"Tipo"}),o.jsx("th",{className:"px-4 py-3",children:"Terminal"}),o.jsx("th",{className:"px-4 py-3",children:"Estado"}),o.jsx("th",{className:"px-4 py-3",children:"Creado por"}),o.jsx("th",{className:"px-4 py-3 text-right",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:t.map(I=>o.jsxs("tr",{className:"hover:bg-slate-50",children:[o.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:new Date(I.requested_at).toLocaleDateString("es-CL")}),o.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:v4(I.request_type)}),o.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:I.terminal}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${I.status==="PENDIENTE"?"bg-warning-100 text-warning-700":"bg-success-100 text-success-700"}`,children:OD(I.status)})}),o.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:I.created_by}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[o.jsx("button",{onClick:()=>E(I.id),className:"rounded-lg p-1.5 text-slate-500 hover:bg-slate-100 hover:text-brand-600",title:"Ver detalle",children:o.jsx(Z,{name:"eye",size:16})}),I.status==="PENDIENTE"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>j(I.id),className:"rounded-lg p-1.5 text-slate-500 hover:bg-success-100 hover:text-success-600",title:"Cerrar solicitud (requiere boleta)",children:o.jsx(Z,{name:"check",size:16})}),o.jsx("button",{onClick:()=>P(I.id),className:"rounded-lg p-1.5 text-slate-500 hover:bg-danger-100 hover:text-danger-600",title:"Eliminar",children:o.jsx(Z,{name:"trash",size:16})})]}),I.receipt_path&&o.jsx("button",{onClick:()=>O(I.receipt_path),className:"rounded-lg p-1.5 text-slate-500 hover:bg-slate-100 hover:text-brand-600",title:"Ver boleta",children:o.jsx(Z,{name:"file",size:16})})]})})]},I.id))})]})})}),i&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/60 p-4 backdrop-blur-sm",children:o.jsxs("div",{className:"relative mt-8 w-full max-w-2xl rounded-2xl bg-white p-6 shadow-xl",children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Nueva Solicitud"}),o.jsx("button",{onClick:()=>s(!1),className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:o.jsx(Z,{name:"x",size:20})})]}),o.jsx(QMe,{onSuccess:R,onCancel:()=>s(!1)})]})}),u&&l&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/60 p-4 backdrop-blur-sm",children:o.jsxs("div",{className:"relative mt-8 w-full max-w-lg rounded-2xl bg-white p-6 shadow-xl",children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Detalle Solicitud"}),o.jsx("button",{onClick:()=>{d(!1),c(null)},className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:o.jsx(Z,{name:"x",size:20})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500",children:"Tipo:"}),o.jsx("span",{className:"ml-2 font-medium text-slate-800",children:v4(l.request_type)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500",children:"Estado:"}),o.jsx("span",{className:`ml-2 font-medium ${l.status==="PENDIENTE"?"text-warning-600":"text-success-600"}`,children:OD(l.status)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500",children:"Terminal:"}),o.jsx("span",{className:"ml-2 font-medium text-slate-800",children:l.terminal})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-500",children:"Fecha:"}),o.jsx("span",{className:"ml-2 font-medium text-slate-800",children:new Date(l.requested_at).toLocaleDateString("es-CL")})]})]}),o.jsx("div",{className:"rounded-lg border border-slate-200 overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-slate-50 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("th",{className:"px-4 py-2",children:"Insumo"}),o.jsx("th",{className:"px-4 py-2 text-right",children:"Cantidad"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:l.items.map(I=>{var z;return o.jsxs("tr",{children:[o.jsxs("td",{className:"px-4 py-2 text-slate-800",children:[((z=I.supply)==null?void 0:z.name)||"Desconocido",I.is_extra&&o.jsx("span",{className:"ml-2 text-xs text-brand-500",children:"(extra)"})]}),o.jsx("td",{className:"px-4 py-2 text-right font-medium text-slate-800",children:I.quantity})]},I.id)})})]})})]})]})}),h&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/60 p-4 backdrop-blur-sm",children:o.jsxs("div",{className:"relative mt-8 w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Cerrar Solicitud"}),o.jsx("button",{onClick:()=>g(null),className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:o.jsx(Z,{name:"x",size:20})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"rounded-lg bg-warning-50 p-4 text-sm text-warning-800",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Z,{name:"alert-triangle",size:18,className:"mt-0.5 flex-shrink-0"}),o.jsxs("p",{children:[o.jsx("strong",{children:"Obligatorio:"})," Debe adjuntar la boleta o comprobante para cerrar esta solicitud."]})]})}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700",children:"Boleta o Comprobante (PDF, JPG, PNG - max 5MB) *"}),o.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:T,className:"block w-full text-sm text-slate-500 file:mr-4 file:rounded-lg file:border-0 file:bg-brand-50 file:px-4 file:py-2 file:text-sm file:font-medium file:text-brand-700 hover:file:bg-brand-100"}),m&&o.jsxs("p",{className:"mt-2 flex items-center gap-2 text-sm text-success-600",children:[o.jsx(Z,{name:"check",size:16}),m.name]})]}),b&&o.jsx("div",{className:"rounded-lg bg-danger-50 p-3 text-sm text-danger-700",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Z,{name:"alert-triangle",size:16,className:"mt-0.5 flex-shrink-0"}),o.jsx("p",{children:b})]})}),o.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[o.jsx("button",{onClick:()=>g(null),className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),o.jsxs("button",{onClick:A,disabled:!m||y,className:"inline-flex items-center gap-2 rounded-lg bg-success-500 px-4 py-2 text-sm font-medium text-white hover:bg-success-600 disabled:opacity-50",children:[y&&o.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Cerrar Solicitud"]})]})]})]})})]})},eFe=()=>{const e=_r(v=>v.session),[t,r]=D.useState([]),[n,a]=D.useState([]),[i,s]=D.useState([]),[l,c]=D.useState(!0),[u,d]=D.useState(!1),[f,p]=D.useState(!1),[h,g]=D.useState({supply_id:"",staff_rut:"",staff_name:"",quantity:1,notes:""}),m=async()=>{try{const[v,b,N]=await Promise.all([y_(),WMe(),R9({mode:"ALL"},{cargo:"cleaner",status:"ACTIVO"})]);r(v),a(b),s(N)}catch(v){console.error("Error loading deliveries data:",v)}finally{c(!1)}};D.useEffect(()=>{m()},[]);const x=v=>{const b=i.find(N=>N.rut===v);g(N=>({...N,staff_rut:v,staff_name:(b==null?void 0:b.nombre)||""}))},y=async()=>{if(!h.supply_id||!h.staff_rut||h.quantity<=0){alert("Complete todos los campos requeridos");return}p(!0);try{const v=t.find(b=>b.id===h.supply_id);await VMe(h,(e==null?void 0:e.supervisorName)||"Usuario",(v==null?void 0:v.life_days)||null),d(!1),g({supply_id:"",staff_rut:"",staff_name:"",quantity:1,notes:""}),await m()}catch(v){console.error("Error creating delivery:",v),alert("Error al registrar la entrega")}finally{p(!1)}};return l?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-sm text-slate-500",children:"Registro de entregas de insumos a personal de limpieza"}),o.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600",children:[o.jsx(Z,{name:"plus",size:18}),o.jsx("span",{children:"Nueva Entrega"})]})]}),o.jsx("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:n.length===0?o.jsxs("div",{className:"px-5 py-12 text-center",children:[o.jsx(Z,{name:"package",size:40,className:"mx-auto text-slate-300 mb-3"}),o.jsx("p",{className:"text-sm text-slate-500",children:"No hay entregas registradas"})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("th",{className:"px-4 py-3",children:"Fecha"}),o.jsx("th",{className:"px-4 py-3",children:"Personal"}),o.jsx("th",{className:"px-4 py-3",children:"Insumo"}),o.jsx("th",{className:"px-4 py-3 text-center",children:"Cantidad"}),o.jsx("th",{className:"px-4 py-3",children:"Proxima Entrega"}),o.jsx("th",{className:"px-4 py-3",children:"Notas"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:n.map(v=>{var N;const b=g4(v.next_delivery_at,3);return o.jsxs("tr",{className:"hover:bg-slate-50",children:[o.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:new Date(v.delivered_at).toLocaleDateString("es-CL")}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-slate-800",children:v.staff_name}),o.jsx("p",{className:"text-xs text-slate-500",children:v.staff_rut})]})}),o.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:((N=v.supply)==null?void 0:N.name)||"Desconocido"}),o.jsx("td",{className:"px-4 py-3 text-center text-sm font-medium text-slate-800",children:v.quantity}),o.jsx("td",{className:"px-4 py-3",children:v.next_delivery_at?o.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${b?"bg-danger-100 text-danger-700":"bg-slate-100 text-slate-600"}`,children:new Date(v.next_delivery_at).toLocaleDateString("es-CL")}):o.jsx("span",{className:"text-sm text-slate-400",children:"-"})}),o.jsx("td",{className:"px-4 py-3 text-sm text-slate-500",children:v.notes||"-"})]},v.id)})})]})})}),u&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/60 p-4 backdrop-blur-sm",children:o.jsxs("div",{className:"relative mt-8 w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Nueva Entrega"}),o.jsx("button",{onClick:()=>d(!1),className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:o.jsx(Z,{name:"x",size:20})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Personal (Cleaner)"}),o.jsxs("select",{value:h.staff_rut,onChange:v=>x(v.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:[o.jsx("option",{value:"",children:"Seleccionar cleaner..."}),i.map(v=>o.jsxs("option",{value:v.rut,children:[v.nombre," (",v.rut,")"]},v.rut))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Insumo"}),o.jsxs("select",{value:h.supply_id,onChange:v=>g(b=>({...b,supply_id:v.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:[o.jsx("option",{value:"",children:"Seleccionar insumo..."}),t.map(v=>o.jsxs("option",{value:v.id,children:[v.name," (",v.unit,")",v.life_days&&` - ${v.life_days} dias vida util`]},v.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Cantidad"}),o.jsx("input",{type:"number",min:"1",value:h.quantity,onChange:v=>g(b=>({...b,quantity:parseInt(v.target.value)||1})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Notas (opcional)"}),o.jsx("textarea",{value:h.notes||"",onChange:v=>g(b=>({...b,notes:v.target.value})),rows:2,className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",placeholder:"Observaciones..."})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[o.jsx("button",{onClick:()=>d(!1),className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),o.jsxs("button",{onClick:y,disabled:f||!h.supply_id||!h.staff_rut,className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[f&&o.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Registrar Entrega"]})]})]})]})})]})},tFe=["rollo","bolsa","unidad","litro","kit"],rFe=()=>{const[e,t]=D.useState("consumption"),[r,n]=D.useState("TERMINAL"),[a,i]=D.useState([]),[s,l]=D.useState([]),[c,u]=D.useState(!0),[d,f]=D.useState(!1),[p,h]=D.useState(!1),[g,m]=D.useState({name:"",unit:"unidad",life_days:null,min_stock:0}),x=async()=>{try{const[A,T]=await Promise.all([y_(),cW()]);i(A),l(T)}catch(A){console.error("Error loading config data:",A)}finally{u(!1)}};D.useEffect(()=>{x()},[]);const y=(A,T,P,O)=>{const R=s.find(I=>I.location_type===A&&I.location_name===T&&I.period===P&&I.supply_id===O);return(R==null?void 0:R.quantity)||0},v=async(A,T,P,O,R)=>{f(!0);try{await MMe({location_type:A,location_name:T,period:P,supply_id:O,quantity:Math.max(0,R)}),await x()}catch(I){console.error("Error updating profile:",I)}finally{f(!1)}},b=async(A,T,P)=>{f(!0);try{await DMe(A,{[T]:P}),await x()}catch(O){console.error("Error updating supply:",O)}finally{f(!1)}},N=async()=>{if(!g.name.trim()){alert("Ingrese el nombre del insumo");return}f(!0);try{await RMe({name:g.name.trim(),unit:g.unit,life_days:g.life_days,min_stock:g.min_stock}),m({name:"",unit:"unidad",life_days:null,min_stock:0}),h(!1),await x()}catch(A){console.error("Error creating supply:",A),alert("Error al crear el insumo")}finally{f(!1)}},_=async(A,T)=>{if(confirm(`Eliminar insumo "${T}"? Esta accion no se puede deshacer.`)){f(!0);try{await IMe(A),await x()}catch(P){console.error("Error deleting supply:",P),alert("Error al eliminar. Puede que tenga datos asociados.")}finally{f(!1)}}};if(c)return o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})});const E=r==="TERMINAL"?[{key:"DAY",label:"Dia"},{key:"NIGHT",label:"Noche"}]:[{key:"DAY",label:"Dia (L-V)"},{key:"WEEKEND",label:"Fin de Semana"}],j=r==="TERMINAL"?gp.TERMINAL:gp.CABEZAL;return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2 border-b border-slate-200 pb-2",children:[o.jsx("button",{onClick:()=>t("consumption"),className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${e==="consumption"?"bg-brand-500 text-white":"text-slate-600 hover:bg-slate-100"}`,children:"Consumos"}),o.jsx("button",{onClick:()=>t("supplies"),className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${e==="supplies"?"bg-brand-500 text-white":"text-slate-600 hover:bg-slate-100"}`,children:"Insumos"})]}),e==="consumption"&&o.jsxs("div",{className:"space-y-4",children:[a.length===0&&o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 p-8 text-center",children:[o.jsx(Z,{name:"package",size:40,className:"mx-auto text-slate-300 mb-3"}),o.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"No hay insumos configurados. Agregue insumos primero."}),o.jsxs("button",{onClick:()=>t("supplies"),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600",children:[o.jsx(Z,{name:"plus",size:18}),"Agregar Insumos"]})]}),a.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>n("TERMINAL"),className:`flex-1 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors ${r==="TERMINAL"?"bg-slate-800 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Terminal"}),o.jsx("button",{onClick:()=>n("CABEZAL"),className:`flex-1 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors ${r==="CABEZAL"?"bg-slate-800 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Cabezales"})]}),d&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-brand-600",children:[o.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-brand-500 border-t-transparent"}),"Guardando..."]}),j.map(A=>o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:[o.jsx("div",{className:"border-b border-slate-100 px-4 py-3 bg-slate-50",children:o.jsx("h3",{className:"font-medium text-slate-800",children:A})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("th",{className:"px-4 py-2",children:"Insumo"}),E.map(T=>o.jsx("th",{className:"px-4 py-2 text-center w-28",children:T.label},T.key))]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:a.map(T=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-4 py-2 text-slate-800",children:T.name}),E.map(P=>o.jsx("td",{className:"px-4 py-2 text-center",children:o.jsx("input",{type:"number",min:"0",value:y(r,A,P.key,T.id),onChange:O=>v(r,A,P.key,T.id,parseInt(O.target.value)||0),className:"w-16 rounded border border-slate-300 px-2 py-1 text-center text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})},P.key))]},T.id))})]})})]},A))]})]}),e==="supplies"&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex justify-end",children:o.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600",children:[o.jsx(Z,{name:"plus",size:18}),"Agregar Insumo"]})}),p&&o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-brand-200 p-4",children:[o.jsx("h4",{className:"font-medium text-slate-800 mb-3",children:"Nuevo Insumo"}),o.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 md:grid-cols-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Nombre *"}),o.jsx("input",{type:"text",value:g.name,onChange:A=>m(T=>({...T,name:A.target.value})),placeholder:"Ej: Nova",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Unidad *"}),o.jsx("select",{value:g.unit,onChange:A=>m(T=>({...T,unit:A.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500",children:tFe.map(A=>o.jsx("option",{value:A,children:A},A))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Vida Util (dias)"}),o.jsx("input",{type:"number",min:"0",value:g.life_days||"",placeholder:"Opcional",onChange:A=>m(T=>({...T,life_days:A.target.value?parseInt(A.target.value):null})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Stock Minimo"}),o.jsx("input",{type:"number",min:"0",value:g.min_stock,onChange:A=>m(T=>({...T,min_stock:parseInt(A.target.value)||0})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[o.jsx("button",{onClick:()=>{h(!1),m({name:"",unit:"unidad",life_days:null,min_stock:0})},className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),o.jsxs("button",{onClick:N,disabled:d||!g.name.trim(),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[d&&o.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Guardar"]})]})]}),a.length===0&&!p?o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 p-8 text-center",children:[o.jsx(Z,{name:"package",size:40,className:"mx-auto text-slate-300 mb-3"}),o.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"No hay insumos configurados"}),o.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600",children:[o.jsx(Z,{name:"plus",size:18}),"Agregar Primer Insumo"]})]}):a.length>0&&o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:[o.jsx("div",{className:"border-b border-slate-100 px-4 py-3 bg-slate-50",children:o.jsx("h3",{className:"font-medium text-slate-800",children:"Configuracion de Insumos"})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-slate-100 text-left text-xs font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("th",{className:"px-4 py-2",children:"Insumo"}),o.jsx("th",{className:"px-4 py-2",children:"Unidad"}),o.jsx("th",{className:"px-4 py-2 text-center w-28",children:"Vida Util (dias)"}),o.jsx("th",{className:"px-4 py-2 text-center w-28",children:"Stock Minimo"}),o.jsx("th",{className:"px-4 py-2 w-16"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:a.map(A=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-4 py-2 font-medium text-slate-800",children:A.name}),o.jsx("td",{className:"px-4 py-2 text-slate-600",children:A.unit}),o.jsx("td",{className:"px-4 py-2 text-center",children:o.jsx("input",{type:"number",min:"0",value:A.life_days||"",placeholder:"-",onChange:T=>b(A.id,"life_days",T.target.value?parseInt(T.target.value):null),className:"w-16 rounded border border-slate-300 px-2 py-1 text-center text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})}),o.jsx("td",{className:"px-4 py-2 text-center",children:o.jsx("input",{type:"number",min:"0",value:A.min_stock||"",placeholder:"-",onChange:T=>b(A.id,"min_stock",parseInt(T.target.value)||0),className:"w-16 rounded border border-slate-300 px-2 py-1 text-center text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})}),o.jsx("td",{className:"px-4 py-2 text-center",children:o.jsx("button",{onClick:()=>_(A.id,A.name),className:"rounded p-1 text-slate-400 hover:bg-danger-100 hover:text-danger-600",children:o.jsx(Z,{name:"trash",size:16})})})]},A.id))})]})})]})]})]})},nFe={MONDAY:"Lunes (Solicitud Semanal)",FRIDAY:"Viernes (Fin de Semana)",MANUAL:"Manual"},aFe=()=>{const[e,t]=D.useState([]),[r,n]=D.useState(!0),[a,i]=D.useState(!1),[s,l]=D.useState(null),[c,u]=D.useState(null),[d,f]=D.useState(null),[p,h]=D.useState({recipients:"",subject:"",body:"",enabled:!0}),g=async()=>{try{const _=await dW();return t(_),_}catch(_){return console.error("Error loading email settings:",_),[]}finally{n(!1)}},m=async()=>{i(!0);try{const _=await KMe();t(_)}catch(_){console.error("Error creating default settings:",_),alert("Error al crear configuraciones. Verifique que las tablas existan en Supabase.")}finally{i(!1)}};D.useEffect(()=>{g()},[]);const x=_=>{f(_.id),h({recipients:_.recipients,subject:_.subject,body:_.body,enabled:_.enabled})},y=()=>{f(null),h({recipients:"",subject:"",body:"",enabled:!0})},v=async _=>{l(_);try{await PD(_,p),await g(),f(null)}catch(E){console.error("Error saving email settings:",E),alert("Error al guardar la configuracion")}finally{l(null)}},b=async _=>{l(_.id);try{await PD(_.id,{enabled:!_.enabled}),await g()}catch(E){console.error("Error toggling email setting:",E)}finally{l(null)}},N=async _=>{if(!_.recipients){alert("Configure los destinatarios primero");return}u(_.id);try{await oo.sendEmail({audience:"manual",manualRecipients:_.recipients.split(",").map(E=>E.trim()),subject:`[TEST] ${_.subject}`,body:`<p>Este es un correo de prueba.</p><hr/>${_.body}`,module:"informativos"}),alert("Correo de prueba enviado")}catch(E){console.error("Error sending test email:",E),alert("Error al enviar el correo de prueba")}finally{u(null)}};return r?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"})}):e.length===0?o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 p-8 text-center",children:[o.jsx(Z,{name:"send",size:40,className:"mx-auto text-slate-300 mb-3"}),o.jsx("h3",{className:"font-medium text-slate-800 mb-2",children:"Configurar Correos Automaticos"}),o.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Cree las configuraciones de correo para las solicitudes automaticas de Lunes, Viernes y Manual."}),o.jsxs("button",{onClick:m,disabled:a,className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[a?o.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}):o.jsx(Z,{name:"plus",size:18}),"Crear Configuraciones"]})]})}):o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"rounded-lg bg-slate-50 p-4 text-sm text-slate-600",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Z,{name:"info",size:18,className:"mt-0.5 flex-shrink-0 text-slate-500"}),o.jsx("p",{children:"Configure los destinatarios y plantillas de correo para las solicitudes automaticas. Los correos se envian automaticamente los dias configurados."})]})}),o.jsx("div",{className:"space-y-4",children:e.map(_=>{const E=d===_.id,j=s===_.id,A=c===_.id;return o.jsxs("div",{className:"rounded-xl bg-white shadow-sm ring-1 ring-slate-200/60 overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-4 py-3 bg-slate-50",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:`h-2 w-2 rounded-full ${_.enabled?"bg-success-500":"bg-slate-400"}`}),o.jsx("h3",{className:"font-medium text-slate-800",children:nFe[_.trigger]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("button",{onClick:()=>b(_),disabled:j,className:`rounded-lg px-3 py-1 text-xs font-medium transition-colors ${_.enabled?"bg-success-100 text-success-700 hover:bg-success-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:_.enabled?"Activo":"Inactivo"})})]}),o.jsx("div",{className:"p-4",children:E?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Destinatarios (separados por coma)"}),o.jsx("input",{type:"text",value:p.recipients,onChange:T=>h(P=>({...P,recipients:T.target.value})),placeholder:"correo1@ejemplo.com, correo2@ejemplo.com",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Asunto"}),o.jsx("input",{type:"text",value:p.subject,onChange:T=>h(P=>({...P,subject:T.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Cuerpo del mensaje (HTML permitido)"}),o.jsx("textarea",{value:p.body,onChange:T=>h(P=>({...P,body:T.target.value})),rows:4,placeholder:"Ejemplo: <p>Estimados,</p><p>Se adjunta la solicitud de insumos.</p>",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:ring-1 focus:ring-brand-500"})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx("button",{onClick:y,className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),o.jsxs("button",{onClick:()=>v(_.id),disabled:j,className:"inline-flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50",children:[j&&o.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Guardar"]})]})]}):o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Destinatarios"}),o.jsx("p",{className:"mt-1 text-sm text-slate-800",children:_.recipients||o.jsx("span",{className:"text-slate-400 italic",children:"No configurado"})})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Asunto"}),o.jsx("p",{className:"mt-1 text-sm text-slate-800",children:_.subject})]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Mensaje"}),o.jsx("p",{className:"mt-1 text-sm text-slate-600 line-clamp-2",children:_.body||o.jsx("span",{className:"text-slate-400 italic",children:"Sin mensaje"})})]}),o.jsxs("div",{className:"flex gap-2 pt-2",children:[o.jsxs("button",{onClick:()=>x(_),className:"inline-flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-sm font-medium text-slate-600 hover:bg-slate-100",children:[o.jsx(Z,{name:"edit",size:14}),"Editar"]}),o.jsxs("button",{onClick:()=>N(_),disabled:A||!_.recipients,className:"inline-flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-sm font-medium text-brand-600 hover:bg-brand-50 disabled:opacity-50",children:[A?o.jsx("div",{className:"h-3.5 w-3.5 animate-spin rounded-full border-2 border-brand-500 border-t-transparent"}):o.jsx(Z,{name:"send",size:14}),"Enviar Prueba"]})]})]})})]},_.id)})})]})},iFe=[{key:"dashboard",label:"Dashboard",icon:"bar-chart"},{key:"solicitudes",label:"Solicitudes",icon:"file-text"},{key:"entregas",label:"Entregas",icon:"package"},{key:"config",label:"Configuracion",icon:"settings"}],sFe=()=>{const[e,t]=D.useState("dashboard"),[r,n]=D.useState("consumption"),[a,i]=D.useState(0),s=()=>i(l=>l+1);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Solicitudes de Insumos"}),o.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Gestion inteligente de insumos, solicitudes y entregas a personal"})]}),o.jsx("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 pb-3",children:iFe.map(l=>o.jsxs("button",{onClick:()=>t(l.key),className:`inline-flex items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium transition-all ${e===l.key?"bg-brand-500 text-white shadow-brand":"text-slate-600 hover:bg-slate-100"}`,children:[o.jsx(Z,{name:l.icon,size:18}),o.jsx("span",{className:"hidden sm:inline",children:l.label})]},l.key))}),o.jsxs("div",{children:[e==="dashboard"&&o.jsx(JMe,{}),e==="solicitudes"&&o.jsx(ZMe,{onRefresh:s}),e==="entregas"&&o.jsx(eFe,{}),e==="config"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>n("consumption"),className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${r==="consumption"?"bg-slate-800 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Consumos e Insumos"}),o.jsx("button",{onClick:()=>n("emails"),className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${r==="emails"?"bg-slate-800 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Correos"})]}),r==="consumption"&&o.jsx(rFe,{}),r==="emails"&&o.jsx(aFe,{})]})]},a)]})};async function fW(e){let t=Se.from("srl_requests").select(`
            *,
            srl_request_buses (
                id, bus_ppu, bus_model, problem_type, observation, applus
            )
        `).order("created_at",{ascending:!1});e!=null&&e.terminal&&e.terminal!=="ALL"&&(t=t.eq("terminal_code",e.terminal)),e!=null&&e.status&&e.status!=="TODOS"&&(t=t.eq("status",e.status)),e!=null&&e.criticality&&e.criticality!=="TODAS"&&(t=t.eq("criticality",e.criticality)),e!=null&&e.id&&(t=t.eq("id",e.id));const{data:r,error:n}=await t;if(n)throw n;return r}async function hW(e,t){e.required_date===""&&(e.required_date=null);const{data:r,error:n}=await Se.from("srl_requests").insert(e).select().single();if(n)throw n;const a=[];for(const i of t){const{data:s,error:l}=await Se.from("srl_request_buses").insert({request_id:r.id,bus_ppu:i.ppu,problem_type:"GENERAL",observation:i.problem,applus:e.applus}).select().single();if(l){a.push({bus:i.ppu,error:l});continue}if(i.images&&i.images.length>0)for(const c of i.images)try{await wT(s.id,c)}catch(u){console.error(`Failed to upload image for bus ${i.ppu}`,u)}}try{await gW(r.id,"CREADA")}catch(i){console.error("Failed to send email notification",i)}return r}async function pW(e,t){t.required_date===""&&(t.required_date=null);const{data:r,error:n}=await Se.from("srl_requests").update(t).eq("id",e).select().single();if(n)throw n;return r}async function bT(e){const{data:t,error:r}=await Se.from("srl_bus_images").select("*").eq("request_bus_id",e).order("created_at",{ascending:!1});if(r)throw r;return t.map(n=>({...n,publicUrl:Se.storage.from("srl-images").getPublicUrl(n.storage_path).data.publicUrl}))}async function wT(e,t){const r=`${e}/${Date.now()}_${t.name}`,{error:n}=await Se.storage.from("srl-images").upload(r,t);if(n)throw n;const{data:a,error:i}=await Se.from("srl_bus_images").insert({request_bus_id:e,storage_path:r,mime_type:t.type}).select().single();if(i)throw i;return{...a,publicUrl:Se.storage.from("srl-images").getPublicUrl(r).data.publicUrl}}async function oFe(e,t){const r=`${e}_${Date.now()}_${t.name}`,{data:n,error:a}=await Se.storage.from("srl-documents").upload(r,t);if(a)throw console.error("Upload error:",a),new Error(`Error al subir documento: ${a.message}`);const{data:{publicUrl:i}}=Se.storage.from("srl-documents").getPublicUrl(n.path);return i}async function _T(){const{data:e,error:t}=await Se.from("srl_email_settings").select("*").single();if(t&&t.code!=="PGRST116")throw t;return e}async function mW(e){const{error:t}=await Se.from("srl_email_settings").update(e).gt("updated_at","2000-01-01");if(t)throw t;return!0}async function gW(e,t){const{data:r,error:n}=await Se.from("srl_requests").select(`
            *,
            srl_request_buses (
                id,
                bus_ppu,
                observation,
                problem_type,
                applus
            )
        `).eq("id",e).single();if(n||!r)throw new Error("Could not fetch request for email");const a=await _T();if(!a||!a.enabled)return;const s=(await Promise.all(r.srl_request_buses.map(async u=>{const d=await bT(u.id);return{...u,images:d}}))).map(u=>{const d=u.images.length>0?u.images.map(f=>`
                <a href="${f.publicUrl}" target="_blank" style="display: inline-block; margin: 5px;">
                    <img src="${f.publicUrl}" alt="Evidencia" style="width: 150px; height: 150px; object-fit: cover; border-radius: 8px; border: 2px solid #e2e8f0; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                </a>
            `).join(""):'<p style="color: #94a3b8; font-style: italic;">Sin evidencia fotogrfica</p>';return`
            <div style="background: #f8fafc; border-left: 4px solid #3b82f6; padding: 16px; margin-bottom: 16px; border-radius: 8px;">
                <h3 style="margin: 0 0 8px 0; color: #1e293b; font-size: 18px; font-weight: bold;">
                     PPU: ${u.bus_ppu}
                </h3>
                <p style="margin: 4px 0; color: #475569;">
                    <strong>Problema:</strong> ${u.observation||u.problem_type||"No especificado"}
                </p>
                ${u.applus?'<p style="margin: 4px 0; color: #dc2626; font-weight: bold;"> Requiere APPLUS</p>':""}
                <div style="margin-top: 12px;">
                    <strong style="display: block; margin-bottom: 8px; color: #64748b; font-size: 12px; text-transform: uppercase;">Evidencia Fotogrfica:</strong>
                    ${d}
                </div>
            </div>
        `}).join(""),l=`
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 0; background-color: #f1f5f9;">
    <div style="max-width: 600px; margin: 0 auto; background: white; padding: 32px; border-radius: 12px; margin-top: 32px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        <!-- Header -->
        <div style="text-align: center; margin-bottom: 32px; padding-bottom: 24px; border-bottom: 3px solid #3b82f6;">
            <h1 style="margin: 0; color: #1e293b; font-size: 28px; font-weight: 800;">
                ASISS
            </h1>
            <p style="margin: 8px 0 0 0; color: #64748b; font-size: 14px; font-weight: 500; letter-spacing: 1px; text-transform: uppercase;">
                Operaciones y Logstica
            </p>
        </div>

        <!-- Badge -->
        <div style="background: linear-gradient(135deg, #3b82f6 0%, #6366f1 100%); padding: 16px; border-radius: 8px; text-align: center; margin-bottom: 24px;">
            <p style="margin: 0; color: white; font-size: 16px; font-weight: bold; letter-spacing: 0.5px;">
                ${r.terminal_code.replace(/_/g," ")} - NOTIFICACIONES LOGSTICA
            </p>
        </div>

        <!-- Title -->
        <h2 style="margin: 0 0 24px 0; color: #1e293b; font-size: 24px; font-weight: 700; text-align: center;">
            Solicitud SRL - ${r.terminal_code.replace(/_/g," ")} - ${r.srl_request_buses.length} Bus${r.srl_request_buses.length!==1?"es":""}
        </h2>

        <!-- Summary -->
        <div style="background: #fff7ed; border: 2px solid #fed7aa; padding: 16px; border-radius: 8px; margin-bottom: 24px;">
            <p style="margin: 0; color: #9a3412; font-weight: 600;">
                Estimados, favor gestionar visita tcnica para Buses detallados.
            </p>
        </div>

        <!-- Info Grid -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 24px; background: #f8fafc; padding: 16px; border-radius: 8px;">
            <div>
                <p style="margin: 0 0 4px 0; color: #64748b; font-size: 12px; font-weight: 600; text-transform: uppercase;">Terminal</p>
                <p style="margin: 0; color: #1e293b; font-size: 16px; font-weight: 700;">${r.terminal_code.replace(/_/g," ")}</p>
            </div>
            <div>
                <p style="margin: 0 0 4px 0; color: #64748b; font-size: 12px; font-weight: 600; text-transform: uppercase;">Criticidad</p>
                <p style="margin: 0; color: ${r.criticality==="ALTA"?"#dc2626":r.criticality==="MEDIA"?"#f59e0b":"#64748b"}; font-size: 16px; font-weight: 700;">${r.criticality}</p>
            </div>
            <div>
                <p style="margin: 0 0 4px 0; color: #64748b; font-size: 12px; font-weight: 600; text-transform: uppercase;">Fecha Solicitud</p>
                <p style="margin: 0; color: #1e293b; font-size: 14px;">${new Date(r.created_at).toLocaleString("es-CL",{dateStyle:"long",timeStyle:"short"})}</p>
            </div>
            <div>
                <p style="margin: 0 0 4px 0; color: #64748b; font-size: 12px; font-weight: 600; text-transform: uppercase;">ID Solicitud</p>
                <p style="margin: 0; color: #1e293b; font-family: monospace; font-size: 14px;">#${r.id.slice(0,8)}</p>
            </div>
        </div>

        <!-- Buses Section -->
        <h3 style="margin: 0 0 16px 0; color: #1e293b; font-size: 20px; font-weight: 700; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px;">
            Buses Afectados (${r.srl_request_buses.length})
        </h3>
        ${s}

        <!-- Footer -->
        <div style="margin-top: 32px; padding-top: 24px; border-top: 2px solid #e2e8f0; text-align: center;">
            <p style="margin: 0 0 8px 0; color: #94a3b8; font-size: 12px;">
                ${new Date().toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}
            </p>
            <p style="margin: 0; color: #cbd5e1; font-size: 11px;">
                 ${new Date().getFullYear()} Asiss - Operaciones y Logstica
            </p>
        </div>
    </div>
</body>
</html>
    `,c={audience:"manual",manualRecipients:a.recipients.split(",").map(u=>u.trim()).filter(Boolean),subject:`Solicitud SRL - ${r.terminal_code.replace(/_/g," ")} - ${r.srl_request_buses.length} Bus${r.srl_request_buses.length!==1?"es":""}`,body:l};return a.cc_emails&&(c.cc=a.cc_emails.split(",").map(u=>u.trim()).filter(Boolean)),await oo.sendEmail(c)}const lFe=Object.freeze(Object.defineProperty({__proto__:null,createSrlRequest:hW,fetchBusImages:bT,fetchSrlEmailSettings:_T,fetchSrlRequests:fW,sendSrlEmailNotification:gW,updateSrlEmailSettings:mW,updateSrlRequest:pW,uploadBusImage:wT,uploadTechnicianDocument:oFe},Symbol.toStringTag,{value:"Module"})),Wo={all:["srl"],requests:e=>[...Wo.all,"requests",e],request:e=>[...Wo.all,"request",e],busImages:e=>[...Wo.all,"busImages",e],settings:()=>[...Wo.all,"settings"]},qp=e=>Mt({queryKey:Wo.requests(e),queryFn:()=>fW(e)}),vW=e=>Mt({queryKey:Wo.busImages(e),queryFn:()=>bT(e),enabled:!!e}),cFe=()=>Mt({queryKey:Wo.settings(),queryFn:_T}),uFe=()=>{const e=St();return Et({mutationFn:({request:t,buses:r})=>hW(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:Wo.requests()})}})},NT=()=>{const e=St();return Et({mutationFn:({id:t,updates:r})=>pW(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:Wo.requests()})}})},dFe=()=>{const e=St();return Et({mutationFn:({busId:t,file:r})=>wT(t,r),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:Wo.busImages(r.busId)})}})},fFe=()=>{const e=St();return Et({mutationFn:t=>mW(t),onSuccess:()=>{e.invalidateQueries({queryKey:Wo.settings()})}})},hFe=({isOpen:e,onClose:t,requestId:r})=>{var x,y,v;const{data:n}=qp({id:r,terminal:"ALL",status:"TODOS",criticality:"TODAS",search:""}),a=n==null?void 0:n[0],i=NT(),[s,l]=D.useState(""),[c,u]=D.useState(""),[d,f]=D.useState("");if(!e||!a)return null;const p=b=>{const N={CREADA:"bg-blue-100 text-blue-700 border-blue-200",ENVIADA:"bg-sky-100 text-sky-700 border-sky-200",PROGRAMADA:"bg-indigo-100 text-indigo-700 border-indigo-200",EN_REVISION:"bg-amber-100 text-amber-700 border-amber-200",REPARADA:"bg-emerald-100 text-emerald-700 border-emerald-200",NO_REPARADA:"bg-red-100 text-red-700 border-red-200",REAGENDADA:"bg-orange-100 text-orange-700 border-orange-200",CERRADA:"bg-slate-100 text-slate-700 border-slate-200"};return N[b]||N.CREADA},h=b=>({BAJA:"bg-slate-100 text-slate-700",MEDIA:"bg-amber-100 text-amber-700",ALTA:"bg-red-500 text-white"})[b],g=async()=>{try{await i.mutateAsync({id:r,updates:{status:"EN_REVISION",technician_name:s}})}catch(b){console.error(b)}},m=async b=>{try{await i.mutateAsync({id:r,updates:{status:b,technician_name:s,technician_message:c,result:d||void 0,closed_at:b==="REPARADA"?new Date().toISOString():null}})}catch(N){console.error(N)}};return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center p-4 overflow-y-auto animate-in fade-in duration-200",children:[o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),o.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-6xl w-full my-8 animate-in zoom-in-95 duration-300",children:[o.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 px-8 py-6 rounded-t-2xl",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-xl flex items-center justify-center",children:o.jsx(Z,{name:"file-text",size:24,className:"text-white"})}),o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold text-white",children:["Solicitud SRL #",a.id.substring(0,8)]}),o.jsx("p",{className:"text-slate-300 text-sm",children:a.terminal_code.replace(/_/g," ")})]})]}),o.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[o.jsx("span",{className:`px-4 py-1.5 rounded-full text-sm font-bold border ${p(a.status)}`,children:a.status}),o.jsx("span",{className:`px-4 py-1.5 rounded-full text-sm font-bold ${h(a.criticality)}`,children:a.criticality}),a.applus&&o.jsx("span",{className:"px-4 py-1.5 rounded-full bg-purple-500 text-white text-sm font-bold",children:"APPLUS"})]})]}),o.jsx("button",{onClick:t,className:"w-10 h-10 flex items-center justify-center rounded-lg hover:bg-white/10 text-white/60 hover:text-white transition-colors",children:o.jsx(Z,{name:"x",size:24})})]})}),o.jsxs("div",{className:"p-8 space-y-8 max-h-[calc(100vh-250px)] overflow-y-auto",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsx(sy,{icon:"calendar",label:"Creacin",value:new Date(a.created_at).toLocaleDateString("es-CL")}),o.jsx(sy,{icon:"user",label:"Creado por",value:a.created_by}),o.jsx(sy,{icon:"clock",label:"Fecha Requerida",value:a.required_date||"No especificada"}),o.jsx(sy,{icon:"truck",label:"Buses",value:`${((x=a.srl_request_buses)==null?void 0:x.length)||0}`})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[o.jsx(Z,{name:"truck",size:20,className:"text-blue-600"}),"Flota Afectada (",((y=a.srl_request_buses)==null?void 0:y.length)||0," Buses)"]}),o.jsx("div",{className:"space-y-4",children:(v=a.srl_request_buses)==null?void 0:v.map(b=>o.jsx(pFe,{bus:b},b.id))})]}),(a.status==="REPARADA"||a.status==="NO_REPARADA"||a.status==="REAGENDADA"||a.status==="CERRADA")&&a.technician_name&&o.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl p-6 border-2 border-slate-200",children:[o.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[o.jsx(Z,{name:"wrench",size:20,className:"text-slate-700"}),"Informacin del Tcnico"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:[o.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"Tcnico Asignado"}),o.jsx("p",{className:"text-sm font-semibold text-slate-900",children:a.technician_name})]}),a.technician_visit_at&&o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:[o.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"Fecha de Visita"}),o.jsx("p",{className:"text-sm font-semibold text-slate-900",children:new Date(a.technician_visit_at).toLocaleString("es-CL",{dateStyle:"short",timeStyle:"short"})})]}),a.result&&o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:[o.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"Resultado"}),o.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-bold ${a.result==="OPERATIVO"?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:a.result})]}),a.closed_at&&o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:[o.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"Fecha de Cierre"}),o.jsx("p",{className:"text-sm font-semibold text-slate-900",children:new Date(a.closed_at).toLocaleString("es-CL",{dateStyle:"short",timeStyle:"short"})})]})]}),a.technician_message&&o.jsxs("div",{className:"mt-4 bg-white rounded-lg p-4 border border-slate-200",children:[o.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-2",children:"Observaciones del Tcnico"}),o.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:a.technician_message})]}),a.technician_document_url&&o.jsxs("div",{className:"mt-4 bg-white rounded-lg p-4 border border-slate-200",children:[o.jsxs("p",{className:"text-xs font-bold text-slate-500 uppercase mb-3 flex items-center gap-2",children:[o.jsx(Z,{name:"file-text",size:16}),"Documento Tcnico"]}),o.jsx("a",{href:a.technician_document_url,target:"_blank",rel:"noopener noreferrer",className:"block relative group",children:a.technician_document_url.match(/\.(jpg|jpeg|png|gif|webp)$/i)?o.jsxs("div",{className:"relative rounded-lg overflow-hidden border-2 border-slate-200 hover:border-blue-400 transition-all",children:[o.jsx("img",{src:a.technician_document_url,alt:"Documento Tcnico",className:"w-full max-w-md mx-auto object-contain group-hover:scale-105 transition-transform duration-300"}),o.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-all flex items-center justify-center",children:o.jsx(Z,{name:"search",size:32,className:"text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}):o.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-blue-50 rounded-lg border-2 border-blue-200 hover:bg-blue-100 transition-colors",children:[o.jsx(Z,{name:"file",size:24,className:"text-blue-600"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-semibold text-blue-900",children:"Ver Documento PDF"}),o.jsx("p",{className:"text-xs text-blue-600",children:"Click para abrir"})]}),o.jsx(Z,{name:"chevron-right",size:18,className:"text-blue-600"})]})})]})]}),(a.status==="EN_REVISION"||a.status==="CREADA"||a.status==="PROGRAMADA")&&o.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl p-6 border border-slate-200",children:[o.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[o.jsx(Z,{name:"wrench",size:20,className:"text-slate-700"}),"Panel de Tcnico"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[o.jsx("input",{type:"text",placeholder:"Nombre del tcnico",className:"px-4 py-2.5 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:s,onChange:b=>l(b.target.value)}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>f("OPERATIVO"),className:`flex-1 px-4 py-2.5 rounded-lg font-semibold border-2 transition-all ${d==="OPERATIVO"?"bg-emerald-500 border-emerald-600 text-white":"bg-white border-slate-300 text-slate-700"}`,children:"OPERATIVO"}),o.jsx("button",{onClick:()=>f("NO_OPERATIVO"),className:`flex-1 px-4 py-2.5 rounded-lg font-semibold border-2 transition-all ${d==="NO_OPERATIVO"?"bg-red-500 border-red-600 text-white":"bg-white border-slate-300 text-slate-700"}`,children:"NO OPERATIVO"})]})]}),o.jsx("textarea",{rows:3,placeholder:"Observaciones tcnicas...",className:"w-full px-4 py-3 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none resize-none mb-4",value:c,onChange:b=>u(b.target.value)}),o.jsxs("div",{className:"flex gap-3",children:[a.status!=="EN_REVISION"&&o.jsxs("button",{onClick:g,className:"flex-1 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl flex items-center justify-center gap-2",children:[o.jsx(Z,{name:"check",size:20}),"Iniciar Revisin"]}),a.status==="EN_REVISION"&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>m("REPARADA"),className:"flex-1 px-6 py-3 bg-emerald-600 hover:bg-emerald-700 text-white font-bold rounded-xl flex items-center justify-center gap-2",children:[o.jsx(Z,{name:"check-circle",size:20}),"REPARADA"]}),o.jsxs("button",{onClick:()=>m("NO_REPARADA"),className:"flex-1 px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-xl flex items-center justify-center gap-2",children:[o.jsx(Z,{name:"x-circle",size:20}),"NO REPARADA"]})]})]})]})]})]})]})},sy=({icon:e,label:t,value:r})=>o.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Z,{name:e,size:16,className:"text-slate-400"}),o.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide",children:t})]}),o.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:r})]}),pFe=({bus:e})=>{const{data:t=[]}=vW(e.id);return o.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-xl p-6 hover:border-blue-300 transition-all",children:[o.jsx("div",{className:"flex items-start justify-between mb-4",children:o.jsxs("div",{children:[o.jsx("h4",{className:"text-xl font-black text-slate-900 mb-1",children:e.bus_ppu}),o.jsx("p",{className:"text-sm text-slate-600",children:e.observation||e.problem_type||"Sin detalles"}),e.applus&&o.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-purple-100 text-purple-700 text-xs font-bold rounded-full",children:"Requiere APPLUS"})]})}),t.length>0?o.jsxs("div",{children:[o.jsxs("h5",{className:"text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[o.jsx(Z,{name:"image",size:16}),"Evidencia Fotogrfica (",t.length,")"]}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:t.map(r=>o.jsxs("a",{href:r.publicUrl,target:"_blank",rel:"noopener noreferrer",className:"group relative aspect-square rounded-lg overflow-hidden border-2 border-slate-200 hover:border-blue-400 transition-all",children:[o.jsx("img",{src:r.publicUrl,alt:"Evidencia",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),o.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-all flex items-center justify-center",children:o.jsx(Z,{name:"search",size:24,className:"text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]},r.id))})]}):o.jsxs("div",{className:"text-center py-8 bg-slate-50 rounded-lg border-2 border-dashed border-slate-300",children:[o.jsx(Z,{name:"image",size:32,className:"text-slate-300 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-slate-500",children:"Sin evidencia fotogrfica"})]})]})},mFe=({onCreate:e,onView:t})=>{const[r,n]=D.useState({terminal:"ALL",status:"TODOS",criticality:"TODAS",search:""}),[a,i]=D.useState(null),{data:s=[],isLoading:l}=qp(r),c=d=>{const f={CREADA:{bg:"from-blue-50 to-blue-100",text:"text-blue-700",border:"border-blue-200",icon:"file-plus"},ENVIADA:{bg:"from-sky-50 to-sky-100",text:"text-sky-700",border:"border-sky-200",icon:"send"},PROGRAMADA:{bg:"from-indigo-50 to-indigo-100",text:"text-indigo-700",border:"border-indigo-200",icon:"calendar"},EN_REVISION:{bg:"from-amber-50 to-amber-100",text:"text-amber-700",border:"border-amber-200",icon:"eye"},REPARADA:{bg:"from-teal-50 to-teal-100",text:"text-teal-700",border:"border-teal-200",icon:"check-circle"},NO_REPARADA:{bg:"from-red-50 to-red-100",text:"text-red-700",border:"border-red-200",icon:"x-circle"},REAGENDADA:{bg:"from-orange-50 to-orange-100",text:"text-orange-700",border:"border-orange-200",icon:"clock"},CERRADA:{bg:"from-slate-100 to-slate-200",text:"text-slate-600",border:"border-slate-300",icon:"archive"}},p=f[d]||f.CREADA;return o.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-bold border bg-gradient-to-r ${p.bg} ${p.text} ${p.border} uppercase tracking-wider shadow-sm`,children:[o.jsx(Z,{name:p.icon,size:12}),d.replace("_"," ")]})},u=d=>{const p={BAJA:{bg:"bg-slate-100",text:"text-slate-600",icon:"minus"},MEDIA:{bg:"bg-amber-100",text:"text-amber-700",icon:"alert-circle"},ALTA:{bg:"bg-gradient-to-r from-red-500 to-red-600",text:"text-white",icon:"alert-triangle"}}[d];return o.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-lg text-xs font-bold ${p.bg} ${p.text} shadow-sm`,children:[o.jsx(Z,{name:p.icon,size:12}),d]})};return o.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 justify-between items-start lg:items-center bg-gradient-to-br from-white to-slate-50 p-5 rounded-2xl shadow-lg border border-slate-200/60",children:[o.jsxs("div",{className:"flex flex-wrap gap-3 w-full lg:w-auto",children:[o.jsxs("div",{className:"relative flex-1 lg:flex-none min-w-[240px]",children:[o.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:o.jsx(Z,{name:"search",size:18})}),o.jsx("input",{placeholder:"Buscar PPU, ID...",className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 outline-none transition-all shadow-sm hover:shadow-md",value:r.search,onChange:d=>n({...r,search:d.target.value})})]}),o.jsxs("select",{className:"px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-400 outline-none text-slate-700 font-semibold shadow-sm hover:shadow-md transition-all cursor-pointer",value:r.terminal,onChange:d=>n({...r,terminal:d.target.value}),children:[o.jsx("option",{value:"ALL",children:"Todos los Terminales"}),o.jsx("option",{value:"EL_ROBLE",children:"El Roble"}),o.jsx("option",{value:"LA_REINA",children:"La Reina"}),o.jsx("option",{value:"MARIA_ANGELICA",children:"Mara Anglica"}),o.jsx("option",{value:"EL_DESCANSO",children:"El Descanso"})]}),o.jsxs("select",{className:"px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-400 outline-none text-slate-700 font-semibold shadow-sm hover:shadow-md transition-all cursor-pointer",value:r.status,onChange:d=>n({...r,status:d.target.value}),children:[o.jsx("option",{value:"TODOS",children:"Todos los Estados"}),o.jsx("option",{value:"CREADA",children:"Creada"}),o.jsx("option",{value:"ENVIADA",children:"Enviada"}),o.jsx("option",{value:"PROGRAMADA",children:"Programada"}),o.jsx("option",{value:"REPARADA",children:"Reparada"}),o.jsx("option",{value:"CERRADA",children:"Cerrada"})]})]}),o.jsxs("button",{onClick:e,className:"w-full lg:w-auto px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold rounded-xl shadow-lg shadow-blue-500/30 flex items-center justify-center gap-2 transition-all active:scale-95 hover:shadow-xl hover:shadow-blue-500/40",children:[o.jsx(Z,{name:"plus",size:20}),o.jsx("span",{children:"Nueva Solicitud"})]})]}),o.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200/60 overflow-hidden",children:l?o.jsxs("div",{className:"p-16 text-center",children:[o.jsx("div",{className:"inline-block animate-spin text-blue-600 mb-4",children:o.jsx(Z,{name:"loader",size:40})}),o.jsx("p",{className:"text-slate-500 font-semibold",children:"Cargando solicitudes..."})]}):s.length===0?o.jsxs("div",{className:"p-20 text-center",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-slate-100 to-slate-200 rounded-full mb-5 shadow-lg",children:o.jsx(Z,{name:"inbox",size:40,className:"text-slate-300"})}),o.jsx("h3",{className:"text-xl font-black text-slate-900",children:"No hay solicitudes"}),o.jsx("p",{className:"text-slate-500 mt-2 max-w-md mx-auto",children:"No se encontraron registros. Cree una nueva solicitud o ajuste los filtros."})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gradient-to-r from-slate-50 to-slate-100 border-b-2 border-slate-200",children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-600 uppercase tracking-wider",children:"Terminal / ID"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-600 uppercase tracking-wider",children:"Estado"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-600 uppercase tracking-wider",children:"Criticidad"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-600 uppercase tracking-wider",children:"Buses"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-600 uppercase tracking-wider",children:"Creacin"}),o.jsx("th",{className:"px-6 py-4 text-right text-xs font-black text-slate-600 uppercase tracking-wider",children:"Accin"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:s.map(d=>{var f,p,h,g;return o.jsxs("tr",{onClick:()=>i(d.id),className:"hover:bg-gradient-to-r hover:from-blue-50/50 hover:to-indigo-50/50 transition-all duration-200 cursor-pointer group",children:[o.jsx("td",{className:"px-6 py-5",children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"font-black text-sm text-slate-900",children:d.terminal_code.replace("_"," ")}),o.jsxs("span",{className:"font-mono text-xs text-slate-400",children:["#",d.id.slice(0,8)]})]})}),o.jsx("td",{className:"px-6 py-5",children:c(d.status)}),o.jsx("td",{className:"px-6 py-5",children:u(d.criticality)}),o.jsx("td",{className:"px-6 py-5",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex -space-x-2",children:[(f=d.srl_request_buses)==null?void 0:f.slice(0,3).map((m,x)=>o.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 border-2 border-white flex items-center justify-center text-[10px] font-black text-white shadow-md",title:m.bus_ppu,children:m.bus_ppu.slice(0,2)},x)),(((p=d.srl_request_buses)==null?void 0:p.length)||0)>3&&o.jsxs("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-slate-400 to-slate-600 border-2 border-white flex items-center justify-center text-[10px] font-black text-white shadow-md",children:["+",(((h=d.srl_request_buses)==null?void 0:h.length)||0)-3]})]}),((g=d.srl_request_buses)==null?void 0:g.length)===0&&o.jsx("span",{className:"text-slate-400 text-xs italic",children:"Sin buses"})]})}),o.jsx("td",{className:"px-6 py-5 text-sm text-slate-600 font-medium",children:new Intl.DateTimeFormat("es-CL",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}).format(new Date(d.created_at))}),o.jsx("td",{className:"px-6 py-5 text-right",children:o.jsx("button",{className:"p-2.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all opacity-0 group-hover:opacity-100 shadow-sm hover:shadow-md",children:o.jsx(Z,{name:"chevron-right",size:20})})})]},d.id)})})]})})}),a&&o.jsx(hFe,{isOpen:!!a,onClose:()=>i(null),requestId:a})]})},gFe=({busId:e,busPpu:t,problem:r,status:n,requestId:a})=>{const{data:i=[]}=vW(e),s=dFe(),[l,c]=D.useState(!1),u=async d=>{var p;const f=(p=d.target.files)==null?void 0:p[0];if(f){c(!0);try{await s.mutateAsync({busId:e,file:f})}catch(h){console.error("Upload failed",h),alert("Error al subir imagen")}finally{c(!1)}}};return o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-white to-slate-50 rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 border border-slate-200/60 group",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500"}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsx("div",{className:"flex justify-between items-start",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 text-white font-bold shadow-lg",children:o.jsx(Z,{name:"truck",size:20})}),o.jsxs("div",{children:[o.jsx("span",{className:"font-black text-xl text-slate-900 tracking-tight",children:t}),o.jsxs("span",{className:"ml-2 px-2.5 py-0.5 bg-slate-100 border border-slate-200 rounded-md text-xs text-slate-500 font-mono shadow-sm",children:["ID: ",e.slice(0,8)]})]})]}),o.jsx("p",{className:"text-sm text-slate-600 leading-relaxed pl-13",children:r})]})}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2",children:[o.jsx(Z,{name:"image",size:14,className:"text-slate-400"}),"Evidencia Fotogrfica"]}),o.jsxs("span",{className:"text-xs text-slate-400 font-medium",children:[i.length," foto",i.length!==1?"s":""]})]}),o.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:[i.map(d=>o.jsxs("div",{className:"relative aspect-square bg-slate-100 rounded-xl overflow-hidden group/img border border-slate-200 shadow-sm hover:shadow-lg transition-all duration-300",children:[o.jsx("img",{src:d.publicUrl,alt:"Evidencia",className:"w-full h-full object-cover transition-transform duration-300 group-hover/img:scale-110"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent opacity-0 group-hover/img:opacity-100 transition-opacity flex items-end justify-center pb-2",children:o.jsx("button",{className:"text-white/90 hover:text-red-400 p-2 bg-black/30 rounded-lg backdrop-blur-sm transition-colors",onClick:()=>{},children:o.jsx(Z,{name:"trash",size:14})})})]},d.id)),o.jsxs("label",{className:`
                            relative flex flex-col items-center justify-center aspect-square rounded-xl border-2 border-dashed transition-all duration-300 cursor-pointer overflow-hidden
                            ${l?"border-blue-400 bg-blue-50 opacity-75 pointer-events-none":"border-slate-300 hover:border-blue-500 hover:bg-gradient-to-br hover:from-blue-50 hover:to-indigo-50 group/upload"}
                         `,children:[o.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:u,disabled:l}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[o.jsx("div",{className:`
                                    w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300
                                    ${l?"bg-blue-500 text-white":"bg-slate-100 text-slate-400 group-hover/upload:bg-blue-500 group-hover/upload:text-white group-hover/upload:scale-110"}
                                `,children:o.jsx(Z,{name:l?"loader":"plus",className:l?"animate-spin":"",size:20})}),o.jsx("span",{className:`
                                    text-[10px] font-bold mt-2 transition-colors
                                    ${l?"text-blue-600":"text-slate-500 group-hover/upload:text-blue-600"}
                                `,children:l?"Subiendo...":"Subir"})]}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400/0 to-indigo-400/0 group-hover/upload:from-blue-400/10 group-hover/upload:to-indigo-400/10 transition-all duration-500"})]})]})]})]})]})},vFe=({requestId:e,onSuccess:t})=>{const{session:r}=_r(),n=uFe();NT();const a=!!e,{data:i}=qp(a?{id:e,terminal:"ALL",status:"TODOS",criticality:"TODAS",search:""}:void 0),s=i==null?void 0:i[0],[l,c]=D.useState({terminal_code:(r==null?void 0:r.terminalCode)||"EL_ROBLE",criticality:"BAJA",applus:!1,required_date:""}),[u,d]=D.useState([{ppu:"",problem:"",images:[]}]);D.useEffect(()=>{a&&s&&(c({terminal_code:s.terminal_code,criticality:s.criticality,applus:s.applus,required_date:s.required_date||""}),d([]))},[a,s]);const f=()=>{d([...u,{ppu:"",problem:"",images:[]}])},p=y=>{d(u.filter((v,b)=>b!==y))},h=(y,v,b)=>{const N=[...u];N[y]={...N[y],[v]:b},d(N)},g=(y,v)=>{if(!v)return;const b=[...u],N=Array.from(v);b[y].images=[...b[y].images,...N],d(b)},m=(y,v)=>{const b=[...u];b[y].images=b[y].images.filter((N,_)=>_!==v),d(b)},x=async y=>{y.preventDefault();const v=u.filter(b=>b.ppu.trim()!=="");if(!a&&v.length===0){alert("Debe agregar al menos un bus");return}try{a?(v.length>0&&alert("Por ahora solo se pueden editar los detalles de la solicitud, no agregar nuevos buses."),t()):(await n.mutateAsync({request:{...l,required_date:l.required_date||null,status:"CREADA",created_by:(r==null?void 0:r.supervisorName)||"unknown",created_at:new Date().toISOString()},buses:v.map(b=>({ppu:b.ppu.toUpperCase(),problem:b.problem||"GENERAL",images:b.images}))}),t())}catch(b){console.error("Error:",b),alert("Error al guardar")}};return o.jsxs("form",{onSubmit:x,className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[o.jsxs("section",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm relative overflow-hidden group hover:shadow-md transition-shadow",children:[o.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-blue-500"}),o.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[o.jsx(Z,{name:"file-text",size:20,className:"text-blue-500"}),"Informacin General"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-2",children:"Terminal"}),o.jsxs("select",{className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-slate-700 font-medium transition-all appearance-none",value:l.terminal_code,onChange:y=>c({...l,terminal_code:y.target.value}),children:[o.jsx("option",{value:"EL_ROBLE",children:"El Roble"}),o.jsx("option",{value:"LA_REINA",children:"La Reina"}),o.jsx("option",{value:"MARIA_ANGELICA",children:"Mara Anglica"}),o.jsx("option",{value:"EL_DESCANSO",children:"El Descanso"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-2",children:"Nivel de Criticidad"}),o.jsxs("div",{className:"relative",children:[o.jsxs("select",{className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-slate-700 font-medium transition-all appearance-none",value:l.criticality,onChange:y=>c({...l,criticality:y.target.value}),children:[o.jsx("option",{value:"BAJA",children:"Baja (Normal)"}),o.jsx("option",{value:"MEDIA",children:"Media (Urgente)"}),o.jsx("option",{value:"ALTA",children:"Alta (Crtica)"})]}),o.jsx("div",{className:"absolute right-3 top-3 pointer-events-none text-slate-400",children:o.jsx(Z,{name:"chevron-down",size:16})})]})]}),o.jsxs("div",{className:"md:col-span-2 flex flex-col md:flex-row md:items-center gap-6 pt-2",children:[o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group p-2 hover:bg-slate-50 rounded-lg transition-colors",children:[o.jsx("div",{className:`
                                w-5 h-5 rounded border flex items-center justify-center transition-all duration-200
                                ${l.applus?"bg-blue-600 border-blue-600 scale-110":"bg-white border-slate-400 group-hover:border-blue-500"}
                             `,children:l.applus&&o.jsx(Z,{name:"check",size:14,className:"text-white"})}),o.jsx("input",{type:"checkbox",className:"hidden",checked:l.applus,onChange:y=>c({...l,applus:y.target.checked})}),o.jsx("span",{className:"text-sm font-medium text-slate-700 group-hover:text-blue-600 transition-colors",children:"Requiere Certificacin APPLUS"})]}),o.jsxs("div",{className:"flex-1 max-w-xs ml-auto",children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1",children:"Fecha Requerida (Opcional)"}),o.jsx("input",{type:"date",className:"w-full px-3 py-2 bg-slate-50 border border-slate-300 rounded-lg text-sm text-slate-700 focus:ring-2 focus:ring-blue-500 outline-none",value:l.required_date,onChange:y=>c({...l,required_date:y.target.value})})]})]})]})]}),o.jsxs("section",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm relative overflow-hidden hover:shadow-md transition-shadow",children:[o.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-amber-500"}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[o.jsx(Z,{name:"truck",size:20,className:"text-amber-500"}),"Flota Afectada"]}),!a&&o.jsxs("button",{type:"button",onClick:f,className:"px-3 py-1.5 bg-blue-50 text-blue-700 hover:bg-blue-100 rounded-lg text-sm font-semibold transition-colors flex items-center gap-2 border border-blue-100",children:[o.jsx(Z,{name:"plus",size:16})," Agregar Bus"]})]}),a&&(s==null?void 0:s.srl_request_buses)&&o.jsx("div",{className:"space-y-4 mb-6",children:s.srl_request_buses.map(y=>o.jsx(gFe,{busId:y.id,busPpu:y.bus_ppu,problem:y.problem_type||"Sin problema especificado",status:s.status,requestId:s.id},y.id))}),o.jsxs("div",{className:"space-y-4",children:[u.map((y,v)=>o.jsxs("div",{className:"p-5 bg-slate-50/50 rounded-xl border border-slate-200 group hover:border-blue-300 hover:bg-white transition-all shadow-sm",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start mb-4",children:[o.jsxs("div",{className:"w-full md:w-1/3 max-w-[160px]",children:[o.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1 block",children:"PPU Bus"}),o.jsx("input",{placeholder:"FL-XP-22",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 uppercase font-mono font-bold text-slate-800 outline-none text-base",value:y.ppu,onChange:b=>h(v,"ppu",b.target.value),autoFocus:v===u.length-1})]}),o.jsxs("div",{className:"flex-1 w-full",children:[o.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1 block",children:"Descripcin del Problema"}),o.jsx("input",{placeholder:"Detalle la falla (ej: Aire acondicionado no enfra)",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 text-slate-700 outline-none",value:y.problem,onChange:b=>h(v,"problem",b.target.value)})]}),o.jsx("button",{type:"button",onClick:()=>p(v),className:"md:mt-6 p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors self-end md:self-start",title:"Eliminar bus",children:o.jsx(Z,{name:"trash",size:18})})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-3 pt-3 border-t border-slate-200/60",children:[o.jsxs("label",{className:"cursor-pointer flex items-center gap-2 px-3 py-1.5 bg-white border border-slate-300 rounded-lg shadow-sm hover:bg-slate-50 hover:text-blue-600 hover:border-blue-300 transition-all text-xs font-semibold text-slate-600 group/upload",children:[o.jsx(Z,{name:"image",size:16,className:"text-slate-400 group-hover/upload:text-blue-500 transition-colors"}),"Adjuntar Fotos",o.jsx("input",{type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:b=>g(v,b.target.files)})]}),y.images.map((b,N)=>o.jsxs("div",{className:"relative group/img animate-in zoom-in duration-200",children:[o.jsxs("div",{className:"h-8 pl-2 pr-3 bg-white border border-slate-200 rounded-lg flex items-center gap-2 text-xs text-slate-600 shadow-sm max-w-[180px]",children:[o.jsx(Z,{name:"file",size:12,className:"text-slate-400"}),o.jsx("span",{className:"truncate max-w-[120px]",children:b.name})]}),o.jsx("button",{type:"button",onClick:()=>m(v,N),className:"absolute -top-1.5 -right-1.5 bg-red-500 text-white rounded-full p-0.5 shadow-md flex items-center justify-center opacity-0 group-hover/img:opacity-100 transition-all scale-75 group-hover/img:scale-100",title:"Eliminar foto",children:o.jsx(Z,{name:"x",size:10})})]},N)),y.images.length===0&&o.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin fotos adjuntas"})]})]},v)),u.length===0&&!a&&o.jsxs("div",{onClick:f,className:"border-2 border-dashed border-slate-300 rounded-xl p-8 text-center cursor-pointer hover:border-blue-400 hover:bg-blue-50/50 transition-all group",children:[o.jsx("div",{className:"w-14 h-14 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-3 group-hover:bg-blue-100 transition-colors",children:o.jsx(Z,{name:"plus",className:"text-slate-400 group-hover:text-blue-500",size:28})}),o.jsx("p",{className:"font-bold text-slate-700",children:"Agregar Primer Bus"}),o.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Haga clic aqu para comenzar a detallar la flota afectada"})]})]})]}),o.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 mt-4 z-10 sticky bottom-0 bg-white/95 backdrop-blur py-4 border-t border-slate-100",children:[o.jsx("button",{type:"button",onClick:t,className:"px-5 py-2.5 text-slate-600 hover:text-slate-900 font-semibold text-sm transition-colors",children:"Cancelar"}),o.jsxs("button",{type:"submit",disabled:n.isPending,className:"px-8 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg shadow-lg shadow-blue-500/30 font-bold text-sm flex items-center gap-2 transform active:scale-95 transition-all disabled:opacity-70 disabled:shadow-none",children:[n.isPending?o.jsx(Z,{name:"loader",className:"animate-spin",size:18}):e?o.jsx(Z,{name:"save",size:18}):o.jsx(Z,{name:"send",size:18}),e?"Guardar Cambios":"Generar Solicitud"]})]})]})},xFe=({isOpen:e,onClose:t,requestId:r,currentStatus:n,technicianName:a,technicianMessage:i,technicianVisitAt:s,result:l,nextVisitAt:c})=>{const u=NT(),[d,f]=D.useState(a||""),[p,h]=D.useState(i||""),[g,m]=D.useState(s?new Date(s).toISOString().slice(0,16):""),[x,y]=D.useState(l||""),[v,b]=D.useState(c?new Date(c).toISOString().slice(0,16):""),[N,_]=D.useState(null),E=async()=>{if(!d.trim()){alert("Debe ingresar el nombre del tcnico");return}try{await u.mutateAsync({id:r,updates:{status:"EN_REVISION",technician_name:d,technician_visit_at:g?new Date(g).toISOString():null}}),alert("Revisin iniciada correctamente"),t()}catch(T){console.error(T),alert("Error al iniciar revisin")}},j=async T=>{if(!x){alert("Debe seleccionar un resultado (Operativo/No Operativo)");return}try{let P;if(N){const{uploadTechnicianDocument:O}=await ug(async()=>{const{uploadTechnicianDocument:R}=await Promise.resolve().then(()=>lFe);return{uploadTechnicianDocument:R}},void 0,import.meta.url);P=await O(r,N)}await u.mutateAsync({id:r,updates:{status:T,technician_name:d,technician_message:p,technician_visit_at:g?new Date(g).toISOString():null,result:x,next_visit_at:v?new Date(v).toISOString():null,closed_at:T==="REPARADA"?new Date().toISOString():null,technician_document_url:P||null}}),alert(`Solicitud marcada como ${T}`),t()}catch(P){console.error(P),alert("Error al completar revisin")}},A=async()=>{if(!v){alert("Debe seleccionar una fecha para reagendar");return}try{await u.mutateAsync({id:r,updates:{status:"REAGENDADA",technician_name:d,technician_message:p,next_visit_at:new Date(v).toISOString()}}),alert("Solicitud reagendada correctamente"),t()}catch(T){console.error(T),alert("Error al reagendar")}};return e?o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),o.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden animate-in zoom-in-95 duration-300",children:[o.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 px-6 py-5 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center",children:o.jsx(Z,{name:"wrench",size:20,className:"text-white"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-bold text-lg",children:"Panel de Tcnico"}),o.jsx("p",{className:"text-slate-300 text-sm",children:"Gestin de Revisin Tcnica"})]})]}),o.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-white/10 text-white/60 hover:text-white transition-colors",children:o.jsx(Z,{name:"x",size:20})})]}),o.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-80px)] space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Nombre del Tcnico"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:o.jsx(Z,{name:"user",size:18})}),o.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-slate-900",placeholder:"Ingrese nombre completo",value:d,onChange:T=>f(T.target.value)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Fecha y Hora de Visita"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:o.jsx(Z,{name:"calendar",size:18})}),o.jsx("input",{type:"datetime-local",className:"w-full pl-10 pr-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-slate-900",value:g,onChange:T=>m(T.target.value)})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Observaciones del Tcnico"}),o.jsx("textarea",{rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-slate-900 resize-none",placeholder:"Detalle la revisin tcnica, piezas reemplazadas, reparaciones realizadas...",value:p,onChange:T=>h(T.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Documento Tcnico (Informe de Revisin)"}),o.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6 hover:border-blue-400 transition-colors",children:[o.jsx("input",{type:"file",id:"tech-doc-upload",className:"hidden",accept:"image/*,application/pdf",onChange:T=>{var P;return _(((P=T.target.files)==null?void 0:P[0])||null)}}),o.jsxs("label",{htmlFor:"tech-doc-upload",className:"flex flex-col items-center cursor-pointer",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center mb-3",children:o.jsx(Z,{name:"upload",size:24,className:"text-blue-600"})}),N?o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-sm font-semibold text-slate-900 mb-1",children:N.name}),o.jsxs("p",{className:"text-xs text-slate-500",children:[(N.size/1024).toFixed(1)," KB"]})]}):o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-sm font-semibold text-slate-900 mb-1",children:"Subir documento"}),o.jsx("p",{className:"text-xs text-slate-500",children:"PDF o Imagen (Max 10MB)"})]})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Resultado de la Revisin"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("button",{onClick:()=>y("OPERATIVO"),className:`
                                    relative overflow-hidden p-4 rounded-xl border-2 transition-all duration-200 font-semibold text-sm flex items-center justify-center gap-2
                                    ${x==="OPERATIVO"?"bg-emerald-500 border-emerald-600 text-white shadow-lg shadow-emerald-500/30 scale-105":"bg-white border-slate-300 text-slate-700 hover:border-emerald-400 hover:bg-emerald-50"}
                                `,children:[o.jsx(Z,{name:"check-circle",size:20}),"OPERATIVO"]}),o.jsxs("button",{onClick:()=>y("NO_OPERATIVO"),className:`
                                    relative overflow-hidden p-4 rounded-xl border-2 transition-all duration-200 font-semibold text-sm flex items-center justify-center gap-2
                                    ${x==="NO_OPERATIVO"?"bg-red-500 border-red-600 text-white shadow-lg shadow-red-500/30 scale-105":"bg-white border-slate-300 text-slate-700 hover:border-red-400 hover:bg-red-50"}
                                `,children:[o.jsx(Z,{name:"x-circle",size:20}),"NO OPERATIVO"]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Prxima Visita (Opcional)"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:o.jsx(Z,{name:"clock",size:18})}),o.jsx("input",{type:"datetime-local",className:"w-full pl-10 pr-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-slate-900",value:v,onChange:T=>b(T.target.value)})]})]}),o.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-200",children:[n==="CREADA"||n==="ENVIADA"||n==="PROGRAMADA"?o.jsxs("button",{onClick:E,disabled:u.isPending,className:"w-full px-6 py-3.5 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-bold rounded-xl shadow-lg shadow-blue-500/30 flex items-center justify-center gap-2 transition-all active:scale-95 disabled:opacity-50",children:[o.jsx(Z,{name:"check",size:20}),"Iniciar Revisin Tcnica"]}):null,n==="EN_REVISION"?o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>j("REPARADA"),disabled:u.isPending,className:"w-full px-6 py-3.5 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white font-bold rounded-xl shadow-lg shadow-emerald-500/30 flex items-center justify-center gap-2 transition-all active:scale-95 disabled:opacity-50",children:[o.jsx(Z,{name:"check-circle",size:20}),"Completar como REPARADA"]}),o.jsxs("button",{onClick:()=>j("NO_REPARADA"),disabled:u.isPending,className:"w-full px-6 py-3.5 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-bold rounded-xl shadow-lg shadow-red-500/30 flex items-center justify-center gap-2 transition-all active:scale-95 disabled:opacity-50",children:[o.jsx(Z,{name:"x-circle",size:20}),"Marcar como NO REPARADA"]}),o.jsxs("button",{onClick:A,disabled:u.isPending,className:"w-full px-6 py-3.5 bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-700 hover:to-amber-800 text-white font-bold rounded-xl shadow-lg shadow-amber-500/30 flex items-center justify-center gap-2 transition-all active:scale-95 disabled:opacity-50",children:[o.jsx(Z,{name:"clock",size:20}),"Reagendar Visita Tcnica"]})]}):null]})]})]})]}):null},yFe=({isOpen:e,onClose:t,requestId:r})=>{const n=D.useRef(null),[a,i]=D.useState(!1),{data:s}=qp(r?{id:r,terminal:"ALL",status:"TODOS",criticality:"TODAS",search:""}:void 0),l=s==null?void 0:s[0];return D.useEffect(()=>{const c=u=>{u.key==="Escape"&&t()};return e&&window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[e,t]),e?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end overflow-hidden",role:"dialog","aria-modal":"true",children:[o.jsx("div",{className:"absolute inset-0 bg-slate-900/30 backdrop-blur-sm transition-opacity duration-300 animate-in fade-in",onClick:t}),o.jsxs("div",{ref:n,className:"relative w-full max-w-3xl bg-white shadow-2xl h-full flex flex-col animate-in slide-in-from-right duration-300",children:[o.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 flex items-center justify-between bg-white/90 backdrop-blur z-10 sticky top-0",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-slate-900",children:r?"Detalle de Solicitud":"Nueva Solicitud SRL"}),o.jsx("p",{className:"text-sm text-slate-500",children:r?`ID: #${r.substring(0,8)}`:"Complete los datos para generar un ticket"})]}),o.jsx("button",{onClick:t,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors",children:o.jsx(Z,{name:"x",size:24})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50 space-y-6",children:[o.jsx(vFe,{requestId:r,onSuccess:t}),r&&l&&o.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-700 to-slate-900 rounded-lg flex items-center justify-center",children:o.jsx(Z,{name:"wrench",size:20,className:"text-white"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-slate-900",children:"Gestin Tcnica"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Actualizar estado de revisin"})]})]}),o.jsx("div",{className:`px-3 py-1.5 rounded-full text-xs font-bold ${l.status==="EN_REVISION"?"bg-amber-100 text-amber-700":l.status==="REPARADA"?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"}`,children:l.status})]}),o.jsxs("button",{onClick:()=>i(!0),className:"w-full px-6 py-3.5 bg-gradient-to-r from-slate-700 to-slate-900 hover:from-slate-800 hover:to-black text-white font-bold rounded-xl shadow-lg shadow-slate-500/30 flex items-center justify-center gap-2 transition-all active:scale-95",children:[o.jsx(Z,{name:"wrench",size:20}),"Abrir Panel de Tcnico"]})]})]})]})]}),r&&l&&o.jsx(xFe,{isOpen:a,onClose:()=>i(!1),requestId:r,currentStatus:l.status,technicianName:l.technician_name||void 0,technicianMessage:l.technician_message||void 0,technicianVisitAt:l.technician_visit_at||void 0,result:l.result,nextVisitAt:l.next_visit_at||void 0})]}):null},bFe=()=>{const[e,t]=D.useState(new Date),r=e.getFullYear(),n=e.getMonth(),{data:a=[]}=qp(),i=(g,m)=>new Date(g,m+1,0).getDate(),s=(g,m)=>{const x=new Date(g,m,1).getDay();return x===0?6:x-1},l=i(r,n),c=s(r,n),u=[];for(let g=0;g<c;g++)u.push(null);for(let g=1;g<=l;g++)u.push(new Date(r,n,g));const d=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],f=()=>t(new Date(r,n-1,1)),p=()=>t(new Date(r,n+1,1)),h=g=>a.filter(m=>{var b;const x=g.toISOString().split("T")[0],y=m.created_at.split("T")[0],v=(b=m.technician_visit_at)==null?void 0:b.split("T")[0];return y===x||v===x});return o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex flex-col h-[calc(100vh-250px)]",children:[o.jsxs("div",{className:"p-4 border-b border-slate-200 flex justify-between items-center bg-slate-50",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 uppercase tracking-wide",children:[d[n]," ",r]}),o.jsxs("div",{className:"flex bg-white rounded-lg border border-slate-300 shadow-sm",children:[o.jsx("button",{onClick:f,className:"p-2 hover:bg-slate-100 rounded-l-lg border-r border-slate-200",children:o.jsx(Z,{name:"chevron-left",size:20})}),o.jsx("button",{onClick:()=>t(new Date),className:"px-4 text-sm font-medium hover:bg-slate-50 text-slate-600",children:"Hoy"}),o.jsx("button",{onClick:p,className:"p-2 hover:bg-slate-100 rounded-r-lg border-l border-slate-200",children:o.jsx(Z,{name:"chevron-right",size:20})})]})]}),o.jsxs("div",{className:"flex gap-4 text-xs font-medium",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"})," Solicitudes"]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"})," Visitas Tc."]})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col",children:[o.jsx("div",{className:"grid grid-cols-7 border-b border-slate-200 bg-slate-50",children:["Lun","Mar","Mi","Jue","Vie","Sb","Dom"].map(g=>o.jsx("div",{className:"py-2 text-center text-xs font-bold text-slate-500 uppercase",children:g},g))}),o.jsx("div",{className:"grid grid-cols-7 flex-1 auto-rows-fr",children:u.map((g,m)=>{if(!g)return o.jsx("div",{className:"bg-slate-50/50 border-r border-b border-slate-100"},`empty-${m}`);const x=h(g),y=new Date().toDateString()===g.toDateString();return o.jsxs("div",{className:`
                                border-r border-b border-slate-100 p-2 min-h-[100px] relative transition-colors hover:bg-slate-50
                                ${y?"bg-blue-50/30":""}
                            `,children:[o.jsx("div",{className:`
                                    text-xs font-semibold mb-2 w-6 h-6 flex items-center justify-center rounded-full
                                    ${y?"bg-blue-600 text-white shadow-md":"text-slate-500"}
                                `,children:g.getDate()}),o.jsx("div",{className:"space-y-1 overflow-y-auto max-h-[80px]",children:x.map(v=>{var N;const b=(N=v.technician_visit_at)==null?void 0:N.startsWith(g.toISOString().split("T")[0]);return o.jsx("div",{className:`
                                                    text-[10px] px-1.5 py-1 rounded border truncate cursor-pointer
                                                    ${b?"bg-amber-50 border-amber-200 text-amber-700":"bg-blue-50 border-blue-200 text-blue-700"}
                                                `,title:`${v.terminal_code} - ${v.status}`,children:b?" Visita":`#${v.id.substring(0,6)}`},v.id)})})]},g.toISOString())})})]})]})},wFe=()=>{const{data:e=[],isLoading:t}=qp({terminal:"ALL",status:"TODOS",criticality:"TODAS",search:""}),r=D.useMemo(()=>{const i=e.length,s=e.filter(d=>d.criticality==="ALTA").length,l=e.filter(d=>["CREADA","ENVIADA","PROGRAMADA","EN_REVISION"].includes(d.status)).length,c=e.filter(d=>d.status==="REPARADA"||d.status==="CERRADA").length;return{total:i,critical:s,open:l,resolved:c,avgTime:24.5}},[e]),n=D.useMemo(()=>{const i={};return e.forEach(s=>{i[s.status]=(i[s.status]||0)+1}),Object.entries(i).map(([s,l])=>({name:s.replace("_"," "),value:l}))},[e]),a=D.useMemo(()=>{const i={ALTA:0,MEDIA:0,BAJA:0};return e.forEach(s=>{i[s.criticality]!==void 0&&i[s.criticality]++}),[{name:"Alta",value:i.ALTA,color:"#ef4444"},{name:"Media",value:i.MEDIA,color:"#f59e0b"},{name:"Baja",value:i.BAJA,color:"#3b82f6"}]},[e]);return t?o.jsx("div",{className:"p-8 text-center text-slate-500",children:"Cargando reporte..."}):o.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-100 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Solicitudes Totales"}),o.jsx("p",{className:"text-2xl font-bold text-slate-900",children:r.total})]}),o.jsx("div",{className:"p-3 bg-blue-50 text-blue-600 rounded-lg",children:o.jsx(Z,{name:"file",size:24})})]}),o.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-100 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Crticas (Alta)"}),o.jsx("p",{className:"text-2xl font-bold text-red-600",children:r.critical})]}),o.jsx("div",{className:"p-3 bg-red-50 text-red-600 rounded-lg",children:o.jsx(Z,{name:"alert-circle",size:24})})]}),o.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-100 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Abiertas"}),o.jsx("p",{className:"text-2xl font-bold text-amber-600",children:r.open})]}),o.jsx("div",{className:"p-3 bg-amber-50 text-amber-600 rounded-lg",children:o.jsx(Z,{name:"clock",size:24})})]}),o.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-100 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Tasa Resolucin"}),o.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[r.total>0?Math.round(r.resolved/r.total*100):0,"%"]})]}),o.jsx("div",{className:"p-3 bg-green-50 text-green-600 rounded-lg",children:o.jsx(Z,{name:"check",size:24})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-6",children:"Estado de Solicitudes"}),o.jsx("div",{className:"h-80 w-full",children:o.jsx(ao,{width:"100%",height:"100%",children:o.jsxs(If,{data:n,children:[o.jsx(Lc,{strokeDasharray:"3 3",vertical:!1}),o.jsx(uo,{dataKey:"name",tick:{fontSize:12}}),o.jsx(fo,{}),o.jsx(Vn,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},cursor:{fill:"#f1f5f9"}}),o.jsx(Ii,{dataKey:"value",fill:"#3b82f6",radius:[4,4,0,0],barSize:40})]})})})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-6",children:"Distribucin por Criticidad"}),o.jsx("div",{className:"h-80 w-full flex items-center justify-center",children:o.jsx(ao,{width:"100%",height:"100%",children:o.jsxs(x_,{children:[o.jsx(go,{data:a,cx:"50%",cy:"50%",innerRadius:80,outerRadius:110,paddingAngle:5,dataKey:"value",children:a.map((i,s)=>o.jsx(Rl,{fill:i.color},`cell-${s}`))}),o.jsx(Vn,{}),o.jsx(Nl,{verticalAlign:"bottom",height:36})]})})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-6",children:"Tendencia de Solicitudes (ltimos 7 das)"}),o.jsx("div",{className:"h-64 w-full",children:o.jsx(ao,{width:"100%",height:"100%",children:o.jsxs(I7e,{data:[{day:"Lun",solicitudes:4},{day:"Mar",solicitudes:7},{day:"Mie",solicitudes:5},{day:"Jue",solicitudes:8},{day:"Vie",solicitudes:3},{day:"Sab",solicitudes:9},{day:"Dom",solicitudes:2}],children:[o.jsx(Lc,{strokeDasharray:"3 3",vertical:!1}),o.jsx(uo,{dataKey:"day"}),o.jsx(fo,{}),o.jsx(Vn,{}),o.jsx(xx,{type:"monotone",dataKey:"solicitudes",stroke:"#6366f1",strokeWidth:3,dot:{r:4,strokeWidth:2},activeDot:{r:6}})]})})})]})]})},_Fe=()=>{const{data:e,isLoading:t}=cFe(),r=fFe(),[n,a]=D.useState({enabled:!0,recipients:"",cc_emails:"",subject_template:"Solicitud SRL - {terminal} - {buses}",body_template:`NUEVA SOLICITUD SRL

Terminal: {terminal}
Criticidad: {criticality}
Fecha: {date}

Buses Afectados:
{details}

---
Sistema ASISS`});D.useEffect(()=>{e&&a(e)},[e]);const i=async s=>{s.preventDefault();try{await r.mutateAsync(n),alert("Configuracin guardada correctamente")}catch(l){console.error(l),alert("Error al guardar configuracin")}};return t?o.jsx("div",{className:"p-8 text-center text-slate-500",children:"Cargando configuracin..."}):o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Configuracin de Notificaciones"}),o.jsx("p",{className:"text-slate-500 text-sm",children:"Administre los destinatarios y plantillas de correo automtico"})]}),o.jsxs("div",{className:`
                    px-4 py-2 rounded-full text-sm font-bold flex items-center gap-2
                    ${n.enabled?"bg-green-100 text-green-700":"bg-slate-100 text-slate-500"}
                `,children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${n.enabled?"bg-green-600":"bg-slate-400"}`}),n.enabled?"Sistema Activo":"Sistema Inactivo"]})]}),o.jsxs("form",{onSubmit:i,className:"bg-white p-8 rounded-xl shadow-sm border border-slate-200 space-y-8",children:[o.jsx("div",{className:"flex items-center gap-4 pb-6 border-b border-slate-100",children:o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n.enabled,onChange:s=>a({...n,enabled:s.target.checked})}),o.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"}),o.jsx("span",{className:"ms-3 text-sm font-medium text-slate-700",children:"Habilitar envo automtico de correos"})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Destinatarios Principales"}),o.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Separados por coma (ej: jefe@srl.cl, soporte@srl.cl)"}),o.jsx("input",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:n.recipients||"",onChange:s=>a({...n,recipients:s.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Copia Oculta / CC"}),o.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Separados por coma (ej: supervision@asis.cl)"}),o.jsx("input",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:n.cc_emails||"",onChange:s=>a({...n,cc_emails:s.target.value})})]})]}),o.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-100",children:[o.jsx("h3",{className:"font-semibold text-slate-800",children:"Plantillas de Mensaje"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Asunto del Correo"}),o.jsx("input",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:n.subject_template||"",onChange:s=>a({...n,subject_template:s.target.value})}),o.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Variables disponibles: ","{terminal}",", ","{id}",", ","{date}"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cuerpo del Mensaje"}),o.jsx("textarea",{rows:6,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-mono text-sm",value:n.body_template||"",onChange:s=>a({...n,body_template:s.target.value})}),o.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[o.jsx("strong",{children:"Variables disponibles:"})," ","{terminal}",", ","{id}",", ","{date}",", ","{details}",", ","{status}",", ","{buses}",", ","{criticality}"]})]})]}),o.jsx("div",{className:"pt-6 flex justify-end",children:o.jsxs("button",{type:"submit",disabled:r.isPending,className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-md flex items-center gap-2 transition-all active:scale-95 disabled:opacity-70",children:[r.isPending?o.jsx(Z,{name:"loader",className:"animate-spin",size:20}):o.jsx(Z,{name:"save",size:20}),"Guardar Configuracin"]})})]})]})},NFe=()=>{const[e,t]=D.useState("requests"),[r,n]=D.useState(!1),[a,i]=D.useState(null),s=c=>{i(c||null),n(!0)},l=()=>{n(!1),i(null)};return o.jsxs("div",{className:"min-h-screen bg-slate-50/50 pb-20",children:[o.jsx("header",{className:"bg-white/80 backdrop-blur-md sticky top-0 z-30 border-b border-slate-200 shadow-sm",children:o.jsx("div",{className:"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-4",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-blue-600 rounded-lg shadow-lg shadow-blue-200",children:o.jsx(Z,{name:"wrench",className:"text-white",size:24})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 tracking-tight",children:"Gestin SRL"}),o.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Sistema de Reparaciones y Logstica"})]})]}),o.jsxs("nav",{className:"flex items-center gap-1 bg-slate-100/80 p-1.5 rounded-xl overflow-x-auto no-scrollbar",children:[o.jsx(oy,{active:e==="requests",onClick:()=>t("requests"),icon:"inbox",label:"Solicitudes"}),o.jsx(oy,{active:e==="calendar",onClick:()=>t("calendar"),icon:"calendar",label:"Calendario"}),o.jsx(oy,{active:e==="reports",onClick:()=>t("reports"),icon:"bar-chart",label:"Reportes"}),o.jsx(oy,{active:e==="config",onClick:()=>t("config"),icon:"settings",label:"Configuracin"})]})]})})}),o.jsxs("main",{className:"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-8 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[e==="requests"&&o.jsx(mFe,{onCreate:()=>s(),onView:c=>s(c)}),e==="calendar"&&o.jsx(bFe,{}),e==="reports"&&o.jsx(wFe,{}),e==="config"&&o.jsx(_Fe,{})]}),o.jsx(yFe,{isOpen:r,onClose:l,requestId:a})]})},oy=({active:e,onClick:t,icon:r,label:n})=>o.jsxs("button",{onClick:t,className:`
            flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 whitespace-nowrap
            ${e?"bg-white text-blue-700 shadow-sm ring-1 ring-slate-200":"text-slate-600 hover:bg-slate-200/50 hover:text-slate-900"}
        `,children:[o.jsx(Z,{name:r,size:18,className:e?"text-blue-600":"text-slate-400"}),n]});async function SFe(e){const{data:t,error:r}=await Se.from("aseo_cleaners").insert({name:e,last_active_at:new Date().toISOString()}).select().single();if(r)throw r;return t}async function jFe(e){const{data:t,error:r}=await Se.from("aseo_cleaners").select("*").eq("name",e).single();if(r&&r.code!=="PGRST116")throw r;return t}async function AFe(e){await Se.from("aseo_cleaners").update({last_active_at:new Date().toISOString()}).eq("id",e)}async function xW(e){const t=`${Date.now()}_${e.name}`,{data:r,error:n}=await Se.storage.from("aseo-photos").upload(t,e);if(n)throw console.error("Upload error:",n),new Error(`Error al subir foto: ${n.message}`);const{data:{publicUrl:a}}=Se.storage.from("aseo-photos").getPublicUrl(r.path);return a}async function EFe(e,t,r,n){const a=await xW(n),{data:i,error:s}=await Se.from("aseo_records").insert({cleaner_id:e,cleaner_name:t,...r,photo_url:a}).select().single();if(s)throw s;return await AFe(e),i}async function TFe(e){let t=Se.from("aseo_records").select("*").order("created_at",{ascending:!1});e&&(t=t.eq("cleaner_id",e));const{data:r,error:n}=await t;if(n)throw n;return r||[]}async function CFe(e){const{data:t,error:r}=await Se.from("aseo_tasks").select("*").eq("cleaner_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]}async function kFe(e,t,r){const n={status:t,completed_at:t==="TERMINADA"?new Date().toISOString():null};if(r){const s=await xW(r);n.evidence_url=s}const{data:a,error:i}=await Se.from("aseo_tasks").update(n).eq("id",e).select().single();if(i)throw i;return a}async function OFe(e){const{data:t,error:r}=await Se.from("aseo_notifications").select("*").eq("cleaner_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]}async function PFe(e){await Se.from("aseo_notifications").update({read:!0}).eq("id",e)}function LFe(){const e=St();return Et({mutationFn:t=>SFe(t),onSuccess:()=>{e.invalidateQueries({queryKey:["aseo-cleaners"]})}})}function RFe(e){return Mt({queryKey:["aseo-cleaner",e],queryFn:()=>e?jFe(e):null,enabled:!!e})}function DFe(){const e=St();return Et({mutationFn:({cleanerId:t,cleanerName:r,input:n,photo:a})=>EFe(t,r,n,a),onSuccess:()=>{e.invalidateQueries({queryKey:["aseo-records"]}),e.invalidateQueries({queryKey:["aseo-stats"]})}})}function yW(e){return Mt({queryKey:["aseo-records",e],queryFn:()=>TFe(e)})}function IFe(e){return Mt({queryKey:["aseo-tasks",e],queryFn:()=>e?CFe(e):[],enabled:!!e})}function MFe(){const e=St();return Et({mutationFn:({taskId:t,status:r,evidenceFile:n})=>kFe(t,r,n),onSuccess:()=>{e.invalidateQueries({queryKey:["aseo-tasks"]})}})}function bW(e){return Mt({queryKey:["aseo-notifications",e],queryFn:()=>e?OFe(e):[],enabled:!!e,refetchInterval:1e4})}function FFe(){const e=St();return Et({mutationFn:t=>PFe(t),onSuccess:()=>{e.invalidateQueries({queryKey:["aseo-notifications"]})}})}const $Fe=({onCleanerSet:e})=>{const[t,r]=D.useState(""),[n,a]=D.useState(null),i=LFe(),{data:s}=RFe(n);D.useEffect(()=>{},[]),D.useEffect(()=>{s&&e(s.id,s.name)},[s,e]);const l=async c=>{if(c.preventDefault(),!!t.trim()){a(t.trim());try{const u=await i.mutateAsync(t.trim());e(u.id,u.name)}catch(u){u.code==="23505"?a(t.trim()):(console.error(u),alert("Error al registrar. Intenta nuevamente."))}}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Z,{name:"user",size:40,className:"text-blue-600"})}),o.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Portal Aseo"}),o.jsx("p",{className:"text-slate-600",children:"Ingresa tu nombre para continuar"})]}),o.jsxs("form",{onSubmit:l,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Tu Nombre"}),o.jsx("input",{type:"text",className:"w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-lg",placeholder:"Ej: Juan Prez",value:t,onChange:c=>r(c.target.value),autoFocus:!0})]}),o.jsx("button",{type:"submit",disabled:!t.trim()||i.isPending,className:"w-full px-6 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold rounded-xl shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all text-lg",children:i.isPending?"Registrando...":"Continuar"})]})]})})},BFe=({activeTab:e,onTabChange:t,unreadCount:r=0})=>{const n=[{id:"form",icon:"plus-circle",label:"Registrar"},{id:"records",icon:"list",label:"Registros"},{id:"tasks",icon:"check-square",label:"Tareas"},{id:"stats",icon:"bar-chart-2",label:"Resumen"},{id:"notifications",icon:"bell",label:"Avisos"}];return o.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 shadow-lg z-50",children:o.jsx("div",{className:"flex items-center justify-around px-2 py-2",children:n.map(a=>o.jsxs("button",{onClick:()=>t(a.id),className:`flex flex-col items-center justify-center px-3 py-2 rounded-xl transition-all ${e===a.id?"bg-blue-50 text-blue-600":"text-slate-500 hover:text-slate-700"}`,children:[o.jsxs("div",{className:"relative",children:[o.jsx(Z,{name:a.icon,size:24}),a.id==="notifications"&&r>0&&o.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:r>9?"9+":r})]}),o.jsx("span",{className:"text-xs font-semibold mt-1",children:a.label})]},a.id))})})},LD=["EL_ROBLE","LA_REINA","MARIA_ANGELICA","EL_DESCANSO"],UFe=[{value:"BARRIDO",label:"Barrido",color:"from-blue-500 to-blue-600"},{value:"BARRIDO_Y_TRAPEADO",label:"Barrido + Trapeado",color:"from-indigo-500 to-indigo-600"},{value:"FULL",label:"Aseo Completo",color:"from-purple-500 to-purple-600"}],zFe=({cleanerId:e,cleanerName:t})=>{const[r,n]=D.useState(""),[a,i]=D.useState(LD[0]),[s,l]=D.useState("BARRIDO"),[c,u]=D.useState(!1),[d,f]=D.useState(!1),[p,h]=D.useState(null),[g,m]=D.useState(null),x=DFe(),y=b=>{var _;const N=(_=b.target.files)==null?void 0:_[0];if(N){h(N);const E=new FileReader;E.onloadend=()=>m(E.result),E.readAsDataURL(N)}},v=async b=>{if(b.preventDefault(),!r.trim()){alert("Ingresa el nmero de patente");return}if(!p){alert("Debes tomar una foto");return}try{await x.mutateAsync({cleanerId:e,cleanerName:t,input:{bus_ppu:r.trim().toUpperCase(),terminal_code:a,cleaning_type:s,graffiti_removed:c,stickers_removed:d},photo:p}),n(""),u(!1),f(!1),h(null),m(null),alert("Registro guardado exitosamente!")}catch(N){console.error(N),alert("Error al guardar. Intenta nuevamente.")}};return o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Nuevo Registro"}),o.jsxs("form",{onSubmit:v,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Patente del Bus"}),o.jsx("input",{type:"text",className:"w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-lg uppercase",placeholder:"Ej: ABCD12",value:r,onChange:b=>n(b.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Terminal"}),o.jsx("select",{className:"w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-lg",value:a,onChange:b=>i(b.target.value),children:LD.map(b=>o.jsx("option",{value:b,children:b.replace(/_/g," ")},b))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Tipo de Aseo"}),o.jsx("div",{className:"grid grid-cols-1 gap-2",children:UFe.map(b=>o.jsx("button",{type:"button",onClick:()=>l(b.value),className:`p-4 rounded-xl font-bold transition-all ${s===b.value?`bg-gradient-to-r ${b.color} text-white shadow-lg scale-105`:"bg-slate-100 text-slate-700 border-2 border-slate-300"}`,children:b.label},b.value))})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("button",{type:"button",onClick:()=>u(!c),className:`w-full p-4 rounded-xl font-semibold transition-all ${c?"bg-emerald-500 text-white shadow-lg":"bg-slate-100 text-slate-700 border-2 border-slate-300"}`,children:[o.jsx(Z,{name:c?"check-circle":"x-circle",size:20,className:"inline mr-2"}),"Graffitis Retirados"]}),o.jsxs("button",{type:"button",onClick:()=>f(!d),className:`w-full p-4 rounded-xl font-semibold transition-all ${d?"bg-emerald-500 text-white shadow-lg":"bg-slate-100 text-slate-700 border-2 border-slate-300"}`,children:[o.jsx(Z,{name:d?"check-circle":"x-circle",size:20,className:"inline mr-2"}),"Stickers Retirados"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Foto (Obligatorio)"}),o.jsx("input",{type:"file",accept:"image/*",capture:"environment",id:"photo-upload",className:"hidden",onChange:y}),o.jsx("label",{htmlFor:"photo-upload",className:"block w-full cursor-pointer",children:g?o.jsxs("div",{className:"relative rounded-xl overflow-hidden border-4 border-emerald-500",children:[o.jsx("img",{src:g,alt:"Preview",className:"w-full h-48 object-cover"}),o.jsxs("div",{className:"absolute top-2 right-2 bg-emerald-500 text-white px-3 py-1 rounded-full text-xs font-bold",children:[o.jsx(Z,{name:"check",size:14,className:"inline mr-1"}),"Foto capturada"]})]}):o.jsxs("div",{className:"border-4 border-dashed border-slate-300 rounded-xl p-8 text-center hover:border-blue-400 transition-colors",children:[o.jsx(Z,{name:"image",size:48,className:"text-slate-400 mx-auto mb-3"}),o.jsx("p",{className:"text-slate-600 font-semibold",children:"Toca para tomar foto"})]})})]}),o.jsx("button",{type:"submit",disabled:x.isPending||!p,className:"w-full px-6 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold rounded-xl shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all text-lg",children:x.isPending?"Guardando...":"Guardar Registro"})]})]})})},RD={BARRIDO:"Barrido",BARRIDO_Y_TRAPEADO:"Barrido + Trapeado",FULL:"Aseo Completo"},qFe=({cleanerId:e})=>{const{data:t=[],isLoading:r}=yW(e),[n,a]=D.useState(null);return r?o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[o.jsx(Z,{name:"loader",size:32,className:"text-blue-600 mx-auto mb-2 animate-spin"}),o.jsx("p",{className:"text-slate-600",children:"Cargando registros..."})]}):t.length===0?o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[o.jsx(Z,{name:"inbox",size:48,className:"text-slate-300 mx-auto mb-3"}),o.jsx("p",{className:"text-slate-600 font-semibold",children:"No tienes registros an"}),o.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Comienza registrando un aseo"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Mis Registros"}),t.map(i=>o.jsx("div",{onClick:()=>a(i),className:"bg-white rounded-xl shadow-md p-4 cursor-pointer hover:shadow-lg transition-shadow",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("img",{src:i.photo_url,alt:"Foto",className:"w-20 h-20 object-cover rounded-lg"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-lg text-slate-900",children:i.bus_ppu}),o.jsx("p",{className:"text-sm text-slate-600",children:RD[i.cleaning_type]}),o.jsx("p",{className:"text-xs text-slate-500 mt-1",children:new Date(i.created_at).toLocaleString("es-CL",{dateStyle:"short",timeStyle:"short"})})]}),o.jsx(Z,{name:"chevron-right",size:20,className:"text-slate-400"})]})},i.id))]}),n&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60",onClick:()=>a(null),children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",onClick:i=>i.stopPropagation(),children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:n.photo_url,alt:"Foto",className:"w-full h-64 object-cover rounded-t-2xl"}),o.jsx("button",{onClick:()=>a(null),className:"absolute top-4 right-4 w-10 h-10 bg-black/50 hover:bg-black/70 text-white rounded-full flex items-center justify-center",children:o.jsx(Z,{name:"x",size:24})})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:n.bus_ppu}),o.jsx("p",{className:"text-slate-600",children:n.terminal_code.replace(/_/g," ")})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs text-blue-600 font-semibold mb-1",children:"Tipo de Aseo"}),o.jsx("p",{className:"text-sm font-bold text-blue-900",children:RD[n.cleaning_type]})]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs text-slate-600 font-semibold mb-1",children:"Fecha"}),o.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(n.created_at).toLocaleDateString("es-CL")})]})]}),o.jsxs("div",{className:"flex gap-2",children:[n.graffiti_removed&&o.jsxs("span",{className:"px-3 py-1 bg-emerald-100 text-emerald-700 text-sm font-semibold rounded-full",children:[o.jsx(Z,{name:"check",size:14,className:"inline mr-1"}),"Graffiti retirado"]}),n.stickers_removed&&o.jsxs("span",{className:"px-3 py-1 bg-emerald-100 text-emerald-700 text-sm font-semibold rounded-full",children:[o.jsx(Z,{name:"check",size:14,className:"inline mr-1"}),"Stickers retirados"]})]})]})]})})]})},HFe=({cleanerId:e})=>{const{data:t=[],isLoading:r}=IFe(e),n=MFe(),[a,i]=D.useState(null),[s,l]=D.useState(null),[c,u]=D.useState(null),d=async(g,m)=>{const x=m==="PENDIENTE"?"TERMINADA":"PENDIENTE";if(x==="TERMINADA"&&!a){u(g);return}try{await n.mutateAsync({taskId:g,status:x,evidenceFile:a||void 0}),i(null),l(null),u(null)}catch(y){console.error(y),alert("Error al actualizar tarea")}},f=g=>{var x;const m=(x=g.target.files)==null?void 0:x[0];if(m){i(m);const y=new FileReader;y.onloadend=()=>l(y.result),y.readAsDataURL(m)}};if(r)return o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[o.jsx(Z,{name:"loader",size:32,className:"text-blue-600 mx-auto mb-2 animate-spin"}),o.jsx("p",{className:"text-slate-600",children:"Cargando tareas..."})]});const p=t.filter(g=>g.status==="PENDIENTE"),h=t.filter(g=>g.status==="TERMINADA");return o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Mis Tareas"}),p.length>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h3",{className:"font-semibold text-amber-600 flex items-center gap-2",children:[o.jsx(Z,{name:"clock",size:18}),"Pendientes (",p.length,")"]}),p.map(g=>o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4",children:[o.jsx("div",{className:"flex items-start justify-between mb-3",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-bold text-lg text-slate-900",children:g.title}),g.description&&o.jsx("p",{className:"text-sm text-slate-600 mt-1",children:g.description}),o.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:["Asignada: ",new Date(g.created_at).toLocaleDateString("es-CL")]})]})}),c===g.id&&o.jsxs("div",{className:"mb-3",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Foto de evidencia (opcional)"}),o.jsx("input",{type:"file",accept:"image/*",capture:"environment",id:`evidence-${g.id}`,className:"hidden",onChange:f}),o.jsx("label",{htmlFor:`evidence-${g.id}`,className:"block w-full cursor-pointer",children:s?o.jsx("img",{src:s,alt:"Evidencia",className:"w-full h-32 object-cover rounded-lg"}):o.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-4 text-center",children:[o.jsx(Z,{name:"image",size:24,className:"text-slate-400 mx-auto"}),o.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Tomar foto"})]})})]}),o.jsx("button",{onClick:()=>d(g.id,g.status),disabled:n.isPending,className:"w-full px-4 py-3 bg-emerald-600 hover:bg-emerald-700 text-white font-semibold rounded-xl transition-colors disabled:opacity-50",children:n.isPending?"Actualizando...":"Marcar como Terminada"})]},g.id))]}),h.length>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h3",{className:"font-semibold text-emerald-600 flex items-center gap-2",children:[o.jsx(Z,{name:"check-circle",size:18}),"Completadas (",h.length,")"]}),h.map(g=>o.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-xl p-4",children:[o.jsx("h4",{className:"font-bold text-slate-900",children:g.title}),g.description&&o.jsx("p",{className:"text-sm text-slate-600 mt-1",children:g.description}),g.evidence_url&&o.jsx("img",{src:g.evidence_url,alt:"Evidencia",className:"w-full h-32 object-cover rounded-lg mt-3"}),o.jsxs("p",{className:"text-xs text-emerald-600 mt-2 font-semibold",children:["Completada: ",g.completed_at?new Date(g.completed_at).toLocaleDateString("es-CL"):"-"]})]},g.id))]}),t.length===0&&o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[o.jsx(Z,{name:"check-circle",size:48,className:"text-slate-300 mx-auto mb-3"}),o.jsx("p",{className:"text-slate-600 font-semibold",children:"No tienes tareas asignadas"})]})]})},WFe={BARRIDO:"Barrido",BARRIDO_Y_TRAPEADO:"Barrido + Trapeado",FULL:"Aseo Completo"},VFe=({cleanerId:e})=>{const{data:t=[]}=yW(e),r=new Date;r.setHours(0,0,0,0);const n=new Date(r);n.setDate(n.getDate()-7);const a=t.filter(l=>new Date(l.created_at)>=r),i=t.filter(l=>new Date(l.created_at)>=n),s={};return t.forEach(l=>{s[l.cleaning_type]=(s[l.cleaning_type]||0)+1}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Resumen"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white",children:[o.jsx(Z,{name:"calendar",size:32,className:"mb-2 opacity-80"}),o.jsx("p",{className:"text-3xl font-bold",children:a.length}),o.jsx("p",{className:"text-sm opacity-90",children:"Hoy"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-xl shadow-lg p-6 text-white",children:[o.jsx(Z,{name:"bar-chart",size:32,className:"mb-2 opacity-80"}),o.jsx("p",{className:"text-3xl font-bold",children:i.length}),o.jsx("p",{className:"text-sm opacity-90",children:"Esta semana"})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:[o.jsx(Z,{name:"sparkles",size:40,className:"mb-2 opacity-80"}),o.jsx("p",{className:"text-4xl font-bold",children:t.length}),o.jsx("p",{className:"text-lg opacity-90",children:"Total de registros"})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[o.jsx("h3",{className:"font-bold text-slate-900 mb-4",children:"Por Tipo de Aseo"}),o.jsx("div",{className:"space-y-3",children:Object.entries(s).map(([l,c])=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-slate-700",children:WFe[l]}),o.jsx("span",{className:"font-bold text-blue-600",children:c})]},l))})]})]})},GFe={TAREA_NUEVA:"check-square",OBSERVACION:"message-circle",CAMBIO_ESTADO:"info"},KFe={TAREA_NUEVA:"from-blue-500 to-blue-600",OBSERVACION:"from-amber-500 to-amber-600",CAMBIO_ESTADO:"from-slate-500 to-slate-600"},YFe=({cleanerId:e})=>{const{data:t=[],isLoading:r}=bW(e),n=FFe(),a=async i=>{try{await n.mutateAsync(i)}catch(s){console.error(s)}};return r?o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[o.jsx(Z,{name:"loader",size:32,className:"text-blue-600 mx-auto mb-2 animate-spin"}),o.jsx("p",{className:"text-slate-600",children:"Cargando notificaciones..."})]}):t.length===0?o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[o.jsx(Z,{name:"bell",size:48,className:"text-slate-300 mx-auto mb-3"}),o.jsx("p",{className:"text-slate-600 font-semibold",children:"No tienes notificaciones"})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Notificaciones"}),o.jsx("div",{className:"space-y-3",children:t.map(i=>o.jsx("div",{onClick:()=>!i.read&&a(i.id),className:`rounded-xl shadow-md p-4 cursor-pointer transition-all ${i.read?"bg-white":"bg-gradient-to-r "+KFe[i.type]+" text-white shadow-lg"}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${i.read?"bg-slate-100":"bg-white/20"}`,children:o.jsx(Z,{name:GFe[i.type],size:20,className:i.read?"text-slate-600":"text-white"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:`font-bold mb-1 ${i.read?"text-slate-900":"text-white"}`,children:i.title}),i.message&&o.jsx("p",{className:`text-sm ${i.read?"text-slate-600":"text-white/90"}`,children:i.message}),o.jsx("p",{className:`text-xs mt-2 ${i.read?"text-slate-400":"text-white/70"}`,children:new Date(i.created_at).toLocaleString("es-CL",{dateStyle:"short",timeStyle:"short"})})]}),!i.read&&o.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})]})},i.id))})]})},XFe=()=>{const[e,t]=D.useState(null),[r,n]=D.useState(null),[a,i]=D.useState("form"),{data:s=[]}=bW(e||void 0),l=s.filter(u=>!u.read).length,c=(u,d)=>{t(u),n(d)};return!e||!r?o.jsx($Fe,{onCleanerSet:c}):o.jsxs("div",{className:"min-h-screen bg-slate-50 pb-20",children:[o.jsx("header",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-4 py-4 shadow-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold",children:"Portal Aseo"}),o.jsxs("p",{className:"text-sm text-blue-100",children:["Hola, ",r]})]}),o.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-lg font-bold",children:r.charAt(0).toUpperCase()})})]})}),o.jsxs("main",{className:"p-4",children:[a==="form"&&o.jsx(zFe,{cleanerId:e,cleanerName:r}),a==="records"&&o.jsx(qFe,{cleanerId:e}),a==="tasks"&&o.jsx(HFe,{cleanerId:e}),a==="stats"&&o.jsx(VFe,{cleanerId:e}),a==="notifications"&&o.jsx(YFe,{cleanerId:e})]}),o.jsx(BFe,{activeTab:a,onTabChange:i,unreadCount:l})]})},JFe=()=>{const e=_r(a=>a.session),t=_r(a=>a.hydrateSession),[r,n]=D.useState(!0);return D.useEffect(()=>{t().finally(()=>n(!1))},[t]),r?o.jsx(Bn,{label:"Validando sesin"}):e?o.jsx(PM,{}):o.jsx(OM,{to:"/",replace:!0})},QFe=()=>o.jsx(VX,{children:o.jsxs(FX,{children:[o.jsx(Wn,{path:"/",element:o.jsx(nJ,{})}),o.jsx(Wn,{element:o.jsx(JFe,{}),children:o.jsxs(Wn,{element:o.jsx(mee,{}),children:[o.jsx(Wn,{path:"/personal",element:o.jsx(Dle,{})}),o.jsx(Wn,{path:"/reuniones",element:o.jsx(Ece,{})}),o.jsx(Wn,{path:"/tareas",element:o.jsx(vue,{})}),o.jsx(Wn,{path:"/informativos",element:o.jsx(yue,{})}),o.jsx(Wn,{path:"/asistencia",element:o.jsx(ome,{})}),o.jsx(Wn,{path:"/credenciales",element:o.jsx(oMe,{})}),o.jsx(Wn,{path:"/solicitudes",element:o.jsx(cMe,{})}),o.jsx(Wn,{path:"/minicheck/extintor",element:o.jsx(NMe,{})}),o.jsx(Wn,{path:"/minicheck/tag",element:o.jsx(SMe,{})}),o.jsx(Wn,{path:"/minicheck/mobileye",element:o.jsx(jMe,{})}),o.jsx(Wn,{path:"/minicheck/odometro",element:o.jsx(AMe,{})}),o.jsx(Wn,{path:"/minicheck/publicidad",element:o.jsx(EMe,{})}),o.jsx(Wn,{path:"/estado-flota",element:o.jsx(CMe,{})}),o.jsx(Wn,{path:"/insumos",element:o.jsx(sFe,{})}),o.jsx(Wn,{path:"/srl",element:o.jsx(NFe,{})})]})}),o.jsx(Wn,{path:"/aseo",element:o.jsx(XFe,{})}),o.jsx(Wn,{path:"*",element:o.jsx(OM,{to:"/",replace:!0})})]})});GN.createRoot(document.getElementById("root")).render(o.jsx(ye.StrictMode,{children:o.jsx(VY,{children:o.jsx(QFe,{})})}));export{zr as _,Zx as c,Dr as g};
